(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function a(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=a(n);fetch(n.href,i)}})();const Gs=!1;var es=Array.isArray,Po=Array.prototype.indexOf,As=Array.from,Si=Object.defineProperty,yr=Object.getOwnPropertyDescriptor,Ti=Object.getOwnPropertyDescriptors,Lo=Object.prototype,zo=Array.prototype,yn=Object.getPrototypeOf,Un=Object.isExtensible;function Io(e){return typeof e=="function"}const Xt=()=>{};function Ro(e){return e()}function bs(e){for(var t=0;t<e.length;t++)e[t]()}function Ei(){var e,t,a=new Promise((r,n)=>{e=r,t=n});return{promise:a,resolve:e,reject:t}}const Mt=2,wn=4,Cs=8,jo=1<<24,ba=16,La=32,cr=64,Ps=128,oa=512,Et=1024,Yt=2048,la=4096,Jt=8192,$a=16384,Ls=32768,sr=65536,Yn=1<<17,$i=1<<18,Mr=1<<19,Mi=1<<20,Sa=1<<25,nr=32768,Zs=1<<21,kn=1<<22,Fa=1<<23,Ma=Symbol("$state"),No=Symbol("legacy props"),Oo=Symbol(""),mr=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function xn(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Do(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Fo(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function qo(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Bo(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Uo(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Yo(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function Ho(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Vo(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Qo(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Wo(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Xo=1,Ko=2,Ai=4,Go=8,Zo=16,Jo=1,el=2,tl=4,al=8,rl=16,sl=1,nl=2,il=4,ol=1,ll=2,Pt=Symbol(),cl="http://www.w3.org/1999/xhtml";function dl(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function vl(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Ci(e){return e===this.v}function Sn(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function Pi(e){return!Sn(e,this.v)}let Ar=!1,ul=!1;function fl(){Ar=!0}let ft=null;function kr(e){ft=e}function St(e,t=!1,a){ft={p:ft,i:!1,c:null,e:null,s:e,x:null,l:Ar&&!t?{s:null,u:null,$:[]}:null}}function Tt(e){var t=ft,a=t.e;if(a!==null){t.e=null;for(var r of a)Qi(r)}return t.i=!0,ft=t.p,{}}function ts(){return!Ar||ft!==null&&ft.l===null}let Xa=[];function Li(){var e=Xa;Xa=[],bs(e)}function dr(e){if(Xa.length===0&&!Fr){var t=Xa;queueMicrotask(()=>{t===Xa&&Li()})}Xa.push(e)}function hl(){for(;Xa.length>0;)Li()}function zi(e){var t=nt;if(t===null)return rt.f|=Fa,e;if((t.f&Ls)===0){if((t.f&Ps)===0)throw e;t.b.error(e)}else xr(e,t)}function xr(e,t){for(;t!==null;){if((t.f&Ps)!==0)try{t.b.error(e);return}catch(a){e=a}t=t.parent}throw e}const os=new Set;let st=null,Dr=null,na=null,ra=[],zs=null,Js=!1,Fr=!1;class fa{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#a=0;#r=0;#l=null;#n=new Set;#s=new Set;skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#r>0}process(t){ra=[],Dr=null,this.apply();var a={parent:null,effect:null,effects:[],render_effects:[]};for(const r of t)this.#i(r,a);this.is_fork||this.#d(),this.is_deferred()?(this.#o(a.effects),this.#o(a.render_effects)):(Dr=this,st=null,Hn(a.render_effects),Hn(a.effects),Dr=null,this.#l?.resolve()),na=null}#i(t,a){t.f^=Et;for(var r=t.first;r!==null;){var n=r.f,i=(n&(La|cr))!==0,c=i&&(n&Et)!==0,o=c||(n&Jt)!==0||this.skipped_effects.has(r);if((r.f&Ps)!==0&&r.b?.is_pending()&&(a={parent:a,effect:r,effects:[],render_effects:[]}),!o&&r.fn!==null){i?r.f^=Et:(n&wn)!==0?a.effects.push(r):Pr(r)&&((r.f&ba)!==0&&this.#n.add(r),Sr(r));var v=r.first;if(v!==null){r=v;continue}}var l=r.parent;for(r=r.next;r===null&&l!==null;)l===a.effect&&(this.#o(a.effects),this.#o(a.render_effects),a=a.parent),r=l.next,l=l.parent}}#o(t){for(const a of t)(a.f&Yt)!==0?this.#n.add(a):(a.f&la)!==0&&this.#s.add(a),this.#c(a.deps),$t(a,Et)}#c(t){if(t!==null)for(const a of t)(a.f&Mt)===0||(a.f&nr)===0||(a.f^=nr,this.#c(a.deps))}capture(t,a){this.previous.has(t)||this.previous.set(t,a),(t.f&Fa)===0&&(this.current.set(t,t.v),na?.set(t,t.v))}activate(){st=this,this.apply()}deactivate(){st===this&&(st=null,na=null)}flush(){if(this.activate(),ra.length>0){if(Ii(),st!==null&&st!==this)return}else this.#a===0&&this.process([]);this.deactivate()}discard(){for(const t of this.#t)t(this);this.#t.clear()}#d(){if(this.#r===0){for(const t of this.#e)t();this.#e.clear()}this.#a===0&&this.#v()}#v(){if(os.size>1){this.previous.clear();var t=na,a=!0,r={parent:null,effect:null,effects:[],render_effects:[]};for(const i of os){if(i===this){a=!1;continue}const c=[];for(const[v,l]of this.current){if(i.current.has(v))if(a&&l!==i.current.get(v))i.current.set(v,l);else continue;c.push(v)}if(c.length===0)continue;const o=[...i.current.keys()].filter(v=>!this.current.has(v));if(o.length>0){var n=ra;ra=[];const v=new Set,l=new Map;for(const u of c)Ri(u,o,v,l);if(ra.length>0){st=i,i.apply();for(const u of ra)i.#i(u,r);i.deactivate()}ra=n}}st=null,na=t}this.committed=!0,os.delete(this)}increment(t){this.#a+=1,t&&(this.#r+=1)}decrement(t){this.#a-=1,t&&(this.#r-=1),this.revive()}revive(){for(const t of this.#n)this.#s.delete(t),$t(t,Yt),ir(t);for(const t of this.#s)$t(t,la),ir(t);this.flush()}oncommit(t){this.#e.add(t)}ondiscard(t){this.#t.add(t)}settled(){return(this.#l??=Ei()).promise}static ensure(){if(st===null){const t=st=new fa;os.add(st),Fr||fa.enqueue(()=>{st===t&&t.flush()})}return st}static enqueue(t){dr(t)}apply(){}}function pl(e){var t=Fr;Fr=!0;try{for(var a;;){if(hl(),ra.length===0&&(st?.flush(),ra.length===0))return zs=null,a;Ii()}}finally{Fr=t}}function Ii(){var e=Ja;Js=!0;var t=null;try{var a=0;for(ws(!0);ra.length>0;){var r=fa.ensure();if(a++>1e3){var n,i;gl()}r.process(ra),qa.clear()}}finally{Js=!1,ws(e),zs=null}}function gl(){try{Uo()}catch(e){xr(e,zs)}}let ka=null;function Hn(e){var t=e.length;if(t!==0){for(var a=0;a<t;){var r=e[a++];if((r.f&($a|Jt))===0&&Pr(r)&&(ka=new Set,Sr(r),r.deps===null&&r.first===null&&r.nodes===null&&(r.teardown===null&&r.ac===null?Gi(r):r.fn=null),ka?.size>0)){qa.clear();for(const n of ka){if((n.f&($a|Jt))!==0)continue;const i=[n];let c=n.parent;for(;c!==null;)ka.has(c)&&(ka.delete(c),i.push(c)),c=c.parent;for(let o=i.length-1;o>=0;o--){const v=i[o];(v.f&($a|Jt))===0&&Sr(v)}}ka.clear()}}ka=null}}function Ri(e,t,a,r){if(!a.has(e)&&(a.add(e),e.reactions!==null))for(const n of e.reactions){const i=n.f;(i&Mt)!==0?Ri(n,t,a,r):(i&(kn|ba))!==0&&(i&Yt)===0&&ji(n,t,r)&&($t(n,Yt),ir(n))}}function ji(e,t,a){const r=a.get(e);if(r!==void 0)return r;if(e.deps!==null)for(const n of e.deps){if(t.includes(n))return!0;if((n.f&Mt)!==0&&ji(n,t,a))return a.set(n,!0),!0}return a.set(e,!1),!1}function ir(e){for(var t=zs=e;t.parent!==null;){t=t.parent;var a=t.f;if(Js&&t===nt&&(a&ba)!==0&&(a&$i)===0)return;if((a&(cr|La))!==0){if((a&Et)===0)return;t.f^=Et}}ra.push(t)}function _l(e){let t=0,a=or(0),r;return()=>{Vr()&&(s(a),Cr(()=>(t===0&&(r=b(()=>e(()=>qr(a)))),t+=1,()=>{dr(()=>{t-=1,t===0&&(r?.(),r=void 0,qr(a))})})))}}var ml=sr|Mr|Ps;function bl(e,t,a){new yl(e,t,a)}class yl{parent;#e=!1;#t;#a=null;#r;#l;#n;#s=null;#i=null;#o=null;#c=null;#d=null;#v=0;#u=0;#h=!1;#f=null;#b=_l(()=>(this.#f=or(this.#v),()=>{this.#f=null}));constructor(t,a,r){this.#t=t,this.#r=a,this.#l=r,this.parent=nt.b,this.#e=!!this.#r.pending,this.#n=En(()=>{nt.b=this;{var n=this.#_();try{this.#s=sa(()=>r(n))}catch(i){this.error(i)}this.#u>0?this.#g():this.#e=!1}return()=>{this.#d?.remove()}},ml)}#y(){try{this.#s=sa(()=>this.#l(this.#t))}catch(t){this.error(t)}this.#e=!1}#w(){const t=this.#r.pending;t&&(this.#i=sa(()=>t(this.#t)),fa.enqueue(()=>{var a=this.#_();this.#s=this.#p(()=>(fa.ensure(),sa(()=>this.#l(a)))),this.#u>0?this.#g():(Za(this.#i,()=>{this.#i=null}),this.#e=!1)}))}#_(){var t=this.#t;return this.#e&&(this.#d=Aa(),this.#t.before(this.#d),t=this.#d),t}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#r.pending}#p(t){var a=nt,r=rt,n=ft;ma(this.#n),qt(this.#n),kr(this.#n.ctx);try{return t()}catch(i){return zi(i),null}finally{ma(a),qt(r),kr(n)}}#g(){const t=this.#r.pending;this.#s!==null&&(this.#c=document.createDocumentFragment(),this.#c.append(this.#d),eo(this.#s,this.#c)),this.#i===null&&(this.#i=sa(()=>t(this.#t)))}#m(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#m(t);return}this.#u+=t,this.#u===0&&(this.#e=!1,this.#i&&Za(this.#i,()=>{this.#i=null}),this.#c&&(this.#t.before(this.#c),this.#c=null))}update_pending_count(t){this.#m(t),this.#v+=t,this.#f&&lr(this.#f,this.#v)}get_effect_pending(){return this.#b(),s(this.#f)}error(t){var a=this.#r.onerror;let r=this.#r.failed;if(this.#h||!a&&!r)throw t;this.#s&&(Bt(this.#s),this.#s=null),this.#i&&(Bt(this.#i),this.#i=null),this.#o&&(Bt(this.#o),this.#o=null);var n=!1,i=!1;const c=()=>{if(n){vl();return}n=!0,i&&Wo(),fa.ensure(),this.#v=0,this.#o!==null&&Za(this.#o,()=>{this.#o=null}),this.#e=this.has_pending_snippet(),this.#s=this.#p(()=>(this.#h=!1,sa(()=>this.#l(this.#t)))),this.#u>0?this.#g():this.#e=!1};var o=rt;try{qt(null),i=!0,a?.(t,c),i=!1}catch(v){xr(v,this.#n&&this.#n.parent)}finally{qt(o)}r&&dr(()=>{this.#o=this.#p(()=>{fa.ensure(),this.#h=!0;try{return sa(()=>{r(this.#t,()=>t,()=>c)})}catch(v){return xr(v,this.#n.parent),null}finally{this.#h=!1}})})}}function wl(e,t,a,r){const n=ts()?as:pt;if(a.length===0&&e.length===0){r(t.map(n));return}var i=st,c=nt,o=kl();function v(){Promise.all(a.map(l=>xl(l))).then(l=>{o();try{r([...t.map(n),...l])}catch(u){(c.f&$a)===0&&xr(u,c)}i?.deactivate(),ys()}).catch(l=>{xr(l,c)})}e.length>0?Promise.all(e).then(()=>{o();try{return v()}finally{i?.deactivate(),ys()}}):v()}function kl(){var e=nt,t=rt,a=ft,r=st;return function(i=!0){ma(e),qt(t),kr(a),i&&r?.activate()}}function ys(){ma(null),qt(null),kr(null)}function as(e){var t=Mt|Yt,a=rt!==null&&(rt.f&Mt)!==0?rt:null;return nt!==null&&(nt.f|=Mr),{ctx:ft,deps:null,effects:null,equals:Ci,f:t,fn:e,reactions:null,rv:0,v:Pt,wv:0,parent:a??nt,ac:null}}function xl(e,t){let a=nt;a===null&&Do();var r=a.b,n=void 0,i=or(Pt),c=!rt,o=new Map;return Il(()=>{var v=Ei();n=v.promise;try{Promise.resolve(e()).then(v.resolve,v.reject).then(()=>{l===st&&l.committed&&l.deactivate(),ys()})}catch(f){v.reject(f),ys()}var l=st;if(c){var u=!r.is_pending();r.update_pending_count(1),l.increment(u),o.get(l)?.reject(mr),o.delete(l),o.set(l,v)}const h=(f,p=void 0)=>{if(l.activate(),p)p!==mr&&(i.f|=Fa,lr(i,p));else{(i.f&Fa)!==0&&(i.f^=Fa),lr(i,f);for(const[x,T]of o){if(o.delete(x),x===l)break;T.reject(mr)}}c&&(r.update_pending_count(-1),l.decrement(u))};v.promise.then(h,f=>h(null,f||"unknown"))}),ss(()=>{for(const v of o.values())v.reject(mr)}),new Promise(v=>{function l(u){function h(){u===n?v(i):l(n)}u.then(h,h)}l(n)})}function zr(e){const t=as(e);return to(t),t}function pt(e){const t=as(e);return t.equals=Pi,t}function Ni(e){var t=e.effects;if(t!==null){e.effects=null;for(var a=0;a<t.length;a+=1)Bt(t[a])}}function Sl(e){for(var t=e.parent;t!==null;){if((t.f&Mt)===0)return(t.f&$a)===0?t:null;t=t.parent}return null}function Tn(e){var t,a=nt;ma(Sl(e));try{e.f&=~nr,Ni(e),t=no(e)}finally{ma(a)}return t}function Oi(e){var t=Tn(e);if(e.equals(t)||(st?.is_fork||(e.v=t),e.wv=ro()),!ur)if(na!==null)(Vr()||st?.is_fork)&&na.set(e,t);else{var a=(e.f&oa)===0?la:Et;$t(e,a)}}let en=new Set;const qa=new Map;let Di=!1;function or(e,t){var a={f:0,v:e,reactions:null,equals:Ci,rv:0,wv:0};return a}function za(e,t){const a=or(e);return to(a),a}function $(e,t=!1,a=!0){const r=or(e);return t||(r.equals=Pi),Ar&&a&&ft!==null&&ft.l!==null&&(ft.l.s??=[]).push(r),r}function ls(e,t){return g(e,b(()=>s(e))),t}function g(e,t,a=!1){rt!==null&&(!ha||(rt.f&Yn)!==0)&&ts()&&(rt.f&(Mt|ba|kn|Yn))!==0&&!Ca?.includes(e)&&Qo();let r=a?br(t):t;return lr(e,r)}function lr(e,t){if(!e.equals(t)){var a=e.v;ur?qa.set(e,t):qa.set(e,a),e.v=t;var r=fa.ensure();r.capture(e,a),(e.f&Mt)!==0&&((e.f&Yt)!==0&&Tn(e),$t(e,(e.f&oa)!==0?Et:la)),e.wv=ro(),Fi(e,Yt),ts()&&nt!==null&&(nt.f&Et)!==0&&(nt.f&(La|cr))===0&&(aa===null?Ol([e]):aa.push(e)),!r.is_fork&&en.size>0&&!Di&&Tl()}return t}function Tl(){Di=!1;var e=Ja;ws(!0);const t=Array.from(en);try{for(const a of t)(a.f&Et)!==0&&$t(a,la),Pr(a)&&Sr(a)}finally{ws(e)}en.clear()}function qr(e){g(e,e.v+1)}function Fi(e,t){var a=e.reactions;if(a!==null)for(var r=ts(),n=a.length,i=0;i<n;i++){var c=a[i],o=c.f;if(!(!r&&c===nt)){var v=(o&Yt)===0;if(v&&$t(c,t),(o&Mt)!==0){var l=c;na?.delete(l),(o&nr)===0&&(o&oa&&(c.f|=nr),Fi(l,la))}else v&&((o&ba)!==0&&ka!==null&&ka.add(c),ir(c))}}}function br(e){if(typeof e!="object"||e===null||Ma in e)return e;const t=yn(e);if(t!==Lo&&t!==zo)return e;var a=new Map,r=es(e),n=za(0),i=er,c=o=>{if(er===i)return o();var v=rt,l=er;qt(null),Xn(i);var u=o();return qt(v),Xn(l),u};return r&&a.set("length",za(e.length)),new Proxy(e,{defineProperty(o,v,l){(!("value"in l)||l.configurable===!1||l.enumerable===!1||l.writable===!1)&&Ho();var u=a.get(v);return u===void 0?u=c(()=>{var h=za(l.value);return a.set(v,h),h}):g(u,l.value,!0),!0},deleteProperty(o,v){var l=a.get(v);if(l===void 0){if(v in o){const u=c(()=>za(Pt));a.set(v,u),qr(n)}}else g(l,Pt),qr(n);return!0},get(o,v,l){if(v===Ma)return e;var u=a.get(v),h=v in o;if(u===void 0&&(!h||yr(o,v)?.writable)&&(u=c(()=>{var p=br(h?o[v]:Pt),x=za(p);return x}),a.set(v,u)),u!==void 0){var f=s(u);return f===Pt?void 0:f}return Reflect.get(o,v,l)},getOwnPropertyDescriptor(o,v){var l=Reflect.getOwnPropertyDescriptor(o,v);if(l&&"value"in l){var u=a.get(v);u&&(l.value=s(u))}else if(l===void 0){var h=a.get(v),f=h?.v;if(h!==void 0&&f!==Pt)return{enumerable:!0,configurable:!0,value:f,writable:!0}}return l},has(o,v){if(v===Ma)return!0;var l=a.get(v),u=l!==void 0&&l.v!==Pt||Reflect.has(o,v);if(l!==void 0||nt!==null&&(!u||yr(o,v)?.writable)){l===void 0&&(l=c(()=>{var f=u?br(o[v]):Pt,p=za(f);return p}),a.set(v,l));var h=s(l);if(h===Pt)return!1}return u},set(o,v,l,u){var h=a.get(v),f=v in o;if(r&&v==="length")for(var p=l;p<h.v;p+=1){var x=a.get(p+"");x!==void 0?g(x,Pt):p in o&&(x=c(()=>za(Pt)),a.set(p+"",x))}if(h===void 0)(!f||yr(o,v)?.writable)&&(h=c(()=>za(void 0)),g(h,br(l)),a.set(v,h));else{f=h.v!==Pt;var T=c(()=>br(l));g(h,T)}var k=Reflect.getOwnPropertyDescriptor(o,v);if(k?.set&&k.set.call(u,l),!f){if(r&&typeof v=="string"){var S=a.get("length"),F=Number(v);Number.isInteger(F)&&F>=S.v&&g(S,F+1)}qr(n)}return!0},ownKeys(o){s(n);var v=Reflect.ownKeys(o).filter(h=>{var f=a.get(h);return f===void 0||f.v!==Pt});for(var[l,u]of a)u.v!==Pt&&!(l in o)&&v.push(l);return v},setPrototypeOf(){Vo()}})}function Vn(e){try{if(e!==null&&typeof e=="object"&&Ma in e)return e[Ma]}catch{}return e}function El(e,t){return Object.is(Vn(e),Vn(t))}var ja,qi,Bi,Ui;function $l(){if(ja===void 0){ja=window,qi=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,a=Text.prototype;Bi=yr(t,"firstChild").get,Ui=yr(t,"nextSibling").get,Un(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Un(a)&&(a.__t=void 0)}}function Aa(e=""){return document.createTextNode(e)}function Na(e){return Bi.call(e)}function rs(e){return Ui.call(e)}function d(e,t){return Na(e)}function ze(e,t=!1){{var a=Na(e);return a instanceof Comment&&a.data===""?rs(a):a}}function _(e,t=1,a=!1){let r=e;for(;t--;)r=rs(r);return r}function Ml(e){e.textContent=""}function Yi(){return!1}let Qn=!1;function Al(){Qn||(Qn=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function Cl(e,t,a,r=!0){r&&a();for(var n of t)e.addEventListener(n,a);ss(()=>{for(var i of t)e.removeEventListener(i,a)})}function vr(e){var t=rt,a=nt;qt(null),ma(null);try{return e()}finally{qt(t),ma(a)}}function Hi(e,t,a,r=a){e.addEventListener(t,()=>vr(a));const n=e.__on_r;n?e.__on_r=()=>{n(),r(!0)}:e.__on_r=()=>r(!0),Al()}function Vi(e){nt===null&&(rt===null&&Bo(),qo()),ur&&Fo()}function Pl(e,t){var a=t.last;a===null?t.last=t.first=e:(a.next=e,e.prev=a,t.last=e)}function ya(e,t,a){var r=nt;r!==null&&(r.f&Jt)!==0&&(e|=Jt);var n={ctx:ft,deps:null,nodes:null,f:e|Yt|oa,first:null,fn:t,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,wv:0,ac:null};if(a)try{Sr(n),n.f|=Ls}catch(o){throw Bt(n),o}else t!==null&&ir(n);var i=n;if(a&&i.deps===null&&i.teardown===null&&i.nodes===null&&i.first===i.last&&(i.f&Mr)===0&&(i=i.first,(e&ba)!==0&&(e&sr)!==0&&i!==null&&(i.f|=sr)),i!==null&&(i.parent=r,r!==null&&Pl(i,r),rt!==null&&(rt.f&Mt)!==0&&(e&cr)===0)){var c=rt;(c.effects??=[]).push(i)}return n}function Vr(){return rt!==null&&!ha}function ss(e){const t=ya(Cs,null,!1);return $t(t,Et),t.teardown=e,t}function tn(e){Vi();var t=nt.f,a=!rt&&(t&La)!==0&&(t&Ls)===0;if(a){var r=ft;(r.e??=[]).push(e)}else return Qi(e)}function Qi(e){return ya(wn|Mi,e,!1)}function Ll(e){return Vi(),ya(Cs|Mi,e,!0)}function zl(e){fa.ensure();const t=ya(cr|Mr,e,!0);return(a={})=>new Promise(r=>{a.outro?Za(t,()=>{Bt(t),r(void 0)}):(Bt(t),r(void 0))})}function Ft(e){return ya(wn,e,!1)}function oe(e,t){var a=ft,r={effect:null,ran:!1,deps:e};a.l.$.push(r),r.effect=Cr(()=>{e(),!r.ran&&(r.ran=!0,b(t))})}function Vt(){var e=ft;Cr(()=>{for(var t of e.l.$){t.deps();var a=t.effect;(a.f&Et)!==0&&$t(a,la),Pr(a)&&Sr(a),t.ran=!1}})}function Il(e){return ya(kn|Mr,e,!0)}function Cr(e,t=0){return ya(Cs|t,e,!0)}function ue(e,t=[],a=[],r=[]){wl(r,t,a,n=>{ya(Cs,()=>e(...n.map(s)),!0)})}function En(e,t=0){var a=ya(ba|t,e,!0);return a}function sa(e){return ya(La|Mr,e,!0)}function Wi(e){var t=e.teardown;if(t!==null){const a=ur,r=rt;Wn(!0),qt(null);try{t.call(null)}finally{Wn(a),qt(r)}}}function Xi(e,t=!1){var a=e.first;for(e.first=e.last=null;a!==null;){const n=a.ac;n!==null&&vr(()=>{n.abort(mr)});var r=a.next;(a.f&cr)!==0?a.parent=null:Bt(a,t),a=r}}function Rl(e){for(var t=e.first;t!==null;){var a=t.next;(t.f&La)===0&&Bt(t),t=a}}function Bt(e,t=!0){var a=!1;(t||(e.f&$i)!==0)&&e.nodes!==null&&e.nodes.end!==null&&(Ki(e.nodes.start,e.nodes.end),a=!0),Xi(e,t&&!a),ks(e,0),$t(e,$a);var r=e.nodes&&e.nodes.t;if(r!==null)for(const i of r)i.stop();Wi(e);var n=e.parent;n!==null&&n.first!==null&&Gi(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function Ki(e,t){for(;e!==null;){var a=e===t?null:rs(e);e.remove(),e=a}}function Gi(e){var t=e.parent,a=e.prev,r=e.next;a!==null&&(a.next=r),r!==null&&(r.prev=a),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=a))}function Za(e,t,a=!0){var r=[];Zi(e,r,!0);var n=()=>{a&&Bt(e),t&&t()},i=r.length;if(i>0){var c=()=>--i||n();for(var o of r)o.out(c)}else n()}function Zi(e,t,a){if((e.f&Jt)===0){e.f^=Jt;var r=e.nodes&&e.nodes.t;if(r!==null)for(const o of r)(o.is_global||a)&&t.push(o);for(var n=e.first;n!==null;){var i=n.next,c=(n.f&sr)!==0||(n.f&La)!==0&&(e.f&ba)!==0;Zi(n,t,c?a:!1),n=i}}}function $n(e){Ji(e,!0)}function Ji(e,t){if((e.f&Jt)!==0){e.f^=Jt,(e.f&Et)===0&&($t(e,Yt),ir(e));for(var a=e.first;a!==null;){var r=a.next,n=(a.f&sr)!==0||(a.f&La)!==0;Ji(a,n?t:!1),a=r}var i=e.nodes&&e.nodes.t;if(i!==null)for(const c of i)(c.is_global||t)&&c.in()}}function eo(e,t){if(e.nodes)for(var a=e.nodes.start,r=e.nodes.end;a!==null;){var n=a===r?null:rs(a);t.append(a),a=n}}let _r=null;function jl(e){var t=_r;try{if(_r=new Set,b(e),t!==null)for(var a of _r)t.add(a);return _r}finally{_r=t}}function Nl(e){for(var t of jl(e))lr(t,t.v)}let Ja=!1;function ws(e){Ja=e}let ur=!1;function Wn(e){ur=e}let rt=null,ha=!1;function qt(e){rt=e}let nt=null;function ma(e){nt=e}let Ca=null;function to(e){rt!==null&&(Ca===null?Ca=[e]:Ca.push(e))}let It=null,Qt=0,aa=null;function Ol(e){aa=e}let ao=1,Qr=0,er=Qr;function Xn(e){er=e}function ro(){return++ao}function Pr(e){var t=e.f;if((t&Yt)!==0)return!0;if(t&Mt&&(e.f&=~nr),(t&la)!==0){var a=e.deps;if(a!==null)for(var r=a.length,n=0;n<r;n++){var i=a[n];if(Pr(i)&&Oi(i),i.wv>e.wv)return!0}(t&oa)!==0&&na===null&&$t(e,Et)}return!1}function so(e,t,a=!0){var r=e.reactions;if(r!==null&&!Ca?.includes(e))for(var n=0;n<r.length;n++){var i=r[n];(i.f&Mt)!==0?so(i,t,!1):t===i&&(a?$t(i,Yt):(i.f&Et)!==0&&$t(i,la),ir(i))}}function no(e){var t=It,a=Qt,r=aa,n=rt,i=Ca,c=ft,o=ha,v=er,l=e.f;It=null,Qt=0,aa=null,rt=(l&(La|cr))===0?e:null,Ca=null,kr(e.ctx),ha=!1,er=++Qr,e.ac!==null&&(vr(()=>{e.ac.abort(mr)}),e.ac=null);try{e.f|=Zs;var u=e.fn,h=u(),f=e.deps;if(It!==null){var p;if(ks(e,Qt),f!==null&&Qt>0)for(f.length=Qt+It.length,p=0;p<It.length;p++)f[Qt+p]=It[p];else e.deps=f=It;if(Vr()&&(e.f&oa)!==0)for(p=Qt;p<f.length;p++)(f[p].reactions??=[]).push(e)}else f!==null&&Qt<f.length&&(ks(e,Qt),f.length=Qt);if(ts()&&aa!==null&&!ha&&f!==null&&(e.f&(Mt|la|Yt))===0)for(p=0;p<aa.length;p++)so(aa[p],e);return n!==null&&n!==e&&(Qr++,aa!==null&&(r===null?r=aa:r.push(...aa))),(e.f&Fa)!==0&&(e.f^=Fa),h}catch(x){return zi(x)}finally{e.f^=Zs,It=t,Qt=a,aa=r,rt=n,Ca=i,kr(c),ha=o,er=v}}function Dl(e,t){let a=t.reactions;if(a!==null){var r=Po.call(a,e);if(r!==-1){var n=a.length-1;n===0?a=t.reactions=null:(a[r]=a[n],a.pop())}}a===null&&(t.f&Mt)!==0&&(It===null||!It.includes(t))&&($t(t,la),(t.f&oa)!==0&&(t.f^=oa,t.f&=~nr),Ni(t),ks(t,0))}function ks(e,t){var a=e.deps;if(a!==null)for(var r=t;r<a.length;r++)Dl(e,a[r])}function Sr(e){var t=e.f;if((t&$a)===0){$t(e,Et);var a=nt,r=Ja;nt=e,Ja=!0;try{(t&(ba|jo))!==0?Rl(e):Xi(e),Wi(e);var n=no(e);e.teardown=typeof n=="function"?n:null,e.wv=ao;var i;Gs&&ul&&(e.f&Yt)!==0&&e.deps}finally{Ja=r,nt=a}}}async function wr(){await Promise.resolve(),pl()}function s(e){var t=e.f,a=(t&Mt)!==0;if(_r?.add(e),rt!==null&&!ha){var r=nt!==null&&(nt.f&$a)!==0;if(!r&&!Ca?.includes(e)){var n=rt.deps;if((rt.f&Zs)!==0)e.rv<Qr&&(e.rv=Qr,It===null&&n!==null&&n[Qt]===e?Qt++:It===null?It=[e]:It.includes(e)||It.push(e));else{(rt.deps??=[]).push(e);var i=e.reactions;i===null?e.reactions=[rt]:i.includes(rt)||i.push(rt)}}}if(ur){if(qa.has(e))return qa.get(e);if(a){var c=e,o=c.v;return((c.f&Et)===0&&c.reactions!==null||oo(c))&&(o=Tn(c)),qa.set(c,o),o}}else a&&(!na?.has(e)||st?.is_fork&&!Vr())&&(c=e,Pr(c)&&Oi(c),Ja&&Vr()&&(c.f&oa)===0&&io(c));if(na?.has(e))return na.get(e);if((e.f&Fa)!==0)throw e.v;return e.v}function io(e){if(e.deps!==null){e.f^=oa;for(const t of e.deps)(t.reactions??=[]).push(e),(t.f&Mt)!==0&&(t.f&oa)===0&&io(t)}}function oo(e){if(e.v===Pt)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(qa.has(t)||(t.f&Mt)!==0&&oo(t))return!0;return!1}function b(e){var t=ha;try{return ha=!0,e()}finally{ha=t}}const Fl=-7169;function $t(e,t){e.f=e.f&Fl|t}function R(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Ma in e)an(e);else if(!Array.isArray(e))for(let t in e){const a=e[t];typeof a=="object"&&a&&Ma in a&&an(a)}}}function an(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let r in e)try{an(e[r],t)}catch{}const a=yn(e);if(a!==Object.prototype&&a!==Array.prototype&&a!==Map.prototype&&a!==Set.prototype&&a!==Date.prototype){const r=Ti(a);for(let n in r){const i=r[n].get;if(i)try{i.call(e)}catch{}}}}}const ql=["touchstart","touchmove"];function Bl(e){return ql.includes(e)}const Ul=new Set,Kn=new Set;function Yl(e,t,a,r={}){function n(i){if(r.capture||jr.call(t,i),!i.cancelBubble)return vr(()=>a?.call(this,i))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?dr(()=>{t.addEventListener(e,n,r)}):t.addEventListener(e,n,r),n}function M(e,t,a,r,n){var i={capture:r,passive:n},c=Yl(e,t,a,i);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&ss(()=>{t.removeEventListener(e,c,i)})}let Gn=null;function jr(e){var t=this,a=t.ownerDocument,r=e.type,n=e.composedPath?.()||[],i=n[0]||e.target;Gn=e;var c=0,o=Gn===e&&e.__root;if(o){var v=n.indexOf(o);if(v!==-1&&(t===document||t===window)){e.__root=t;return}var l=n.indexOf(t);if(l===-1)return;v<=l&&(c=v)}if(i=n[c]||e.target,i!==t){Si(e,"currentTarget",{configurable:!0,get(){return i||a}});var u=rt,h=nt;qt(null),ma(null);try{for(var f,p=[];i!==null;){var x=i.assignedSlot||i.parentNode||i.host||null;try{var T=i["__"+r];T!=null&&(!i.disabled||e.target===i)&&T.call(i,e)}catch(k){f?p.push(k):f=k}if(e.cancelBubble||x===t||x===null)break;i=x}if(f){for(let k of p)queueMicrotask(()=>{throw k});throw f}}finally{e.__root=t,delete e.currentTarget,qt(u),ma(h)}}}function lo(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function Wr(e,t){var a=nt;a.nodes===null&&(a.nodes={start:e,end:t,a:null,t:null})}function w(e,t){var a=(t&ol)!==0,r=(t&ll)!==0,n,i=!e.startsWith("<!>");return()=>{n===void 0&&(n=lo(i?e:"<!>"+e),a||(n=Na(n)));var c=r||qi?document.importNode(n,!0):n.cloneNode(!0);if(a){var o=Na(c),v=c.lastChild;Wr(o,v)}else Wr(c,c);return c}}function Ia(e=""){{var t=Aa(e+"");return Wr(t,t),t}}function at(){var e=document.createDocumentFragment(),t=document.createComment(""),a=Aa();return e.append(t,a),Wr(t,a),e}function m(e,t){e!==null&&e.before(t)}let rn=!0;function de(e,t){var a=t==null?"":typeof t=="object"?t+"":t;a!==(e.__t??=e.nodeValue)&&(e.__t=a,e.nodeValue=a+"")}function Hl(e,t){return Vl(e,t)}const fr=new Map;function Vl(e,{target:t,anchor:a,props:r={},events:n,context:i,intro:c=!0}){$l();var o=new Set,v=h=>{for(var f=0;f<h.length;f++){var p=h[f];if(!o.has(p)){o.add(p);var x=Bl(p);t.addEventListener(p,jr,{passive:x});var T=fr.get(p);T===void 0?(document.addEventListener(p,jr,{passive:x}),fr.set(p,1)):fr.set(p,T+1)}}};v(As(Ul)),Kn.add(v);var l=void 0,u=zl(()=>{var h=a??t.appendChild(Aa());return bl(h,{pending:()=>{}},f=>{if(i){St({});var p=ft;p.c=i}n&&(r.$$events=n),rn=c,l=e(f,r)||{},rn=!0,i&&Tt()}),()=>{for(var f of o){t.removeEventListener(f,jr);var p=fr.get(f);--p===0?(document.removeEventListener(f,jr),fr.delete(f)):fr.set(f,p)}Kn.delete(v),h!==a&&h.parentNode?.removeChild(h)}});return Ql.set(l,u),l}let Ql=new WeakMap;class Wl{anchor;#e=new Map;#t=new Map;#a=new Map;#r=new Set;#l=!0;constructor(t,a=!0){this.anchor=t,this.#l=a}#n=()=>{var t=st;if(this.#e.has(t)){var a=this.#e.get(t),r=this.#t.get(a);if(r)$n(r),this.#r.delete(a);else{var n=this.#a.get(a);n&&(this.#t.set(a,n.effect),this.#a.delete(a),n.fragment.lastChild.remove(),this.anchor.before(n.fragment),r=n.effect)}for(const[i,c]of this.#e){if(this.#e.delete(i),i===t)break;const o=this.#a.get(c);o&&(Bt(o.effect),this.#a.delete(c))}for(const[i,c]of this.#t){if(i===a||this.#r.has(i))continue;const o=()=>{if(Array.from(this.#e.values()).includes(i)){var l=document.createDocumentFragment();eo(c,l),l.append(Aa()),this.#a.set(i,{effect:c,fragment:l})}else Bt(c);this.#r.delete(i),this.#t.delete(i)};this.#l||!r?(this.#r.add(i),Za(c,o,!1)):o()}}};#s=t=>{this.#e.delete(t);const a=Array.from(this.#e.values());for(const[r,n]of this.#a)a.includes(r)||(Bt(n.effect),this.#a.delete(r))};ensure(t,a){var r=st,n=Yi();if(a&&!this.#t.has(t)&&!this.#a.has(t))if(n){var i=document.createDocumentFragment(),c=Aa();i.append(c),this.#a.set(t,{effect:sa(()=>a(c)),fragment:i})}else this.#t.set(t,sa(()=>a(this.anchor)));if(this.#e.set(r,t),n){for(const[o,v]of this.#t)o===t?r.skipped_effects.delete(v):r.skipped_effects.add(v);for(const[o,v]of this.#a)o===t?r.skipped_effects.delete(v.effect):r.skipped_effects.add(v.effect);r.oncommit(this.#n),r.ondiscard(this.#s)}else this.#n()}}function P(e,t,a=!1){var r=new Wl(e),n=a?sr:0;function i(c,o){r.ensure(c,o)}En(()=>{var c=!1;t((o,v=!0)=>{c=!0,i(v,o)}),c||i(!1,null)},n)}function Kt(e,t){return t}function Xl(e,t,a){for(var r=[],n=t.length,i,c=t.length,o=0;o<n;o++){let h=t[o];Za(h,()=>{if(i){if(i.pending.delete(h),i.done.add(h),i.pending.size===0){var f=e.outrogroups;sn(As(i.done)),f.delete(i),f.size===0&&(e.outrogroups=null)}}else c-=1},!1)}if(c===0){var v=r.length===0&&a!==null;if(v){var l=a,u=l.parentNode;Ml(u),u.append(l),e.items.clear()}sn(t,!v)}else i={pending:new Set(t),done:new Set},(e.outrogroups??=new Set).add(i)}function sn(e,t=!0){for(var a=0;a<e.length;a++)Bt(e[a],t)}var Zn;function bt(e,t,a,r,n,i=null){var c=e,o=new Map,v=(t&Ai)!==0;if(v){var l=e;c=l.appendChild(Aa())}var u=null,h=pt(()=>{var S=a();return es(S)?S:S==null?[]:As(S)}),f,p=!0;function x(){k.fallback=u,Kl(k,f,c,t,r),u!==null&&(f.length===0?(u.f&Sa)===0?$n(u):(u.f^=Sa,Nr(u,null,c)):Za(u,()=>{u=null}))}var T=En(()=>{f=s(h);for(var S=f.length,F=new Set,le=st,Q=Yi(),te=0;te<S;te+=1){var be=f[te],q=r(be,te),B=p?null:o.get(q);B?(B.v&&lr(B.v,be),B.i&&lr(B.i,te),Q&&le.skipped_effects.delete(B.e)):(B=Gl(o,p?c:Zn??=Aa(),be,q,te,n,t,a),p||(B.e.f|=Sa),o.set(q,B)),F.add(q)}if(S===0&&i&&!u&&(p?u=sa(()=>i(c)):(u=sa(()=>i(Zn??=Aa())),u.f|=Sa)),!p)if(Q){for(const[se,W]of o)F.has(se)||le.skipped_effects.add(W.e);le.oncommit(x),le.ondiscard(()=>{})}else x();s(h)}),k={effect:T,items:o,outrogroups:null,fallback:u};p=!1}function Kl(e,t,a,r,n){var i=(r&Go)!==0,c=t.length,o=e.items,v=e.effect.first,l,u=null,h,f=[],p=[],x,T,k,S;if(i)for(S=0;S<c;S+=1)x=t[S],T=n(x,S),k=o.get(T).e,(k.f&Sa)===0&&(k.nodes?.a?.measure(),(h??=new Set).add(k));for(S=0;S<c;S+=1){if(x=t[S],T=n(x,S),k=o.get(T).e,e.outrogroups!==null)for(const W of e.outrogroups)W.pending.delete(k),W.done.delete(k);if((k.f&Sa)!==0)if(k.f^=Sa,k===v)Nr(k,null,a);else{var F=u?u.next:v;k===e.effect.last&&(e.effect.last=k.prev),k.prev&&(k.prev.next=k.next),k.next&&(k.next.prev=k.prev),Ra(e,u,k),Ra(e,k,F),Nr(k,F,a),u=k,f=[],p=[],v=u.next;continue}if((k.f&Jt)!==0&&($n(k),i&&(k.nodes?.a?.unfix(),(h??=new Set).delete(k))),k!==v){if(l!==void 0&&l.has(k)){if(f.length<p.length){var le=p[0],Q;u=le.prev;var te=f[0],be=f[f.length-1];for(Q=0;Q<f.length;Q+=1)Nr(f[Q],le,a);for(Q=0;Q<p.length;Q+=1)l.delete(p[Q]);Ra(e,te.prev,be.next),Ra(e,u,te),Ra(e,be,le),v=le,u=be,S-=1,f=[],p=[]}else l.delete(k),Nr(k,v,a),Ra(e,k.prev,k.next),Ra(e,k,u===null?e.effect.first:u.next),Ra(e,u,k),u=k;continue}for(f=[],p=[];v!==null&&v!==k;)(l??=new Set).add(v),p.push(v),v=v.next;if(v===null)continue}(k.f&Sa)===0&&f.push(k),u=k,v=k.next}if(e.outrogroups!==null){for(const W of e.outrogroups)W.pending.size===0&&(sn(As(W.done)),e.outrogroups?.delete(W));e.outrogroups.size===0&&(e.outrogroups=null)}if(v!==null||l!==void 0){var q=[];if(l!==void 0)for(k of l)(k.f&Jt)===0&&q.push(k);for(;v!==null;)(v.f&Jt)===0&&v!==e.fallback&&q.push(v),v=v.next;var B=q.length;if(B>0){var se=(r&Ai)!==0&&c===0?a:null;if(i){for(S=0;S<B;S+=1)q[S].nodes?.a?.measure();for(S=0;S<B;S+=1)q[S].nodes?.a?.fix()}Xl(e,q,se)}}i&&dr(()=>{if(h!==void 0)for(k of h)k.nodes?.a?.apply()})}function Gl(e,t,a,r,n,i,c,o){var v=(c&Xo)!==0?(c&Zo)===0?$(a,!1,!1):or(a):null,l=(c&Ko)!==0?or(n):null;return{v,i:l,e:sa(()=>(i(t,v??a,l??n,o),()=>{e.delete(r)}))}}function Nr(e,t,a){if(e.nodes)for(var r=e.nodes.start,n=e.nodes.end,i=t&&(t.f&Sa)===0?t.nodes.start:a;r!==null;){var c=rs(r);if(i.before(r),r===n)return;r=c}}function Ra(e,t,a){t===null?e.effect.first=a:t.next=a,a===null?e.effect.last=t:a.prev=t}function re(e,t,a=!1,r=!1,n=!1){var i=e,c="";ue(()=>{var o=nt;if(c!==(c=t()??"")&&(o.nodes!==null&&(Ki(o.nodes.start,o.nodes.end),o.nodes=null),c!=="")){var v=c+"";a?v=`<svg>${v}</svg>`:r&&(v=`<math>${v}</math>`);var l=lo(v);if((a||r)&&(l=Na(l)),Wr(Na(l),l.lastChild),a||r)for(;Na(l);)i.before(Na(l));else i.before(l)}})}function Or(e,t,a,r,n){var i=t.$$slots?.[a],c=!1;i===!0&&(i=t[a==="default"?"children":a],c=!0),i===void 0||i(e,c?()=>r:r)}const Zl=()=>performance.now(),xa={tick:e=>requestAnimationFrame(e),now:()=>Zl(),tasks:new Set};function co(){const e=xa.now();xa.tasks.forEach(t=>{t.c(e)||(xa.tasks.delete(t),t.f())}),xa.tasks.size!==0&&xa.tick(co)}function Jl(e){let t;return xa.tasks.size===0&&xa.tick(co),{promise:new Promise(a=>{xa.tasks.add(t={c:e,f:a})}),abort(){xa.tasks.delete(t)}}}function cs(e,t){vr(()=>{e.dispatchEvent(new CustomEvent(t))})}function ec(e){if(e==="float")return"cssFloat";if(e==="offset")return"cssOffset";if(e.startsWith("--"))return e;const t=e.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(a=>a[0].toUpperCase()+a.slice(1)).join("")}function Jn(e){const t={},a=e.split(";");for(const r of a){const[n,i]=r.split(":");if(!n||i===void 0)break;const c=ec(n.trim());t[c]=i.trim()}return t}const tc=e=>e;function ut(e,t,a,r){var n=(e&sl)!==0,i=(e&nl)!==0,c=n&&i,o=(e&il)!==0,v=c?"both":n?"in":"out",l,u=t.inert,h=t.style.overflow,f,p;function x(){return vr(()=>l??=a()(t,r?.()??{},{direction:v}))}var T={is_global:o,in(){if(t.inert=u,!n){p?.abort(),p?.reset?.();return}i||f?.abort(),cs(t,"introstart"),f=nn(t,x(),p,1,()=>{cs(t,"introend"),f?.abort(),f=l=void 0,t.style.overflow=h})},out(le){if(!i){le?.(),l=void 0;return}t.inert=!0,cs(t,"outrostart"),p=nn(t,x(),f,0,()=>{cs(t,"outroend"),le?.()})},stop:()=>{f?.abort(),p?.abort()}},k=nt;if((k.nodes.t??=[]).push(T),n&&rn){var S=o;if(!S){for(var F=k.parent;F&&(F.f&sr)!==0;)for(;(F=F.parent)&&(F.f&ba)===0;);S=!F||(F.f&Ls)!==0}S&&Ft(()=>{b(()=>T.in())})}}function nn(e,t,a,r,n){var i=r===1;if(Io(t)){var c,o=!1;return dr(()=>{if(!o){var k=t({direction:i?"in":"out"});c=nn(e,k,a,r,n)}}),{abort:()=>{o=!0,c?.abort()},deactivate:()=>c.deactivate(),reset:()=>c.reset(),t:()=>c.t()}}if(a?.deactivate(),!t?.duration)return n(),{abort:Xt,deactivate:Xt,reset:Xt,t:()=>r};const{delay:v=0,css:l,tick:u,easing:h=tc}=t;var f=[];if(i&&a===void 0&&(u&&u(0,1),l)){var p=Jn(l(0,1));f.push(p,p)}var x=()=>1-r,T=e.animate(f,{duration:v,fill:"forwards"});return T.onfinish=()=>{T.cancel();var k=a?.t()??1-r;a?.abort();var S=r-k,F=t.duration*Math.abs(S),le=[];if(F>0){var Q=!1;if(l)for(var te=Math.ceil(F/16.666666666666668),be=0;be<=te;be+=1){var q=k+S*h(be/te),B=Jn(l(q,1-q));le.push(B),Q||=B.overflow==="hidden"}Q&&(e.style.overflow="hidden"),x=()=>{var se=T.currentTime;return k+S*h(se/F)},u&&Jl(()=>{if(T.playState!=="running")return!1;var se=x();return u(se,1-se),!0})}T=e.animate(le,{duration:F,fill:"forwards"}),T.onfinish=()=>{x=()=>r,u?.(r,1-r),n()}},{abort:()=>{T&&(T.cancel(),T.effect=null,T.onfinish=Xt)},deactivate:()=>{n=Xt},reset:()=>{r===0&&u?.(1,0)},t:()=>x()}}function Is(e,t,a){Ft(()=>{var r=b(()=>t(e,a?.())||{});if(a&&r?.update){var n=!1,i={};Cr(()=>{var c=a();R(c),n&&Sn(i,c)&&(i=c,r.update(c))}),n=!0}if(r?.destroy)return()=>r.destroy()})}const ei=[...` 	
\r\fÂ \v\uFEFF`];function ac(e,t,a){var r=e==null?"":""+e;if(t&&(r=r?r+" "+t:t),a){for(var n in a)if(a[n])r=r?r+" "+n:n;else if(r.length)for(var i=n.length,c=0;(c=r.indexOf(n,c))>=0;){var o=c+i;(c===0||ei.includes(r[c-1]))&&(o===r.length||ei.includes(r[o]))?r=(c===0?"":r.substring(0,c))+r.substring(o+1):c=o}}return r===""?null:r}function ti(e,t=!1){var a=t?" !important;":";",r="";for(var n in e){var i=e[n];i!=null&&i!==""&&(r+=" "+n+": "+i+a)}return r}function Fs(e){return e[0]!=="-"||e[1]!=="-"?e.toLowerCase():e}function rc(e,t){if(t){var a="",r,n;if(Array.isArray(t)?(r=t[0],n=t[1]):r=t,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var i=!1,c=0,o=!1,v=[];r&&v.push(...Object.keys(r).map(Fs)),n&&v.push(...Object.keys(n).map(Fs));var l=0,u=-1;const T=e.length;for(var h=0;h<T;h++){var f=e[h];if(o?f==="/"&&e[h-1]==="*"&&(o=!1):i?i===f&&(i=!1):f==="/"&&e[h+1]==="*"?o=!0:f==='"'||f==="'"?i=f:f==="("?c++:f===")"&&c--,!o&&i===!1&&c===0){if(f===":"&&u===-1)u=h;else if(f===";"||h===T-1){if(u!==-1){var p=Fs(e.substring(l,u).trim());if(!v.includes(p)){f!==";"&&h++;var x=e.substring(l,h).trim();a+=" "+x+";"}}l=h+1,u=-1}}}}return r&&(a+=ti(r)),n&&(a+=ti(n,!0)),a=a.trim(),a===""?null:a}return e==null?null:String(e)}function Ke(e,t,a,r,n,i){var c=e.__className;if(c!==a||c===void 0){var o=ac(a,r,i);o==null?e.removeAttribute("class"):e.className=o,e.__className=a}else if(i&&n!==i)for(var v in i){var l=!!i[v];(n==null||l!==!!n[v])&&e.classList.toggle(v,l)}return i}function qs(e,t={},a,r){for(var n in a){var i=a[n];t[n]!==i&&(a[n]==null?e.style.removeProperty(n):e.style.setProperty(n,i,r))}}function ht(e,t,a,r){var n=e.__style;if(n!==t){var i=rc(t,r);i==null?e.removeAttribute("style"):e.style.cssText=i,e.__style=t}else r&&(Array.isArray(r)?(qs(e,a?.[0],r[0]),qs(e,a?.[1],r[1],"important")):qs(e,a,r));return r}function vo(e,t,a=!1){if(e.multiple){if(t==null)return;if(!es(t))return dl();for(var r of e.options)r.selected=t.includes(Br(r));return}for(r of e.options){var n=Br(r);if(El(n,t)){r.selected=!0;return}}(!a||t!==void 0)&&(e.selectedIndex=-1)}function sc(e){var t=new MutationObserver(()=>{vo(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),ss(()=>{t.disconnect()})}function nc(e,t,a=t){var r=new WeakSet,n=!0;Hi(e,"change",i=>{var c=i?"[selected]":":checked",o;if(e.multiple)o=[].map.call(e.querySelectorAll(c),Br);else{var v=e.querySelector(c)??e.querySelector("option:not([disabled])");o=v&&Br(v)}a(o),st!==null&&r.add(st)}),Ft(()=>{var i=t();if(e===document.activeElement){var c=Dr??st;if(r.has(c))return}if(vo(e,i,n),n&&i===void 0){var o=e.querySelector(":checked");o!==null&&(i=Br(o),a(i))}e.__value=i,n=!1}),sc(e)}function Br(e){return"__value"in e?e.__value:e.value}const ic=Symbol("is custom element"),oc=Symbol("is html");function uo(e,t){var a=fo(e);a.value===(a.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!=="PROGRESS")||(e.value=t??"")}function Lt(e,t,a,r){var n=fo(e);n[t]!==(n[t]=a)&&(t==="loading"&&(e[Oo]=a),a==null?e.removeAttribute(t):typeof a!="string"&&lc(e).includes(t)?e[t]=a:e.setAttribute(t,a))}function fo(e){return e.__attributes??={[ic]:e.nodeName.includes("-"),[oc]:e.namespaceURI===cl}}var ai=new Map;function lc(e){var t=e.getAttribute("is")||e.nodeName,a=ai.get(t);if(a)return a;ai.set(t,a=[]);for(var r,n=e,i=Element.prototype;i!==n;){r=Ti(n);for(var c in r)r[c].set&&a.push(c);n=yn(n)}return a}function tr(e,t,a=t){var r=new WeakSet;Hi(e,"input",async n=>{var i=n?e.defaultValue:e.value;if(i=Bs(e)?Us(i):i,a(i),st!==null&&r.add(st),await wr(),i!==(i=t())){var c=e.selectionStart,o=e.selectionEnd,v=e.value.length;if(e.value=i??"",o!==null){var l=e.value.length;c===o&&o===v&&l>v?(e.selectionStart=l,e.selectionEnd=l):(e.selectionStart=c,e.selectionEnd=Math.min(o,l))}}}),b(t)==null&&e.value&&(a(Bs(e)?Us(e.value):e.value),st!==null&&r.add(st)),Cr(()=>{var n=t();if(e===document.activeElement){var i=Dr??st;if(r.has(i))return}Bs(e)&&n===Us(e.value)||e.type==="date"&&!n&&!e.value||n!==e.value&&(e.value=n??"")})}function Bs(e){var t=e.type;return t==="number"||t==="range"}function Us(e){return e===""?null:+e}class Mn{#e=new WeakMap;#t;#a;static entries=new WeakMap;constructor(t){this.#a=t}observe(t,a){var r=this.#e.get(t)||new Set;return r.add(a),this.#e.set(t,r),this.#r().observe(t,this.#a),()=>{var n=this.#e.get(t);n.delete(a),n.size===0&&(this.#e.delete(t),this.#t.unobserve(t))}}#r(){return this.#t??(this.#t=new ResizeObserver(t=>{for(var a of t){Mn.entries.set(a.target,a);for(var r of this.#e.get(a.target)||[])r(a)}}))}}var cc=new Mn({box:"border-box"});function ri(e,t,a){var r=cc.observe(e,()=>a(e[t]));Ft(()=>(b(()=>a(e[t])),r))}function si(e,t){return e===t||e?.[Ma]===t}function Ua(e={},t,a,r){return Ft(()=>{var n,i;return Cr(()=>{n=i,i=[],b(()=>{e!==a(...i)&&(t(e,...i),n&&si(a(...n),e)&&t(null,...n))})}),()=>{dr(()=>{i&&si(a(...i),e)&&t(null,...i)})}}),e}function ni(e,t){Cl(window,["resize"],()=>vr(()=>t(window[e])))}function Gt(e){return function(...t){var a=t[0];return a.stopPropagation(),e?.apply(this,t)}}function At(e=!1){const t=ft,a=t.l.u;if(!a)return;let r=()=>R(t.s);if(e){let n=0,i={};const c=as(()=>{let o=!1;const v=t.s;for(const l in v)v[l]!==i[l]&&(i[l]=v[l],o=!0);return o&&n++,n});r=()=>s(c)}a.b.length&&Ll(()=>{ii(t,r),bs(a.b)}),tn(()=>{const n=b(()=>a.m.map(Ro));return()=>{for(const i of n)typeof i=="function"&&i()}}),a.a.length&&tn(()=>{ii(t,r),bs(a.a)})}function ii(e,t){if(e.l.s)for(const a of e.l.s)s(a);t()}function Xr(e,t){var a=e.$$events?.[t.type],r=es(a)?a.slice():a==null?[]:[a];for(var n of r)n.call(this,t)}function An(e,t,a){if(e==null)return t(void 0),a&&a(void 0),Xt;const r=b(()=>e.subscribe(t,a));return r.unsubscribe?()=>r.unsubscribe():r}const hr=[];function dc(e,t){return{subscribe:He(e,t).subscribe}}function He(e,t=Xt){let a=null;const r=new Set;function n(o){if(Sn(e,o)&&(e=o,a)){const v=!hr.length;for(const l of r)l[1](),hr.push(l,e);if(v){for(let l=0;l<hr.length;l+=2)hr[l][0](hr[l+1]);hr.length=0}}}function i(o){n(o(e))}function c(o,v=Xt){const l=[o,v];return r.add(l),r.size===1&&(a=t(n,i)||Xt),o(e),()=>{r.delete(l),r.size===0&&a&&(a(),a=null)}}return{set:n,update:i,subscribe:c}}function ho(e,t,a){const r=!Array.isArray(e),n=r?[e]:e;if(!n.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const i=t.length<2;return dc(a,(c,o)=>{let v=!1;const l=[];let u=0,h=Xt;const f=()=>{if(u)return;h();const x=t(r?l[0]:l,c,o);i?c(x):h=typeof x=="function"?x:Xt},p=n.map((x,T)=>An(x,k=>{l[T]=k,u&=~(1<<T),v&&f()},()=>{u|=1<<T}));return v=!0,f(),function(){bs(p),h(),v=!1}})}function We(e){let t;return An(e,a=>t=a)(),t}let ds=!1,on=Symbol();function Ee(e,t,a){const r=a[t]??={store:null,source:$(void 0),unsubscribe:Xt};if(r.store!==e&&!(on in a))if(r.unsubscribe(),r.store=e??null,e==null)r.source.v=void 0,r.unsubscribe=Xt;else{var n=!0;r.unsubscribe=An(e,i=>{n?r.source.v=i:g(r.source,i)}),n=!1}return e&&on in a?We(e):s(r.source)}function Ys(e,t){return e.set(t),t}function jt(){const e={};function t(){ss(()=>{for(var a in e)e[a].unsubscribe();Si(e,on,{enumerable:!1,value:!0})})}return[e,t]}function vc(e,t,a){return e.set(a),t}function uc(e){var t=ds;try{return ds=!1,[e(),ds]}finally{ds=t}}function mt(e,t,a,r){var n=!Ar||(a&el)!==0,i=(a&al)!==0,c=(a&rl)!==0,o=r,v=!0,l=()=>(v&&(v=!1,o=c?b(r):r),o),u;if(i){var h=Ma in e||No in e;u=yr(e,t)?.set??(h&&t in e?le=>e[t]=le:void 0)}var f,p=!1;i?[f,p]=uc(()=>e[t]):f=e[t],f===void 0&&r!==void 0&&(f=l(),u&&(n&&Yo(),u(f)));var x;if(n?x=()=>{var le=e[t];return le===void 0?l():(v=!0,le)}:x=()=>{var le=e[t];return le!==void 0&&(o=void 0),le===void 0?o:le},n&&(a&tl)===0)return x;if(u){var T=e.$$legacy;return(function(le,Q){return arguments.length>0?((!n||!Q||T||p)&&u(Q?x():le),le):x()})}var k=!1,S=((a&Jo)!==0?as:pt)(()=>(k=!1,x()));i&&s(S);var F=nt;return(function(le,Q){if(arguments.length>0){const te=Q?s(S):n&&i?br(le):le;return g(S,te),k=!0,o!==void 0&&(o=te),le}return ur&&k||(F.f&$a)!==0?S.v:s(S)})}function Ha(e){ft===null&&xn(),Ar&&ft.l!==null?hc(ft).m.push(e):tn(()=>{const t=b(e);if(typeof t=="function")return t})}function po(e){ft===null&&xn(),Ha(()=>()=>b(e))}function fc(e,t,{bubbles:a=!1,cancelable:r=!1}={}){return new CustomEvent(e,{detail:t,bubbles:a,cancelable:r})}function Cn(){const e=ft;return e===null&&xn(),(t,a,r)=>{const n=e.s.$$events?.[t];if(n){const i=es(n)?n.slice():[n],c=fc(t,a,r);for(const o of i)o.call(e.x,c);return!c.defaultPrevented}return!0}}function hc(e){var t=e.l;return t.u??={a:[],b:[],m:[]}}const pc="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(pc);fl();const gc=e=>e;function go(e){const t=e-1;return t*t*t+1}function oi(e){const t=typeof e=="string"&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[e,"px"]}function xt(e,{delay:t=0,duration:a=400,easing:r=gc}={}){const n=+getComputedStyle(e).opacity;return{delay:t,duration:a,easing:r,css:i=>`opacity: ${i*n}`}}function Pn(e,{delay:t=0,duration:a=400,easing:r=go,x:n=0,y:i=0,opacity:c=0}={}){const o=getComputedStyle(e),v=+o.opacity,l=o.transform==="none"?"":o.transform,u=v*(1-c),[h,f]=oi(n),[p,x]=oi(i);return{delay:t,duration:a,easing:r,css:(T,k)=>`
			transform: ${l} translate(${(1-T)*h}${f}, ${(1-T)*p}${x});
			opacity: ${v-u*k}`}}function Ln(e,{delay:t=0,duration:a=400,easing:r=go,start:n=0,opacity:i=0}={}){const c=getComputedStyle(e),o=+c.opacity,v=c.transform==="none"?"":c.transform,l=1-n,u=o*(1-i);return{delay:t,duration:a,easing:r,css:(h,f)=>`
			transform: ${v} scale(${1-l*f});
			opacity: ${o-u*f}
		`}}const _c='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-arrows-shuffle-2"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 4l3 3l-3 3" /><path d="M18 20l3 -3l-3 -3" /><path d="M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5" /><path d="M3 17h3a5 5 0 0 0 5 -5a5 5 0 0 1 5 -5h5" /></svg>',mc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-deezer"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 16.5h2v.5h-2z" /><path d="M8 16.5h2.5v.5h-2.5z" /><path d="M16 17h-2.5v-.5h2.5z" /><path d="M21.5 17h-2.5v-.5h2.5z" /><path d="M21.5 13h-2.5v.5h2.5z" /><path d="M21.5 9.5h-2.5v.5h2.5z" /><path d="M21.5 6h-2.5v.5h2.5z" /><path d="M16 13h-2.5v.5h2.5z" /><path d="M8 13.5h2.5v-.5h-2.5z" /><path d="M8 9.5h2.5v.5h-2.5z" /></svg>',bc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-compact-down"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 11l8 3l8 -3" /></svg>',yc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-compact-left"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M13 20l-3 -8l3 -8" /></svg>',wc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-left"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 6l-6 6l6 6" /></svg>',li='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-disc"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0" /><path d="M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M7 12a5 5 0 0 1 5 -5" /><path d="M12 17a5 5 0 0 0 5 -5" /></svg>',kc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-grip-horizontal"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M5 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M12 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M12 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M19 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M19 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /></svg>',xc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-heart"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M19.5 12.572l-7.5 7.428l-7.5 -7.428a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572" /></svg>',Sc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-heart"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6.979 3.074a6 6 0 0 1 4.988 1.425l.037 .033l.034 -.03a6 6 0 0 1 4.733 -1.44l.246 .036a6 6 0 0 1 3.364 10.008l-.18 .185l-.048 .041l-7.45 7.379a1 1 0 0 1 -1.313 .082l-.094 -.082l-7.493 -7.422a6 6 0 0 1 3.176 -10.215z" /></svg>',Tc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-menu-2"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 6l16 0" /><path d="M4 12l16 0" /><path d="M4 18l16 0" /></svg>',Hs='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-music"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 17a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /><path d="M13 17a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /><path d="M9 17v-13h10v13" /><path d="M9 8h10" /></svg>',Ec='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-pause"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z" /><path d="M17 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z" /></svg>',$c='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-player-play"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 4v16l13 -8z" /></svg>',Mc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-play"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 4v16a1 1 0 0 0 1.524 .852l13 -8a1 1 0 0 0 0 -1.704l-13 -8a1 1 0 0 0 -1.524 .852z" /></svg>',Ac='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-skip-back"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M19.496 4.136l-12 7a1 1 0 0 0 0 1.728l12 7a1 1 0 0 0 1.504 -.864v-14a1 1 0 0 0 -1.504 -.864z" /><path d="M4 4a1 1 0 0 1 .993 .883l.007 .117v14a1 1 0 0 1 -1.993 .117l-.007 -.117v-14a1 1 0 0 1 1 -1z" /></svg>',Cc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-skip-forward"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 5v14a1 1 0 0 0 1.504 .864l12 -7a1 1 0 0 0 0 -1.728l-12 -7a1 1 0 0 0 -1.504 .864z" /><path d="M20 4a1 1 0 0 1 .993 .883l.007 .117v14a1 1 0 0 1 -1.993 .117l-.007 -.117v-14a1 1 0 0 1 1 -1z" /></svg>',Pc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-playlist"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0" /><path d="M17 17v-13h4" /><path d="M13 5h-10" /><path d="M3 9l10 0" /><path d="M9 13h-6" /></svg>',Lc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-radio"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3l-9.371 3.749a1 1 0 0 0 -.629 .928v11.323a1 1 0 0 0 1 1h14a1 1 0 0 0 1 -1v-11a1 1 0 0 0 -1 -1h-14.5" /><path d="M4 12h16" /><path d="M7 12v-2" /><path d="M17 16v.01" /><path d="M13 16v.01" /></svg>',zc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-refresh"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4" /><path d="M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4" /></svg>',Ic='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-repeat"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 12v-3a3 3 0 0 1 3 -3h13m-3 -3l3 3l-3 3" /><path d="M20 12v3a3 3 0 0 1 -3 3h-13m3 3l-3 -3l3 -3" /></svg>',Rc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-search"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0" /><path d="M21 21l-6 -6" /></svg>',jc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-settings"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z" /><path d="M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /></svg>',Nc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-trash"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 7l16 0" /><path d="M10 11l0 6" /><path d="M14 11l0 6" /><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12" /><path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3" /></svg>',Oc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 8a5 5 0 0 1 0 8" /><path d="M17.7 5a9 9 0 0 1 0 14" /><path d="M6 15h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l3.5 -4.5a.8 .8 0 0 1 1.5 .5v14a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5" /></svg>',Dc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume-2"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 8a5 5 0 0 1 0 8" /><path d="M6 15h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l3.5 -4.5a.8 .8 0 0 1 1.5 .5v14a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5" /></svg>',Fc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume-3"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 15h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l3.5 -4.5a.8 .8 0 0 1 1.5 .5v14a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5" /><path d="M16 10l4 4m0 -4l-4 4" /></svg>',qc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume-off"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 8a5 5 0 0 1 1.912 4.934m-1.377 2.602a5 5 0 0 1 -.535 .464" /><path d="M17.7 5a9 9 0 0 1 2.362 11.086m-1.676 2.299a9 9 0 0 1 -.686 .615" /><path d="M9.069 5.054l.431 -.554a.8 .8 0 0 1 1.5 .5v2m0 4v8a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l1.294 -1.664" /><path d="M3 3l18 18" /></svg>',Bc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-x"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 6l-12 12" /><path d="M6 6l12 12" /></svg>',Uc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-device-floppy"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2" /><path d="M12 14m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0" /><path d="M14 4l0 4l-6 0l0 -4" /></svg>',Yc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-file-pencil"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3v4a1 1 0 0 0 1 1h4" /><path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z" /><path d="M10 18l5 -5a1.414 1.414 0 0 0 -2 -2l-5 5v2h2z" /></svg>',ci='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-plus"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 5l0 14" /><path d="M5 12l14 0" /></svg>',Hc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-circle-check"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0" /><path d="M9 12l2 2l4 -4" /></svg>',Vc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-dots"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /></svg>',Qc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-sort-descending"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 6l9 0" /><path d="M4 12l7 0" /><path d="M4 18l7 0" /><path d="M15 15l3 3l3 -3" /><path d="M18 6l0 12" /></svg>',Wc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-sort-ascending"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 6l7 0" /><path d="M4 12l7 0" /><path d="M4 18l9 0" /><path d="M15 9l3 -3l3 3" /><path d="M18 6l0 12" /></svg>',Xc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-yandex"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 20v-16h-2a4 4 0 0 0 -4 4v1a4 4 0 0 0 4 4h2" /><path d="M9 20l3 -7" /></svg>',y={ARTISTS:Hs,ALBUMS:li,GENRES:Hs,PLAYLISTS:Pc,RADIO:Lc,SEARCH:Rc,PLAY:Mc,PLAY_OUTLINE:$c,PAUSE:Ec,PREVIOUS:Ac,NEXT:Cc,SHUFFLE:_c,REPEAT:Ic,VOLUME_FULL:Oc,VOLUME_MEDIUM:Dc,VOLUME_MUTE:Fc,VOLUME_OFF:qc,HEART:xc,HEART_FILLED:Sc,SYNC:zc,SETTINGS:jc,CLOSE:Bc,MENU:Tc,BACK:wc,BACK_COMPACT:yc,CHEVRON_DOWN:bc,DRAG_HANDLE:kc,REMOVE:Nc,DEEZER:mc,SAVE:Uc,EDIT:Yc,ADD:ci,ACCEPT:Hc,DOTS:Vc,ADD_TO_PLAYLIST:ci,ALBUM_LINK:li,ARTIST_LINK:Hs,SORT_DESC:Qc,SORT_ASC:Wc,YANDEX:Xc};function Tr(e){if(!e||!e.image)return null;if(e.image.startsWith("http"))return e.image;let t="";return e.image==="local"?t=`${e.name}.jpg`:t=e.image,`/imagesw/radio-logos/thumbs/${encodeURIComponent(t)}`}function di(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}const ln=[{id:"default",label:"Default (Moode Dark)",colors:{"--c-white-10":"rgba(255, 255, 255, 0.1)","--c-white-20":"rgba(255, 255, 255, 0.2)","--c-white-30":"rgba(255, 255, 255, 0.3)","--c-white-50":"rgba(255, 255, 255, 0.5)","--c-white-60":"rgba(255, 255, 255, 0.6)","--c-white-90":"rgba(255, 255, 255, 0.9)","--c-black-20":"rgba(0, 0, 0, 0.2)","--c-black-50":"rgba(0, 0, 0, 0.5)","--c-black-70":"rgba(0, 0, 0, 0.7)","--c-black-80":"rgba(0, 0, 0, 0.8)","--c-black-90":"rgba(0, 0, 0, 0.9)","--c-accent":"#fa2d48","--c-accent-hover":"#ff4d65","--c-text-primary":"#ffffff","--c-text-secondary":"rgba(255, 255, 255, 0.6)","--c-text-muted":"#888888","--c-text-inverse":"#000000","--c-bg-app":"#000000","--c-bg-main":"#121212","--c-bg-sidebar":"#000000","--c-bg-card":"#1a1a1a","--c-bg-placeholder":"rgba(255, 255, 255, 0.1)","--c-bg-glass":"rgba(18, 18, 18, 0.95)","--c-bg-toast":"#333333","--c-heart":"#ff4444","--c-error":"#ff4444","--c-surface-hover":"rgba(255, 255, 255, 0.1)","--c-surface-active":"rgba(255, 255, 255, 0.2)","--c-surface-input":"#1a1a1a","--c-surface-input-focus":"rgba(255, 255, 255, 0.1)","--c-surface-button":"rgba(255, 255, 255, 0.1)","--c-surface-button-hover":"rgba(255, 255, 255, 0.1)","--c-surface-drag-phantom":"#1a1a1a","--c-surface-drag-land":"rgba(255, 255, 255, 0.1)","--c-rail-bg":"rgba(255, 255, 255, 0.2)","--c-rail-bg-hover":"rgba(255, 255, 255, 0.3)","--c-skeleton-base":"rgba(255, 255, 255, 0.1)","--c-border":"rgba(255, 255, 255, 0.1)","--c-border-dim":"rgba(255, 255, 255, 0.1)","--c-border-bright":"rgba(255, 255, 255, 0.2)","--c-border-dashed":"rgba(255, 255, 255, 0.2)","--c-border-dashed-hover":"rgba(255, 255, 255, 0.5)","--c-overlay-dim":"rgba(0, 0, 0, 0.5)","--c-overlay-backdrop":"rgba(0, 0, 0, 0.8)","--c-shadow-card":"rgba(0, 0, 0, 0.3)","--c-shadow-popover":"rgba(0, 0, 0, 0.5)","--c-shadow-header":"rgba(0, 0, 0, 0.5)","--c-shadow-phantom":"rgba(0, 0, 0, 0.7)","--c-shadow-glow-accent":"rgba(250, 45, 72, 0.5)","--c-icon-idle":"#9ca3af","--c-icon-hover":"#ffffff","--c-icon-faint":"rgba(255, 255, 255, 0.5)","--icon-stroke-width":"1.5px","--header-height":"64px","--mini-player-height":"90px","--sidebar-width":"260px","--radius-sm":"4px","--radius-md":"8px","--radius-lg":"12px","--radius-xl":"20px","--radius-full":"9999px","--z-base":"1","--z-dock":"1000","--z-modal":"2000","--z-toast":"3000","--z-drag-item":"9999","--trans-fast":"0.2s ease","--trans-smooth":"0.3s cubic-bezier(0.2, 0.8, 0.2, 1)","--c-pl-0":"#fa2d48","--c-pl-1":"#2d7afa","--c-pl-2":"#2dfa85","--c-pl-3":"#faac2d","--c-pl-4":"#b82dfa","--c-pl-5":"#2dfaf3"}},{id:"gruvbox",label:"Gruvbox Dark",colors:{"--c-white-10":"rgba(251, 241, 199, 0.1)","--c-white-20":"rgba(251, 241, 199, 0.2)","--c-white-30":"rgba(251, 241, 199, 0.3)","--c-white-50":"rgba(251, 241, 199, 0.5)","--c-white-60":"rgba(251, 241, 199, 0.6)","--c-white-90":"rgba(251, 241, 199, 0.9)","--c-black-20":"rgba(40, 40, 40, 0.2)","--c-black-50":"rgba(40, 40, 40, 0.5)","--c-black-70":"rgba(40, 40, 40, 0.7)","--c-black-80":"rgba(40, 40, 40, 0.8)","--c-black-90":"rgba(40, 40, 40, 0.9)","--c-accent":"#d65d0e","--c-accent-hover":"#fe8019","--c-text-primary":"#fbf1c7","--c-text-secondary":"#ebdbb2","--c-text-muted":"#928374","--c-text-inverse":"#282828","--c-bg-app":"#282828","--c-bg-main":"#282828","--c-bg-sidebar":"#282828","--c-bg-card":"#3c3836","--c-bg-placeholder":"#504945","--c-bg-glass":"rgba(40, 40, 40, 0.98)","--c-bg-toast":"#32302f","--c-heart":"#fb4934","--c-error":"#cc241d","--c-surface-hover":"#3c3836","--c-surface-active":"#504945","--c-surface-input":"#3c3836","--c-surface-input-focus":"#504945","--c-surface-button":"rgba(251, 241, 199, 0.1)","--c-surface-button-hover":"rgba(251, 241, 199, 0.2)","--c-surface-drag-phantom":"#504945","--c-surface-drag-land":"rgba(251, 241, 199, 0.1)","--c-rail-bg":"#504945","--c-rail-bg-hover":"#665c54","--c-skeleton-base":"#3c3836","--c-border":"#504945","--c-border-dim":"#3c3836","--c-border-bright":"#665c54","--c-border-dashed":"rgba(168, 153, 132, 0.2)","--c-border-dashed-hover":"rgba(168, 153, 132, 0.5)","--c-overlay-dim":"rgba(40, 40, 40, 0.6)","--c-overlay-backdrop":"rgba(29, 32, 33, 0.8)","--c-shadow-card":"rgba(0, 0, 0, 0.3)","--c-shadow-popover":"rgba(0, 0, 0, 0.5)","--c-shadow-header":"rgba(0, 0, 0, 0.2)","--c-shadow-phantom":"rgba(0, 0, 0, 0.5)","--c-shadow-glow-accent":"rgba(214, 93, 14, 0.3)","--c-icon-idle":"#a89984","--c-icon-hover":"#fbf1c7","--c-icon-faint":"#504945","--icon-stroke-width":"1.5px","--header-height":"64px","--mini-player-height":"90px","--sidebar-width":"260px","--radius-sm":"4px","--radius-md":"8px","--radius-lg":"12px","--radius-xl":"16px","--radius-full":"9999px","--z-base":"1","--z-dock":"1000","--z-modal":"2000","--z-toast":"3000","--z-drag-item":"9999","--trans-fast":"0.2s ease","--trans-smooth":"0.3s cubic-bezier(0.2, 0.8, 0.2, 1)","--c-pl-0":"#cc241d","--c-pl-1":"#458588","--c-pl-2":"#a6e3a1","--c-pl-3":"#d65d0e","--c-pl-4":"#b16286","--c-pl-5":"#fabd2f"}}];function Kc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Vs={exports:{}},Qs={exports:{}},vi;function Gc(){return vi||(vi=1,(function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t={rotl:function(a,r){return a<<r|a>>>32-r},rotr:function(a,r){return a<<32-r|a>>>r},endian:function(a){if(a.constructor==Number)return t.rotl(a,8)&16711935|t.rotl(a,24)&4278255360;for(var r=0;r<a.length;r++)a[r]=t.endian(a[r]);return a},randomBytes:function(a){for(var r=[];a>0;a--)r.push(Math.floor(Math.random()*256));return r},bytesToWords:function(a){for(var r=[],n=0,i=0;n<a.length;n++,i+=8)r[i>>>5]|=a[n]<<24-i%32;return r},wordsToBytes:function(a){for(var r=[],n=0;n<a.length*32;n+=8)r.push(a[n>>>5]>>>24-n%32&255);return r},bytesToHex:function(a){for(var r=[],n=0;n<a.length;n++)r.push((a[n]>>>4).toString(16)),r.push((a[n]&15).toString(16));return r.join("")},hexToBytes:function(a){for(var r=[],n=0;n<a.length;n+=2)r.push(parseInt(a.substr(n,2),16));return r},bytesToBase64:function(a){for(var r=[],n=0;n<a.length;n+=3)for(var i=a[n]<<16|a[n+1]<<8|a[n+2],c=0;c<4;c++)n*8+c*6<=a.length*8?r.push(e.charAt(i>>>6*(3-c)&63)):r.push("=");return r.join("")},base64ToBytes:function(a){a=a.replace(/[^A-Z0-9+\/]/ig,"");for(var r=[],n=0,i=0;n<a.length;i=++n%4)i!=0&&r.push((e.indexOf(a.charAt(n-1))&Math.pow(2,-2*i+8)-1)<<i*2|e.indexOf(a.charAt(n))>>>6-i*2);return r}};Qs.exports=t})()),Qs.exports}var Ws,ui;function fi(){if(ui)return Ws;ui=1;var e={utf8:{stringToBytes:function(t){return e.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(e.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var a=[],r=0;r<t.length;r++)a.push(t.charCodeAt(r)&255);return a},bytesToString:function(t){for(var a=[],r=0;r<t.length;r++)a.push(String.fromCharCode(t[r]));return a.join("")}}};return Ws=e,Ws}var Xs,hi;function Zc(){if(hi)return Xs;hi=1,Xs=function(a){return a!=null&&(e(a)||t(a)||!!a._isBuffer)};function e(a){return!!a.constructor&&typeof a.constructor.isBuffer=="function"&&a.constructor.isBuffer(a)}function t(a){return typeof a.readFloatLE=="function"&&typeof a.slice=="function"&&e(a.slice(0,0))}return Xs}var pi;function Jc(){return pi||(pi=1,(function(){var e=Gc(),t=fi().utf8,a=Zc(),r=fi().bin,n=function(i,c){i.constructor==String?c&&c.encoding==="binary"?i=r.stringToBytes(i):i=t.stringToBytes(i):a(i)?i=Array.prototype.slice.call(i,0):!Array.isArray(i)&&i.constructor!==Uint8Array&&(i=i.toString());for(var o=e.bytesToWords(i),v=i.length*8,l=1732584193,u=-271733879,h=-1732584194,f=271733878,p=0;p<o.length;p++)o[p]=(o[p]<<8|o[p]>>>24)&16711935|(o[p]<<24|o[p]>>>8)&4278255360;o[v>>>5]|=128<<v%32,o[(v+64>>>9<<4)+14]=v;for(var x=n._ff,T=n._gg,k=n._hh,S=n._ii,p=0;p<o.length;p+=16){var F=l,le=u,Q=h,te=f;l=x(l,u,h,f,o[p+0],7,-680876936),f=x(f,l,u,h,o[p+1],12,-389564586),h=x(h,f,l,u,o[p+2],17,606105819),u=x(u,h,f,l,o[p+3],22,-1044525330),l=x(l,u,h,f,o[p+4],7,-176418897),f=x(f,l,u,h,o[p+5],12,1200080426),h=x(h,f,l,u,o[p+6],17,-1473231341),u=x(u,h,f,l,o[p+7],22,-45705983),l=x(l,u,h,f,o[p+8],7,1770035416),f=x(f,l,u,h,o[p+9],12,-1958414417),h=x(h,f,l,u,o[p+10],17,-42063),u=x(u,h,f,l,o[p+11],22,-1990404162),l=x(l,u,h,f,o[p+12],7,1804603682),f=x(f,l,u,h,o[p+13],12,-40341101),h=x(h,f,l,u,o[p+14],17,-1502002290),u=x(u,h,f,l,o[p+15],22,1236535329),l=T(l,u,h,f,o[p+1],5,-165796510),f=T(f,l,u,h,o[p+6],9,-1069501632),h=T(h,f,l,u,o[p+11],14,643717713),u=T(u,h,f,l,o[p+0],20,-373897302),l=T(l,u,h,f,o[p+5],5,-701558691),f=T(f,l,u,h,o[p+10],9,38016083),h=T(h,f,l,u,o[p+15],14,-660478335),u=T(u,h,f,l,o[p+4],20,-405537848),l=T(l,u,h,f,o[p+9],5,568446438),f=T(f,l,u,h,o[p+14],9,-1019803690),h=T(h,f,l,u,o[p+3],14,-187363961),u=T(u,h,f,l,o[p+8],20,1163531501),l=T(l,u,h,f,o[p+13],5,-1444681467),f=T(f,l,u,h,o[p+2],9,-51403784),h=T(h,f,l,u,o[p+7],14,1735328473),u=T(u,h,f,l,o[p+12],20,-1926607734),l=k(l,u,h,f,o[p+5],4,-378558),f=k(f,l,u,h,o[p+8],11,-2022574463),h=k(h,f,l,u,o[p+11],16,1839030562),u=k(u,h,f,l,o[p+14],23,-35309556),l=k(l,u,h,f,o[p+1],4,-1530992060),f=k(f,l,u,h,o[p+4],11,1272893353),h=k(h,f,l,u,o[p+7],16,-155497632),u=k(u,h,f,l,o[p+10],23,-1094730640),l=k(l,u,h,f,o[p+13],4,681279174),f=k(f,l,u,h,o[p+0],11,-358537222),h=k(h,f,l,u,o[p+3],16,-722521979),u=k(u,h,f,l,o[p+6],23,76029189),l=k(l,u,h,f,o[p+9],4,-640364487),f=k(f,l,u,h,o[p+12],11,-421815835),h=k(h,f,l,u,o[p+15],16,530742520),u=k(u,h,f,l,o[p+2],23,-995338651),l=S(l,u,h,f,o[p+0],6,-198630844),f=S(f,l,u,h,o[p+7],10,1126891415),h=S(h,f,l,u,o[p+14],15,-1416354905),u=S(u,h,f,l,o[p+5],21,-57434055),l=S(l,u,h,f,o[p+12],6,1700485571),f=S(f,l,u,h,o[p+3],10,-1894986606),h=S(h,f,l,u,o[p+10],15,-1051523),u=S(u,h,f,l,o[p+1],21,-2054922799),l=S(l,u,h,f,o[p+8],6,1873313359),f=S(f,l,u,h,o[p+15],10,-30611744),h=S(h,f,l,u,o[p+6],15,-1560198380),u=S(u,h,f,l,o[p+13],21,1309151649),l=S(l,u,h,f,o[p+4],6,-145523070),f=S(f,l,u,h,o[p+11],10,-1120210379),h=S(h,f,l,u,o[p+2],15,718787259),u=S(u,h,f,l,o[p+9],21,-343485551),l=l+F>>>0,u=u+le>>>0,h=h+Q>>>0,f=f+te>>>0}return e.endian([l,u,h,f])};n._ff=function(i,c,o,v,l,u,h){var f=i+(c&o|~c&v)+(l>>>0)+h;return(f<<u|f>>>32-u)+c},n._gg=function(i,c,o,v,l,u,h){var f=i+(c&v|o&~v)+(l>>>0)+h;return(f<<u|f>>>32-u)+c},n._hh=function(i,c,o,v,l,u,h){var f=i+(c^o^v)+(l>>>0)+h;return(f<<u|f>>>32-u)+c},n._ii=function(i,c,o,v,l,u,h){var f=i+(o^(c|~v))+(l>>>0)+h;return(f<<u|f>>>32-u)+c},n._blocksize=16,n._digestsize=16,Vs.exports=function(i,c){if(i==null)throw new Error("Illegal argument "+i);var o=e.wordsToBytes(n(i,c));return c&&c.asBytes?o:c&&c.asString?r.bytesToString(o):e.bytesToHex(o)}})()),Vs.exports}var ed=Jc();const _o=Kc(ed),gi=He("Disconnected"),cn=He(null);let Ks;function De(e,t="info"){cn.set({text:e,type:t}),Ks&&clearTimeout(Ks),Ks=setTimeout(()=>{cn.set(null)},3e3)}const td=localStorage.getItem("app_theme")||"default",xs=He(td);xs.subscribe(e=>{if(typeof document>"u")return;localStorage.setItem("app_theme",e);const t=ln.find(r=>r.id===e);if(!t)return;const a=document.documentElement;document.body.setAttribute("data-theme",e),Object.entries(t.colors).forEach(([r,n])=>{a.style.setProperty(r,n)})});const Ss=He({isOpen:!1,title:"",message:"",confirmLabel:"Confirm",cancelLabel:"Cancel",onConfirm:null,type:"confirm",inputValue:"",placeholder:"",options:[]});function pa({title:e="Confirm Action",message:t="Are you sure?",confirmLabel:a="Confirm",cancelLabel:r="Cancel",type:n="confirm",inputValue:i="",placeholder:c="",options:o=[],onConfirm:v=()=>{}}){Ss.set({isOpen:!0,title:e,message:t,confirmLabel:a,cancelLabel:r,type:n,inputValue:i,placeholder:c,options:o,onConfirm:v})}function vs(){Ss.set({isOpen:!1,title:"",message:"",confirmLabel:"",cancelLabel:"",onConfirm:null,type:"confirm",inputValue:"",placeholder:"",options:[]})}const kt=He({state:"stop",volume:50,elapsed:0,duration:0,random:!1,repeat:!1,bitrate:0,format:"",song:0,songid:0}),Ht=He({title:"Not Playing",artist:"",album:"",file:"",stationName:null,id:null,pos:null,isYandex:!1}),mo={active:!1,tracks:[],currentIndex:-1,currentTrackId:null,currentTrackFile:null,streamCache:{}};if(typeof localStorage<"u")try{const e=localStorage.getItem("yandex_stream_cache");e&&(mo.streamCache=JSON.parse(e))}catch(e){console.error("Failed to load yandex cache",e)}const ea=He(mo);ea.subscribe(e=>{typeof localStorage<"u"&&e.streamCache&&(Object.keys(e.streamCache).length>500,localStorage.setItem("yandex_stream_cache",JSON.stringify(e.streamCache)))});const Ts=He(!1),hs=He(!1),dn=He(!1),vn=He(!1),Dt=He("library"),ns=He(null),ia=He(!1),ad=localStorage.getItem("sidebarCollapsed")==="true",un=He(ad);un.subscribe(e=>{typeof localStorage<"u"&&localStorage.setItem("sidebarCollapsed",String(e))});const Va=He([]),Rs=He([]),Ur=He([]),rd=He(null),Oa=He(new Set),wt=He(!1),Wt=He([{view:"root"}]),_a=He([]),bo=He(0),Yr=He(""),yo=He({});function sd(e,t){yo.update(a=>({...a,[e]:t}))}function nd(e){return We(yo)[e]||0}const zn=He({isOpen:!1,track:null,context:{type:"general",playlistName:null,index:null},x:0,y:0,triggerRect:null});function id(){if(typeof navigator<"u"&&navigator.vibrate)try{navigator.vibrate(70)}catch{}}function Kr(e,t,a={}){if(!t&&a.type!=="playlist-card")return;id();let r=0,n=0,i=null,c=e.currentTarget;!c&&e.target&&e.target.closest&&(c=e.target.closest("button")||e.target),c&&c.getBoundingClientRect&&(i=c.getBoundingClientRect());const o=e.detail?.originalEvent||e;o.touches&&o.touches.length>0?(r=o.touches[0].clientX,n=o.touches[0].clientY):o.clientX&&(r=o.clientX,n=o.clientY);const v={type:"general",playlistName:null,index:null,...a};zn.set({isOpen:!0,track:t,context:v,x:r,y:n,triggerRect:i})}function Ot(){zn.set({isOpen:!1,track:null,context:{},x:0,y:0,triggerRect:null})}let fn=null,hn=null;function od(e){hn=e}function Ba(e,t=null){t&&(fn=t),hn?hn(e,t):console.warn("Router callback not set!")}function ld(){const e=fn;return fn=null,e}function cd(){window.history.back()}function Er(e,t=[],a=null){if(!e||!e.file)return"/images/default_cover.png";if(e.image&&e.image.startsWith("http"))return e.image;if(wo(e.file)||e.genre==="Radio")return e.image?Tr(e):ko(e,t,a)||"/images/radio_placeholder.png";let r=e.file.startsWith("/")?e.file.slice(1):e.file;return`/coverart.php/${encodeURI(r)}`}function Gr(e,t="sm",a=[],r=null){if(!e||e.file&&(wo(e.file)||e.genre==="Radio"||Array.isArray(e)))return e&&e.image?Tr(e):ko(e,a,r)||"/images/radio_icon.png";if(e.image&&e.image.startsWith("http"))return e.image;if(!e.file)return"/images/default_icon.png";if(e.thumbHash){const n=t==="md"?"":"_sm";return`/imagesw/thmcache/${e.thumbHash}${n}.jpg`}try{const n=e.file.lastIndexOf("/"),i=n===-1?".":e.file.substring(0,n);return`/imagesw/thmcache/${_o(i)}${t==="md"?"":"_sm"}.jpg`}catch{let i=e.file.startsWith("/")?e.file.slice(1):e.file;return`/coverart.php/${encodeURI(i)}`}}function wo(e){return!e||e.includes("yandex.ru")||e.includes("get-mp3")?!1:e.startsWith("http")||e.includes("://")||e.includes("RADIO")}function ko(e,t,a){const r=v=>(v||"").toString().toLowerCase().replace(/[^a-z0-9]/g,""),n=r(e?.title),i=r(e?.stationName),c=r(a);if(t&&t.length>0){const v=t.find(l=>{const u=r(l.name);return u?u===i||u===c||n&&u===n||n&&n.includes(u)&&u.length>3:!1});if(v)return Tr(v)}const o=e?.stationName||a;return o?Tr({name:o,image:"local"}):null}ho([Ht,Va,ns],([e,t,a])=>Er(e,t,a));ho(Ht,e=>!e||!e.file||e.file.startsWith("http")?null:`/coverart.php/${encodeURI(e.file)}`);const dd=localStorage.getItem("alarmTime")||"08:00",vd=localStorage.getItem("alarmEnabled")==="true",ud=localStorage.getItem("alarmPlaylist")||"Favorites",pn=He(dd),gn=He(vd),_n=He(ud);pn.subscribe(e=>localStorage.setItem("alarmTime",e));gn.subscribe(e=>localStorage.setItem("alarmEnabled",String(e)));_n.subscribe(e=>localStorage.setItem("alarmPlaylist",e));const fd=localStorage.getItem("yandex_token")||"",Zr=He(fd);Zr.subscribe(e=>{typeof localStorage<"u"&&localStorage.setItem("yandex_token",e)});const hd=localStorage.getItem("yandex_enabled")==="true",Es=He(hd);Es.subscribe(e=>{typeof localStorage<"u"&&localStorage.setItem("yandex_enabled",String(e))});const ps=He(new Set),vt={NAME:"MoodePlayerDB",STORE_NAME:"music",VERSION:3},Ir={SYNC:"/wave-api.php",STATIONS:e=>"/wave-api.php?action=stations",COVER_ART:e=>`/coverart.php?u=${encodeURIComponent(e)}`,RADIO_LOGOS:e=>`/imagesw/radio-logos/thumbs/${e}`},Da={open(){return new Promise((e,t)=>{const a=indexedDB.open(vt.NAME,vt.VERSION);a.onupgradeneeded=r=>{const n=r.target.result,i=r.target.transaction;let c;n.objectStoreNames.contains(vt.STORE_NAME)?c=i.objectStore(vt.STORE_NAME):c=n.createObjectStore(vt.STORE_NAME,{keyPath:"file"}),c.indexNames.contains("artist")||c.createIndex("artist","artist",{unique:!1}),c.indexNames.contains("album")||c.createIndex("album","album",{unique:!1}),c.indexNames.contains("genre")||c.createIndex("genre","genre",{unique:!1}),c.indexNames.contains("album_artist")||c.createIndex("album_artist","album_artist",{unique:!1})},a.onsuccess=()=>e(a.result),a.onerror=()=>t(a.error)})},async clear(){const e=await this.open();return new Promise((t,a)=>{const r=e.transaction(vt.STORE_NAME,"readwrite");r.objectStore(vt.STORE_NAME).clear(),r.oncomplete=()=>t(),r.onerror=()=>a(r.error)})},async bulkAdd(e){const t=await this.open();return new Promise((a,r)=>{const n=t.transaction(vt.STORE_NAME,"readwrite"),i=n.objectStore(vt.STORE_NAME);e.forEach(c=>i.put(c)),n.oncomplete=()=>a(),n.onerror=()=>r(n.error)})},async getFilesMap(e){if(!e||e.length===0)return new Map;const t=await this.open();return new Promise(a=>{const n=t.transaction(vt.STORE_NAME,"readonly").objectStore(vt.STORE_NAME),i=new Map;let c=0;e.forEach(o=>{const v=o.normalize("NFC").trim(),l=n.get(v);l.onsuccess=u=>{u.target.result&&i.set(o,u.target.result),c++,c===e.length&&a(i)},l.onerror=()=>{c++,c===e.length&&a(i)}})})},async getArtists(){const e=await this.open();return new Promise((t,a)=>{const n=e.transaction(vt.STORE_NAME,"readonly").objectStore(vt.STORE_NAME),i=new Map,c=n.openCursor();c.onsuccess=o=>{const v=o.target.result;if(v){const l=v.value,u=l.album_artist||l.artist;u&&!i.has(u)&&i.set(u,{name:u,file:l.file,thumbHash:l.thumbHash}),v.continue()}else{const l=Array.from(i.values()).sort((u,h)=>u.name.localeCompare(h.name,void 0,{sensitivity:"base"}));t(l)}},c.onerror=()=>a(c.error)})},async getAlbums(){const e=await this.open();return new Promise((t,a)=>{const n=e.transaction(vt.STORE_NAME,"readonly").objectStore(vt.STORE_NAME).index("album"),i=[],c=n.openCursor(null,"nextunique");c.onsuccess=o=>{const v=o.target.result;if(v){const l=v.value;i.push({name:l.album,artist:l.album_artist||l.artist,file:l.file,thumbHash:l.thumbHash,qualityBadge:l.qualityBadge,year:l.year||0}),v.continue()}else t(i)},c.onerror=()=>a(c.error)})},async getArtistAlbums(e){if(!e)return[];const t=await this.open(),a=e.normalize("NFC").trim();return new Promise((r,n)=>{const c=t.transaction(vt.STORE_NAME,"readonly").objectStore(vt.STORE_NAME),o=new Promise(l=>{c.indexNames.contains("album_artist")?c.index("album_artist").getAll(IDBKeyRange.only(a)).onsuccess=u=>l(u.target.result):l([])}),v=new Promise(l=>{c.index("artist").getAll(IDBKeyRange.only(a)).onsuccess=u=>l(u.target.result)});Promise.all([o,v]).then(([l,u])=>{const h=[...l,...u],f=[],p=new Set;h.forEach(x=>{p.has(x.album)||(p.add(x.album),f.push({name:x.album,artist:x.album_artist||x.artist,file:x.file,thumbHash:x.thumbHash,qualityBadge:x.qualityBadge,year:x.year||0}))}),r(f)}).catch(l=>n(l))})},async getAlbumTracks(e,t=null){const a=await this.open(),r=e.normalize("NFC").trim(),n=t?t.normalize("NFC").trim():null;return console.log(`[DB] getAlbumTracks called. Album: "${r}", FilterArtist: "${n}"`),new Promise((i,c)=>{const v=a.transaction(vt.STORE_NAME,"readonly").objectStore(vt.STORE_NAME).index("album"),l=IDBKeyRange.only(r),u=v.getAll(l);u.onsuccess=()=>{let h=u.result;if(console.log(`[DB] Found ${h.length} raw tracks for album "${r}"`),n){const f=h.length;h=h.filter(p=>{const x=(p.artist||"").normalize("NFC").trim(),T=(p.album_artist||"").normalize("NFC").trim();return x===n||T===n}),console.log(`[DB] After artist filter: ${h.length} tracks (Removed ${f-h.length})`)}else console.log("[DB] No artist filter provided. Returning all tracks.");h.sort((f,p)=>{const x=parseInt(f.disc||1),T=parseInt(p.disc||1);if(x!==T)return x-T;const k=parseInt(f.track||0),S=parseInt(p.track||0);return k-S}),i(h)},u.onerror=()=>c(u.error)})},async getGenres(){const e=await this.open();return new Promise((t,a)=>{const n=e.transaction(vt.STORE_NAME,"readonly").objectStore(vt.STORE_NAME).index("genre"),i=[],c=n.openKeyCursor(null,"nextunique");c.onsuccess=o=>{const v=o.target.result;v?(i.push(v.key),v.continue()):t(i)},c.onerror=()=>a(c.error)})},async getGenreTracks(e){const t=await this.open(),a=e.normalize("NFC").trim();return new Promise((r,n)=>{const o=t.transaction(vt.STORE_NAME,"readonly").objectStore(vt.STORE_NAME).index("genre").getAll(IDBKeyRange.only(a));o.onsuccess=()=>r(o.result),o.onerror=()=>n(o.error)})},async search(e){if(!e)return[];const t=e.toLowerCase().normalize("NFC").trim(),a=await this.open();return new Promise((r,n)=>{const c=a.transaction(vt.STORE_NAME,"readonly").objectStore(vt.STORE_NAME),o=[],v=100,l=c.openCursor();l.onsuccess=u=>{const h=u.target.result;if(h){const f=h.value;if((f.title&&f.title.toLowerCase().includes(t)||f.artist&&f.artist.toLowerCase().includes(t)||f.album&&f.album.toLowerCase().includes(t)||f.album_artist&&f.album_artist.toLowerCase().includes(t))&&o.push(f),o.length>=v){r(o);return}h.continue()}else r(o)},l.onerror=()=>n(l.error)})}};var pd=w('<div class="skeleton svelte-tl058d"></div>');function Rt(e,t){let a=mt(t,"width",8,"100%"),r=mt(t,"height",8,"20px"),n=mt(t,"radius",8,"4px"),i=mt(t,"style",8,"");var c=pd();ue(()=>ht(c,`width: ${a()??""}; height: ${r()??""}; border-radius: ${n()??""}; ${i()??""}`)),m(e,c)}var gd=w('<div class="skel svelte-1b8que2"><!></div>'),_d=w('<img loading="lazy"/>'),md=w('<div class="loader svelte-1b8que2"><!> <!> <!></div>');function Pa(e,t){St(t,!1);let a=mt(t,"src",8),r=mt(t,"alt",8,""),n=mt(t,"radius",8,"0px");const i=Cn();let c=$("loading");function o(){g(c,"loaded")}function v(k){i("error",k),g(c,"error")}oe(()=>R(a()),()=>{a()?g(c,"loading"):g(c,"error")}),Vt(),At();var l=md(),u=d(l);{var h=k=>{var S=gd(),F=d(S);Rt(F,{width:"100%",height:"100%",get radius(){return n()}}),ut(2,S,()=>xt,()=>({duration:200})),m(k,S)};P(u,k=>{s(c)==="loading"&&k(h)})}var f=_(u,2);{var p=k=>{var S=_d();let F;ue(()=>{Lt(S,"src",a()),Lt(S,"alt",r()),ht(S,`border-radius: ${n()??""}`),F=Ke(S,1,"svelte-1b8que2",null,F,{vis:s(c)==="loaded"})}),M("load",S,o),M("error",S,v),m(k,S)};P(f,k=>{a()&&s(c)!=="error"&&k(p)})}var x=_(f,2);{var T=k=>{var S=at(),F=ze(S);Or(F,t,"fallback",{}),m(k,S)};P(x,k=>{s(c)==="error"&&k(T)})}ue(()=>ht(l,`border-radius: ${n()??""}`)),m(e,l),Tt()}const Ka={DEFAULT_IP:typeof window<"u"?window.location.hostname:"localhost",get MOODE_IP(){try{return typeof localStorage<"u"?localStorage.getItem("moode_ip")||this.DEFAULT_IP:this.DEFAULT_IP}catch{return this.DEFAULT_IP}},setMoodeIp(e){if(typeof localStorage<"u"){const t=e?e.trim():"";t&&localStorage.setItem("moode_ip",t)}}};class bd{constructor(){this.socket=null,this.queue=[],this.isProcessing=!1,this.reconnectTimer=null,this.watchdogTimer=null,this._buffer=""}get isConnected(){return this.socket&&this.socket.readyState===WebSocket.OPEN}connect(){if(this.socket&&(this.socket.readyState===WebSocket.CONNECTING||this.socket.readyState===WebSocket.OPEN))return;this.reconnectTimer&&clearTimeout(this.reconnectTimer);let t=Ka.MOODE_IP||window.location.hostname;t=t.replace(/^https?:\/\//,"").split(":")[0].split("/")[0];const a=Ka.WS_PORT||"8080",r=`ws://${t}:${a}`;console.log("[MPD] Connecting to:",r);try{this.socket=new WebSocket(r,["binary"])}catch(n){console.error("[MPD] Connection Error:",n),this.reconnectTimer=setTimeout(()=>this.connect(),5e3);return}this.socket.onopen=()=>{console.log("[MPD] Connected"),gi.set("Connected"),De("Connected to Moode","success"),this._processQueue()},this.socket.onmessage=n=>this._handleMessage(n),this.socket.onclose=n=>{console.warn("[MPD] Socket closed",n.code,n.reason),gi.set("Disconnected"),this._cleanup(),this.reconnectTimer=setTimeout(()=>this.connect(),3e3)},this.socket.onerror=n=>{console.error("[MPD] Socket error",n)}}send(t){return new Promise((a,r)=>{this.queue.push({cmd:t,resolve:a,reject:r}),this._processQueue()})}_cleanup(){for(this.isProcessing=!1,this._buffer="",this.watchdogTimer&&clearTimeout(this.watchdogTimer);this.queue.length>0;){const{reject:t}=this.queue.shift();t(new Error("Connection lost"))}}async _processQueue(){if(this.isProcessing||this.queue.length===0||!this.isConnected)return;this.isProcessing=!0;const{cmd:t}=this.queue[0];this.watchdogTimer&&clearTimeout(this.watchdogTimer),this.watchdogTimer=setTimeout(()=>{console.error("[MPD] Watchdog timeout"),this.socket&&this.socket.close()},2e4);try{const a=t.endsWith(`
`)?t:t+`
`;this.socket.send(new TextEncoder().encode(a))}catch(a){console.error("[MPD] Send error",a),this._cleanup()}}async _handleMessage(t){let a=t.data;a instanceof Blob&&(a=await a.text()),this.watchdogTimer&&(clearTimeout(this.watchdogTimer),this.watchdogTimer=null),this._buffer+=a;const r=this._buffer.endsWith(`
OK
`)||this._buffer===`OK
`,n=this._buffer.startsWith("ACK");if(r||n){const i=this._buffer;this._buffer="";const c=this.queue.shift();if(this.isProcessing=!1,c)if(n)console.error(`[MPD] Error: ${i.trim()}`),c.reject(new Error(i.trim()));else{const o=i.replace(/\nOK\n$/,"").replace(/^OK\n$/,"");c.resolve(o)}this._processQueue()}else{if(!this.queue.length)return;this.watchdogTimer=setTimeout(()=>{console.error("[MPD] Watchdog timeout receiving large data"),this.socket&&this.socket.close()},2e4)}}}const Le=new bd,Zt={parseKeyValue(e){const t={};if(!e)return t;const a=e.split(`
`);for(const r of a){const n=r.indexOf(": ");if(n===-1)continue;const i=r.substring(0,n).toLowerCase(),c=r.substring(n+2);t[i]=c}return t},parseStatus(e){const t=this.parseKeyValue(e);let a="";if(t.audio){const r=t.audio.split(":");r[1]&&(a=`${r[1]}-bit`)}return{state:t.state||"stop",volume:parseInt(t.volume)||0,elapsed:parseFloat(t.elapsed)||0,duration:parseFloat(t.duration)||0,random:t.random==="1",repeat:t.repeat==="1",song:parseInt(t.song)||0,songId:parseInt(t.songid)||-1,playlistLength:parseInt(t.playlistlength)||0,bitrate:parseInt(t.bitrate)||0,format:a,playlistVersion:parseInt(t.playlist)||0}},parseCurrentSong(e){const t=this.parseKeyValue(e);return this._normalizeTrack(t)},parsePlaylists(e){const t=e.split(`
`),a=[];let r=null;for(const n of t)n.startsWith("playlist: ")?(r&&a.push(r),r={playlist:n.substring(10)}):n.startsWith("Last-Modified: ")&&r&&(r["last-modified"]=n.substring(15));return r&&a.push(r),a.map(n=>({name:n.playlist,lastModified:n["last-modified"]}))},parseTracks(e){const t=[];let a=null,r=0,n=e.indexOf(`
`,r);for(;n!==-1;){const i=e.substring(r,n),c=i.indexOf(": ");if(c!==-1){const o=i.substring(0,c).toLowerCase(),v=i.substring(c+2);o==="file"?(a&&t.push(this._normalizeTrack(a)),a={file:v}):a&&(a[o]=v)}r=n+1,n=e.indexOf(`
`,r)}return a&&t.push(this._normalizeTrack(a)),t},_normalizeTrack(e){const t=e.file||e.File||"",a=e.Title||e.title||e.Name||e.name||t.split("/").pop()||"Unknown";return{file:t,title:a,artist:e.Artist||e.artist||"Unknown Artist",album:e.Album||e.album||"Unknown Album",genre:e.Genre||e.genre||"Unknown",time:parseFloat(e.Time||e.time||0),track:e.Track||e.track||"",id:e.Id||e.id,pos:e.Pos||e.pos||null,stationName:e.name||e.Name||null}}};function xo(e){return new Worker("/assets/sync.worker-CxDcqL9_.js",{name:e?.name})}const Ya={async syncLibrary(){if(We(ia))return;ia.set(!0);const e=new xo,t=window.location.origin+"/wave-api.php";e.postMessage({type:"START_SYNC",payload:{url:t}}),e.onmessage=a=>{const{type:r,status:n,count:i,message:c}=a.data;if(r==="PROGRESS"){const o={connecting:"Requesting library...",downloading:"Downloading data...",parsing:"Processing metadata...",saving:`Saving ${i} tracks...`};o[n]&&De(o[n],"info")}r==="DONE"&&(De(`Library updated: ${i} tracks`,"success"),ia.set(!1),e.terminate()),r==="ERROR"&&(console.error("[API] Sync Error:",c),De(`Sync Failed: ${c}`,"error"),ia.set(!1),e.terminate())},e.onerror=a=>{console.error("[API] Worker crash:",a),De("Sync worker crashed","error"),ia.set(!1),e.terminate()}},async loadRadioStations(){if(!We(hs)){hs.set(!0);try{const t=await fetch(Ir.STATIONS(!1));if(!t.ok)throw new Error("Network error");const a=await t.json();if(a.error)throw new Error(a.error);if(!Array.isArray(a))throw new Error("Invalid response format");const r=a.map(n=>({id:n.id,name:n.name,file:n.station,station:n.station,image:n.logo,genre:n.genre||"Radio"}));r.sort((n,i)=>n.name.localeCompare(i.name,void 0,{sensitivity:"base"})),Va.set(r)}catch(e){console.error("[API] Failed to load stations",e),De("Failed to load radio","error")}finally{hs.set(!1)}}},async setAlarm(e,t,a){try{const r=new FormData;r.append("action","set_alarm"),r.append("enabled",e?"1":"0"),r.append("time",t),r.append("playlist",a);const n=await fetch(Ir.SYNC,{method:"POST",body:r});if(!n.ok)throw new Error("Server error");const i=await n.json();if(i.error)throw new Error(i.error);return!0}catch(r){throw console.error("[API] Failed to set alarm",r),r}},async getServerTime(){try{const e=await fetch(`${Ir.SYNC}?action=get_time`);if(e.ok)return(await e.json()).time}catch(e){console.error("Failed to get server time",e)}return null},async saveYandexMeta(e,t){try{await fetch(Ir.SYNC+"?action=set_yandex_meta",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:e,meta:t})})}catch(a){console.warn("Failed to save meta to RAM",a)}},async getYandexMeta(e){try{const t=await fetch(Ir.SYNC+"?action=get_yandex_meta&url="+encodeURIComponent(e));if(t.ok)return await t.json()}catch(t){console.warn("Failed to get meta from RAM",t)}return null}},yd=1e3,wd=250;let gs=null,Hr=null,_s=0,Wa=1,$s=!0,Ta=!1,Ga=0,pr=null;function ms(e){return e?String(e).normalize("NFC").replace(/\\/g,"\\\\").replace(/"/g,'\\"'):""}function kd(){xd(),$s=!0,Ta=!1,Ga=0,wt.set(!1),va(),gs=setInterval(()=>{Le.isConnected&&!Le.isProcessing&&va()},yd)}function xd(){gs&&(clearInterval(gs),gs=null),In()}async function va(){try{const e=await Le.send("status"),t=await Le.send("currentsong"),a=Zt.parseStatus(e),r=Zt.parseCurrentSong(t);Td(a,r);const n=We(bo);if(We(wt))return;(a.playlistLength>0&&a.playlistVersion!==n||a.playlistLength>0&&We(_a).length===0)&&Sd(a.playlistVersion)}catch{}}async function Sd(e){if(!We(wt))try{const t=await Le.send("playlistinfo");if(We(wt))return;const a=Zt.parseTracks(t),r=We(ea),n=a.map(o=>o.file).filter(o=>o&&!o.startsWith("http"));let i=new Map;if(n.length>0)try{i=await Da.getFilesMap(n)}catch(o){console.warn("Failed to hydrate queue from DB",o)}const c=a.map(o=>{const v=o.file||"";if(r.streamCache&&r.streamCache[v]){const h=r.streamCache[v];return{...o,title:h.title,artist:h.artist,album:h.album,image:h.image,isYandex:!0,id:h.id,mpdId:o.id,mpdPos:o.pos,_uid:String(o.id||o.pos)+"y"}}(v.includes("yandex.net")||v.includes("get-mp3"))&&So(v);const l=v.normalize("NFC"),u=i.get(l);return u?{...o,thumbHash:u.thumbHash,qualityBadge:u.qualityBadge,title:o.title||u.title,artist:o.artist||u.artist,album:o.album||u.album,_uid:String(o.id||o.pos+o.file)}:{...o,_uid:String(o.id||o.pos+o.file)}});_a.set(c),bo.set(e)}catch(t){console.error("Queue sync error",t)}}async function So(e){const t=await Ya.getYandexMeta(e);t&&(ea.update(r=>{const n={...r.streamCache};return n[e]={...t,isYandex:!0,file:e},{...r,streamCache:n}}),We(Ht).file===e&&Ht.update(r=>({...r,...t,isYandex:!0})),_a.update(r=>r.map(n=>n.file===e?{...n,...t,isYandex:!0}:n)))}function Td(e,t){const a=We(Ht),r=We(Va),n=We(ea);if(t.file&&n.streamCache&&n.streamCache[t.file]){const c=n.streamCache[t.file];t.title=c.title,t.artist=c.artist,t.album=c.album,t.image=c.image,t.isYandex=!0,t.id=c.id,c.time>0&&(e.duration===0||isNaN(e.duration))&&(e.duration=c.time)}else t.file&&(t.file.includes("yandex.net")||t.file.includes("get-mp3"))&&So(t.file);const i=t.file&&t.file.startsWith("http");if(i&&!t.isYandex){const c=u=>(u||"").toString().toLowerCase().replace(/[^a-z0-9]/g,""),o=c(t.file),v=c(t.title),l=r.find(u=>{const h=c(u.station||u.file||u.url||(Array.isArray(u)?u[1]:"")),f=c(u.name||(Array.isArray(u)?u[0]:""));return h&&o.includes(h)||f&&v.includes(f)});l?t.stationName=l.name||l[0]:a.stationName&&a.file===t.file&&(t.stationName=a.stationName)}Ht.set(t),kt.update(c=>{const o=e.state==="play",v=performance.now();if(e.state==="pause"||c.state==="pause")return us(!1),v<Ga?c:e;if(t.file!==a.file||$s)return $s=!1,Ta=!1,Wa=1,i&&!t.isYandex&&(e.elapsed=0),us(o&&(!i||t.isYandex)),e;if(v<Ga)return c;if(Ta)return Ta=!1,Wa=1,us(o&&(!i||t.isYandex)),e;if(o&&(!i||t.isYandex)){const l=e.elapsed-c.elapsed;if(Math.abs(l)>2)return Wa=1,e;if(Math.abs(l)<.05)Wa=1;else{let h=l/1.5;Wa=Math.max(.5,Math.min(1.5,1+h))}return{...e,elapsed:c.elapsed}}return us(!1),e})}function us(e){e?mn():In()}function mn(){Hr||$s||(_s=performance.now(),Hr=setInterval(()=>{const e=performance.now();let t=(e-_s)/1e3;t>2&&(t=0),_s=e,kt.update(a=>{if(a.state!=="play")return a;let r=a.elapsed+t*Wa;return a.duration>0&&r>a.duration&&(r=a.duration),{...a,elapsed:r}})},wd))}function In(){Hr&&(clearInterval(Hr),Hr=null),Wa=1,_s=0}async function _i(e,t=!1){if(!e||e.length===0)return;wt.set(!0),Ta=!0;const a=5;try{for(let r=0;r<e.length;r+=a){const n=e.slice(r,r+a),i=["command_list_begin"];n.forEach(c=>{i.push(`add "${ms(c.file)}"`)}),i.push("command_list_end"),await Le.send(i.join(`
`))}t?(await Le.send("play 0"),De(`Playing ${e.length} tracks`,"success")):De(`Added ${e.length} tracks`,"success")}catch(r){console.error("[Player] Bulk Action Failed:",r),De("Error adding tracks","error")}finally{setTimeout(()=>{wt.set(!1),va()},1500)}}const Ut={async togglePlay(){const t=We(kt).state==="play";Ga=performance.now()+800,kt.update(a=>{const r=t?"pause":"play";return r==="play"?mn():In(),{...a,state:r}}),await Le.send(t?"pause 1":"play"),setTimeout(va,900)},async next(){Ta=!0,Ga=0,await Le.send("next"),va()},async previous(){Ta=!0,Ga=0,kt.update(e=>({...e,elapsed:0})),await Le.send("previous"),va()},async setVolume(e){kt.update(t=>({...t,volume:e})),await Le.send(`setvol ${e}`)},async seek(e){Ta=!0,Ga=performance.now()+500,kt.update(t=>({...t,elapsed:e})),await Le.send(`seekcur ${e}`),setTimeout(va,600)},async toggleRandom(){const t=!We(kt).random;kt.update(a=>({...a,random:t})),await Le.send(`random ${t?1:0}`)},async toggleRepeat(){const t=!We(kt).repeat;kt.update(a=>({...a,repeat:t})),await Le.send(`repeat ${t?1:0}`)},async playUri(e,t={}){wt.set(!0);const a=ms(e);Ta=!0,kt.update(r=>({...r,state:"play",elapsed:0})),Ht.set({title:t.title||e.split("/").pop(),artist:t.artist||"",album:t.album||"",file:e}),mn();try{const r=await Le.send("currentsong"),n=parseInt(Zt.parseKeyValue(r).pos),i=await Le.send(`addid "${a}"`),c=parseInt(Zt.parseKeyValue(i).id);if(isNaN(c))await Le.send(`add "${a}"`),await Le.send("play");else{const o=isNaN(n)?0:n+1;await Le.send(`moveid ${c} ${o}`),await Le.send(`playid ${c}`)}}catch(r){console.error("Play error",r),De("Failed to play","error")}setTimeout(()=>{wt.set(!1),va()},1200)},async addToQueue(e){try{await Le.send(`add "${ms(e)}"`),De("Added to queue","success")}catch(t){console.error("Add queue error",t),De("Failed to add","error")}},async playNext(e){wt.set(!0);const t=ms(e);try{const a=await Le.send("currentsong"),r=parseInt(Zt.parseKeyValue(a).pos||-1);if(r===-1)wt.set(!1),await this.playUri(e);else{const n=await Le.send(`addid "${t}"`),i=parseInt(Zt.parseKeyValue(n).id);isNaN(i)||(await Le.send(`moveid ${i} ${r+1}`),De("Will play next","success")),setTimeout(()=>wt.set(!1),1e3)}}catch(a){console.error("Play Next error",a),De("Failed to set next","error"),wt.set(!1)}},async removeFromQueue(e){wt.set(!0),pr&&clearTimeout(pr);try{_a.update(t=>{const a=[...t];return a.splice(e,1),a}),await Le.send(`delete ${e}`)}catch{De("Failed to remove","error"),wt.set(!1);return}pr=setTimeout(()=>{wt.set(!1)},1e3)},async moveTrack(e,t){if(e!==t){wt.set(!0),pr&&clearTimeout(pr);try{await Le.send(`move ${e} ${t}`)}catch(a){console.error("Move failed",a),De("Move failed","error"),wt.set(!1),va();return}pr=setTimeout(()=>{wt.set(!1),va()},2e3)}},async playAllTracks(e){if(!(!e||e.length===0))try{await Le.send("stop"),await Le.send("clear"),await _i(e,!0)}catch(t){console.error(t)}},async addAllToQueue(e){!e||e.length===0||await _i(e,!1)},async saveQueue(e){if(!e)return;const t=e.replace(/"/g,'\\"');try{await Le.send(`save "${t}"`),De(`Playlist "${e}" saved`,"success")}catch(a){if(a.message.includes("exist")){if(confirm(`Playlist "${e}" exists. Overwrite?`))try{await Le.send(`rm "${t}"`),await Le.send(`save "${t}"`),De(`Playlist "${e}" overwritten`,"success")}catch{De("Failed to overwrite","error")}}else console.error(a)}}},Rr="Favorites";let mi=Promise.resolve();const gr=e=>e?e.toLowerCase().replace(/^https?:\/\//,"").replace(/^www\./,"").split("?")[0].replace(/\/$/,""):"";function Ed(e){if(e==="Favorites")return"linear-gradient(135deg, hsl(348, 95%, 58%), hsl(348, 90%, 40%))";let t=0;for(let r=0;r<e.length;r++)t=e.charCodeAt(r)+((t<<5)-t);const a=Math.abs(t%360);return`linear-gradient(135deg, hsl(${a}, 60%, 40%), hsl(${(a+40)%360}, 60%, 30%))`}function $d(e){if(e==="Favorites")return"var(--c-heart)";let t=0;for(let r=0;r<e.length;r++)t=e.charCodeAt(r)+((t<<5)-t);return`var(--c-pl-${Math.abs(t%6)})`}const ga={async syncLibrary(){if(We(ia))return;ia.set(!0);const e=new xo;e.postMessage({type:"START_SYNC",payload:{url:`http://${Ka.MOODE_IP}/wave-api.php`}}),e.onmessage=t=>{const{type:a,count:r}=t.data;a==="DONE"&&(De(`Library updated: ${r} tracks`,"success"),ia.set(!1),e.terminate()),a==="ERROR"&&(De("Sync Failed","error"),ia.set(!1),e.terminate())},e.onerror=()=>{ia.set(!1),e.terminate()}},async loadPlaylists(){dn.set(!0);try{const e=await Le.send("listplaylists"),a=Zt.parsePlaylists(e).map(r=>({...r,color:Ed(r.name),colorVar:$d(r.name)}));Rs.set(a)}catch(e){console.error(e)}finally{dn.set(!1)}},async createPlaylistFromQueue(e){if(!e)return;const t=e.replace(/"/g,'\\"');try{await Le.send(`save "${t}"`),De(`Playlist "${e}" created`,"success"),await this.loadPlaylists()}catch(a){console.error(a),De("Failed to create playlist","error")}},async deletePlaylist(e){if(!e)return;const t=e.replace(/"/g,'\\"');try{await Le.send(`rm "${t}"`),De("Playlist deleted","info"),await this.loadPlaylists()}catch(a){console.error(a),De("Delete failed","error")}},async renamePlaylist(e,t){if(!e||!t)return;const a=e.replace(/"/g,'\\"'),r=t.replace(/"/g,'\\"');try{await Le.send(`rename "${a}" "${r}"`),De("Playlist renamed","success"),await this.loadPlaylists()}catch(n){console.error(n),De("Rename failed","error")}},async openPlaylistDetails(e){if(!e)return;vn.set(!0);const t=e.replace(/"/g,'\\"');try{const a=await Le.send(`listplaylistinfo "${t}"`),r=Zt.parseTracks(a),n=r.map(o=>o.file).filter(o=>o&&!o.startsWith("http"));let i=new Map;if(n.length>0)try{i=await Da.getFilesMap(n)}catch(o){console.warn("Failed to hydrate playlist from DB",o)}const c=r.map(o=>{const v=i.get(o.file);return v?{...o,thumbHash:v.thumbHash,qualityBadge:v.qualityBadge,title:o.title||v.title,artist:o.artist||v.artist,album:o.album||v.album,_uid:di()}:{...o,_uid:di()}});Ur.set(c)}catch(a){console.error(a),De("Could not load playlist","error")}finally{vn.set(!1)}},async movePlaylistTrack(e,t,a){const r=e.replace(/"/g,'\\"');try{await Le.send(`playlistmove "${r}" ${t} ${a}`)}catch{De("Move failed","error")}},async removeFromPlaylist(e,t){const a=e.replace(/"/g,'\\"');try{await Le.send(`playlistdelete "${a}" ${t}`),De("Track removed","success")}catch{De("Delete failed","error")}},async loadFavorites(){try{const e=await Le.send(`listplaylistinfo "${Rr}"`),t=Zt.parseTracks(e),a=new Set;t.forEach(r=>{r.file&&a.add(r.file)}),Oa.set(a)}catch{Oa.set(new Set)}},async toggleFavorite(e){if(!e||!e.file)return;const t=e.file,a=t.replace(/"/g,'\\"'),r=t.startsWith("http"),n=We(Oa);let i=n.has(t);if(!i&&r){const c=gr(t);for(const o of n)if(gr(o)===c){i=!0;break}}Oa.update(c=>{const o=new Set(c);if(i){if(o.delete(t),r){const v=gr(t);for(const l of o)gr(l)===v&&o.delete(l)}}else o.add(t);return o}),mi=mi.then(async()=>{try{const c=await Le.send(`listplaylistinfo "${Rr}"`),o=Zt.parseTracks(c);let v=[];if(o.forEach((l,u)=>{let h=!1;(l.file===t||r&&gr(l.file)===gr(t)||r&&(l.file.includes(t)||t.includes(l.file)))&&(h=!0),h&&v.push(u)}),i){if(v.length>0){v.sort((l,u)=>u-l);for(const l of v)await Le.send(`playlistdelete "${Rr}" ${l}`);De("Removed from Favorites","info")}}else v.length>0?console.log("[Fav] Track already exists. Skipping."):(await Le.send(`playlistadd "${Rr}" "${a}"`),o.length>0&&await Le.send(`playlistmove "${Rr}" ${o.length} 0`),De("Added to Favorites","success"))}catch(c){console.error("Fav action failed",c),De("Action failed","error")}finally{await this.loadFavorites()}})}},ua={async request(e,t={}){const a=We(Zr);if(!a)throw new Error("No token provided");const r=`/wave-api.php?action=yandex_proxy&path=${encodeURIComponent(e)}&token=${encodeURIComponent(a)}`,n={Authorization:`OAuth ${a}`,"Accept-Language":"en",...t.headers||{}},i=await fetch(r,{method:t.method||"GET",headers:n,body:t.body});if(!i.ok){let c=`Yandex API Error: ${i.status}`;try{const o=await i.json();o.error&&(c=o.error)}catch{}throw new Error(c)}return t.isXml?await i.text():await i.json()},async getUserId(){const e=await this.request("/account/status");if(!e.result||!e.result.account)throw new Error("Invalid response from Yandex: "+JSON.stringify(e));return e.result.account.uid},async getUserPlaylists(){try{const e=await this.getUserId();return(await this.request(`/users/${e}/playlists/list`)).result||[]}catch(e){return console.error("Yandex Playlists Error:",e),[]}},async getPlaylistTracks(e,t=null,a=0){try{t||(t=await this.getUserId());const n=(await this.request(`/users/${t}/playlists/${e}`)).result;if(!n||!n.tracks)return{tracks:[],total:0};const i=n.tracks.map(u=>u.id),c=50,o=a*c,v=i.slice(o,o+c);return{tracks:await this.getTracksByIds(v),total:i.length}}catch(r){return console.error("Yandex Playlist Tracks Error:",r),{tracks:[],total:0}}},async getFavorites(e=0){try{const t=await this.getUserId(),a=await this.request(`/users/${t}/likes/tracks`);let r=[];const n=a.result;if(!n)return{tracks:[],total:0};if(n.ids&&Array.isArray(n.ids)?r=n.ids:n.library&&Array.isArray(n.library)?r=n.library.map(l=>l.id):n.library&&n.library.tracks&&Array.isArray(n.library.tracks)?r=n.library.tracks.map(l=>l.id):Array.isArray(n)&&(r=n.map(l=>l.id)),r=r.filter(l=>l),e===0&&ps.set(new Set(r.map(String))),r.length===0)return{tracks:[],total:0};const i=50,c=e*i,o=r.slice(c,c+i);return{tracks:await this.getTracksByIds(o),total:r.length}}catch(t){return console.error("Yandex Favorites Error:",t),{tracks:[],total:0}}},async toggleLike(e,t){const a=await this.getUserId(),r=t?"remove":"add";ps.update(n=>{const i=new Set(n);return t?i.delete(String(e)):i.add(String(e)),i});try{await this.request(`/users/${a}/likes/tracks/${r}`,{method:"POST",body:`track-id=${e}`})}catch(n){throw console.error("Failed to toggle like",n),ps.update(i=>{const c=new Set(i);return t?c.add(String(e)):c.delete(String(e)),c}),n}},async search(e,t="all",a=0){if(!e)return{tracks:[],albums:[],artists:[]};try{const r=a,i=(await this.request(`/search?text=${encodeURIComponent(e)}&type=${t}&page=${r}&nocorrect=false`)).result;let c=[],o=[],v=[];return i.tracks&&i.tracks.results&&(c=this.normalizeTracks(i.tracks.results)),i.albums&&i.albums.results&&(o=i.albums.results.map(l=>({...l,isAlbum:!0,image:l.coverUri?`https://${l.coverUri.replace("%%","200x200")}`:null,artist:l.artists&&l.artists.length>0?l.artists[0].name:"Unknown"}))),i.artists&&i.artists.results&&(v=i.artists.results.map(l=>({...l,isArtist:!0,name:l.name,image:l.cover&&l.cover.uri?`https://${l.cover.uri.replace("%%","200x200")}`:null}))),{tracks:c,albums:o,artists:v}}catch(r){return console.error("Yandex Search Error:",r),{tracks:[],albums:[],artists:[]}}},async getAlbumTracks(e){try{const t=await this.request(`/albums/${e}/with-tracks`);if(!t.result||!t.result.volumes)return[];const a=[];return t.result.volumes.forEach(r=>{Array.isArray(r)&&a.push(...r)}),this.normalizeTracks(a)}catch(t){return console.error("Yandex Album Error:",t),[]}},async getArtistTracks(e){try{const t=await this.request(`/artists/${e}/tracks?page=0&page-size=50`);return!t.result||!t.result.tracks?[]:this.normalizeTracks(t.result.tracks)}catch(t){return console.error("Yandex Artist Error:",t),[]}},async getSimilarTracks(e){try{const t=await this.request(`/tracks/${e}/similar`);return!t.result||!t.result.similarTracks?[]:this.normalizeTracks(t.result.similarTracks)}catch(t){return console.error("Yandex Similar Tracks Error:",t),[]}},async getTracksByIds(e){if(!e.length)return[];const t=await this.request("/tracks",{method:"POST",body:`track-ids=${e.join(",")}`});return this.normalizeTracks(t.result)},async getStreamUrl(e){try{const t=await this.request(`/tracks/${e}/download-info`);if(!t.result||!t.result[0])throw new Error("No download info");const r=t.result.sort((x,T)=>T.bitrate_in_kbps-x.bitrate_in_kbps)[0];if(!r)throw new Error("No valid stream found");const n=r.downloadInfoUrl,i=await this.request(n,{isXml:!0}),o=new DOMParser().parseFromString(i,"text/xml"),v=o.getElementsByTagName("host")[0]?.textContent,l=o.getElementsByTagName("path")[0]?.textContent,u=o.getElementsByTagName("ts")[0]?.textContent,h=o.getElementsByTagName("s")[0]?.textContent;if(!v||!l||!u||!h)throw new Error("Invalid XML format");const p=_o("XGRlBW9FXlekgbPrRHuSiA"+l.substring(1)+h);return`https://${v}/get-mp3/${p}/${u}${l}`}catch(t){return console.error("Failed to get Yandex Stream URL",t),null}},normalizeTracks(e){return Array.isArray(e)?e.map(t=>({title:t.title,artist:t.artists&&t.artists.length>0?t.artists.map(a=>a.name).join(", "):"Unknown",album:t.albums&&t.albums.length>0?t.albums[0].title:"Single",file:`https://music.yandex.ru/album/${t.albums&&t.albums[0]?t.albums[0].id:0}/track/${t.id}`,id:t.id,image:t.coverUri?`https://${t.coverUri.replace("%%","200x200")}`:null,time:t.durationMs?t.durationMs/1e3:0,genre:"Yandex Music",isYandex:!0,stationName:null})):[]}};function To(){Le.connect(),kd(),ga.loadPlaylists(),ga.loadFavorites()}function Ms(e){return Le.send(e)}const{togglePlay:js,toggleRandom:ar,toggleRepeat:rr,setVolume:Ea,seek:Rn,addToQueue:Md,playNext:Ad,removeFromQueue:Cd,moveTrack:Pd,saveQueue:Ld,playAllTracks:jn,addAllToQueue:Nn,playUri:zd}=Ut,{syncLibrary:Id,loadRadioStations:Rd,loadPlaylists:On,openPlaylistDetails:Eo,toggleFavorite:$o,loadFavorites:jd,removeFromPlaylist:Mo,movePlaylistTrack:Ao}=ga;function Jr(e){const t=We(Ht),a=We(Va),r=We(ns),n=t.file&&t.file.startsWith("http"),i=We(ea),c=We(kt);if(i.active&&i.tracks.length>0&&(t.isYandex||t.file&&t.file===i.currentTrackFile)){let o;if(e==="next"){if(c.random){let l=0;do o=Math.floor(Math.random()*i.tracks.length),l++;while(o===i.currentIndex&&l<5&&i.tracks.length>1)}else o=i.currentIndex+1;if(o>=i.tracks.length){const l=i.tracks[i.tracks.length-1];l&&l.id?(De("Playlist ended. Starting My Vibe...","info"),qn(l.id)):bn(i.tracks[0],0,!0);return}}else c.random?o=Math.floor(Math.random()*i.tracks.length):(o=i.currentIndex-1,o<0&&(o=i.tracks.length-1));const v=i.tracks[o];if(v){bn(v,o,!0);return}}if(n&&a.length>0&&!t.isYandex&&(e==="next"||e==="previous")){let o=a.findIndex(l=>l.name===r);o===-1&&(o=0);let v;e==="next"?(v=o+1,v>=a.length&&(v=0)):(v=o-1,v<0&&(v=a.length-1)),Dn(a[v])}else e==="next"&&Ut.next(),e==="previous"&&Ut.previous()}function Dn(e){if(!e)return;ea.update(a=>({...a,active:!1})),ns.set(e.name);const t=e[1]||e.station||e.file||e.url;t&&Ut.playUri(t,{title:e.name,artist:e.genre||"Radio Stream",stationName:e.name})}function Ns(e){e&&(ea.update(t=>({...t,active:!1})),ns.set(null),Ut.playUri(e.file,{title:e.title,artist:e.artist,album:e.album,stationName:null}))}async function bn(e,t,a=!0){if(e.id)try{let r=null;const n=We(ea),i=Object.values(n.streamCache).find(o=>String(o.id)===String(e.id));if(i&&i.file?r=i.file:r=await ua.getStreamUrl(e.id),!r)throw new Error("No Stream");const c={title:e.title,artist:e.artist,album:e.album,image:e.image,id:e.id,time:e.time};if(Ya.saveYandexMeta(r,c),ea.update(o=>{const v={...o.streamCache};return v[r]={...e,isYandex:!0,file:r},{...o,active:!0,currentIndex:t,currentTrackId:e.id,currentTrackFile:r,streamCache:v}}),a)try{const o=r.replace(/"/g,'\\"'),v=await Le.send(`playlistfind file "${o}"`),l=Zt.parseKeyValue(v);l&&l.id?await Le.send(`playid ${l.id}`):await Ut.playUri(r,{title:e.title,artist:e.artist,album:e.album}),Nd(t+1)}catch(o){console.error("Play error, falling back to playUri",o),await Ut.playUri(r,{title:e.title,artist:e.artist,album:e.album})}else We(_a).some(l=>l.file===r)||await Ut.addToQueue(r)}catch(r){De("Failed to play Yandex track","error"),console.error(r)}}async function Nd(e){const t=We(ea);if(!t.active||!t.tracks)return;const a=3,r=[];for(let c=0;c<a;c++){const o=e+c;o<t.tracks.length&&r.push(t.tracks[o])}if(r.length===0)return;const n=We(_a),i=new Set(n.map(c=>c.file));for(const c of r)try{let o=null;const v=Object.keys(t.streamCache).find(l=>String(t.streamCache[l].id)===String(c.id));v?o=v:o=await ua.getStreamUrl(c.id),o&&(Ya.saveYandexMeta(o,{title:c.title,artist:c.artist,album:c.album,image:c.image,id:c.id,time:c.time}),ea.update(l=>{const u={...l.streamCache};return u[o]={...c,isYandex:!0,file:o},{...l,streamCache:u}}),i.has(o)||(await Le.send(`add "${o}"`),i.add(o)))}catch{console.warn("Failed to prefetch",c.title)}}async function Fn(e,t=0){if(!e||e.length===0)return;ea.set({active:!0,tracks:e,currentIndex:t,currentTrackFile:null,currentTrackId:e[t].id,streamCache:{}}),await Le.send("stop"),await Le.send("clear");const a=e[t];bn(a,t,!0)}async function Co(e,t=0){if(!e)return;ea.update(r=>({...r,active:!1})),ns.set(null);const a=e.replace(/"/g,'\\"');try{await Le.send("stop"),await Le.send("clear"),await Le.send(`load "${a}"`),await Le.send(`play ${t}`)}catch(r){console.error("Failed to play playlist context",r)}}async function qn(e){De("Starting My Vibe...","info");try{const t=await ua.getSimilarTracks(e);t.length>0?Fn(t,0):De("No similar tracks found","error")}catch{De("Radio error","error")}}const Od=Object.freeze(Object.defineProperty({__proto__:null,addAllToQueue:Nn,addToQueue:Md,connect:To,loadFavorites:jd,loadPlaylists:On,loadRadioStations:Rd,movePlaylistTrack:Ao,moveTrack:Pd,nav:Jr,openPlaylistDetails:Eo,playAllTracks:jn,playNext:Ad,playPlaylistContext:Co,playStation:Dn,playTrackOptimistic:Ns,playUri:zd,playYandexContext:Fn,removeFromPlaylist:Mo,removeFromQueue:Cd,runMpdRequest:Ms,saveQueue:Ld,seek:Rn,setVolume:Ea,startYandexRadio:qn,syncLibrary:Id,toggleFavorite:$o,togglePlay:js,toggleRandom:ar,toggleRepeat:rr},Symbol.toStringTag,{value:"Module"}));function Bn(e,t=2e3){let a;const r=i=>{i.type==="mousedown"&&i.button!==0||(a=setTimeout(()=>{e.dispatchEvent(new CustomEvent("longpress",{detail:{originalEvent:i}}))},t))},n=()=>{clearTimeout(a)};return e.addEventListener("mousedown",r),e.addEventListener("touchstart",r,{passive:!0}),e.addEventListener("mouseup",n),e.addEventListener("mouseleave",n),e.addEventListener("touchend",n),e.addEventListener("touchcancel",n),e.addEventListener("touchmove",n),{destroy(){e.removeEventListener("mousedown",r),e.removeEventListener("touchstart",r),e.removeEventListener("mouseup",n),e.removeEventListener("mouseleave",n),e.removeEventListener("touchend",n),e.removeEventListener("touchcancel",n),e.removeEventListener("touchmove",n)}}}var Dd=w('<div class="drag-handle svelte-5cs2hz" title="Drag to reorder"><div class="icon-small svelte-5cs2hz"><!></div></div>'),Fd=w('<div class="eq-anim svelte-5cs2hz"><span class="bar b1 svelte-5cs2hz"></span> <span class="bar b2 svelte-5cs2hz"></span> <span class="bar b3 svelte-5cs2hz"></span></div>'),qd=w('<div class="icon-small svelte-5cs2hz"><!></div>'),Bd=w('<div class="icon-small svelte-5cs2hz"><!></div>'),Ud=w('<div class="icon-small accent svelte-5cs2hz"><!></div>'),Yd=w('<span class="num svelte-5cs2hz"> </span>'),Hd=w('<button class="num-box svelte-5cs2hz"><!></button>'),Vd=w('<div slot="fallback" class="icon-ph svelte-5cs2hz"><!></div>'),Qd=w('<span class="meta-tag quality svelte-5cs2hz"> </span>'),Wd=w('<button class="btn-icon small remove svelte-5cs2hz"><!></button>'),Xd=w('<div class="dur svelte-5cs2hz"> </div>'),Kd=w('<div role="button" tabindex="0"><div class="left svelte-5cs2hz"><!> <div class="thumb svelte-5cs2hz"><!></div></div> <div class="info svelte-5cs2hz"><div class="title-row svelte-5cs2hz"><div class="title text-ellipsis svelte-5cs2hz"> </div> <!></div> <div> </div></div> <div class="right svelte-5cs2hz"><button class="btn-icon small context-menu-btn svelte-5cs2hz" title="Options"><!></button> <button><!></button> <!></div></div>');function $r(e,t){St(t,!1);const a=()=>Ee(ps,"$yandexFavorites",o),r=()=>Ee(Oa,"$favorites",o),n=()=>Ee(Wt,"$navigationStack",o),i=()=>Ee(Dt,"$activeMenuTab",o),c=()=>Ee(Va,"$stations",o),[o,v]=jt(),l=$(),u=$(),h=$(),f=$(),p=$(),x=$(),T=$(),k=$(),S=$(),F=$(),le=$(),Q=$(),te=$(),be=$(),q=$(),B=$(),se=$();let W=mt(t,"track",8),ye=mt(t,"index",8),L=mt(t,"isEditable",8,!1),U=mt(t,"playingIndex",24,()=>-1),he=mt(t,"playingFile",8,null),V=mt(t,"isPlaying",8,!1);const _e=Cn();let j=$(!1),N=$(!1);function Me(D){if(s(T))return"â";if(!D)return"0:00";const Se=parseInt(D,10),Ie=Math.floor(Se/60),je=Se%60;return`${Ie}:${je.toString().padStart(2,"0")}`}function K(D){D.stopPropagation(),s(p)?js():_e("play")}function ne(){return s(u)?.view==="details"&&s(u).data?.name?{type:"playlist",playlistName:s(u).data.name,index:ye()}:s(h)?{type:"queue",index:ye()}:{type:"general"}}function C(D){D.stopPropagation(),Kr(D,W(),ne())}function G(D){L()||Kr(D.detail.originalEvent,W(),ne())}function ge(D){D.stopPropagation(),!s(T)&&W().artist&&(Dt.set("artists"),Ba("albums_by_artist",{name:W().artist}))}async function A(D){if(D.stopPropagation(),W().isYandex)try{await ua.toggleLike(W().id,s(l)),De(s(l)?"Removed from Yandex Likes":"Added to Yandex Likes","success")}catch{De("Failed to update Yandex like","error")}else $o(W())}oe(()=>R(W()),()=>{W()&&g(N,!1)}),oe(()=>(R(W()),a(),r()),()=>{g(l,W().isYandex?a().has(String(W().id)):r().has(W().file))}),oe(()=>n(),()=>{g(u,n()[n().length-1])}),oe(()=>(s(u),i()),()=>{g(h,s(u)?.view==="queue"||s(u)?.view==="root"&&i()==="queue")}),oe(()=>(s(h),R(ye()),R(U())),()=>{g(f,s(h)?Number(ye())===U():!1)}),oe(()=>(R(W()),R(he())),()=>{g(p,W().file===he())}),oe(()=>(s(p),s(f)),()=>{g(x,s(p)&&!s(f))}),oe(()=>R(W()),()=>{g(T,W().file&&(W().file.startsWith("http")||W().file.includes("RADIO"))&&!W().isYandex)}),oe(()=>(s(f),R(V()),s(j)),()=>{g(k,s(f)&&V()&&s(j))}),oe(()=>(s(f),R(V()),s(j)),()=>{g(S,s(f)&&V()&&!s(j))}),oe(()=>(s(f),R(V()),s(j)),()=>{g(F,s(f)&&!V()&&!s(j))}),oe(()=>(s(j),s(k)),()=>{g(le,s(j)&&!s(k))}),oe(()=>R(W()),()=>{g(Q,W().title||W().file?.split("/").pop())}),oe(()=>R(W()),()=>{g(te,W().artist||"Unknown")}),oe(()=>R(W()),()=>{g(be,Me(W().time))}),oe(()=>R(W()),()=>{g(q,W().qualityBadge?W().qualityBadge.split(" ")[0]:null)}),oe(()=>{},()=>{g(B,null)}),oe(()=>(s(N),R(W()),c(),s(B),Gr),()=>{g(se,s(N)?Er(W(),c(),s(B)):Gr(W(),"sm",c(),s(B)))}),Vt(),At();var ie=Kd();let Y;var ve=d(ie),Z=d(ve);{var J=D=>{var Se=Dd(),Ie=d(Se),je=d(Ie);re(je,()=>(R(y),b(()=>y.DRAG_HANDLE))),M("mousedown",Se,qe=>_e("startdrag",qe)),M("touchstart",Se,qe=>_e("startdrag",qe),void 0,!0),M("click",Se,Gt(function(qe){Xr.call(this,t,qe)})),m(D,Se)},fe=D=>{var Se=Hd(),Ie=d(Se);{var je=Ue=>{var Fe=Fd();m(Ue,Fe)},qe=Ue=>{var Fe=at(),Ve=ze(Fe);{var Ge=Ye=>{var Pe=qd(),Qe=d(Pe);re(Qe,()=>(R(y),b(()=>y.PAUSE))),m(Ye,Pe)},tt=Ye=>{var Pe=at(),Qe=ze(Pe);{var it=Xe=>{var Ze=Bd(),ot=d(Ze);re(ot,()=>(R(y),b(()=>y.PLAY))),m(Xe,Ze)},Je=Xe=>{var Ze=at(),ot=ze(Ze);{var yt=dt=>{var lt=Ud(),ct=d(lt);re(ct,()=>(R(y),b(()=>y.PLAY))),m(dt,lt)},gt=dt=>{var lt=Yd(),ct=d(lt);ue(()=>de(ct,ye()+1)),m(dt,lt)};P(ot,dt=>{s(F)?dt(yt):dt(gt,!1)},!0)}m(Xe,Ze)};P(Qe,Xe=>{s(le)?Xe(it):Xe(Je,!1)},!0)}m(Ye,Pe)};P(Ve,Ye=>{s(k)?Ye(Ge):Ye(tt,!1)},!0)}m(Ue,Fe)};P(Ie,Ue=>{s(S)?Ue(je):Ue(qe,!1)})}M("click",Se,K),m(D,Se)};P(Z,D=>{L()?D(J):D(fe,!1)})}var me=_(Z,2),we=d(me);Pa(we,{get src(){return s(se)},get alt(){return s(Q)},radius:"4px",$$events:{error:()=>g(N,!0)},$$slots:{fallback:(D,Se)=>{var Ie=Vd(),je=d(Ie);re(je,()=>(s(T),R(y),b(()=>s(T)?y.RADIO:y.ALBUMS))),ut(1,Ie,()=>xt),m(D,Ie)}}});var ke=_(ve,2),Re=d(ke),xe=d(Re),Te=d(xe),Ne=_(xe,2);{var Oe=D=>{var Se=Qd(),Ie=d(Se);ue(()=>de(Ie,s(q))),m(D,Se)};P(Ne,D=>{s(q)&&!s(T)&&D(Oe)})}var E=_(Re,2);let I;var H=d(E),ce=_(ke,2),Ce=d(ce),pe=d(Ce);re(pe,()=>(R(y),b(()=>y.DOTS)));var ae=_(Ce,2);let $e;var z=d(ae);re(z,()=>(s(l),R(y),b(()=>s(l)?y.HEART_FILLED:y.HEART)));var ee=_(ae,2);{var O=D=>{var Se=Wd(),Ie=d(Se);re(Ie,()=>(R(y),b(()=>y.REMOVE))),M("click",Se,Gt(()=>_e("remove",{index:ye()}))),m(D,Se)},X=D=>{var Se=Xd(),Ie=d(Se);ue(()=>de(Ie,s(be))),m(D,Se)};P(ee,D=>{L()?D(O):D(X,!1)})}Ft(()=>M("click",ie,()=>!s(f)&&_e("play"))),Ft(()=>M("mouseenter",ie,()=>g(j,!0))),Ft(()=>M("mouseleave",ie,()=>g(j,!1))),Is(ie,D=>Bn?.(D)),Ft(()=>M("longpress",ie,G)),ue(()=>{Y=Ke(ie,1,"row svelte-5cs2hz",null,Y,{active:s(f),striped:s(x),editable:L()}),Lt(xe,"title",s(Q)),de(Te,s(Q)),I=Ke(E,1,"artist text-ellipsis svelte-5cs2hz",null,I,{link:!s(T)&&!W().isYandex}),de(H,s(te)),$e=Ke(ae,1,"btn-icon small svelte-5cs2hz",null,$e,{liked:s(l)})}),M("click",E,function(...D){(W().isYandex?void 0:ge)?.apply(this,D)}),M("click",Ce,C),M("click",ae,Gt(A)),m(e,ie),Tt(),v()}const fs=100,bi=5,yi=25,wi=3;function Gd({tracksStore:e,onMoveTrack:t}){const a=He(!1),r=He(!1),n=He(!1),i=He(null),c=He(null),o=He(null),v=He({x:0,y:0,width:0,height:0,grabOffsetX:0,grabOffsetY:0}),l=He(null);let u=!1,h=0,f=0,p=0,x=0;const T={scrollContainer:null,listBodyContainer:null};let k=null;function S(L,U,he){const V=L.detail;if(V.button===2||(window.getSelection&&window.getSelection().removeAllRanges(),!T.scrollContainer))return;const j=T.scrollContainer.querySelectorAll(".row-wrapper")[U];if(!j)return;const N=j.getBoundingClientRect(),Me=V.touches?V.touches[0].clientX:V.clientX,K=V.touches?V.touches[0].clientY:V.clientY,ne=Me-N.left,C=K-N.top;u=!0,a.set(!1),r.set(!1),h=Me,f=K,p=Me,x=K,i.set(U),c.set(U),l.set(he),o.set(null),v.set({x:Me,y:K,width:N.width,height:N.height,grabOffsetX:ne,grabOffsetY:C})}function F(L){if(!u||We(r))return;const U=L.touches?L.touches[0].clientX:L.clientX,he=L.touches?L.touches[0].clientY:L.clientY;if(!We(a)){const V=Math.abs(U-h),_e=Math.abs(he-f);if(V<wi&&_e<wi)return;a.set(!0)}L.cancelable&&L.preventDefault(),p=U,x=he,v.update(V=>({...V,x:p,y:x})),B(x),le()}function le(){if(!T.listBodyContainer)return;const L=T.listBodyContainer.getBoundingClientRect(),U=We(v),V=x-L.top-U.grabOffsetY+U.height/2,_e=We(e).length;if(V<0){c.set(0);return}if(V>L.height){c.set(_e);return}const j=Array.from(T.listBodyContainer.querySelectorAll(".row-wrapper"));let N=-1,Me=1/0;j.forEach((K,ne)=>{const C=K.offsetTop+K.offsetHeight/2,G=Math.abs(V-C);G<Me&&(Me=G,N=ne)}),N!==-1&&c.set(N)}function Q(L){if(u){if(u=!1,!We(a)){be();return}te()}}async function te(){W(),le(),a.set(!1),r.set(!0);const L=We(c);if(T.listBodyContainer&&L!==null){const N=T.listBodyContainer.querySelectorAll(".row-wrapper"),Me=T.listBodyContainer.getBoundingClientRect(),K=N[L];let ne=0,C=0,G=!1;if(K)ne=Me.top+K.offsetTop,C=Me.left+K.offsetLeft,G=!0;else if(L>=N.length&&N.length>0){const ge=N[N.length-1];ne=Me.top+ge.offsetTop+ge.offsetHeight,C=Me.left+ge.offsetLeft,G=!0}else N.length===0&&(ne=Me.top,C=Me.left,G=!0);G&&v.update(ge=>({...ge,y:ne+ge.grabOffsetY,x:C+ge.grabOffsetX}))}await new Promise(N=>setTimeout(N,250)),n.set(!0),await wr();const U=We(i),he=We(e).length;let V=Math.max(0,Math.min(L,he)),_e=V;if(U!==null&&U!==V){const N=[...We(e)],[Me]=N.splice(U,1);_e=Math.max(0,Math.min(_e,N.length)),N.splice(_e,0,Me),e.set(N),t&&t(U,_e),i.set(_e)}await wr(),l.set(null),i.set(null),c.set(null),r.set(!1);const j=U!==V?_e:U;o.set(j),await wr(),requestAnimationFrame(()=>{requestAnimationFrame(()=>{n.set(!1),setTimeout(()=>{o.set(null)},300)})})}function be(){u=!1,q()}function q(){a.set(!1),r.set(!1),i.set(null),c.set(null),l.set(null),W()}function B(L){if(!T.scrollContainer)return;const{top:U,bottom:he}=T.scrollContainer.getBoundingClientRect(),V=L-U,_e=he-L;W();let j=0;if(V<fs&&V>0){const N=1-V/fs;j=-(bi+yi*(N*N))}else if(_e<fs&&_e>0){const N=1-_e/fs;j=bi+yi*(N*N)}j!==0&&se(j)}function se(L){k||(k=requestAnimationFrame(function U(){T.scrollContainer&&(T.scrollContainer.scrollTop+=L,We(a)&&(v.update(he=>({...he,x:p,y:x})),le(),k=requestAnimationFrame(U)))}))}function W(){k&&(cancelAnimationFrame(k),k=null)}function ye(L,U,he,V,_e,j){return j||!U&&!he||V===null||_e===null?"":L===V?"opacity: 0; pointer-events: none;":V===_e?"":V<_e&&L>V&&L<=_e?"transform: translateY(-100%);":V>_e&&L>=_e&&L<V?"transform: translateY(100%);":""}return{isDragging:a,isDropping:r,isReordering:n,draggingIndex:i,hoverIndex:c,justDroppedIndex:o,draggedItemData:l,ghostCoords:v,refs:T,onDragInit:S,onPointerMove:F,onPointerUp:Q,getRowStyle:ye,cancelDrag:be}}var Zd=w('<div><div style="pointer-events: none; width: 100%; height: 100%;" class="svelte-ym6b2"><!></div></div>'),Jd=w('<div class="skeleton-row svelte-ym6b2"><div class="sk-left svelte-ym6b2"><!> <!></div> <div class="sk-info svelte-ym6b2"><!> <!></div> <div class="sk-right svelte-ym6b2"><!></div></div>'),ev=w('<div class="skeletons-wrapper svelte-ym6b2"></div>'),tv=w("<div><!></div>"),av=w('<div class="content-padded svelte-ym6b2" style="text-align: center; opacity: 0.5;"> </div>'),rv=w("<!> <!> <!>",1),sv=w('<div><!> <div class="list-body svelte-ym6b2"><!> <!></div></div>');function is(e,t){St(t,!1);const a=()=>Ee(Wt,"$navigationStack",p),r=()=>Ee(Dt,"$activeMenuTab",p),n=()=>Ee(W,"$isDragging",p),i=()=>Ee(ye,"$isDropping",p),c=()=>Ee(_e,"$draggedItemData",p),o=()=>Ee(j,"$ghostCoords",p),v=()=>Ee(U,"$draggingIndex",p),l=()=>Ee(T(),"$itemsStore",p),u=()=>Ee(V,"$justDroppedIndex",p),h=()=>Ee(L,"$isReordering",p),f=()=>Ee(he,"$hoverIndex",p),[p,x]=jt();let T=mt(t,"itemsStore",8),k=mt(t,"isEditMode",8,!1),S=mt(t,"isLoading",8,!1),F=mt(t,"emptyText",8,"List is empty"),le=mt(t,"onMoveItem",8,(Z,J)=>{}),Q=$(""),te=$(0),be=$(!1);Ha(async()=>{g(te,nd(s(Q))),!S()&&s(te)>0&&s(B).refs.scrollContainer&&(await wr(),ls(B,s(B).refs.scrollContainer.scrollTop=s(te)),g(be,!0))});async function q(){await wr(),s(B).refs.scrollContainer&&(ls(B,s(B).refs.scrollContainer.scrollTop=s(te)),g(be,!0))}po(()=>{s(B).cancelDrag(),s(B).refs.scrollContainer&&sd(s(Q),s(B).refs.scrollContainer.scrollTop)});const B=$(Gd({tracksStore:T(),onMoveTrack:(Z,J)=>{le()(Z,J)}})),se=s(B),W=se.isDragging,ye=se.isDropping,L=se.isReordering,U=se.draggingIndex,he=se.hoverIndex,V=se.justDroppedIndex,_e=se.draggedItemData,j=se.ghostCoords,N=$(se.refs);function Me(Z,J,fe){k()&&s(B).onDragInit(Z,J,fe)}oe(()=>(a(),r()),()=>{const Z=a(),J=Z[Z.length-1],fe=r();if(J&&J.view==="root")g(Q,`root_${fe}`);else if(J){const me=J.data?J.data.name||J.data:"unknown";g(Q,`${J.view}_${me}`)}}),oe(()=>(R(S()),s(be),s(te),s(B)),()=>{!S()&&!s(be)&&s(te)>0&&s(B).refs.scrollContainer&&q()}),Vt(),At();var K=sv();M("mousemove",ja,function(...Z){s(B).onPointerMove?.apply(this,Z)}),M("mouseup",ja,function(...Z){s(B).onPointerUp?.apply(this,Z)}),M("touchmove",ja,function(...Z){s(B).onPointerMove?.apply(this,Z)},void 0,!1),M("touchend",ja,function(...Z){s(B).onPointerUp?.apply(this,Z)}),M("touchcancel",ja,function(...Z){s(B).onPointerUp?.apply(this,Z)});let ne;var C=d(K);{var G=Z=>{var J=Zd();let fe;var me=d(J),we=d(me);Or(we,t,"row",{get item(){return c()},get index(){return v()},isGhost:!0,startDrag:()=>{}}),ue(()=>{fe=Ke(J,1,"floating-item svelte-ym6b2",null,fe,{dropping:i()}),ht(J,`
            top: ${o(),b(()=>o().y-o().grabOffsetY)??""}px; 
            left: ${o(),b(()=>o().x-o().grabOffsetX)??""}px;
            width: ${o(),b(()=>o().width)??""}px; 
            height: ${o(),b(()=>o().height)??""}px;
        `)}),m(Z,J)};P(C,Z=>{(n()||i())&&c()&&Z(G)})}var ge=_(C,2),A=d(ge);Or(A,t,"header",{});var ie=_(A,2);{var Y=Z=>{var J=ev();bt(J,4,()=>Array(10),Kt,(fe,me)=>{var we=Jd(),ke=d(we),Re=d(ke);Rt(Re,{width:"24px",height:"24px",radius:"4px",style:"opacity: 0.3"});var xe=_(Re,2);Rt(xe,{width:"40px",height:"40px",radius:"4px",style:"margin-left: 12px;"});var Te=_(ke,2),Ne=d(Te);Rt(Ne,{width:"40%",height:"14px",radius:"4px",style:"margin-bottom: 6px;"});var Oe=_(Ne,2);Rt(Oe,{width:"25%",height:"12px",radius:"4px",style:"opacity: 0.6"});var E=_(Te,2),I=d(E);Rt(I,{width:"30px",height:"12px",radius:"4px"}),m(fe,we)}),m(Z,J)},ve=Z=>{var J=rv(),fe=ze(J);bt(fe,3,l,(Re,xe)=>Re._uid||xe,(Re,xe,Te)=>{var Ne=tv();let Oe;var E=d(Ne);Or(E,t,"row",{get item(){return s(xe)},get index(){return s(Te)},isGhost:!1,startDrag:I=>Me(I,s(Te),s(xe))}),ue(I=>{Oe=Ke(Ne,1,"row-wrapper svelte-ym6b2",null,Oe,{"ghost-placeholder":v()===s(Te)&&(n()||i()),"just-dropped":u()===s(Te),"no-transition":h()}),ht(Ne,I)},[()=>(s(B),R(s(Te)),n(),i(),v(),f(),h(),b(()=>s(B).getRowStyle(s(Te),n(),i(),v(),f(),h())))]),m(Re,Ne)});var me=_(fe,2);{var we=Re=>{var xe=av(),Te=d(xe);ue(()=>de(Te,F())),m(Re,xe)};P(me,Re=>{l(),b(()=>l().length===0)&&Re(we)})}var ke=_(me,2);Or(ke,t,"footer",{}),m(Z,J)};P(ie,Z=>{S()?Z(Y):Z(ve,!1)})}Ua(ge,Z=>ls(N,s(N).listBodyContainer=Z),()=>s(N)?.listBodyContainer),Ua(K,Z=>ls(N,s(N).scrollContainer=Z),()=>s(N)?.scrollContainer),ue(()=>ne=Ke(K,1,"base-list-scroll-container svelte-ym6b2",null,ne,{dragging:n()})),ut(1,ge,()=>xt,()=>({duration:200})),m(e,K),Tt(),x()}var nv=w('<div slot="fallback" class="icon-fallback svelte-1eh2rsb"><!></div>'),iv=w('<span class="meta-tag svelte-1eh2rsb"> </span>'),ov=w('<div class="header-subtitle-row svelte-1eh2rsb"><h2 class="header-sub-text svelte-1eh2rsb"> </h2> <!></div>'),lv=w('<span class="meta-tag svelte-1eh2rsb"> </span>'),cv=w('<span class="meta-tag svelte-1eh2rsb"> </span>'),dv=w('<span class="meta-tag quality svelte-1eh2rsb"> </span>'),vv=w('<div slot="header" class="content-padded svelte-1eh2rsb"><div class="view-header svelte-1eh2rsb"><div class="header-art svelte-1eh2rsb"><div style="width: 100%; height: 100%;" class="svelte-1eh2rsb"><!></div></div> <div class="header-info svelte-1eh2rsb"><div class="header-text-group svelte-1eh2rsb"><div class="header-label svelte-1eh2rsb"> </div> <h1 class="header-title svelte-1eh2rsb"> </h1> <!> <div class="meta-badges svelte-1eh2rsb"><!> <!> <!></div></div> <div class="header-actions svelte-1eh2rsb"><button class="btn-primary svelte-1eh2rsb"> </button> <button class="btn-secondary svelte-1eh2rsb"> </button></div></div></div></div>'),uv=w('<div slot="row" class="svelte-1eh2rsb"><!></div>'),fv=w("<button> </button>"),hv=w('<div class="sort-backdrop svelte-1eh2rsb"></div> <div class="sort-menu svelte-1eh2rsb"></div>',1),pv=w('<div class="sort-wrapper svelte-1eh2rsb"><button class="sort-trigger svelte-1eh2rsb"><span class="svelte-1eh2rsb"> </span> <span class="sort-trigger-icon svelte-1eh2rsb"><!></span></button> <!></div>'),gv=w('<div class="music-card skeleton-card svelte-1eh2rsb"><div class="card-img-container svelte-1eh2rsb"><!></div> <div class="card-title svelte-1eh2rsb" style="margin-top: 12px;"><!></div> <div class="card-sub-row svelte-1eh2rsb" style="margin-top: 6px;"><!></div></div>'),_v=w('<div class="music-grid svelte-1eh2rsb"></div>'),mv=w('<div class="group-header header-label svelte-1eh2rsb"> </div>'),bv=w('<div slot="fallback" class="icon-fallback svelte-1eh2rsb"><!></div>'),yv=w('<div class="card-sub text-ellipsis svelte-1eh2rsb"> </div>'),wv=w('<div class="card-badge svelte-1eh2rsb"> </div>'),kv=w('<div class="card-badge quality svelte-1eh2rsb"> </div>'),xv=w('<div class="music-card svelte-1eh2rsb" role="button" tabindex="0"><div class="card-img-container svelte-1eh2rsb"><!> <div class="play-overlay svelte-1eh2rsb"><span class="overlay-icon svelte-1eh2rsb"><!></span></div></div> <div class="card-title svelte-1eh2rsb"> </div> <div class="card-sub-row svelte-1eh2rsb"><!> <!> <!></div></div>'),Sv=w('<div class="empty-text svelte-1eh2rsb">No results found</div>'),Tv=w('<div class="music-grid svelte-1eh2rsb"></div>'),Ev=w('<div class="content-padded svelte-1eh2rsb"><div class="search-input-container svelte-1eh2rsb"><span class="search-icon svelte-1eh2rsb"><!></span> <input type="text" class="svelte-1eh2rsb"/> <!></div> <!></div>'),$v=w("<div><!></div>");function Mv(e,t){St(t,!1);const a=()=>Ee(u,"$itemsStore",n),r=()=>Ee(Wt,"$navigationStack",n),[n,i]=jt(),c=$(),o=$(),v=$();let l=mt(t,"activeCategory",8,"artists");const u=He([]);let h=$(!0),f=$(""),p=$("name"),x=$(!1);const T=[{id:"name",label:"A-Z"},{id:"artist",label:"Artist"},{id:"year",label:"Oldest"},{id:"year_desc",label:"Newest"}];let k=$(!1),S=$(!1),F=$(null),le=$(""),Q=$(""),te=$(""),be=$(0),q=0;function B(){g(x,!s(x))}function se(K){g(p,K),g(x,!1)}function W(K,ne){if(!K||K.length===0)return[];const C=[...K].sort((G,ge)=>{switch(ne){case"name":return G.displayName.localeCompare(ge.displayName,void 0,{sensitivity:"base"});case"artist":const A=G.artist||"",ie=ge.artist||"",Y=A.localeCompare(ie,void 0,{sensitivity:"base"});return Y!==0?Y:(parseInt(G.year)||0)-(parseInt(ge.year)||0);case"year":return(parseInt(G.year)||0)-(parseInt(ge.year)||0);case"year_desc":return(parseInt(ge.year)||0)-(parseInt(G.year)||0);default:return 0}});if(ne==="artist"){const G=[];let ge=null;return C.forEach(A=>{const ie=A.artist||"Unknown Artist";ie!==ge&&(G.push({_uid:`header-${ie}`,isHeader:!0,title:ie}),ge=ie),G.push(A)}),G}return C}async function ye(K,ne){if(!ne)return;const C=++q;g(h,!0),u.set([]),g(F,ne.data),g(le,""),g(Q,""),g(te,""),g(be,0),console.log(`[LibraryView #${C}] Start loading:`,ne);try{let G=[];if(ne.view==="root")G=K==="artists"?await Da.getArtists():await Da.getAlbums();else if(ne.view==="albums_by_artist"){const A=ne.data.name||ne.data;G=await Da.getArtistAlbums(A),g(p,"year")}else if(ne.view==="tracks_by_album"){const A=ne.data.name||ne.data,ie=ne.data.artist;G=await Da.getAlbumTracks(A,ie)}if(C!==q){console.warn(`[LibraryView #${C}] Request cancelled (stale).`);return}const ge=G.map((A,ie)=>{const ve=typeof A=="string"?{name:A}:A;let Z=String(ve.year||"");return Z.length>4&&(Z=Z.substring(0,4)),{...ve,displayName:ve.name||ve.title||ve.artist||"Unknown",thumbFile:ve.file||null,year:Z,_uid:(ve.file||ve.name||ie)+K+ne.view}});if(console.log(`[LibraryView #${C}] Setting ${ge.length} items.`),u.set(ge),ne.view==="tracks_by_album"&&ge.length>0){g(F,ge[0]),g(be,ge.length),g(te,ge[0].year);const A=ge.reduce((ie,Y)=>ie+(Y.time||0),0);if(A>0){const ie=Math.floor(A/3600),Y=Math.floor(A%3600/60);g(le,ie>0?`${ie} hr ${Y} min`:`${Y} min`)}ge[0].qualityBadge&&g(Q,ge[0].qualityBadge)}}catch(G){C===q&&(console.error(G),u.set([]))}finally{C===q&&g(h,!1)}}function L(K){s(v).view==="root"?l()==="artists"?Ba("albums_by_artist",K):Ba("tracks_by_album",K):s(v).view==="albums_by_artist"&&Ba("tracks_by_album",K)}function U(){const K=a();if(K.length>0){const ne=s(v).data.name||s(v).data.displayName||"this selection";pa({title:"Replace Queue?",message:`This will clear your queue and play all tracks from "${ne}".`,confirmLabel:"Play",type:"confirm",onConfirm:()=>{g(k,!0),jn(K)}})}}function he(){const K=a();K.length>0&&(g(S,!0),Nn(K),setTimeout(()=>{g(S,!1)},2e3))}oe(()=>R(l()),()=>{l()&&(g(f,""),l(),g(p,"name"))}),oe(()=>(s(p),y),()=>{g(c,s(p)==="year_desc"?y.SORT_ASC:y.SORT_DESC)}),oe(()=>(a(),s(f),s(p)),()=>{g(o,W(a().filter(K=>{if(!s(f))return!0;const ne=s(f).toLowerCase();return K.displayName.toLowerCase().includes(ne)||K.artist&&K.artist.toLowerCase().includes(ne)}),s(p)))}),oe(()=>r(),()=>{g(v,r()[r().length-1])}),oe(()=>(R(l()),s(v)),()=>{ye(l(),s(v))}),oe(()=>s(v),()=>{s(v)&&(g(k,!1),g(S,!1),g(x,!1))}),Vt(),At();var V=$v();let _e;var j=d(V);{var N=K=>{is(K,{get itemsStore(){return u},get isLoading(){return s(h)},isEditMode:!1,emptyText:"No tracks found",$$slots:{header:(ne,C)=>{var G=vv(),ge=d(G),A=d(ge),ie=d(A),Y=d(ie);{let z=pt(()=>(R(Er),s(F),b(()=>Er(s(F)))));Pa(Y,{get src(){return s(z)},alt:"Art",radius:"8px",$$slots:{fallback:(ee,O)=>{var X=nv(),D=d(X);re(D,()=>(R(y),b(()=>y.ALBUMS))),m(ee,X)}}})}var ve=_(A,2),Z=d(ve),J=d(Z),fe=d(J),me=_(J,2),we=d(me),ke=_(me,2);{var Re=z=>{var ee=ov(),O=d(ee),X=d(O),D=_(O,2);{var Se=Ie=>{var je=iv(),qe=d(je);ue(()=>de(qe,s(te))),m(Ie,je)};P(D,Ie=>{s(te)&&s(te)!=="0"&&Ie(Se)})}ue(()=>de(X,(s(F),b(()=>s(F).artist)))),m(z,ee)};P(ke,z=>{s(F),b(()=>s(F)&&s(F).artist)&&z(Re)})}var xe=_(ke,2),Te=d(xe);{var Ne=z=>{var ee=lv(),O=d(ee);ue(()=>de(O,`${s(be)??""} tracks`)),m(z,ee)};P(Te,z=>{s(be)>0&&z(Ne)})}var Oe=_(Te,2);{var E=z=>{var ee=cv(),O=d(ee);ue(()=>de(O,s(le))),m(z,ee)};P(Oe,z=>{s(le)&&z(E)})}var I=_(Oe,2);{var H=z=>{var ee=dv(),O=d(ee);ue(()=>de(O,s(Q))),m(z,ee)};P(I,z=>{s(Q)&&z(H)})}var ce=_(Z,2),Ce=d(ce),pe=d(Ce),ae=_(Ce,2),$e=d(ae);ue(()=>{de(fe,(s(v),b(()=>s(v).view==="albums_by_artist"?"Artist":"Album"))),Lt(me,"title",(s(v),b(()=>s(v).data.name||s(v).data.displayName))),de(we,(s(v),b(()=>s(v).data.name||s(v).data.displayName||"Unknown"))),Ce.disabled=s(k),de(pe,s(k)?"Playing...":"Play All"),ae.disabled=s(S),de($e,s(S)?"Added":"To Queue")}),M("click",Ce,U),M("click",ae,he),m(ne,G)},row:(ne,C)=>{var G=uv();const ge=pt(()=>C.item),A=pt(()=>C.index);var ie=d(G);$r(ie,{get track(){return s(ge)},get index(){return s(A)},isEditable:!1,$$events:{play:()=>Ns(s(ge))}}),m(ne,G)}}})},Me=K=>{var ne=Ev(),C=d(ne),G=d(C),ge=d(G);re(ge,()=>(R(y),b(()=>y.SEARCH)));var A=_(G,2),ie=_(A,2);{var Y=fe=>{var me=pv(),we=d(me),ke=d(we),Re=d(ke),xe=_(ke,2),Te=d(xe);re(Te,()=>s(c));var Ne=_(we,2);{var Oe=E=>{var I=hv(),H=ze(I),ce=_(H,2);bt(ce,5,()=>T,Kt,(Ce,pe)=>{var ae=fv();let $e;var z=d(ae);ue(()=>{$e=Ke(ae,1,"sort-item svelte-1eh2rsb",null,$e,{selected:s(p)===s(pe).id}),de(z,(s(pe),b(()=>s(pe).label)))}),M("click",ae,()=>se(s(pe).id)),m(Ce,ae)}),M("click",H,B),ut(3,H,()=>xt,()=>({duration:100})),ut(3,ce,()=>Ln,()=>({start:.95,duration:100})),m(E,I)};P(Ne,E=>{s(x)&&E(Oe)})}ue(E=>de(Re,E),[()=>(s(p),b(()=>T.find(E=>E.id===s(p))?.label))]),M("click",we,B),m(fe,me)};P(ie,fe=>{R(l()),s(v),b(()=>l()==="albums"||s(v).view==="albums_by_artist")&&fe(Y)})}var ve=_(C,2);{var Z=fe=>{var me=_v();bt(me,4,()=>Array(12),Kt,(we,ke)=>{var Re=gv(),xe=d(Re),Te=d(xe);Rt(Te,{width:"100%",height:"100%",radius:"8px"});var Ne=_(xe,2),Oe=d(Ne);Rt(Oe,{width:"80%",height:"14px",radius:"4px"});var E=_(Ne,2),I=d(E);Rt(I,{width:"50%",height:"12px",radius:"4px",style:"opacity: 0.6"}),m(we,Re)}),m(fe,me)},J=fe=>{var me=Tv();bt(me,5,()=>s(o),we=>we._uid,(we,ke)=>{var Re=at(),xe=ze(Re);{var Te=Oe=>{var E=mv(),I=d(E);ue(()=>de(I,(s(ke),b(()=>s(ke).title)))),m(Oe,E)},Ne=Oe=>{var E=xv(),I=d(E),H=d(I);{let je=pt(()=>(R(Gr),s(ke),b(()=>Gr(s(ke),"md"))));Pa(H,{get src(){return s(je)},get alt(){return s(ke),b(()=>s(ke).displayName)},radius:"8px",$$slots:{fallback:(qe,Ue)=>{var Fe=bv(),Ve=d(Fe);{var Ge=Ye=>{var Pe=at(),Qe=ze(Pe);re(Qe,()=>(R(y),b(()=>y.ARTISTS))),m(Ye,Pe)},tt=Ye=>{var Pe=at(),Qe=ze(Pe);re(Qe,()=>(R(y),b(()=>y.ALBUMS))),m(Ye,Pe)};P(Ve,Ye=>{l()==="artists"?Ye(Ge):Ye(tt,!1)})}m(qe,Fe)}}})}var ce=_(H,2),Ce=d(ce),pe=d(Ce);re(pe,()=>(R(y),b(()=>y.PLAY)));var ae=_(I,2),$e=d(ae),z=_(ae,2),ee=d(z);{var O=je=>{var qe=yv(),Ue=d(qe);ue(()=>de(Ue,(s(ke),b(()=>s(ke).artist)))),m(je,qe)};P(ee,je=>{s(ke),b(()=>s(ke).artist)&&je(O)})}var X=_(ee,2);{var D=je=>{var qe=wv(),Ue=d(qe);ue(()=>de(Ue,(s(ke),b(()=>s(ke).year)))),m(je,qe)};P(X,je=>{s(ke),b(()=>s(ke).year&&s(ke).year!=="0")&&je(D)})}var Se=_(X,2);{var Ie=je=>{var qe=kv(),Ue=d(qe);ue(Fe=>de(Ue,Fe),[()=>(s(ke),b(()=>s(ke).qualityBadge.split(" ")[0]))]),m(je,qe)};P(Se,je=>{s(ke),b(()=>s(ke).qualityBadge)&&je(Ie)})}ue(()=>de($e,(s(ke),b(()=>s(ke).displayName)))),M("click",E,()=>L(s(ke))),M("keypress",E,je=>je.key==="Enter"&&L(s(ke))),m(Oe,E)};P(xe,Oe=>{s(ke),b(()=>s(ke).isHeader)?Oe(Te):Oe(Ne,!1)})}m(we,Re)},we=>{var ke=Sv();m(we,ke)}),m(fe,me)};P(ve,fe=>{s(h)?fe(Z):fe(J,!1)})}ue(()=>Lt(A,"placeholder",`Filter ${l()??""}...`)),tr(A,()=>s(f),fe=>g(f,fe)),m(K,ne)};P(j,K=>{s(v),b(()=>s(v)?.view==="tracks_by_album")?K(N):K(Me,!1)})}ue(()=>_e=Ke(V,1,"view-container svelte-1eh2rsb",null,_e,{scrollable:s(v)?.view!=="tracks_by_album"})),m(e,V),Tt(),i()}var Av=w('<div class="music-card svelte-1otxnt7"><!> <!></div>'),Cv=w('<div class="music-grid svelte-1otxnt7"></div>'),Pv=w('<div slot="fallback" class="icon-fallback svelte-1otxnt7">ð»</div>'),Lv=w('<div class="status-badge playing svelte-1otxnt7">PLAYING</div>'),zv=w('<div class="status-badge paused svelte-1otxnt7">PAUSED</div>'),Iv=w('<span class="overlay-icon svelte-1otxnt7"><!></span>'),Rv=w('<div class="card-sub svelte-1otxnt7"> </div>'),jv=w('<div class="card-badge quality svelte-1otxnt7"> </div>'),Nv=w('<div role="button" tabindex="0"><div class="card-img-container svelte-1otxnt7"><!> <div class="play-overlay svelte-1otxnt7"><!></div></div> <div class="card-title svelte-1otxnt7"> </div> <div class="card-sub-row svelte-1otxnt7"><!> <!></div></div>'),Ov=w('<div class="empty-text svelte-1otxnt7">No stations found</div>'),Dv=w('<div class="music-grid svelte-1otxnt7"></div> <!>',1),Fv=w('<div class="view-container scrollable svelte-1otxnt7"><div class="content-padded no-bottom-pad svelte-1otxnt7"><div class="search-input-container svelte-1otxnt7"><span class="search-icon svelte-1otxnt7"><!></span> <input type="text" placeholder="Find station..." class="svelte-1otxnt7"/></div></div> <div class="content-padded svelte-1otxnt7"><!></div></div>');function qv(e,t){St(t,!1);const a=()=>Ee(Va,"$stations",c),r=()=>Ee(kt,"$status",c),n=()=>Ee(hs,"$isLoadingRadio",c),i=()=>Ee(Ht,"$currentSong",c),[c,o]=jt(),v=$(),l=$();let u=$("");oe(()=>(a(),s(u)),()=>{g(v,a().filter(te=>{const be=s(u).toLowerCase();return te.name.toLowerCase().includes(be)||te.genre&&te.genre.toLowerCase().includes(be)}))}),oe(()=>r(),()=>{g(l,r().bitrate?`${r().bitrate} kbps`:r().format||"")}),Vt(),At();var h=Fv(),f=d(h),p=d(f),x=d(p),T=d(x);re(T,()=>(R(y),b(()=>y.SEARCH)));var k=_(x,2),S=_(f,2),F=d(S);{var le=te=>{var be=Cv();bt(be,4,()=>Array(12),Kt,(q,B)=>{var se=Av(),W=d(se);Rt(W,{width:"100%",style:"aspect-ratio:1; border-radius:12px; margin-bottom:12px;"});var ye=_(W,2);Rt(ye,{width:"70%",height:"16px"}),m(q,se)}),m(te,be)},Q=te=>{var be=Dv(),q=ze(be);bt(q,5,()=>s(v),Kt,(W,ye)=>{const L=pt(()=>(s(ye),b(()=>s(ye).file))),U=pt(()=>(i(),s(ye),R(s(L)),b(()=>i().stationName===s(ye).name||i().file===s(L)))),he=pt(()=>(R(Tr),s(ye),b(()=>Tr(s(ye)))));var V=Nv();let _e;var j=d(V),N=d(j);Pa(N,{get src(){return s(he)},get alt(){return s(ye),b(()=>s(ye).name)},radius:"8px",$$slots:{fallback:(J,fe)=>{var me=Pv();m(J,me)}}});var Me=_(N,2),K=d(Me);{var ne=J=>{var fe=at(),me=ze(fe);{var we=Re=>{var xe=Lv();m(Re,xe)},ke=Re=>{var xe=zv();m(Re,xe)};P(me,Re=>{r(),b(()=>r().state==="play")?Re(we):Re(ke,!1)})}m(J,fe)},C=J=>{var fe=Iv(),me=d(fe);re(me,()=>(R(y),b(()=>y.PLAY))),m(J,fe)};P(K,J=>{s(U)?J(ne):J(C,!1)})}var G=_(j,2),ge=d(G),A=_(G,2),ie=d(A);{var Y=J=>{var fe=Rv(),me=d(fe);ue(()=>de(me,(s(ye),b(()=>s(ye).genre)))),m(J,fe)};P(ie,J=>{s(ye),b(()=>s(ye).genre)&&J(Y)})}var ve=_(ie,2);{var Z=J=>{var fe=jv(),me=d(fe);ue(()=>de(me,s(l))),ut(1,fe,()=>xt),m(J,fe)};P(ve,J=>{s(U)&&s(l)&&J(Z)})}ue(()=>{_e=Ke(V,1,"music-card svelte-1otxnt7",null,_e,{"is-active":s(U)}),ht(Me,s(U)?"opacity: 1":""),de(ge,(s(ye),b(()=>s(ye).name)))}),M("click",V,()=>Dn(s(ye))),m(W,V)});var B=_(q,2);{var se=W=>{var ye=Ov();m(W,ye)};P(B,W=>{s(v),a(),b(()=>s(v).length===0&&a().length>0)&&W(se)})}m(te,be)};P(F,te=>{n()?te(le):te(Q,!1)})}tr(k,()=>s(u),te=>g(u,te)),ut(1,h,()=>xt,()=>({duration:200})),m(e,h),Tt(),o()}var Bv=w('<button class="clear-icon-btn svelte-m7c4tz"><!></button>'),Uv=w('<div class="spinner svelte-m7c4tz"></div>'),Yv=w('<div class="content-padded no-bottom-pad svelte-m7c4tz"><div class="search-input-container svelte-m7c4tz"><span class="search-icon svelte-m7c4tz"><!></span> <input type="text" placeholder="Search playlists &amp; tracks..." class="svelte-m7c4tz"/> <!> <!></div></div>'),Hv=w('<span class="meta-tag svelte-m7c4tz">Loading...</span>'),Vv=w('<span class="meta-tag svelte-m7c4tz"> </span>'),Qv=w('<span class="meta-tag quality svelte-m7c4tz"> </span>'),Wv=w('<span class="meta-tag svelte-m7c4tz"> </span> <!> <!>',1),Xv=w('<div slot="header" class="content-padded svelte-m7c4tz"><div class="view-header svelte-m7c4tz"><div class="header-art svelte-m7c4tz"><div class="header-icon-wrap svelte-m7c4tz"><!></div></div> <div class="header-info svelte-m7c4tz"><div class="header-text-group svelte-m7c4tz"><div class="header-label svelte-m7c4tz">Playlist</div> <h1 class="header-title svelte-m7c4tz"> </h1> <div class="meta-badges svelte-m7c4tz"><!></div></div> <div class="header-actions svelte-m7c4tz"><button class="btn-primary svelte-m7c4tz"> </button> <button class="btn-secondary svelte-m7c4tz"> </button> <button title="Edit"><!></button></div></div></div></div>'),Kv=w('<div slot="row" class="svelte-m7c4tz"><!></div>'),Gv=w('<div class="music-card skeleton-card svelte-m7c4tz"><div class="card-img-container svelte-m7c4tz"><!></div> <div style="margin-top: 8px;" class="svelte-m7c4tz"><!></div></div>'),Zv=w('<div class="content-padded svelte-m7c4tz"><div class="music-grid playlists-grid-override svelte-m7c4tz"></div></div>'),Jv=w('<button class="card-menu-btn svelte-m7c4tz"><!></button>'),eu=w('<div class="music-card svelte-m7c4tz"><div class="card-img-container svelte-m7c4tz"><div class="icon-wrap svelte-m7c4tz"><!></div> <!> <div class="play-overlay svelte-m7c4tz"><span class="overlay-icon svelte-m7c4tz"><!></span></div></div> <div class="card-title svelte-m7c4tz"> </div> <div class="card-sub-row svelte-m7c4tz"><div class="card-sub svelte-m7c4tz"> </div></div></div>'),tu=w('<div class="music-grid playlists-grid-override svelte-m7c4tz"><div class="music-card svelte-m7c4tz"><div class="card-img-container dashed-cover svelte-m7c4tz"><div class="icon-wrap svelte-m7c4tz"><!></div></div> <div class="card-title svelte-m7c4tz">New Playlist</div></div> <!></div>'),au=w('<div class="music-card svelte-m7c4tz"><div class="card-img-container svelte-m7c4tz"><div class="icon-wrap svelte-m7c4tz"><!></div> <div class="play-overlay svelte-m7c4tz"><span class="overlay-icon svelte-m7c4tz"><!></span></div></div> <div class="card-title svelte-m7c4tz"> </div></div>'),ru=w('<div class="header-label section-spacing svelte-m7c4tz">Matched Playlists</div> <div class="music-grid horizontal section-mb svelte-m7c4tz"></div>',1),su=w('<div class="group-container svelte-m7c4tz"><div class="group-header svelte-m7c4tz"><div class="group-icon svelte-m7c4tz"><!></div> <div class="group-title svelte-m7c4tz"> </div> <div class="group-count svelte-m7c4tz"> </div> <div class="group-actions svelte-m7c4tz"><button class="btn-icon small svelte-m7c4tz" title="Play matches"><!></button> <button class="btn-icon small svelte-m7c4tz" title="Add matches to Queue"><!></button></div></div> <div class="group-tracks svelte-m7c4tz"></div></div>'),nu=w('<div class="header-label section-spacing svelte-m7c4tz">Matched Tracks</div> <div class="grouped-results svelte-m7c4tz"></div>',1),iu=w('<div class="empty-text svelte-m7c4tz"> </div>'),ou=w('<div class="empty-text svelte-m7c4tz" style="opacity: 0.7">Searching tracks in playlists...</div>'),lu=w("<!> <!> <!>",1),cu=w('<div class="content-padded svelte-m7c4tz"><!></div>'),du=w("<div><!> <!></div>");function vu(e,t){St(t,!1);const a=()=>Ee(kt,"$status",f),r=()=>Ee(Ht,"$currentSong",f),n=()=>Ee(Wt,"$navigationStack",f),i=()=>Ee(Rs,"$playlists",f),c=()=>Ee(Ur,"$activePlaylistTracks",f),o=()=>Ee(vn,"$isLoadingTracks",f),v=()=>Ee(rd,"$activePlaylistName",f),l=()=>Ee(_a,"$queue",f),u=()=>Ee(xs,"$currentTheme",f),h=()=>Ee(dn,"$isLoadingPlaylists",f),[f,p]=jt(),x=$(),T=$(),k=$(),S=$(),F=$(),le=$();let Q=$(!1),te=$(!1),be=$(!1),q=$(""),B=$(!1),se,W=0,ye=$([]),L=$([]),U=$(""),he=$(""),V=$("");function _e(E){g(q,E.target.value),clearTimeout(se),s(q).length>=2?se=setTimeout(()=>{j(s(q))},600):(g(B,!1),g(ye,[]),g(L,[]))}async function j(E){if(!E)return;W++;const I=W;g(B,!0);const H=E.toLowerCase();g(ye,i().filter(pe=>pe.name.toLowerCase().includes(H)));let ce=[];const Ce=i().filter(pe=>pe.name!=="Favorites");for(const pe of Ce){if(I!==W)break;try{const ae=await Le.send(`listplaylistinfo "${pe.name.replace(/"/g,'\\"')}"`),ee=Zt.parseTracks(ae).map((O,X)=>({...O,playlistPos:X})).filter(O=>O.title&&O.title.toLowerCase().includes(H)||O.artist&&O.artist.toLowerCase().includes(H));if(ee.length>0){const O=ee.map(X=>({...X,_uid:Math.random()}));ce.push({playlist:pe,tracks:O}),g(L,[...ce])}}catch(ae){console.warn(`Failed to search in playlist ${pe.name}`,ae)}}I===W&&g(B,!1)}function N(E){s(Q)||Ns(E)}function Me(E){E.deltaY!==0&&(E.currentTarget.scrollLeft+=E.deltaY)}function K(E,I){pa({title:"Play Search Results?",message:`This will clear your queue and play ${E.length} matching tracks from "${I}".`,confirmLabel:"Play",type:"confirm",onConfirm:()=>{jn(E)}})}function ne(E){!E||E.length===0||Nn(E)}Ha(()=>{!s(F)&&i().length===0&&On()});function C(E){const I=E.reduce((ce,Ce)=>ce+(parseFloat(Ce.time)||0),0);if(I>0){const ce=Math.floor(I/3600),Ce=Math.floor(I%3600/60);g(U,ce>0?`${ce} hr ${Ce} min`:`${Ce} min`)}else g(U,"");const H=new Set;E.forEach(ce=>{ce.qualityBadge&&H.add(ce.qualityBadge.split(" ")[0])}),g(he,H.size===1?E[0].qualityBadge:H.size>1?"Mixed":"")}function G(E){Ba("details",E)}function ge(){if(l().length===0){pa({title:"Create Playlist",message:"Queue is empty. Add tracks to queue before saving a playlist.",confirmLabel:"OK",type:"alert"});return}pa({title:"New Playlist",message:"Save current queue as a new playlist:",type:"prompt",placeholder:"Playlist Name",confirmLabel:"Create",onConfirm:E=>{E&&ga.createPlaylistFromQueue(E)}})}function A(E,I){I.name!=="Favorites"&&(E.stopPropagation(),E.preventDefault(),Kr(E,null,{type:"playlist-card",playlist:I}))}function ie(){pa({title:"Replace Queue?",message:`This will clear your current queue and play "${s(S).data.name}".`,confirmLabel:"Play",type:"confirm",onConfirm:()=>{g(te,!0),Co(s(S).data.name,0)}})}function Y(){if(c().length>0){const E=s(S).data.name.replace(/"/g,'\\"');Ms(`load "${E}"`),g(be,!0),setTimeout(()=>{g(be,!1)},2e3)}}function ve(){g(Q,!s(Q))}function Z(E){const I=s(S).data.name,H=c();H.splice(E,1),Ur.set(H),Mo(I,E),C(H)}function J(E,I){Ao(s(S).data.name,E,I)}function fe(E){if(E.name==="Favorites"){if(u()==="gruvbox"){const I="var(--c-heart)";return`background: linear-gradient(135deg, ${I}, transparent); background-color: ${I};`}return"background: linear-gradient(135deg, hsl(348, 95%, 58%), hsl(348, 90%, 40%));"}return u()==="gruvbox"?`background: linear-gradient(135deg, ${E.colorVar}, transparent); background-color: ${E.colorVar};`:`background: ${E.color}`}function me(E){if(!E)return"";if(E.name==="Favorites"){if(u()==="gruvbox"){const ce="var(--c-heart)";return`background: linear-gradient(135deg, ${ce}, transparent); background-color: ${ce};`}return"background: linear-gradient(135deg, hsl(348, 95%, 58%), hsl(348, 90%, 40%));"}const I="var(--c-bg-card)";if(u()==="gruvbox"){const ce=E.colorVar||E.color||I;return`background: linear-gradient(135deg, ${ce}, transparent); background-color: ${ce};`}return`background: ${E.color||E.colorVar||I}`}oe(()=>a(),()=>{g(x,Number(a().song))}),oe(()=>r(),()=>{g(T,r().file)}),oe(()=>a(),()=>{g(k,a().state==="play")}),oe(()=>n(),()=>{g(S,n()[n().length-1])}),oe(()=>s(S),()=>{g(F,s(S).view==="details")}),oe(()=>(s(S),s(V)),()=>{const E=JSON.stringify(s(S));E!==s(V)&&(g(q,""),g(te,!1),g(be,!1),g(Q,!1),g(ye,[]),g(L,[]),g(B,!1),g(V,E))}),oe(()=>(s(F),c(),o()),()=>{s(F)&&c().length>0?C(c()):s(F)&&c().length===0&&!o()&&(g(U,"0 min"),g(he,""))}),oe(()=>(s(F),s(S),v(),Od),()=>{s(F)&&s(S).data&&v()!==s(S).data.name&&Eo(s(S).data.name)}),oe(()=>s(S),()=>{g(le,s(S)?.data?.name==="Favorites")}),Vt(),At();var we=du();let ke;var Re=d(we);{var xe=E=>{var I=Yv(),H=d(I),ce=d(H),Ce=d(ce);re(Ce,()=>(R(y),b(()=>y.SEARCH)));var pe=_(ce,2),ae=_(pe,2);{var $e=O=>{var X=Bv(),D=d(X);re(D,()=>(R(y),b(()=>y.CLOSE))),M("click",X,()=>{g(q,""),g(ye,[]),g(L,[]),g(B,!1)}),m(O,X)};P(ae,O=>{s(q)&&O($e)})}var z=_(ae,2);{var ee=O=>{var X=Uv();m(O,X)};P(z,O=>{s(B)&&O(ee)})}ue(()=>uo(pe,s(q))),M("input",pe,_e),m(E,I)};P(Re,E=>{s(F)||E(xe)})}var Te=_(Re,2);{var Ne=E=>{is(E,{get itemsStore(){return Ur},get isLoading(){return o()},get isEditMode(){return s(Q)},emptyText:"This playlist is empty.",onMoveItem:J,$$slots:{header:(I,H)=>{var ce=Xv(),Ce=d(ce),pe=d(Ce),ae=d(pe),$e=d(ae);re($e,()=>(s(le),R(y),b(()=>s(le)?y.HEART_FILLED:y.PLAYLISTS)));var z=_(pe,2),ee=d(z),O=_(d(ee),2),X=d(O),D=_(O,2),Se=d(D);{var Ie=Qe=>{var it=Hv();m(Qe,it)},je=Qe=>{var it=Wv(),Je=ze(it),Xe=d(Je),Ze=_(Je,2);{var ot=dt=>{var lt=Vv(),ct=d(lt);ue(()=>de(ct,s(U))),m(dt,lt)};P(Ze,dt=>{s(U)&&dt(ot)})}var yt=_(Ze,2);{var gt=dt=>{var lt=Qv(),ct=d(lt);ue(()=>de(ct,s(he))),m(dt,lt)};P(yt,dt=>{s(he)&&dt(gt)})}ue(()=>de(Xe,`${c(),b(()=>c().length)??""} tracks`)),m(Qe,it)};P(Se,Qe=>{o()?Qe(Ie):Qe(je,!1)})}var qe=_(ee,2),Ue=d(qe),Fe=d(Ue),Ve=_(Ue,2),Ge=d(Ve),tt=_(Ve,2);let Ye;var Pe=d(tt);re(Pe,()=>(s(Q),R(y),b(()=>s(Q)?y.ACCEPT:y.EDIT))),ue(Qe=>{ht(pe,Qe),Lt(O,"title",(s(S),b(()=>s(S).data.name))),de(X,(s(S),b(()=>s(S).data.name))),Ue.disabled=s(te),de(Fe,s(te)?"Playing...":"Play All"),Ve.disabled=s(be),de(Ge,s(be)?"Added":"To Queue"),Ye=Ke(tt,1,"btn-action svelte-m7c4tz",null,Ye,{active:s(Q)})},[()=>(s(S),b(()=>me(s(S).data)))]),M("click",Ue,ie),M("click",Ve,Y),M("click",tt,ve),m(I,ce)},row:(I,H)=>{var ce=Kv();const Ce=pt(()=>H.item),pe=pt(()=>H.index),ae=pt(()=>H.startDrag);var $e=d(ce);$r($e,{get track(){return s(Ce)},get index(){return s(pe)},get playingIndex(){return s(x)},get playingFile(){return s(T)},get isPlaying(){return s(k)},get isEditable(){return s(Q)},$$events:{play:()=>N(s(Ce)),remove:()=>Z(s(pe)),startdrag(...z){s(ae)?.apply(this,z)}}}),m(I,ce)}}})},Oe=E=>{var I=at(),H=ze(I);{var ce=pe=>{var ae=Zv(),$e=d(ae);bt($e,4,()=>Array(8),Kt,(z,ee)=>{var O=Gv(),X=d(O),D=d(X);Rt(D,{width:"100%",height:"100%",radius:"12px"});var Se=_(X,2),Ie=d(Se);Rt(Ie,{width:"60%",height:"16px",radius:"4px"}),m(z,O)}),m(pe,ae)},Ce=pe=>{var ae=cu(),$e=d(ae);{var z=O=>{var X=tu(),D=d(X),Se=d(D),Ie=d(Se),je=d(Ie);re(je,()=>(R(y),b(()=>y.ADD)));var qe=_(D,2);bt(qe,1,i,Ue=>Ue.name,(Ue,Fe)=>{const Ve=pt(()=>(s(Fe),b(()=>s(Fe).name==="Favorites")));var Ge=eu(),tt=d(Ge),Ye=d(tt),Pe=d(Ye);re(Pe,()=>(R(s(Ve)),R(y),b(()=>s(Ve)?y.HEART_FILLED:y.PLAYLISTS)));var Qe=_(Ye,2);{var it=ct=>{var Be=Jv(),_t=d(Be);re(_t,()=>(R(y),b(()=>y.DOTS))),M("click",Be,zt=>A(zt,s(Fe))),m(ct,Be)};P(Qe,ct=>{s(Ve)||ct(it)})}var Je=_(Qe,2),Xe=d(Je),Ze=d(Xe);re(Ze,()=>(R(y),b(()=>y.PLAY)));var ot=_(tt,2),yt=d(ot),gt=_(ot,2),dt=d(gt),lt=d(dt);Ft(()=>M("click",Ge,()=>G(s(Fe)))),Is(Ge,ct=>Bn?.(ct)),Ft(()=>M("longpress",Ge,ct=>A(ct.detail.originalEvent,s(Fe)))),Ft(()=>M("contextmenu",Ge,ct=>A(ct,s(Fe)))),ue((ct,Be)=>{ht(tt,ct),de(yt,(s(Fe),b(()=>s(Fe).name))),de(lt,Be)},[()=>(s(Fe),b(()=>fe(s(Fe)))),()=>(s(Fe),b(()=>s(Fe).lastModified?new Date(s(Fe).lastModified).toLocaleDateString():"Playlist"))]),m(Ue,Ge)}),M("click",D,ge),m(O,X)},ee=O=>{var X=lu(),D=ze(X);{var Se=Ve=>{var Ge=ru(),tt=_(ze(Ge),2);bt(tt,5,()=>s(ye),Ye=>Ye.name,(Ye,Pe)=>{const Qe=pt(()=>(s(Pe),b(()=>s(Pe).name==="Favorites")));var it=au(),Je=d(it),Xe=d(Je),Ze=d(Xe);re(Ze,()=>(R(s(Qe)),R(y),b(()=>s(Qe)?y.HEART_FILLED:y.PLAYLISTS)));var ot=_(Xe,2),yt=d(ot),gt=d(yt);re(gt,()=>(R(y),b(()=>y.PLAY)));var dt=_(Je,2),lt=d(dt);ue(ct=>{ht(Je,ct),de(lt,(s(Pe),b(()=>s(Pe).name)))},[()=>(s(Pe),b(()=>fe(s(Pe))))]),M("click",it,()=>G(s(Pe))),m(Ye,it)}),M("wheel",tt,Me),m(Ve,Ge)};P(D,Ve=>{s(ye),b(()=>s(ye).length>0)&&Ve(Se)})}var Ie=_(D,2);{var je=Ve=>{var Ge=nu(),tt=_(ze(Ge),2);bt(tt,5,()=>s(L),Ye=>Ye.playlist.name,(Ye,Pe)=>{var Qe=su(),it=d(Qe),Je=d(it),Xe=d(Je);re(Xe,()=>(R(y),b(()=>y.PLAYLISTS)));var Ze=_(Je,2),ot=d(Ze),yt=_(Ze,2),gt=d(yt),dt=_(yt,2),lt=d(dt),ct=d(lt);re(ct,()=>(R(y),b(()=>y.PLAY)));var Be=_(lt,2),_t=d(Be);re(_t,()=>(R(y),b(()=>y.ADD)));var zt=_(it,2);bt(zt,5,()=>(s(Pe),b(()=>s(Pe).tracks)),ta=>ta._uid,(ta,Ae)=>{$r(ta,{get track(){return s(Ae)},get index(){return s(Ae),b(()=>s(Ae).playlistPos)},get playingFile(){return s(T)},get isPlaying(){return s(k)},$$events:{play:()=>N(s(Ae))}})}),ue(()=>{de(ot,(s(Pe),b(()=>s(Pe).playlist.name))),de(gt,(s(Pe),b(()=>s(Pe).tracks.length)))}),M("click",lt,Gt(()=>K(s(Pe).tracks,s(Pe).playlist.name))),M("click",Be,Gt(()=>ne(s(Pe).tracks))),M("click",it,()=>G(s(Pe).playlist)),m(Ye,Qe)}),m(Ve,Ge)};P(Ie,Ve=>{s(L),b(()=>s(L).length>0)&&Ve(je)})}var qe=_(Ie,2);{var Ue=Ve=>{var Ge=iu(),tt=d(Ge);ue(()=>de(tt,`No matches found for "${s(q)??""}"`)),m(Ve,Ge)},Fe=Ve=>{var Ge=at(),tt=ze(Ge);{var Ye=Pe=>{var Qe=ou();m(Pe,Qe)};P(tt,Pe=>{s(B),s(L),b(()=>s(B)&&s(L).length===0)&&Pe(Ye)},!0)}m(Ve,Ge)};P(qe,Ve=>{s(B),s(ye),s(L),b(()=>!s(B)&&s(ye).length===0&&s(L).length===0)?Ve(Ue):Ve(Fe,!1)})}m(O,X)};P($e,O=>{s(q)?O(ee,!1):O(z)})}m(pe,ae)};P(H,pe=>{h()?pe(ce):pe(Ce,!1)},!0)}m(E,I)};P(Te,E=>{s(F)?E(Ne):E(Oe,!1)})}ue(()=>ke=Ke(we,1,"view-container svelte-m7c4tz",null,ke,{scrollable:!s(F)})),m(e,we),Tt(),p()}var uu=w('<button class="clear-icon-btn svelte-1d3z1zm"><!></button>'),fu=w('<div class="spinner svelte-1d3z1zm"></div>'),hu=w('<div class="placeholder-state svelte-1d3z1zm"><div class="placeholder-icon svelte-1d3z1zm">ð</div> <p class="svelte-1d3z1zm">Type to search your library</p></div>'),pu=w('<div class="empty-text svelte-1d3z1zm"> </div>'),gu=w('<div slot="fallback" class="icon-fallback svelte-1d3z1zm">ð¿</div>'),_u=w('<div class="meta-tag svelte-1d3z1zm"> </div>'),mu=w('<div class="meta-tag quality svelte-1d3z1zm"> </div>'),bu=w('<div class="music-card svelte-1d3z1zm"><div class="card-img-container svelte-1d3z1zm"><!> <div class="play-overlay svelte-1d3z1zm"><span class="overlay-icon svelte-1d3z1zm"><!></span></div></div> <div class="card-title svelte-1d3z1zm"> </div> <div class="card-sub-row svelte-1d3z1zm"><div class="card-sub text-ellipsis svelte-1d3z1zm"> </div> <!> <!></div></div>'),yu=w('<div class="header-label section-spacing svelte-1d3z1zm">Albums</div> <div class="music-grid horizontal section-mb svelte-1d3z1zm"></div>',1),wu=w('<div class="header-label svelte-1d3z1zm">Tracks</div>'),ku=w("<!> <!>",1),xu=w('<div slot="header" class="content-padded svelte-1d3z1zm"><!></div>'),Su=w('<div slot="row" class="svelte-1d3z1zm"><!></div>'),Tu=w('<div class="view-container svelte-1d3z1zm"><div class="content-padded no-bottom-pad svelte-1d3z1zm"><div class="search-input-container svelte-1d3z1zm"><span class="search-icon svelte-1d3z1zm"><!></span> <input type="text" placeholder="Artists, songs, or albums" autoFocus class="svelte-1d3z1zm"/> <!> <!></div></div> <!></div>');function Eu(e,t){St(t,!1);const a=()=>Ee(Yr,"$searchQuery",n),r=()=>Ee(c,"$tracksStore",n),[n,i]=jt(),c=He([]);let o=$([]),v=$(!1),l,u=$(!1);Ha(()=>{a().length>=2&&p(a())});function h(L){Yr.set(L.target.value),clearTimeout(l),l=setTimeout(()=>{p(a())},300)}function f(){Yr.set(""),c.set([]),g(o,[]),g(u,!1)}async function p(L){const U=L.trim().toLowerCase();if(U.length<2){c.set([]),g(o,[]),g(u,!1);return}g(v,!0),g(u,!0);try{const he=await Da.search(U),V=he.map((j,N)=>({...j,_uid:j.file?`${j.file}-${N}`:`search-${N}`}));c.set(V);const _e=new Map;he.forEach(j=>{const N=j.album;if(N&&!_e.has(N)){const Me=N.toLowerCase().includes(U),K=j.artist&&j.artist.toLowerCase().includes(U);if(Me||K){let ne=String(j.year||"");ne.length>4&&(ne=ne.substring(0,4)),_e.set(N,{name:N,artist:j.artist,file:j.file,thumbHash:j.thumbHash,_uid:`alb-${N}`,year:ne,qualityBadge:j.qualityBadge})}}}),g(o,Array.from(_e.values()))}finally{g(v,!1)}}function x(L){Ns(L)}function T(L){Ba("tracks_by_album",{name:L.name,artist:L.artist})}function k(L){L.deltaY!==0&&(L.currentTarget.scrollLeft+=L.deltaY)}At();var S=Tu(),F=d(S),le=d(F),Q=d(le),te=d(Q);re(te,()=>y.SEARCH);var be=_(Q,2),q=_(be,2);{var B=L=>{var U=uu(),he=d(U);re(he,()=>y.CLOSE),M("click",U,f),m(L,U)};P(q,L=>{a().length>0&&L(B)})}var se=_(q,2);{var W=L=>{var U=fu();m(L,U)};P(se,L=>{s(v)&&L(W)})}var ye=_(F,2);is(ye,{get itemsStore(){return c},isEditMode:!1,isLoading:!1,emptyText:"",$$slots:{header:(L,U)=>{var he=xu(),V=d(he);{var _e=N=>{var Me=hu();m(N,Me)},j=N=>{var Me=at(),K=ze(Me);{var ne=G=>{var ge=pu(),A=d(ge);ue(()=>de(A,`No results found for "${a()??""}"`)),m(G,ge)},C=G=>{var ge=ku(),A=ze(ge);{var ie=Z=>{var J=yu(),fe=_(ze(J),2);bt(fe,5,()=>s(o),me=>me._uid,(me,we)=>{var ke=bu(),Re=d(ke),xe=d(Re);{let ee=pt(()=>Gr(s(we),"md"));Pa(xe,{get src(){return s(ee)},get alt(){return s(we).name},radius:"8px",$$slots:{fallback:(O,X)=>{var D=gu();m(O,D)}}})}var Te=_(xe,2),Ne=d(Te),Oe=d(Ne);re(Oe,()=>y.PLAY);var E=_(Re,2),I=d(E),H=_(E,2),ce=d(H),Ce=d(ce),pe=_(ce,2);{var ae=ee=>{var O=_u(),X=d(O);ue(()=>de(X,s(we).year)),m(ee,O)};P(pe,ee=>{s(we).year&&s(we).year!=="0"&&s(we).year!==0&&ee(ae)})}var $e=_(pe,2);{var z=ee=>{var O=mu(),X=d(O);ue(D=>de(X,D),[()=>s(we).qualityBadge.split(" ")[0]]),m(ee,O)};P($e,ee=>{s(we).qualityBadge&&ee(z)})}ue(()=>{Lt(E,"title",s(we).name),de(I,s(we).name),de(Ce,s(we).artist)}),M("click",ke,()=>T(s(we))),m(me,ke)}),M("wheel",fe,k),m(Z,J)};P(A,Z=>{s(o).length>0&&Z(ie)})}var Y=_(A,2);{var ve=Z=>{var J=wu();m(Z,J)};P(Y,Z=>{r().length>0&&Z(ve)})}m(G,ge)};P(K,G=>{!s(v)&&r().length===0&&s(o).length===0&&s(u)?G(ne):G(C,!1)},!0)}m(N,Me)};P(V,N=>{a().length<2?N(_e):N(j,!1)})}m(L,he)},row:(L,U)=>{var he=Su();const V=pt(()=>U.item),_e=pt(()=>U.index);var j=d(he);$r(j,{get track(){return s(V)},get index(){return s(_e)},isEditable:!1,$$events:{play:()=>x(s(V))}}),m(L,he)}}}),ue(()=>uo(be,a())),M("input",be,h),m(e,S),Tt(),i()}var $u=w('<option class="svelte-1j67jqh"> </option>'),Mu=w('<div class="separator svelte-1j67jqh"></div> <div class="row space-between svelte-1j67jqh"><label for="alarm-time" class="svelte-1j67jqh">Wake up time</label> <input id="alarm-time" type="time" class="svelte-1j67jqh"/></div> <div class="separator svelte-1j67jqh"></div> <div class="row space-between svelte-1j67jqh"><label for="alarm-pl" class="svelte-1j67jqh">Playlist</label> <div class="select-wrapper svelte-1j67jqh"><select id="alarm-pl" class="svelte-1j67jqh"></select> <div class="select-arrow svelte-1j67jqh"><!></div></div></div> <p class="hint svelte-1j67jqh">Player will clear queue, load this playlist and play at set time.</p>',1),Au=w('<div class="separator svelte-1j67jqh"></div> <div class="row svelte-1j67jqh"><label for="yandex-token" class="svelte-1j67jqh">OAuth Token</label> <div class="input-group svelte-1j67jqh"><input id="yandex-token" type="password" placeholder="Enter token..." class="svelte-1j67jqh"/></div></div> <p class="hint svelte-1j67jqh">Required to access your library and stream music. <a href="https://github.com/MarshalX/yandex-music-api/discussions/513" target="_blank" style="color: var(--c-accent);" class="svelte-1j67jqh">How to get token</a></p>',1),Cu=w('<div class="view-container scrollable svelte-1j67jqh"><div class="content-padded svelte-1j67jqh"><h1 class="header-title big svelte-1j67jqh">Settings</h1> <div class="section svelte-1j67jqh"><div class="section-header svelte-1j67jqh"><span class="svelte-1j67jqh">Alarm Clock</span></div> <div class="card svelte-1j67jqh"><div class="row space-between svelte-1j67jqh"><span class="label-text svelte-1j67jqh">Current Player Time</span> <span class="mono-badge svelte-1j67jqh"> </span></div> <div class="separator svelte-1j67jqh"></div> <div class="row space-between svelte-1j67jqh"><label class="svelte-1j67jqh">Enable Alarm</label> <button><div class="toggle-circle svelte-1j67jqh"></div></button></div> <!></div></div> <div class="section svelte-1j67jqh"><div class="section-header svelte-1j67jqh"><span class="svelte-1j67jqh">Appearance</span></div> <div class="card clickable svelte-1j67jqh"><div class="row space-between svelte-1j67jqh"><span class="svelte-1j67jqh">Interface Theme</span> <div class="row-gap svelte-1j67jqh"><span class="value svelte-1j67jqh"> </span> <span class="chevron svelte-1j67jqh"><!></span></div></div></div></div> <div class="section svelte-1j67jqh"><div class="section-header svelte-1j67jqh"><span class="svelte-1j67jqh">Services</span></div> <div class="card svelte-1j67jqh"><div class="row space-between svelte-1j67jqh"><label class="svelte-1j67jqh">Enable Yandex Music (Beta)</label> <button><div class="toggle-circle svelte-1j67jqh"></div></button></div> <!></div></div> <div class="section svelte-1j67jqh"><div class="section-header svelte-1j67jqh"><span class="svelte-1j67jqh">Connection</span></div> <div class="card svelte-1j67jqh"><div class="row svelte-1j67jqh"><label for="ip" class="svelte-1j67jqh">Moode Device IP</label> <div class="input-group svelte-1j67jqh"><input id="ip" type="text" placeholder="192.168.x.x" class="svelte-1j67jqh"/> <button class="btn-primary small svelte-1j67jqh">Save</button></div></div> <p class="hint svelte-1j67jqh"> </p></div></div> <div class="section svelte-1j67jqh"><div class="section-header svelte-1j67jqh"><span class="svelte-1j67jqh">About</span></div> <div class="card svelte-1j67jqh"><div class="info-row svelte-1j67jqh"><span class="svelte-1j67jqh">Version</span> <span class="mono svelte-1j67jqh"> </span></div> <div class="separator svelte-1j67jqh"></div> <div class="info-row svelte-1j67jqh"><span class="svelte-1j67jqh">Build Date</span> <span class="mono small svelte-1j67jqh"> </span></div> <div class="separator svelte-1j67jqh"></div> <div class="info-row svelte-1j67jqh"><span class="svelte-1j67jqh">Developer</span> <span class="svelte-1j67jqh">Moode WaveUI</span></div></div></div></div></div>');function Pu(e,t){St(t,!1);const a=()=>Ee(xs,"$currentTheme",l),r=()=>Ee(gn,"$isAlarmEnabled",l),n=()=>Ee(pn,"$alarmTime",l),i=()=>Ee(_n,"$alarmPlaylist",l),c=()=>Ee(Rs,"$playlists",l),o=()=>Ee(Es,"$isYandexEnabled",l),v=()=>Ee(Zr,"$yandexToken",l),[l,u]=jt(),h=$();let f=$(Ka.MOODE_IP),p=$("--:--"),x;function T(){Ka.setMoodeIp(s(f)),De("IP Saved. Reloading...","success"),setTimeout(()=>location.reload(),1e3)}const k="0.0.1",S="2026-01-09T13:46:13.213Z",F=new Date(S).toLocaleString();function le(){const X=ln.map(D=>({label:D.label,value:D.id}));pa({title:"Select Theme",message:"Choose your preferred interface style:",type:"select",inputValue:a(),options:X,onConfirm:D=>{xs.set(D),De("Theme updated","success")}})}async function Q(){const X=await Ya.getServerTime();X&&g(p,X)}Ha(()=>{Q(),x=setInterval(Q,6e4)}),po(()=>{x&&clearInterval(x)});async function te(){try{await Ya.setAlarm(r(),n(),i()),r()&&De(`Alarm set for ${n()}`,"success")}catch{De("Failed to sync alarm settings","error")}}function be(){gn.update(X=>!X),te()}function q(){Es.update(X=>!X)}oe(()=>a(),()=>{g(h,ln.find(X=>X.id===a())?.label||"Default")}),Vt(),At();var B=Cu(),se=d(B),W=_(d(se),2),ye=_(d(W),2),L=d(ye),U=_(d(L),2),he=d(U),V=_(L,4),_e=_(d(V),2);let j;var N=_(V,2);{var Me=X=>{var D=Mu(),Se=ze(D),Ie=_(Se,2),je=_(d(Ie),2),qe=_(Ie,2),Ue=_(qe,2),Fe=_(d(Ue),2),Ve=d(Fe);ue(()=>{i(),Nl(()=>{c()})}),bt(Ve,5,c,Kt,(Pe,Qe)=>{var it=$u(),Je=d(it),Xe={};ue(()=>{de(Je,(s(Qe),b(()=>s(Qe).name))),Xe!==(Xe=(s(Qe),b(()=>s(Qe).name)))&&(it.value=(it.__value=(s(Qe),b(()=>s(Qe).name)))??"")}),m(Pe,it)});var Ge=_(Ve,2),tt=d(Ge);re(tt,()=>(R(y),b(()=>y.CHEVRON_DOWN)));var Ye=_(Ue,2);ut(1,Se,()=>xt),tr(je,n,Pe=>Ys(pn,Pe)),M("change",je,te),ut(1,Ie,()=>xt),ut(1,qe,()=>xt),nc(Ve,i,Pe=>Ys(_n,Pe)),M("change",Ve,te),ut(1,Ue,()=>xt),ut(1,Ye,()=>xt),m(X,D)};P(N,X=>{r()&&X(Me)})}var K=_(W,2),ne=_(d(K),2),C=d(ne),G=_(d(C),2),ge=d(G),A=d(ge),ie=_(ge,2),Y=d(ie);re(Y,()=>(R(y),b(()=>y.NEXT)));var ve=_(K,2),Z=_(d(ve),2),J=d(Z),fe=_(d(J),2);let me;var we=_(J,2);{var ke=X=>{var D=Au(),Se=ze(D),Ie=_(Se,2),je=_(d(Ie),2),qe=d(je),Ue=_(Ie,2);ut(1,Se,()=>xt),tr(qe,v,Fe=>Ys(Zr,Fe)),ut(1,Ie,()=>xt),ut(1,Ue,()=>xt),m(X,D)};P(we,X=>{o()&&X(ke)})}var Re=_(ve,2),xe=_(d(Re),2),Te=d(xe),Ne=_(d(Te),2),Oe=d(Ne),E=_(Oe,2),I=_(Te,2),H=d(I),ce=_(Re,2),Ce=_(d(ce),2),pe=d(Ce),ae=_(d(pe),2),$e=d(ae),z=_(pe,4),ee=_(d(z),2),O=d(ee);ue(()=>{de(he,s(p)),j=Ke(_e,1,"toggle-btn svelte-1j67jqh",null,j,{active:r()}),de(A,s(h)),me=Ke(fe,1,"toggle-btn svelte-1j67jqh",null,me,{active:o()}),de(H,`Current: ${R(Ka),b(()=>Ka.MOODE_IP)??""}`),de($e,k),de(O,F)}),M("click",_e,be),M("click",ne,le),M("click",fe,q),tr(Oe,()=>s(f),X=>g(f,X)),M("click",E,T),ut(1,B,()=>xt,()=>({duration:200})),m(e,B),Tt(),u()}var Lu=w('<span class="meta-tag svelte-185fgrr"> </span>'),zu=w('<div slot="header" class="content-padded svelte-185fgrr"><div class="view-header svelte-185fgrr"><div class="header-art svelte-185fgrr" style="background: var(--c-surface-active);"><div class="header-icon-wrap svelte-185fgrr"><!></div></div> <div class="header-info svelte-185fgrr"><div class="header-text-group svelte-185fgrr"><div class="header-label svelte-185fgrr">Now Playing</div> <h1 class="header-title svelte-185fgrr">Current Queue</h1> <div class="meta-badges svelte-185fgrr"><span class="meta-tag svelte-185fgrr"> </span> <!></div></div> <div class="header-actions svelte-185fgrr"><button class="btn-secondary svelte-185fgrr" title="Clear Queue">Clear</button> <button class="btn-action svelte-185fgrr" title="Save Queue"><!></button> <button><!></button></div></div></div></div>'),Iu=w('<div slot="row" class="svelte-185fgrr"><!></div>'),Ru=w('<div class="view-container svelte-185fgrr"><!></div>');function ju(e,t){St(t,!1);const a=()=>Ee(kt,"$status",c),r=()=>Ee(wt,"$isQueueLocked",c),n=()=>Ee(Ht,"$currentSong",c),i=()=>Ee(_a,"$queue",c),[c,o]=jt(),v=$(),l=$(),u=$(),h=$();let f=$(!1),p=$(""),x=$(-1);function T(){g(f,!s(f))}function k(q){s(f)||Ms(`play ${q}`)}function S(q){q<s(x)&&g(x,s(x)-1),Ut.removeFromQueue(q)}async function F(){pa({title:"Save Playlist",message:"Enter a name for this playlist:",type:"prompt",placeholder:"Playlist Name",confirmLabel:"Save",onConfirm:async q=>{q&&q.trim().length>0&&(await Ut.saveQueue(q),On())}})}function le(){i().length!==0&&pa({title:"Clear Queue",message:"Are you sure you want to clear the entire play queue?",confirmLabel:"Clear All",type:"confirm",onConfirm:async()=>{_a.set([]),Ht.set({title:"Not Playing",artist:"",album:"",file:"",stationName:null,id:null,pos:null}),kt.update(q=>({...q,state:"stop",song:-1,songid:-1,elapsed:0})),await Ms("clear")}})}function Q(q,B){let se=s(x);q===se?se=B:q<se&&B>=se?se-=1:q>se&&B<=se&&(se+=1),g(x,se),Ut.moveTrack(q,B)}oe(()=>a(),()=>{g(v,Number(a().song))}),oe(()=>(r(),s(v)),()=>{r()||g(x,s(v))}),oe(()=>s(x),()=>{g(l,s(x))}),oe(()=>n(),()=>{g(u,n().file)}),oe(()=>a(),()=>{g(h,a().state==="play")}),oe(()=>i(),()=>{if(i().length>=0){const q=i().reduce((B,se)=>B+(parseFloat(se.time)||0),0);if(q>0){const B=Math.floor(q/3600),se=Math.floor(q%3600/60);B>0?g(p,`${B} hr ${se} min`):g(p,`${se} min`)}else g(p,"")}}),Vt(),At();var te=Ru(),be=d(te);is(be,{get itemsStore(){return _a},get isEditMode(){return s(f)},emptyText:"Queue is empty",onMoveItem:Q,$$slots:{header:(q,B)=>{var se=zu(),W=d(se),ye=d(W),L=d(ye),U=d(L);re(U,()=>(R(y),b(()=>y.MENU)));var he=_(ye,2),V=d(he),_e=_(d(V),4),j=d(_e),N=d(j),Me=_(j,2);{var K=ve=>{var Z=Lu(),J=d(Z);ue(()=>de(J,s(p))),m(ve,Z)};P(Me,ve=>{s(p)&&ve(K)})}var ne=_(V,2),C=d(ne),G=_(C,2),ge=d(G);re(ge,()=>(R(y),b(()=>y.SAVE)));var A=_(G,2);let ie;var Y=d(A);re(Y,()=>(s(f),R(y),b(()=>s(f)?y.ACCEPT:y.EDIT))),ue(()=>{de(N,`${i(),b(()=>i().length)??""} tracks`),C.disabled=(i(),b(()=>i().length===0)),G.disabled=(i(),b(()=>i().length===0)),ie=Ke(A,1,"btn-action svelte-185fgrr",null,ie,{active:s(f)}),Lt(A,"title",s(f)?"Finish Editing":"Edit Queue"),A.disabled=(i(),b(()=>i().length===0))}),M("click",C,le),M("click",G,F),M("click",A,T),m(q,se)},row:(q,B)=>{var se=Iu();const W=pt(()=>B.item),ye=pt(()=>B.index),L=pt(()=>B.startDrag);var U=d(se);$r(U,{get track(){return s(W)},get index(){return s(ye)},get playingIndex(){return s(l)},get playingFile(){return s(u)},get isPlaying(){return s(h)},get isEditable(){return s(f)},$$events:{play:()=>k(s(ye)),remove:()=>S(s(ye)),startdrag(...he){s(L)?.apply(this,he)}}}),m(q,se)}}}),m(e,te),Tt(),o()}var Nu=w('<div class="token-alert content-padded svelte-4g0hpd"><h3 class="svelte-4g0hpd">Yandex Music Token Required</h3> <p class="svelte-4g0hpd">Please go to Settings and enter your OAuth token.</p></div>'),Ou=w('<button class="back-icon-btn svelte-4g0hpd"><!></button>'),Du=w('<span class="search-icon svelte-4g0hpd"><!></span>'),Fu=w('<button class="clear-btn svelte-4g0hpd"><!></button>'),qu=w('<div class="filter-tabs svelte-4g0hpd"><button>All</button> <button>Tracks</button> <button>Albums</button> <button>Artists</button></div>'),Bu=w('<div class="music-card skeleton-card svelte-4g0hpd"><!> <!></div>'),Uu=w('<div class="music-grid svelte-4g0hpd"></div>'),Yu=w('<div class="icon-wrap svelte-4g0hpd"><!></div>'),Hu=w('<img loading="lazy" class="svelte-4g0hpd"/>'),Vu=w('<div class="icon-wrap svelte-4g0hpd"><!></div>'),Qu=w('<div class="music-card svelte-4g0hpd"><div><!> <div class="play-overlay svelte-4g0hpd"><span class="overlay-icon svelte-4g0hpd"><!></span></div></div> <div class="card-title svelte-4g0hpd"> </div> <div class="card-sub svelte-4g0hpd"> </div></div>'),Wu=w('<div class="music-grid svelte-4g0hpd"></div>'),Xu=w('<div class="content-padded svelte-4g0hpd"><h2 class="header-label svelte-4g0hpd">My Music</h2> <!></div>'),Ku=w('<div slot="fallback" class="icon-fallback svelte-4g0hpd"><!></div>'),Gu=w('<div class="music-card svelte-4g0hpd"><div class="card-img-container svelte-4g0hpd"><!></div> <div class="card-title svelte-4g0hpd"> </div> <div class="card-sub svelte-4g0hpd"> </div></div>'),Zu=w('<h3 class="header-label svelte-4g0hpd">Albums</h3> <div class="music-grid horizontal section-mb svelte-4g0hpd"></div>',1),Ju=w('<div slot="fallback" class="icon-fallback svelte-4g0hpd"><!></div>'),ef=w('<div class="music-card svelte-4g0hpd"><div class="card-img-container rounded svelte-4g0hpd"><!></div> <div class="card-title center svelte-4g0hpd"> </div></div>'),tf=w('<h3 class="header-label svelte-4g0hpd">Artists</h3> <div class="music-grid horizontal section-mb svelte-4g0hpd"></div>',1),af=w('<div class="content-padded svelte-4g0hpd"><!> <!></div>'),rf=w('<div slot="header" class="content-padded svelte-4g0hpd"><div class="playlist-header svelte-4g0hpd"><h1 class="header-title svelte-4g0hpd"> </h1> <div class="meta-tag svelte-4g0hpd"> </div></div></div>'),sf=w('<div slot="row" class="svelte-4g0hpd"><!></div>'),nf=w('<div style="height: 20px; width: 100%; margin-top: 20px;" class="svelte-4g0hpd"></div>'),of=w('<div slot="footer" class="svelte-4g0hpd"><!></div>'),lf=w('<div class="floating-fab-container svelte-4g0hpd"><button class="fab-load-more svelte-4g0hpd">Load More</button></div>'),cf=w("<!> <!>",1),df=w('<div class="content-padded no-bottom-pad svelte-4g0hpd"><div class="search-input-container svelte-4g0hpd"><!> <input type="text" placeholder="Search Yandex Music..." class="svelte-4g0hpd"/> <!></div> <!></div> <!> <!> <!>',1),vf=w('<div class="view-container scrollable relative-parent svelte-4g0hpd"><!></div>');function uf(e,t){St(t,!1);const a=()=>Ee(Zr,"$yandexToken",n),r=()=>Ee(o,"$tracksStore",n),[n,i]=jt(),c=$(),o=He([]);let v=$([]),l=$(!1),u=$("dashboard"),h=$(""),f=null,p=$(""),x=$("all"),T=$({tracks:[],albums:[],artists:[]}),k,S=0,F=$(!0),le=$(!1),Q,te;Ha(()=>(s(c)&&q(),()=>{Q&&Q.disconnect()}));function be(C){return te=C,Q&&Q.disconnect(),Q=new IntersectionObserver(G=>{const ge=G[0];g(le,ge.isIntersecting&&s(F)&&!s(l))},{root:null,rootMargin:"0px",threshold:.1}),Q.observe(te),{destroy(){Q&&Q.disconnect()}}}async function q(){g(l,!0);try{const C=await ua.getUserPlaylists();g(v,[{kind:"favorites",title:"Favorites",cover:{uri:null},trackCount:"â¥"},...C])}catch(C){console.error(C)}finally{g(l,!1)}}async function B(C){g(l,!0),g(u,"playlist"),g(h,C.title),f=C,o.set([]),S=0,g(F,!0),g(le,!1),await se()}async function se(){if(!(!s(F)&&S>0)){g(l,!0),g(le,!1);try{let C;if(f.kind==="favorites")C=await ua.getFavorites(S);else if(f.kind==="album")if(S===0){const G=await ua.getAlbumTracks(f.id);C={tracks:G,total:G.length}}else C={tracks:[],total:0};else if(f.kind==="artist")if(S===0){const G=await ua.getArtistTracks(f.id);C={tracks:G,total:G.length}}else C={tracks:[],total:0};else C=await ua.getPlaylistTracks(f.kind,f.uid,S);C.tracks.length===0?g(F,!1):(o.update(G=>[...G,...C.tracks]),S++,C.tracks.length<50&&g(F,!1))}catch{De("Failed to load tracks","error"),g(F,!1)}finally{g(l,!1)}}}function W(C){g(p,C.target.value),clearTimeout(k),s(p).length>2?k=setTimeout(()=>{L()},600):s(p).length===0&&g(u,"dashboard")}function ye(C){g(x,C),s(p).length>2&&L()}async function L(){g(l,!0),g(u,"search"),g(T,{tracks:[],albums:[],artists:[]});try{const C=await ua.search(s(p),s(x)==="all"?"all":s(x),0);g(T,C),s(x)==="track"||s(x)==="all"?o.set(C.tracks):o.set([])}catch{De("Search failed","error")}finally{g(l,!1)}}async function U(C){g(l,!0),g(u,"playlist"),g(h,C.title),f={kind:"album",id:C.id},o.set([]),S=0,g(F,!0),await se()}async function he(C){g(l,!0),g(u,"playlist"),g(h,C.name),f={kind:"artist",id:C.id},o.set([]),S=0,g(F,!0),await se()}function V(){g(u,"dashboard"),g(p,""),o.set([])}async function _e(C){Fn(r(),C)}function j(C){return C.kind==="favorites"?null:C.cover&&C.cover.uri?`https://${C.cover.uri.replace("%%","200x200")}`:null}oe(()=>a(),()=>{g(c,!!a())}),Vt(),At();var N=vf(),Me=d(N);{var K=C=>{var G=Nu();m(C,G)},ne=C=>{var G=df(),ge=ze(G),A=d(ge),ie=d(A);{var Y=E=>{var I=Ou(),H=d(I);re(H,()=>(R(y),b(()=>y.BACK))),M("click",I,V),m(E,I)},ve=E=>{var I=Du(),H=d(I);re(H,()=>(R(y),b(()=>y.SEARCH))),m(E,I)};P(ie,E=>{s(u)!=="dashboard"?E(Y):E(ve,!1)})}var Z=_(ie,2),J=_(Z,2);{var fe=E=>{var I=Fu(),H=d(I);re(H,()=>(R(y),b(()=>y.CLOSE))),M("click",I,V),m(E,I)};P(J,E=>{s(p)&&E(fe)})}var me=_(A,2);{var we=E=>{var I=qu(),H=d(I);let ce;var Ce=_(H,2);let pe;var ae=_(Ce,2);let $e;var z=_(ae,2);let ee;ue(()=>{ce=Ke(H,1,"svelte-4g0hpd",null,ce,{active:s(x)==="all"}),pe=Ke(Ce,1,"svelte-4g0hpd",null,pe,{active:s(x)==="track"}),$e=Ke(ae,1,"svelte-4g0hpd",null,$e,{active:s(x)==="album"}),ee=Ke(z,1,"svelte-4g0hpd",null,ee,{active:s(x)==="artist"})}),M("click",H,()=>ye("all")),M("click",Ce,()=>ye("track")),M("click",ae,()=>ye("album")),M("click",z,()=>ye("artist")),m(E,I)};P(me,E=>{s(u)==="search"&&E(we)})}var ke=_(ge,2);{var Re=E=>{var I=Xu(),H=_(d(I),2);{var ce=pe=>{var ae=Uu();bt(ae,4,()=>Array(6),Kt,($e,z)=>{var ee=Bu(),O=d(ee);Rt(O,{width:"100%",style:"aspect-ratio:1; border-radius:12px; margin-bottom: 8px;"});var X=_(O,2);Rt(X,{width:"70%",height:"14px"}),m($e,ee)}),m(pe,ae)},Ce=pe=>{var ae=Wu();bt(ae,5,()=>s(v),Kt,($e,z)=>{var ee=Qu(),O=d(ee);let X;var D=d(O);{var Se=Ye=>{var Pe=Yu(),Qe=d(Pe);re(Qe,()=>(R(y),b(()=>y.HEART_FILLED))),m(Ye,Pe)},Ie=Ye=>{var Pe=at(),Qe=ze(Pe);{var it=Xe=>{var Ze=Hu();ue(ot=>{Lt(Ze,"src",ot),Lt(Ze,"alt",(s(z),b(()=>s(z).title)))},[()=>(s(z),b(()=>j(s(z))))]),m(Xe,Ze)},Je=Xe=>{var Ze=Vu(),ot=d(Ze);re(ot,()=>(R(y),b(()=>y.PLAYLISTS))),m(Xe,Ze)};P(Qe,Xe=>{s(z),b(()=>j(s(z)))?Xe(it):Xe(Je,!1)},!0)}m(Ye,Pe)};P(D,Ye=>{s(z),b(()=>s(z).kind==="favorites")?Ye(Se):Ye(Ie,!1)})}var je=_(D,2),qe=d(je),Ue=d(qe);re(Ue,()=>(R(y),b(()=>y.PLAY)));var Fe=_(O,2),Ve=d(Fe),Ge=_(Fe,2),tt=d(Ge);ue(()=>{X=Ke(O,1,"card-img-container svelte-4g0hpd",null,X,{"is-fav":s(z).kind==="favorites"}),de(Ve,(s(z),b(()=>s(z).title))),de(tt,`${s(z),b(()=>s(z).trackCount)??""} tracks`)}),M("click",ee,()=>B(s(z))),m($e,ee)}),m(pe,ae)};P(H,pe=>{s(l)?pe(ce):pe(Ce,!1)})}ut(1,I,()=>xt),m(E,I)};P(ke,E=>{s(u)==="dashboard"&&E(Re)})}var xe=_(ke,2);{var Te=E=>{var I=af(),H=d(I);{var ce=ae=>{var $e=Zu(),z=_(ze($e),2);bt(z,5,()=>(s(T),b(()=>s(T).albums)),Kt,(ee,O)=>{var X=Gu(),D=d(X),Se=d(D);Pa(Se,{get src(){return s(O),b(()=>s(O).image)},get alt(){return s(O),b(()=>s(O).title)},radius:"8px",$$slots:{fallback:(Fe,Ve)=>{var Ge=Ku(),tt=d(Ge);re(tt,()=>(R(y),b(()=>y.ALBUMS))),m(Fe,Ge)}}});var Ie=_(D,2),je=d(Ie),qe=_(Ie,2),Ue=d(qe);ue(()=>{de(je,(s(O),b(()=>s(O).title))),de(Ue,(s(O),b(()=>s(O).artist)))}),M("click",X,()=>U(s(O))),m(ee,X)}),m(ae,$e)};P(H,ae=>{s(T),s(x),b(()=>s(T).albums.length>0&&(s(x)==="all"||s(x)==="album"))&&ae(ce)})}var Ce=_(H,2);{var pe=ae=>{var $e=tf(),z=_(ze($e),2);bt(z,5,()=>(s(T),b(()=>s(T).artists)),Kt,(ee,O)=>{var X=ef(),D=d(X),Se=d(D);Pa(Se,{get src(){return s(O),b(()=>s(O).image)},get alt(){return s(O),b(()=>s(O).name)},radius:"50%",$$slots:{fallback:(qe,Ue)=>{var Fe=Ju(),Ve=d(Fe);re(Ve,()=>(R(y),b(()=>y.ARTISTS))),m(qe,Fe)}}});var Ie=_(D,2),je=d(Ie);ue(()=>de(je,(s(O),b(()=>s(O).name)))),M("click",X,()=>he(s(O))),m(ee,X)}),m(ae,$e)};P(Ce,ae=>{s(T),s(x),b(()=>s(T).artists.length>0&&(s(x)==="all"||s(x)==="artist"))&&ae(pe)})}m(E,I)};P(xe,E=>{s(u)==="search"&&E(Te)})}var Ne=_(xe,2);{var Oe=E=>{var I=cf(),H=ze(I);{let pe=pt(()=>s(u)==="search"?"No results":"Playlist is empty");is(H,{get itemsStore(){return o},get isLoading(){return s(l)},get emptyText(){return s(pe)},$$slots:{header:(ae,$e)=>{var z=rf(),ee=d(z),O=d(ee),X=d(O),D=_(O,2),Se=d(D);ue(()=>{de(X,s(h)),de(Se,`${r(),b(()=>r().length)??""}${s(F)?"+":""} tracks`)}),m(ae,z)},row:(ae,$e)=>{var z=sf();const ee=pt(()=>$e.item),O=pt(()=>$e.index);var X=d(z);$r(X,{get track(){return s(ee)},get index(){return s(O)},isEditable:!1,$$events:{play:()=>_e(s(O))}}),m(ae,z)},footer:(ae,$e)=>{var z=of(),ee=d(z);{var O=X=>{var D=nf();Is(D,Se=>be?.(Se)),m(X,D)};P(ee,X=>{s(F)&&!s(l)&&X(O)})}m(ae,z)}}})}var ce=_(H,2);{var Ce=pe=>{var ae=lf(),$e=d(ae);M("click",$e,se),ut(3,ae,()=>Pn,()=>({y:20})),m(pe,ae)};P(ce,pe=>{s(le)&&pe(Ce)})}m(E,I)};P(Ne,E=>{(s(u)==="playlist"||s(u)==="search"&&(s(x)==="all"||s(x)==="track"))&&E(Oe)})}tr(Z,()=>s(p),E=>g(p,E)),M("input",Z,W),m(C,G)};P(Me,C=>{s(c)?C(ne,!1):C(K)})}m(e,N),Tt(),i()}var ff=w('<div class="knob svelte-1jla3sy"></div>'),hf=w('<div class="tooltip current svelte-1jla3sy"> </div> <span></span>',1),pf=w('<div slot="fallback" class="icon-fallback svelte-1jla3sy"><!></div>'),gf=w('<span class="meta-tag quality"> </span>'),_f=w('<div class="dot svelte-1jla3sy"></div>'),mf=w("<button><!> <!></button>"),bf=w('<div class="dock svelte-1jla3sy"><div class="progress-shadow svelte-1jla3sy"></div> <div><div class="rail svelte-1jla3sy"></div> <div class="fill svelte-1jla3sy"><!></div> <!></div> <div class="grid svelte-1jla3sy"><div class="info svelte-1jla3sy"><div class="art svelte-1jla3sy"><!></div> <div class="meta svelte-1jla3sy"><div class="title-row svelte-1jla3sy"><div class="title text-ellipsis svelte-1jla3sy"> </div> <button class="btn-icon tiny-dots svelte-1jla3sy"><!></button></div> <div class="artist-row svelte-1jla3sy"><div class="artist text-ellipsis svelte-1jla3sy"> </div> <!></div></div></div> <div class="controls svelte-1jla3sy"><button><!></button> <button class="btn-icon"><!></button> <button class="play-btn flex-center svelte-1jla3sy"><!></button> <button class="btn-icon"><!></button> <!></div> <div class="volume desktop svelte-1jla3sy"><button class="vol-btn-mini svelte-1jla3sy" title="Mute/Unmute"><!></button> <div class="custom-slider svelte-1jla3sy"><div class="slider-bg svelte-1jla3sy"><div class="slider-fill svelte-1jla3sy"></div> <div class="slider-knob svelte-1jla3sy"></div></div></div></div></div></div>');function yf(e,t){St(t,!1);const a=()=>Ee(kt,"$status",o),r=()=>Ee(Ht,"$currentSong",o),n=()=>Ee(Oa,"$favorites",o),i=()=>Ee(Va,"$stations",o),c=()=>Ee(Ts,"$isFullPlayerOpen",o),[o,v]=jt(),l=$(),u=$(),h=$(),f=$(),p=$(),x=$(),T=$(),k=$(),S=$(),F=$(),le=$(),Q=$(),te=$();let be=$(!1),q=$(!1),B=!1,se=$(0),W=$(),ye=$();const L=Y=>ve=>{ve.stopPropagation(),Y()};function U(Y){if(isNaN(Y)||Y===null)return"0:00";const ve=Math.floor(Y/60),Z=Math.floor(Y%60);return`${ve}:${Z<10?"0":""}${Z}`}function he(Y,ve){const Z=ve.getBoundingClientRect();return Math.max(0,Math.min(1,(Y.clientX-Z.left)/Z.width))}function V(Y){s(f)||(g(q,!0),g(se,he(Y,s(W))),window.addEventListener("mousemove",_e),window.addEventListener("mouseup",j))}function _e(Y){if(s(q)&&g(se,he(Y,s(W))),B){const ve=Math.round(he(Y,s(ye))*100);Ea(ve)}}function j(){s(q)&&!s(f)&&Rn(s(se)*s(l)),g(q,!1),B=!1,window.removeEventListener("mousemove",_e),window.removeEventListener("mouseup",j)}let N=50;function Me(Y){Y.stopPropagation(),a().volume>0?(N=a().volume,Ea(0)):Ea(N>0?N:30)}function K(Y){B=!0;const ve=Math.round(he(Y,s(ye))*100);Ea(ve),window.addEventListener("mousemove",_e),window.addEventListener("mouseup",j)}function ne(){const Y=(s(te)+1)%3;Y===0?(a().random&&ar(),a().repeat&&rr()):Y===1?(a().random||ar(),a().repeat&&rr()):Y===2&&(a().random&&ar(),a().repeat||rr())}function C(Y){Y.stopPropagation(),Kr(Y,r(),{type:"general",source:"miniplayer"})}function G(Y){Kr(Y.detail.originalEvent,r(),{type:"general",source:"miniplayer"})}oe(()=>a(),()=>{g(l,a().duration>0?a().duration:1)}),oe(()=>a(),()=>{g(u,a().elapsed||0)}),oe(()=>a(),()=>{g(h,a().state==="play")}),oe(()=>r(),()=>{g(f,r().file?.startsWith("http")&&!r().isYandex)}),oe(()=>r(),()=>{g(p,r().title||"Not Playing")}),oe(()=>r(),()=>{g(x,r().stationName||r().artist||"Moode")}),oe(()=>(r(),n()),()=>{g(T,r().file&&n().has(r().file))}),oe(()=>(r(),i()),()=>{g(k,Er(r(),i(),r().stationName))}),oe(()=>(s(f),s(q),s(se),s(u),s(l)),()=>{g(S,s(f)?0:s(q)?s(se)*100:s(u)/s(l)*100)}),oe(()=>(s(h),s(q),s(f)),()=>{g(F,s(h)&&!s(q)&&!s(f))}),oe(()=>a(),()=>{g(le,a().bitrate?`${a().bitrate} kbps`:a().format||"")}),oe(()=>(a(),y),()=>{g(Q,a().volume===0?y.VOLUME_MUTE:a().volume<50?y.VOLUME_MEDIUM:y.VOLUME_FULL)}),oe(()=>a(),()=>{g(te,a().repeat?2:a().random?1:0)}),Vt(),At();var ge=at(),A=ze(ge);{var ie=Y=>{var ve=bf(),Z=d(ve),J=_(Z,2);let fe;var me=_(d(J),2),we=d(me);{var ke=Be=>{var _t=ff();m(Be,_t)};P(we,Be=>{s(f)||Be(ke)})}var Re=_(me,2);{var xe=Be=>{var _t=hf(),zt=ze(_t),ta=d(zt);ue(Ae=>{ht(zt,`left: ${s(S)??""}%`),de(ta,Ae)},[()=>(s(q),s(se),s(l),s(u),b(()=>s(q)?U(s(se)*s(l)):U(s(u))))]),m(Be,_t)};P(Re,Be=>{(s(be)||s(q))&&!s(f)&&Be(xe)})}Ua(J,Be=>g(W,Be),()=>s(W));var Te=_(J,2),Ne=d(Te),Oe=d(Ne),E=d(Oe);Pa(E,{get src(){return s(k)},alt:"art",radius:"4px",$$slots:{fallback:(Be,_t)=>{var zt=pf(),ta=d(zt);re(ta,()=>(s(f),R(y),b(()=>s(f)?y.RADIO:y.ALBUMS))),m(Be,zt)}}});var I=_(Oe,2),H=d(I),ce=d(H),Ce=d(ce),pe=_(ce,2),ae=d(pe);re(ae,()=>(R(y),b(()=>y.DOTS)));var $e=_(H,2),z=d($e),ee=d(z),O=_(z,2);{var X=Be=>{var _t=gf(),zt=d(_t);ue(()=>de(zt,s(le))),m(Be,_t)};P(O,Be=>{s(le)&&Be(X)})}var D=_(Ne,2),Se=d(D),Ie=zr(()=>L(()=>ga.toggleFavorite(r())));let je;var qe=d(Se);re(qe,()=>(s(T),R(y),b(()=>s(T)?y.HEART_FILLED:y.HEART)));var Ue=_(Se,2),Fe=zr(()=>L(()=>Jr("previous"))),Ve=d(Ue);re(Ve,()=>(R(y),b(()=>y.PREVIOUS)));var Ge=_(Ue,2),tt=zr(()=>L(js)),Ye=d(Ge);re(Ye,()=>(a(),R(y),b(()=>a().state==="play"?y.PAUSE:y.PLAY)));var Pe=_(Ge,2),Qe=zr(()=>L(()=>Jr("next"))),it=d(Pe);re(it,()=>(R(y),b(()=>y.NEXT)));var Je=_(Pe,2);{var Xe=Be=>{var _t=mf(),zt=zr(()=>L(ne));let ta;var Ae=d(_t);{var et=Nt=>{var wa=at(),Lr=ze(wa);re(Lr,()=>(R(y),b(()=>y.REPEAT))),m(Nt,wa)},Ct=Nt=>{var wa=at(),Lr=ze(wa);re(Lr,()=>(R(y),b(()=>y.SHUFFLE))),m(Nt,wa)};P(Ae,Nt=>{s(te)===2?Nt(et):Nt(Ct,!1)})}var ca=_(Ae,2);{var Os=Nt=>{var wa=_f();m(Nt,wa)};P(ca,Nt=>{s(te)>0&&Nt(Os)})}ue(()=>ta=Ke(_t,1,"btn-icon desktop mode-btn svelte-1jla3sy",null,ta,{active:s(te)>0})),M("click",_t,function(...Nt){s(zt)?.apply(this,Nt)}),m(Be,_t)};P(Je,Be=>{s(f)||Be(Xe)})}var Ze=_(D,2),ot=d(Ze),yt=d(ot);re(yt,()=>s(Q));var gt=_(ot,2),dt=d(gt),lt=d(dt),ct=_(lt,2);Ua(gt,Be=>g(ye,Be),()=>s(ye)),Ft(()=>M("click",ve,()=>Ts.set(!0))),Is(ve,(Be,_t)=>Bn?.(Be,_t),()=>500),Ft(()=>M("longpress",ve,G)),ue(()=>{ht(Z,`width: ${s(S)??""}%; transition: ${s(F)?"width 0.25s linear":"none"}`),fe=Ke(J,1,"progress-bar svelte-1jla3sy",null,fe,{radio:s(f)}),ht(me,`width: ${s(S)??""}%; transition: ${s(F)?"width 0.25s linear":"none"}`),Lt(ce,"title",s(p)),de(Ce,s(p)),Lt(z,"title",s(x)),de(ee,s(x)),je=Ke(Se,1,"btn-icon desktop svelte-1jla3sy",null,je,{liked:s(T)}),ht(lt,`width: ${a(),b(()=>a().volume)??""}%`),ht(ct,`left: ${a(),b(()=>a().volume)??""}%`)}),M("mouseenter",J,()=>g(be,!0)),M("mouseleave",J,()=>g(be,!1)),M("mousedown",J,Gt(V)),M("click",J,Gt(function(Be){Xr.call(this,t,Be)})),M("click",pe,C),M("click",Se,function(...Be){s(Ie)?.apply(this,Be)}),M("click",Ue,function(...Be){s(Fe)?.apply(this,Be)}),M("click",Ge,function(...Be){s(tt)?.apply(this,Be)}),M("click",Pe,function(...Be){s(Qe)?.apply(this,Be)}),M("click",ot,Me),M("mousedown",gt,Gt(K)),M("click",gt,Gt(function(Be){Xr.call(this,t,Be)})),m(Y,ve)};P(A,Y=>{c()||Y(ie)})}m(e,ge),Tt(),v()}var wf=w('<div class="drag-zone svelte-1olwzt8"><div class="drag-handle-icon svelte-1olwzt8"><!></div></div>'),kf=w('<div slot="fallback" class="icon-fallback svelte-1olwzt8"><!></div>'),xf=w('<span class="meta-tag quality"> </span>'),Sf=w('<span class="dot svelte-1olwzt8"></span>'),Tf=w("<button><!> <!></button>"),Ef=w('<div style="width: 44px;"></div>'),$f=w('<div><!> <div class="bg-container svelte-1olwzt8"><div class="bg-gradient-fallback svelte-1olwzt8"></div> <img class="bg-img svelte-1olwzt8" alt="" loading="eager"/> <div class="bg-overlay svelte-1olwzt8"></div></div> <div class="player-body svelte-1olwzt8"><div class="art-container svelte-1olwzt8"><div class="artwork svelte-1olwzt8"><!></div></div> <div class="controls-area svelte-1olwzt8"><div class="meta svelte-1olwzt8"><h1 class="title text-ellipsis svelte-1olwzt8"> </h1> <div class="artist-row svelte-1olwzt8"><h2 class="artist text-ellipsis svelte-1olwzt8"> </h2> <!></div></div> <div class="progress-section"><div><div class="common-track svelte-1olwzt8"><div class="common-fill svelte-1olwzt8"><div class="common-knob svelte-1olwzt8"></div></div></div></div> <div class="time-row svelte-1olwzt8"><span> </span> <span> </span></div></div> <div class="buttons-row svelte-1olwzt8"><button><!></button> <button class="btn-icon side-btn svelte-1olwzt8"><!></button> <button class="play-btn-large flex-center svelte-1olwzt8"><!></button> <button class="btn-icon side-btn svelte-1olwzt8"><!></button> <!></div> <div class="volume-row svelte-1olwzt8"><button class="btn-icon small vol-btn svelte-1olwzt8"><!></button> <div class="volume-hit-area svelte-1olwzt8"><div class="common-track svelte-1olwzt8"><div class="common-fill svelte-1olwzt8"></div> <div class="common-knob svelte-1olwzt8"></div></div></div> <div class="vol-icon-static svelte-1olwzt8"><!></div></div></div></div></div>');function ki(e,t){St(t,!1);const a=()=>Ee(Ht,"$currentSong",c),r=()=>Ee(Va,"$stations",c),n=()=>Ee(kt,"$status",c),i=()=>Ee(Oa,"$favorites",c),[c,o]=jt(),v=$(),l=$(),u=$(),h=$(),f=$(),p=$(),x=$(),T=$(),k=$(),S=$(),F=$(),le=$();let Q=mt(t,"isDocked",8,!1),te=0,be=$(0),q=$(!1);function B(){Ts.set(!1)}function se(Ae){if(Q())return;const et=Ae.target;et.closest(".bar-hit-area")||et.closest(".volume-hit-area")||(te=Ae.touches[0].clientY,g(q,!0))}function W(Ae){if(!s(q)||Q())return;const et=Ae.touches[0].clientY-te;et>0&&(Ae.cancelable&&et>10&&Ae.preventDefault(),g(be,et))}function ye(){Q()||(g(q,!1),s(be)>150?B():g(be,0))}let L=$(!1),U=$(0),he=$();function V(Ae){const et=Math.floor(Ae/60)||0,Ct=Math.floor(Ae%60)||0;return`${et}:${Ct.toString().padStart(2,"0")}`}function _e(Ae,et){const Ct=et.getBoundingClientRect(),ca=Ae.touches?Ae.touches[0].clientX:Ae.clientX;return Math.max(0,Math.min(1,(ca-Ct.left)/Ct.width))}function j(Ae){s(h)||(g(L,!0),g(U,_e(Ae,s(he))))}function N(Ae){s(L)&&g(U,_e(Ae,s(he)))}function Me(){s(L)&&!s(h)&&Rn(s(U)*s(l)),g(L,!1)}let K=!1,ne=$(),C=50;function G(){n().volume>0?(C=n().volume,Ea(0)):Ea(C>0?C:30)}function ge(Ae){K=!0;const et=Math.round(_e(Ae,s(ne))*100);Ea(et),window.addEventListener("mousemove",A),window.addEventListener("mouseup",ie),window.addEventListener("touchmove",A,{passive:!1}),window.addEventListener("touchend",ie)}function A(Ae){if(K){Ae.preventDefault();const et=Math.round(_e(Ae,s(ne))*100);Ea(et)}}function ie(){K=!1,window.removeEventListener("mousemove",A),window.removeEventListener("mouseup",ie),window.removeEventListener("touchmove",A),window.removeEventListener("touchend",ie)}function Y(){const Ae=(s(k)+1)%3;Ae===0?(n().random&&ar(),n().repeat&&rr()):Ae===1?(n().random||ar(),n().repeat&&rr()):Ae===2&&(n().random&&ar(),n().repeat||rr())}oe(()=>(a(),r()),()=>{g(v,Er(a(),r(),a().stationName))}),oe(()=>n(),()=>{g(l,n().duration||1)}),oe(()=>n(),()=>{g(u,n().elapsed||0)}),oe(()=>a(),()=>{g(h,a().file?.startsWith("http")&&!a().isYandex)}),oe(()=>n(),()=>{g(f,n().state==="play")}),oe(()=>(s(f),s(L),s(h)),()=>{g(p,s(f)&&!s(L)&&!s(h))}),oe(()=>(s(h),s(L),s(U),s(u),s(l)),()=>{g(x,s(h)?0:s(L)?s(U)*100:s(u)/s(l)*100)}),oe(()=>(n(),y),()=>{g(T,n().volume===0?y.VOLUME_MUTE:n().volume<50?y.VOLUME_MEDIUM:y.VOLUME_FULL)}),oe(()=>n(),()=>{g(k,n().repeat?2:n().random?1:0)}),oe(()=>n(),()=>{g(S,n().bitrate?`${n().bitrate} kbps`:n().format||"")}),oe(()=>(a(),i()),()=>{g(F,a().file&&i().has(a().file))}),oe(()=>R(Q()),()=>{g(le,Q()?"8px":"var(--radius-xl)")}),Vt(),At();var ve=$f();let Z;var J=d(ve);{var fe=Ae=>{var et=wf(),Ct=d(et),ca=d(Ct);re(ca,()=>(R(y),b(()=>y.CHEVRON_DOWN))),M("touchstart",et,se),M("touchmove",et,W),M("touchend",et,ye),M("click",et,B),m(Ae,et)};P(J,Ae=>{Q()||Ae(fe)})}var me=_(J,2),we=_(d(me),2),ke=_(me,2),Re=d(ke),xe=d(Re),Te=d(xe);Pa(Te,{get src(){return s(v)},alt:"Cover",get radius(){return s(le)},$$slots:{fallback:(Ae,et)=>{var Ct=kf(),ca=d(Ct);re(ca,()=>(s(h),R(y),b(()=>s(h)?y.RADIO:y.ALBUMS))),m(Ae,Ct)}}});var Ne=_(Re,2),Oe=d(Ne),E=d(Oe),I=d(E),H=_(E,2),ce=d(H),Ce=d(ce),pe=_(ce,2);{var ae=Ae=>{var et=xf(),Ct=d(et);ue(()=>de(Ct,s(S))),m(Ae,et)};P(pe,Ae=>{s(S)&&Ae(ae)})}var $e=_(Oe,2),z=d($e);let ee;var O=d(z),X=d(O);Ua(z,Ae=>g(he,Ae),()=>s(he));var D=_(z,2),Se=d(D),Ie=d(Se),je=_(Se,2),qe=d(je),Ue=_($e,2),Fe=d(Ue);let Ve;var Ge=d(Fe);re(Ge,()=>(s(F),R(y),b(()=>s(F)?y.HEART_FILLED:y.HEART)));var tt=_(Fe,2),Ye=d(tt);re(Ye,()=>(R(y),b(()=>y.PREVIOUS)));var Pe=_(tt,2),Qe=d(Pe);re(Qe,()=>(n(),R(y),b(()=>n().state==="play"?y.PAUSE:y.PLAY)));var it=_(Pe,2),Je=d(it);re(Je,()=>(R(y),b(()=>y.NEXT)));var Xe=_(it,2);{var Ze=Ae=>{var et=Tf();let Ct;var ca=d(et);{var Os=da=>{var Qa=at(),Ds=ze(Qa);re(Ds,()=>(R(y),b(()=>y.REPEAT))),m(da,Qa)},Nt=da=>{var Qa=at(),Ds=ze(Qa);re(Ds,()=>(R(y),b(()=>y.SHUFFLE))),m(da,Qa)};P(ca,da=>{s(k)===2?da(Os):da(Nt,!1)})}var wa=_(ca,2);{var Lr=da=>{var Qa=Sf();m(da,Qa)};P(wa,da=>{s(k)>0&&da(Lr)})}ue(()=>Ct=Ke(et,1,"btn-icon side-btn mode-btn svelte-1olwzt8",null,Ct,{active:s(k)>0})),M("click",et,Y),m(Ae,et)},ot=Ae=>{var et=Ef();m(Ae,et)};P(Xe,Ae=>{s(h)?Ae(ot,!1):Ae(Ze)})}var yt=_(Ue,2),gt=d(yt),dt=d(gt);re(dt,()=>s(T));var lt=_(gt,2),ct=d(lt),Be=d(ct),_t=_(Be,2);Ua(lt,Ae=>g(ne,Ae),()=>s(ne));var zt=_(lt,2),ta=d(zt);re(ta,()=>(R(y),b(()=>y.VOLUME_FULL))),ue((Ae,et)=>{Z=Ke(ve,1,"full-player svelte-1olwzt8",null,Z,{"is-docked":Q()}),ht(ve,Q()?"":`transform: translateY(${s(be)}px); transition: ${s(q)?"none":"transform 0.3s cubic-bezier(0.2, 0.8, 0.2, 1)"}`),Lt(we,"src",s(v)),ht(xe,`transform: scale(${1-s(be)/3e3})`),ht(Ne,`opacity: ${1-s(be)/400}`),de(I,(a(),b(()=>a().title||"Not Playing"))),de(Ce,(a(),b(()=>a().stationName||a().artist||"Moode Audio"))),ee=Ke(z,1,"bar-hit-area svelte-1olwzt8",null,ee,{"is-docked-bar":Q()}),ht(X,`width: ${s(x)??""}%; transition: ${s(p)?"width 0.3s linear":"none"}`),de(Ie,Ae),de(qe,et),Ve=Ke(Fe,1,"btn-icon side-btn svelte-1olwzt8",null,Ve,{liked:s(F)}),ht(Be,`width: ${n(),b(()=>n().volume)??""}%`),ht(_t,`left: ${n(),b(()=>n().volume)??""}%; right: auto;`)},[()=>(s(L),s(U),s(l),s(u),b(()=>s(L)?V(s(U)*s(l)):V(s(u)))),()=>(s(h),s(l),b(()=>s(h)?"LIVE":V(s(l))))]),M("mousedown",z,j),M("touchstart",z,j,void 0,!0),M("mousemove",z,function(...Ae){(s(L)?N:null)?.apply(this,Ae)}),M("touchmove",z,function(...Ae){(s(L)?N:null)?.apply(this,Ae)},void 0,!0),M("mouseup",z,Me),M("touchend",z,Me),M("click",Fe,()=>ga.toggleFavorite(a())),M("click",tt,()=>Jr("previous")),M("click",Pe,function(...Ae){js?.apply(this,Ae)}),M("click",it,()=>Jr("next")),M("click",gt,G),M("mousedown",lt,Gt(ge)),M("touchstart",lt,Gt(ge)),ut(3,ve,()=>Pn,()=>({y:Q()?0:800,duration:300,opacity:1})),m(e,ve),Tt(),o()}const Mf=`<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.0//EN" "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd">
<svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="600px" height="331px" viewBox="0 0 600 331" preserveAspectRatio="xMidYMid meet">
 <g fill="#eb1250">
  <path d="M 315.33 288.42 c -1.03 -0.33 -2.60 -1.34 -3.70 -2.39 -1.08 -1.01 -1.73 -2.81 -2.48 -6.68 -0.38 -1.99 -0.84 -4.29 -1.03 -5.13 -0.21 -0.84 -0.47 -2.20 -0.61 -3.05 -0.14 -0.84 -0.42 -2.34 -0.61 -3.33 -0.45 -2.20 -0.42 -2.04 -0.77 -4.17 -0.16 -0.96 -0.40 -2.16 -0.52 -2.65 -0.14 -0.52 -0.33 -1.45 -0.45 -2.11 -0.12 -0.68 -0.38 -2.02 -0.59 -2.98 -0.21 -0.96 -0.52 -2.55 -0.70 -3.52 -0.16 -0.96 -0.52 -2.81 -0.77 -4.10 -0.26 -1.29 -0.82 -4.08 -1.22 -6.21 -0.80 -4.20 -1.57 -8.13 -2.44 -12.54 -0.33 -1.55 -0.63 -3.23 -0.73 -3.75 -0.07 -0.52 -0.28 -1.57 -0.47 -2.34 -0.16 -0.77 -0.54 -2.63 -0.80 -4.10 -0.28 -1.48 -0.61 -3.12 -0.73 -3.63 -0.12 -0.52 -0.42 -2.20 -0.70 -3.75 -0.28 -1.55 -0.91 -4.92 -1.43 -7.50 -0.49 -2.58 -1.34 -7.01 -1.85 -9.84 -0.54 -2.84 -1.17 -6.26 -1.43 -7.62 -0.26 -1.36 -0.56 -3.07 -0.68 -3.80 -0.12 -0.75 -0.26 -1.43 -0.33 -1.55 -0.26 -0.42 -2.60 -12.89 -3.21 -17.16 -0.12 -0.84 -0.38 -2.16 -0.56 -2.93 -0.16 -0.77 -0.49 -2.34 -0.70 -3.52 -0.21 -1.15 -0.63 -3.26 -0.94 -4.69 -0.30 -1.41 -0.68 -3.30 -0.82 -4.22 -0.16 -0.89 -0.47 -2.58 -0.73 -3.75 -0.68 -3.30 -2.74 -14.16 -3.73 -19.80 -0.28 -1.48 -0.63 -3.38 -0.82 -4.22 -0.38 -1.71 -1.31 -6.70 -1.88 -10.08 -0.40 -2.34 -0.87 -4.71 -1.43 -7.27 -0.16 -0.84 -0.59 -3 -0.91 -4.80 -0.35 -1.80 -0.77 -4.01 -0.96 -4.92 -0.19 -0.89 -0.54 -2.98 -0.80 -4.64 -0.49 -3.26 -0.70 -3.91 -1.10 -3.40 -0.14 0.16 -0.30 0.63 -0.38 1.01 -0.07 0.40 -0.54 2.51 -1.01 4.69 -2.67 12.42 -3.16 14.77 -3.38 16.29 -0.28 1.99 -1.48 7.64 -3.77 18.05 -1.17 5.23 -2.37 10.66 -2.67 12.07 -0.33 1.43 -0.84 4.01 -1.17 5.74 -0.30 1.73 -1.05 5.27 -1.64 7.85 -0.59 2.58 -1.59 7.17 -2.25 10.20 -0.63 3.02 -1.38 5.93 -1.62 6.45 -0.66 1.36 -2.60 3.26 -4.05 3.96 -1.24 0.61 -1.24 0.61 -87.30 0.61 -86.04 0 -86.04 0 -87.33 -0.49 -1.59 -0.59 -3.56 -2.32 -4.41 -3.89 -1.97 -3.63 -0.35 -8.32 3.61 -10.43 1.01 -0.54 1.01 -0.54 83.44 -0.61 82.43 -0.05 82.43 -0.05 82.69 -1.41 0.14 -0.73 0.42 -1.85 0.59 -2.51 0.19 -0.63 0.82 -3.59 1.41 -6.56 0.59 -2.95 1.29 -6.23 1.52 -7.27 0.23 -1.03 0.82 -3.66 1.27 -5.86 0.47 -2.18 1.34 -6.30 1.97 -9.14 0.63 -2.84 1.34 -6.16 1.57 -7.38 0.21 -1.22 0.49 -2.39 0.61 -2.60 0.09 -0.21 0.42 -1.64 0.68 -3.16 0.26 -1.55 0.63 -3.26 0.82 -3.82 0.19 -0.59 0.35 -1.34 0.35 -1.69 0 -0.35 0.21 -1.57 0.49 -2.70 0.26 -1.13 0.59 -2.60 0.68 -3.23 0.21 -1.22 2.16 -10.08 3.05 -13.78 0.26 -1.13 1.05 -4.88 1.76 -8.32 0.70 -3.45 1.55 -7.59 1.88 -9.21 0.33 -1.62 1.08 -5.09 1.64 -7.73 1.62 -7.41 1.73 -7.95 2.13 -9.96 0.91 -4.62 1.92 -9.19 2.18 -9.80 0.14 -0.35 0.82 -1.24 1.48 -1.97 2.58 -2.72 5.84 -3.42 8.88 -1.90 1.97 0.98 3.73 2.74 4.27 4.31 0.42 1.20 1.41 6.42 1.80 9.47 0.09 0.84 0.30 1.83 0.45 2.18 0.14 0.38 0.26 1.10 0.26 1.66 0 0.54 0.16 1.45 0.35 2.04 0.19 0.56 0.56 2.25 0.84 3.73 0.82 4.50 1.78 9.28 2.20 11.13 0.19 0.77 0.45 2.04 0.56 2.81 0.47 2.63 1.92 10.08 2.25 11.60 0.19 0.84 0.45 2.16 0.56 2.93 0.28 1.64 0.63 3.56 1.08 5.86 0.19 0.91 0.49 2.60 0.70 3.75 0.21 1.17 0.54 2.79 0.70 3.63 0.19 0.84 0.77 3.75 1.29 6.45 0.54 2.72 1.17 5.88 1.41 7.03 0.23 1.17 0.66 3.38 0.94 4.92 0.26 1.55 0.70 4.03 0.96 5.51 0.26 1.48 0.73 3.91 1.03 5.39 0.30 1.48 0.68 3.45 0.82 4.34 0.16 0.91 0.47 2.48 0.70 3.52 0.70 3.19 2.23 10.73 2.58 12.89 0.09 0.66 0.47 2.48 0.80 4.10 0.63 3.05 0.70 3.35 1.66 8.77 0.33 1.80 0.82 4.29 1.08 5.51 0.26 1.24 0.56 2.79 0.68 3.42 0.19 1.17 0.89 4.76 1.55 8.09 0.21 0.96 0.63 3.23 0.96 5.04 0.84 4.64 1.41 7.55 1.69 8.91 0.14 0.66 0.35 1.76 0.49 2.46 0.12 0.70 0.38 2.04 0.56 2.93 0.19 0.91 0.61 3.16 0.94 5.04 1.05 5.86 2.48 13.41 2.88 15.12 0.19 0.91 0.42 2.02 0.47 2.46 0.07 0.45 0.33 1.78 0.59 2.93 0.26 1.17 0.56 2.70 0.68 3.40 0.12 0.70 0.30 1.62 0.42 1.99 0.12 0.40 0.35 1.48 0.52 2.41 0.26 1.50 0.35 1.69 0.82 1.69 0.45 0 0.54 -0.16 0.68 -0.98 0.23 -1.66 2.23 -11.86 2.84 -14.60 0.30 -1.41 0.66 -3.09 0.80 -3.75 0.89 -4.57 5.46 -26.60 6.47 -31.17 0.33 -1.41 0.77 -3.59 1.03 -4.80 0.52 -2.51 1.13 -5.44 2.13 -10.08 0.38 -1.73 1.01 -4.69 1.36 -6.56 0.38 -1.88 1.05 -5.13 1.50 -7.27 0.47 -2.13 0.94 -4.38 1.05 -5.04 0.45 -2.30 1.95 -9.63 2.18 -10.48 0.26 -1.01 1.64 -7.38 2.44 -11.32 0.30 -1.55 0.77 -3.87 1.05 -5.16 0.47 -2.34 2.91 -13.57 4.22 -19.57 0.38 -1.73 0.82 -3.89 0.96 -4.80 0.54 -3.26 2.16 -5.65 4.64 -6.91 1.73 -0.87 2.53 -1.01 4.36 -0.82 1.22 0.14 1.83 0.35 2.93 1.08 2.20 1.43 3.40 3.45 4.45 7.55 0.26 1.05 0.70 2.72 0.96 3.68 0.26 0.96 0.63 2.34 0.80 3.05 0.54 2.16 1.29 4.95 1.78 6.56 0.23 0.84 0.70 2.48 1.01 3.63 0.30 1.17 0.98 3.63 1.52 5.51 0.54 1.88 1.24 4.41 1.55 5.63 0.33 1.22 0.80 2.86 1.05 3.63 0.26 0.77 0.47 1.59 0.47 1.80 0 0.23 0.30 1.50 0.68 2.81 0.38 1.34 1.01 3.68 1.43 5.23 0.77 2.81 1.52 5.58 3.26 11.72 0.52 1.80 1.31 4.71 1.76 6.47 0.45 1.76 0.96 3.70 1.17 4.34 0.30 0.98 2.39 8.65 4.29 15.68 1.13 4.24 2.25 8.27 3.05 11.13 1.45 5.13 1.62 5.74 3.21 11.79 0.42 1.59 0.54 1.80 0.96 1.80 0.16 0 0.35 0.12 0.40 0.28 0.05 0.14 0.33 -0.52 0.63 -1.48 0.30 -0.96 1.73 -5.37 3.19 -9.82 1.48 -4.45 3.09 -9.52 3.63 -11.25 0.52 -1.73 1.85 -5.86 2.95 -9.14 1.13 -3.28 2.48 -7.45 3.05 -9.26 1.73 -5.44 2.23 -6.19 5.11 -7.69 1.43 -0.75 1.43 -0.75 69.40 -0.82 67.97 -0.07 67.97 -0.07 69.56 0.47 0.87 0.28 1.57 0.61 1.57 0.70 0 0.12 0.42 0.56 0.94 1.03 0.52 0.47 1.27 1.52 1.64 2.32 0.94 1.97 0.98 4.52 0.14 6.33 -0.73 1.57 -3.26 3.98 -4.52 4.31 -0.70 0.19 -19.31 0.28 -65.27 0.33 -64.29 0.05 -64.29 0.05 -66.82 7.66 -1.38 4.20 -4.97 14.95 -7.97 23.91 -5.58 16.71 -8.34 25.17 -9.89 30.12 -1.38 4.43 -2.34 5.98 -4.66 7.43 -1.15 0.75 -1.29 0.77 -3.66 0.77 -2.11 0 -2.63 -0.07 -3.59 -0.56 -1.20 -0.59 -2.65 -1.92 -3.59 -3.30 -0.47 -0.68 -2.44 -7.15 -4.17 -13.59 -0.19 -0.70 -0.61 -2.23 -0.94 -3.40 -0.33 -1.15 -0.77 -2.74 -0.98 -3.52 -0.19 -0.77 -0.45 -1.71 -0.56 -2.11 -0.12 -0.38 -0.49 -1.76 -0.82 -3.05 -0.35 -1.29 -1.03 -3.77 -1.52 -5.51 -1.90 -6.52 -2.79 -9.75 -2.95 -10.66 -0.07 -0.52 -0.23 -1.10 -0.35 -1.31 -0.12 -0.21 -0.63 -2.02 -1.15 -3.98 -0.94 -3.54 -1.66 -6.23 -3.40 -12.63 -0.47 -1.73 -1.10 -4.03 -1.43 -5.09 -0.30 -1.05 -0.94 -3.33 -1.38 -5.04 -0.45 -1.71 -1.03 -3.91 -1.29 -4.88 -0.28 -0.96 -0.59 -2.18 -0.68 -2.70 -0.12 -0.52 -0.75 -2.88 -1.41 -5.27 -0.66 -2.39 -1.45 -5.39 -1.80 -6.68 -0.33 -1.29 -0.70 -2.60 -0.80 -2.93 -0.30 -0.91 -2.04 -7.52 -2.25 -8.55 -0.16 -0.70 -0.33 -0.94 -0.66 -0.94 -0.40 0 -0.56 0.56 -1.45 4.80 -0.54 2.65 -1.36 6.61 -1.85 8.79 -0.47 2.20 -1.15 5.51 -1.50 7.38 -1.22 6.28 -1.92 9.73 -2.25 11.13 -0.19 0.77 -0.52 2.30 -0.70 3.40 -0.21 1.10 -0.54 2.53 -0.70 3.16 -0.19 0.66 -0.61 2.48 -0.91 4.10 -0.73 3.73 -1.69 8.48 -1.99 9.84 -0.49 2.30 -0.94 4.43 -1.29 6.21 -0.21 1.03 -0.75 3.61 -1.20 5.74 -0.45 2.13 -0.84 4.20 -0.91 4.57 -0.07 0.40 -0.23 1.34 -0.35 2.11 -0.14 0.77 -0.73 3.63 -1.31 6.33 -0.59 2.72 -1.17 5.55 -1.31 6.33 -0.30 1.83 -1.57 8.39 -1.85 9.61 -0.12 0.52 -0.54 2.58 -0.94 4.57 -0.40 1.99 -0.87 4.22 -1.05 4.92 -0.16 0.70 -0.45 2.09 -0.61 3.05 -0.16 0.96 -0.49 2.65 -0.73 3.75 -0.54 2.46 -0.59 2.70 -2.32 11.48 -0.77 3.94 -1.55 7.73 -1.73 8.44 -0.19 0.70 -0.56 2.39 -0.82 3.75 -0.28 1.36 -0.70 3.47 -0.96 4.69 -0.23 1.22 -0.61 3.23 -0.82 4.45 -0.63 3.87 -2.23 6.45 -4.83 7.85 -1.01 0.56 -1.57 0.68 -3.12 0.75 -1.13 0.05 -2.25 -0.07 -2.84 -0.26 z "/>
 </g>
</svg>`;var Af=w('<div class="backdrop svelte-ji5owg"></div>'),Cf=w('<button><span class="icon svelte-ji5owg"><!></span> <span> </span></button>'),Pf=w('<!> <aside><div class="header svelte-ji5owg"><div class="header-inner svelte-ji5owg"><button class="collapse-btn svelte-ji5owg"><div class="chevron svelte-ji5owg"><!></div></button> <div><div class="logo svelte-ji5owg"><!></div></div></div> <button class="btn-icon mobile-close svelte-ji5owg"><!></button></div> <div class="scroll-area custom-scrollbar svelte-ji5owg"><nav class="svelte-ji5owg"><!> <button title="Search"><span class="icon svelte-ji5owg"><!></span> <span>Search</span></button> <div class="sep svelte-ji5owg"></div> <button class="nav-item sync svelte-ji5owg" title="Update Library"><span><!></span> <span> </span></button> <div class="sep svelte-ji5owg"></div> <button title="Settings"><span class="icon svelte-ji5owg"><!></span> <span>Settings</span></button></nav> <div class="footer svelte-ji5owg"><div>Moode WaveUI</div></div></div></aside>',1);function Lf(e,t){St(t,!1);const a=()=>Ee(Es,"$isYandexEnabled",c),r=()=>Ee(ia,"$isSyncingLibrary",c),n=()=>Ee(un,"$isSidebarCollapsed",c),i=()=>Ee(Dt,"$activeMenuTab",c),[c,o]=jt(),v=$(),l=$();let u=mt(t,"isOpen",8,!1);const h=Cn();let f=$(0),p=$(0),x=$(!1);const T=[{id:"queue",label:"Queue",icon:y.MENU},{id:"favorites",label:"Favorites",icon:y.HEART},{id:"artists",label:"Artists",icon:y.ARTISTS},{id:"albums",label:"Albums",icon:y.ALBUMS},{id:"playlists",label:"Playlists",icon:y.PLAYLISTS},{id:"radio",label:"Radio",icon:y.RADIO},{id:"yandex",label:"Yandex Music",icon:y.YANDEX}];function k(z){window.location.hash=`/${z}`,h("close")}async function S(){r()||(await Ya.syncLibrary(),window.location.hash="/artists")}function F(){un.update(z=>!z)}function le(z){u()&&(g(f,z.touches[0].clientX),g(p,s(f)),g(x,!0))}function Q(z){s(x)&&g(p,z.touches[0].clientX)}function te(){s(x)&&(s(p)-s(f)<-70&&h("close"),g(x,!1),g(f,0),g(p,0))}oe(()=>a(),()=>{g(v,T.filter(z=>z.id==="yandex"?a():!0))}),oe(()=>(s(x),s(p),s(f)),()=>{g(l,s(x)?Math.min(0,s(p)-s(f)):0)}),Vt(),At();var be=Pf(),q=ze(be);{var B=z=>{var ee=Af();M("click",ee,()=>h("close")),ut(3,ee,()=>xt,()=>({duration:200})),m(z,ee)};P(q,z=>{u()&&z(B)})}var se=_(q,2);let W,ye;var L=d(se),U=d(L),he=d(U),V=d(he),_e=d(V);re(_e,()=>(R(y),b(()=>y.BACK)));var j=_(he,2);let N;var Me=d(j),K=d(Me);re(K,()=>Mf);var ne=_(U,2),C=d(ne);re(C,()=>(R(y),b(()=>y.CLOSE)));var G=_(L,2),ge=d(G),A=d(ge);bt(A,1,()=>s(v),z=>z.id,(z,ee)=>{var O=Cf();let X;var D=d(O),Se=d(D);re(Se,()=>(s(ee),b(()=>s(ee).icon)));var Ie=_(D,2);let je;var qe=d(Ie);ue(()=>{X=Ke(O,1,"nav-item svelte-ji5owg",null,X,{active:i()===s(ee).id}),Lt(O,"title",(s(ee),b(()=>s(ee).label))),je=Ke(Ie,1,"label-text svelte-ji5owg",null,je,{hidden:n()}),de(qe,(s(ee),b(()=>s(ee).label)))}),M("click",O,()=>k(s(ee).id)),m(z,O)});var ie=_(A,2);let Y;var ve=d(ie),Z=d(ve);re(Z,()=>(R(y),b(()=>y.SEARCH)));var J=_(ve,2);let fe;var me=_(ie,4),we=d(me);let ke;var Re=d(we);re(Re,()=>(R(y),b(()=>y.SYNC)));var xe=_(we,2);let Te;var Ne=d(xe),Oe=_(me,4);let E;var I=d(Oe),H=d(I);re(H,()=>(R(y),b(()=>y.SETTINGS)));var ce=_(I,2);let Ce;var pe=_(ge,2),ae=d(pe);let $e;ue(()=>{W=Ke(se,1,"side-menu svelte-ji5owg",null,W,{"mobile-open":u(),collapsed:n()}),ye=ht(se,"",ye,{transform:u()?`translateX(${s(l)}px)`:"",transition:s(x)?"none":"width 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.3s ease"}),Lt(he,"title",n()?"Expand":"Collapse"),ht(V,`transform: rotate(${n()?"180deg":"0deg"})`),N=Ke(j,1,"logo-wrapper svelte-ji5owg",null,N,{hidden:n()}),Y=Ke(ie,1,"nav-item svelte-ji5owg",null,Y,{active:i()==="search"}),fe=Ke(J,1,"label-text svelte-ji5owg",null,fe,{hidden:n()}),me.disabled=r(),ke=Ke(we,1,"icon svelte-ji5owg",null,ke,{spin:r()}),Te=Ke(xe,1,"label-text svelte-ji5owg",null,Te,{hidden:n()}),de(Ne,r()?"Syncing...":"Update Library"),E=Ke(Oe,1,"nav-item svelte-ji5owg",null,E,{active:i()==="settings"}),Ce=Ke(ce,1,"label-text svelte-ji5owg",null,Ce,{hidden:n()}),$e=Ke(ae,1,"footer-text svelte-ji5owg",null,$e,{hidden:n()})}),M("click",he,F),M("click",ne,()=>h("close")),M("click",ie,()=>k("search")),M("click",me,S),M("click",Oe,()=>k("settings")),M("touchstart",se,le),M("touchmove",se,Q),M("touchend",se,te),m(e,be),Tt(),o()}var zf=w('<div class="toast-container svelte-k2bvk7"><div> </div></div>'),If=w('<button class="back-btn svelte-k2bvk7"><span class="icon-inline svelte-k2bvk7"><!></span> Back</button>'),Rf=w('<div class="view-title svelte-k2bvk7"><!></div>'),jf=w('<div class="full-player-modal svelte-k2bvk7"><!></div>'),Nf=w('<div class="app-container svelte-k2bvk7"><div class="app-layout svelte-k2bvk7"><!> <!> <main class="content-area svelte-k2bvk7"><header class="top-bar svelte-k2bvk7"><button class="hamburger-btn svelte-k2bvk7"><!></button> <!></header> <div class="scroll-container svelte-k2bvk7"><div class="view-wrapper svelte-k2bvk7"><!></div></div></main> <div class="docked-player-container svelte-k2bvk7"><!></div></div> <div class="mini-player-wrapper svelte-k2bvk7"><!></div></div> <!>',1);function Of(e,t){St(t,!1);const a=()=>Ee(Wt,"$navigationStack",c),r=()=>Ee(cn,"$toastMessage",c),n=()=>Ee(Dt,"$activeMenuTab",c),i=()=>Ee(Ts,"$isFullPlayerOpen",c),[c,o]=jt();let v=$(!1);Ha(()=>{window.history.replaceState({depth:a().length},"","");const j=()=>void 0;return window.addEventListener("popstate",j),()=>window.removeEventListener("popstate",j)}),At();var l=Nf(),u=ze(l),h=d(u),f=d(h);{var p=j=>{var N=zf(),Me=d(N),K=d(Me);ue(()=>{Ke(Me,1,`toast-body ${r().type??""}`,"svelte-k2bvk7"),de(K,r().text)}),ut(3,N,()=>Pn,()=>({y:-50,duration:300})),m(j,N)};P(f,j=>{r()&&j(p)})}var x=_(f,2);Lf(x,{get isOpen(){return s(v)},$$events:{close:()=>g(v,!1)}});var T=_(x,2),k=d(T),S=d(k),F=d(S);re(F,()=>y.MENU);var le=_(S,2);{var Q=j=>{var N=If(),Me=d(N),K=d(Me);re(K,()=>y.BACK),M("click",N,function(...ne){cd?.apply(this,ne)}),m(j,N)},te=j=>{var N=Rf(),Me=d(N);{var K=C=>{var G=Ia("Radio");m(C,G)},ne=C=>{var G=at(),ge=ze(G);{var A=Y=>{var ve=Ia("Playlists");m(Y,ve)},ie=Y=>{var ve=at(),Z=ze(ve);{var J=me=>{var we=Ia("Search");m(me,we)},fe=me=>{var we=at(),ke=ze(we);{var Re=Te=>{var Ne=Ia("Yandex Music");m(Te,Ne)},xe=Te=>{var Ne=at(),Oe=ze(Ne);{var E=H=>{var ce=Ia("Queue");m(H,ce)},I=H=>{var ce=at(),Ce=ze(ce);{var pe=$e=>{var z=Ia("Favorites");m($e,z)},ae=$e=>{var z=at(),ee=ze(z);{var O=D=>{var Se=Ia("Settings");m(D,Se)},X=D=>{var Se=Ia();ue(Ie=>de(Se,Ie),[()=>(n()||"Library").charAt(0).toUpperCase()+(n()||"library").slice(1)]),m(D,Se)};P(ee,D=>{n()==="settings"?D(O):D(X,!1)},!0)}m($e,z)};P(Ce,$e=>{n()==="favorites"?$e(pe):$e(ae,!1)},!0)}m(H,ce)};P(Oe,H=>{n()==="queue"?H(E):H(I,!1)},!0)}m(Te,Ne)};P(ke,Te=>{n()==="yandex"?Te(Re):Te(xe,!1)},!0)}m(me,we)};P(Z,me=>{n()==="search"?me(J):me(fe,!1)},!0)}m(Y,ve)};P(ge,Y=>{n()==="playlists"?Y(A):Y(ie,!1)},!0)}m(C,G)};P(Me,C=>{n()==="radio"?C(K):C(ne,!1)})}m(j,N)};P(le,j=>{a().length>1?j(Q):j(te,!1)})}var be=_(k,2),q=d(be),B=d(q);{var se=j=>{qv(j,{})},W=j=>{var N=at(),Me=ze(N);{var K=C=>{uf(C,{})},ne=C=>{var G=at(),ge=ze(G);{var A=Y=>{ju(Y,{})},ie=Y=>{var ve=at(),Z=ze(ve);{var J=me=>{vu(me,{})},fe=me=>{var we=at(),ke=ze(we);{var Re=Te=>{Eu(Te,{})},xe=Te=>{var Ne=at(),Oe=ze(Ne);{var E=H=>{Pu(H,{})},I=H=>{Mv(H,{get activeCategory(){return n()}})};P(Oe,H=>{n()==="settings"?H(E):H(I,!1)},!0)}m(Te,Ne)};P(ke,Te=>{n()==="search"?Te(Re):Te(xe,!1)},!0)}m(me,we)};P(Z,me=>{n()==="playlists"||n()==="favorites"?me(J):me(fe,!1)},!0)}m(Y,ve)};P(ge,Y=>{n()==="queue"?Y(A):Y(ie,!1)},!0)}m(C,G)};P(Me,C=>{n()==="yandex"?C(K):C(ne,!1)},!0)}m(j,N)};P(B,j=>{n()==="radio"?j(se):j(W,!1)})}var ye=_(T,2),L=d(ye);ki(L,{isDocked:!0});var U=_(h,2),he=d(U);yf(he,{});var V=_(u,2);{var _e=j=>{var N=jf(),Me=d(N);ki(Me,{}),m(j,N)};P(V,j=>{i()&&j(_e)})}ue(()=>ht(be,`padding-bottom: ${i()?"0px":"var(--mini-player-height)"};`)),M("click",S,()=>g(v,!0)),m(e,l),Tt(),o()}var Df=w('<button class="back-btn-area svelte-l8h85k"><span class="back-icon svelte-l8h85k"><!></span></button> <span class="header-title svelte-l8h85k">Select Playlist</span>',1),Ff=w('<div class="track-info svelte-l8h85k"><div class="title text-ellipsis svelte-l8h85k"> </div> <div class="artist text-ellipsis svelte-l8h85k">Playlist</div></div>'),qf=w('<div class="track-info svelte-l8h85k"><div class="title text-ellipsis svelte-l8h85k"> </div> <div class="artist text-ellipsis svelte-l8h85k"> </div></div>'),Bf=w('<button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span> </span></button>'),Uf=w('<div class="empty-msg svelte-l8h85k">No custom playlists</div>'),Yf=w("<!> <!>",1),Hf=w('<button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Play Now</span></button> <div class="sep svelte-l8h85k"></div> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Rename</span></button> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Delete Playlist</span></button>',1),Vf=w('<button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>My Vibe</span></button>'),Qf=w('<button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Go to Album</span></button> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Go to Artist</span></button>',1),Wf=w('<div class="sep svelte-l8h85k"></div> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Remove from Playlist</span></button>',1),Xf=w('<div class="sep svelte-l8h85k"></div> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Remove from Queue</span></button>',1),Kf=w('<button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Play Next</span></button> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Add to Queue</span></button> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Add to Playlist...</span></button> <!> <!> <button class="menu-row svelte-l8h85k"><span><!></span> <span> </span></button> <!> <!>',1),Gf=w('<div class="backdrop svelte-l8h85k"><div class="menu-card svelte-l8h85k"><div class="menu-header svelte-l8h85k"><!></div> <div class="menu-items scroll-y svelte-l8h85k"><!></div></div></div>');function Zf(e,t){St(t,!1);const a=()=>Ee(zn,"$contextMenu",i),r=()=>Ee(Oa,"$favorites",i),n=()=>Ee(Rs,"$playlists",i),[i,c]=jt(),o=$(),v=$(),l=$(),u=$(),h=$(),f=$(),p=$(),x=$();let T=$(),k=$(),S=$(),F=$(0),le=$(0),Q=$("main"),te=$(!1);function be(A){a().isOpen&&(g(te,!1),Ot())}function q(){Ot()}function B(){a().track&&Ut.playNext(a().track.file),Ot()}function se(){a().track&&Ut.addToQueue(a().track.file),Ot()}function W(){a().track&&ga.toggleFavorite(a().track),Ot()}function ye(){const A=a().track;A&&A.album&&Ba("tracks_by_album",{name:A.album,artist:A.artist}),Ot()}function L(){const A=a().track;A&&A.artist&&Ba("albums_by_artist",{name:A.artist}),Ot()}async function U(){const{playlistName:A,index:ie}=a().context;A&&ie!==null&&(Ur.update(Y=>{const ve=[...Y];return ve.splice(ie,1),ve}),await ga.removeFromPlaylist(A,ie)),Ot()}function he(){const{index:A}=a().context;A!=null&&Ut.removeFromQueue(A),Ot()}function V(){const A=a().context.playlist;A&&Le.send("stop").then(()=>Le.send("clear")).then(()=>Le.send(`load "${A.name.replace(/"/g,'\\"')}"`)).then(()=>Le.send("play 0")),Ot()}function _e(){const A=a().context.playlist;A&&(Ot(),pa({title:"Rename Playlist",message:`Enter new name for "${A.name}":`,type:"prompt",placeholder:A.name,inputValue:A.name,confirmLabel:"Rename",onConfirm:ie=>{ie&&ie!==A.name&&ga.renamePlaylist(A.name,ie)}}))}function j(){const A=a().context.playlist;A&&(Ot(),pa({title:"Delete Playlist",message:`Are you sure you want to delete "${A.name}"? This cannot be undone.`,type:"confirm",confirmLabel:"Delete",onConfirm:()=>{ga.deletePlaylist(A.name)}}))}function N(){const A=a().track;A&&A.isYandex&&A.id&&qn(A.id),Ot()}function Me(){g(Q,"playlists")}function K(){g(Q,"main")}async function ne(A){const ie=a().track;if(ie)try{const Y=A.replace(/"/g,'\\"'),ve=ie.file.replace(/"/g,'\\"');await Le.send(`playlistadd "${Y}" "${ve}"`),De(`Added to "${A}"`,"success"),Ot()}catch(Y){console.error(Y),De("Failed to add","error")}}oe(()=>a(),()=>{a().isOpen&&g(Q,"main")}),oe(()=>(a(),s(te)),()=>{a().isOpen?!s(te)&&typeof history<"u"&&(history.pushState({contextMenuOpen:!0},""),g(te,!0)):s(te)&&typeof history<"u"&&(history.back(),g(te,!1))}),oe(()=>(a(),r()),()=>{g(o,a().track&&r().has(a().track.file))}),oe(()=>a(),()=>{g(v,a().track&&(a().track.file.includes("http")||a().track.file.includes("://")))}),oe(()=>a(),()=>{g(l,a().track&&a().track.isYandex)}),oe(()=>a(),()=>{g(u,a().context?.type==="playlist")}),oe(()=>a(),()=>{g(h,a().context?.type==="queue")}),oe(()=>a(),()=>{g(f,a().context?.type==="playlist-card")}),oe(()=>a(),()=>{g(p,a().context?.source==="miniplayer")}),oe(()=>(a(),s(le),s(F),s(T),s(p),s(k)),()=>{g(x,(()=>{if(!a().isOpen)return"";const A=a().triggerRect,ie=a().x,Y=a().y,ve=s(le)||220,Z=s(F)||320;if(s(T)<=768&&s(p)&&A)return`
        position: fixed; 
        bottom: ${s(k)-A.top}px; 
        left: 50%; 
        transform: translateX(-50%); 
        margin: 0; 
        transform-origin: bottom center;
      `;let J=0,fe=0,me="top left";if(A){const ke=A.left+A.width/2,Re=A.top+A.height/2,xe=ke>s(T)/2,Te=Re>s(k)/2;xe?(J=A.right-ve,me=Te?"bottom right":"top right"):(J=A.left,me=Te?"bottom left":"top left"),Te?fe=A.top-Z:fe=A.bottom}else J=ie,fe=Y,J+ve>s(T)&&(J=s(T)-ve-10),fe+Z>s(k)&&(fe=s(k)-Z-10);const we=8;return J<we&&(J=we),J+ve>s(T)-we&&(J=s(T)-ve-we),fe<we&&(fe=we),fe+Z>s(k)-we&&(fe=s(k)-Z-we),`position: fixed; top: ${fe}px; left: ${J}px; margin: 0; transform-origin: ${me};`})())}),Vt(),At();var C=at();M("popstate",ja,be);var G=ze(C);{var ge=A=>{var ie=Gf(),Y=d(ie),ve=d(Y),Z=d(ve);{var J=xe=>{var Te=Df(),Ne=ze(Te),Oe=d(Ne),E=d(Oe);re(E,()=>(R(y),b(()=>y.BACK))),M("click",Ne,K),m(xe,Te)},fe=xe=>{var Te=at(),Ne=ze(Te);{var Oe=I=>{var H=Ff(),ce=d(H),Ce=d(ce);ue(()=>de(Ce,(a(),b(()=>a().context.playlist.name)))),m(I,H)},E=I=>{var H=qf(),ce=d(H),Ce=d(ce),pe=_(ce,2),ae=d(pe);ue(()=>{de(Ce,(a(),b(()=>a().track.title))),de(ae,(a(),b(()=>a().track.artist)))}),m(I,H)};P(Ne,I=>{s(f)?I(Oe):I(E,!1)},!0)}m(xe,Te)};P(Z,xe=>{s(Q)==="playlists"?xe(J):xe(fe,!1)})}var me=_(ve,2),we=d(me);{var ke=xe=>{var Te=Yf(),Ne=ze(Te);bt(Ne,1,n,Kt,(I,H)=>{var ce=at(),Ce=ze(ce);{var pe=ae=>{var $e=Bf(),z=d($e),ee=d(z);re(ee,()=>(R(y),b(()=>y.PLAYLISTS)));var O=_(z,2),X=d(O);ue(()=>de(X,(s(H),b(()=>s(H).name)))),M("click",$e,()=>ne(s(H).name)),m(ae,$e)};P(Ce,ae=>{s(H),b(()=>s(H).name!=="Favorites")&&ae(pe)})}m(I,ce)});var Oe=_(Ne,2);{var E=I=>{var H=Uf();m(I,H)};P(Oe,I=>{n(),b(()=>n().filter(H=>H.name!=="Favorites").length===0)&&I(E)})}m(xe,Te)},Re=xe=>{var Te=at(),Ne=ze(Te);{var Oe=I=>{var H=Hf(),ce=ze(H),Ce=d(ce),pe=d(Ce);re(pe,()=>(R(y),b(()=>y.PLAY)));var ae=_(ce,4),$e=d(ae),z=d($e);re(z,()=>(R(y),b(()=>y.EDIT)));var ee=_(ae,2),O=d(ee),X=d(O);re(X,()=>(R(y),b(()=>y.REMOVE))),M("click",ce,V),M("click",ae,_e),M("click",ee,j),m(I,H)},E=I=>{var H=Kf(),ce=ze(H),Ce=d(ce),pe=d(Ce);re(pe,()=>(R(y),b(()=>y.NEXT)));var ae=_(ce,2),$e=d(ae),z=d($e);re(z,()=>(R(y),b(()=>y.MENU)));var ee=_(ae,2),O=d(ee),X=d(O);re(X,()=>(R(y),b(()=>y.ADD_TO_PLAYLIST||y.ADD)));var D=_(ee,2);{var Se=Je=>{var Xe=Vf(),Ze=d(Xe),ot=d(Ze);re(ot,()=>(R(y),b(()=>y.RADIO))),M("click",Xe,N),m(Je,Xe)};P(D,Je=>{s(l)&&Je(Se)})}var Ie=_(D,2);{var je=Je=>{var Xe=Qf(),Ze=ze(Xe),ot=d(Ze),yt=d(ot);re(yt,()=>(R(y),b(()=>y.ALBUM_LINK||y.ALBUMS)));var gt=_(Ze,2),dt=d(gt),lt=d(dt);re(lt,()=>(R(y),b(()=>y.ARTIST_LINK||y.ARTISTS))),M("click",Ze,ye),M("click",gt,L),m(Je,Xe)};P(Ie,Je=>{s(v)||Je(je)})}var qe=_(Ie,2),Ue=d(qe);let Fe;var Ve=d(Ue);re(Ve,()=>(s(o),R(y),b(()=>s(o)?y.HEART_FILLED:y.HEART)));var Ge=_(Ue,2),tt=d(Ge),Ye=_(qe,2);{var Pe=Je=>{var Xe=Wf(),Ze=_(ze(Xe),2),ot=d(Ze),yt=d(ot);re(yt,()=>(R(y),b(()=>y.REMOVE))),M("click",Ze,U),m(Je,Xe)};P(Ye,Je=>{s(u)&&Je(Pe)})}var Qe=_(Ye,2);{var it=Je=>{var Xe=Xf(),Ze=_(ze(Xe),2),ot=d(Ze),yt=d(ot);re(yt,()=>(R(y),b(()=>y.REMOVE))),M("click",Ze,he),m(Je,Xe)};P(Qe,Je=>{s(h)&&Je(it)})}ue(()=>{Fe=Ke(Ue,1,"icon svelte-l8h85k",null,Fe,{liked:s(o)}),de(tt,s(o)?"Unlike":"Like")}),M("click",ce,B),M("click",ae,se),M("click",ee,Me),M("click",qe,W),m(I,H)};P(Ne,I=>{s(f)?I(Oe):I(E,!1)},!0)}m(xe,Te)};P(we,xe=>{s(Q)==="playlists"?xe(ke):xe(Re,!1)})}Ua(Y,xe=>g(S,xe),()=>s(S)),ue(()=>ht(Y,s(x))),ri(Y,"clientHeight",xe=>g(F,xe)),ri(Y,"clientWidth",xe=>g(le,xe)),ut(3,Y,()=>Ln,()=>({start:.95,duration:100})),M("click",Y,Gt(function(xe){Xr.call(this,t,xe)})),M("click",ie,q),ut(3,ie,()=>xt,()=>({duration:100})),m(A,ie)};P(G,A=>{a(),b(()=>a().isOpen)&&A(ge)})}ni("innerWidth",A=>g(T,A)),ni("innerHeight",A=>g(k,A)),m(e,C),Tt(),c()}var Jf=w('<p class="modal-message svelte-1bxxaoh"> </p>'),e0=w('<div class="input-wrapper svelte-1bxxaoh"><input type="text" autoFocus/></div>'),t0=w('<span class="check svelte-1bxxaoh">â</span>'),a0=w("<button> <!></button>"),r0=w('<div class="select-list svelte-1bxxaoh"></div>'),s0=w('<button class="btn cancel svelte-1bxxaoh"> </button>'),n0=w('<div class="modal-actions svelte-1bxxaoh"><!> <button class="btn confirm svelte-1bxxaoh"> </button></div>'),i0=w('<div class="backdrop svelte-1bxxaoh"><div class="modal-card svelte-1bxxaoh"><div class="modal-header svelte-1bxxaoh"><span class="modal-title svelte-1bxxaoh"> </span></div> <div class="modal-body svelte-1bxxaoh"><!> <!></div> <!></div></div>');function o0(e,t){St(t,!1);const a=()=>Ee(Ss,"$modal",r),[r,n]=jt();let i=$(!1),c=$();function o(){if(a().type==="prompt"){const T=a().inputValue?a().inputValue.trim():"";if(T.length===0){l();return}a().onConfirm&&a().onConfirm(T)}else a().onConfirm&&a().onConfirm();vs()}function v(T){a().onConfirm&&a().onConfirm(T),vs()}function l(){g(i,!0),s(c)&&s(c).focus(),setTimeout(()=>{g(i,!1)},400)}function u(){vs()}function h(T){T.key==="Enter"&&a().type!=="select"&&o(),s(i)&&g(i,!1)}oe(()=>a(),()=>{a().isOpen||g(i,!1)}),Vt(),At();var f=at(),p=ze(f);{var x=T=>{var k=i0(),S=d(k),F=d(S),le=d(F),Q=d(le),te=_(F,2),be=d(te);{var q=U=>{var he=Jf(),V=d(he);ue(()=>de(V,(a(),b(()=>a().message)))),m(U,he)};P(be,U=>{a(),b(()=>a().message)&&U(q)})}var B=_(be,2);{var se=U=>{var he=e0(),V=d(he);let _e;Ua(V,j=>g(c,j),()=>s(c)),ue(()=>{_e=Ke(V,1,"modal-input svelte-1bxxaoh",null,_e,{"shake-error":s(i)}),Lt(V,"placeholder",(a(),b(()=>a().placeholder)))}),tr(V,()=>a().inputValue,j=>vc(Ss,b(a).inputValue=j,b(a))),M("keydown",V,h),m(U,he)},W=U=>{var he=at(),V=ze(he);{var _e=j=>{var N=r0();bt(N,5,()=>(a(),b(()=>a().options)),Kt,(Me,K)=>{var ne=a0();let C;var G=d(ne),ge=_(G);{var A=ie=>{var Y=t0();m(ie,Y)};P(ge,ie=>{s(K),a(),b(()=>s(K).value===a().inputValue)&&ie(A)})}ue(()=>{C=Ke(ne,1,"select-item svelte-1bxxaoh",null,C,{active:s(K).value===a().inputValue}),de(G,`${s(K),b(()=>s(K).label)??""} `)}),M("click",ne,()=>v(s(K).value)),m(Me,ne)}),m(j,N)};P(V,j=>{a(),b(()=>a().type==="select")&&j(_e)},!0)}m(U,he)};P(B,U=>{a(),b(()=>a().type==="prompt")?U(se):U(W,!1)})}var ye=_(te,2);{var L=U=>{var he=n0(),V=d(he);{var _e=Me=>{var K=s0(),ne=d(K);ue(()=>de(ne,(a(),b(()=>a().cancelLabel)))),M("click",K,function(...C){vs?.apply(this,C)}),m(Me,K)};P(V,Me=>{a(),b(()=>a().type==="confirm"||a().type==="prompt")&&Me(_e)})}var j=_(V,2),N=d(j);ue(()=>de(N,(a(),b(()=>a().confirmLabel)))),M("click",j,o),m(U,he)};P(ye,U=>{a(),b(()=>a().type!=="select")&&U(L)})}ue(()=>de(Q,(a(),b(()=>a().title)))),ut(3,S,()=>Ln,()=>({start:.95,duration:200})),M("click",S,Gt(function(U){Xr.call(this,t,U)})),M("click",k,u),ut(3,k,()=>xt,()=>({duration:150})),m(T,k)};P(p,T=>{a(),b(()=>a().isOpen)&&T(x)})}m(e,f),Tt(),n()}const xi={init(){this.handleHashChange(),window.addEventListener("hashchange",()=>this.handleHashChange())},handleHashChange(){let e=window.location.hash.slice(1);for(;e.startsWith("/");)e=e.slice(1);if(!e){(We(Wt).length>1||We(Dt)==="search")&&(this.setRootTab("artists"),window.location.hash="/artists");return}const t=e.split("/").map(decodeURIComponent),a=t[0];let r=ld();switch(r||t.length>1&&(a==="album"&&t.length>=3?r={artist:t[1],name:t[2]}:a==="artist"&&t.length>=2?r={name:t[1]}:r={name:t[1],displayName:t[1]}),console.log(`[Router] Navigating: ${a}`,r),a){case"queue":this.setRootTab("queue");break;case"radio":this.setRootTab("radio");break;case"playlists":this.setRootTab("playlists");break;case"settings":this.setRootTab("settings");break;case"favorites":Dt.set("favorites"),Wt.set([{view:"root"},{view:"details",data:{name:"Favorites"}}]);break;case"artists":this.setRootTab("artists");break;case"albums":this.setRootTab("albums");break;case"search":Dt.set("search"),t[1]&&Yr.set(t[1]),Wt.set([{view:"root"}]);break;case"album":Dt.set("albums"),Wt.set([{view:"root"},{view:"tracks_by_album",data:r}]);break;case"artist":Dt.set("artists"),Wt.set([{view:"root"},{view:"albums_by_artist",data:r}]);break;case"playlist":Dt.set("playlists"),Wt.set([{view:"root"},{view:"details",data:r}]);break;case"yandex":Dt.set("yandex"),Wt.set([{view:"root"}]);break;default:this.setRootTab("artists");break}},setRootTab(e){Dt.set(e),Wt.set([{view:"root"}])},updateUrl(e,t){let a="";if(e==="root"){const r=We(Dt);if(r==="search"){const n=We(Yr);a=n?`search/${encodeURIComponent(n)}`:"search"}else a=r}else if(e==="details"){const r=t.name||t;a=r==="Favorites"?"favorites":`playlist/${encodeURIComponent(r)}`}else if(e==="albums_by_artist"){const r=t.name||t;a=`artist/${encodeURIComponent(r)}`}else if(e==="tracks_by_album"){const r=t.name||t,n=t.artist;n?a=`album/${encodeURIComponent(n)}/${encodeURIComponent(r)}`:a=`album/${encodeURIComponent(r)}`}else e==="queue"&&(a="queue");if(a){const r=`#/${a}`;decodeURIComponent(window.location.hash)!==decodeURIComponent(r)&&(window.location.hash=`/${a}`)}}};var l0=w("<!> <!> <!>",1);function c0(e,t){St(t,!1),Ha(async()=>{xi.init(),od((c,o)=>{xi.updateUrl(c,o)}),To(),Ya.loadRadioStations();try{const c=await Da.getArtists();c.length>0?console.log(`[App] Database ready. Loaded ${c.length} artists from cache.`):(console.log("[App] Database empty. Starting initial sync..."),Ya.syncLibrary())}catch(c){console.error("[App] DB Check failed:",c),De("Local DB error. Please update library manually.","error")}}),At();var a=l0(),r=ze(a);Of(r,{});var n=_(r,2);Zf(n,{});var i=_(n,2);o0(i,{}),m(e,a),Tt()}Hl(c0,{target:document.getElementById("app")});
