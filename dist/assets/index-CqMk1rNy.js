(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function a(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=a(n);fetch(n.href,i)}})();const Js=!1;var rs=Array.isArray,Po=Array.prototype.indexOf,Ls=Array.from,Ti=Object.defineProperty,Sr=Object.getOwnPropertyDescriptor,Mi=Object.getOwnPropertyDescriptors,Lo=Object.prototype,zo=Array.prototype,wn=Object.getPrototypeOf,Yn=Object.isExtensible;function Ro(e){return typeof e=="function"}const Jt=()=>{};function Io(e){return e()}function ys(e){for(var t=0;t<e.length;t++)e[t]()}function Ai(){var e,t,a=new Promise((s,n)=>{e=s,t=n});return{promise:a,resolve:e,reject:t}}const Lt=2,kn=4,zs=8,jo=1<<24,wa=16,ja=32,ur=64,Rs=128,va=512,Ct=1024,Vt=2048,ua=4096,aa=8192,Pa=16384,Is=32768,or=65536,Un=1<<17,Ci=1<<18,Lr=1<<19,Pi=1<<20,Ta=1<<25,lr=32768,en=1<<21,xn=1<<22,Ha=1<<23,La=Symbol("$state"),No=Symbol("legacy props"),Do=Symbol(""),wr=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Sn(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Oo(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Fo(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function qo(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Bo(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Yo(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Uo(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function Ho(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Vo(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Wo(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Qo(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Xo=1,Ko=2,Li=4,Go=8,Zo=16,Jo=1,el=2,tl=4,al=8,rl=16,sl=1,nl=2,il=4,ol=1,ll=2,It=Symbol(),cl="http://www.w3.org/1999/xhtml";function dl(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function vl(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function zi(e){return e===this.v}function En(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function Ri(e){return!En(e,this.v)}let zr=!1,ul=!1;function fl(){zr=!0}let _t=null;function $r(e){_t=e}function Tt(e,t=!1,a){_t={p:_t,i:!1,c:null,e:null,s:e,x:null,l:zr&&!t?{s:null,u:null,$:[]}:null}}function Mt(e){var t=_t,a=t.e;if(a!==null){t.e=null;for(var s of a)Ki(s)}return t.i=!0,_t=t.p,{}}function ss(){return!zr||_t!==null&&_t.l===null}let Za=[];function Ii(){var e=Za;Za=[],ys(e)}function fr(e){if(Za.length===0&&!Yr){var t=Za;queueMicrotask(()=>{t===Za&&Ii()})}Za.push(e)}function hl(){for(;Za.length>0;)Ii()}function ji(e){var t=lt;if(t===null)return it.f|=Ha,e;if((t.f&Is)===0){if((t.f&Rs)===0)throw e;t.b.error(e)}else Tr(e,t)}function Tr(e,t){for(;t!==null;){if((t.f&Rs)!==0)try{t.b.error(e);return}catch(a){e=a}t=t.parent}throw e}const cs=new Set;let ot=null,Br=null,ia=null,sa=[],js=null,tn=!1,Yr=!1;class ga{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#a=0;#r=0;#l=null;#n=new Set;#s=new Set;skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#r>0}process(t){sa=[],Br=null,this.apply();var a={parent:null,effect:null,effects:[],render_effects:[]};for(const s of t)this.#i(s,a);this.is_fork||this.#d(),this.is_deferred()?(this.#o(a.effects),this.#o(a.render_effects)):(Br=this,ot=null,Hn(a.render_effects),Hn(a.effects),Br=null,this.#l?.resolve()),ia=null}#i(t,a){t.f^=Ct;for(var s=t.first;s!==null;){var n=s.f,i=(n&(ja|ur))!==0,o=i&&(n&Ct)!==0,l=o||(n&aa)!==0||this.skipped_effects.has(s);if((s.f&Rs)!==0&&s.b?.is_pending()&&(a={parent:a,effect:s,effects:[],render_effects:[]}),!l&&s.fn!==null){i?s.f^=Ct:(n&kn)!==0?a.effects.push(s):Ir(s)&&((s.f&wa)!==0&&this.#n.add(s),Mr(s));var v=s.first;if(v!==null){s=v;continue}}var d=s.parent;for(s=s.next;s===null&&d!==null;)d===a.effect&&(this.#o(a.effects),this.#o(a.render_effects),a=a.parent),s=d.next,d=d.parent}}#o(t){for(const a of t)(a.f&Vt)!==0?this.#n.add(a):(a.f&ua)!==0&&this.#s.add(a),this.#c(a.deps),Pt(a,Ct)}#c(t){if(t!==null)for(const a of t)(a.f&Lt)===0||(a.f&lr)===0||(a.f^=lr,this.#c(a.deps))}capture(t,a){this.previous.has(t)||this.previous.set(t,a),(t.f&Ha)===0&&(this.current.set(t,t.v),ia?.set(t,t.v))}activate(){ot=this,this.apply()}deactivate(){ot===this&&(ot=null,ia=null)}flush(){if(this.activate(),sa.length>0){if(Ni(),ot!==null&&ot!==this)return}else this.#a===0&&this.process([]);this.deactivate()}discard(){for(const t of this.#t)t(this);this.#t.clear()}#d(){if(this.#r===0){for(const t of this.#e)t();this.#e.clear()}this.#a===0&&this.#v()}#v(){if(cs.size>1){this.previous.clear();var t=ia,a=!0,s={parent:null,effect:null,effects:[],render_effects:[]};for(const i of cs){if(i===this){a=!1;continue}const o=[];for(const[v,d]of this.current){if(i.current.has(v))if(a&&d!==i.current.get(v))i.current.set(v,d);else continue;o.push(v)}if(o.length===0)continue;const l=[...i.current.keys()].filter(v=>!this.current.has(v));if(l.length>0){var n=sa;sa=[];const v=new Set,d=new Map;for(const u of o)Di(u,l,v,d);if(sa.length>0){ot=i,i.apply();for(const u of sa)i.#i(u,s);i.deactivate()}sa=n}}ot=null,ia=t}this.committed=!0,cs.delete(this)}increment(t){this.#a+=1,t&&(this.#r+=1)}decrement(t){this.#a-=1,t&&(this.#r-=1),this.revive()}revive(){for(const t of this.#n)this.#s.delete(t),Pt(t,Vt),cr(t);for(const t of this.#s)Pt(t,ua),cr(t);this.flush()}oncommit(t){this.#e.add(t)}ondiscard(t){this.#t.add(t)}settled(){return(this.#l??=Ai()).promise}static ensure(){if(ot===null){const t=ot=new ga;cs.add(ot),Yr||ga.enqueue(()=>{ot===t&&t.flush()})}return ot}static enqueue(t){fr(t)}apply(){}}function pl(e){var t=Yr;Yr=!0;try{for(var a;;){if(hl(),sa.length===0&&(ot?.flush(),sa.length===0))return js=null,a;Ni()}}finally{Yr=t}}function Ni(){var e=ar;tn=!0;var t=null;try{var a=0;for(ks(!0);sa.length>0;){var s=ga.ensure();if(a++>1e3){var n,i;gl()}s.process(sa),Va.clear()}}finally{tn=!1,ks(e),js=null}}function gl(){try{Yo()}catch(e){Tr(e,js)}}let Ea=null;function Hn(e){var t=e.length;if(t!==0){for(var a=0;a<t;){var s=e[a++];if((s.f&(Pa|aa))===0&&Ir(s)&&(Ea=new Set,Mr(s),s.deps===null&&s.first===null&&s.nodes===null&&(s.teardown===null&&s.ac===null?eo(s):s.fn=null),Ea?.size>0)){Va.clear();for(const n of Ea){if((n.f&(Pa|aa))!==0)continue;const i=[n];let o=n.parent;for(;o!==null;)Ea.has(o)&&(Ea.delete(o),i.push(o)),o=o.parent;for(let l=i.length-1;l>=0;l--){const v=i[l];(v.f&(Pa|aa))===0&&Mr(v)}}Ea.clear()}}Ea=null}}function Di(e,t,a,s){if(!a.has(e)&&(a.add(e),e.reactions!==null))for(const n of e.reactions){const i=n.f;(i&Lt)!==0?Di(n,t,a,s):(i&(xn|wa))!==0&&(i&Vt)===0&&Oi(n,t,s)&&(Pt(n,Vt),cr(n))}}function Oi(e,t,a){const s=a.get(e);if(s!==void 0)return s;if(e.deps!==null)for(const n of e.deps){if(t.includes(n))return!0;if((n.f&Lt)!==0&&Oi(n,t,a))return a.set(n,!0),!0}return a.set(e,!1),!1}function cr(e){for(var t=js=e;t.parent!==null;){t=t.parent;var a=t.f;if(tn&&t===lt&&(a&wa)!==0&&(a&Ci)===0)return;if((a&(ur|ja))!==0){if((a&Ct)===0)return;t.f^=Ct}}sa.push(t)}function _l(e){let t=0,a=dr(0),s;return()=>{Xr()&&(r(a),Rr(()=>(t===0&&(s=m(()=>e(()=>Ur(a)))),t+=1,()=>{fr(()=>{t-=1,t===0&&(s?.(),s=void 0,Ur(a))})})))}}var ml=or|Lr|Rs;function bl(e,t,a){new yl(e,t,a)}class yl{parent;#e=!1;#t;#a=null;#r;#l;#n;#s=null;#i=null;#o=null;#c=null;#d=null;#v=0;#u=0;#h=!1;#f=null;#b=_l(()=>(this.#f=dr(this.#v),()=>{this.#f=null}));constructor(t,a,s){this.#t=t,this.#r=a,this.#l=s,this.parent=lt.b,this.#e=!!this.#r.pending,this.#n=Tn(()=>{lt.b=this;{var n=this.#_();try{this.#s=na(()=>s(n))}catch(i){this.error(i)}this.#u>0?this.#g():this.#e=!1}return()=>{this.#d?.remove()}},ml)}#y(){try{this.#s=na(()=>this.#l(this.#t))}catch(t){this.error(t)}this.#e=!1}#w(){const t=this.#r.pending;t&&(this.#i=na(()=>t(this.#t)),ga.enqueue(()=>{var a=this.#_();this.#s=this.#p(()=>(ga.ensure(),na(()=>this.#l(a)))),this.#u>0?this.#g():(tr(this.#i,()=>{this.#i=null}),this.#e=!1)}))}#_(){var t=this.#t;return this.#e&&(this.#d=za(),this.#t.before(this.#d),t=this.#d),t}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#r.pending}#p(t){var a=lt,s=it,n=_t;ya(this.#n),Ut(this.#n),$r(this.#n.ctx);try{return t()}catch(i){return ji(i),null}finally{ya(a),Ut(s),$r(n)}}#g(){const t=this.#r.pending;this.#s!==null&&(this.#c=document.createDocumentFragment(),this.#c.append(this.#d),ro(this.#s,this.#c)),this.#i===null&&(this.#i=na(()=>t(this.#t)))}#m(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#m(t);return}this.#u+=t,this.#u===0&&(this.#e=!1,this.#i&&tr(this.#i,()=>{this.#i=null}),this.#c&&(this.#t.before(this.#c),this.#c=null))}update_pending_count(t){this.#m(t),this.#v+=t,this.#f&&vr(this.#f,this.#v)}get_effect_pending(){return this.#b(),r(this.#f)}error(t){var a=this.#r.onerror;let s=this.#r.failed;if(this.#h||!a&&!s)throw t;this.#s&&(Ht(this.#s),this.#s=null),this.#i&&(Ht(this.#i),this.#i=null),this.#o&&(Ht(this.#o),this.#o=null);var n=!1,i=!1;const o=()=>{if(n){vl();return}n=!0,i&&Qo(),ga.ensure(),this.#v=0,this.#o!==null&&tr(this.#o,()=>{this.#o=null}),this.#e=this.has_pending_snippet(),this.#s=this.#p(()=>(this.#h=!1,na(()=>this.#l(this.#t)))),this.#u>0?this.#g():this.#e=!1};var l=it;try{Ut(null),i=!0,a?.(t,o),i=!1}catch(v){Tr(v,this.#n&&this.#n.parent)}finally{Ut(l)}s&&fr(()=>{this.#o=this.#p(()=>{ga.ensure(),this.#h=!0;try{return na(()=>{s(this.#t,()=>t,()=>o)})}catch(v){return Tr(v,this.#n.parent),null}finally{this.#h=!1}})})}}function wl(e,t,a,s){const n=ss()?ns:ht;if(a.length===0&&e.length===0){s(t.map(n));return}var i=ot,o=lt,l=kl();function v(){Promise.all(a.map(d=>xl(d))).then(d=>{l();try{s([...t.map(n),...d])}catch(u){(o.f&Pa)===0&&Tr(u,o)}i?.deactivate(),ws()}).catch(d=>{Tr(d,o)})}e.length>0?Promise.all(e).then(()=>{l();try{return v()}finally{i?.deactivate(),ws()}}):v()}function kl(){var e=lt,t=it,a=_t,s=ot;return function(i=!0){ya(e),Ut(t),$r(a),i&&s?.activate()}}function ws(){ya(null),Ut(null),$r(null)}function ns(e){var t=Lt|Vt,a=it!==null&&(it.f&Lt)!==0?it:null;return lt!==null&&(lt.f|=Lr),{ctx:_t,deps:null,effects:null,equals:zi,f:t,fn:e,reactions:null,rv:0,v:It,wv:0,parent:a??lt,ac:null}}function xl(e,t){let a=lt;a===null&&Oo();var s=a.b,n=void 0,i=dr(It),o=!it,l=new Map;return Rl(()=>{var v=Ai();n=v.promise;try{Promise.resolve(e()).then(v.resolve,v.reject).then(()=>{d===ot&&d.committed&&d.deactivate(),ws()})}catch(f){v.reject(f),ws()}var d=ot;if(o){var u=!s.is_pending();s.update_pending_count(1),d.increment(u),l.get(d)?.reject(wr),l.delete(d),l.set(d,v)}const h=(f,p=void 0)=>{if(d.activate(),p)p!==wr&&(i.f|=Ha,vr(i,p));else{(i.f&Ha)!==0&&(i.f^=Ha),vr(i,f);for(const[E,$]of l){if(l.delete(E),E===d)break;$.reject(wr)}}o&&(s.update_pending_count(-1),d.decrement(u))};v.promise.then(h,f=>h(null,f||"unknown"))}),os(()=>{for(const v of l.values())v.reject(wr)}),new Promise(v=>{function d(u){function h(){u===n?v(i):d(n)}u.then(h,h)}d(n)})}function Nr(e){const t=ns(e);return so(t),t}function ht(e){const t=ns(e);return t.equals=Ri,t}function Fi(e){var t=e.effects;if(t!==null){e.effects=null;for(var a=0;a<t.length;a+=1)Ht(t[a])}}function Sl(e){for(var t=e.parent;t!==null;){if((t.f&Lt)===0)return(t.f&Pa)===0?t:null;t=t.parent}return null}function $n(e){var t,a=lt;ya(Sl(e));try{e.f&=~lr,Fi(e),t=lo(e)}finally{ya(a)}return t}function qi(e){var t=$n(e);if(e.equals(t)||(ot?.is_fork||(e.v=t),e.wv=io()),!pr)if(ia!==null)(Xr()||ot?.is_fork)&&ia.set(e,t);else{var a=(e.f&va)===0?ua:Ct;Pt(e,a)}}let an=new Set;const Va=new Map;let Bi=!1;function dr(e,t){var a={f:0,v:e,reactions:null,equals:zi,rv:0,wv:0};return a}function Oa(e,t){const a=dr(e);return so(a),a}function T(e,t=!1,a=!0){const s=dr(e);return t||(s.equals=Ri),zr&&a&&_t!==null&&_t.l!==null&&(_t.l.s??=[]).push(s),s}function ds(e,t){return _(e,m(()=>r(e))),t}function _(e,t,a=!1){it!==null&&(!_a||(it.f&Un)!==0)&&ss()&&(it.f&(Lt|wa|xn|Un))!==0&&!Ra?.includes(e)&&Wo();let s=a?kr(t):t;return vr(e,s)}function vr(e,t){if(!e.equals(t)){var a=e.v;pr?Va.set(e,t):Va.set(e,a),e.v=t;var s=ga.ensure();s.capture(e,a),(e.f&Lt)!==0&&((e.f&Vt)!==0&&$n(e),Pt(e,(e.f&va)!==0?Ct:ua)),e.wv=io(),Yi(e,Vt),ss()&&lt!==null&&(lt.f&Ct)!==0&&(lt.f&(ja|ur))===0&&(ra===null?Dl([e]):ra.push(e)),!s.is_fork&&an.size>0&&!Bi&&El()}return t}function El(){Bi=!1;var e=ar;ks(!0);const t=Array.from(an);try{for(const a of t)(a.f&Ct)!==0&&Pt(a,ua),Ir(a)&&Mr(a)}finally{ks(e)}an.clear()}function Ur(e){_(e,e.v+1)}function Yi(e,t){var a=e.reactions;if(a!==null)for(var s=ss(),n=a.length,i=0;i<n;i++){var o=a[i],l=o.f;if(!(!s&&o===lt)){var v=(l&Vt)===0;if(v&&Pt(o,t),(l&Lt)!==0){var d=o;ia?.delete(d),(l&lr)===0&&(l&va&&(o.f|=lr),Yi(d,ua))}else v&&((l&wa)!==0&&Ea!==null&&Ea.add(o),cr(o))}}}function kr(e){if(typeof e!="object"||e===null||La in e)return e;const t=wn(e);if(t!==Lo&&t!==zo)return e;var a=new Map,s=rs(e),n=Oa(0),i=rr,o=l=>{if(rr===i)return l();var v=it,d=rr;Ut(null),Xn(i);var u=l();return Ut(v),Xn(d),u};return s&&a.set("length",Oa(e.length)),new Proxy(e,{defineProperty(l,v,d){(!("value"in d)||d.configurable===!1||d.enumerable===!1||d.writable===!1)&&Ho();var u=a.get(v);return u===void 0?u=o(()=>{var h=Oa(d.value);return a.set(v,h),h}):_(u,d.value,!0),!0},deleteProperty(l,v){var d=a.get(v);if(d===void 0){if(v in l){const u=o(()=>Oa(It));a.set(v,u),Ur(n)}}else _(d,It),Ur(n);return!0},get(l,v,d){if(v===La)return e;var u=a.get(v),h=v in l;if(u===void 0&&(!h||Sr(l,v)?.writable)&&(u=o(()=>{var p=kr(h?l[v]:It),E=Oa(p);return E}),a.set(v,u)),u!==void 0){var f=r(u);return f===It?void 0:f}return Reflect.get(l,v,d)},getOwnPropertyDescriptor(l,v){var d=Reflect.getOwnPropertyDescriptor(l,v);if(d&&"value"in d){var u=a.get(v);u&&(d.value=r(u))}else if(d===void 0){var h=a.get(v),f=h?.v;if(h!==void 0&&f!==It)return{enumerable:!0,configurable:!0,value:f,writable:!0}}return d},has(l,v){if(v===La)return!0;var d=a.get(v),u=d!==void 0&&d.v!==It||Reflect.has(l,v);if(d!==void 0||lt!==null&&(!u||Sr(l,v)?.writable)){d===void 0&&(d=o(()=>{var f=u?kr(l[v]):It,p=Oa(f);return p}),a.set(v,d));var h=r(d);if(h===It)return!1}return u},set(l,v,d,u){var h=a.get(v),f=v in l;if(s&&v==="length")for(var p=d;p<h.v;p+=1){var E=a.get(p+"");E!==void 0?_(E,It):p in l&&(E=o(()=>Oa(It)),a.set(p+"",E))}if(h===void 0)(!f||Sr(l,v)?.writable)&&(h=o(()=>Oa(void 0)),_(h,kr(d)),a.set(v,h));else{f=h.v!==It;var $=o(()=>kr(d));_(h,$)}var w=Reflect.getOwnPropertyDescriptor(l,v);if(w?.set&&w.set.call(u,d),!f){if(s&&typeof v=="string"){var x=a.get("length"),U=Number(v);Number.isInteger(U)&&U>=x.v&&_(x,U+1)}Ur(n)}return!0},ownKeys(l){r(n);var v=Reflect.ownKeys(l).filter(h=>{var f=a.get(h);return f===void 0||f.v!==It});for(var[d,u]of a)u.v!==It&&!(d in l)&&v.push(d);return v},setPrototypeOf(){Vo()}})}function Vn(e){try{if(e!==null&&typeof e=="object"&&La in e)return e[La]}catch{}return e}function $l(e,t){return Object.is(Vn(e),Vn(t))}var qa,Ui,Hi,Vi;function Tl(){if(qa===void 0){qa=window,Ui=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,a=Text.prototype;Hi=Sr(t,"firstChild").get,Vi=Sr(t,"nextSibling").get,Yn(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Yn(a)&&(a.__t=void 0)}}function za(e=""){return document.createTextNode(e)}function Ba(e){return Hi.call(e)}function is(e){return Vi.call(e)}function c(e,t){return Ba(e)}function je(e,t=!1){{var a=Ba(e);return a instanceof Comment&&a.data===""?is(a):a}}function g(e,t=1,a=!1){let s=e;for(;t--;)s=is(s);return s}function Ml(e){e.textContent=""}function Wi(){return!1}let Wn=!1;function Al(){Wn||(Wn=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function Cl(e,t,a,s=!0){s&&a();for(var n of t)e.addEventListener(n,a);os(()=>{for(var i of t)e.removeEventListener(i,a)})}function hr(e){var t=it,a=lt;Ut(null),ya(null);try{return e()}finally{Ut(t),ya(a)}}function Qi(e,t,a,s=a){e.addEventListener(t,()=>hr(a));const n=e.__on_r;n?e.__on_r=()=>{n(),s(!0)}:e.__on_r=()=>s(!0),Al()}function Xi(e){lt===null&&(it===null&&Bo(),qo()),pr&&Fo()}function Pl(e,t){var a=t.last;a===null?t.last=t.first=e:(a.next=e,e.prev=a,t.last=e)}function ka(e,t,a){var s=lt;s!==null&&(s.f&aa)!==0&&(e|=aa);var n={ctx:_t,deps:null,nodes:null,f:e|Vt|va,first:null,fn:t,last:null,next:null,parent:s,b:s&&s.b,prev:null,teardown:null,wv:0,ac:null};if(a)try{Mr(n),n.f|=Is}catch(l){throw Ht(n),l}else t!==null&&cr(n);var i=n;if(a&&i.deps===null&&i.teardown===null&&i.nodes===null&&i.first===i.last&&(i.f&Lr)===0&&(i=i.first,(e&wa)!==0&&(e&or)!==0&&i!==null&&(i.f|=or)),i!==null&&(i.parent=s,s!==null&&Pl(i,s),it!==null&&(it.f&Lt)!==0&&(e&ur)===0)){var o=it;(o.effects??=[]).push(i)}return n}function Xr(){return it!==null&&!_a}function os(e){const t=ka(zs,null,!1);return Pt(t,Ct),t.teardown=e,t}function rn(e){Xi();var t=lt.f,a=!it&&(t&ja)!==0&&(t&Is)===0;if(a){var s=_t;(s.e??=[]).push(e)}else return Ki(e)}function Ki(e){return ka(kn|Pi,e,!1)}function Ll(e){return Xi(),ka(zs|Pi,e,!0)}function zl(e){ga.ensure();const t=ka(ur|Lr,e,!0);return(a={})=>new Promise(s=>{a.outro?tr(t,()=>{Ht(t),s(void 0)}):(Ht(t),s(void 0))})}function Yt(e){return ka(kn,e,!1)}function te(e,t){var a=_t,s={effect:null,ran:!1,deps:e};a.l.$.push(s),s.effect=Rr(()=>{e(),!s.ran&&(s.ran=!0,m(t))})}function Xt(){var e=_t;Rr(()=>{for(var t of e.l.$){t.deps();var a=t.effect;(a.f&Ct)!==0&&Pt(a,ua),Ir(a)&&Mr(a),t.ran=!1}})}function Rl(e){return ka(xn|Lr,e,!0)}function Rr(e,t=0){return ka(zs|t,e,!0)}function se(e,t=[],a=[],s=[]){wl(s,t,a,n=>{ka(zs,()=>e(...n.map(r)),!0)})}function Tn(e,t=0){var a=ka(wa|t,e,!0);return a}function na(e){return ka(ja|Lr,e,!0)}function Gi(e){var t=e.teardown;if(t!==null){const a=pr,s=it;Qn(!0),Ut(null);try{t.call(null)}finally{Qn(a),Ut(s)}}}function Zi(e,t=!1){var a=e.first;for(e.first=e.last=null;a!==null;){const n=a.ac;n!==null&&hr(()=>{n.abort(wr)});var s=a.next;(a.f&ur)!==0?a.parent=null:Ht(a,t),a=s}}function Il(e){for(var t=e.first;t!==null;){var a=t.next;(t.f&ja)===0&&Ht(t),t=a}}function Ht(e,t=!0){var a=!1;(t||(e.f&Ci)!==0)&&e.nodes!==null&&e.nodes.end!==null&&(Ji(e.nodes.start,e.nodes.end),a=!0),Zi(e,t&&!a),xs(e,0),Pt(e,Pa);var s=e.nodes&&e.nodes.t;if(s!==null)for(const i of s)i.stop();Gi(e);var n=e.parent;n!==null&&n.first!==null&&eo(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function Ji(e,t){for(;e!==null;){var a=e===t?null:is(e);e.remove(),e=a}}function eo(e){var t=e.parent,a=e.prev,s=e.next;a!==null&&(a.next=s),s!==null&&(s.prev=a),t!==null&&(t.first===e&&(t.first=s),t.last===e&&(t.last=a))}function tr(e,t,a=!0){var s=[];to(e,s,!0);var n=()=>{a&&Ht(e),t&&t()},i=s.length;if(i>0){var o=()=>--i||n();for(var l of s)l.out(o)}else n()}function to(e,t,a){if((e.f&aa)===0){e.f^=aa;var s=e.nodes&&e.nodes.t;if(s!==null)for(const l of s)(l.is_global||a)&&t.push(l);for(var n=e.first;n!==null;){var i=n.next,o=(n.f&or)!==0||(n.f&ja)!==0&&(e.f&wa)!==0;to(n,t,o?a:!1),n=i}}}function Mn(e){ao(e,!0)}function ao(e,t){if((e.f&aa)!==0){e.f^=aa,(e.f&Ct)===0&&(Pt(e,Vt),cr(e));for(var a=e.first;a!==null;){var s=a.next,n=(a.f&or)!==0||(a.f&ja)!==0;ao(a,n?t:!1),a=s}var i=e.nodes&&e.nodes.t;if(i!==null)for(const o of i)(o.is_global||t)&&o.in()}}function ro(e,t){if(e.nodes)for(var a=e.nodes.start,s=e.nodes.end;a!==null;){var n=a===s?null:is(a);t.append(a),a=n}}let yr=null;function jl(e){var t=yr;try{if(yr=new Set,m(e),t!==null)for(var a of yr)t.add(a);return yr}finally{yr=t}}function Nl(e){for(var t of jl(e))vr(t,t.v)}let ar=!1;function ks(e){ar=e}let pr=!1;function Qn(e){pr=e}let it=null,_a=!1;function Ut(e){it=e}let lt=null;function ya(e){lt=e}let Ra=null;function so(e){it!==null&&(Ra===null?Ra=[e]:Ra.push(e))}let Nt=null,Gt=0,ra=null;function Dl(e){ra=e}let no=1,Kr=0,rr=Kr;function Xn(e){rr=e}function io(){return++no}function Ir(e){var t=e.f;if((t&Vt)!==0)return!0;if(t&Lt&&(e.f&=~lr),(t&ua)!==0){var a=e.deps;if(a!==null)for(var s=a.length,n=0;n<s;n++){var i=a[n];if(Ir(i)&&qi(i),i.wv>e.wv)return!0}(t&va)!==0&&ia===null&&Pt(e,Ct)}return!1}function oo(e,t,a=!0){var s=e.reactions;if(s!==null&&!Ra?.includes(e))for(var n=0;n<s.length;n++){var i=s[n];(i.f&Lt)!==0?oo(i,t,!1):t===i&&(a?Pt(i,Vt):(i.f&Ct)!==0&&Pt(i,ua),cr(i))}}function lo(e){var t=Nt,a=Gt,s=ra,n=it,i=Ra,o=_t,l=_a,v=rr,d=e.f;Nt=null,Gt=0,ra=null,it=(d&(ja|ur))===0?e:null,Ra=null,$r(e.ctx),_a=!1,rr=++Kr,e.ac!==null&&(hr(()=>{e.ac.abort(wr)}),e.ac=null);try{e.f|=en;var u=e.fn,h=u(),f=e.deps;if(Nt!==null){var p;if(xs(e,Gt),f!==null&&Gt>0)for(f.length=Gt+Nt.length,p=0;p<Nt.length;p++)f[Gt+p]=Nt[p];else e.deps=f=Nt;if(Xr()&&(e.f&va)!==0)for(p=Gt;p<f.length;p++)(f[p].reactions??=[]).push(e)}else f!==null&&Gt<f.length&&(xs(e,Gt),f.length=Gt);if(ss()&&ra!==null&&!_a&&f!==null&&(e.f&(Lt|ua|Vt))===0)for(p=0;p<ra.length;p++)oo(ra[p],e);return n!==null&&n!==e&&(Kr++,ra!==null&&(s===null?s=ra:s.push(...ra))),(e.f&Ha)!==0&&(e.f^=Ha),h}catch(E){return ji(E)}finally{e.f^=en,Nt=t,Gt=a,ra=s,it=n,Ra=i,$r(o),_a=l,rr=v}}function Ol(e,t){let a=t.reactions;if(a!==null){var s=Po.call(a,e);if(s!==-1){var n=a.length-1;n===0?a=t.reactions=null:(a[s]=a[n],a.pop())}}a===null&&(t.f&Lt)!==0&&(Nt===null||!Nt.includes(t))&&(Pt(t,ua),(t.f&va)!==0&&(t.f^=va,t.f&=~lr),Fi(t),xs(t,0))}function xs(e,t){var a=e.deps;if(a!==null)for(var s=t;s<a.length;s++)Ol(e,a[s])}function Mr(e){var t=e.f;if((t&Pa)===0){Pt(e,Ct);var a=lt,s=ar;lt=e,ar=!0;try{(t&(wa|jo))!==0?Il(e):Zi(e),Gi(e);var n=lo(e);e.teardown=typeof n=="function"?n:null,e.wv=no;var i;Js&&ul&&(e.f&Vt)!==0&&e.deps}finally{ar=s,lt=a}}}async function Er(){await Promise.resolve(),pl()}function r(e){var t=e.f,a=(t&Lt)!==0;if(yr?.add(e),it!==null&&!_a){var s=lt!==null&&(lt.f&Pa)!==0;if(!s&&!Ra?.includes(e)){var n=it.deps;if((it.f&en)!==0)e.rv<Kr&&(e.rv=Kr,Nt===null&&n!==null&&n[Gt]===e?Gt++:Nt===null?Nt=[e]:Nt.includes(e)||Nt.push(e));else{(it.deps??=[]).push(e);var i=e.reactions;i===null?e.reactions=[it]:i.includes(it)||i.push(it)}}}if(pr){if(Va.has(e))return Va.get(e);if(a){var o=e,l=o.v;return((o.f&Ct)===0&&o.reactions!==null||vo(o))&&(l=$n(o)),Va.set(o,l),l}}else a&&(!ia?.has(e)||ot?.is_fork&&!Xr())&&(o=e,Ir(o)&&qi(o),ar&&Xr()&&(o.f&va)===0&&co(o));if(ia?.has(e))return ia.get(e);if((e.f&Ha)!==0)throw e.v;return e.v}function co(e){if(e.deps!==null){e.f^=va;for(const t of e.deps)(t.reactions??=[]).push(e),(t.f&Lt)!==0&&(t.f&va)===0&&co(t)}}function vo(e){if(e.v===It)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(Va.has(t)||(t.f&Lt)!==0&&vo(t))return!0;return!1}function m(e){var t=_a;try{return _a=!0,e()}finally{_a=t}}const Fl=-7169;function Pt(e,t){e.f=e.f&Fl|t}function I(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(La in e)sn(e);else if(!Array.isArray(e))for(let t in e){const a=e[t];typeof a=="object"&&a&&La in a&&sn(a)}}}function sn(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let s in e)try{sn(e[s],t)}catch{}const a=wn(e);if(a!==Object.prototype&&a!==Array.prototype&&a!==Map.prototype&&a!==Set.prototype&&a!==Date.prototype){const s=Mi(a);for(let n in s){const i=s[n].get;if(i)try{i.call(e)}catch{}}}}}const ql=["touchstart","touchmove"];function Bl(e){return ql.includes(e)}const Yl=new Set,Kn=new Set;function Ul(e,t,a,s={}){function n(i){if(s.capture||Or.call(t,i),!i.cancelBubble)return hr(()=>a?.call(this,i))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?fr(()=>{t.addEventListener(e,n,s)}):t.addEventListener(e,n,s),n}function A(e,t,a,s,n){var i={capture:s,passive:n},o=Ul(e,t,a,i);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&os(()=>{t.removeEventListener(e,o,i)})}let Gn=null;function Or(e){var t=this,a=t.ownerDocument,s=e.type,n=e.composedPath?.()||[],i=n[0]||e.target;Gn=e;var o=0,l=Gn===e&&e.__root;if(l){var v=n.indexOf(l);if(v!==-1&&(t===document||t===window)){e.__root=t;return}var d=n.indexOf(t);if(d===-1)return;v<=d&&(o=v)}if(i=n[o]||e.target,i!==t){Ti(e,"currentTarget",{configurable:!0,get(){return i||a}});var u=it,h=lt;Ut(null),ya(null);try{for(var f,p=[];i!==null;){var E=i.assignedSlot||i.parentNode||i.host||null;try{var $=i["__"+s];$!=null&&(!i.disabled||e.target===i)&&$.call(i,e)}catch(w){f?p.push(w):f=w}if(e.cancelBubble||E===t||E===null)break;i=E}if(f){for(let w of p)queueMicrotask(()=>{throw w});throw f}}finally{e.__root=t,delete e.currentTarget,Ut(u),ya(h)}}}function uo(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function Gr(e,t){var a=lt;a.nodes===null&&(a.nodes={start:e,end:t,a:null,t:null})}function k(e,t){var a=(t&ol)!==0,s=(t&ll)!==0,n,i=!e.startsWith("<!>");return()=>{n===void 0&&(n=uo(i?e:"<!>"+e),a||(n=Ba(n)));var o=s||Ui?document.importNode(n,!0):n.cloneNode(!0);if(a){var l=Ba(o),v=o.lastChild;Gr(l,v)}else Gr(o,o);return o}}function Sa(e=""){{var t=za(e+"");return Gr(t,t),t}}function nt(){var e=document.createDocumentFragment(),t=document.createComment(""),a=za();return e.append(t,a),Gr(t,a),e}function b(e,t){e!==null&&e.before(t)}let nn=!0;function re(e,t){var a=t==null?"":typeof t=="object"?t+"":t;a!==(e.__t??=e.nodeValue)&&(e.__t=a,e.nodeValue=a+"")}function Hl(e,t){return Vl(e,t)}const gr=new Map;function Vl(e,{target:t,anchor:a,props:s={},events:n,context:i,intro:o=!0}){Tl();var l=new Set,v=h=>{for(var f=0;f<h.length;f++){var p=h[f];if(!l.has(p)){l.add(p);var E=Bl(p);t.addEventListener(p,Or,{passive:E});var $=gr.get(p);$===void 0?(document.addEventListener(p,Or,{passive:E}),gr.set(p,1)):gr.set(p,$+1)}}};v(Ls(Yl)),Kn.add(v);var d=void 0,u=zl(()=>{var h=a??t.appendChild(za());return bl(h,{pending:()=>{}},f=>{if(i){Tt({});var p=_t;p.c=i}n&&(s.$$events=n),nn=o,d=e(f,s)||{},nn=!0,i&&Mt()}),()=>{for(var f of l){t.removeEventListener(f,Or);var p=gr.get(f);--p===0?(document.removeEventListener(f,Or),gr.delete(f)):gr.set(f,p)}Kn.delete(v),h!==a&&h.parentNode?.removeChild(h)}});return Wl.set(d,u),d}let Wl=new WeakMap;class Ql{anchor;#e=new Map;#t=new Map;#a=new Map;#r=new Set;#l=!0;constructor(t,a=!0){this.anchor=t,this.#l=a}#n=()=>{var t=ot;if(this.#e.has(t)){var a=this.#e.get(t),s=this.#t.get(a);if(s)Mn(s),this.#r.delete(a);else{var n=this.#a.get(a);n&&(this.#t.set(a,n.effect),this.#a.delete(a),n.fragment.lastChild.remove(),this.anchor.before(n.fragment),s=n.effect)}for(const[i,o]of this.#e){if(this.#e.delete(i),i===t)break;const l=this.#a.get(o);l&&(Ht(l.effect),this.#a.delete(o))}for(const[i,o]of this.#t){if(i===a||this.#r.has(i))continue;const l=()=>{if(Array.from(this.#e.values()).includes(i)){var d=document.createDocumentFragment();ro(o,d),d.append(za()),this.#a.set(i,{effect:o,fragment:d})}else Ht(o);this.#r.delete(i),this.#t.delete(i)};this.#l||!s?(this.#r.add(i),tr(o,l,!1)):l()}}};#s=t=>{this.#e.delete(t);const a=Array.from(this.#e.values());for(const[s,n]of this.#a)a.includes(s)||(Ht(n.effect),this.#a.delete(s))};ensure(t,a){var s=ot,n=Wi();if(a&&!this.#t.has(t)&&!this.#a.has(t))if(n){var i=document.createDocumentFragment(),o=za();i.append(o),this.#a.set(t,{effect:na(()=>a(o)),fragment:i})}else this.#t.set(t,na(()=>a(this.anchor)));if(this.#e.set(s,t),n){for(const[l,v]of this.#t)l===t?s.skipped_effects.delete(v):s.skipped_effects.add(v);for(const[l,v]of this.#a)l===t?s.skipped_effects.delete(v.effect):s.skipped_effects.add(v.effect);s.oncommit(this.#n),s.ondiscard(this.#s)}else this.#n()}}function C(e,t,a=!1){var s=new Ql(e),n=a?or:0;function i(o,l){s.ensure(o,l)}Tn(()=>{var o=!1;t((l,v=!0)=>{o=!0,i(v,l)}),o||i(!1,null)},n)}function Bt(e,t){return t}function Xl(e,t,a){for(var s=[],n=t.length,i,o=t.length,l=0;l<n;l++){let h=t[l];tr(h,()=>{if(i){if(i.pending.delete(h),i.done.add(h),i.pending.size===0){var f=e.outrogroups;on(Ls(i.done)),f.delete(i),f.size===0&&(e.outrogroups=null)}}else o-=1},!1)}if(o===0){var v=s.length===0&&a!==null;if(v){var d=a,u=d.parentNode;Ml(u),u.append(d),e.items.clear()}on(t,!v)}else i={pending:new Set(t),done:new Set},(e.outrogroups??=new Set).add(i)}function on(e,t=!0){for(var a=0;a<e.length;a++)Ht(e[a],t)}var Zn;function wt(e,t,a,s,n,i=null){var o=e,l=new Map,v=(t&Li)!==0;if(v){var d=e;o=d.appendChild(za())}var u=null,h=ht(()=>{var x=a();return rs(x)?x:x==null?[]:Ls(x)}),f,p=!0;function E(){w.fallback=u,Kl(w,f,o,t,s),u!==null&&(f.length===0?(u.f&Ta)===0?Mn(u):(u.f^=Ta,Fr(u,null,o)):tr(u,()=>{u=null}))}var $=Tn(()=>{f=r(h);for(var x=f.length,U=new Set,ne=ot,de=Wi(),H=0;H<x;H+=1){var ye=f[H],le=s(ye,H),Q=p?null:l.get(le);Q?(Q.v&&vr(Q.v,ye),Q.i&&vr(Q.i,H),de&&ne.skipped_effects.delete(Q.e)):(Q=Gl(l,p?o:Zn??=za(),ye,le,H,n,t,a),p||(Q.e.f|=Ta),l.set(le,Q)),U.add(le)}if(x===0&&i&&!u&&(p?u=na(()=>i(o)):(u=na(()=>i(Zn??=za())),u.f|=Ta)),!p)if(de){for(const[Le,Oe]of l)U.has(Le)||ne.skipped_effects.add(Oe.e);ne.oncommit(E),ne.ondiscard(()=>{})}else E();r(h)}),w={effect:$,items:l,outrogroups:null,fallback:u};p=!1}function Kl(e,t,a,s,n){var i=(s&Go)!==0,o=t.length,l=e.items,v=e.effect.first,d,u=null,h,f=[],p=[],E,$,w,x;if(i)for(x=0;x<o;x+=1)E=t[x],$=n(E,x),w=l.get($).e,(w.f&Ta)===0&&(w.nodes?.a?.measure(),(h??=new Set).add(w));for(x=0;x<o;x+=1){if(E=t[x],$=n(E,x),w=l.get($).e,e.outrogroups!==null)for(const Oe of e.outrogroups)Oe.pending.delete(w),Oe.done.delete(w);if((w.f&Ta)!==0)if(w.f^=Ta,w===v)Fr(w,null,a);else{var U=u?u.next:v;w===e.effect.last&&(e.effect.last=w.prev),w.prev&&(w.prev.next=w.next),w.next&&(w.next.prev=w.prev),Fa(e,u,w),Fa(e,w,U),Fr(w,U,a),u=w,f=[],p=[],v=u.next;continue}if((w.f&aa)!==0&&(Mn(w),i&&(w.nodes?.a?.unfix(),(h??=new Set).delete(w))),w!==v){if(d!==void 0&&d.has(w)){if(f.length<p.length){var ne=p[0],de;u=ne.prev;var H=f[0],ye=f[f.length-1];for(de=0;de<f.length;de+=1)Fr(f[de],ne,a);for(de=0;de<p.length;de+=1)d.delete(p[de]);Fa(e,H.prev,ye.next),Fa(e,u,H),Fa(e,ye,ne),v=ne,u=ye,x-=1,f=[],p=[]}else d.delete(w),Fr(w,v,a),Fa(e,w.prev,w.next),Fa(e,w,u===null?e.effect.first:u.next),Fa(e,u,w),u=w;continue}for(f=[],p=[];v!==null&&v!==w;)(d??=new Set).add(v),p.push(v),v=v.next;if(v===null)continue}(w.f&Ta)===0&&f.push(w),u=w,v=w.next}if(e.outrogroups!==null){for(const Oe of e.outrogroups)Oe.pending.size===0&&(on(Ls(Oe.done)),e.outrogroups?.delete(Oe));e.outrogroups.size===0&&(e.outrogroups=null)}if(v!==null||d!==void 0){var le=[];if(d!==void 0)for(w of d)(w.f&aa)===0&&le.push(w);for(;v!==null;)(v.f&aa)===0&&v!==e.fallback&&le.push(v),v=v.next;var Q=le.length;if(Q>0){var Le=(s&Li)!==0&&o===0?a:null;if(i){for(x=0;x<Q;x+=1)le[x].nodes?.a?.measure();for(x=0;x<Q;x+=1)le[x].nodes?.a?.fix()}Xl(e,le,Le)}}i&&fr(()=>{if(h!==void 0)for(w of h)w.nodes?.a?.apply()})}function Gl(e,t,a,s,n,i,o,l){var v=(o&Xo)!==0?(o&Zo)===0?T(a,!1,!1):dr(a):null,d=(o&Ko)!==0?dr(n):null;return{v,i:d,e:na(()=>(i(t,v??a,d??n,l),()=>{e.delete(s)}))}}function Fr(e,t,a){if(e.nodes)for(var s=e.nodes.start,n=e.nodes.end,i=t&&(t.f&Ta)===0?t.nodes.start:a;s!==null;){var o=is(s);if(i.before(s),s===n)return;s=o}}function Fa(e,t,a){t===null?e.effect.first=a:t.next=a,a===null?e.effect.last=t:a.prev=t}function Z(e,t,a=!1,s=!1,n=!1){var i=e,o="";se(()=>{var l=lt;if(o!==(o=t()??"")&&(l.nodes!==null&&(Ji(l.nodes.start,l.nodes.end),l.nodes=null),o!=="")){var v=o+"";a?v=`<svg>${v}</svg>`:s&&(v=`<math>${v}</math>`);var d=uo(v);if((a||s)&&(d=Ba(d)),Gr(Ba(d),d.lastChild),a||s)for(;Ba(d);)i.before(Ba(d));else i.before(d)}})}function qr(e,t,a,s,n){var i=t.$$slots?.[a],o=!1;i===!0&&(i=t[a==="default"?"children":a],o=!0),i===void 0||i(e,o?()=>s:s)}const Zl=()=>performance.now(),$a={tick:e=>requestAnimationFrame(e),now:()=>Zl(),tasks:new Set};function fo(){const e=$a.now();$a.tasks.forEach(t=>{t.c(e)||($a.tasks.delete(t),t.f())}),$a.tasks.size!==0&&$a.tick(fo)}function Jl(e){let t;return $a.tasks.size===0&&$a.tick(fo),{promise:new Promise(a=>{$a.tasks.add(t={c:e,f:a})}),abort(){$a.tasks.delete(t)}}}function vs(e,t){hr(()=>{e.dispatchEvent(new CustomEvent(t))})}function ec(e){if(e==="float")return"cssFloat";if(e==="offset")return"cssOffset";if(e.startsWith("--"))return e;const t=e.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(a=>a[0].toUpperCase()+a.slice(1)).join("")}function Jn(e){const t={},a=e.split(";");for(const s of a){const[n,i]=s.split(":");if(!n||i===void 0)break;const o=ec(n.trim());t[o]=i.trim()}return t}const tc=e=>e;function gt(e,t,a,s){var n=(e&sl)!==0,i=(e&nl)!==0,o=n&&i,l=(e&il)!==0,v=o?"both":n?"in":"out",d,u=t.inert,h=t.style.overflow,f,p;function E(){return hr(()=>d??=a()(t,s?.()??{},{direction:v}))}var $={is_global:l,in(){if(t.inert=u,!n){p?.abort(),p?.reset?.();return}i||f?.abort(),vs(t,"introstart"),f=ln(t,E(),p,1,()=>{vs(t,"introend"),f?.abort(),f=d=void 0,t.style.overflow=h})},out(ne){if(!i){ne?.(),d=void 0;return}t.inert=!0,vs(t,"outrostart"),p=ln(t,E(),f,0,()=>{vs(t,"outroend"),ne?.()})},stop:()=>{f?.abort(),p?.abort()}},w=lt;if((w.nodes.t??=[]).push($),n&&nn){var x=l;if(!x){for(var U=w.parent;U&&(U.f&or)!==0;)for(;(U=U.parent)&&(U.f&wa)===0;);x=!U||(U.f&Is)!==0}x&&Yt(()=>{m(()=>$.in())})}}function ln(e,t,a,s,n){var i=s===1;if(Ro(t)){var o,l=!1;return fr(()=>{if(!l){var w=t({direction:i?"in":"out"});o=ln(e,w,a,s,n)}}),{abort:()=>{l=!0,o?.abort()},deactivate:()=>o.deactivate(),reset:()=>o.reset(),t:()=>o.t()}}if(a?.deactivate(),!t?.duration)return n(),{abort:Jt,deactivate:Jt,reset:Jt,t:()=>s};const{delay:v=0,css:d,tick:u,easing:h=tc}=t;var f=[];if(i&&a===void 0&&(u&&u(0,1),d)){var p=Jn(d(0,1));f.push(p,p)}var E=()=>1-s,$=e.animate(f,{duration:v,fill:"forwards"});return $.onfinish=()=>{$.cancel();var w=a?.t()??1-s;a?.abort();var x=s-w,U=t.duration*Math.abs(x),ne=[];if(U>0){var de=!1;if(d)for(var H=Math.ceil(U/16.666666666666668),ye=0;ye<=H;ye+=1){var le=w+x*h(ye/H),Q=Jn(d(le,1-le));ne.push(Q),de||=Q.overflow==="hidden"}de&&(e.style.overflow="hidden"),E=()=>{var Le=$.currentTime;return w+x*h(Le/U)},u&&Jl(()=>{if($.playState!=="running")return!1;var Le=E();return u(Le,1-Le),!0})}$=e.animate(ne,{duration:U,fill:"forwards"}),$.onfinish=()=>{E=()=>s,u?.(s,1-s),n()}},{abort:()=>{$&&($.cancel(),$.effect=null,$.onfinish=Jt)},deactivate:()=>{n=Jt},reset:()=>{s===0&&u?.(1,0)},t:()=>E()}}function An(e,t,a){Yt(()=>{var s=m(()=>t(e,a?.())||{});if(a&&s?.update){var n=!1,i={};Rr(()=>{var o=a();I(o),n&&En(i,o)&&(i=o,s.update(o))}),n=!0}if(s?.destroy)return()=>s.destroy()})}const ei=[...` 	
\r\fÂ \v\uFEFF`];function ac(e,t,a){var s=e==null?"":""+e;if(t&&(s=s?s+" "+t:t),a){for(var n in a)if(a[n])s=s?s+" "+n:n;else if(s.length)for(var i=n.length,o=0;(o=s.indexOf(n,o))>=0;){var l=o+i;(o===0||ei.includes(s[o-1]))&&(l===s.length||ei.includes(s[l]))?s=(o===0?"":s.substring(0,o))+s.substring(l+1):o=l}}return s===""?null:s}function ti(e,t=!1){var a=t?" !important;":";",s="";for(var n in e){var i=e[n];i!=null&&i!==""&&(s+=" "+n+": "+i+a)}return s}function Ys(e){return e[0]!=="-"||e[1]!=="-"?e.toLowerCase():e}function rc(e,t){if(t){var a="",s,n;if(Array.isArray(t)?(s=t[0],n=t[1]):s=t,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var i=!1,o=0,l=!1,v=[];s&&v.push(...Object.keys(s).map(Ys)),n&&v.push(...Object.keys(n).map(Ys));var d=0,u=-1;const $=e.length;for(var h=0;h<$;h++){var f=e[h];if(l?f==="/"&&e[h-1]==="*"&&(l=!1):i?i===f&&(i=!1):f==="/"&&e[h+1]==="*"?l=!0:f==='"'||f==="'"?i=f:f==="("?o++:f===")"&&o--,!l&&i===!1&&o===0){if(f===":"&&u===-1)u=h;else if(f===";"||h===$-1){if(u!==-1){var p=Ys(e.substring(d,u).trim());if(!v.includes(p)){f!==";"&&h++;var E=e.substring(d,h).trim();a+=" "+E+";"}}d=h+1,u=-1}}}}return s&&(a+=ti(s)),n&&(a+=ti(n,!0)),a=a.trim(),a===""?null:a}return e==null?null:String(e)}function at(e,t,a,s,n,i){var o=e.__className;if(o!==a||o===void 0){var l=ac(a,s,i);l==null?e.removeAttribute("class"):e.className=l,e.__className=a}else if(i&&n!==i)for(var v in i){var d=!!i[v];(n==null||d!==!!n[v])&&e.classList.toggle(v,d)}return i}function Us(e,t={},a,s){for(var n in a){var i=a[n];t[n]!==i&&(a[n]==null?e.style.removeProperty(n):e.style.setProperty(n,i,s))}}function ft(e,t,a,s){var n=e.__style;if(n!==t){var i=rc(t,s);i==null?e.removeAttribute("style"):e.style.cssText=i,e.__style=t}else s&&(Array.isArray(s)?(Us(e,a?.[0],s[0]),Us(e,a?.[1],s[1],"important")):Us(e,a,s));return s}function ho(e,t,a=!1){if(e.multiple){if(t==null)return;if(!rs(t))return dl();for(var s of e.options)s.selected=t.includes(Hr(s));return}for(s of e.options){var n=Hr(s);if($l(n,t)){s.selected=!0;return}}(!a||t!==void 0)&&(e.selectedIndex=-1)}function sc(e){var t=new MutationObserver(()=>{ho(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),os(()=>{t.disconnect()})}function nc(e,t,a=t){var s=new WeakSet,n=!0;Qi(e,"change",i=>{var o=i?"[selected]":":checked",l;if(e.multiple)l=[].map.call(e.querySelectorAll(o),Hr);else{var v=e.querySelector(o)??e.querySelector("option:not([disabled])");l=v&&Hr(v)}a(l),ot!==null&&s.add(ot)}),Yt(()=>{var i=t();if(e===document.activeElement){var o=Br??ot;if(s.has(o))return}if(ho(e,i,n),n&&i===void 0){var l=e.querySelector(":checked");l!==null&&(i=Hr(l),a(i))}e.__value=i,n=!1}),sc(e)}function Hr(e){return"__value"in e?e.__value:e.value}const ic=Symbol("is custom element"),oc=Symbol("is html");function po(e,t){var a=go(e);a.value===(a.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!=="PROGRESS")||(e.value=t??"")}function Wt(e,t,a,s){var n=go(e);n[t]!==(n[t]=a)&&(t==="loading"&&(e[Do]=a),a==null?e.removeAttribute(t):typeof a!="string"&&lc(e).includes(t)?e[t]=a:e.setAttribute(t,a))}function go(e){return e.__attributes??={[ic]:e.nodeName.includes("-"),[oc]:e.namespaceURI===cl}}var ai=new Map;function lc(e){var t=e.getAttribute("is")||e.nodeName,a=ai.get(t);if(a)return a;ai.set(t,a=[]);for(var s,n=e,i=Element.prototype;i!==n;){s=Mi(n);for(var o in s)s[o].set&&a.push(o);n=wn(n)}return a}function sr(e,t,a=t){var s=new WeakSet;Qi(e,"input",async n=>{var i=n?e.defaultValue:e.value;if(i=Hs(e)?Vs(i):i,a(i),ot!==null&&s.add(ot),await Er(),i!==(i=t())){var o=e.selectionStart,l=e.selectionEnd,v=e.value.length;if(e.value=i??"",l!==null){var d=e.value.length;o===l&&l===v&&d>v?(e.selectionStart=d,e.selectionEnd=d):(e.selectionStart=o,e.selectionEnd=Math.min(l,d))}}}),m(t)==null&&e.value&&(a(Hs(e)?Vs(e.value):e.value),ot!==null&&s.add(ot)),Rr(()=>{var n=t();if(e===document.activeElement){var i=Br??ot;if(s.has(i))return}Hs(e)&&n===Vs(e.value)||e.type==="date"&&!n&&!e.value||n!==e.value&&(e.value=n??"")})}function Hs(e){var t=e.type;return t==="number"||t==="range"}function Vs(e){return e===""?null:+e}class Cn{#e=new WeakMap;#t;#a;static entries=new WeakMap;constructor(t){this.#a=t}observe(t,a){var s=this.#e.get(t)||new Set;return s.add(a),this.#e.set(t,s),this.#r().observe(t,this.#a),()=>{var n=this.#e.get(t);n.delete(a),n.size===0&&(this.#e.delete(t),this.#t.unobserve(t))}}#r(){return this.#t??(this.#t=new ResizeObserver(t=>{for(var a of t){Cn.entries.set(a.target,a);for(var s of this.#e.get(a.target)||[])s(a)}}))}}var cc=new Cn({box:"border-box"});function ri(e,t,a){var s=cc.observe(e,()=>a(e[t]));Yt(()=>(m(()=>a(e[t])),s))}function si(e,t){return e===t||e?.[La]===t}function Ia(e={},t,a,s){return Yt(()=>{var n,i;return Rr(()=>{n=i,i=[],m(()=>{e!==a(...i)&&(t(e,...i),n&&si(a(...n),e)&&t(null,...n))})}),()=>{fr(()=>{i&&si(a(...i),e)&&t(null,...i)})}}),e}function ni(e,t){Cl(window,["resize"],()=>hr(()=>t(window[e])))}function ta(e){return function(...t){var a=t[0];return a.stopPropagation(),e?.apply(this,t)}}function zt(e=!1){const t=_t,a=t.l.u;if(!a)return;let s=()=>I(t.s);if(e){let n=0,i={};const o=ns(()=>{let l=!1;const v=t.s;for(const d in v)v[d]!==i[d]&&(i[d]=v[d],l=!0);return l&&n++,n});s=()=>r(o)}a.b.length&&Ll(()=>{ii(t,s),ys(a.b)}),rn(()=>{const n=m(()=>a.m.map(Io));return()=>{for(const i of n)typeof i=="function"&&i()}}),a.a.length&&rn(()=>{ii(t,s),ys(a.a)})}function ii(e,t){if(e.l.s)for(const a of e.l.s)r(a);t()}function Zr(e,t){var a=e.$$events?.[t.type],s=rs(a)?a.slice():a==null?[]:[a];for(var n of s)n.call(this,t)}function Pn(e,t,a){if(e==null)return t(void 0),a&&a(void 0),Jt;const s=m(()=>e.subscribe(t,a));return s.unsubscribe?()=>s.unsubscribe():s}const _r=[];function dc(e,t){return{subscribe:Ke(e,t).subscribe}}function Ke(e,t=Jt){let a=null;const s=new Set;function n(l){if(En(e,l)&&(e=l,a)){const v=!_r.length;for(const d of s)d[1](),_r.push(d,e);if(v){for(let d=0;d<_r.length;d+=2)_r[d][0](_r[d+1]);_r.length=0}}}function i(l){n(l(e))}function o(l,v=Jt){const d=[l,v];return s.add(d),s.size===1&&(a=t(n,i)||Jt),l(e),()=>{s.delete(d),s.size===0&&a&&(a(),a=null)}}return{set:n,update:i,subscribe:o}}function _o(e,t,a){const s=!Array.isArray(e),n=s?[e]:e;if(!n.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const i=t.length<2;return dc(a,(o,l)=>{let v=!1;const d=[];let u=0,h=Jt;const f=()=>{if(u)return;h();const E=t(s?d[0]:d,o,l);i?o(E):h=typeof E=="function"?E:Jt},p=n.map((E,$)=>Pn(E,w=>{d[$]=w,u&=~(1<<$),v&&f()},()=>{u|=1<<$}));return v=!0,f(),function(){ys(p),h(),v=!1}})}function Ge(e){let t;return Pn(e,a=>t=a)(),t}let us=!1,cn=Symbol();function Ee(e,t,a){const s=a[t]??={store:null,source:T(void 0),unsubscribe:Jt};if(s.store!==e&&!(cn in a))if(s.unsubscribe(),s.store=e??null,e==null)s.source.v=void 0,s.unsubscribe=Jt;else{var n=!0;s.unsubscribe=Pn(e,i=>{n?s.source.v=i:_(s.source,i)}),n=!1}return e&&cn in a?Ge(e):r(s.source)}function oi(e,t){return e.set(t),t}function Dt(){const e={};function t(){os(()=>{for(var a in e)e[a].unsubscribe();Ti(e,cn,{enumerable:!1,value:!0})})}return[e,t]}function vc(e,t,a){return e.set(a),t}function uc(e){var t=us;try{return us=!1,[e(),us]}finally{us=t}}function xt(e,t,a,s){var n=!zr||(a&el)!==0,i=(a&al)!==0,o=(a&rl)!==0,l=s,v=!0,d=()=>(v&&(v=!1,l=o?m(s):s),l),u;if(i){var h=La in e||No in e;u=Sr(e,t)?.set??(h&&t in e?ne=>e[t]=ne:void 0)}var f,p=!1;i?[f,p]=uc(()=>e[t]):f=e[t],f===void 0&&s!==void 0&&(f=d(),u&&(n&&Uo(),u(f)));var E;if(n?E=()=>{var ne=e[t];return ne===void 0?d():(v=!0,ne)}:E=()=>{var ne=e[t];return ne!==void 0&&(l=void 0),ne===void 0?l:ne},n&&(a&tl)===0)return E;if(u){var $=e.$$legacy;return(function(ne,de){return arguments.length>0?((!n||!de||$||p)&&u(de?E():ne),ne):E()})}var w=!1,x=((a&Jo)!==0?ns:ht)(()=>(w=!1,E()));i&&r(x);var U=lt;return(function(ne,de){if(arguments.length>0){const H=de?r(x):n&&i?kr(ne):ne;return _(x,H),w=!0,l!==void 0&&(l=H),ne}return pr&&w||(U.f&Pa)!==0?x.v:r(x)})}function Na(e){_t===null&&Sn(),zr&&_t.l!==null?hc(_t).m.push(e):rn(()=>{const t=m(e);if(typeof t=="function")return t})}function Ln(e){_t===null&&Sn(),Na(()=>()=>m(e))}function fc(e,t,{bubbles:a=!1,cancelable:s=!1}={}){return new CustomEvent(e,{detail:t,bubbles:a,cancelable:s})}function zn(){const e=_t;return e===null&&Sn(),(t,a,s)=>{const n=e.s.$$events?.[t];if(n){const i=rs(n)?n.slice():[n],o=fc(t,a,s);for(const l of i)l.call(e.x,o);return!o.defaultPrevented}return!0}}function hc(e){var t=e.l;return t.u??={a:[],b:[],m:[]}}const pc="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(pc);fl();const gc=e=>e;function mo(e){const t=e-1;return t*t*t+1}function li(e){const t=typeof e=="string"&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[e,"px"]}function St(e,{delay:t=0,duration:a=400,easing:s=gc}={}){const n=+getComputedStyle(e).opacity;return{delay:t,duration:a,easing:s,css:i=>`opacity: ${i*n}`}}function bo(e,{delay:t=0,duration:a=400,easing:s=mo,x:n=0,y:i=0,opacity:o=0}={}){const l=getComputedStyle(e),v=+l.opacity,d=l.transform==="none"?"":l.transform,u=v*(1-o),[h,f]=li(n),[p,E]=li(i);return{delay:t,duration:a,easing:s,css:($,w)=>`
			transform: ${d} translate(${(1-$)*h}${f}, ${(1-$)*p}${E});
			opacity: ${v-u*w}`}}function Rn(e,{delay:t=0,duration:a=400,easing:s=mo,start:n=0,opacity:i=0}={}){const o=getComputedStyle(e),l=+o.opacity,v=o.transform==="none"?"":o.transform,d=1-n,u=l*(1-i);return{delay:t,duration:a,easing:s,css:(h,f)=>`
			transform: ${v} scale(${1-d*f});
			opacity: ${l-u*f}
		`}}const _c='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-arrows-shuffle-2"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 4l3 3l-3 3" /><path d="M18 20l3 -3l-3 -3" /><path d="M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5" /><path d="M3 17h3a5 5 0 0 0 5 -5a5 5 0 0 1 5 -5h5" /></svg>',mc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-deezer"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 16.5h2v.5h-2z" /><path d="M8 16.5h2.5v.5h-2.5z" /><path d="M16 17h-2.5v-.5h2.5z" /><path d="M21.5 17h-2.5v-.5h2.5z" /><path d="M21.5 13h-2.5v.5h2.5z" /><path d="M21.5 9.5h-2.5v.5h2.5z" /><path d="M21.5 6h-2.5v.5h2.5z" /><path d="M16 13h-2.5v.5h2.5z" /><path d="M8 13.5h2.5v-.5h-2.5z" /><path d="M8 9.5h2.5v.5h-2.5z" /></svg>',bc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-compact-down"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 11l8 3l8 -3" /></svg>',yc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-compact-left"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M13 20l-3 -8l3 -8" /></svg>',wc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-left"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 6l-6 6l6 6" /></svg>',ci='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-disc"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0" /><path d="M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M7 12a5 5 0 0 1 5 -5" /><path d="M12 17a5 5 0 0 0 5 -5" /></svg>',kc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-grip-horizontal"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M5 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M12 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M12 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M19 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M19 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /></svg>',xc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-heart"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M19.5 12.572l-7.5 7.428l-7.5 -7.428a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572" /></svg>',Sc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-heart"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6.979 3.074a6 6 0 0 1 4.988 1.425l.037 .033l.034 -.03a6 6 0 0 1 4.733 -1.44l.246 .036a6 6 0 0 1 3.364 10.008l-.18 .185l-.048 .041l-7.45 7.379a1 1 0 0 1 -1.313 .082l-.094 -.082l-7.493 -7.422a6 6 0 0 1 3.176 -10.215z" /></svg>',Ec='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-menu-2"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 6l16 0" /><path d="M4 12l16 0" /><path d="M4 18l16 0" /></svg>',Ws='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-music"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 17a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /><path d="M13 17a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /><path d="M9 17v-13h10v13" /><path d="M9 8h10" /></svg>',$c='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-pause"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z" /><path d="M17 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z" /></svg>',Tc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-player-play"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 4v16l13 -8z" /></svg>',Mc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-play"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 4v16a1 1 0 0 0 1.524 .852l13 -8a1 1 0 0 0 0 -1.704l-13 -8a1 1 0 0 0 -1.524 .852z" /></svg>',Ac='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-skip-back"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M19.496 4.136l-12 7a1 1 0 0 0 0 1.728l12 7a1 1 0 0 0 1.504 -.864v-14a1 1 0 0 0 -1.504 -.864z" /><path d="M4 4a1 1 0 0 1 .993 .883l.007 .117v14a1 1 0 0 1 -1.993 .117l-.007 -.117v-14a1 1 0 0 1 1 -1z" /></svg>',Cc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-skip-forward"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 5v14a1 1 0 0 0 1.504 .864l12 -7a1 1 0 0 0 0 -1.728l-12 -7a1 1 0 0 0 -1.504 .864z" /><path d="M20 4a1 1 0 0 1 .993 .883l.007 .117v14a1 1 0 0 1 -1.993 .117l-.007 -.117v-14a1 1 0 0 1 1 -1z" /></svg>',Pc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-playlist"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0" /><path d="M17 17v-13h4" /><path d="M13 5h-10" /><path d="M3 9l10 0" /><path d="M9 13h-6" /></svg>',Lc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-radio"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3l-9.371 3.749a1 1 0 0 0 -.629 .928v11.323a1 1 0 0 0 1 1h14a1 1 0 0 0 1 -1v-11a1 1 0 0 0 -1 -1h-14.5" /><path d="M4 12h16" /><path d="M7 12v-2" /><path d="M17 16v.01" /><path d="M13 16v.01" /></svg>',zc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-refresh"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4" /><path d="M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4" /></svg>',Rc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-repeat"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 12v-3a3 3 0 0 1 3 -3h13m-3 -3l3 3l-3 3" /><path d="M20 12v3a3 3 0 0 1 -3 3h-13m3 3l-3 -3l3 -3" /></svg>',Ic='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-search"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0" /><path d="M21 21l-6 -6" /></svg>',jc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-settings"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z" /><path d="M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /></svg>',Nc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-trash"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 7l16 0" /><path d="M10 11l0 6" /><path d="M14 11l0 6" /><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12" /><path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3" /></svg>',Dc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 8a5 5 0 0 1 0 8" /><path d="M17.7 5a9 9 0 0 1 0 14" /><path d="M6 15h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l3.5 -4.5a.8 .8 0 0 1 1.5 .5v14a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5" /></svg>',Oc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume-2"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 8a5 5 0 0 1 0 8" /><path d="M6 15h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l3.5 -4.5a.8 .8 0 0 1 1.5 .5v14a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5" /></svg>',Fc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume-3"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 15h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l3.5 -4.5a.8 .8 0 0 1 1.5 .5v14a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5" /><path d="M16 10l4 4m0 -4l-4 4" /></svg>',qc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume-off"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 8a5 5 0 0 1 1.912 4.934m-1.377 2.602a5 5 0 0 1 -.535 .464" /><path d="M17.7 5a9 9 0 0 1 2.362 11.086m-1.676 2.299a9 9 0 0 1 -.686 .615" /><path d="M9.069 5.054l.431 -.554a.8 .8 0 0 1 1.5 .5v2m0 4v8a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l1.294 -1.664" /><path d="M3 3l18 18" /></svg>',Bc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-x"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 6l-12 12" /><path d="M6 6l12 12" /></svg>',Yc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-device-floppy"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2" /><path d="M12 14m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0" /><path d="M14 4l0 4l-6 0l0 -4" /></svg>',Uc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-file-pencil"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3v4a1 1 0 0 0 1 1h4" /><path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z" /><path d="M10 18l5 -5a1.414 1.414 0 0 0 -2 -2l-5 5v2h2z" /></svg>',di='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-plus"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 5l0 14" /><path d="M5 12l14 0" /></svg>',Hc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-circle-check"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0" /><path d="M9 12l2 2l4 -4" /></svg>',Vc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-dots"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /></svg>',Wc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-sort-descending"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 6l9 0" /><path d="M4 12l7 0" /><path d="M4 18l7 0" /><path d="M15 15l3 3l3 -3" /><path d="M18 6l0 12" /></svg>',Qc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-sort-ascending"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 6l7 0" /><path d="M4 12l7 0" /><path d="M4 18l9 0" /><path d="M15 9l3 -3l3 3" /><path d="M18 6l0 12" /></svg>',Xc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-yandex"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 20v-16h-2a4 4 0 0 0 -4 4v1a4 4 0 0 0 4 4h2" /><path d="M9 20l3 -7" /></svg>',y={ARTISTS:Ws,ALBUMS:ci,GENRES:Ws,PLAYLISTS:Pc,RADIO:Lc,SEARCH:Ic,PLAY:Mc,PLAY_OUTLINE:Tc,PAUSE:$c,PREVIOUS:Ac,NEXT:Cc,SHUFFLE:_c,REPEAT:Rc,VOLUME_FULL:Dc,VOLUME_MEDIUM:Oc,VOLUME_MUTE:Fc,VOLUME_OFF:qc,HEART:xc,HEART_FILLED:Sc,SYNC:zc,SETTINGS:jc,CLOSE:Bc,MENU:Ec,BACK:wc,BACK_COMPACT:yc,CHEVRON_DOWN:bc,DRAG_HANDLE:kc,REMOVE:Nc,DEEZER:mc,SAVE:Yc,EDIT:Uc,ADD:di,ACCEPT:Hc,DOTS:Vc,ADD_TO_PLAYLIST:di,ALBUM_LINK:ci,ARTIST_LINK:Ws,SORT_DESC:Wc,SORT_ASC:Qc,YANDEX:Xc};function Ar(e){if(!e||!e.image)return null;if(e.image.startsWith("http"))return e.image;let t="";return e.image==="local"?t=`${e.name}.jpg`:t=e.image,`/imagesw/radio-logos/thumbs/${encodeURIComponent(t)}`}function vi(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}const dn=[{id:"default",label:"Default (Moode Dark)",colors:{"--c-white-10":"rgba(255, 255, 255, 0.1)","--c-white-20":"rgba(255, 255, 255, 0.2)","--c-white-30":"rgba(255, 255, 255, 0.3)","--c-white-50":"rgba(255, 255, 255, 0.5)","--c-white-60":"rgba(255, 255, 255, 0.6)","--c-white-90":"rgba(255, 255, 255, 0.9)","--c-black-20":"rgba(0, 0, 0, 0.2)","--c-black-50":"rgba(0, 0, 0, 0.5)","--c-black-70":"rgba(0, 0, 0, 0.7)","--c-black-80":"rgba(0, 0, 0, 0.8)","--c-black-90":"rgba(0, 0, 0, 0.9)","--c-accent":"#fa2d48","--c-accent-hover":"#ff4d65","--c-text-primary":"#ffffff","--c-text-secondary":"rgba(255, 255, 255, 0.6)","--c-text-muted":"#888888","--c-text-inverse":"#000000","--c-bg-app":"#000000","--c-bg-main":"#121212","--c-bg-sidebar":"#000000","--c-bg-card":"#1a1a1a","--c-bg-placeholder":"rgba(255, 255, 255, 0.1)","--c-bg-glass":"rgba(18, 18, 18, 0.95)","--c-bg-toast":"#333333","--c-heart":"#ff4444","--c-error":"#ff4444","--c-surface-hover":"rgba(255, 255, 255, 0.1)","--c-surface-active":"rgba(255, 255, 255, 0.2)","--c-surface-input":"#1a1a1a","--c-surface-input-focus":"rgba(255, 255, 255, 0.1)","--c-surface-button":"rgba(255, 255, 255, 0.1)","--c-surface-button-hover":"rgba(255, 255, 255, 0.1)","--c-surface-drag-phantom":"#1a1a1a","--c-surface-drag-land":"rgba(255, 255, 255, 0.1)","--c-rail-bg":"rgba(255, 255, 255, 0.2)","--c-rail-bg-hover":"rgba(255, 255, 255, 0.3)","--c-skeleton-base":"rgba(255, 255, 255, 0.1)","--c-border":"rgba(255, 255, 255, 0.1)","--c-border-dim":"rgba(255, 255, 255, 0.1)","--c-border-bright":"rgba(255, 255, 255, 0.2)","--c-border-dashed":"rgba(255, 255, 255, 0.2)","--c-border-dashed-hover":"rgba(255, 255, 255, 0.5)","--c-overlay-dim":"rgba(0, 0, 0, 0.5)","--c-overlay-backdrop":"rgba(0, 0, 0, 0.8)","--c-shadow-card":"rgba(0, 0, 0, 0.3)","--c-shadow-popover":"rgba(0, 0, 0, 0.5)","--c-shadow-header":"rgba(0, 0, 0, 0.5)","--c-shadow-phantom":"rgba(0, 0, 0, 0.7)","--c-shadow-glow-accent":"rgba(250, 45, 72, 0.5)","--c-icon-idle":"#9ca3af","--c-icon-hover":"#ffffff","--c-icon-faint":"rgba(255, 255, 255, 0.5)","--icon-stroke-width":"1.5px","--header-height":"64px","--mini-player-height":"90px","--sidebar-width":"260px","--radius-sm":"4px","--radius-md":"8px","--radius-lg":"12px","--radius-xl":"20px","--radius-full":"9999px","--z-base":"1","--z-dock":"1000","--z-modal":"2000","--z-toast":"3000","--z-drag-item":"9999","--trans-fast":"0.2s ease","--trans-smooth":"0.3s cubic-bezier(0.2, 0.8, 0.2, 1)","--c-pl-0":"#fa2d48","--c-pl-1":"#2d7afa","--c-pl-2":"#2dfa85","--c-pl-3":"#faac2d","--c-pl-4":"#b82dfa","--c-pl-5":"#2dfaf3"}},{id:"gruvbox",label:"Gruvbox Dark",colors:{"--c-white-10":"rgba(251, 241, 199, 0.1)","--c-white-20":"rgba(251, 241, 199, 0.2)","--c-white-30":"rgba(251, 241, 199, 0.3)","--c-white-50":"rgba(251, 241, 199, 0.5)","--c-white-60":"rgba(251, 241, 199, 0.6)","--c-white-90":"rgba(251, 241, 199, 0.9)","--c-black-20":"rgba(40, 40, 40, 0.2)","--c-black-50":"rgba(40, 40, 40, 0.5)","--c-black-70":"rgba(40, 40, 40, 0.7)","--c-black-80":"rgba(40, 40, 40, 0.8)","--c-black-90":"rgba(40, 40, 40, 0.9)","--c-accent":"#d65d0e","--c-accent-hover":"#fe8019","--c-text-primary":"#fbf1c7","--c-text-secondary":"#ebdbb2","--c-text-muted":"#928374","--c-text-inverse":"#282828","--c-bg-app":"#282828","--c-bg-main":"#282828","--c-bg-sidebar":"#282828","--c-bg-card":"#3c3836","--c-bg-placeholder":"#504945","--c-bg-glass":"rgba(40, 40, 40, 0.98)","--c-bg-toast":"#32302f","--c-heart":"#fb4934","--c-error":"#cc241d","--c-surface-hover":"#3c3836","--c-surface-active":"#504945","--c-surface-input":"#3c3836","--c-surface-input-focus":"#504945","--c-surface-button":"rgba(251, 241, 199, 0.1)","--c-surface-button-hover":"rgba(251, 241, 199, 0.2)","--c-surface-drag-phantom":"#504945","--c-surface-drag-land":"rgba(251, 241, 199, 0.1)","--c-rail-bg":"#504945","--c-rail-bg-hover":"#665c54","--c-skeleton-base":"#3c3836","--c-border":"#504945","--c-border-dim":"#3c3836","--c-border-bright":"#665c54","--c-border-dashed":"rgba(168, 153, 132, 0.2)","--c-border-dashed-hover":"rgba(168, 153, 132, 0.5)","--c-overlay-dim":"rgba(40, 40, 40, 0.6)","--c-overlay-backdrop":"rgba(29, 32, 33, 0.8)","--c-shadow-card":"rgba(0, 0, 0, 0.3)","--c-shadow-popover":"rgba(0, 0, 0, 0.5)","--c-shadow-header":"rgba(0, 0, 0, 0.2)","--c-shadow-phantom":"rgba(0, 0, 0, 0.5)","--c-shadow-glow-accent":"rgba(214, 93, 14, 0.3)","--c-icon-idle":"#a89984","--c-icon-hover":"#fbf1c7","--c-icon-faint":"#504945","--icon-stroke-width":"1.5px","--header-height":"64px","--mini-player-height":"90px","--sidebar-width":"260px","--radius-sm":"4px","--radius-md":"8px","--radius-lg":"12px","--radius-xl":"16px","--radius-full":"9999px","--z-base":"1","--z-dock":"1000","--z-modal":"2000","--z-toast":"3000","--z-drag-item":"9999","--trans-fast":"0.2s ease","--trans-smooth":"0.3s cubic-bezier(0.2, 0.8, 0.2, 1)","--c-pl-0":"#cc241d","--c-pl-1":"#458588","--c-pl-2":"#a6e3a1","--c-pl-3":"#d65d0e","--c-pl-4":"#b16286","--c-pl-5":"#fabd2f"}}];function Kc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Qs={exports:{}},Xs={exports:{}},ui;function Gc(){return ui||(ui=1,(function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t={rotl:function(a,s){return a<<s|a>>>32-s},rotr:function(a,s){return a<<32-s|a>>>s},endian:function(a){if(a.constructor==Number)return t.rotl(a,8)&16711935|t.rotl(a,24)&4278255360;for(var s=0;s<a.length;s++)a[s]=t.endian(a[s]);return a},randomBytes:function(a){for(var s=[];a>0;a--)s.push(Math.floor(Math.random()*256));return s},bytesToWords:function(a){for(var s=[],n=0,i=0;n<a.length;n++,i+=8)s[i>>>5]|=a[n]<<24-i%32;return s},wordsToBytes:function(a){for(var s=[],n=0;n<a.length*32;n+=8)s.push(a[n>>>5]>>>24-n%32&255);return s},bytesToHex:function(a){for(var s=[],n=0;n<a.length;n++)s.push((a[n]>>>4).toString(16)),s.push((a[n]&15).toString(16));return s.join("")},hexToBytes:function(a){for(var s=[],n=0;n<a.length;n+=2)s.push(parseInt(a.substr(n,2),16));return s},bytesToBase64:function(a){for(var s=[],n=0;n<a.length;n+=3)for(var i=a[n]<<16|a[n+1]<<8|a[n+2],o=0;o<4;o++)n*8+o*6<=a.length*8?s.push(e.charAt(i>>>6*(3-o)&63)):s.push("=");return s.join("")},base64ToBytes:function(a){a=a.replace(/[^A-Z0-9+\/]/ig,"");for(var s=[],n=0,i=0;n<a.length;i=++n%4)i!=0&&s.push((e.indexOf(a.charAt(n-1))&Math.pow(2,-2*i+8)-1)<<i*2|e.indexOf(a.charAt(n))>>>6-i*2);return s}};Xs.exports=t})()),Xs.exports}var Ks,fi;function hi(){if(fi)return Ks;fi=1;var e={utf8:{stringToBytes:function(t){return e.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(e.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var a=[],s=0;s<t.length;s++)a.push(t.charCodeAt(s)&255);return a},bytesToString:function(t){for(var a=[],s=0;s<t.length;s++)a.push(String.fromCharCode(t[s]));return a.join("")}}};return Ks=e,Ks}var Gs,pi;function Zc(){if(pi)return Gs;pi=1,Gs=function(a){return a!=null&&(e(a)||t(a)||!!a._isBuffer)};function e(a){return!!a.constructor&&typeof a.constructor.isBuffer=="function"&&a.constructor.isBuffer(a)}function t(a){return typeof a.readFloatLE=="function"&&typeof a.slice=="function"&&e(a.slice(0,0))}return Gs}var gi;function Jc(){return gi||(gi=1,(function(){var e=Gc(),t=hi().utf8,a=Zc(),s=hi().bin,n=function(i,o){i.constructor==String?o&&o.encoding==="binary"?i=s.stringToBytes(i):i=t.stringToBytes(i):a(i)?i=Array.prototype.slice.call(i,0):!Array.isArray(i)&&i.constructor!==Uint8Array&&(i=i.toString());for(var l=e.bytesToWords(i),v=i.length*8,d=1732584193,u=-271733879,h=-1732584194,f=271733878,p=0;p<l.length;p++)l[p]=(l[p]<<8|l[p]>>>24)&16711935|(l[p]<<24|l[p]>>>8)&4278255360;l[v>>>5]|=128<<v%32,l[(v+64>>>9<<4)+14]=v;for(var E=n._ff,$=n._gg,w=n._hh,x=n._ii,p=0;p<l.length;p+=16){var U=d,ne=u,de=h,H=f;d=E(d,u,h,f,l[p+0],7,-680876936),f=E(f,d,u,h,l[p+1],12,-389564586),h=E(h,f,d,u,l[p+2],17,606105819),u=E(u,h,f,d,l[p+3],22,-1044525330),d=E(d,u,h,f,l[p+4],7,-176418897),f=E(f,d,u,h,l[p+5],12,1200080426),h=E(h,f,d,u,l[p+6],17,-1473231341),u=E(u,h,f,d,l[p+7],22,-45705983),d=E(d,u,h,f,l[p+8],7,1770035416),f=E(f,d,u,h,l[p+9],12,-1958414417),h=E(h,f,d,u,l[p+10],17,-42063),u=E(u,h,f,d,l[p+11],22,-1990404162),d=E(d,u,h,f,l[p+12],7,1804603682),f=E(f,d,u,h,l[p+13],12,-40341101),h=E(h,f,d,u,l[p+14],17,-1502002290),u=E(u,h,f,d,l[p+15],22,1236535329),d=$(d,u,h,f,l[p+1],5,-165796510),f=$(f,d,u,h,l[p+6],9,-1069501632),h=$(h,f,d,u,l[p+11],14,643717713),u=$(u,h,f,d,l[p+0],20,-373897302),d=$(d,u,h,f,l[p+5],5,-701558691),f=$(f,d,u,h,l[p+10],9,38016083),h=$(h,f,d,u,l[p+15],14,-660478335),u=$(u,h,f,d,l[p+4],20,-405537848),d=$(d,u,h,f,l[p+9],5,568446438),f=$(f,d,u,h,l[p+14],9,-1019803690),h=$(h,f,d,u,l[p+3],14,-187363961),u=$(u,h,f,d,l[p+8],20,1163531501),d=$(d,u,h,f,l[p+13],5,-1444681467),f=$(f,d,u,h,l[p+2],9,-51403784),h=$(h,f,d,u,l[p+7],14,1735328473),u=$(u,h,f,d,l[p+12],20,-1926607734),d=w(d,u,h,f,l[p+5],4,-378558),f=w(f,d,u,h,l[p+8],11,-2022574463),h=w(h,f,d,u,l[p+11],16,1839030562),u=w(u,h,f,d,l[p+14],23,-35309556),d=w(d,u,h,f,l[p+1],4,-1530992060),f=w(f,d,u,h,l[p+4],11,1272893353),h=w(h,f,d,u,l[p+7],16,-155497632),u=w(u,h,f,d,l[p+10],23,-1094730640),d=w(d,u,h,f,l[p+13],4,681279174),f=w(f,d,u,h,l[p+0],11,-358537222),h=w(h,f,d,u,l[p+3],16,-722521979),u=w(u,h,f,d,l[p+6],23,76029189),d=w(d,u,h,f,l[p+9],4,-640364487),f=w(f,d,u,h,l[p+12],11,-421815835),h=w(h,f,d,u,l[p+15],16,530742520),u=w(u,h,f,d,l[p+2],23,-995338651),d=x(d,u,h,f,l[p+0],6,-198630844),f=x(f,d,u,h,l[p+7],10,1126891415),h=x(h,f,d,u,l[p+14],15,-1416354905),u=x(u,h,f,d,l[p+5],21,-57434055),d=x(d,u,h,f,l[p+12],6,1700485571),f=x(f,d,u,h,l[p+3],10,-1894986606),h=x(h,f,d,u,l[p+10],15,-1051523),u=x(u,h,f,d,l[p+1],21,-2054922799),d=x(d,u,h,f,l[p+8],6,1873313359),f=x(f,d,u,h,l[p+15],10,-30611744),h=x(h,f,d,u,l[p+6],15,-1560198380),u=x(u,h,f,d,l[p+13],21,1309151649),d=x(d,u,h,f,l[p+4],6,-145523070),f=x(f,d,u,h,l[p+11],10,-1120210379),h=x(h,f,d,u,l[p+2],15,718787259),u=x(u,h,f,d,l[p+9],21,-343485551),d=d+U>>>0,u=u+ne>>>0,h=h+de>>>0,f=f+H>>>0}return e.endian([d,u,h,f])};n._ff=function(i,o,l,v,d,u,h){var f=i+(o&l|~o&v)+(d>>>0)+h;return(f<<u|f>>>32-u)+o},n._gg=function(i,o,l,v,d,u,h){var f=i+(o&v|l&~v)+(d>>>0)+h;return(f<<u|f>>>32-u)+o},n._hh=function(i,o,l,v,d,u,h){var f=i+(o^l^v)+(d>>>0)+h;return(f<<u|f>>>32-u)+o},n._ii=function(i,o,l,v,d,u,h){var f=i+(l^(o|~v))+(d>>>0)+h;return(f<<u|f>>>32-u)+o},n._blocksize=16,n._digestsize=16,Qs.exports=function(i,o){if(i==null)throw new Error("Illegal argument "+i);var l=e.wordsToBytes(n(i,o));return o&&o.asBytes?l:o&&o.asString?s.bytesToString(l):e.bytesToHex(l)}})()),Qs.exports}var ed=Jc();const td=Kc(ed),_i=Ke("Disconnected"),xr=Ke(!1),Ss=Ke(!1),vn=Ke(null);let Zs;function ze(e,t="info"){vn.set({text:e,type:t}),Zs&&clearTimeout(Zs),Zs=setTimeout(()=>{vn.set(null)},3e3)}const ad=localStorage.getItem("app_theme")||"default",Es=Ke(ad);Es.subscribe(e=>{if(typeof document>"u")return;localStorage.setItem("app_theme",e);const t=dn.find(s=>s.id===e);if(!t)return;const a=document.documentElement;document.body.setAttribute("data-theme",e),Object.entries(t.colors).forEach(([s,n])=>{a.style.setProperty(s,n)})});const $s=Ke({isOpen:!1,title:"",message:"",confirmLabel:"Confirm",cancelLabel:"Cancel",onConfirm:null,type:"confirm",inputValue:"",placeholder:"",options:[]});function ma({title:e="Confirm Action",message:t="Are you sure?",confirmLabel:a="Confirm",cancelLabel:s="Cancel",type:n="confirm",inputValue:i="",placeholder:o="",options:l=[],onConfirm:v=()=>{}}){$s.set({isOpen:!0,title:e,message:t,confirmLabel:a,cancelLabel:s,type:n,inputValue:i,placeholder:o,options:l,onConfirm:v})}function fs(){$s.set({isOpen:!1,title:"",message:"",confirmLabel:"",cancelLabel:"",onConfirm:null,type:"confirm",inputValue:"",placeholder:"",options:[]})}const $t=Ke({state:"stop",volume:50,elapsed:0,duration:0,random:!1,repeat:!1,bitrate:0,format:"",song:0,songid:0}),Qt=Ke({title:"Not Playing",artist:"",album:"",file:"",stationName:null,id:null,pos:null,isYandex:!1}),Ts=Ke({active:!1,tracks:[],currentIndex:-1,currentTrackId:null,currentTrackFile:null,streamCache:{}}),Ms=Ke(!1),gs=Ke(!1),un=Ke(!1),fn=Ke(!1),At=Ke("library"),Ns=Ke(null),la=Ke(!1),rd=localStorage.getItem("sidebarCollapsed")==="true",hn=Ke(rd);hn.subscribe(e=>{typeof localStorage<"u"&&localStorage.setItem("sidebarCollapsed",String(e))});const Qa=Ke([]),Ds=Ke([]),Vr=Ke([]),sd=Ke(null),Ya=Ke(new Set),Et=Ke(!1),ut=Ke([{view:"root"}]),Wa=Ke([]),yo=Ke(0),Wr=Ke(""),mi=Ke(null),wo=Ke({});function nd(e,t){wo.update(a=>({...a,[e]:t}))}function id(e){return Ge(wo)[e]||0}const In=Ke({isOpen:!1,track:null,context:{type:"general",playlistName:null,index:null},x:0,y:0,triggerRect:null});function od(){if(typeof navigator<"u"&&navigator.vibrate)try{navigator.vibrate(70)}catch{}}function Jr(e,t,a={}){if(!t&&a.type!=="playlist-card")return;od();let s=0,n=0,i=null,o=e.currentTarget;!o&&e.target&&e.target.closest&&(o=e.target.closest("button")||e.target),o&&o.getBoundingClientRect&&(i=o.getBoundingClientRect());const l=e.detail?.originalEvent||e;l.touches&&l.touches.length>0?(s=l.touches[0].clientX,n=l.touches[0].clientY):l.clientX&&(s=l.clientX,n=l.clientY);const v={type:"general",playlistName:null,index:null,...a};In.set({isOpen:!0,track:t,context:v,x:s,y:n,triggerRect:i})}function Ft(){In.set({isOpen:!1,track:null,context:{},x:0,y:0,triggerRect:null})}let pn=null,gn=null;function ld(e){gn=e}function qt(e,t=null){t&&(pn=t),ut.update(a=>[...a,{view:e,data:t}]),gn&&gn(e,t)}function cd(){const e=pn;return pn=null,e}function dd(){Ge(ut).length>1?ut.update(t=>t.slice(0,-1)):window.history.back()}function vd(){Ge(ut).length>1&&ut.update(t=>t.slice(0,-1))}function Cr(e,t=[],a=null){if(e&&e.image&&e.image.startsWith("http"))return e.image;if(e&&e.cover&&e.cover.startsWith("http"))return e.cover;if(!e||!e.file)return"/images/default_cover.png";if(ko(e.file)||e.genre==="Radio")return e.image?Ar(e):xo(e,t,a)||"/images/radio_placeholder.png";let s=e.file.startsWith("/")?e.file.slice(1):e.file;return`/coverart.php/${encodeURI(s)}`}function es(e,t="sm",a=[],s=null){if(!e)return"/images/default_icon.png";if(e.image&&e.image.startsWith("http"))return e.image;if(e.cover&&e.cover.startsWith("http"))return e.cover;if(e.file&&(ko(e.file)||e.genre==="Radio"||Array.isArray(e)))return e.image?Ar(e):xo(e,a,s)||"/images/radio_icon.png";if(!e.file)return"/images/default_icon.png";if(e.thumbHash){const n=t==="md"?"":"_sm";return`/imagesw/thmcache/${e.thumbHash}${n}.jpg`}try{const n=e.file.lastIndexOf("/"),i=n===-1?".":e.file.substring(0,n);return`/imagesw/thmcache/${td(i)}${t==="md"?"":"_sm"}.jpg`}catch{let i=e.file.startsWith("/")?e.file.slice(1):e.file;return`/coverart.php/${encodeURI(i)}`}}function ko(e){return!e||e.includes("yandex.net")||e.includes("get-mp3")?!1:e.startsWith("http")||e.includes("://")||e.includes("RADIO")}function xo(e,t,a){const s=v=>(v||"").toString().toLowerCase().replace(/[^a-z0-9]/g,""),n=s(e?.title),i=s(e?.stationName),o=s(a);if(t&&t.length>0){const v=t.find(d=>{const u=s(d.name);return u?u===i||u===o||n&&u===n||n&&n.includes(u)&&u.length>3:!1});if(v)return Ar(v)}const l=e?.stationName||a;return l?Ar({name:l,image:"local"}):null}_o([Qt,Qa,Ns],([e,t,a])=>Cr(e,t,a));_o(Qt,e=>!e||!e.file||e.file.startsWith("http")?null:`/coverart.php/${encodeURI(e.file)}`);const ud=localStorage.getItem("alarmTime")||"08:00",fd=localStorage.getItem("alarmEnabled")==="true",hd=localStorage.getItem("alarmPlaylist")||"Favorites",_n=Ke(ud),mn=Ke(fd),bn=Ke(hd);_n.subscribe(e=>localStorage.setItem("alarmTime",e));mn.subscribe(e=>localStorage.setItem("alarmEnabled",String(e)));bn.subscribe(e=>localStorage.setItem("alarmPlaylist",e));const pd=localStorage.getItem("yandex_enabled")==="true",ts=Ke(pd);ts.subscribe(e=>{typeof localStorage<"u"&&localStorage.setItem("yandex_enabled",String(e))});const ca=Ke(new Set),bi=Ke({active:!1,context_name:"Yandex Music"}),pt={NAME:"MoodePlayerDB",STORE_NAME:"music",VERSION:3},Ka={SYNC:"/wave-api.php",YANDEX:"/wave-yandex-api.php",STATIONS:e=>"/wave-api.php?action=stations",COVER_ART:e=>`/coverart.php?u=${encodeURIComponent(e)}`,RADIO_LOGOS:e=>`/imagesw/radio-logos/thumbs/${e}`},Ua={open(){return new Promise((e,t)=>{const a=indexedDB.open(pt.NAME,pt.VERSION);a.onupgradeneeded=s=>{const n=s.target.result,i=s.target.transaction;let o;n.objectStoreNames.contains(pt.STORE_NAME)?o=i.objectStore(pt.STORE_NAME):o=n.createObjectStore(pt.STORE_NAME,{keyPath:"file"}),o.indexNames.contains("artist")||o.createIndex("artist","artist",{unique:!1}),o.indexNames.contains("album")||o.createIndex("album","album",{unique:!1}),o.indexNames.contains("genre")||o.createIndex("genre","genre",{unique:!1}),o.indexNames.contains("album_artist")||o.createIndex("album_artist","album_artist",{unique:!1})},a.onsuccess=()=>e(a.result),a.onerror=()=>t(a.error)})},async clear(){const e=await this.open();return new Promise((t,a)=>{const s=e.transaction(pt.STORE_NAME,"readwrite");s.objectStore(pt.STORE_NAME).clear(),s.oncomplete=()=>t(),s.onerror=()=>a(s.error)})},async bulkAdd(e){const t=await this.open();return new Promise((a,s)=>{const n=t.transaction(pt.STORE_NAME,"readwrite"),i=n.objectStore(pt.STORE_NAME);e.forEach(o=>i.put(o)),n.oncomplete=()=>a(),n.onerror=()=>s(n.error)})},async getFilesMap(e){if(!e||e.length===0)return new Map;const t=await this.open();return new Promise(a=>{const n=t.transaction(pt.STORE_NAME,"readonly").objectStore(pt.STORE_NAME),i=new Map;let o=0;e.forEach(l=>{const v=l.normalize("NFC").trim(),d=n.get(v);d.onsuccess=u=>{u.target.result&&i.set(l,u.target.result),o++,o===e.length&&a(i)},d.onerror=()=>{o++,o===e.length&&a(i)}})})},async getArtists(){const e=await this.open();return new Promise((t,a)=>{const n=e.transaction(pt.STORE_NAME,"readonly").objectStore(pt.STORE_NAME),i=new Map,o=n.openCursor();o.onsuccess=l=>{const v=l.target.result;if(v){const d=v.value,u=d.album_artist||d.artist;u&&!i.has(u)&&i.set(u,{name:u,file:d.file,thumbHash:d.thumbHash}),v.continue()}else{const d=Array.from(i.values()).sort((u,h)=>u.name.localeCompare(h.name,void 0,{sensitivity:"base"}));t(d)}},o.onerror=()=>a(o.error)})},async getAlbums(){const e=await this.open();return new Promise((t,a)=>{const n=e.transaction(pt.STORE_NAME,"readonly").objectStore(pt.STORE_NAME).index("album"),i=[],o=n.openCursor(null,"nextunique");o.onsuccess=l=>{const v=l.target.result;if(v){const d=v.value;i.push({name:d.album,artist:d.album_artist||d.artist,file:d.file,thumbHash:d.thumbHash,qualityBadge:d.qualityBadge,year:d.year||0}),v.continue()}else t(i)},o.onerror=()=>a(o.error)})},async getArtistAlbums(e){if(!e)return[];const t=await this.open(),a=e.normalize("NFC").trim();return new Promise((s,n)=>{const o=t.transaction(pt.STORE_NAME,"readonly").objectStore(pt.STORE_NAME),l=new Promise(d=>{o.indexNames.contains("album_artist")?o.index("album_artist").getAll(IDBKeyRange.only(a)).onsuccess=u=>d(u.target.result):d([])}),v=new Promise(d=>{o.index("artist").getAll(IDBKeyRange.only(a)).onsuccess=u=>d(u.target.result)});Promise.all([l,v]).then(([d,u])=>{const h=[...d,...u],f=[],p=new Set;h.forEach(E=>{p.has(E.album)||(p.add(E.album),f.push({name:E.album,artist:E.album_artist||E.artist,file:E.file,thumbHash:E.thumbHash,qualityBadge:E.qualityBadge,year:E.year||0}))}),s(f)}).catch(d=>n(d))})},async getAlbumTracks(e,t=null){const a=await this.open(),s=e.normalize("NFC").trim(),n=t?t.normalize("NFC").trim():null;return console.log(`[DB] getAlbumTracks called. Album: "${s}", FilterArtist: "${n}"`),new Promise((i,o)=>{const v=a.transaction(pt.STORE_NAME,"readonly").objectStore(pt.STORE_NAME).index("album"),d=IDBKeyRange.only(s),u=v.getAll(d);u.onsuccess=()=>{let h=u.result;if(console.log(`[DB] Found ${h.length} raw tracks for album "${s}"`),n){const f=h.length;h=h.filter(p=>{const E=(p.artist||"").normalize("NFC").trim(),$=(p.album_artist||"").normalize("NFC").trim();return E===n||$===n}),console.log(`[DB] After artist filter: ${h.length} tracks (Removed ${f-h.length})`)}else console.log("[DB] No artist filter provided. Returning all tracks.");h.sort((f,p)=>{const E=parseInt(f.disc||1),$=parseInt(p.disc||1);if(E!==$)return E-$;const w=parseInt(f.track||0),x=parseInt(p.track||0);return w-x}),i(h)},u.onerror=()=>o(u.error)})},async getGenres(){const e=await this.open();return new Promise((t,a)=>{const n=e.transaction(pt.STORE_NAME,"readonly").objectStore(pt.STORE_NAME).index("genre"),i=[],o=n.openKeyCursor(null,"nextunique");o.onsuccess=l=>{const v=l.target.result;v?(i.push(v.key),v.continue()):t(i)},o.onerror=()=>a(o.error)})},async getGenreTracks(e){const t=await this.open(),a=e.normalize("NFC").trim();return new Promise((s,n)=>{const l=t.transaction(pt.STORE_NAME,"readonly").objectStore(pt.STORE_NAME).index("genre").getAll(IDBKeyRange.only(a));l.onsuccess=()=>s(l.result),l.onerror=()=>n(l.error)})},async search(e){if(!e)return[];const t=e.toLowerCase().normalize("NFC").trim(),a=await this.open();return new Promise((s,n)=>{const o=a.transaction(pt.STORE_NAME,"readonly").objectStore(pt.STORE_NAME),l=[],v=100,d=o.openCursor();d.onsuccess=u=>{const h=u.target.result;if(h){const f=h.value;if((f.title&&f.title.toLowerCase().includes(t)||f.artist&&f.artist.toLowerCase().includes(t)||f.album&&f.album.toLowerCase().includes(t)||f.album_artist&&f.album_artist.toLowerCase().includes(t))&&l.push(f),l.length>=v){s(l);return}h.continue()}else s(l)},d.onerror=()=>n(d.error)})}};var gd=k('<div class="skeleton svelte-tl058d"></div>');function ea(e,t){let a=xt(t,"width",8,"100%"),s=xt(t,"height",8,"20px"),n=xt(t,"radius",8,"4px"),i=xt(t,"style",8,"");var o=gd();se(()=>ft(o,`width: ${a()??""}; height: ${s()??""}; border-radius: ${n()??""}; ${i()??""}`)),b(e,o)}var _d=k('<div class="skel svelte-1b8que2"><!></div>'),md=k('<img loading="lazy"/>'),bd=k('<div class="loader svelte-1b8que2"><!> <!> <!></div>');function Zt(e,t){Tt(t,!1);let a=xt(t,"src",8),s=xt(t,"alt",8,""),n=xt(t,"radius",8,"0px");const i=zn();let o=T("loading");function l(){_(o,"loaded")}function v(w){i("error",w),_(o,"error")}te(()=>I(a()),()=>{a()?_(o,"loading"):_(o,"error")}),Xt(),zt();var d=bd(),u=c(d);{var h=w=>{var x=_d(),U=c(x);ea(U,{width:"100%",height:"100%",get radius(){return n()}}),gt(2,x,()=>St,()=>({duration:200})),b(w,x)};C(u,w=>{r(o)==="loading"&&w(h)})}var f=g(u,2);{var p=w=>{var x=md();let U;se(()=>{Wt(x,"src",a()),Wt(x,"alt",s()),ft(x,`border-radius: ${n()??""}`),U=at(x,1,"svelte-1b8que2",null,U,{vis:r(o)==="loaded"})}),A("load",x,l),A("error",x,v),b(w,x)};C(f,w=>{a()&&r(o)!=="error"&&w(p)})}var E=g(f,2);{var $=w=>{var x=nt(),U=je(x);qr(U,t,"fallback",{}),b(w,x)};C(E,w=>{r(o)==="error"&&w($)})}se(()=>ft(d,`border-radius: ${n()??""}`)),b(e,d),Mt()}const Ja={DEFAULT_IP:typeof window<"u"?window.location.hostname:"localhost",get MOODE_IP(){try{return typeof localStorage<"u"?localStorage.getItem("moode_ip")||this.DEFAULT_IP:this.DEFAULT_IP}catch{return this.DEFAULT_IP}},setMoodeIp(e){if(typeof localStorage<"u"){const t=e?e.trim():"";t&&localStorage.setItem("moode_ip",t)}}};class yd{constructor(){this.socket=null,this.queue=[],this.isProcessing=!1,this.reconnectTimer=null,this.watchdogTimer=null,this._buffer=""}get isConnected(){return this.socket&&this.socket.readyState===WebSocket.OPEN}connect(){if(this.socket&&(this.socket.readyState===WebSocket.CONNECTING||this.socket.readyState===WebSocket.OPEN))return;this.reconnectTimer&&clearTimeout(this.reconnectTimer);let t=Ja.MOODE_IP||window.location.hostname;t=t.replace(/^https?:\/\//,"").split(":")[0].split("/")[0];const a=Ja.WS_PORT||"8080",s=`ws://${t}:${a}`;console.log("[MPD] Connecting to:",s);try{this.socket=new WebSocket(s,["binary"])}catch(n){console.error("[MPD] Connection Error:",n),this.reconnectTimer=setTimeout(()=>this.connect(),5e3);return}this.socket.onopen=()=>{console.log("[MPD] Connected"),_i.set("Connected"),this._processQueue()},this.socket.onmessage=n=>this._handleMessage(n),this.socket.onclose=n=>{console.warn("[MPD] Socket closed",n.code,n.reason),_i.set("Disconnected"),this._cleanup(),this.reconnectTimer=setTimeout(()=>this.connect(),3e3)},this.socket.onerror=n=>{console.error("[MPD] Socket error",n)}}send(t){return new Promise((a,s)=>{this.queue.push({cmd:t,resolve:a,reject:s}),this._processQueue()})}_cleanup(){for(this.isProcessing=!1,this._buffer="",this.watchdogTimer&&clearTimeout(this.watchdogTimer);this.queue.length>0;){const{reject:t}=this.queue.shift();t(new Error("Connection lost"))}}async _processQueue(){if(this.isProcessing||this.queue.length===0||!this.isConnected)return;this.isProcessing=!0;const{cmd:t}=this.queue[0];this.watchdogTimer&&clearTimeout(this.watchdogTimer),this.watchdogTimer=setTimeout(()=>{console.error("[MPD] Watchdog timeout"),this.socket&&this.socket.close()},2e4);try{const a=t.endsWith(`
`)?t:t+`
`;this.socket.send(new TextEncoder().encode(a))}catch(a){console.error("[MPD] Send error",a),this._cleanup()}}async _handleMessage(t){let a=t.data;a instanceof Blob&&(a=await a.text()),this.watchdogTimer&&(clearTimeout(this.watchdogTimer),this.watchdogTimer=null),this._buffer+=a;const s=this._buffer.endsWith(`
OK
`)||this._buffer===`OK
`,n=this._buffer.startsWith("ACK");if(s||n){const i=this._buffer;this._buffer="";const o=this.queue.shift();if(this.isProcessing=!1,o)if(n)console.error(`[MPD] Error for "${o.cmd.trim()}": ${i.trim()}`),o.reject(new Error(i.trim()));else{const l=i.replace(/\nOK\n$/,"").replace(/^OK\n$/,"");o.resolve(l)}this._processQueue()}else{if(!this.queue.length)return;this.watchdogTimer=setTimeout(()=>{console.error("[MPD] Watchdog timeout receiving large data"),this.socket&&this.socket.close()},2e4)}}}const We=new yd,oa={parseKeyValue(e){const t={};if(!e)return t;const a=e.split(`
`);for(const s of a){const n=s.indexOf(": ");if(n===-1)continue;const i=s.substring(0,n).toLowerCase(),o=s.substring(n+2);t[i]=o}return t},parseStatus(e){const t=this.parseKeyValue(e);let a="";if(t.audio){const s=t.audio.split(":");s[1]&&(a=`${s[1]}-bit`)}return{state:t.state||"stop",volume:parseInt(t.volume)||0,elapsed:parseFloat(t.elapsed)||0,duration:parseFloat(t.duration)||0,random:t.random==="1",repeat:t.repeat==="1",song:parseInt(t.song)||0,songId:parseInt(t.songid)||-1,playlistLength:parseInt(t.playlistlength)||0,bitrate:parseInt(t.bitrate)||0,format:a,playlistVersion:parseInt(t.playlist)||0}},parseCurrentSong(e){const t=this.parseKeyValue(e);return this._normalizeTrack(t)},parsePlaylists(e){const t=e.split(`
`),a=[];let s=null;for(const n of t)n.startsWith("playlist: ")?(s&&a.push(s),s={playlist:n.substring(10)}):n.startsWith("Last-Modified: ")&&s&&(s["last-modified"]=n.substring(15));return s&&a.push(s),a.map(n=>({name:n.playlist,lastModified:n["last-modified"]}))},parseTracks(e){const t=[];let a=null,s=0,n=e.indexOf(`
`,s);for(;n!==-1;){const i=e.substring(s,n),o=i.indexOf(": ");if(o!==-1){const l=i.substring(0,o).toLowerCase(),v=i.substring(o+2);l==="file"?(a&&t.push(this._normalizeTrack(a)),a={file:v}):a&&(a[l]=v)}s=n+1,n=e.indexOf(`
`,s)}return a&&t.push(this._normalizeTrack(a)),t},_normalizeTrack(e){const t=e.file||e.File||"",a=e.Title||e.title||e.Name||e.name||t.split("/").pop()||"Unknown";return{file:t,title:a,artist:e.Artist||e.artist||"Unknown Artist",album:e.Album||e.album||"Unknown Album",genre:e.Genre||e.genre||"Unknown",time:parseFloat(e.Time||e.time||0),track:e.Track||e.track||"",id:e.Id||e.id,pos:e.Pos||e.pos||null,stationName:e.name||e.Name||null}}};function So(e){return new Worker("/assets/sync.worker-CxDcqL9_.js",{name:e?.name})}const Ma={async syncLibrary(){if(Ge(la))return;la.set(!0);const e=new So,t=window.location.origin+"/wave-api.php";e.postMessage({type:"START_SYNC",payload:{url:t}}),e.onmessage=a=>{const{type:s,status:n,count:i,message:o}=a.data;if(s==="PROGRESS"){const l={connecting:"Requesting library...",downloading:"Downloading data...",parsing:"Processing metadata...",saving:`Saving ${i} tracks...`};l[n]&&ze(l[n],"info")}s==="DONE"&&(ze(`Library updated: ${i} tracks`,"success"),la.set(!1),e.terminate()),s==="ERROR"&&(console.error("[API] Sync Error:",o),ze(`Sync Failed: ${o}`,"error"),la.set(!1),e.terminate())},e.onerror=a=>{console.error("[API] Worker crash:",a),ze("Sync worker crashed","error"),la.set(!1),e.terminate()}},async loadRadioStations(){if(!Ge(gs)){gs.set(!0);try{const t=await fetch(Ka.STATIONS(!1));if(!t.ok)throw new Error("Network error");const a=await t.json();if(a.error)throw new Error(a.error);if(!Array.isArray(a))throw new Error("Invalid response format");const s=a.map(n=>({id:n.id,name:n.name,file:n.station,station:n.station,image:n.logo,genre:n.genre||"Radio"}));s.sort((n,i)=>n.name.localeCompare(i.name,void 0,{sensitivity:"base"})),Qa.set(s)}catch(e){console.error("[API] Failed to load stations",e),ze("Failed to load radio","error")}finally{gs.set(!1)}}},async setAlarm(e,t,a){try{const s=new FormData;s.append("action","set_alarm"),s.append("enabled",e?"1":"0"),s.append("time",t),s.append("playlist",a);const n=await fetch(Ka.SYNC,{method:"POST",body:s});if(!n.ok)throw new Error("Server error");const i=await n.json();if(i.error)throw new Error(i.error);return!0}catch(s){throw console.error("[API] Failed to set alarm",s),s}},async getServerTime(){try{const e=await fetch(`${Ka.SYNC}?action=get_time`);if(e.ok)return(await e.json()).time}catch(e){console.error("Failed to get server time",e)}return null},async checkYandexAuth(){try{const t=await(await fetch(Ka.YANDEX+"?action=status")).json();return xr.set(t.authorized),t.authorized}catch(e){return console.error("Yandex Auth Check Failed",e),xr.set(!1),!1}},async saveYandexToken(e){try{const t=await fetch(Ka.YANDEX+"?action=save_token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e})}),a=await t.json();if(!t.ok)throw new Error(a.error||"Failed to save");return ze("Yandex connected successfully","success"),xr.set(!0),!0}catch(t){return console.error(t),ze("Invalid token or server error","error"),xr.set(!1),!1}},async getYandexMeta(e){try{const t=await fetch(Ka.YANDEX+"?action=get_meta&url="+encodeURIComponent(e));if(t.ok)return await t.json()}catch{}return null}},wd=1e3,kd=250;let _s=null,Qr=null,ms=0,Ga=1,As=!0,Aa=!1,er=0,mr=null;function bs(e){return e?String(e).normalize("NFC").replace(/\\/g,"\\\\").replace(/"/g,'\\"'):""}function xd(){Sd(),As=!0,Aa=!1,er=0,Et.set(!1),pa(),_s=setInterval(()=>{We.isConnected&&!We.isProcessing&&pa()},wd)}function Sd(){_s&&(clearInterval(_s),_s=null),Nn()}async function pa(){try{const e=await We.send("status"),t=await We.send("currentsong"),a=oa.parseStatus(e),s=oa.parseCurrentSong(t);$d(a,s);const n=Ge(yo);if(Ge(Et))return;(a.playlistLength>0&&a.playlistVersion!==n||a.playlistLength>0&&Ge(Wa).length===0)&&Ed(a.playlistVersion)}catch{}}function jn(e){if(!e)return null;let t=e.match(/[?&]track-id=([^&]+)/);return t||(t=e.match(/[?&]id=([^&]+)/),t)||(t=e.match(/\/track\/(\d+)/),t)?t[1]:null}async function Ed(e){if(!Ge(Et))try{const t=await We.send("playlistinfo");if(Ge(Et))return;const a=oa.parseTracks(t),s=Ge(Ts),n=a.map(l=>l.file).filter(l=>l&&!l.startsWith("http"));let i=new Map;if(n.length>0)try{i=await Ua.getFilesMap(n)}catch(l){console.warn("Failed to hydrate queue from DB",l)}const o=a.map(l=>{const v=l.file||"",d=v.includes("yandex.net")||v.includes("get-mp3")||v.startsWith("yandex:")||v.includes("storage.yandex.net");if(d&&s.streamCache){let f=s.streamCache[v];if(!f){const p=jn(v);p&&(f=s.streamCache[String(p)])}if(f){const p=parseFloat(f.time||0),E=parseFloat(l.time||0);return{...l,title:f.title||l.title,artist:f.artist||l.artist,album:f.album||l.album,image:f.image,isYandex:!0,id:f.id,time:E>0?E:p,mpdId:l.id,mpdPos:l.pos,_uid:String(l.id||l.pos)+"y"}}}d&&Eo(v);const u=v.normalize("NFC"),h=i.get(u);return h?{...l,thumbHash:h.thumbHash,qualityBadge:h.qualityBadge,title:l.title||h.title,artist:l.artist||h.artist,album:l.album||h.album,isYandex:d,_uid:String(l.id||l.pos+l.file)}:{...l,isYandex:d,_uid:String(l.id||l.pos+l.file)}});Wa.set(o),yo.set(e)}catch(t){console.error("Queue sync error",t)}}async function Eo(e){const t=Ge(Ts);if(t.streamCache&&t.streamCache[e])return;const a=jn(e);if(a&&t.streamCache&&t.streamCache[a])return;const s=await Ma.getYandexMeta(e);s&&(Ts.update(i=>{const o={...i.streamCache};return o[e]={...s,isYandex:!0,file:e},s.id&&(o[String(s.id)]={...s,isYandex:!0,file:e}),{...i,streamCache:o}}),Ge(Qt).file===e&&(Qt.update(i=>({...i,...s,isYandex:!0})),$t.update(i=>s.time&&(i.duration===0||isNaN(i.duration))?{...i,duration:parseFloat(s.time)}:i)),Wa.update(i=>i.map(o=>o.file===e?{...o,...s,isYandex:!0,time:s.time||o.time}:o)))}function $d(e,t){const a=Ge(Qt),s=Ge(Qa),n=Ge(Ts);if(t.file){let o=null;if(n.streamCache&&(o=n.streamCache[t.file],!o)){const l=jn(t.file);l&&(o=n.streamCache[String(l)])}o?(t.title=o.title,t.artist=o.artist,t.album=o.album,t.image=o.image,t.isYandex=!0,t.id=o.id,(e.duration===0||isNaN(e.duration))&&o.time&&(e.duration=parseFloat(o.time))):(t.file.includes("yandex.net")||t.file.includes("get-mp3"))&&Eo(t.file)}const i=t.file&&t.file.startsWith("http");if(i&&!t.isYandex){const o=u=>(u||"").toString().toLowerCase().replace(/[^a-z0-9]/g,""),l=o(t.file),v=o(t.title),d=s.find(u=>{const h=o(u.station||u.file||u.url||(Array.isArray(u)?u[1]:"")),f=o(u.name||(Array.isArray(u)?u[0]:""));return h&&l.includes(h)||f&&v.includes(f)});d?t.stationName=d.name||d[0]:a.stationName&&a.file===t.file&&(t.stationName=a.stationName)}Qt.set(t),$t.update(o=>{const l=e.state==="play",v=performance.now();if(e.state==="pause"||o.state==="pause")return hs(!1),v<er?o:e;if(t.file!==a.file||As)return As=!1,Aa=!1,Ga=1,i&&!t.isYandex&&(e.elapsed=0),hs(l&&(!i||t.isYandex)),e;if(v<er)return o;if(Aa)return Aa=!1,Ga=1,hs(l&&(!i||t.isYandex)),e;if(l&&(!i||t.isYandex)){const d=e.elapsed-o.elapsed;if(Math.abs(d)>2)return Ga=1,e;if(Math.abs(d)<.05)Ga=1;else{let h=d/1.5;Ga=Math.max(.5,Math.min(1.5,1+h))}return{...e,elapsed:o.elapsed}}return hs(!1),e})}function hs(e){e?yn():Nn()}function yn(){Qr||As||(ms=performance.now(),Qr=setInterval(()=>{const e=performance.now();let t=(e-ms)/1e3;t>2&&(t=0),ms=e,$t.update(a=>{if(a.state!=="play")return a;let s=a.elapsed+t*Ga;return a.duration>0&&s>a.duration&&(s=a.duration),{...a,elapsed:s}})},kd))}function Nn(){Qr&&(clearInterval(Qr),Qr=null),Ga=1,ms=0}async function yi(e,t=!1){if(!e||e.length===0)return;Et.set(!0),Aa=!0;const a=5;try{for(let s=0;s<e.length;s+=a){const n=e.slice(s,s+a),i=["command_list_begin"];n.forEach(o=>{i.push(`add "${bs(o.file)}"`)}),i.push("command_list_end"),await We.send(i.join(`
`))}t?(await We.send("play 0"),ze(`Playing ${e.length} tracks`,"success")):ze(`Added ${e.length} tracks`,"success")}catch(s){console.error("[Player] Bulk Action Failed:",s),ze("Error adding tracks","error")}finally{setTimeout(()=>{Et.set(!1),pa()},1500)}}const da={async togglePlay(){const t=Ge($t).state==="play";er=performance.now()+800,$t.update(a=>{const s=t?"pause":"play";return s==="play"?yn():Nn(),{...a,state:s}}),await We.send(t?"pause 1":"play"),setTimeout(pa,900)},async next(){Aa=!0,er=0,await We.send("next"),pa()},async previous(){Aa=!0,er=0,$t.update(e=>({...e,elapsed:0})),await We.send("previous"),pa()},async setVolume(e){$t.update(t=>({...t,volume:e})),await We.send(`setvol ${e}`)},async seek(e){Aa=!0,er=performance.now()+500,$t.update(t=>({...t,elapsed:e})),await We.send(`seekcur ${e}`),setTimeout(pa,600)},async toggleRandom(){const t=!Ge($t).random;$t.update(a=>({...a,random:t})),await We.send(`random ${t?1:0}`)},async toggleRepeat(){const t=!Ge($t).repeat;$t.update(a=>({...a,repeat:t})),await We.send(`repeat ${t?1:0}`)},async playUri(e,t={}){Et.set(!0);const a=bs(e);Aa=!0,$t.update(s=>({...s,state:"play",elapsed:0})),Qt.set({title:t.title||e.split("/").pop(),artist:t.artist||"",album:t.album||"",file:e}),yn();try{const s=await We.send("currentsong"),n=parseInt(oa.parseKeyValue(s).pos),i=await We.send(`addid "${a}"`),o=parseInt(oa.parseKeyValue(i).id);if(isNaN(o))await We.send(`add "${a}"`),await We.send("play");else{const l=isNaN(n)?0:n+1;await We.send(`moveid ${o} ${l}`),await We.send(`playid ${o}`)}}catch(s){console.error("Play error",s),ze("Failed to play","error")}setTimeout(()=>{Et.set(!1),pa()},1200)},async addToQueue(e){try{await We.send(`add "${bs(e)}"`),ze("Added to queue","success")}catch(t){console.error("Add queue error",t),ze("Failed to add","error")}},async playNext(e){Et.set(!0);const t=bs(e);try{const a=await We.send("currentsong"),s=parseInt(oa.parseKeyValue(a).pos||-1);if(s===-1)Et.set(!1),await this.playUri(e);else{const n=await We.send(`addid "${t}"`),i=parseInt(oa.parseKeyValue(n).id);isNaN(i)||(await We.send(`moveid ${i} ${s+1}`),ze("Will play next","success")),setTimeout(()=>Et.set(!1),1e3)}}catch(a){console.error("Play Next error",a),ze("Failed to set next","error"),Et.set(!1)}},async removeFromQueue(e){Et.set(!0),mr&&clearTimeout(mr);try{Wa.update(t=>{const a=[...t];return a.splice(e,1),a}),await We.send(`delete ${e}`)}catch{ze("Failed to remove","error"),Et.set(!1);return}mr=setTimeout(()=>{Et.set(!1)},1e3)},async moveTrack(e,t){if(e!==t){Et.set(!0),mr&&clearTimeout(mr);try{await We.send(`move ${e} ${t}`)}catch(a){console.error("Move failed",a),ze("Move failed","error"),Et.set(!1),pa();return}mr=setTimeout(()=>{Et.set(!1),pa()},2e3)}},async playAllTracks(e){if(!(!e||e.length===0))try{await We.send("stop"),await We.send("clear"),await yi(e,!0)}catch(t){console.error(t)}},async addAllToQueue(e){!e||e.length===0||await yi(e,!1)},async saveQueue(e){if(!e)return;const t=e.replace(/"/g,'\\"');try{await We.send(`save "${t}"`),ze(`Playlist "${e}" saved`,"success")}catch(a){if(a.message.includes("exist")){if(confirm(`Playlist "${e}" exists. Overwrite?`))try{await We.send(`rm "${t}"`),await We.send(`save "${t}"`),ze(`Playlist "${e}" overwritten`,"success")}catch{ze("Failed to overwrite","error")}}else console.error(a)}}},Dr="Favorites";let wi=Promise.resolve();const br=e=>e?e.toLowerCase().replace(/^https?:\/\//,"").replace(/^www\./,"").split("?")[0].replace(/\/$/,""):"";function Td(e){if(e==="Favorites")return"linear-gradient(135deg, hsl(348, 95%, 58%), hsl(348, 90%, 40%))";let t=0;for(let s=0;s<e.length;s++)t=e.charCodeAt(s)+((t<<5)-t);const a=Math.abs(t%360);return`linear-gradient(135deg, hsl(${a}, 60%, 40%), hsl(${(a+40)%360}, 60%, 30%))`}function Md(e){if(e==="Favorites")return"var(--c-heart)";let t=0;for(let s=0;s<e.length;s++)t=e.charCodeAt(s)+((t<<5)-t);return`var(--c-pl-${Math.abs(t%6)})`}const ba={async syncLibrary(){if(Ge(la))return;la.set(!0);const e=new So;e.postMessage({type:"START_SYNC",payload:{url:`http://${Ja.MOODE_IP}/wave-api.php`}}),e.onmessage=t=>{const{type:a,count:s}=t.data;a==="DONE"&&(ze(`Library updated: ${s} tracks`,"success"),la.set(!1),e.terminate()),a==="ERROR"&&(ze("Sync Failed","error"),la.set(!1),e.terminate())},e.onerror=()=>{la.set(!1),e.terminate()}},async loadPlaylists(){un.set(!0);try{const e=await We.send("listplaylists"),a=oa.parsePlaylists(e).map(s=>({...s,color:Td(s.name),colorVar:Md(s.name)}));Ds.set(a)}catch(e){console.error(e)}finally{un.set(!1)}},async createPlaylistFromQueue(e){if(!e)return;const t=e.replace(/"/g,'\\"');try{await We.send(`save "${t}"`),ze(`Playlist "${e}" created`,"success"),await this.loadPlaylists()}catch(a){console.error(a),ze("Failed to create playlist","error")}},async deletePlaylist(e){if(!e)return;const t=e.replace(/"/g,'\\"');try{await We.send(`rm "${t}"`),ze("Playlist deleted","info"),await this.loadPlaylists()}catch(a){console.error(a),ze("Delete failed","error")}},async renamePlaylist(e,t){if(!e||!t)return;const a=e.replace(/"/g,'\\"'),s=t.replace(/"/g,'\\"');try{await We.send(`rename "${a}" "${s}"`),ze("Playlist renamed","success"),await this.loadPlaylists()}catch(n){console.error(n),ze("Rename failed","error")}},async openPlaylistDetails(e){if(!e)return;fn.set(!0);const t=e.replace(/"/g,'\\"');try{const a=await We.send(`listplaylistinfo "${t}"`),s=oa.parseTracks(a),n=s.map(l=>l.file).filter(l=>l&&!l.startsWith("http"));let i=new Map;if(n.length>0)try{i=await Ua.getFilesMap(n)}catch(l){console.warn("Failed to hydrate playlist from DB",l)}const o=s.map(l=>{const v=i.get(l.file);return v?{...l,thumbHash:v.thumbHash,qualityBadge:v.qualityBadge,title:l.title||v.title,artist:l.artist||v.artist,album:l.album||v.album,_uid:vi()}:{...l,_uid:vi()}});Vr.set(o)}catch(a){console.error(a),ze("Could not load playlist","error")}finally{fn.set(!1)}},async movePlaylistTrack(e,t,a){const s=e.replace(/"/g,'\\"');try{await We.send(`playlistmove "${s}" ${t} ${a}`)}catch{ze("Move failed","error")}},async removeFromPlaylist(e,t){const a=e.replace(/"/g,'\\"');try{await We.send(`playlistdelete "${a}" ${t}`),ze("Track removed","success")}catch{ze("Delete failed","error")}},async loadFavorites(){try{const e=await We.send(`listplaylistinfo "${Dr}"`),t=oa.parseTracks(e),a=new Set;t.forEach(s=>{s.file&&a.add(s.file)}),Ya.set(a)}catch{Ya.set(new Set)}},async toggleFavorite(e){if(!e||!e.file)return;const t=e.file,a=t.replace(/"/g,'\\"'),s=t.startsWith("http"),n=Ge(Ya);let i=n.has(t);if(!i&&s){const o=br(t);for(const l of n)if(br(l)===o){i=!0;break}}Ya.update(o=>{const l=new Set(o);if(i){if(l.delete(t),s){const v=br(t);for(const d of l)br(d)===v&&l.delete(d)}}else l.add(t);return l}),wi=wi.then(async()=>{try{const o=await We.send(`listplaylistinfo "${Dr}"`),l=oa.parseTracks(o);let v=[];if(l.forEach((d,u)=>{let h=!1;(d.file===t||s&&br(d.file)===br(t)||s&&(d.file.includes(t)||t.includes(d.file)))&&(h=!0),h&&v.push(u)}),i){if(v.length>0){v.sort((d,u)=>u-d);for(const d of v)await We.send(`playlistdelete "${Dr}" ${d}`);ze("Removed from Favorites","info")}}else v.length>0?console.log("[Fav] Track already exists. Skipping."):(await We.send(`playlistadd "${Dr}" "${a}"`),l.length>0&&await We.send(`playlistmove "${Dr}" ${l.length} 0`),ze("Added to Favorites","success"))}catch(o){console.error("Fav action failed",o),ze("Action failed","error")}finally{await this.loadFavorites()}})}};function $o(){We.connect(),xd(),ba.loadPlaylists(),ba.loadFavorites()}function Cs(e){return We.send(e)}const{togglePlay:Os,toggleRandom:nr,toggleRepeat:ir,setVolume:Ca,seek:Dn,addToQueue:Ad,playNext:Cd,removeFromQueue:Pd,moveTrack:Ld,saveQueue:zd,playAllTracks:Ps,addAllToQueue:On,playUri:Rd}=da,{syncLibrary:Id,loadRadioStations:jd,loadPlaylists:Fn,openPlaylistDetails:To,toggleFavorite:Mo,loadFavorites:Nd,removeFromPlaylist:Ao,movePlaylistTrack:Co}=ba;function as(e){const t=Ge(Qt),a=Ge(Qa),s=Ge(Ns);if(t.file&&t.file.startsWith("http")&&a.length>0&&!t.isYandex&&(e==="next"||e==="previous")){let i=a.findIndex(l=>l.name===s);i===-1&&(i=0);let o;e==="next"?(o=i+1,o>=a.length&&(o=0)):(o=i-1,o<0&&(o=a.length-1)),qn(a[o])}else e==="next"&&da.next(),e==="previous"&&da.previous()}function qn(e){if(!e)return;Ns.set(e.name);const t=e[1]||e.station||e.file||e.url;t&&da.playUri(t,{title:e.name,artist:e.genre||"Radio Stream",stationName:e.name})}function Fs(e){e&&(Ns.set(null),da.playUri(e.file,{title:e.title,artist:e.artist,album:e.album,stationName:null}))}const Dd=Object.freeze(Object.defineProperty({__proto__:null,addAllToQueue:On,addToQueue:Ad,connect:$o,loadFavorites:Nd,loadPlaylists:Fn,loadRadioStations:jd,movePlaylistTrack:Co,moveTrack:Ld,nav:as,openPlaylistDetails:To,playAllTracks:Ps,playNext:Cd,playStation:qn,playTrackOptimistic:Fs,playUri:Rd,removeFromPlaylist:Ao,removeFromQueue:Pd,runMpdRequest:Cs,saveQueue:zd,seek:Dn,setVolume:Ca,syncLibrary:Id,toggleFavorite:Mo,togglePlay:Os,toggleRandom:nr,toggleRepeat:ir},Symbol.toStringTag,{value:"Module"})),jt={async request(e,t={}){const a=new URL(window.location.origin+Ka.YANDEX);a.searchParams.append("action",e);for(const n in t)t[n]!==void 0&&t[n]!==null&&a.searchParams.append(n,t[n]);const s=await fetch(a);if(!s.ok)throw new Error("API Error");return await s.json()},async search(e){return await this.request("search",{query:e})},async getUserPlaylists(){return await this.request("get_playlists")},async getLanding(){return await this.request("get_landing")},async getStationsDashboard(){return await this.request("get_stations_dashboard")},async getArtistDetails(e){return await this.request("get_artist_details",{id:e})},async getAlbumDetails(e){return await this.request("get_album_details",{id:e})},async getPlaylistTracks(e,t,a=0){return await this.request("get_playlist_tracks",{uid:e,kind:t,offset:a})},async getFavoritesIds(){return await this.request("get_favorites_ids")},async playRadio(e){return e?await this.request("play_station",{station:"track:"+e}):await this.request("play_station",{station:"user:onetwo"})},async playStation(e){return await this.request("play_station",{station:e})},async playTrack(e){return await this.request("play_track",{id:e})},async toggleLike(e,t){const a=t?"dislike":"like";return await this.request(a,{track_id:e})}};function Bn(e,t=2e3){let a;const s=i=>{i.type==="mousedown"&&i.button!==0||(a=setTimeout(()=>{e.dispatchEvent(new CustomEvent("longpress",{detail:{originalEvent:i}}))},t))},n=()=>{clearTimeout(a)};return e.addEventListener("mousedown",s),e.addEventListener("touchstart",s,{passive:!0}),e.addEventListener("mouseup",n),e.addEventListener("mouseleave",n),e.addEventListener("touchend",n),e.addEventListener("touchcancel",n),e.addEventListener("touchmove",n),{destroy(){e.removeEventListener("mousedown",s),e.removeEventListener("touchstart",s),e.removeEventListener("mouseup",n),e.removeEventListener("mouseleave",n),e.removeEventListener("touchend",n),e.removeEventListener("touchcancel",n),e.removeEventListener("touchmove",n)}}}var Od=k('<div class="drag-handle svelte-5cs2hz" title="Drag to reorder"><div class="icon-small svelte-5cs2hz"><!></div></div>'),Fd=k('<div class="eq-anim svelte-5cs2hz"><span class="bar b1 svelte-5cs2hz"></span> <span class="bar b2 svelte-5cs2hz"></span> <span class="bar b3 svelte-5cs2hz"></span></div>'),qd=k('<div class="icon-small svelte-5cs2hz"><!></div>'),Bd=k('<div class="icon-small svelte-5cs2hz"><!></div>'),Yd=k('<div class="icon-small accent svelte-5cs2hz"><!></div>'),Ud=k('<span class="num svelte-5cs2hz"> </span>'),Hd=k('<button class="num-box svelte-5cs2hz"><!></button>'),Vd=k('<div slot="fallback" class="icon-ph svelte-5cs2hz"><!></div>'),Wd=k('<span class="meta-tag quality svelte-5cs2hz"> </span>'),Qd=k('<span class="yandex-icon-inline svelte-5cs2hz" title="Yandex Music"><!></span>'),Xd=k('<button class="btn-icon small remove svelte-5cs2hz"><!></button>'),Kd=k('<div class="dur svelte-5cs2hz"> </div>'),Gd=k('<div role="button" tabindex="0"><div class="left svelte-5cs2hz"><!> <div class="thumb svelte-5cs2hz"><!></div></div> <div class="info svelte-5cs2hz"><div class="title-row svelte-5cs2hz"><div class="title text-ellipsis svelte-5cs2hz"> </div> <!></div> <div> </div></div> <div class="right svelte-5cs2hz"><!> <button class="btn-icon small context-menu-btn svelte-5cs2hz"><!></button> <button><!></button> <!></div></div>');function Pr(e,t){Tt(t,!1);const a=()=>Ee(ca,"$yandexFavorites",l),s=()=>Ee(Ya,"$favorites",l),n=()=>Ee(ut,"$navigationStack",l),i=()=>Ee(At,"$activeMenuTab",l),o=()=>Ee(Qa,"$stations",l),[l,v]=Dt(),d=T(),u=T(),h=T(),f=T(),p=T(),E=T(),$=T(),w=T(),x=T(),U=T(),ne=T(),de=T(),H=T(),ye=T(),le=T(),Q=T(),Le=T(),Oe=T();let P=xt(t,"track",8),j=xt(t,"index",8),L=xt(t,"isEditable",8,!1),_e=xt(t,"playingIndex",24,()=>-1),V=xt(t,"playingFile",8,null),xe=xt(t,"isPlaying",8,!1);const B=zn();let F=T(!1),$e=T(!1);function K(q){if(r(w))return"â";const ce=parseFloat(q);if(!ce||isNaN(ce)||ce===0)return"0:00";const he=Math.round(ce),He=Math.floor(he/60),Pe=he%60;return`${He}:${Pe.toString().padStart(2,"0")}`}function ie(q){q.stopPropagation(),r(E)?Os():B("play")}function ke(){return r(h)?.view==="details"&&r(h).data?.name?{type:"playlist",playlistName:r(h).data.name,index:j()}:r(f)?{type:"queue",index:j()}:{type:"general"}}function be(q){q.stopPropagation(),Jr(q,P(),ke())}function Me(q){L()||Jr(q.detail.originalEvent,P(),ke())}function z(q){q.stopPropagation(),r(d)&&P().artist?(At.set("yandex"),window.location.hash!=="#/yandex"&&history.pushState(null,"","#/yandex"),ut.set([{view:"root"},{view:"yandex_search",data:{query:P().artist}}])):!r(w)&&P().artist&&(At.set("artists"),window.location.hash!=="#/artists"&&history.pushState(null,"","#/artists"),ut.set([{view:"root"}]),qt("albums_by_artist",{name:P().artist})),B("artistclick",P())}async function pe(q){if(q.stopPropagation(),r(d))try{const ce=r(u);ce?(ca.update(he=>(he.delete(String(P().id)),he)),ze("Removed from Yandex Likes","info")):(ca.update(he=>(he.add(String(P().id)),he)),ze("Added to Yandex Likes","success")),await jt.toggleLike(P().id,ce)}catch{ze("Failed to update Yandex like","error");try{const he=await jt.getFavoritesIds();he&&he.ids&&ca.set(new Set(he.ids.map(String)))}catch{}}else Mo(P())}te(()=>I(P()),()=>{P()&&_($e,!1)}),te(()=>I(P()),()=>{_(d,P().isYandex||P().service==="yandex")}),te(()=>(r(d),a(),I(P()),s()),()=>{_(u,r(d)?a().has(String(P().id)):s().has(P().file))}),te(()=>n(),()=>{_(h,n()[n().length-1])}),te(()=>(r(h),i()),()=>{_(f,r(h)?.view==="queue"||r(h)?.view==="root"&&i()==="queue")}),te(()=>(r(f),I(j()),I(_e())),()=>{_(p,r(f)?Number(j())===_e():!1)}),te(()=>(I(P()),I(V())),()=>{_(E,P().file===V())}),te(()=>(r(E),r(p)),()=>{_($,r(E)&&!r(p))}),te(()=>(I(P()),r(d)),()=>{_(w,P().file&&(String(P().file).startsWith("http")||String(P().file).includes("RADIO"))&&!r(d))}),te(()=>(r(p),I(xe()),r(F)),()=>{_(x,r(p)&&xe()&&r(F))}),te(()=>(r(p),I(xe()),r(F)),()=>{_(U,r(p)&&xe()&&!r(F))}),te(()=>(r(p),I(xe()),r(F)),()=>{_(ne,r(p)&&!xe()&&!r(F))}),te(()=>(r(F),r(x)),()=>{_(de,r(F)&&!r(x))}),te(()=>I(P()),()=>{_(H,P().title||P().file?.split("/").pop())}),te(()=>I(P()),()=>{_(ye,P().artist||"Unknown")}),te(()=>I(P()),()=>{_(le,K(P().time||P().duration))}),te(()=>I(P()),()=>{_(Q,P().qualityBadge?P().qualityBadge.split(" ")[0]:null)}),te(()=>{},()=>{_(Le,null)}),te(()=>(r($e),I(P()),o(),r(Le),es),()=>{_(Oe,r($e)?Cr(P(),o(),r(Le)):es(P(),"sm",o(),r(Le)))}),Xt(),zt();var me=Gd();let Ne;var D=c(me),O=c(D);{var J=q=>{var ce=Od(),he=c(ce),He=c(he);Z(He,()=>(I(y),m(()=>y.DRAG_HANDLE))),A("mousedown",ce,Pe=>B("startdrag",Pe)),A("touchstart",ce,Pe=>B("startdrag",Pe),void 0,!0),A("click",ce,ta(function(Pe){Zr.call(this,t,Pe)})),b(q,ce)},ae=q=>{var ce=Hd(),he=c(ce);{var He=Fe=>{var Ie=Fd();b(Fe,Ie)},Pe=Fe=>{var Ie=nt(),Be=je(Ie);{var Ye=qe=>{var Ue=qd(),Je=c(Ue);Z(Je,()=>(I(y),m(()=>y.PAUSE))),b(qe,Ue)},De=qe=>{var Ue=nt(),Je=je(Ue);{var et=st=>{var dt=Bd(),mt=c(dt);Z(mt,()=>(I(y),m(()=>y.PLAY))),b(st,dt)},tt=st=>{var dt=nt(),mt=je(dt);{var ct=bt=>{var Kt=Yd(),Ze=c(Kt);Z(Ze,()=>(I(y),m(()=>y.PLAY))),b(bt,Kt)},vt=bt=>{var Kt=Ud(),Ze=c(Kt);se(()=>re(Ze,j()+1)),b(bt,Kt)};C(mt,bt=>{r(ne)?bt(ct):bt(vt,!1)},!0)}b(st,dt)};C(Je,st=>{r(de)?st(et):st(tt,!1)},!0)}b(qe,Ue)};C(Be,qe=>{r(x)?qe(Ye):qe(De,!1)},!0)}b(Fe,Ie)};C(he,Fe=>{r(U)?Fe(He):Fe(Pe,!1)})}A("click",ce,ie),b(q,ce)};C(O,q=>{L()?q(J):q(ae,!1)})}var S=g(O,2),R=c(S);Zt(R,{get src(){return r(Oe)},get alt(){return r(H)},radius:"4px",$$events:{error:()=>_($e,!0)},$$slots:{fallback:(q,ce)=>{var he=Vd(),He=c(he);Z(He,()=>(r(w),I(y),m(()=>r(w)?y.RADIO:y.ALBUMS))),gt(1,he,()=>St),b(q,he)}}});var oe=g(D,2),X=c(oe),ve=c(X),Ve=c(ve),Qe=g(ve,2);{var M=q=>{var ce=Wd(),he=c(ce);se(()=>re(he,r(Q))),b(q,ce)};C(Qe,q=>{r(Q)&&!r(w)&&q(M)})}var N=g(X,2);let W;var ge=c(N),Re=g(oe,2),Se=c(Re);{var Te=q=>{var ce=Qd(),he=c(ce);Z(he,()=>(I(y),m(()=>y.YANDEX))),b(q,ce)};C(Se,q=>{r(d)&&q(Te)})}var we=g(Se,2),G=c(we);Z(G,()=>(I(y),m(()=>y.DOTS)));var ee=g(we,2);let Y;var ue=c(ee);Z(ue,()=>(r(u),I(y),m(()=>r(u)?y.HEART_FILLED:y.HEART)));var fe=g(ee,2);{var Xe=q=>{var ce=Xd(),he=c(ce);Z(he,()=>(I(y),m(()=>y.REMOVE))),A("click",ce,ta(()=>B("remove",{index:j()}))),b(q,ce)},Ce=q=>{var ce=Kd(),he=c(ce);se(()=>re(he,r(le))),b(q,ce)};C(fe,q=>{L()?q(Xe):q(Ce,!1)})}Yt(()=>A("click",me,()=>!r(p)&&B("play"))),Yt(()=>A("mouseenter",me,()=>_(F,!0))),Yt(()=>A("mouseleave",me,()=>_(F,!1))),An(me,q=>Bn?.(q)),Yt(()=>A("longpress",me,Me)),se(()=>{Ne=at(me,1,"row svelte-5cs2hz",null,Ne,{active:r(p),striped:r($),editable:L()}),Wt(ve,"title",r(H)),re(Ve,r(H)),W=at(N,1,"artist text-ellipsis svelte-5cs2hz",null,W,{link:!r(w)||r(d)}),re(ge,r(ye)),Y=at(ee,1,"btn-icon small svelte-5cs2hz",null,Y,{liked:r(u)})}),A("click",N,z),A("click",we,be),A("click",ee,ta(pe)),b(e,me),Mt(),v()}const ps=100,ki=5,xi=25,Si=3;function Zd({tracksStore:e,onMoveTrack:t}){const a=Ke(!1),s=Ke(!1),n=Ke(!1),i=Ke(null),o=Ke(null),l=Ke(null),v=Ke({x:0,y:0,width:0,height:0,grabOffsetX:0,grabOffsetY:0}),d=Ke(null);let u=!1,h=0,f=0,p=0,E=0;const $={scrollContainer:null,listBodyContainer:null};let w=null;function x(j,L,_e){const V=j.detail;if(V.button===2||(window.getSelection&&window.getSelection().removeAllRanges(),!$.scrollContainer))return;const B=$.scrollContainer.querySelectorAll(".row-wrapper")[L];if(!B)return;const F=B.getBoundingClientRect(),$e=V.touches?V.touches[0].clientX:V.clientX,K=V.touches?V.touches[0].clientY:V.clientY,ie=$e-F.left,ke=K-F.top;u=!0,a.set(!1),s.set(!1),h=$e,f=K,p=$e,E=K,i.set(L),o.set(L),d.set(_e),l.set(null),v.set({x:$e,y:K,width:F.width,height:F.height,grabOffsetX:ie,grabOffsetY:ke})}function U(j){if(!u||Ge(s))return;const L=j.touches?j.touches[0].clientX:j.clientX,_e=j.touches?j.touches[0].clientY:j.clientY;if(!Ge(a)){const V=Math.abs(L-h),xe=Math.abs(_e-f);if(V<Si&&xe<Si)return;a.set(!0)}j.cancelable&&j.preventDefault(),p=L,E=_e,v.update(V=>({...V,x:p,y:E})),Q(E),ne()}function ne(){if(!$.listBodyContainer)return;const j=$.listBodyContainer.getBoundingClientRect(),L=Ge(v),V=E-j.top-L.grabOffsetY+L.height/2,xe=Ge(e).length;if(V<0){o.set(0);return}if(V>j.height){o.set(xe);return}const B=Array.from($.listBodyContainer.querySelectorAll(".row-wrapper"));let F=-1,$e=1/0;B.forEach((K,ie)=>{const ke=K.offsetTop+K.offsetHeight/2,be=Math.abs(V-ke);be<$e&&($e=be,F=ie)}),F!==-1&&o.set(F)}function de(j){if(u){if(u=!1,!Ge(a)){ye();return}H()}}async function H(){Oe(),ne(),a.set(!1),s.set(!0);const j=Ge(o);if($.listBodyContainer&&j!==null){const F=$.listBodyContainer.querySelectorAll(".row-wrapper"),$e=$.listBodyContainer.getBoundingClientRect(),K=F[j];let ie=0,ke=0,be=!1;if(K)ie=$e.top+K.offsetTop,ke=$e.left+K.offsetLeft,be=!0;else if(j>=F.length&&F.length>0){const Me=F[F.length-1];ie=$e.top+Me.offsetTop+Me.offsetHeight,ke=$e.left+Me.offsetLeft,be=!0}else F.length===0&&(ie=$e.top,ke=$e.left,be=!0);be&&v.update(Me=>({...Me,y:ie+Me.grabOffsetY,x:ke+Me.grabOffsetX}))}await new Promise(F=>setTimeout(F,250)),n.set(!0),await Er();const L=Ge(i),_e=Ge(e).length;let V=Math.max(0,Math.min(j,_e)),xe=V;if(L!==null&&L!==V){const F=[...Ge(e)],[$e]=F.splice(L,1);xe=Math.max(0,Math.min(xe,F.length)),F.splice(xe,0,$e),e.set(F),t&&t(L,xe),i.set(xe)}await Er(),d.set(null),i.set(null),o.set(null),s.set(!1);const B=L!==V?xe:L;l.set(B),await Er(),requestAnimationFrame(()=>{requestAnimationFrame(()=>{n.set(!1),setTimeout(()=>{l.set(null)},300)})})}function ye(){u=!1,le()}function le(){a.set(!1),s.set(!1),i.set(null),o.set(null),d.set(null),Oe()}function Q(j){if(!$.scrollContainer)return;const{top:L,bottom:_e}=$.scrollContainer.getBoundingClientRect(),V=j-L,xe=_e-j;Oe();let B=0;if(V<ps&&V>0){const F=1-V/ps;B=-(ki+xi*(F*F))}else if(xe<ps&&xe>0){const F=1-xe/ps;B=ki+xi*(F*F)}B!==0&&Le(B)}function Le(j){w||(w=requestAnimationFrame(function L(){$.scrollContainer&&($.scrollContainer.scrollTop+=j,Ge(a)&&(v.update(_e=>({..._e,x:p,y:E})),ne(),w=requestAnimationFrame(L)))}))}function Oe(){w&&(cancelAnimationFrame(w),w=null)}function P(j,L,_e,V,xe,B){return B||!L&&!_e||V===null||xe===null?"":j===V?"opacity: 0; pointer-events: none;":V===xe?"":V<xe&&j>V&&j<=xe?"transform: translateY(-100%);":V>xe&&j>=xe&&j<V?"transform: translateY(100%);":""}return{isDragging:a,isDropping:s,isReordering:n,draggingIndex:i,hoverIndex:o,justDroppedIndex:l,draggedItemData:d,ghostCoords:v,refs:$,onDragInit:x,onPointerMove:U,onPointerUp:de,getRowStyle:P,cancelDrag:ye}}var Jd=k('<div><div style="pointer-events: none; width: 100%; height: 100%;" class="svelte-ym6b2"><!></div></div>'),ev=k('<div class="skeleton-row svelte-ym6b2"><div class="sk-left svelte-ym6b2"><!> <!></div> <div class="sk-info svelte-ym6b2"><!> <!></div> <div class="sk-right svelte-ym6b2"><!></div></div>'),tv=k('<div class="skeletons-wrapper svelte-ym6b2"></div>'),av=k("<div><!></div>"),rv=k('<div class="content-padded svelte-ym6b2" style="text-align: center; opacity: 0.5;"> </div>'),sv=k("<!> <!> <!>",1),nv=k('<div><!> <div class="list-body svelte-ym6b2"><!> <!></div></div>');function ls(e,t){Tt(t,!1);const a=()=>Ee(ut,"$navigationStack",p),s=()=>Ee(At,"$activeMenuTab",p),n=()=>Ee(Oe,"$isDragging",p),i=()=>Ee(P,"$isDropping",p),o=()=>Ee(xe,"$draggedItemData",p),l=()=>Ee(B,"$ghostCoords",p),v=()=>Ee(L,"$draggingIndex",p),d=()=>Ee($(),"$itemsStore",p),u=()=>Ee(V,"$justDroppedIndex",p),h=()=>Ee(j,"$isReordering",p),f=()=>Ee(_e,"$hoverIndex",p),[p,E]=Dt();let $=xt(t,"itemsStore",8),w=xt(t,"isEditMode",8,!1),x=xt(t,"isLoading",8,!1),U=xt(t,"emptyText",8,"List is empty"),ne=xt(t,"onMoveItem",8,(D,O)=>{}),de=T(""),H=T(0),ye=T(!1);Na(async()=>{_(H,id(r(de))),!x()&&r(H)>0&&r(Q).refs.scrollContainer&&(await Er(),ds(Q,r(Q).refs.scrollContainer.scrollTop=r(H)),_(ye,!0))});async function le(){await Er(),r(Q).refs.scrollContainer&&(ds(Q,r(Q).refs.scrollContainer.scrollTop=r(H)),_(ye,!0))}Ln(()=>{r(Q).cancelDrag(),r(Q).refs.scrollContainer&&nd(r(de),r(Q).refs.scrollContainer.scrollTop)});const Q=T(Zd({tracksStore:$(),onMoveTrack:(D,O)=>{ne()(D,O)}})),Le=r(Q),Oe=Le.isDragging,P=Le.isDropping,j=Le.isReordering,L=Le.draggingIndex,_e=Le.hoverIndex,V=Le.justDroppedIndex,xe=Le.draggedItemData,B=Le.ghostCoords,F=T(Le.refs);function $e(D,O,J){w()&&r(Q).onDragInit(D,O,J)}te(()=>(a(),s()),()=>{const D=a(),O=D[D.length-1],J=s();if(O&&O.view==="root")_(de,`root_${J}`);else if(O){const ae=O.data?O.data.name||O.data:"unknown";_(de,`${O.view}_${ae}`)}}),te(()=>(I(x()),r(ye),r(H),r(Q)),()=>{!x()&&!r(ye)&&r(H)>0&&r(Q).refs.scrollContainer&&le()}),Xt(),zt();var K=nv();A("mousemove",qa,function(...D){r(Q).onPointerMove?.apply(this,D)}),A("mouseup",qa,function(...D){r(Q).onPointerUp?.apply(this,D)}),A("touchmove",qa,function(...D){r(Q).onPointerMove?.apply(this,D)},void 0,!1),A("touchend",qa,function(...D){r(Q).onPointerUp?.apply(this,D)}),A("touchcancel",qa,function(...D){r(Q).onPointerUp?.apply(this,D)});let ie;var ke=c(K);{var be=D=>{var O=Jd();let J;var ae=c(O),S=c(ae);qr(S,t,"row",{get item(){return o()},get index(){return v()},isGhost:!0,startDrag:()=>{}}),se(()=>{J=at(O,1,"floating-item svelte-ym6b2",null,J,{dropping:i()}),ft(O,`
            top: ${l(),m(()=>l().y-l().grabOffsetY)??""}px; 
            left: ${l(),m(()=>l().x-l().grabOffsetX)??""}px;
            width: ${l(),m(()=>l().width)??""}px; 
            height: ${l(),m(()=>l().height)??""}px;
        `)}),b(D,O)};C(ke,D=>{(n()||i())&&o()&&D(be)})}var Me=g(ke,2),z=c(Me);qr(z,t,"header",{});var pe=g(z,2);{var me=D=>{var O=tv();wt(O,4,()=>Array(10),Bt,(J,ae)=>{var S=ev(),R=c(S),oe=c(R);ea(oe,{width:"24px",height:"24px",radius:"4px",style:"opacity: 0.3"});var X=g(oe,2);ea(X,{width:"40px",height:"40px",radius:"4px",style:"margin-left: 12px;"});var ve=g(R,2),Ve=c(ve);ea(Ve,{width:"40%",height:"14px",radius:"4px",style:"margin-bottom: 6px;"});var Qe=g(Ve,2);ea(Qe,{width:"25%",height:"12px",radius:"4px",style:"opacity: 0.6"});var M=g(ve,2),N=c(M);ea(N,{width:"30px",height:"12px",radius:"4px"}),b(J,S)}),b(D,O)},Ne=D=>{var O=sv(),J=je(O);wt(J,3,d,(oe,X)=>oe._uid||X,(oe,X,ve)=>{var Ve=av();let Qe;var M=c(Ve);qr(M,t,"row",{get item(){return r(X)},get index(){return r(ve)},isGhost:!1,startDrag:N=>$e(N,r(ve),r(X))}),se(N=>{Qe=at(Ve,1,"row-wrapper svelte-ym6b2",null,Qe,{"ghost-placeholder":v()===r(ve)&&(n()||i()),"just-dropped":u()===r(ve),"no-transition":h()}),ft(Ve,N)},[()=>(r(Q),I(r(ve)),n(),i(),v(),f(),h(),m(()=>r(Q).getRowStyle(r(ve),n(),i(),v(),f(),h())))]),b(oe,Ve)});var ae=g(J,2);{var S=oe=>{var X=rv(),ve=c(X);se(()=>re(ve,U())),b(oe,X)};C(ae,oe=>{d(),m(()=>d().length===0)&&oe(S)})}var R=g(ae,2);qr(R,t,"footer",{}),b(D,O)};C(pe,D=>{x()?D(me):D(Ne,!1)})}Ia(Me,D=>ds(F,r(F).listBodyContainer=D),()=>r(F)?.listBodyContainer),Ia(K,D=>ds(F,r(F).scrollContainer=D),()=>r(F)?.scrollContainer),se(()=>ie=at(K,1,"base-list-scroll-container svelte-ym6b2",null,ie,{dragging:n()})),gt(1,Me,()=>St,()=>({duration:200})),b(e,K),Mt(),E()}var iv=k('<div slot="fallback" class="icon-fallback svelte-1eh2rsb"><!></div>'),ov=k('<span class="meta-tag svelte-1eh2rsb"> </span>'),lv=k('<div class="header-subtitle-row svelte-1eh2rsb"><h2 class="header-sub-text svelte-1eh2rsb"> </h2> <!></div>'),cv=k('<span class="meta-tag svelte-1eh2rsb"> </span>'),dv=k('<span class="meta-tag svelte-1eh2rsb"> </span>'),vv=k('<span class="meta-tag quality svelte-1eh2rsb"> </span>'),uv=k('<div slot="header" class="content-padded svelte-1eh2rsb"><div class="view-header svelte-1eh2rsb"><div class="header-art svelte-1eh2rsb"><div style="width: 100%; height: 100%;" class="svelte-1eh2rsb"><!></div></div> <div class="header-info svelte-1eh2rsb"><div class="header-text-group svelte-1eh2rsb"><div class="header-label svelte-1eh2rsb"> </div> <h1 class="header-title svelte-1eh2rsb"> </h1> <!> <div class="meta-badges svelte-1eh2rsb"><!> <!> <!></div></div> <div class="header-actions svelte-1eh2rsb"><button class="btn-primary svelte-1eh2rsb"> </button> <button class="btn-secondary svelte-1eh2rsb"> </button></div></div></div></div>'),fv=k('<div slot="row" class="svelte-1eh2rsb"><!></div>'),hv=k("<button> </button>"),pv=k('<div class="sort-backdrop svelte-1eh2rsb"></div> <div class="sort-menu svelte-1eh2rsb"></div>',1),gv=k('<div class="sort-wrapper svelte-1eh2rsb"><button class="sort-trigger svelte-1eh2rsb"><span class="svelte-1eh2rsb"> </span> <span class="sort-trigger-icon svelte-1eh2rsb"><!></span></button> <!></div>'),_v=k('<div class="music-card skeleton-card svelte-1eh2rsb"><div class="card-img-container svelte-1eh2rsb"><!></div> <div class="card-title svelte-1eh2rsb" style="margin-top: 12px;"><!></div> <div class="card-sub-row svelte-1eh2rsb" style="margin-top: 6px;"><!></div></div>'),mv=k('<div class="music-grid svelte-1eh2rsb"></div>'),bv=k('<div class="group-header header-label svelte-1eh2rsb"> </div>'),yv=k('<div slot="fallback" class="icon-fallback svelte-1eh2rsb"><!></div>'),wv=k('<div class="card-sub text-ellipsis svelte-1eh2rsb"> </div>'),kv=k('<div class="card-badge svelte-1eh2rsb"> </div>'),xv=k('<div class="card-badge quality svelte-1eh2rsb"> </div>'),Sv=k('<div class="music-card svelte-1eh2rsb" role="button" tabindex="0"><div class="card-img-container svelte-1eh2rsb"><!> <div class="play-overlay svelte-1eh2rsb"><span class="overlay-icon svelte-1eh2rsb"><!></span></div></div> <div class="card-title svelte-1eh2rsb"> </div> <div class="card-sub-row svelte-1eh2rsb"><!> <!> <!></div></div>'),Ev=k('<div class="empty-text svelte-1eh2rsb">No results found</div>'),$v=k('<div class="music-grid svelte-1eh2rsb"></div>'),Tv=k('<div class="content-padded svelte-1eh2rsb"><div class="search-input-container svelte-1eh2rsb"><span class="search-icon svelte-1eh2rsb"><!></span> <input type="text" class="svelte-1eh2rsb"/> <!></div> <!></div>'),Mv=k("<div><!></div>");function Av(e,t){Tt(t,!1);const a=()=>Ee(u,"$itemsStore",n),s=()=>Ee(ut,"$navigationStack",n),[n,i]=Dt(),o=T(),l=T(),v=T();let d=xt(t,"activeCategory",8,"artists");const u=Ke([]);let h=T(!0),f=T(""),p=T("name"),E=T(!1);const $=[{id:"name",label:"A-Z"},{id:"artist",label:"Artist"},{id:"year",label:"Oldest"},{id:"year_desc",label:"Newest"}];let w=T(!1),x=T(!1),U=T(null),ne=T(""),de=T(""),H=T(""),ye=T(0),le=0;function Q(){_(E,!r(E))}function Le(K){_(p,K),_(E,!1)}function Oe(K,ie){if(!K||K.length===0)return[];const ke=[...K].sort((be,Me)=>{switch(ie){case"name":return be.displayName.localeCompare(Me.displayName,void 0,{sensitivity:"base"});case"artist":const z=be.artist||"",pe=Me.artist||"",me=z.localeCompare(pe,void 0,{sensitivity:"base"});return me!==0?me:(parseInt(be.year)||0)-(parseInt(Me.year)||0);case"year":return(parseInt(be.year)||0)-(parseInt(Me.year)||0);case"year_desc":return(parseInt(Me.year)||0)-(parseInt(be.year)||0);default:return 0}});if(ie==="artist"){const be=[];let Me=null;return ke.forEach(z=>{const pe=z.artist||"Unknown Artist";pe!==Me&&(be.push({_uid:`header-${pe}`,isHeader:!0,title:pe}),Me=pe),be.push(z)}),be}return ke}async function P(K,ie){if(!ie)return;const ke=++le;_(h,!0),u.set([]),_(U,ie.data),_(ne,""),_(de,""),_(H,""),_(ye,0),console.log(`[LibraryView #${ke}] Start loading:`,ie);try{let be=[];if(ie.view==="root")be=K==="artists"?await Ua.getArtists():await Ua.getAlbums();else if(ie.view==="albums_by_artist"){const z=ie.data.name||ie.data;be=await Ua.getArtistAlbums(z),_(p,"year")}else if(ie.view==="tracks_by_album"){const z=ie.data.name||ie.data,pe=ie.data.artist;be=await Ua.getAlbumTracks(z,pe)}if(ke!==le){console.warn(`[LibraryView #${ke}] Request cancelled (stale).`);return}const Me=be.map((z,pe)=>{const Ne=typeof z=="string"?{name:z}:z;let D=String(Ne.year||"");return D.length>4&&(D=D.substring(0,4)),{...Ne,displayName:Ne.name||Ne.title||Ne.artist||"Unknown",thumbFile:Ne.file||null,year:D,_uid:(Ne.file||Ne.name||pe)+K+ie.view}});if(console.log(`[LibraryView #${ke}] Setting ${Me.length} items.`),u.set(Me),ie.view==="tracks_by_album"&&Me.length>0){_(U,Me[0]),_(ye,Me.length),_(H,Me[0].year);const z=Me.reduce((pe,me)=>pe+(me.time||0),0);if(z>0){const pe=Math.floor(z/3600),me=Math.floor(z%3600/60);_(ne,pe>0?`${pe} hr ${me} min`:`${me} min`)}Me[0].qualityBadge&&_(de,Me[0].qualityBadge)}}catch(be){ke===le&&(console.error(be),u.set([]))}finally{ke===le&&_(h,!1)}}function j(K){r(v).view==="root"?d()==="artists"?qt("albums_by_artist",K):qt("tracks_by_album",K):r(v).view==="albums_by_artist"&&qt("tracks_by_album",K)}function L(){const K=a();if(K.length>0){const ie=r(v).data.name||r(v).data.displayName||"this selection";ma({title:"Replace Queue?",message:`This will clear your queue and play all tracks from "${ie}".`,confirmLabel:"Play",type:"confirm",onConfirm:()=>{_(w,!0),Ps(K)}})}}function _e(){const K=a();K.length>0&&(_(x,!0),On(K),setTimeout(()=>{_(x,!1)},2e3))}te(()=>I(d()),()=>{d()&&(_(f,""),d(),_(p,"name"))}),te(()=>(r(p),y),()=>{_(o,r(p)==="year_desc"?y.SORT_ASC:y.SORT_DESC)}),te(()=>(a(),r(f),r(p)),()=>{_(l,Oe(a().filter(K=>{if(!r(f))return!0;const ie=r(f).toLowerCase();return K.displayName.toLowerCase().includes(ie)||K.artist&&K.artist.toLowerCase().includes(ie)}),r(p)))}),te(()=>s(),()=>{_(v,s()[s().length-1])}),te(()=>(I(d()),r(v)),()=>{P(d(),r(v))}),te(()=>r(v),()=>{r(v)&&(_(w,!1),_(x,!1),_(E,!1))}),Xt(),zt();var V=Mv();let xe;var B=c(V);{var F=K=>{ls(K,{get itemsStore(){return u},get isLoading(){return r(h)},isEditMode:!1,emptyText:"No tracks found",$$slots:{header:(ie,ke)=>{var be=uv(),Me=c(be),z=c(Me),pe=c(z),me=c(pe);{let G=ht(()=>(I(Cr),r(U),m(()=>Cr(r(U)))));Zt(me,{get src(){return r(G)},alt:"Art",radius:"8px",$$slots:{fallback:(ee,Y)=>{var ue=iv(),fe=c(ue);Z(fe,()=>(I(y),m(()=>y.ALBUMS))),b(ee,ue)}}})}var Ne=g(z,2),D=c(Ne),O=c(D),J=c(O),ae=g(O,2),S=c(ae),R=g(ae,2);{var oe=G=>{var ee=lv(),Y=c(ee),ue=c(Y),fe=g(Y,2);{var Xe=Ce=>{var q=ov(),ce=c(q);se(()=>re(ce,r(H))),b(Ce,q)};C(fe,Ce=>{r(H)&&r(H)!=="0"&&Ce(Xe)})}se(()=>re(ue,(r(U),m(()=>r(U).artist)))),b(G,ee)};C(R,G=>{r(U),m(()=>r(U)&&r(U).artist)&&G(oe)})}var X=g(R,2),ve=c(X);{var Ve=G=>{var ee=cv(),Y=c(ee);se(()=>re(Y,`${r(ye)??""} tracks`)),b(G,ee)};C(ve,G=>{r(ye)>0&&G(Ve)})}var Qe=g(ve,2);{var M=G=>{var ee=dv(),Y=c(ee);se(()=>re(Y,r(ne))),b(G,ee)};C(Qe,G=>{r(ne)&&G(M)})}var N=g(Qe,2);{var W=G=>{var ee=vv(),Y=c(ee);se(()=>re(Y,r(de))),b(G,ee)};C(N,G=>{r(de)&&G(W)})}var ge=g(D,2),Re=c(ge),Se=c(Re),Te=g(Re,2),we=c(Te);se(()=>{re(J,(r(v),m(()=>r(v).view==="albums_by_artist"?"Artist":"Album"))),Wt(ae,"title",(r(v),m(()=>r(v).data.name||r(v).data.displayName))),re(S,(r(v),m(()=>r(v).data.name||r(v).data.displayName||"Unknown"))),Re.disabled=r(w),re(Se,r(w)?"Playing...":"Play All"),Te.disabled=r(x),re(we,r(x)?"Added":"To Queue")}),A("click",Re,L),A("click",Te,_e),b(ie,be)},row:(ie,ke)=>{var be=fv();const Me=ht(()=>ke.item),z=ht(()=>ke.index);var pe=c(be);Pr(pe,{get track(){return r(Me)},get index(){return r(z)},isEditable:!1,$$events:{play:()=>Fs(r(Me))}}),b(ie,be)}}})},$e=K=>{var ie=Tv(),ke=c(ie),be=c(ke),Me=c(be);Z(Me,()=>(I(y),m(()=>y.SEARCH)));var z=g(be,2),pe=g(z,2);{var me=J=>{var ae=gv(),S=c(ae),R=c(S),oe=c(R),X=g(R,2),ve=c(X);Z(ve,()=>r(o));var Ve=g(S,2);{var Qe=M=>{var N=pv(),W=je(N),ge=g(W,2);wt(ge,5,()=>$,Bt,(Re,Se)=>{var Te=hv();let we;var G=c(Te);se(()=>{we=at(Te,1,"sort-item svelte-1eh2rsb",null,we,{selected:r(p)===r(Se).id}),re(G,(r(Se),m(()=>r(Se).label)))}),A("click",Te,()=>Le(r(Se).id)),b(Re,Te)}),A("click",W,Q),gt(3,W,()=>St,()=>({duration:100})),gt(3,ge,()=>Rn,()=>({start:.95,duration:100})),b(M,N)};C(Ve,M=>{r(E)&&M(Qe)})}se(M=>re(oe,M),[()=>(r(p),m(()=>$.find(M=>M.id===r(p))?.label))]),A("click",S,Q),b(J,ae)};C(pe,J=>{I(d()),r(v),m(()=>d()==="albums"||r(v).view==="albums_by_artist")&&J(me)})}var Ne=g(ke,2);{var D=J=>{var ae=mv();wt(ae,4,()=>Array(12),Bt,(S,R)=>{var oe=_v(),X=c(oe),ve=c(X);ea(ve,{width:"100%",height:"100%",radius:"8px"});var Ve=g(X,2),Qe=c(Ve);ea(Qe,{width:"80%",height:"14px",radius:"4px"});var M=g(Ve,2),N=c(M);ea(N,{width:"50%",height:"12px",radius:"4px",style:"opacity: 0.6"}),b(S,oe)}),b(J,ae)},O=J=>{var ae=$v();wt(ae,5,()=>r(l),S=>S._uid,(S,R)=>{var oe=nt(),X=je(oe);{var ve=Qe=>{var M=bv(),N=c(M);se(()=>re(N,(r(R),m(()=>r(R).title)))),b(Qe,M)},Ve=Qe=>{var M=Sv(),N=c(M),W=c(N);{let q=ht(()=>(I(es),r(R),m(()=>es(r(R),"md"))));Zt(W,{get src(){return r(q)},get alt(){return r(R),m(()=>r(R).displayName)},radius:"8px",$$slots:{fallback:(ce,he)=>{var He=yv(),Pe=c(He);{var Fe=Be=>{var Ye=nt(),De=je(Ye);Z(De,()=>(I(y),m(()=>y.ARTISTS))),b(Be,Ye)},Ie=Be=>{var Ye=nt(),De=je(Ye);Z(De,()=>(I(y),m(()=>y.ALBUMS))),b(Be,Ye)};C(Pe,Be=>{d()==="artists"?Be(Fe):Be(Ie,!1)})}b(ce,He)}}})}var ge=g(W,2),Re=c(ge),Se=c(Re);Z(Se,()=>(I(y),m(()=>y.PLAY)));var Te=g(N,2),we=c(Te),G=g(Te,2),ee=c(G);{var Y=q=>{var ce=wv(),he=c(ce);se(()=>re(he,(r(R),m(()=>r(R).artist)))),b(q,ce)};C(ee,q=>{r(R),m(()=>r(R).artist)&&q(Y)})}var ue=g(ee,2);{var fe=q=>{var ce=kv(),he=c(ce);se(()=>re(he,(r(R),m(()=>r(R).year)))),b(q,ce)};C(ue,q=>{r(R),m(()=>r(R).year&&r(R).year!=="0")&&q(fe)})}var Xe=g(ue,2);{var Ce=q=>{var ce=xv(),he=c(ce);se(He=>re(he,He),[()=>(r(R),m(()=>r(R).qualityBadge.split(" ")[0]))]),b(q,ce)};C(Xe,q=>{r(R),m(()=>r(R).qualityBadge)&&q(Ce)})}se(()=>re(we,(r(R),m(()=>r(R).displayName)))),A("click",M,()=>j(r(R))),A("keypress",M,q=>q.key==="Enter"&&j(r(R))),b(Qe,M)};C(X,Qe=>{r(R),m(()=>r(R).isHeader)?Qe(ve):Qe(Ve,!1)})}b(S,oe)},S=>{var R=Ev();b(S,R)}),b(J,ae)};C(Ne,J=>{r(h)?J(D):J(O,!1)})}se(()=>Wt(z,"placeholder",`Filter ${d()??""}...`)),sr(z,()=>r(f),J=>_(f,J)),b(K,ie)};C(B,K=>{r(v),m(()=>r(v)?.view==="tracks_by_album")?K(F):K($e,!1)})}se(()=>xe=at(V,1,"view-container svelte-1eh2rsb",null,xe,{scrollable:r(v)?.view!=="tracks_by_album"})),b(e,V),Mt(),i()}var Cv=k('<div class="music-card svelte-1otxnt7"><!> <!></div>'),Pv=k('<div class="music-grid svelte-1otxnt7"></div>'),Lv=k('<div slot="fallback" class="icon-fallback svelte-1otxnt7">ð»</div>'),zv=k('<div class="status-badge playing svelte-1otxnt7">PLAYING</div>'),Rv=k('<div class="status-badge paused svelte-1otxnt7">PAUSED</div>'),Iv=k('<span class="overlay-icon svelte-1otxnt7"><!></span>'),jv=k('<div class="card-sub svelte-1otxnt7"> </div>'),Nv=k('<div class="card-badge quality svelte-1otxnt7"> </div>'),Dv=k('<div role="button" tabindex="0"><div class="card-img-container svelte-1otxnt7"><!> <div class="play-overlay svelte-1otxnt7"><!></div></div> <div class="card-title svelte-1otxnt7"> </div> <div class="card-sub-row svelte-1otxnt7"><!> <!></div></div>'),Ov=k('<div class="empty-text svelte-1otxnt7">No stations found</div>'),Fv=k('<div class="music-grid svelte-1otxnt7"></div> <!>',1),qv=k('<div class="view-container scrollable svelte-1otxnt7"><div class="content-padded no-bottom-pad svelte-1otxnt7"><div class="search-input-container svelte-1otxnt7"><span class="search-icon svelte-1otxnt7"><!></span> <input type="text" placeholder="Find station..." class="svelte-1otxnt7"/></div></div> <div class="content-padded svelte-1otxnt7"><!></div></div>');function Bv(e,t){Tt(t,!1);const a=()=>Ee(Qa,"$stations",o),s=()=>Ee($t,"$status",o),n=()=>Ee(gs,"$isLoadingRadio",o),i=()=>Ee(Qt,"$currentSong",o),[o,l]=Dt(),v=T(),d=T();let u=T("");te(()=>(a(),r(u)),()=>{_(v,a().filter(H=>{const ye=r(u).toLowerCase();return H.name.toLowerCase().includes(ye)||H.genre&&H.genre.toLowerCase().includes(ye)}))}),te(()=>s(),()=>{_(d,s().bitrate?`${s().bitrate} kbps`:s().format||"")}),Xt(),zt();var h=qv(),f=c(h),p=c(f),E=c(p),$=c(E);Z($,()=>(I(y),m(()=>y.SEARCH)));var w=g(E,2),x=g(f,2),U=c(x);{var ne=H=>{var ye=Pv();wt(ye,4,()=>Array(12),Bt,(le,Q)=>{var Le=Cv(),Oe=c(Le);ea(Oe,{width:"100%",style:"aspect-ratio:1; border-radius:12px; margin-bottom:12px;"});var P=g(Oe,2);ea(P,{width:"70%",height:"16px"}),b(le,Le)}),b(H,ye)},de=H=>{var ye=Fv(),le=je(ye);wt(le,5,()=>r(v),Bt,(Oe,P)=>{const j=ht(()=>(r(P),m(()=>r(P).file))),L=ht(()=>(i(),r(P),I(r(j)),m(()=>i().stationName===r(P).name||i().file===r(j)))),_e=ht(()=>(I(Ar),r(P),m(()=>Ar(r(P)))));var V=Dv();let xe;var B=c(V),F=c(B);Zt(F,{get src(){return r(_e)},get alt(){return r(P),m(()=>r(P).name)},radius:"8px",$$slots:{fallback:(O,J)=>{var ae=Lv();b(O,ae)}}});var $e=g(F,2),K=c($e);{var ie=O=>{var J=nt(),ae=je(J);{var S=oe=>{var X=zv();b(oe,X)},R=oe=>{var X=Rv();b(oe,X)};C(ae,oe=>{s(),m(()=>s().state==="play")?oe(S):oe(R,!1)})}b(O,J)},ke=O=>{var J=Iv(),ae=c(J);Z(ae,()=>(I(y),m(()=>y.PLAY))),b(O,J)};C(K,O=>{r(L)?O(ie):O(ke,!1)})}var be=g(B,2),Me=c(be),z=g(be,2),pe=c(z);{var me=O=>{var J=jv(),ae=c(J);se(()=>re(ae,(r(P),m(()=>r(P).genre)))),b(O,J)};C(pe,O=>{r(P),m(()=>r(P).genre)&&O(me)})}var Ne=g(pe,2);{var D=O=>{var J=Nv(),ae=c(J);se(()=>re(ae,r(d))),gt(1,J,()=>St),b(O,J)};C(Ne,O=>{r(L)&&r(d)&&O(D)})}se(()=>{xe=at(V,1,"music-card svelte-1otxnt7",null,xe,{"is-active":r(L)}),ft($e,r(L)?"opacity: 1":""),re(Me,(r(P),m(()=>r(P).name)))}),A("click",V,()=>qn(r(P))),b(Oe,V)});var Q=g(le,2);{var Le=Oe=>{var P=Ov();b(Oe,P)};C(Q,Oe=>{r(v),a(),m(()=>r(v).length===0&&a().length>0)&&Oe(Le)})}b(H,ye)};C(U,H=>{n()?H(ne):H(de,!1)})}sr(w,()=>r(u),H=>_(u,H)),gt(1,h,()=>St,()=>({duration:200})),b(e,h),Mt(),l()}var Yv=k('<button class="clear-icon-btn svelte-m7c4tz"><!></button>'),Uv=k('<div class="spinner svelte-m7c4tz"></div>'),Hv=k('<div class="content-padded no-bottom-pad svelte-m7c4tz"><div class="search-input-container svelte-m7c4tz"><span class="search-icon svelte-m7c4tz"><!></span> <input type="text" placeholder="Search playlists &amp; tracks..." class="svelte-m7c4tz"/> <!> <!></div></div>'),Vv=k('<span class="meta-tag svelte-m7c4tz">Loading...</span>'),Wv=k('<span class="meta-tag svelte-m7c4tz"> </span>'),Qv=k('<span class="meta-tag quality svelte-m7c4tz"> </span>'),Xv=k('<span class="meta-tag svelte-m7c4tz"> </span> <!> <!>',1),Kv=k('<div slot="header" class="content-padded svelte-m7c4tz"><div class="view-header svelte-m7c4tz"><div class="header-art svelte-m7c4tz"><div class="header-icon-wrap svelte-m7c4tz"><!></div></div> <div class="header-info svelte-m7c4tz"><div class="header-text-group svelte-m7c4tz"><div class="header-label svelte-m7c4tz">Playlist</div> <h1 class="header-title svelte-m7c4tz"> </h1> <div class="meta-badges svelte-m7c4tz"><!></div></div> <div class="header-actions svelte-m7c4tz"><button class="btn-primary svelte-m7c4tz"> </button> <button class="btn-secondary svelte-m7c4tz"> </button> <button title="Edit"><!></button></div></div></div></div>'),Gv=k('<div slot="row" class="svelte-m7c4tz"><!></div>'),Zv=k('<div class="music-card skeleton-card svelte-m7c4tz"><div class="card-img-container svelte-m7c4tz"><!></div> <div style="margin-top: 8px;" class="svelte-m7c4tz"><!></div></div>'),Jv=k('<div class="content-padded svelte-m7c4tz"><div class="music-grid playlists-grid-override svelte-m7c4tz"></div></div>'),eu=k('<button class="card-menu-btn svelte-m7c4tz"><!></button>'),tu=k('<div class="music-card svelte-m7c4tz"><div class="card-img-container svelte-m7c4tz"><div class="icon-wrap svelte-m7c4tz"><!></div> <!> <div class="play-overlay svelte-m7c4tz"><span class="overlay-icon svelte-m7c4tz"><!></span></div></div> <div class="card-title svelte-m7c4tz"> </div> <div class="card-sub-row svelte-m7c4tz"><div class="card-sub svelte-m7c4tz"> </div></div></div>'),au=k('<div class="music-grid playlists-grid-override svelte-m7c4tz"><div class="music-card svelte-m7c4tz"><div class="card-img-container dashed-cover svelte-m7c4tz"><div class="icon-wrap svelte-m7c4tz"><!></div></div> <div class="card-title svelte-m7c4tz">New Playlist</div></div> <!></div>'),ru=k('<div class="music-card svelte-m7c4tz"><div class="card-img-container svelte-m7c4tz"><div class="icon-wrap svelte-m7c4tz"><!></div> <div class="play-overlay svelte-m7c4tz"><span class="overlay-icon svelte-m7c4tz"><!></span></div></div> <div class="card-title svelte-m7c4tz"> </div></div>'),su=k('<div class="header-label section-spacing svelte-m7c4tz">Matched Playlists</div> <div class="music-grid horizontal section-mb svelte-m7c4tz"></div>',1),nu=k('<div class="group-container svelte-m7c4tz"><div class="group-header svelte-m7c4tz"><div class="group-icon svelte-m7c4tz"><!></div> <div class="group-title svelte-m7c4tz"> </div> <div class="group-count svelte-m7c4tz"> </div> <div class="group-actions svelte-m7c4tz"><button class="btn-icon small svelte-m7c4tz" title="Play matches"><!></button> <button class="btn-icon small svelte-m7c4tz" title="Add matches to Queue"><!></button></div></div> <div class="group-tracks svelte-m7c4tz"></div></div>'),iu=k('<div class="header-label section-spacing svelte-m7c4tz">Matched Tracks</div> <div class="grouped-results svelte-m7c4tz"></div>',1),ou=k('<div class="empty-text svelte-m7c4tz"> </div>'),lu=k('<div class="empty-text svelte-m7c4tz" style="opacity: 0.7">Searching tracks in playlists...</div>'),cu=k("<!> <!> <!>",1),du=k('<div class="content-padded svelte-m7c4tz"><!></div>'),vu=k("<div><!> <!></div>");function uu(e,t){Tt(t,!1);const a=()=>Ee($t,"$status",f),s=()=>Ee(Qt,"$currentSong",f),n=()=>Ee(ut,"$navigationStack",f),i=()=>Ee(Ds,"$playlists",f),o=()=>Ee(Vr,"$activePlaylistTracks",f),l=()=>Ee(fn,"$isLoadingTracks",f),v=()=>Ee(sd,"$activePlaylistName",f),d=()=>Ee(Wa,"$queue",f),u=()=>Ee(Es,"$currentTheme",f),h=()=>Ee(un,"$isLoadingPlaylists",f),[f,p]=Dt(),E=T(),$=T(),w=T(),x=T(),U=T(),ne=T();let de=T(!1),H=T(!1),ye=T(!1),le=T(""),Q=T(!1),Le,Oe=0,P=T([]),j=T([]),L=T(""),_e=T(""),V=T("");function xe(M){_(le,M.target.value),clearTimeout(Le),r(le).length>=2?Le=setTimeout(()=>{B(r(le))},600):(_(Q,!1),_(P,[]),_(j,[]))}async function B(M){if(!M)return;Oe++;const N=Oe;_(Q,!0);const W=M.toLowerCase();_(P,i().filter(Se=>Se.name.toLowerCase().includes(W)));let ge=[];const Re=i().filter(Se=>Se.name!=="Favorites");for(const Se of Re){if(N!==Oe)break;try{const Te=await We.send(`listplaylistinfo "${Se.name.replace(/"/g,'\\"')}"`),ee=oa.parseTracks(Te).map((Y,ue)=>({...Y,playlistPos:ue})).filter(Y=>Y.title&&Y.title.toLowerCase().includes(W)||Y.artist&&Y.artist.toLowerCase().includes(W));if(ee.length>0){const Y=ee.map(ue=>({...ue,_uid:Math.random()}));ge.push({playlist:Se,tracks:Y}),_(j,[...ge])}}catch(Te){console.warn(`Failed to search in playlist ${Se.name}`,Te)}}N===Oe&&_(Q,!1)}function F(M){r(de)||Fs(M)}function $e(M){M.deltaY!==0&&(M.currentTarget.scrollLeft+=M.deltaY)}function K(M,N){ma({title:"Play Search Results?",message:`This will clear your queue and play ${M.length} matching tracks from "${N}".`,confirmLabel:"Play",type:"confirm",onConfirm:()=>{Ps(M)}})}function ie(M){!M||M.length===0||On(M)}Na(()=>{!r(U)&&i().length===0&&Fn()});function ke(M){const N=M.reduce((ge,Re)=>ge+(parseFloat(Re.time)||0),0);if(N>0){const ge=Math.floor(N/3600),Re=Math.floor(N%3600/60);_(L,ge>0?`${ge} hr ${Re} min`:`${Re} min`)}else _(L,"");const W=new Set;M.forEach(ge=>{ge.qualityBadge&&W.add(ge.qualityBadge.split(" ")[0])}),_(_e,W.size===1?M[0].qualityBadge:W.size>1?"Mixed":"")}function be(M){qt("details",M)}function Me(){if(d().length===0){ma({title:"Create Playlist",message:"Queue is empty. Add tracks to queue before saving a playlist.",confirmLabel:"OK",type:"alert"});return}ma({title:"New Playlist",message:"Save current queue as a new playlist:",type:"prompt",placeholder:"Playlist Name",confirmLabel:"Create",onConfirm:M=>{M&&ba.createPlaylistFromQueue(M)}})}function z(M,N){N.name!=="Favorites"&&(M.stopPropagation(),M.preventDefault(),Jr(M,null,{type:"playlist-card",playlist:N}))}function pe(){ma({title:"Replace Queue?",message:`This will clear your current queue and play "${r(x).data.name}".`,confirmLabel:"Play",type:"confirm",onConfirm:()=>{_(H,!0),o()&&o().length>0?Ps(o()):_(H,!1)}})}function me(){if(o().length>0){const M=r(x).data.name.replace(/"/g,'\\"');Cs(`load "${M}"`),_(ye,!0),setTimeout(()=>{_(ye,!1)},2e3)}}function Ne(){_(de,!r(de))}function D(M){const N=r(x).data.name,W=o();W.splice(M,1),Vr.set(W),Ao(N,M),ke(W)}function O(M,N){Co(r(x).data.name,M,N)}function J(M){if(M.name==="Favorites"){if(u()==="gruvbox"){const N="var(--c-heart)";return`background: linear-gradient(135deg, ${N}, transparent); background-color: ${N};`}return"background: linear-gradient(135deg, hsl(348, 95%, 58%), hsl(348, 90%, 40%));"}return u()==="gruvbox"?`background: linear-gradient(135deg, ${M.colorVar}, transparent); background-color: ${M.colorVar};`:`background: ${M.color}`}function ae(M){if(!M)return"";if(M.name==="Favorites"){if(u()==="gruvbox"){const ge="var(--c-heart)";return`background: linear-gradient(135deg, ${ge}, transparent); background-color: ${ge};`}return"background: linear-gradient(135deg, hsl(348, 95%, 58%), hsl(348, 90%, 40%));"}const N="var(--c-bg-card)";if(u()==="gruvbox"){const ge=M.colorVar||M.color||N;return`background: linear-gradient(135deg, ${ge}, transparent); background-color: ${ge};`}return`background: ${M.color||M.colorVar||N}`}te(()=>a(),()=>{_(E,Number(a().song))}),te(()=>s(),()=>{_($,s().file)}),te(()=>a(),()=>{_(w,a().state==="play")}),te(()=>n(),()=>{_(x,n()[n().length-1])}),te(()=>r(x),()=>{_(U,r(x).view==="details")}),te(()=>(r(x),r(V)),()=>{const M=JSON.stringify(r(x));M!==r(V)&&(_(le,""),_(H,!1),_(ye,!1),_(de,!1),_(P,[]),_(j,[]),_(Q,!1),_(V,M))}),te(()=>(r(U),o(),l()),()=>{r(U)&&o().length>0?ke(o()):r(U)&&o().length===0&&!l()&&(_(L,"0 min"),_(_e,""))}),te(()=>(r(U),r(x),v(),Dd),()=>{r(U)&&r(x).data&&v()!==r(x).data.name&&To(r(x).data.name)}),te(()=>r(x),()=>{_(ne,r(x)?.data?.name==="Favorites")}),Xt(),zt();var S=vu();let R;var oe=c(S);{var X=M=>{var N=Hv(),W=c(N),ge=c(W),Re=c(ge);Z(Re,()=>(I(y),m(()=>y.SEARCH)));var Se=g(ge,2),Te=g(Se,2);{var we=Y=>{var ue=Yv(),fe=c(ue);Z(fe,()=>(I(y),m(()=>y.CLOSE))),A("click",ue,()=>{_(le,""),_(P,[]),_(j,[]),_(Q,!1)}),b(Y,ue)};C(Te,Y=>{r(le)&&Y(we)})}var G=g(Te,2);{var ee=Y=>{var ue=Uv();b(Y,ue)};C(G,Y=>{r(Q)&&Y(ee)})}se(()=>po(Se,r(le))),A("input",Se,xe),b(M,N)};C(oe,M=>{r(U)||M(X)})}var ve=g(oe,2);{var Ve=M=>{ls(M,{get itemsStore(){return Vr},get isLoading(){return l()},get isEditMode(){return r(de)},emptyText:"This playlist is empty.",onMoveItem:O,$$slots:{header:(N,W)=>{var ge=Kv(),Re=c(ge),Se=c(Re),Te=c(Se),we=c(Te);Z(we,()=>(r(ne),I(y),m(()=>r(ne)?y.HEART_FILLED:y.PLAYLISTS)));var G=g(Se,2),ee=c(G),Y=g(c(ee),2),ue=c(Y),fe=g(Y,2),Xe=c(fe);{var Ce=De=>{var qe=Vv();b(De,qe)},q=De=>{var qe=Xv(),Ue=je(qe),Je=c(Ue),et=g(Ue,2);{var tt=mt=>{var ct=Wv(),vt=c(ct);se(()=>re(vt,r(L))),b(mt,ct)};C(et,mt=>{r(L)&&mt(tt)})}var st=g(et,2);{var dt=mt=>{var ct=Qv(),vt=c(ct);se(()=>re(vt,r(_e))),b(mt,ct)};C(st,mt=>{r(_e)&&mt(dt)})}se(()=>re(Je,`${o(),m(()=>o().length)??""} tracks`)),b(De,qe)};C(Xe,De=>{l()?De(Ce):De(q,!1)})}var ce=g(ee,2),he=c(ce),He=c(he),Pe=g(he,2),Fe=c(Pe),Ie=g(Pe,2);let Be;var Ye=c(Ie);Z(Ye,()=>(r(de),I(y),m(()=>r(de)?y.ACCEPT:y.EDIT))),se(De=>{ft(Se,De),Wt(Y,"title",(r(x),m(()=>r(x).data.name))),re(ue,(r(x),m(()=>r(x).data.name))),he.disabled=r(H),re(He,r(H)?"Playing...":"Play All"),Pe.disabled=r(ye),re(Fe,r(ye)?"Added":"To Queue"),Be=at(Ie,1,"btn-action svelte-m7c4tz",null,Be,{active:r(de)})},[()=>(r(x),m(()=>ae(r(x).data)))]),A("click",he,pe),A("click",Pe,me),A("click",Ie,Ne),b(N,ge)},row:(N,W)=>{var ge=Gv();const Re=ht(()=>W.item),Se=ht(()=>W.index),Te=ht(()=>W.startDrag);var we=c(ge);Pr(we,{get track(){return r(Re)},get index(){return r(Se)},get playingIndex(){return r(E)},get playingFile(){return r($)},get isPlaying(){return r(w)},get isEditable(){return r(de)},$$events:{play:()=>F(r(Re)),remove:()=>D(r(Se)),startdrag(...G){r(Te)?.apply(this,G)}}}),b(N,ge)}}})},Qe=M=>{var N=nt(),W=je(N);{var ge=Se=>{var Te=Jv(),we=c(Te);wt(we,4,()=>Array(8),Bt,(G,ee)=>{var Y=Zv(),ue=c(Y),fe=c(ue);ea(fe,{width:"100%",height:"100%",radius:"12px"});var Xe=g(ue,2),Ce=c(Xe);ea(Ce,{width:"60%",height:"16px",radius:"4px"}),b(G,Y)}),b(Se,Te)},Re=Se=>{var Te=du(),we=c(Te);{var G=Y=>{var ue=au(),fe=c(ue),Xe=c(fe),Ce=c(Xe),q=c(Ce);Z(q,()=>(I(y),m(()=>y.ADD)));var ce=g(fe,2);wt(ce,1,i,he=>he.name,(he,He)=>{const Pe=ht(()=>(r(He),m(()=>r(He).name==="Favorites")));var Fe=tu(),Ie=c(Fe),Be=c(Ie),Ye=c(Be);Z(Ye,()=>(I(r(Pe)),I(y),m(()=>r(Pe)?y.HEART_FILLED:y.PLAYLISTS)));var De=g(Be,2);{var qe=vt=>{var bt=eu(),Kt=c(bt);Z(Kt,()=>(I(y),m(()=>y.DOTS))),A("click",bt,Ze=>z(Ze,r(He))),b(vt,bt)};C(De,vt=>{r(Pe)||vt(qe)})}var Ue=g(De,2),Je=c(Ue),et=c(Je);Z(et,()=>(I(y),m(()=>y.PLAY)));var tt=g(Ie,2),st=c(tt),dt=g(tt,2),mt=c(dt),ct=c(mt);Yt(()=>A("click",Fe,()=>be(r(He)))),An(Fe,vt=>Bn?.(vt)),Yt(()=>A("longpress",Fe,vt=>z(vt.detail.originalEvent,r(He)))),Yt(()=>A("contextmenu",Fe,vt=>z(vt,r(He)))),se((vt,bt)=>{ft(Ie,vt),re(st,(r(He),m(()=>r(He).name))),re(ct,bt)},[()=>(r(He),m(()=>J(r(He)))),()=>(r(He),m(()=>r(He).lastModified?new Date(r(He).lastModified).toLocaleDateString():"Playlist"))]),b(he,Fe)}),A("click",fe,Me),b(Y,ue)},ee=Y=>{var ue=cu(),fe=je(ue);{var Xe=Pe=>{var Fe=su(),Ie=g(je(Fe),2);wt(Ie,5,()=>r(P),Be=>Be.name,(Be,Ye)=>{const De=ht(()=>(r(Ye),m(()=>r(Ye).name==="Favorites")));var qe=ru(),Ue=c(qe),Je=c(Ue),et=c(Je);Z(et,()=>(I(r(De)),I(y),m(()=>r(De)?y.HEART_FILLED:y.PLAYLISTS)));var tt=g(Je,2),st=c(tt),dt=c(st);Z(dt,()=>(I(y),m(()=>y.PLAY)));var mt=g(Ue,2),ct=c(mt);se(vt=>{ft(Ue,vt),re(ct,(r(Ye),m(()=>r(Ye).name)))},[()=>(r(Ye),m(()=>J(r(Ye))))]),A("click",qe,()=>be(r(Ye))),b(Be,qe)}),A("wheel",Ie,$e),b(Pe,Fe)};C(fe,Pe=>{r(P),m(()=>r(P).length>0)&&Pe(Xe)})}var Ce=g(fe,2);{var q=Pe=>{var Fe=iu(),Ie=g(je(Fe),2);wt(Ie,5,()=>r(j),Be=>Be.playlist.name,(Be,Ye)=>{var De=nu(),qe=c(De),Ue=c(qe),Je=c(Ue);Z(Je,()=>(I(y),m(()=>y.PLAYLISTS)));var et=g(Ue,2),tt=c(et),st=g(et,2),dt=c(st),mt=g(st,2),ct=c(mt),vt=c(ct);Z(vt,()=>(I(y),m(()=>y.PLAY)));var bt=g(ct,2),Kt=c(bt);Z(Kt,()=>(I(y),m(()=>y.ADD)));var Ze=g(qe,2);wt(Ze,5,()=>(r(Ye),m(()=>r(Ye).tracks)),kt=>kt._uid,(kt,Rt)=>{Pr(kt,{get track(){return r(Rt)},get index(){return r(Rt),m(()=>r(Rt).playlistPos)},get playingFile(){return r($)},get isPlaying(){return r(w)},$$events:{play:()=>F(r(Rt))}})}),se(()=>{re(tt,(r(Ye),m(()=>r(Ye).playlist.name))),re(dt,(r(Ye),m(()=>r(Ye).tracks.length)))}),A("click",ct,ta(()=>K(r(Ye).tracks,r(Ye).playlist.name))),A("click",bt,ta(()=>ie(r(Ye).tracks))),A("click",qe,()=>be(r(Ye).playlist)),b(Be,De)}),b(Pe,Fe)};C(Ce,Pe=>{r(j),m(()=>r(j).length>0)&&Pe(q)})}var ce=g(Ce,2);{var he=Pe=>{var Fe=ou(),Ie=c(Fe);se(()=>re(Ie,`No matches found for "${r(le)??""}"`)),b(Pe,Fe)},He=Pe=>{var Fe=nt(),Ie=je(Fe);{var Be=Ye=>{var De=lu();b(Ye,De)};C(Ie,Ye=>{r(Q),r(j),m(()=>r(Q)&&r(j).length===0)&&Ye(Be)},!0)}b(Pe,Fe)};C(ce,Pe=>{r(Q),r(P),r(j),m(()=>!r(Q)&&r(P).length===0&&r(j).length===0)?Pe(he):Pe(He,!1)})}b(Y,ue)};C(we,Y=>{r(le)?Y(ee,!1):Y(G)})}b(Se,Te)};C(W,Se=>{h()?Se(ge):Se(Re,!1)},!0)}b(M,N)};C(ve,M=>{r(U)?M(Ve):M(Qe,!1)})}se(()=>R=at(S,1,"view-container svelte-m7c4tz",null,R,{scrollable:!r(U)})),b(e,S),Mt(),p()}var fu=k('<button class="clear-icon-btn svelte-1d3z1zm"><!></button>'),hu=k('<div class="spinner svelte-1d3z1zm"></div>'),pu=k('<div class="placeholder-state svelte-1d3z1zm"><div class="placeholder-icon svelte-1d3z1zm">ð</div> <p class="svelte-1d3z1zm">Type to search your library</p></div>'),gu=k('<div class="empty-text svelte-1d3z1zm"> </div>'),_u=k('<div slot="fallback" class="icon-fallback svelte-1d3z1zm">ð¿</div>'),mu=k('<div class="meta-tag svelte-1d3z1zm"> </div>'),bu=k('<div class="meta-tag quality svelte-1d3z1zm"> </div>'),yu=k('<div class="music-card svelte-1d3z1zm"><div class="card-img-container svelte-1d3z1zm"><!> <div class="play-overlay svelte-1d3z1zm"><span class="overlay-icon svelte-1d3z1zm"><!></span></div></div> <div class="card-title svelte-1d3z1zm"> </div> <div class="card-sub-row svelte-1d3z1zm"><div class="card-sub text-ellipsis svelte-1d3z1zm"> </div> <!> <!></div></div>'),wu=k('<div class="header-label section-spacing svelte-1d3z1zm">Albums</div> <div class="music-grid horizontal section-mb svelte-1d3z1zm"></div>',1),ku=k('<div class="header-label svelte-1d3z1zm">Tracks</div>'),xu=k("<!> <!>",1),Su=k('<div slot="header" class="content-padded svelte-1d3z1zm"><!></div>'),Eu=k('<div slot="row" class="svelte-1d3z1zm"><!></div>'),$u=k('<div class="view-container svelte-1d3z1zm"><div class="content-padded no-bottom-pad svelte-1d3z1zm"><div class="search-input-container svelte-1d3z1zm"><span class="search-icon svelte-1d3z1zm"><!></span> <input type="text" placeholder="Artists, songs, or albums" autoFocus class="svelte-1d3z1zm"/> <!> <!></div></div> <!></div>');function Tu(e,t){Tt(t,!1);const a=()=>Ee(Wr,"$searchQuery",n),s=()=>Ee(o,"$tracksStore",n),[n,i]=Dt(),o=Ke([]);let l=T([]),v=T(!1),d,u=T(!1);Na(()=>{a().length>=2&&p(a())});function h(j){Wr.set(j.target.value),clearTimeout(d),d=setTimeout(()=>{p(a())},300)}function f(){Wr.set(""),o.set([]),_(l,[]),_(u,!1)}async function p(j){const L=j.trim().toLowerCase();if(L.length<2){o.set([]),_(l,[]),_(u,!1);return}_(v,!0),_(u,!0);try{const _e=await Ua.search(L),V=_e.map((B,F)=>({...B,_uid:B.file?`${B.file}-${F}`:`search-${F}`}));o.set(V);const xe=new Map;_e.forEach(B=>{const F=B.album;if(F&&!xe.has(F)){const $e=F.toLowerCase().includes(L),K=B.artist&&B.artist.toLowerCase().includes(L);if($e||K){let ie=String(B.year||"");ie.length>4&&(ie=ie.substring(0,4)),xe.set(F,{name:F,artist:B.artist,file:B.file,thumbHash:B.thumbHash,_uid:`alb-${F}`,year:ie,qualityBadge:B.qualityBadge})}}}),_(l,Array.from(xe.values()))}finally{_(v,!1)}}function E(j){Fs(j)}function $(j){qt("tracks_by_album",{name:j.name,artist:j.artist})}function w(j){j.deltaY!==0&&(j.currentTarget.scrollLeft+=j.deltaY)}zt();var x=$u(),U=c(x),ne=c(U),de=c(ne),H=c(de);Z(H,()=>y.SEARCH);var ye=g(de,2),le=g(ye,2);{var Q=j=>{var L=fu(),_e=c(L);Z(_e,()=>y.CLOSE),A("click",L,f),b(j,L)};C(le,j=>{a().length>0&&j(Q)})}var Le=g(le,2);{var Oe=j=>{var L=hu();b(j,L)};C(Le,j=>{r(v)&&j(Oe)})}var P=g(U,2);ls(P,{get itemsStore(){return o},isEditMode:!1,isLoading:!1,emptyText:"",$$slots:{header:(j,L)=>{var _e=Su(),V=c(_e);{var xe=F=>{var $e=pu();b(F,$e)},B=F=>{var $e=nt(),K=je($e);{var ie=be=>{var Me=gu(),z=c(Me);se(()=>re(z,`No results found for "${a()??""}"`)),b(be,Me)},ke=be=>{var Me=xu(),z=je(Me);{var pe=D=>{var O=wu(),J=g(je(O),2);wt(J,5,()=>r(l),ae=>ae._uid,(ae,S)=>{var R=yu(),oe=c(R),X=c(oe);{let ee=ht(()=>es(r(S),"md"));Zt(X,{get src(){return r(ee)},get alt(){return r(S).name},radius:"8px",$$slots:{fallback:(Y,ue)=>{var fe=_u();b(Y,fe)}}})}var ve=g(X,2),Ve=c(ve),Qe=c(Ve);Z(Qe,()=>y.PLAY);var M=g(oe,2),N=c(M),W=g(M,2),ge=c(W),Re=c(ge),Se=g(ge,2);{var Te=ee=>{var Y=mu(),ue=c(Y);se(()=>re(ue,r(S).year)),b(ee,Y)};C(Se,ee=>{r(S).year&&r(S).year!=="0"&&r(S).year!==0&&ee(Te)})}var we=g(Se,2);{var G=ee=>{var Y=bu(),ue=c(Y);se(fe=>re(ue,fe),[()=>r(S).qualityBadge.split(" ")[0]]),b(ee,Y)};C(we,ee=>{r(S).qualityBadge&&ee(G)})}se(()=>{Wt(M,"title",r(S).name),re(N,r(S).name),re(Re,r(S).artist)}),A("click",R,()=>$(r(S))),b(ae,R)}),A("wheel",J,w),b(D,O)};C(z,D=>{r(l).length>0&&D(pe)})}var me=g(z,2);{var Ne=D=>{var O=ku();b(D,O)};C(me,D=>{s().length>0&&D(Ne)})}b(be,Me)};C(K,be=>{!r(v)&&s().length===0&&r(l).length===0&&r(u)?be(ie):be(ke,!1)},!0)}b(F,$e)};C(V,F=>{a().length<2?F(xe):F(B,!1)})}b(j,_e)},row:(j,L)=>{var _e=Eu();const V=ht(()=>L.item),xe=ht(()=>L.index);var B=c(_e);Pr(B,{get track(){return r(V)},get index(){return r(xe)},isEditable:!1,$$events:{play:()=>E(r(V))}}),b(j,_e)}}}),se(()=>po(ye,a())),A("input",ye,h),b(e,x),Mt(),i()}var Mu=k('<span class="status-badge connected svelte-1j67jqh">Connected</span>'),Au=k('<span class="status-badge disconnected svelte-1j67jqh">Not Connected</span>'),Cu=k('<div class="separator svelte-1j67jqh"></div> <div class="row space-between svelte-1j67jqh"><label class="svelte-1j67jqh">Connection Status</label> <!></div> <div class="separator svelte-1j67jqh"></div> <div class="row svelte-1j67jqh"><label for="yandex-token" class="svelte-1j67jqh">OAuth Token</label> <div class="input-group svelte-1j67jqh"><input id="yandex-token" type="password" placeholder="Paste token here..." class="svelte-1j67jqh"/> <button class="btn-primary small svelte-1j67jqh"> </button></div></div> <p class="hint svelte-1j67jqh">Token is stored securely on the device.</p>',1),Pu=k('<option class="svelte-1j67jqh"> </option>'),Lu=k('<div class="separator svelte-1j67jqh"></div> <div class="row space-between svelte-1j67jqh"><label for="alarm-time" class="svelte-1j67jqh">Wake up time</label> <input id="alarm-time" type="time" class="svelte-1j67jqh"/></div> <div class="separator svelte-1j67jqh"></div> <div class="row space-between svelte-1j67jqh"><label for="alarm-pl" class="svelte-1j67jqh">Playlist</label> <div class="select-wrapper svelte-1j67jqh"><select id="alarm-pl" class="svelte-1j67jqh"></select> <div class="select-arrow svelte-1j67jqh"><!></div></div></div>',1),zu=k('<div class="view-container scrollable svelte-1j67jqh"><div class="content-padded svelte-1j67jqh"><h1 class="header-title big svelte-1j67jqh">Settings</h1> <div class="section svelte-1j67jqh"><div class="section-header svelte-1j67jqh"><span class="svelte-1j67jqh">Services</span></div> <div class="card svelte-1j67jqh"><div class="row space-between svelte-1j67jqh"><label class="svelte-1j67jqh">Enable Yandex Music (Beta)</label> <button><div class="toggle-circle svelte-1j67jqh"></div></button></div> <!></div></div> <div class="section svelte-1j67jqh"><div class="section-header svelte-1j67jqh"><span class="svelte-1j67jqh">Alarm Clock</span></div> <div class="card svelte-1j67jqh"><div class="row space-between svelte-1j67jqh"><span class="label-text svelte-1j67jqh">Current Player Time</span> <span class="mono-badge svelte-1j67jqh"> </span></div> <div class="separator svelte-1j67jqh"></div> <div class="row space-between svelte-1j67jqh"><label class="svelte-1j67jqh">Enable Alarm</label> <button><div class="toggle-circle svelte-1j67jqh"></div></button></div> <!></div></div> <div class="section svelte-1j67jqh"><div class="section-header svelte-1j67jqh"><span class="svelte-1j67jqh">Appearance</span></div> <div class="card clickable svelte-1j67jqh"><div class="row space-between svelte-1j67jqh"><span class="svelte-1j67jqh">Interface Theme</span> <div class="row-gap svelte-1j67jqh"><span class="value svelte-1j67jqh"> </span> <span class="chevron svelte-1j67jqh"><!></span></div></div></div></div> <div class="section svelte-1j67jqh"><div class="section-header svelte-1j67jqh"><span class="svelte-1j67jqh">Connection</span></div> <div class="card svelte-1j67jqh"><div class="row svelte-1j67jqh"><label for="ip" class="svelte-1j67jqh">Moode Device IP</label> <div class="input-group svelte-1j67jqh"><input id="ip" type="text" placeholder="192.168.x.x" class="svelte-1j67jqh"/> <button class="btn-primary small svelte-1j67jqh">Save</button></div></div> <p class="hint svelte-1j67jqh"> </p></div></div> <div class="section svelte-1j67jqh"><div class="section-header svelte-1j67jqh"><span class="svelte-1j67jqh">About</span></div> <div class="card svelte-1j67jqh"><div class="info-row svelte-1j67jqh"><span class="svelte-1j67jqh">Version</span> <span class="mono svelte-1j67jqh"> </span></div> <div class="separator svelte-1j67jqh"></div> <div class="info-row svelte-1j67jqh"><span class="svelte-1j67jqh">Build Date</span> <span class="mono small svelte-1j67jqh"> </span></div></div></div></div></div>');function Ru(e,t){Tt(t,!1);const a=()=>Ee(Es,"$currentTheme",d),s=()=>Ee(mn,"$isAlarmEnabled",d),n=()=>Ee(_n,"$alarmTime",d),i=()=>Ee(bn,"$alarmPlaylist",d),o=()=>Ee(ts,"$isYandexEnabled",d),l=()=>Ee(xr,"$yandexAuthStatus",d),v=()=>Ee(Ds,"$playlists",d),[d,u]=Dt(),h=T();let f=T(Ja.MOODE_IP),p=T("--:--"),E,$=T(""),w=T(!1);function x(){Ja.setMoodeIp(r(f)),ze("IP Saved. Reloading...","success"),setTimeout(()=>location.reload(),1e3)}const U="0.1.0",ne="2026-01-13T11:35:23.582Z",de=new Date(ne).toLocaleString();function H(){const Ce=dn.map(q=>({label:q.label,value:q.id}));ma({title:"Select Theme",message:"Choose your preferred interface style:",type:"select",inputValue:a(),options:Ce,onConfirm:q=>{Es.set(q),ze("Theme updated","success")}})}async function ye(){const Ce=await Ma.getServerTime();Ce&&_(p,Ce)}Na(()=>{ye(),E=setInterval(ye,6e4),Ma.checkYandexAuth()}),Ln(()=>{E&&clearInterval(E)});async function le(){try{await Ma.setAlarm(s(),n(),i()),s()&&ze(`Alarm set for ${n()}`,"success")}catch{ze("Failed to sync alarm settings","error")}}function Q(){mn.update(Ce=>!Ce),le()}function Le(){ts.update(Ce=>!Ce)}async function Oe(){if(!r($))return;_(w,!0);const Ce=await Ma.saveYandexToken(r($));_(w,!1),Ce&&_($,"")}te(()=>a(),()=>{_(h,dn.find(Ce=>Ce.id===a())?.label||"Default")}),Xt(),zt();var P=zu(),j=c(P),L=g(c(j),2),_e=g(c(L),2),V=c(_e),xe=g(c(V),2);let B;var F=g(V,2);{var $e=Ce=>{var q=Cu(),ce=je(q),he=g(ce,2),He=g(c(he),2);{var Pe=et=>{var tt=Mu();b(et,tt)},Fe=et=>{var tt=Au();b(et,tt)};C(He,et=>{l()?et(Pe):et(Fe,!1)})}var Ie=g(he,2),Be=g(Ie,2),Ye=g(c(Be),2),De=c(Ye),qe=g(De,2),Ue=c(qe),Je=g(Be,2);se(()=>{qe.disabled=r(w),re(Ue,r(w)?"Checking...":"Save")}),gt(1,ce,()=>St),gt(1,he,()=>St),gt(1,Ie,()=>St),sr(De,()=>r($),et=>_($,et)),A("click",qe,Oe),gt(1,Be,()=>St),gt(1,Je,()=>St),b(Ce,q)};C(F,Ce=>{o()&&Ce($e)})}var K=g(L,2),ie=g(c(K),2),ke=c(ie),be=g(c(ke),2),Me=c(be),z=g(ke,4),pe=g(c(z),2);let me;var Ne=g(z,2);{var D=Ce=>{var q=Lu(),ce=je(q),he=g(ce,2),He=g(c(he),2),Pe=g(he,2),Fe=g(Pe,2),Ie=g(c(Fe),2),Be=c(Ie);se(()=>{i(),Nl(()=>{v()})}),wt(Be,5,v,Bt,(qe,Ue)=>{var Je=Pu(),et=c(Je),tt={};se(()=>{re(et,(r(Ue),m(()=>r(Ue).name))),tt!==(tt=(r(Ue),m(()=>r(Ue).name)))&&(Je.value=(Je.__value=(r(Ue),m(()=>r(Ue).name)))??"")}),b(qe,Je)});var Ye=g(Be,2),De=c(Ye);Z(De,()=>(I(y),m(()=>y.CHEVRON_DOWN))),gt(1,ce,()=>St),sr(He,n,qe=>oi(_n,qe)),A("change",He,le),gt(1,he,()=>St),gt(1,Pe,()=>St),nc(Be,i,qe=>oi(bn,qe)),A("change",Be,le),gt(1,Fe,()=>St),b(Ce,q)};C(Ne,Ce=>{s()&&Ce(D)})}var O=g(K,2),J=g(c(O),2),ae=c(J),S=g(c(ae),2),R=c(S),oe=c(R),X=g(R,2),ve=c(X);Z(ve,()=>(I(y),m(()=>y.NEXT)));var Ve=g(O,2),Qe=g(c(Ve),2),M=c(Qe),N=g(c(M),2),W=c(N),ge=g(W,2),Re=g(M,2),Se=c(Re),Te=g(Ve,2),we=g(c(Te),2),G=c(we),ee=g(c(G),2),Y=c(ee),ue=g(G,4),fe=g(c(ue),2),Xe=c(fe);se(()=>{B=at(xe,1,"toggle-btn svelte-1j67jqh",null,B,{active:o()}),re(Me,r(p)),me=at(pe,1,"toggle-btn svelte-1j67jqh",null,me,{active:s()}),re(oe,r(h)),re(Se,`Current: ${I(Ja),m(()=>Ja.MOODE_IP)??""}`),re(Y,U),re(Xe,de)}),A("click",xe,Le),A("click",pe,Q),A("click",J,H),sr(W,()=>r(f),Ce=>_(f,Ce)),A("click",ge,x),gt(1,P,()=>St,()=>({duration:200})),b(e,P),Mt(),u()}var Iu=k('<span class="daemon-active svelte-185fgrr"> </span>'),ju=k('<span class="meta-tag svelte-185fgrr"> </span>'),Nu=k('<span class="meta-tag active-badge svelte-185fgrr">Daemon Active</span>'),Du=k('<button class="btn-primary svelte-185fgrr">Stop Stream</button>'),Ou=k('<button class="btn-secondary svelte-185fgrr" title="Clear Queue">Clear</button>'),Fu=k('<div slot="header" class="content-padded svelte-185fgrr"><div class="view-header svelte-185fgrr"><div class="header-art svelte-185fgrr" style="background: var(--c-surface-active);"><div class="header-icon-wrap svelte-185fgrr"><!></div></div> <div class="header-info svelte-185fgrr"><div class="header-text-group svelte-185fgrr"><div class="header-label svelte-185fgrr">Now Playing</div> <h1 class="header-title svelte-185fgrr"><!></h1> <div class="meta-badges svelte-185fgrr"><span class="meta-tag svelte-185fgrr"> </span> <!> <!></div></div> <div class="header-actions svelte-185fgrr"><!> <button class="btn-action svelte-185fgrr" title="Save Queue"><!></button> <button><!></button></div></div></div></div>'),qu=k('<div slot="row" class="svelte-185fgrr"><!></div>'),Bu=k('<div class="view-container svelte-185fgrr"><!></div>');function Yu(e,t){Tt(t,!1);const a=()=>Ee($t,"$status",l),s=()=>Ee(Et,"$isQueueLocked",l),n=()=>Ee(Qt,"$currentSong",l),i=()=>Ee(Wa,"$queue",l),o=()=>Ee(bi,"$yandexState",l),[l,v]=Dt(),d=T(),u=T(),h=T(),f=T();let p=T(!1),E=T(""),$,w=T(-1);async function x(){try{const P=await fetch("/wave-yandex-api.php?action=get_state");if(P.ok){const j=await P.json();bi.set(j)}}catch{}}async function U(){try{await fetch("/wave-yandex-api.php?action=stop_daemon"),ze("Daemon stopped (Auto-fill disabled)","info"),x()}catch{ze("Failed to stop daemon","error")}}Na(()=>{x(),$=setInterval(x,5e3)}),Ln(()=>{$&&clearInterval($)});function ne(){_(p,!r(p))}function de(P){r(p)||Cs(`play ${P}`)}function H(P){P<r(w)&&_(w,r(w)-1),da.removeFromQueue(P)}async function ye(){ma({title:"Save Playlist",message:"Enter a name for this playlist:",type:"prompt",placeholder:"Playlist Name",confirmLabel:"Save",onConfirm:async P=>{P&&P.trim().length>0&&(await da.saveQueue(P),Fn())}})}function le(){i().length!==0&&ma({title:"Clear Queue",message:"Are you sure you want to clear the queue?",confirmLabel:"Clear All",type:"confirm",onConfirm:async()=>{o().active&&await U(),Wa.set([]),Qt.set({title:"Not Playing",artist:"",album:"",file:"",stationName:null,id:null,pos:null}),$t.update(P=>({...P,state:"stop",song:-1,songid:-1,elapsed:0})),await Cs("clear")}})}function Q(P,j){let L=r(w);P===L?L=j:P<L&&j>=L?L-=1:P>L&&j<=L&&(L+=1),_(w,L),da.moveTrack(P,j)}te(()=>a(),()=>{_(d,Number(a().song))}),te(()=>(s(),r(d)),()=>{s()||_(w,r(d))}),te(()=>r(w),()=>{_(u,r(w))}),te(()=>n(),()=>{_(h,n().file)}),te(()=>a(),()=>{_(f,a().state==="play")}),te(()=>i(),()=>{if(i().length>=0){const P=i().reduce((j,L)=>j+(parseFloat(L.time)||0),0);if(P>0){const j=Math.floor(P/3600),L=Math.floor(P%3600/60);_(E,j>0?`${j} hr ${L} min`:`${L} min`)}else _(E,"")}}),Xt(),zt();var Le=Bu(),Oe=c(Le);ls(Oe,{get itemsStore(){return Wa},get isEditMode(){return r(p)},emptyText:"Queue is empty",onMoveItem:Q,$$slots:{header:(P,j)=>{var L=Fu(),_e=c(L),V=c(_e),xe=c(V),B=c(xe);Z(B,()=>(I(y),m(()=>y.MENU)));var F=g(V,2),$e=c(F),K=g(c($e),2),ie=c(K);{var ke=M=>{var N=Iu(),W=c(N);se(()=>re(W,(o(),m(()=>o().context_name||"Yandex Stream")))),b(M,N)},be=M=>{var N=Sa("Current Queue");b(M,N)};C(ie,M=>{o(),m(()=>o()&&o().active)?M(ke):M(be,!1)})}var Me=g(K,2),z=c(Me),pe=c(z),me=g(z,2);{var Ne=M=>{var N=ju(),W=c(N);se(()=>re(W,r(E))),b(M,N)};C(me,M=>{r(E)&&M(Ne)})}var D=g(me,2);{var O=M=>{var N=Nu();b(M,N)};C(D,M=>{o(),m(()=>o()&&o().active)&&M(O)})}var J=g($e,2),ae=c(J);{var S=M=>{var N=Du();A("click",N,U),b(M,N)},R=M=>{var N=Ou();se(()=>N.disabled=(i(),m(()=>i().length===0))),A("click",N,le),b(M,N)};C(ae,M=>{o(),m(()=>o()&&o().active)?M(S):M(R,!1)})}var oe=g(ae,2),X=c(oe);Z(X,()=>(I(y),m(()=>y.SAVE)));var ve=g(oe,2);let Ve;var Qe=c(ve);Z(Qe,()=>(r(p),I(y),m(()=>r(p)?y.ACCEPT:y.EDIT))),se(()=>{re(pe,`${i(),m(()=>i().length)??""} tracks`),oe.disabled=(i(),m(()=>i().length===0)),Ve=at(ve,1,"btn-action svelte-185fgrr",null,Ve,{active:r(p)}),Wt(ve,"title",r(p)?"Finish Editing":"Edit Queue"),ve.disabled=(i(),m(()=>i().length===0))}),A("click",oe,ye),A("click",ve,ne),b(P,L)},row:(P,j)=>{var L=qu();const _e=ht(()=>j.item),V=ht(()=>j.index),xe=ht(()=>j.startDrag);var B=c(L);Pr(B,{get track(){return r(_e)},get index(){return r(V)},get playingIndex(){return r(u)},get playingFile(){return r(h)},get isPlaying(){return r(f)},get isEditable(){return r(p)},$$events:{play:()=>de(r(V)),remove:()=>H(r(V)),startdrag(...F){r(xe)?.apply(this,F)}}}),b(P,L)}}}),b(e,Le),Mt(),v()}var Uu=k('<div class="token-alert content-padded svelte-4g0hpd"><h3 class="svelte-4g0hpd">Yandex Music Not Connected</h3> <p class="svelte-4g0hpd">Please go to Settings and connect your account.</p></div>'),Hu=k('<button class="clear-btn svelte-4g0hpd"><!></button>'),Vu=k('<div class="filter-tabs svelte-4g0hpd"><button>All</button> <button>Tracks</button></div>'),Wu=k('<div class="content-padded no-bottom-pad svelte-4g0hpd"><div class="search-input-container svelte-4g0hpd"><span class="search-icon svelte-4g0hpd"><!></span> <input type="text" placeholder="Search Yandex Music..." class="svelte-4g0hpd"/> <!></div> <!></div>'),Qu=k('<div class="icon-wrap pulse-anim svelte-4g0hpd"><!></div>'),Xu=k('<div class="icon-wrap svelte-4g0hpd"><!></div>'),Ku=k('<div class="music-card svelte-4g0hpd"><div><!> <div class="play-overlay svelte-4g0hpd"><span class="overlay-icon svelte-4g0hpd"><!></span></div></div> <div class="card-title center svelte-4g0hpd"> </div></div>'),Gu=k('<div class="icon-wrap svelte-4g0hpd"><!></div>'),Zu=k('<div slot="fallback" class="icon-fallback svelte-4g0hpd"><!></div>'),Ju=k('<div class="card-sub svelte-4g0hpd"> </div>'),ef=k('<div class="music-card svelte-4g0hpd"><div class="card-img-container svelte-4g0hpd"><!> <div class="play-overlay svelte-4g0hpd"><span class="overlay-icon svelte-4g0hpd"><!></span></div></div> <div class="card-title svelte-4g0hpd"> </div> <!></div>'),tf=k('<h2 class="header-label svelte-4g0hpd">Collection & Mixes</h2> <div class="music-grid horizontal section-mb svelte-4g0hpd"></div>',1),af=k('<div class="content-padded svelte-4g0hpd"><h2 class="header-label svelte-4g0hpd">Vibes</h2> <div class="music-grid horizontal section-mb svelte-4g0hpd"></div> <!></div>'),rf=k('<div class="icon-wrap svelte-4g0hpd"><!></div>'),sf=k('<div slot="fallback" class="icon-fallback svelte-4g0hpd"><!></div>'),nf=k('<h2 class="header-sub-text svelte-4g0hpd"> </h2>'),of=k('<div class="view-header svelte-4g0hpd"><div class="header-art svelte-4g0hpd"><!></div> <div class="header-info svelte-4g0hpd"><div class="header-text-group svelte-4g0hpd"><div class="header-label svelte-4g0hpd"> </div> <h1 class="header-title svelte-4g0hpd"> </h1> <!></div> <div class="header-actions svelte-4g0hpd"><button class="btn-primary svelte-4g0hpd">Play All</button> <button class="btn-secondary svelte-4g0hpd">To Queue</button></div></div></div>'),lf=k('<div class="music-card svelte-4g0hpd"><div class="card-img-container svelte-4g0hpd"><!> <div class="play-overlay svelte-4g0hpd"><span class="overlay-icon svelte-4g0hpd"><!></span></div></div> <div class="card-title svelte-4g0hpd"> </div> <div class="card-sub svelte-4g0hpd"> </div></div>'),cf=k('<h3 class="header-label svelte-4g0hpd" style="margin-top: 20px;">Albums</h3> <div class="music-grid horizontal section-mb svelte-4g0hpd"></div> <h3 class="header-label svelte-4g0hpd">Popular Tracks</h3>',1),df=k('<div class="music-card svelte-4g0hpd"><div class="card-img-container svelte-4g0hpd"><!></div> <div class="card-title center svelte-4g0hpd"> </div></div>'),vf=k('<h3 class="header-label svelte-4g0hpd">Artists</h3> <div class="music-grid horizontal section-mb svelte-4g0hpd"></div>',1),uf=k('<div class="music-card svelte-4g0hpd"><div class="card-img-container svelte-4g0hpd"><!></div> <div class="card-title svelte-4g0hpd"> </div> <div class="card-sub svelte-4g0hpd"> </div></div>'),ff=k('<h3 class="header-label svelte-4g0hpd">Albums</h3> <div class="music-grid horizontal section-mb svelte-4g0hpd"></div>',1),hf=k("<!> <!>",1),pf=k('<div slot="header" class="content-padded svelte-4g0hpd"><!> <!> <!></div>'),gf=k('<div slot="row" class="svelte-4g0hpd"><!></div>'),_f=k('<div class="spinner svelte-4g0hpd"></div>'),mf=k('<div slot="footer" class="loading-footer svelte-4g0hpd"><!> <div style="height:20px;" class="svelte-4g0hpd"></div></div>'),bf=k("<!> <!> <!>",1),yf=k('<div class="view-container scrollable relative-parent svelte-4g0hpd"><!></div>');function wf(e,t){Tt(t,!1);const a=()=>Ee(ut,"$navigationStack",o),s=()=>Ee(xr,"$yandexAuthStatus",o),n=()=>Ee(mi,"$yandexSearchTrigger",o),i=()=>Ee(f,"$albumsStore",o),[o,l]=Dt(),v=T(),d=T(),u=T(),h=Ke([]),f=Ke([]);let p=T([]),E=T([]),$=T(!1),w=T(!1),x={uid:null,kind:null,offset:0,type:"playlist"},U=!0,ne=T(),de=T(),H=T(""),ye=T("all"),le=T({tracks:[],albums:[],artists:[]}),Q,Le=T("");function Oe(S){return!S||S.view==="root"?"dashboard":S.view.startsWith("yandex_")?S.view.replace("yandex_",""):"dashboard"}async function P(S,R){if(S!=="dashboard"&&(S!=="search"&&h.set([]),f.set([])),S==="dashboard")_(H,""),r(p).length===0&&await _e();else if(S==="search"){const oe=R?.query||"";_(H,oe),oe&&await Me()}else S==="playlist"?await xe(R):S==="artist_details"?await B(R):S==="album_details"&&await F(R)}Na(()=>{r(u)&&r(p).length===0&&(_e(),L()),j()});function j(){r(de)&&r(de).disconnect(),_(de,new IntersectionObserver(S=>{S[0].isIntersecting&&!r($)&&!r(w)&&U&&["playlist","album_details","artist_details"].includes(r(d))&&ke()},{rootMargin:"200px"}))}async function L(){try{const S=await jt.getFavoritesIds();S&&S.ids&&ca.set(new Set(S.ids.map(String)))}catch(S){console.error("Sync likes failed",S)}}async function _e(){_($,!0);try{const[S,R,oe]=await Promise.all([jt.getUserPlaylists(),jt.getLanding(),jt.getStationsDashboard()]),X={title:"My Vibe",kind:"my_vibe",cover:null,isStation:!0,bgColor:"linear-gradient(135deg, #FFCC00, #FF3333)"},ve=oe.stations||[];_(p,[X,...ve]),_(E,[...R.personal||[],...S||[]])}catch(S){console.error("[YandexView] Dashboard Error:",S),ze("Failed to load dashboard","error")}finally{_($,!1)}}function V(S){if(S.kind==="my_vibe"){ze("Starting My Vibe...","info"),jt.playRadio();return}if(S.kind==="station"){ze(`Starting vibe: ${S.title}`,"info"),jt.playStation(S.id);return}qt("yandex_playlist",S)}async function xe(S){_($,!0),U=!0;let R=S.uid,oe=S.kind;if(!R&&S.id&&typeof S.id=="string"&&S.id.includes(":")){const X=S.id.split(":");R=X[0],oe=X[1]}else S.kind==="favorites"&&(oe="favorites");x={uid:R,kind:oe,offset:0,type:"playlist"};try{await ie(R,oe,0)}finally{_($,!1)}}async function B(S){_($,!0),U=!1;try{const R=await jt.getArtistDetails(S.id),oe=Ge(ut),X=oe[oe.length-1];X.view==="yandex_artist_details"&&(X.data={...X.data,name:R.name,title:R.name,description:R.description,cover:R.cover},ut.set(oe)),h.set(R.tracks||[]),f.set(R.albums||[])}finally{_($,!1)}}async function F(S){_($,!0),U=!1;try{const R=await jt.getAlbumDetails(S.id),oe=Ge(ut),X=oe[oe.length-1];X.view==="yandex_album_details"&&(X.data={...X.data,name:R.title,title:R.title,artist:R.artist,cover:R.cover},ut.set(oe)),h.set(R.tracks||[])}finally{_($,!1)}}function $e(S){qt("yandex_artist_details",S)}function K(S){qt("yandex_album_details",S)}async function ie(S,R,oe){const X=await jt.getPlaylistTracks(S,R,oe);return X&&X.tracks?(oe===0?h.set(X.tracks):h.update(ve=>[...ve,...X.tracks]),X.tracks.length===0&&(U=!1),X.tracks.length):(U=!1,0)}async function ke(){if(!(r(w)||!U)){_(w,!0);try{x.offset+=50,x.type==="playlist"&&await ie(x.uid,x.kind,x.offset)===0&&(U=!1)}finally{_(w,!1)}}}function be(S){const R=S.target.value;_(H,R),clearTimeout(Q),R.length>=2&&(Q=setTimeout(()=>{r(d)!=="search"?qt("yandex_search",{query:R}):Me()},600))}async function Me(){if(r(H)){_($,!0),_(le,{tracks:[],albums:[],artists:[]});try{const S=await jt.search(r(H));S&&(_(le,S),(r(ye)==="track"||r(ye)==="all")&&h.set(S.tracks||[]))}finally{_($,!1)}}}function z(S){_(ye,S),r(le).tracks&&S==="track"&&h.set(r(le).tracks)}async function pe(){const S=Ge(h);if(!S||S.length===0){ze("No tracks to play","error");return}let R="Yandex Playlist";r(v)?.data&&(R=r(v).data.title||r(v).data.name||R,r(d)==="artist_details"&&(R=`Artist: ${R}`),r(d)==="album_details"&&(R=`Album: ${R}`)),ze(`Starting ${R}...`,"info");try{const X=await(await fetch("/wave-yandex-api.php?action=play_playlist",{method:"POST",body:JSON.stringify({tracks:S,context:R})})).json();X.status==="ok"?ze("Playing...","success"):(console.error(X),ze("Error starting playback","error"))}catch(oe){console.error(oe),ze("Network error","error")}}async function me(){const S=Ge(h);if(!(!S||S.length===0)){ze(`Adding ${S.length} tracks...`,"info");try{(await fetch("/wave-yandex-api.php?action=add_tracks",{method:"POST",body:JSON.stringify({tracks:S})})).ok&&ze("Added to queue","success")}catch(R){console.error(R),ze("Failed to add","error")}}}function Ne(S){S.deltaY!==0&&(S.currentTarget.scrollLeft+=S.deltaY)}te(()=>a(),()=>{_(v,a()[a().length-1])}),te(()=>r(v),()=>{_(d,Oe(r(v)))}),te(()=>s(),()=>{_(u,s())}),te(()=>(r(v),r(Le)),()=>{const S=Oe(r(v)),R=S+JSON.stringify(r(v)?.data||{});R!==r(Le)&&(_(Le,R),P(S,r(v)?.data))}),te(()=>(n(),qt),()=>{if(n()){const S=n();mi.set(null),qt("yandex_search",{query:S})}}),te(()=>(r(ne),r(de)),()=>{r(ne)&&r(de)&&r(de).observe(r(ne))}),Xt(),zt();var D=yf(),O=c(D);{var J=S=>{var R=Uu();b(S,R)},ae=S=>{var R=bf(),oe=je(R);{var X=N=>{var W=Wu(),ge=c(W),Re=c(ge),Se=c(Re);Z(Se,()=>(I(y),m(()=>y.SEARCH)));var Te=g(Re,2),we=g(Te,2);{var G=ue=>{var fe=Hu(),Xe=c(fe);Z(Xe,()=>(I(y),m(()=>y.CLOSE))),A("click",fe,()=>{_(H,""),r(d)==="search"&&window.history.back()}),b(ue,fe)};C(we,ue=>{r(H)&&ue(G)})}var ee=g(ge,2);{var Y=ue=>{var fe=Vu(),Xe=c(fe);let Ce;var q=g(Xe,2);let ce;se(()=>{Ce=at(Xe,1,"svelte-4g0hpd",null,Ce,{active:r(ye)==="all"}),ce=at(q,1,"svelte-4g0hpd",null,ce,{active:r(ye)==="track"})}),A("click",Xe,()=>z("all")),A("click",q,()=>z("track")),b(ue,fe)};C(ee,ue=>{r(d)==="search"&&ue(Y)})}sr(Te,()=>r(H),ue=>_(H,ue)),A("input",Te,be),b(N,W)};C(oe,N=>{(r(d)==="dashboard"||r(d)==="search")&&N(X)})}var ve=g(oe,2);{var Ve=N=>{var W=af(),ge=g(c(W),2);wt(ge,5,()=>r(p),Bt,(Te,we)=>{var G=Ku(),ee=c(G);let Y;var ue=c(ee);{var fe=Pe=>{var Fe=Qu(),Ie=c(Fe);Z(Ie,()=>(I(y),m(()=>y.RADIO))),b(Pe,Fe)},Xe=Pe=>{var Fe=nt(),Ie=je(Fe);{var Be=De=>{Zt(De,{get src(){return r(we),m(()=>r(we).cover)},get alt(){return r(we),m(()=>r(we).title)},radius:"8px"})},Ye=De=>{var qe=Xu(),Ue=c(qe);Z(Ue,()=>(I(y),m(()=>y.RADIO))),b(De,qe)};C(Ie,De=>{r(we),m(()=>r(we).cover)?De(Be):De(Ye,!1)},!0)}b(Pe,Fe)};C(ue,Pe=>{r(we),m(()=>r(we).kind==="my_vibe")?Pe(fe):Pe(Xe,!1)})}var Ce=g(ue,2),q=c(Ce),ce=c(q);Z(ce,()=>(I(y),m(()=>y.PLAY)));var he=g(ee,2),He=c(he);se(()=>{Y=at(ee,1,"card-img-container svelte-4g0hpd",null,Y,{"is-vibe":r(we).kind==="my_vibe"}),ft(ee,(r(we),m(()=>r(we).bgColor&&!r(we).is_vibe?`background: ${r(we).bgColor}`:""))),re(He,(r(we),m(()=>r(we).title)))}),A("click",G,()=>V(r(we))),b(Te,G)});var Re=g(ge,2);{var Se=Te=>{var we=tf(),G=g(je(we),2);wt(G,5,()=>r(E),Bt,(ee,Y)=>{const ue=ht(()=>(r(Y),m(()=>r(Y).kind==="favorites")));var fe=ef(),Xe=c(fe),Ce=c(Xe);{var q=De=>{var qe=Gu(),Ue=c(qe);Z(Ue,()=>(I(y),m(()=>y.HEART_FILLED))),b(De,qe)},ce=De=>{Zt(De,{get src(){return r(Y),m(()=>r(Y).cover)},get alt(){return r(Y),m(()=>r(Y).title)},radius:"8px",$$slots:{fallback:(qe,Ue)=>{var Je=Zu(),et=c(Je);Z(et,()=>(I(y),m(()=>y.PLAYLISTS))),b(qe,Je)}}})};C(Ce,De=>{r(ue)?De(q):De(ce,!1)})}var he=g(Ce,2),He=c(he),Pe=c(He);Z(Pe,()=>(I(y),m(()=>y.PLAY)));var Fe=g(Xe,2),Ie=c(Fe),Be=g(Fe,2);{var Ye=De=>{var qe=Ju(),Ue=c(qe);se(()=>re(Ue,`${r(Y),m(()=>r(Y).trackCount)??""} tracks`)),b(De,qe)};C(Be,De=>{r(Y),m(()=>r(Y).trackCount)&&De(Ye)})}se(()=>{ft(Xe,r(ue)?"background: linear-gradient(135deg, #fa2d48, #c01c33);":""),re(Ie,(r(Y),m(()=>r(Y).title)))}),A("click",fe,()=>V(r(Y))),b(ee,fe)}),A("wheel",G,Ne),b(Te,we)};C(Re,Te=>{r(E),m(()=>r(E).length>0)&&Te(Se)})}A("wheel",ge,Ne),gt(1,W,()=>St),b(N,W)};C(ve,N=>{r(d)==="dashboard"&&N(Ve)})}var Qe=g(ve,2);{var M=N=>{ls(N,{get itemsStore(){return h},get isLoading(){return r($)},isEditMode:!1,emptyText:"No tracks found",$$slots:{header:(W,ge)=>{var Re=pf(),Se=c(Re);{var Te=ue=>{const fe=ht(()=>(r(v),m(()=>r(v).data)));var Xe=of(),Ce=c(Xe),q=c(Ce);{var ce=tt=>{var st=rf(),dt=c(st);Z(dt,()=>(I(y),m(()=>y.HEART_FILLED))),b(tt,st)},he=tt=>{{let st=ht(()=>(I(r(fe)),m(()=>r(fe).cover||r(fe).image)));Zt(tt,{get src(){return r(st)},get alt(){return I(r(fe)),m(()=>r(fe).title)},radius:"8px",$$slots:{fallback:(dt,mt)=>{var ct=sf(),vt=c(ct);Z(vt,()=>(I(y),m(()=>y.ALBUMS))),b(dt,ct)}}})}};C(q,tt=>{I(r(fe)),m(()=>r(fe).kind==="favorites")?tt(ce):tt(he,!1)})}var He=g(Ce,2),Pe=c(He),Fe=c(Pe),Ie=c(Fe),Be=g(Fe,2),Ye=c(Be),De=g(Be,2);{var qe=tt=>{var st=nf(),dt=c(st);se(()=>re(dt,(I(r(fe)),m(()=>r(fe).artist||r(fe).description)))),b(tt,st)};C(De,tt=>{I(r(fe)),m(()=>r(fe).artist||r(fe).description)&&tt(qe)})}var Ue=g(Pe,2),Je=c(Ue),et=g(Je,2);se(tt=>{ft(Ce,(I(r(fe)),m(()=>r(fe).kind==="favorites"?"background: linear-gradient(135deg, #fa2d48, #c01c33);":""))),re(Ie,tt),re(Ye,(I(r(fe)),m(()=>r(fe).title||r(fe).name)))},[()=>(r(d),m(()=>r(d).replace("_details","").toUpperCase().replace("YANDEX_","")))]),A("click",Je,pe),A("click",et,me),b(ue,Xe)};C(Se,ue=>{r(d),r(v),m(()=>r(d)!=="search"&&r(v).data)&&ue(Te)})}var we=g(Se,2);{var G=ue=>{var fe=cf(),Xe=g(je(fe),2);wt(Xe,5,i,Bt,(Ce,q)=>{var ce=lf(),he=c(ce),He=c(he);Zt(He,{get src(){return r(q),m(()=>r(q).image)},get alt(){return r(q),m(()=>r(q).title)},radius:"8px"});var Pe=g(He,2),Fe=c(Pe),Ie=c(Fe);Z(Ie,()=>(I(y),m(()=>y.PLAY)));var Be=g(he,2),Ye=c(Be),De=g(Be,2),qe=c(De);se(()=>{re(Ye,(r(q),m(()=>r(q).title))),re(qe,(r(q),m(()=>r(q).year)))}),A("click",ce,()=>K(r(q))),b(Ce,ce)}),A("wheel",Xe,Ne),b(ue,fe)};C(we,ue=>{r(d),i(),m(()=>r(d)==="artist_details"&&i().length>0)&&ue(G)})}var ee=g(we,2);{var Y=ue=>{var fe=hf(),Xe=je(fe);{var Ce=he=>{var He=vf(),Pe=g(je(He),2);wt(Pe,5,()=>(r(le),m(()=>r(le).artists)),Bt,(Fe,Ie)=>{var Be=df(),Ye=c(Be),De=c(Ye);Zt(De,{get src(){return r(Ie),m(()=>r(Ie).image)},get alt(){return r(Ie),m(()=>r(Ie).title)},radius:"8px"});var qe=g(Ye,2),Ue=c(qe);se(()=>re(Ue,(r(Ie),m(()=>r(Ie).title)))),A("click",Be,()=>$e(r(Ie))),b(Fe,Be)}),A("wheel",Pe,Ne),b(he,He)};C(Xe,he=>{r(le),m(()=>r(le).artists.length>0)&&he(Ce)})}var q=g(Xe,2);{var ce=he=>{var He=ff(),Pe=g(je(He),2);wt(Pe,5,()=>(r(le),m(()=>r(le).albums)),Bt,(Fe,Ie)=>{var Be=uf(),Ye=c(Be),De=c(Ye);Zt(De,{get src(){return r(Ie),m(()=>r(Ie).image)},get alt(){return r(Ie),m(()=>r(Ie).title)},radius:"8px"});var qe=g(Ye,2),Ue=c(qe),Je=g(qe,2),et=c(Je);se(()=>{re(Ue,(r(Ie),m(()=>r(Ie).title))),re(et,(r(Ie),m(()=>r(Ie).artist)))}),A("click",Be,()=>K(r(Ie))),b(Fe,Be)}),A("wheel",Pe,Ne),b(he,He)};C(q,he=>{r(le),m(()=>r(le).albums.length>0)&&he(ce)})}b(ue,fe)};C(ee,ue=>{r(d)==="search"&&!r($)&&ue(Y)})}b(W,Re)},row:(W,ge)=>{var Re=gf();const Se=ht(()=>ge.item),Te=ht(()=>ge.index);var we=c(Re);Pr(we,{get track(){return r(Se)},get index(){return r(Te)},$$events:{play:()=>jt.playTrack(r(Se).id)}}),b(W,Re)},footer:(W,ge)=>{var Re=mf(),Se=c(Re);{var Te=G=>{var ee=_f();b(G,ee)};C(Se,G=>{r(w)&&G(Te)})}var we=g(Se,2);Ia(we,G=>_(ne,G),()=>r(ne)),b(W,Re)}}})};C(Qe,N=>{r(d),m(()=>["playlist","search","artist_details","album_details"].includes(r(d)))&&N(M)})}b(S,R)};C(O,S=>{r(u)?S(ae,!1):S(J)})}b(e,D),Mt(),l()}var kf=k('<div class="knob svelte-1jla3sy"></div>'),xf=k('<div class="tooltip current svelte-1jla3sy"> </div> <span></span>',1),Sf=k('<div slot="fallback" class="icon-fallback svelte-1jla3sy"><!></div>'),Ef=k('<span class="meta-tag quality"> </span>'),$f=k('<div class="dot svelte-1jla3sy"></div>'),Tf=k("<button><!> <!></button>"),Mf=k('<div class="dock svelte-1jla3sy"><div class="progress-shadow svelte-1jla3sy"></div> <div><div class="rail svelte-1jla3sy"></div> <div class="fill svelte-1jla3sy"><!></div> <!></div> <div class="grid svelte-1jla3sy"><div class="info svelte-1jla3sy"><div class="art svelte-1jla3sy"><!></div> <div class="meta svelte-1jla3sy"><div class="title-row svelte-1jla3sy"><div class="title text-ellipsis svelte-1jla3sy"> </div> <button class="btn-icon tiny-dots svelte-1jla3sy"><!></button></div> <div class="artist-row svelte-1jla3sy"><div class="artist text-ellipsis svelte-1jla3sy"> </div> <!></div></div></div> <div class="controls svelte-1jla3sy"><button><!></button> <button class="btn-icon"><!></button> <button class="play-btn flex-center svelte-1jla3sy"><!></button> <button class="btn-icon"><!></button> <!></div> <div class="volume desktop svelte-1jla3sy"><button class="vol-btn-mini svelte-1jla3sy" title="Mute/Unmute"><!></button> <div class="custom-slider svelte-1jla3sy"><div class="slider-bg svelte-1jla3sy"><div class="slider-fill svelte-1jla3sy"></div> <div class="slider-knob svelte-1jla3sy"></div></div></div></div></div></div>');function Af(e,t){Tt(t,!1);const a=()=>Ee($t,"$status",v),s=()=>Ee(Qt,"$currentSong",v),n=()=>Ee(ca,"$yandexFavorites",v),i=()=>Ee(Ya,"$favorites",v),o=()=>Ee(Qa,"$stations",v),l=()=>Ee(Ms,"$isFullPlayerOpen",v),[v,d]=Dt(),u=T(),h=T(),f=T(),p=T(),E=T(),$=T(),w=T(),x=T(),U=T(),ne=T(),de=T(),H=T(),ye=T();let le=T(!1),Q=T(!1),Le=!1,Oe=T(0),P=T(),j=T();const L=D=>O=>{O.stopPropagation(),D(O)};function _e(D){if(isNaN(D)||D===null)return"0:00";const O=Math.floor(D/60),J=Math.floor(D%60);return`${O}:${J<10?"0":""}${J}`}function V(D,O){const J=O.getBoundingClientRect();return Math.max(0,Math.min(1,(D.clientX-J.left)/J.width))}function xe(D){r(p)||(_(Q,!0),_(Oe,V(D,r(P))),window.addEventListener("mousemove",B),window.addEventListener("mouseup",F))}function B(D){if(r(Q)&&_(Oe,V(D,r(P))),Le){const O=Math.round(V(D,r(j))*100);Ca(O)}}function F(){r(Q)&&!r(p)&&Dn(r(Oe)*r(u)),_(Q,!1),Le=!1,window.removeEventListener("mousemove",B),window.removeEventListener("mouseup",F)}let $e=50;function K(D){D.stopPropagation(),a().volume>0?($e=a().volume,Ca(0)):Ca($e>0?$e:30)}function ie(D){Le=!0;const O=Math.round(V(D,r(j))*100);Ca(O),window.addEventListener("mousemove",B),window.addEventListener("mouseup",F)}function ke(){const D=(r(ye)+1)%3;D===0?(a().random&&nr(),a().repeat&&ir()):D===1?(a().random||nr(),a().repeat&&ir()):D===2&&(a().random&&nr(),a().repeat||ir())}function be(D){D.stopPropagation(),Jr(D,s(),{type:"general",source:"miniplayer"})}function Me(D){Jr(D.detail.originalEvent,s(),{type:"general",source:"miniplayer"})}async function z(D){D&&D.stopPropagation&&D.stopPropagation();const O=s();if(!(!O.file&&!O.id))if(O.isYandex||O.service==="yandex"){const J=n().has(String(O.id));try{J?(ca.update(ae=>(ae.delete(String(O.id)),ae)),ze("Removed from Yandex Likes","info")):(ca.update(ae=>(ae.add(String(O.id)),ae)),ze("Added to Yandex Likes","success")),await jt.toggleLike(O.id,J)}catch{ze("Error updating like","error")}}else ba.toggleFavorite(O)}te(()=>a(),()=>{_(u,a().duration>0?a().duration:1)}),te(()=>a(),()=>{_(h,a().elapsed||0)}),te(()=>a(),()=>{_(f,a().state==="play")}),te(()=>s(),()=>{_(p,s().file?.startsWith("http")&&!s().isYandex)}),te(()=>s(),()=>{_(E,s().title||"Not Playing")}),te(()=>s(),()=>{_($,s().stationName||s().artist||"Moode")}),te(()=>(s(),n(),i()),()=>{_(w,s().isYandex||s().service==="yandex"?n().has(String(s().id)):s().file&&i().has(s().file))}),te(()=>(s(),o()),()=>{_(x,Cr(s(),o(),s().stationName))}),te(()=>(r(p),r(Q),r(Oe),r(h),r(u)),()=>{_(U,r(p)?0:r(Q)?r(Oe)*100:r(h)/r(u)*100)}),te(()=>(r(f),r(Q),r(p)),()=>{_(ne,r(f)&&!r(Q)&&!r(p))}),te(()=>a(),()=>{_(de,a().bitrate?`${a().bitrate} kbps`:a().format||"")}),te(()=>(a(),y),()=>{_(H,a().volume===0?y.VOLUME_MUTE:a().volume<50?y.VOLUME_MEDIUM:y.VOLUME_FULL)}),te(()=>a(),()=>{_(ye,a().repeat?2:a().random?1:0)}),Xt(),zt();var pe=nt(),me=je(pe);{var Ne=D=>{var O=Mf(),J=c(O),ae=g(J,2);let S;var R=g(c(ae),2),oe=c(R);{var X=Ze=>{var kt=kf();b(Ze,kt)};C(oe,Ze=>{r(p)||Ze(X)})}var ve=g(R,2);{var Ve=Ze=>{var kt=xf(),Rt=je(kt),Da=c(Rt);se(Ae=>{ft(Rt,`left: ${r(U)??""}%`),re(Da,Ae)},[()=>(r(Q),r(Oe),r(u),r(h),m(()=>r(Q)?_e(r(Oe)*r(u)):_e(r(h))))]),b(Ze,kt)};C(ve,Ze=>{(r(le)||r(Q))&&!r(p)&&Ze(Ve)})}Ia(ae,Ze=>_(P,Ze),()=>r(P));var Qe=g(ae,2),M=c(Qe),N=c(M),W=c(N);Zt(W,{get src(){return r(x)},alt:"art",radius:"4px",$$slots:{fallback:(Ze,kt)=>{var Rt=Sf(),Da=c(Rt);Z(Da,()=>(r(p),I(y),m(()=>r(p)?y.RADIO:y.ALBUMS))),b(Ze,Rt)}}});var ge=g(N,2),Re=c(ge),Se=c(Re),Te=c(Se),we=g(Se,2),G=c(we);Z(G,()=>(I(y),m(()=>y.DOTS)));var ee=g(Re,2),Y=c(ee),ue=c(Y),fe=g(Y,2);{var Xe=Ze=>{var kt=Ef(),Rt=c(kt);se(()=>re(Rt,r(de))),b(Ze,kt)};C(fe,Ze=>{r(de)&&Ze(Xe)})}var Ce=g(M,2),q=c(Ce),ce=Nr(()=>L(z));let he;var He=c(q);Z(He,()=>(r(w),I(y),m(()=>r(w)?y.HEART_FILLED:y.HEART)));var Pe=g(q,2),Fe=Nr(()=>L(()=>as("previous"))),Ie=c(Pe);Z(Ie,()=>(I(y),m(()=>y.PREVIOUS)));var Be=g(Pe,2),Ye=Nr(()=>L(Os)),De=c(Be);Z(De,()=>(a(),I(y),m(()=>a().state==="play"?y.PAUSE:y.PLAY)));var qe=g(Be,2),Ue=Nr(()=>L(()=>as("next"))),Je=c(qe);Z(Je,()=>(I(y),m(()=>y.NEXT)));var et=g(qe,2);{var tt=Ze=>{var kt=Tf(),Rt=Nr(()=>L(ke));let Da;var Ae=c(kt);{var rt=Ot=>{var xa=nt(),jr=je(xa);Z(jr,()=>(I(y),m(()=>y.REPEAT))),b(Ot,xa)},yt=Ot=>{var xa=nt(),jr=je(xa);Z(jr,()=>(I(y),m(()=>y.SHUFFLE))),b(Ot,xa)};C(Ae,Ot=>{r(ye)===2?Ot(rt):Ot(yt,!1)})}var fa=g(Ae,2);{var qs=Ot=>{var xa=$f();b(Ot,xa)};C(fa,Ot=>{r(ye)>0&&Ot(qs)})}se(()=>Da=at(kt,1,"btn-icon desktop mode-btn svelte-1jla3sy",null,Da,{active:r(ye)>0})),A("click",kt,function(...Ot){r(Rt)?.apply(this,Ot)}),b(Ze,kt)};C(et,Ze=>{r(p)||Ze(tt)})}var st=g(Ce,2),dt=c(st),mt=c(dt);Z(mt,()=>r(H));var ct=g(dt,2),vt=c(ct),bt=c(vt),Kt=g(bt,2);Ia(ct,Ze=>_(j,Ze),()=>r(j)),Yt(()=>A("click",O,()=>Ms.set(!0))),An(O,(Ze,kt)=>Bn?.(Ze,kt),()=>500),Yt(()=>A("longpress",O,Me)),se(()=>{ft(J,`width: ${r(U)??""}%; transition: ${r(ne)?"width 0.25s linear":"none"}`),S=at(ae,1,"progress-bar svelte-1jla3sy",null,S,{radio:r(p)}),ft(R,`width: ${r(U)??""}%; transition: ${r(ne)?"width 0.25s linear":"none"}`),Wt(Se,"title",r(E)),re(Te,r(E)),Wt(Y,"title",r($)),re(ue,r($)),he=at(q,1,"btn-icon desktop svelte-1jla3sy",null,he,{liked:r(w)}),ft(bt,`width: ${a(),m(()=>a().volume)??""}%`),ft(Kt,`left: ${a(),m(()=>a().volume)??""}%`)}),A("mouseenter",ae,()=>_(le,!0)),A("mouseleave",ae,()=>_(le,!1)),A("mousedown",ae,ta(xe)),A("click",ae,ta(function(Ze){Zr.call(this,t,Ze)})),A("click",we,be),A("click",q,function(...Ze){r(ce)?.apply(this,Ze)}),A("click",Pe,function(...Ze){r(Fe)?.apply(this,Ze)}),A("click",Be,function(...Ze){r(Ye)?.apply(this,Ze)}),A("click",qe,function(...Ze){r(Ue)?.apply(this,Ze)}),A("click",dt,K),A("mousedown",ct,ta(ie)),A("click",ct,ta(function(Ze){Zr.call(this,t,Ze)})),b(D,O)};C(me,D=>{l()||D(Ne)})}b(e,pe),Mt(),d()}var Cf=k('<div class="drag-zone svelte-1olwzt8"><div class="drag-handle-icon svelte-1olwzt8"><!></div></div>'),Pf=k('<div slot="fallback" class="icon-fallback svelte-1olwzt8"><!></div>'),Lf=k('<span class="meta-tag quality"> </span>'),zf=k('<span class="dot svelte-1olwzt8"></span>'),Rf=k("<button><!> <!></button>"),If=k('<div style="width: 44px;"></div>'),jf=k('<div><!> <div class="bg-container svelte-1olwzt8"><div class="bg-gradient-fallback svelte-1olwzt8"></div> <img class="bg-img svelte-1olwzt8" alt="" loading="eager"/> <div class="bg-overlay svelte-1olwzt8"></div></div> <div class="player-body svelte-1olwzt8"><div class="art-container svelte-1olwzt8"><div class="artwork svelte-1olwzt8"><!></div></div> <div class="controls-area svelte-1olwzt8"><div class="meta svelte-1olwzt8"><h1 class="title text-ellipsis svelte-1olwzt8"> </h1> <div class="artist-row svelte-1olwzt8"><h2 class="artist text-ellipsis svelte-1olwzt8"> </h2> <!></div></div> <div class="progress-section"><div><div class="common-track svelte-1olwzt8"><div class="common-fill svelte-1olwzt8"><div class="common-knob svelte-1olwzt8"></div></div></div></div> <div class="time-row svelte-1olwzt8"><span> </span> <span> </span></div></div> <div class="buttons-row svelte-1olwzt8"><button><!></button> <button class="btn-icon side-btn svelte-1olwzt8"><!></button> <button class="play-btn-large flex-center svelte-1olwzt8"><!></button> <button class="btn-icon side-btn svelte-1olwzt8"><!></button> <!></div> <div class="volume-row svelte-1olwzt8"><button class="btn-icon small vol-btn svelte-1olwzt8"><!></button> <div class="volume-hit-area svelte-1olwzt8"><div class="common-track svelte-1olwzt8"><div class="common-fill svelte-1olwzt8"></div> <div class="common-knob svelte-1olwzt8"></div></div></div> <div class="vol-icon-static svelte-1olwzt8"><!></div></div></div></div></div>');function Ei(e,t){Tt(t,!1);const a=()=>Ee(Qt,"$currentSong",l),s=()=>Ee(Qa,"$stations",l),n=()=>Ee($t,"$status",l),i=()=>Ee(ca,"$yandexFavorites",l),o=()=>Ee(Ya,"$favorites",l),[l,v]=Dt(),d=T(),u=T(),h=T(),f=T(),p=T(),E=T(),$=T(),w=T(),x=T(),U=T(),ne=T(),de=T();let H=xt(t,"isDocked",8,!1),ye=0,le=T(0),Q=T(!1);function Le(){Ms.set(!1)}function Oe(Ae){if(H())return;const rt=Ae.target;rt.closest(".bar-hit-area")||rt.closest(".volume-hit-area")||(ye=Ae.touches[0].clientY,_(Q,!0))}function P(Ae){if(!r(Q)||H())return;const rt=Ae.touches[0].clientY-ye;rt>0&&(Ae.cancelable&&rt>10&&Ae.preventDefault(),_(le,rt))}function j(){H()||(_(Q,!1),r(le)>150?Le():_(le,0))}let L=T(!1),_e=T(0),V=T();function xe(Ae){const rt=Math.floor(Ae/60)||0,yt=Math.floor(Ae%60)||0;return`${rt}:${yt.toString().padStart(2,"0")}`}function B(Ae,rt){const yt=rt.getBoundingClientRect(),fa=Ae.touches?Ae.touches[0].clientX:Ae.clientX;return Math.max(0,Math.min(1,(fa-yt.left)/yt.width))}function F(Ae){r(f)||(_(L,!0),_(_e,B(Ae,r(V))))}function $e(Ae){r(L)&&_(_e,B(Ae,r(V)))}function K(){r(L)&&!r(f)&&Dn(r(_e)*r(u)),_(L,!1)}let ie=!1,ke=T(),be=50;function Me(){n().volume>0?(be=n().volume,Ca(0)):Ca(be>0?be:30)}function z(Ae){ie=!0;const rt=Math.round(B(Ae,r(ke))*100);Ca(rt),window.addEventListener("mousemove",pe),window.addEventListener("mouseup",me),window.addEventListener("touchmove",pe,{passive:!1}),window.addEventListener("touchend",me)}function pe(Ae){if(ie){Ae.preventDefault();const rt=Math.round(B(Ae,r(ke))*100);Ca(rt)}}function me(){ie=!1,window.removeEventListener("mousemove",pe),window.removeEventListener("mouseup",me),window.removeEventListener("touchmove",pe),window.removeEventListener("touchend",me)}function Ne(){const Ae=(r(x)+1)%3;Ae===0?(n().random&&nr(),n().repeat&&ir()):Ae===1?(n().random||nr(),n().repeat&&ir()):Ae===2&&(n().random&&nr(),n().repeat||ir())}async function D(){const Ae=a();if(!(!Ae.file&&!Ae.id))if(Ae.isYandex||Ae.service==="yandex"){const rt=i().has(String(Ae.id));try{rt?(ca.update(yt=>(yt.delete(String(Ae.id)),yt)),ze("Removed from Yandex Likes","info")):(ca.update(yt=>(yt.add(String(Ae.id)),yt)),ze("Added to Yandex Likes","success")),await jt.toggleLike(Ae.id,rt)}catch{ze("Error updating like","error")}}else ba.toggleFavorite(Ae)}te(()=>(a(),s()),()=>{_(d,Cr(a(),s(),a().stationName))}),te(()=>n(),()=>{_(u,n().duration||1)}),te(()=>n(),()=>{_(h,n().elapsed||0)}),te(()=>a(),()=>{_(f,a().file?.startsWith("http")&&!a().isYandex)}),te(()=>n(),()=>{_(p,n().state==="play")}),te(()=>(r(p),r(L),r(f)),()=>{_(E,r(p)&&!r(L)&&!r(f))}),te(()=>(r(f),r(L),r(_e),r(h),r(u)),()=>{_($,r(f)?0:r(L)?r(_e)*100:r(h)/r(u)*100)}),te(()=>(n(),y),()=>{_(w,n().volume===0?y.VOLUME_MUTE:n().volume<50?y.VOLUME_MEDIUM:y.VOLUME_FULL)}),te(()=>n(),()=>{_(x,n().repeat?2:n().random?1:0)}),te(()=>n(),()=>{_(U,n().bitrate?`${n().bitrate} kbps`:n().format||"")}),te(()=>(a(),i(),o()),()=>{_(ne,a().isYandex||a().service==="yandex"?i().has(String(a().id)):a().file&&o().has(a().file))}),te(()=>I(H()),()=>{_(de,H()?"8px":"var(--radius-xl)")}),Xt(),zt();var O=jf();let J;var ae=c(O);{var S=Ae=>{var rt=Cf(),yt=c(rt),fa=c(yt);Z(fa,()=>(I(y),m(()=>y.CHEVRON_DOWN))),A("touchstart",rt,Oe),A("touchmove",rt,P),A("touchend",rt,j),A("click",rt,Le),b(Ae,rt)};C(ae,Ae=>{H()||Ae(S)})}var R=g(ae,2),oe=g(c(R),2),X=g(R,2),ve=c(X),Ve=c(ve),Qe=c(Ve);Zt(Qe,{get src(){return r(d)},alt:"Cover",get radius(){return r(de)},$$slots:{fallback:(Ae,rt)=>{var yt=Pf(),fa=c(yt);Z(fa,()=>(r(f),I(y),m(()=>r(f)?y.RADIO:y.ALBUMS))),b(Ae,yt)}}});var M=g(ve,2),N=c(M),W=c(N),ge=c(W),Re=g(W,2),Se=c(Re),Te=c(Se),we=g(Se,2);{var G=Ae=>{var rt=Lf(),yt=c(rt);se(()=>re(yt,r(U))),b(Ae,rt)};C(we,Ae=>{r(U)&&Ae(G)})}var ee=g(N,2),Y=c(ee);let ue;var fe=c(Y),Xe=c(fe);Ia(Y,Ae=>_(V,Ae),()=>r(V));var Ce=g(Y,2),q=c(Ce),ce=c(q),he=g(q,2),He=c(he),Pe=g(ee,2),Fe=c(Pe);let Ie;var Be=c(Fe);Z(Be,()=>(r(ne),I(y),m(()=>r(ne)?y.HEART_FILLED:y.HEART)));var Ye=g(Fe,2),De=c(Ye);Z(De,()=>(I(y),m(()=>y.PREVIOUS)));var qe=g(Ye,2),Ue=c(qe);Z(Ue,()=>(n(),I(y),m(()=>n().state==="play"?y.PAUSE:y.PLAY)));var Je=g(qe,2),et=c(Je);Z(et,()=>(I(y),m(()=>y.NEXT)));var tt=g(Je,2);{var st=Ae=>{var rt=Rf();let yt;var fa=c(rt);{var qs=ha=>{var Xa=nt(),Bs=je(Xa);Z(Bs,()=>(I(y),m(()=>y.REPEAT))),b(ha,Xa)},Ot=ha=>{var Xa=nt(),Bs=je(Xa);Z(Bs,()=>(I(y),m(()=>y.SHUFFLE))),b(ha,Xa)};C(fa,ha=>{r(x)===2?ha(qs):ha(Ot,!1)})}var xa=g(fa,2);{var jr=ha=>{var Xa=zf();b(ha,Xa)};C(xa,ha=>{r(x)>0&&ha(jr)})}se(()=>yt=at(rt,1,"btn-icon side-btn mode-btn svelte-1olwzt8",null,yt,{active:r(x)>0})),A("click",rt,Ne),b(Ae,rt)},dt=Ae=>{var rt=If();b(Ae,rt)};C(tt,Ae=>{r(f)?Ae(dt,!1):Ae(st)})}var mt=g(Pe,2),ct=c(mt),vt=c(ct);Z(vt,()=>r(w));var bt=g(ct,2),Kt=c(bt),Ze=c(Kt),kt=g(Ze,2);Ia(bt,Ae=>_(ke,Ae),()=>r(ke));var Rt=g(bt,2),Da=c(Rt);Z(Da,()=>(I(y),m(()=>y.VOLUME_FULL))),se((Ae,rt)=>{J=at(O,1,"full-player svelte-1olwzt8",null,J,{"is-docked":H()}),ft(O,H()?"":`transform: translateY(${r(le)}px); transition: ${r(Q)?"none":"transform 0.3s cubic-bezier(0.2, 0.8, 0.2, 1)"}`),Wt(oe,"src",r(d)),ft(Ve,`transform: scale(${1-r(le)/3e3})`),ft(M,`opacity: ${1-r(le)/400}`),re(ge,(a(),m(()=>a().title||"Not Playing"))),re(Te,(a(),m(()=>a().stationName||a().artist||"Moode Audio"))),ue=at(Y,1,"bar-hit-area svelte-1olwzt8",null,ue,{"is-docked-bar":H()}),ft(Xe,`width: ${r($)??""}%; transition: ${r(E)?"width 0.3s linear":"none"}`),re(ce,Ae),re(He,rt),Ie=at(Fe,1,"btn-icon side-btn svelte-1olwzt8",null,Ie,{liked:r(ne)}),ft(Ze,`width: ${n(),m(()=>n().volume)??""}%`),ft(kt,`left: ${n(),m(()=>n().volume)??""}%; right: auto;`)},[()=>(r(L),r(_e),r(u),r(h),m(()=>r(L)?xe(r(_e)*r(u)):xe(r(h)))),()=>(r(f),r(u),m(()=>r(f)?"LIVE":xe(r(u))))]),A("mousedown",Y,F),A("touchstart",Y,F,void 0,!0),A("mousemove",Y,function(...Ae){(r(L)?$e:null)?.apply(this,Ae)}),A("touchmove",Y,function(...Ae){(r(L)?$e:null)?.apply(this,Ae)},void 0,!0),A("mouseup",Y,K),A("touchend",Y,K),A("click",Fe,D),A("click",Ye,()=>as("previous")),A("click",qe,function(...Ae){Os?.apply(this,Ae)}),A("click",Je,()=>as("next")),A("click",ct,Me),A("mousedown",bt,ta(z)),A("touchstart",bt,ta(z)),gt(3,O,()=>bo,()=>({y:H()?0:800,duration:300,opacity:1})),b(e,O),Mt(),v()}const Nf=`<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.0//EN" "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd">
<svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="600px" height="331px" viewBox="0 0 600 331" preserveAspectRatio="xMidYMid meet">
 <g fill="#eb1250">
  <path d="M 315.33 288.42 c -1.03 -0.33 -2.60 -1.34 -3.70 -2.39 -1.08 -1.01 -1.73 -2.81 -2.48 -6.68 -0.38 -1.99 -0.84 -4.29 -1.03 -5.13 -0.21 -0.84 -0.47 -2.20 -0.61 -3.05 -0.14 -0.84 -0.42 -2.34 -0.61 -3.33 -0.45 -2.20 -0.42 -2.04 -0.77 -4.17 -0.16 -0.96 -0.40 -2.16 -0.52 -2.65 -0.14 -0.52 -0.33 -1.45 -0.45 -2.11 -0.12 -0.68 -0.38 -2.02 -0.59 -2.98 -0.21 -0.96 -0.52 -2.55 -0.70 -3.52 -0.16 -0.96 -0.52 -2.81 -0.77 -4.10 -0.26 -1.29 -0.82 -4.08 -1.22 -6.21 -0.80 -4.20 -1.57 -8.13 -2.44 -12.54 -0.33 -1.55 -0.63 -3.23 -0.73 -3.75 -0.07 -0.52 -0.28 -1.57 -0.47 -2.34 -0.16 -0.77 -0.54 -2.63 -0.80 -4.10 -0.28 -1.48 -0.61 -3.12 -0.73 -3.63 -0.12 -0.52 -0.42 -2.20 -0.70 -3.75 -0.28 -1.55 -0.91 -4.92 -1.43 -7.50 -0.49 -2.58 -1.34 -7.01 -1.85 -9.84 -0.54 -2.84 -1.17 -6.26 -1.43 -7.62 -0.26 -1.36 -0.56 -3.07 -0.68 -3.80 -0.12 -0.75 -0.26 -1.43 -0.33 -1.55 -0.26 -0.42 -2.60 -12.89 -3.21 -17.16 -0.12 -0.84 -0.38 -2.16 -0.56 -2.93 -0.16 -0.77 -0.49 -2.34 -0.70 -3.52 -0.21 -1.15 -0.63 -3.26 -0.94 -4.69 -0.30 -1.41 -0.68 -3.30 -0.82 -4.22 -0.16 -0.89 -0.47 -2.58 -0.73 -3.75 -0.68 -3.30 -2.74 -14.16 -3.73 -19.80 -0.28 -1.48 -0.63 -3.38 -0.82 -4.22 -0.38 -1.71 -1.31 -6.70 -1.88 -10.08 -0.40 -2.34 -0.87 -4.71 -1.43 -7.27 -0.16 -0.84 -0.59 -3 -0.91 -4.80 -0.35 -1.80 -0.77 -4.01 -0.96 -4.92 -0.19 -0.89 -0.54 -2.98 -0.80 -4.64 -0.49 -3.26 -0.70 -3.91 -1.10 -3.40 -0.14 0.16 -0.30 0.63 -0.38 1.01 -0.07 0.40 -0.54 2.51 -1.01 4.69 -2.67 12.42 -3.16 14.77 -3.38 16.29 -0.28 1.99 -1.48 7.64 -3.77 18.05 -1.17 5.23 -2.37 10.66 -2.67 12.07 -0.33 1.43 -0.84 4.01 -1.17 5.74 -0.30 1.73 -1.05 5.27 -1.64 7.85 -0.59 2.58 -1.59 7.17 -2.25 10.20 -0.63 3.02 -1.38 5.93 -1.62 6.45 -0.66 1.36 -2.60 3.26 -4.05 3.96 -1.24 0.61 -1.24 0.61 -87.30 0.61 -86.04 0 -86.04 0 -87.33 -0.49 -1.59 -0.59 -3.56 -2.32 -4.41 -3.89 -1.97 -3.63 -0.35 -8.32 3.61 -10.43 1.01 -0.54 1.01 -0.54 83.44 -0.61 82.43 -0.05 82.43 -0.05 82.69 -1.41 0.14 -0.73 0.42 -1.85 0.59 -2.51 0.19 -0.63 0.82 -3.59 1.41 -6.56 0.59 -2.95 1.29 -6.23 1.52 -7.27 0.23 -1.03 0.82 -3.66 1.27 -5.86 0.47 -2.18 1.34 -6.30 1.97 -9.14 0.63 -2.84 1.34 -6.16 1.57 -7.38 0.21 -1.22 0.49 -2.39 0.61 -2.60 0.09 -0.21 0.42 -1.64 0.68 -3.16 0.26 -1.55 0.63 -3.26 0.82 -3.82 0.19 -0.59 0.35 -1.34 0.35 -1.69 0 -0.35 0.21 -1.57 0.49 -2.70 0.26 -1.13 0.59 -2.60 0.68 -3.23 0.21 -1.22 2.16 -10.08 3.05 -13.78 0.26 -1.13 1.05 -4.88 1.76 -8.32 0.70 -3.45 1.55 -7.59 1.88 -9.21 0.33 -1.62 1.08 -5.09 1.64 -7.73 1.62 -7.41 1.73 -7.95 2.13 -9.96 0.91 -4.62 1.92 -9.19 2.18 -9.80 0.14 -0.35 0.82 -1.24 1.48 -1.97 2.58 -2.72 5.84 -3.42 8.88 -1.90 1.97 0.98 3.73 2.74 4.27 4.31 0.42 1.20 1.41 6.42 1.80 9.47 0.09 0.84 0.30 1.83 0.45 2.18 0.14 0.38 0.26 1.10 0.26 1.66 0 0.54 0.16 1.45 0.35 2.04 0.19 0.56 0.56 2.25 0.84 3.73 0.82 4.50 1.78 9.28 2.20 11.13 0.19 0.77 0.45 2.04 0.56 2.81 0.47 2.63 1.92 10.08 2.25 11.60 0.19 0.84 0.45 2.16 0.56 2.93 0.28 1.64 0.63 3.56 1.08 5.86 0.19 0.91 0.49 2.60 0.70 3.75 0.21 1.17 0.54 2.79 0.70 3.63 0.19 0.84 0.77 3.75 1.29 6.45 0.54 2.72 1.17 5.88 1.41 7.03 0.23 1.17 0.66 3.38 0.94 4.92 0.26 1.55 0.70 4.03 0.96 5.51 0.26 1.48 0.73 3.91 1.03 5.39 0.30 1.48 0.68 3.45 0.82 4.34 0.16 0.91 0.47 2.48 0.70 3.52 0.70 3.19 2.23 10.73 2.58 12.89 0.09 0.66 0.47 2.48 0.80 4.10 0.63 3.05 0.70 3.35 1.66 8.77 0.33 1.80 0.82 4.29 1.08 5.51 0.26 1.24 0.56 2.79 0.68 3.42 0.19 1.17 0.89 4.76 1.55 8.09 0.21 0.96 0.63 3.23 0.96 5.04 0.84 4.64 1.41 7.55 1.69 8.91 0.14 0.66 0.35 1.76 0.49 2.46 0.12 0.70 0.38 2.04 0.56 2.93 0.19 0.91 0.61 3.16 0.94 5.04 1.05 5.86 2.48 13.41 2.88 15.12 0.19 0.91 0.42 2.02 0.47 2.46 0.07 0.45 0.33 1.78 0.59 2.93 0.26 1.17 0.56 2.70 0.68 3.40 0.12 0.70 0.30 1.62 0.42 1.99 0.12 0.40 0.35 1.48 0.52 2.41 0.26 1.50 0.35 1.69 0.82 1.69 0.45 0 0.54 -0.16 0.68 -0.98 0.23 -1.66 2.23 -11.86 2.84 -14.60 0.30 -1.41 0.66 -3.09 0.80 -3.75 0.89 -4.57 5.46 -26.60 6.47 -31.17 0.33 -1.41 0.77 -3.59 1.03 -4.80 0.52 -2.51 1.13 -5.44 2.13 -10.08 0.38 -1.73 1.01 -4.69 1.36 -6.56 0.38 -1.88 1.05 -5.13 1.50 -7.27 0.47 -2.13 0.94 -4.38 1.05 -5.04 0.45 -2.30 1.95 -9.63 2.18 -10.48 0.26 -1.01 1.64 -7.38 2.44 -11.32 0.30 -1.55 0.77 -3.87 1.05 -5.16 0.47 -2.34 2.91 -13.57 4.22 -19.57 0.38 -1.73 0.82 -3.89 0.96 -4.80 0.54 -3.26 2.16 -5.65 4.64 -6.91 1.73 -0.87 2.53 -1.01 4.36 -0.82 1.22 0.14 1.83 0.35 2.93 1.08 2.20 1.43 3.40 3.45 4.45 7.55 0.26 1.05 0.70 2.72 0.96 3.68 0.26 0.96 0.63 2.34 0.80 3.05 0.54 2.16 1.29 4.95 1.78 6.56 0.23 0.84 0.70 2.48 1.01 3.63 0.30 1.17 0.98 3.63 1.52 5.51 0.54 1.88 1.24 4.41 1.55 5.63 0.33 1.22 0.80 2.86 1.05 3.63 0.26 0.77 0.47 1.59 0.47 1.80 0 0.23 0.30 1.50 0.68 2.81 0.38 1.34 1.01 3.68 1.43 5.23 0.77 2.81 1.52 5.58 3.26 11.72 0.52 1.80 1.31 4.71 1.76 6.47 0.45 1.76 0.96 3.70 1.17 4.34 0.30 0.98 2.39 8.65 4.29 15.68 1.13 4.24 2.25 8.27 3.05 11.13 1.45 5.13 1.62 5.74 3.21 11.79 0.42 1.59 0.54 1.80 0.96 1.80 0.16 0 0.35 0.12 0.40 0.28 0.05 0.14 0.33 -0.52 0.63 -1.48 0.30 -0.96 1.73 -5.37 3.19 -9.82 1.48 -4.45 3.09 -9.52 3.63 -11.25 0.52 -1.73 1.85 -5.86 2.95 -9.14 1.13 -3.28 2.48 -7.45 3.05 -9.26 1.73 -5.44 2.23 -6.19 5.11 -7.69 1.43 -0.75 1.43 -0.75 69.40 -0.82 67.97 -0.07 67.97 -0.07 69.56 0.47 0.87 0.28 1.57 0.61 1.57 0.70 0 0.12 0.42 0.56 0.94 1.03 0.52 0.47 1.27 1.52 1.64 2.32 0.94 1.97 0.98 4.52 0.14 6.33 -0.73 1.57 -3.26 3.98 -4.52 4.31 -0.70 0.19 -19.31 0.28 -65.27 0.33 -64.29 0.05 -64.29 0.05 -66.82 7.66 -1.38 4.20 -4.97 14.95 -7.97 23.91 -5.58 16.71 -8.34 25.17 -9.89 30.12 -1.38 4.43 -2.34 5.98 -4.66 7.43 -1.15 0.75 -1.29 0.77 -3.66 0.77 -2.11 0 -2.63 -0.07 -3.59 -0.56 -1.20 -0.59 -2.65 -1.92 -3.59 -3.30 -0.47 -0.68 -2.44 -7.15 -4.17 -13.59 -0.19 -0.70 -0.61 -2.23 -0.94 -3.40 -0.33 -1.15 -0.77 -2.74 -0.98 -3.52 -0.19 -0.77 -0.45 -1.71 -0.56 -2.11 -0.12 -0.38 -0.49 -1.76 -0.82 -3.05 -0.35 -1.29 -1.03 -3.77 -1.52 -5.51 -1.90 -6.52 -2.79 -9.75 -2.95 -10.66 -0.07 -0.52 -0.23 -1.10 -0.35 -1.31 -0.12 -0.21 -0.63 -2.02 -1.15 -3.98 -0.94 -3.54 -1.66 -6.23 -3.40 -12.63 -0.47 -1.73 -1.10 -4.03 -1.43 -5.09 -0.30 -1.05 -0.94 -3.33 -1.38 -5.04 -0.45 -1.71 -1.03 -3.91 -1.29 -4.88 -0.28 -0.96 -0.59 -2.18 -0.68 -2.70 -0.12 -0.52 -0.75 -2.88 -1.41 -5.27 -0.66 -2.39 -1.45 -5.39 -1.80 -6.68 -0.33 -1.29 -0.70 -2.60 -0.80 -2.93 -0.30 -0.91 -2.04 -7.52 -2.25 -8.55 -0.16 -0.70 -0.33 -0.94 -0.66 -0.94 -0.40 0 -0.56 0.56 -1.45 4.80 -0.54 2.65 -1.36 6.61 -1.85 8.79 -0.47 2.20 -1.15 5.51 -1.50 7.38 -1.22 6.28 -1.92 9.73 -2.25 11.13 -0.19 0.77 -0.52 2.30 -0.70 3.40 -0.21 1.10 -0.54 2.53 -0.70 3.16 -0.19 0.66 -0.61 2.48 -0.91 4.10 -0.73 3.73 -1.69 8.48 -1.99 9.84 -0.49 2.30 -0.94 4.43 -1.29 6.21 -0.21 1.03 -0.75 3.61 -1.20 5.74 -0.45 2.13 -0.84 4.20 -0.91 4.57 -0.07 0.40 -0.23 1.34 -0.35 2.11 -0.14 0.77 -0.73 3.63 -1.31 6.33 -0.59 2.72 -1.17 5.55 -1.31 6.33 -0.30 1.83 -1.57 8.39 -1.85 9.61 -0.12 0.52 -0.54 2.58 -0.94 4.57 -0.40 1.99 -0.87 4.22 -1.05 4.92 -0.16 0.70 -0.45 2.09 -0.61 3.05 -0.16 0.96 -0.49 2.65 -0.73 3.75 -0.54 2.46 -0.59 2.70 -2.32 11.48 -0.77 3.94 -1.55 7.73 -1.73 8.44 -0.19 0.70 -0.56 2.39 -0.82 3.75 -0.28 1.36 -0.70 3.47 -0.96 4.69 -0.23 1.22 -0.61 3.23 -0.82 4.45 -0.63 3.87 -2.23 6.45 -4.83 7.85 -1.01 0.56 -1.57 0.68 -3.12 0.75 -1.13 0.05 -2.25 -0.07 -2.84 -0.26 z "/>
 </g>
</svg>`;var Df=k('<div class="backdrop svelte-ji5owg"></div>'),Of=k('<button><span class="icon svelte-ji5owg"><!></span> <span> </span></button>'),Ff=k('<!> <aside><div class="header svelte-ji5owg"><div class="header-inner svelte-ji5owg"><button class="collapse-btn svelte-ji5owg"><div class="chevron svelte-ji5owg"><!></div></button> <div><div class="logo svelte-ji5owg"><!></div></div></div> <button class="btn-icon mobile-close svelte-ji5owg"><!></button></div> <div class="scroll-area custom-scrollbar svelte-ji5owg"><nav class="svelte-ji5owg"><!> <button title="Search"><span class="icon svelte-ji5owg"><!></span> <span>Search</span></button> <div class="sep svelte-ji5owg"></div> <button class="nav-item sync svelte-ji5owg" title="Update Library"><span><!></span> <span> </span></button> <div class="sep svelte-ji5owg"></div> <button title="Settings"><span class="icon svelte-ji5owg"><!></span> <span>Settings</span></button></nav> <div class="footer svelte-ji5owg"><div>Moode WaveUI</div></div></div></aside>',1);function qf(e,t){Tt(t,!1);const a=()=>Ee(ts,"$isYandexEnabled",o),s=()=>Ee(la,"$isSyncingLibrary",o),n=()=>Ee(hn,"$isSidebarCollapsed",o),i=()=>Ee(At,"$activeMenuTab",o),[o,l]=Dt(),v=T(),d=T();let u=xt(t,"isOpen",8,!1);const h=zn();let f=T(0),p=T(0),E=T(!1);const $=[{id:"queue",label:"Queue",icon:y.MENU},{id:"favorites",label:"Favorites",icon:y.HEART},{id:"artists",label:"Artists",icon:y.ARTISTS},{id:"albums",label:"Albums",icon:y.ALBUMS},{id:"playlists",label:"Playlists",icon:y.PLAYLISTS},{id:"radio",label:"Radio",icon:y.RADIO},{id:"yandex",label:"Yandex Music",icon:y.YANDEX}];function w(G){const ee=`/${G}`;window.location.hash===`#${ee}`||window.location.hash===ee?(At.set(G),ut.set([{view:"root"}])):window.location.hash=ee,h("close")}async function x(){s()||(await Ma.syncLibrary(),window.location.hash="/artists")}function U(){hn.update(G=>!G)}function ne(G){u()&&(_(f,G.touches[0].clientX),_(p,r(f)),_(E,!0))}function de(G){r(E)&&_(p,G.touches[0].clientX)}function H(){r(E)&&(r(p)-r(f)<-70&&h("close"),_(E,!1),_(f,0),_(p,0))}te(()=>a(),()=>{_(v,$.filter(G=>G.id==="yandex"?a():!0))}),te(()=>(r(E),r(p),r(f)),()=>{_(d,r(E)?Math.min(0,r(p)-r(f)):0)}),Xt(),zt();var ye=Ff(),le=je(ye);{var Q=G=>{var ee=Df();A("click",ee,()=>h("close")),gt(3,ee,()=>St,()=>({duration:200})),b(G,ee)};C(le,G=>{u()&&G(Q)})}var Le=g(le,2);let Oe,P;var j=c(Le),L=c(j),_e=c(L),V=c(_e),xe=c(V);Z(xe,()=>(I(y),m(()=>y.BACK)));var B=g(_e,2);let F;var $e=c(B),K=c($e);Z(K,()=>Nf);var ie=g(L,2),ke=c(ie);Z(ke,()=>(I(y),m(()=>y.CLOSE)));var be=g(j,2),Me=c(be),z=c(Me);wt(z,1,()=>r(v),G=>G.id,(G,ee)=>{var Y=Of();let ue;var fe=c(Y),Xe=c(fe);Z(Xe,()=>(r(ee),m(()=>r(ee).icon)));var Ce=g(fe,2);let q;var ce=c(Ce);se(()=>{ue=at(Y,1,"nav-item svelte-ji5owg",null,ue,{active:i()===r(ee).id}),Wt(Y,"title",(r(ee),m(()=>r(ee).label))),q=at(Ce,1,"label-text svelte-ji5owg",null,q,{hidden:n()}),re(ce,(r(ee),m(()=>r(ee).label)))}),A("click",Y,()=>w(r(ee).id)),b(G,Y)});var pe=g(z,2);let me;var Ne=c(pe),D=c(Ne);Z(D,()=>(I(y),m(()=>y.SEARCH)));var O=g(Ne,2);let J;var ae=g(pe,4),S=c(ae);let R;var oe=c(S);Z(oe,()=>(I(y),m(()=>y.SYNC)));var X=g(S,2);let ve;var Ve=c(X),Qe=g(ae,4);let M;var N=c(Qe),W=c(N);Z(W,()=>(I(y),m(()=>y.SETTINGS)));var ge=g(N,2);let Re;var Se=g(Me,2),Te=c(Se);let we;se(()=>{Oe=at(Le,1,"side-menu svelte-ji5owg",null,Oe,{"mobile-open":u(),collapsed:n()}),P=ft(Le,"",P,{transform:u()?`translateX(${r(d)}px)`:"",transition:r(E)?"none":"width 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.3s ease"}),Wt(_e,"title",n()?"Expand":"Collapse"),ft(V,`transform: rotate(${n()?"180deg":"0deg"})`),F=at(B,1,"logo-wrapper svelte-ji5owg",null,F,{hidden:n()}),me=at(pe,1,"nav-item svelte-ji5owg",null,me,{active:i()==="search"}),J=at(O,1,"label-text svelte-ji5owg",null,J,{hidden:n()}),ae.disabled=s(),R=at(S,1,"icon svelte-ji5owg",null,R,{spin:s()}),ve=at(X,1,"label-text svelte-ji5owg",null,ve,{hidden:n()}),re(Ve,s()?"Syncing...":"Update Library"),M=at(Qe,1,"nav-item svelte-ji5owg",null,M,{active:i()==="settings"}),Re=at(ge,1,"label-text svelte-ji5owg",null,Re,{hidden:n()}),we=at(Te,1,"footer-text svelte-ji5owg",null,we,{hidden:n()})}),A("click",_e,U),A("click",ie,()=>h("close")),A("click",pe,()=>w("search")),A("click",ae,x),A("click",Qe,()=>w("settings")),A("touchstart",Le,ne),A("touchmove",Le,de),A("touchend",Le,H),b(e,ye),Mt(),l()}var Bf=k('<div class="toast-container svelte-k2bvk7"><div> </div></div>'),Yf=k('<button class="back-btn svelte-k2bvk7"><span class="icon-inline svelte-k2bvk7"><!></span> Back</button>'),Uf=k('<div class="view-title svelte-k2bvk7"><!></div>'),Hf=k('<div class="full-player-modal svelte-k2bvk7"><!></div>'),Vf=k('<div class="app-container svelte-k2bvk7"><div class="app-layout svelte-k2bvk7"><!> <!> <main class="content-area svelte-k2bvk7"><header class="top-bar svelte-k2bvk7"><button class="hamburger-btn svelte-k2bvk7"><!></button> <!></header> <div class="scroll-container svelte-k2bvk7"><div class="view-wrapper svelte-k2bvk7"><!></div></div></main> <div class="docked-player-container svelte-k2bvk7"><!></div></div> <div class="mini-player-wrapper svelte-k2bvk7"><!></div></div> <!>',1);function Wf(e,t){Tt(t,!1);const a=()=>Ee(ut,"$navigationStack",o),s=()=>Ee(vn,"$toastMessage",o),n=()=>Ee(At,"$activeMenuTab",o),i=()=>Ee(Ms,"$isFullPlayerOpen",o),[o,l]=Dt();let v=T(!1);Na(()=>{window.history.replaceState({depth:a().length},"","");const B=()=>{if(Ge(Ss)){Ss.set(!1);return}vd()};return window.addEventListener("popstate",B),()=>window.removeEventListener("popstate",B)}),zt();var d=Vf(),u=je(d),h=c(u),f=c(h);{var p=B=>{var F=Bf(),$e=c(F),K=c($e);se(()=>{at($e,1,`toast-body ${s().type??""}`,"svelte-k2bvk7"),re(K,s().text)}),gt(3,F,()=>bo,()=>({y:-50,duration:300})),b(B,F)};C(f,B=>{s()&&B(p)})}var E=g(f,2);qf(E,{get isOpen(){return r(v)},$$events:{close:()=>_(v,!1)}});var $=g(E,2),w=c($),x=c(w),U=c(x);Z(U,()=>y.MENU);var ne=g(x,2);{var de=B=>{var F=Yf(),$e=c(F),K=c($e);Z(K,()=>y.BACK),A("click",F,function(...ie){dd?.apply(this,ie)}),b(B,F)},H=B=>{var F=Uf(),$e=c(F);{var K=ke=>{var be=Sa("Radio");b(ke,be)},ie=ke=>{var be=nt(),Me=je(be);{var z=me=>{var Ne=Sa("Playlists");b(me,Ne)},pe=me=>{var Ne=nt(),D=je(Ne);{var O=ae=>{var S=Sa("Search");b(ae,S)},J=ae=>{var S=nt(),R=je(S);{var oe=ve=>{var Ve=Sa("Yandex Music");b(ve,Ve)},X=ve=>{var Ve=nt(),Qe=je(Ve);{var M=W=>{var ge=Sa("Queue");b(W,ge)},N=W=>{var ge=nt(),Re=je(ge);{var Se=we=>{var G=Sa("Favorites");b(we,G)},Te=we=>{var G=nt(),ee=je(G);{var Y=fe=>{var Xe=Sa("Settings");b(fe,Xe)},ue=fe=>{var Xe=Sa();se(Ce=>re(Xe,Ce),[()=>(n()||"Library").charAt(0).toUpperCase()+(n()||"library").slice(1)]),b(fe,Xe)};C(ee,fe=>{n()==="settings"?fe(Y):fe(ue,!1)},!0)}b(we,G)};C(Re,we=>{n()==="favorites"?we(Se):we(Te,!1)},!0)}b(W,ge)};C(Qe,W=>{n()==="queue"?W(M):W(N,!1)},!0)}b(ve,Ve)};C(R,ve=>{n()==="yandex"?ve(oe):ve(X,!1)},!0)}b(ae,S)};C(D,ae=>{n()==="search"?ae(O):ae(J,!1)},!0)}b(me,Ne)};C(Me,me=>{n()==="playlists"?me(z):me(pe,!1)},!0)}b(ke,be)};C($e,ke=>{n()==="radio"?ke(K):ke(ie,!1)})}b(B,F)};C(ne,B=>{a().length>1?B(de):B(H,!1)})}var ye=g(w,2),le=c(ye),Q=c(le);{var Le=B=>{Bv(B,{})},Oe=B=>{var F=nt(),$e=je(F);{var K=ke=>{wf(ke,{})},ie=ke=>{var be=nt(),Me=je(be);{var z=me=>{Yu(me,{})},pe=me=>{var Ne=nt(),D=je(Ne);{var O=ae=>{uu(ae,{})},J=ae=>{var S=nt(),R=je(S);{var oe=ve=>{Tu(ve,{})},X=ve=>{var Ve=nt(),Qe=je(Ve);{var M=W=>{Ru(W,{})},N=W=>{Av(W,{get activeCategory(){return n()}})};C(Qe,W=>{n()==="settings"?W(M):W(N,!1)},!0)}b(ve,Ve)};C(R,ve=>{n()==="search"?ve(oe):ve(X,!1)},!0)}b(ae,S)};C(D,ae=>{n()==="playlists"||n()==="favorites"?ae(O):ae(J,!1)},!0)}b(me,Ne)};C(Me,me=>{n()==="queue"?me(z):me(pe,!1)},!0)}b(ke,be)};C($e,ke=>{n()==="yandex"?ke(K):ke(ie,!1)},!0)}b(B,F)};C(Q,B=>{n()==="radio"?B(Le):B(Oe,!1)})}var P=g($,2),j=c(P);Ei(j,{isDocked:!0});var L=g(h,2),_e=c(L);Af(_e,{});var V=g(u,2);{var xe=B=>{var F=Hf(),$e=c(F);Ei($e,{}),b(B,F)};C(V,B=>{i()&&B(xe)})}se(()=>ft(ye,`padding-bottom: ${i()?"0px":"var(--mini-player-height)"};`)),A("click",x,()=>_(v,!0)),b(e,d),Mt(),l()}var Qf=k('<button class="back-btn-area svelte-l8h85k"><span class="back-icon svelte-l8h85k"><!></span></button> <span class="header-title svelte-l8h85k">Select Playlist</span>',1),Xf=k('<div class="track-info svelte-l8h85k"><div class="title text-ellipsis svelte-l8h85k"> </div> <div class="artist text-ellipsis svelte-l8h85k">Playlist</div></div>'),Kf=k('<div class="track-info svelte-l8h85k"><div class="title text-ellipsis svelte-l8h85k"> </div> <div class="artist text-ellipsis svelte-l8h85k"> </div></div>'),Gf=k('<button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span> </span></button>'),Zf=k('<div class="empty-msg svelte-l8h85k">No custom playlists</div>'),Jf=k("<!> <!>",1),e0=k('<button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Play Now</span></button> <div class="sep svelte-l8h85k"></div> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Rename</span></button> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Delete Playlist</span></button>',1),t0=k('<div class="sep svelte-l8h85k"></div> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Vibe by Track</span></button>',1),a0=k('<button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Go to Album</span></button> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Go to Artist</span></button>',1),r0=k('<div class="sep svelte-l8h85k"></div> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Remove from Playlist</span></button>',1),s0=k('<div class="sep svelte-l8h85k"></div> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Remove from Queue</span></button>',1),n0=k('<button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Play Next</span></button> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Add to Queue</span></button> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Add to Playlist...</span></button> <!> <!> <button class="menu-row svelte-l8h85k"><span><!></span> <span> </span></button> <!> <!>',1),i0=k('<div class="backdrop svelte-l8h85k"><div class="menu-card svelte-l8h85k"><div class="menu-header svelte-l8h85k"><!></div> <div class="menu-items scroll-y svelte-l8h85k"><!></div></div></div>');function o0(e,t){Tt(t,!1);const a=()=>Ee(In,"$contextMenu",i),s=()=>Ee(Ya,"$favorites",i),n=()=>Ee(Ds,"$playlists",i),[i,o]=Dt(),l=T(),v=T(),d=T(),u=T(),h=T(),f=T(),p=T(),E=T();let $=T(),w=T(),x=T(),U=T(0),ne=T(0),de=T("main"),H=T(!1);function ye(z){a().isOpen&&(_(H,!1),Ft())}function le(){Ft()}function Q(){a().track&&da.playNext(a().track.file),Ft()}function Le(){a().track&&da.addToQueue(a().track.file),Ft()}function Oe(){a().track&&ba.toggleFavorite(a().track),Ft()}function P(){const z=a().track;z&&z.album&&(z.isYandex||qt("tracks_by_album",{name:z.album,artist:z.artist})),Ft()}function j(){const z=a().track;z&&z.artist&&(z.isYandex||qt("albums_by_artist",{name:z.artist})),Ft()}async function L(){const{playlistName:z,index:pe}=a().context;z&&pe!==null&&(Vr.update(me=>{const Ne=[...me];return Ne.splice(pe,1),Ne}),await ba.removeFromPlaylist(z,pe)),Ft()}function _e(){const{index:z}=a().context;z!=null&&da.removeFromQueue(z),Ft()}function V(){const z=a().context.playlist;z&&We.send("stop").then(()=>We.send("clear")).then(()=>We.send(`load "${z.name.replace(/"/g,'\\"')}"`)).then(()=>We.send("play 0")),Ft()}function xe(){const z=a().context.playlist;z&&(Ft(),ma({title:"Rename Playlist",message:`Enter new name for "${z.name}":`,type:"prompt",placeholder:z.name,inputValue:z.name,confirmLabel:"Rename",onConfirm:pe=>{pe&&pe!==z.name&&ba.renamePlaylist(z.name,pe)}}))}function B(){const z=a().context.playlist;z&&(Ft(),ma({title:"Delete Playlist",message:`Are you sure you want to delete "${z.name}"? This cannot be undone.`,type:"confirm",confirmLabel:"Delete",onConfirm:()=>{ba.deletePlaylist(z.name)}}))}async function F(){const z=a().track;if(z&&z.isYandex&&z.id){ze(`Starting radio based on "${z.title}"...`,"info");try{await jt.playRadio(z.id)}catch(pe){console.error(pe),ze("Error starting radio","error")}}Ft()}function $e(){_(de,"playlists")}function K(){_(de,"main")}async function ie(z){const pe=a().track;if(pe)try{const me=z.replace(/"/g,'\\"'),Ne=pe.file.replace(/"/g,'\\"');await We.send(`playlistadd "${me}" "${Ne}"`),ze(`Added to "${z}"`,"success"),Ft()}catch(me){console.error(me),ze("Failed to add","error")}}te(()=>a(),()=>{a().isOpen&&_(de,"main")}),te(()=>(a(),r(H),Ss),()=>{a().isOpen?!r(H)&&typeof history<"u"&&(history.pushState({contextMenuOpen:!0},""),_(H,!0)):r(H)&&typeof history<"u"&&(Ss.set(!0),history.back(),_(H,!1))}),te(()=>(a(),s()),()=>{_(l,a().track&&s().has(a().track.file))}),te(()=>a(),()=>{_(v,a().track&&(String(a().track.file).includes("http")||String(a().track.file).includes("://")))}),te(()=>a(),()=>{_(d,a().track&&(a().track.isYandex||a().track.service==="yandex"))}),te(()=>a(),()=>{_(u,a().context?.type==="playlist")}),te(()=>a(),()=>{_(h,a().context?.type==="queue")}),te(()=>a(),()=>{_(f,a().context?.type==="playlist-card")}),te(()=>a(),()=>{_(p,a().context?.source==="miniplayer")}),te(()=>(a(),r(ne),r(U),r($),r(p),r(w)),()=>{_(E,(()=>{if(!a().isOpen)return"";const z=a().triggerRect,pe=a().x,me=a().y,Ne=r(ne)||220,D=r(U)||320;if(r($)<=768&&r(p)&&z)return`
        position: fixed;Â 
        bottom: ${r(w)-z.top}px;Â 
        left: 50%;Â 
        transform: translateX(-50%);Â 
        margin: 0;Â 
        transform-origin: bottom center;
      `;let O=0,J=0,ae="top left";if(z){const R=z.left+z.width/2,oe=z.top+z.height/2,X=R>r($)/2,ve=oe>r(w)/2;X?(O=z.right-Ne,ae=ve?"bottom right":"top right"):(O=z.left,ae=ve?"bottom left":"top left"),ve?J=z.top-D:J=z.bottom}else O=pe,J=me,O+Ne>r($)&&(O=r($)-Ne-10),J+D>r(w)&&(J=r(w)-D-10);const S=8;return O<S&&(O=S),O+Ne>r($)-S&&(O=r($)-Ne-S),J<S&&(J=S),J+D>r(w)-S&&(J=r(w)-D-S),`position: fixed; top: ${J}px; left: ${O}px; margin: 0; transform-origin: ${ae};`})())}),Xt(),zt();var ke=nt();A("popstate",qa,ye);var be=je(ke);{var Me=z=>{var pe=i0(),me=c(pe),Ne=c(me),D=c(Ne);{var O=X=>{var ve=Qf(),Ve=je(ve),Qe=c(Ve),M=c(Qe);Z(M,()=>(I(y),m(()=>y.BACK))),A("click",Ve,K),b(X,ve)},J=X=>{var ve=nt(),Ve=je(ve);{var Qe=N=>{var W=Xf(),ge=c(W),Re=c(ge);se(()=>re(Re,(a(),m(()=>a().context.playlist.name)))),b(N,W)},M=N=>{var W=Kf(),ge=c(W),Re=c(ge),Se=g(ge,2),Te=c(Se);se(()=>{re(Re,(a(),m(()=>a().track.title))),re(Te,(a(),m(()=>a().track.artist)))}),b(N,W)};C(Ve,N=>{r(f)?N(Qe):N(M,!1)},!0)}b(X,ve)};C(D,X=>{r(de)==="playlists"?X(O):X(J,!1)})}var ae=g(Ne,2),S=c(ae);{var R=X=>{var ve=Jf(),Ve=je(ve);wt(Ve,1,n,Bt,(N,W)=>{var ge=nt(),Re=je(ge);{var Se=Te=>{var we=Gf(),G=c(we),ee=c(G);Z(ee,()=>(I(y),m(()=>y.PLAYLISTS)));var Y=g(G,2),ue=c(Y);se(()=>re(ue,(r(W),m(()=>r(W).name)))),A("click",we,()=>ie(r(W).name)),b(Te,we)};C(Re,Te=>{r(W),m(()=>r(W).name!=="Favorites")&&Te(Se)})}b(N,ge)});var Qe=g(Ve,2);{var M=N=>{var W=Zf();b(N,W)};C(Qe,N=>{n(),m(()=>n().filter(W=>W.name!=="Favorites").length===0)&&N(M)})}b(X,ve)},oe=X=>{var ve=nt(),Ve=je(ve);{var Qe=N=>{var W=e0(),ge=je(W),Re=c(ge),Se=c(Re);Z(Se,()=>(I(y),m(()=>y.PLAY)));var Te=g(ge,4),we=c(Te),G=c(we);Z(G,()=>(I(y),m(()=>y.EDIT)));var ee=g(Te,2),Y=c(ee),ue=c(Y);Z(ue,()=>(I(y),m(()=>y.REMOVE))),A("click",ge,V),A("click",Te,xe),A("click",ee,B),b(N,W)},M=N=>{var W=n0(),ge=je(W),Re=c(ge),Se=c(Re);Z(Se,()=>(I(y),m(()=>y.NEXT)));var Te=g(ge,2),we=c(Te),G=c(we);Z(G,()=>(I(y),m(()=>y.MENU)));var ee=g(Te,2),Y=c(ee),ue=c(Y);Z(ue,()=>(I(y),m(()=>y.ADD_TO_PLAYLIST||y.ADD)));var fe=g(ee,2);{var Xe=Ue=>{var Je=t0(),et=g(je(Je),2),tt=c(et),st=c(tt);Z(st,()=>(I(y),m(()=>y.RADIO))),A("click",et,F),b(Ue,Je)};C(fe,Ue=>{r(d)&&Ue(Xe)})}var Ce=g(fe,2);{var q=Ue=>{var Je=a0(),et=je(Je),tt=c(et),st=c(tt);Z(st,()=>(I(y),m(()=>y.ALBUM_LINK||y.ALBUMS)));var dt=g(et,2),mt=c(dt),ct=c(mt);Z(ct,()=>(I(y),m(()=>y.ARTIST_LINK||y.ARTISTS))),A("click",et,P),A("click",dt,j),b(Ue,Je)};C(Ce,Ue=>{!r(v)&&!r(d)&&Ue(q)})}var ce=g(Ce,2),he=c(ce);let He;var Pe=c(he);Z(Pe,()=>(r(l),I(y),m(()=>r(l)?y.HEART_FILLED:y.HEART)));var Fe=g(he,2),Ie=c(Fe),Be=g(ce,2);{var Ye=Ue=>{var Je=r0(),et=g(je(Je),2),tt=c(et),st=c(tt);Z(st,()=>(I(y),m(()=>y.REMOVE))),A("click",et,L),b(Ue,Je)};C(Be,Ue=>{r(u)&&Ue(Ye)})}var De=g(Be,2);{var qe=Ue=>{var Je=s0(),et=g(je(Je),2),tt=c(et),st=c(tt);Z(st,()=>(I(y),m(()=>y.REMOVE))),A("click",et,_e),b(Ue,Je)};C(De,Ue=>{r(h)&&Ue(qe)})}se(()=>{He=at(he,1,"icon svelte-l8h85k",null,He,{liked:r(l)}),re(Ie,r(l)?"Unlike":"Like")}),A("click",ge,Q),A("click",Te,Le),A("click",ee,$e),A("click",ce,Oe),b(N,W)};C(Ve,N=>{r(f)?N(Qe):N(M,!1)},!0)}b(X,ve)};C(S,X=>{r(de)==="playlists"?X(R):X(oe,!1)})}Ia(me,X=>_(x,X),()=>r(x)),se(()=>ft(me,r(E))),ri(me,"clientHeight",X=>_(U,X)),ri(me,"clientWidth",X=>_(ne,X)),gt(3,me,()=>Rn,()=>({start:.95,duration:100})),A("click",me,ta(function(X){Zr.call(this,t,X)})),A("click",pe,le),gt(3,pe,()=>St,()=>({duration:100})),b(z,pe)};C(be,z=>{a(),m(()=>a().isOpen)&&z(Me)})}ni("innerWidth",z=>_($,z)),ni("innerHeight",z=>_(w,z)),b(e,ke),Mt(),o()}var l0=k('<p class="modal-message svelte-1bxxaoh"> </p>'),c0=k('<div class="input-wrapper svelte-1bxxaoh"><input type="text" autoFocus/></div>'),d0=k('<span class="check svelte-1bxxaoh">â</span>'),v0=k("<button> <!></button>"),u0=k('<div class="select-list svelte-1bxxaoh"></div>'),f0=k('<button class="btn cancel svelte-1bxxaoh"> </button>'),h0=k('<div class="modal-actions svelte-1bxxaoh"><!> <button class="btn confirm svelte-1bxxaoh"> </button></div>'),p0=k('<div class="backdrop svelte-1bxxaoh"><div class="modal-card svelte-1bxxaoh"><div class="modal-header svelte-1bxxaoh"><span class="modal-title svelte-1bxxaoh"> </span></div> <div class="modal-body svelte-1bxxaoh"><!> <!></div> <!></div></div>');function g0(e,t){Tt(t,!1);const a=()=>Ee($s,"$modal",s),[s,n]=Dt();let i=T(!1),o=T();function l(){if(a().type==="prompt"){const $=a().inputValue?a().inputValue.trim():"";if($.length===0){d();return}a().onConfirm&&a().onConfirm($)}else a().onConfirm&&a().onConfirm();fs()}function v($){a().onConfirm&&a().onConfirm($),fs()}function d(){_(i,!0),r(o)&&r(o).focus(),setTimeout(()=>{_(i,!1)},400)}function u(){fs()}function h($){$.key==="Enter"&&a().type!=="select"&&l(),r(i)&&_(i,!1)}te(()=>a(),()=>{a().isOpen||_(i,!1)}),Xt(),zt();var f=nt(),p=je(f);{var E=$=>{var w=p0(),x=c(w),U=c(x),ne=c(U),de=c(ne),H=g(U,2),ye=c(H);{var le=L=>{var _e=l0(),V=c(_e);se(()=>re(V,(a(),m(()=>a().message)))),b(L,_e)};C(ye,L=>{a(),m(()=>a().message)&&L(le)})}var Q=g(ye,2);{var Le=L=>{var _e=c0(),V=c(_e);let xe;Ia(V,B=>_(o,B),()=>r(o)),se(()=>{xe=at(V,1,"modal-input svelte-1bxxaoh",null,xe,{"shake-error":r(i)}),Wt(V,"placeholder",(a(),m(()=>a().placeholder)))}),sr(V,()=>a().inputValue,B=>vc($s,m(a).inputValue=B,m(a))),A("keydown",V,h),b(L,_e)},Oe=L=>{var _e=nt(),V=je(_e);{var xe=B=>{var F=u0();wt(F,5,()=>(a(),m(()=>a().options)),Bt,($e,K)=>{var ie=v0();let ke;var be=c(ie),Me=g(be);{var z=pe=>{var me=d0();b(pe,me)};C(Me,pe=>{r(K),a(),m(()=>r(K).value===a().inputValue)&&pe(z)})}se(()=>{ke=at(ie,1,"select-item svelte-1bxxaoh",null,ke,{active:r(K).value===a().inputValue}),re(be,`${r(K),m(()=>r(K).label)??""} `)}),A("click",ie,()=>v(r(K).value)),b($e,ie)}),b(B,F)};C(V,B=>{a(),m(()=>a().type==="select")&&B(xe)},!0)}b(L,_e)};C(Q,L=>{a(),m(()=>a().type==="prompt")?L(Le):L(Oe,!1)})}var P=g(H,2);{var j=L=>{var _e=h0(),V=c(_e);{var xe=$e=>{var K=f0(),ie=c(K);se(()=>re(ie,(a(),m(()=>a().cancelLabel)))),A("click",K,function(...ke){fs?.apply(this,ke)}),b($e,K)};C(V,$e=>{a(),m(()=>a().type==="confirm"||a().type==="prompt")&&$e(xe)})}var B=g(V,2),F=c(B);se(()=>re(F,(a(),m(()=>a().confirmLabel)))),A("click",B,l),b(L,_e)};C(P,L=>{a(),m(()=>a().type!=="select")&&L(j)})}se(()=>re(de,(a(),m(()=>a().title)))),gt(3,x,()=>Rn,()=>({start:.95,duration:200})),A("click",x,ta(function(L){Zr.call(this,t,L)})),A("click",w,u),gt(3,w,()=>St,()=>({duration:150})),b($,w)};C(p,$=>{a(),m(()=>a().isOpen)&&$(E)})}b(e,f),Mt(),n()}const $i={init(){this.handleHashChange(),window.addEventListener("hashchange",()=>this.handleHashChange())},handleHashChange(){let e=window.location.hash.slice(1);for(;e.startsWith("/");)e=e.slice(1);if(!e){(Ge(ut).length>1||Ge(At)==="search")&&(this.setRootTab("artists"),window.location.hash="/artists");return}const t=e.split("/").map(decodeURIComponent),a=t[0];let s=cd(),n=a;switch(a==="artist"&&(n="albums_by_artist"),a==="album"&&(n="tracks_by_album"),a==="playlist"&&(n="details"),a==="favorites"&&(n="details"),s||(a==="album"&&t.length>=2?s=t.length>=3?{artist:t[1],name:t[2]}:{name:t[1]}:a==="artist"&&t.length>=2?s={name:t[1]}:a==="playlist"&&t.length>=2?s={name:t[1],displayName:t[1]}:a==="favorites"?s={name:"Favorites"}:a==="yandex_playlist"&&t.length>=3?s={uid:t[1],kind:t[2],title:"Playlist"}:a==="yandex_album_details"&&t.length>=2?s={id:t[1],title:"Album"}:a==="yandex_artist_details"&&t.length>=2?s={id:t[1],title:"Artist"}:a==="yandex_search"&&t.length>=2?s={query:t[1]}:t.length>=2&&(s={name:t[1],displayName:t[1]})),console.log(`[Router] Navigating: ${a} -> ${n}`,s),!0){case a.startsWith("yandex"):At.set("yandex");break;case a==="queue":this.setRootTab("queue");return;case a==="radio":this.setRootTab("radio");return;case a==="playlists":case a==="playlist":case n==="details":if(s&&s.name==="Favorites"?At.set("favorites"):At.set("playlists"),a==="playlists"){this.setRootTab("playlists");return}break;case a==="settings":this.setRootTab("settings");return;case a==="favorites":At.set("favorites");break;case a==="search":At.set("search"),t[1]&&Wr.set(t[1]),ut.set([{view:"root"}]);return;case a==="artists":case a==="artist":if(At.set("artists"),a==="artists"){this.setRootTab("artists");return}break;case a==="albums":case a==="album":if(At.set("albums"),a==="albums"){this.setRootTab("albums");return}break}if(a==="yandex")Ge(ut).length>1?Ge(ut)[0].view!=="root"&&ut.set([{view:"root"}]):ut.set([{view:"root"}]);else{const i=Ge(ut),o=i[i.length-1],l=o.view===n;let v=!1;if(s&&o.data?s.name===o.data.name&&s.uid===o.data.uid&&(v=!0):!s&&!o.data&&(v=!0),l&&v)return;s&&ut.set([{view:"root"},{view:n,data:s}])}},setRootTab(e){At.set(e),ut.set([{view:"root"}])},updateUrl(e,t){let a="";if(e==="root"){const s=Ge(At);if(s==="search"){const n=Ge(Wr);a=n?`search/${encodeURIComponent(n)}`:"search"}else a=s}else if(e==="details"){const s=t.name||t;a=s==="Favorites"?"favorites":`playlist/${encodeURIComponent(s)}`}else if(e==="albums_by_artist"){const s=t.name||t;a=`artist/${encodeURIComponent(s)}`}else if(e==="tracks_by_album"){const s=t.name||t,n=t.artist;n?a=`album/${encodeURIComponent(n)}/${encodeURIComponent(s)}`:a=`album/${encodeURIComponent(s)}`}else e==="queue"?a="queue":e==="yandex_playlist"?a=`yandex_playlist/${t.uid}/${t.kind}`:e==="yandex_album_details"?a=`yandex_album_details/${t.id}`:e==="yandex_artist_details"?a=`yandex_artist_details/${t.id}`:e==="yandex_search"&&(a=`yandex_search/${encodeURIComponent(t.query)}`);if(a){const s=`#/${a}`;(e==="yandex_search"||e==="search")&&decodeURIComponent(window.location.hash)!==decodeURIComponent(s)?window.history.replaceState(null,"",s):decodeURIComponent(window.location.hash)!==decodeURIComponent(s)&&(window.location.hash=`/${a}`)}}};var _0=k("<!> <!> <!>",1);function m0(e,t){Tt(t,!1),Na(async()=>{$i.init(),ld((o,l)=>{$i.updateUrl(o,l)}),$o(),Ma.loadRadioStations(),Ge(ts)&&Ma.checkYandexAuth();try{const o=await Ua.getArtists();o.length>0?console.log(`[App] Database ready. Loaded ${o.length} artists from cache.`):(console.log("[App] Database empty. Starting initial sync..."),Ma.syncLibrary())}catch(o){console.error("[App] DB Check failed:",o),ze("Local DB error. Please update library manually.","error")}}),zt();var a=_0(),s=je(a);Wf(s,{});var n=g(s,2);o0(n,{});var i=g(n,2);g0(i,{}),b(e,a),Mt()}Hl(m0,{target:document.getElementById("app")});
