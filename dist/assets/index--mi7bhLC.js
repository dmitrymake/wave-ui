(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();const $s=!1;var ts=Array.isArray,Gi=Array.prototype.indexOf,ns=Array.from,Wa=Object.defineProperty,rr=Object.getOwnPropertyDescriptor,Qa=Object.getOwnPropertyDescriptors,Zi=Object.prototype,Ji=Array.prototype,Ws=Object.getPrototypeOf,fa=Object.isExtensible;function eo(e){return typeof e=="function"}const Et=()=>{};function to(e){return e()}function Wr(e){for(var t=0;t<e.length;t++)e[t]()}function Xa(){var e,t,n=new Promise((r,a)=>{e=r,t=a});return{promise:n,resolve:e,reject:t}}const lt=2,Qs=4,rs=8,no=1<<24,Jt=16,fn=32,Yn=64,ss=128,Bt=512,it=1024,wt=2048,jt=4096,Mt=8192,cn=16384,as=32768,Dn=65536,ha=1<<17,Ka=1<<18,ur=1<<19,Ga=1<<20,an=1<<25,Fn=32768,As=1<<21,Xs=1<<22,wn=1<<23,Rn=Symbol("$state"),ro=Symbol("legacy props"),so=Symbol(""),er=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Ks(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function ao(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function io(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function oo(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function lo(e){throw new Error("https://svelte.dev/e/effect_orphan")}function co(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function uo(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function vo(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function fo(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function ho(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function po(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const _o=1,go=2,Za=4,mo=8,bo=16,wo=2,yo=4,ko=8,xo=1,Eo=2,Mo=4,So=1,To=2,ut=Symbol(),$o="http://www.w3.org/1999/xhtml";function Ao(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Ja(e){return e===this.v}function Gs(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function ei(e){return!Gs(e,this.v)}let dr=!1,Co=!1;function Po(){dr=!0}let We=null;function sr(e){We=e}function ht(e,t=!1,n){We={p:We,i:!1,c:null,e:null,s:e,x:null,l:dr&&!t?{s:null,u:null,$:[]}:null}}function pt(e){var t=We,n=t.e;if(n!==null){t.e=null;for(var r of n)pi(r)}return t.i=!0,We=t.p,{}}function Rr(){return!dr||We!==null&&We.l===null}let Cn=[];function ti(){var e=Cn;Cn=[],Wr(e)}function Vn(e){if(Cn.length===0&&!br){var t=Cn;queueMicrotask(()=>{t===Cn&&ti()})}Cn.push(e)}function Ro(){for(;Cn.length>0;)ti()}function ni(e){var t=De;if(t===null)return Ne.f|=wn,e;if((t.f&as)===0){if((t.f&ss)===0)throw e;t.b.error(e)}else ar(e,t)}function ar(e,t){for(;t!==null;){if((t.f&ss)!==0)try{t.b.error(e);return}catch(n){e=n}t=t.parent}throw e}const Ir=new Set;let Ue=null,jr=null,Ct=null,Tt=[],is=null,Cs=!1,br=!1;class Qt{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#n=0;#r=0;#l=null;#a=new Set;#s=new Set;skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#r>0}process(t){Tt=[],jr=null,this.apply();var n={parent:null,effect:null,effects:[],render_effects:[]};for(const r of t)this.#i(r,n);this.is_fork||this.#u(),this.is_deferred()?(this.#o(n.effects),this.#o(n.render_effects)):(jr=this,Ue=null,pa(n.render_effects),pa(n.effects),jr=null,this.#l?.resolve()),Ct=null}#i(t,n){t.f^=it;for(var r=t.first;r!==null;){var a=r.f,i=(a&(fn|Yn))!==0,l=i&&(a&it)!==0,c=l||(a&Mt)!==0||this.skipped_effects.has(r);if((r.f&ss)!==0&&r.b?.is_pending()&&(n={parent:n,effect:r,effects:[],render_effects:[]}),!c&&r.fn!==null){i?r.f^=it:(a&Qs)!==0?n.effects.push(r):fr(r)&&((r.f&Jt)!==0&&this.#a.add(r),or(r));var u=r.first;if(u!==null){r=u;continue}}var o=r.parent;for(r=r.next;r===null&&o!==null;)o===n.effect&&(this.#o(n.effects),this.#o(n.render_effects),n=n.parent),r=o.next,o=o.parent}}#o(t){for(const n of t)(n.f&wt)!==0?this.#a.add(n):(n.f&jt)!==0&&this.#s.add(n),this.#c(n.deps),ot(n,it)}#c(t){if(t!==null)for(const n of t)(n.f&lt)===0||(n.f&Fn)===0||(n.f^=Fn,this.#c(n.deps))}capture(t,n){this.previous.has(t)||this.previous.set(t,n),(t.f&wn)===0&&(this.current.set(t,t.v),Ct?.set(t,t.v))}activate(){Ue=this,this.apply()}deactivate(){Ue===this&&(Ue=null,Ct=null)}flush(){if(this.activate(),Tt.length>0){if(ri(),Ue!==null&&Ue!==this)return}else this.#n===0&&this.process([]);this.deactivate()}discard(){for(const t of this.#t)t(this);this.#t.clear()}#u(){if(this.#r===0){for(const t of this.#e)t();this.#e.clear()}this.#n===0&&this.#d()}#d(){if(Ir.size>1){this.previous.clear();var t=Ct,n=!0,r={parent:null,effect:null,effects:[],render_effects:[]};for(const i of Ir){if(i===this){n=!1;continue}const l=[];for(const[u,o]of this.current){if(i.current.has(u))if(n&&o!==i.current.get(u))i.current.set(u,o);else continue;l.push(u)}if(l.length===0)continue;const c=[...i.current.keys()].filter(u=>!this.current.has(u));if(c.length>0){var a=Tt;Tt=[];const u=new Set,o=new Map;for(const d of l)si(d,c,u,o);if(Tt.length>0){Ue=i,i.apply();for(const d of Tt)i.#i(d,r);i.deactivate()}Tt=a}}Ue=null,Ct=t}this.committed=!0,Ir.delete(this)}increment(t){this.#n+=1,t&&(this.#r+=1)}decrement(t){this.#n-=1,t&&(this.#r-=1),this.revive()}revive(){for(const t of this.#a)this.#s.delete(t),ot(t,wt),Bn(t);for(const t of this.#s)ot(t,jt),Bn(t);this.flush()}oncommit(t){this.#e.add(t)}ondiscard(t){this.#t.add(t)}settled(){return(this.#l??=Xa()).promise}static ensure(){if(Ue===null){const t=Ue=new Qt;Ir.add(Ue),br||Qt.enqueue(()=>{Ue===t&&t.flush()})}return Ue}static enqueue(t){Vn(t)}apply(){}}function Lo(e){var t=br;br=!0;try{for(var n;;){if(Ro(),Tt.length===0&&(Ue?.flush(),Tt.length===0))return is=null,n;ri()}}finally{br=t}}function ri(){var e=zn;Cs=!0;var t=null;try{var n=0;for(Xr(!0);Tt.length>0;){var r=Qt.ensure();if(n++>1e3){var a,i;zo()}r.process(Tt),yn.clear()}}finally{Cs=!1,Xr(e),is=null}}function zo(){try{co()}catch(e){ar(e,is)}}let rn=null;function pa(e){var t=e.length;if(t!==0){for(var n=0;n<t;){var r=e[n++];if((r.f&(cn|Mt))===0&&fr(r)&&(rn=new Set,or(r),r.deps===null&&r.first===null&&r.nodes===null&&(r.teardown===null&&r.ac===null?bi(r):r.fn=null),rn?.size>0)){yn.clear();for(const a of rn){if((a.f&(cn|Mt))!==0)continue;const i=[a];let l=a.parent;for(;l!==null;)rn.has(l)&&(rn.delete(l),i.push(l)),l=l.parent;for(let c=i.length-1;c>=0;c--){const u=i[c];(u.f&(cn|Mt))===0&&or(u)}}rn.clear()}}rn=null}}function si(e,t,n,r){if(!n.has(e)&&(n.add(e),e.reactions!==null))for(const a of e.reactions){const i=a.f;(i&lt)!==0?si(a,t,n,r):(i&(Xs|Jt))!==0&&(i&wt)===0&&ai(a,t,r)&&(ot(a,wt),Bn(a))}}function ai(e,t,n){const r=n.get(e);if(r!==void 0)return r;if(e.deps!==null)for(const a of e.deps){if(t.includes(a))return!0;if((a.f&lt)!==0&&ai(a,t,n))return n.set(a,!0),!0}return n.set(e,!1),!1}function Bn(e){for(var t=is=e;t.parent!==null;){t=t.parent;var n=t.f;if(Cs&&t===De&&(n&Jt)!==0&&(n&Ka)===0)return;if((n&(Yn|fn))!==0){if((n&it)===0)return;t.f^=it}}Tt.push(t)}function Io(e){let t=0,n=jn(0),r;return()=>{xr()&&(s(n),vr(()=>(t===0&&(r=x(()=>e(()=>wr(n)))),t+=1,()=>{Vn(()=>{t-=1,t===0&&(r?.(),r=void 0,wr(n))})})))}}var No=Dn|ur|ss;function Oo(e,t,n){new Do(e,t,n)}class Do{parent;#e=!1;#t;#n=null;#r;#l;#a;#s=null;#i=null;#o=null;#c=null;#u=null;#d=0;#v=0;#h=!1;#f=null;#b=Io(()=>(this.#f=jn(this.#d),()=>{this.#f=null}));constructor(t,n,r){this.#t=t,this.#r=n,this.#l=r,this.parent=De.b,this.#e=!!this.#r.pending,this.#a=Js(()=>{De.b=this;{var a=this.#g();try{this.#s=$t(()=>r(a))}catch(i){this.error(i)}this.#v>0?this.#_():this.#e=!1}return()=>{this.#u?.remove()}},No)}#w(){try{this.#s=$t(()=>this.#l(this.#t))}catch(t){this.error(t)}this.#e=!1}#y(){const t=this.#r.pending;t&&(this.#i=$t(()=>t(this.#t)),Qt.enqueue(()=>{var n=this.#g();this.#s=this.#p(()=>(Qt.ensure(),$t(()=>this.#l(n)))),this.#v>0?this.#_():(Ln(this.#i,()=>{this.#i=null}),this.#e=!1)}))}#g(){var t=this.#t;return this.#e&&(this.#u=un(),this.#t.before(this.#u),t=this.#u),t}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#r.pending}#p(t){var n=De,r=Ne,a=We;Gt(this.#a),gt(this.#a),sr(this.#a.ctx);try{return t()}catch(i){return ni(i),null}finally{Gt(n),gt(r),sr(a)}}#_(){const t=this.#r.pending;this.#s!==null&&(this.#c=document.createDocumentFragment(),this.#c.append(this.#u),ki(this.#s,this.#c)),this.#i===null&&(this.#i=$t(()=>t(this.#t)))}#m(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#m(t);return}this.#v+=t,this.#v===0&&(this.#e=!1,this.#i&&Ln(this.#i,()=>{this.#i=null}),this.#c&&(this.#t.before(this.#c),this.#c=null))}update_pending_count(t){this.#m(t),this.#d+=t,this.#f&&ir(this.#f,this.#d)}get_effect_pending(){return this.#b(),s(this.#f)}error(t){var n=this.#r.onerror;let r=this.#r.failed;if(this.#h||!n&&!r)throw t;this.#s&&(mt(this.#s),this.#s=null),this.#i&&(mt(this.#i),this.#i=null),this.#o&&(mt(this.#o),this.#o=null);var a=!1,i=!1;const l=()=>{if(a){Ao();return}a=!0,i&&po(),Qt.ensure(),this.#d=0,this.#o!==null&&Ln(this.#o,()=>{this.#o=null}),this.#e=this.has_pending_snippet(),this.#s=this.#p(()=>(this.#h=!1,$t(()=>this.#l(this.#t)))),this.#v>0?this.#_():this.#e=!1};var c=Ne;try{gt(null),i=!0,n?.(t,l),i=!1}catch(u){ar(u,this.#a&&this.#a.parent)}finally{gt(c)}r&&Vn(()=>{this.#o=this.#p(()=>{Qt.ensure(),this.#h=!0;try{return $t(()=>{r(this.#t,()=>t,()=>l)})}catch(u){return ar(u,this.#a.parent),null}finally{this.#h=!1}})})}}function Fo(e,t,n,r){const a=Rr()?os:Je;if(n.length===0&&e.length===0){r(t.map(a));return}var i=Ue,l=De,c=Bo();function u(){Promise.all(n.map(o=>jo(o))).then(o=>{c();try{r([...t.map(a),...o])}catch(d){(l.f&cn)===0&&ar(d,l)}i?.deactivate(),Qr()}).catch(o=>{ar(o,l)})}e.length>0?Promise.all(e).then(()=>{c();try{return u()}finally{i?.deactivate(),Qr()}}):u()}function Bo(){var e=De,t=Ne,n=We,r=Ue;return function(i=!0){Gt(e),gt(t),sr(n),i&&r?.activate()}}function Qr(){Gt(null),gt(null),sr(null)}function os(e){var t=lt|wt,n=Ne!==null&&(Ne.f&lt)!==0?Ne:null;return De!==null&&(De.f|=ur),{ctx:We,deps:null,effects:null,equals:Ja,f:t,fn:e,reactions:null,rv:0,v:ut,wv:0,parent:n??De,ac:null}}function jo(e,t){let n=De;n===null&&ao();var r=n.b,a=void 0,i=jn(ut),l=!Ne,c=new Map;return Zo(()=>{var u=Xa();a=u.promise;try{Promise.resolve(e()).then(u.resolve,u.reject).then(()=>{o===Ue&&o.committed&&o.deactivate(),Qr()})}catch(v){u.reject(v),Qr()}var o=Ue;if(l){var d=!r.is_pending();r.update_pending_count(1),o.increment(d),c.get(o)?.reject(er),c.delete(o),c.set(o,u)}const f=(v,p=void 0)=>{if(o.activate(),p)p!==er&&(i.f|=wn,ir(i,p));else{(i.f&wn)!==0&&(i.f^=wn),ir(i,v);for(const[b,k]of c){if(c.delete(b),b===o)break;k.reject(er)}}l&&(r.update_pending_count(-1),o.decrement(d))};u.promise.then(f,v=>f(null,v||"unknown"))}),ls(()=>{for(const u of c.values())u.reject(er)}),new Promise(u=>{function o(d){function f(){d===a?u(i):o(a)}d.then(f,f)}o(a)})}function pr(e){const t=os(e);return xi(t),t}function Je(e){const t=os(e);return t.equals=ei,t}function ii(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)mt(t[n])}}function qo(e){for(var t=e.parent;t!==null;){if((t.f&lt)===0)return(t.f&cn)===0?t:null;t=t.parent}return null}function Zs(e){var t,n=De;Gt(qo(e));try{e.f&=~Fn,ii(e),t=Ti(e)}finally{Gt(n)}return t}function oi(e){var t=Zs(e);if(e.equals(t)||(Ue?.is_fork||(e.v=t),e.wv=Mi()),!Qn)if(Ct!==null)(xr()||Ue?.is_fork)&&Ct.set(e,t);else{var n=(e.f&Bt)===0?jt:it;ot(e,n)}}let Ps=new Set;const yn=new Map;let li=!1;function jn(e,t){var n={f:0,v:e,reactions:null,equals:Ja,rv:0,wv:0};return n}function hn(e,t){const n=jn(e);return xi(n),n}function $(e,t=!1,n=!0){const r=jn(e);return t||(r.equals=ei),dr&&n&&We!==null&&We.l!==null&&(We.l.s??=[]).push(r),r}function Nr(e,t){return _(e,x(()=>s(e))),t}function _(e,t,n=!1){Ne!==null&&(!Kt||(Ne.f&ha)!==0)&&Rr()&&(Ne.f&(lt|Jt|Xs|ha))!==0&&!dn?.includes(e)&&ho();let r=n?tr(t):t;return ir(e,r)}function ir(e,t){if(!e.equals(t)){var n=e.v;Qn?yn.set(e,t):yn.set(e,n),e.v=t;var r=Qt.ensure();r.capture(e,n),(e.f&lt)!==0&&((e.f&wt)!==0&&Zs(e),ot(e,(e.f&Bt)!==0?it:jt)),e.wv=Mi(),ci(e,wt),Rr()&&De!==null&&(De.f&it)!==0&&(De.f&(fn|Yn))===0&&(St===null?el([e]):St.push(e)),!r.is_fork&&Ps.size>0&&!li&&Uo()}return t}function Uo(){li=!1;var e=zn;Xr(!0);const t=Array.from(Ps);try{for(const n of t)(n.f&it)!==0&&ot(n,jt),fr(n)&&or(n)}finally{Xr(e)}Ps.clear()}function wr(e){_(e,e.v+1)}function ci(e,t){var n=e.reactions;if(n!==null)for(var r=Rr(),a=n.length,i=0;i<a;i++){var l=n[i],c=l.f;if(!(!r&&l===De)){var u=(c&wt)===0;if(u&&ot(l,t),(c&lt)!==0){var o=l;Ct?.delete(o),(c&Fn)===0&&(c&Bt&&(l.f|=Fn),ci(o,jt))}else u&&((c&Jt)!==0&&rn!==null&&rn.add(l),Bn(l))}}}function tr(e){if(typeof e!="object"||e===null||Rn in e)return e;const t=Ws(e);if(t!==Zi&&t!==Ji)return e;var n=new Map,r=ts(e),a=hn(0),i=In,l=c=>{if(In===i)return c();var u=Ne,o=In;gt(null),ma(i);var d=c();return gt(u),ma(o),d};return r&&n.set("length",hn(e.length)),new Proxy(e,{defineProperty(c,u,o){(!("value"in o)||o.configurable===!1||o.enumerable===!1||o.writable===!1)&&vo();var d=n.get(u);return d===void 0?d=l(()=>{var f=hn(o.value);return n.set(u,f),f}):_(d,o.value,!0),!0},deleteProperty(c,u){var o=n.get(u);if(o===void 0){if(u in c){const d=l(()=>hn(ut));n.set(u,d),wr(a)}}else _(o,ut),wr(a);return!0},get(c,u,o){if(u===Rn)return e;var d=n.get(u),f=u in c;if(d===void 0&&(!f||rr(c,u)?.writable)&&(d=l(()=>{var p=tr(f?c[u]:ut),b=hn(p);return b}),n.set(u,d)),d!==void 0){var v=s(d);return v===ut?void 0:v}return Reflect.get(c,u,o)},getOwnPropertyDescriptor(c,u){var o=Reflect.getOwnPropertyDescriptor(c,u);if(o&&"value"in o){var d=n.get(u);d&&(o.value=s(d))}else if(o===void 0){var f=n.get(u),v=f?.v;if(f!==void 0&&v!==ut)return{enumerable:!0,configurable:!0,value:v,writable:!0}}return o},has(c,u){if(u===Rn)return!0;var o=n.get(u),d=o!==void 0&&o.v!==ut||Reflect.has(c,u);if(o!==void 0||De!==null&&(!d||rr(c,u)?.writable)){o===void 0&&(o=l(()=>{var v=d?tr(c[u]):ut,p=hn(v);return p}),n.set(u,o));var f=s(o);if(f===ut)return!1}return d},set(c,u,o,d){var f=n.get(u),v=u in c;if(r&&u==="length")for(var p=o;p<f.v;p+=1){var b=n.get(p+"");b!==void 0?_(b,ut):p in c&&(b=l(()=>hn(ut)),n.set(p+"",b))}if(f===void 0)(!v||rr(c,u)?.writable)&&(f=l(()=>hn(void 0)),_(f,tr(o)),n.set(u,f));else{v=f.v!==ut;var k=l(()=>tr(o));_(f,k)}var g=Reflect.getOwnPropertyDescriptor(c,u);if(g?.set&&g.set.call(d,o),!v){if(r&&typeof u=="string"){var E=n.get("length"),C=Number(u);Number.isInteger(C)&&C>=E.v&&_(E,C+1)}wr(a)}return!0},ownKeys(c){s(a);var u=Reflect.ownKeys(c).filter(f=>{var v=n.get(f);return v===void 0||v.v!==ut});for(var[o,d]of n)d.v!==ut&&!(o in c)&&u.push(o);return u},setPrototypeOf(){fo()}})}var _n,ui,di,vi;function Ho(){if(_n===void 0){_n=window,ui=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;di=rr(t,"firstChild").get,vi=rr(t,"nextSibling").get,fa(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),fa(n)&&(n.__t=void 0)}}function un(e=""){return document.createTextNode(e)}function gn(e){return di.call(e)}function Lr(e){return vi.call(e)}function h(e,t){return gn(e)}function $e(e,t=!1){{var n=gn(e);return n instanceof Comment&&n.data===""?Lr(n):n}}function y(e,t=1,n=!1){let r=e;for(;t--;)r=Lr(r);return r}function Yo(e){e.textContent=""}function fi(){return!1}let _a=!1;function Vo(){_a||(_a=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function Wo(e,t,n,r=!0){r&&n();for(var a of t)e.addEventListener(a,n);ls(()=>{for(var i of t)e.removeEventListener(i,n)})}function Wn(e){var t=Ne,n=De;gt(null),Gt(null);try{return e()}finally{gt(t),Gt(n)}}function Qo(e,t,n,r=n){e.addEventListener(t,()=>Wn(n));const a=e.__on_r;a?e.__on_r=()=>{a(),r(!0)}:e.__on_r=()=>r(!0),Vo()}function hi(e){De===null&&(Ne===null&&lo(),oo()),Qn&&io()}function Xo(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function en(e,t,n){var r=De;r!==null&&(r.f&Mt)!==0&&(e|=Mt);var a={ctx:We,deps:null,nodes:null,f:e|wt|Bt,first:null,fn:t,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,wv:0,ac:null};if(n)try{or(a),a.f|=as}catch(c){throw mt(a),c}else t!==null&&Bn(a);var i=a;if(n&&i.deps===null&&i.teardown===null&&i.nodes===null&&i.first===i.last&&(i.f&ur)===0&&(i=i.first,(e&Jt)!==0&&(e&Dn)!==0&&i!==null&&(i.f|=Dn)),i!==null&&(i.parent=r,r!==null&&Xo(i,r),Ne!==null&&(Ne.f&lt)!==0&&(e&Yn)===0)){var l=Ne;(l.effects??=[]).push(i)}return a}function xr(){return Ne!==null&&!Kt}function ls(e){const t=en(rs,null,!1);return ot(t,it),t.teardown=e,t}function Rs(e){hi();var t=De.f,n=!Ne&&(t&fn)!==0&&(t&as)===0;if(n){var r=We;(r.e??=[]).push(e)}else return pi(e)}function pi(e){return en(Qs|Ga,e,!1)}function Ko(e){return hi(),en(rs|Ga,e,!0)}function Go(e){Qt.ensure();const t=en(Yn|ur,e,!0);return(n={})=>new Promise(r=>{n.outro?Ln(t,()=>{mt(t),r(void 0)}):(mt(t),r(void 0))})}function Xt(e){return en(Qs,e,!1)}function ie(e,t){var n=We,r={effect:null,ran:!1,deps:e};n.l.$.push(r),r.effect=vr(()=>{e(),!r.ran&&(r.ran=!0,x(t))})}function qt(){var e=We;vr(()=>{for(var t of e.l.$){t.deps();var n=t.effect;(n.f&it)!==0&&ot(n,jt),fr(n)&&or(n),t.ran=!1}})}function Zo(e){return en(Xs|ur,e,!0)}function vr(e,t=0){return en(rs|t,e,!0)}function de(e,t=[],n=[],r=[]){Fo(r,t,n,a=>{en(rs,()=>e(...a.map(s)),!0)})}function Js(e,t=0){var n=en(Jt|t,e,!0);return n}function $t(e){return en(fn|ur,e,!0)}function _i(e){var t=e.teardown;if(t!==null){const n=Qn,r=Ne;ga(!0),gt(null);try{t.call(null)}finally{ga(n),gt(r)}}}function gi(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){const a=n.ac;a!==null&&Wn(()=>{a.abort(er)});var r=n.next;(n.f&Yn)!==0?n.parent=null:mt(n,t),n=r}}function Jo(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&fn)===0&&mt(t),t=n}}function mt(e,t=!0){var n=!1;(t||(e.f&Ka)!==0)&&e.nodes!==null&&e.nodes.end!==null&&(mi(e.nodes.start,e.nodes.end),n=!0),gi(e,t&&!n),Kr(e,0),ot(e,cn);var r=e.nodes&&e.nodes.t;if(r!==null)for(const i of r)i.stop();_i(e);var a=e.parent;a!==null&&a.first!==null&&bi(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function mi(e,t){for(;e!==null;){var n=e===t?null:Lr(e);e.remove(),e=n}}function bi(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function Ln(e,t,n=!0){var r=[];wi(e,r,!0);var a=()=>{n&&mt(e),t&&t()},i=r.length;if(i>0){var l=()=>--i||a();for(var c of r)c.out(l)}else a()}function wi(e,t,n){if((e.f&Mt)===0){e.f^=Mt;var r=e.nodes&&e.nodes.t;if(r!==null)for(const c of r)(c.is_global||n)&&t.push(c);for(var a=e.first;a!==null;){var i=a.next,l=(a.f&Dn)!==0||(a.f&fn)!==0&&(e.f&Jt)!==0;wi(a,t,l?n:!1),a=i}}}function ea(e){yi(e,!0)}function yi(e,t){if((e.f&Mt)!==0){e.f^=Mt,(e.f&it)===0&&(ot(e,wt),Bn(e));for(var n=e.first;n!==null;){var r=n.next,a=(n.f&Dn)!==0||(n.f&fn)!==0;yi(n,a?t:!1),n=r}var i=e.nodes&&e.nodes.t;if(i!==null)for(const l of i)(l.is_global||t)&&l.in()}}function ki(e,t){if(e.nodes)for(var n=e.nodes.start,r=e.nodes.end;n!==null;){var a=n===r?null:Lr(n);t.append(n),n=a}}let zn=!1;function Xr(e){zn=e}let Qn=!1;function ga(e){Qn=e}let Ne=null,Kt=!1;function gt(e){Ne=e}let De=null;function Gt(e){De=e}let dn=null;function xi(e){Ne!==null&&(dn===null?dn=[e]:dn.push(e))}let ft=null,kt=0,St=null;function el(e){St=e}let Ei=1,Er=0,In=Er;function ma(e){In=e}function Mi(){return++Ei}function fr(e){var t=e.f;if((t&wt)!==0)return!0;if(t&lt&&(e.f&=~Fn),(t&jt)!==0){var n=e.deps;if(n!==null)for(var r=n.length,a=0;a<r;a++){var i=n[a];if(fr(i)&&oi(i),i.wv>e.wv)return!0}(t&Bt)!==0&&Ct===null&&ot(e,it)}return!1}function Si(e,t,n=!0){var r=e.reactions;if(r!==null&&!dn?.includes(e))for(var a=0;a<r.length;a++){var i=r[a];(i.f&lt)!==0?Si(i,t,!1):t===i&&(n?ot(i,wt):(i.f&it)!==0&&ot(i,jt),Bn(i))}}function Ti(e){var t=ft,n=kt,r=St,a=Ne,i=dn,l=We,c=Kt,u=In,o=e.f;ft=null,kt=0,St=null,Ne=(o&(fn|Yn))===0?e:null,dn=null,sr(e.ctx),Kt=!1,In=++Er,e.ac!==null&&(Wn(()=>{e.ac.abort(er)}),e.ac=null);try{e.f|=As;var d=e.fn,f=d(),v=e.deps;if(ft!==null){var p;if(Kr(e,kt),v!==null&&kt>0)for(v.length=kt+ft.length,p=0;p<ft.length;p++)v[kt+p]=ft[p];else e.deps=v=ft;if(xr()&&(e.f&Bt)!==0)for(p=kt;p<v.length;p++)(v[p].reactions??=[]).push(e)}else v!==null&&kt<v.length&&(Kr(e,kt),v.length=kt);if(Rr()&&St!==null&&!Kt&&v!==null&&(e.f&(lt|jt|wt))===0)for(p=0;p<St.length;p++)Si(St[p],e);return a!==null&&a!==e&&(Er++,St!==null&&(r===null?r=St:r.push(...St))),(e.f&wn)!==0&&(e.f^=wn),f}catch(b){return ni(b)}finally{e.f^=As,ft=t,kt=n,St=r,Ne=a,dn=i,sr(l),Kt=c,In=u}}function tl(e,t){let n=t.reactions;if(n!==null){var r=Gi.call(n,e);if(r!==-1){var a=n.length-1;a===0?n=t.reactions=null:(n[r]=n[a],n.pop())}}n===null&&(t.f&lt)!==0&&(ft===null||!ft.includes(t))&&(ot(t,jt),(t.f&Bt)!==0&&(t.f^=Bt,t.f&=~Fn),ii(t),Kr(t,0))}function Kr(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)tl(e,n[r])}function or(e){var t=e.f;if((t&cn)===0){ot(e,it);var n=De,r=zn;De=e,zn=!0;try{(t&(Jt|no))!==0?Jo(e):gi(e),_i(e);var a=Ti(e);e.teardown=typeof a=="function"?a:null,e.wv=Ei;var i;$s&&Co&&(e.f&wt)!==0&&e.deps}finally{zn=r,De=n}}}async function Mr(){await Promise.resolve(),Lo()}function s(e){var t=e.f,n=(t&lt)!==0;if(Ne!==null&&!Kt){var r=De!==null&&(De.f&cn)!==0;if(!r&&!dn?.includes(e)){var a=Ne.deps;if((Ne.f&As)!==0)e.rv<Er&&(e.rv=Er,ft===null&&a!==null&&a[kt]===e?kt++:ft===null?ft=[e]:ft.includes(e)||ft.push(e));else{(Ne.deps??=[]).push(e);var i=e.reactions;i===null?e.reactions=[Ne]:i.includes(Ne)||i.push(Ne)}}}if(Qn){if(yn.has(e))return yn.get(e);if(n){var l=e,c=l.v;return((l.f&it)===0&&l.reactions!==null||Ai(l))&&(c=Zs(l)),yn.set(l,c),c}}else n&&(!Ct?.has(e)||Ue?.is_fork&&!xr())&&(l=e,fr(l)&&oi(l),zn&&xr()&&(l.f&Bt)===0&&$i(l));if(Ct?.has(e))return Ct.get(e);if((e.f&wn)!==0)throw e.v;return e.v}function $i(e){if(e.deps!==null){e.f^=Bt;for(const t of e.deps)(t.reactions??=[]).push(e),(t.f&lt)!==0&&(t.f&Bt)===0&&$i(t)}}function Ai(e){if(e.v===ut)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(yn.has(t)||(t.f&lt)!==0&&Ai(t))return!0;return!1}function x(e){var t=Kt;try{return Kt=!0,e()}finally{Kt=t}}const nl=-7169;function ot(e,t){e.f=e.f&nl|t}function H(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Rn in e)Ls(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&Rn in n&&Ls(n)}}}function Ls(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let r in e)try{Ls(e[r],t)}catch{}const n=Ws(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=Qa(n);for(let a in r){const i=r[a].get;if(i)try{i.call(e)}catch{}}}}}const rl=["touchstart","touchmove"];function sl(e){return rl.includes(e)}const al=new Set,ba=new Set;function il(e,t,n,r={}){function a(i){if(r.capture||gr.call(t,i),!i.cancelBubble)return Wn(()=>n?.call(this,i))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Vn(()=>{t.addEventListener(e,a,r)}):t.addEventListener(e,a,r),a}function z(e,t,n,r,a){var i={capture:r,passive:a},l=il(e,t,n,i);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&ls(()=>{t.removeEventListener(e,l,i)})}let wa=null;function gr(e){var t=this,n=t.ownerDocument,r=e.type,a=e.composedPath?.()||[],i=a[0]||e.target;wa=e;var l=0,c=wa===e&&e.__root;if(c){var u=a.indexOf(c);if(u!==-1&&(t===document||t===window)){e.__root=t;return}var o=a.indexOf(t);if(o===-1)return;u<=o&&(l=u)}if(i=a[l]||e.target,i!==t){Wa(e,"currentTarget",{configurable:!0,get(){return i||n}});var d=Ne,f=De;gt(null),Gt(null);try{for(var v,p=[];i!==null;){var b=i.assignedSlot||i.parentNode||i.host||null;try{var k=i["__"+r];k!=null&&(!i.disabled||e.target===i)&&k.call(i,e)}catch(g){v?p.push(g):v=g}if(e.cancelBubble||b===t||b===null)break;i=b}if(v){for(let g of p)queueMicrotask(()=>{throw g});throw v}}finally{e.__root=t,delete e.currentTarget,gt(d),Gt(f)}}}function Ci(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function Sr(e,t){var n=De;n.nodes===null&&(n.nodes={start:e,end:t,a:null,t:null})}function M(e,t){var n=(t&So)!==0,r=(t&To)!==0,a,i=!e.startsWith("<!>");return()=>{a===void 0&&(a=Ci(i?e:"<!>"+e),n||(a=gn(a)));var l=r||ui?document.importNode(a,!0):a.cloneNode(!0);if(n){var c=gn(l),u=l.lastChild;Sr(c,u)}else Sr(l,l);return l}}function Xn(e=""){{var t=un(e+"");return Sr(t,t),t}}function Xe(){var e=document.createDocumentFragment(),t=document.createComment(""),n=un();return e.append(t,n),Sr(t,n),e}function m(e,t){e!==null&&e.before(t)}let zs=!0;function ve(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??=e.nodeValue)&&(e.__t=n,e.nodeValue=n+"")}function ol(e,t){return ll(e,t)}const Kn=new Map;function ll(e,{target:t,anchor:n,props:r={},events:a,context:i,intro:l=!0}){Ho();var c=new Set,u=f=>{for(var v=0;v<f.length;v++){var p=f[v];if(!c.has(p)){c.add(p);var b=sl(p);t.addEventListener(p,gr,{passive:b});var k=Kn.get(p);k===void 0?(document.addEventListener(p,gr,{passive:b}),Kn.set(p,1)):Kn.set(p,k+1)}}};u(ns(al)),ba.add(u);var o=void 0,d=Go(()=>{var f=n??t.appendChild(un());return Oo(f,{pending:()=>{}},v=>{if(i){ht({});var p=We;p.c=i}a&&(r.$$events=a),zs=l,o=e(v,r)||{},zs=!0,i&&pt()}),()=>{for(var v of c){t.removeEventListener(v,gr);var p=Kn.get(v);--p===0?(document.removeEventListener(v,gr),Kn.delete(v)):Kn.set(v,p)}ba.delete(u),f!==n&&f.parentNode?.removeChild(f)}});return cl.set(o,d),o}let cl=new WeakMap;class ul{anchor;#e=new Map;#t=new Map;#n=new Map;#r=new Set;#l=!0;constructor(t,n=!0){this.anchor=t,this.#l=n}#a=()=>{var t=Ue;if(this.#e.has(t)){var n=this.#e.get(t),r=this.#t.get(n);if(r)ea(r),this.#r.delete(n);else{var a=this.#n.get(n);a&&(this.#t.set(n,a.effect),this.#n.delete(n),a.fragment.lastChild.remove(),this.anchor.before(a.fragment),r=a.effect)}for(const[i,l]of this.#e){if(this.#e.delete(i),i===t)break;const c=this.#n.get(l);c&&(mt(c.effect),this.#n.delete(l))}for(const[i,l]of this.#t){if(i===n||this.#r.has(i))continue;const c=()=>{if(Array.from(this.#e.values()).includes(i)){var o=document.createDocumentFragment();ki(l,o),o.append(un()),this.#n.set(i,{effect:l,fragment:o})}else mt(l);this.#r.delete(i),this.#t.delete(i)};this.#l||!r?(this.#r.add(i),Ln(l,c,!1)):c()}}};#s=t=>{this.#e.delete(t);const n=Array.from(this.#e.values());for(const[r,a]of this.#n)n.includes(r)||(mt(a.effect),this.#n.delete(r))};ensure(t,n){var r=Ue,a=fi();if(n&&!this.#t.has(t)&&!this.#n.has(t))if(a){var i=document.createDocumentFragment(),l=un();i.append(l),this.#n.set(t,{effect:$t(()=>n(l)),fragment:i})}else this.#t.set(t,$t(()=>n(this.anchor)));if(this.#e.set(r,t),a){for(const[c,u]of this.#t)c===t?r.skipped_effects.delete(u):r.skipped_effects.add(u);for(const[c,u]of this.#n)c===t?r.skipped_effects.delete(u.effect):r.skipped_effects.add(u.effect);r.oncommit(this.#a),r.ondiscard(this.#s)}else this.#a()}}function q(e,t,n=!1){var r=new ul(e),a=n?Dn:0;function i(l,c){r.ensure(l,c)}Js(()=>{var l=!1;t((c,u=!0)=>{l=!0,i(u,c)}),l||i(!1,null)},a)}function vn(e,t){return t}function dl(e,t,n){for(var r=[],a=t.length,i,l=t.length,c=0;c<a;c++){let f=t[c];Ln(f,()=>{if(i){if(i.pending.delete(f),i.done.add(f),i.pending.size===0){var v=e.outrogroups;Is(ns(i.done)),v.delete(i),v.size===0&&(e.outrogroups=null)}}else l-=1},!1)}if(l===0){var u=r.length===0&&n!==null;if(u){var o=n,d=o.parentNode;Yo(d),d.append(o),e.items.clear()}Is(t,!u)}else i={pending:new Set(t),done:new Set},(e.outrogroups??=new Set).add(i)}function Is(e,t=!0){for(var n=0;n<e.length;n++)mt(e[n],t)}var ya;function Pt(e,t,n,r,a,i=null){var l=e,c=new Map,u=(t&Za)!==0;if(u){var o=e;l=o.appendChild(un())}var d=null,f=Je(()=>{var E=n();return ts(E)?E:E==null?[]:ns(E)}),v,p=!0;function b(){g.fallback=d,vl(g,v,l,t,r),d!==null&&(v.length===0?(d.f&an)===0?ea(d):(d.f^=an,mr(d,null,l)):Ln(d,()=>{d=null}))}var k=Js(()=>{v=s(f);for(var E=v.length,C=new Set,j=Ue,ne=fi(),oe=0;oe<E;oe+=1){var se=v[oe],fe=r(se,oe),T=p?null:c.get(fe);T?(T.v&&ir(T.v,se),T.i&&ir(T.i,oe),ne&&j.skipped_effects.delete(T.e)):(T=fl(c,p?l:ya??=un(),se,fe,oe,a,t,n),p||(T.e.f|=an),c.set(fe,T)),C.add(fe)}if(E===0&&i&&!d&&(p?d=$t(()=>i(l)):(d=$t(()=>i(ya??=un())),d.f|=an)),!p)if(ne){for(const[ee,ye]of c)C.has(ee)||j.skipped_effects.add(ye.e);j.oncommit(b),j.ondiscard(()=>{})}else b();s(f)}),g={effect:k,items:c,outrogroups:null,fallback:d};p=!1}function vl(e,t,n,r,a){var i=(r&mo)!==0,l=t.length,c=e.items,u=e.effect.first,o,d=null,f,v=[],p=[],b,k,g,E;if(i)for(E=0;E<l;E+=1)b=t[E],k=a(b,E),g=c.get(k).e,(g.f&an)===0&&(g.nodes?.a?.measure(),(f??=new Set).add(g));for(E=0;E<l;E+=1){if(b=t[E],k=a(b,E),g=c.get(k).e,e.outrogroups!==null)for(const ye of e.outrogroups)ye.pending.delete(g),ye.done.delete(g);if((g.f&an)!==0)if(g.f^=an,g===u)mr(g,null,n);else{var C=d?d.next:u;g===e.effect.last&&(e.effect.last=g.prev),g.prev&&(g.prev.next=g.next),g.next&&(g.next.prev=g.prev),pn(e,d,g),pn(e,g,C),mr(g,C,n),d=g,v=[],p=[],u=d.next;continue}if((g.f&Mt)!==0&&(ea(g),i&&(g.nodes?.a?.unfix(),(f??=new Set).delete(g))),g!==u){if(o!==void 0&&o.has(g)){if(v.length<p.length){var j=p[0],ne;d=j.prev;var oe=v[0],se=v[v.length-1];for(ne=0;ne<v.length;ne+=1)mr(v[ne],j,n);for(ne=0;ne<p.length;ne+=1)o.delete(p[ne]);pn(e,oe.prev,se.next),pn(e,d,oe),pn(e,se,j),u=j,d=se,E-=1,v=[],p=[]}else o.delete(g),mr(g,u,n),pn(e,g.prev,g.next),pn(e,g,d===null?e.effect.first:d.next),pn(e,d,g),d=g;continue}for(v=[],p=[];u!==null&&u!==g;)(o??=new Set).add(u),p.push(u),u=u.next;if(u===null)continue}(g.f&an)===0&&v.push(g),d=g,u=g.next}if(e.outrogroups!==null){for(const ye of e.outrogroups)ye.pending.size===0&&(Is(ns(ye.done)),e.outrogroups?.delete(ye));e.outrogroups.size===0&&(e.outrogroups=null)}if(u!==null||o!==void 0){var fe=[];if(o!==void 0)for(g of o)(g.f&Mt)===0&&fe.push(g);for(;u!==null;)(u.f&Mt)===0&&u!==e.fallback&&fe.push(u),u=u.next;var T=fe.length;if(T>0){var ee=(r&Za)!==0&&l===0?n:null;if(i){for(E=0;E<T;E+=1)fe[E].nodes?.a?.measure();for(E=0;E<T;E+=1)fe[E].nodes?.a?.fix()}dl(e,fe,ee)}}i&&Vn(()=>{if(f!==void 0)for(g of f)g.nodes?.a?.apply()})}function fl(e,t,n,r,a,i,l,c){var u=(l&_o)!==0?(l&bo)===0?$(n,!1,!1):jn(n):null,o=(l&go)!==0?jn(a):null;return{v:u,i:o,e:$t(()=>(i(t,u??n,o??a,c),()=>{e.delete(r)}))}}function mr(e,t,n){if(e.nodes)for(var r=e.nodes.start,a=e.nodes.end,i=t&&(t.f&an)===0?t.nodes.start:n;r!==null;){var l=Lr(r);if(i.before(r),r===a)return;r=l}}function pn(e,t,n){t===null?e.effect.first=n:t.next=n,n===null?e.effect.last=t:n.prev=t}function ce(e,t,n=!1,r=!1,a=!1){var i=e,l="";de(()=>{var c=De;if(l!==(l=t()??"")&&(c.nodes!==null&&(mi(c.nodes.start,c.nodes.end),c.nodes=null),l!=="")){var u=l+"";n?u=`<svg>${u}</svg>`:r&&(u=`<math>${u}</math>`);var o=Ci(u);if((n||r)&&(o=gn(o)),Sr(gn(o),o.lastChild),n||r)for(;gn(o);)i.before(gn(o));else i.before(o)}})}function qr(e,t,n,r,a){var i=t.$$slots?.[n],l=!1;i===!0&&(i=t[n==="default"?"children":n],l=!0),i===void 0||i(e,l?()=>r:r)}const hl=()=>performance.now(),sn={tick:e=>requestAnimationFrame(e),now:()=>hl(),tasks:new Set};function Pi(){const e=sn.now();sn.tasks.forEach(t=>{t.c(e)||(sn.tasks.delete(t),t.f())}),sn.tasks.size!==0&&sn.tick(Pi)}function pl(e){let t;return sn.tasks.size===0&&sn.tick(Pi),{promise:new Promise(n=>{sn.tasks.add(t={c:e,f:n})}),abort(){sn.tasks.delete(t)}}}function Or(e,t){Wn(()=>{e.dispatchEvent(new CustomEvent(t))})}function _l(e){if(e==="float")return"cssFloat";if(e==="offset")return"cssOffset";if(e.startsWith("--"))return e;const t=e.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(n=>n[0].toUpperCase()+n.slice(1)).join("")}function ka(e){const t={},n=e.split(";");for(const r of n){const[a,i]=r.split(":");if(!a||i===void 0)break;const l=_l(a.trim());t[l]=i.trim()}return t}const gl=e=>e;function Rt(e,t,n,r){var a=(e&xo)!==0,i=(e&Eo)!==0,l=a&&i,c=(e&Mo)!==0,u=l?"both":a?"in":"out",o,d=t.inert,f=t.style.overflow,v,p;function b(){return Wn(()=>o??=n()(t,r?.()??{},{direction:u}))}var k={is_global:c,in(){if(t.inert=d,!a){p?.abort(),p?.reset?.();return}i||v?.abort(),Or(t,"introstart"),v=Ns(t,b(),p,1,()=>{Or(t,"introend"),v?.abort(),v=o=void 0,t.style.overflow=f})},out(j){if(!i){j?.(),o=void 0;return}t.inert=!0,Or(t,"outrostart"),p=Ns(t,b(),v,0,()=>{Or(t,"outroend"),j?.()})},stop:()=>{v?.abort(),p?.abort()}},g=De;if((g.nodes.t??=[]).push(k),a&&zs){var E=c;if(!E){for(var C=g.parent;C&&(C.f&Dn)!==0;)for(;(C=C.parent)&&(C.f&Jt)===0;);E=!C||(C.f&as)!==0}E&&Xt(()=>{x(()=>k.in())})}}function Ns(e,t,n,r,a){var i=r===1;if(eo(t)){var l,c=!1;return Vn(()=>{if(!c){var g=t({direction:i?"in":"out"});l=Ns(e,g,n,r,a)}}),{abort:()=>{c=!0,l?.abort()},deactivate:()=>l.deactivate(),reset:()=>l.reset(),t:()=>l.t()}}if(n?.deactivate(),!t?.duration)return a(),{abort:Et,deactivate:Et,reset:Et,t:()=>r};const{delay:u=0,css:o,tick:d,easing:f=gl}=t;var v=[];if(i&&n===void 0&&(d&&d(0,1),o)){var p=ka(o(0,1));v.push(p,p)}var b=()=>1-r,k=e.animate(v,{duration:u,fill:"forwards"});return k.onfinish=()=>{k.cancel();var g=n?.t()??1-r;n?.abort();var E=r-g,C=t.duration*Math.abs(E),j=[];if(C>0){var ne=!1;if(o)for(var oe=Math.ceil(C/16.666666666666668),se=0;se<=oe;se+=1){var fe=g+E*f(se/oe),T=ka(o(fe,1-fe));j.push(T),ne||=T.overflow==="hidden"}ne&&(e.style.overflow="hidden"),b=()=>{var ee=k.currentTime;return g+E*f(ee/C)},d&&pl(()=>{if(k.playState!=="running")return!1;var ee=b();return d(ee,1-ee),!0})}k=e.animate(j,{duration:C,fill:"forwards"}),k.onfinish=()=>{b=()=>r,d?.(r,1-r),a()}},{abort:()=>{k&&(k.cancel(),k.effect=null,k.onfinish=Et)},deactivate:()=>{a=Et},reset:()=>{r===0&&d?.(1,0)},t:()=>b()}}function Ri(e,t,n){Xt(()=>{var r=x(()=>t(e,n?.())||{});if(n&&r?.update){var a=!1,i={};vr(()=>{var l=n();H(l),a&&Gs(i,l)&&(i=l,r.update(l))}),a=!0}if(r?.destroy)return()=>r.destroy()})}const xa=[...` 	
\r\fÂ \v\uFEFF`];function ml(e,t,n){var r=e==null?"":""+e;if(t&&(r=r?r+" "+t:t),n){for(var a in n)if(n[a])r=r?r+" "+a:a;else if(r.length)for(var i=a.length,l=0;(l=r.indexOf(a,l))>=0;){var c=l+i;(l===0||xa.includes(r[l-1]))&&(c===r.length||xa.includes(r[c]))?r=(l===0?"":r.substring(0,l))+r.substring(c+1):l=c}}return r===""?null:r}function Ea(e,t=!1){var n=t?" !important;":";",r="";for(var a in e){var i=e[a];i!=null&&i!==""&&(r+=" "+a+": "+i+n)}return r}function ms(e){return e[0]!=="-"||e[1]!=="-"?e.toLowerCase():e}function bl(e,t){if(t){var n="",r,a;if(Array.isArray(t)?(r=t[0],a=t[1]):r=t,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var i=!1,l=0,c=!1,u=[];r&&u.push(...Object.keys(r).map(ms)),a&&u.push(...Object.keys(a).map(ms));var o=0,d=-1;const k=e.length;for(var f=0;f<k;f++){var v=e[f];if(c?v==="/"&&e[f-1]==="*"&&(c=!1):i?i===v&&(i=!1):v==="/"&&e[f+1]==="*"?c=!0:v==='"'||v==="'"?i=v:v==="("?l++:v===")"&&l--,!c&&i===!1&&l===0){if(v===":"&&d===-1)d=f;else if(v===";"||f===k-1){if(d!==-1){var p=ms(e.substring(o,d).trim());if(!u.includes(p)){v!==";"&&f++;var b=e.substring(o,f).trim();n+=" "+b+";"}}o=f+1,d=-1}}}}return r&&(n+=Ea(r)),a&&(n+=Ea(a,!0)),n=n.trim(),n===""?null:n}return e==null?null:String(e)}function Oe(e,t,n,r,a,i){var l=e.__className;if(l!==n||l===void 0){var c=ml(n,r,i);c==null?e.removeAttribute("class"):e.className=c,e.__className=n}else if(i&&a!==i)for(var u in i){var o=!!i[u];(a==null||o!==!!a[u])&&e.classList.toggle(u,o)}return i}function bs(e,t={},n,r){for(var a in n){var i=n[a];t[a]!==i&&(n[a]==null?e.style.removeProperty(a):e.style.setProperty(a,i,r))}}function Ke(e,t,n,r){var a=e.__style;if(a!==t){var i=bl(t,r);i==null?e.removeAttribute("style"):e.style.cssText=i,e.__style=t}else r&&(Array.isArray(r)?(bs(e,n?.[0],r[0]),bs(e,n?.[1],r[1],"important")):bs(e,n,r));return r}const wl=Symbol("is custom element"),yl=Symbol("is html");function kl(e,t){var n=Li(e);n.value===(n.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!=="PROGRESS")||(e.value=t??"")}function bt(e,t,n,r){var a=Li(e);a[t]!==(a[t]=n)&&(t==="loading"&&(e[so]=n),n==null?e.removeAttribute(t):typeof n!="string"&&xl(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function Li(e){return e.__attributes??={[wl]:e.nodeName.includes("-"),[yl]:e.namespaceURI===$o}}var Ma=new Map;function xl(e){var t=e.getAttribute("is")||e.nodeName,n=Ma.get(t);if(n)return n;Ma.set(t,n=[]);for(var r,a=e,i=Element.prototype;i!==a;){r=Qa(a);for(var l in r)r[l].set&&n.push(l);a=Ws(a)}return n}function ta(e,t,n=t){var r=new WeakSet;Qo(e,"input",async a=>{var i=a?e.defaultValue:e.value;if(i=ws(e)?ys(i):i,n(i),Ue!==null&&r.add(Ue),await Mr(),i!==(i=t())){var l=e.selectionStart,c=e.selectionEnd,u=e.value.length;if(e.value=i??"",c!==null){var o=e.value.length;l===c&&c===u&&o>u?(e.selectionStart=o,e.selectionEnd=o):(e.selectionStart=l,e.selectionEnd=Math.min(c,o))}}}),x(t)==null&&e.value&&(n(ws(e)?ys(e.value):e.value),Ue!==null&&r.add(Ue)),vr(()=>{var a=t();if(e===document.activeElement){var i=jr??Ue;if(r.has(i))return}ws(e)&&a===ys(e.value)||e.type==="date"&&!a&&!e.value||a!==e.value&&(e.value=a??"")})}function ws(e){var t=e.type;return t==="number"||t==="range"}function ys(e){return e===""?null:+e}class na{#e=new WeakMap;#t;#n;static entries=new WeakMap;constructor(t){this.#n=t}observe(t,n){var r=this.#e.get(t)||new Set;return r.add(n),this.#e.set(t,r),this.#r().observe(t,this.#n),()=>{var a=this.#e.get(t);a.delete(n),a.size===0&&(this.#e.delete(t),this.#t.unobserve(t))}}#r(){return this.#t??(this.#t=new ResizeObserver(t=>{for(var n of t){na.entries.set(n.target,n);for(var r of this.#e.get(n.target)||[])r(n)}}))}}var El=new na({box:"border-box"});function Sa(e,t,n){var r=El.observe(e,()=>n(e[t]));Xt(()=>(x(()=>n(e[t])),r))}function Ta(e,t){return e===t||e?.[Rn]===t}function qn(e={},t,n,r){return Xt(()=>{var a,i;return vr(()=>{a=i,i=[],x(()=>{e!==n(...i)&&(t(e,...i),a&&Ta(n(...a),e)&&t(null,...a))})}),()=>{Vn(()=>{i&&Ta(n(...i),e)&&t(null,...i)})}}),e}function $a(e,t){Wo(window,["resize"],()=>Wn(()=>t(window[e])))}function Dt(e){return function(...t){var n=t[0];return n.stopPropagation(),e?.apply(this,t)}}function yt(e=!1){const t=We,n=t.l.u;if(!n)return;let r=()=>H(t.s);if(e){let a=0,i={};const l=os(()=>{let c=!1;const u=t.s;for(const o in u)u[o]!==i[o]&&(i[o]=u[o],c=!0);return c&&a++,a});r=()=>s(l)}n.b.length&&Ko(()=>{Aa(t,r),Wr(n.b)}),Rs(()=>{const a=x(()=>n.m.map(to));return()=>{for(const i of a)typeof i=="function"&&i()}}),n.a.length&&Rs(()=>{Aa(t,r),Wr(n.a)})}function Aa(e,t){if(e.l.s)for(const n of e.l.s)s(n);t()}function Gr(e,t){var n=e.$$events?.[t.type],r=ts(n)?n.slice():n==null?[]:[n];for(var a of r)a.call(this,t)}function ra(e,t,n){if(e==null)return t(void 0),n&&n(void 0),Et;const r=x(()=>e.subscribe(t,n));return r.unsubscribe?()=>r.unsubscribe():r}const Gn=[];function Ml(e,t){return{subscribe:ze(e,t).subscribe}}function ze(e,t=Et){let n=null;const r=new Set;function a(c){if(Gs(e,c)&&(e=c,n)){const u=!Gn.length;for(const o of r)o[1](),Gn.push(o,e);if(u){for(let o=0;o<Gn.length;o+=2)Gn[o][0](Gn[o+1]);Gn.length=0}}}function i(c){a(c(e))}function l(c,u=Et){const o=[c,u];return r.add(o),r.size===1&&(n=t(a,i)||Et),c(e),()=>{r.delete(o),r.size===0&&n&&(n(),n=null)}}return{set:a,update:i,subscribe:l}}function zi(e,t,n){const r=!Array.isArray(e),a=r?[e]:e;if(!a.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const i=t.length<2;return Ml(n,(l,c)=>{let u=!1;const o=[];let d=0,f=Et;const v=()=>{if(d)return;f();const b=t(r?o[0]:o,l,c);i?l(b):f=typeof b=="function"?b:Et},p=a.map((b,k)=>ra(b,g=>{o[k]=g,d&=~(1<<k),u&&v()},()=>{d|=1<<k}));return u=!0,v(),function(){Wr(p),f(),u=!1}})}function Le(e){let t;return ra(e,n=>t=n)(),t}let Dr=!1,Os=Symbol();function ge(e,t,n){const r=n[t]??={store:null,source:$(void 0),unsubscribe:Et};if(r.store!==e&&!(Os in n))if(r.unsubscribe(),r.store=e??null,e==null)r.source.v=void 0,r.unsubscribe=Et;else{var a=!0;r.unsubscribe=ra(e,i=>{a?r.source.v=i:_(r.source,i)}),a=!1}return e&&Os in n?Le(e):s(r.source)}function Lt(){const e={};function t(){ls(()=>{for(var n in e)e[n].unsubscribe();Wa(e,Os,{enumerable:!1,value:!0})})}return[e,t]}function Sl(e){var t=Dr;try{return Dr=!1,[e(),Dr]}finally{Dr=t}}function st(e,t,n,r){var a=!dr||(n&wo)!==0,i=(n&ko)!==0,l=r,c=!0,u=()=>(c&&(c=!1,l=r),l),o;{var d=Rn in e||ro in e;o=rr(e,t)?.set??(d&&t in e?C=>e[t]=C:void 0)}var f,v=!1;[f,v]=Sl(()=>e[t]),f===void 0&&r!==void 0&&(f=u(),o&&(a&&uo(),o(f)));var p;if(a?p=()=>{var C=e[t];return C===void 0?u():(c=!0,C)}:p=()=>{var C=e[t];return C!==void 0&&(l=void 0),C===void 0?l:C},a&&(n&yo)===0)return p;if(o){var b=e.$$legacy;return(function(C,j){return arguments.length>0?((!a||!j||b||v)&&o(j?p():C),C):p()})}var k=!1,g=Je(()=>(k=!1,p()));s(g);var E=De;return(function(C,j){if(arguments.length>0){const ne=j?s(g):a&&i?tr(C):C;return _(g,ne),k=!0,l!==void 0&&(l=ne),C}return Qn&&k||(E.f&cn)!==0?g.v:s(g)})}function hr(e){We===null&&Ks(),dr&&We.l!==null?Al(We).m.push(e):Rs(()=>{const t=x(e);if(typeof t=="function")return t})}function Tl(e){We===null&&Ks(),hr(()=>()=>x(e))}function $l(e,t,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:r})}function sa(){const e=We;return e===null&&Ks(),(t,n,r)=>{const a=e.s.$$events?.[t];if(a){const i=ts(a)?a.slice():[a],l=$l(t,n,r);for(const c of i)c.call(e.x,l);return!l.defaultPrevented}return!0}}function Al(e){var t=e.l;return t.u??={a:[],b:[],m:[]}}const Cl="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Cl);Po();const Pl=e=>e;function Ii(e){const t=e-1;return t*t*t+1}function Ca(e){const t=typeof e=="string"&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[e,"px"]}function xn(e,{delay:t=0,duration:n=400,easing:r=Pl}={}){const a=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:r,css:i=>`opacity: ${i*a}`}}function Ni(e,{delay:t=0,duration:n=400,easing:r=Ii,x:a=0,y:i=0,opacity:l=0}={}){const c=getComputedStyle(e),u=+c.opacity,o=c.transform==="none"?"":c.transform,d=u*(1-l),[f,v]=Ca(a),[p,b]=Ca(i);return{delay:t,duration:n,easing:r,css:(k,g)=>`
			transform: ${o} translate(${(1-k)*f}${v}, ${(1-k)*p}${b});
			opacity: ${u-d*g}`}}function Oi(e,{delay:t=0,duration:n=400,easing:r=Ii,start:a=0,opacity:i=0}={}){const l=getComputedStyle(e),c=+l.opacity,u=l.transform==="none"?"":l.transform,o=1-a,d=c*(1-i);return{delay:t,duration:n,easing:r,css:(f,v)=>`
			transform: ${u} scale(${1-o*v});
			opacity: ${c-d*v}
		`}}const Rl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-arrows-shuffle-2"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 4l3 3l-3 3" /><path d="M18 20l3 -3l-3 -3" /><path d="M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5" /><path d="M3 17h3a5 5 0 0 0 5 -5a5 5 0 0 1 5 -5h5" /></svg>',Ll='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-deezer"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 16.5h2v.5h-2z" /><path d="M8 16.5h2.5v.5h-2.5z" /><path d="M16 17h-2.5v-.5h2.5z" /><path d="M21.5 17h-2.5v-.5h2.5z" /><path d="M21.5 13h-2.5v.5h2.5z" /><path d="M21.5 9.5h-2.5v.5h2.5z" /><path d="M21.5 6h-2.5v.5h2.5z" /><path d="M16 13h-2.5v.5h2.5z" /><path d="M8 13.5h2.5v-.5h-2.5z" /><path d="M8 9.5h2.5v.5h-2.5z" /></svg>',zl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-compact-down"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 11l8 3l8 -3" /></svg>',Il='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-compact-left"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M13 20l-3 -8l3 -8" /></svg>',Nl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-left"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 6l-6 6l6 6" /></svg>',Pa='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-disc"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0" /><path d="M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M7 12a5 5 0 0 1 5 -5" /><path d="M12 17a5 5 0 0 0 5 -5" /></svg>',Ol='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-grip-horizontal"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M5 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M12 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M12 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M19 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M19 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /></svg>',Dl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-heart"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M19.5 12.572l-7.5 7.428l-7.5 -7.428a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572" /></svg>',Fl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-heart"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6.979 3.074a6 6 0 0 1 4.988 1.425l.037 .033l.034 -.03a6 6 0 0 1 4.733 -1.44l.246 .036a6 6 0 0 1 3.364 10.008l-.18 .185l-.048 .041l-7.45 7.379a1 1 0 0 1 -1.313 .082l-.094 -.082l-7.493 -7.422a6 6 0 0 1 3.176 -10.215z" /></svg>',Bl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-menu-2"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 6l16 0" /><path d="M4 12l16 0" /><path d="M4 18l16 0" /></svg>',ks='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-music"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 17a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /><path d="M13 17a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /><path d="M9 17v-13h10v13" /><path d="M9 8h10" /></svg>',jl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-pause"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z" /><path d="M17 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z" /></svg>',ql='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-player-play"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 4v16l13 -8z" /></svg>',Ul='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-play"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 4v16a1 1 0 0 0 1.524 .852l13 -8a1 1 0 0 0 0 -1.704l-13 -8a1 1 0 0 0 -1.524 .852z" /></svg>',Hl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-skip-back"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M19.496 4.136l-12 7a1 1 0 0 0 0 1.728l12 7a1 1 0 0 0 1.504 -.864v-14a1 1 0 0 0 -1.504 -.864z" /><path d="M4 4a1 1 0 0 1 .993 .883l.007 .117v14a1 1 0 0 1 -1.993 .117l-.007 -.117v-14a1 1 0 0 1 1 -1z" /></svg>',Yl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-skip-forward"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 5v14a1 1 0 0 0 1.504 .864l12 -7a1 1 0 0 0 0 -1.728l-12 -7a1 1 0 0 0 -1.504 .864z" /><path d="M20 4a1 1 0 0 1 .993 .883l.007 .117v14a1 1 0 0 1 -1.993 .117l-.007 -.117v-14a1 1 0 0 1 1 -1z" /></svg>',Vl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-playlist"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0" /><path d="M17 17v-13h4" /><path d="M13 5h-10" /><path d="M3 9l10 0" /><path d="M9 13h-6" /></svg>',Wl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-radio"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3l-9.371 3.749a1 1 0 0 0 -.629 .928v11.323a1 1 0 0 0 1 1h14a1 1 0 0 0 1 -1v-11a1 1 0 0 0 -1 -1h-14.5" /><path d="M4 12h16" /><path d="M7 12v-2" /><path d="M17 16v.01" /><path d="M13 16v.01" /></svg>',Ql='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-refresh"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4" /><path d="M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4" /></svg>',Xl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-repeat"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 12v-3a3 3 0 0 1 3 -3h13m-3 -3l3 3l-3 3" /><path d="M20 12v3a3 3 0 0 1 -3 3h-13m3 3l-3 -3l3 -3" /></svg>',Kl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-search"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0" /><path d="M21 21l-6 -6" /></svg>',Gl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-settings"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z" /><path d="M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /></svg>',Zl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-trash"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 7l16 0" /><path d="M10 11l0 6" /><path d="M14 11l0 6" /><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12" /><path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3" /></svg>',Jl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 8a5 5 0 0 1 0 8" /><path d="M17.7 5a9 9 0 0 1 0 14" /><path d="M6 15h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l3.5 -4.5a.8 .8 0 0 1 1.5 .5v14a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5" /></svg>',ec='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume-2"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 8a5 5 0 0 1 0 8" /><path d="M6 15h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l3.5 -4.5a.8 .8 0 0 1 1.5 .5v14a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5" /></svg>',tc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume-3"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 15h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l3.5 -4.5a.8 .8 0 0 1 1.5 .5v14a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5" /><path d="M16 10l4 4m0 -4l-4 4" /></svg>',nc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume-off"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 8a5 5 0 0 1 1.912 4.934m-1.377 2.602a5 5 0 0 1 -.535 .464" /><path d="M17.7 5a9 9 0 0 1 2.362 11.086m-1.676 2.299a9 9 0 0 1 -.686 .615" /><path d="M9.069 5.054l.431 -.554a.8 .8 0 0 1 1.5 .5v2m0 4v8a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l1.294 -1.664" /><path d="M3 3l18 18" /></svg>',rc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-x"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 6l-12 12" /><path d="M6 6l12 12" /></svg>',sc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-device-floppy"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2" /><path d="M12 14m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0" /><path d="M14 4l0 4l-6 0l0 -4" /></svg>',ac='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-file-pencil"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3v4a1 1 0 0 0 1 1h4" /><path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z" /><path d="M10 18l5 -5a1.414 1.414 0 0 0 -2 -2l-5 5v2h2z" /></svg>',Ra='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-plus"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 5l0 14" /><path d="M5 12l14 0" /></svg>',ic='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-circle-check"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0" /><path d="M9 12l2 2l4 -4" /></svg>',oc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-dots"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /></svg>',lc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-sort-descending"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 6l9 0" /><path d="M4 12l7 0" /><path d="M4 18l7 0" /><path d="M15 15l3 3l3 -3" /><path d="M18 6l0 12" /></svg>',cc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-sort-ascending"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 6l7 0" /><path d="M4 12l7 0" /><path d="M4 18l9 0" /><path d="M15 9l3 -3l3 3" /><path d="M18 6l0 12" /></svg>',w={ARTISTS:ks,ALBUMS:Pa,GENRES:ks,PLAYLISTS:Vl,RADIO:Wl,SEARCH:Kl,PLAY:Ul,PLAY_OUTLINE:ql,PAUSE:jl,PREVIOUS:Hl,NEXT:Yl,SHUFFLE:Rl,REPEAT:Xl,VOLUME_FULL:Jl,VOLUME_MEDIUM:ec,VOLUME_MUTE:tc,VOLUME_OFF:nc,HEART:Dl,HEART_FILLED:Fl,SYNC:Ql,SETTINGS:Gl,CLOSE:rc,MENU:Bl,BACK:Nl,BACK_COMPACT:Il,CHEVRON_DOWN:zl,DRAG_HANDLE:Ol,REMOVE:Zl,DEEZER:Ll,SAVE:sc,EDIT:ac,ADD:Ra,ACCEPT:ic,DOTS:oc,ADD_TO_PLAYLIST:Ra,ALBUM_LINK:Pa,ARTIST_LINK:ks,SORT_DESC:lc,SORT_ASC:cc},Tr={DEFAULT_IP:typeof window<"u"?window.location.hostname:"localhost",get MOODE_IP(){try{return typeof localStorage<"u"?localStorage.getItem("moode_ip")||this.DEFAULT_IP:this.DEFAULT_IP}catch{return this.DEFAULT_IP}}};function lr(e){if(!e||!e.image)return null;if(e.image.startsWith("http"))return e.image;let t="";return e.image==="local"?t=`${e.name}.jpg`:t=e.image,`/imagesw/radio-logos/thumbs/${encodeURIComponent(t)}`}function La(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}function uc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var xs={exports:{}},Es={exports:{}},za;function dc(){return za||(za=1,(function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t={rotl:function(n,r){return n<<r|n>>>32-r},rotr:function(n,r){return n<<32-r|n>>>r},endian:function(n){if(n.constructor==Number)return t.rotl(n,8)&16711935|t.rotl(n,24)&4278255360;for(var r=0;r<n.length;r++)n[r]=t.endian(n[r]);return n},randomBytes:function(n){for(var r=[];n>0;n--)r.push(Math.floor(Math.random()*256));return r},bytesToWords:function(n){for(var r=[],a=0,i=0;a<n.length;a++,i+=8)r[i>>>5]|=n[a]<<24-i%32;return r},wordsToBytes:function(n){for(var r=[],a=0;a<n.length*32;a+=8)r.push(n[a>>>5]>>>24-a%32&255);return r},bytesToHex:function(n){for(var r=[],a=0;a<n.length;a++)r.push((n[a]>>>4).toString(16)),r.push((n[a]&15).toString(16));return r.join("")},hexToBytes:function(n){for(var r=[],a=0;a<n.length;a+=2)r.push(parseInt(n.substr(a,2),16));return r},bytesToBase64:function(n){for(var r=[],a=0;a<n.length;a+=3)for(var i=n[a]<<16|n[a+1]<<8|n[a+2],l=0;l<4;l++)a*8+l*6<=n.length*8?r.push(e.charAt(i>>>6*(3-l)&63)):r.push("=");return r.join("")},base64ToBytes:function(n){n=n.replace(/[^A-Z0-9+\/]/ig,"");for(var r=[],a=0,i=0;a<n.length;i=++a%4)i!=0&&r.push((e.indexOf(n.charAt(a-1))&Math.pow(2,-2*i+8)-1)<<i*2|e.indexOf(n.charAt(a))>>>6-i*2);return r}};Es.exports=t})()),Es.exports}var Ms,Ia;function Na(){if(Ia)return Ms;Ia=1;var e={utf8:{stringToBytes:function(t){return e.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(e.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var n=[],r=0;r<t.length;r++)n.push(t.charCodeAt(r)&255);return n},bytesToString:function(t){for(var n=[],r=0;r<t.length;r++)n.push(String.fromCharCode(t[r]));return n.join("")}}};return Ms=e,Ms}var Ss,Oa;function vc(){if(Oa)return Ss;Oa=1,Ss=function(n){return n!=null&&(e(n)||t(n)||!!n._isBuffer)};function e(n){return!!n.constructor&&typeof n.constructor.isBuffer=="function"&&n.constructor.isBuffer(n)}function t(n){return typeof n.readFloatLE=="function"&&typeof n.slice=="function"&&e(n.slice(0,0))}return Ss}var Da;function fc(){return Da||(Da=1,(function(){var e=dc(),t=Na().utf8,n=vc(),r=Na().bin,a=function(i,l){i.constructor==String?l&&l.encoding==="binary"?i=r.stringToBytes(i):i=t.stringToBytes(i):n(i)?i=Array.prototype.slice.call(i,0):!Array.isArray(i)&&i.constructor!==Uint8Array&&(i=i.toString());for(var c=e.bytesToWords(i),u=i.length*8,o=1732584193,d=-271733879,f=-1732584194,v=271733878,p=0;p<c.length;p++)c[p]=(c[p]<<8|c[p]>>>24)&16711935|(c[p]<<24|c[p]>>>8)&4278255360;c[u>>>5]|=128<<u%32,c[(u+64>>>9<<4)+14]=u;for(var b=a._ff,k=a._gg,g=a._hh,E=a._ii,p=0;p<c.length;p+=16){var C=o,j=d,ne=f,oe=v;o=b(o,d,f,v,c[p+0],7,-680876936),v=b(v,o,d,f,c[p+1],12,-389564586),f=b(f,v,o,d,c[p+2],17,606105819),d=b(d,f,v,o,c[p+3],22,-1044525330),o=b(o,d,f,v,c[p+4],7,-176418897),v=b(v,o,d,f,c[p+5],12,1200080426),f=b(f,v,o,d,c[p+6],17,-1473231341),d=b(d,f,v,o,c[p+7],22,-45705983),o=b(o,d,f,v,c[p+8],7,1770035416),v=b(v,o,d,f,c[p+9],12,-1958414417),f=b(f,v,o,d,c[p+10],17,-42063),d=b(d,f,v,o,c[p+11],22,-1990404162),o=b(o,d,f,v,c[p+12],7,1804603682),v=b(v,o,d,f,c[p+13],12,-40341101),f=b(f,v,o,d,c[p+14],17,-1502002290),d=b(d,f,v,o,c[p+15],22,1236535329),o=k(o,d,f,v,c[p+1],5,-165796510),v=k(v,o,d,f,c[p+6],9,-1069501632),f=k(f,v,o,d,c[p+11],14,643717713),d=k(d,f,v,o,c[p+0],20,-373897302),o=k(o,d,f,v,c[p+5],5,-701558691),v=k(v,o,d,f,c[p+10],9,38016083),f=k(f,v,o,d,c[p+15],14,-660478335),d=k(d,f,v,o,c[p+4],20,-405537848),o=k(o,d,f,v,c[p+9],5,568446438),v=k(v,o,d,f,c[p+14],9,-1019803690),f=k(f,v,o,d,c[p+3],14,-187363961),d=k(d,f,v,o,c[p+8],20,1163531501),o=k(o,d,f,v,c[p+13],5,-1444681467),v=k(v,o,d,f,c[p+2],9,-51403784),f=k(f,v,o,d,c[p+7],14,1735328473),d=k(d,f,v,o,c[p+12],20,-1926607734),o=g(o,d,f,v,c[p+5],4,-378558),v=g(v,o,d,f,c[p+8],11,-2022574463),f=g(f,v,o,d,c[p+11],16,1839030562),d=g(d,f,v,o,c[p+14],23,-35309556),o=g(o,d,f,v,c[p+1],4,-1530992060),v=g(v,o,d,f,c[p+4],11,1272893353),f=g(f,v,o,d,c[p+7],16,-155497632),d=g(d,f,v,o,c[p+10],23,-1094730640),o=g(o,d,f,v,c[p+13],4,681279174),v=g(v,o,d,f,c[p+0],11,-358537222),f=g(f,v,o,d,c[p+3],16,-722521979),d=g(d,f,v,o,c[p+6],23,76029189),o=g(o,d,f,v,c[p+9],4,-640364487),v=g(v,o,d,f,c[p+12],11,-421815835),f=g(f,v,o,d,c[p+15],16,530742520),d=g(d,f,v,o,c[p+2],23,-995338651),o=E(o,d,f,v,c[p+0],6,-198630844),v=E(v,o,d,f,c[p+7],10,1126891415),f=E(f,v,o,d,c[p+14],15,-1416354905),d=E(d,f,v,o,c[p+5],21,-57434055),o=E(o,d,f,v,c[p+12],6,1700485571),v=E(v,o,d,f,c[p+3],10,-1894986606),f=E(f,v,o,d,c[p+10],15,-1051523),d=E(d,f,v,o,c[p+1],21,-2054922799),o=E(o,d,f,v,c[p+8],6,1873313359),v=E(v,o,d,f,c[p+15],10,-30611744),f=E(f,v,o,d,c[p+6],15,-1560198380),d=E(d,f,v,o,c[p+13],21,1309151649),o=E(o,d,f,v,c[p+4],6,-145523070),v=E(v,o,d,f,c[p+11],10,-1120210379),f=E(f,v,o,d,c[p+2],15,718787259),d=E(d,f,v,o,c[p+9],21,-343485551),o=o+C>>>0,d=d+j>>>0,f=f+ne>>>0,v=v+oe>>>0}return e.endian([o,d,f,v])};a._ff=function(i,l,c,u,o,d,f){var v=i+(l&c|~l&u)+(o>>>0)+f;return(v<<d|v>>>32-d)+l},a._gg=function(i,l,c,u,o,d,f){var v=i+(l&u|c&~u)+(o>>>0)+f;return(v<<d|v>>>32-d)+l},a._hh=function(i,l,c,u,o,d,f){var v=i+(l^c^u)+(o>>>0)+f;return(v<<d|v>>>32-d)+l},a._ii=function(i,l,c,u,o,d,f){var v=i+(c^(l|~u))+(o>>>0)+f;return(v<<d|v>>>32-d)+l},a._blocksize=16,a._digestsize=16,xs.exports=function(i,l){if(i==null)throw new Error("Illegal argument "+i);var c=e.wordsToBytes(a(i,l));return l&&l.asBytes?c:l&&l.asString?r.bytesToString(c):e.bytesToHex(c)}})()),xs.exports}var hc=fc();const pc=uc(hc),Fa=ze("Disconnected"),Ds=ze(null);let Ts;function Fe(e,t="info"){Ds.set({text:e,type:t}),Ts&&clearTimeout(Ts),Ts=setTimeout(()=>{Ds.set(null)},3e3)}const dt=ze({state:"stop",volume:50,elapsed:0,duration:0,random:!1,repeat:!1,bitrate:0,format:""}),Zt=ze({title:"Not Playing",artist:"",album:"",file:"",stationName:null}),Zr=ze(!1),Ur=ze(!1),Fs=ze(!1),Bs=ze(!1),xt=ze("library"),zr=ze(null),Ot=ze(!1),_c=localStorage.getItem("sidebarCollapsed")==="true",js=ze(_c);js.subscribe(e=>{typeof localStorage<"u"&&localStorage.setItem("sidebarCollapsed",String(e))});const Mn=ze([]),aa=ze([]),nr=ze([]),mn=ze(new Set),rt=ze(!1),At=ze([{view:"root"}]),$r=ze([]),Di=ze(0),yr=ze(""),Fi=ze({});function gc(e,t){Fi.update(n=>({...n,[e]:t}))}function mc(e){return Le(Fi)[e]||0}const ia=ze({isOpen:!1,track:null,context:{type:"general",playlistName:null,index:null},x:0,y:0,triggerRect:null});function bc(){if(typeof navigator<"u"&&navigator.vibrate)try{navigator.vibrate(70)}catch{}}function Jr(e,t,n={}){if(!t)return;bc();let r=0,a=0,i=null,l=e.currentTarget;!l&&e.target&&e.target.closest&&(l=e.target.closest("button")||e.target),l&&l.getBoundingClientRect&&(i=l.getBoundingClientRect());const c=e.detail?.originalEvent||e;c.touches&&c.touches.length>0?(r=c.touches[0].clientX,a=c.touches[0].clientY):c.clientX&&(r=c.clientX,a=c.clientY);const u={type:"general",playlistName:null,index:null,...n};ia.set({isOpen:!0,track:t,context:u,x:r,y:a,triggerRect:i})}function Vt(){ia.set({isOpen:!1,track:null,context:{},x:0,y:0,triggerRect:null})}let qs=null,Us=null;function wc(e){Us=e}function kn(e,t=null){t&&(qs=t),Us?Us(e,t):console.warn("Router callback not set!")}function yc(){const e=qs;return qs=null,e}function kc(){window.history.back()}function cr(e,t=[],n=null){if(!e||!e.file)return"/images/default_cover.png";if(Bi(e.file)||e.genre==="Radio")return e.image?lr(e):ji(e,t,n)||"/images/radio_placeholder.png";let r=e.file.startsWith("/")?e.file.slice(1):e.file;return`/coverart.php/${encodeURI(r)}`}function Ar(e,t="sm",n=[],r=null){if(!e||e.file&&(Bi(e.file)||e.genre==="Radio"||Array.isArray(e)))return e&&e.image?lr(e):ji(e,n,r)||"/images/radio_icon.png";if(!e.file)return"/images/default_icon.png";if(e.thumbHash){const a=t==="md"?"":"_sm";return`/imagesw/thmcache/${e.thumbHash}${a}.jpg`}try{const a=e.file.lastIndexOf("/"),i=a===-1?".":e.file.substring(0,a);return`/imagesw/thmcache/${pc(i)}${t==="md"?"":"_sm"}.jpg`}catch{let i=e.file.startsWith("/")?e.file.slice(1):e.file;return`/coverart.php/${encodeURI(i)}`}}function Bi(e){return e?e.startsWith("http")||e.includes("://")||e.includes("RADIO"):!1}function ji(e,t,n){const r=u=>(u||"").toString().toLowerCase().replace(/[^a-z0-9]/g,""),a=r(e?.title),i=r(e?.stationName),l=r(n);if(t&&t.length>0){const u=t.find(o=>{const d=r(o.name);return d?d===i||d===l||a&&d===a||a&&a.includes(d)&&d.length>3:!1});if(u)return lr(u)}const c=e?.stationName||n;return c?lr({name:c,image:"local"}):null}zi([Zt,Mn,zr],([e,t,n])=>cr(e,t,n));zi(Zt,e=>!e||!e.file||e.file.startsWith("http")?null:`/coverart.php/${encodeURI(e.file)}`);const Ve={NAME:"MoodePlayerDB",STORE_NAME:"music",VERSION:3},xc={SYNC:"/wave-api.php",STATIONS:e=>"/wave-api.php?action=stations",COVER_ART:e=>`/coverart.php?u=${encodeURIComponent(e)}`,RADIO_LOGOS:e=>`/imagesw/radio-logos/thumbs/${e}`},bn={open(){return new Promise((e,t)=>{const n=indexedDB.open(Ve.NAME,Ve.VERSION);n.onupgradeneeded=r=>{const a=r.target.result,i=r.target.transaction;let l;a.objectStoreNames.contains(Ve.STORE_NAME)?l=i.objectStore(Ve.STORE_NAME):l=a.createObjectStore(Ve.STORE_NAME,{keyPath:"file"}),l.indexNames.contains("artist")||l.createIndex("artist","artist",{unique:!1}),l.indexNames.contains("album")||l.createIndex("album","album",{unique:!1}),l.indexNames.contains("genre")||l.createIndex("genre","genre",{unique:!1}),l.indexNames.contains("album_artist")||l.createIndex("album_artist","album_artist",{unique:!1})},n.onsuccess=()=>e(n.result),n.onerror=()=>t(n.error)})},async clear(){const e=await this.open();return new Promise((t,n)=>{const r=e.transaction(Ve.STORE_NAME,"readwrite");r.objectStore(Ve.STORE_NAME).clear(),r.oncomplete=()=>t(),r.onerror=()=>n(r.error)})},async bulkAdd(e){const t=await this.open();return new Promise((n,r)=>{const a=t.transaction(Ve.STORE_NAME,"readwrite"),i=a.objectStore(Ve.STORE_NAME);e.forEach(l=>i.put(l)),a.oncomplete=()=>n(),a.onerror=()=>r(a.error)})},async getFilesMap(e){if(!e||e.length===0)return new Map;const t=await this.open();return new Promise(n=>{const a=t.transaction(Ve.STORE_NAME,"readonly").objectStore(Ve.STORE_NAME),i=new Map;let l=0;e.forEach(c=>{const u=c.normalize("NFC").trim(),o=a.get(u);o.onsuccess=d=>{d.target.result&&i.set(c,d.target.result),l++,l===e.length&&n(i)},o.onerror=()=>{l++,l===e.length&&n(i)}})})},async getArtists(){const e=await this.open();return new Promise((t,n)=>{const a=e.transaction(Ve.STORE_NAME,"readonly").objectStore(Ve.STORE_NAME),i=new Map,l=a.openCursor();l.onsuccess=c=>{const u=c.target.result;if(u){const o=u.value,d=o.album_artist||o.artist;d&&!i.has(d)&&i.set(d,{name:d,file:o.file,thumbHash:o.thumbHash}),u.continue()}else{const o=Array.from(i.values()).sort((d,f)=>d.name.localeCompare(f.name,void 0,{sensitivity:"base"}));t(o)}},l.onerror=()=>n(l.error)})},async getAlbums(){const e=await this.open();return new Promise((t,n)=>{const a=e.transaction(Ve.STORE_NAME,"readonly").objectStore(Ve.STORE_NAME).index("album"),i=[],l=a.openCursor(null,"nextunique");l.onsuccess=c=>{const u=c.target.result;if(u){const o=u.value;i.push({name:o.album,artist:o.album_artist||o.artist,file:o.file,thumbHash:o.thumbHash,qualityBadge:o.qualityBadge,year:o.year||0}),u.continue()}else t(i)},l.onerror=()=>n(l.error)})},async getArtistAlbums(e){if(!e)return[];const t=await this.open(),n=e.normalize("NFC").trim();return new Promise((r,a)=>{const l=t.transaction(Ve.STORE_NAME,"readonly").objectStore(Ve.STORE_NAME),c=new Promise(o=>{l.indexNames.contains("album_artist")?l.index("album_artist").getAll(IDBKeyRange.only(n)).onsuccess=d=>o(d.target.result):o([])}),u=new Promise(o=>{l.index("artist").getAll(IDBKeyRange.only(n)).onsuccess=d=>o(d.target.result)});Promise.all([c,u]).then(([o,d])=>{const f=[...o,...d],v=[],p=new Set;f.forEach(b=>{p.has(b.album)||(p.add(b.album),v.push({name:b.album,artist:b.album_artist||b.artist,file:b.file,thumbHash:b.thumbHash,qualityBadge:b.qualityBadge,year:b.year||0}))}),r(v)}).catch(o=>a(o))})},async getAlbumTracks(e,t=null){const n=await this.open(),r=e.normalize("NFC").trim(),a=t?t.normalize("NFC").trim():null;return console.log(`[DB] getAlbumTracks called. Album: "${r}", FilterArtist: "${a}"`),new Promise((i,l)=>{const u=n.transaction(Ve.STORE_NAME,"readonly").objectStore(Ve.STORE_NAME).index("album"),o=IDBKeyRange.only(r),d=u.getAll(o);d.onsuccess=()=>{let f=d.result;if(console.log(`[DB] Found ${f.length} raw tracks for album "${r}"`),a){const v=f.length;f=f.filter(p=>{const b=(p.artist||"").normalize("NFC").trim(),k=(p.album_artist||"").normalize("NFC").trim();return b===a||k===a}),console.log(`[DB] After artist filter: ${f.length} tracks (Removed ${v-f.length})`)}else console.log("[DB] No artist filter provided. Returning all tracks.");f.sort((v,p)=>{const b=parseInt(v.disc||1),k=parseInt(p.disc||1);if(b!==k)return b-k;const g=parseInt(v.track||0),E=parseInt(p.track||0);return g-E}),i(f)},d.onerror=()=>l(d.error)})},async getGenres(){const e=await this.open();return new Promise((t,n)=>{const a=e.transaction(Ve.STORE_NAME,"readonly").objectStore(Ve.STORE_NAME).index("genre"),i=[],l=a.openKeyCursor(null,"nextunique");l.onsuccess=c=>{const u=c.target.result;u?(i.push(u.key),u.continue()):t(i)},l.onerror=()=>n(l.error)})},async getGenreTracks(e){const t=await this.open(),n=e.normalize("NFC").trim();return new Promise((r,a)=>{const c=t.transaction(Ve.STORE_NAME,"readonly").objectStore(Ve.STORE_NAME).index("genre").getAll(IDBKeyRange.only(n));c.onsuccess=()=>r(c.result),c.onerror=()=>a(c.error)})},async search(e){if(!e)return[];const t=e.toLowerCase().normalize("NFC").trim(),n=await this.open();return new Promise((r,a)=>{const l=n.transaction(Ve.STORE_NAME,"readonly").objectStore(Ve.STORE_NAME),c=[],u=100,o=l.openCursor();o.onsuccess=d=>{const f=d.target.result;if(f){const v=f.value;if((v.title&&v.title.toLowerCase().includes(t)||v.artist&&v.artist.toLowerCase().includes(t)||v.album&&v.album.toLowerCase().includes(t)||v.album_artist&&v.album_artist.toLowerCase().includes(t))&&c.push(v),c.length>=u){r(c);return}f.continue()}else r(c)},o.onerror=()=>a(o.error)})}};var Ec=M('<div class="skeleton svelte-tl058d"></div>');function En(e,t){let n=st(t,"width",8,"100%"),r=st(t,"height",8,"20px"),a=st(t,"radius",8,"4px"),i=st(t,"style",8,"");var l=Ec();de(()=>Ke(l,`width: ${n()??""}; height: ${r()??""}; border-radius: ${a()??""}; ${i()??""}`)),m(e,l)}var Mc=M('<div class="skel svelte-1b8que2"><!></div>'),Sc=M('<img loading="lazy"/>'),Tc=M('<div class="loader svelte-1b8que2"><!> <!> <!></div>');function Un(e,t){ht(t,!1);let n=st(t,"src",8),r=st(t,"alt",8,""),a=st(t,"radius",8,"0px");const i=sa();let l=$("loading");function c(){_(l,"loaded")}function u(g){i("error",g),_(l,"error")}ie(()=>H(n()),()=>{n()?_(l,"loading"):_(l,"error")}),qt(),yt();var o=Tc(),d=h(o);{var f=g=>{var E=Mc(),C=h(E);En(C,{width:"100%",height:"100%",get radius(){return a()}}),Rt(2,E,()=>xn,()=>({duration:200})),m(g,E)};q(d,g=>{s(l)==="loading"&&g(f)})}var v=y(d,2);{var p=g=>{var E=Sc();let C;de(()=>{bt(E,"src",n()),bt(E,"alt",r()),Ke(E,`border-radius: ${a()??""}`),C=Oe(E,1,"svelte-1b8que2",null,C,{vis:s(l)==="loaded"})}),z("load",E,c),z("error",E,u),m(g,E)};q(v,g=>{n()&&s(l)!=="error"&&g(p)})}var b=y(v,2);{var k=g=>{var E=Xe(),C=$e(E);qr(C,t,"fallback",{}),m(g,E)};q(b,g=>{s(l)==="error"&&g(k)})}de(()=>Ke(o,`border-radius: ${a()??""}`)),m(e,o),pt()}class $c{constructor(){this.socket=null,this.queue=[],this.isProcessing=!1,this.reconnectTimer=null,this.watchdogTimer=null,this._buffer=""}get isConnected(){return this.socket&&this.socket.readyState===WebSocket.OPEN}connect(){if(this.socket&&(this.socket.readyState===WebSocket.CONNECTING||this.socket.readyState===WebSocket.OPEN))return;this.reconnectTimer&&clearTimeout(this.reconnectTimer);let t=Tr.MOODE_IP||window.location.hostname;t=t.replace(/^https?:\/\//,"").split(":")[0].split("/")[0];const n=Tr.WS_PORT||"8080",r=`ws://${t}:${n}`;console.log("[MPD] Connecting to:",r);try{this.socket=new WebSocket(r,["binary"])}catch(a){console.error("[MPD] Connection Error:",a),this.reconnectTimer=setTimeout(()=>this.connect(),5e3);return}this.socket.onopen=()=>{console.log("[MPD] Connected"),Fa.set("Connected"),Fe("Connected to Moode","success"),this._processQueue()},this.socket.onmessage=a=>this._handleMessage(a),this.socket.onclose=a=>{console.warn("[MPD] Socket closed",a.code,a.reason),Fa.set("Disconnected"),this._cleanup(),this.reconnectTimer=setTimeout(()=>this.connect(),3e3)},this.socket.onerror=a=>{console.error("[MPD] Socket error",a)}}send(t){return new Promise((n,r)=>{this.queue.push({cmd:t,resolve:n,reject:r}),this._processQueue()})}_cleanup(){for(this.isProcessing=!1,this._buffer="",this.watchdogTimer&&clearTimeout(this.watchdogTimer);this.queue.length>0;){const{reject:t}=this.queue.shift();t(new Error("Connection lost"))}}async _processQueue(){if(this.isProcessing||this.queue.length===0||!this.isConnected)return;this.isProcessing=!0;const{cmd:t}=this.queue[0];this.watchdogTimer&&clearTimeout(this.watchdogTimer),this.watchdogTimer=setTimeout(()=>{console.error("[MPD] Watchdog timeout"),this.socket&&this.socket.close()},2e4);try{const n=t.endsWith(`
`)?t:t+`
`;this.socket.send(new TextEncoder().encode(n))}catch(n){console.error("[MPD] Send error",n),this._cleanup()}}async _handleMessage(t){let n=t.data;n instanceof Blob&&(n=await n.text()),this.watchdogTimer&&(clearTimeout(this.watchdogTimer),this.watchdogTimer=null),this._buffer+=n;const r=this._buffer.endsWith(`
OK
`)||this._buffer===`OK
`,a=this._buffer.startsWith("ACK");if(r||a){const i=this._buffer;this._buffer="";const l=this.queue.shift();if(this.isProcessing=!1,l)if(a)console.error(`[MPD] Error: ${i.trim()}`),l.reject(new Error(i.trim()));else{const c=i.replace(/\nOK\n$/,"").replace(/^OK\n$/,"");l.resolve(c)}this._processQueue()}else{if(!this.queue.length)return;this.watchdogTimer=setTimeout(()=>{console.error("[MPD] Watchdog timeout receiving large data"),this.socket&&this.socket.close()},2e4)}}}const xe=new $c,on={parseKeyValue(e){const t={};if(!e)return t;const n=e.split(`
`);for(const r of n){const a=r.indexOf(": ");if(a===-1)continue;const i=r.substring(0,a).toLowerCase(),l=r.substring(a+2);t[i]=l}return t},parseStatus(e){const t=this.parseKeyValue(e);let n="";if(t.audio){const r=t.audio.split(":");r[1]&&(n=`${r[1]}-bit`)}return{state:t.state||"stop",volume:parseInt(t.volume)||0,elapsed:parseFloat(t.elapsed)||0,duration:parseFloat(t.duration)||0,random:t.random==="1",repeat:t.repeat==="1",songId:parseInt(t.songid)||-1,playlistLength:parseInt(t.playlistlength)||0,bitrate:parseInt(t.bitrate)||0,format:n,playlistVersion:parseInt(t.playlist)||0}},parseCurrentSong(e){const t=this.parseKeyValue(e);return this._normalizeTrack(t)},parsePlaylists(e){const t=e.split(`
`),n=[];let r=null;for(const a of t)a.startsWith("playlist: ")?(r&&n.push(r),r={playlist:a.substring(10)}):a.startsWith("Last-Modified: ")&&r&&(r["last-modified"]=a.substring(15));return r&&n.push(r),n.map(a=>({name:a.playlist,lastModified:a["last-modified"]}))},parseTracks(e){const t=[];let n=null,r=0,a=e.indexOf(`
`,r);for(;a!==-1;){const i=e.substring(r,a),l=i.indexOf(": ");if(l!==-1){const c=i.substring(0,l).toLowerCase(),u=i.substring(l+2);c==="file"?(n&&t.push(this._normalizeTrack(n)),n={file:u}):n&&(n[c]=u)}r=a+1,a=e.indexOf(`
`,r)}return n&&t.push(this._normalizeTrack(n)),t},_normalizeTrack(e){const t=e.file||e.File||"",n=e.Title||e.title||e.Name||e.name||t.split("/").pop()||"Unknown";return{file:t,title:n,artist:e.Artist||e.artist||"Unknown Artist",album:e.Album||e.album||"Unknown Album",genre:e.Genre||e.genre||"Unknown",time:parseFloat(e.Time||e.time||0),track:e.Track||e.track||"",id:e.Id||e.id,stationName:e.name||e.Name||null}}},Ac=1e3,Cc=250;let Hr=null,kr=null,Yr=0,An=1,es=!0,ln=!1,Pn=0,Zn=null;function Vr(e){return e?String(e).normalize("NFC").replace(/\\/g,"\\\\").replace(/"/g,'\\"'):""}function Pc(){Rc(),es=!0,ln=!1,Pn=0,rt.set(!1),Wt(),Hr=setInterval(()=>{xe.isConnected&&!xe.isProcessing&&Wt()},Ac)}function Rc(){Hr&&(clearInterval(Hr),Hr=null),oa()}async function Wt(){try{const e=await xe.send("status"),t=await xe.send("currentsong"),n=on.parseStatus(e),r=on.parseCurrentSong(t);zc(n,r);const a=Le(Di);if(Le(rt))return;(n.playlistLength>0&&n.playlistVersion!==a||n.playlistLength>0&&Le($r).length===0)&&Lc(n.playlistVersion)}catch{}}async function Lc(e){if(!Le(rt))try{const t=await xe.send("playlistinfo");if(Le(rt))return;const n=on.parseTracks(t),r=n.map(l=>l.file).filter(l=>l&&!l.startsWith("http"));let a=new Map;if(r.length>0)try{a=await bn.getFilesMap(r)}catch(l){console.warn("Failed to hydrate queue from DB",l)}const i=n.map(l=>{const c=(l.file||"").normalize("NFC"),u=a.get(c);return u?{...l,thumbHash:u.thumbHash,qualityBadge:u.qualityBadge,title:l.title||u.title,artist:l.artist||u.artist,album:l.album||u.album,_uid:String(l.id||l.pos+l.file)}:{...l,_uid:String(l.id||l.pos+l.file)}});$r.set(i),Di.set(e)}catch(t){console.error("Queue sync error",t)}}function zc(e,t){const n=Le(Zt),r=Le(Mn),a=t.file&&t.file.startsWith("http");if(a){const i=o=>(o||"").toString().toLowerCase().replace(/[^a-z0-9]/g,""),l=i(t.file),c=i(t.title),u=r.find(o=>{const d=i(o.station||o.file||o.url||(Array.isArray(o)?o[1]:"")),f=i(o.name||(Array.isArray(o)?o[0]:""));return d&&l.includes(d)||f&&c.includes(f)});u?t.stationName=u.name||u[0]:n.stationName&&n.file===t.file&&(t.stationName=n.stationName)}Zt.set(t),dt.update(i=>{const l=e.state==="play",c=performance.now();if(e.state==="pause"||i.state==="pause")return Fr(!1),c<Pn?i:e;if(t.file!==n.file||es)return es=!1,ln=!1,An=1,a&&(e.elapsed=0),Fr(l&&!a),e;if(c<Pn)return i;if(ln)return ln=!1,An=1,Fr(l&&!a),e;if(l&&!a){const u=e.elapsed-i.elapsed;if(Math.abs(u)>2)return An=1,e;if(Math.abs(u)<.05)An=1;else{let d=u/1.5;An=Math.max(.5,Math.min(1.5,1+d))}return{...e,elapsed:i.elapsed}}return Fr(!1),e})}function Fr(e){e?Hs():oa()}function Hs(){kr||es||(Yr=performance.now(),kr=setInterval(()=>{const e=performance.now();let t=(e-Yr)/1e3;t>2&&(t=0),Yr=e,dt.update(n=>{if(n.state!=="play")return n;let r=n.elapsed+t*An;return n.duration>0&&r>n.duration&&(r=n.duration),{...n,elapsed:r}})},Cc))}function oa(){kr&&(clearInterval(kr),kr=null),An=1,Yr=0}async function Ba(e,t=!1){if(!e||e.length===0)return;rt.set(!0),ln=!0;const n=5;try{for(let r=0;r<e.length;r+=n){const a=e.slice(r,r+n),i=["command_list_begin"];a.forEach(l=>{i.push(`add "${Vr(l.file)}"`)}),i.push("command_list_end"),await xe.send(i.join(`
`))}t?(await xe.send("play 0"),Fe(`Playing ${e.length} tracks`,"success")):Fe(`Added ${e.length} tracks`,"success")}catch(r){console.error("[Player] Bulk Action Failed:",r),Fe("Error adding tracks","error")}finally{setTimeout(()=>{rt.set(!1),Wt()},1500)}}const Ft={async togglePlay(){const t=Le(dt).state==="play";Pn=performance.now()+800,dt.update(n=>{const r=t?"pause":"play";return r==="play"?Hs():oa(),{...n,state:r}}),await xe.send(t?"pause 1":"play"),setTimeout(Wt,900)},async next(){ln=!0,Pn=0,await xe.send("next"),Wt()},async previous(){ln=!0,Pn=0,dt.update(e=>({...e,elapsed:0})),await xe.send("previous"),Wt()},async setVolume(e){dt.update(t=>({...t,volume:e})),await xe.send(`setvol ${e}`)},async seek(e){ln=!0,Pn=performance.now()+500,dt.update(t=>({...t,elapsed:e})),await xe.send(`seekcur ${e}`),setTimeout(Wt,600)},async toggleRandom(){const t=!Le(dt).random;dt.update(n=>({...n,random:t})),await xe.send(`random ${t?1:0}`)},async toggleRepeat(){const t=!Le(dt).repeat;dt.update(n=>({...n,repeat:t})),await xe.send(`repeat ${t?1:0}`)},async playUri(e,t={}){rt.set(!0);const n=Vr(e);ln=!0,dt.update(r=>({...r,state:"play",elapsed:0})),Zt.set({title:t.title||e.split("/").pop(),artist:t.artist||"",file:e}),Hs();try{await xe.send("stop"),await xe.send("clear"),await xe.send(`add "${n}"`),await xe.send("play")}catch(r){console.error("Play error",r),Fe("Failed to play","error")}setTimeout(()=>{rt.set(!1),Wt()},1200)},async addToQueue(e){try{await xe.send(`add "${Vr(e)}"`),Fe("Added to queue","success")}catch(t){console.error("Add queue error",t),Fe("Failed to add","error")}},async playNext(e){rt.set(!0);const t=Vr(e);try{const n=await xe.send("currentsong"),r=parseInt(on.parseKeyValue(n).pos||-1);if(r===-1)rt.set(!1),await this.playUri(e);else{const a=await xe.send(`addid "${t}"`),i=parseInt(on.parseKeyValue(a).id);isNaN(i)||(await xe.send(`moveid ${i} ${r+1}`),Fe("Will play next","success")),setTimeout(()=>rt.set(!1),1e3)}}catch(n){console.error("Play Next error",n),Fe("Failed to set next","error"),rt.set(!1)}},async removeFromQueue(e){rt.set(!0),Zn&&clearTimeout(Zn);try{$r.update(t=>{const n=[...t];return n.splice(e,1),n}),await xe.send(`delete ${e}`)}catch{Fe("Failed to remove","error"),rt.set(!1);return}Zn=setTimeout(()=>{rt.set(!1)},1e3)},async moveTrack(e,t){if(e!==t){rt.set(!0),Zn&&clearTimeout(Zn);try{await xe.send(`move ${e} ${t}`)}catch(n){console.error("Move failed",n),Fe("Move failed","error"),rt.set(!1),Wt();return}Zn=setTimeout(()=>{rt.set(!1),Wt()},2e3)}},async playAllTracks(e){if(!(!e||e.length===0))try{await xe.send("stop"),await xe.send("clear"),await Ba(e,!0)}catch(t){console.error(t)}},async addAllToQueue(e){!e||e.length===0||await Ba(e,!1)},async saveQueue(e){if(!e)return;const t=e.replace(/"/g,'\\"');try{await xe.send(`save "${t}"`),Fe(`Playlist "${e}" saved`,"success")}catch(n){if(n.message.includes("exist")){if(confirm(`Playlist "${e}" exists. Overwrite?`))try{await xe.send(`rm "${t}"`),await xe.send(`save "${t}"`),Fe(`Playlist "${e}" overwritten`,"success")}catch{Fe("Failed to overwrite","error")}}else console.error(n)}}};function qi(e){return new Worker("/assets/sync.worker-CxDcqL9_.js",{name:e?.name})}const _r="Favorites";let ja=Promise.resolve();const Jn=e=>e?e.toLowerCase().replace(/^https?:\/\//,"").replace(/^www\./,"").split("?")[0].replace(/\/$/,""):"";function Ic(e){if(e==="Favorites")return"linear-gradient(135deg, hsl(348, 95%, 58%), hsl(348, 90%, 40%))";let t=0;for(let r=0;r<e.length;r++)t=e.charCodeAt(r)+((t<<5)-t);const n=Math.abs(t%360);return`linear-gradient(135deg, hsl(${n}, 60%, 40%), hsl(${(n+40)%360}, 60%, 30%))`}const Hn={async syncLibrary(){if(Le(Ot))return;Ot.set(!0);const e=new qi;e.postMessage({type:"START_SYNC",payload:{url:`http://${Tr.MOODE_IP}/wave-api.php`}}),e.onmessage=t=>{const{type:n,count:r}=t.data;n==="DONE"&&(Fe(`Library updated: ${r} tracks`,"success"),Ot.set(!1),e.terminate()),n==="ERROR"&&(Fe("Sync Failed","error"),Ot.set(!1),e.terminate())},e.onerror=()=>{Ot.set(!1),e.terminate()}},async loadPlaylists(){Fs.set(!0);try{const e=await xe.send("listplaylists"),n=on.parsePlaylists(e).map(r=>({...r,color:Ic(r.name)}));aa.set(n)}catch(e){console.error(e)}finally{Fs.set(!1)}},async openPlaylistDetails(e){if(!e)return;Bs.set(!0);const t=e.replace(/"/g,'\\"');try{const n=await xe.send(`listplaylistinfo "${t}"`),r=on.parseTracks(n),a=r.map(c=>c.file).filter(c=>c&&!c.startsWith("http"));let i=new Map;if(a.length>0)try{i=await bn.getFilesMap(a)}catch(c){console.warn("Failed to hydrate playlist from DB",c)}const l=r.map(c=>{const u=i.get(c.file);return u?{...c,thumbHash:u.thumbHash,qualityBadge:u.qualityBadge,title:c.title||u.title,artist:c.artist||u.artist,album:c.album||u.album,_uid:La()}:{...c,_uid:La()}});nr.set(l)}catch(n){console.error(n),Fe("Could not load playlist","error")}finally{Bs.set(!1)}},async movePlaylistTrack(e,t,n){const r=e.replace(/"/g,'\\"');try{await xe.send(`playlistmove "${r}" ${t} ${n}`)}catch{Fe("Move failed","error")}},async removeFromPlaylist(e,t){const n=e.replace(/"/g,'\\"');try{await xe.send(`playlistdelete "${n}" ${t}`),Fe("Track removed","success")}catch{Fe("Delete failed","error")}},async loadFavorites(){try{const e=await xe.send(`listplaylistinfo "${_r}"`),t=on.parseTracks(e),n=new Set;t.forEach(r=>{r.file&&n.add(r.file)}),mn.set(n)}catch{mn.set(new Set)}},async toggleFavorite(e){if(!e||!e.file)return;const t=e.file,n=t.replace(/"/g,'\\"'),r=t.startsWith("http"),a=Le(mn);let i=a.has(t);if(!i&&r){const l=Jn(t);for(const c of a)if(Jn(c)===l){i=!0;break}}mn.update(l=>{const c=new Set(l);if(i){if(c.delete(t),r){const u=Jn(t);for(const o of c)Jn(o)===u&&c.delete(o)}}else c.add(t);return c}),ja=ja.then(async()=>{try{const l=await xe.send(`listplaylistinfo "${_r}"`),c=on.parseTracks(l);let u=[];if(c.forEach((o,d)=>{let f=!1;(o.file===t||r&&Jn(o.file)===Jn(t)||r&&(o.file.includes(t)||t.includes(o.file)))&&(f=!0),f&&u.push(d)}),i){if(u.length>0){u.sort((o,d)=>d-o);for(const o of u)await xe.send(`playlistdelete "${_r}" ${o}`);Fe("Removed from Favorites","info")}}else u.length>0?console.log("[Fav] Track already exists. Skipping."):(await xe.send(`playlistadd "${_r}" "${n}"`),c.length>0&&await xe.send(`playlistmove "${_r}" ${c.length} 0`),Fe("Added to Favorites","success"))}catch(l){console.error("Fav action failed",l),Fe("Action failed","error")}finally{await this.loadFavorites()}})}};function Ui(){xe.connect(),Pc(),Hn.loadPlaylists(),Hn.loadFavorites()}function la(e){return xe.send(e)}const{togglePlay:cs,toggleRandom:Nn,toggleRepeat:On,setVolume:Cr,seek:ca,addToQueue:Nc,playNext:Oc,removeFromQueue:Dc,moveTrack:Fc,saveQueue:Bc,playAllTracks:Hi,addAllToQueue:Yi}=Ft,{syncLibrary:jc,loadRadioStations:qc,loadPlaylists:ua,openPlaylistDetails:Vi,toggleFavorite:Wi,loadFavorites:Uc,removeFromPlaylist:Qi,movePlaylistTrack:Xi}=Hn;function Pr(e){const t=Le(Zt),n=Le(Mn),r=Le(zr);if(t.file&&t.file.startsWith("http")&&n.length>0&&(e==="next"||e==="previous")){let i=n.findIndex(c=>c.name===r);i===-1&&(i=0);let l;e==="next"?(l=i+1,l>=n.length&&(l=0)):(l=i-1,l<0&&(l=n.length-1)),da(n[l])}else e==="next"&&Ft.next(),e==="previous"&&Ft.previous()}function da(e){if(!e)return;zr.set(e.name);const t=e[1]||e.station||e.file||e.url;t&&Ft.playUri(t,{title:e.name,artist:e.genre||"Radio Stream",stationName:e.name})}function va(e){e&&(zr.set(null),Ft.playUri(e.file,{title:e.title,artist:e.artist,album:e.album,stationName:null}))}async function Ys(e,t=0){if(!e)return;zr.set(null);const n=e.replace(/"/g,'\\"');try{await xe.send("stop"),await xe.send("clear"),await xe.send(`load "${n}"`),await xe.send(`play ${t}`)}catch(r){console.error("Failed to play playlist context",r)}}const Hc=Object.freeze(Object.defineProperty({__proto__:null,addAllToQueue:Yi,addToQueue:Nc,connect:Ui,loadFavorites:Uc,loadPlaylists:ua,loadRadioStations:qc,movePlaylistTrack:Xi,moveTrack:Fc,nav:Pr,openPlaylistDetails:Vi,playAllTracks:Hi,playNext:Oc,playPlaylistContext:Ys,playStation:da,playTrackOptimistic:va,removeFromPlaylist:Qi,removeFromQueue:Dc,runMpdRequest:la,saveQueue:Bc,seek:ca,setVolume:Cr,syncLibrary:jc,toggleFavorite:Wi,togglePlay:cs,toggleRandom:Nn,toggleRepeat:On},Symbol.toStringTag,{value:"Module"}));function Ki(e,t=2e3){let n;const r=i=>{i.type==="mousedown"&&i.button!==0||(n=setTimeout(()=>{e.dispatchEvent(new CustomEvent("longpress",{detail:{originalEvent:i}}))},t))},a=()=>{clearTimeout(n)};return e.addEventListener("mousedown",r),e.addEventListener("touchstart",r,{passive:!0}),e.addEventListener("mouseup",a),e.addEventListener("mouseleave",a),e.addEventListener("touchend",a),e.addEventListener("touchcancel",a),e.addEventListener("touchmove",a),{destroy(){e.removeEventListener("mousedown",r),e.removeEventListener("touchstart",r),e.removeEventListener("mouseup",a),e.removeEventListener("mouseleave",a),e.removeEventListener("touchend",a),e.removeEventListener("touchcancel",a),e.removeEventListener("touchmove",a)}}}var Yc=M('<div class="drag-handle svelte-5cs2hz" title="Drag to reorder"><div class="icon-small svelte-5cs2hz"><!></div></div>'),Vc=M('<div class="eq-anim svelte-5cs2hz"><span class="bar b1 svelte-5cs2hz"></span> <span class="bar b2 svelte-5cs2hz"></span> <span class="bar b3 svelte-5cs2hz"></span></div>'),Wc=M('<div class="icon-small svelte-5cs2hz"><!></div>'),Qc=M('<div class="icon-small svelte-5cs2hz"><!></div>'),Xc=M('<div class="icon-small accent svelte-5cs2hz"><!></div>'),Kc=M('<span class="num svelte-5cs2hz"> </span>'),Gc=M('<button class="num-box svelte-5cs2hz"><!></button>'),Zc=M('<div slot="fallback" class="icon-ph svelte-5cs2hz"><!></div>'),Jc=M('<span class="meta-tag quality svelte-5cs2hz"> </span>'),eu=M('<button class="btn-icon small remove svelte-5cs2hz"><!></button>'),tu=M('<div class="dur svelte-5cs2hz"> </div>'),nu=M('<div role="button" tabindex="0"><div class="left svelte-5cs2hz"><!> <div class="thumb svelte-5cs2hz"><!></div></div> <div class="info svelte-5cs2hz"><div class="title-row svelte-5cs2hz"><div class="title text-ellipsis svelte-5cs2hz"> </div> <!></div> <div> </div></div> <div class="right svelte-5cs2hz"><button class="btn-icon small context-menu-btn svelte-5cs2hz" title="Options"><!></button> <button><!></button> <!></div></div>');function us(e,t){ht(t,!1);const n=()=>ge(mn,"$favorites",u),r=()=>ge(Zt,"$currentSong",u),a=()=>ge(dt,"$status",u),i=()=>ge(Mn,"$stations",u),l=()=>ge(At,"$navigationStack",u),c=()=>ge(xt,"$activeMenuTab",u),[u,o]=Lt(),d=$(),f=$(),v=$(),p=$(),b=$(),k=$(),g=$(),E=$(),C=$(),j=$(),ne=$(),oe=$(),se=$(),fe=$();let T=st(t,"track",8),ee=st(t,"index",8),ye=st(t,"isEditable",8,!1);const be=sa();let R=$(!1),V=$(!1);function X(Z){if(s(p))return"â";if(!Z)return"0:00";const K=parseInt(Z,10),pe=Math.floor(K/60),we=K%60;return`${pe}:${we.toString().padStart(2,"0")}`}function D(Z){Z.stopPropagation(),s(f)?cs():be("play")}function Q(){const Z=l(),K=Z[Z.length-1],pe=c();return K?.view==="details"&&K.data?.name?{type:"playlist",playlistName:K.data.name,index:ee()}:K?.view==="queue"||K?.view==="root"&&pe==="queue"?{type:"queue",index:ee()}:{type:"general"}}function I(Z){Z.stopPropagation(),Jr(Z,T(),Q())}function L(Z){ye()||Jr(Z.detail.originalEvent,T(),Q())}ie(()=>H(T()),()=>{T()&&_(V,!1)}),ie(()=>(n(),H(T())),()=>{_(d,n().has(T().file))}),ie(()=>(H(T()),r()),()=>{_(f,T().file===r().file)}),ie(()=>a(),()=>{_(v,a().state==="play")}),ie(()=>H(T()),()=>{_(p,T().file&&(T().file.startsWith("http")||T().file.includes("RADIO")))}),ie(()=>(s(f),s(v),s(R)),()=>{_(b,s(f)&&s(v)&&s(R))}),ie(()=>(s(f),s(v),s(R)),()=>{_(k,s(f)&&!s(v)&&s(R)||!s(f)&&s(R))}),ie(()=>(s(f),s(v),s(R)),()=>{_(g,s(f)&&s(v)&&!s(R))}),ie(()=>(s(f),s(v),s(R)),()=>{_(E,s(f)&&!s(v)&&!s(R))}),ie(()=>H(T()),()=>{_(C,T().title||T().file?.split("/").pop())}),ie(()=>H(T()),()=>{_(j,T().artist||"Unknown")}),ie(()=>H(T()),()=>{_(ne,X(T().time))}),ie(()=>H(T()),()=>{_(oe,T().qualityBadge?T().qualityBadge.split(" ")[0]:null)}),ie(()=>(s(f),r()),()=>{_(se,s(f)?r().stationName:null)}),ie(()=>(s(V),H(T()),i(),s(se),Ar),()=>{_(fe,s(V)?cr(T(),i(),s(se)):Ar(T(),"sm",i(),s(se)))}),qt(),yt();var S=nu();let P;var F=h(S),U=h(F);{var Y=Z=>{var K=Yc(),pe=h(K),we=h(pe);ce(we,()=>(H(w),x(()=>w.DRAG_HANDLE))),z("mousedown",K,ke=>be("startdrag",ke)),z("touchstart",K,ke=>be("startdrag",ke),void 0,!0),z("click",K,Dt(function(ke){Gr.call(this,t,ke)})),m(Z,K)},A=Z=>{var K=Gc(),pe=h(K);{var we=Ce=>{var He=Vc();m(Ce,He)},ke=Ce=>{var He=Xe(),Ze=$e(He);{var Qe=Me=>{var qe=Wc(),Ge=h(qe);ce(Ge,()=>(H(w),x(()=>w.PAUSE))),m(Me,qe)},Ye=Me=>{var qe=Xe(),Ge=$e(qe);{var vt=tt=>{var zt=Qc(),ct=h(zt);ce(ct,()=>(H(w),x(()=>w.PLAY))),m(tt,zt)},tn=tt=>{var zt=Xe(),ct=$e(zt);{var It=Ut=>{var Ht=Xc(),Sn=h(Ht);ce(Sn,()=>(H(w),x(()=>w.PLAY))),m(Ut,Ht)},nn=Ut=>{var Ht=Kc(),Sn=h(Ht);de(()=>ve(Sn,ee()+1)),m(Ut,Ht)};q(ct,Ut=>{s(E)?Ut(It):Ut(nn,!1)},!0)}m(tt,zt)};q(Ge,tt=>{s(k)?tt(vt):tt(tn,!1)},!0)}m(Me,qe)};q(Ze,Me=>{s(b)?Me(Qe):Me(Ye,!1)},!0)}m(Ce,He)};q(pe,Ce=>{s(g)?Ce(we):Ce(ke,!1)})}z("click",K,D),m(Z,K)};q(U,Z=>{ye()?Z(Y):Z(A,!1)})}var B=y(U,2),ue=h(B);Un(ue,{get src(){return s(fe)},get alt(){return s(C)},radius:"4px",$$events:{error:()=>_(V,!0)},$$slots:{fallback:(Z,K)=>{var pe=Zc(),we=h(pe);ce(we,()=>(s(p),H(w),x(()=>s(p)?w.RADIO:w.ALBUMS))),Rt(1,pe,()=>xn),m(Z,pe)}}});var le=y(F,2),te=h(le),N=h(te),O=h(N),J=y(N,2);{var re=Z=>{var K=Jc(),pe=h(K);de(()=>ve(pe,s(oe))),m(Z,K)};q(J,Z=>{s(oe)&&!s(p)&&Z(re)})}var G=y(te,2);let W;var he=h(G),me=y(le,2),Ee=h(me),Ae=h(Ee);ce(Ae,()=>(H(w),x(()=>w.DOTS)));var Te=y(Ee,2);let _e;var Ie=h(Te);ce(Ie,()=>(s(d),H(w),x(()=>s(d)?w.HEART_FILLED:w.HEART)));var Re=y(Te,2);{var Be=Z=>{var K=eu(),pe=h(K);ce(pe,()=>(H(w),x(()=>w.REMOVE))),z("click",K,Dt(()=>be("remove",{index:ee()}))),m(Z,K)},je=Z=>{var K=tu(),pe=h(K);de(()=>ve(pe,s(ne))),m(Z,K)};q(Re,Z=>{ye()?Z(Be):Z(je,!1)})}Xt(()=>z("click",S,()=>!s(f)&&be("play"))),Xt(()=>z("mouseenter",S,()=>_(R,!0))),Xt(()=>z("mouseleave",S,()=>_(R,!1))),Ri(S,Z=>Ki?.(Z)),Xt(()=>z("longpress",S,L)),de(()=>{P=Oe(S,1,"row svelte-5cs2hz",null,P,{active:s(f),editable:ye()}),bt(N,"title",s(C)),ve(O,s(C)),W=Oe(G,1,"artist text-ellipsis svelte-5cs2hz",null,W,{link:!s(p)}),ve(he,s(j)),_e=Oe(Te,1,"btn-icon small svelte-5cs2hz",null,_e,{liked:s(d)})}),z("click",G,Dt(()=>{!s(p)&&T().artist&&(xt.set("artists"),kn("albums_by_artist",T().artist))})),z("click",Ee,I),z("click",Te,Dt(()=>Wi(T()))),m(e,S),pt(),o()}const Br=100,qa=5,Ua=25,Ha=3;function ru({tracksStore:e,onMoveTrack:t}){const n=ze(!1),r=ze(!1),a=ze(!1),i=ze(null),l=ze(null),c=ze(null),u=ze({x:0,y:0,width:0,height:0,grabOffsetX:0,grabOffsetY:0}),o=ze(null);let d=!1,f=0,v=0,p=0,b=0;const k={scrollContainer:null,listBodyContainer:null};let g=null;function E(R,V,X){const D=R.detail;if(D.button===2||(window.getSelection&&window.getSelection().removeAllRanges(),!k.scrollContainer))return;const I=k.scrollContainer.querySelectorAll(".row-wrapper")[V];if(!I)return;const L=I.getBoundingClientRect(),S=D.touches?D.touches[0].clientX:D.clientX,P=D.touches?D.touches[0].clientY:D.clientY,F=S-L.left,U=P-L.top;d=!0,n.set(!1),r.set(!1),f=S,v=P,p=S,b=P,i.set(V),l.set(V),o.set(X),c.set(null),u.set({x:S,y:P,width:L.width,height:L.height,grabOffsetX:F,grabOffsetY:U})}function C(R){if(!d||Le(r))return;const V=R.touches?R.touches[0].clientX:R.clientX,X=R.touches?R.touches[0].clientY:R.clientY;if(!Le(n)){const D=Math.abs(V-f),Q=Math.abs(X-v);if(D<Ha&&Q<Ha)return;n.set(!0)}R.cancelable&&R.preventDefault(),p=V,b=X,u.update(D=>({...D,x:p,y:b})),T(b),j()}function j(){if(!k.listBodyContainer)return;const R=k.listBodyContainer.getBoundingClientRect(),V=Le(u),D=b-R.top-V.grabOffsetY+V.height/2,Q=Le(e).length;if(D<0){l.set(0);return}if(D>R.height){l.set(Q);return}const I=Array.from(k.listBodyContainer.querySelectorAll(".row-wrapper"));let L=-1,S=1/0;I.forEach((P,F)=>{const U=P.offsetTop+P.offsetHeight/2,Y=Math.abs(D-U);Y<S&&(S=Y,L=F)}),L!==-1&&l.set(L)}function ne(R){if(d){if(d=!1,!Le(n)){se();return}oe()}}async function oe(){ye(),n.set(!1),r.set(!0);const R=Le(l);if(Le(u),k.listBodyContainer&&R!==null){const S=k.listBodyContainer.querySelectorAll(".row-wrapper")[R];if(S){const P=k.listBodyContainer.getBoundingClientRect(),F=P.top+S.offsetTop,U=P.left+S.offsetLeft;u.update(Y=>({...Y,y:F+Y.grabOffsetY,x:U+Y.grabOffsetX}))}}await new Promise(L=>setTimeout(L,200)),a.set(!0),await Mr(),k.listBodyContainer&&k.listBodyContainer.offsetHeight;const V=Le(i),X=Le(e).length;let D=Math.max(0,Math.min(R,X)),Q=D;if(V!==null&&V!==D){const L=[...Le(e)],[S]=L.splice(V,1);Q=Math.max(0,Math.min(Q,L.length)),L.splice(Q,0,S),e.set(L),t&&t(V,Q)}i.set(null),l.set(null),o.set(null),r.set(!1);const I=V!==D?Q:V;c.set(I),await Mr(),requestAnimationFrame(()=>{a.set(!1),setTimeout(()=>{c.set(null)},300)})}function se(){d=!1,fe()}function fe(){n.set(!1),r.set(!1),i.set(null),l.set(null),o.set(null),ye()}function T(R){if(!k.scrollContainer)return;const{top:V,bottom:X}=k.scrollContainer.getBoundingClientRect(),D=R-V,Q=X-R;ye();let I=0;if(D<Br&&D>0){const L=1-D/Br;I=-(qa+Ua*(L*L))}else if(Q<Br&&Q>0){const L=1-Q/Br;I=qa+Ua*(L*L)}I!==0&&ee(I)}function ee(R){g||(g=requestAnimationFrame(function V(){k.scrollContainer&&(k.scrollContainer.scrollTop+=R,Le(n)&&(u.update(X=>({...X,x:p,y:b})),j(),g=requestAnimationFrame(V)))}))}function ye(){g&&(cancelAnimationFrame(g),g=null)}function be(R,V,X,D,Q,I){return I||!V&&!X||D===null||Q===null?"":R===D?"opacity: 0; pointer-events: none;":D===Q?"":D<Q&&R>D&&R<=Q?"transform: translateY(-100%);":D>Q&&R>=Q&&R<D?"transform: translateY(100%);":""}return{isDragging:n,isDropping:r,isReordering:a,draggingIndex:i,hoverIndex:l,justDroppedIndex:c,draggedItemData:o,ghostCoords:u,refs:k,onDragInit:E,onPointerMove:C,onPointerUp:ne,getRowStyle:be,cancelDrag:se}}var su=M('<div><div style="pointer-events: none; width: 100%; height: 100%;"><!></div></div>'),au=M('<div style="padding: 10px 0;"><!></div>'),iu=M('<div class="skeletons-wrapper svelte-ym6b2"></div>'),ou=M("<div><!></div>"),lu=M('<div class="content-padded svelte-ym6b2" style="text-align: center; opacity: 0.5;"> </div>'),cu=M("<!> <!>",1),uu=M('<div><!> <div class="list-body svelte-ym6b2"><!> <!></div></div>');function ds(e,t){ht(t,!1);const n=()=>ge(At,"$navigationStack",p),r=()=>ge(xt,"$activeMenuTab",p),a=()=>ge(ye,"$isDragging",p),i=()=>ge(be,"$isDropping",p),l=()=>ge(Q,"$draggedItemData",p),c=()=>ge(I,"$ghostCoords",p),u=()=>ge(V,"$draggingIndex",p),o=()=>ge(k(),"$itemsStore",p),d=()=>ge(D,"$justDroppedIndex",p),f=()=>ge(R,"$isReordering",p),v=()=>ge(X,"$hoverIndex",p),[p,b]=Lt();let k=st(t,"itemsStore",8),g=st(t,"isEditMode",8,!1),E=st(t,"isLoading",8,!1),C=st(t,"emptyText",8,"List is empty"),j=st(t,"onMoveItem",8,(N,O)=>{}),ne=$(""),oe=$(0),se=$(!1);hr(async()=>{_(oe,mc(s(ne))),!E()&&s(oe)>0&&s(T).refs.scrollContainer&&(await Mr(),Nr(T,s(T).refs.scrollContainer.scrollTop=s(oe)),_(se,!0))});async function fe(){await Mr(),s(T).refs.scrollContainer&&(Nr(T,s(T).refs.scrollContainer.scrollTop=s(oe)),_(se,!0))}Tl(()=>{s(T).cancelDrag(),s(T).refs.scrollContainer&&gc(s(ne),s(T).refs.scrollContainer.scrollTop)});const T=$(ru({tracksStore:k(),onMoveTrack:(N,O)=>{j()(N,O)}})),ee=s(T),ye=ee.isDragging,be=ee.isDropping,R=ee.isReordering,V=ee.draggingIndex,X=ee.hoverIndex,D=ee.justDroppedIndex,Q=ee.draggedItemData,I=ee.ghostCoords,L=$(ee.refs);function S(N,O,J){g()&&s(T).onDragInit(N,O,J)}ie(()=>(n(),r()),()=>{const N=n(),O=N[N.length-1],J=r();if(O&&O.view==="root")_(ne,`root_${J}`);else if(O){const re=O.data?O.data.name||O.data:"unknown";_(ne,`${O.view}_${re}`)}}),ie(()=>(H(E()),s(se),s(oe),s(T)),()=>{!E()&&!s(se)&&s(oe)>0&&s(T).refs.scrollContainer&&fe()}),qt(),yt();var P=uu();z("mousemove",_n,function(...N){s(T).onPointerMove?.apply(this,N)}),z("mouseup",_n,function(...N){s(T).onPointerUp?.apply(this,N)}),z("touchmove",_n,function(...N){s(T).onPointerMove?.apply(this,N)},void 0,!1),z("touchend",_n,function(...N){s(T).onPointerUp?.apply(this,N)}),z("touchcancel",_n,function(...N){s(T).onPointerUp?.apply(this,N)});let F;var U=h(P);{var Y=N=>{var O=su();let J;var re=h(O),G=h(re);qr(G,t,"row",{get item(){return l()},get index(){return u()},isGhost:!0,startDrag:()=>{}}),de(()=>{J=Oe(O,1,"floating-item svelte-ym6b2",null,J,{dropping:i()}),Ke(O,`
            top: ${c(),x(()=>c().y-c().grabOffsetY)??""}px; 
            left: ${c(),x(()=>c().x-c().grabOffsetX)??""}px;
            width: ${c(),x(()=>c().width)??""}px; 
            height: ${c(),x(()=>c().height)??""}px;
        `)}),m(N,O)};q(U,N=>{(a()||i())&&l()&&N(Y)})}var A=y(U,2),B=h(A);qr(B,t,"header",{});var ue=y(B,2);{var le=N=>{var O=iu();Pt(O,4,()=>Array(6),vn,(J,re)=>{var G=au(),W=h(G);En(W,{width:"100%",height:"50px"}),m(J,G)}),m(N,O)},te=N=>{var O=cu(),J=$e(O);Pt(J,3,o,(W,he)=>W._uid||he,(W,he,me)=>{var Ee=ou();let Ae;var Te=h(Ee);qr(Te,t,"row",{get item(){return s(he)},get index(){return s(me)},isGhost:!1,startDrag:_e=>S(_e,s(me),s(he))}),de(_e=>{Ae=Oe(Ee,1,"row-wrapper svelte-ym6b2",null,Ae,{"ghost-placeholder":u()===s(me)&&(a()||i()),"just-dropped":d()===s(me),"no-transition":f()}),Ke(Ee,_e)},[()=>(s(T),H(s(me)),a(),i(),u(),v(),f(),x(()=>s(T).getRowStyle(s(me),a(),i(),u(),v(),f())))]),m(W,Ee)});var re=y(J,2);{var G=W=>{var he=lu(),me=h(he);de(()=>ve(me,C())),m(W,he)};q(re,W=>{o(),x(()=>o().length===0)&&W(G)})}m(N,O)};q(ue,N=>{E()?N(le):N(te,!1)})}qn(A,N=>Nr(L,s(L).listBodyContainer=N),()=>s(L)?.listBodyContainer),qn(P,N=>Nr(L,s(L).scrollContainer=N),()=>s(L)?.scrollContainer),de(()=>F=Oe(P,1,"base-list-scroll-container svelte-ym6b2",null,F,{dragging:a()})),Rt(1,A,()=>xn,()=>({duration:200})),m(e,P),pt(),b()}var du=M('<div slot="fallback" class="icon-fallback svelte-1eh2rsb"><!></div>'),vu=M('<span class="meta-tag"> </span>'),fu=M('<div class="header-subtitle-row svelte-1eh2rsb"><h2 class="header-sub-text svelte-1eh2rsb"> </h2> <!></div>'),hu=M('<span class="meta-tag"> </span>'),pu=M('<span class="meta-tag"> </span>'),_u=M('<span class="meta-tag quality"> </span>'),gu=M('<div slot="header" class="content-padded svelte-1eh2rsb"><div class="view-header svelte-1eh2rsb"><div class="header-art svelte-1eh2rsb"><div style="width: 100%; height: 100%;"><!></div></div> <div class="header-info svelte-1eh2rsb"><div class="header-text-group svelte-1eh2rsb"><div class="header-label svelte-1eh2rsb"> </div> <h1 class="header-title svelte-1eh2rsb"> </h1> <!> <div class="meta-badges"><!> <!> <!></div></div> <div class="header-actions svelte-1eh2rsb"><button class="btn-primary svelte-1eh2rsb"> </button> <button class="btn-secondary svelte-1eh2rsb"> </button></div></div></div></div>'),mu=M('<div slot="row"><!></div>'),bu=M("<button> </button>"),wu=M('<div class="sort-backdrop svelte-1eh2rsb"></div> <div class="sort-menu svelte-1eh2rsb"></div>',1),yu=M('<div class="sort-wrapper svelte-1eh2rsb"><button class="sort-trigger svelte-1eh2rsb"><span> </span> <span class="sort-trigger-icon svelte-1eh2rsb"><!></span></button> <!></div>'),ku=M('<div class="music-card svelte-1eh2rsb"><!> <!></div>'),xu=M('<div class="music-grid svelte-1eh2rsb"></div>'),Eu=M('<div class="group-header header-label svelte-1eh2rsb"> </div>'),Mu=M('<div slot="fallback" class="icon-fallback svelte-1eh2rsb"><!></div>'),Su=M('<div class="card-sub text-ellipsis svelte-1eh2rsb"> </div>'),Tu=M('<div class="card-badge svelte-1eh2rsb"> </div>'),$u=M('<div class="card-badge quality svelte-1eh2rsb"> </div>'),Au=M('<div class="music-card svelte-1eh2rsb" role="button" tabindex="0"><div class="card-img-container svelte-1eh2rsb"><!> <div class="play-overlay svelte-1eh2rsb"><span class="overlay-icon svelte-1eh2rsb"><!></span></div></div> <div class="card-title svelte-1eh2rsb"> </div> <div class="card-sub-row svelte-1eh2rsb"><!> <!> <!></div></div>'),Cu=M('<div class="empty-text svelte-1eh2rsb">No results found</div>'),Pu=M('<div class="music-grid svelte-1eh2rsb"></div>'),Ru=M('<div class="content-padded svelte-1eh2rsb"><div class="search-input-container svelte-1eh2rsb"><span class="search-icon svelte-1eh2rsb"><!></span> <input type="text" class="svelte-1eh2rsb"/> <!></div> <!></div>'),Lu=M("<div><!></div>");function zu(e,t){ht(t,!1);const n=()=>ge(d,"$itemsStore",a),r=()=>ge(At,"$navigationStack",a),[a,i]=Lt(),l=$(),c=$(),u=$();let o=st(t,"activeCategory",8,"artists");const d=ze([]);let f=$(!0),v=$(""),p=$("name"),b=$(!1);const k=[{id:"name",label:"A-Z"},{id:"artist",label:"Artist"},{id:"year",label:"Oldest"},{id:"year_desc",label:"Newest"}];let g=$(!1),E=$(!1),C=$(null),j=$(""),ne=$(""),oe=$(""),se=$(0),fe=0;function T(){_(b,!s(b))}function ee(P){_(p,P),_(b,!1)}function ye(P,F){if(!P||P.length===0)return[];const U=[...P].sort((Y,A)=>{switch(F){case"name":return Y.displayName.localeCompare(A.displayName,void 0,{sensitivity:"base"});case"artist":const B=Y.artist||"",ue=A.artist||"",le=B.localeCompare(ue,void 0,{sensitivity:"base"});return le!==0?le:(parseInt(Y.year)||0)-(parseInt(A.year)||0);case"year":return(parseInt(Y.year)||0)-(parseInt(A.year)||0);case"year_desc":return(parseInt(A.year)||0)-(parseInt(Y.year)||0);default:return 0}});if(F==="artist"){const Y=[];let A=null;return U.forEach(B=>{const ue=B.artist||"Unknown Artist";ue!==A&&(Y.push({_uid:`header-${ue}`,isHeader:!0,title:ue}),A=ue),Y.push(B)}),Y}return U}async function be(P,F){if(!F)return;const U=++fe;_(f,!0),d.set([]),_(C,F.data),_(j,""),_(ne,""),_(oe,""),_(se,0),console.log(`[LibraryView #${U}] Start loading:`,F);try{let Y=[];if(F.view==="root")Y=P==="artists"?await bn.getArtists():await bn.getAlbums();else if(F.view==="albums_by_artist"){const B=F.data.name||F.data;Y=await bn.getArtistAlbums(B),_(p,"year")}else if(F.view==="tracks_by_album"){const B=F.data.name||F.data,ue=F.data.artist;Y=await bn.getAlbumTracks(B,ue)}if(U!==fe){console.warn(`[LibraryView #${U}] Request cancelled (stale).`);return}const A=Y.map((B,ue)=>{const te=typeof B=="string"?{name:B}:B;let N=String(te.year||"");return N.length>4&&(N=N.substring(0,4)),{...te,displayName:te.name||te.title||te.artist||"Unknown",thumbFile:te.file||null,year:N,_uid:(te.file||te.name||ue)+P+F.view}});if(console.log(`[LibraryView #${U}] Setting ${A.length} items.`),d.set(A),F.view==="tracks_by_album"&&A.length>0){_(C,A[0]),_(se,A.length),_(oe,A[0].year);const B=A.reduce((ue,le)=>ue+(le.time||0),0);if(B>0){const ue=Math.floor(B/3600),le=Math.floor(B%3600/60);_(j,ue>0?`${ue} hr ${le} min`:`${le} min`)}A[0].qualityBadge&&_(ne,A[0].qualityBadge)}}catch(Y){U===fe&&(console.error(Y),d.set([]))}finally{U===fe&&_(f,!1)}}function R(P){s(u).view==="root"?o()==="artists"?kn("albums_by_artist",P):kn("tracks_by_album",P):s(u).view==="albums_by_artist"&&kn("tracks_by_album",P)}function V(){const P=n();P.length>0&&(_(g,!0),Hi(P))}function X(){const P=n();P.length>0&&(_(E,!0),Yi(P),setTimeout(()=>{_(E,!1)},2e3))}ie(()=>H(o()),()=>{o()&&(_(v,""),o(),_(p,"name"))}),ie(()=>(s(p),w),()=>{_(l,s(p)==="year_desc"?w.SORT_ASC:w.SORT_DESC)}),ie(()=>(n(),s(v),s(p)),()=>{_(c,ye(n().filter(P=>{if(!s(v))return!0;const F=s(v).toLowerCase();return P.displayName.toLowerCase().includes(F)||P.artist&&P.artist.toLowerCase().includes(F)}),s(p)))}),ie(()=>r(),()=>{_(u,r()[r().length-1])}),ie(()=>(H(o()),s(u)),()=>{be(o(),s(u))}),ie(()=>s(u),()=>{s(u)&&(_(g,!1),_(E,!1),_(b,!1))}),qt(),yt();var D=Lu();let Q;var I=h(D);{var L=P=>{ds(P,{get itemsStore(){return d},get isLoading(){return s(f)},isEditMode:!1,emptyText:"No tracks found",$$slots:{header:(F,U)=>{var Y=gu(),A=h(Y),B=h(A),ue=h(B),le=h(ue);{let we=Je(()=>(H(cr),s(C),x(()=>cr(s(C)))));Un(le,{get src(){return s(we)},alt:"Art",radius:"8px",$$slots:{fallback:(ke,Ce)=>{var He=du(),Ze=h(He);ce(Ze,()=>(H(w),x(()=>w.ALBUMS))),m(ke,He)}}})}var te=y(B,2),N=h(te),O=h(N),J=h(O),re=y(O,2),G=h(re),W=y(re,2);{var he=we=>{var ke=fu(),Ce=h(ke),He=h(Ce),Ze=y(Ce,2);{var Qe=Ye=>{var Me=vu(),qe=h(Me);de(()=>ve(qe,s(oe))),m(Ye,Me)};q(Ze,Ye=>{s(oe)&&s(oe)!=="0"&&Ye(Qe)})}de(()=>ve(He,(s(C),x(()=>s(C).artist)))),m(we,ke)};q(W,we=>{s(C),x(()=>s(C)&&s(C).artist)&&we(he)})}var me=y(W,2),Ee=h(me);{var Ae=we=>{var ke=hu(),Ce=h(ke);de(()=>ve(Ce,`${s(se)??""} tracks`)),m(we,ke)};q(Ee,we=>{s(se)>0&&we(Ae)})}var Te=y(Ee,2);{var _e=we=>{var ke=pu(),Ce=h(ke);de(()=>ve(Ce,s(j))),m(we,ke)};q(Te,we=>{s(j)&&we(_e)})}var Ie=y(Te,2);{var Re=we=>{var ke=_u(),Ce=h(ke);de(()=>ve(Ce,s(ne))),m(we,ke)};q(Ie,we=>{s(ne)&&we(Re)})}var Be=y(N,2),je=h(Be),Z=h(je),K=y(je,2),pe=h(K);de(()=>{ve(J,(s(u),x(()=>s(u).view==="albums_by_artist"?"Artist":"Album"))),bt(re,"title",(s(u),x(()=>s(u).data.name||s(u).data.displayName))),ve(G,(s(u),x(()=>s(u).data.name||s(u).data.displayName||"Unknown"))),je.disabled=s(g),ve(Z,s(g)?"Playing...":"Play All"),K.disabled=s(E),ve(pe,s(E)?"Added":"To Queue")}),z("click",je,V),z("click",K,X),m(F,Y)},row:(F,U)=>{var Y=mu();const A=Je(()=>U.item),B=Je(()=>U.index);var ue=h(Y);us(ue,{get track(){return s(A)},get index(){return s(B)},isEditable:!1,$$events:{play:()=>va(s(A))}}),m(F,Y)}}})},S=P=>{var F=Ru(),U=h(F),Y=h(U),A=h(Y);ce(A,()=>(H(w),x(()=>w.SEARCH)));var B=y(Y,2),ue=y(B,2);{var le=J=>{var re=yu(),G=h(re),W=h(G),he=h(W),me=y(W,2),Ee=h(me);ce(Ee,()=>s(l));var Ae=y(G,2);{var Te=_e=>{var Ie=wu(),Re=$e(Ie),Be=y(Re,2);Pt(Be,5,()=>k,vn,(je,Z)=>{var K=bu();let pe;var we=h(K);de(()=>{pe=Oe(K,1,"sort-item svelte-1eh2rsb",null,pe,{selected:s(p)===s(Z).id}),ve(we,(s(Z),x(()=>s(Z).label)))}),z("click",K,()=>ee(s(Z).id)),m(je,K)}),z("click",Re,T),Rt(3,Re,()=>xn,()=>({duration:100})),Rt(3,Be,()=>Oi,()=>({start:.95,duration:100})),m(_e,Ie)};q(Ae,_e=>{s(b)&&_e(Te)})}de(_e=>ve(he,_e),[()=>(s(p),x(()=>k.find(_e=>_e.id===s(p))?.label))]),z("click",G,T),m(J,re)};q(ue,J=>{H(o()),s(u),x(()=>o()==="albums"||s(u).view==="albums_by_artist")&&J(le)})}var te=y(U,2);{var N=J=>{var re=xu();Pt(re,4,()=>Array(12),vn,(G,W)=>{var he=ku(),me=h(he);En(me,{width:"100%",style:"aspect-ratio:1; border-radius:12px; margin-bottom:12px;"});var Ee=y(me,2);En(Ee,{width:"80%",height:"16px"}),m(G,he)}),m(J,re)},O=J=>{var re=Pu();Pt(re,5,()=>s(c),G=>G._uid,(G,W)=>{var he=Xe(),me=$e(he);{var Ee=Te=>{var _e=Eu(),Ie=h(_e);de(()=>ve(Ie,(s(W),x(()=>s(W).title)))),m(Te,_e)},Ae=Te=>{var _e=Au(),Ie=h(_e),Re=h(Ie);{let Me=Je(()=>(H(Ar),s(W),x(()=>Ar(s(W),"md"))));Un(Re,{get src(){return s(Me)},get alt(){return s(W),x(()=>s(W).displayName)},radius:"8px",$$slots:{fallback:(qe,Ge)=>{var vt=Mu(),tn=h(vt);{var tt=ct=>{var It=Xe(),nn=$e(It);ce(nn,()=>(H(w),x(()=>w.ARTISTS))),m(ct,It)},zt=ct=>{var It=Xe(),nn=$e(It);ce(nn,()=>(H(w),x(()=>w.ALBUMS))),m(ct,It)};q(tn,ct=>{o()==="artists"?ct(tt):ct(zt,!1)})}m(qe,vt)}}})}var Be=y(Re,2),je=h(Be),Z=h(je);ce(Z,()=>(H(w),x(()=>w.PLAY)));var K=y(Ie,2),pe=h(K),we=y(K,2),ke=h(we);{var Ce=Me=>{var qe=Su(),Ge=h(qe);de(()=>ve(Ge,(s(W),x(()=>s(W).artist)))),m(Me,qe)};q(ke,Me=>{s(W),x(()=>s(W).artist)&&Me(Ce)})}var He=y(ke,2);{var Ze=Me=>{var qe=Tu(),Ge=h(qe);de(()=>ve(Ge,(s(W),x(()=>s(W).year)))),m(Me,qe)};q(He,Me=>{s(W),x(()=>s(W).year&&s(W).year!=="0")&&Me(Ze)})}var Qe=y(He,2);{var Ye=Me=>{var qe=$u(),Ge=h(qe);de(vt=>ve(Ge,vt),[()=>(s(W),x(()=>s(W).qualityBadge.split(" ")[0]))]),m(Me,qe)};q(Qe,Me=>{s(W),x(()=>s(W).qualityBadge)&&Me(Ye)})}de(()=>ve(pe,(s(W),x(()=>s(W).displayName)))),z("click",_e,()=>R(s(W))),z("keypress",_e,Me=>Me.key==="Enter"&&R(s(W))),m(Te,_e)};q(me,Te=>{s(W),x(()=>s(W).isHeader)?Te(Ee):Te(Ae,!1)})}m(G,he)},G=>{var W=Cu();m(G,W)}),m(J,re)};q(te,J=>{s(f)?J(N):J(O,!1)})}de(()=>bt(B,"placeholder",`Filter ${o()??""}...`)),ta(B,()=>s(v),J=>_(v,J)),m(P,F)};q(I,P=>{s(u),x(()=>s(u)?.view==="tracks_by_album")?P(L):P(S,!1)})}de(()=>Q=Oe(D,1,"view-container svelte-1eh2rsb",null,Q,{scrollable:s(u)?.view!=="tracks_by_album"})),m(e,D),pt(),i()}var Iu=M('<div class="music-card svelte-1otxnt7"><!> <!></div>'),Nu=M('<div class="music-grid svelte-1otxnt7"></div>'),Ou=M('<div slot="fallback" class="icon-fallback svelte-1otxnt7">ð»</div>'),Du=M('<div class="status-badge playing svelte-1otxnt7">PLAYING</div>'),Fu=M('<div class="status-badge paused svelte-1otxnt7">PAUSED</div>'),Bu=M('<span class="overlay-icon svelte-1otxnt7"><!></span>'),ju=M('<div class="card-sub svelte-1otxnt7"> </div>'),qu=M('<div class="card-badge quality svelte-1otxnt7"> </div>'),Uu=M('<div role="button" tabindex="0"><div class="card-img-container svelte-1otxnt7"><!> <div class="play-overlay svelte-1otxnt7"><!></div></div> <div class="card-title svelte-1otxnt7"> </div> <div class="card-sub-row svelte-1otxnt7"><!> <!></div></div>'),Hu=M('<div class="empty-text svelte-1otxnt7">No stations found</div>'),Yu=M('<div class="music-grid svelte-1otxnt7"></div> <!>',1),Vu=M('<div class="view-container scrollable content-padded svelte-1otxnt7"><div class="search-input-container svelte-1otxnt7"><span class="search-icon svelte-1otxnt7"><!></span> <input type="text" placeholder="Find station..." class="svelte-1otxnt7"/></div> <!></div>');function Wu(e,t){ht(t,!1);const n=()=>ge(Mn,"$stations",l),r=()=>ge(dt,"$status",l),a=()=>ge(Ur,"$isLoadingRadio",l),i=()=>ge(Zt,"$currentSong",l),[l,c]=Lt(),u=$(),o=$();let d=$("");ie(()=>(n(),s(d)),()=>{_(u,n().filter(j=>{const ne=s(d).toLowerCase();return j.name.toLowerCase().includes(ne)||j.genre&&j.genre.toLowerCase().includes(ne)}))}),ie(()=>r(),()=>{_(o,r().bitrate?`${r().bitrate} kbps`:r().format||"")}),qt(),yt();var f=Vu(),v=h(f),p=h(v),b=h(p);ce(b,()=>(H(w),x(()=>w.SEARCH)));var k=y(p,2),g=y(v,2);{var E=j=>{var ne=Nu();Pt(ne,4,()=>Array(12),vn,(oe,se)=>{var fe=Iu(),T=h(fe);En(T,{width:"100%",style:"aspect-ratio:1; border-radius:12px; margin-bottom:12px;"});var ee=y(T,2);En(ee,{width:"70%",height:"16px"}),m(oe,fe)}),m(j,ne)},C=j=>{var ne=Yu(),oe=$e(ne);Pt(oe,5,()=>s(u),vn,(T,ee)=>{const ye=Je(()=>(s(ee),x(()=>s(ee).file))),be=Je(()=>(i(),s(ee),H(s(ye)),x(()=>i().stationName===s(ee).name||i().file===s(ye)))),R=Je(()=>(H(lr),s(ee),x(()=>lr(s(ee)))));var V=Uu();let X;var D=h(V),Q=h(D);Un(Q,{get src(){return s(R)},get alt(){return s(ee),x(()=>s(ee).name)},radius:"8px",$$slots:{fallback:(te,N)=>{var O=Ou();m(te,O)}}});var I=y(Q,2),L=h(I);{var S=te=>{var N=Xe(),O=$e(N);{var J=G=>{var W=Du();m(G,W)},re=G=>{var W=Fu();m(G,W)};q(O,G=>{r(),x(()=>r().state==="play")?G(J):G(re,!1)})}m(te,N)},P=te=>{var N=Bu(),O=h(N);ce(O,()=>(H(w),x(()=>w.PLAY))),m(te,N)};q(L,te=>{s(be)?te(S):te(P,!1)})}var F=y(D,2),U=h(F),Y=y(F,2),A=h(Y);{var B=te=>{var N=ju(),O=h(N);de(()=>ve(O,(s(ee),x(()=>s(ee).genre)))),m(te,N)};q(A,te=>{s(ee),x(()=>s(ee).genre)&&te(B)})}var ue=y(A,2);{var le=te=>{var N=qu(),O=h(N);de(()=>ve(O,s(o))),Rt(1,N,()=>xn),m(te,N)};q(ue,te=>{s(be)&&s(o)&&te(le)})}de(()=>{X=Oe(V,1,"music-card svelte-1otxnt7",null,X,{"is-active":s(be)}),Ke(I,s(be)?"opacity: 1":""),ve(U,(s(ee),x(()=>s(ee).name)))}),z("click",V,()=>da(s(ee))),m(T,V)});var se=y(oe,2);{var fe=T=>{var ee=Hu();m(T,ee)};q(se,T=>{s(u),n(),x(()=>s(u).length===0&&n().length>0)&&T(fe)})}m(j,ne)};q(g,j=>{a()?j(E):j(C,!1)})}ta(k,()=>s(d),j=>_(d,j)),Rt(1,f,()=>xn,()=>({duration:200})),m(e,f),pt(),c()}var Qu=M('<span class="meta-tag">Loading...</span>'),Xu=M('<span class="meta-tag"> </span>'),Ku=M('<span class="meta-tag quality"> </span>'),Gu=M('<span class="meta-tag"> </span> <!> <!>',1),Zu=M('<div slot="header" class="content-padded svelte-m7c4tz"><div class="view-header svelte-m7c4tz"><div class="header-art svelte-m7c4tz"><div class="header-icon-wrap svelte-m7c4tz"><!></div></div> <div class="header-info svelte-m7c4tz"><div class="header-text-group svelte-m7c4tz"><div class="header-label svelte-m7c4tz">Playlist</div> <h1 class="header-title svelte-m7c4tz"> </h1> <div class="meta-badges"><!></div></div> <div class="header-actions svelte-m7c4tz"><button class="btn-primary svelte-m7c4tz"> </button> <button class="btn-secondary svelte-m7c4tz"> </button> <button title="Edit"><!></button></div></div></div></div>'),Ju=M('<div slot="row"><!></div>'),ed=M('<div class="music-card svelte-m7c4tz"><!> <!></div>'),td=M('<div class="content-padded svelte-m7c4tz"><div class="music-grid playlists-grid-override svelte-m7c4tz"></div></div>'),nd=M('<div class="music-card svelte-m7c4tz"><div class="card-img-container svelte-m7c4tz"><div class="icon-wrap svelte-m7c4tz"><!></div> <div class="play-overlay svelte-m7c4tz"><span class="overlay-icon svelte-m7c4tz"><!></span></div></div> <div class="card-title svelte-m7c4tz"> </div> <div class="card-sub-row svelte-m7c4tz"><div class="card-sub svelte-m7c4tz"> </div></div></div>'),rd=M('<div class="content-padded svelte-m7c4tz"><div class="music-grid playlists-grid-override svelte-m7c4tz"><div class="music-card svelte-m7c4tz"><div class="card-img-container dashed-cover svelte-m7c4tz"><div class="icon-wrap svelte-m7c4tz"><!></div></div> <div class="card-title svelte-m7c4tz">New Playlist</div></div> <!></div></div>'),sd=M("<div><!></div>");function ad(e,t){ht(t,!1);const n=()=>ge(At,"$navigationStack",c),r=()=>ge(nr,"$activePlaylistTracks",c),a=()=>ge(Bs,"$isLoadingTracks",c),i=()=>ge(aa,"$playlists",c),l=()=>ge(Fs,"$isLoadingPlaylists",c),[c,u]=Lt(),o=$(),d=$(),f=$();let v=$(!1),p=$(!1),b=$(!1),k=$(""),g=$("");hr(()=>{!s(d)&&i().length===0&&ua()});function E(X){const D=X.reduce((I,L)=>I+(parseFloat(L.time)||0),0);if(D>0){const I=Math.floor(D/3600),L=Math.floor(D%3600/60);_(k,I>0?`${I} hr ${L} min`:`${L} min`)}else _(k,"");const Q=new Set;X.forEach(I=>{I.qualityBadge&&Q.add(I.qualityBadge.split(" ")[0])}),_(g,Q.size===1?X[0].qualityBadge:Q.size>1?"Mixed":"")}function C(X){kn("details",X)}function j(){_(p,!0),Ys(s(o).data.name,0)}function ne(X){s(v)||Ys(s(o).data.name,X)}function oe(){if(r().length>0){const X=s(o).data.name.replace(/"/g,'\\"');la(`load "${X}"`),_(b,!0),setTimeout(()=>{_(b,!1)},2e3)}}function se(){_(v,!s(v))}function fe(X){const D=s(o).data.name,Q=r();Q.splice(X,1),nr.set(Q),Qi(D,X),E(Q)}function T(X,D){Xi(s(o).data.name,X,D)}ie(()=>n(),()=>{_(o,n()[n().length-1])}),ie(()=>s(o),()=>{_(d,s(o).view==="details")}),ie(()=>s(o),()=>{s(o)&&(_(p,!1),_(b,!1))}),ie(()=>(s(d),r(),a()),()=>{if(s(d)&&r().length>0){const X=r();if(!X[0]._uid){const D=X.map(Q=>({...Q,_uid:Math.random()}));nr.set(D)}E(X)}else s(d)&&r().length===0&&!a()&&(_(k,"0 min"),_(g,""))}),ie(()=>(s(d),s(o),Hc),()=>{s(d)&&s(o).data&&(_(v,!1),Vi(s(o).data.name))}),ie(()=>s(o),()=>{_(f,s(o)?.data?.name==="Favorites")}),qt(),yt();var ee=sd();let ye;var be=h(ee);{var R=X=>{ds(X,{get itemsStore(){return nr},get isLoading(){return a()},get isEditMode(){return s(v)},emptyText:"This playlist is empty.",onMoveItem:T,$$slots:{header:(D,Q)=>{var I=Zu(),L=h(I),S=h(L),P=h(S),F=h(P);ce(F,()=>(s(f),H(w),x(()=>s(f)?w.HEART_FILLED:w.PLAYLISTS)));var U=y(S,2),Y=h(U),A=y(h(Y),2),B=h(A),ue=y(A,2),le=h(ue);{var te=Ae=>{var Te=Qu();m(Ae,Te)},N=Ae=>{var Te=Gu(),_e=$e(Te),Ie=h(_e),Re=y(_e,2);{var Be=K=>{var pe=Xu(),we=h(pe);de(()=>ve(we,s(k))),m(K,pe)};q(Re,K=>{s(k)&&K(Be)})}var je=y(Re,2);{var Z=K=>{var pe=Ku(),we=h(pe);de(()=>ve(we,s(g))),m(K,pe)};q(je,K=>{s(g)&&K(Z)})}de(()=>ve(Ie,`${r(),x(()=>r().length)??""} tracks`)),m(Ae,Te)};q(le,Ae=>{a()?Ae(te):Ae(N,!1)})}var O=y(Y,2),J=h(O),re=h(J),G=y(J,2),W=h(G),he=y(G,2);let me;var Ee=h(he);ce(Ee,()=>(s(v),H(w),x(()=>s(v)?w.ACCEPT:w.EDIT))),de(()=>{Ke(S,`background: ${s(f),s(o),x(()=>s(f)?"linear-gradient(135deg, hsl(348, 95%, 58%), hsl(348, 90%, 40%))":s(o).data.color||"#333")??""};`),bt(A,"title",(s(o),x(()=>s(o).data.name))),ve(B,(s(o),x(()=>s(o).data.name))),J.disabled=s(p),ve(re,s(p)?"Playing...":"Play All"),G.disabled=s(b),ve(W,s(b)?"Added":"To Queue"),me=Oe(he,1,"btn-action svelte-m7c4tz",null,me,{active:s(v)})}),z("click",J,j),z("click",G,oe),z("click",he,se),m(D,I)},row:(D,Q)=>{var I=Ju();const L=Je(()=>Q.item),S=Je(()=>Q.index),P=Je(()=>Q.startDrag);var F=h(I);us(F,{get track(){return s(L)},get index(){return s(S)},get isEditable(){return s(v)},$$events:{play:()=>ne(s(S)),remove:()=>fe(s(S)),startdrag(...U){s(P)?.apply(this,U)}}}),m(D,I)}}})},V=X=>{var D=Xe(),Q=$e(D);{var I=S=>{var P=td(),F=h(P);Pt(F,4,()=>Array(8),vn,(U,Y)=>{var A=ed(),B=h(A);En(B,{width:"100%",style:"aspect-ratio: 1; border-radius: 12px; margin-bottom: 12px;"});var ue=y(B,2);En(ue,{width:"60%",height:"16px"}),m(U,A)}),m(S,P)},L=S=>{var P=rd(),F=h(P),U=h(F),Y=h(U),A=h(Y),B=h(A);ce(B,()=>(H(w),x(()=>w.ADD)));var ue=y(U,2);Pt(ue,1,i,vn,(le,te)=>{const N=Je(()=>(s(te),x(()=>s(te).name==="Favorites")));var O=nd(),J=h(O),re=h(J),G=h(re);ce(G,()=>(H(s(N)),H(w),x(()=>s(N)?w.HEART_FILLED:w.PLAYLISTS)));var W=y(re,2),he=h(W),me=h(he);ce(me,()=>(H(w),x(()=>w.PLAY)));var Ee=y(J,2),Ae=h(Ee),Te=y(Ee,2),_e=h(Te),Ie=h(_e);de(Re=>{Ke(J,`background: ${s(te),x(()=>s(te).color)??""};`),ve(Ae,(s(te),x(()=>s(te).name))),ve(Ie,Re)},[()=>(s(te),x(()=>s(te).lastModified?new Date(s(te).lastModified).toLocaleDateString():"Playlist"))]),z("click",O,()=>C(s(te))),m(le,O)}),m(S,P)};q(Q,S=>{l()?S(I):S(L,!1)},!0)}m(X,D)};q(be,X=>{s(d)?X(R):X(V,!1)})}de(()=>ye=Oe(ee,1,"view-container svelte-m7c4tz",null,ye,{scrollable:!s(d)})),m(e,ee),pt(),u()}var id=M('<button class="clear-icon-btn svelte-1d3z1zm"><!></button>'),od=M('<div class="spinner svelte-1d3z1zm"></div>'),ld=M('<div class="placeholder-state svelte-1d3z1zm"><div class="placeholder-icon svelte-1d3z1zm">ð</div> <p>Type to search your library</p></div>'),cd=M('<div class="empty-text svelte-1d3z1zm"> </div>'),ud=M('<div slot="fallback" class="icon-fallback svelte-1d3z1zm">ð¿</div>'),dd=M('<div class="meta-tag"> </div>'),vd=M('<div class="meta-tag quality"> </div>'),fd=M('<div class="music-card svelte-1d3z1zm"><div class="card-img-container svelte-1d3z1zm"><!> <div class="play-overlay svelte-1d3z1zm"><span class="overlay-icon svelte-1d3z1zm"><!></span></div></div> <div class="card-title svelte-1d3z1zm"> </div> <div class="card-sub-row svelte-1d3z1zm"><div class="card-sub text-ellipsis svelte-1d3z1zm"> </div> <!> <!></div></div>'),hd=M('<div class="header-label section-spacing svelte-1d3z1zm">Albums</div> <div class="music-grid horizontal section-mb svelte-1d3z1zm"></div>',1),pd=M('<div class="header-label svelte-1d3z1zm">Tracks</div>'),_d=M("<!> <!>",1),gd=M('<div slot="header" class="content-padded svelte-1d3z1zm"><!></div>'),md=M('<div slot="row"><!></div>'),bd=M('<div class="view-container svelte-1d3z1zm"><div class="content-padded no-bottom-pad svelte-1d3z1zm"><div class="search-input-container svelte-1d3z1zm"><span class="search-icon svelte-1d3z1zm"><!></span> <input type="text" placeholder="Artists, songs, or albums" autoFocus class="svelte-1d3z1zm"/> <!> <!></div></div> <!></div>');function wd(e,t){ht(t,!1);const n=()=>ge(yr,"$searchQuery",a),r=()=>ge(l,"$tracksStore",a),[a,i]=Lt(),l=ze([]);let c=$([]),u=$(!1),o,d=$(!1);hr(()=>{n().length>=2&&p(n())});function f(R){yr.set(R.target.value),clearTimeout(o),o=setTimeout(()=>{p(n())},300)}function v(){yr.set(""),l.set([]),_(c,[]),_(d,!1)}async function p(R){const V=R.trim().toLowerCase();if(V.length<2){l.set([]),_(c,[]),_(d,!1);return}_(u,!0),_(d,!0);try{const X=await bn.search(V),D=X.map((I,L)=>({...I,_uid:I.file?`${I.file}-${L}`:`search-${L}`}));l.set(D);const Q=new Map;X.forEach(I=>{const L=I.album;if(L&&!Q.has(L)){const S=L.toLowerCase().includes(V),P=I.artist&&I.artist.toLowerCase().includes(V);if(S||P){let F=String(I.year||"");F.length>4&&(F=F.substring(0,4)),Q.set(L,{name:L,artist:I.artist,file:I.file,thumbHash:I.thumbHash,_uid:`alb-${L}`,year:F,qualityBadge:I.qualityBadge})}}}),_(c,Array.from(Q.values()))}finally{_(u,!1)}}function b(R){va(R)}function k(R){kn("tracks_by_album",{name:R.name,artist:R.artist})}function g(R){R.deltaY!==0&&(R.currentTarget.scrollLeft+=R.deltaY)}yt();var E=bd(),C=h(E),j=h(C),ne=h(j),oe=h(ne);ce(oe,()=>w.SEARCH);var se=y(ne,2),fe=y(se,2);{var T=R=>{var V=id(),X=h(V);ce(X,()=>w.CLOSE),z("click",V,v),m(R,V)};q(fe,R=>{n().length>0&&R(T)})}var ee=y(fe,2);{var ye=R=>{var V=od();m(R,V)};q(ee,R=>{s(u)&&R(ye)})}var be=y(C,2);ds(be,{get itemsStore(){return l},isEditMode:!1,isLoading:!1,emptyText:"",$$slots:{header:(R,V)=>{var X=gd(),D=h(X);{var Q=L=>{var S=ld();m(L,S)},I=L=>{var S=Xe(),P=$e(S);{var F=Y=>{var A=cd(),B=h(A);de(()=>ve(B,`No results found for "${n()??""}"`)),m(Y,A)},U=Y=>{var A=_d(),B=$e(A);{var ue=N=>{var O=hd(),J=y($e(O),2);Pt(J,5,()=>s(c),re=>re._uid,(re,G)=>{var W=fd(),he=h(W),me=h(he);{let ke=Je(()=>Ar(s(G),"md"));Un(me,{get src(){return s(ke)},get alt(){return s(G).name},radius:"8px",$$slots:{fallback:(Ce,He)=>{var Ze=ud();m(Ce,Ze)}}})}var Ee=y(me,2),Ae=h(Ee),Te=h(Ae);ce(Te,()=>w.PLAY);var _e=y(he,2),Ie=h(_e),Re=y(_e,2),Be=h(Re),je=h(Be),Z=y(Be,2);{var K=ke=>{var Ce=dd(),He=h(Ce);de(()=>ve(He,s(G).year)),m(ke,Ce)};q(Z,ke=>{s(G).year&&s(G).year!=="0"&&s(G).year!==0&&ke(K)})}var pe=y(Z,2);{var we=ke=>{var Ce=vd(),He=h(Ce);de(Ze=>ve(He,Ze),[()=>s(G).qualityBadge.split(" ")[0]]),m(ke,Ce)};q(pe,ke=>{s(G).qualityBadge&&ke(we)})}de(()=>{bt(_e,"title",s(G).name),ve(Ie,s(G).name),ve(je,s(G).artist)}),z("click",W,()=>k(s(G))),m(re,W)}),z("wheel",J,g),m(N,O)};q(B,N=>{s(c).length>0&&N(ue)})}var le=y(B,2);{var te=N=>{var O=pd();m(N,O)};q(le,N=>{r().length>0&&N(te)})}m(Y,A)};q(P,Y=>{!s(u)&&r().length===0&&s(c).length===0&&s(d)?Y(F):Y(U,!1)},!0)}m(L,S)};q(D,L=>{n().length<2?L(Q):L(I,!1)})}m(R,X)},row:(R,V)=>{var X=md();const D=Je(()=>V.item),Q=Je(()=>V.index);var I=h(X);us(I,{get track(){return s(D)},get index(){return s(Q)},isEditable:!1,$$events:{play:()=>b(s(D))}}),m(R,X)}}}),de(()=>kl(se,n())),z("input",se,f),m(e,E),pt(),i()}var yd=M('<div class="knob svelte-1jla3sy"></div>'),kd=M('<div class="tooltip current svelte-1jla3sy"> </div> <span></span>',1),xd=M('<div slot="fallback" class="icon-fallback svelte-1jla3sy"><!></div>'),Ed=M('<span class="meta-tag quality"> </span>'),Md=M('<div class="dot svelte-1jla3sy"></div>'),Sd=M("<button><!> <!></button>"),Td=M('<div class="dock svelte-1jla3sy"><div class="progress-shadow svelte-1jla3sy"></div> <div><div class="rail svelte-1jla3sy"></div> <div class="fill svelte-1jla3sy"><!></div> <!></div> <div class="grid svelte-1jla3sy"><div class="info svelte-1jla3sy"><div class="art svelte-1jla3sy"><!></div> <div class="meta svelte-1jla3sy"><div class="title-row svelte-1jla3sy"><div class="title text-ellipsis svelte-1jla3sy"> </div> <button class="btn-icon tiny-dots svelte-1jla3sy"><!></button></div> <div class="artist-row svelte-1jla3sy"><div class="artist text-ellipsis svelte-1jla3sy"> </div> <!></div></div></div> <div class="controls svelte-1jla3sy"><button><!></button> <button class="btn-icon"><!></button> <button class="play-btn flex-center svelte-1jla3sy"><!></button> <button class="btn-icon"><!></button> <!></div> <div class="volume desktop svelte-1jla3sy"><div class="vol-icon svelte-1jla3sy"><!></div> <div class="custom-slider svelte-1jla3sy"><div class="slider-bg svelte-1jla3sy"><div class="slider-fill svelte-1jla3sy"></div> <div class="slider-knob svelte-1jla3sy"></div></div></div></div></div></div>'),$d=M("=== ./components/MiniPlayer.svelte === <!>",1);function Ad(e,t){ht(t,!1);const n=()=>ge(dt,"$status",c),r=()=>ge(Zt,"$currentSong",c),a=()=>ge(mn,"$favorites",c),i=()=>ge(Mn,"$stations",c),l=()=>ge(Zr,"$isFullPlayerOpen",c),[c,u]=Lt(),o=$(),d=$(),f=$(),v=$(),p=$(),b=$(),k=$(),g=$(),E=$(),C=$(),j=$(),ne=$();let oe=$(!1),se=$(!1),fe=!1,T=$(0),ee=$(),ye=$();const be=A=>B=>{B.stopPropagation(),A()};function R(A){if(isNaN(A)||A===null)return"0:00";const B=Math.floor(A/60),ue=Math.floor(A%60);return`${B}:${ue<10?"0":""}${ue}`}function V(A,B){const ue=B.getBoundingClientRect();return Math.max(0,Math.min(1,(A.clientX-ue.left)/ue.width))}function X(A){s(v)||(_(se,!0),_(T,V(A,s(ee))),window.addEventListener("mousemove",D),window.addEventListener("mouseup",Q))}function D(A){if(s(se)&&_(T,V(A,s(ee))),fe){const B=Math.round(V(A,s(ye))*100);Cr(B)}}function Q(){s(se)&&!s(v)&&ca(s(T)*s(o)),_(se,!1),fe=!1,window.removeEventListener("mousemove",D),window.removeEventListener("mouseup",Q)}function I(A){fe=!0;const B=Math.round(V(A,s(ye))*100);Cr(B),window.addEventListener("mousemove",D),window.addEventListener("mouseup",Q)}function L(){const A=(s(ne)+1)%3;A===0?(n().random&&Nn(),n().repeat&&On()):A===1?(n().random||Nn(),n().repeat&&On()):A===2&&(n().random&&Nn(),n().repeat||On())}function S(A){A.stopPropagation(),Jr(A,r(),{type:"general",source:"miniplayer"})}function P(A){Jr(A.detail.originalEvent,r(),{type:"general",source:"miniplayer"})}ie(()=>n(),()=>{_(o,n().duration>0?n().duration:1)}),ie(()=>n(),()=>{_(d,n().elapsed||0)}),ie(()=>n(),()=>{_(f,n().state==="play")}),ie(()=>r(),()=>{_(v,r().file?.startsWith("http"))}),ie(()=>r(),()=>{_(p,r().title||"Not Playing")}),ie(()=>r(),()=>{_(b,r().stationName||r().artist||"Moode")}),ie(()=>(r(),a()),()=>{_(k,r().file&&a().has(r().file))}),ie(()=>(r(),i()),()=>{_(g,cr(r(),i(),r().stationName))}),ie(()=>(s(v),s(se),s(T),s(d),s(o)),()=>{_(E,s(v)?0:s(se)?s(T)*100:s(d)/s(o)*100)}),ie(()=>(s(f),s(se),s(v)),()=>{_(C,s(f)&&!s(se)&&!s(v))}),ie(()=>n(),()=>{_(j,n().bitrate?`${n().bitrate} kbps`:n().format||"")}),ie(()=>n(),()=>{_(ne,n().repeat?2:n().random?1:0)}),qt(),yt();var F=$d(),U=y($e(F));{var Y=A=>{var B=Td(),ue=h(B),le=y(ue,2);let te;var N=y(h(le),2),O=h(N);{var J=Pe=>{var at=yd();m(Pe,at)};q(O,Pe=>{s(v)||Pe(J)})}var re=y(N,2);{var G=Pe=>{var at=kd(),ae=$e(at),Se=h(ae);de(et=>{Ke(ae,`left: ${s(E)??""}%`),ve(Se,et)},[()=>(s(se),s(T),s(o),s(d),x(()=>s(se)?R(s(T)*s(o)):R(s(d))))]),m(Pe,at)};q(re,Pe=>{(s(oe)||s(se))&&!s(v)&&Pe(G)})}qn(le,Pe=>_(ee,Pe),()=>s(ee));var W=y(le,2),he=h(W),me=h(he),Ee=h(me);Un(Ee,{get src(){return s(g)},alt:"art",radius:"4px",$$slots:{fallback:(Pe,at)=>{var ae=xd(),Se=h(ae);ce(Se,()=>(s(v),H(w),x(()=>s(v)?w.RADIO:w.ALBUMS))),m(Pe,ae)}}});var Ae=y(me,2),Te=h(Ae),_e=h(Te),Ie=h(_e),Re=y(_e,2),Be=h(Re);ce(Be,()=>(H(w),x(()=>w.DOTS)));var je=y(Te,2),Z=h(je),K=h(Z),pe=y(Z,2);{var we=Pe=>{var at=Ed(),ae=h(at);de(()=>ve(ae,s(j))),m(Pe,at)};q(pe,Pe=>{s(j)&&Pe(we)})}var ke=y(he,2),Ce=h(ke),He=pr(()=>be(()=>Hn.toggleFavorite(r())));let Ze;var Qe=h(Ce);ce(Qe,()=>(s(k),H(w),x(()=>s(k)?w.HEART_FILLED:w.HEART)));var Ye=y(Ce,2),Me=pr(()=>be(()=>Pr("previous"))),qe=h(Ye);ce(qe,()=>(H(w),x(()=>w.PREVIOUS)));var Ge=y(Ye,2),vt=pr(()=>be(cs)),tn=h(Ge);ce(tn,()=>(n(),H(w),x(()=>n().state==="play"?w.PAUSE:w.PLAY)));var tt=y(Ge,2),zt=pr(()=>be(()=>Pr("next"))),ct=h(tt);ce(ct,()=>(H(w),x(()=>w.NEXT)));var It=y(tt,2);{var nn=Pe=>{var at=Sd(),ae=pr(()=>be(L));let Se;var et=h(at);{var Yt=_t=>{var nt=Xe(),Nt=$e(nt);ce(Nt,()=>(H(w),x(()=>w.REPEAT))),m(_t,nt)},hs=_t=>{var nt=Xe(),Nt=$e(nt);ce(Nt,()=>(H(w),x(()=>w.SHUFFLE))),m(_t,nt)};q(et,_t=>{s(ne)===2?_t(Yt):_t(hs,!1)})}var ps=y(et,2);{var _s=_t=>{var nt=Md();m(_t,nt)};q(ps,_t=>{s(ne)>0&&_t(_s)})}de(()=>Se=Oe(at,1,"btn-icon desktop mode-btn svelte-1jla3sy",null,Se,{active:s(ne)>0})),z("click",at,function(..._t){s(ae)?.apply(this,_t)}),m(Pe,at)};q(It,Pe=>{s(v)||Pe(nn)})}var Ut=y(ke,2),Ht=h(Ut),Sn=h(Ht);ce(Sn,()=>(H(w),x(()=>w.VOLUME)));var Tn=y(Ht,2),vs=h(Tn),$n=h(vs),fs=y($n,2);qn(Tn,Pe=>_(ye,Pe),()=>s(ye)),Xt(()=>z("click",B,()=>Zr.set(!0))),Ri(B,(Pe,at)=>Ki?.(Pe,at),()=>500),Xt(()=>z("longpress",B,P)),de(()=>{Ke(ue,`width: ${s(E)??""}%; transition: ${s(C)?"width 0.25s linear":"none"}`),te=Oe(le,1,"progress-bar svelte-1jla3sy",null,te,{radio:s(v)}),Ke(N,`width: ${s(E)??""}%; transition: ${s(C)?"width 0.25s linear":"none"}`),bt(_e,"title",s(p)),ve(Ie,s(p)),bt(Z,"title",s(b)),ve(K,s(b)),Ze=Oe(Ce,1,"btn-icon desktop svelte-1jla3sy",null,Ze,{liked:s(k)}),Ke($n,`width: ${n(),x(()=>n().volume)??""}%`),Ke(fs,`left: ${n(),x(()=>n().volume)??""}%`)}),z("mouseenter",le,()=>_(oe,!0)),z("mouseleave",le,()=>_(oe,!1)),z("mousedown",le,Dt(X)),z("click",le,Dt(function(Pe){Gr.call(this,t,Pe)})),z("click",Re,S),z("click",Ce,function(...Pe){s(He)?.apply(this,Pe)}),z("click",Ye,function(...Pe){s(Me)?.apply(this,Pe)}),z("click",Ge,function(...Pe){s(vt)?.apply(this,Pe)}),z("click",tt,function(...Pe){s(zt)?.apply(this,Pe)}),z("mousedown",Tn,Dt(I)),z("click",Tn,Dt(function(Pe){Gr.call(this,t,Pe)})),m(A,B)};q(U,A=>{l()||A(Y)})}m(e,F),pt(),u()}var Cd=M('<div class="drag-zone svelte-1olwzt8"><div class="drag-handle-icon svelte-1olwzt8"><!></div></div>'),Pd=M('<div slot="fallback" class="icon-fallback svelte-1olwzt8"><!></div>'),Rd=M('<span class="meta-tag quality"> </span>'),Ld=M('<span class="dot svelte-1olwzt8"></span>'),zd=M("<button><!> <!></button>"),Id=M('<div style="width: 44px;"></div>'),Nd=M('<div><!> <div class="bg-container svelte-1olwzt8"><div class="bg-gradient-fallback svelte-1olwzt8"></div> <img class="bg-img svelte-1olwzt8" alt="" loading="eager"/> <div class="bg-overlay svelte-1olwzt8"></div></div> <div class="player-body svelte-1olwzt8"><div class="art-container svelte-1olwzt8"><div class="artwork svelte-1olwzt8"><!></div></div> <div class="controls-area svelte-1olwzt8"><div class="meta svelte-1olwzt8"><h1 class="title text-ellipsis svelte-1olwzt8"> </h1> <div class="artist-row svelte-1olwzt8"><h2 class="artist text-ellipsis svelte-1olwzt8"> </h2> <!></div></div> <div class="progress-section"><div><div class="common-track svelte-1olwzt8"><div class="common-fill svelte-1olwzt8"><div class="common-knob svelte-1olwzt8"></div></div></div></div> <div class="time-row svelte-1olwzt8"><span> </span> <span> </span></div></div> <div class="buttons-row svelte-1olwzt8"><button><!></button> <button class="btn-icon side-btn svelte-1olwzt8"><!></button> <button class="play-btn-large flex-center svelte-1olwzt8"><!></button> <button class="btn-icon side-btn svelte-1olwzt8"><!></button> <!></div> <div class="volume-row svelte-1olwzt8"><div class="vol-icon svelte-1olwzt8"><!></div> <div class="volume-hit-area svelte-1olwzt8"><div class="common-track svelte-1olwzt8"><div class="common-fill svelte-1olwzt8"></div> <div class="common-knob svelte-1olwzt8"></div></div></div></div></div></div></div>');function Ya(e,t){ht(t,!1);const n=()=>ge(Zt,"$currentSong",l),r=()=>ge(Mn,"$stations",l),a=()=>ge(dt,"$status",l),i=()=>ge(mn,"$favorites",l),[l,c]=Lt(),u=$(),o=$(),d=$(),f=$(),v=$(),p=$(),b=$(),k=$(),g=$(),E=$(),C=$();let j=st(t,"isDocked",8,!1),ne=0,oe=$(0),se=$(!1);function fe(){Zr.set(!1)}function T(ae){if(j())return;const Se=ae.target;Se.closest(".bar-hit-area")||Se.closest(".volume-hit-area")||(ne=ae.touches[0].clientY,_(se,!0))}function ee(ae){if(!s(se)||j())return;const Se=ae.touches[0].clientY-ne;Se>0&&(ae.cancelable&&Se>10&&ae.preventDefault(),_(oe,Se))}function ye(){j()||(_(se,!1),s(oe)>150?fe():_(oe,0))}let be=$(!1),R=$(0),V=$();function X(ae){const Se=Math.floor(ae/60)||0,et=Math.floor(ae%60)||0;return`${Se}:${et.toString().padStart(2,"0")}`}function D(ae,Se){const et=Se.getBoundingClientRect(),Yt=ae.touches?ae.touches[0].clientX:ae.clientX;return Math.max(0,Math.min(1,(Yt-et.left)/et.width))}function Q(ae){s(f)||(_(be,!0),_(R,D(ae,s(V))))}function I(ae){s(be)&&_(R,D(ae,s(V)))}function L(){s(be)&&!s(f)&&ca(s(R)*s(o)),_(be,!1)}let S=!1,P=$();function F(ae){S=!0;const Se=Math.round(D(ae,s(P))*100);Cr(Se),window.addEventListener("mousemove",U),window.addEventListener("mouseup",Y),window.addEventListener("touchmove",U,{passive:!1}),window.addEventListener("touchend",Y)}function U(ae){if(S){ae.preventDefault();const Se=Math.round(D(ae,s(P))*100);Cr(Se)}}function Y(){S=!1,window.removeEventListener("mousemove",U),window.removeEventListener("mouseup",Y),window.removeEventListener("touchmove",U),window.removeEventListener("touchend",Y)}function A(){const ae=(s(k)+1)%3;ae===0?(a().random&&Nn(),a().repeat&&On()):ae===1?(a().random||Nn(),a().repeat&&On()):ae===2&&(a().random&&Nn(),a().repeat||On())}ie(()=>(n(),r()),()=>{_(u,cr(n(),r(),n().stationName))}),ie(()=>a(),()=>{_(o,a().duration||1)}),ie(()=>a(),()=>{_(d,a().elapsed||0)}),ie(()=>n(),()=>{_(f,n().file?.startsWith("http"))}),ie(()=>a(),()=>{_(v,a().state==="play")}),ie(()=>(s(v),s(be),s(f)),()=>{_(p,s(v)&&!s(be)&&!s(f))}),ie(()=>(s(f),s(be),s(R),s(d),s(o)),()=>{_(b,s(f)?0:s(be)?s(R)*100:s(d)/s(o)*100)}),ie(()=>a(),()=>{_(k,a().repeat?2:a().random?1:0)}),ie(()=>a(),()=>{_(g,a().bitrate?`${a().bitrate} kbps`:a().format||"")}),ie(()=>(n(),i()),()=>{_(E,n().file&&i().has(n().file))}),ie(()=>H(j()),()=>{_(C,j()?"8px":"var(--radius-xl)")}),qt(),yt();var B=Nd();let ue;var le=h(B);{var te=ae=>{var Se=Cd(),et=h(Se),Yt=h(et);ce(Yt,()=>(H(w),x(()=>w.CHEVRON_DOWN))),z("touchstart",Se,T),z("touchmove",Se,ee),z("touchend",Se,ye),z("click",Se,fe),m(ae,Se)};q(le,ae=>{j()||ae(te)})}var N=y(le,2),O=y(h(N),2),J=y(N,2),re=h(J),G=h(re),W=h(G);Un(W,{get src(){return s(u)},alt:"Cover",get radius(){return s(C)},$$slots:{fallback:(ae,Se)=>{var et=Pd(),Yt=h(et);ce(Yt,()=>(s(f),H(w),x(()=>s(f)?w.RADIO:w.ALBUMS))),m(ae,et)}}});var he=y(re,2),me=h(he),Ee=h(me),Ae=h(Ee),Te=y(Ee,2),_e=h(Te),Ie=h(_e),Re=y(_e,2);{var Be=ae=>{var Se=Rd(),et=h(Se);de(()=>ve(et,s(g))),m(ae,Se)};q(Re,ae=>{s(g)&&ae(Be)})}var je=y(me,2),Z=h(je);let K;var pe=h(Z),we=h(pe);qn(Z,ae=>_(V,ae),()=>s(V));var ke=y(Z,2),Ce=h(ke),He=h(Ce),Ze=y(Ce,2),Qe=h(Ze),Ye=y(je,2),Me=h(Ye);let qe;var Ge=h(Me);ce(Ge,()=>(s(E),H(w),x(()=>s(E)?w.HEART_FILLED:w.HEART)));var vt=y(Me,2),tn=h(vt);ce(tn,()=>(H(w),x(()=>w.PREVIOUS)));var tt=y(vt,2),zt=h(tt);ce(zt,()=>(a(),H(w),x(()=>a().state==="play"?w.PAUSE:w.PLAY)));var ct=y(tt,2),It=h(ct);ce(It,()=>(H(w),x(()=>w.NEXT)));var nn=y(ct,2);{var Ut=ae=>{var Se=zd();let et;var Yt=h(Se);{var hs=nt=>{var Nt=Xe(),gs=$e(Nt);ce(gs,()=>(H(w),x(()=>w.REPEAT))),m(nt,Nt)},ps=nt=>{var Nt=Xe(),gs=$e(Nt);ce(gs,()=>(H(w),x(()=>w.SHUFFLE))),m(nt,Nt)};q(Yt,nt=>{s(k)===2?nt(hs):nt(ps,!1)})}var _s=y(Yt,2);{var _t=nt=>{var Nt=Ld();m(nt,Nt)};q(_s,nt=>{s(k)>0&&nt(_t)})}de(()=>et=Oe(Se,1,"btn-icon side-btn mode-btn svelte-1olwzt8",null,et,{active:s(k)>0})),z("click",Se,A),m(ae,Se)},Ht=ae=>{var Se=Id();m(ae,Se)};q(nn,ae=>{s(f)?ae(Ht,!1):ae(Ut)})}var Sn=y(Ye,2),Tn=h(Sn),vs=h(Tn);ce(vs,()=>(H(w),x(()=>w.VOLUME)));var $n=y(Tn,2),fs=h($n),Pe=h(fs),at=y(Pe,2);qn($n,ae=>_(P,ae),()=>s(P)),de((ae,Se)=>{ue=Oe(B,1,"full-player svelte-1olwzt8",null,ue,{"is-docked":j()}),Ke(B,j()?"":`transform: translateY(${s(oe)}px); transition: ${s(se)?"none":"transform 0.3s cubic-bezier(0.2, 0.8, 0.2, 1)"}`),bt(O,"src",s(u)),Ke(G,`transform: scale(${1-s(oe)/3e3})`),Ke(he,`opacity: ${1-s(oe)/400}`),ve(Ae,(n(),x(()=>n().title||"Not Playing"))),ve(Ie,(n(),x(()=>n().stationName||n().artist||"Moode Audio"))),K=Oe(Z,1,"bar-hit-area svelte-1olwzt8",null,K,{"is-docked-bar":j()}),Ke(we,`width: ${s(b)??""}%; transition: ${s(p)?"width 0.3s linear":"none"}`),ve(He,ae),ve(Qe,Se),qe=Oe(Me,1,"btn-icon side-btn svelte-1olwzt8",null,qe,{liked:s(E)}),Ke(Pe,`width: ${a(),x(()=>a().volume)??""}%`),Ke(at,`left: ${a(),x(()=>a().volume)??""}%; right: auto;`)},[()=>(s(be),s(R),s(o),s(d),x(()=>s(be)?X(s(R)*s(o)):X(s(d)))),()=>(s(f),s(o),x(()=>s(f)?"LIVE":X(s(o))))]),z("mousedown",Z,Q),z("touchstart",Z,Q,void 0,!0),z("mousemove",Z,function(...ae){(s(be)?I:null)?.apply(this,ae)}),z("touchmove",Z,function(...ae){(s(be)?I:null)?.apply(this,ae)},void 0,!0),z("mouseup",Z,L),z("touchend",Z,L),z("click",Me,()=>Hn.toggleFavorite(n())),z("click",vt,()=>Pr("previous")),z("click",tt,function(...ae){cs?.apply(this,ae)}),z("click",ct,()=>Pr("next")),z("mousedown",$n,Dt(F)),z("touchstart",$n,Dt(F)),Rt(3,B,()=>Ni,()=>({y:j()?0:800,duration:300,opacity:1})),m(e,B),pt(),c()}const Od="/assets/wave-logo-C1390byt.svg",Vs={async syncLibrary(){if(Le(Ot))return;Ot.set(!0);const e=new qi,t=window.location.origin+"/wave-api.php";e.postMessage({type:"START_SYNC",payload:{url:t}}),e.onmessage=n=>{const{type:r,status:a,count:i,message:l}=n.data;if(r==="PROGRESS"){const c={connecting:"Requesting library...",downloading:"Downloading data...",parsing:"Processing metadata...",saving:`Saving ${i} tracks...`};c[a]&&Fe(c[a],"info")}r==="DONE"&&(Fe(`Library updated: ${i} tracks`,"success"),Ot.set(!1),e.terminate()),r==="ERROR"&&(console.error("[API] Sync Error:",l),Fe(`Sync Failed: ${l}`,"error"),Ot.set(!1),e.terminate())},e.onerror=n=>{console.error("[API] Worker crash:",n),Fe("Sync worker crashed","error"),Ot.set(!1),e.terminate()}},async loadRadioStations(){if(!Le(Ur)){Ur.set(!0);try{const t=await fetch(xc.STATIONS(!1));if(!t.ok)throw new Error("Network error");const n=await t.json();if(n.error)throw new Error(n.error);if(!Array.isArray(n))throw new Error("Invalid response format");const r=n.map(a=>({id:a.id,name:a.name,file:a.station,station:a.station,image:a.logo,genre:a.genre||"Radio"}));r.sort((a,i)=>a.name.localeCompare(i.name,void 0,{sensitivity:"base"})),Mn.set(r)}catch(e){console.error("[API] Failed to load stations",e),Fe("Failed to load radio","error")}finally{Ur.set(!1)}}}};var Dd=M('<div class="backdrop svelte-ji5owg"></div>'),Fd=M('<button><span class="icon svelte-ji5owg"><!></span> <span> </span></button>'),Bd=M('<!> <aside><div class="header svelte-ji5owg"><div class="header-inner svelte-ji5owg"><button class="collapse-btn svelte-ji5owg"><div class="chevron svelte-ji5owg"><!></div></button> <div><img alt="Logo" class="logo svelte-ji5owg"/></div></div> <button class="btn-icon mobile-close svelte-ji5owg"><!></button></div> <div class="scroll-area custom-scrollbar svelte-ji5owg"><nav class="svelte-ji5owg"><!> <button title="Search"><span class="icon svelte-ji5owg"><!></span> <span>Search</span></button> <div class="sep svelte-ji5owg"></div> <button class="nav-item sync svelte-ji5owg" title="Update Library"><span><!></span> <span> </span></button> <div><div class="settings svelte-ji5owg"><div class="row svelte-ji5owg"><input type="text" placeholder="192.168..." class="svelte-ji5owg"/> <button class="save svelte-ji5owg">OK</button></div></div></div></nav> <div class="footer svelte-ji5owg"><div>Moode WaveUI</div></div></div></aside>',1);function jd(e,t){ht(t,!1);const n=()=>ge(Ot,"$isSyncingLibrary",i),r=()=>ge(js,"$isSidebarCollapsed",i),a=()=>ge(xt,"$activeMenuTab",i),[i,l]=Lt(),c=$();let u=st(t,"isOpen",8,!1);const o=sa();let d=$(0),f=$(0),v=$(!1);const p=[{id:"queue",label:"Queue",icon:w.MENU},{id:"favorites",label:"Favorites",icon:w.HEART},{id:"artists",label:"Artists",icon:w.ARTISTS},{id:"albums",label:"Albums",icon:w.ALBUMS},{id:"playlists",label:"Playlists",icon:w.PLAYLISTS},{id:"radio",label:"Radio",icon:w.RADIO}];let b=$(Tr.MOODE_IP);function k(K){window.location.hash=`/${K}`,o("close")}async function g(){n()||(await Vs.syncLibrary(),window.location.hash="/artists")}function E(){js.update(K=>!K)}function C(K){u()&&(_(d,K.touches[0].clientX),_(f,s(d)),_(v,!0))}function j(K){s(v)&&_(f,K.touches[0].clientX)}function ne(){s(v)&&(s(f)-s(d)<-70&&o("close"),_(v,!1),_(d,0),_(f,0))}ie(()=>(s(v),s(f),s(d)),()=>{_(c,s(v)?Math.min(0,s(f)-s(d)):0)}),qt(),yt();var oe=Bd(),se=$e(oe);{var fe=K=>{var pe=Dd();z("click",pe,()=>o("close")),Rt(3,pe,()=>xn,()=>({duration:200})),m(K,pe)};q(se,K=>{u()&&K(fe)})}var T=y(se,2);let ee,ye;var be=h(T),R=h(be),V=h(R),X=h(V),D=h(X);ce(D,()=>(H(w),x(()=>w.BACK)));var Q=y(V,2);let I;var L=h(Q),S=y(R,2),P=h(S);ce(P,()=>(H(w),x(()=>w.CLOSE)));var F=y(be,2),U=h(F),Y=h(U);Pt(Y,1,()=>p,vn,(K,pe)=>{var we=Fd();let ke;var Ce=h(we),He=h(Ce);ce(He,()=>(s(pe),x(()=>s(pe).icon)));var Ze=y(Ce,2);let Qe;var Ye=h(Ze);de(()=>{ke=Oe(we,1,"nav-item svelte-ji5owg",null,ke,{active:a()===s(pe).id}),bt(we,"title",(s(pe),x(()=>s(pe).label))),Qe=Oe(Ze,1,"label-text svelte-ji5owg",null,Qe,{hidden:r()}),ve(Ye,(s(pe),x(()=>s(pe).label)))}),z("click",we,()=>k(s(pe).id)),m(K,we)});var A=y(Y,2);let B;var ue=h(A),le=h(ue);ce(le,()=>(H(w),x(()=>w.SEARCH)));var te=y(ue,2);let N;var O=y(A,4),J=h(O);let re;var G=h(J);ce(G,()=>(H(w),x(()=>w.SYNC)));var W=y(J,2);let he;var me=h(W),Ee=y(O,2);let Ae;var Te=h(Ee),_e=h(Te),Ie=h(_e),Re=y(Ie,2),Be=y(U,2),je=h(Be);let Z;de(()=>{ee=Oe(T,1,"side-menu svelte-ji5owg",null,ee,{"mobile-open":u(),collapsed:r()}),ye=Ke(T,"",ye,{transform:u()?`translateX(${s(c)}px)`:"",transition:s(v)?"none":"width 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.3s ease"}),bt(V,"title",r()?"Expand":"Collapse"),Ke(X,`transform: rotate(${r()?"180deg":"0deg"})`),I=Oe(Q,1,"logo-wrapper svelte-ji5owg",null,I,{hidden:r()}),bt(L,"src",Od),B=Oe(A,1,"nav-item svelte-ji5owg",null,B,{active:a()==="search"}),N=Oe(te,1,"label-text svelte-ji5owg",null,N,{hidden:r()}),O.disabled=n(),re=Oe(J,1,"icon svelte-ji5owg",null,re,{spin:n()}),he=Oe(W,1,"label-text svelte-ji5owg",null,he,{hidden:r()}),ve(me,n()?"Syncing...":"Update Library"),Ae=Oe(Ee,1,"settings-wrapper svelte-ji5owg",null,Ae,{hidden:r()}),Z=Oe(je,1,"footer-text svelte-ji5owg",null,Z,{hidden:r()})}),z("click",V,E),z("click",S,()=>o("close")),z("click",A,()=>k("search")),z("click",O,g),ta(Ie,()=>s(b),K=>_(b,K)),z("click",Re,()=>{Tr.setMoodeIp(s(b)),location.reload()}),z("touchstart",T,C),z("touchmove",T,j),z("touchend",T,ne),m(e,oe),pt(),l()}var qd=M('<span class="meta-tag"> </span>'),Ud=M('<div slot="header" class="content-padded svelte-185fgrr"><div class="view-header svelte-185fgrr"><div class="header-art svelte-185fgrr" style="background: var(--c-surface-active);"><div class="header-icon-wrap svelte-185fgrr"><!></div></div> <div class="header-info svelte-185fgrr"><div class="header-text-group svelte-185fgrr"><div class="header-label svelte-185fgrr">Now Playing</div> <h1 class="header-title svelte-185fgrr">Current Queue</h1> <div class="meta-badges"><span class="meta-tag"> </span> <!></div></div> <div class="header-actions svelte-185fgrr"><button class="btn-action svelte-185fgrr" title="Save Queue"><!></button> <button><!></button></div></div></div></div>'),Hd=M('<div slot="row"><!></div>'),Yd=M('<div class="view-container svelte-185fgrr"><!></div>');function Vd(e,t){ht(t,!1);const n=()=>ge($r,"$queue",r),[r,a]=Lt();let i=$(!1),l=$("");function c(){_(i,!s(i))}function u(b){s(i)||la(`play ${b}`)}function o(b){Ft.removeFromQueue(b)}async function d(){const b=prompt("Enter playlist name:");b&&(await Ft.saveQueue(b),ua())}function f(b,k){Ft.moveTrack(b,k)}ie(()=>n(),()=>{if(n().length>=0){const b=n().reduce((k,g)=>k+(parseFloat(g.time)||0),0);if(b>0){const k=Math.floor(b/3600),g=Math.floor(b%3600/60);k>0?_(l,`${k} hr ${g} min`):_(l,`${g} min`)}else _(l,"")}}),qt(),yt();var v=Yd(),p=h(v);ds(p,{get itemsStore(){return $r},get isEditMode(){return s(i)},emptyText:"Queue is empty",onMoveItem:f,$$slots:{header:(b,k)=>{var g=Ud(),E=h(g),C=h(E),j=h(C),ne=h(j);ce(ne,()=>(H(w),x(()=>w.MENU)));var oe=y(C,2),se=h(oe),fe=y(h(se),4),T=h(fe),ee=h(T),ye=y(T,2);{var be=L=>{var S=qd(),P=h(S);de(()=>ve(P,s(l))),m(L,S)};q(ye,L=>{s(l)&&L(be)})}var R=y(se,2),V=h(R),X=h(V);ce(X,()=>(H(w),x(()=>w.SAVE)));var D=y(V,2);let Q;var I=h(D);ce(I,()=>(s(i),H(w),x(()=>s(i)?w.ACCEPT:w.EDIT))),de(()=>{ve(ee,`${n(),x(()=>n().length)??""} tracks`),Q=Oe(D,1,"btn-action svelte-185fgrr",null,Q,{active:s(i)}),bt(D,"title",s(i)?"Finish Editing":"Edit Queue")}),z("click",V,d),z("click",D,c),m(b,g)},row:(b,k)=>{var g=Hd();const E=Je(()=>k.item),C=Je(()=>k.index),j=Je(()=>k.startDrag);var ne=h(g);us(ne,{get track(){return s(E)},get index(){return s(C)},get isEditable(){return s(i)},$$events:{play:()=>u(s(C)),remove:()=>o(s(C)),startdrag(...oe){s(j)?.apply(this,oe)}}}),m(b,g)}}}),m(e,v),pt(),a()}var Wd=M('<div class="toast-container svelte-k2bvk7"><div> </div></div>'),Qd=M('<button class="back-btn svelte-k2bvk7"><span class="icon-inline svelte-k2bvk7"><!></span> Back</button>'),Xd=M('<div class="view-title svelte-k2bvk7"><!></div>'),Kd=M('<div class="full-player-modal svelte-k2bvk7"><!></div>'),Gd=M('<div class="app-container svelte-k2bvk7"><div class="app-layout svelte-k2bvk7"><!> <!> <main class="content-area svelte-k2bvk7"><header class="top-bar svelte-k2bvk7"><button class="hamburger-btn svelte-k2bvk7"><!></button> <!></header> <div class="scroll-container svelte-k2bvk7"><div class="view-wrapper svelte-k2bvk7"><!></div></div></main> <div class="docked-player-container svelte-k2bvk7"><!></div></div> <div class="mini-player-wrapper svelte-k2bvk7"><!></div></div> <!>',1);function Zd(e,t){ht(t,!1);const n=()=>ge(At,"$navigationStack",l),r=()=>ge(Ds,"$toastMessage",l),a=()=>ge(xt,"$activeMenuTab",l),i=()=>ge(Zr,"$isFullPlayerOpen",l),[l,c]=Lt();let u=$(!1);hr(()=>{window.history.replaceState({depth:n().length},"","");const I=()=>void 0;return window.addEventListener("popstate",I),()=>window.removeEventListener("popstate",I)}),yt();var o=Gd(),d=$e(o),f=h(d),v=h(f);{var p=I=>{var L=Wd(),S=h(L),P=h(S);de(()=>{Oe(S,1,`toast-body ${r().type??""}`,"svelte-k2bvk7"),ve(P,r().text)}),Rt(3,L,()=>Ni,()=>({y:-50,duration:300})),m(I,L)};q(v,I=>{r()&&I(p)})}var b=y(v,2);jd(b,{get isOpen(){return s(u)},$$events:{close:()=>_(u,!1)}});var k=y(b,2),g=h(k),E=h(g),C=h(E);ce(C,()=>w.MENU);var j=y(E,2);{var ne=I=>{var L=Qd(),S=h(L),P=h(S);ce(P,()=>w.BACK),z("click",L,function(...F){kc?.apply(this,F)}),m(I,L)},oe=I=>{var L=Xd(),S=h(L);{var P=U=>{var Y=Xn("Radio");m(U,Y)},F=U=>{var Y=Xe(),A=$e(Y);{var B=le=>{var te=Xn("Playlists");m(le,te)},ue=le=>{var te=Xe(),N=$e(te);{var O=re=>{var G=Xn("Search");m(re,G)},J=re=>{var G=Xe(),W=$e(G);{var he=Ee=>{var Ae=Xn("Queue");m(Ee,Ae)},me=Ee=>{var Ae=Xe(),Te=$e(Ae);{var _e=Re=>{var Be=Xn("Favorites");m(Re,Be)},Ie=Re=>{var Be=Xn();de(je=>ve(Be,je),[()=>(a()||"Library").charAt(0).toUpperCase()+(a()||"library").slice(1)]),m(Re,Be)};q(Te,Re=>{a()==="favorites"?Re(_e):Re(Ie,!1)},!0)}m(Ee,Ae)};q(W,Ee=>{a()==="queue"?Ee(he):Ee(me,!1)},!0)}m(re,G)};q(N,re=>{a()==="search"?re(O):re(J,!1)},!0)}m(le,te)};q(A,le=>{a()==="playlists"?le(B):le(ue,!1)},!0)}m(U,Y)};q(S,U=>{a()==="radio"?U(P):U(F,!1)})}m(I,L)};q(j,I=>{n().length>1?I(ne):I(oe,!1)})}var se=y(g,2),fe=h(se),T=h(fe);{var ee=I=>{Wu(I,{})},ye=I=>{var L=Xe(),S=$e(L);{var P=U=>{Vd(U,{})},F=U=>{var Y=Xe(),A=$e(Y);{var B=le=>{ad(le,{})},ue=le=>{var te=Xe(),N=$e(te);{var O=re=>{wd(re,{})},J=re=>{zu(re,{get activeCategory(){return a()}})};q(N,re=>{a()==="search"?re(O):re(J,!1)},!0)}m(le,te)};q(A,le=>{a()==="playlists"||a()==="favorites"?le(B):le(ue,!1)},!0)}m(U,Y)};q(S,U=>{a()==="queue"?U(P):U(F,!1)},!0)}m(I,L)};q(T,I=>{a()==="radio"?I(ee):I(ye,!1)})}var be=y(k,2),R=h(be);Ya(R,{isDocked:!0});var V=y(f,2),X=h(V);Ad(X,{});var D=y(d,2);{var Q=I=>{var L=Kd(),S=h(L);Ya(S,{}),m(I,L)};q(D,I=>{i()&&I(Q)})}de(()=>Ke(se,`padding-bottom: ${i()?"0px":"var(--mini-player-height)"};`)),z("click",E,()=>_(u,!0)),m(e,o),pt(),c()}var Jd=M('<button class="back-btn-area svelte-l8h85k"><span class="back-icon svelte-l8h85k"><!></span></button> <span class="header-title svelte-l8h85k">Select Playlist</span>',1),ev=M('<div class="track-info svelte-l8h85k"><div class="title text-ellipsis svelte-l8h85k"> </div> <div class="artist text-ellipsis svelte-l8h85k"> </div></div>'),tv=M('<button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span> </span></button>'),nv=M('<div class="empty-msg svelte-l8h85k">No custom playlists</div>'),rv=M("<!> <!>",1),sv=M('<button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Go to Album</span></button> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Go to Artist</span></button>',1),av=M('<div class="sep svelte-l8h85k"></div> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Remove from Playlist</span></button>',1),iv=M('<div class="sep svelte-l8h85k"></div> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Remove from Queue</span></button>',1),ov=M('<button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Play Next</span></button> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Add to Queue</span></button> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Add to Playlist...</span></button> <!> <button class="menu-row svelte-l8h85k"><span><!></span> <span> </span></button> <!> <!>',1),lv=M('<div class="backdrop svelte-l8h85k"><div class="menu-card svelte-l8h85k"><div class="menu-header svelte-l8h85k"><!></div> <div class="menu-items scroll-y svelte-l8h85k"><!></div></div></div>');function cv(e,t){ht(t,!1);const n=()=>ge(ia,"$contextMenu",i),r=()=>ge(mn,"$favorites",i),a=()=>ge(aa,"$playlists",i),[i,l]=Lt(),c=$(),u=$(),o=$(),d=$(),f=$(),v=$();let p=$(),b=$(),k=$(),g=$(0),E=$(0),C=$("main"),j=$(!1);function ne(S){n().isOpen&&(_(j,!1),Vt())}function oe(){Vt()}function se(){n().track&&Ft.playNext(n().track.file),Vt()}function fe(){n().track&&Ft.addToQueue(n().track.file),Vt()}function T(){n().track&&Hn.toggleFavorite(n().track),Vt()}function ee(){const S=n().track;S&&S.album&&kn("tracks_by_album",{name:S.album,artist:S.artist}),Vt()}function ye(){const S=n().track;S&&S.artist&&kn("albums_by_artist",{name:S.artist}),Vt()}async function be(){const{playlistName:S,index:P}=n().context;S&&P!==null&&(nr.update(F=>{const U=[...F];return U.splice(P,1),U}),await Hn.removeFromPlaylist(S,P)),Vt()}function R(){const{index:S}=n().context;S!=null&&Ft.removeFromQueue(S),Vt()}function V(){_(C,"playlists")}function X(){_(C,"main")}async function D(S){const P=n().track;if(P)try{const F=S.replace(/"/g,'\\"'),U=P.file.replace(/"/g,'\\"');await xe.send(`playlistadd "${F}" "${U}"`),Fe(`Added to "${S}"`,"success"),Vt()}catch(F){console.error(F),Fe("Failed to add","error")}}ie(()=>n(),()=>{n().isOpen&&_(C,"main")}),ie(()=>(n(),s(j)),()=>{n().isOpen?!s(j)&&typeof history<"u"&&(history.pushState({contextMenuOpen:!0},""),_(j,!0)):s(j)&&typeof history<"u"&&(history.back(),_(j,!1))}),ie(()=>(n(),r()),()=>{_(c,n().track&&r().has(n().track.file))}),ie(()=>n(),()=>{_(u,n().track&&(n().track.file.includes("http")||n().track.file.includes("://")))}),ie(()=>n(),()=>{_(o,n().context?.type==="playlist")}),ie(()=>n(),()=>{_(d,n().context?.type==="queue")}),ie(()=>n(),()=>{_(f,n().context?.source==="miniplayer")}),ie(()=>(n(),s(E),s(g),s(p),s(f),s(b)),()=>{_(v,(()=>{if(!n().isOpen)return"";const S=n().triggerRect,P=n().x,F=n().y,U=s(E)||220,Y=s(g)||320;if(s(p)<=768&&s(f)&&S)return`
        position: fixed; 
        bottom: ${s(b)-S.top}px; 
        left: 50%; 
        transform: translateX(-50%); 
        margin: 0; 
        transform-origin: bottom center;
      `;let A=0,B=0,ue="top left";if(S){const te=S.left+S.width/2,N=S.top+S.height/2,O=te>s(p)/2,J=N>s(b)/2;O?(A=S.right-U,ue=J?"bottom right":"top right"):(A=S.left,ue=J?"bottom left":"top left"),J?B=S.top-Y:B=S.bottom}else A=P,B=F,A+U>s(p)&&(A=s(p)-U-10),B+Y>s(b)&&(B=s(b)-Y-10);const le=8;return A<le&&(A=le),A+U>s(p)-le&&(A=s(p)-U-le),B<le&&(B=le),B+Y>s(b)-le&&(B=s(b)-Y-le),`position: fixed; top: ${B}px; left: ${A}px; margin: 0; transform-origin: ${ue};`})())}),qt(),yt();var Q=Xe();z("popstate",_n,ne);var I=$e(Q);{var L=S=>{var P=lv(),F=h(P),U=h(F),Y=h(U);{var A=O=>{var J=Jd(),re=$e(J),G=h(re),W=h(G);ce(W,()=>(H(w),x(()=>w.BACK))),z("click",re,X),m(O,J)},B=O=>{var J=ev(),re=h(J),G=h(re),W=y(re,2),he=h(W);de(()=>{ve(G,(n(),x(()=>n().track.title))),ve(he,(n(),x(()=>n().track.artist)))}),m(O,J)};q(Y,O=>{s(C)==="playlists"?O(A):O(B,!1)})}var ue=y(U,2),le=h(ue);{var te=O=>{var J=rv(),re=$e(J);Pt(re,1,a,vn,(he,me)=>{var Ee=Xe(),Ae=$e(Ee);{var Te=_e=>{var Ie=tv(),Re=h(Ie),Be=h(Re);ce(Be,()=>(H(w),x(()=>w.PLAYLISTS)));var je=y(Re,2),Z=h(je);de(()=>ve(Z,(s(me),x(()=>s(me).name)))),z("click",Ie,()=>D(s(me).name)),m(_e,Ie)};q(Ae,_e=>{s(me),x(()=>s(me).name!=="Favorites")&&_e(Te)})}m(he,Ee)});var G=y(re,2);{var W=he=>{var me=nv();m(he,me)};q(G,he=>{a(),x(()=>a().filter(me=>me.name!=="Favorites").length===0)&&he(W)})}m(O,J)},N=O=>{var J=ov(),re=$e(J),G=h(re),W=h(G);ce(W,()=>(H(w),x(()=>w.NEXT)));var he=y(re,2),me=h(he),Ee=h(me);ce(Ee,()=>(H(w),x(()=>w.MENU)));var Ae=y(he,2),Te=h(Ae),_e=h(Te);ce(_e,()=>(H(w),x(()=>w.ADD_TO_PLAYLIST||w.ADD)));var Ie=y(Ae,2);{var Re=Qe=>{var Ye=sv(),Me=$e(Ye),qe=h(Me),Ge=h(qe);ce(Ge,()=>(H(w),x(()=>w.ALBUM_LINK||w.ALBUMS)));var vt=y(Me,2),tn=h(vt),tt=h(tn);ce(tt,()=>(H(w),x(()=>w.ARTIST_LINK||w.ARTISTS))),z("click",Me,ee),z("click",vt,ye),m(Qe,Ye)};q(Ie,Qe=>{s(u)||Qe(Re)})}var Be=y(Ie,2),je=h(Be);let Z;var K=h(je);ce(K,()=>(s(c),H(w),x(()=>s(c)?w.HEART_FILLED:w.HEART)));var pe=y(je,2),we=h(pe),ke=y(Be,2);{var Ce=Qe=>{var Ye=av(),Me=y($e(Ye),2),qe=h(Me),Ge=h(qe);ce(Ge,()=>(H(w),x(()=>w.REMOVE))),z("click",Me,be),m(Qe,Ye)};q(ke,Qe=>{s(o)&&Qe(Ce)})}var He=y(ke,2);{var Ze=Qe=>{var Ye=iv(),Me=y($e(Ye),2),qe=h(Me),Ge=h(qe);ce(Ge,()=>(H(w),x(()=>w.REMOVE))),z("click",Me,R),m(Qe,Ye)};q(He,Qe=>{s(d)&&Qe(Ze)})}de(()=>{Z=Oe(je,1,"icon svelte-l8h85k",null,Z,{liked:s(c)}),ve(we,s(c)?"Unlike":"Like")}),z("click",re,se),z("click",he,fe),z("click",Ae,V),z("click",Be,T),m(O,J)};q(le,O=>{s(C)==="playlists"?O(te):O(N,!1)})}qn(F,O=>_(k,O),()=>s(k)),de(()=>Ke(F,s(v))),Sa(F,"clientHeight",O=>_(g,O)),Sa(F,"clientWidth",O=>_(E,O)),Rt(3,F,()=>Oi,()=>({start:.95,duration:100})),z("click",F,Dt(function(O){Gr.call(this,t,O)})),z("click",P,oe),Rt(3,P,()=>xn,()=>({duration:100})),m(S,P)};q(I,S=>{n(),x(()=>n().isOpen)&&S(L)})}$a("innerWidth",S=>_(p,S)),$a("innerHeight",S=>_(b,S)),m(e,Q),pt(),l()}const Va={init(){this.handleHashChange(),window.addEventListener("hashchange",()=>this.handleHashChange())},handleHashChange(){let e=window.location.hash.slice(1);for(;e.startsWith("/");)e=e.slice(1);if(!e){(Le(At).length>1||Le(xt)==="search")&&(this.setRootTab("artists"),window.location.hash="/artists");return}const t=e.split("/").map(decodeURIComponent),n=t[0];let r=yc();switch(r||t.length>1&&(n==="album"&&t.length>=3?r={artist:t[1],name:t[2]}:n==="artist"&&t.length>=2?r={name:t[1]}:r={name:t[1],displayName:t[1]}),console.log(`[Router] Navigating: ${n}`,r),n){case"queue":this.setRootTab("queue");break;case"radio":this.setRootTab("radio");break;case"playlists":this.setRootTab("playlists");break;case"favorites":xt.set("favorites"),At.set([{view:"root"},{view:"details",data:{name:"Favorites"}}]);break;case"artists":this.setRootTab("artists");break;case"albums":this.setRootTab("albums");break;case"search":xt.set("search"),t[1]&&yr.set(t[1]),At.set([{view:"root"}]);break;case"album":xt.set("albums"),At.set([{view:"root"},{view:"tracks_by_album",data:r}]);break;case"artist":xt.set("artists"),At.set([{view:"root"},{view:"albums_by_artist",data:r}]);break;case"playlist":xt.set("playlists"),At.set([{view:"root"},{view:"details",data:r}]);break;default:this.setRootTab("artists");break}},setRootTab(e){xt.set(e),At.set([{view:"root"}])},updateUrl(e,t){let n="";if(e==="root"){const r=Le(xt);if(r==="search"){const a=Le(yr);n=a?`search/${encodeURIComponent(a)}`:"search"}else n=r}else if(e==="details"){const r=t.name||t;n=r==="Favorites"?"favorites":`playlist/${encodeURIComponent(r)}`}else if(e==="albums_by_artist"){const r=t.name||t;n=`artist/${encodeURIComponent(r)}`}else if(e==="tracks_by_album"){const r=t.name||t,a=t.artist;a?n=`album/${encodeURIComponent(a)}/${encodeURIComponent(r)}`:n=`album/${encodeURIComponent(r)}`}else e==="queue"&&(n="queue");if(n){const r=`#/${n}`;decodeURIComponent(window.location.hash)!==decodeURIComponent(r)&&(window.location.hash=`/${n}`)}}};var uv=M("<!> <!>",1);function dv(e,t){ht(t,!1),hr(async()=>{Va.init(),wc((i,l)=>{Va.updateUrl(i,l)}),Ui(),Vs.loadRadioStations();try{const i=await bn.getArtists();i.length>0?console.log(`[App] Database ready. Loaded ${i.length} artists from cache.`):(console.log("[App] Database empty. Starting initial sync..."),Vs.syncLibrary())}catch(i){console.error("[App] DB Check failed:",i),Fe("Local DB error. Please update library manually.","error")}}),yt();var n=uv(),r=$e(n);Zd(r,{});var a=y(r,2);cv(a,{}),m(e,n),pt()}ol(dv,{target:document.getElementById("app")});
