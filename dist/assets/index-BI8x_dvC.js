(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();const $s=!1;var ts=Array.isArray,Ki=Array.prototype.indexOf,ns=Array.from,Wa=Object.defineProperty,nr=Object.getOwnPropertyDescriptor,Va=Object.getOwnPropertyDescriptors,Gi=Object.prototype,Zi=Array.prototype,Vs=Object.getPrototypeOf,fa=Object.isExtensible;function Ji(e){return typeof e=="function"}const Et=()=>{};function eo(e){return e()}function Wr(e){for(var t=0;t<e.length;t++)e[t]()}function Qa(){var e,t,n=new Promise((r,a)=>{e=r,t=a});return{promise:n,resolve:e,reject:t}}const ot=2,Qs=4,rs=8,to=1<<24,Zt=16,dn=32,Hn=64,ss=128,Bt=512,at=1024,wt=2048,jt=4096,Mt=8192,ln=16384,as=32768,Nn=65536,ha=1<<17,Xa=1<<18,cr=1<<19,Ka=1<<20,an=1<<25,Dn=32768,As=1<<21,Xs=1<<22,bn=1<<23,Pn=Symbol("$state"),no=Symbol("legacy props"),ro=Symbol(""),Jn=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Ks(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function so(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function ao(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function io(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function oo(e){throw new Error("https://svelte.dev/e/effect_orphan")}function lo(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function co(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function uo(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function vo(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function fo(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function ho(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const po=1,_o=2,Ga=4,go=8,mo=16,bo=2,wo=4,yo=8,ko=1,xo=2,Eo=4,Mo=1,So=2,ct=Symbol(),To="http://www.w3.org/1999/xhtml";function $o(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Za(e){return e===this.v}function Gs(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function Ja(e){return!Gs(e,this.v)}let ur=!1,Ao=!1;function Co(){ur=!0}let We=null;function rr(e){We=e}function ht(e,t=!1,n){We={p:We,i:!1,c:null,e:null,s:e,x:null,l:ur&&!t?{s:null,u:null,$:[]}:null}}function pt(e){var t=We,n=t.e;if(n!==null){t.e=null;for(var r of n)hi(r)}return t.i=!0,We=t.p,{}}function Rr(){return!ur||We!==null&&We.l===null}let An=[];function ei(){var e=An;An=[],Wr(e)}function Yn(e){if(An.length===0&&!wr){var t=An;queueMicrotask(()=>{t===An&&ei()})}An.push(e)}function Po(){for(;An.length>0;)ei()}function ti(e){var t=Fe;if(t===null)return Ie.f|=bn,e;if((t.f&as)===0){if((t.f&ss)===0)throw e;t.b.error(e)}else sr(e,t)}function sr(e,t){for(;t!==null;){if((t.f&ss)!==0)try{t.b.error(e);return}catch(n){e=n}t=t.parent}throw e}const Ir=new Set;let qe=null,jr=null,Pt=null,$t=[],is=null,Cs=!1,wr=!1;class Vt{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#n=0;#r=0;#l=null;#a=new Set;#s=new Set;skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#r>0}process(t){$t=[],jr=null,this.apply();var n={parent:null,effect:null,effects:[],render_effects:[]};for(const r of t)this.#i(r,n);this.is_fork||this.#u(),this.is_deferred()?(this.#o(n.effects),this.#o(n.render_effects)):(jr=this,qe=null,pa(n.render_effects),pa(n.effects),jr=null,this.#l?.resolve()),Pt=null}#i(t,n){t.f^=at;for(var r=t.first;r!==null;){var a=r.f,i=(a&(dn|Hn))!==0,l=i&&(a&at)!==0,c=l||(a&Mt)!==0||this.skipped_effects.has(r);if((r.f&ss)!==0&&r.b?.is_pending()&&(n={parent:n,effect:r,effects:[],render_effects:[]}),!c&&r.fn!==null){i?r.f^=at:(a&Qs)!==0?n.effects.push(r):dr(r)&&((r.f&Zt)!==0&&this.#a.add(r),ir(r));var u=r.first;if(u!==null){r=u;continue}}var o=r.parent;for(r=r.next;r===null&&o!==null;)o===n.effect&&(this.#o(n.effects),this.#o(n.render_effects),n=n.parent),r=o.next,o=o.parent}}#o(t){for(const n of t)(n.f&wt)!==0?this.#a.add(n):(n.f&jt)!==0&&this.#s.add(n),this.#c(n.deps),it(n,at)}#c(t){if(t!==null)for(const n of t)(n.f&ot)===0||(n.f&Dn)===0||(n.f^=Dn,this.#c(n.deps))}capture(t,n){this.previous.has(t)||this.previous.set(t,n),(t.f&bn)===0&&(this.current.set(t,t.v),Pt?.set(t,t.v))}activate(){qe=this,this.apply()}deactivate(){qe===this&&(qe=null,Pt=null)}flush(){if(this.activate(),$t.length>0){if(ni(),qe!==null&&qe!==this)return}else this.#n===0&&this.process([]);this.deactivate()}discard(){for(const t of this.#t)t(this);this.#t.clear()}#u(){if(this.#r===0){for(const t of this.#e)t();this.#e.clear()}this.#n===0&&this.#v()}#v(){if(Ir.size>1){this.previous.clear();var t=Pt,n=!0,r={parent:null,effect:null,effects:[],render_effects:[]};for(const i of Ir){if(i===this){n=!1;continue}const l=[];for(const[u,o]of this.current){if(i.current.has(u))if(n&&o!==i.current.get(u))i.current.set(u,o);else continue;l.push(u)}if(l.length===0)continue;const c=[...i.current.keys()].filter(u=>!this.current.has(u));if(c.length>0){var a=$t;$t=[];const u=new Set,o=new Map;for(const v of l)ri(v,c,u,o);if($t.length>0){qe=i,i.apply();for(const v of $t)i.#i(v,r);i.deactivate()}$t=a}}qe=null,Pt=t}this.committed=!0,Ir.delete(this)}increment(t){this.#n+=1,t&&(this.#r+=1)}decrement(t){this.#n-=1,t&&(this.#r-=1),this.revive()}revive(){for(const t of this.#a)this.#s.delete(t),it(t,wt),Fn(t);for(const t of this.#s)it(t,jt),Fn(t);this.flush()}oncommit(t){this.#e.add(t)}ondiscard(t){this.#t.add(t)}settled(){return(this.#l??=Qa()).promise}static ensure(){if(qe===null){const t=qe=new Vt;Ir.add(qe),wr||Vt.enqueue(()=>{qe===t&&t.flush()})}return qe}static enqueue(t){Yn(t)}apply(){}}function Ro(e){var t=wr;wr=!0;try{for(var n;;){if(Po(),$t.length===0&&(qe?.flush(),$t.length===0))return is=null,n;ni()}}finally{wr=t}}function ni(){var e=Ln;Cs=!0;var t=null;try{var n=0;for(Qr(!0);$t.length>0;){var r=Vt.ensure();if(n++>1e3){var a,i;Lo()}r.process($t),wn.clear()}}finally{Cs=!1,Qr(e),is=null}}function Lo(){try{lo()}catch(e){sr(e,is)}}let nn=null;function pa(e){var t=e.length;if(t!==0){for(var n=0;n<t;){var r=e[n++];if((r.f&(ln|Mt))===0&&dr(r)&&(nn=new Set,ir(r),r.deps===null&&r.first===null&&r.nodes===null&&(r.teardown===null&&r.ac===null?mi(r):r.fn=null),nn?.size>0)){wn.clear();for(const a of nn){if((a.f&(ln|Mt))!==0)continue;const i=[a];let l=a.parent;for(;l!==null;)nn.has(l)&&(nn.delete(l),i.push(l)),l=l.parent;for(let c=i.length-1;c>=0;c--){const u=i[c];(u.f&(ln|Mt))===0&&ir(u)}}nn.clear()}}nn=null}}function ri(e,t,n,r){if(!n.has(e)&&(n.add(e),e.reactions!==null))for(const a of e.reactions){const i=a.f;(i&ot)!==0?ri(a,t,n,r):(i&(Xs|Zt))!==0&&(i&wt)===0&&si(a,t,r)&&(it(a,wt),Fn(a))}}function si(e,t,n){const r=n.get(e);if(r!==void 0)return r;if(e.deps!==null)for(const a of e.deps){if(t.includes(a))return!0;if((a.f&ot)!==0&&si(a,t,n))return n.set(a,!0),!0}return n.set(e,!1),!1}function Fn(e){for(var t=is=e;t.parent!==null;){t=t.parent;var n=t.f;if(Cs&&t===Fe&&(n&Zt)!==0&&(n&Xa)===0)return;if((n&(Hn|dn))!==0){if((n&at)===0)return;t.f^=at}}$t.push(t)}function zo(e){let t=0,n=Bn(0),r;return()=>{xr()&&(s(n),vr(()=>(t===0&&(r=E(()=>e(()=>yr(n)))),t+=1,()=>{Yn(()=>{t-=1,t===0&&(r?.(),r=void 0,yr(n))})})))}}var Io=Nn|cr|ss;function Oo(e,t,n){new No(e,t,n)}class No{parent;#e=!1;#t;#n=null;#r;#l;#a;#s=null;#i=null;#o=null;#c=null;#u=null;#v=0;#d=0;#h=!1;#f=null;#b=zo(()=>(this.#f=Bn(this.#v),()=>{this.#f=null}));constructor(t,n,r){this.#t=t,this.#r=n,this.#l=r,this.parent=Fe.b,this.#e=!!this.#r.pending,this.#a=Js(()=>{Fe.b=this;{var a=this.#g();try{this.#s=At(()=>r(a))}catch(i){this.error(i)}this.#d>0?this.#_():this.#e=!1}return()=>{this.#u?.remove()}},Io)}#w(){try{this.#s=At(()=>this.#l(this.#t))}catch(t){this.error(t)}this.#e=!1}#y(){const t=this.#r.pending;t&&(this.#i=At(()=>t(this.#t)),Vt.enqueue(()=>{var n=this.#g();this.#s=this.#p(()=>(Vt.ensure(),At(()=>this.#l(n)))),this.#d>0?this.#_():(Rn(this.#i,()=>{this.#i=null}),this.#e=!1)}))}#g(){var t=this.#t;return this.#e&&(this.#u=cn(),this.#t.before(this.#u),t=this.#u),t}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#r.pending}#p(t){var n=Fe,r=Ie,a=We;Kt(this.#a),gt(this.#a),rr(this.#a.ctx);try{return t()}catch(i){return ti(i),null}finally{Kt(n),gt(r),rr(a)}}#_(){const t=this.#r.pending;this.#s!==null&&(this.#c=document.createDocumentFragment(),this.#c.append(this.#u),yi(this.#s,this.#c)),this.#i===null&&(this.#i=At(()=>t(this.#t)))}#m(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#m(t);return}this.#d+=t,this.#d===0&&(this.#e=!1,this.#i&&Rn(this.#i,()=>{this.#i=null}),this.#c&&(this.#t.before(this.#c),this.#c=null))}update_pending_count(t){this.#m(t),this.#v+=t,this.#f&&ar(this.#f,this.#v)}get_effect_pending(){return this.#b(),s(this.#f)}error(t){var n=this.#r.onerror;let r=this.#r.failed;if(this.#h||!n&&!r)throw t;this.#s&&(mt(this.#s),this.#s=null),this.#i&&(mt(this.#i),this.#i=null),this.#o&&(mt(this.#o),this.#o=null);var a=!1,i=!1;const l=()=>{if(a){$o();return}a=!0,i&&ho(),Vt.ensure(),this.#v=0,this.#o!==null&&Rn(this.#o,()=>{this.#o=null}),this.#e=this.has_pending_snippet(),this.#s=this.#p(()=>(this.#h=!1,At(()=>this.#l(this.#t)))),this.#d>0?this.#_():this.#e=!1};var c=Ie;try{gt(null),i=!0,n?.(t,l),i=!1}catch(u){sr(u,this.#a&&this.#a.parent)}finally{gt(c)}r&&Yn(()=>{this.#o=this.#p(()=>{Vt.ensure(),this.#h=!0;try{return At(()=>{r(this.#t,()=>t,()=>l)})}catch(u){return sr(u,this.#a.parent),null}finally{this.#h=!1}})})}}function Do(e,t,n,r){const a=Rr()?os:Ze;if(n.length===0&&e.length===0){r(t.map(a));return}var i=qe,l=Fe,c=Fo();function u(){Promise.all(n.map(o=>Bo(o))).then(o=>{c();try{r([...t.map(a),...o])}catch(v){(l.f&ln)===0&&sr(v,l)}i?.deactivate(),Vr()}).catch(o=>{sr(o,l)})}e.length>0?Promise.all(e).then(()=>{c();try{return u()}finally{i?.deactivate(),Vr()}}):u()}function Fo(){var e=Fe,t=Ie,n=We,r=qe;return function(i=!0){Kt(e),gt(t),rr(n),i&&r?.activate()}}function Vr(){Kt(null),gt(null),rr(null)}function os(e){var t=ot|wt,n=Ie!==null&&(Ie.f&ot)!==0?Ie:null;return Fe!==null&&(Fe.f|=cr),{ctx:We,deps:null,effects:null,equals:Za,f:t,fn:e,reactions:null,rv:0,v:ct,wv:0,parent:n??Fe,ac:null}}function Bo(e,t){let n=Fe;n===null&&so();var r=n.b,a=void 0,i=Bn(ct),l=!Ie,c=new Map;return Go(()=>{var u=Qa();a=u.promise;try{Promise.resolve(e()).then(u.resolve,u.reject).then(()=>{o===qe&&o.committed&&o.deactivate(),Vr()})}catch(d){u.reject(d),Vr()}var o=qe;if(l){var v=!r.is_pending();r.update_pending_count(1),o.increment(v),c.get(o)?.reject(Jn),c.delete(o),c.set(o,u)}const f=(d,p=void 0)=>{if(o.activate(),p)p!==Jn&&(i.f|=bn,ar(i,p));else{(i.f&bn)!==0&&(i.f^=bn),ar(i,d);for(const[y,x]of c){if(c.delete(y),y===o)break;x.reject(Jn)}}l&&(r.update_pending_count(-1),o.decrement(v))};u.promise.then(f,d=>f(null,d||"unknown"))}),ls(()=>{for(const u of c.values())u.reject(Jn)}),new Promise(u=>{function o(v){function f(){v===a?u(i):o(a)}v.then(f,f)}o(a)})}function pr(e){const t=os(e);return ki(t),t}function Ze(e){const t=os(e);return t.equals=Ja,t}function ai(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)mt(t[n])}}function jo(e){for(var t=e.parent;t!==null;){if((t.f&ot)===0)return(t.f&ln)===0?t:null;t=t.parent}return null}function Zs(e){var t,n=Fe;Kt(jo(e));try{e.f&=~Dn,ai(e),t=Si(e)}finally{Kt(n)}return t}function ii(e){var t=Zs(e);if(e.equals(t)||(qe?.is_fork||(e.v=t),e.wv=Ei()),!Vn)if(Pt!==null)(xr()||qe?.is_fork)&&Pt.set(e,t);else{var n=(e.f&Bt)===0?jt:at;it(e,n)}}let Ps=new Set;const wn=new Map;let oi=!1;function Bn(e,t){var n={f:0,v:e,reactions:null,equals:Za,rv:0,wv:0};return n}function fn(e,t){const n=Bn(e);return ki(n),n}function $(e,t=!1,n=!0){const r=Bn(e);return t||(r.equals=Ja),ur&&n&&We!==null&&We.l!==null&&(We.l.s??=[]).push(r),r}function Or(e,t){return _(e,E(()=>s(e))),t}function _(e,t,n=!1){Ie!==null&&(!Xt||(Ie.f&ha)!==0)&&Rr()&&(Ie.f&(ot|Zt|Xs|ha))!==0&&!un?.includes(e)&&fo();let r=n?er(t):t;return ar(e,r)}function ar(e,t){if(!e.equals(t)){var n=e.v;Vn?wn.set(e,t):wn.set(e,n),e.v=t;var r=Vt.ensure();r.capture(e,n),(e.f&ot)!==0&&((e.f&wt)!==0&&Zs(e),it(e,(e.f&Bt)!==0?at:jt)),e.wv=Ei(),li(e,wt),Rr()&&Fe!==null&&(Fe.f&at)!==0&&(Fe.f&(dn|Hn))===0&&(Tt===null?Jo([e]):Tt.push(e)),!r.is_fork&&Ps.size>0&&!oi&&qo()}return t}function qo(){oi=!1;var e=Ln;Qr(!0);const t=Array.from(Ps);try{for(const n of t)(n.f&at)!==0&&it(n,jt),dr(n)&&ir(n)}finally{Qr(e)}Ps.clear()}function yr(e){_(e,e.v+1)}function li(e,t){var n=e.reactions;if(n!==null)for(var r=Rr(),a=n.length,i=0;i<a;i++){var l=n[i],c=l.f;if(!(!r&&l===Fe)){var u=(c&wt)===0;if(u&&it(l,t),(c&ot)!==0){var o=l;Pt?.delete(o),(c&Dn)===0&&(c&Bt&&(l.f|=Dn),li(o,jt))}else u&&((c&Zt)!==0&&nn!==null&&nn.add(l),Fn(l))}}}function er(e){if(typeof e!="object"||e===null||Pn in e)return e;const t=Vs(e);if(t!==Gi&&t!==Zi)return e;var n=new Map,r=ts(e),a=fn(0),i=zn,l=c=>{if(zn===i)return c();var u=Ie,o=zn;gt(null),ma(i);var v=c();return gt(u),ma(o),v};return r&&n.set("length",fn(e.length)),new Proxy(e,{defineProperty(c,u,o){(!("value"in o)||o.configurable===!1||o.enumerable===!1||o.writable===!1)&&uo();var v=n.get(u);return v===void 0?v=l(()=>{var f=fn(o.value);return n.set(u,f),f}):_(v,o.value,!0),!0},deleteProperty(c,u){var o=n.get(u);if(o===void 0){if(u in c){const v=l(()=>fn(ct));n.set(u,v),yr(a)}}else _(o,ct),yr(a);return!0},get(c,u,o){if(u===Pn)return e;var v=n.get(u),f=u in c;if(v===void 0&&(!f||nr(c,u)?.writable)&&(v=l(()=>{var p=er(f?c[u]:ct),y=fn(p);return y}),n.set(u,v)),v!==void 0){var d=s(v);return d===ct?void 0:d}return Reflect.get(c,u,o)},getOwnPropertyDescriptor(c,u){var o=Reflect.getOwnPropertyDescriptor(c,u);if(o&&"value"in o){var v=n.get(u);v&&(o.value=s(v))}else if(o===void 0){var f=n.get(u),d=f?.v;if(f!==void 0&&d!==ct)return{enumerable:!0,configurable:!0,value:d,writable:!0}}return o},has(c,u){if(u===Pn)return!0;var o=n.get(u),v=o!==void 0&&o.v!==ct||Reflect.has(c,u);if(o!==void 0||Fe!==null&&(!v||nr(c,u)?.writable)){o===void 0&&(o=l(()=>{var d=v?er(c[u]):ct,p=fn(d);return p}),n.set(u,o));var f=s(o);if(f===ct)return!1}return v},set(c,u,o,v){var f=n.get(u),d=u in c;if(r&&u==="length")for(var p=o;p<f.v;p+=1){var y=n.get(p+"");y!==void 0?_(y,ct):p in c&&(y=l(()=>fn(ct)),n.set(p+"",y))}if(f===void 0)(!d||nr(c,u)?.writable)&&(f=l(()=>fn(void 0)),_(f,er(o)),n.set(u,f));else{d=f.v!==ct;var x=l(()=>er(o));_(f,x)}var g=Reflect.getOwnPropertyDescriptor(c,u);if(g?.set&&g.set.call(v,o),!d){if(r&&typeof u=="string"){var M=n.get("length"),C=Number(u);Number.isInteger(C)&&C>=M.v&&_(M,C+1)}yr(a)}return!0},ownKeys(c){s(a);var u=Reflect.ownKeys(c).filter(f=>{var d=n.get(f);return d===void 0||d.v!==ct});for(var[o,v]of n)v.v!==ct&&!(o in c)&&u.push(o);return u},setPrototypeOf(){vo()}})}var pn,ci,ui,vi;function Uo(){if(pn===void 0){pn=window,ci=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;ui=nr(t,"firstChild").get,vi=nr(t,"nextSibling").get,fa(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),fa(n)&&(n.__t=void 0)}}function cn(e=""){return document.createTextNode(e)}function _n(e){return ui.call(e)}function Lr(e){return vi.call(e)}function h(e,t){return _n(e)}function Te(e,t=!1){{var n=_n(e);return n instanceof Comment&&n.data===""?Lr(n):n}}function b(e,t=1,n=!1){let r=e;for(;t--;)r=Lr(r);return r}function Ho(e){e.textContent=""}function di(){return!1}let _a=!1;function Yo(){_a||(_a=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function Wo(e,t,n,r=!0){r&&n();for(var a of t)e.addEventListener(a,n);ls(()=>{for(var i of t)e.removeEventListener(i,n)})}function Wn(e){var t=Ie,n=Fe;gt(null),Kt(null);try{return e()}finally{gt(t),Kt(n)}}function Vo(e,t,n,r=n){e.addEventListener(t,()=>Wn(n));const a=e.__on_r;a?e.__on_r=()=>{a(),r(!0)}:e.__on_r=()=>r(!0),Yo()}function fi(e){Fe===null&&(Ie===null&&oo(),io()),Vn&&ao()}function Qo(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function Jt(e,t,n){var r=Fe;r!==null&&(r.f&Mt)!==0&&(e|=Mt);var a={ctx:We,deps:null,nodes:null,f:e|wt|Bt,first:null,fn:t,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,wv:0,ac:null};if(n)try{ir(a),a.f|=as}catch(c){throw mt(a),c}else t!==null&&Fn(a);var i=a;if(n&&i.deps===null&&i.teardown===null&&i.nodes===null&&i.first===i.last&&(i.f&cr)===0&&(i=i.first,(e&Zt)!==0&&(e&Nn)!==0&&i!==null&&(i.f|=Nn)),i!==null&&(i.parent=r,r!==null&&Qo(i,r),Ie!==null&&(Ie.f&ot)!==0&&(e&Hn)===0)){var l=Ie;(l.effects??=[]).push(i)}return a}function xr(){return Ie!==null&&!Xt}function ls(e){const t=Jt(rs,null,!1);return it(t,at),t.teardown=e,t}function Rs(e){fi();var t=Fe.f,n=!Ie&&(t&dn)!==0&&(t&as)===0;if(n){var r=We;(r.e??=[]).push(e)}else return hi(e)}function hi(e){return Jt(Qs|Ka,e,!1)}function Xo(e){return fi(),Jt(rs|Ka,e,!0)}function Ko(e){Vt.ensure();const t=Jt(Hn|cr,e,!0);return(n={})=>new Promise(r=>{n.outro?Rn(t,()=>{mt(t),r(void 0)}):(mt(t),r(void 0))})}function Qt(e){return Jt(Qs,e,!1)}function ie(e,t){var n=We,r={effect:null,ran:!1,deps:e};n.l.$.push(r),r.effect=vr(()=>{e(),!r.ran&&(r.ran=!0,E(t))})}function qt(){var e=We;vr(()=>{for(var t of e.l.$){t.deps();var n=t.effect;(n.f&at)!==0&&it(n,jt),dr(n)&&ir(n),t.ran=!1}})}function Go(e){return Jt(Xs|cr,e,!0)}function vr(e,t=0){return Jt(rs|t,e,!0)}function de(e,t=[],n=[],r=[]){Do(r,t,n,a=>{Jt(rs,()=>e(...a.map(s)),!0)})}function Js(e,t=0){var n=Jt(Zt|t,e,!0);return n}function At(e){return Jt(dn|cr,e,!0)}function pi(e){var t=e.teardown;if(t!==null){const n=Vn,r=Ie;ga(!0),gt(null);try{t.call(null)}finally{ga(n),gt(r)}}}function _i(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){const a=n.ac;a!==null&&Wn(()=>{a.abort(Jn)});var r=n.next;(n.f&Hn)!==0?n.parent=null:mt(n,t),n=r}}function Zo(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&dn)===0&&mt(t),t=n}}function mt(e,t=!0){var n=!1;(t||(e.f&Xa)!==0)&&e.nodes!==null&&e.nodes.end!==null&&(gi(e.nodes.start,e.nodes.end),n=!0),_i(e,t&&!n),Xr(e,0),it(e,ln);var r=e.nodes&&e.nodes.t;if(r!==null)for(const i of r)i.stop();pi(e);var a=e.parent;a!==null&&a.first!==null&&mi(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function gi(e,t){for(;e!==null;){var n=e===t?null:Lr(e);e.remove(),e=n}}function mi(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function Rn(e,t,n=!0){var r=[];bi(e,r,!0);var a=()=>{n&&mt(e),t&&t()},i=r.length;if(i>0){var l=()=>--i||a();for(var c of r)c.out(l)}else a()}function bi(e,t,n){if((e.f&Mt)===0){e.f^=Mt;var r=e.nodes&&e.nodes.t;if(r!==null)for(const c of r)(c.is_global||n)&&t.push(c);for(var a=e.first;a!==null;){var i=a.next,l=(a.f&Nn)!==0||(a.f&dn)!==0&&(e.f&Zt)!==0;bi(a,t,l?n:!1),a=i}}}function ea(e){wi(e,!0)}function wi(e,t){if((e.f&Mt)!==0){e.f^=Mt,(e.f&at)===0&&(it(e,wt),Fn(e));for(var n=e.first;n!==null;){var r=n.next,a=(n.f&Nn)!==0||(n.f&dn)!==0;wi(n,a?t:!1),n=r}var i=e.nodes&&e.nodes.t;if(i!==null)for(const l of i)(l.is_global||t)&&l.in()}}function yi(e,t){if(e.nodes)for(var n=e.nodes.start,r=e.nodes.end;n!==null;){var a=n===r?null:Lr(n);t.append(n),n=a}}let Ln=!1;function Qr(e){Ln=e}let Vn=!1;function ga(e){Vn=e}let Ie=null,Xt=!1;function gt(e){Ie=e}let Fe=null;function Kt(e){Fe=e}let un=null;function ki(e){Ie!==null&&(un===null?un=[e]:un.push(e))}let ft=null,kt=0,Tt=null;function Jo(e){Tt=e}let xi=1,Er=0,zn=Er;function ma(e){zn=e}function Ei(){return++xi}function dr(e){var t=e.f;if((t&wt)!==0)return!0;if(t&ot&&(e.f&=~Dn),(t&jt)!==0){var n=e.deps;if(n!==null)for(var r=n.length,a=0;a<r;a++){var i=n[a];if(dr(i)&&ii(i),i.wv>e.wv)return!0}(t&Bt)!==0&&Pt===null&&it(e,at)}return!1}function Mi(e,t,n=!0){var r=e.reactions;if(r!==null&&!un?.includes(e))for(var a=0;a<r.length;a++){var i=r[a];(i.f&ot)!==0?Mi(i,t,!1):t===i&&(n?it(i,wt):(i.f&at)!==0&&it(i,jt),Fn(i))}}function Si(e){var t=ft,n=kt,r=Tt,a=Ie,i=un,l=We,c=Xt,u=zn,o=e.f;ft=null,kt=0,Tt=null,Ie=(o&(dn|Hn))===0?e:null,un=null,rr(e.ctx),Xt=!1,zn=++Er,e.ac!==null&&(Wn(()=>{e.ac.abort(Jn)}),e.ac=null);try{e.f|=As;var v=e.fn,f=v(),d=e.deps;if(ft!==null){var p;if(Xr(e,kt),d!==null&&kt>0)for(d.length=kt+ft.length,p=0;p<ft.length;p++)d[kt+p]=ft[p];else e.deps=d=ft;if(xr()&&(e.f&Bt)!==0)for(p=kt;p<d.length;p++)(d[p].reactions??=[]).push(e)}else d!==null&&kt<d.length&&(Xr(e,kt),d.length=kt);if(Rr()&&Tt!==null&&!Xt&&d!==null&&(e.f&(ot|jt|wt))===0)for(p=0;p<Tt.length;p++)Mi(Tt[p],e);return a!==null&&a!==e&&(Er++,Tt!==null&&(r===null?r=Tt:r.push(...Tt))),(e.f&bn)!==0&&(e.f^=bn),f}catch(y){return ti(y)}finally{e.f^=As,ft=t,kt=n,Tt=r,Ie=a,un=i,rr(l),Xt=c,zn=u}}function el(e,t){let n=t.reactions;if(n!==null){var r=Ki.call(n,e);if(r!==-1){var a=n.length-1;a===0?n=t.reactions=null:(n[r]=n[a],n.pop())}}n===null&&(t.f&ot)!==0&&(ft===null||!ft.includes(t))&&(it(t,jt),(t.f&Bt)!==0&&(t.f^=Bt,t.f&=~Dn),ai(t),Xr(t,0))}function Xr(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)el(e,n[r])}function ir(e){var t=e.f;if((t&ln)===0){it(e,at);var n=Fe,r=Ln;Fe=e,Ln=!0;try{(t&(Zt|to))!==0?Zo(e):_i(e),pi(e);var a=Si(e);e.teardown=typeof a=="function"?a:null,e.wv=xi;var i;$s&&Ao&&(e.f&wt)!==0&&e.deps}finally{Ln=r,Fe=n}}}async function Mr(){await Promise.resolve(),Ro()}function s(e){var t=e.f,n=(t&ot)!==0;if(Ie!==null&&!Xt){var r=Fe!==null&&(Fe.f&ln)!==0;if(!r&&!un?.includes(e)){var a=Ie.deps;if((Ie.f&As)!==0)e.rv<Er&&(e.rv=Er,ft===null&&a!==null&&a[kt]===e?kt++:ft===null?ft=[e]:ft.includes(e)||ft.push(e));else{(Ie.deps??=[]).push(e);var i=e.reactions;i===null?e.reactions=[Ie]:i.includes(Ie)||i.push(Ie)}}}if(Vn){if(wn.has(e))return wn.get(e);if(n){var l=e,c=l.v;return((l.f&at)===0&&l.reactions!==null||$i(l))&&(c=Zs(l)),wn.set(l,c),c}}else n&&(!Pt?.has(e)||qe?.is_fork&&!xr())&&(l=e,dr(l)&&ii(l),Ln&&xr()&&(l.f&Bt)===0&&Ti(l));if(Pt?.has(e))return Pt.get(e);if((e.f&bn)!==0)throw e.v;return e.v}function Ti(e){if(e.deps!==null){e.f^=Bt;for(const t of e.deps)(t.reactions??=[]).push(e),(t.f&ot)!==0&&(t.f&Bt)===0&&Ti(t)}}function $i(e){if(e.v===ct)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(wn.has(t)||(t.f&ot)!==0&&$i(t))return!0;return!1}function E(e){var t=Xt;try{return Xt=!0,e()}finally{Xt=t}}const tl=-7169;function it(e,t){e.f=e.f&tl|t}function W(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Pn in e)Ls(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&Pn in n&&Ls(n)}}}function Ls(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let r in e)try{Ls(e[r],t)}catch{}const n=Vs(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=Va(n);for(let a in r){const i=r[a].get;if(i)try{i.call(e)}catch{}}}}}const nl=["touchstart","touchmove"];function rl(e){return nl.includes(e)}const sl=new Set,ba=new Set;function al(e,t,n,r={}){function a(i){if(r.capture||mr.call(t,i),!i.cancelBubble)return Wn(()=>n?.call(this,i))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Yn(()=>{t.addEventListener(e,a,r)}):t.addEventListener(e,a,r),a}function I(e,t,n,r,a){var i={capture:r,passive:a},l=al(e,t,n,i);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&ls(()=>{t.removeEventListener(e,l,i)})}let wa=null;function mr(e){var t=this,n=t.ownerDocument,r=e.type,a=e.composedPath?.()||[],i=a[0]||e.target;wa=e;var l=0,c=wa===e&&e.__root;if(c){var u=a.indexOf(c);if(u!==-1&&(t===document||t===window)){e.__root=t;return}var o=a.indexOf(t);if(o===-1)return;u<=o&&(l=u)}if(i=a[l]||e.target,i!==t){Wa(e,"currentTarget",{configurable:!0,get(){return i||n}});var v=Ie,f=Fe;gt(null),Kt(null);try{for(var d,p=[];i!==null;){var y=i.assignedSlot||i.parentNode||i.host||null;try{var x=i["__"+r];x!=null&&(!i.disabled||e.target===i)&&x.call(i,e)}catch(g){d?p.push(g):d=g}if(e.cancelBubble||y===t||y===null)break;i=y}if(d){for(let g of p)queueMicrotask(()=>{throw g});throw d}}finally{e.__root=t,delete e.currentTarget,gt(v),Kt(f)}}}function Ai(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function Sr(e,t){var n=Fe;n.nodes===null&&(n.nodes={start:e,end:t,a:null,t:null})}function S(e,t){var n=(t&Mo)!==0,r=(t&So)!==0,a,i=!e.startsWith("<!>");return()=>{a===void 0&&(a=Ai(i?e:"<!>"+e),n||(a=_n(a)));var l=r||ci?document.importNode(a,!0):a.cloneNode(!0);if(n){var c=_n(l),u=l.lastChild;Sr(c,u)}else Sr(l,l);return l}}function Qn(e=""){{var t=cn(e+"");return Sr(t,t),t}}function Qe(){var e=document.createDocumentFragment(),t=document.createComment(""),n=cn();return e.append(t,n),Sr(t,n),e}function m(e,t){e!==null&&e.before(t)}let zs=!0;function fe(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??=e.nodeValue)&&(e.__t=n,e.nodeValue=n+"")}function il(e,t){return ol(e,t)}const Xn=new Map;function ol(e,{target:t,anchor:n,props:r={},events:a,context:i,intro:l=!0}){Uo();var c=new Set,u=f=>{for(var d=0;d<f.length;d++){var p=f[d];if(!c.has(p)){c.add(p);var y=rl(p);t.addEventListener(p,mr,{passive:y});var x=Xn.get(p);x===void 0?(document.addEventListener(p,mr,{passive:y}),Xn.set(p,1)):Xn.set(p,x+1)}}};u(ns(sl)),ba.add(u);var o=void 0,v=Ko(()=>{var f=n??t.appendChild(cn());return Oo(f,{pending:()=>{}},d=>{if(i){ht({});var p=We;p.c=i}a&&(r.$$events=a),zs=l,o=e(d,r)||{},zs=!0,i&&pt()}),()=>{for(var d of c){t.removeEventListener(d,mr);var p=Xn.get(d);--p===0?(document.removeEventListener(d,mr),Xn.delete(d)):Xn.set(d,p)}ba.delete(u),f!==n&&f.parentNode?.removeChild(f)}});return ll.set(o,v),o}let ll=new WeakMap;class cl{anchor;#e=new Map;#t=new Map;#n=new Map;#r=new Set;#l=!0;constructor(t,n=!0){this.anchor=t,this.#l=n}#a=()=>{var t=qe;if(this.#e.has(t)){var n=this.#e.get(t),r=this.#t.get(n);if(r)ea(r),this.#r.delete(n);else{var a=this.#n.get(n);a&&(this.#t.set(n,a.effect),this.#n.delete(n),a.fragment.lastChild.remove(),this.anchor.before(a.fragment),r=a.effect)}for(const[i,l]of this.#e){if(this.#e.delete(i),i===t)break;const c=this.#n.get(l);c&&(mt(c.effect),this.#n.delete(l))}for(const[i,l]of this.#t){if(i===n||this.#r.has(i))continue;const c=()=>{if(Array.from(this.#e.values()).includes(i)){var o=document.createDocumentFragment();yi(l,o),o.append(cn()),this.#n.set(i,{effect:l,fragment:o})}else mt(l);this.#r.delete(i),this.#t.delete(i)};this.#l||!r?(this.#r.add(i),Rn(l,c,!1)):c()}}};#s=t=>{this.#e.delete(t);const n=Array.from(this.#e.values());for(const[r,a]of this.#n)n.includes(r)||(mt(a.effect),this.#n.delete(r))};ensure(t,n){var r=qe,a=di();if(n&&!this.#t.has(t)&&!this.#n.has(t))if(a){var i=document.createDocumentFragment(),l=cn();i.append(l),this.#n.set(t,{effect:At(()=>n(l)),fragment:i})}else this.#t.set(t,At(()=>n(this.anchor)));if(this.#e.set(r,t),a){for(const[c,u]of this.#t)c===t?r.skipped_effects.delete(u):r.skipped_effects.add(u);for(const[c,u]of this.#n)c===t?r.skipped_effects.delete(u.effect):r.skipped_effects.add(u.effect);r.oncommit(this.#a),r.ondiscard(this.#s)}else this.#a()}}function j(e,t,n=!1){var r=new cl(e),a=n?Nn:0;function i(l,c){r.ensure(l,c)}Js(()=>{var l=!1;t((c,u=!0)=>{l=!0,i(u,c)}),l||i(!1,null)},a)}function vn(e,t){return t}function ul(e,t,n){for(var r=[],a=t.length,i,l=t.length,c=0;c<a;c++){let f=t[c];Rn(f,()=>{if(i){if(i.pending.delete(f),i.done.add(f),i.pending.size===0){var d=e.outrogroups;Is(ns(i.done)),d.delete(i),d.size===0&&(e.outrogroups=null)}}else l-=1},!1)}if(l===0){var u=r.length===0&&n!==null;if(u){var o=n,v=o.parentNode;Ho(v),v.append(o),e.items.clear()}Is(t,!u)}else i={pending:new Set(t),done:new Set},(e.outrogroups??=new Set).add(i)}function Is(e,t=!0){for(var n=0;n<e.length;n++)mt(e[n],t)}var ya;function Rt(e,t,n,r,a,i=null){var l=e,c=new Map,u=(t&Ga)!==0;if(u){var o=e;l=o.appendChild(cn())}var v=null,f=Ze(()=>{var M=n();return ts(M)?M:M==null?[]:ns(M)}),d,p=!0;function y(){g.fallback=v,vl(g,d,l,t,r),v!==null&&(d.length===0?(v.f&an)===0?ea(v):(v.f^=an,br(v,null,l)):Rn(v,()=>{v=null}))}var x=Js(()=>{d=s(f);for(var M=d.length,C=new Set,N=qe,re=di(),se=0;se<M;se+=1){var oe=d[se],ge=r(oe,se),T=p?null:c.get(ge);T?(T.v&&ar(T.v,oe),T.i&&ar(T.i,se),re&&N.skipped_effects.delete(T.e)):(T=dl(c,p?l:ya??=cn(),oe,ge,se,a,t,n),p||(T.e.f|=an),c.set(ge,T)),C.add(ge)}if(M===0&&i&&!v&&(p?v=At(()=>i(l)):(v=At(()=>i(ya??=cn())),v.f|=an)),!p)if(re){for(const[O,ue]of c)C.has(O)||N.skipped_effects.add(ue.e);N.oncommit(y),N.ondiscard(()=>{})}else y();s(f)}),g={effect:x,items:c,outrogroups:null,fallback:v};p=!1}function vl(e,t,n,r,a){var i=(r&go)!==0,l=t.length,c=e.items,u=e.effect.first,o,v=null,f,d=[],p=[],y,x,g,M;if(i)for(M=0;M<l;M+=1)y=t[M],x=a(y,M),g=c.get(x).e,(g.f&an)===0&&(g.nodes?.a?.measure(),(f??=new Set).add(g));for(M=0;M<l;M+=1){if(y=t[M],x=a(y,M),g=c.get(x).e,e.outrogroups!==null)for(const ue of e.outrogroups)ue.pending.delete(g),ue.done.delete(g);if((g.f&an)!==0)if(g.f^=an,g===u)br(g,null,n);else{var C=v?v.next:u;g===e.effect.last&&(e.effect.last=g.prev),g.prev&&(g.prev.next=g.next),g.next&&(g.next.prev=g.prev),hn(e,v,g),hn(e,g,C),br(g,C,n),v=g,d=[],p=[],u=v.next;continue}if((g.f&Mt)!==0&&(ea(g),i&&(g.nodes?.a?.unfix(),(f??=new Set).delete(g))),g!==u){if(o!==void 0&&o.has(g)){if(d.length<p.length){var N=p[0],re;v=N.prev;var se=d[0],oe=d[d.length-1];for(re=0;re<d.length;re+=1)br(d[re],N,n);for(re=0;re<p.length;re+=1)o.delete(p[re]);hn(e,se.prev,oe.next),hn(e,v,se),hn(e,oe,N),u=N,v=oe,M-=1,d=[],p=[]}else o.delete(g),br(g,u,n),hn(e,g.prev,g.next),hn(e,g,v===null?e.effect.first:v.next),hn(e,v,g),v=g;continue}for(d=[],p=[];u!==null&&u!==g;)(o??=new Set).add(u),p.push(u),u=u.next;if(u===null)continue}(g.f&an)===0&&d.push(g),v=g,u=g.next}if(e.outrogroups!==null){for(const ue of e.outrogroups)ue.pending.size===0&&(Is(ns(ue.done)),e.outrogroups?.delete(ue));e.outrogroups.size===0&&(e.outrogroups=null)}if(u!==null||o!==void 0){var ge=[];if(o!==void 0)for(g of o)(g.f&Mt)===0&&ge.push(g);for(;u!==null;)(u.f&Mt)===0&&u!==e.fallback&&ge.push(u),u=u.next;var T=ge.length;if(T>0){var O=(r&Ga)!==0&&l===0?n:null;if(i){for(M=0;M<T;M+=1)ge[M].nodes?.a?.measure();for(M=0;M<T;M+=1)ge[M].nodes?.a?.fix()}ul(e,ge,O)}}i&&Yn(()=>{if(f!==void 0)for(g of f)g.nodes?.a?.apply()})}function dl(e,t,n,r,a,i,l,c){var u=(l&po)!==0?(l&mo)===0?$(n,!1,!1):Bn(n):null,o=(l&_o)!==0?Bn(a):null;return{v:u,i:o,e:At(()=>(i(t,u??n,o??a,c),()=>{e.delete(r)}))}}function br(e,t,n){if(e.nodes)for(var r=e.nodes.start,a=e.nodes.end,i=t&&(t.f&an)===0?t.nodes.start:n;r!==null;){var l=Lr(r);if(i.before(r),r===a)return;r=l}}function hn(e,t,n){t===null?e.effect.first=n:t.next=n,n===null?e.effect.last=t:n.prev=t}function ce(e,t,n=!1,r=!1,a=!1){var i=e,l="";de(()=>{var c=Fe;if(l!==(l=t()??"")&&(c.nodes!==null&&(gi(c.nodes.start,c.nodes.end),c.nodes=null),l!=="")){var u=l+"";n?u=`<svg>${u}</svg>`:r&&(u=`<math>${u}</math>`);var o=Ai(u);if((n||r)&&(o=_n(o)),Sr(_n(o),o.lastChild),n||r)for(;_n(o);)i.before(_n(o));else i.before(o)}})}function qr(e,t,n,r,a){var i=t.$$slots?.[n],l=!1;i===!0&&(i=t[n==="default"?"children":n],l=!0),i===void 0||i(e,l?()=>r:r)}const fl=()=>performance.now(),rn={tick:e=>requestAnimationFrame(e),now:()=>fl(),tasks:new Set};function Ci(){const e=rn.now();rn.tasks.forEach(t=>{t.c(e)||(rn.tasks.delete(t),t.f())}),rn.tasks.size!==0&&rn.tick(Ci)}function hl(e){let t;return rn.tasks.size===0&&rn.tick(Ci),{promise:new Promise(n=>{rn.tasks.add(t={c:e,f:n})}),abort(){rn.tasks.delete(t)}}}function Nr(e,t){Wn(()=>{e.dispatchEvent(new CustomEvent(t))})}function pl(e){if(e==="float")return"cssFloat";if(e==="offset")return"cssOffset";if(e.startsWith("--"))return e;const t=e.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(n=>n[0].toUpperCase()+n.slice(1)).join("")}function ka(e){const t={},n=e.split(";");for(const r of n){const[a,i]=r.split(":");if(!a||i===void 0)break;const l=pl(a.trim());t[l]=i.trim()}return t}const _l=e=>e;function Lt(e,t,n,r){var a=(e&ko)!==0,i=(e&xo)!==0,l=a&&i,c=(e&Eo)!==0,u=l?"both":a?"in":"out",o,v=t.inert,f=t.style.overflow,d,p;function y(){return Wn(()=>o??=n()(t,r?.()??{},{direction:u}))}var x={is_global:c,in(){if(t.inert=v,!a){p?.abort(),p?.reset?.();return}i||d?.abort(),Nr(t,"introstart"),d=Os(t,y(),p,1,()=>{Nr(t,"introend"),d?.abort(),d=o=void 0,t.style.overflow=f})},out(N){if(!i){N?.(),o=void 0;return}t.inert=!0,Nr(t,"outrostart"),p=Os(t,y(),d,0,()=>{Nr(t,"outroend"),N?.()})},stop:()=>{d?.abort(),p?.abort()}},g=Fe;if((g.nodes.t??=[]).push(x),a&&zs){var M=c;if(!M){for(var C=g.parent;C&&(C.f&Nn)!==0;)for(;(C=C.parent)&&(C.f&Zt)===0;);M=!C||(C.f&as)!==0}M&&Qt(()=>{E(()=>x.in())})}}function Os(e,t,n,r,a){var i=r===1;if(Ji(t)){var l,c=!1;return Yn(()=>{if(!c){var g=t({direction:i?"in":"out"});l=Os(e,g,n,r,a)}}),{abort:()=>{c=!0,l?.abort()},deactivate:()=>l.deactivate(),reset:()=>l.reset(),t:()=>l.t()}}if(n?.deactivate(),!t?.duration)return a(),{abort:Et,deactivate:Et,reset:Et,t:()=>r};const{delay:u=0,css:o,tick:v,easing:f=_l}=t;var d=[];if(i&&n===void 0&&(v&&v(0,1),o)){var p=ka(o(0,1));d.push(p,p)}var y=()=>1-r,x=e.animate(d,{duration:u,fill:"forwards"});return x.onfinish=()=>{x.cancel();var g=n?.t()??1-r;n?.abort();var M=r-g,C=t.duration*Math.abs(M),N=[];if(C>0){var re=!1;if(o)for(var se=Math.ceil(C/16.666666666666668),oe=0;oe<=se;oe+=1){var ge=g+M*f(oe/se),T=ka(o(ge,1-ge));N.push(T),re||=T.overflow==="hidden"}re&&(e.style.overflow="hidden"),y=()=>{var O=x.currentTime;return g+M*f(O/C)},v&&hl(()=>{if(x.playState!=="running")return!1;var O=y();return v(O,1-O),!0})}x=e.animate(N,{duration:C,fill:"forwards"}),x.onfinish=()=>{y=()=>r,v?.(r,1-r),a()}},{abort:()=>{x&&(x.cancel(),x.effect=null,x.onfinish=Et)},deactivate:()=>{a=Et},reset:()=>{r===0&&v?.(1,0)},t:()=>y()}}function Pi(e,t,n){Qt(()=>{var r=E(()=>t(e,n?.())||{});if(n&&r?.update){var a=!1,i={};vr(()=>{var l=n();W(l),a&&Gs(i,l)&&(i=l,r.update(l))}),a=!0}if(r?.destroy)return()=>r.destroy()})}const xa=[...` 	
\r\fÂ \v\uFEFF`];function gl(e,t,n){var r=e==null?"":""+e;if(t&&(r=r?r+" "+t:t),n){for(var a in n)if(n[a])r=r?r+" "+a:a;else if(r.length)for(var i=a.length,l=0;(l=r.indexOf(a,l))>=0;){var c=l+i;(l===0||xa.includes(r[l-1]))&&(c===r.length||xa.includes(r[c]))?r=(l===0?"":r.substring(0,l))+r.substring(c+1):l=c}}return r===""?null:r}function Ea(e,t=!1){var n=t?" !important;":";",r="";for(var a in e){var i=e[a];i!=null&&i!==""&&(r+=" "+a+": "+i+n)}return r}function ms(e){return e[0]!=="-"||e[1]!=="-"?e.toLowerCase():e}function ml(e,t){if(t){var n="",r,a;if(Array.isArray(t)?(r=t[0],a=t[1]):r=t,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var i=!1,l=0,c=!1,u=[];r&&u.push(...Object.keys(r).map(ms)),a&&u.push(...Object.keys(a).map(ms));var o=0,v=-1;const x=e.length;for(var f=0;f<x;f++){var d=e[f];if(c?d==="/"&&e[f-1]==="*"&&(c=!1):i?i===d&&(i=!1):d==="/"&&e[f+1]==="*"?c=!0:d==='"'||d==="'"?i=d:d==="("?l++:d===")"&&l--,!c&&i===!1&&l===0){if(d===":"&&v===-1)v=f;else if(d===";"||f===x-1){if(v!==-1){var p=ms(e.substring(o,v).trim());if(!u.includes(p)){d!==";"&&f++;var y=e.substring(o,f).trim();n+=" "+y+";"}}o=f+1,v=-1}}}}return r&&(n+=Ea(r)),a&&(n+=Ea(a,!0)),n=n.trim(),n===""?null:n}return e==null?null:String(e)}function De(e,t,n,r,a,i){var l=e.__className;if(l!==n||l===void 0){var c=gl(n,r,i);c==null?e.removeAttribute("class"):e.className=c,e.__className=n}else if(i&&a!==i)for(var u in i){var o=!!i[u];(a==null||o!==!!a[u])&&e.classList.toggle(u,o)}return i}function bs(e,t={},n,r){for(var a in n){var i=n[a];t[a]!==i&&(n[a]==null?e.style.removeProperty(a):e.style.setProperty(a,i,r))}}function Xe(e,t,n,r){var a=e.__style;if(a!==t){var i=ml(t,r);i==null?e.removeAttribute("style"):e.style.cssText=i,e.__style=t}else r&&(Array.isArray(r)?(bs(e,n?.[0],r[0]),bs(e,n?.[1],r[1],"important")):bs(e,n,r));return r}const bl=Symbol("is custom element"),wl=Symbol("is html");function yl(e,t){var n=Ri(e);n.value===(n.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!=="PROGRESS")||(e.value=t??"")}function bt(e,t,n,r){var a=Ri(e);a[t]!==(a[t]=n)&&(t==="loading"&&(e[ro]=n),n==null?e.removeAttribute(t):typeof n!="string"&&kl(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function Ri(e){return e.__attributes??={[bl]:e.nodeName.includes("-"),[wl]:e.namespaceURI===To}}var Ma=new Map;function kl(e){var t=e.getAttribute("is")||e.nodeName,n=Ma.get(t);if(n)return n;Ma.set(t,n=[]);for(var r,a=e,i=Element.prototype;i!==a;){r=Va(a);for(var l in r)r[l].set&&n.push(l);a=Vs(a)}return n}function ta(e,t,n=t){var r=new WeakSet;Vo(e,"input",async a=>{var i=a?e.defaultValue:e.value;if(i=ws(e)?ys(i):i,n(i),qe!==null&&r.add(qe),await Mr(),i!==(i=t())){var l=e.selectionStart,c=e.selectionEnd,u=e.value.length;if(e.value=i??"",c!==null){var o=e.value.length;l===c&&c===u&&o>u?(e.selectionStart=o,e.selectionEnd=o):(e.selectionStart=l,e.selectionEnd=Math.min(c,o))}}}),E(t)==null&&e.value&&(n(ws(e)?ys(e.value):e.value),qe!==null&&r.add(qe)),vr(()=>{var a=t();if(e===document.activeElement){var i=jr??qe;if(r.has(i))return}ws(e)&&a===ys(e.value)||e.type==="date"&&!a&&!e.value||a!==e.value&&(e.value=a??"")})}function ws(e){var t=e.type;return t==="number"||t==="range"}function ys(e){return e===""?null:+e}class na{#e=new WeakMap;#t;#n;static entries=new WeakMap;constructor(t){this.#n=t}observe(t,n){var r=this.#e.get(t)||new Set;return r.add(n),this.#e.set(t,r),this.#r().observe(t,this.#n),()=>{var a=this.#e.get(t);a.delete(n),a.size===0&&(this.#e.delete(t),this.#t.unobserve(t))}}#r(){return this.#t??(this.#t=new ResizeObserver(t=>{for(var n of t){na.entries.set(n.target,n);for(var r of this.#e.get(n.target)||[])r(n)}}))}}var xl=new na({box:"border-box"});function Sa(e,t,n){var r=xl.observe(e,()=>n(e[t]));Qt(()=>(E(()=>n(e[t])),r))}function Ta(e,t){return e===t||e?.[Pn]===t}function jn(e={},t,n,r){return Qt(()=>{var a,i;return vr(()=>{a=i,i=[],E(()=>{e!==n(...i)&&(t(e,...i),a&&Ta(n(...a),e)&&t(null,...a))})}),()=>{Yn(()=>{i&&Ta(n(...i),e)&&t(null,...i)})}}),e}function $a(e,t){Wo(window,["resize"],()=>Wn(()=>t(window[e])))}function Dt(e){return function(...t){var n=t[0];return n.stopPropagation(),e?.apply(this,t)}}function yt(e=!1){const t=We,n=t.l.u;if(!n)return;let r=()=>W(t.s);if(e){let a=0,i={};const l=os(()=>{let c=!1;const u=t.s;for(const o in u)u[o]!==i[o]&&(i[o]=u[o],c=!0);return c&&a++,a});r=()=>s(l)}n.b.length&&Xo(()=>{Aa(t,r),Wr(n.b)}),Rs(()=>{const a=E(()=>n.m.map(eo));return()=>{for(const i of a)typeof i=="function"&&i()}}),n.a.length&&Rs(()=>{Aa(t,r),Wr(n.a)})}function Aa(e,t){if(e.l.s)for(const n of e.l.s)s(n);t()}function Kr(e,t){var n=e.$$events?.[t.type],r=ts(n)?n.slice():n==null?[]:[n];for(var a of r)a.call(this,t)}function ra(e,t,n){if(e==null)return t(void 0),n&&n(void 0),Et;const r=E(()=>e.subscribe(t,n));return r.unsubscribe?()=>r.unsubscribe():r}const Kn=[];function El(e,t){return{subscribe:Le(e,t).subscribe}}function Le(e,t=Et){let n=null;const r=new Set;function a(c){if(Gs(e,c)&&(e=c,n)){const u=!Kn.length;for(const o of r)o[1](),Kn.push(o,e);if(u){for(let o=0;o<Kn.length;o+=2)Kn[o][0](Kn[o+1]);Kn.length=0}}}function i(c){a(c(e))}function l(c,u=Et){const o=[c,u];return r.add(o),r.size===1&&(n=t(a,i)||Et),c(e),()=>{r.delete(o),r.size===0&&n&&(n(),n=null)}}return{set:a,update:i,subscribe:l}}function Li(e,t,n){const r=!Array.isArray(e),a=r?[e]:e;if(!a.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const i=t.length<2;return El(n,(l,c)=>{let u=!1;const o=[];let v=0,f=Et;const d=()=>{if(v)return;f();const y=t(r?o[0]:o,l,c);i?l(y):f=typeof y=="function"?y:Et},p=a.map((y,x)=>ra(y,g=>{o[x]=g,v&=~(1<<x),u&&d()},()=>{v|=1<<x}));return u=!0,d(),function(){Wr(p),f(),u=!1}})}function Re(e){let t;return ra(e,n=>t=n)(),t}let Dr=!1,Ns=Symbol();function pe(e,t,n){const r=n[t]??={store:null,source:$(void 0),unsubscribe:Et};if(r.store!==e&&!(Ns in n))if(r.unsubscribe(),r.store=e??null,e==null)r.source.v=void 0,r.unsubscribe=Et;else{var a=!0;r.unsubscribe=ra(e,i=>{a?r.source.v=i:_(r.source,i)}),a=!1}return e&&Ns in n?Re(e):s(r.source)}function zt(){const e={};function t(){ls(()=>{for(var n in e)e[n].unsubscribe();Wa(e,Ns,{enumerable:!1,value:!0})})}return[e,t]}function Ml(e){var t=Dr;try{return Dr=!1,[e(),Dr]}finally{Dr=t}}function rt(e,t,n,r){var a=!ur||(n&bo)!==0,i=(n&yo)!==0,l=r,c=!0,u=()=>(c&&(c=!1,l=r),l),o;{var v=Pn in e||no in e;o=nr(e,t)?.set??(v&&t in e?C=>e[t]=C:void 0)}var f,d=!1;[f,d]=Ml(()=>e[t]),f===void 0&&r!==void 0&&(f=u(),o&&(a&&co(),o(f)));var p;if(a?p=()=>{var C=e[t];return C===void 0?u():(c=!0,C)}:p=()=>{var C=e[t];return C!==void 0&&(l=void 0),C===void 0?l:C},a&&(n&wo)===0)return p;if(o){var y=e.$$legacy;return(function(C,N){return arguments.length>0?((!a||!N||y||d)&&o(N?p():C),C):p()})}var x=!1,g=Ze(()=>(x=!1,p()));s(g);var M=Fe;return(function(C,N){if(arguments.length>0){const re=N?s(g):a&&i?er(C):C;return _(g,re),x=!0,l!==void 0&&(l=re),C}return Vn&&x||(M.f&ln)!==0?g.v:s(g)})}function fr(e){We===null&&Ks(),ur&&We.l!==null?$l(We).m.push(e):Rs(()=>{const t=E(e);if(typeof t=="function")return t})}function Sl(e){We===null&&Ks(),fr(()=>()=>E(e))}function Tl(e,t,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:r})}function sa(){const e=We;return e===null&&Ks(),(t,n,r)=>{const a=e.s.$$events?.[t];if(a){const i=ts(a)?a.slice():[a],l=Tl(t,n,r);for(const c of i)c.call(e.x,l);return!l.defaultPrevented}return!0}}function $l(e){var t=e.l;return t.u??={a:[],b:[],m:[]}}const Al="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Al);Co();const Cl=e=>e;function zi(e){const t=e-1;return t*t*t+1}function Ca(e){const t=typeof e=="string"&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[e,"px"]}function kn(e,{delay:t=0,duration:n=400,easing:r=Cl}={}){const a=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:r,css:i=>`opacity: ${i*a}`}}function Ii(e,{delay:t=0,duration:n=400,easing:r=zi,x:a=0,y:i=0,opacity:l=0}={}){const c=getComputedStyle(e),u=+c.opacity,o=c.transform==="none"?"":c.transform,v=u*(1-l),[f,d]=Ca(a),[p,y]=Ca(i);return{delay:t,duration:n,easing:r,css:(x,g)=>`
			transform: ${o} translate(${(1-x)*f}${d}, ${(1-x)*p}${y});
			opacity: ${u-v*g}`}}function Oi(e,{delay:t=0,duration:n=400,easing:r=zi,start:a=0,opacity:i=0}={}){const l=getComputedStyle(e),c=+l.opacity,u=l.transform==="none"?"":l.transform,o=1-a,v=c*(1-i);return{delay:t,duration:n,easing:r,css:(f,d)=>`
			transform: ${u} scale(${1-o*d});
			opacity: ${c-v*d}
		`}}const Pl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-arrows-shuffle-2"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 4l3 3l-3 3" /><path d="M18 20l3 -3l-3 -3" /><path d="M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5" /><path d="M3 17h3a5 5 0 0 0 5 -5a5 5 0 0 1 5 -5h5" /></svg>',Rl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-deezer"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 16.5h2v.5h-2z" /><path d="M8 16.5h2.5v.5h-2.5z" /><path d="M16 17h-2.5v-.5h2.5z" /><path d="M21.5 17h-2.5v-.5h2.5z" /><path d="M21.5 13h-2.5v.5h2.5z" /><path d="M21.5 9.5h-2.5v.5h2.5z" /><path d="M21.5 6h-2.5v.5h2.5z" /><path d="M16 13h-2.5v.5h2.5z" /><path d="M8 13.5h2.5v-.5h-2.5z" /><path d="M8 9.5h2.5v.5h-2.5z" /></svg>',Ll='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-compact-down"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 11l8 3l8 -3" /></svg>',zl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-compact-left"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M13 20l-3 -8l3 -8" /></svg>',Il='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-left"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 6l-6 6l6 6" /></svg>',Pa='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-disc"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0" /><path d="M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M7 12a5 5 0 0 1 5 -5" /><path d="M12 17a5 5 0 0 0 5 -5" /></svg>',Ol='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-grip-horizontal"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M5 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M12 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M12 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M19 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M19 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /></svg>',Nl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-heart"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M19.5 12.572l-7.5 7.428l-7.5 -7.428a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572" /></svg>',Dl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-heart"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6.979 3.074a6 6 0 0 1 4.988 1.425l.037 .033l.034 -.03a6 6 0 0 1 4.733 -1.44l.246 .036a6 6 0 0 1 3.364 10.008l-.18 .185l-.048 .041l-7.45 7.379a1 1 0 0 1 -1.313 .082l-.094 -.082l-7.493 -7.422a6 6 0 0 1 3.176 -10.215z" /></svg>',Fl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-menu-2"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 6l16 0" /><path d="M4 12l16 0" /><path d="M4 18l16 0" /></svg>',ks='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-music"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 17a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /><path d="M13 17a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /><path d="M9 17v-13h10v13" /><path d="M9 8h10" /></svg>',Bl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-pause"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z" /><path d="M17 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z" /></svg>',jl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-player-play"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 4v16l13 -8z" /></svg>',ql='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-play"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 4v16a1 1 0 0 0 1.524 .852l13 -8a1 1 0 0 0 0 -1.704l-13 -8a1 1 0 0 0 -1.524 .852z" /></svg>',Ul='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-skip-back"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M19.496 4.136l-12 7a1 1 0 0 0 0 1.728l12 7a1 1 0 0 0 1.504 -.864v-14a1 1 0 0 0 -1.504 -.864z" /><path d="M4 4a1 1 0 0 1 .993 .883l.007 .117v14a1 1 0 0 1 -1.993 .117l-.007 -.117v-14a1 1 0 0 1 1 -1z" /></svg>',Hl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-skip-forward"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 5v14a1 1 0 0 0 1.504 .864l12 -7a1 1 0 0 0 0 -1.728l-12 -7a1 1 0 0 0 -1.504 .864z" /><path d="M20 4a1 1 0 0 1 .993 .883l.007 .117v14a1 1 0 0 1 -1.993 .117l-.007 -.117v-14a1 1 0 0 1 1 -1z" /></svg>',Yl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-playlist"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0" /><path d="M17 17v-13h4" /><path d="M13 5h-10" /><path d="M3 9l10 0" /><path d="M9 13h-6" /></svg>',Wl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-radio"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3l-9.371 3.749a1 1 0 0 0 -.629 .928v11.323a1 1 0 0 0 1 1h14a1 1 0 0 0 1 -1v-11a1 1 0 0 0 -1 -1h-14.5" /><path d="M4 12h16" /><path d="M7 12v-2" /><path d="M17 16v.01" /><path d="M13 16v.01" /></svg>',Vl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-refresh"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4" /><path d="M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4" /></svg>',Ql='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-repeat"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 12v-3a3 3 0 0 1 3 -3h13m-3 -3l3 3l-3 3" /><path d="M20 12v3a3 3 0 0 1 -3 3h-13m3 3l-3 -3l3 -3" /></svg>',Xl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-search"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0" /><path d="M21 21l-6 -6" /></svg>',Kl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-settings"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z" /><path d="M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /></svg>',Gl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-trash"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 7l16 0" /><path d="M10 11l0 6" /><path d="M14 11l0 6" /><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12" /><path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3" /></svg>',Zl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 8a5 5 0 0 1 0 8" /><path d="M17.7 5a9 9 0 0 1 0 14" /><path d="M6 15h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l3.5 -4.5a.8 .8 0 0 1 1.5 .5v14a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5" /></svg>',Jl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume-2"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 8a5 5 0 0 1 0 8" /><path d="M6 15h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l3.5 -4.5a.8 .8 0 0 1 1.5 .5v14a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5" /></svg>',ec='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume-3"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 15h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l3.5 -4.5a.8 .8 0 0 1 1.5 .5v14a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5" /><path d="M16 10l4 4m0 -4l-4 4" /></svg>',tc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume-off"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 8a5 5 0 0 1 1.912 4.934m-1.377 2.602a5 5 0 0 1 -.535 .464" /><path d="M17.7 5a9 9 0 0 1 2.362 11.086m-1.676 2.299a9 9 0 0 1 -.686 .615" /><path d="M9.069 5.054l.431 -.554a.8 .8 0 0 1 1.5 .5v2m0 4v8a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l1.294 -1.664" /><path d="M3 3l18 18" /></svg>',nc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-x"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 6l-12 12" /><path d="M6 6l12 12" /></svg>',rc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-device-floppy"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2" /><path d="M12 14m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0" /><path d="M14 4l0 4l-6 0l0 -4" /></svg>',sc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-file-pencil"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3v4a1 1 0 0 0 1 1h4" /><path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z" /><path d="M10 18l5 -5a1.414 1.414 0 0 0 -2 -2l-5 5v2h2z" /></svg>',Ra='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-plus"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 5l0 14" /><path d="M5 12l14 0" /></svg>',ac='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-circle-check"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0" /><path d="M9 12l2 2l4 -4" /></svg>',ic='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-dots"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /></svg>',oc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-sort-descending"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 6l9 0" /><path d="M4 12l7 0" /><path d="M4 18l7 0" /><path d="M15 15l3 3l3 -3" /><path d="M18 6l0 12" /></svg>',lc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-sort-ascending"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 6l7 0" /><path d="M4 12l7 0" /><path d="M4 18l9 0" /><path d="M15 9l3 -3l3 3" /><path d="M18 6l0 12" /></svg>',w={ARTISTS:ks,ALBUMS:Pa,GENRES:ks,PLAYLISTS:Yl,RADIO:Wl,SEARCH:Xl,PLAY:ql,PLAY_OUTLINE:jl,PAUSE:Bl,PREVIOUS:Ul,NEXT:Hl,SHUFFLE:Pl,REPEAT:Ql,VOLUME_FULL:Zl,VOLUME_MEDIUM:Jl,VOLUME_MUTE:ec,VOLUME_OFF:tc,HEART:Nl,HEART_FILLED:Dl,SYNC:Vl,SETTINGS:Kl,CLOSE:nc,MENU:Fl,BACK:Il,BACK_COMPACT:zl,CHEVRON_DOWN:Ll,DRAG_HANDLE:Ol,REMOVE:Gl,DEEZER:Rl,SAVE:rc,EDIT:sc,ADD:Ra,ACCEPT:ac,DOTS:ic,ADD_TO_PLAYLIST:Ra,ALBUM_LINK:Pa,ARTIST_LINK:ks,SORT_DESC:oc,SORT_ASC:lc},Tr={DEFAULT_IP:typeof window<"u"?window.location.hostname:"localhost",get MOODE_IP(){try{return typeof localStorage<"u"?localStorage.getItem("moode_ip")||this.DEFAULT_IP:this.DEFAULT_IP}catch{return this.DEFAULT_IP}}};function or(e){if(!e||!e.image)return null;if(e.image.startsWith("http"))return e.image;let t="";return e.image==="local"?t=`${e.name}.jpg`:t=e.image,`/imagesw/radio-logos/thumbs/${encodeURIComponent(t)}`}function La(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}function cc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var xs={exports:{}},Es={exports:{}},za;function uc(){return za||(za=1,(function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t={rotl:function(n,r){return n<<r|n>>>32-r},rotr:function(n,r){return n<<32-r|n>>>r},endian:function(n){if(n.constructor==Number)return t.rotl(n,8)&16711935|t.rotl(n,24)&4278255360;for(var r=0;r<n.length;r++)n[r]=t.endian(n[r]);return n},randomBytes:function(n){for(var r=[];n>0;n--)r.push(Math.floor(Math.random()*256));return r},bytesToWords:function(n){for(var r=[],a=0,i=0;a<n.length;a++,i+=8)r[i>>>5]|=n[a]<<24-i%32;return r},wordsToBytes:function(n){for(var r=[],a=0;a<n.length*32;a+=8)r.push(n[a>>>5]>>>24-a%32&255);return r},bytesToHex:function(n){for(var r=[],a=0;a<n.length;a++)r.push((n[a]>>>4).toString(16)),r.push((n[a]&15).toString(16));return r.join("")},hexToBytes:function(n){for(var r=[],a=0;a<n.length;a+=2)r.push(parseInt(n.substr(a,2),16));return r},bytesToBase64:function(n){for(var r=[],a=0;a<n.length;a+=3)for(var i=n[a]<<16|n[a+1]<<8|n[a+2],l=0;l<4;l++)a*8+l*6<=n.length*8?r.push(e.charAt(i>>>6*(3-l)&63)):r.push("=");return r.join("")},base64ToBytes:function(n){n=n.replace(/[^A-Z0-9+\/]/ig,"");for(var r=[],a=0,i=0;a<n.length;i=++a%4)i!=0&&r.push((e.indexOf(n.charAt(a-1))&Math.pow(2,-2*i+8)-1)<<i*2|e.indexOf(n.charAt(a))>>>6-i*2);return r}};Es.exports=t})()),Es.exports}var Ms,Ia;function Oa(){if(Ia)return Ms;Ia=1;var e={utf8:{stringToBytes:function(t){return e.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(e.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var n=[],r=0;r<t.length;r++)n.push(t.charCodeAt(r)&255);return n},bytesToString:function(t){for(var n=[],r=0;r<t.length;r++)n.push(String.fromCharCode(t[r]));return n.join("")}}};return Ms=e,Ms}var Ss,Na;function vc(){if(Na)return Ss;Na=1,Ss=function(n){return n!=null&&(e(n)||t(n)||!!n._isBuffer)};function e(n){return!!n.constructor&&typeof n.constructor.isBuffer=="function"&&n.constructor.isBuffer(n)}function t(n){return typeof n.readFloatLE=="function"&&typeof n.slice=="function"&&e(n.slice(0,0))}return Ss}var Da;function dc(){return Da||(Da=1,(function(){var e=uc(),t=Oa().utf8,n=vc(),r=Oa().bin,a=function(i,l){i.constructor==String?l&&l.encoding==="binary"?i=r.stringToBytes(i):i=t.stringToBytes(i):n(i)?i=Array.prototype.slice.call(i,0):!Array.isArray(i)&&i.constructor!==Uint8Array&&(i=i.toString());for(var c=e.bytesToWords(i),u=i.length*8,o=1732584193,v=-271733879,f=-1732584194,d=271733878,p=0;p<c.length;p++)c[p]=(c[p]<<8|c[p]>>>24)&16711935|(c[p]<<24|c[p]>>>8)&4278255360;c[u>>>5]|=128<<u%32,c[(u+64>>>9<<4)+14]=u;for(var y=a._ff,x=a._gg,g=a._hh,M=a._ii,p=0;p<c.length;p+=16){var C=o,N=v,re=f,se=d;o=y(o,v,f,d,c[p+0],7,-680876936),d=y(d,o,v,f,c[p+1],12,-389564586),f=y(f,d,o,v,c[p+2],17,606105819),v=y(v,f,d,o,c[p+3],22,-1044525330),o=y(o,v,f,d,c[p+4],7,-176418897),d=y(d,o,v,f,c[p+5],12,1200080426),f=y(f,d,o,v,c[p+6],17,-1473231341),v=y(v,f,d,o,c[p+7],22,-45705983),o=y(o,v,f,d,c[p+8],7,1770035416),d=y(d,o,v,f,c[p+9],12,-1958414417),f=y(f,d,o,v,c[p+10],17,-42063),v=y(v,f,d,o,c[p+11],22,-1990404162),o=y(o,v,f,d,c[p+12],7,1804603682),d=y(d,o,v,f,c[p+13],12,-40341101),f=y(f,d,o,v,c[p+14],17,-1502002290),v=y(v,f,d,o,c[p+15],22,1236535329),o=x(o,v,f,d,c[p+1],5,-165796510),d=x(d,o,v,f,c[p+6],9,-1069501632),f=x(f,d,o,v,c[p+11],14,643717713),v=x(v,f,d,o,c[p+0],20,-373897302),o=x(o,v,f,d,c[p+5],5,-701558691),d=x(d,o,v,f,c[p+10],9,38016083),f=x(f,d,o,v,c[p+15],14,-660478335),v=x(v,f,d,o,c[p+4],20,-405537848),o=x(o,v,f,d,c[p+9],5,568446438),d=x(d,o,v,f,c[p+14],9,-1019803690),f=x(f,d,o,v,c[p+3],14,-187363961),v=x(v,f,d,o,c[p+8],20,1163531501),o=x(o,v,f,d,c[p+13],5,-1444681467),d=x(d,o,v,f,c[p+2],9,-51403784),f=x(f,d,o,v,c[p+7],14,1735328473),v=x(v,f,d,o,c[p+12],20,-1926607734),o=g(o,v,f,d,c[p+5],4,-378558),d=g(d,o,v,f,c[p+8],11,-2022574463),f=g(f,d,o,v,c[p+11],16,1839030562),v=g(v,f,d,o,c[p+14],23,-35309556),o=g(o,v,f,d,c[p+1],4,-1530992060),d=g(d,o,v,f,c[p+4],11,1272893353),f=g(f,d,o,v,c[p+7],16,-155497632),v=g(v,f,d,o,c[p+10],23,-1094730640),o=g(o,v,f,d,c[p+13],4,681279174),d=g(d,o,v,f,c[p+0],11,-358537222),f=g(f,d,o,v,c[p+3],16,-722521979),v=g(v,f,d,o,c[p+6],23,76029189),o=g(o,v,f,d,c[p+9],4,-640364487),d=g(d,o,v,f,c[p+12],11,-421815835),f=g(f,d,o,v,c[p+15],16,530742520),v=g(v,f,d,o,c[p+2],23,-995338651),o=M(o,v,f,d,c[p+0],6,-198630844),d=M(d,o,v,f,c[p+7],10,1126891415),f=M(f,d,o,v,c[p+14],15,-1416354905),v=M(v,f,d,o,c[p+5],21,-57434055),o=M(o,v,f,d,c[p+12],6,1700485571),d=M(d,o,v,f,c[p+3],10,-1894986606),f=M(f,d,o,v,c[p+10],15,-1051523),v=M(v,f,d,o,c[p+1],21,-2054922799),o=M(o,v,f,d,c[p+8],6,1873313359),d=M(d,o,v,f,c[p+15],10,-30611744),f=M(f,d,o,v,c[p+6],15,-1560198380),v=M(v,f,d,o,c[p+13],21,1309151649),o=M(o,v,f,d,c[p+4],6,-145523070),d=M(d,o,v,f,c[p+11],10,-1120210379),f=M(f,d,o,v,c[p+2],15,718787259),v=M(v,f,d,o,c[p+9],21,-343485551),o=o+C>>>0,v=v+N>>>0,f=f+re>>>0,d=d+se>>>0}return e.endian([o,v,f,d])};a._ff=function(i,l,c,u,o,v,f){var d=i+(l&c|~l&u)+(o>>>0)+f;return(d<<v|d>>>32-v)+l},a._gg=function(i,l,c,u,o,v,f){var d=i+(l&u|c&~u)+(o>>>0)+f;return(d<<v|d>>>32-v)+l},a._hh=function(i,l,c,u,o,v,f){var d=i+(l^c^u)+(o>>>0)+f;return(d<<v|d>>>32-v)+l},a._ii=function(i,l,c,u,o,v,f){var d=i+(c^(l|~u))+(o>>>0)+f;return(d<<v|d>>>32-v)+l},a._blocksize=16,a._digestsize=16,xs.exports=function(i,l){if(i==null)throw new Error("Illegal argument "+i);var c=e.wordsToBytes(a(i,l));return l&&l.asBytes?c:l&&l.asString?r.bytesToString(c):e.bytesToHex(c)}})()),xs.exports}var fc=dc();const hc=cc(fc),Fa=Le("Disconnected"),Ds=Le(null);let Ts;function Ne(e,t="info"){Ds.set({text:e,type:t}),Ts&&clearTimeout(Ts),Ts=setTimeout(()=>{Ds.set(null)},3e3)}const ut=Le({state:"stop",volume:50,elapsed:0,duration:0,random:!1,repeat:!1,bitrate:0,format:""}),Gt=Le({title:"Not Playing",artist:"",album:"",file:"",stationName:null}),Gr=Le(!1),Ur=Le(!1),Fs=Le(!1),Bs=Le(!1),xt=Le("library"),zr=Le(null),Nt=Le(!1),pc=localStorage.getItem("sidebarCollapsed")==="true",js=Le(pc);js.subscribe(e=>{typeof localStorage<"u"&&localStorage.setItem("sidebarCollapsed",String(e))});const En=Le([]),aa=Le([]),tr=Le([]),gn=Le(new Set),Ge=Le(!1),Ct=Le([{view:"root"}]),$r=Le([]),Ni=Le(0),Zr=Le(""),Di=Le({});function _c(e,t){Di.update(n=>({...n,[e]:t}))}function gc(e){return Re(Di)[e]||0}const ia=Le({isOpen:!1,track:null,context:{type:"general",playlistName:null,index:null},x:0,y:0,triggerRect:null});function mc(){if(typeof navigator<"u"&&navigator.vibrate)try{navigator.vibrate(70)}catch{}}function Jr(e,t,n={}){if(!t)return;mc();let r=0,a=0,i=null,l=e.currentTarget;!l&&e.target&&e.target.closest&&(l=e.target.closest("button")||e.target),l&&l.getBoundingClientRect&&(i=l.getBoundingClientRect());const c=e.detail?.originalEvent||e;c.touches&&c.touches.length>0?(r=c.touches[0].clientX,a=c.touches[0].clientY):c.clientX&&(r=c.clientX,a=c.clientY);const u={type:"general",playlistName:null,index:null,...n};ia.set({isOpen:!0,track:t,context:u,x:r,y:a,triggerRect:i})}function Wt(){ia.set({isOpen:!1,track:null,context:{},x:0,y:0,triggerRect:null})}let qs=null,Us=null;function bc(e){Us=e}function yn(e,t=null){t&&(qs=t),Us?Us(e,t):console.warn("Router callback not set!")}function wc(){const e=qs;return qs=null,e}function yc(){window.history.back()}function lr(e,t=[],n=null){if(!e||!e.file)return"/images/default_cover.png";if(Fi(e.file)||e.genre==="Radio")return e.image?or(e):Bi(e,t,n)||"/images/radio_placeholder.png";let r=e.file.startsWith("/")?e.file.slice(1):e.file;return`/coverart.php/${encodeURI(r)}`}function Ar(e,t="sm",n=[],r=null){if(!e||e.file&&(Fi(e.file)||e.genre==="Radio"||Array.isArray(e)))return e&&e.image?or(e):Bi(e,n,r)||"/images/radio_icon.png";if(!e.file)return"/images/default_icon.png";if(e.thumbHash){const a=t==="md"?"":"_sm";return`/imagesw/thmcache/${e.thumbHash}${a}.jpg`}try{const a=e.file.lastIndexOf("/"),i=a===-1?".":e.file.substring(0,a);return`/imagesw/thmcache/${hc(i)}${t==="md"?"":"_sm"}.jpg`}catch{let i=e.file.startsWith("/")?e.file.slice(1):e.file;return`/coverart.php/${encodeURI(i)}`}}function Fi(e){return e?e.startsWith("http")||e.includes("://")||e.includes("RADIO"):!1}function Bi(e,t,n){const r=u=>(u||"").toString().toLowerCase().replace(/[^a-z0-9]/g,""),a=r(e?.title),i=r(e?.stationName),l=r(n);if(t&&t.length>0){const u=t.find(o=>{const v=r(o.name);return v?v===i||v===l||a&&v===a||a&&a.includes(v)&&v.length>3:!1});if(u)return or(u)}const c=e?.stationName||n;return c?or({name:c,image:"local"}):null}Li([Gt,En,zr],([e,t,n])=>lr(e,t,n));Li(Gt,e=>!e||!e.file||e.file.startsWith("http")?null:`/coverart.php/${encodeURI(e.file)}`);const Ye={NAME:"MoodePlayerDB",STORE_NAME:"music",VERSION:2},kc={SYNC:"/wave-api.php",STATIONS:e=>"/wave-api.php?action=stations",COVER_ART:e=>`/coverart.php?u=${encodeURIComponent(e)}`,RADIO_LOGOS:e=>`/imagesw/radio-logos/thumbs/${e}`},mn={open(){return new Promise((e,t)=>{const n=indexedDB.open(Ye.NAME,Ye.VERSION);n.onupgradeneeded=r=>{const a=r.target.result,i=r.target.transaction;let l;a.objectStoreNames.contains(Ye.STORE_NAME)?l=i.objectStore(Ye.STORE_NAME):l=a.createObjectStore(Ye.STORE_NAME,{keyPath:"file"}),l.indexNames.contains("artist")||l.createIndex("artist","artist",{unique:!1}),l.indexNames.contains("album")||l.createIndex("album","album",{unique:!1}),l.indexNames.contains("genre")||l.createIndex("genre","genre",{unique:!1}),l.indexNames.contains("album_artist")||l.createIndex("album_artist","album_artist",{unique:!1})},n.onsuccess=()=>e(n.result),n.onerror=()=>t(n.error)})},async clear(){const e=await this.open();return new Promise((t,n)=>{const r=e.transaction(Ye.STORE_NAME,"readwrite");r.objectStore(Ye.STORE_NAME).clear(),r.oncomplete=()=>t(),r.onerror=()=>n(r.error)})},async bulkAdd(e){const t=await this.open();return new Promise((n,r)=>{const a=t.transaction(Ye.STORE_NAME,"readwrite"),i=a.objectStore(Ye.STORE_NAME);e.forEach(l=>i.put(l)),a.oncomplete=()=>n(),a.onerror=()=>r(a.error)})},async getFilesMap(e){if(!e||e.length===0)return new Map;const t=await this.open();return new Promise(n=>{const a=t.transaction(Ye.STORE_NAME,"readonly").objectStore(Ye.STORE_NAME),i=new Map;let l=0;e.forEach(c=>{const u=a.get(c);u.onsuccess=o=>{const v=o.target.result;v&&i.set(c,v),l++,l===e.length&&n(i)},u.onerror=()=>{l++,l===e.length&&n(i)}})})},async getArtists(){const e=await this.open();return new Promise((t,n)=>{const a=e.transaction(Ye.STORE_NAME,"readonly").objectStore(Ye.STORE_NAME),i=new Map,l=a.openCursor();l.onsuccess=c=>{const u=c.target.result;if(u){const o=u.value,v=o.album_artist||o.artist;v&&!i.has(v)&&i.set(v,{name:v,file:o.file,thumbHash:o.thumbHash}),u.continue()}else{const o=Array.from(i.values()).sort((v,f)=>v.name.localeCompare(f.name,void 0,{sensitivity:"base"}));t(o)}},l.onerror=()=>n(l.error)})},async getAlbums(){const e=await this.open();return new Promise((t,n)=>{const a=e.transaction(Ye.STORE_NAME,"readonly").objectStore(Ye.STORE_NAME).index("album"),i=[],l=a.openCursor(null,"nextunique");l.onsuccess=c=>{const u=c.target.result;if(u){const o=u.value;i.push({name:o.album,artist:o.album_artist||o.artist,file:o.file,thumbHash:o.thumbHash,qualityBadge:o.qualityBadge,year:o.year||0}),u.continue()}else t(i)},l.onerror=()=>n(l.error)})},async getArtistAlbums(e){if(!e)return[];const t=await this.open();return new Promise((n,r)=>{const i=t.transaction(Ye.STORE_NAME,"readonly").objectStore(Ye.STORE_NAME),l=new Promise(u=>{i.indexNames.contains("album_artist")?i.index("album_artist").getAll(IDBKeyRange.only(e)).onsuccess=o=>u(o.target.result):u([])}),c=new Promise(u=>{i.index("artist").getAll(IDBKeyRange.only(e)).onsuccess=o=>u(o.target.result)});Promise.all([l,c]).then(([u,o])=>{const v=[...u,...o],f=[],d=new Set;v.forEach(p=>{d.has(p.album)||(d.add(p.album),f.push({name:p.album,artist:p.album_artist||p.artist,file:p.file,thumbHash:p.thumbHash,qualityBadge:p.qualityBadge,year:p.year||0}))}),n(f)}).catch(u=>r(u))})},async getAlbumTracks(e){const t=await this.open();return new Promise((n,r)=>{const i=t.transaction(Ye.STORE_NAME,"readonly").objectStore(Ye.STORE_NAME).index("album"),l=IDBKeyRange.only(e),c=i.getAll(l);c.onsuccess=()=>{const u=c.result;u.sort((o,v)=>{const f=parseInt(o.disc||1),d=parseInt(v.disc||1);if(f!==d)return f-d;const p=parseInt(o.track||0),y=parseInt(v.track||0);return p-y}),n(u)},c.onerror=()=>r(c.error)})},async getGenres(){const e=await this.open();return new Promise((t,n)=>{const a=e.transaction(Ye.STORE_NAME,"readonly").objectStore(Ye.STORE_NAME).index("genre"),i=[],l=a.openKeyCursor(null,"nextunique");l.onsuccess=c=>{const u=c.target.result;u?(i.push(u.key),u.continue()):t(i)},l.onerror=()=>n(l.error)})},async getGenreTracks(e){const t=await this.open();return new Promise((n,r)=>{const l=t.transaction(Ye.STORE_NAME,"readonly").objectStore(Ye.STORE_NAME).index("genre").getAll(IDBKeyRange.only(e));l.onsuccess=()=>n(l.result),l.onerror=()=>r(l.error)})},async search(e){if(!e)return[];const t=e.toLowerCase(),n=await this.open();return new Promise((r,a)=>{const l=n.transaction(Ye.STORE_NAME,"readonly").objectStore(Ye.STORE_NAME),c=[],u=100,o=l.openCursor();o.onsuccess=v=>{const f=v.target.result;if(f){const d=f.value;if((d.title&&d.title.toLowerCase().includes(t)||d.artist&&d.artist.toLowerCase().includes(t)||d.album&&d.album.toLowerCase().includes(t)||d.album_artist&&d.album_artist.toLowerCase().includes(t))&&c.push(d),c.length>=u){r(c);return}f.continue()}else r(c)},o.onerror=()=>a(o.error)})}};var xc=S('<div class="skeleton svelte-tl058d"></div>');function xn(e,t){let n=rt(t,"width",8,"100%"),r=rt(t,"height",8,"20px"),a=rt(t,"radius",8,"4px"),i=rt(t,"style",8,"");var l=xc();de(()=>Xe(l,`width: ${n()??""}; height: ${r()??""}; border-radius: ${a()??""}; ${i()??""}`)),m(e,l)}var Ec=S('<div class="skel svelte-1b8que2"><!></div>'),Mc=S('<img loading="lazy"/>'),Sc=S('<div class="loader svelte-1b8que2"><!> <!> <!></div>');function qn(e,t){ht(t,!1);let n=rt(t,"src",8),r=rt(t,"alt",8,""),a=rt(t,"radius",8,"0px");const i=sa();let l=$("loading");function c(){_(l,"loaded")}function u(g){i("error",g),_(l,"error")}ie(()=>W(n()),()=>{n()?_(l,"loading"):_(l,"error")}),qt(),yt();var o=Sc(),v=h(o);{var f=g=>{var M=Ec(),C=h(M);xn(C,{width:"100%",height:"100%",get radius(){return a()}}),Lt(2,M,()=>kn,()=>({duration:200})),m(g,M)};j(v,g=>{s(l)==="loading"&&g(f)})}var d=b(v,2);{var p=g=>{var M=Mc();let C;de(()=>{bt(M,"src",n()),bt(M,"alt",r()),Xe(M,`border-radius: ${a()??""}`),C=De(M,1,"svelte-1b8que2",null,C,{vis:s(l)==="loaded"})}),I("load",M,c),I("error",M,u),m(g,M)};j(d,g=>{n()&&s(l)!=="error"&&g(p)})}var y=b(d,2);{var x=g=>{var M=Qe(),C=Te(M);qr(C,t,"fallback",{}),m(g,M)};j(y,g=>{s(l)==="error"&&g(x)})}de(()=>Xe(o,`border-radius: ${a()??""}`)),m(e,o),pt()}class Tc{constructor(){this.socket=null,this.queue=[],this.isProcessing=!1,this.reconnectTimer=null,this.watchdogTimer=null}get isConnected(){return this.socket&&this.socket.readyState===WebSocket.OPEN}connect(){if(this.socket&&(this.socket.readyState===WebSocket.CONNECTING||this.socket.readyState===WebSocket.OPEN))return;this.reconnectTimer&&clearTimeout(this.reconnectTimer);let t=Tr.MOODE_IP||window.location.hostname;t=t.replace(/^https?:\/\//,"").split(":")[0].split("/")[0];const n=Tr.WS_PORT||"8080",r=`ws://${t}:${n}`;console.log("[MPD] Attempting connection to:",r);try{this.socket=new WebSocket(r,["binary"])}catch(a){console.error("[MPD] WebSocket URL is still invalid:",r,a),this.reconnectTimer=setTimeout(()=>this.connect(),5e3);return}this.socket.onopen=()=>{console.log("[MPD] Connected"),Fa.set("Connected"),Ne("Connected to Moode","success"),this._processQueue()},this.socket.onmessage=a=>this._handleMessage(a),this.socket.onclose=a=>{console.warn("[MPD] Socket closed",a.code,a.reason),Fa.set("Disconnected"),this._cleanup(),this.reconnectTimer=setTimeout(()=>this.connect(),3e3)},this.socket.onerror=a=>{console.error("[MPD] Socket error",a)}}send(t){return new Promise((n,r)=>{this.queue.push({cmd:t,resolve:n,reject:r}),this._processQueue()})}_cleanup(){for(this.isProcessing=!1,this.watchdogTimer&&clearTimeout(this.watchdogTimer);this.queue.length>0;){const{reject:t,cmd:n}=this.queue.shift();console.warn(`[MPD] Dropping cmd due to disconnect: ${n}`),t(new Error("Connection lost"))}}async _processQueue(){if(this.isProcessing||this.queue.length===0||!this.isConnected)return;this.isProcessing=!0;const{cmd:t}=this.queue[0];this.watchdogTimer&&clearTimeout(this.watchdogTimer),this.watchdogTimer=setTimeout(()=>{console.error("[MPD] Watchdog timeout for cmd:",t),this.socket&&this.socket.close()},5e3);try{const n=t.endsWith(`
`)?t:t+`
`;this.socket.send(new TextEncoder().encode(n))}catch(n){console.error("[MPD] Send error",n),this._cleanup()}}async _handleMessage(t){let n=t.data;n instanceof Blob&&(n=await n.text()),this.watchdogTimer&&(clearTimeout(this.watchdogTimer),this.watchdogTimer=null);const r=this.queue[0],a=n===`OK
`||n.endsWith(`
OK
`),i=n.startsWith("ACK");if(a||i){if(this.queue.shift(),this.isProcessing=!1,r)if(i)console.error(`[MPD] CMD: ${r.cmd} -> ERROR: ${n.trim()}`),r.reject(new Error(n.trim()));else{const l=n.replace(/\nOK\n$/,"").replace(/^OK\n$/,"");r.resolve(l)}this._processQueue()}else if(this._buffer||(this._buffer=""),this._buffer+=n,this._buffer.endsWith(`
OK
`)||this._buffer===`OK
`||this._buffer.startsWith("ACK")){const l=new MessageEvent("message",{data:this._buffer});this._buffer="",this._handleMessage(l)}}}const we=new Tc,on={parseKeyValue(e){const t={};if(!e)return t;const n=e.split(`
`);for(const r of n){const a=r.indexOf(": ");if(a===-1)continue;const i=r.substring(0,a).toLowerCase(),l=r.substring(a+2);t[i]=l}return t},parseStatus(e){const t=this.parseKeyValue(e);let n="";if(t.audio){const r=t.audio.split(":");r[1]&&(n=`${r[1]}-bit`)}return{state:t.state||"stop",volume:parseInt(t.volume)||0,elapsed:parseFloat(t.elapsed)||0,duration:parseFloat(t.duration)||0,random:t.random==="1",repeat:t.repeat==="1",songId:parseInt(t.songid)||-1,playlistLength:parseInt(t.playlistlength)||0,bitrate:parseInt(t.bitrate)||0,format:n,playlistVersion:parseInt(t.playlist)||0}},parseCurrentSong(e){const t=this.parseKeyValue(e);return this._normalizeTrack(t)},parsePlaylists(e){const t=e.split(`
`),n=[];let r=null;for(const a of t)a.startsWith("playlist: ")?(r&&n.push(r),r={playlist:a.substring(10)}):a.startsWith("Last-Modified: ")&&r&&(r["last-modified"]=a.substring(15));return r&&n.push(r),n.map(a=>({name:a.playlist,lastModified:a["last-modified"]}))},parseTracks(e){const t=[];let n=null,r=0,a=e.indexOf(`
`,r);for(;a!==-1;){const i=e.substring(r,a),l=i.indexOf(": ");if(l!==-1){const c=i.substring(0,l).toLowerCase(),u=i.substring(l+2);c==="file"?(n&&t.push(this._normalizeTrack(n)),n={file:u}):n&&(n[c]=u)}r=a+1,a=e.indexOf(`
`,r)}return n&&t.push(this._normalizeTrack(n)),t},_normalizeTrack(e){const t=e.file||e.File||"",n=e.Title||e.title||e.Name||e.name||t.split("/").pop()||"Unknown";return{file:t,title:n,artist:e.Artist||e.artist||"Unknown Artist",album:e.Album||e.album||"Unknown Album",genre:e.Genre||e.genre||"Unknown",time:parseFloat(e.Time||e.time||0),track:e.Track||e.track||"",id:e.Id||e.id,stationName:e.name||e.Name||null}}},$c=1e3,Ac=250;let Hr=null,kr=null,Yr=0,$n=1,es=!0,sn=!1,Cn=0,Gn=null;function _r(e){return e?String(e).replace(/\\/g,"\\\\").replace(/"/g,'\\"'):""}function Cc(){Pc(),es=!0,sn=!1,Cn=0,Ge.set(!1),Ot(),Hr=setInterval(()=>{we.isConnected&&!we.isProcessing&&Ot()},$c)}function Pc(){Hr&&(clearInterval(Hr),Hr=null),oa()}async function Ot(){try{const e=await we.send("status"),t=await we.send("currentsong"),n=on.parseStatus(e),r=on.parseCurrentSong(t);Lc(n,r);const a=Re(Ni);if(Re(Ge))return;(n.playlistLength>0&&n.playlistVersion!==a||n.playlistLength>0&&Re($r).length===0)&&Rc(n.playlistVersion)}catch(e){e.message!=="Connection lost"&&console.warn("[Player] Sync skip:",e.message)}}async function Rc(e){if(!Re(Ge))try{const t=await we.send("playlistinfo");if(Re(Ge))return;const n=on.parseTracks(t),r=n.map(l=>l.file).filter(l=>l&&!l.startsWith("http"));let a=new Map;if(r.length>0)try{a=await mn.getFilesMap(r)}catch(l){console.warn("Failed to hydrate queue from DB",l)}const i=n.map(l=>{const c=a.get(l.file);return c?{...l,thumbHash:c.thumbHash,qualityBadge:c.qualityBadge,title:l.title||c.title,artist:l.artist||c.artist,album:l.album||c.album,_uid:String(l.id||l.pos+l.file)}:{...l,_uid:String(l.id||l.pos+l.file)}});$r.set(i),Ni.set(e)}catch(t){console.error("Queue sync error",t)}}function Lc(e,t){const n=Re(Gt),r=Re(En),a=t.file&&t.file.startsWith("http");if(a){const i=o=>(o||"").toString().toLowerCase().replace(/[^a-z0-9]/g,""),l=i(t.file),c=i(t.title),u=r.find(o=>{const v=i(o.station||o.file||o.url||(Array.isArray(o)?o[1]:"")),f=i(o.name||(Array.isArray(o)?o[0]:""));return v&&l.includes(v)||f&&c.includes(f)});u?t.stationName=u.name||u[0]:n.stationName&&n.file===t.file&&(t.stationName=n.stationName)}Gt.set(t),ut.update(i=>{const l=e.state==="play",c=performance.now();if(e.state==="pause"||i.state==="pause")return Fr(!1),c<Cn?i:e;if(t.file!==n.file||es)return es=!1,sn=!1,$n=1,a&&(e.elapsed=0),Fr(l&&!a),e;if(c<Cn)return i;if(sn)return sn=!1,$n=1,Fr(l&&!a),e;if(l&&!a){const u=e.elapsed-i.elapsed;if(Math.abs(u)>2)return $n=1,e;if(Math.abs(u)<.05)$n=1;else{let v=u/1.5;$n=Math.max(.5,Math.min(1.5,1+v))}return{...e,elapsed:i.elapsed}}return Fr(!1),e})}function Fr(e){e?Hs():oa()}function Hs(){kr||es||(Yr=performance.now(),kr=setInterval(()=>{const e=performance.now();let t=(e-Yr)/1e3;t>2&&(t=0),Yr=e,ut.update(n=>{if(n.state!=="play")return n;let r=n.elapsed+t*$n;return n.duration>0&&r>n.duration&&(r=n.duration),{...n,elapsed:r}})},Ac))}function oa(){kr&&(clearInterval(kr),kr=null),$n=1,Yr=0}const Ft={async togglePlay(){const t=Re(ut).state==="play";Cn=performance.now()+800,ut.update(n=>{const r=t?"pause":"play";return r==="play"?Hs():oa(),{...n,state:r}}),await we.send(t?"pause 1":"play"),setTimeout(Ot,900)},async next(){sn=!0,Cn=0,await we.send("next"),Ot()},async previous(){sn=!0,Cn=0,ut.update(e=>({...e,elapsed:0})),await we.send("previous"),Ot()},async setVolume(e){ut.update(t=>({...t,volume:e})),await we.send(`setvol ${e}`)},async seek(e){sn=!0,Cn=performance.now()+500,ut.update(t=>({...t,elapsed:e})),await we.send(`seekcur ${e}`),setTimeout(Ot,600)},async toggleRandom(){const t=!Re(ut).random;ut.update(n=>({...n,random:t})),await we.send(`random ${t?1:0}`)},async toggleRepeat(){const t=!Re(ut).repeat;ut.update(n=>({...n,repeat:t})),await we.send(`repeat ${t?1:0}`)},async playUri(e,t={}){Ge.set(!0);const n=_r(e);sn=!0,ut.update(r=>({...r,state:"play",elapsed:0})),Gt.set({title:t.title||e.split("/").pop(),artist:t.artist||"",file:e}),Hs();try{await we.send("stop"),await we.send("clear"),await we.send(`add "${n}"`),await we.send("play")}catch(r){console.error("Play error",r),Ne("Failed to play","error")}setTimeout(()=>{Ge.set(!1),Ot()},1200)},async addToQueue(e){const t=_r(e);try{await we.send(`add "${t}"`),Ne("Added to queue","success")}catch(n){console.error("Add queue error",n),Ne("Failed to add","error")}},async playNext(e){Ge.set(!0);const t=_r(e);try{const n=await we.send("currentsong"),r=parseInt(on.parseKeyValue(n).pos||-1);if(r===-1)Ge.set(!1),await this.playUri(e);else{const a=await we.send(`addid "${t}"`),i=parseInt(on.parseKeyValue(a).id);isNaN(i)||(await we.send(`moveid ${i} ${r+1}`),Ne("Will play next","success")),setTimeout(()=>Ge.set(!1),1e3)}}catch(n){console.error("Play Next error",n),Ne("Failed to set next","error"),Ge.set(!1)}},async removeFromQueue(e){Ge.set(!0),Gn&&clearTimeout(Gn);try{$r.update(t=>{const n=[...t];return n.splice(e,1),n}),await we.send(`delete ${e}`)}catch{Ne("Failed to remove","error"),Ge.set(!1);return}Gn=setTimeout(()=>{Ge.set(!1)},1e3)},async moveTrack(e,t){if(e!==t){Ge.set(!0),Gn&&clearTimeout(Gn);try{await we.send(`move ${e} ${t}`)}catch(n){console.error("Move failed",n),Ne("Move failed","error"),Ge.set(!1),Ot();return}Gn=setTimeout(()=>{Ge.set(!1),Ot()},2e3)}},async playAllTracks(e){if(!(!e||e.length===0)){Ge.set(!0),sn=!0;try{await we.send("stop"),await we.send("clear");for(const t of e){const n=_r(t.file);await we.send(`add "${n}"`)}await we.send("play 0"),Ne(`Playing ${e.length} tracks`,"success")}catch(t){console.error("Play All error",t),Ne("Failed to play all tracks","error")}setTimeout(()=>{Ge.set(!1),Ot()},1500)}},async addAllToQueue(e){if(!(!e||e.length===0)){Ge.set(!0);try{for(const t of e){const n=_r(t.file);await we.send(`add "${n}"`)}Ne(`Added ${e.length} tracks to queue`,"success")}catch(t){console.error("Add All error",t),Ne("Failed to add tracks","error")}setTimeout(()=>{Ge.set(!1),Ot()},1e3)}},async saveQueue(e){if(!e)return;const t=e.replace(/"/g,'\\"');try{await we.send(`save "${t}"`),Ne(`Playlist "${e}" saved`,"success")}catch(n){if(n.message.includes("exist")){if(confirm(`Playlist "${e}" exists. Overwrite?`))try{await we.send(`rm "${t}"`),await we.send(`save "${t}"`),Ne(`Playlist "${e}" overwritten`,"success")}catch{Ne("Failed to overwrite","error")}}else console.error(n)}}};function ji(e){return new Worker("/assets/sync.worker-BmwNGWYU.js",{name:e?.name})}const gr="Favorites";let Ba=Promise.resolve();const Zn=e=>e?e.toLowerCase().replace(/^https?:\/\//,"").replace(/^www\./,"").split("?")[0].replace(/\/$/,""):"";function zc(e){if(e==="Favorites")return"linear-gradient(135deg, hsl(348, 95%, 58%), hsl(348, 90%, 40%))";let t=0;for(let r=0;r<e.length;r++)t=e.charCodeAt(r)+((t<<5)-t);const n=Math.abs(t%360);return`linear-gradient(135deg, hsl(${n}, 60%, 40%), hsl(${(n+40)%360}, 60%, 30%))`}const Un={async syncLibrary(){if(Re(Nt))return;Nt.set(!0);const e=new ji;e.postMessage({type:"START_SYNC",payload:{url:`http://${Tr.MOODE_IP}/wave-api.php`}}),e.onmessage=t=>{const{type:n,count:r}=t.data;n==="DONE"&&(Ne(`Library updated: ${r} tracks`,"success"),Nt.set(!1),e.terminate()),n==="ERROR"&&(Ne("Sync Failed","error"),Nt.set(!1),e.terminate())},e.onerror=()=>{Nt.set(!1),e.terminate()}},async loadPlaylists(){Fs.set(!0);try{const e=await we.send("listplaylists"),n=on.parsePlaylists(e).map(r=>({...r,color:zc(r.name)}));aa.set(n)}catch(e){console.error(e)}finally{Fs.set(!1)}},async openPlaylistDetails(e){if(!e)return;Bs.set(!0);const t=e.replace(/"/g,'\\"');try{const n=await we.send(`listplaylistinfo "${t}"`),r=on.parseTracks(n),a=r.map(c=>c.file).filter(c=>c&&!c.startsWith("http"));let i=new Map;if(a.length>0)try{i=await mn.getFilesMap(a)}catch(c){console.warn("Failed to hydrate playlist from DB",c)}const l=r.map(c=>{const u=i.get(c.file);return u?{...c,thumbHash:u.thumbHash,qualityBadge:u.qualityBadge,title:c.title||u.title,artist:c.artist||u.artist,album:c.album||u.album,_uid:La()}:{...c,_uid:La()}});tr.set(l)}catch(n){console.error(n),Ne("Could not load playlist","error")}finally{Bs.set(!1)}},async movePlaylistTrack(e,t,n){const r=e.replace(/"/g,'\\"');try{await we.send(`playlistmove "${r}" ${t} ${n}`)}catch{Ne("Move failed","error")}},async removeFromPlaylist(e,t){const n=e.replace(/"/g,'\\"');try{await we.send(`playlistdelete "${n}" ${t}`),Ne("Track removed","success")}catch{Ne("Delete failed","error")}},async loadFavorites(){try{const e=await we.send(`listplaylistinfo "${gr}"`),t=on.parseTracks(e),n=new Set;t.forEach(r=>{r.file&&n.add(r.file)}),gn.set(n)}catch{gn.set(new Set)}},async toggleFavorite(e){if(!e||!e.file)return;const t=e.file,n=t.replace(/"/g,'\\"'),r=t.startsWith("http"),a=Re(gn);let i=a.has(t);if(!i&&r){const l=Zn(t);for(const c of a)if(Zn(c)===l){i=!0;break}}gn.update(l=>{const c=new Set(l);if(i){if(c.delete(t),r){const u=Zn(t);for(const o of c)Zn(o)===u&&c.delete(o)}}else c.add(t);return c}),Ba=Ba.then(async()=>{try{const l=await we.send(`listplaylistinfo "${gr}"`),c=on.parseTracks(l);let u=[];if(c.forEach((o,v)=>{let f=!1;(o.file===t||r&&Zn(o.file)===Zn(t)||r&&(o.file.includes(t)||t.includes(o.file)))&&(f=!0),f&&u.push(v)}),i){if(u.length>0){u.sort((o,v)=>v-o);for(const o of u)await we.send(`playlistdelete "${gr}" ${o}`);Ne("Removed from Favorites","info")}}else u.length>0?console.log("[Fav] Track already exists. Skipping."):(await we.send(`playlistadd "${gr}" "${n}"`),c.length>0&&await we.send(`playlistmove "${gr}" ${c.length} 0`),Ne("Added to Favorites","success"))}catch(l){console.error("Fav action failed",l),Ne("Action failed","error")}finally{await this.loadFavorites()}})}};function qi(){we.connect(),Cc(),Un.loadPlaylists(),Un.loadFavorites()}function la(e){return we.send(e)}const{togglePlay:cs,toggleRandom:In,toggleRepeat:On,setVolume:Cr,seek:ca,addToQueue:Ic,playNext:Oc,removeFromQueue:Nc,moveTrack:Dc,saveQueue:Fc,playAllTracks:Ui,addAllToQueue:Hi}=Ft,{syncLibrary:Bc,loadRadioStations:jc,loadPlaylists:ua,openPlaylistDetails:Yi,toggleFavorite:Wi,loadFavorites:qc,removeFromPlaylist:Vi,movePlaylistTrack:Qi}=Un;function Pr(e){const t=Re(Gt),n=Re(En),r=Re(zr);if(t.file&&t.file.startsWith("http")&&n.length>0&&(e==="next"||e==="previous")){let i=n.findIndex(c=>c.name===r);i===-1&&(i=0);let l;e==="next"?(l=i+1,l>=n.length&&(l=0)):(l=i-1,l<0&&(l=n.length-1)),va(n[l])}else e==="next"&&Ft.next(),e==="previous"&&Ft.previous()}function va(e){if(!e)return;zr.set(e.name);const t=e[1]||e.station||e.file||e.url;t&&Ft.playUri(t,{title:e.name,artist:e.genre||"Radio Stream",stationName:e.name})}function da(e){e&&(zr.set(null),Ft.playUri(e.file,{title:e.title,artist:e.artist,album:e.album,stationName:null}))}async function Ys(e,t=0){if(!e)return;zr.set(null);const n=e.replace(/"/g,'\\"');try{await we.send("stop"),await we.send("clear"),await we.send(`load "${n}"`),await we.send(`play ${t}`)}catch(r){console.error("Failed to play playlist context",r)}}const Uc=Object.freeze(Object.defineProperty({__proto__:null,addAllToQueue:Hi,addToQueue:Ic,connect:qi,loadFavorites:qc,loadPlaylists:ua,loadRadioStations:jc,movePlaylistTrack:Qi,moveTrack:Dc,nav:Pr,openPlaylistDetails:Yi,playAllTracks:Ui,playNext:Oc,playPlaylistContext:Ys,playStation:va,playTrackOptimistic:da,removeFromPlaylist:Vi,removeFromQueue:Nc,runMpdRequest:la,saveQueue:Fc,seek:ca,setVolume:Cr,syncLibrary:Bc,toggleFavorite:Wi,togglePlay:cs,toggleRandom:In,toggleRepeat:On},Symbol.toStringTag,{value:"Module"}));function Xi(e,t=2e3){let n;const r=i=>{i.type==="mousedown"&&i.button!==0||(n=setTimeout(()=>{e.dispatchEvent(new CustomEvent("longpress",{detail:{originalEvent:i}}))},t))},a=()=>{clearTimeout(n)};return e.addEventListener("mousedown",r),e.addEventListener("touchstart",r,{passive:!0}),e.addEventListener("mouseup",a),e.addEventListener("mouseleave",a),e.addEventListener("touchend",a),e.addEventListener("touchcancel",a),e.addEventListener("touchmove",a),{destroy(){e.removeEventListener("mousedown",r),e.removeEventListener("touchstart",r),e.removeEventListener("mouseup",a),e.removeEventListener("mouseleave",a),e.removeEventListener("touchend",a),e.removeEventListener("touchcancel",a),e.removeEventListener("touchmove",a)}}}var Hc=S('<div class="drag-handle svelte-5cs2hz" title="Drag to reorder"><div class="icon-small svelte-5cs2hz"><!></div></div>'),Yc=S('<div class="eq-anim svelte-5cs2hz"><span class="bar b1 svelte-5cs2hz"></span> <span class="bar b2 svelte-5cs2hz"></span> <span class="bar b3 svelte-5cs2hz"></span></div>'),Wc=S('<div class="icon-small svelte-5cs2hz"><!></div>'),Vc=S('<div class="icon-small svelte-5cs2hz"><!></div>'),Qc=S('<div class="icon-small accent svelte-5cs2hz"><!></div>'),Xc=S('<span class="num svelte-5cs2hz"> </span>'),Kc=S('<button class="num-box svelte-5cs2hz"><!></button>'),Gc=S('<div slot="fallback" class="icon-ph svelte-5cs2hz"><!></div>'),Zc=S('<span class="quality-badge svelte-5cs2hz"> </span>'),Jc=S('<button class="btn-icon small remove svelte-5cs2hz"><!></button>'),eu=S('<div class="dur svelte-5cs2hz"> </div>'),tu=S('<div role="button" tabindex="0"><div class="left svelte-5cs2hz"><!> <div class="thumb svelte-5cs2hz"><!></div></div> <div class="info svelte-5cs2hz"><div class="title-row svelte-5cs2hz"><div class="title text-ellipsis svelte-5cs2hz"> </div> <!></div> <div> </div></div> <div class="right svelte-5cs2hz"><button class="btn-icon small context-menu-btn svelte-5cs2hz" title="Options"><!></button> <button><!></button> <!></div></div>');function us(e,t){ht(t,!1);const n=()=>pe(gn,"$favorites",u),r=()=>pe(Gt,"$currentSong",u),a=()=>pe(ut,"$status",u),i=()=>pe(En,"$stations",u),l=()=>pe(Ct,"$navigationStack",u),c=()=>pe(xt,"$activeMenuTab",u),[u,o]=zt(),v=$(),f=$(),d=$(),p=$(),y=$(),x=$(),g=$(),M=$(),C=$(),N=$(),re=$(),se=$(),oe=$(),ge=$();let T=rt(t,"track",8),O=rt(t,"index",8),ue=rt(t,"isEditable",8,!1);const he=sa();let V=$(!1),te=$(!1);function D(G){if(s(p))return"â";if(!G)return"0:00";const Y=parseInt(G,10),J=Math.floor(Y/60),xe=Y%60;return`${J}:${xe.toString().padStart(2,"0")}`}function L(G){G.stopPropagation(),s(f)?cs():he("play")}function ee(){const G=l(),Y=G[G.length-1],J=c();return Y?.view==="details"&&Y.data?.name?{type:"playlist",playlistName:Y.data.name,index:O()}:Y?.view==="queue"||Y?.view==="root"&&J==="queue"?{type:"queue",index:O()}:{type:"general"}}function H(G){G.stopPropagation(),Jr(G,T(),ee())}function F(G){ue()||Jr(G.detail.originalEvent,T(),ee())}ie(()=>W(T()),()=>{T()&&_(te,!1)}),ie(()=>(n(),W(T())),()=>{_(v,n().has(T().file))}),ie(()=>(W(T()),r()),()=>{_(f,T().file===r().file)}),ie(()=>a(),()=>{_(d,a().state==="play")}),ie(()=>W(T()),()=>{_(p,T().file&&(T().file.startsWith("http")||T().file.includes("RADIO")))}),ie(()=>(s(f),s(d),s(V)),()=>{_(y,s(f)&&s(d)&&s(V))}),ie(()=>(s(f),s(d),s(V)),()=>{_(x,s(f)&&!s(d)&&s(V)||!s(f)&&s(V))}),ie(()=>(s(f),s(d),s(V)),()=>{_(g,s(f)&&s(d)&&!s(V))}),ie(()=>(s(f),s(d),s(V)),()=>{_(M,s(f)&&!s(d)&&!s(V))}),ie(()=>W(T()),()=>{_(C,T().title||T().file?.split("/").pop())}),ie(()=>W(T()),()=>{_(N,T().artist||"Unknown")}),ie(()=>W(T()),()=>{_(re,D(T().time))}),ie(()=>W(T()),()=>{_(se,T().qualityBadge?T().qualityBadge.split(" ")[0]:null)}),ie(()=>(s(f),r()),()=>{_(oe,s(f)?r().stationName:null)}),ie(()=>(s(te),W(T()),i(),s(oe),Ar),()=>{_(ge,s(te)?lr(T(),i(),s(oe)):Ar(T(),"sm",i(),s(oe)))}),qt(),yt();var k=tu();let P;var K=h(k),R=h(K);{var X=G=>{var Y=Hc(),J=h(Y),xe=h(J);ce(xe,()=>(W(w),E(()=>w.DRAG_HANDLE))),I("mousedown",Y,Pe=>he("startdrag",Pe)),I("touchstart",Y,Pe=>he("startdrag",Pe),void 0,!0),I("click",Y,Dt(function(Pe){Kr.call(this,t,Pe)})),m(G,Y)},z=G=>{var Y=Kc(),J=h(Y);{var xe=Ue=>{var et=Yc();m(Ue,et)},Pe=Ue=>{var et=Qe(),vt=Te(et);{var He=Ce=>{var Ve=Wc(),Ke=h(Ve);ce(Ke,()=>(W(w),E(()=>w.PAUSE))),m(Ce,Ve)},$e=Ce=>{var Ve=Qe(),Ke=Te(Ve);{var St=tt=>{var lt=Vc(),dt=h(lt);ce(dt,()=>(W(w),E(()=>w.PLAY))),m(tt,lt)},en=tt=>{var lt=Qe(),dt=Te(lt);{var tn=Ut=>{var Ht=Qc(),Mn=h(Ht);ce(Mn,()=>(W(w),E(()=>w.PLAY))),m(Ut,Ht)},hr=Ut=>{var Ht=Xc(),Mn=h(Ht);de(()=>fe(Mn,O()+1)),m(Ut,Ht)};j(dt,Ut=>{s(M)?Ut(tn):Ut(hr,!1)},!0)}m(tt,lt)};j(Ke,tt=>{s(x)?tt(St):tt(en,!1)},!0)}m(Ce,Ve)};j(vt,Ce=>{s(y)?Ce(He):Ce($e,!1)},!0)}m(Ue,et)};j(J,Ue=>{s(g)?Ue(xe):Ue(Pe,!1)})}I("click",Y,L),m(G,Y)};j(R,G=>{ue()?G(X):G(z,!1)})}var Q=b(R,2),le=h(Q);qn(le,{get src(){return s(ge)},get alt(){return s(C)},radius:"4px",$$events:{error:()=>_(te,!0)},$$slots:{fallback:(G,Y)=>{var J=Gc(),xe=h(J);ce(xe,()=>(s(p),W(w),E(()=>s(p)?w.RADIO:w.ALBUMS))),Lt(1,J,()=>kn),m(G,J)}}});var q=b(K,2),ve=h(q),U=h(ve),A=h(U),ne=b(U,2);{var Z=G=>{var Y=Zc(),J=h(Y);de(()=>fe(J,s(se))),m(G,Y)};j(ne,G=>{s(se)&&!s(p)&&G(Z)})}var B=b(ve,2);let ye;var _e=h(B),me=b(q,2),Ee=h(me),ke=h(Ee);ce(ke,()=>(W(w),E(()=>w.DOTS)));var be=b(Ee,2);let Me;var Oe=h(be);ce(Oe,()=>(s(v),W(w),E(()=>s(v)?w.HEART_FILLED:w.HEART)));var ze=b(be,2);{var Be=G=>{var Y=Jc(),J=h(Y);ce(J,()=>(W(w),E(()=>w.REMOVE))),I("click",Y,Dt(()=>he("remove",{index:O()}))),m(G,Y)},je=G=>{var Y=eu(),J=h(Y);de(()=>fe(J,s(re))),m(G,Y)};j(ze,G=>{ue()?G(Be):G(je,!1)})}Qt(()=>I("click",k,()=>!s(f)&&he("play"))),Qt(()=>I("mouseenter",k,()=>_(V,!0))),Qt(()=>I("mouseleave",k,()=>_(V,!1))),Pi(k,G=>Xi?.(G)),Qt(()=>I("longpress",k,F)),de(()=>{P=De(k,1,"row svelte-5cs2hz",null,P,{active:s(f),editable:ue()}),bt(U,"title",s(C)),fe(A,s(C)),ye=De(B,1,"artist text-ellipsis svelte-5cs2hz",null,ye,{link:!s(p)}),fe(_e,s(N)),Me=De(be,1,"btn-icon small svelte-5cs2hz",null,Me,{liked:s(v)})}),I("click",B,Dt(()=>{!s(p)&&T().artist&&(xt.set("artists"),yn("albums_by_artist",T().artist))})),I("click",Ee,H),I("click",be,Dt(()=>Wi(T()))),m(e,k),pt(),o()}const Br=100,ja=5,qa=25,Ua=3;function nu({tracksStore:e,onMoveTrack:t}){const n=Le(!1),r=Le(!1),a=Le(!1),i=Le(null),l=Le(null),c=Le(null),u=Le({x:0,y:0,width:0,height:0,grabOffsetX:0,grabOffsetY:0}),o=Le(null);let v=!1,f=0,d=0,p=0,y=0;const x={scrollContainer:null,listBodyContainer:null};let g=null;function M(V,te,D){const L=V.detail;if(L.button===2||(window.getSelection&&window.getSelection().removeAllRanges(),!x.scrollContainer))return;const H=x.scrollContainer.querySelectorAll(".row-wrapper")[te];if(!H)return;const F=H.getBoundingClientRect(),k=L.touches?L.touches[0].clientX:L.clientX,P=L.touches?L.touches[0].clientY:L.clientY,K=k-F.left,R=P-F.top;v=!0,n.set(!1),r.set(!1),f=k,d=P,p=k,y=P,i.set(te),l.set(te),o.set(D),c.set(null),u.set({x:k,y:P,width:F.width,height:F.height,grabOffsetX:K,grabOffsetY:R})}function C(V){if(!v||Re(r))return;const te=V.touches?V.touches[0].clientX:V.clientX,D=V.touches?V.touches[0].clientY:V.clientY;if(!Re(n)){const L=Math.abs(te-f),ee=Math.abs(D-d);if(L<Ua&&ee<Ua)return;n.set(!0)}V.cancelable&&V.preventDefault(),p=te,y=D,u.update(L=>({...L,x:p,y})),T(y),N()}function N(){if(!x.listBodyContainer)return;const V=x.listBodyContainer.getBoundingClientRect(),te=Re(u),L=y-V.top-te.grabOffsetY+te.height/2,ee=Re(e).length;if(L<0){l.set(0);return}if(L>V.height){l.set(ee);return}const H=Array.from(x.listBodyContainer.querySelectorAll(".row-wrapper"));let F=-1,k=1/0;H.forEach((P,K)=>{const R=P.offsetTop+P.offsetHeight/2,X=Math.abs(L-R);X<k&&(k=X,F=K)}),F!==-1&&l.set(F)}function re(V){if(v){if(v=!1,!Re(n)){oe();return}se()}}async function se(){ue(),n.set(!1),r.set(!0);const V=Re(l);if(Re(u),x.listBodyContainer&&V!==null){const k=x.listBodyContainer.querySelectorAll(".row-wrapper")[V];if(k){const P=x.listBodyContainer.getBoundingClientRect(),K=P.top+k.offsetTop,R=P.left+k.offsetLeft;u.update(X=>({...X,y:K+X.grabOffsetY,x:R+X.grabOffsetX}))}}await new Promise(F=>setTimeout(F,200)),a.set(!0),await Mr(),x.listBodyContainer&&x.listBodyContainer.offsetHeight;const te=Re(i),D=Re(e).length;let L=Math.max(0,Math.min(V,D)),ee=L;if(te!==null&&te!==L){const F=[...Re(e)],[k]=F.splice(te,1);ee=Math.max(0,Math.min(ee,F.length)),F.splice(ee,0,k),e.set(F),t&&t(te,ee)}i.set(null),l.set(null),o.set(null),r.set(!1);const H=te!==L?ee:te;c.set(H),await Mr(),requestAnimationFrame(()=>{a.set(!1),setTimeout(()=>{c.set(null)},300)})}function oe(){v=!1,ge()}function ge(){n.set(!1),r.set(!1),i.set(null),l.set(null),o.set(null),ue()}function T(V){if(!x.scrollContainer)return;const{top:te,bottom:D}=x.scrollContainer.getBoundingClientRect(),L=V-te,ee=D-V;ue();let H=0;if(L<Br&&L>0){const F=1-L/Br;H=-(ja+qa*(F*F))}else if(ee<Br&&ee>0){const F=1-ee/Br;H=ja+qa*(F*F)}H!==0&&O(H)}function O(V){g||(g=requestAnimationFrame(function te(){x.scrollContainer&&(x.scrollContainer.scrollTop+=V,Re(n)&&(u.update(D=>({...D,x:p,y})),N(),g=requestAnimationFrame(te)))}))}function ue(){g&&(cancelAnimationFrame(g),g=null)}function he(V,te,D,L,ee,H){return H||!te&&!D||L===null||ee===null?"":V===L?"opacity: 0; pointer-events: none;":L===ee?"":L<ee&&V>L&&V<=ee?"transform: translateY(-100%);":L>ee&&V>=ee&&V<L?"transform: translateY(100%);":""}return{isDragging:n,isDropping:r,isReordering:a,draggingIndex:i,hoverIndex:l,justDroppedIndex:c,draggedItemData:o,ghostCoords:u,refs:x,onDragInit:M,onPointerMove:C,onPointerUp:re,getRowStyle:he,cancelDrag:oe}}var ru=S('<div><div style="pointer-events: none; width: 100%; height: 100%;" class="svelte-ym6b2"><!></div></div>'),su=S('<div style="padding: 10px 0;" class="svelte-ym6b2"><!></div>'),au=S('<div class="skeletons-wrapper svelte-ym6b2"></div>'),iu=S("<div><!></div>"),ou=S('<div class="content-padded svelte-ym6b2" style="text-align: center; opacity: 0.5;"> </div>'),lu=S("<!> <!>",1),cu=S('<div><!> <div class="list-body svelte-ym6b2"><!> <!></div></div>');function vs(e,t){ht(t,!1);const n=()=>pe(Ct,"$navigationStack",p),r=()=>pe(xt,"$activeMenuTab",p),a=()=>pe(ue,"$isDragging",p),i=()=>pe(he,"$isDropping",p),l=()=>pe(ee,"$draggedItemData",p),c=()=>pe(H,"$ghostCoords",p),u=()=>pe(te,"$draggingIndex",p),o=()=>pe(x(),"$itemsStore",p),v=()=>pe(L,"$justDroppedIndex",p),f=()=>pe(V,"$isReordering",p),d=()=>pe(D,"$hoverIndex",p),[p,y]=zt();let x=rt(t,"itemsStore",8),g=rt(t,"isEditMode",8,!1),M=rt(t,"isLoading",8,!1),C=rt(t,"emptyText",8,"List is empty"),N=rt(t,"onMoveItem",8,(U,A)=>{}),re=$(""),se=$(0),oe=$(!1);fr(async()=>{_(se,gc(s(re))),!M()&&s(se)>0&&s(T).refs.scrollContainer&&(await Mr(),Or(T,s(T).refs.scrollContainer.scrollTop=s(se)),_(oe,!0))});async function ge(){await Mr(),s(T).refs.scrollContainer&&(Or(T,s(T).refs.scrollContainer.scrollTop=s(se)),_(oe,!0))}Sl(()=>{s(T).cancelDrag(),s(T).refs.scrollContainer&&_c(s(re),s(T).refs.scrollContainer.scrollTop)});const T=$(nu({tracksStore:x(),onMoveTrack:(U,A)=>{N()(U,A)}})),O=s(T),ue=O.isDragging,he=O.isDropping,V=O.isReordering,te=O.draggingIndex,D=O.hoverIndex,L=O.justDroppedIndex,ee=O.draggedItemData,H=O.ghostCoords,F=$(O.refs);function k(U,A,ne){g()&&s(T).onDragInit(U,A,ne)}ie(()=>(n(),r()),()=>{const U=n(),A=U[U.length-1],ne=r();if(A&&A.view==="root")_(re,`root_${ne}`);else if(A){const Z=A.data?A.data.name||A.data:"unknown";_(re,`${A.view}_${Z}`)}}),ie(()=>(W(M()),s(oe),s(se),s(T)),()=>{!M()&&!s(oe)&&s(se)>0&&s(T).refs.scrollContainer&&ge()}),qt(),yt();var P=cu();I("mousemove",pn,function(...U){s(T).onPointerMove?.apply(this,U)}),I("mouseup",pn,function(...U){s(T).onPointerUp?.apply(this,U)}),I("touchmove",pn,function(...U){s(T).onPointerMove?.apply(this,U)},void 0,!1),I("touchend",pn,function(...U){s(T).onPointerUp?.apply(this,U)}),I("touchcancel",pn,function(...U){s(T).onPointerUp?.apply(this,U)});let K;var R=h(P);{var X=U=>{var A=ru();let ne;var Z=h(A),B=h(Z);qr(B,t,"row",{get item(){return l()},get index(){return u()},isGhost:!0,startDrag:()=>{}}),de(()=>{ne=De(A,1,"floating-item svelte-ym6b2",null,ne,{dropping:i()}),Xe(A,`
            top: ${c(),E(()=>c().y-c().grabOffsetY)??""}px; 
            left: ${c(),E(()=>c().x-c().grabOffsetX)??""}px;
            width: ${c(),E(()=>c().width)??""}px; 
            height: ${c(),E(()=>c().height)??""}px;
        `)}),m(U,A)};j(R,U=>{(a()||i())&&l()&&U(X)})}var z=b(R,2),Q=h(z);qr(Q,t,"header",{});var le=b(Q,2);{var q=U=>{var A=au();Rt(A,4,()=>Array(6),vn,(ne,Z)=>{var B=su(),ye=h(B);xn(ye,{width:"100%",height:"50px"}),m(ne,B)}),m(U,A)},ve=U=>{var A=lu(),ne=Te(A);Rt(ne,3,o,(ye,_e)=>ye._uid||_e,(ye,_e,me)=>{var Ee=iu();let ke;var be=h(Ee);qr(be,t,"row",{get item(){return s(_e)},get index(){return s(me)},isGhost:!1,startDrag:Me=>k(Me,s(me),s(_e))}),de(Me=>{ke=De(Ee,1,"row-wrapper svelte-ym6b2",null,ke,{"ghost-placeholder":u()===s(me)&&(a()||i()),"just-dropped":v()===s(me),"no-transition":f()}),Xe(Ee,Me)},[()=>(s(T),W(s(me)),a(),i(),u(),d(),f(),E(()=>s(T).getRowStyle(s(me),a(),i(),u(),d(),f())))]),m(ye,Ee)});var Z=b(ne,2);{var B=ye=>{var _e=ou(),me=h(_e);de(()=>fe(me,C())),m(ye,_e)};j(Z,ye=>{o(),E(()=>o().length===0)&&ye(B)})}m(U,A)};j(le,U=>{M()?U(q):U(ve,!1)})}jn(z,U=>Or(F,s(F).listBodyContainer=U),()=>s(F)?.listBodyContainer),jn(P,U=>Or(F,s(F).scrollContainer=U),()=>s(F)?.scrollContainer),de(()=>K=De(P,1,"base-list-scroll-container svelte-ym6b2",null,K,{dragging:a()})),Lt(1,z,()=>kn,()=>({duration:200})),m(e,P),pt(),y()}var uu=S('<div slot="fallback" class="icon-fallback svelte-1eh2rsb"><!></div>'),vu=S('<span class="year-badge-header svelte-1eh2rsb"> </span>'),du=S('<div class="artist-row-header svelte-1eh2rsb"><h2 class="header-sub svelte-1eh2rsb"> </h2> <!></div>'),fu=S('<span class="meta-tag svelte-1eh2rsb"> </span>'),hu=S('<span class="meta-tag svelte-1eh2rsb"> </span>'),pu=S('<span class="meta-tag quality svelte-1eh2rsb"> </span>'),_u=S('<div slot="header" class="content-padded svelte-1eh2rsb"><div class="view-header svelte-1eh2rsb"><div class="header-art svelte-1eh2rsb"><div style="width: 100%; height: 100%;" class="svelte-1eh2rsb"><!></div></div> <div class="header-info svelte-1eh2rsb"><div class="header-text-group svelte-1eh2rsb"><div class="header-label svelte-1eh2rsb"> </div> <h1 class="header-title svelte-1eh2rsb"> </h1> <!> <div class="meta-badges svelte-1eh2rsb"><!> <!> <!></div></div> <div class="header-actions svelte-1eh2rsb"><button class="btn-primary svelte-1eh2rsb"> </button> <button class="btn-secondary svelte-1eh2rsb"> </button></div></div></div></div>'),gu=S('<div slot="row" class="svelte-1eh2rsb"><!></div>'),mu=S("<button> </button>"),bu=S('<div class="sort-backdrop svelte-1eh2rsb"></div> <div class="sort-menu svelte-1eh2rsb"></div>',1),wu=S('<div class="sort-wrapper svelte-1eh2rsb"><button class="sort-trigger svelte-1eh2rsb"><span class="svelte-1eh2rsb"> </span> <span class="sort-trigger-icon svelte-1eh2rsb"><!></span></button> <!></div>'),yu=S('<div class="music-card svelte-1eh2rsb"><!> <!></div>'),ku=S('<div class="music-grid svelte-1eh2rsb"></div>'),xu=S('<div class="group-header header-label svelte-1eh2rsb"> </div>'),Eu=S('<div slot="fallback" class="icon-fallback svelte-1eh2rsb"><!></div>'),Mu=S('<div class="card-sub text-ellipsis svelte-1eh2rsb"> </div>'),Su=S('<div class="card-year svelte-1eh2rsb"> </div>'),Tu=S('<div class="card-year quality svelte-1eh2rsb"> </div>'),$u=S('<div class="music-card svelte-1eh2rsb" role="button" tabindex="0"><div class="card-img-container svelte-1eh2rsb"><!> <div class="play-overlay svelte-1eh2rsb"><span style="width:48px; color:#fff" class="svelte-1eh2rsb"><!></span></div></div> <div class="card-title svelte-1eh2rsb"> </div> <div class="card-sub-row svelte-1eh2rsb"><!> <!> <!></div></div>'),Au=S('<div class="empty-text svelte-1eh2rsb">No results found</div>'),Cu=S('<div class="music-grid svelte-1eh2rsb"></div>'),Pu=S('<div class="content-padded svelte-1eh2rsb"><div class="search-input-container svelte-1eh2rsb"><span class="search-icon svelte-1eh2rsb"><!></span> <input type="text" class="svelte-1eh2rsb"/> <!></div> <!></div>'),Ru=S("<div><!></div>");function Lu(e,t){ht(t,!1);const n=()=>pe(v,"$itemsStore",a),r=()=>pe(Ct,"$navigationStack",a),[a,i]=zt(),l=$(),c=$(),u=$();let o=rt(t,"activeCategory",8,"artists");const v=Le([]);let f=$(!0),d=$(""),p=$("name"),y=$(!1);const x=[{id:"name",label:"A-Z"},{id:"artist",label:"Artist"},{id:"year",label:"Oldest"},{id:"year_desc",label:"Newest"}];let g=$(!1),M=$(!1),C=$(null),N=$(""),re=$(""),se=$(0),oe=$("");function ge(){_(y,!s(y))}function T(k){_(p,k),_(y,!1)}function O(k,P){if(!k||k.length===0)return[];const K=[...k].sort((R,X)=>{switch(P){case"name":return R.displayName.localeCompare(X.displayName,void 0,{sensitivity:"base"});case"artist":const z=R.artist||"",Q=X.artist||"",le=z.localeCompare(Q,void 0,{sensitivity:"base"});return le!==0?le:(parseInt(R.year)||0)-(parseInt(X.year)||0);case"year":return(parseInt(R.year)||0)-(parseInt(X.year)||0);case"year_desc":return(parseInt(X.year)||0)-(parseInt(R.year)||0);default:return 0}});if(P==="artist"){const R=[];let X=null;return K.forEach(z=>{const Q=z.artist||"Unknown Artist";Q!==X&&(R.push({_uid:`header-${Q}`,isHeader:!0,title:Q}),X=Q),R.push(z)}),R}return K}async function ue(k,P){if(P){_(f,!0),_(C,P.data),_(N,""),_(re,""),_(oe,""),_(se,0);try{let K=[];if(P.view==="root")K=k==="artists"?await mn.getArtists():await mn.getAlbums();else if(P.view==="albums_by_artist"){const X=P.data.name||P.data;K=await mn.getArtistAlbums(X),_(p,"year")}else if(P.view==="tracks_by_album"){const X=P.data.name||P.data;K=await mn.getAlbumTracks(X)}const R=K.map((X,z)=>{const le=typeof X=="string"?{name:X}:X;let q=String(le.year||"");return q.length>4&&(q=q.substring(0,4)),{...le,displayName:le.name||le.title||le.artist||"Unknown",thumbFile:le.file||null,year:q,_uid:(le.file||le.name||z)+k+P.view}});if(v.set(R),P.view==="tracks_by_album"&&R.length>0){_(C,R[0]),_(se,R.length),_(oe,R[0].year);const X=R.reduce((z,Q)=>z+(Q.time||0),0);if(X>0){const z=Math.floor(X/3600),Q=Math.floor(X%3600/60);z>0?_(N,`${z} hr ${Q} min`):_(N,`${Q} min`)}R[0].qualityBadge&&_(re,R[0].qualityBadge)}}catch(K){console.error(K),v.set([])}finally{_(f,!1)}}}function he(k){s(u).view==="root"?o()==="artists"?yn("albums_by_artist",k):yn("tracks_by_album",k):s(u).view==="albums_by_artist"&&yn("tracks_by_album",k)}function V(){const k=n();k.length>0&&(_(g,!0),Ui(k))}function te(){const k=n();k.length>0&&(_(M,!0),Hi(k),setTimeout(()=>{_(M,!1)},2e3))}ie(()=>W(o()),()=>{o()&&(_(d,""),o(),_(p,"name"))}),ie(()=>(s(p),w),()=>{_(l,s(p)==="year_desc"?w.SORT_ASC:w.SORT_DESC)}),ie(()=>(n(),s(d),s(p)),()=>{_(c,O(n().filter(k=>{if(!s(d))return!0;const P=s(d).toLowerCase();return k.displayName.toLowerCase().includes(P)||k.artist&&k.artist.toLowerCase().includes(P)}),s(p)))}),ie(()=>r(),()=>{_(u,r()[r().length-1])}),ie(()=>(W(o()),s(u)),()=>{ue(o(),s(u))}),ie(()=>s(u),()=>{s(u)&&(_(g,!1),_(M,!1),_(y,!1))}),qt(),yt();var D=Ru();let L;var ee=h(D);{var H=k=>{vs(k,{get itemsStore(){return v},get isLoading(){return s(f)},isEditMode:!1,emptyText:"No tracks found",$$slots:{header:(P,K)=>{var R=_u(),X=h(R),z=h(X),Q=h(z),le=h(Q);{let J=Ze(()=>(W(lr),s(C),E(()=>lr(s(C)))));qn(le,{get src(){return s(J)},alt:"Art",radius:"8px",$$slots:{fallback:(xe,Pe)=>{var Ue=uu(),et=h(Ue);ce(et,()=>(W(w),E(()=>w.ALBUMS))),m(xe,Ue)}}})}var q=b(z,2),ve=h(q),U=h(ve),A=h(U),ne=b(U,2),Z=h(ne),B=b(ne,2);{var ye=J=>{var xe=du(),Pe=h(xe),Ue=h(Pe),et=b(Pe,2);{var vt=He=>{var $e=vu(),Ce=h($e);de(()=>fe(Ce,s(oe))),m(He,$e)};j(et,He=>{s(oe)&&s(oe)!=="0"&&He(vt)})}de(()=>fe(Ue,(s(C),E(()=>s(C).artist)))),m(J,xe)};j(B,J=>{s(C),E(()=>s(C)&&s(C).artist)&&J(ye)})}var _e=b(B,2),me=h(_e);{var Ee=J=>{var xe=fu(),Pe=h(xe);de(()=>fe(Pe,`${s(se)??""} tracks`)),m(J,xe)};j(me,J=>{s(se)>0&&J(Ee)})}var ke=b(me,2);{var be=J=>{var xe=hu(),Pe=h(xe);de(()=>fe(Pe,s(N))),m(J,xe)};j(ke,J=>{s(N)&&J(be)})}var Me=b(ke,2);{var Oe=J=>{var xe=pu(),Pe=h(xe);de(()=>fe(Pe,s(re))),m(J,xe)};j(Me,J=>{s(re)&&J(Oe)})}var ze=b(ve,2),Be=h(ze),je=h(Be),G=b(Be,2),Y=h(G);de(()=>{fe(A,(s(u),E(()=>s(u).view==="albums_by_artist"?"Artist":"Album"))),bt(ne,"title",(s(u),E(()=>s(u).data.name||s(u).data.displayName))),fe(Z,(s(u),E(()=>s(u).data.name||s(u).data.displayName||"Unknown"))),Be.disabled=s(g),fe(je,s(g)?"Playing...":"Play All"),G.disabled=s(M),fe(Y,s(M)?"Added":"To Queue")}),I("click",Be,V),I("click",G,te),m(P,R)},row:(P,K)=>{var R=gu();const X=Ze(()=>K.item),z=Ze(()=>K.index);var Q=h(R);us(Q,{get track(){return s(X)},get index(){return s(z)},isEditable:!1,$$events:{play:()=>da(s(X))}}),m(P,R)}}})},F=k=>{var P=Pu(),K=h(P),R=h(K),X=h(R);ce(X,()=>(W(w),E(()=>w.SEARCH)));var z=b(R,2),Q=b(z,2);{var le=A=>{var ne=wu(),Z=h(ne),B=h(Z),ye=h(B),_e=b(B,2),me=h(_e);ce(me,()=>s(l));var Ee=b(Z,2);{var ke=be=>{var Me=bu(),Oe=Te(Me),ze=b(Oe,2);Rt(ze,5,()=>x,vn,(Be,je)=>{var G=mu();let Y;var J=h(G);de(()=>{Y=De(G,1,"sort-item svelte-1eh2rsb",null,Y,{selected:s(p)===s(je).id}),fe(J,(s(je),E(()=>s(je).label)))}),I("click",G,()=>T(s(je).id)),m(Be,G)}),I("click",Oe,ge),Lt(3,Oe,()=>kn,()=>({duration:100})),Lt(3,ze,()=>Oi,()=>({start:.95,duration:100})),m(be,Me)};j(Ee,be=>{s(y)&&be(ke)})}de(be=>fe(ye,be),[()=>(s(p),E(()=>x.find(be=>be.id===s(p))?.label))]),I("click",Z,ge),m(A,ne)};j(Q,A=>{W(o()),s(u),E(()=>o()==="albums"||s(u).view==="albums_by_artist")&&A(le)})}var q=b(K,2);{var ve=A=>{var ne=ku();Rt(ne,4,()=>Array(12),vn,(Z,B)=>{var ye=yu(),_e=h(ye);xn(_e,{width:"100%",style:"aspect-ratio:1; border-radius:12px; margin-bottom:12px;"});var me=b(_e,2);xn(me,{width:"80%",height:"16px"}),m(Z,ye)}),m(A,ne)},U=A=>{var ne=Cu();Rt(ne,5,()=>s(c),Z=>Z._uid,(Z,B)=>{var ye=Qe(),_e=Te(ye);{var me=ke=>{var be=xu(),Me=h(be);de(()=>fe(Me,(s(B),E(()=>s(B).title)))),m(ke,be)},Ee=ke=>{var be=$u(),Me=h(be),Oe=h(Me);{let $e=Ze(()=>(W(Ar),s(B),E(()=>Ar(s(B),"md"))));qn(Oe,{get src(){return s($e)},get alt(){return s(B),E(()=>s(B).displayName)},radius:"8px",$$slots:{fallback:(Ce,Ve)=>{var Ke=Eu(),St=h(Ke);{var en=lt=>{var dt=Qe(),tn=Te(dt);ce(tn,()=>(W(w),E(()=>w.ARTISTS))),m(lt,dt)},tt=lt=>{var dt=Qe(),tn=Te(dt);ce(tn,()=>(W(w),E(()=>w.ALBUMS))),m(lt,dt)};j(St,lt=>{o()==="artists"?lt(en):lt(tt,!1)})}m(Ce,Ke)}}})}var ze=b(Oe,2),Be=h(ze),je=h(Be);ce(je,()=>(W(w),E(()=>w.PLAY)));var G=b(Me,2),Y=h(G),J=b(G,2),xe=h(J);{var Pe=$e=>{var Ce=Mu(),Ve=h(Ce);de(()=>fe(Ve,(s(B),E(()=>s(B).artist)))),m($e,Ce)};j(xe,$e=>{s(B),E(()=>s(B).artist)&&$e(Pe)})}var Ue=b(xe,2);{var et=$e=>{var Ce=Su(),Ve=h(Ce);de(()=>fe(Ve,(s(B),E(()=>s(B).year)))),m($e,Ce)};j(Ue,$e=>{s(B),E(()=>s(B).year&&s(B).year!=="0")&&$e(et)})}var vt=b(Ue,2);{var He=$e=>{var Ce=Tu(),Ve=h(Ce);de(Ke=>fe(Ve,Ke),[()=>(s(B),E(()=>s(B).qualityBadge.split(" ")[0]))]),m($e,Ce)};j(vt,$e=>{s(B),E(()=>s(B).qualityBadge)&&$e(He)})}de(()=>fe(Y,(s(B),E(()=>s(B).displayName)))),I("click",be,()=>he(s(B))),I("keypress",be,$e=>$e.key==="Enter"&&he(s(B))),m(ke,be)};j(_e,ke=>{s(B),E(()=>s(B).isHeader)?ke(me):ke(Ee,!1)})}m(Z,ye)},Z=>{var B=Au();m(Z,B)}),m(A,ne)};j(q,A=>{s(f)?A(ve):A(U,!1)})}de(()=>bt(z,"placeholder",`Filter ${o()??""}...`)),ta(z,()=>s(d),A=>_(d,A)),m(k,P)};j(ee,k=>{s(u),E(()=>s(u)?.view==="tracks_by_album")?k(H):k(F,!1)})}de(()=>L=De(D,1,"view-container svelte-1eh2rsb",null,L,{scrollable:s(u)?.view!=="tracks_by_album"})),m(e,D),pt(),i()}var zu=S('<div class="music-card svelte-1otxnt7"><div class="skeleton-img svelte-1otxnt7"><!></div> <!></div>'),Iu=S('<div class="music-grid svelte-1otxnt7"></div>'),Ou=S('<div slot="fallback" class="icon-fallback svelte-1otxnt7">ð»</div>'),Nu=S('<div class="quality-tag svelte-1otxnt7"> </div>'),Du=S('<div class="status-badge playing svelte-1otxnt7">PLAYING</div>'),Fu=S('<div class="status-badge paused svelte-1otxnt7">PAUSED</div>'),Bu=S('<span class="play-icon-wrap svelte-1otxnt7"><!></span>'),ju=S('<div class="card-sub svelte-1otxnt7"> </div>'),qu=S('<div role="button" tabindex="0"><div class="card-img-container svelte-1otxnt7"><!> <!> <div class="play-overlay svelte-1otxnt7"><!></div></div> <div class="card-title svelte-1otxnt7"> </div> <!></div>'),Uu=S('<div class="empty-state-container svelte-1otxnt7"><div class="empty-state-icon svelte-1otxnt7">ð</div> <div class="svelte-1otxnt7">No stations found</div></div>'),Hu=S('<div class="music-grid svelte-1otxnt7"></div> <!>',1),Yu=S('<div class="view-container scrollable content-padded svelte-1otxnt7"><div class="search-input-container svelte-1otxnt7"><span class="search-icon svelte-1otxnt7"><!></span> <input type="text" placeholder="Find station..." class="svelte-1otxnt7"/></div> <!></div>');function Wu(e,t){ht(t,!1);const n=()=>pe(En,"$stations",l),r=()=>pe(ut,"$status",l),a=()=>pe(Ur,"$isLoadingRadio",l),i=()=>pe(Gt,"$currentSong",l),[l,c]=zt(),u=$(),o=$();let v=$("");ie(()=>(n(),s(v)),()=>{_(u,n().filter(N=>{const re=s(v).toLowerCase();return N.name.toLowerCase().includes(re)||N.genre&&N.genre.toLowerCase().includes(re)}))}),ie(()=>r(),()=>{_(o,r().bitrate?`${r().bitrate} kbps`:r().format||"")}),qt(),yt();var f=Yu(),d=h(f),p=h(d),y=h(p);ce(y,()=>(W(w),E(()=>w.SEARCH)));var x=b(p,2),g=b(d,2);{var M=N=>{var re=Iu();Rt(re,4,()=>Array(12),vn,(se,oe)=>{var ge=zu(),T=h(ge),O=h(T);xn(O,{width:"100%",height:"100%"});var ue=b(T,2);xn(ue,{width:"70%",height:"16px"}),m(se,ge)}),m(N,re)},C=N=>{var re=Hu(),se=Te(re);Rt(se,5,()=>s(u),vn,(T,O)=>{const ue=Ze(()=>(s(O),E(()=>s(O).file))),he=Ze(()=>(i(),s(O),W(s(ue)),E(()=>i().stationName===s(O).name||i().file===s(ue)))),V=Ze(()=>(W(or),s(O),E(()=>or(s(O)))));var te=qu();let D;var L=h(te),ee=h(L);qn(ee,{get src(){return s(V)},get alt(){return s(O),E(()=>s(O).name)},radius:"var(--radius-md)",$$slots:{fallback:(q,ve)=>{var U=Ou();m(q,U)}}});var H=b(ee,2);{var F=q=>{var ve=Nu(),U=h(ve);de(()=>fe(U,s(o))),Lt(1,ve,()=>kn),m(q,ve)};j(H,q=>{s(he)&&s(o)&&q(F)})}var k=b(H,2),P=h(k);{var K=q=>{var ve=Qe(),U=Te(ve);{var A=Z=>{var B=Du();m(Z,B)},ne=Z=>{var B=Fu();m(Z,B)};j(U,Z=>{r(),E(()=>r().state==="play")?Z(A):Z(ne,!1)})}m(q,ve)},R=q=>{var ve=Bu(),U=h(ve);ce(U,()=>(W(w),E(()=>w.PLAY))),m(q,ve)};j(P,q=>{s(he)?q(K):q(R,!1)})}var X=b(L,2),z=h(X),Q=b(X,2);{var le=q=>{var ve=ju(),U=h(ve);de(()=>fe(U,(s(O),E(()=>s(O).genre)))),m(q,ve)};j(Q,q=>{s(O),E(()=>s(O).genre)&&q(le)})}de(()=>{D=De(te,1,"music-card svelte-1otxnt7",null,D,{"is-active":s(he)}),fe(z,(s(O),E(()=>s(O).name)))}),I("click",te,()=>va(s(O))),m(T,te)});var oe=b(se,2);{var ge=T=>{var O=Uu();m(T,O)};j(oe,T=>{s(u),n(),E(()=>s(u).length===0&&n().length>0)&&T(ge)})}m(N,re)};j(g,N=>{a()?N(M):N(C,!1)})}ta(x,()=>s(v),N=>_(v,N)),Lt(1,f,()=>kn,()=>({duration:200})),m(e,f),pt(),c()}var Vu=S('<span class="meta-tag svelte-m7c4tz">Loading...</span>'),Qu=S('<span class="meta-tag svelte-m7c4tz"> </span>'),Xu=S('<span class="meta-tag quality svelte-m7c4tz"> </span>'),Ku=S('<span class="meta-tag svelte-m7c4tz"> </span> <!> <!>',1),Gu=S('<div slot="header" class="content-padded svelte-m7c4tz"><div class="view-header svelte-m7c4tz"><div class="header-art svelte-m7c4tz"><div class="header-icon-wrap svelte-m7c4tz"><!></div></div> <div class="header-info svelte-m7c4tz"><div class="header-text-group svelte-m7c4tz"><div class="header-label svelte-m7c4tz">Playlist</div> <h1 class="header-title svelte-m7c4tz"> </h1> <div class="meta-badges svelte-m7c4tz"><!></div></div> <div class="header-actions svelte-m7c4tz"><button class="btn-primary svelte-m7c4tz"> </button> <button class="btn-secondary svelte-m7c4tz"> </button> <button title="Edit"><!></button></div></div></div></div>'),Zu=S('<div slot="row" class="svelte-m7c4tz"><!></div>'),Ju=S('<div class="music-card svelte-m7c4tz"><!> <!></div>'),ev=S('<div class="content-padded svelte-m7c4tz"><div class="music-grid svelte-m7c4tz"></div></div>'),tv=S('<div class="music-card svelte-m7c4tz"><div class="card-img-container svelte-m7c4tz"><div class="icon-wrap svelte-m7c4tz"><!></div> <div class="play-overlay svelte-m7c4tz"><span class="overlay-icon svelte-m7c4tz"><!></span></div></div> <div class="card-title svelte-m7c4tz"> </div> <div class="card-sub svelte-m7c4tz"> </div></div>'),nv=S('<div class="content-padded svelte-m7c4tz"><div class="music-grid svelte-m7c4tz"><div class="music-card svelte-m7c4tz"><div class="card-img-container dashed-cover svelte-m7c4tz"><div class="icon-wrap svelte-m7c4tz"><!></div></div> <div class="card-title svelte-m7c4tz">New Playlist</div></div> <!></div></div>'),rv=S("<div><!></div>");function sv(e,t){ht(t,!1);const n=()=>pe(Ct,"$navigationStack",c),r=()=>pe(tr,"$activePlaylistTracks",c),a=()=>pe(Bs,"$isLoadingTracks",c),i=()=>pe(aa,"$playlists",c),l=()=>pe(Fs,"$isLoadingPlaylists",c),[c,u]=zt(),o=$(),v=$(),f=$();let d=$(!1),p=$(!1),y=$(!1),x=$(""),g=$("");fr(()=>{!s(v)&&i().length===0&&ua()});function M(D){const L=D.reduce((H,F)=>H+(parseFloat(F.time)||0),0);if(L>0){const H=Math.floor(L/3600),F=Math.floor(L%3600/60);_(x,H>0?`${H} hr ${F} min`:`${F} min`)}else _(x,"");const ee=new Set;D.forEach(H=>{H.qualityBadge&&ee.add(H.qualityBadge.split(" ")[0])}),_(g,ee.size===1?D[0].qualityBadge:ee.size>1?"Mixed":"")}function C(D){yn("details",D)}function N(){_(p,!0),Ys(s(o).data.name,0)}function re(D){s(d)||Ys(s(o).data.name,D)}function se(){if(r().length>0){const D=s(o).data.name.replace(/"/g,'\\"');la(`load "${D}"`),_(y,!0),setTimeout(()=>{_(y,!1)},2e3)}}function oe(){_(d,!s(d))}function ge(D){const L=s(o).data.name,ee=r();ee.splice(D,1),tr.set(ee),Vi(L,D),M(ee)}function T(D,L){Qi(s(o).data.name,D,L)}ie(()=>n(),()=>{_(o,n()[n().length-1])}),ie(()=>s(o),()=>{_(v,s(o).view==="details")}),ie(()=>s(o),()=>{s(o)&&(_(p,!1),_(y,!1))}),ie(()=>(s(v),r(),a()),()=>{if(s(v)&&r().length>0){const D=r();if(!D[0]._uid){const L=D.map(ee=>({...ee,_uid:Math.random()}));tr.set(L)}M(D)}else s(v)&&r().length===0&&!a()&&(_(x,"0 min"),_(g,""))}),ie(()=>(s(v),s(o),Uc),()=>{s(v)&&s(o).data&&(_(d,!1),Yi(s(o).data.name))}),ie(()=>s(o),()=>{_(f,s(o)?.data?.name==="Favorites")}),qt(),yt();var O=rv();let ue;var he=h(O);{var V=D=>{vs(D,{get itemsStore(){return tr},get isLoading(){return a()},get isEditMode(){return s(d)},emptyText:"This playlist is empty.",onMoveItem:T,$$slots:{header:(L,ee)=>{var H=Gu(),F=h(H),k=h(F),P=h(k),K=h(P);ce(K,()=>(s(f),W(w),E(()=>s(f)?w.HEART_FILLED:w.PLAYLISTS)));var R=b(k,2),X=h(R),z=b(h(X),2),Q=h(z),le=b(z,2),q=h(le);{var ve=ke=>{var be=Vu();m(ke,be)},U=ke=>{var be=Ku(),Me=Te(be),Oe=h(Me),ze=b(Me,2);{var Be=Y=>{var J=Qu(),xe=h(J);de(()=>fe(xe,s(x))),m(Y,J)};j(ze,Y=>{s(x)&&Y(Be)})}var je=b(ze,2);{var G=Y=>{var J=Xu(),xe=h(J);de(()=>fe(xe,s(g))),m(Y,J)};j(je,Y=>{s(g)&&Y(G)})}de(()=>fe(Oe,`${r(),E(()=>r().length)??""} tracks`)),m(ke,be)};j(q,ke=>{a()?ke(ve):ke(U,!1)})}var A=b(X,2),ne=h(A),Z=h(ne),B=b(ne,2),ye=h(B),_e=b(B,2);let me;var Ee=h(_e);ce(Ee,()=>(s(d),W(w),E(()=>s(d)?w.ACCEPT:w.EDIT))),de(()=>{Xe(k,`background: ${s(f),s(o),E(()=>s(f)?"linear-gradient(135deg, hsl(348, 95%, 58%), hsl(348, 90%, 40%))":s(o).data.color||"#333")??""};`),bt(z,"title",(s(o),E(()=>s(o).data.name))),fe(Q,(s(o),E(()=>s(o).data.name))),ne.disabled=s(p),fe(Z,s(p)?"Playing...":"Play All"),B.disabled=s(y),fe(ye,s(y)?"Added":"To Queue"),me=De(_e,1,"btn-action svelte-m7c4tz",null,me,{active:s(d)})}),I("click",ne,N),I("click",B,se),I("click",_e,oe),m(L,H)},row:(L,ee)=>{var H=Zu();const F=Ze(()=>ee.item),k=Ze(()=>ee.index),P=Ze(()=>ee.startDrag);var K=h(H);us(K,{get track(){return s(F)},get index(){return s(k)},get isEditable(){return s(d)},$$events:{play:()=>re(s(k)),remove:()=>ge(s(k)),startdrag(...R){s(P)?.apply(this,R)}}}),m(L,H)}}})},te=D=>{var L=Qe(),ee=Te(L);{var H=k=>{var P=ev(),K=h(P);Rt(K,4,()=>Array(8),vn,(R,X)=>{var z=Ju(),Q=h(z);xn(Q,{width:"100%",style:"aspect-ratio: 1; border-radius: 12px; margin-bottom: 12px;"});var le=b(Q,2);xn(le,{width:"60%",height:"16px"}),m(R,z)}),m(k,P)},F=k=>{var P=nv(),K=h(P),R=h(K),X=h(R),z=h(X),Q=h(z);ce(Q,()=>(W(w),E(()=>w.ADD)));var le=b(R,2);Rt(le,1,i,vn,(q,ve)=>{const U=Ze(()=>(s(ve),E(()=>s(ve).name==="Favorites")));var A=tv(),ne=h(A),Z=h(ne),B=h(Z);ce(B,()=>(W(s(U)),W(w),E(()=>s(U)?w.HEART_FILLED:w.PLAYLISTS)));var ye=b(Z,2),_e=h(ye),me=h(_e);ce(me,()=>(W(w),E(()=>w.PLAY)));var Ee=b(ne,2),ke=h(Ee),be=b(Ee,2),Me=h(be);de(Oe=>{Xe(ne,`background: ${s(ve),E(()=>s(ve).color)??""};`),fe(ke,(s(ve),E(()=>s(ve).name))),fe(Me,Oe)},[()=>(s(ve),E(()=>s(ve).lastModified?new Date(s(ve).lastModified).toLocaleDateString():"Playlist"))]),I("click",A,()=>C(s(ve))),m(q,A)}),m(k,P)};j(ee,k=>{l()?k(H):k(F,!1)},!0)}m(D,L)};j(he,D=>{s(v)?D(V):D(te,!1)})}de(()=>ue=De(O,1,"view-container svelte-m7c4tz",null,ue,{scrollable:!s(v)})),m(e,O),pt(),u()}var av=S('<div class="spinner svelte-1d3z1zm"></div>'),iv=S('<div class="placeholder-state svelte-1d3z1zm"><div class="placeholder-icon svelte-1d3z1zm">ð</div> <p class="svelte-1d3z1zm">Type to search your library</p></div>'),ov=S('<div class="empty-text svelte-1d3z1zm"> </div>'),lv=S('<div slot="fallback" class="icon-fallback svelte-1d3z1zm">ð¿</div>'),cv=S('<div class="card-year svelte-1d3z1zm"> </div>'),uv=S('<div class="card-year quality svelte-1d3z1zm"> </div>'),vv=S('<div class="music-card svelte-1d3z1zm"><div class="card-img-container svelte-1d3z1zm"><!> <div class="play-overlay svelte-1d3z1zm"><span class="play-icon-wrap svelte-1d3z1zm"><!></span></div></div> <div class="card-title svelte-1d3z1zm"> </div> <div class="card-sub-row svelte-1d3z1zm"><div class="card-sub text-ellipsis svelte-1d3z1zm"> </div> <!> <!></div></div>'),dv=S('<div class="header-label section-spacing svelte-1d3z1zm">Albums</div> <div class="music-grid horizontal section-mb svelte-1d3z1zm"></div>',1),fv=S('<div class="header-label svelte-1d3z1zm">Tracks</div>'),hv=S("<!> <!>",1),pv=S('<div slot="header" class="content-padded svelte-1d3z1zm"><!></div>'),_v=S('<div slot="row" class="svelte-1d3z1zm"><!></div>'),gv=S('<div class="view-container svelte-1d3z1zm"><div class="content-padded no-bottom-pad svelte-1d3z1zm"><div class="search-input-container svelte-1d3z1zm"><span class="search-icon svelte-1d3z1zm"><!></span> <input type="text" placeholder="Artists, songs, or albums" autoFocus class="svelte-1d3z1zm"/> <!></div></div> <!></div>');function mv(e,t){ht(t,!1);const n=()=>pe(Zr,"$searchQuery",a),r=()=>pe(l,"$tracksStore",a),[a,i]=zt(),l=Le([]);let c=$([]),u=$(!1),o,v=$(!1);fr(()=>{n().length>=2&&d(n())});function f(O){Zr.set(O.target.value),clearTimeout(o),o=setTimeout(()=>{d(n())},300)}async function d(O){const ue=O.trim().toLowerCase();if(ue.length<2){l.set([]),_(c,[]),_(v,!1);return}_(u,!0),_(v,!0);try{const he=await mn.search(ue),V=he.map((D,L)=>({...D,_uid:D.file?`${D.file}-${L}`:`search-${L}`}));l.set(V);const te=new Map;he.forEach(D=>{const L=D.album;if(L&&!te.has(L)){const ee=L.toLowerCase().includes(ue),H=D.artist&&D.artist.toLowerCase().includes(ue);if(ee||H){let F=String(D.year||"");F.length>4&&(F=F.substring(0,4)),te.set(L,{name:L,artist:D.artist,file:D.file,thumbHash:D.thumbHash,_uid:`alb-${L}`,year:F,qualityBadge:D.qualityBadge})}}}),_(c,Array.from(te.values()))}finally{_(u,!1)}}function p(O){da(O)}function y(O){yn("tracks_by_album",O)}function x(O){O.deltaY!==0&&(O.currentTarget.scrollLeft+=O.deltaY)}yt();var g=gv(),M=h(g),C=h(M),N=h(C),re=h(N);ce(re,()=>w.SEARCH);var se=b(N,2),oe=b(se,2);{var ge=O=>{var ue=av();m(O,ue)};j(oe,O=>{s(u)&&O(ge)})}var T=b(M,2);vs(T,{get itemsStore(){return l},isEditMode:!1,isLoading:!1,emptyText:"",$$slots:{header:(O,ue)=>{var he=pv(),V=h(he);{var te=L=>{var ee=iv();m(L,ee)},D=L=>{var ee=Qe(),H=Te(ee);{var F=P=>{var K=ov(),R=h(K);de(()=>fe(R,`No results found for "${n()??""}"`)),m(P,K)},k=P=>{var K=hv(),R=Te(K);{var X=le=>{var q=dv(),ve=b(Te(q),2);Rt(ve,5,()=>s(c),U=>U._uid,(U,A)=>{var ne=vv(),Z=h(ne),B=h(Z);{let Y=Ze(()=>Ar(s(A),"md"));qn(B,{get src(){return s(Y)},get alt(){return s(A).name},radius:"var(--radius-md)",$$slots:{fallback:(J,xe)=>{var Pe=lv();m(J,Pe)}}})}var ye=b(B,2),_e=h(ye),me=h(_e);ce(me,()=>w.PLAY);var Ee=b(Z,2),ke=h(Ee),be=b(Ee,2),Me=h(be),Oe=h(Me),ze=b(Me,2);{var Be=Y=>{var J=cv(),xe=h(J);de(()=>fe(xe,s(A).year)),m(Y,J)};j(ze,Y=>{s(A).year&&s(A).year!=="0"&&s(A).year!==0&&Y(Be)})}var je=b(ze,2);{var G=Y=>{var J=uv(),xe=h(J);de(Pe=>fe(xe,Pe),[()=>s(A).qualityBadge.split(" ")[0]]),m(Y,J)};j(je,Y=>{s(A).qualityBadge&&Y(G)})}de(()=>{bt(Ee,"title",s(A).name),fe(ke,s(A).name),fe(Oe,s(A).artist)}),I("click",ne,()=>y(s(A))),m(U,ne)}),I("wheel",ve,x),m(le,q)};j(R,le=>{s(c).length>0&&le(X)})}var z=b(R,2);{var Q=le=>{var q=fv();m(le,q)};j(z,le=>{r().length>0&&le(Q)})}m(P,K)};j(H,P=>{!s(u)&&r().length===0&&s(c).length===0&&s(v)?P(F):P(k,!1)},!0)}m(L,ee)};j(V,L=>{n().length<2?L(te):L(D,!1)})}m(O,he)},row:(O,ue)=>{var he=_v();const V=Ze(()=>ue.item),te=Ze(()=>ue.index);var D=h(he);us(D,{get track(){return s(V)},get index(){return s(te)},isEditable:!1,$$events:{play:()=>p(s(V))}}),m(O,he)}}}),de(()=>yl(se,n())),I("input",se,f),m(e,g),pt(),i()}var bv=S('<div class="knob svelte-1jla3sy"></div>'),wv=S('<div class="tooltip current svelte-1jla3sy"> </div> <span></span>',1),yv=S('<div slot="fallback" class="icon-fallback svelte-1jla3sy"><!></div>'),kv=S('<span class="quality-badge"> </span>'),xv=S('<div class="dot svelte-1jla3sy"></div>'),Ev=S("<button><!> <!></button>"),Mv=S('<div class="dock svelte-1jla3sy"><div class="progress-shadow svelte-1jla3sy"></div> <div><div class="rail svelte-1jla3sy"></div> <div class="fill svelte-1jla3sy"><!></div> <!></div> <div class="grid svelte-1jla3sy"><div class="info svelte-1jla3sy"><div class="art svelte-1jla3sy"><!></div> <div class="meta svelte-1jla3sy"><div class="title-row svelte-1jla3sy"><div class="title text-ellipsis svelte-1jla3sy"> </div> <button class="btn-icon tiny-dots svelte-1jla3sy"><!></button></div> <div class="artist-row svelte-1jla3sy"><div class="artist text-ellipsis svelte-1jla3sy"> </div> <!></div></div></div> <div class="controls svelte-1jla3sy"><button><!></button> <button class="btn-icon"><!></button> <button class="play-btn flex-center svelte-1jla3sy"><!></button> <button class="btn-icon"><!></button> <!></div> <div class="volume desktop svelte-1jla3sy"><div class="vol-icon svelte-1jla3sy"><!></div> <div class="custom-slider svelte-1jla3sy"><div class="slider-bg svelte-1jla3sy"><div class="slider-fill svelte-1jla3sy"></div> <div class="slider-knob svelte-1jla3sy"></div></div></div></div></div></div>'),Sv=S("=== ./components/MiniPlayer.svelte === <!>",1);function Tv(e,t){ht(t,!1);const n=()=>pe(ut,"$status",c),r=()=>pe(Gt,"$currentSong",c),a=()=>pe(gn,"$favorites",c),i=()=>pe(En,"$stations",c),l=()=>pe(Gr,"$isFullPlayerOpen",c),[c,u]=zt(),o=$(),v=$(),f=$(),d=$(),p=$(),y=$(),x=$(),g=$(),M=$(),C=$(),N=$(),re=$();let se=$(!1),oe=$(!1),ge=!1,T=$(0),O=$(),ue=$();const he=z=>Q=>{Q.stopPropagation(),z()};function V(z){if(isNaN(z)||z===null)return"0:00";const Q=Math.floor(z/60),le=Math.floor(z%60);return`${Q}:${le<10?"0":""}${le}`}function te(z,Q){const le=Q.getBoundingClientRect();return Math.max(0,Math.min(1,(z.clientX-le.left)/le.width))}function D(z){s(d)||(_(oe,!0),_(T,te(z,s(O))),window.addEventListener("mousemove",L),window.addEventListener("mouseup",ee))}function L(z){if(s(oe)&&_(T,te(z,s(O))),ge){const Q=Math.round(te(z,s(ue))*100);Cr(Q)}}function ee(){s(oe)&&!s(d)&&ca(s(T)*s(o)),_(oe,!1),ge=!1,window.removeEventListener("mousemove",L),window.removeEventListener("mouseup",ee)}function H(z){ge=!0;const Q=Math.round(te(z,s(ue))*100);Cr(Q),window.addEventListener("mousemove",L),window.addEventListener("mouseup",ee)}function F(){const z=(s(re)+1)%3;z===0?(n().random&&In(),n().repeat&&On()):z===1?(n().random||In(),n().repeat&&On()):z===2&&(n().random&&In(),n().repeat||On())}function k(z){z.stopPropagation(),Jr(z,r(),{type:"general",source:"miniplayer"})}function P(z){Jr(z.detail.originalEvent,r(),{type:"general",source:"miniplayer"})}ie(()=>n(),()=>{_(o,n().duration>0?n().duration:1)}),ie(()=>n(),()=>{_(v,n().elapsed||0)}),ie(()=>n(),()=>{_(f,n().state==="play")}),ie(()=>r(),()=>{_(d,r().file?.startsWith("http"))}),ie(()=>r(),()=>{_(p,r().title||"Not Playing")}),ie(()=>r(),()=>{_(y,r().stationName||r().artist||"Moode")}),ie(()=>(r(),a()),()=>{_(x,r().file&&a().has(r().file))}),ie(()=>(r(),i()),()=>{_(g,lr(r(),i(),r().stationName))}),ie(()=>(s(d),s(oe),s(T),s(v),s(o)),()=>{_(M,s(d)?0:s(oe)?s(T)*100:s(v)/s(o)*100)}),ie(()=>(s(f),s(oe),s(d)),()=>{_(C,s(f)&&!s(oe)&&!s(d))}),ie(()=>n(),()=>{_(N,n().bitrate?`${n().bitrate} kbps`:n().format||"")}),ie(()=>n(),()=>{_(re,n().repeat?2:n().random?1:0)}),qt(),yt();var K=Sv(),R=b(Te(K));{var X=z=>{var Q=Mv(),le=h(Q),q=b(le,2);let ve;var U=b(h(q),2),A=h(U);{var ne=Ae=>{var st=bv();m(Ae,st)};j(A,Ae=>{s(d)||Ae(ne)})}var Z=b(U,2);{var B=Ae=>{var st=wv(),ae=Te(st),Se=h(ae);de(Je=>{Xe(ae,`left: ${s(M)??""}%`),fe(Se,Je)},[()=>(s(oe),s(T),s(o),s(v),E(()=>s(oe)?V(s(T)*s(o)):V(s(v))))]),m(Ae,st)};j(Z,Ae=>{(s(se)||s(oe))&&!s(d)&&Ae(B)})}jn(q,Ae=>_(O,Ae),()=>s(O));var ye=b(q,2),_e=h(ye),me=h(_e),Ee=h(me);qn(Ee,{get src(){return s(g)},alt:"art",radius:"4px",$$slots:{fallback:(Ae,st)=>{var ae=yv(),Se=h(ae);ce(Se,()=>(s(d),W(w),E(()=>s(d)?w.RADIO:w.ALBUMS))),m(Ae,ae)}}});var ke=b(me,2),be=h(ke),Me=h(be),Oe=h(Me),ze=b(Me,2),Be=h(ze);ce(Be,()=>(W(w),E(()=>w.DOTS)));var je=b(be,2),G=h(je),Y=h(G),J=b(G,2);{var xe=Ae=>{var st=kv(),ae=h(st);de(()=>fe(ae,s(N))),m(Ae,st)};j(J,Ae=>{s(N)&&Ae(xe)})}var Pe=b(_e,2),Ue=h(Pe),et=pr(()=>he(()=>Un.toggleFavorite(r())));let vt;var He=h(Ue);ce(He,()=>(s(x),W(w),E(()=>s(x)?w.HEART_FILLED:w.HEART)));var $e=b(Ue,2),Ce=pr(()=>he(()=>Pr("previous"))),Ve=h($e);ce(Ve,()=>(W(w),E(()=>w.PREVIOUS)));var Ke=b($e,2),St=pr(()=>he(cs)),en=h(Ke);ce(en,()=>(n(),W(w),E(()=>n().state==="play"?w.PAUSE:w.PLAY)));var tt=b(Ke,2),lt=pr(()=>he(()=>Pr("next"))),dt=h(tt);ce(dt,()=>(W(w),E(()=>w.NEXT)));var tn=b(tt,2);{var hr=Ae=>{var st=Ev(),ae=pr(()=>he(F));let Se;var Je=h(st);{var Yt=_t=>{var nt=Qe(),It=Te(nt);ce(It,()=>(W(w),E(()=>w.REPEAT))),m(_t,nt)},hs=_t=>{var nt=Qe(),It=Te(nt);ce(It,()=>(W(w),E(()=>w.SHUFFLE))),m(_t,nt)};j(Je,_t=>{s(re)===2?_t(Yt):_t(hs,!1)})}var ps=b(Je,2);{var _s=_t=>{var nt=xv();m(_t,nt)};j(ps,_t=>{s(re)>0&&_t(_s)})}de(()=>Se=De(st,1,"btn-icon desktop mode-btn svelte-1jla3sy",null,Se,{active:s(re)>0})),I("click",st,function(..._t){s(ae)?.apply(this,_t)}),m(Ae,st)};j(tn,Ae=>{s(d)||Ae(hr)})}var Ut=b(Pe,2),Ht=h(Ut),Mn=h(Ht);ce(Mn,()=>(W(w),E(()=>w.VOLUME)));var Sn=b(Ht,2),ds=h(Sn),Tn=h(ds),fs=b(Tn,2);jn(Sn,Ae=>_(ue,Ae),()=>s(ue)),Qt(()=>I("click",Q,()=>Gr.set(!0))),Pi(Q,(Ae,st)=>Xi?.(Ae,st),()=>500),Qt(()=>I("longpress",Q,P)),de(()=>{Xe(le,`width: ${s(M)??""}%; transition: ${s(C)?"width 0.25s linear":"none"}`),ve=De(q,1,"progress-bar svelte-1jla3sy",null,ve,{radio:s(d)}),Xe(U,`width: ${s(M)??""}%; transition: ${s(C)?"width 0.25s linear":"none"}`),bt(Me,"title",s(p)),fe(Oe,s(p)),bt(G,"title",s(y)),fe(Y,s(y)),vt=De(Ue,1,"btn-icon desktop svelte-1jla3sy",null,vt,{liked:s(x)}),Xe(Tn,`width: ${n(),E(()=>n().volume)??""}%`),Xe(fs,`left: ${n(),E(()=>n().volume)??""}%`)}),I("mouseenter",q,()=>_(se,!0)),I("mouseleave",q,()=>_(se,!1)),I("mousedown",q,Dt(D)),I("click",q,Dt(function(Ae){Kr.call(this,t,Ae)})),I("click",ze,k),I("click",Ue,function(...Ae){s(et)?.apply(this,Ae)}),I("click",$e,function(...Ae){s(Ce)?.apply(this,Ae)}),I("click",Ke,function(...Ae){s(St)?.apply(this,Ae)}),I("click",tt,function(...Ae){s(lt)?.apply(this,Ae)}),I("mousedown",Sn,Dt(H)),I("click",Sn,Dt(function(Ae){Kr.call(this,t,Ae)})),m(z,Q)};j(R,z=>{l()||z(X)})}m(e,K),pt(),u()}var $v=S('<div class="drag-zone svelte-1olwzt8"><div class="drag-handle-icon svelte-1olwzt8"><!></div></div>'),Av=S('<div slot="fallback" class="icon-fallback svelte-1olwzt8"><!></div>'),Cv=S('<span class="quality-badge"> </span>'),Pv=S('<span class="dot svelte-1olwzt8"></span>'),Rv=S("<button><!> <!></button>"),Lv=S('<div style="width: 44px;"></div>'),zv=S('<div><!> <div class="bg-container svelte-1olwzt8"><div class="bg-gradient-fallback svelte-1olwzt8"></div> <img class="bg-img svelte-1olwzt8" alt="" loading="eager"/> <div class="bg-overlay svelte-1olwzt8"></div></div> <div class="player-body svelte-1olwzt8"><div class="art-container svelte-1olwzt8"><div class="artwork svelte-1olwzt8"><!></div></div> <div class="controls-area svelte-1olwzt8"><div class="meta svelte-1olwzt8"><h1 class="title text-ellipsis svelte-1olwzt8"> </h1> <div class="artist-row svelte-1olwzt8"><h2 class="artist text-ellipsis svelte-1olwzt8"> </h2> <!></div></div> <div class="progress-section"><div><div class="common-track svelte-1olwzt8"><div class="common-fill svelte-1olwzt8"><div class="common-knob svelte-1olwzt8"></div></div></div></div> <div class="time-row svelte-1olwzt8"><span> </span> <span> </span></div></div> <div class="buttons-row svelte-1olwzt8"><button><!></button> <button class="btn-icon side-btn svelte-1olwzt8"><!></button> <button class="play-btn-large flex-center svelte-1olwzt8"><!></button> <button class="btn-icon side-btn svelte-1olwzt8"><!></button> <!></div> <div class="volume-row svelte-1olwzt8"><div class="vol-icon svelte-1olwzt8"><!></div> <div class="volume-hit-area svelte-1olwzt8"><div class="common-track svelte-1olwzt8"><div class="common-fill svelte-1olwzt8"></div> <div class="common-knob svelte-1olwzt8"></div></div></div></div></div></div></div>');function Ha(e,t){ht(t,!1);const n=()=>pe(Gt,"$currentSong",l),r=()=>pe(En,"$stations",l),a=()=>pe(ut,"$status",l),i=()=>pe(gn,"$favorites",l),[l,c]=zt(),u=$(),o=$(),v=$(),f=$(),d=$(),p=$(),y=$(),x=$(),g=$(),M=$(),C=$();let N=rt(t,"isDocked",8,!1),re=0,se=$(0),oe=$(!1);function ge(){Gr.set(!1)}function T(ae){if(N())return;const Se=ae.target;Se.closest(".bar-hit-area")||Se.closest(".volume-hit-area")||(re=ae.touches[0].clientY,_(oe,!0))}function O(ae){if(!s(oe)||N())return;const Se=ae.touches[0].clientY-re;Se>0&&(ae.cancelable&&Se>10&&ae.preventDefault(),_(se,Se))}function ue(){N()||(_(oe,!1),s(se)>150?ge():_(se,0))}let he=$(!1),V=$(0),te=$();function D(ae){const Se=Math.floor(ae/60)||0,Je=Math.floor(ae%60)||0;return`${Se}:${Je.toString().padStart(2,"0")}`}function L(ae,Se){const Je=Se.getBoundingClientRect(),Yt=ae.touches?ae.touches[0].clientX:ae.clientX;return Math.max(0,Math.min(1,(Yt-Je.left)/Je.width))}function ee(ae){s(f)||(_(he,!0),_(V,L(ae,s(te))))}function H(ae){s(he)&&_(V,L(ae,s(te)))}function F(){s(he)&&!s(f)&&ca(s(V)*s(o)),_(he,!1)}let k=!1,P=$();function K(ae){k=!0;const Se=Math.round(L(ae,s(P))*100);Cr(Se),window.addEventListener("mousemove",R),window.addEventListener("mouseup",X),window.addEventListener("touchmove",R,{passive:!1}),window.addEventListener("touchend",X)}function R(ae){if(k){ae.preventDefault();const Se=Math.round(L(ae,s(P))*100);Cr(Se)}}function X(){k=!1,window.removeEventListener("mousemove",R),window.removeEventListener("mouseup",X),window.removeEventListener("touchmove",R),window.removeEventListener("touchend",X)}function z(){const ae=(s(x)+1)%3;ae===0?(a().random&&In(),a().repeat&&On()):ae===1?(a().random||In(),a().repeat&&On()):ae===2&&(a().random&&In(),a().repeat||On())}ie(()=>(n(),r()),()=>{_(u,lr(n(),r(),n().stationName))}),ie(()=>a(),()=>{_(o,a().duration||1)}),ie(()=>a(),()=>{_(v,a().elapsed||0)}),ie(()=>n(),()=>{_(f,n().file?.startsWith("http"))}),ie(()=>a(),()=>{_(d,a().state==="play")}),ie(()=>(s(d),s(he),s(f)),()=>{_(p,s(d)&&!s(he)&&!s(f))}),ie(()=>(s(f),s(he),s(V),s(v),s(o)),()=>{_(y,s(f)?0:s(he)?s(V)*100:s(v)/s(o)*100)}),ie(()=>a(),()=>{_(x,a().repeat?2:a().random?1:0)}),ie(()=>a(),()=>{_(g,a().bitrate?`${a().bitrate} kbps`:a().format||"")}),ie(()=>(n(),i()),()=>{_(M,n().file&&i().has(n().file))}),ie(()=>W(N()),()=>{_(C,N()?"8px":"var(--radius-xl)")}),qt(),yt();var Q=zv();let le;var q=h(Q);{var ve=ae=>{var Se=$v(),Je=h(Se),Yt=h(Je);ce(Yt,()=>(W(w),E(()=>w.CHEVRON_DOWN))),I("touchstart",Se,T),I("touchmove",Se,O),I("touchend",Se,ue),I("click",Se,ge),m(ae,Se)};j(q,ae=>{N()||ae(ve)})}var U=b(q,2),A=b(h(U),2),ne=b(U,2),Z=h(ne),B=h(Z),ye=h(B);qn(ye,{get src(){return s(u)},alt:"Cover",get radius(){return s(C)},$$slots:{fallback:(ae,Se)=>{var Je=Av(),Yt=h(Je);ce(Yt,()=>(s(f),W(w),E(()=>s(f)?w.RADIO:w.ALBUMS))),m(ae,Je)}}});var _e=b(Z,2),me=h(_e),Ee=h(me),ke=h(Ee),be=b(Ee,2),Me=h(be),Oe=h(Me),ze=b(Me,2);{var Be=ae=>{var Se=Cv(),Je=h(Se);de(()=>fe(Je,s(g))),m(ae,Se)};j(ze,ae=>{s(g)&&ae(Be)})}var je=b(me,2),G=h(je);let Y;var J=h(G),xe=h(J);jn(G,ae=>_(te,ae),()=>s(te));var Pe=b(G,2),Ue=h(Pe),et=h(Ue),vt=b(Ue,2),He=h(vt),$e=b(je,2),Ce=h($e);let Ve;var Ke=h(Ce);ce(Ke,()=>(s(M),W(w),E(()=>s(M)?w.HEART_FILLED:w.HEART)));var St=b(Ce,2),en=h(St);ce(en,()=>(W(w),E(()=>w.PREVIOUS)));var tt=b(St,2),lt=h(tt);ce(lt,()=>(a(),W(w),E(()=>a().state==="play"?w.PAUSE:w.PLAY)));var dt=b(tt,2),tn=h(dt);ce(tn,()=>(W(w),E(()=>w.NEXT)));var hr=b(dt,2);{var Ut=ae=>{var Se=Rv();let Je;var Yt=h(Se);{var hs=nt=>{var It=Qe(),gs=Te(It);ce(gs,()=>(W(w),E(()=>w.REPEAT))),m(nt,It)},ps=nt=>{var It=Qe(),gs=Te(It);ce(gs,()=>(W(w),E(()=>w.SHUFFLE))),m(nt,It)};j(Yt,nt=>{s(x)===2?nt(hs):nt(ps,!1)})}var _s=b(Yt,2);{var _t=nt=>{var It=Pv();m(nt,It)};j(_s,nt=>{s(x)>0&&nt(_t)})}de(()=>Je=De(Se,1,"btn-icon side-btn mode-btn svelte-1olwzt8",null,Je,{active:s(x)>0})),I("click",Se,z),m(ae,Se)},Ht=ae=>{var Se=Lv();m(ae,Se)};j(hr,ae=>{s(f)?ae(Ht,!1):ae(Ut)})}var Mn=b($e,2),Sn=h(Mn),ds=h(Sn);ce(ds,()=>(W(w),E(()=>w.VOLUME)));var Tn=b(Sn,2),fs=h(Tn),Ae=h(fs),st=b(Ae,2);jn(Tn,ae=>_(P,ae),()=>s(P)),de((ae,Se)=>{le=De(Q,1,"full-player svelte-1olwzt8",null,le,{"is-docked":N()}),Xe(Q,N()?"":`transform: translateY(${s(se)}px); transition: ${s(oe)?"none":"transform 0.3s cubic-bezier(0.2, 0.8, 0.2, 1)"}`),bt(A,"src",s(u)),Xe(B,`transform: scale(${1-s(se)/3e3})`),Xe(_e,`opacity: ${1-s(se)/400}`),fe(ke,(n(),E(()=>n().title||"Not Playing"))),fe(Oe,(n(),E(()=>n().stationName||n().artist||"Moode Audio"))),Y=De(G,1,"bar-hit-area svelte-1olwzt8",null,Y,{"is-docked-bar":N()}),Xe(xe,`width: ${s(y)??""}%; transition: ${s(p)?"width 0.3s linear":"none"}`),fe(et,ae),fe(He,Se),Ve=De(Ce,1,"btn-icon side-btn svelte-1olwzt8",null,Ve,{liked:s(M)}),Xe(Ae,`width: ${a(),E(()=>a().volume)??""}%`),Xe(st,`left: ${a(),E(()=>a().volume)??""}%; right: auto;`)},[()=>(s(he),s(V),s(o),s(v),E(()=>s(he)?D(s(V)*s(o)):D(s(v)))),()=>(s(f),s(o),E(()=>s(f)?"LIVE":D(s(o))))]),I("mousedown",G,ee),I("touchstart",G,ee,void 0,!0),I("mousemove",G,function(...ae){(s(he)?H:null)?.apply(this,ae)}),I("touchmove",G,function(...ae){(s(he)?H:null)?.apply(this,ae)},void 0,!0),I("mouseup",G,F),I("touchend",G,F),I("click",Ce,()=>Un.toggleFavorite(n())),I("click",St,()=>Pr("previous")),I("click",tt,function(...ae){cs?.apply(this,ae)}),I("click",dt,()=>Pr("next")),I("mousedown",Tn,Dt(K)),I("touchstart",Tn,Dt(K)),Lt(3,Q,()=>Ii,()=>({y:N()?0:800,duration:300,opacity:1})),m(e,Q),pt(),c()}const Iv="/assets/wave-logo-C1390byt.svg",Ws={async syncLibrary(){if(Re(Nt))return;Nt.set(!0);const e=new ji,t=window.location.origin+"/wave-api.php";e.postMessage({type:"START_SYNC",payload:{url:t}}),e.onmessage=n=>{const{type:r,status:a,count:i,message:l}=n.data;if(r==="PROGRESS"){const c={connecting:"Requesting library...",downloading:"Downloading data...",parsing:"Processing metadata...",saving:`Saving ${i} tracks...`};c[a]&&Ne(c[a],"info")}r==="DONE"&&(Ne(`Library updated: ${i} tracks`,"success"),Nt.set(!1),e.terminate()),r==="ERROR"&&(console.error("[API] Sync Error:",l),Ne(`Sync Failed: ${l}`,"error"),Nt.set(!1),e.terminate())},e.onerror=n=>{console.error("[API] Worker crash:",n),Ne("Sync worker crashed","error"),Nt.set(!1),e.terminate()}},async loadRadioStations(){if(!Re(Ur)){Ur.set(!0);try{const t=await fetch(kc.STATIONS(!1));if(!t.ok)throw new Error("Network error");const n=await t.json();if(n.error)throw new Error(n.error);if(!Array.isArray(n))throw new Error("Invalid response format");const r=n.map(a=>({id:a.id,name:a.name,file:a.station,station:a.station,image:a.logo,genre:a.genre||"Radio"}));r.sort((a,i)=>a.name.localeCompare(i.name,void 0,{sensitivity:"base"})),En.set(r)}catch(e){console.error("[API] Failed to load stations",e),Ne("Failed to load radio","error")}finally{Ur.set(!1)}}}};var Ov=S('<div class="backdrop svelte-ji5owg"></div>'),Nv=S('<button><span class="icon svelte-ji5owg"><!></span> <span> </span></button>'),Dv=S('<!> <aside><div class="header svelte-ji5owg"><div class="header-inner svelte-ji5owg"><button class="collapse-btn svelte-ji5owg"><div class="chevron svelte-ji5owg"><!></div></button> <div><img alt="Logo" class="logo svelte-ji5owg"/></div></div> <button class="btn-icon mobile-close svelte-ji5owg"><!></button></div> <div class="scroll-area custom-scrollbar svelte-ji5owg"><nav class="svelte-ji5owg"><!> <button title="Search"><span class="icon svelte-ji5owg"><!></span> <span>Search</span></button> <div class="sep svelte-ji5owg"></div> <button class="nav-item sync svelte-ji5owg" title="Update Library"><span><!></span> <span> </span></button> <div><div class="settings svelte-ji5owg"><div class="row svelte-ji5owg"><input type="text" placeholder="192.168..." class="svelte-ji5owg"/> <button class="save svelte-ji5owg">OK</button></div></div></div></nav> <div class="footer svelte-ji5owg"><div>Moode WaveUI</div></div></div></aside>',1);function Fv(e,t){ht(t,!1);const n=()=>pe(Nt,"$isSyncingLibrary",i),r=()=>pe(js,"$isSidebarCollapsed",i),a=()=>pe(xt,"$activeMenuTab",i),[i,l]=zt(),c=$();let u=rt(t,"isOpen",8,!1);const o=sa();let v=$(0),f=$(0),d=$(!1);const p=[{id:"queue",label:"Queue",icon:w.MENU},{id:"favorites",label:"Favorites",icon:w.HEART},{id:"artists",label:"Artists",icon:w.ARTISTS},{id:"albums",label:"Albums",icon:w.ALBUMS},{id:"playlists",label:"Playlists",icon:w.PLAYLISTS},{id:"radio",label:"Radio",icon:w.RADIO}];let y=$(Tr.MOODE_IP);function x(Y){window.location.hash=`/${Y}`,o("close")}async function g(){n()||(await Ws.syncLibrary(),window.location.hash="/artists")}function M(){js.update(Y=>!Y)}function C(Y){u()&&(_(v,Y.touches[0].clientX),_(f,s(v)),_(d,!0))}function N(Y){s(d)&&_(f,Y.touches[0].clientX)}function re(){s(d)&&(s(f)-s(v)<-70&&o("close"),_(d,!1),_(v,0),_(f,0))}ie(()=>(s(d),s(f),s(v)),()=>{_(c,s(d)?Math.min(0,s(f)-s(v)):0)}),qt(),yt();var se=Dv(),oe=Te(se);{var ge=Y=>{var J=Ov();I("click",J,()=>o("close")),Lt(3,J,()=>kn,()=>({duration:200})),m(Y,J)};j(oe,Y=>{u()&&Y(ge)})}var T=b(oe,2);let O,ue;var he=h(T),V=h(he),te=h(V),D=h(te),L=h(D);ce(L,()=>(W(w),E(()=>w.BACK)));var ee=b(te,2);let H;var F=h(ee),k=b(V,2),P=h(k);ce(P,()=>(W(w),E(()=>w.CLOSE)));var K=b(he,2),R=h(K),X=h(R);Rt(X,1,()=>p,vn,(Y,J)=>{var xe=Nv();let Pe;var Ue=h(xe),et=h(Ue);ce(et,()=>(s(J),E(()=>s(J).icon)));var vt=b(Ue,2);let He;var $e=h(vt);de(()=>{Pe=De(xe,1,"nav-item svelte-ji5owg",null,Pe,{active:a()===s(J).id}),bt(xe,"title",(s(J),E(()=>s(J).label))),He=De(vt,1,"label-text svelte-ji5owg",null,He,{hidden:r()}),fe($e,(s(J),E(()=>s(J).label)))}),I("click",xe,()=>x(s(J).id)),m(Y,xe)});var z=b(X,2);let Q;var le=h(z),q=h(le);ce(q,()=>(W(w),E(()=>w.SEARCH)));var ve=b(le,2);let U;var A=b(z,4),ne=h(A);let Z;var B=h(ne);ce(B,()=>(W(w),E(()=>w.SYNC)));var ye=b(ne,2);let _e;var me=h(ye),Ee=b(A,2);let ke;var be=h(Ee),Me=h(be),Oe=h(Me),ze=b(Oe,2),Be=b(R,2),je=h(Be);let G;de(()=>{O=De(T,1,"side-menu svelte-ji5owg",null,O,{"mobile-open":u(),collapsed:r()}),ue=Xe(T,"",ue,{transform:u()?`translateX(${s(c)}px)`:"",transition:s(d)?"none":"width 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.3s ease"}),bt(te,"title",r()?"Expand":"Collapse"),Xe(D,`transform: rotate(${r()?"180deg":"0deg"})`),H=De(ee,1,"logo-wrapper svelte-ji5owg",null,H,{hidden:r()}),bt(F,"src",Iv),Q=De(z,1,"nav-item svelte-ji5owg",null,Q,{active:a()==="search"}),U=De(ve,1,"label-text svelte-ji5owg",null,U,{hidden:r()}),A.disabled=n(),Z=De(ne,1,"icon svelte-ji5owg",null,Z,{spin:n()}),_e=De(ye,1,"label-text svelte-ji5owg",null,_e,{hidden:r()}),fe(me,n()?"Syncing...":"Update Library"),ke=De(Ee,1,"settings-wrapper svelte-ji5owg",null,ke,{hidden:r()}),G=De(je,1,"footer-text svelte-ji5owg",null,G,{hidden:r()})}),I("click",te,M),I("click",k,()=>o("close")),I("click",z,()=>x("search")),I("click",A,g),ta(Oe,()=>s(y),Y=>_(y,Y)),I("click",ze,()=>{Tr.setMoodeIp(s(y)),location.reload()}),I("touchstart",T,C),I("touchmove",T,N),I("touchend",T,re),m(e,se),pt(),l()}var Bv=S('<span class="meta-tag svelte-185fgrr"> </span>'),jv=S('<div slot="header" class="view-header svelte-185fgrr"><div class="header-info svelte-185fgrr"><h1 class="header-title svelte-185fgrr">Current Queue</h1> <div class="meta-badges svelte-185fgrr"><span class="meta-tag svelte-185fgrr"> </span> <!></div></div> <div class="header-actions svelte-185fgrr"><button class="btn-action svelte-185fgrr" title="Save Queue"><!></button> <button><!></button></div></div>'),qv=S('<div slot="row" class="svelte-185fgrr"><!></div>'),Uv=S('<div class="view-container svelte-185fgrr"><!></div>');function Hv(e,t){ht(t,!1);const n=()=>pe($r,"$queue",r),[r,a]=zt();let i=$(!1),l=$("");function c(){_(i,!s(i))}function u(y){s(i)||la(`play ${y}`)}function o(y){Ft.removeFromQueue(y)}async function v(){const y=prompt("Enter playlist name:");y&&(await Ft.saveQueue(y),ua())}function f(y,x){Ft.moveTrack(y,x)}ie(()=>n(),()=>{if(n().length>=0){const y=n().reduce((x,g)=>x+(parseFloat(g.time)||0),0);if(y>0){const x=Math.floor(y/3600),g=Math.floor(y%3600/60);x>0?_(l,`${x} hr ${g} min`):_(l,`${g} min`)}else _(l,"")}}),qt(),yt();var d=Uv(),p=h(d);vs(p,{get itemsStore(){return $r},get isEditMode(){return s(i)},emptyText:"Queue is empty",onMoveItem:f,$$slots:{header:(y,x)=>{var g=jv(),M=h(g),C=b(h(M),2),N=h(C),re=h(N),se=b(N,2);{var oe=te=>{var D=Bv(),L=h(D);de(()=>fe(L,s(l))),m(te,D)};j(se,te=>{s(l)&&te(oe)})}var ge=b(M,2),T=h(ge),O=h(T);ce(O,()=>(W(w),E(()=>w.SAVE)));var ue=b(T,2);let he;var V=h(ue);ce(V,()=>(s(i),W(w),E(()=>s(i)?w.ACCEPT:w.EDIT))),de(()=>{fe(re,`${n(),E(()=>n().length)??""} tracks`),he=De(ue,1,"btn-action svelte-185fgrr",null,he,{active:s(i)}),bt(ue,"title",s(i)?"Finish Editing":"Edit Queue")}),I("click",T,v),I("click",ue,c),m(y,g)},row:(y,x)=>{var g=qv();const M=Ze(()=>x.item),C=Ze(()=>x.index),N=Ze(()=>x.startDrag);var re=h(g);us(re,{get track(){return s(M)},get index(){return s(C)},get isEditable(){return s(i)},$$events:{play:()=>u(s(C)),remove:()=>o(s(C)),startdrag(...se){s(N)?.apply(this,se)}}}),m(y,g)}}}),m(e,d),pt(),a()}var Yv=S('<div class="toast-container svelte-k2bvk7"><div> </div></div>'),Wv=S('<button class="back-btn svelte-k2bvk7"><span class="icon-inline svelte-k2bvk7"><!></span> Back</button>'),Vv=S('<div class="view-title svelte-k2bvk7"><!></div>'),Qv=S('<div class="full-player-modal svelte-k2bvk7"><!></div>'),Xv=S('<div class="app-container svelte-k2bvk7"><div class="app-layout svelte-k2bvk7"><!> <!> <main class="content-area svelte-k2bvk7"><header class="top-bar svelte-k2bvk7"><button class="hamburger-btn svelte-k2bvk7"><!></button> <!></header> <div class="scroll-container svelte-k2bvk7"><div class="view-wrapper svelte-k2bvk7"><!></div></div></main> <div class="docked-player-container svelte-k2bvk7"><!></div></div> <div class="mini-player-wrapper svelte-k2bvk7"><!></div></div> <!>',1);function Kv(e,t){ht(t,!1);const n=()=>pe(Ct,"$navigationStack",l),r=()=>pe(Ds,"$toastMessage",l),a=()=>pe(xt,"$activeMenuTab",l),i=()=>pe(Gr,"$isFullPlayerOpen",l),[l,c]=zt();let u=$(!1);fr(()=>{window.history.replaceState({depth:n().length},"","");const H=()=>void 0;return window.addEventListener("popstate",H),()=>window.removeEventListener("popstate",H)}),yt();var o=Xv(),v=Te(o),f=h(v),d=h(f);{var p=H=>{var F=Yv(),k=h(F),P=h(k);de(()=>{De(k,1,`toast-body ${r().type??""}`,"svelte-k2bvk7"),fe(P,r().text)}),Lt(3,F,()=>Ii,()=>({y:-50,duration:300})),m(H,F)};j(d,H=>{r()&&H(p)})}var y=b(d,2);Fv(y,{get isOpen(){return s(u)},$$events:{close:()=>_(u,!1)}});var x=b(y,2),g=h(x),M=h(g),C=h(M);ce(C,()=>w.MENU);var N=b(M,2);{var re=H=>{var F=Wv(),k=h(F),P=h(k);ce(P,()=>w.BACK),I("click",F,function(...K){yc?.apply(this,K)}),m(H,F)},se=H=>{var F=Vv(),k=h(F);{var P=R=>{var X=Qn("Radio");m(R,X)},K=R=>{var X=Qe(),z=Te(X);{var Q=q=>{var ve=Qn("Playlists");m(q,ve)},le=q=>{var ve=Qe(),U=Te(ve);{var A=Z=>{var B=Qn("Search");m(Z,B)},ne=Z=>{var B=Qe(),ye=Te(B);{var _e=Ee=>{var ke=Qn("Queue");m(Ee,ke)},me=Ee=>{var ke=Qe(),be=Te(ke);{var Me=ze=>{var Be=Qn("Favorites");m(ze,Be)},Oe=ze=>{var Be=Qn();de(je=>fe(Be,je),[()=>(a()||"Library").charAt(0).toUpperCase()+(a()||"library").slice(1)]),m(ze,Be)};j(be,ze=>{a()==="favorites"?ze(Me):ze(Oe,!1)},!0)}m(Ee,ke)};j(ye,Ee=>{a()==="queue"?Ee(_e):Ee(me,!1)},!0)}m(Z,B)};j(U,Z=>{a()==="search"?Z(A):Z(ne,!1)},!0)}m(q,ve)};j(z,q=>{a()==="playlists"?q(Q):q(le,!1)},!0)}m(R,X)};j(k,R=>{a()==="radio"?R(P):R(K,!1)})}m(H,F)};j(N,H=>{n().length>1?H(re):H(se,!1)})}var oe=b(g,2),ge=h(oe),T=h(ge);{var O=H=>{Wu(H,{})},ue=H=>{var F=Qe(),k=Te(F);{var P=R=>{Hv(R,{})},K=R=>{var X=Qe(),z=Te(X);{var Q=q=>{sv(q,{})},le=q=>{var ve=Qe(),U=Te(ve);{var A=Z=>{mv(Z,{})},ne=Z=>{Lu(Z,{get activeCategory(){return a()}})};j(U,Z=>{a()==="search"?Z(A):Z(ne,!1)},!0)}m(q,ve)};j(z,q=>{a()==="playlists"||a()==="favorites"?q(Q):q(le,!1)},!0)}m(R,X)};j(k,R=>{a()==="queue"?R(P):R(K,!1)},!0)}m(H,F)};j(T,H=>{a()==="radio"?H(O):H(ue,!1)})}var he=b(x,2),V=h(he);Ha(V,{isDocked:!0});var te=b(f,2),D=h(te);Tv(D,{});var L=b(v,2);{var ee=H=>{var F=Qv(),k=h(F);Ha(k,{}),m(H,F)};j(L,H=>{i()&&H(ee)})}I("click",M,()=>_(u,!0)),m(e,o),pt(),c()}var Gv=S('<button class="back-btn-area svelte-l8h85k"><span class="back-icon svelte-l8h85k"><!></span></button> <span class="header-title svelte-l8h85k">Select Playlist</span>',1),Zv=S('<div class="track-info svelte-l8h85k"><div class="title text-ellipsis svelte-l8h85k"> </div> <div class="artist text-ellipsis svelte-l8h85k"> </div></div>'),Jv=S('<button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span> </span></button>'),ed=S('<div class="empty-msg svelte-l8h85k">No custom playlists</div>'),td=S("<!> <!>",1),nd=S('<button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Go to Album</span></button> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Go to Artist</span></button>',1),rd=S('<div class="sep svelte-l8h85k"></div> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Remove from Playlist</span></button>',1),sd=S('<div class="sep svelte-l8h85k"></div> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Remove from Queue</span></button>',1),ad=S('<button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Play Next</span></button> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Add to Queue</span></button> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Add to Playlist...</span></button> <!> <button class="menu-row svelte-l8h85k"><span><!></span> <span> </span></button> <!> <!>',1),id=S('<div class="backdrop svelte-l8h85k"><div class="menu-card svelte-l8h85k"><div class="menu-header svelte-l8h85k"><!></div> <div class="menu-items scroll-y svelte-l8h85k"><!></div></div></div>');function od(e,t){ht(t,!1);const n=()=>pe(ia,"$contextMenu",i),r=()=>pe(gn,"$favorites",i),a=()=>pe(aa,"$playlists",i),[i,l]=zt(),c=$(),u=$(),o=$(),v=$(),f=$(),d=$();let p=$(),y=$(),x=$(),g=$(0),M=$(0),C=$("main"),N=$(!1);function re(k){n().isOpen&&(_(N,!1),Wt())}function se(){Wt()}function oe(){n().track&&Ft.playNext(n().track.file),Wt()}function ge(){n().track&&Ft.addToQueue(n().track.file),Wt()}function T(){n().track&&Un.toggleFavorite(n().track),Wt()}function O(){const k=n().track;k&&k.album&&yn("tracks_by_album",{name:k.album,artist:k.artist}),Wt()}function ue(){const k=n().track;k&&k.artist&&yn("albums_by_artist",{name:k.artist}),Wt()}async function he(){const{playlistName:k,index:P}=n().context;k&&P!==null&&(tr.update(K=>{const R=[...K];return R.splice(P,1),R}),await Un.removeFromPlaylist(k,P)),Wt()}function V(){const{index:k}=n().context;k!=null&&Ft.removeFromQueue(k),Wt()}function te(){_(C,"playlists")}function D(){_(C,"main")}async function L(k){const P=n().track;if(P)try{const K=k.replace(/"/g,'\\"'),R=P.file.replace(/"/g,'\\"');await we.send(`playlistadd "${K}" "${R}"`),Ne(`Added to "${k}"`,"success"),Wt()}catch(K){console.error(K),Ne("Failed to add","error")}}ie(()=>n(),()=>{n().isOpen&&_(C,"main")}),ie(()=>(n(),s(N)),()=>{n().isOpen?!s(N)&&typeof history<"u"&&(history.pushState({contextMenuOpen:!0},""),_(N,!0)):s(N)&&typeof history<"u"&&(history.back(),_(N,!1))}),ie(()=>(n(),r()),()=>{_(c,n().track&&r().has(n().track.file))}),ie(()=>n(),()=>{_(u,n().track&&(n().track.file.includes("http")||n().track.file.includes("://")))}),ie(()=>n(),()=>{_(o,n().context?.type==="playlist")}),ie(()=>n(),()=>{_(v,n().context?.type==="queue")}),ie(()=>n(),()=>{_(f,n().context?.source==="miniplayer")}),ie(()=>(n(),s(M),s(g),s(p),s(f),s(y)),()=>{_(d,(()=>{if(!n().isOpen)return"";const k=n().triggerRect,P=n().x,K=n().y,R=s(M)||220,X=s(g)||320;if(s(p)<=768&&s(f)&&k)return`
        position: fixed; 
        bottom: ${s(y)-k.top}px; 
        left: 50%; 
        transform: translateX(-50%); 
        margin: 0; 
        transform-origin: bottom center;
      `;let z=0,Q=0,le="top left";if(k){const ve=k.left+k.width/2,U=k.top+k.height/2,A=ve>s(p)/2,ne=U>s(y)/2;A?(z=k.right-R,le=ne?"bottom right":"top right"):(z=k.left,le=ne?"bottom left":"top left"),ne?Q=k.top-X:Q=k.bottom}else z=P,Q=K,z+R>s(p)&&(z=s(p)-R-10),Q+X>s(y)&&(Q=s(y)-X-10);const q=8;return z<q&&(z=q),z+R>s(p)-q&&(z=s(p)-R-q),Q<q&&(Q=q),Q+X>s(y)-q&&(Q=s(y)-X-q),`position: fixed; top: ${Q}px; left: ${z}px; margin: 0; transform-origin: ${le};`})())}),qt(),yt();var ee=Qe();I("popstate",pn,re);var H=Te(ee);{var F=k=>{var P=id(),K=h(P),R=h(K),X=h(R);{var z=A=>{var ne=Gv(),Z=Te(ne),B=h(Z),ye=h(B);ce(ye,()=>(W(w),E(()=>w.BACK))),I("click",Z,D),m(A,ne)},Q=A=>{var ne=Zv(),Z=h(ne),B=h(Z),ye=b(Z,2),_e=h(ye);de(()=>{fe(B,(n(),E(()=>n().track.title))),fe(_e,(n(),E(()=>n().track.artist)))}),m(A,ne)};j(X,A=>{s(C)==="playlists"?A(z):A(Q,!1)})}var le=b(R,2),q=h(le);{var ve=A=>{var ne=td(),Z=Te(ne);Rt(Z,1,a,vn,(_e,me)=>{var Ee=Qe(),ke=Te(Ee);{var be=Me=>{var Oe=Jv(),ze=h(Oe),Be=h(ze);ce(Be,()=>(W(w),E(()=>w.PLAYLISTS)));var je=b(ze,2),G=h(je);de(()=>fe(G,(s(me),E(()=>s(me).name)))),I("click",Oe,()=>L(s(me).name)),m(Me,Oe)};j(ke,Me=>{s(me),E(()=>s(me).name!=="Favorites")&&Me(be)})}m(_e,Ee)});var B=b(Z,2);{var ye=_e=>{var me=ed();m(_e,me)};j(B,_e=>{a(),E(()=>a().filter(me=>me.name!=="Favorites").length===0)&&_e(ye)})}m(A,ne)},U=A=>{var ne=ad(),Z=Te(ne),B=h(Z),ye=h(B);ce(ye,()=>(W(w),E(()=>w.NEXT)));var _e=b(Z,2),me=h(_e),Ee=h(me);ce(Ee,()=>(W(w),E(()=>w.MENU)));var ke=b(_e,2),be=h(ke),Me=h(be);ce(Me,()=>(W(w),E(()=>w.ADD_TO_PLAYLIST||w.ADD)));var Oe=b(ke,2);{var ze=He=>{var $e=nd(),Ce=Te($e),Ve=h(Ce),Ke=h(Ve);ce(Ke,()=>(W(w),E(()=>w.ALBUM_LINK||w.ALBUMS)));var St=b(Ce,2),en=h(St),tt=h(en);ce(tt,()=>(W(w),E(()=>w.ARTIST_LINK||w.ARTISTS))),I("click",Ce,O),I("click",St,ue),m(He,$e)};j(Oe,He=>{s(u)||He(ze)})}var Be=b(Oe,2),je=h(Be);let G;var Y=h(je);ce(Y,()=>(s(c),W(w),E(()=>s(c)?w.HEART_FILLED:w.HEART)));var J=b(je,2),xe=h(J),Pe=b(Be,2);{var Ue=He=>{var $e=rd(),Ce=b(Te($e),2),Ve=h(Ce),Ke=h(Ve);ce(Ke,()=>(W(w),E(()=>w.REMOVE))),I("click",Ce,he),m(He,$e)};j(Pe,He=>{s(o)&&He(Ue)})}var et=b(Pe,2);{var vt=He=>{var $e=sd(),Ce=b(Te($e),2),Ve=h(Ce),Ke=h(Ve);ce(Ke,()=>(W(w),E(()=>w.REMOVE))),I("click",Ce,V),m(He,$e)};j(et,He=>{s(v)&&He(vt)})}de(()=>{G=De(je,1,"icon svelte-l8h85k",null,G,{liked:s(c)}),fe(xe,s(c)?"Unlike":"Like")}),I("click",Z,oe),I("click",_e,ge),I("click",ke,te),I("click",Be,T),m(A,ne)};j(q,A=>{s(C)==="playlists"?A(ve):A(U,!1)})}jn(K,A=>_(x,A),()=>s(x)),de(()=>Xe(K,s(d))),Sa(K,"clientHeight",A=>_(g,A)),Sa(K,"clientWidth",A=>_(M,A)),Lt(3,K,()=>Oi,()=>({start:.95,duration:100})),I("click",K,Dt(function(A){Kr.call(this,t,A)})),I("click",P,se),Lt(3,P,()=>kn,()=>({duration:100})),m(k,P)};j(H,k=>{n(),E(()=>n().isOpen)&&k(F)})}$a("innerWidth",k=>_(p,k)),$a("innerHeight",k=>_(y,k)),m(e,ee),pt(),l()}const Ya={init(){this.handleHashChange(),window.addEventListener("hashchange",()=>this.handleHashChange())},handleHashChange(){let e=window.location.hash.slice(1);for(;e.startsWith("/");)e=e.slice(1);if(!e){(Re(Ct).length>1||Re(xt)==="search")&&(this.setRootTab("artists"),window.location.hash="/artists");return}let t,n;const r=e.indexOf("/");r===-1?(t=e,n=null):(t=e.slice(0,r),n=e.slice(r+1));const a=n?decodeURIComponent(n):null,l=wc()||(a?{name:a,displayName:a}:null);switch(console.log(`[Router] Match: ${t}, Param: ${a}`),t){case"queue":this.setRootTab("queue");break;case"radio":this.setRootTab("radio");break;case"playlists":this.setRootTab("playlists");break;case"favorites":xt.set("favorites"),Ct.set([{view:"root"},{view:"details",data:{name:"Favorites",displayName:"Favorites"}}]);break;case"artists":this.setRootTab("artists");break;case"albums":this.setRootTab("albums");break;case"search":xt.set("search"),a&&Zr.set(a),Ct.set([{view:"root"}]);break;case"album":xt.set("albums"),Ct.set([{view:"root"},{view:"tracks_by_album",data:l}]);break;case"artist":xt.set("artists"),Ct.set([{view:"root"},{view:"albums_by_artist",data:l}]);break;case"playlist":xt.set("playlists"),Ct.set([{view:"root"},{view:"details",data:l}]);break;default:console.warn(`[Router] Unknown route: ${t}`),this.setRootTab("artists");break}},setRootTab(e){xt.set(e),Ct.set([{view:"root"}])},updateUrl(e,t){let n="";if(e==="root"){const r=Re(xt);if(r==="search"){const a=Re(Zr);n=a?`search/${encodeURIComponent(a)}`:"search"}else n=r}else if(e==="details"){const r=t.name||t;r==="Favorites"?n="favorites":n=`playlist/${encodeURIComponent(r)}`}else if(e==="albums_by_artist"){const r=t.name||t;n=`artist/${encodeURIComponent(r)}`}else if(e==="tracks_by_album"){const r=t.name||t;n=`album/${encodeURIComponent(r)}`}else e==="queue"&&(n="queue");if(n){const r=`#/${n}`;decodeURIComponent(window.location.hash)!==decodeURIComponent(r)&&(window.location.hash=`/${n}`)}}};var ld=S("<!> <!>",1);function cd(e,t){ht(t,!1),fr(async()=>{Ya.init(),bc((i,l)=>{Ya.updateUrl(i,l)}),qi(),Ws.loadRadioStations();try{const i=await mn.getArtists();i.length>0?console.log(`[App] Database ready. Loaded ${i.length} artists from cache.`):(console.log("[App] Database empty. Starting initial sync..."),Ws.syncLibrary())}catch(i){console.error("[App] DB Check failed:",i),Ne("Local DB error. Please update library manually.","error")}}),yt();var n=ld(),r=Te(n);Kv(r,{});var a=b(r,2);od(a,{}),m(e,n),pt()}il(cd,{target:document.getElementById("app")});
