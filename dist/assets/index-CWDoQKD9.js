(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=t(a);fetch(a.href,i)}})();const Is=!1;var is=Array.isArray,eo=Array.prototype.indexOf,os=Array.from,Za=Object.defineProperty,or=Object.getOwnPropertyDescriptor,Ja=Object.getOwnPropertyDescriptors,to=Object.prototype,no=Array.prototype,Zs=Object.getPrototypeOf,ma=Object.isExtensible;function ro(e){return typeof e=="function"}const Pt=()=>{};function so(e){return e()}function Zr(e){for(var n=0;n<e.length;n++)e[n]()}function ei(){var e,n,t=new Promise((r,a)=>{e=r,n=a});return{promise:t,resolve:e,reject:n}}const dt=2,Js=4,ls=8,ao=1<<24,on=16,bn=32,Xn=64,cs=128,Kt=512,ut=1024,St=2048,Xt=4096,Lt=8192,pn=16384,us=32768,Vn=65536,ba=1<<17,ti=1<<18,pr=1<<19,ni=1<<20,fn=1<<25,Yn=32768,zs=1<<21,ea=1<<22,Mn=1<<23,Dn=Symbol("$state"),io=Symbol("legacy props"),oo=Symbol(""),sr=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function ta(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function lo(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function co(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function uo(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function vo(e){throw new Error("https://svelte.dev/e/effect_orphan")}function fo(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function ho(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function po(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function _o(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function go(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function mo(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const bo=1,wo=2,ri=4,yo=8,ko=16,xo=2,Eo=4,So=8,Mo=1,To=2,$o=4,Ao=1,Co=2,pt=Symbol(),Po="http://www.w3.org/1999/xhtml";function Ro(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function si(e){return e===this.v}function na(e,n){return e!=e?n==n:e!==n||e!==null&&typeof e=="object"||typeof e=="function"}function ai(e){return!na(e,this.v)}let _r=!1,Lo=!1;function Io(){_r=!0}let Xe=null;function cr(e){Xe=e}function ft(e,n=!1,t){Xe={p:Xe,i:!1,c:null,e:null,s:e,x:null,l:_r&&!n?{s:null,u:null,$:[]}:null}}function ht(e){var n=Xe,t=n.e;if(t!==null){n.e=null;for(var r of t)wi(r)}return n.i=!0,Xe=n.p,{}}function Or(){return!_r||Xe!==null&&Xe.l===null}let Nn=[];function ii(){var e=Nn;Nn=[],Zr(e)}function Gn(e){if(Nn.length===0&&!Er){var n=Nn;queueMicrotask(()=>{n===Nn&&ii()})}Nn.push(e)}function zo(){for(;Nn.length>0;)ii()}function oi(e){var n=Ue;if(n===null)return Be.f|=Mn,e;if((n.f&us)===0){if((n.f&cs)===0)throw e;n.b.error(e)}else ur(e,n)}function ur(e,n){for(;n!==null;){if((n.f&cs)!==0)try{n.b.error(e);return}catch(t){e=t}n=n.parent}throw e}const Fr=new Set;let Ye=null,Yr=null,Ft=null,Ot=[],vs=null,Ns=!1,Er=!1;class tn{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#n=0;#r=0;#l=null;#a=new Set;#s=new Set;skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#r>0}process(n){Ot=[],Yr=null,this.apply();var t={parent:null,effect:null,effects:[],render_effects:[]};for(const r of n)this.#i(r,t);this.is_fork||this.#u(),this.is_deferred()?(this.#o(t.effects),this.#o(t.render_effects)):(Yr=this,Ye=null,wa(t.render_effects),wa(t.effects),Yr=null,this.#l?.resolve()),Ft=null}#i(n,t){n.f^=ut;for(var r=n.first;r!==null;){var a=r.f,i=(a&(bn|Xn))!==0,o=i&&(a&ut)!==0,l=o||(a&Lt)!==0||this.skipped_effects.has(r);if((r.f&cs)!==0&&r.b?.is_pending()&&(t={parent:t,effect:r,effects:[],render_effects:[]}),!l&&r.fn!==null){i?r.f^=ut:(a&Js)!==0?t.effects.push(r):mr(r)&&((r.f&on)!==0&&this.#a.add(r),dr(r));var u=r.first;if(u!==null){r=u;continue}}var c=r.parent;for(r=r.next;r===null&&c!==null;)c===t.effect&&(this.#o(t.effects),this.#o(t.render_effects),t=t.parent),r=c.next,c=c.parent}}#o(n){for(const t of n)(t.f&St)!==0?this.#a.add(t):(t.f&Xt)!==0&&this.#s.add(t),this.#c(t.deps),vt(t,ut)}#c(n){if(n!==null)for(const t of n)(t.f&dt)===0||(t.f&Yn)===0||(t.f^=Yn,this.#c(t.deps))}capture(n,t){this.previous.has(n)||this.previous.set(n,t),(n.f&Mn)===0&&(this.current.set(n,n.v),Ft?.set(n,n.v))}activate(){Ye=this,this.apply()}deactivate(){Ye===this&&(Ye=null,Ft=null)}flush(){if(this.activate(),Ot.length>0){if(li(),Ye!==null&&Ye!==this)return}else this.#n===0&&this.process([]);this.deactivate()}discard(){for(const n of this.#t)n(this);this.#t.clear()}#u(){if(this.#r===0){for(const n of this.#e)n();this.#e.clear()}this.#n===0&&this.#v()}#v(){if(Fr.size>1){this.previous.clear();var n=Ft,t=!0,r={parent:null,effect:null,effects:[],render_effects:[]};for(const i of Fr){if(i===this){t=!1;continue}const o=[];for(const[u,c]of this.current){if(i.current.has(u))if(t&&c!==i.current.get(u))i.current.set(u,c);else continue;o.push(u)}if(o.length===0)continue;const l=[...i.current.keys()].filter(u=>!this.current.has(u));if(l.length>0){var a=Ot;Ot=[];const u=new Set,c=new Map;for(const v of o)ci(v,l,u,c);if(Ot.length>0){Ye=i,i.apply();for(const v of Ot)i.#i(v,r);i.deactivate()}Ot=a}}Ye=null,Ft=n}this.committed=!0,Fr.delete(this)}increment(n){this.#n+=1,n&&(this.#r+=1)}decrement(n){this.#n-=1,n&&(this.#r-=1),this.revive()}revive(){for(const n of this.#a)this.#s.delete(n),vt(n,St),Wn(n);for(const n of this.#s)vt(n,Xt),Wn(n);this.flush()}oncommit(n){this.#e.add(n)}ondiscard(n){this.#t.add(n)}settled(){return(this.#l??=ei()).promise}static ensure(){if(Ye===null){const n=Ye=new tn;Fr.add(Ye),Er||tn.enqueue(()=>{Ye===n&&n.flush()})}return Ye}static enqueue(n){Gn(n)}apply(){}}function No(e){var n=Er;Er=!0;try{for(var t;;){if(zo(),Ot.length===0&&(Ye?.flush(),Ot.length===0))return vs=null,t;li()}}finally{Er=n}}function li(){var e=Fn;Ns=!0;var n=null;try{var t=0;for(es(!0);Ot.length>0;){var r=tn.ensure();if(t++>1e3){var a,i;Oo()}r.process(Ot),Tn.clear()}}finally{Ns=!1,es(e),vs=null}}function Oo(){try{fo()}catch(e){ur(e,vs)}}let vn=null;function wa(e){var n=e.length;if(n!==0){for(var t=0;t<n;){var r=e[t++];if((r.f&(pn|Lt))===0&&mr(r)&&(vn=new Set,dr(r),r.deps===null&&r.first===null&&r.nodes===null&&(r.teardown===null&&r.ac===null?Ei(r):r.fn=null),vn?.size>0)){Tn.clear();for(const a of vn){if((a.f&(pn|Lt))!==0)continue;const i=[a];let o=a.parent;for(;o!==null;)vn.has(o)&&(vn.delete(o),i.push(o)),o=o.parent;for(let l=i.length-1;l>=0;l--){const u=i[l];(u.f&(pn|Lt))===0&&dr(u)}}vn.clear()}}vn=null}}function ci(e,n,t,r){if(!t.has(e)&&(t.add(e),e.reactions!==null))for(const a of e.reactions){const i=a.f;(i&dt)!==0?ci(a,n,t,r):(i&(ea|on))!==0&&(i&St)===0&&ui(a,n,r)&&(vt(a,St),Wn(a))}}function ui(e,n,t){const r=t.get(e);if(r!==void 0)return r;if(e.deps!==null)for(const a of e.deps){if(n.includes(a))return!0;if((a.f&dt)!==0&&ui(a,n,t))return t.set(a,!0),!0}return t.set(e,!1),!1}function Wn(e){for(var n=vs=e;n.parent!==null;){n=n.parent;var t=n.f;if(Ns&&n===Ue&&(t&on)!==0&&(t&ti)===0)return;if((t&(Xn|bn))!==0){if((t&ut)===0)return;n.f^=ut}}Ot.push(n)}function Do(e){let n=0,t=Qn(0),r;return()=>{$r()&&(s(t),gr(()=>(n===0&&(r=k(()=>e(()=>Sr(t)))),n+=1,()=>{Gn(()=>{n-=1,n===0&&(r?.(),r=void 0,Sr(t))})})))}}var jo=Vn|pr|cs;function Fo(e,n,t){new qo(e,n,t)}class qo{parent;#e=!1;#t;#n=null;#r;#l;#a;#s=null;#i=null;#o=null;#c=null;#u=null;#v=0;#d=0;#h=!1;#f=null;#b=Do(()=>(this.#f=Qn(this.#v),()=>{this.#f=null}));constructor(n,t,r){this.#t=n,this.#r=t,this.#l=r,this.parent=Ue.b,this.#e=!!this.#r.pending,this.#a=sa(()=>{Ue.b=this;{var a=this.#g();try{this.#s=Dt(()=>r(a))}catch(i){this.error(i)}this.#d>0?this.#_():this.#e=!1}return()=>{this.#u?.remove()}},jo)}#w(){try{this.#s=Dt(()=>this.#l(this.#t))}catch(n){this.error(n)}this.#e=!1}#y(){const n=this.#r.pending;n&&(this.#i=Dt(()=>n(this.#t)),tn.enqueue(()=>{var t=this.#g();this.#s=this.#p(()=>(tn.ensure(),Dt(()=>this.#l(t)))),this.#d>0?this.#_():(jn(this.#i,()=>{this.#i=null}),this.#e=!1)}))}#g(){var n=this.#t;return this.#e&&(this.#u=_n(),this.#t.before(this.#u),n=this.#u),n}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#r.pending}#p(n){var t=Ue,r=Be,a=Xe;sn(this.#a),xt(this.#a),cr(this.#a.ctx);try{return n()}catch(i){return oi(i),null}finally{sn(t),xt(r),cr(a)}}#_(){const n=this.#r.pending;this.#s!==null&&(this.#c=document.createDocumentFragment(),this.#c.append(this.#u),Ti(this.#s,this.#c)),this.#i===null&&(this.#i=Dt(()=>n(this.#t)))}#m(n){if(!this.has_pending_snippet()){this.parent&&this.parent.#m(n);return}this.#d+=n,this.#d===0&&(this.#e=!1,this.#i&&jn(this.#i,()=>{this.#i=null}),this.#c&&(this.#t.before(this.#c),this.#c=null))}update_pending_count(n){this.#m(n),this.#v+=n,this.#f&&vr(this.#f,this.#v)}get_effect_pending(){return this.#b(),s(this.#f)}error(n){var t=this.#r.onerror;let r=this.#r.failed;if(this.#h||!t&&!r)throw n;this.#s&&(Et(this.#s),this.#s=null),this.#i&&(Et(this.#i),this.#i=null),this.#o&&(Et(this.#o),this.#o=null);var a=!1,i=!1;const o=()=>{if(a){Ro();return}a=!0,i&&mo(),tn.ensure(),this.#v=0,this.#o!==null&&jn(this.#o,()=>{this.#o=null}),this.#e=this.has_pending_snippet(),this.#s=this.#p(()=>(this.#h=!1,Dt(()=>this.#l(this.#t)))),this.#d>0?this.#_():this.#e=!1};var l=Be;try{xt(null),i=!0,t?.(n,o),i=!1}catch(u){ur(u,this.#a&&this.#a.parent)}finally{xt(l)}r&&Gn(()=>{this.#o=this.#p(()=>{tn.ensure(),this.#h=!0;try{return Dt(()=>{r(this.#t,()=>n,()=>o)})}catch(u){return ur(u,this.#a.parent),null}finally{this.#h=!1}})})}}function Bo(e,n,t,r){const a=Or()?ds:tt;if(t.length===0&&e.length===0){r(n.map(a));return}var i=Ye,o=Ue,l=Uo();function u(){Promise.all(t.map(c=>Ho(c))).then(c=>{l();try{r([...n.map(a),...c])}catch(v){(o.f&pn)===0&&ur(v,o)}i?.deactivate(),Jr()}).catch(c=>{ur(c,o)})}e.length>0?Promise.all(e).then(()=>{l();try{return u()}finally{i?.deactivate(),Jr()}}):u()}function Uo(){var e=Ue,n=Be,t=Xe,r=Ye;return function(i=!0){sn(e),xt(n),cr(t),i&&r?.activate()}}function Jr(){sn(null),xt(null),cr(null)}function ds(e){var n=dt|St,t=Be!==null&&(Be.f&dt)!==0?Be:null;return Ue!==null&&(Ue.f|=pr),{ctx:Xe,deps:null,effects:null,equals:si,f:n,fn:e,reactions:null,rv:0,v:pt,wv:0,parent:t??Ue,ac:null}}function Ho(e,n){let t=Ue;t===null&&lo();var r=t.b,a=void 0,i=Qn(pt),o=!Be,l=new Map;return tl(()=>{var u=ei();a=u.promise;try{Promise.resolve(e()).then(u.resolve,u.reject).then(()=>{c===Ye&&c.committed&&c.deactivate(),Jr()})}catch(f){u.reject(f),Jr()}var c=Ye;if(o){var v=!r.is_pending();r.update_pending_count(1),c.increment(v),l.get(c)?.reject(sr),l.delete(c),l.set(c,u)}const h=(f,p=void 0)=>{if(c.activate(),p)p!==sr&&(i.f|=Mn,vr(i,p));else{(i.f&Mn)!==0&&(i.f^=Mn),vr(i,f);for(const[x,b]of l){if(l.delete(x),x===c)break;b.reject(sr)}}o&&(r.update_pending_count(-1),c.decrement(v))};u.promise.then(h,f=>h(null,f||"unknown"))}),fs(()=>{for(const u of l.values())u.reject(sr)}),new Promise(u=>{function c(v){function h(){v===a?u(i):c(a)}v.then(h,h)}c(a)})}function wr(e){const n=ds(e);return $i(n),n}function tt(e){const n=ds(e);return n.equals=ai,n}function vi(e){var n=e.effects;if(n!==null){e.effects=null;for(var t=0;t<n.length;t+=1)Et(n[t])}}function Vo(e){for(var n=e.parent;n!==null;){if((n.f&dt)===0)return(n.f&pn)===0?n:null;n=n.parent}return null}function ra(e){var n,t=Ue;sn(Vo(e));try{e.f&=~Yn,vi(e),n=Ri(e)}finally{sn(t)}return n}function di(e){var n=ra(e);if(e.equals(n)||(Ye?.is_fork||(e.v=n),e.wv=Ci()),!Jn)if(Ft!==null)($r()||Ye?.is_fork)&&Ft.set(e,n);else{var t=(e.f&Kt)===0?Xt:ut;vt(e,t)}}let Os=new Set;const Tn=new Map;let fi=!1;function Qn(e,n){var t={f:0,v:e,reactions:null,equals:si,rv:0,wv:0};return t}function wn(e,n){const t=Qn(e);return $i(t),t}function $(e,n=!1,t=!0){const r=Qn(e);return n||(r.equals=ai),_r&&t&&Xe!==null&&Xe.l!==null&&(Xe.l.s??=[]).push(r),r}function qr(e,n){return g(e,k(()=>s(e))),n}function g(e,n,t=!1){Be!==null&&(!nn||(Be.f&ba)!==0)&&Or()&&(Be.f&(dt|on|ea|ba))!==0&&!gn?.includes(e)&&go();let r=t?ar(n):n;return vr(e,r)}function vr(e,n){if(!e.equals(n)){var t=e.v;Jn?Tn.set(e,n):Tn.set(e,t),e.v=n;var r=tn.ensure();r.capture(e,t),(e.f&dt)!==0&&((e.f&St)!==0&&ra(e),vt(e,(e.f&Kt)!==0?ut:Xt)),e.wv=Ci(),hi(e,St),Or()&&Ue!==null&&(Ue.f&ut)!==0&&(Ue.f&(bn|Xn))===0&&(Nt===null?rl([e]):Nt.push(e)),!r.is_fork&&Os.size>0&&!fi&&Yo()}return n}function Yo(){fi=!1;var e=Fn;es(!0);const n=Array.from(Os);try{for(const t of n)(t.f&ut)!==0&&vt(t,Xt),mr(t)&&dr(t)}finally{es(e)}Os.clear()}function Sr(e){g(e,e.v+1)}function hi(e,n){var t=e.reactions;if(t!==null)for(var r=Or(),a=t.length,i=0;i<a;i++){var o=t[i],l=o.f;if(!(!r&&o===Ue)){var u=(l&St)===0;if(u&&vt(o,n),(l&dt)!==0){var c=o;Ft?.delete(c),(l&Yn)===0&&(l&Kt&&(o.f|=Yn),hi(c,Xt))}else u&&((l&on)!==0&&vn!==null&&vn.add(o),Wn(o))}}}function ar(e){if(typeof e!="object"||e===null||Dn in e)return e;const n=Zs(e);if(n!==to&&n!==no)return e;var t=new Map,r=is(e),a=wn(0),i=qn,o=l=>{if(qn===i)return l();var u=Be,c=qn;xt(null),xa(i);var v=l();return xt(u),xa(c),v};return r&&t.set("length",wn(e.length)),new Proxy(e,{defineProperty(l,u,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&po();var v=t.get(u);return v===void 0?v=o(()=>{var h=wn(c.value);return t.set(u,h),h}):g(v,c.value,!0),!0},deleteProperty(l,u){var c=t.get(u);if(c===void 0){if(u in l){const v=o(()=>wn(pt));t.set(u,v),Sr(a)}}else g(c,pt),Sr(a);return!0},get(l,u,c){if(u===Dn)return e;var v=t.get(u),h=u in l;if(v===void 0&&(!h||or(l,u)?.writable)&&(v=o(()=>{var p=ar(h?l[u]:pt),x=wn(p);return x}),t.set(u,v)),v!==void 0){var f=s(v);return f===pt?void 0:f}return Reflect.get(l,u,c)},getOwnPropertyDescriptor(l,u){var c=Reflect.getOwnPropertyDescriptor(l,u);if(c&&"value"in c){var v=t.get(u);v&&(c.value=s(v))}else if(c===void 0){var h=t.get(u),f=h?.v;if(h!==void 0&&f!==pt)return{enumerable:!0,configurable:!0,value:f,writable:!0}}return c},has(l,u){if(u===Dn)return!0;var c=t.get(u),v=c!==void 0&&c.v!==pt||Reflect.has(l,u);if(c!==void 0||Ue!==null&&(!v||or(l,u)?.writable)){c===void 0&&(c=o(()=>{var f=v?ar(l[u]):pt,p=wn(f);return p}),t.set(u,c));var h=s(c);if(h===pt)return!1}return v},set(l,u,c,v){var h=t.get(u),f=u in l;if(r&&u==="length")for(var p=c;p<h.v;p+=1){var x=t.get(p+"");x!==void 0?g(x,pt):p in l&&(x=o(()=>wn(pt)),t.set(p+"",x))}if(h===void 0)(!f||or(l,u)?.writable)&&(h=o(()=>wn(void 0)),g(h,ar(c)),t.set(u,h));else{f=h.v!==pt;var b=o(()=>ar(c));g(h,b)}var _=Reflect.getOwnPropertyDescriptor(l,u);if(_?.set&&_.set.call(v,c),!f){if(r&&typeof u=="string"){var E=t.get("length"),L=Number(u);Number.isInteger(L)&&L>=E.v&&g(E,L+1)}Sr(a)}return!0},ownKeys(l){s(a);var u=Reflect.ownKeys(l).filter(h=>{var f=t.get(h);return f===void 0||f.v!==pt});for(var[c,v]of t)v.v!==pt&&!(c in l)&&u.push(c);return u},setPrototypeOf(){_o()}})}var kn,pi,_i,gi;function Wo(){if(kn===void 0){kn=window,pi=/Firefox/.test(navigator.userAgent);var e=Element.prototype,n=Node.prototype,t=Text.prototype;_i=or(n,"firstChild").get,gi=or(n,"nextSibling").get,ma(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),ma(t)&&(t.__t=void 0)}}function _n(e=""){return document.createTextNode(e)}function xn(e){return _i.call(e)}function Dr(e){return gi.call(e)}function d(e,n){return xn(e)}function $e(e,n=!1){{var t=xn(e);return t instanceof Comment&&t.data===""?Dr(t):t}}function m(e,n=1,t=!1){let r=e;for(;n--;)r=Dr(r);return r}function Qo(e){e.textContent=""}function mi(){return!1}let ya=!1;function Ko(){ya||(ya=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const n of e.target.elements)n.__on_r?.()})},{capture:!0}))}function Xo(e,n,t,r=!0){r&&t();for(var a of n)e.addEventListener(a,t);fs(()=>{for(var i of n)e.removeEventListener(i,t)})}function Zn(e){var n=Be,t=Ue;xt(null),sn(null);try{return e()}finally{xt(n),sn(t)}}function Go(e,n,t,r=t){e.addEventListener(n,()=>Zn(t));const a=e.__on_r;a?e.__on_r=()=>{a(),r(!0)}:e.__on_r=()=>r(!0),Ko()}function bi(e){Ue===null&&(Be===null&&vo(),uo()),Jn&&co()}function Zo(e,n){var t=n.last;t===null?n.last=n.first=e:(t.next=e,e.prev=t,n.last=e)}function ln(e,n,t){var r=Ue;r!==null&&(r.f&Lt)!==0&&(e|=Lt);var a={ctx:Xe,deps:null,nodes:null,f:e|St|Kt,first:null,fn:n,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,wv:0,ac:null};if(t)try{dr(a),a.f|=us}catch(l){throw Et(a),l}else n!==null&&Wn(a);var i=a;if(t&&i.deps===null&&i.teardown===null&&i.nodes===null&&i.first===i.last&&(i.f&pr)===0&&(i=i.first,(e&on)!==0&&(e&Vn)!==0&&i!==null&&(i.f|=Vn)),i!==null&&(i.parent=r,r!==null&&Zo(i,r),Be!==null&&(Be.f&dt)!==0&&(e&Xn)===0)){var o=Be;(o.effects??=[]).push(i)}return a}function $r(){return Be!==null&&!nn}function fs(e){const n=ln(ls,null,!1);return vt(n,ut),n.teardown=e,n}function Ds(e){bi();var n=Ue.f,t=!Be&&(n&bn)!==0&&(n&us)===0;if(t){var r=Xe;(r.e??=[]).push(e)}else return wi(e)}function wi(e){return ln(Js|ni,e,!1)}function Jo(e){return bi(),ln(ls|ni,e,!0)}function el(e){tn.ensure();const n=ln(Xn|pr,e,!0);return(t={})=>new Promise(r=>{t.outro?jn(n,()=>{Et(n),r(void 0)}):(Et(n),r(void 0))})}function Rt(e){return ln(Js,e,!1)}function X(e,n){var t=Xe,r={effect:null,ran:!1,deps:e};t.l.$.push(r),r.effect=gr(()=>{e(),!r.ran&&(r.ran=!0,k(n))})}function Bt(){var e=Xe;gr(()=>{for(var n of e.l.$){n.deps();var t=n.effect;(t.f&ut)!==0&&vt(t,Xt),mr(t)&&dr(t),n.ran=!1}})}function tl(e){return ln(ea|pr,e,!0)}function gr(e,n=0){return ln(ls|n,e,!0)}function de(e,n=[],t=[],r=[]){Bo(r,n,t,a=>{ln(ls,()=>e(...a.map(s)),!0)})}function sa(e,n=0){var t=ln(on|n,e,!0);return t}function Dt(e){return ln(bn|pr,e,!0)}function yi(e){var n=e.teardown;if(n!==null){const t=Jn,r=Be;ka(!0),xt(null);try{n.call(null)}finally{ka(t),xt(r)}}}function ki(e,n=!1){var t=e.first;for(e.first=e.last=null;t!==null;){const a=t.ac;a!==null&&Zn(()=>{a.abort(sr)});var r=t.next;(t.f&Xn)!==0?t.parent=null:Et(t,n),t=r}}function nl(e){for(var n=e.first;n!==null;){var t=n.next;(n.f&bn)===0&&Et(n),n=t}}function Et(e,n=!0){var t=!1;(n||(e.f&ti)!==0)&&e.nodes!==null&&e.nodes.end!==null&&(xi(e.nodes.start,e.nodes.end),t=!0),ki(e,n&&!t),ts(e,0),vt(e,pn);var r=e.nodes&&e.nodes.t;if(r!==null)for(const i of r)i.stop();yi(e);var a=e.parent;a!==null&&a.first!==null&&Ei(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function xi(e,n){for(;e!==null;){var t=e===n?null:Dr(e);e.remove(),e=t}}function Ei(e){var n=e.parent,t=e.prev,r=e.next;t!==null&&(t.next=r),r!==null&&(r.prev=t),n!==null&&(n.first===e&&(n.first=r),n.last===e&&(n.last=t))}function jn(e,n,t=!0){var r=[];Si(e,r,!0);var a=()=>{t&&Et(e),n&&n()},i=r.length;if(i>0){var o=()=>--i||a();for(var l of r)l.out(o)}else a()}function Si(e,n,t){if((e.f&Lt)===0){e.f^=Lt;var r=e.nodes&&e.nodes.t;if(r!==null)for(const l of r)(l.is_global||t)&&n.push(l);for(var a=e.first;a!==null;){var i=a.next,o=(a.f&Vn)!==0||(a.f&bn)!==0&&(e.f&on)!==0;Si(a,n,o?t:!1),a=i}}}function aa(e){Mi(e,!0)}function Mi(e,n){if((e.f&Lt)!==0){e.f^=Lt,(e.f&ut)===0&&(vt(e,St),Wn(e));for(var t=e.first;t!==null;){var r=t.next,a=(t.f&Vn)!==0||(t.f&bn)!==0;Mi(t,a?n:!1),t=r}var i=e.nodes&&e.nodes.t;if(i!==null)for(const o of i)(o.is_global||n)&&o.in()}}function Ti(e,n){if(e.nodes)for(var t=e.nodes.start,r=e.nodes.end;t!==null;){var a=t===r?null:Dr(t);n.append(t),t=a}}let Fn=!1;function es(e){Fn=e}let Jn=!1;function ka(e){Jn=e}let Be=null,nn=!1;function xt(e){Be=e}let Ue=null;function sn(e){Ue=e}let gn=null;function $i(e){Be!==null&&(gn===null?gn=[e]:gn.push(e))}let mt=null,At=0,Nt=null;function rl(e){Nt=e}let Ai=1,Ar=0,qn=Ar;function xa(e){qn=e}function Ci(){return++Ai}function mr(e){var n=e.f;if((n&St)!==0)return!0;if(n&dt&&(e.f&=~Yn),(n&Xt)!==0){var t=e.deps;if(t!==null)for(var r=t.length,a=0;a<r;a++){var i=t[a];if(mr(i)&&di(i),i.wv>e.wv)return!0}(n&Kt)!==0&&Ft===null&&vt(e,ut)}return!1}function Pi(e,n,t=!0){var r=e.reactions;if(r!==null&&!gn?.includes(e))for(var a=0;a<r.length;a++){var i=r[a];(i.f&dt)!==0?Pi(i,n,!1):n===i&&(t?vt(i,St):(i.f&ut)!==0&&vt(i,Xt),Wn(i))}}function Ri(e){var n=mt,t=At,r=Nt,a=Be,i=gn,o=Xe,l=nn,u=qn,c=e.f;mt=null,At=0,Nt=null,Be=(c&(bn|Xn))===0?e:null,gn=null,cr(e.ctx),nn=!1,qn=++Ar,e.ac!==null&&(Zn(()=>{e.ac.abort(sr)}),e.ac=null);try{e.f|=zs;var v=e.fn,h=v(),f=e.deps;if(mt!==null){var p;if(ts(e,At),f!==null&&At>0)for(f.length=At+mt.length,p=0;p<mt.length;p++)f[At+p]=mt[p];else e.deps=f=mt;if($r()&&(e.f&Kt)!==0)for(p=At;p<f.length;p++)(f[p].reactions??=[]).push(e)}else f!==null&&At<f.length&&(ts(e,At),f.length=At);if(Or()&&Nt!==null&&!nn&&f!==null&&(e.f&(dt|Xt|St))===0)for(p=0;p<Nt.length;p++)Pi(Nt[p],e);return a!==null&&a!==e&&(Ar++,Nt!==null&&(r===null?r=Nt:r.push(...Nt))),(e.f&Mn)!==0&&(e.f^=Mn),h}catch(x){return oi(x)}finally{e.f^=zs,mt=n,At=t,Nt=r,Be=a,gn=i,cr(o),nn=l,qn=u}}function sl(e,n){let t=n.reactions;if(t!==null){var r=eo.call(t,e);if(r!==-1){var a=t.length-1;a===0?t=n.reactions=null:(t[r]=t[a],t.pop())}}t===null&&(n.f&dt)!==0&&(mt===null||!mt.includes(n))&&(vt(n,Xt),(n.f&Kt)!==0&&(n.f^=Kt,n.f&=~Yn),vi(n),ts(n,0))}function ts(e,n){var t=e.deps;if(t!==null)for(var r=n;r<t.length;r++)sl(e,t[r])}function dr(e){var n=e.f;if((n&pn)===0){vt(e,ut);var t=Ue,r=Fn;Ue=e,Fn=!0;try{(n&(on|ao))!==0?nl(e):ki(e),yi(e);var a=Ri(e);e.teardown=typeof a=="function"?a:null,e.wv=Ai;var i;Is&&Lo&&(e.f&St)!==0&&e.deps}finally{Fn=r,Ue=t}}}async function Cr(){await Promise.resolve(),No()}function s(e){var n=e.f,t=(n&dt)!==0;if(Be!==null&&!nn){var r=Ue!==null&&(Ue.f&pn)!==0;if(!r&&!gn?.includes(e)){var a=Be.deps;if((Be.f&zs)!==0)e.rv<Ar&&(e.rv=Ar,mt===null&&a!==null&&a[At]===e?At++:mt===null?mt=[e]:mt.includes(e)||mt.push(e));else{(Be.deps??=[]).push(e);var i=e.reactions;i===null?e.reactions=[Be]:i.includes(Be)||i.push(Be)}}}if(Jn){if(Tn.has(e))return Tn.get(e);if(t){var o=e,l=o.v;return((o.f&ut)===0&&o.reactions!==null||Ii(o))&&(l=ra(o)),Tn.set(o,l),l}}else t&&(!Ft?.has(e)||Ye?.is_fork&&!$r())&&(o=e,mr(o)&&di(o),Fn&&$r()&&(o.f&Kt)===0&&Li(o));if(Ft?.has(e))return Ft.get(e);if((e.f&Mn)!==0)throw e.v;return e.v}function Li(e){if(e.deps!==null){e.f^=Kt;for(const n of e.deps)(n.reactions??=[]).push(e),(n.f&dt)!==0&&(n.f&Kt)===0&&Li(n)}}function Ii(e){if(e.v===pt)return!0;if(e.deps===null)return!1;for(const n of e.deps)if(Tn.has(n)||(n.f&dt)!==0&&Ii(n))return!0;return!1}function k(e){var n=nn;try{return nn=!0,e()}finally{nn=n}}const al=-7169;function vt(e,n){e.f=e.f&al|n}function q(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Dn in e)js(e);else if(!Array.isArray(e))for(let n in e){const t=e[n];typeof t=="object"&&t&&Dn in t&&js(t)}}}function js(e,n=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!n.has(e)){n.add(e),e instanceof Date&&e.getTime();for(let r in e)try{js(e[r],n)}catch{}const t=Zs(e);if(t!==Object.prototype&&t!==Array.prototype&&t!==Map.prototype&&t!==Set.prototype&&t!==Date.prototype){const r=Ja(t);for(let a in r){const i=r[a].get;if(i)try{i.call(e)}catch{}}}}}const il=["touchstart","touchmove"];function ol(e){return il.includes(e)}const ll=new Set,Ea=new Set;function cl(e,n,t,r={}){function a(i){if(r.capture||kr.call(n,i),!i.cancelBubble)return Zn(()=>t?.call(this,i))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Gn(()=>{n.addEventListener(e,a,r)}):n.addEventListener(e,a,r),a}function C(e,n,t,r,a){var i={capture:r,passive:a},o=cl(e,n,t,i);(n===document.body||n===window||n===document||n instanceof HTMLMediaElement)&&fs(()=>{n.removeEventListener(e,o,i)})}let Sa=null;function kr(e){var n=this,t=n.ownerDocument,r=e.type,a=e.composedPath?.()||[],i=a[0]||e.target;Sa=e;var o=0,l=Sa===e&&e.__root;if(l){var u=a.indexOf(l);if(u!==-1&&(n===document||n===window)){e.__root=n;return}var c=a.indexOf(n);if(c===-1)return;u<=c&&(o=u)}if(i=a[o]||e.target,i!==n){Za(e,"currentTarget",{configurable:!0,get(){return i||t}});var v=Be,h=Ue;xt(null),sn(null);try{for(var f,p=[];i!==null;){var x=i.assignedSlot||i.parentNode||i.host||null;try{var b=i["__"+r];b!=null&&(!i.disabled||e.target===i)&&b.call(i,e)}catch(_){f?p.push(_):f=_}if(e.cancelBubble||x===n||x===null)break;i=x}if(f){for(let _ of p)queueMicrotask(()=>{throw _});throw f}}finally{e.__root=n,delete e.currentTarget,xt(v),sn(h)}}}function zi(e){var n=document.createElement("template");return n.innerHTML=e.replaceAll("<!>","<!---->"),n.content}function Pr(e,n){var t=Ue;t.nodes===null&&(t.nodes={start:e,end:n,a:null,t:null})}function T(e,n){var t=(n&Ao)!==0,r=(n&Co)!==0,a,i=!e.startsWith("<!>");return()=>{a===void 0&&(a=zi(i?e:"<!>"+e),t||(a=xn(a)));var o=r||pi?document.importNode(a,!0):a.cloneNode(!0);if(t){var l=xn(o),u=o.lastChild;Pr(l,u)}else Pr(o,o);return o}}function In(e=""){{var n=_n(e+"");return Pr(n,n),n}}function We(){var e=document.createDocumentFragment(),n=document.createComment(""),t=_n();return e.append(n,t),Pr(n,t),e}function w(e,n){e!==null&&e.before(n)}let Fs=!0;function ce(e,n){var t=n==null?"":typeof n=="object"?n+"":n;t!==(e.__t??=e.nodeValue)&&(e.__t=t,e.nodeValue=t+"")}function ul(e,n){return vl(e,n)}const er=new Map;function vl(e,{target:n,anchor:t,props:r={},events:a,context:i,intro:o=!0}){Wo();var l=new Set,u=h=>{for(var f=0;f<h.length;f++){var p=h[f];if(!l.has(p)){l.add(p);var x=ol(p);n.addEventListener(p,kr,{passive:x});var b=er.get(p);b===void 0?(document.addEventListener(p,kr,{passive:x}),er.set(p,1)):er.set(p,b+1)}}};u(os(ll)),Ea.add(u);var c=void 0,v=el(()=>{var h=t??n.appendChild(_n());return Fo(h,{pending:()=>{}},f=>{if(i){ft({});var p=Xe;p.c=i}a&&(r.$$events=a),Fs=o,c=e(f,r)||{},Fs=!0,i&&ht()}),()=>{for(var f of l){n.removeEventListener(f,kr);var p=er.get(f);--p===0?(document.removeEventListener(f,kr),er.delete(f)):er.set(f,p)}Ea.delete(u),h!==t&&h.parentNode?.removeChild(h)}});return dl.set(c,v),c}let dl=new WeakMap;class fl{anchor;#e=new Map;#t=new Map;#n=new Map;#r=new Set;#l=!0;constructor(n,t=!0){this.anchor=n,this.#l=t}#a=()=>{var n=Ye;if(this.#e.has(n)){var t=this.#e.get(n),r=this.#t.get(t);if(r)aa(r),this.#r.delete(t);else{var a=this.#n.get(t);a&&(this.#t.set(t,a.effect),this.#n.delete(t),a.fragment.lastChild.remove(),this.anchor.before(a.fragment),r=a.effect)}for(const[i,o]of this.#e){if(this.#e.delete(i),i===n)break;const l=this.#n.get(o);l&&(Et(l.effect),this.#n.delete(o))}for(const[i,o]of this.#t){if(i===t||this.#r.has(i))continue;const l=()=>{if(Array.from(this.#e.values()).includes(i)){var c=document.createDocumentFragment();Ti(o,c),c.append(_n()),this.#n.set(i,{effect:o,fragment:c})}else Et(o);this.#r.delete(i),this.#t.delete(i)};this.#l||!r?(this.#r.add(i),jn(o,l,!1)):l()}}};#s=n=>{this.#e.delete(n);const t=Array.from(this.#e.values());for(const[r,a]of this.#n)t.includes(r)||(Et(a.effect),this.#n.delete(r))};ensure(n,t){var r=Ye,a=mi();if(t&&!this.#t.has(n)&&!this.#n.has(n))if(a){var i=document.createDocumentFragment(),o=_n();i.append(o),this.#n.set(n,{effect:Dt(()=>t(o)),fragment:i})}else this.#t.set(n,Dt(()=>t(this.anchor)));if(this.#e.set(r,n),a){for(const[l,u]of this.#t)l===n?r.skipped_effects.delete(u):r.skipped_effects.add(u);for(const[l,u]of this.#n)l===n?r.skipped_effects.delete(u.effect):r.skipped_effects.add(u.effect);r.oncommit(this.#a),r.ondiscard(this.#s)}else this.#a()}}function j(e,n,t=!1){var r=new fl(e),a=t?Vn:0;function i(o,l){r.ensure(o,l)}sa(()=>{var o=!1;n((l,u=!0)=>{o=!0,i(u,l)}),o||i(!1,null)},a)}function mn(e,n){return n}function hl(e,n,t){for(var r=[],a=n.length,i,o=n.length,l=0;l<a;l++){let h=n[l];jn(h,()=>{if(i){if(i.pending.delete(h),i.done.add(h),i.pending.size===0){var f=e.outrogroups;qs(os(i.done)),f.delete(i),f.size===0&&(e.outrogroups=null)}}else o-=1},!1)}if(o===0){var u=r.length===0&&t!==null;if(u){var c=t,v=c.parentNode;Qo(v),v.append(c),e.items.clear()}qs(n,!u)}else i={pending:new Set(n),done:new Set},(e.outrogroups??=new Set).add(i)}function qs(e,n=!0){for(var t=0;t<e.length;t++)Et(e[t],n)}var Ma;function qt(e,n,t,r,a,i=null){var o=e,l=new Map,u=(n&ri)!==0;if(u){var c=e;o=c.appendChild(_n())}var v=null,h=tt(()=>{var E=t();return is(E)?E:E==null?[]:os(E)}),f,p=!0;function x(){_.fallback=v,pl(_,f,o,n,r),v!==null&&(f.length===0?(v.f&fn)===0?aa(v):(v.f^=fn,xr(v,null,o)):jn(v,()=>{v=null}))}var b=sa(()=>{f=s(h);for(var E=f.length,L=new Set,V=Ye,G=mi(),H=0;H<E;H+=1){var W=f[H],ue=r(W,H),Y=p?null:l.get(ue);Y?(Y.v&&vr(Y.v,W),Y.i&&vr(Y.i,H),G&&V.skipped_effects.delete(Y.e)):(Y=_l(l,p?o:Ma??=_n(),W,ue,H,a,n,t),p||(Y.e.f|=fn),l.set(ue,Y)),L.add(ue)}if(E===0&&i&&!v&&(p?v=Dt(()=>i(o)):(v=Dt(()=>i(Ma??=_n())),v.f|=fn)),!p)if(G){for(const[ge,me]of l)L.has(ge)||V.skipped_effects.add(me.e);V.oncommit(x),V.ondiscard(()=>{})}else x();s(h)}),_={effect:b,items:l,outrogroups:null,fallback:v};p=!1}function pl(e,n,t,r,a){var i=(r&yo)!==0,o=n.length,l=e.items,u=e.effect.first,c,v=null,h,f=[],p=[],x,b,_,E;if(i)for(E=0;E<o;E+=1)x=n[E],b=a(x,E),_=l.get(b).e,(_.f&fn)===0&&(_.nodes?.a?.measure(),(h??=new Set).add(_));for(E=0;E<o;E+=1){if(x=n[E],b=a(x,E),_=l.get(b).e,e.outrogroups!==null)for(const me of e.outrogroups)me.pending.delete(_),me.done.delete(_);if((_.f&fn)!==0)if(_.f^=fn,_===u)xr(_,null,t);else{var L=v?v.next:u;_===e.effect.last&&(e.effect.last=_.prev),_.prev&&(_.prev.next=_.next),_.next&&(_.next.prev=_.prev),yn(e,v,_),yn(e,_,L),xr(_,L,t),v=_,f=[],p=[],u=v.next;continue}if((_.f&Lt)!==0&&(aa(_),i&&(_.nodes?.a?.unfix(),(h??=new Set).delete(_))),_!==u){if(c!==void 0&&c.has(_)){if(f.length<p.length){var V=p[0],G;v=V.prev;var H=f[0],W=f[f.length-1];for(G=0;G<f.length;G+=1)xr(f[G],V,t);for(G=0;G<p.length;G+=1)c.delete(p[G]);yn(e,H.prev,W.next),yn(e,v,H),yn(e,W,V),u=V,v=W,E-=1,f=[],p=[]}else c.delete(_),xr(_,u,t),yn(e,_.prev,_.next),yn(e,_,v===null?e.effect.first:v.next),yn(e,v,_),v=_;continue}for(f=[],p=[];u!==null&&u!==_;)(c??=new Set).add(u),p.push(u),u=u.next;if(u===null)continue}(_.f&fn)===0&&f.push(_),v=_,u=_.next}if(e.outrogroups!==null){for(const me of e.outrogroups)me.pending.size===0&&(qs(os(me.done)),e.outrogroups?.delete(me));e.outrogroups.size===0&&(e.outrogroups=null)}if(u!==null||c!==void 0){var ue=[];if(c!==void 0)for(_ of c)(_.f&Lt)===0&&ue.push(_);for(;u!==null;)(u.f&Lt)===0&&u!==e.fallback&&ue.push(u),u=u.next;var Y=ue.length;if(Y>0){var ge=(r&ri)!==0&&o===0?t:null;if(i){for(E=0;E<Y;E+=1)ue[E].nodes?.a?.measure();for(E=0;E<Y;E+=1)ue[E].nodes?.a?.fix()}hl(e,ue,ge)}}i&&Gn(()=>{if(h!==void 0)for(_ of h)_.nodes?.a?.apply()})}function _l(e,n,t,r,a,i,o,l){var u=(o&bo)!==0?(o&ko)===0?$(t,!1,!1):Qn(t):null,c=(o&wo)!==0?Qn(a):null;return{v:u,i:c,e:Dt(()=>(i(n,u??t,c??a,l),()=>{e.delete(r)}))}}function xr(e,n,t){if(e.nodes)for(var r=e.nodes.start,a=e.nodes.end,i=n&&(n.f&fn)===0?n.nodes.start:t;r!==null;){var o=Dr(r);if(i.before(r),r===a)return;r=o}}function yn(e,n,t){n===null?e.effect.first=t:n.next=t,t===null?e.effect.last=n:t.prev=n}function te(e,n,t=!1,r=!1,a=!1){var i=e,o="";de(()=>{var l=Ue;if(o!==(o=n()??"")&&(l.nodes!==null&&(xi(l.nodes.start,l.nodes.end),l.nodes=null),o!=="")){var u=o+"";t?u=`<svg>${u}</svg>`:r&&(u=`<math>${u}</math>`);var c=zi(u);if((t||r)&&(c=xn(c)),Pr(xn(c),c.lastChild),t||r)for(;xn(c);)i.before(xn(c));else i.before(c)}})}function Wr(e,n,t,r,a){var i=n.$$slots?.[t],o=!1;i===!0&&(i=n[t==="default"?"children":t],o=!0),i===void 0||i(e,o?()=>r:r)}const gl=()=>performance.now(),dn={tick:e=>requestAnimationFrame(e),now:()=>gl(),tasks:new Set};function Ni(){const e=dn.now();dn.tasks.forEach(n=>{n.c(e)||(dn.tasks.delete(n),n.f())}),dn.tasks.size!==0&&dn.tick(Ni)}function ml(e){let n;return dn.tasks.size===0&&dn.tick(Ni),{promise:new Promise(t=>{dn.tasks.add(n={c:e,f:t})}),abort(){dn.tasks.delete(n)}}}function Br(e,n){Zn(()=>{e.dispatchEvent(new CustomEvent(n))})}function bl(e){if(e==="float")return"cssFloat";if(e==="offset")return"cssOffset";if(e.startsWith("--"))return e;const n=e.split("-");return n.length===1?n[0]:n[0]+n.slice(1).map(t=>t[0].toUpperCase()+t.slice(1)).join("")}function Ta(e){const n={},t=e.split(";");for(const r of t){const[a,i]=r.split(":");if(!a||i===void 0)break;const o=bl(a.trim());n[o]=i.trim()}return n}const wl=e=>e;function wt(e,n,t,r){var a=(e&Mo)!==0,i=(e&To)!==0,o=a&&i,l=(e&$o)!==0,u=o?"both":a?"in":"out",c,v=n.inert,h=n.style.overflow,f,p;function x(){return Zn(()=>c??=t()(n,r?.()??{},{direction:u}))}var b={is_global:l,in(){if(n.inert=v,!a){p?.abort(),p?.reset?.();return}i||f?.abort(),Br(n,"introstart"),f=Bs(n,x(),p,1,()=>{Br(n,"introend"),f?.abort(),f=c=void 0,n.style.overflow=h})},out(V){if(!i){V?.(),c=void 0;return}n.inert=!0,Br(n,"outrostart"),p=Bs(n,x(),f,0,()=>{Br(n,"outroend"),V?.()})},stop:()=>{f?.abort(),p?.abort()}},_=Ue;if((_.nodes.t??=[]).push(b),a&&Fs){var E=l;if(!E){for(var L=_.parent;L&&(L.f&Vn)!==0;)for(;(L=L.parent)&&(L.f&on)===0;);E=!L||(L.f&us)!==0}E&&Rt(()=>{k(()=>b.in())})}}function Bs(e,n,t,r,a){var i=r===1;if(ro(n)){var o,l=!1;return Gn(()=>{if(!l){var _=n({direction:i?"in":"out"});o=Bs(e,_,t,r,a)}}),{abort:()=>{l=!0,o?.abort()},deactivate:()=>o.deactivate(),reset:()=>o.reset(),t:()=>o.t()}}if(t?.deactivate(),!n?.duration)return a(),{abort:Pt,deactivate:Pt,reset:Pt,t:()=>r};const{delay:u=0,css:c,tick:v,easing:h=wl}=n;var f=[];if(i&&t===void 0&&(v&&v(0,1),c)){var p=Ta(c(0,1));f.push(p,p)}var x=()=>1-r,b=e.animate(f,{duration:u,fill:"forwards"});return b.onfinish=()=>{b.cancel();var _=t?.t()??1-r;t?.abort();var E=r-_,L=n.duration*Math.abs(E),V=[];if(L>0){var G=!1;if(c)for(var H=Math.ceil(L/16.666666666666668),W=0;W<=H;W+=1){var ue=_+E*h(W/H),Y=Ta(c(ue,1-ue));V.push(Y),G||=Y.overflow==="hidden"}G&&(e.style.overflow="hidden"),x=()=>{var ge=b.currentTime;return _+E*h(ge/L)},v&&ml(()=>{if(b.playState!=="running")return!1;var ge=x();return v(ge,1-ge),!0})}b=e.animate(V,{duration:L,fill:"forwards"}),b.onfinish=()=>{x=()=>r,v?.(r,1-r),a()}},{abort:()=>{b&&(b.cancel(),b.effect=null,b.onfinish=Pt)},deactivate:()=>{a=Pt},reset:()=>{r===0&&v?.(1,0)},t:()=>x()}}function ia(e,n,t){Rt(()=>{var r=k(()=>n(e,t?.())||{});if(t&&r?.update){var a=!1,i={};gr(()=>{var o=t();q(o),a&&na(i,o)&&(i=o,r.update(o))}),a=!0}if(r?.destroy)return()=>r.destroy()})}const $a=[...` 	
\r\fÂ \v\uFEFF`];function yl(e,n,t){var r=e==null?"":""+e;if(n&&(r=r?r+" "+n:n),t){for(var a in t)if(t[a])r=r?r+" "+a:a;else if(r.length)for(var i=a.length,o=0;(o=r.indexOf(a,o))>=0;){var l=o+i;(o===0||$a.includes(r[o-1]))&&(l===r.length||$a.includes(r[l]))?r=(o===0?"":r.substring(0,o))+r.substring(l+1):o=l}}return r===""?null:r}function Aa(e,n=!1){var t=n?" !important;":";",r="";for(var a in e){var i=e[a];i!=null&&i!==""&&(r+=" "+a+": "+i+t)}return r}function xs(e){return e[0]!=="-"||e[1]!=="-"?e.toLowerCase():e}function kl(e,n){if(n){var t="",r,a;if(Array.isArray(n)?(r=n[0],a=n[1]):r=n,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var i=!1,o=0,l=!1,u=[];r&&u.push(...Object.keys(r).map(xs)),a&&u.push(...Object.keys(a).map(xs));var c=0,v=-1;const b=e.length;for(var h=0;h<b;h++){var f=e[h];if(l?f==="/"&&e[h-1]==="*"&&(l=!1):i?i===f&&(i=!1):f==="/"&&e[h+1]==="*"?l=!0:f==='"'||f==="'"?i=f:f==="("?o++:f===")"&&o--,!l&&i===!1&&o===0){if(f===":"&&v===-1)v=h;else if(f===";"||h===b-1){if(v!==-1){var p=xs(e.substring(c,v).trim());if(!u.includes(p)){f!==";"&&h++;var x=e.substring(c,h).trim();t+=" "+x+";"}}c=h+1,v=-1}}}}return r&&(t+=Aa(r)),a&&(t+=Aa(a,!0)),t=t.trim(),t===""?null:t}return e==null?null:String(e)}function Fe(e,n,t,r,a,i){var o=e.__className;if(o!==t||o===void 0){var l=yl(t,r,i);l==null?e.removeAttribute("class"):e.className=l,e.__className=t}else if(i&&a!==i)for(var u in i){var c=!!i[u];(a==null||c!==!!a[u])&&e.classList.toggle(u,c)}return i}function Es(e,n={},t,r){for(var a in t){var i=t[a];n[a]!==i&&(t[a]==null?e.style.removeProperty(a):e.style.setProperty(a,i,r))}}function Ze(e,n,t,r){var a=e.__style;if(a!==n){var i=kl(n,r);i==null?e.removeAttribute("style"):e.style.cssText=i,e.__style=n}else r&&(Array.isArray(r)?(Es(e,t?.[0],r[0]),Es(e,t?.[1],r[1],"important")):Es(e,t,r));return r}const xl=Symbol("is custom element"),El=Symbol("is html");function Sl(e,n){var t=Oi(e);t.value===(t.value=n??void 0)||e.value===n&&(n!==0||e.nodeName!=="PROGRESS")||(e.value=n??"")}function bt(e,n,t,r){var a=Oi(e);a[n]!==(a[n]=t)&&(n==="loading"&&(e[oo]=t),t==null?e.removeAttribute(n):typeof t!="string"&&Ml(e).includes(n)?e[n]=t:e.setAttribute(n,t))}function Oi(e){return e.__attributes??={[xl]:e.nodeName.includes("-"),[El]:e.namespaceURI===Po}}var Ca=new Map;function Ml(e){var n=e.getAttribute("is")||e.nodeName,t=Ca.get(n);if(t)return t;Ca.set(n,t=[]);for(var r,a=e,i=Element.prototype;i!==a;){r=Ja(a);for(var o in r)r[o].set&&t.push(o);a=Zs(a)}return t}function hs(e,n,t=n){var r=new WeakSet;Go(e,"input",async a=>{var i=a?e.defaultValue:e.value;if(i=Ss(e)?Ms(i):i,t(i),Ye!==null&&r.add(Ye),await Cr(),i!==(i=n())){var o=e.selectionStart,l=e.selectionEnd,u=e.value.length;if(e.value=i??"",l!==null){var c=e.value.length;o===l&&l===u&&c>u?(e.selectionStart=c,e.selectionEnd=c):(e.selectionStart=o,e.selectionEnd=Math.min(l,c))}}}),k(n)==null&&e.value&&(t(Ss(e)?Ms(e.value):e.value),Ye!==null&&r.add(Ye)),gr(()=>{var a=n();if(e===document.activeElement){var i=Yr??Ye;if(r.has(i))return}Ss(e)&&a===Ms(e.value)||e.type==="date"&&!a&&!e.value||a!==e.value&&(e.value=a??"")})}function Ss(e){var n=e.type;return n==="number"||n==="range"}function Ms(e){return e===""?null:+e}class oa{#e=new WeakMap;#t;#n;static entries=new WeakMap;constructor(n){this.#n=n}observe(n,t){var r=this.#e.get(n)||new Set;return r.add(t),this.#e.set(n,r),this.#r().observe(n,this.#n),()=>{var a=this.#e.get(n);a.delete(t),a.size===0&&(this.#e.delete(n),this.#t.unobserve(n))}}#r(){return this.#t??(this.#t=new ResizeObserver(n=>{for(var t of n){oa.entries.set(t.target,t);for(var r of this.#e.get(t.target)||[])r(t)}}))}}var Tl=new oa({box:"border-box"});function Pa(e,n,t){var r=Tl.observe(e,()=>t(e[n]));Rt(()=>(k(()=>t(e[n])),r))}function Ra(e,n){return e===n||e?.[Dn]===n}function Cn(e={},n,t,r){return Rt(()=>{var a,i;return gr(()=>{a=i,i=[],k(()=>{e!==t(...i)&&(n(e,...i),a&&Ra(t(...a),e)&&n(null,...a))})}),()=>{Gn(()=>{i&&Ra(t(...i),e)&&n(null,...i)})}}),e}function La(e,n){Xo(window,["resize"],()=>Zn(()=>n(window[e])))}function Yt(e){return function(...n){var t=n[0];return t.stopPropagation(),e?.apply(this,n)}}function _t(e=!1){const n=Xe,t=n.l.u;if(!t)return;let r=()=>q(n.s);if(e){let a=0,i={};const o=ds(()=>{let l=!1;const u=n.s;for(const c in u)u[c]!==i[c]&&(i[c]=u[c],l=!0);return l&&a++,a});r=()=>s(o)}t.b.length&&Jo(()=>{Ia(n,r),Zr(t.b)}),Ds(()=>{const a=k(()=>t.m.map(so));return()=>{for(const i of a)typeof i=="function"&&i()}}),t.a.length&&Ds(()=>{Ia(n,r),Zr(t.a)})}function Ia(e,n){if(e.l.s)for(const t of e.l.s)s(t);n()}function Rr(e,n){var t=e.$$events?.[n.type],r=is(t)?t.slice():t==null?[]:[t];for(var a of r)a.call(this,n)}function la(e,n,t){if(e==null)return n(void 0),t&&t(void 0),Pt;const r=k(()=>e.subscribe(n,t));return r.unsubscribe?()=>r.unsubscribe():r}const tr=[];function $l(e,n){return{subscribe:De(e,n).subscribe}}function De(e,n=Pt){let t=null;const r=new Set;function a(l){if(na(e,l)&&(e=l,t)){const u=!tr.length;for(const c of r)c[1](),tr.push(c,e);if(u){for(let c=0;c<tr.length;c+=2)tr[c][0](tr[c+1]);tr.length=0}}}function i(l){a(l(e))}function o(l,u=Pt){const c=[l,u];return r.add(c),r.size===1&&(t=n(a,i)||Pt),l(e),()=>{r.delete(c),r.size===0&&t&&(t(),t=null)}}return{set:a,update:i,subscribe:o}}function Di(e,n,t){const r=!Array.isArray(e),a=r?[e]:e;if(!a.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const i=n.length<2;return $l(t,(o,l)=>{let u=!1;const c=[];let v=0,h=Pt;const f=()=>{if(v)return;h();const x=n(r?c[0]:c,o,l);i?o(x):h=typeof x=="function"?x:Pt},p=a.map((x,b)=>la(x,_=>{c[b]=_,v&=~(1<<b),u&&f()},()=>{v|=1<<b}));return u=!0,f(),function(){Zr(p),h(),u=!1}})}function qe(e){let n;return la(e,t=>n=t)(),n}let Ur=!1,Us=Symbol();function xe(e,n,t){const r=t[n]??={store:null,source:$(void 0),unsubscribe:Pt};if(r.store!==e&&!(Us in t))if(r.unsubscribe(),r.store=e??null,e==null)r.source.v=void 0,r.unsubscribe=Pt;else{var a=!0;r.unsubscribe=la(e,i=>{a?r.source.v=i:g(r.source,i)}),a=!1}return e&&Us in t?qe(e):s(r.source)}function It(){const e={};function n(){fs(()=>{for(var t in e)e[t].unsubscribe();Za(e,Us,{enumerable:!1,value:!0})})}return[e,n]}function Al(e,n,t){return e.set(t),n}function Cl(e){var n=Ur;try{return Ur=!1,[e(),Ur]}finally{Ur=n}}function ot(e,n,t,r){var a=!_r||(t&xo)!==0,i=(t&So)!==0,o=r,l=!0,u=()=>(l&&(l=!1,o=r),o),c;{var v=Dn in e||io in e;c=or(e,n)?.set??(v&&n in e?L=>e[n]=L:void 0)}var h,f=!1;[h,f]=Cl(()=>e[n]),h===void 0&&r!==void 0&&(h=u(),c&&(a&&ho(),c(h)));var p;if(a?p=()=>{var L=e[n];return L===void 0?u():(l=!0,L)}:p=()=>{var L=e[n];return L!==void 0&&(o=void 0),L===void 0?o:L},a&&(t&Eo)===0)return p;if(c){var x=e.$$legacy;return(function(L,V){return arguments.length>0?((!a||!V||x||f)&&c(V?p():L),L):p()})}var b=!1,_=tt(()=>(b=!1,p()));s(_);var E=Ue;return(function(L,V){if(arguments.length>0){const G=V?s(_):a&&i?ar(L):L;return g(_,G),b=!0,o!==void 0&&(o=G),L}return Jn&&b||(E.f&pn)!==0?_.v:s(_)})}function br(e){Xe===null&&ta(),_r&&Xe.l!==null?Ll(Xe).m.push(e):Ds(()=>{const n=k(e);if(typeof n=="function")return n})}function Pl(e){Xe===null&&ta(),br(()=>()=>k(e))}function Rl(e,n,{bubbles:t=!1,cancelable:r=!1}={}){return new CustomEvent(e,{detail:n,bubbles:t,cancelable:r})}function ca(){const e=Xe;return e===null&&ta(),(n,t,r)=>{const a=e.s.$$events?.[n];if(a){const i=is(a)?a.slice():[a],o=Rl(n,t,r);for(const l of i)l.call(e.x,o);return!o.defaultPrevented}return!0}}function Ll(e){var n=e.l;return n.u??={a:[],b:[],m:[]}}const Il="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Il);Io();const zl=e=>e;function ji(e){const n=e-1;return n*n*n+1}function za(e){const n=typeof e=="string"&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return n?[parseFloat(n[1]),n[2]||"px"]:[e,"px"]}function an(e,{delay:n=0,duration:t=400,easing:r=zl}={}){const a=+getComputedStyle(e).opacity;return{delay:n,duration:t,easing:r,css:i=>`opacity: ${i*a}`}}function Fi(e,{delay:n=0,duration:t=400,easing:r=ji,x:a=0,y:i=0,opacity:o=0}={}){const l=getComputedStyle(e),u=+l.opacity,c=l.transform==="none"?"":l.transform,v=u*(1-o),[h,f]=za(a),[p,x]=za(i);return{delay:n,duration:t,easing:r,css:(b,_)=>`
			transform: ${c} translate(${(1-b)*h}${f}, ${(1-b)*p}${x});
			opacity: ${u-v*_}`}}function ua(e,{delay:n=0,duration:t=400,easing:r=ji,start:a=0,opacity:i=0}={}){const o=getComputedStyle(e),l=+o.opacity,u=o.transform==="none"?"":o.transform,c=1-a,v=l*(1-i);return{delay:n,duration:t,easing:r,css:(h,f)=>`
			transform: ${u} scale(${1-c*f});
			opacity: ${l-v*f}
		`}}const Nl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-arrows-shuffle-2"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 4l3 3l-3 3" /><path d="M18 20l3 -3l-3 -3" /><path d="M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5" /><path d="M3 17h3a5 5 0 0 0 5 -5a5 5 0 0 1 5 -5h5" /></svg>',Ol='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-deezer"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 16.5h2v.5h-2z" /><path d="M8 16.5h2.5v.5h-2.5z" /><path d="M16 17h-2.5v-.5h2.5z" /><path d="M21.5 17h-2.5v-.5h2.5z" /><path d="M21.5 13h-2.5v.5h2.5z" /><path d="M21.5 9.5h-2.5v.5h2.5z" /><path d="M21.5 6h-2.5v.5h2.5z" /><path d="M16 13h-2.5v.5h2.5z" /><path d="M8 13.5h2.5v-.5h-2.5z" /><path d="M8 9.5h2.5v.5h-2.5z" /></svg>',Dl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-compact-down"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 11l8 3l8 -3" /></svg>',jl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-compact-left"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M13 20l-3 -8l3 -8" /></svg>',Fl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-left"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 6l-6 6l6 6" /></svg>',Na='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-disc"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0" /><path d="M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M7 12a5 5 0 0 1 5 -5" /><path d="M12 17a5 5 0 0 0 5 -5" /></svg>',ql='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-grip-horizontal"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M5 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M12 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M12 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M19 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M19 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /></svg>',Bl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-heart"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M19.5 12.572l-7.5 7.428l-7.5 -7.428a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572" /></svg>',Ul='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-heart"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6.979 3.074a6 6 0 0 1 4.988 1.425l.037 .033l.034 -.03a6 6 0 0 1 4.733 -1.44l.246 .036a6 6 0 0 1 3.364 10.008l-.18 .185l-.048 .041l-7.45 7.379a1 1 0 0 1 -1.313 .082l-.094 -.082l-7.493 -7.422a6 6 0 0 1 3.176 -10.215z" /></svg>',Hl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-menu-2"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 6l16 0" /><path d="M4 12l16 0" /><path d="M4 18l16 0" /></svg>',Ts='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-music"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 17a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /><path d="M13 17a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /><path d="M9 17v-13h10v13" /><path d="M9 8h10" /></svg>',Vl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-pause"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z" /><path d="M17 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z" /></svg>',Yl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-player-play"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 4v16l13 -8z" /></svg>',Wl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-play"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 4v16a1 1 0 0 0 1.524 .852l13 -8a1 1 0 0 0 0 -1.704l-13 -8a1 1 0 0 0 -1.524 .852z" /></svg>',Ql='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-skip-back"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M19.496 4.136l-12 7a1 1 0 0 0 0 1.728l12 7a1 1 0 0 0 1.504 -.864v-14a1 1 0 0 0 -1.504 -.864z" /><path d="M4 4a1 1 0 0 1 .993 .883l.007 .117v14a1 1 0 0 1 -1.993 .117l-.007 -.117v-14a1 1 0 0 1 1 -1z" /></svg>',Kl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-skip-forward"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 5v14a1 1 0 0 0 1.504 .864l12 -7a1 1 0 0 0 0 -1.728l-12 -7a1 1 0 0 0 -1.504 .864z" /><path d="M20 4a1 1 0 0 1 .993 .883l.007 .117v14a1 1 0 0 1 -1.993 .117l-.007 -.117v-14a1 1 0 0 1 1 -1z" /></svg>',Xl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-playlist"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0" /><path d="M17 17v-13h4" /><path d="M13 5h-10" /><path d="M3 9l10 0" /><path d="M9 13h-6" /></svg>',Gl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-radio"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3l-9.371 3.749a1 1 0 0 0 -.629 .928v11.323a1 1 0 0 0 1 1h14a1 1 0 0 0 1 -1v-11a1 1 0 0 0 -1 -1h-14.5" /><path d="M4 12h16" /><path d="M7 12v-2" /><path d="M17 16v.01" /><path d="M13 16v.01" /></svg>',Zl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-refresh"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4" /><path d="M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4" /></svg>',Jl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-repeat"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 12v-3a3 3 0 0 1 3 -3h13m-3 -3l3 3l-3 3" /><path d="M20 12v3a3 3 0 0 1 -3 3h-13m3 3l-3 -3l3 -3" /></svg>',ec='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-search"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0" /><path d="M21 21l-6 -6" /></svg>',tc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-settings"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z" /><path d="M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /></svg>',nc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-trash"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 7l16 0" /><path d="M10 11l0 6" /><path d="M14 11l0 6" /><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12" /><path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3" /></svg>',rc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 8a5 5 0 0 1 0 8" /><path d="M17.7 5a9 9 0 0 1 0 14" /><path d="M6 15h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l3.5 -4.5a.8 .8 0 0 1 1.5 .5v14a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5" /></svg>',sc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume-2"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 8a5 5 0 0 1 0 8" /><path d="M6 15h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l3.5 -4.5a.8 .8 0 0 1 1.5 .5v14a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5" /></svg>',ac='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume-3"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 15h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l3.5 -4.5a.8 .8 0 0 1 1.5 .5v14a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5" /><path d="M16 10l4 4m0 -4l-4 4" /></svg>',ic='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume-off"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 8a5 5 0 0 1 1.912 4.934m-1.377 2.602a5 5 0 0 1 -.535 .464" /><path d="M17.7 5a9 9 0 0 1 2.362 11.086m-1.676 2.299a9 9 0 0 1 -.686 .615" /><path d="M9.069 5.054l.431 -.554a.8 .8 0 0 1 1.5 .5v2m0 4v8a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l1.294 -1.664" /><path d="M3 3l18 18" /></svg>',oc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-x"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 6l-12 12" /><path d="M6 6l12 12" /></svg>',lc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-device-floppy"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2" /><path d="M12 14m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0" /><path d="M14 4l0 4l-6 0l0 -4" /></svg>',cc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-file-pencil"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3v4a1 1 0 0 0 1 1h4" /><path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z" /><path d="M10 18l5 -5a1.414 1.414 0 0 0 -2 -2l-5 5v2h2z" /></svg>',Oa='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-plus"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 5l0 14" /><path d="M5 12l14 0" /></svg>',uc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-circle-check"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0" /><path d="M9 12l2 2l4 -4" /></svg>',vc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-dots"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /></svg>',dc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-sort-descending"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 6l9 0" /><path d="M4 12l7 0" /><path d="M4 18l7 0" /><path d="M15 15l3 3l3 -3" /><path d="M18 6l0 12" /></svg>',fc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-sort-ascending"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 6l7 0" /><path d="M4 12l7 0" /><path d="M4 18l9 0" /><path d="M15 9l3 -3l3 3" /><path d="M18 6l0 12" /></svg>',y={ARTISTS:Ts,ALBUMS:Na,GENRES:Ts,PLAYLISTS:Xl,RADIO:Gl,SEARCH:ec,PLAY:Wl,PLAY_OUTLINE:Yl,PAUSE:Vl,PREVIOUS:Ql,NEXT:Kl,SHUFFLE:Nl,REPEAT:Jl,VOLUME_FULL:rc,VOLUME_MEDIUM:sc,VOLUME_MUTE:ac,VOLUME_OFF:ic,HEART:Bl,HEART_FILLED:Ul,SYNC:Zl,SETTINGS:tc,CLOSE:oc,MENU:Hl,BACK:Fl,BACK_COMPACT:jl,CHEVRON_DOWN:Dl,DRAG_HANDLE:ql,REMOVE:nc,DEEZER:Ol,SAVE:lc,EDIT:cc,ADD:Oa,ACCEPT:uc,DOTS:vc,ADD_TO_PLAYLIST:Oa,ALBUM_LINK:Na,ARTIST_LINK:Ts,SORT_DESC:dc,SORT_ASC:fc};function fr(e){if(!e||!e.image)return null;if(e.image.startsWith("http"))return e.image;let n="";return e.image==="local"?n=`${e.name}.jpg`:n=e.image,`/imagesw/radio-logos/thumbs/${encodeURIComponent(n)}`}function Da(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}function hc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var $s={exports:{}},As={exports:{}},ja;function pc(){return ja||(ja=1,(function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(t,r){return t<<r|t>>>32-r},rotr:function(t,r){return t<<32-r|t>>>r},endian:function(t){if(t.constructor==Number)return n.rotl(t,8)&16711935|n.rotl(t,24)&4278255360;for(var r=0;r<t.length;r++)t[r]=n.endian(t[r]);return t},randomBytes:function(t){for(var r=[];t>0;t--)r.push(Math.floor(Math.random()*256));return r},bytesToWords:function(t){for(var r=[],a=0,i=0;a<t.length;a++,i+=8)r[i>>>5]|=t[a]<<24-i%32;return r},wordsToBytes:function(t){for(var r=[],a=0;a<t.length*32;a+=8)r.push(t[a>>>5]>>>24-a%32&255);return r},bytesToHex:function(t){for(var r=[],a=0;a<t.length;a++)r.push((t[a]>>>4).toString(16)),r.push((t[a]&15).toString(16));return r.join("")},hexToBytes:function(t){for(var r=[],a=0;a<t.length;a+=2)r.push(parseInt(t.substr(a,2),16));return r},bytesToBase64:function(t){for(var r=[],a=0;a<t.length;a+=3)for(var i=t[a]<<16|t[a+1]<<8|t[a+2],o=0;o<4;o++)a*8+o*6<=t.length*8?r.push(e.charAt(i>>>6*(3-o)&63)):r.push("=");return r.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/ig,"");for(var r=[],a=0,i=0;a<t.length;i=++a%4)i!=0&&r.push((e.indexOf(t.charAt(a-1))&Math.pow(2,-2*i+8)-1)<<i*2|e.indexOf(t.charAt(a))>>>6-i*2);return r}};As.exports=n})()),As.exports}var Cs,Fa;function qa(){if(Fa)return Cs;Fa=1;var e={utf8:{stringToBytes:function(n){return e.bin.stringToBytes(unescape(encodeURIComponent(n)))},bytesToString:function(n){return decodeURIComponent(escape(e.bin.bytesToString(n)))}},bin:{stringToBytes:function(n){for(var t=[],r=0;r<n.length;r++)t.push(n.charCodeAt(r)&255);return t},bytesToString:function(n){for(var t=[],r=0;r<n.length;r++)t.push(String.fromCharCode(n[r]));return t.join("")}}};return Cs=e,Cs}var Ps,Ba;function _c(){if(Ba)return Ps;Ba=1,Ps=function(t){return t!=null&&(e(t)||n(t)||!!t._isBuffer)};function e(t){return!!t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function n(t){return typeof t.readFloatLE=="function"&&typeof t.slice=="function"&&e(t.slice(0,0))}return Ps}var Ua;function gc(){return Ua||(Ua=1,(function(){var e=pc(),n=qa().utf8,t=_c(),r=qa().bin,a=function(i,o){i.constructor==String?o&&o.encoding==="binary"?i=r.stringToBytes(i):i=n.stringToBytes(i):t(i)?i=Array.prototype.slice.call(i,0):!Array.isArray(i)&&i.constructor!==Uint8Array&&(i=i.toString());for(var l=e.bytesToWords(i),u=i.length*8,c=1732584193,v=-271733879,h=-1732584194,f=271733878,p=0;p<l.length;p++)l[p]=(l[p]<<8|l[p]>>>24)&16711935|(l[p]<<24|l[p]>>>8)&4278255360;l[u>>>5]|=128<<u%32,l[(u+64>>>9<<4)+14]=u;for(var x=a._ff,b=a._gg,_=a._hh,E=a._ii,p=0;p<l.length;p+=16){var L=c,V=v,G=h,H=f;c=x(c,v,h,f,l[p+0],7,-680876936),f=x(f,c,v,h,l[p+1],12,-389564586),h=x(h,f,c,v,l[p+2],17,606105819),v=x(v,h,f,c,l[p+3],22,-1044525330),c=x(c,v,h,f,l[p+4],7,-176418897),f=x(f,c,v,h,l[p+5],12,1200080426),h=x(h,f,c,v,l[p+6],17,-1473231341),v=x(v,h,f,c,l[p+7],22,-45705983),c=x(c,v,h,f,l[p+8],7,1770035416),f=x(f,c,v,h,l[p+9],12,-1958414417),h=x(h,f,c,v,l[p+10],17,-42063),v=x(v,h,f,c,l[p+11],22,-1990404162),c=x(c,v,h,f,l[p+12],7,1804603682),f=x(f,c,v,h,l[p+13],12,-40341101),h=x(h,f,c,v,l[p+14],17,-1502002290),v=x(v,h,f,c,l[p+15],22,1236535329),c=b(c,v,h,f,l[p+1],5,-165796510),f=b(f,c,v,h,l[p+6],9,-1069501632),h=b(h,f,c,v,l[p+11],14,643717713),v=b(v,h,f,c,l[p+0],20,-373897302),c=b(c,v,h,f,l[p+5],5,-701558691),f=b(f,c,v,h,l[p+10],9,38016083),h=b(h,f,c,v,l[p+15],14,-660478335),v=b(v,h,f,c,l[p+4],20,-405537848),c=b(c,v,h,f,l[p+9],5,568446438),f=b(f,c,v,h,l[p+14],9,-1019803690),h=b(h,f,c,v,l[p+3],14,-187363961),v=b(v,h,f,c,l[p+8],20,1163531501),c=b(c,v,h,f,l[p+13],5,-1444681467),f=b(f,c,v,h,l[p+2],9,-51403784),h=b(h,f,c,v,l[p+7],14,1735328473),v=b(v,h,f,c,l[p+12],20,-1926607734),c=_(c,v,h,f,l[p+5],4,-378558),f=_(f,c,v,h,l[p+8],11,-2022574463),h=_(h,f,c,v,l[p+11],16,1839030562),v=_(v,h,f,c,l[p+14],23,-35309556),c=_(c,v,h,f,l[p+1],4,-1530992060),f=_(f,c,v,h,l[p+4],11,1272893353),h=_(h,f,c,v,l[p+7],16,-155497632),v=_(v,h,f,c,l[p+10],23,-1094730640),c=_(c,v,h,f,l[p+13],4,681279174),f=_(f,c,v,h,l[p+0],11,-358537222),h=_(h,f,c,v,l[p+3],16,-722521979),v=_(v,h,f,c,l[p+6],23,76029189),c=_(c,v,h,f,l[p+9],4,-640364487),f=_(f,c,v,h,l[p+12],11,-421815835),h=_(h,f,c,v,l[p+15],16,530742520),v=_(v,h,f,c,l[p+2],23,-995338651),c=E(c,v,h,f,l[p+0],6,-198630844),f=E(f,c,v,h,l[p+7],10,1126891415),h=E(h,f,c,v,l[p+14],15,-1416354905),v=E(v,h,f,c,l[p+5],21,-57434055),c=E(c,v,h,f,l[p+12],6,1700485571),f=E(f,c,v,h,l[p+3],10,-1894986606),h=E(h,f,c,v,l[p+10],15,-1051523),v=E(v,h,f,c,l[p+1],21,-2054922799),c=E(c,v,h,f,l[p+8],6,1873313359),f=E(f,c,v,h,l[p+15],10,-30611744),h=E(h,f,c,v,l[p+6],15,-1560198380),v=E(v,h,f,c,l[p+13],21,1309151649),c=E(c,v,h,f,l[p+4],6,-145523070),f=E(f,c,v,h,l[p+11],10,-1120210379),h=E(h,f,c,v,l[p+2],15,718787259),v=E(v,h,f,c,l[p+9],21,-343485551),c=c+L>>>0,v=v+V>>>0,h=h+G>>>0,f=f+H>>>0}return e.endian([c,v,h,f])};a._ff=function(i,o,l,u,c,v,h){var f=i+(o&l|~o&u)+(c>>>0)+h;return(f<<v|f>>>32-v)+o},a._gg=function(i,o,l,u,c,v,h){var f=i+(o&u|l&~u)+(c>>>0)+h;return(f<<v|f>>>32-v)+o},a._hh=function(i,o,l,u,c,v,h){var f=i+(o^l^u)+(c>>>0)+h;return(f<<v|f>>>32-v)+o},a._ii=function(i,o,l,u,c,v,h){var f=i+(l^(o|~u))+(c>>>0)+h;return(f<<v|f>>>32-v)+o},a._blocksize=16,a._digestsize=16,$s.exports=function(i,o){if(i==null)throw new Error("Illegal argument "+i);var l=e.wordsToBytes(a(i,o));return o&&o.asBytes?l:o&&o.asString?r.bytesToString(l):e.bytesToHex(l)}})()),$s.exports}var mc=gc();const bc=hc(mc),Ha=De("Disconnected"),Hs=De(null);let Rs;function ze(e,n="info"){Hs.set({text:e,type:n}),Rs&&clearTimeout(Rs),Rs=setTimeout(()=>{Hs.set(null)},3e3)}const ns=De({isOpen:!1,title:"",message:"",confirmLabel:"Confirm",cancelLabel:"Cancel",onConfirm:null,type:"confirm",inputValue:"",placeholder:""});function $n({title:e="Confirm Action",message:n="Are you sure?",confirmLabel:t="Confirm",cancelLabel:r="Cancel",type:a="confirm",inputValue:i="",placeholder:o="",onConfirm:l=()=>{}}){ns.set({isOpen:!0,title:e,message:n,confirmLabel:t,cancelLabel:r,type:a,inputValue:i,placeholder:o,onConfirm:l})}function Ls(){ns.set({isOpen:!1,title:"",message:"",confirmLabel:"",cancelLabel:"",onConfirm:null,type:"confirm",inputValue:"",placeholder:""})}const ct=De({state:"stop",volume:50,elapsed:0,duration:0,random:!1,repeat:!1,bitrate:0,format:"",song:0,songid:0}),Gt=De({title:"Not Playing",artist:"",album:"",file:"",stationName:null,id:null,pos:null}),rs=De(!1),Qr=De(!1),Vs=De(!1),Ys=De(!1),Ct=De("library"),jr=De(null),Vt=De(!1),wc=localStorage.getItem("sidebarCollapsed")==="true",Ws=De(wc);Ws.subscribe(e=>{typeof localStorage<"u"&&localStorage.setItem("sidebarCollapsed",String(e))});const Rn=De([]),va=De([]),ir=De([]),En=De(new Set),it=De(!1),jt=De([{view:"root"}]),Bn=De([]),qi=De(0),Mr=De(""),Bi=De({});function yc(e,n){Bi.update(t=>({...t,[e]:n}))}function kc(e){return qe(Bi)[e]||0}const da=De({isOpen:!1,track:null,context:{type:"general",playlistName:null,index:null},x:0,y:0,triggerRect:null});function xc(){if(typeof navigator<"u"&&navigator.vibrate)try{navigator.vibrate(70)}catch{}}function Lr(e,n,t={}){if(!n&&t.type!=="playlist-card")return;xc();let r=0,a=0,i=null,o=e.currentTarget;!o&&e.target&&e.target.closest&&(o=e.target.closest("button")||e.target),o&&o.getBoundingClientRect&&(i=o.getBoundingClientRect());const l=e.detail?.originalEvent||e;l.touches&&l.touches.length>0?(r=l.touches[0].clientX,a=l.touches[0].clientY):l.clientX&&(r=l.clientX,a=l.clientY);const u={type:"general",playlistName:null,index:null,...t};da.set({isOpen:!0,track:n,context:u,x:r,y:a,triggerRect:i})}function $t(){da.set({isOpen:!1,track:null,context:{},x:0,y:0,triggerRect:null})}let Qs=null,Ks=null;function Ec(e){Ks=e}function An(e,n=null){n&&(Qs=n),Ks?Ks(e,n):console.warn("Router callback not set!")}function Sc(){const e=Qs;return Qs=null,e}function Mc(){window.history.back()}function hr(e,n=[],t=null){if(!e||!e.file)return"/images/default_cover.png";if(Ui(e.file)||e.genre==="Radio")return e.image?fr(e):Hi(e,n,t)||"/images/radio_placeholder.png";let r=e.file.startsWith("/")?e.file.slice(1):e.file;return`/coverart.php/${encodeURI(r)}`}function Ir(e,n="sm",t=[],r=null){if(!e||e.file&&(Ui(e.file)||e.genre==="Radio"||Array.isArray(e)))return e&&e.image?fr(e):Hi(e,t,r)||"/images/radio_icon.png";if(!e.file)return"/images/default_icon.png";if(e.thumbHash){const a=n==="md"?"":"_sm";return`/imagesw/thmcache/${e.thumbHash}${a}.jpg`}try{const a=e.file.lastIndexOf("/"),i=a===-1?".":e.file.substring(0,a);return`/imagesw/thmcache/${bc(i)}${n==="md"?"":"_sm"}.jpg`}catch{let i=e.file.startsWith("/")?e.file.slice(1):e.file;return`/coverart.php/${encodeURI(i)}`}}function Ui(e){return e?e.startsWith("http")||e.includes("://")||e.includes("RADIO"):!1}function Hi(e,n,t){const r=u=>(u||"").toString().toLowerCase().replace(/[^a-z0-9]/g,""),a=r(e?.title),i=r(e?.stationName),o=r(t);if(n&&n.length>0){const u=n.find(c=>{const v=r(c.name);return v?v===i||v===o||a&&v===a||a&&a.includes(v)&&v.length>3:!1});if(u)return fr(u)}const l=e?.stationName||t;return l?fr({name:l,image:"local"}):null}Di([Gt,Rn,jr],([e,n,t])=>hr(e,n,t));Di(Gt,e=>!e||!e.file||e.file.startsWith("http")?null:`/coverart.php/${encodeURI(e.file)}`);const Tc=localStorage.getItem("alarmTime")||"08:00",$c=localStorage.getItem("alarmEnabled")==="true",Ac=De(Tc),Cc=De($c);Ac.subscribe(e=>localStorage.setItem("alarmTime",e));Cc.subscribe(e=>localStorage.setItem("alarmEnabled",String(e)));const Ke={NAME:"MoodePlayerDB",STORE_NAME:"music",VERSION:3},Pc={SYNC:"/wave-api.php",STATIONS:e=>"/wave-api.php?action=stations",COVER_ART:e=>`/coverart.php?u=${encodeURIComponent(e)}`,RADIO_LOGOS:e=>`/imagesw/radio-logos/thumbs/${e}`},Sn={open(){return new Promise((e,n)=>{const t=indexedDB.open(Ke.NAME,Ke.VERSION);t.onupgradeneeded=r=>{const a=r.target.result,i=r.target.transaction;let o;a.objectStoreNames.contains(Ke.STORE_NAME)?o=i.objectStore(Ke.STORE_NAME):o=a.createObjectStore(Ke.STORE_NAME,{keyPath:"file"}),o.indexNames.contains("artist")||o.createIndex("artist","artist",{unique:!1}),o.indexNames.contains("album")||o.createIndex("album","album",{unique:!1}),o.indexNames.contains("genre")||o.createIndex("genre","genre",{unique:!1}),o.indexNames.contains("album_artist")||o.createIndex("album_artist","album_artist",{unique:!1})},t.onsuccess=()=>e(t.result),t.onerror=()=>n(t.error)})},async clear(){const e=await this.open();return new Promise((n,t)=>{const r=e.transaction(Ke.STORE_NAME,"readwrite");r.objectStore(Ke.STORE_NAME).clear(),r.oncomplete=()=>n(),r.onerror=()=>t(r.error)})},async bulkAdd(e){const n=await this.open();return new Promise((t,r)=>{const a=n.transaction(Ke.STORE_NAME,"readwrite"),i=a.objectStore(Ke.STORE_NAME);e.forEach(o=>i.put(o)),a.oncomplete=()=>t(),a.onerror=()=>r(a.error)})},async getFilesMap(e){if(!e||e.length===0)return new Map;const n=await this.open();return new Promise(t=>{const a=n.transaction(Ke.STORE_NAME,"readonly").objectStore(Ke.STORE_NAME),i=new Map;let o=0;e.forEach(l=>{const u=l.normalize("NFC").trim(),c=a.get(u);c.onsuccess=v=>{v.target.result&&i.set(l,v.target.result),o++,o===e.length&&t(i)},c.onerror=()=>{o++,o===e.length&&t(i)}})})},async getArtists(){const e=await this.open();return new Promise((n,t)=>{const a=e.transaction(Ke.STORE_NAME,"readonly").objectStore(Ke.STORE_NAME),i=new Map,o=a.openCursor();o.onsuccess=l=>{const u=l.target.result;if(u){const c=u.value,v=c.album_artist||c.artist;v&&!i.has(v)&&i.set(v,{name:v,file:c.file,thumbHash:c.thumbHash}),u.continue()}else{const c=Array.from(i.values()).sort((v,h)=>v.name.localeCompare(h.name,void 0,{sensitivity:"base"}));n(c)}},o.onerror=()=>t(o.error)})},async getAlbums(){const e=await this.open();return new Promise((n,t)=>{const a=e.transaction(Ke.STORE_NAME,"readonly").objectStore(Ke.STORE_NAME).index("album"),i=[],o=a.openCursor(null,"nextunique");o.onsuccess=l=>{const u=l.target.result;if(u){const c=u.value;i.push({name:c.album,artist:c.album_artist||c.artist,file:c.file,thumbHash:c.thumbHash,qualityBadge:c.qualityBadge,year:c.year||0}),u.continue()}else n(i)},o.onerror=()=>t(o.error)})},async getArtistAlbums(e){if(!e)return[];const n=await this.open(),t=e.normalize("NFC").trim();return new Promise((r,a)=>{const o=n.transaction(Ke.STORE_NAME,"readonly").objectStore(Ke.STORE_NAME),l=new Promise(c=>{o.indexNames.contains("album_artist")?o.index("album_artist").getAll(IDBKeyRange.only(t)).onsuccess=v=>c(v.target.result):c([])}),u=new Promise(c=>{o.index("artist").getAll(IDBKeyRange.only(t)).onsuccess=v=>c(v.target.result)});Promise.all([l,u]).then(([c,v])=>{const h=[...c,...v],f=[],p=new Set;h.forEach(x=>{p.has(x.album)||(p.add(x.album),f.push({name:x.album,artist:x.album_artist||x.artist,file:x.file,thumbHash:x.thumbHash,qualityBadge:x.qualityBadge,year:x.year||0}))}),r(f)}).catch(c=>a(c))})},async getAlbumTracks(e,n=null){const t=await this.open(),r=e.normalize("NFC").trim(),a=n?n.normalize("NFC").trim():null;return console.log(`[DB] getAlbumTracks called. Album: "${r}", FilterArtist: "${a}"`),new Promise((i,o)=>{const u=t.transaction(Ke.STORE_NAME,"readonly").objectStore(Ke.STORE_NAME).index("album"),c=IDBKeyRange.only(r),v=u.getAll(c);v.onsuccess=()=>{let h=v.result;if(console.log(`[DB] Found ${h.length} raw tracks for album "${r}"`),a){const f=h.length;h=h.filter(p=>{const x=(p.artist||"").normalize("NFC").trim(),b=(p.album_artist||"").normalize("NFC").trim();return x===a||b===a}),console.log(`[DB] After artist filter: ${h.length} tracks (Removed ${f-h.length})`)}else console.log("[DB] No artist filter provided. Returning all tracks.");h.sort((f,p)=>{const x=parseInt(f.disc||1),b=parseInt(p.disc||1);if(x!==b)return x-b;const _=parseInt(f.track||0),E=parseInt(p.track||0);return _-E}),i(h)},v.onerror=()=>o(v.error)})},async getGenres(){const e=await this.open();return new Promise((n,t)=>{const a=e.transaction(Ke.STORE_NAME,"readonly").objectStore(Ke.STORE_NAME).index("genre"),i=[],o=a.openKeyCursor(null,"nextunique");o.onsuccess=l=>{const u=l.target.result;u?(i.push(u.key),u.continue()):n(i)},o.onerror=()=>t(o.error)})},async getGenreTracks(e){const n=await this.open(),t=e.normalize("NFC").trim();return new Promise((r,a)=>{const l=n.transaction(Ke.STORE_NAME,"readonly").objectStore(Ke.STORE_NAME).index("genre").getAll(IDBKeyRange.only(t));l.onsuccess=()=>r(l.result),l.onerror=()=>a(l.error)})},async search(e){if(!e)return[];const n=e.toLowerCase().normalize("NFC").trim(),t=await this.open();return new Promise((r,a)=>{const o=t.transaction(Ke.STORE_NAME,"readonly").objectStore(Ke.STORE_NAME),l=[],u=100,c=o.openCursor();c.onsuccess=v=>{const h=v.target.result;if(h){const f=h.value;if((f.title&&f.title.toLowerCase().includes(n)||f.artist&&f.artist.toLowerCase().includes(n)||f.album&&f.album.toLowerCase().includes(n)||f.album_artist&&f.album_artist.toLowerCase().includes(n))&&l.push(f),l.length>=u){r(l);return}h.continue()}else r(l)},c.onerror=()=>a(c.error)})}};var Rc=T('<div class="skeleton svelte-tl058d"></div>');function Pn(e,n){let t=ot(n,"width",8,"100%"),r=ot(n,"height",8,"20px"),a=ot(n,"radius",8,"4px"),i=ot(n,"style",8,"");var o=Rc();de(()=>Ze(o,`width: ${t()??""}; height: ${r()??""}; border-radius: ${a()??""}; ${i()??""}`)),w(e,o)}var Lc=T('<div class="skel svelte-1b8que2"><!></div>'),Ic=T('<img loading="lazy"/>'),zc=T('<div class="loader svelte-1b8que2"><!> <!> <!></div>');function Kn(e,n){ft(n,!1);let t=ot(n,"src",8),r=ot(n,"alt",8,""),a=ot(n,"radius",8,"0px");const i=ca();let o=$("loading");function l(){g(o,"loaded")}function u(_){i("error",_),g(o,"error")}X(()=>q(t()),()=>{t()?g(o,"loading"):g(o,"error")}),Bt(),_t();var c=zc(),v=d(c);{var h=_=>{var E=Lc(),L=d(E);Pn(L,{width:"100%",height:"100%",get radius(){return a()}}),wt(2,E,()=>an,()=>({duration:200})),w(_,E)};j(v,_=>{s(o)==="loading"&&_(h)})}var f=m(v,2);{var p=_=>{var E=Ic();let L;de(()=>{bt(E,"src",t()),bt(E,"alt",r()),Ze(E,`border-radius: ${a()??""}`),L=Fe(E,1,"svelte-1b8que2",null,L,{vis:s(o)==="loaded"})}),C("load",E,l),C("error",E,u),w(_,E)};j(f,_=>{t()&&s(o)!=="error"&&_(p)})}var x=m(f,2);{var b=_=>{var E=We(),L=$e(E);Wr(L,n,"fallback",{}),w(_,E)};j(x,_=>{s(o)==="error"&&_(b)})}de(()=>Ze(c,`border-radius: ${a()??""}`)),w(e,c),ht()}const lr={DEFAULT_IP:typeof window<"u"?window.location.hostname:"localhost",get MOODE_IP(){try{return typeof localStorage<"u"?localStorage.getItem("moode_ip")||this.DEFAULT_IP:this.DEFAULT_IP}catch{return this.DEFAULT_IP}},setMoodeIp(e){if(typeof localStorage<"u"){const n=e?e.trim():"";n&&localStorage.setItem("moode_ip",n)}}};class Nc{constructor(){this.socket=null,this.queue=[],this.isProcessing=!1,this.reconnectTimer=null,this.watchdogTimer=null,this._buffer=""}get isConnected(){return this.socket&&this.socket.readyState===WebSocket.OPEN}connect(){if(this.socket&&(this.socket.readyState===WebSocket.CONNECTING||this.socket.readyState===WebSocket.OPEN))return;this.reconnectTimer&&clearTimeout(this.reconnectTimer);let n=lr.MOODE_IP||window.location.hostname;n=n.replace(/^https?:\/\//,"").split(":")[0].split("/")[0];const t=lr.WS_PORT||"8080",r=`ws://${n}:${t}`;console.log("[MPD] Connecting to:",r);try{this.socket=new WebSocket(r,["binary"])}catch(a){console.error("[MPD] Connection Error:",a),this.reconnectTimer=setTimeout(()=>this.connect(),5e3);return}this.socket.onopen=()=>{console.log("[MPD] Connected"),Ha.set("Connected"),ze("Connected to Moode","success"),this._processQueue()},this.socket.onmessage=a=>this._handleMessage(a),this.socket.onclose=a=>{console.warn("[MPD] Socket closed",a.code,a.reason),Ha.set("Disconnected"),this._cleanup(),this.reconnectTimer=setTimeout(()=>this.connect(),3e3)},this.socket.onerror=a=>{console.error("[MPD] Socket error",a)}}send(n){return new Promise((t,r)=>{this.queue.push({cmd:n,resolve:t,reject:r}),this._processQueue()})}_cleanup(){for(this.isProcessing=!1,this._buffer="",this.watchdogTimer&&clearTimeout(this.watchdogTimer);this.queue.length>0;){const{reject:n}=this.queue.shift();n(new Error("Connection lost"))}}async _processQueue(){if(this.isProcessing||this.queue.length===0||!this.isConnected)return;this.isProcessing=!0;const{cmd:n}=this.queue[0];this.watchdogTimer&&clearTimeout(this.watchdogTimer),this.watchdogTimer=setTimeout(()=>{console.error("[MPD] Watchdog timeout"),this.socket&&this.socket.close()},2e4);try{const t=n.endsWith(`
`)?n:n+`
`;this.socket.send(new TextEncoder().encode(t))}catch(t){console.error("[MPD] Send error",t),this._cleanup()}}async _handleMessage(n){let t=n.data;t instanceof Blob&&(t=await t.text()),this.watchdogTimer&&(clearTimeout(this.watchdogTimer),this.watchdogTimer=null),this._buffer+=t;const r=this._buffer.endsWith(`
OK
`)||this._buffer===`OK
`,a=this._buffer.startsWith("ACK");if(r||a){const i=this._buffer;this._buffer="";const o=this.queue.shift();if(this.isProcessing=!1,o)if(a)console.error(`[MPD] Error: ${i.trim()}`),o.reject(new Error(i.trim()));else{const l=i.replace(/\nOK\n$/,"").replace(/^OK\n$/,"");o.resolve(l)}this._processQueue()}else{if(!this.queue.length)return;this.watchdogTimer=setTimeout(()=>{console.error("[MPD] Watchdog timeout receiving large data"),this.socket&&this.socket.close()},2e4)}}}const we=new Nc,Wt={parseKeyValue(e){const n={};if(!e)return n;const t=e.split(`
`);for(const r of t){const a=r.indexOf(": ");if(a===-1)continue;const i=r.substring(0,a).toLowerCase(),o=r.substring(a+2);n[i]=o}return n},parseStatus(e){const n=this.parseKeyValue(e);let t="";if(n.audio){const r=n.audio.split(":");r[1]&&(t=`${r[1]}-bit`)}return{state:n.state||"stop",volume:parseInt(n.volume)||0,elapsed:parseFloat(n.elapsed)||0,duration:parseFloat(n.duration)||0,random:n.random==="1",repeat:n.repeat==="1",song:parseInt(n.song)||0,songId:parseInt(n.songid)||-1,playlistLength:parseInt(n.playlistlength)||0,bitrate:parseInt(n.bitrate)||0,format:t,playlistVersion:parseInt(n.playlist)||0}},parseCurrentSong(e){const n=this.parseKeyValue(e);return this._normalizeTrack(n)},parsePlaylists(e){const n=e.split(`
`),t=[];let r=null;for(const a of n)a.startsWith("playlist: ")?(r&&t.push(r),r={playlist:a.substring(10)}):a.startsWith("Last-Modified: ")&&r&&(r["last-modified"]=a.substring(15));return r&&t.push(r),t.map(a=>({name:a.playlist,lastModified:a["last-modified"]}))},parseTracks(e){const n=[];let t=null,r=0,a=e.indexOf(`
`,r);for(;a!==-1;){const i=e.substring(r,a),o=i.indexOf(": ");if(o!==-1){const l=i.substring(0,o).toLowerCase(),u=i.substring(o+2);l==="file"?(t&&n.push(this._normalizeTrack(t)),t={file:u}):t&&(t[l]=u)}r=a+1,a=e.indexOf(`
`,r)}return t&&n.push(this._normalizeTrack(t)),n},_normalizeTrack(e){const n=e.file||e.File||"",t=e.Title||e.title||e.Name||e.name||n.split("/").pop()||"Unknown";return{file:n,title:t,artist:e.Artist||e.artist||"Unknown Artist",album:e.Album||e.album||"Unknown Album",genre:e.Genre||e.genre||"Unknown",time:parseFloat(e.Time||e.time||0),track:e.Track||e.track||"",id:e.Id||e.id,pos:e.Pos||e.pos||null,stationName:e.name||e.Name||null}}},Oc=1e3,Dc=250;let Kr=null,Tr=null,Xr=0,zn=1,ss=!0,hn=!1,On=0,nr=null;function Gr(e){return e?String(e).normalize("NFC").replace(/\\/g,"\\\\").replace(/"/g,'\\"'):""}function jc(){Fc(),ss=!0,hn=!1,On=0,it.set(!1),en(),Kr=setInterval(()=>{we.isConnected&&!we.isProcessing&&en()},Oc)}function Fc(){Kr&&(clearInterval(Kr),Kr=null),fa()}async function en(){try{const e=await we.send("status"),n=await we.send("currentsong"),t=Wt.parseStatus(e),r=Wt.parseCurrentSong(n);Bc(t,r);const a=qe(qi);if(qe(it))return;(t.playlistLength>0&&t.playlistVersion!==a||t.playlistLength>0&&qe(Bn).length===0)&&qc(t.playlistVersion)}catch{}}async function qc(e){if(!qe(it))try{const n=await we.send("playlistinfo");if(qe(it))return;const t=Wt.parseTracks(n),r=t.map(o=>o.file).filter(o=>o&&!o.startsWith("http"));let a=new Map;if(r.length>0)try{a=await Sn.getFilesMap(r)}catch(o){console.warn("Failed to hydrate queue from DB",o)}const i=t.map(o=>{const l=(o.file||"").normalize("NFC"),u=a.get(l);return u?{...o,thumbHash:u.thumbHash,qualityBadge:u.qualityBadge,title:o.title||u.title,artist:o.artist||u.artist,album:o.album||u.album,_uid:String(o.id||o.pos+o.file)}:{...o,_uid:String(o.id||o.pos+o.file)}});Bn.set(i),qi.set(e)}catch(n){console.error("Queue sync error",n)}}function Bc(e,n){const t=qe(Gt),r=qe(Rn),a=n.file&&n.file.startsWith("http");if(a){const i=c=>(c||"").toString().toLowerCase().replace(/[^a-z0-9]/g,""),o=i(n.file),l=i(n.title),u=r.find(c=>{const v=i(c.station||c.file||c.url||(Array.isArray(c)?c[1]:"")),h=i(c.name||(Array.isArray(c)?c[0]:""));return v&&o.includes(v)||h&&l.includes(h)});u?n.stationName=u.name||u[0]:t.stationName&&t.file===n.file&&(n.stationName=t.stationName)}Gt.set(n),ct.update(i=>{const o=e.state==="play",l=performance.now();if(e.state==="pause"||i.state==="pause")return Hr(!1),l<On?i:e;if(n.file!==t.file||ss)return ss=!1,hn=!1,zn=1,a&&(e.elapsed=0),Hr(o&&!a),e;if(l<On)return i;if(hn)return hn=!1,zn=1,Hr(o&&!a),e;if(o&&!a){const u=e.elapsed-i.elapsed;if(Math.abs(u)>2)return zn=1,e;if(Math.abs(u)<.05)zn=1;else{let v=u/1.5;zn=Math.max(.5,Math.min(1.5,1+v))}return{...e,elapsed:i.elapsed}}return Hr(!1),e})}function Hr(e){e?Xs():fa()}function Xs(){Tr||ss||(Xr=performance.now(),Tr=setInterval(()=>{const e=performance.now();let n=(e-Xr)/1e3;n>2&&(n=0),Xr=e,ct.update(t=>{if(t.state!=="play")return t;let r=t.elapsed+n*zn;return t.duration>0&&r>t.duration&&(r=t.duration),{...t,elapsed:r}})},Dc))}function fa(){Tr&&(clearInterval(Tr),Tr=null),zn=1,Xr=0}async function Va(e,n=!1){if(!e||e.length===0)return;it.set(!0),hn=!0;const t=5;try{for(let r=0;r<e.length;r+=t){const a=e.slice(r,r+t),i=["command_list_begin"];a.forEach(o=>{i.push(`add "${Gr(o.file)}"`)}),i.push("command_list_end"),await we.send(i.join(`
`))}n?(await we.send("play 0"),ze(`Playing ${e.length} tracks`,"success")):ze(`Added ${e.length} tracks`,"success")}catch(r){console.error("[Player] Bulk Action Failed:",r),ze("Error adding tracks","error")}finally{setTimeout(()=>{it.set(!1),en()},1500)}}const Qt={async togglePlay(){const n=qe(ct).state==="play";On=performance.now()+800,ct.update(t=>{const r=n?"pause":"play";return r==="play"?Xs():fa(),{...t,state:r}}),await we.send(n?"pause 1":"play"),setTimeout(en,900)},async next(){hn=!0,On=0,await we.send("next"),en()},async previous(){hn=!0,On=0,ct.update(e=>({...e,elapsed:0})),await we.send("previous"),en()},async setVolume(e){ct.update(n=>({...n,volume:e})),await we.send(`setvol ${e}`)},async seek(e){hn=!0,On=performance.now()+500,ct.update(n=>({...n,elapsed:e})),await we.send(`seekcur ${e}`),setTimeout(en,600)},async toggleRandom(){const n=!qe(ct).random;ct.update(t=>({...t,random:n})),await we.send(`random ${n?1:0}`)},async toggleRepeat(){const n=!qe(ct).repeat;ct.update(t=>({...t,repeat:n})),await we.send(`repeat ${n?1:0}`)},async playUri(e,n={}){it.set(!0);const t=Gr(e);hn=!0,ct.update(r=>({...r,state:"play",elapsed:0})),Gt.set({title:n.title||e.split("/").pop(),artist:n.artist||"",file:e}),Xs();try{const r=await we.send("currentsong"),a=parseInt(Wt.parseKeyValue(r).pos),i=await we.send(`addid "${t}"`),o=parseInt(Wt.parseKeyValue(i).id);if(isNaN(o))await we.send(`add "${t}"`),await we.send("play");else{const l=isNaN(a)?0:a+1;await we.send(`moveid ${o} ${l}`),await we.send(`playid ${o}`)}}catch(r){console.error("Play error",r),ze("Failed to play","error")}setTimeout(()=>{it.set(!1),en()},1200)},async addToQueue(e){try{await we.send(`add "${Gr(e)}"`),ze("Added to queue","success")}catch(n){console.error("Add queue error",n),ze("Failed to add","error")}},async playNext(e){it.set(!0);const n=Gr(e);try{const t=await we.send("currentsong"),r=parseInt(Wt.parseKeyValue(t).pos||-1);if(r===-1)it.set(!1),await this.playUri(e);else{const a=await we.send(`addid "${n}"`),i=parseInt(Wt.parseKeyValue(a).id);isNaN(i)||(await we.send(`moveid ${i} ${r+1}`),ze("Will play next","success")),setTimeout(()=>it.set(!1),1e3)}}catch(t){console.error("Play Next error",t),ze("Failed to set next","error"),it.set(!1)}},async removeFromQueue(e){it.set(!0),nr&&clearTimeout(nr);try{Bn.update(n=>{const t=[...n];return t.splice(e,1),t}),await we.send(`delete ${e}`)}catch{ze("Failed to remove","error"),it.set(!1);return}nr=setTimeout(()=>{it.set(!1)},1e3)},async moveTrack(e,n){if(e!==n){it.set(!0),nr&&clearTimeout(nr);try{await we.send(`move ${e} ${n}`)}catch(t){console.error("Move failed",t),ze("Move failed","error"),it.set(!1),en();return}nr=setTimeout(()=>{it.set(!1),en()},2e3)}},async playAllTracks(e){if(!(!e||e.length===0))try{await we.send("stop"),await we.send("clear"),await Va(e,!0)}catch(n){console.error(n)}},async addAllToQueue(e){!e||e.length===0||await Va(e,!1)},async saveQueue(e){if(!e)return;const n=e.replace(/"/g,'\\"');try{await we.send(`save "${n}"`),ze(`Playlist "${e}" saved`,"success")}catch(t){if(t.message.includes("exist")){if(confirm(`Playlist "${e}" exists. Overwrite?`))try{await we.send(`rm "${n}"`),await we.send(`save "${n}"`),ze(`Playlist "${e}" overwritten`,"success")}catch{ze("Failed to overwrite","error")}}else console.error(t)}}};function Vi(e){return new Worker("/assets/sync.worker-CxDcqL9_.js",{name:e?.name})}const yr="Favorites";let Ya=Promise.resolve();const rr=e=>e?e.toLowerCase().replace(/^https?:\/\//,"").replace(/^www\./,"").split("?")[0].replace(/\/$/,""):"";function Uc(e){if(e==="Favorites")return"linear-gradient(135deg, hsl(348, 95%, 58%), hsl(348, 90%, 40%))";let n=0;for(let r=0;r<e.length;r++)n=e.charCodeAt(r)+((n<<5)-n);const t=Math.abs(n%360);return`linear-gradient(135deg, hsl(${t}, 60%, 40%), hsl(${(t+40)%360}, 60%, 30%))`}const rn={async syncLibrary(){if(qe(Vt))return;Vt.set(!0);const e=new Vi;e.postMessage({type:"START_SYNC",payload:{url:`http://${lr.MOODE_IP}/wave-api.php`}}),e.onmessage=n=>{const{type:t,count:r}=n.data;t==="DONE"&&(ze(`Library updated: ${r} tracks`,"success"),Vt.set(!1),e.terminate()),t==="ERROR"&&(ze("Sync Failed","error"),Vt.set(!1),e.terminate())},e.onerror=()=>{Vt.set(!1),e.terminate()}},async loadPlaylists(){Vs.set(!0);try{const e=await we.send("listplaylists"),t=Wt.parsePlaylists(e).map(r=>({...r,color:Uc(r.name)}));va.set(t)}catch(e){console.error(e)}finally{Vs.set(!1)}},async createPlaylistFromQueue(e){if(!e)return;const n=e.replace(/"/g,'\\"');try{await we.send(`save "${n}"`),ze(`Playlist "${e}" created`,"success"),await this.loadPlaylists()}catch(t){console.error(t),ze("Failed to create playlist","error")}},async deletePlaylist(e){if(!e)return;const n=e.replace(/"/g,'\\"');try{await we.send(`rm "${n}"`),ze("Playlist deleted","info"),await this.loadPlaylists()}catch(t){console.error(t),ze("Delete failed","error")}},async renamePlaylist(e,n){if(!e||!n)return;const t=e.replace(/"/g,'\\"'),r=n.replace(/"/g,'\\"');try{await we.send(`rename "${t}" "${r}"`),ze("Playlist renamed","success"),await this.loadPlaylists()}catch(a){console.error(a),ze("Rename failed","error")}},async openPlaylistDetails(e){if(!e)return;Ys.set(!0);const n=e.replace(/"/g,'\\"');try{const t=await we.send(`listplaylistinfo "${n}"`),r=Wt.parseTracks(t),a=r.map(l=>l.file).filter(l=>l&&!l.startsWith("http"));let i=new Map;if(a.length>0)try{i=await Sn.getFilesMap(a)}catch(l){console.warn("Failed to hydrate playlist from DB",l)}const o=r.map(l=>{const u=i.get(l.file);return u?{...l,thumbHash:u.thumbHash,qualityBadge:u.qualityBadge,title:l.title||u.title,artist:l.artist||u.artist,album:l.album||u.album,_uid:Da()}:{...l,_uid:Da()}});ir.set(o)}catch(t){console.error(t),ze("Could not load playlist","error")}finally{Ys.set(!1)}},async movePlaylistTrack(e,n,t){const r=e.replace(/"/g,'\\"');try{await we.send(`playlistmove "${r}" ${n} ${t}`)}catch{ze("Move failed","error")}},async removeFromPlaylist(e,n){const t=e.replace(/"/g,'\\"');try{await we.send(`playlistdelete "${t}" ${n}`),ze("Track removed","success")}catch{ze("Delete failed","error")}},async loadFavorites(){try{const e=await we.send(`listplaylistinfo "${yr}"`),n=Wt.parseTracks(e),t=new Set;n.forEach(r=>{r.file&&t.add(r.file)}),En.set(t)}catch{En.set(new Set)}},async toggleFavorite(e){if(!e||!e.file)return;const n=e.file,t=n.replace(/"/g,'\\"'),r=n.startsWith("http"),a=qe(En);let i=a.has(n);if(!i&&r){const o=rr(n);for(const l of a)if(rr(l)===o){i=!0;break}}En.update(o=>{const l=new Set(o);if(i){if(l.delete(n),r){const u=rr(n);for(const c of l)rr(c)===u&&l.delete(c)}}else l.add(n);return l}),Ya=Ya.then(async()=>{try{const o=await we.send(`listplaylistinfo "${yr}"`),l=Wt.parseTracks(o);let u=[];if(l.forEach((c,v)=>{let h=!1;(c.file===n||r&&rr(c.file)===rr(n)||r&&(c.file.includes(n)||n.includes(c.file)))&&(h=!0),h&&u.push(v)}),i){if(u.length>0){u.sort((c,v)=>v-c);for(const c of u)await we.send(`playlistdelete "${yr}" ${c}`);ze("Removed from Favorites","info")}}else u.length>0?console.log("[Fav] Track already exists. Skipping."):(await we.send(`playlistadd "${yr}" "${t}"`),l.length>0&&await we.send(`playlistmove "${yr}" ${l.length} 0`),ze("Added to Favorites","success"))}catch(o){console.error("Fav action failed",o),ze("Action failed","error")}finally{await this.loadFavorites()}})}};function Yi(){we.connect(),jc(),rn.loadPlaylists(),rn.loadFavorites()}function as(e){return we.send(e)}const{togglePlay:ps,toggleRandom:Un,toggleRepeat:Hn,setVolume:zr,seek:ha,addToQueue:Hc,playNext:Vc,removeFromQueue:Yc,moveTrack:Wc,saveQueue:Qc,playAllTracks:Wi,addAllToQueue:Qi}=Qt,{syncLibrary:Kc,loadRadioStations:Xc,loadPlaylists:pa,openPlaylistDetails:Ki,toggleFavorite:Xi,loadFavorites:Gc,removeFromPlaylist:Gi,movePlaylistTrack:Zi}=rn;function Nr(e){const n=qe(Gt),t=qe(Rn),r=qe(jr);if(n.file&&n.file.startsWith("http")&&t.length>0&&(e==="next"||e==="previous")){let i=t.findIndex(l=>l.name===r);i===-1&&(i=0);let o;e==="next"?(o=i+1,o>=t.length&&(o=0)):(o=i-1,o<0&&(o=t.length-1)),_a(t[o])}else e==="next"&&Qt.next(),e==="previous"&&Qt.previous()}function _a(e){if(!e)return;jr.set(e.name);const n=e[1]||e.station||e.file||e.url;n&&Qt.playUri(n,{title:e.name,artist:e.genre||"Radio Stream",stationName:e.name})}function _s(e){e&&(jr.set(null),Qt.playUri(e.file,{title:e.title,artist:e.artist,album:e.album,stationName:null}))}async function Ji(e,n=0){if(!e)return;jr.set(null);const t=e.replace(/"/g,'\\"');try{await we.send("stop"),await we.send("clear"),await we.send(`load "${t}"`),await we.send(`play ${n}`)}catch(r){console.error("Failed to play playlist context",r)}}const Zc=Object.freeze(Object.defineProperty({__proto__:null,addAllToQueue:Qi,addToQueue:Hc,connect:Yi,loadFavorites:Gc,loadPlaylists:pa,loadRadioStations:Xc,movePlaylistTrack:Zi,moveTrack:Wc,nav:Nr,openPlaylistDetails:Ki,playAllTracks:Wi,playNext:Vc,playPlaylistContext:Ji,playStation:_a,playTrackOptimistic:_s,removeFromPlaylist:Gi,removeFromQueue:Yc,runMpdRequest:as,saveQueue:Qc,seek:ha,setVolume:zr,syncLibrary:Kc,toggleFavorite:Xi,togglePlay:ps,toggleRandom:Un,toggleRepeat:Hn},Symbol.toStringTag,{value:"Module"}));function ga(e,n=2e3){let t;const r=i=>{i.type==="mousedown"&&i.button!==0||(t=setTimeout(()=>{e.dispatchEvent(new CustomEvent("longpress",{detail:{originalEvent:i}}))},n))},a=()=>{clearTimeout(t)};return e.addEventListener("mousedown",r),e.addEventListener("touchstart",r,{passive:!0}),e.addEventListener("mouseup",a),e.addEventListener("mouseleave",a),e.addEventListener("touchend",a),e.addEventListener("touchcancel",a),e.addEventListener("touchmove",a),{destroy(){e.removeEventListener("mousedown",r),e.removeEventListener("touchstart",r),e.removeEventListener("mouseup",a),e.removeEventListener("mouseleave",a),e.removeEventListener("touchend",a),e.removeEventListener("touchcancel",a),e.removeEventListener("touchmove",a)}}}var Jc=T('<div class="drag-handle svelte-5cs2hz" title="Drag to reorder"><div class="icon-small svelte-5cs2hz"><!></div></div>'),eu=T('<div class="eq-anim svelte-5cs2hz"><span class="bar b1 svelte-5cs2hz"></span> <span class="bar b2 svelte-5cs2hz"></span> <span class="bar b3 svelte-5cs2hz"></span></div>'),tu=T('<div class="icon-small svelte-5cs2hz"><!></div>'),nu=T('<div class="icon-small svelte-5cs2hz"><!></div>'),ru=T('<div class="icon-small accent svelte-5cs2hz"><!></div>'),su=T('<span class="num svelte-5cs2hz"> </span>'),au=T('<button class="num-box svelte-5cs2hz"><!></button>'),iu=T('<div slot="fallback" class="icon-ph svelte-5cs2hz"><!></div>'),ou=T('<span class="meta-tag quality svelte-5cs2hz"> </span>'),lu=T('<button class="btn-icon small remove svelte-5cs2hz"><!></button>'),cu=T('<div class="dur svelte-5cs2hz"> </div>'),uu=T('<div role="button" tabindex="0"><div class="left svelte-5cs2hz"><!> <div class="thumb svelte-5cs2hz"><!></div></div> <div class="info svelte-5cs2hz"><div class="title-row svelte-5cs2hz"><div class="title text-ellipsis svelte-5cs2hz"> </div> <!></div> <div> </div></div> <div class="right svelte-5cs2hz"><button class="btn-icon small context-menu-btn svelte-5cs2hz" title="Options"><!></button> <button><!></button> <!></div></div>');function gs(e,n){ft(n,!1);const t=()=>xe(En,"$favorites",u),r=()=>xe(jt,"$navigationStack",u),a=()=>xe(Ct,"$activeMenuTab",u),i=()=>xe(ct,"$status",u),o=()=>xe(Gt,"$currentSong",u),l=()=>xe(Rn,"$stations",u),[u,c]=It(),v=$(),h=$(),f=$(),p=$(),x=$(),b=$(),_=$(),E=$(),L=$(),V=$(),G=$(),H=$(),W=$(),ue=$(),Y=$(),ge=$(),me=$(),ae=$(),N=$();let R=ot(n,"track",8),ne=ot(n,"index",8),F=ot(n,"isEditable",8,!1);const Z=ca();let M=$(!1),A=$(!1);function J(he){if(s(L))return"â";if(!he)return"0:00";const Ae=parseInt(he,10),Ve=Math.floor(Ae/60),Ge=Ae%60;return`${Ve}:${Ge.toString().padStart(2,"0")}`}function O(he){he.stopPropagation(),s(_)?ps():Z("play")}function U(){return s(h)?.view==="details"&&s(h).data?.name?{type:"playlist",playlistName:s(h).data.name,index:ne()}:s(f)?{type:"queue",index:ne()}:{type:"general"}}function K(he){he.stopPropagation(),Lr(he,R(),U())}function S(he){F()||Lr(he.detail.originalEvent,R(),U())}function P(he){he.stopPropagation(),!s(L)&&R().artist&&(Ct.set("artists"),An("albums_by_artist",{name:R().artist}))}X(()=>q(R()),()=>{R()&&g(A,!1)}),X(()=>(t(),q(R())),()=>{g(v,t().has(R().file))}),X(()=>r(),()=>{g(h,r()[r().length-1])}),X(()=>(s(h),a()),()=>{g(f,s(h)?.view==="queue"||s(h)?.view==="root"&&a()==="queue")}),X(()=>i(),()=>{g(p,i().song)}),X(()=>o(),()=>{g(x,o().file)}),X(()=>i(),()=>{g(b,i().state==="play")}),X(()=>(s(f),q(ne()),s(p)),()=>{g(_,s(f)&&Number(ne())===Number(s(p)))}),X(()=>(s(b),q(R()),s(x),s(_)),()=>{g(E,s(b)&&R().file===s(x)&&!s(_))}),X(()=>q(R()),()=>{g(L,R().file&&(R().file.startsWith("http")||R().file.includes("RADIO")))}),X(()=>(s(_),s(b),s(M)),()=>{g(V,s(_)&&s(b)&&s(M))}),X(()=>(s(_),s(b),s(M)),()=>{g(G,s(_)&&!s(b)&&s(M)||!s(_)&&s(M))}),X(()=>(s(_),s(b),s(M)),()=>{g(H,s(_)&&s(b)&&!s(M))}),X(()=>(s(_),s(b),s(M)),()=>{g(W,s(_)&&!s(b)&&!s(M))}),X(()=>q(R()),()=>{g(ue,R().title||R().file?.split("/").pop())}),X(()=>q(R()),()=>{g(Y,R().artist||"Unknown")}),X(()=>q(R()),()=>{g(ge,J(R().time))}),X(()=>q(R()),()=>{g(me,R().qualityBadge?R().qualityBadge.split(" ")[0]:null)}),X(()=>(s(_),o()),()=>{g(ae,s(_)?o().stationName:null)}),X(()=>(s(A),q(R()),l(),s(ae),Ir),()=>{g(N,s(A)?hr(R(),l(),s(ae)):Ir(R(),"sm",l(),s(ae)))}),Bt(),_t();var I=uu();let ee;var ie=d(I),pe=d(ie);{var D=he=>{var Ae=Jc(),Ve=d(Ae),Ge=d(Ve);te(Ge,()=>(q(y),k(()=>y.DRAG_HANDLE))),C("mousedown",Ae,je=>Z("startdrag",je)),C("touchstart",Ae,je=>Z("startdrag",je),void 0,!0),C("click",Ae,Yt(function(je){Rr.call(this,n,je)})),w(he,Ae)},Q=he=>{var Ae=au(),Ve=d(Ae);{var Ge=Qe=>{var nt=eu();w(Qe,nt)},je=Qe=>{var nt=We(),gt=$e(nt);{var cn=yt=>{var He=tu(),Je=d(He);te(Je,()=>(q(y),k(()=>y.PAUSE))),w(yt,He)},Mt=yt=>{var He=We(),Je=$e(He);{var rt=lt=>{var zt=nu(),Tt=d(zt);te(Tt,()=>(q(y),k(()=>y.PLAY))),w(lt,zt)},Ut=lt=>{var zt=We(),Tt=$e(zt);{var Ln=Zt=>{var Pe=ru(),et=d(Pe);te(et,()=>(q(y),k(()=>y.PLAY))),w(Zt,Pe)},un=Zt=>{var Pe=su(),et=d(Pe);de(()=>ce(et,ne()+1)),w(Zt,Pe)};j(Tt,Zt=>{s(W)?Zt(Ln):Zt(un,!1)},!0)}w(lt,zt)};j(Je,lt=>{s(G)?lt(rt):lt(Ut,!1)},!0)}w(yt,He)};j(gt,yt=>{s(V)?yt(cn):yt(Mt,!1)},!0)}w(Qe,nt)};j(Ve,Qe=>{s(H)?Qe(Ge):Qe(je,!1)})}C("click",Ae,O),w(he,Ae)};j(pe,he=>{F()?he(D):he(Q,!1)})}var B=m(pe,2),re=d(B);Kn(re,{get src(){return s(N)},get alt(){return s(ue)},radius:"4px",$$events:{error:()=>g(A,!0)},$$slots:{fallback:(he,Ae)=>{var Ve=iu(),Ge=d(Ve);te(Ge,()=>(s(L),q(y),k(()=>s(L)?y.RADIO:y.ALBUMS))),wt(1,Ve,()=>an),w(he,Ve)}}});var se=m(ie,2),z=d(se),ve=d(z),_e=d(ve),ke=m(ve,2);{var Ne=he=>{var Ae=ou(),Ve=d(Ae);de(()=>ce(Ve,s(me))),w(he,Ae)};j(ke,he=>{s(me)&&!s(L)&&he(Ne)})}var ye=m(z,2);let oe;var Me=d(ye),Ce=m(se,2),Oe=d(Ce),Ie=d(Oe);te(Ie,()=>(q(y),k(()=>y.DOTS)));var fe=m(Oe,2);let Te;var Ee=d(fe);te(Ee,()=>(s(v),q(y),k(()=>s(v)?y.HEART_FILLED:y.HEART)));var Se=m(fe,2);{var be=he=>{var Ae=lu(),Ve=d(Ae);te(Ve,()=>(q(y),k(()=>y.REMOVE))),C("click",Ae,Yt(()=>Z("remove",{index:ne()}))),w(he,Ae)},Re=he=>{var Ae=cu(),Ve=d(Ae);de(()=>ce(Ve,s(ge))),w(he,Ae)};j(Se,he=>{F()?he(be):he(Re,!1)})}Rt(()=>C("click",I,()=>!s(_)&&Z("play"))),Rt(()=>C("mouseenter",I,()=>g(M,!0))),Rt(()=>C("mouseleave",I,()=>g(M,!1))),ia(I,he=>ga?.(he)),Rt(()=>C("longpress",I,S)),de(()=>{ee=Fe(I,1,"row svelte-5cs2hz",null,ee,{active:s(_),duplicate:s(E),editable:F()}),bt(ve,"title",s(ue)),ce(_e,s(ue)),oe=Fe(ye,1,"artist text-ellipsis svelte-5cs2hz",null,oe,{link:!s(L)}),ce(Me,s(Y)),Te=Fe(fe,1,"btn-icon small svelte-5cs2hz",null,Te,{liked:s(v)})}),C("click",ye,P),C("click",Oe,K),C("click",fe,Yt(()=>Xi(R()))),w(e,I),ht(),c()}const Vr=100,Wa=5,Qa=25,Ka=3;function vu({tracksStore:e,onMoveTrack:n}){const t=De(!1),r=De(!1),a=De(!1),i=De(null),o=De(null),l=De(null),u=De({x:0,y:0,width:0,height:0,grabOffsetX:0,grabOffsetY:0}),c=De(null);let v=!1,h=0,f=0,p=0,x=0;const b={scrollContainer:null,listBodyContainer:null};let _=null;function E(N,R,ne){const F=N.detail;if(F.button===2||(window.getSelection&&window.getSelection().removeAllRanges(),!b.scrollContainer))return;const M=b.scrollContainer.querySelectorAll(".row-wrapper")[R];if(!M)return;const A=M.getBoundingClientRect(),J=F.touches?F.touches[0].clientX:F.clientX,O=F.touches?F.touches[0].clientY:F.clientY,U=J-A.left,K=O-A.top;v=!0,t.set(!1),r.set(!1),h=J,f=O,p=J,x=O,i.set(R),o.set(R),c.set(ne),l.set(null),u.set({x:J,y:O,width:A.width,height:A.height,grabOffsetX:U,grabOffsetY:K})}function L(N){if(!v||qe(r))return;const R=N.touches?N.touches[0].clientX:N.clientX,ne=N.touches?N.touches[0].clientY:N.clientY;if(!qe(t)){const F=Math.abs(R-h),Z=Math.abs(ne-f);if(F<Ka&&Z<Ka)return;t.set(!0)}N.cancelable&&N.preventDefault(),p=R,x=ne,u.update(F=>({...F,x:p,y:x})),Y(x),V()}function V(){if(!b.listBodyContainer)return;const N=b.listBodyContainer.getBoundingClientRect(),R=qe(u),F=x-N.top-R.grabOffsetY+R.height/2,Z=qe(e).length;if(F<0){o.set(0);return}if(F>N.height){o.set(Z);return}const M=Array.from(b.listBodyContainer.querySelectorAll(".row-wrapper"));let A=-1,J=1/0;M.forEach((O,U)=>{const K=O.offsetTop+O.offsetHeight/2,S=Math.abs(F-K);S<J&&(J=S,A=U)}),A!==-1&&o.set(A)}function G(N){if(v){if(v=!1,!qe(t)){W();return}H()}}async function H(){me(),t.set(!1),r.set(!0);const N=qe(o);if(b.listBodyContainer&&N!==null){const J=b.listBodyContainer.querySelectorAll(".row-wrapper")[N];if(J){const O=b.listBodyContainer.getBoundingClientRect(),U=O.top+J.offsetTop,K=O.left+J.offsetLeft;u.update(S=>({...S,y:U+S.grabOffsetY,x:K+S.grabOffsetX}))}}await new Promise(A=>setTimeout(A,200)),a.set(!0),await Cr();const R=qe(i),ne=qe(e).length;let F=Math.max(0,Math.min(N,ne)),Z=F;if(R!==null&&R!==F){const A=[...qe(e)],[J]=A.splice(R,1);Z=Math.max(0,Math.min(Z,A.length)),A.splice(Z,0,J),e.set(A),n&&n(R,Z)}i.set(null),o.set(null),c.set(null),r.set(!1);const M=R!==F?Z:R;l.set(M),await Cr(),requestAnimationFrame(()=>{a.set(!1),setTimeout(()=>{l.set(null)},300)})}function W(){v=!1,ue()}function ue(){t.set(!1),r.set(!1),i.set(null),o.set(null),c.set(null),me()}function Y(N){if(!b.scrollContainer)return;const{top:R,bottom:ne}=b.scrollContainer.getBoundingClientRect(),F=N-R,Z=ne-N;me();let M=0;if(F<Vr&&F>0){const A=1-F/Vr;M=-(Wa+Qa*(A*A))}else if(Z<Vr&&Z>0){const A=1-Z/Vr;M=Wa+Qa*(A*A)}M!==0&&ge(M)}function ge(N){_||(_=requestAnimationFrame(function R(){b.scrollContainer&&(b.scrollContainer.scrollTop+=N,qe(t)&&(u.update(ne=>({...ne,x:p,y:x})),V(),_=requestAnimationFrame(R)))}))}function me(){_&&(cancelAnimationFrame(_),_=null)}function ae(N,R,ne,F,Z,M){return M||!R&&!ne||F===null||Z===null?"":N===F?"opacity: 0; pointer-events: none;":F===Z?"":F<Z&&N>F&&N<=Z?"transform: translateY(-100%);":F>Z&&N>=Z&&N<F?"transform: translateY(100%);":""}return{isDragging:t,isDropping:r,isReordering:a,draggingIndex:i,hoverIndex:o,justDroppedIndex:l,draggedItemData:c,ghostCoords:u,refs:b,onDragInit:E,onPointerMove:L,onPointerUp:G,getRowStyle:ae,cancelDrag:W}}var du=T('<div><div style="pointer-events: none; width: 100%; height: 100%;"><!></div></div>'),fu=T('<div style="padding: 10px 0;"><!></div>'),hu=T('<div class="skeletons-wrapper svelte-ym6b2"></div>'),pu=T("<div><!></div>"),_u=T('<div class="content-padded svelte-ym6b2" style="text-align: center; opacity: 0.5;"> </div>'),gu=T("<!> <!>",1),mu=T('<div><!> <div class="list-body"><!> <!></div></div>');function ms(e,n){ft(n,!1);const t=()=>xe(jt,"$navigationStack",p),r=()=>xe(Ct,"$activeMenuTab",p),a=()=>xe(me,"$isDragging",p),i=()=>xe(ae,"$isDropping",p),o=()=>xe(Z,"$draggedItemData",p),l=()=>xe(M,"$ghostCoords",p),u=()=>xe(R,"$draggingIndex",p),c=()=>xe(b(),"$itemsStore",p),v=()=>xe(F,"$justDroppedIndex",p),h=()=>xe(N,"$isReordering",p),f=()=>xe(ne,"$hoverIndex",p),[p,x]=It();let b=ot(n,"itemsStore",8),_=ot(n,"isEditMode",8,!1),E=ot(n,"isLoading",8,!1),L=ot(n,"emptyText",8,"List is empty"),V=ot(n,"onMoveItem",8,(D,Q)=>{}),G=$(""),H=$(0),W=$(!1);br(async()=>{g(H,kc(s(G))),!E()&&s(H)>0&&s(Y).refs.scrollContainer&&(await Cr(),qr(Y,s(Y).refs.scrollContainer.scrollTop=s(H)),g(W,!0))});async function ue(){await Cr(),s(Y).refs.scrollContainer&&(qr(Y,s(Y).refs.scrollContainer.scrollTop=s(H)),g(W,!0))}Pl(()=>{s(Y).cancelDrag(),s(Y).refs.scrollContainer&&yc(s(G),s(Y).refs.scrollContainer.scrollTop)});const Y=$(vu({tracksStore:b(),onMoveTrack:(D,Q)=>{V()(D,Q)}})),ge=s(Y),me=ge.isDragging,ae=ge.isDropping,N=ge.isReordering,R=ge.draggingIndex,ne=ge.hoverIndex,F=ge.justDroppedIndex,Z=ge.draggedItemData,M=ge.ghostCoords,A=$(ge.refs);function J(D,Q,B){_()&&s(Y).onDragInit(D,Q,B)}X(()=>(t(),r()),()=>{const D=t(),Q=D[D.length-1],B=r();if(Q&&Q.view==="root")g(G,`root_${B}`);else if(Q){const re=Q.data?Q.data.name||Q.data:"unknown";g(G,`${Q.view}_${re}`)}}),X(()=>(q(E()),s(W),s(H),s(Y)),()=>{!E()&&!s(W)&&s(H)>0&&s(Y).refs.scrollContainer&&ue()}),Bt(),_t();var O=mu();C("mousemove",kn,function(...D){s(Y).onPointerMove?.apply(this,D)}),C("mouseup",kn,function(...D){s(Y).onPointerUp?.apply(this,D)}),C("touchmove",kn,function(...D){s(Y).onPointerMove?.apply(this,D)},void 0,!1),C("touchend",kn,function(...D){s(Y).onPointerUp?.apply(this,D)}),C("touchcancel",kn,function(...D){s(Y).onPointerUp?.apply(this,D)});let U;var K=d(O);{var S=D=>{var Q=du();let B;var re=d(Q),se=d(re);Wr(se,n,"row",{get item(){return o()},get index(){return u()},isGhost:!0,startDrag:()=>{}}),de(()=>{B=Fe(Q,1,"floating-item svelte-ym6b2",null,B,{dropping:i()}),Ze(Q,`
            top: ${l(),k(()=>l().y-l().grabOffsetY)??""}px; 
            left: ${l(),k(()=>l().x-l().grabOffsetX)??""}px;
            width: ${l(),k(()=>l().width)??""}px; 
            height: ${l(),k(()=>l().height)??""}px;
        `)}),w(D,Q)};j(K,D=>{(a()||i())&&o()&&D(S)})}var P=m(K,2),I=d(P);Wr(I,n,"header",{});var ee=m(I,2);{var ie=D=>{var Q=hu();qt(Q,4,()=>Array(6),mn,(B,re)=>{var se=fu(),z=d(se);Pn(z,{width:"100%",height:"50px"}),w(B,se)}),w(D,Q)},pe=D=>{var Q=gu(),B=$e(Q);qt(B,3,c,(z,ve)=>z._uid||ve,(z,ve,_e)=>{var ke=pu();let Ne;var ye=d(ke);Wr(ye,n,"row",{get item(){return s(ve)},get index(){return s(_e)},isGhost:!1,startDrag:oe=>J(oe,s(_e),s(ve))}),de(oe=>{Ne=Fe(ke,1,"row-wrapper svelte-ym6b2",null,Ne,{"ghost-placeholder":u()===s(_e)&&(a()||i()),"just-dropped":v()===s(_e),"no-transition":h()}),Ze(ke,oe)},[()=>(s(Y),q(s(_e)),a(),i(),u(),f(),h(),k(()=>s(Y).getRowStyle(s(_e),a(),i(),u(),f(),h())))]),w(z,ke)});var re=m(B,2);{var se=z=>{var ve=_u(),_e=d(ve);de(()=>ce(_e,L())),w(z,ve)};j(re,z=>{c(),k(()=>c().length===0)&&z(se)})}w(D,Q)};j(ee,D=>{E()?D(ie):D(pe,!1)})}Cn(P,D=>qr(A,s(A).listBodyContainer=D),()=>s(A)?.listBodyContainer),Cn(O,D=>qr(A,s(A).scrollContainer=D),()=>s(A)?.scrollContainer),de(()=>U=Fe(O,1,"base-list-scroll-container svelte-ym6b2",null,U,{dragging:a()})),wt(1,P,()=>an,()=>({duration:200})),w(e,O),ht(),x()}var bu=T('<div slot="fallback" class="icon-fallback svelte-1eh2rsb"><!></div>'),wu=T('<span class="meta-tag"> </span>'),yu=T('<div class="header-subtitle-row svelte-1eh2rsb"><h2 class="header-sub-text svelte-1eh2rsb"> </h2> <!></div>'),ku=T('<span class="meta-tag"> </span>'),xu=T('<span class="meta-tag"> </span>'),Eu=T('<span class="meta-tag quality"> </span>'),Su=T('<div slot="header" class="content-padded svelte-1eh2rsb"><div class="view-header svelte-1eh2rsb"><div class="header-art svelte-1eh2rsb"><div style="width: 100%; height: 100%;"><!></div></div> <div class="header-info svelte-1eh2rsb"><div class="header-text-group svelte-1eh2rsb"><div class="header-label svelte-1eh2rsb"> </div> <h1 class="header-title svelte-1eh2rsb"> </h1> <!> <div class="meta-badges"><!> <!> <!></div></div> <div class="header-actions svelte-1eh2rsb"><button class="btn-primary svelte-1eh2rsb"> </button> <button class="btn-secondary svelte-1eh2rsb"> </button></div></div></div></div>'),Mu=T('<div slot="row"><!></div>'),Tu=T("<button> </button>"),$u=T('<div class="sort-backdrop svelte-1eh2rsb"></div> <div class="sort-menu svelte-1eh2rsb"></div>',1),Au=T('<div class="sort-wrapper svelte-1eh2rsb"><button class="sort-trigger svelte-1eh2rsb"><span> </span> <span class="sort-trigger-icon svelte-1eh2rsb"><!></span></button> <!></div>'),Cu=T('<div class="music-card svelte-1eh2rsb"><!> <!></div>'),Pu=T('<div class="music-grid svelte-1eh2rsb"></div>'),Ru=T('<div class="group-header header-label svelte-1eh2rsb"> </div>'),Lu=T('<div slot="fallback" class="icon-fallback svelte-1eh2rsb"><!></div>'),Iu=T('<div class="card-sub text-ellipsis svelte-1eh2rsb"> </div>'),zu=T('<div class="card-badge svelte-1eh2rsb"> </div>'),Nu=T('<div class="card-badge quality svelte-1eh2rsb"> </div>'),Ou=T('<div class="music-card svelte-1eh2rsb" role="button" tabindex="0"><div class="card-img-container svelte-1eh2rsb"><!> <div class="play-overlay svelte-1eh2rsb"><span class="overlay-icon svelte-1eh2rsb"><!></span></div></div> <div class="card-title svelte-1eh2rsb"> </div> <div class="card-sub-row svelte-1eh2rsb"><!> <!> <!></div></div>'),Du=T('<div class="empty-text svelte-1eh2rsb">No results found</div>'),ju=T('<div class="music-grid svelte-1eh2rsb"></div>'),Fu=T('<div class="content-padded svelte-1eh2rsb"><div class="search-input-container svelte-1eh2rsb"><span class="search-icon svelte-1eh2rsb"><!></span> <input type="text" class="svelte-1eh2rsb"/> <!></div> <!></div>'),qu=T("<div><!></div>");function Bu(e,n){ft(n,!1);const t=()=>xe(v,"$itemsStore",a),r=()=>xe(jt,"$navigationStack",a),[a,i]=It(),o=$(),l=$(),u=$();let c=ot(n,"activeCategory",8,"artists");const v=De([]);let h=$(!0),f=$(""),p=$("name"),x=$(!1);const b=[{id:"name",label:"A-Z"},{id:"artist",label:"Artist"},{id:"year",label:"Oldest"},{id:"year_desc",label:"Newest"}];let _=$(!1),E=$(!1),L=$(null),V=$(""),G=$(""),H=$(""),W=$(0),ue=0;function Y(){g(x,!s(x))}function ge(O){g(p,O),g(x,!1)}function me(O,U){if(!O||O.length===0)return[];const K=[...O].sort((S,P)=>{switch(U){case"name":return S.displayName.localeCompare(P.displayName,void 0,{sensitivity:"base"});case"artist":const I=S.artist||"",ee=P.artist||"",ie=I.localeCompare(ee,void 0,{sensitivity:"base"});return ie!==0?ie:(parseInt(S.year)||0)-(parseInt(P.year)||0);case"year":return(parseInt(S.year)||0)-(parseInt(P.year)||0);case"year_desc":return(parseInt(P.year)||0)-(parseInt(S.year)||0);default:return 0}});if(U==="artist"){const S=[];let P=null;return K.forEach(I=>{const ee=I.artist||"Unknown Artist";ee!==P&&(S.push({_uid:`header-${ee}`,isHeader:!0,title:ee}),P=ee),S.push(I)}),S}return K}async function ae(O,U){if(!U)return;const K=++ue;g(h,!0),v.set([]),g(L,U.data),g(V,""),g(G,""),g(H,""),g(W,0),console.log(`[LibraryView #${K}] Start loading:`,U);try{let S=[];if(U.view==="root")S=O==="artists"?await Sn.getArtists():await Sn.getAlbums();else if(U.view==="albums_by_artist"){const I=U.data.name||U.data;S=await Sn.getArtistAlbums(I),g(p,"year")}else if(U.view==="tracks_by_album"){const I=U.data.name||U.data,ee=U.data.artist;S=await Sn.getAlbumTracks(I,ee)}if(K!==ue){console.warn(`[LibraryView #${K}] Request cancelled (stale).`);return}const P=S.map((I,ee)=>{const pe=typeof I=="string"?{name:I}:I;let D=String(pe.year||"");return D.length>4&&(D=D.substring(0,4)),{...pe,displayName:pe.name||pe.title||pe.artist||"Unknown",thumbFile:pe.file||null,year:D,_uid:(pe.file||pe.name||ee)+O+U.view}});if(console.log(`[LibraryView #${K}] Setting ${P.length} items.`),v.set(P),U.view==="tracks_by_album"&&P.length>0){g(L,P[0]),g(W,P.length),g(H,P[0].year);const I=P.reduce((ee,ie)=>ee+(ie.time||0),0);if(I>0){const ee=Math.floor(I/3600),ie=Math.floor(I%3600/60);g(V,ee>0?`${ee} hr ${ie} min`:`${ie} min`)}P[0].qualityBadge&&g(G,P[0].qualityBadge)}}catch(S){K===ue&&(console.error(S),v.set([]))}finally{K===ue&&g(h,!1)}}function N(O){s(u).view==="root"?c()==="artists"?An("albums_by_artist",O):An("tracks_by_album",O):s(u).view==="albums_by_artist"&&An("tracks_by_album",O)}function R(){const O=t();if(O.length>0){const U=s(u).data.name||s(u).data.displayName||"this selection";$n({title:"Replace Queue?",message:`This will clear your queue and play all tracks from "${U}".`,confirmLabel:"Play",type:"confirm",onConfirm:()=>{g(_,!0),Wi(O)}})}}function ne(){const O=t();O.length>0&&(g(E,!0),Qi(O),setTimeout(()=>{g(E,!1)},2e3))}X(()=>q(c()),()=>{c()&&(g(f,""),c(),g(p,"name"))}),X(()=>(s(p),y),()=>{g(o,s(p)==="year_desc"?y.SORT_ASC:y.SORT_DESC)}),X(()=>(t(),s(f),s(p)),()=>{g(l,me(t().filter(O=>{if(!s(f))return!0;const U=s(f).toLowerCase();return O.displayName.toLowerCase().includes(U)||O.artist&&O.artist.toLowerCase().includes(U)}),s(p)))}),X(()=>r(),()=>{g(u,r()[r().length-1])}),X(()=>(q(c()),s(u)),()=>{ae(c(),s(u))}),X(()=>s(u),()=>{s(u)&&(g(_,!1),g(E,!1),g(x,!1))}),Bt(),_t();var F=qu();let Z;var M=d(F);{var A=O=>{ms(O,{get itemsStore(){return v},get isLoading(){return s(h)},isEditMode:!1,emptyText:"No tracks found",$$slots:{header:(U,K)=>{var S=Su(),P=d(S),I=d(P),ee=d(I),ie=d(ee);{let Se=tt(()=>(q(hr),s(L),k(()=>hr(s(L)))));Kn(ie,{get src(){return s(Se)},alt:"Art",radius:"8px",$$slots:{fallback:(be,Re)=>{var he=bu(),Ae=d(he);te(Ae,()=>(q(y),k(()=>y.ALBUMS))),w(be,he)}}})}var pe=m(I,2),D=d(pe),Q=d(D),B=d(Q),re=m(Q,2),se=d(re),z=m(re,2);{var ve=Se=>{var be=yu(),Re=d(be),he=d(Re),Ae=m(Re,2);{var Ve=Ge=>{var je=wu(),Qe=d(je);de(()=>ce(Qe,s(H))),w(Ge,je)};j(Ae,Ge=>{s(H)&&s(H)!=="0"&&Ge(Ve)})}de(()=>ce(he,(s(L),k(()=>s(L).artist)))),w(Se,be)};j(z,Se=>{s(L),k(()=>s(L)&&s(L).artist)&&Se(ve)})}var _e=m(z,2),ke=d(_e);{var Ne=Se=>{var be=ku(),Re=d(be);de(()=>ce(Re,`${s(W)??""} tracks`)),w(Se,be)};j(ke,Se=>{s(W)>0&&Se(Ne)})}var ye=m(ke,2);{var oe=Se=>{var be=xu(),Re=d(be);de(()=>ce(Re,s(V))),w(Se,be)};j(ye,Se=>{s(V)&&Se(oe)})}var Me=m(ye,2);{var Ce=Se=>{var be=Eu(),Re=d(be);de(()=>ce(Re,s(G))),w(Se,be)};j(Me,Se=>{s(G)&&Se(Ce)})}var Oe=m(D,2),Ie=d(Oe),fe=d(Ie),Te=m(Ie,2),Ee=d(Te);de(()=>{ce(B,(s(u),k(()=>s(u).view==="albums_by_artist"?"Artist":"Album"))),bt(re,"title",(s(u),k(()=>s(u).data.name||s(u).data.displayName))),ce(se,(s(u),k(()=>s(u).data.name||s(u).data.displayName||"Unknown"))),Ie.disabled=s(_),ce(fe,s(_)?"Playing...":"Play All"),Te.disabled=s(E),ce(Ee,s(E)?"Added":"To Queue")}),C("click",Ie,R),C("click",Te,ne),w(U,S)},row:(U,K)=>{var S=Mu();const P=tt(()=>K.item),I=tt(()=>K.index);var ee=d(S);gs(ee,{get track(){return s(P)},get index(){return s(I)},isEditable:!1,$$events:{play:()=>_s(s(P))}}),w(U,S)}}})},J=O=>{var U=Fu(),K=d(U),S=d(K),P=d(S);te(P,()=>(q(y),k(()=>y.SEARCH)));var I=m(S,2),ee=m(I,2);{var ie=B=>{var re=Au(),se=d(re),z=d(se),ve=d(z),_e=m(z,2),ke=d(_e);te(ke,()=>s(o));var Ne=m(se,2);{var ye=oe=>{var Me=$u(),Ce=$e(Me),Oe=m(Ce,2);qt(Oe,5,()=>b,mn,(Ie,fe)=>{var Te=Tu();let Ee;var Se=d(Te);de(()=>{Ee=Fe(Te,1,"sort-item svelte-1eh2rsb",null,Ee,{selected:s(p)===s(fe).id}),ce(Se,(s(fe),k(()=>s(fe).label)))}),C("click",Te,()=>ge(s(fe).id)),w(Ie,Te)}),C("click",Ce,Y),wt(3,Ce,()=>an,()=>({duration:100})),wt(3,Oe,()=>ua,()=>({start:.95,duration:100})),w(oe,Me)};j(Ne,oe=>{s(x)&&oe(ye)})}de(oe=>ce(ve,oe),[()=>(s(p),k(()=>b.find(oe=>oe.id===s(p))?.label))]),C("click",se,Y),w(B,re)};j(ee,B=>{q(c()),s(u),k(()=>c()==="albums"||s(u).view==="albums_by_artist")&&B(ie)})}var pe=m(K,2);{var D=B=>{var re=Pu();qt(re,4,()=>Array(12),mn,(se,z)=>{var ve=Cu(),_e=d(ve);Pn(_e,{width:"100%",style:"aspect-ratio:1; border-radius:12px; margin-bottom:12px;"});var ke=m(_e,2);Pn(ke,{width:"80%",height:"16px"}),w(se,ve)}),w(B,re)},Q=B=>{var re=ju();qt(re,5,()=>s(l),se=>se._uid,(se,z)=>{var ve=We(),_e=$e(ve);{var ke=ye=>{var oe=Ru(),Me=d(oe);de(()=>ce(Me,(s(z),k(()=>s(z).title)))),w(ye,oe)},Ne=ye=>{var oe=Ou(),Me=d(oe),Ce=d(Me);{let je=tt(()=>(q(Ir),s(z),k(()=>Ir(s(z),"md"))));Kn(Ce,{get src(){return s(je)},get alt(){return s(z),k(()=>s(z).displayName)},radius:"8px",$$slots:{fallback:(Qe,nt)=>{var gt=Lu(),cn=d(gt);{var Mt=He=>{var Je=We(),rt=$e(Je);te(rt,()=>(q(y),k(()=>y.ARTISTS))),w(He,Je)},yt=He=>{var Je=We(),rt=$e(Je);te(rt,()=>(q(y),k(()=>y.ALBUMS))),w(He,Je)};j(cn,He=>{c()==="artists"?He(Mt):He(yt,!1)})}w(Qe,gt)}}})}var Oe=m(Ce,2),Ie=d(Oe),fe=d(Ie);te(fe,()=>(q(y),k(()=>y.PLAY)));var Te=m(Me,2),Ee=d(Te),Se=m(Te,2),be=d(Se);{var Re=je=>{var Qe=Iu(),nt=d(Qe);de(()=>ce(nt,(s(z),k(()=>s(z).artist)))),w(je,Qe)};j(be,je=>{s(z),k(()=>s(z).artist)&&je(Re)})}var he=m(be,2);{var Ae=je=>{var Qe=zu(),nt=d(Qe);de(()=>ce(nt,(s(z),k(()=>s(z).year)))),w(je,Qe)};j(he,je=>{s(z),k(()=>s(z).year&&s(z).year!=="0")&&je(Ae)})}var Ve=m(he,2);{var Ge=je=>{var Qe=Nu(),nt=d(Qe);de(gt=>ce(nt,gt),[()=>(s(z),k(()=>s(z).qualityBadge.split(" ")[0]))]),w(je,Qe)};j(Ve,je=>{s(z),k(()=>s(z).qualityBadge)&&je(Ge)})}de(()=>ce(Ee,(s(z),k(()=>s(z).displayName)))),C("click",oe,()=>N(s(z))),C("keypress",oe,je=>je.key==="Enter"&&N(s(z))),w(ye,oe)};j(_e,ye=>{s(z),k(()=>s(z).isHeader)?ye(ke):ye(Ne,!1)})}w(se,ve)},se=>{var z=Du();w(se,z)}),w(B,re)};j(pe,B=>{s(h)?B(D):B(Q,!1)})}de(()=>bt(I,"placeholder",`Filter ${c()??""}...`)),hs(I,()=>s(f),B=>g(f,B)),w(O,U)};j(M,O=>{s(u),k(()=>s(u)?.view==="tracks_by_album")?O(A):O(J,!1)})}de(()=>Z=Fe(F,1,"view-container svelte-1eh2rsb",null,Z,{scrollable:s(u)?.view!=="tracks_by_album"})),w(e,F),ht(),i()}var Uu=T('<div class="music-card svelte-1otxnt7"><!> <!></div>'),Hu=T('<div class="music-grid svelte-1otxnt7"></div>'),Vu=T('<div slot="fallback" class="icon-fallback svelte-1otxnt7">ð»</div>'),Yu=T('<div class="status-badge playing svelte-1otxnt7">PLAYING</div>'),Wu=T('<div class="status-badge paused svelte-1otxnt7">PAUSED</div>'),Qu=T('<span class="overlay-icon svelte-1otxnt7"><!></span>'),Ku=T('<div class="card-sub svelte-1otxnt7"> </div>'),Xu=T('<div class="card-badge quality svelte-1otxnt7"> </div>'),Gu=T('<div role="button" tabindex="0"><div class="card-img-container svelte-1otxnt7"><!> <div class="play-overlay svelte-1otxnt7"><!></div></div> <div class="card-title svelte-1otxnt7"> </div> <div class="card-sub-row svelte-1otxnt7"><!> <!></div></div>'),Zu=T('<div class="empty-text svelte-1otxnt7">No stations found</div>'),Ju=T('<div class="music-grid svelte-1otxnt7"></div> <!>',1),ev=T('<div class="view-container scrollable svelte-1otxnt7"><div class="content-padded no-bottom-pad svelte-1otxnt7"><div class="search-input-container svelte-1otxnt7"><span class="search-icon svelte-1otxnt7"><!></span> <input type="text" placeholder="Find station..." class="svelte-1otxnt7"/></div></div> <div class="content-padded svelte-1otxnt7"><!></div></div>');function tv(e,n){ft(n,!1);const t=()=>xe(Rn,"$stations",o),r=()=>xe(ct,"$status",o),a=()=>xe(Qr,"$isLoadingRadio",o),i=()=>xe(Gt,"$currentSong",o),[o,l]=It(),u=$(),c=$();let v=$("");X(()=>(t(),s(v)),()=>{g(u,t().filter(H=>{const W=s(v).toLowerCase();return H.name.toLowerCase().includes(W)||H.genre&&H.genre.toLowerCase().includes(W)}))}),X(()=>r(),()=>{g(c,r().bitrate?`${r().bitrate} kbps`:r().format||"")}),Bt(),_t();var h=ev(),f=d(h),p=d(f),x=d(p),b=d(x);te(b,()=>(q(y),k(()=>y.SEARCH)));var _=m(x,2),E=m(f,2),L=d(E);{var V=H=>{var W=Hu();qt(W,4,()=>Array(12),mn,(ue,Y)=>{var ge=Uu(),me=d(ge);Pn(me,{width:"100%",style:"aspect-ratio:1; border-radius:12px; margin-bottom:12px;"});var ae=m(me,2);Pn(ae,{width:"70%",height:"16px"}),w(ue,ge)}),w(H,W)},G=H=>{var W=Ju(),ue=$e(W);qt(ue,5,()=>s(u),mn,(me,ae)=>{const N=tt(()=>(s(ae),k(()=>s(ae).file))),R=tt(()=>(i(),s(ae),q(s(N)),k(()=>i().stationName===s(ae).name||i().file===s(N)))),ne=tt(()=>(q(fr),s(ae),k(()=>fr(s(ae)))));var F=Gu();let Z;var M=d(F),A=d(M);Kn(A,{get src(){return s(ne)},get alt(){return s(ae),k(()=>s(ae).name)},radius:"8px",$$slots:{fallback:(Q,B)=>{var re=Vu();w(Q,re)}}});var J=m(A,2),O=d(J);{var U=Q=>{var B=We(),re=$e(B);{var se=ve=>{var _e=Yu();w(ve,_e)},z=ve=>{var _e=Wu();w(ve,_e)};j(re,ve=>{r(),k(()=>r().state==="play")?ve(se):ve(z,!1)})}w(Q,B)},K=Q=>{var B=Qu(),re=d(B);te(re,()=>(q(y),k(()=>y.PLAY))),w(Q,B)};j(O,Q=>{s(R)?Q(U):Q(K,!1)})}var S=m(M,2),P=d(S),I=m(S,2),ee=d(I);{var ie=Q=>{var B=Ku(),re=d(B);de(()=>ce(re,(s(ae),k(()=>s(ae).genre)))),w(Q,B)};j(ee,Q=>{s(ae),k(()=>s(ae).genre)&&Q(ie)})}var pe=m(ee,2);{var D=Q=>{var B=Xu(),re=d(B);de(()=>ce(re,s(c))),wt(1,B,()=>an),w(Q,B)};j(pe,Q=>{s(R)&&s(c)&&Q(D)})}de(()=>{Z=Fe(F,1,"music-card svelte-1otxnt7",null,Z,{"is-active":s(R)}),Ze(J,s(R)?"opacity: 1":""),ce(P,(s(ae),k(()=>s(ae).name)))}),C("click",F,()=>_a(s(ae))),w(me,F)});var Y=m(ue,2);{var ge=me=>{var ae=Zu();w(me,ae)};j(Y,me=>{s(u),t(),k(()=>s(u).length===0&&t().length>0)&&me(ge)})}w(H,W)};j(L,H=>{a()?H(V):H(G,!1)})}hs(_,()=>s(v),H=>g(v,H)),wt(1,h,()=>an,()=>({duration:200})),w(e,h),ht(),l()}var nv=T('<span class="meta-tag">Loading...</span>'),rv=T('<span class="meta-tag"> </span>'),sv=T('<span class="meta-tag quality"> </span>'),av=T('<span class="meta-tag"> </span> <!> <!>',1),iv=T('<div slot="header" class="content-padded svelte-m7c4tz"><div class="view-header svelte-m7c4tz"><div class="header-art svelte-m7c4tz"><div class="header-icon-wrap svelte-m7c4tz"><!></div></div> <div class="header-info svelte-m7c4tz"><div class="header-text-group svelte-m7c4tz"><div class="header-label svelte-m7c4tz">Playlist</div> <h1 class="header-title svelte-m7c4tz"> </h1> <div class="meta-badges"><!></div></div> <div class="header-actions svelte-m7c4tz"><button class="btn-primary svelte-m7c4tz"> </button> <button class="btn-secondary svelte-m7c4tz"> </button> <button title="Edit"><!></button></div></div></div></div>'),ov=T('<div slot="row"><!></div>'),lv=T('<div class="music-card svelte-m7c4tz"><!> <!></div>'),cv=T('<div class="content-padded svelte-m7c4tz"><div class="music-grid playlists-grid-override svelte-m7c4tz"></div></div>'),uv=T('<button class="card-menu-btn svelte-m7c4tz"><!></button>'),vv=T('<div class="music-card svelte-m7c4tz"><div class="card-img-container svelte-m7c4tz"><div class="icon-wrap svelte-m7c4tz"><!></div> <!> <div class="play-overlay svelte-m7c4tz"><span class="overlay-icon svelte-m7c4tz"><!></span></div></div> <div class="card-title svelte-m7c4tz"> </div> <div class="card-sub-row svelte-m7c4tz"><div class="card-sub svelte-m7c4tz"> </div></div></div>'),dv=T('<div class="content-padded svelte-m7c4tz"><div class="music-grid playlists-grid-override svelte-m7c4tz"><div class="music-card svelte-m7c4tz"><div class="card-img-container dashed-cover svelte-m7c4tz"><div class="icon-wrap svelte-m7c4tz"><!></div></div> <div class="card-title svelte-m7c4tz">New Playlist</div></div> <!></div></div>'),fv=T("<div><!></div>");function hv(e,n){ft(n,!1);const t=()=>xe(jt,"$navigationStack",u),r=()=>xe(ir,"$activePlaylistTracks",u),a=()=>xe(Ys,"$isLoadingTracks",u),i=()=>xe(va,"$playlists",u),o=()=>xe(Bn,"$queue",u),l=()=>xe(Vs,"$isLoadingPlaylists",u),[u,c]=It(),v=$(),h=$(),f=$();let p=$(!1),x=$(!1),b=$(!1),_=$(""),E=$("");br(()=>{!s(h)&&i().length===0&&pa()});function L(M){const A=M.reduce((O,U)=>O+(parseFloat(U.time)||0),0);if(A>0){const O=Math.floor(A/3600),U=Math.floor(A%3600/60);g(_,O>0?`${O} hr ${U} min`:`${U} min`)}else g(_,"");const J=new Set;M.forEach(O=>{O.qualityBadge&&J.add(O.qualityBadge.split(" ")[0])}),g(E,J.size===1?M[0].qualityBadge:J.size>1?"Mixed":"")}function V(M){An("details",M)}function G(){if(o().length===0){$n({title:"Create Playlist",message:"Queue is empty. Add tracks to queue before saving a playlist.",confirmLabel:"OK",type:"alert"});return}$n({title:"New Playlist",message:"Save current queue as a new playlist:",type:"prompt",placeholder:"Playlist Name",confirmLabel:"Create",onConfirm:M=>{M&&rn.createPlaylistFromQueue(M)}})}function H(M,A){A.name!=="Favorites"&&(M.stopPropagation(),M.preventDefault(),Lr(M,null,{type:"playlist-card",playlist:A}))}function W(){$n({title:"Replace Queue?",message:`This will clear your current queue and play "${s(v).data.name}".`,confirmLabel:"Play",type:"confirm",onConfirm:()=>{g(x,!0),Ji(s(v).data.name,0)}})}function ue(M){s(p)||_s(M)}function Y(){if(r().length>0){const M=s(v).data.name.replace(/"/g,'\\"');as(`load "${M}"`),g(b,!0),setTimeout(()=>{g(b,!1)},2e3)}}function ge(){g(p,!s(p))}function me(M){const A=s(v).data.name,J=r();J.splice(M,1),ir.set(J),Gi(A,M),L(J)}function ae(M,A){Zi(s(v).data.name,M,A)}X(()=>t(),()=>{g(v,t()[t().length-1])}),X(()=>s(v),()=>{g(h,s(v).view==="details")}),X(()=>s(v),()=>{s(v)&&(g(x,!1),g(b,!1))}),X(()=>(s(h),r(),a()),()=>{if(s(h)&&r().length>0){const M=r();if(!M[0]._uid){const A=M.map(J=>({...J,_uid:Math.random()}));ir.set(A)}L(M)}else s(h)&&r().length===0&&!a()&&(g(_,"0 min"),g(E,""))}),X(()=>(s(h),s(v),Zc),()=>{s(h)&&s(v).data&&(g(p,!1),Ki(s(v).data.name))}),X(()=>s(v),()=>{g(f,s(v)?.data?.name==="Favorites")}),Bt(),_t();var N=fv();let R;var ne=d(N);{var F=M=>{ms(M,{get itemsStore(){return ir},get isLoading(){return a()},get isEditMode(){return s(p)},emptyText:"This playlist is empty.",onMoveItem:ae,$$slots:{header:(A,J)=>{var O=iv(),U=d(O),K=d(U),S=d(K),P=d(S);te(P,()=>(s(f),q(y),k(()=>s(f)?y.HEART_FILLED:y.PLAYLISTS)));var I=m(K,2),ee=d(I),ie=m(d(ee),2),pe=d(ie),D=m(ie,2),Q=d(D);{var B=Me=>{var Ce=nv();w(Me,Ce)},re=Me=>{var Ce=av(),Oe=$e(Ce),Ie=d(Oe),fe=m(Oe,2);{var Te=be=>{var Re=rv(),he=d(Re);de(()=>ce(he,s(_))),w(be,Re)};j(fe,be=>{s(_)&&be(Te)})}var Ee=m(fe,2);{var Se=be=>{var Re=sv(),he=d(Re);de(()=>ce(he,s(E))),w(be,Re)};j(Ee,be=>{s(E)&&be(Se)})}de(()=>ce(Ie,`${r(),k(()=>r().length)??""} tracks`)),w(Me,Ce)};j(Q,Me=>{a()?Me(B):Me(re,!1)})}var se=m(ee,2),z=d(se),ve=d(z),_e=m(z,2),ke=d(_e),Ne=m(_e,2);let ye;var oe=d(Ne);te(oe,()=>(s(p),q(y),k(()=>s(p)?y.ACCEPT:y.EDIT))),de(()=>{Ze(K,`background: ${s(f),s(v),k(()=>s(f)?"linear-gradient(135deg, hsl(348, 95%, 58%), hsl(348, 90%, 40%))":s(v).data.color||"#333")??""};`),bt(ie,"title",(s(v),k(()=>s(v).data.name))),ce(pe,(s(v),k(()=>s(v).data.name))),z.disabled=s(x),ce(ve,s(x)?"Playing...":"Play All"),_e.disabled=s(b),ce(ke,s(b)?"Added":"To Queue"),ye=Fe(Ne,1,"btn-action svelte-m7c4tz",null,ye,{active:s(p)})}),C("click",z,W),C("click",_e,Y),C("click",Ne,ge),w(A,O)},row:(A,J)=>{var O=ov();const U=tt(()=>J.item),K=tt(()=>J.index),S=tt(()=>J.startDrag);var P=d(O);gs(P,{get track(){return s(U)},get index(){return s(K)},get isEditable(){return s(p)},$$events:{play:()=>ue(s(U)),remove:()=>me(s(K)),startdrag(...I){s(S)?.apply(this,I)}}}),w(A,O)}}})},Z=M=>{var A=We(),J=$e(A);{var O=K=>{var S=cv(),P=d(S);qt(P,4,()=>Array(8),mn,(I,ee)=>{var ie=lv(),pe=d(ie);Pn(pe,{width:"100%",style:"aspect-ratio: 1; border-radius: 12px; margin-bottom: 12px;"});var D=m(pe,2);Pn(D,{width:"60%",height:"16px"}),w(I,ie)}),w(K,S)},U=K=>{var S=dv(),P=d(S),I=d(P),ee=d(I),ie=d(ee),pe=d(ie);te(pe,()=>(q(y),k(()=>y.ADD)));var D=m(I,2);qt(D,1,i,mn,(Q,B)=>{const re=tt(()=>(s(B),k(()=>s(B).name==="Favorites")));var se=vv(),z=d(se),ve=d(z),_e=d(ve);te(_e,()=>(q(s(re)),q(y),k(()=>s(re)?y.HEART_FILLED:y.PLAYLISTS)));var ke=m(ve,2);{var Ne=Ee=>{var Se=uv(),be=d(Se);te(be,()=>(q(y),k(()=>y.DOTS))),C("click",Se,Re=>H(Re,s(B))),w(Ee,Se)};j(ke,Ee=>{s(re)||Ee(Ne)})}var ye=m(ke,2),oe=d(ye),Me=d(oe);te(Me,()=>(q(y),k(()=>y.PLAY)));var Ce=m(z,2),Oe=d(Ce),Ie=m(Ce,2),fe=d(Ie),Te=d(fe);Rt(()=>C("click",se,()=>V(s(B)))),ia(se,Ee=>ga?.(Ee)),Rt(()=>C("longpress",se,Ee=>H(Ee.detail.originalEvent,s(B)))),Rt(()=>C("contextmenu",se,Ee=>H(Ee,s(B)))),de(Ee=>{Ze(z,`background: ${s(B),k(()=>s(B).color)??""};`),ce(Oe,(s(B),k(()=>s(B).name))),ce(Te,Ee)},[()=>(s(B),k(()=>s(B).lastModified?new Date(s(B).lastModified).toLocaleDateString():"Playlist"))]),w(Q,se)}),C("click",I,G),w(K,S)};j(J,K=>{l()?K(O):K(U,!1)},!0)}w(M,A)};j(ne,M=>{s(h)?M(F):M(Z,!1)})}de(()=>R=Fe(N,1,"view-container svelte-m7c4tz",null,R,{scrollable:!s(h)})),w(e,N),ht(),c()}var pv=T('<button class="clear-icon-btn svelte-1d3z1zm"><!></button>'),_v=T('<div class="spinner svelte-1d3z1zm"></div>'),gv=T('<div class="placeholder-state svelte-1d3z1zm"><div class="placeholder-icon svelte-1d3z1zm">ð</div> <p>Type to search your library</p></div>'),mv=T('<div class="empty-text svelte-1d3z1zm"> </div>'),bv=T('<div slot="fallback" class="icon-fallback svelte-1d3z1zm">ð¿</div>'),wv=T('<div class="meta-tag"> </div>'),yv=T('<div class="meta-tag quality"> </div>'),kv=T('<div class="music-card svelte-1d3z1zm"><div class="card-img-container svelte-1d3z1zm"><!> <div class="play-overlay svelte-1d3z1zm"><span class="overlay-icon svelte-1d3z1zm"><!></span></div></div> <div class="card-title svelte-1d3z1zm"> </div> <div class="card-sub-row svelte-1d3z1zm"><div class="card-sub text-ellipsis svelte-1d3z1zm"> </div> <!> <!></div></div>'),xv=T('<div class="header-label section-spacing svelte-1d3z1zm">Albums</div> <div class="music-grid horizontal section-mb svelte-1d3z1zm"></div>',1),Ev=T('<div class="header-label svelte-1d3z1zm">Tracks</div>'),Sv=T("<!> <!>",1),Mv=T('<div slot="header" class="content-padded svelte-1d3z1zm"><!></div>'),Tv=T('<div slot="row"><!></div>'),$v=T('<div class="view-container svelte-1d3z1zm"><div class="content-padded no-bottom-pad svelte-1d3z1zm"><div class="search-input-container svelte-1d3z1zm"><span class="search-icon svelte-1d3z1zm"><!></span> <input type="text" placeholder="Artists, songs, or albums" autoFocus class="svelte-1d3z1zm"/> <!> <!></div></div> <!></div>');function Av(e,n){ft(n,!1);const t=()=>xe(Mr,"$searchQuery",a),r=()=>xe(o,"$tracksStore",a),[a,i]=It(),o=De([]);let l=$([]),u=$(!1),c,v=$(!1);br(()=>{t().length>=2&&p(t())});function h(N){Mr.set(N.target.value),clearTimeout(c),c=setTimeout(()=>{p(t())},300)}function f(){Mr.set(""),o.set([]),g(l,[]),g(v,!1)}async function p(N){const R=N.trim().toLowerCase();if(R.length<2){o.set([]),g(l,[]),g(v,!1);return}g(u,!0),g(v,!0);try{const ne=await Sn.search(R),F=ne.map((M,A)=>({...M,_uid:M.file?`${M.file}-${A}`:`search-${A}`}));o.set(F);const Z=new Map;ne.forEach(M=>{const A=M.album;if(A&&!Z.has(A)){const J=A.toLowerCase().includes(R),O=M.artist&&M.artist.toLowerCase().includes(R);if(J||O){let U=String(M.year||"");U.length>4&&(U=U.substring(0,4)),Z.set(A,{name:A,artist:M.artist,file:M.file,thumbHash:M.thumbHash,_uid:`alb-${A}`,year:U,qualityBadge:M.qualityBadge})}}}),g(l,Array.from(Z.values()))}finally{g(u,!1)}}function x(N){_s(N)}function b(N){An("tracks_by_album",{name:N.name,artist:N.artist})}function _(N){N.deltaY!==0&&(N.currentTarget.scrollLeft+=N.deltaY)}_t();var E=$v(),L=d(E),V=d(L),G=d(V),H=d(G);te(H,()=>y.SEARCH);var W=m(G,2),ue=m(W,2);{var Y=N=>{var R=pv(),ne=d(R);te(ne,()=>y.CLOSE),C("click",R,f),w(N,R)};j(ue,N=>{t().length>0&&N(Y)})}var ge=m(ue,2);{var me=N=>{var R=_v();w(N,R)};j(ge,N=>{s(u)&&N(me)})}var ae=m(L,2);ms(ae,{get itemsStore(){return o},isEditMode:!1,isLoading:!1,emptyText:"",$$slots:{header:(N,R)=>{var ne=Mv(),F=d(ne);{var Z=A=>{var J=gv();w(A,J)},M=A=>{var J=We(),O=$e(J);{var U=S=>{var P=mv(),I=d(P);de(()=>ce(I,`No results found for "${t()??""}"`)),w(S,P)},K=S=>{var P=Sv(),I=$e(P);{var ee=D=>{var Q=xv(),B=m($e(Q),2);qt(B,5,()=>s(l),re=>re._uid,(re,se)=>{var z=kv(),ve=d(z),_e=d(ve);{let be=tt(()=>Ir(s(se),"md"));Kn(_e,{get src(){return s(be)},get alt(){return s(se).name},radius:"8px",$$slots:{fallback:(Re,he)=>{var Ae=bv();w(Re,Ae)}}})}var ke=m(_e,2),Ne=d(ke),ye=d(Ne);te(ye,()=>y.PLAY);var oe=m(ve,2),Me=d(oe),Ce=m(oe,2),Oe=d(Ce),Ie=d(Oe),fe=m(Oe,2);{var Te=be=>{var Re=wv(),he=d(Re);de(()=>ce(he,s(se).year)),w(be,Re)};j(fe,be=>{s(se).year&&s(se).year!=="0"&&s(se).year!==0&&be(Te)})}var Ee=m(fe,2);{var Se=be=>{var Re=yv(),he=d(Re);de(Ae=>ce(he,Ae),[()=>s(se).qualityBadge.split(" ")[0]]),w(be,Re)};j(Ee,be=>{s(se).qualityBadge&&be(Se)})}de(()=>{bt(oe,"title",s(se).name),ce(Me,s(se).name),ce(Ie,s(se).artist)}),C("click",z,()=>b(s(se))),w(re,z)}),C("wheel",B,_),w(D,Q)};j(I,D=>{s(l).length>0&&D(ee)})}var ie=m(I,2);{var pe=D=>{var Q=Ev();w(D,Q)};j(ie,D=>{r().length>0&&D(pe)})}w(S,P)};j(O,S=>{!s(u)&&r().length===0&&s(l).length===0&&s(v)?S(U):S(K,!1)},!0)}w(A,J)};j(F,A=>{t().length<2?A(Z):A(M,!1)})}w(N,ne)},row:(N,R)=>{var ne=Tv();const F=tt(()=>R.item),Z=tt(()=>R.index);var M=d(ne);gs(M,{get track(){return s(F)},get index(){return s(Z)},isEditable:!1,$$events:{play:()=>x(s(F))}}),w(N,ne)}}}),de(()=>Sl(W,t())),C("input",W,h),w(e,E),ht(),i()}var Cv=T('<div class="view-container scrollable svelte-1j67jqh"><div class="content-padded svelte-1j67jqh"><h1 class="header-title big svelte-1j67jqh">Settings</h1> <div class="section svelte-1j67jqh"><div class="section-header svelte-1j67jqh"><span class="icon-svg svelte-1j67jqh"><!></span> <span>Connection</span></div> <div class="card svelte-1j67jqh"><div class="row svelte-1j67jqh"><label for="ip" class="svelte-1j67jqh">Moode Device IP</label> <div class="input-group svelte-1j67jqh"><input id="ip" type="text" placeholder="192.168.x.x" class="svelte-1j67jqh"/> <button class="btn-primary small svelte-1j67jqh">Save</button></div></div> <p class="hint svelte-1j67jqh"> </p></div></div> <div class="section svelte-1j67jqh"><div class="section-header svelte-1j67jqh"><span>Alarm Clock</span></div> <div class="card clickable svelte-1j67jqh"><div class="row space-between svelte-1j67jqh"><span>Wake up time</span> <span class="value svelte-1j67jqh">Coming Soon</span></div></div></div> <div class="section svelte-1j67jqh"><div class="section-header svelte-1j67jqh"><span>Appearance</span></div> <div class="card clickable svelte-1j67jqh"><div class="row space-between svelte-1j67jqh"><span>Theme</span> <span class="value svelte-1j67jqh">Dark (Default)</span></div></div></div> <div class="section svelte-1j67jqh"><div class="section-header svelte-1j67jqh"><span>Language</span></div> <div class="card clickable svelte-1j67jqh"><div class="row space-between svelte-1j67jqh"><span>Interface Language</span> <span class="value svelte-1j67jqh">English</span></div></div></div> <div class="section svelte-1j67jqh"><div class="section-header svelte-1j67jqh"><span>About</span></div> <div class="card svelte-1j67jqh"><div class="info-row svelte-1j67jqh"><span>Version</span> <span class="mono svelte-1j67jqh"> </span></div> <div class="separator svelte-1j67jqh"></div> <div class="info-row svelte-1j67jqh"><span>Build Date</span> <span class="mono small svelte-1j67jqh"> </span></div> <div class="separator svelte-1j67jqh"></div> <div class="info-row svelte-1j67jqh"><span>Developer</span> <span>Moode WaveUI</span></div></div></div></div></div>');function Pv(e,n){ft(n,!1);let t=$(lr.MOODE_IP);function r(){lr.setMoodeIp(s(t)),ze("IP Saved. Reloading...","success"),setTimeout(()=>location.reload(),1e3)}const a="0.0.1",i="2026-01-05T09:09:27.082Z",o=new Date(i).toLocaleString();function l(){ze("Coming soon in next update","info")}_t();var u=Cv(),c=d(u),v=m(d(c),2),h=d(v),f=d(h),p=d(f);te(p,()=>y.SETTINGS||y.MENU);var x=m(h,2),b=d(x),_=m(d(b),2),E=d(_),L=m(E,2),V=m(b,2),G=d(V),H=m(v,2),W=m(d(H),2),ue=m(H,2),Y=m(d(ue),2),ge=m(ue,2),me=m(d(ge),2),ae=m(ge,2),N=m(d(ae),2),R=d(N),ne=m(d(R),2),F=d(ne),Z=m(R,4),M=m(d(Z),2),A=d(M);de(()=>{ce(G,`Current: ${lr.MOODE_IP??""}`),ce(F,a),ce(A,o)}),hs(E,()=>s(t),J=>g(t,J)),C("click",L,r),C("click",W,l),C("click",Y,l),C("click",me,l),wt(1,u,()=>an,()=>({duration:200})),w(e,u),ht()}var Rv=T('<span class="meta-tag"> </span>'),Lv=T('<div slot="header" class="content-padded svelte-185fgrr"><div class="view-header svelte-185fgrr"><div class="header-art svelte-185fgrr" style="background: var(--c-surface-active);"><div class="header-icon-wrap svelte-185fgrr"><!></div></div> <div class="header-info svelte-185fgrr"><div class="header-text-group svelte-185fgrr"><div class="header-label svelte-185fgrr">Now Playing</div> <h1 class="header-title svelte-185fgrr">Current Queue</h1> <div class="meta-badges"><span class="meta-tag"> </span> <!></div></div> <div class="header-actions svelte-185fgrr"><button class="btn-secondary svelte-185fgrr" title="Clear Queue">Clear</button> <button class="btn-action svelte-185fgrr" title="Save Queue"><!></button> <button><!></button></div></div></div></div>'),Iv=T('<div slot="row"><!></div>'),zv=T('<div class="view-container svelte-185fgrr"><!></div>');function Nv(e,n){ft(n,!1);const t=()=>xe(Bn,"$queue",r),[r,a]=It();let i=$(!1),o=$("");function l(){g(i,!s(i))}function u(b){s(i)||as(`play ${b}`)}function c(b){Qt.removeFromQueue(b)}async function v(){$n({title:"Save Playlist",message:"Enter a name for this playlist:",type:"prompt",placeholder:"Playlist Name",confirmLabel:"Save",onConfirm:async b=>{b&&b.trim().length>0&&(await Qt.saveQueue(b),pa())}})}function h(){t().length!==0&&$n({title:"Clear Queue",message:"Are you sure you want to clear the entire play queue?",confirmLabel:"Clear All",type:"confirm",onConfirm:async()=>{Bn.set([]),Gt.set({title:"Not Playing",artist:"",album:"",file:"",stationName:null,id:null,pos:null}),ct.update(b=>({...b,state:"stop",song:-1,songid:-1,elapsed:0})),await as("clear")}})}function f(b,_){Qt.moveTrack(b,_)}X(()=>t(),()=>{if(t().length>=0){const b=t().reduce((_,E)=>_+(parseFloat(E.time)||0),0);if(b>0){const _=Math.floor(b/3600),E=Math.floor(b%3600/60);_>0?g(o,`${_} hr ${E} min`):g(o,`${E} min`)}else g(o,"")}}),Bt(),_t();var p=zv(),x=d(p);ms(x,{get itemsStore(){return Bn},get isEditMode(){return s(i)},emptyText:"Queue is empty",onMoveItem:f,$$slots:{header:(b,_)=>{var E=Lv(),L=d(E),V=d(L),G=d(V),H=d(G);te(H,()=>(q(y),k(()=>y.MENU)));var W=m(V,2),ue=d(W),Y=m(d(ue),4),ge=d(Y),me=d(ge),ae=m(ge,2);{var N=O=>{var U=Rv(),K=d(U);de(()=>ce(K,s(o))),w(O,U)};j(ae,O=>{s(o)&&O(N)})}var R=m(ue,2),ne=d(R),F=m(ne,2),Z=d(F);te(Z,()=>(q(y),k(()=>y.SAVE)));var M=m(F,2);let A;var J=d(M);te(J,()=>(s(i),q(y),k(()=>s(i)?y.ACCEPT:y.EDIT))),de(()=>{ce(me,`${t(),k(()=>t().length)??""} tracks`),ne.disabled=(t(),k(()=>t().length===0)),F.disabled=(t(),k(()=>t().length===0)),A=Fe(M,1,"btn-action svelte-185fgrr",null,A,{active:s(i)}),bt(M,"title",s(i)?"Finish Editing":"Edit Queue"),M.disabled=(t(),k(()=>t().length===0))}),C("click",ne,h),C("click",F,v),C("click",M,l),w(b,E)},row:(b,_)=>{var E=Iv();const L=tt(()=>_.item),V=tt(()=>_.index),G=tt(()=>_.startDrag);var H=d(E);gs(H,{get track(){return s(L)},get index(){return s(V)},get isEditable(){return s(i)},$$events:{play:()=>u(s(V)),remove:()=>c(s(V)),startdrag(...W){s(G)?.apply(this,W)}}}),w(b,E)}}}),w(e,p),ht(),a()}var Ov=T('<div class="knob svelte-1jla3sy"></div>'),Dv=T('<div class="tooltip current svelte-1jla3sy"> </div> <span></span>',1),jv=T('<div slot="fallback" class="icon-fallback svelte-1jla3sy"><!></div>'),Fv=T('<span class="meta-tag quality"> </span>'),qv=T('<div class="dot svelte-1jla3sy"></div>'),Bv=T("<button><!> <!></button>"),Uv=T('<div class="dock svelte-1jla3sy"><div class="progress-shadow svelte-1jla3sy"></div> <div><div class="rail svelte-1jla3sy"></div> <div class="fill svelte-1jla3sy"><!></div> <!></div> <div class="grid svelte-1jla3sy"><div class="info svelte-1jla3sy"><div class="art svelte-1jla3sy"><!></div> <div class="meta svelte-1jla3sy"><div class="title-row svelte-1jla3sy"><div class="title text-ellipsis svelte-1jla3sy"> </div> <button class="btn-icon tiny-dots svelte-1jla3sy"><!></button></div> <div class="artist-row svelte-1jla3sy"><div class="artist text-ellipsis svelte-1jla3sy"> </div> <!></div></div></div> <div class="controls svelte-1jla3sy"><button><!></button> <button class="btn-icon"><!></button> <button class="play-btn flex-center svelte-1jla3sy"><!></button> <button class="btn-icon"><!></button> <!></div> <div class="volume desktop svelte-1jla3sy"><div class="vol-icon svelte-1jla3sy"><!></div> <div class="custom-slider svelte-1jla3sy"><div class="slider-bg svelte-1jla3sy"><div class="slider-fill svelte-1jla3sy"></div> <div class="slider-knob svelte-1jla3sy"></div></div></div></div></div></div>');function Hv(e,n){ft(n,!1);const t=()=>xe(ct,"$status",l),r=()=>xe(Gt,"$currentSong",l),a=()=>xe(En,"$favorites",l),i=()=>xe(Rn,"$stations",l),o=()=>xe(rs,"$isFullPlayerOpen",l),[l,u]=It(),c=$(),v=$(),h=$(),f=$(),p=$(),x=$(),b=$(),_=$(),E=$(),L=$(),V=$(),G=$();let H=$(!1),W=$(!1),ue=!1,Y=$(0),ge=$(),me=$();const ae=P=>I=>{I.stopPropagation(),P()};function N(P){if(isNaN(P)||P===null)return"0:00";const I=Math.floor(P/60),ee=Math.floor(P%60);return`${I}:${ee<10?"0":""}${ee}`}function R(P,I){const ee=I.getBoundingClientRect();return Math.max(0,Math.min(1,(P.clientX-ee.left)/ee.width))}function ne(P){s(f)||(g(W,!0),g(Y,R(P,s(ge))),window.addEventListener("mousemove",F),window.addEventListener("mouseup",Z))}function F(P){if(s(W)&&g(Y,R(P,s(ge))),ue){const I=Math.round(R(P,s(me))*100);zr(I)}}function Z(){s(W)&&!s(f)&&ha(s(Y)*s(c)),g(W,!1),ue=!1,window.removeEventListener("mousemove",F),window.removeEventListener("mouseup",Z)}function M(P){ue=!0;const I=Math.round(R(P,s(me))*100);zr(I),window.addEventListener("mousemove",F),window.addEventListener("mouseup",Z)}function A(){const P=(s(G)+1)%3;P===0?(t().random&&Un(),t().repeat&&Hn()):P===1?(t().random||Un(),t().repeat&&Hn()):P===2&&(t().random&&Un(),t().repeat||Hn())}function J(P){P.stopPropagation(),Lr(P,r(),{type:"general",source:"miniplayer"})}function O(P){Lr(P.detail.originalEvent,r(),{type:"general",source:"miniplayer"})}X(()=>t(),()=>{g(c,t().duration>0?t().duration:1)}),X(()=>t(),()=>{g(v,t().elapsed||0)}),X(()=>t(),()=>{g(h,t().state==="play")}),X(()=>r(),()=>{g(f,r().file?.startsWith("http"))}),X(()=>r(),()=>{g(p,r().title||"Not Playing")}),X(()=>r(),()=>{g(x,r().stationName||r().artist||"Moode")}),X(()=>(r(),a()),()=>{g(b,r().file&&a().has(r().file))}),X(()=>(r(),i()),()=>{g(_,hr(r(),i(),r().stationName))}),X(()=>(s(f),s(W),s(Y),s(v),s(c)),()=>{g(E,s(f)?0:s(W)?s(Y)*100:s(v)/s(c)*100)}),X(()=>(s(h),s(W),s(f)),()=>{g(L,s(h)&&!s(W)&&!s(f))}),X(()=>t(),()=>{g(V,t().bitrate?`${t().bitrate} kbps`:t().format||"")}),X(()=>t(),()=>{g(G,t().repeat?2:t().random?1:0)}),Bt(),_t();var U=We(),K=$e(U);{var S=P=>{var I=Uv(),ee=d(I),ie=m(ee,2);let pe;var D=m(d(ie),2),Q=d(D);{var B=Pe=>{var et=Ov();w(Pe,et)};j(Q,Pe=>{s(f)||Pe(B)})}var re=m(D,2);{var se=Pe=>{var et=Dv(),le=$e(et),Le=d(le);de(st=>{Ze(le,`left: ${s(E)??""}%`),ce(Le,st)},[()=>(s(W),s(Y),s(c),s(v),k(()=>s(W)?N(s(Y)*s(c)):N(s(v))))]),w(Pe,et)};j(re,Pe=>{(s(H)||s(W))&&!s(f)&&Pe(se)})}Cn(ie,Pe=>g(ge,Pe),()=>s(ge));var z=m(ie,2),ve=d(z),_e=d(ve),ke=d(_e);Kn(ke,{get src(){return s(_)},alt:"art",radius:"4px",$$slots:{fallback:(Pe,et)=>{var le=jv(),Le=d(le);te(Le,()=>(s(f),q(y),k(()=>s(f)?y.RADIO:y.ALBUMS))),w(Pe,le)}}});var Ne=m(_e,2),ye=d(Ne),oe=d(ye),Me=d(oe),Ce=m(oe,2),Oe=d(Ce);te(Oe,()=>(q(y),k(()=>y.DOTS)));var Ie=m(ye,2),fe=d(Ie),Te=d(fe),Ee=m(fe,2);{var Se=Pe=>{var et=Fv(),le=d(et);de(()=>ce(le,s(V))),w(Pe,et)};j(Ee,Pe=>{s(V)&&Pe(Se)})}var be=m(ve,2),Re=d(be),he=wr(()=>ae(()=>rn.toggleFavorite(r())));let Ae;var Ve=d(Re);te(Ve,()=>(s(b),q(y),k(()=>s(b)?y.HEART_FILLED:y.HEART)));var Ge=m(Re,2),je=wr(()=>ae(()=>Nr("previous"))),Qe=d(Ge);te(Qe,()=>(q(y),k(()=>y.PREVIOUS)));var nt=m(Ge,2),gt=wr(()=>ae(ps)),cn=d(nt);te(cn,()=>(t(),q(y),k(()=>t().state==="play"?y.PAUSE:y.PLAY)));var Mt=m(nt,2),yt=wr(()=>ae(()=>Nr("next"))),He=d(Mt);te(He,()=>(q(y),k(()=>y.NEXT)));var Je=m(Mt,2);{var rt=Pe=>{var et=Bv(),le=wr(()=>ae(A));let Le;var st=d(et);{var Jt=kt=>{var at=We(),Ht=$e(at);te(Ht,()=>(q(y),k(()=>y.REPEAT))),w(kt,at)},bs=kt=>{var at=We(),Ht=$e(at);te(Ht,()=>(q(y),k(()=>y.SHUFFLE))),w(kt,at)};j(st,kt=>{s(G)===2?kt(Jt):kt(bs,!1)})}var ws=m(st,2);{var ys=kt=>{var at=qv();w(kt,at)};j(ws,kt=>{s(G)>0&&kt(ys)})}de(()=>Le=Fe(et,1,"btn-icon desktop mode-btn svelte-1jla3sy",null,Le,{active:s(G)>0})),C("click",et,function(...kt){s(le)?.apply(this,kt)}),w(Pe,et)};j(Je,Pe=>{s(f)||Pe(rt)})}var Ut=m(be,2),lt=d(Ut),zt=d(lt);te(zt,()=>(q(y),k(()=>y.VOLUME)));var Tt=m(lt,2),Ln=d(Tt),un=d(Ln),Zt=m(un,2);Cn(Tt,Pe=>g(me,Pe),()=>s(me)),Rt(()=>C("click",I,()=>rs.set(!0))),ia(I,(Pe,et)=>ga?.(Pe,et),()=>500),Rt(()=>C("longpress",I,O)),de(()=>{Ze(ee,`width: ${s(E)??""}%; transition: ${s(L)?"width 0.25s linear":"none"}`),pe=Fe(ie,1,"progress-bar svelte-1jla3sy",null,pe,{radio:s(f)}),Ze(D,`width: ${s(E)??""}%; transition: ${s(L)?"width 0.25s linear":"none"}`),bt(oe,"title",s(p)),ce(Me,s(p)),bt(fe,"title",s(x)),ce(Te,s(x)),Ae=Fe(Re,1,"btn-icon desktop svelte-1jla3sy",null,Ae,{liked:s(b)}),Ze(un,`width: ${t(),k(()=>t().volume)??""}%`),Ze(Zt,`left: ${t(),k(()=>t().volume)??""}%`)}),C("mouseenter",ie,()=>g(H,!0)),C("mouseleave",ie,()=>g(H,!1)),C("mousedown",ie,Yt(ne)),C("click",ie,Yt(function(Pe){Rr.call(this,n,Pe)})),C("click",Ce,J),C("click",Re,function(...Pe){s(he)?.apply(this,Pe)}),C("click",Ge,function(...Pe){s(je)?.apply(this,Pe)}),C("click",nt,function(...Pe){s(gt)?.apply(this,Pe)}),C("click",Mt,function(...Pe){s(yt)?.apply(this,Pe)}),C("mousedown",Tt,Yt(M)),C("click",Tt,Yt(function(Pe){Rr.call(this,n,Pe)})),w(P,I)};j(K,P=>{o()||P(S)})}w(e,U),ht(),u()}var Vv=T('<div class="drag-zone svelte-1olwzt8"><div class="drag-handle-icon svelte-1olwzt8"><!></div></div>'),Yv=T('<div slot="fallback" class="icon-fallback svelte-1olwzt8"><!></div>'),Wv=T('<span class="meta-tag quality"> </span>'),Qv=T('<span class="dot svelte-1olwzt8"></span>'),Kv=T("<button><!> <!></button>"),Xv=T('<div style="width: 44px;"></div>'),Gv=T('<div><!> <div class="bg-container svelte-1olwzt8"><div class="bg-gradient-fallback svelte-1olwzt8"></div> <img class="bg-img svelte-1olwzt8" alt="" loading="eager"/> <div class="bg-overlay svelte-1olwzt8"></div></div> <div class="player-body svelte-1olwzt8"><div class="art-container svelte-1olwzt8"><div class="artwork svelte-1olwzt8"><!></div></div> <div class="controls-area svelte-1olwzt8"><div class="meta svelte-1olwzt8"><h1 class="title text-ellipsis svelte-1olwzt8"> </h1> <div class="artist-row svelte-1olwzt8"><h2 class="artist text-ellipsis svelte-1olwzt8"> </h2> <!></div></div> <div class="progress-section"><div><div class="common-track svelte-1olwzt8"><div class="common-fill svelte-1olwzt8"><div class="common-knob svelte-1olwzt8"></div></div></div></div> <div class="time-row svelte-1olwzt8"><span> </span> <span> </span></div></div> <div class="buttons-row svelte-1olwzt8"><button><!></button> <button class="btn-icon side-btn svelte-1olwzt8"><!></button> <button class="play-btn-large flex-center svelte-1olwzt8"><!></button> <button class="btn-icon side-btn svelte-1olwzt8"><!></button> <!></div> <div class="volume-row svelte-1olwzt8"><div class="vol-icon svelte-1olwzt8"><!></div> <div class="volume-hit-area svelte-1olwzt8"><div class="common-track svelte-1olwzt8"><div class="common-fill svelte-1olwzt8"></div> <div class="common-knob svelte-1olwzt8"></div></div></div></div></div></div></div>');function Xa(e,n){ft(n,!1);const t=()=>xe(Gt,"$currentSong",o),r=()=>xe(Rn,"$stations",o),a=()=>xe(ct,"$status",o),i=()=>xe(En,"$favorites",o),[o,l]=It(),u=$(),c=$(),v=$(),h=$(),f=$(),p=$(),x=$(),b=$(),_=$(),E=$(),L=$();let V=ot(n,"isDocked",8,!1),G=0,H=$(0),W=$(!1);function ue(){rs.set(!1)}function Y(le){if(V())return;const Le=le.target;Le.closest(".bar-hit-area")||Le.closest(".volume-hit-area")||(G=le.touches[0].clientY,g(W,!0))}function ge(le){if(!s(W)||V())return;const Le=le.touches[0].clientY-G;Le>0&&(le.cancelable&&Le>10&&le.preventDefault(),g(H,Le))}function me(){V()||(g(W,!1),s(H)>150?ue():g(H,0))}let ae=$(!1),N=$(0),R=$();function ne(le){const Le=Math.floor(le/60)||0,st=Math.floor(le%60)||0;return`${Le}:${st.toString().padStart(2,"0")}`}function F(le,Le){const st=Le.getBoundingClientRect(),Jt=le.touches?le.touches[0].clientX:le.clientX;return Math.max(0,Math.min(1,(Jt-st.left)/st.width))}function Z(le){s(h)||(g(ae,!0),g(N,F(le,s(R))))}function M(le){s(ae)&&g(N,F(le,s(R)))}function A(){s(ae)&&!s(h)&&ha(s(N)*s(c)),g(ae,!1)}let J=!1,O=$();function U(le){J=!0;const Le=Math.round(F(le,s(O))*100);zr(Le),window.addEventListener("mousemove",K),window.addEventListener("mouseup",S),window.addEventListener("touchmove",K,{passive:!1}),window.addEventListener("touchend",S)}function K(le){if(J){le.preventDefault();const Le=Math.round(F(le,s(O))*100);zr(Le)}}function S(){J=!1,window.removeEventListener("mousemove",K),window.removeEventListener("mouseup",S),window.removeEventListener("touchmove",K),window.removeEventListener("touchend",S)}function P(){const le=(s(b)+1)%3;le===0?(a().random&&Un(),a().repeat&&Hn()):le===1?(a().random||Un(),a().repeat&&Hn()):le===2&&(a().random&&Un(),a().repeat||Hn())}X(()=>(t(),r()),()=>{g(u,hr(t(),r(),t().stationName))}),X(()=>a(),()=>{g(c,a().duration||1)}),X(()=>a(),()=>{g(v,a().elapsed||0)}),X(()=>t(),()=>{g(h,t().file?.startsWith("http"))}),X(()=>a(),()=>{g(f,a().state==="play")}),X(()=>(s(f),s(ae),s(h)),()=>{g(p,s(f)&&!s(ae)&&!s(h))}),X(()=>(s(h),s(ae),s(N),s(v),s(c)),()=>{g(x,s(h)?0:s(ae)?s(N)*100:s(v)/s(c)*100)}),X(()=>a(),()=>{g(b,a().repeat?2:a().random?1:0)}),X(()=>a(),()=>{g(_,a().bitrate?`${a().bitrate} kbps`:a().format||"")}),X(()=>(t(),i()),()=>{g(E,t().file&&i().has(t().file))}),X(()=>q(V()),()=>{g(L,V()?"8px":"var(--radius-xl)")}),Bt(),_t();var I=Gv();let ee;var ie=d(I);{var pe=le=>{var Le=Vv(),st=d(Le),Jt=d(st);te(Jt,()=>(q(y),k(()=>y.CHEVRON_DOWN))),C("touchstart",Le,Y),C("touchmove",Le,ge),C("touchend",Le,me),C("click",Le,ue),w(le,Le)};j(ie,le=>{V()||le(pe)})}var D=m(ie,2),Q=m(d(D),2),B=m(D,2),re=d(B),se=d(re),z=d(se);Kn(z,{get src(){return s(u)},alt:"Cover",get radius(){return s(L)},$$slots:{fallback:(le,Le)=>{var st=Yv(),Jt=d(st);te(Jt,()=>(s(h),q(y),k(()=>s(h)?y.RADIO:y.ALBUMS))),w(le,st)}}});var ve=m(re,2),_e=d(ve),ke=d(_e),Ne=d(ke),ye=m(ke,2),oe=d(ye),Me=d(oe),Ce=m(oe,2);{var Oe=le=>{var Le=Wv(),st=d(Le);de(()=>ce(st,s(_))),w(le,Le)};j(Ce,le=>{s(_)&&le(Oe)})}var Ie=m(_e,2),fe=d(Ie);let Te;var Ee=d(fe),Se=d(Ee);Cn(fe,le=>g(R,le),()=>s(R));var be=m(fe,2),Re=d(be),he=d(Re),Ae=m(Re,2),Ve=d(Ae),Ge=m(Ie,2),je=d(Ge);let Qe;var nt=d(je);te(nt,()=>(s(E),q(y),k(()=>s(E)?y.HEART_FILLED:y.HEART)));var gt=m(je,2),cn=d(gt);te(cn,()=>(q(y),k(()=>y.PREVIOUS)));var Mt=m(gt,2),yt=d(Mt);te(yt,()=>(a(),q(y),k(()=>a().state==="play"?y.PAUSE:y.PLAY)));var He=m(Mt,2),Je=d(He);te(Je,()=>(q(y),k(()=>y.NEXT)));var rt=m(He,2);{var Ut=le=>{var Le=Kv();let st;var Jt=d(Le);{var bs=at=>{var Ht=We(),ks=$e(Ht);te(ks,()=>(q(y),k(()=>y.REPEAT))),w(at,Ht)},ws=at=>{var Ht=We(),ks=$e(Ht);te(ks,()=>(q(y),k(()=>y.SHUFFLE))),w(at,Ht)};j(Jt,at=>{s(b)===2?at(bs):at(ws,!1)})}var ys=m(Jt,2);{var kt=at=>{var Ht=Qv();w(at,Ht)};j(ys,at=>{s(b)>0&&at(kt)})}de(()=>st=Fe(Le,1,"btn-icon side-btn mode-btn svelte-1olwzt8",null,st,{active:s(b)>0})),C("click",Le,P),w(le,Le)},lt=le=>{var Le=Xv();w(le,Le)};j(rt,le=>{s(h)?le(lt,!1):le(Ut)})}var zt=m(Ge,2),Tt=d(zt),Ln=d(Tt);te(Ln,()=>(q(y),k(()=>y.VOLUME)));var un=m(Tt,2),Zt=d(un),Pe=d(Zt),et=m(Pe,2);Cn(un,le=>g(O,le),()=>s(O)),de((le,Le)=>{ee=Fe(I,1,"full-player svelte-1olwzt8",null,ee,{"is-docked":V()}),Ze(I,V()?"":`transform: translateY(${s(H)}px); transition: ${s(W)?"none":"transform 0.3s cubic-bezier(0.2, 0.8, 0.2, 1)"}`),bt(Q,"src",s(u)),Ze(se,`transform: scale(${1-s(H)/3e3})`),Ze(ve,`opacity: ${1-s(H)/400}`),ce(Ne,(t(),k(()=>t().title||"Not Playing"))),ce(Me,(t(),k(()=>t().stationName||t().artist||"Moode Audio"))),Te=Fe(fe,1,"bar-hit-area svelte-1olwzt8",null,Te,{"is-docked-bar":V()}),Ze(Se,`width: ${s(x)??""}%; transition: ${s(p)?"width 0.3s linear":"none"}`),ce(he,le),ce(Ve,Le),Qe=Fe(je,1,"btn-icon side-btn svelte-1olwzt8",null,Qe,{liked:s(E)}),Ze(Pe,`width: ${a(),k(()=>a().volume)??""}%`),Ze(et,`left: ${a(),k(()=>a().volume)??""}%; right: auto;`)},[()=>(s(ae),s(N),s(c),s(v),k(()=>s(ae)?ne(s(N)*s(c)):ne(s(v)))),()=>(s(h),s(c),k(()=>s(h)?"LIVE":ne(s(c))))]),C("mousedown",fe,Z),C("touchstart",fe,Z,void 0,!0),C("mousemove",fe,function(...le){(s(ae)?M:null)?.apply(this,le)}),C("touchmove",fe,function(...le){(s(ae)?M:null)?.apply(this,le)},void 0,!0),C("mouseup",fe,A),C("touchend",fe,A),C("click",je,()=>rn.toggleFavorite(t())),C("click",gt,()=>Nr("previous")),C("click",Mt,function(...le){ps?.apply(this,le)}),C("click",He,()=>Nr("next")),C("mousedown",un,Yt(U)),C("touchstart",un,Yt(U)),wt(3,I,()=>Fi,()=>({y:V()?0:800,duration:300,opacity:1})),w(e,I),ht(),l()}const Zv="/assets/wave-logo-C1390byt.svg",Gs={async syncLibrary(){if(qe(Vt))return;Vt.set(!0);const e=new Vi,n=window.location.origin+"/wave-api.php";e.postMessage({type:"START_SYNC",payload:{url:n}}),e.onmessage=t=>{const{type:r,status:a,count:i,message:o}=t.data;if(r==="PROGRESS"){const l={connecting:"Requesting library...",downloading:"Downloading data...",parsing:"Processing metadata...",saving:`Saving ${i} tracks...`};l[a]&&ze(l[a],"info")}r==="DONE"&&(ze(`Library updated: ${i} tracks`,"success"),Vt.set(!1),e.terminate()),r==="ERROR"&&(console.error("[API] Sync Error:",o),ze(`Sync Failed: ${o}`,"error"),Vt.set(!1),e.terminate())},e.onerror=t=>{console.error("[API] Worker crash:",t),ze("Sync worker crashed","error"),Vt.set(!1),e.terminate()}},async loadRadioStations(){if(!qe(Qr)){Qr.set(!0);try{const n=await fetch(Pc.STATIONS(!1));if(!n.ok)throw new Error("Network error");const t=await n.json();if(t.error)throw new Error(t.error);if(!Array.isArray(t))throw new Error("Invalid response format");const r=t.map(a=>({id:a.id,name:a.name,file:a.station,station:a.station,image:a.logo,genre:a.genre||"Radio"}));r.sort((a,i)=>a.name.localeCompare(i.name,void 0,{sensitivity:"base"})),Rn.set(r)}catch(e){console.error("[API] Failed to load stations",e),ze("Failed to load radio","error")}finally{Qr.set(!1)}}}};var Jv=T('<div class="backdrop svelte-ji5owg"></div>'),ed=T('<button><span class="icon svelte-ji5owg"><!></span> <span> </span></button>'),td=T('<!> <aside><div class="header svelte-ji5owg"><div class="header-inner svelte-ji5owg"><button class="collapse-btn svelte-ji5owg"><div class="chevron svelte-ji5owg"><!></div></button> <div><img alt="Logo" class="logo svelte-ji5owg"/></div></div> <button class="btn-icon mobile-close svelte-ji5owg"><!></button></div> <div class="scroll-area custom-scrollbar svelte-ji5owg"><nav class="svelte-ji5owg"><!> <button title="Search"><span class="icon svelte-ji5owg"><!></span> <span>Search</span></button> <div class="sep svelte-ji5owg"></div> <button class="nav-item sync svelte-ji5owg" title="Update Library"><span><!></span> <span> </span></button> <div class="sep svelte-ji5owg"></div> <button title="Settings"><span class="icon svelte-ji5owg"><!></span> <span>Settings</span></button></nav> <div class="footer svelte-ji5owg"><div>Moode WaveUI</div></div></div></aside>',1);function nd(e,n){ft(n,!1);const t=()=>xe(Vt,"$isSyncingLibrary",i),r=()=>xe(Ws,"$isSidebarCollapsed",i),a=()=>xe(Ct,"$activeMenuTab",i),[i,o]=It(),l=$();let u=ot(n,"isOpen",8,!1);const c=ca();let v=$(0),h=$(0),f=$(!1);const p=[{id:"queue",label:"Queue",icon:y.MENU},{id:"favorites",label:"Favorites",icon:y.HEART},{id:"artists",label:"Artists",icon:y.ARTISTS},{id:"albums",label:"Albums",icon:y.ALBUMS},{id:"playlists",label:"Playlists",icon:y.PLAYLISTS},{id:"radio",label:"Radio",icon:y.RADIO}];function x(fe){window.location.hash=`/${fe}`,c("close")}async function b(){t()||(await Gs.syncLibrary(),window.location.hash="/artists")}function _(){Ws.update(fe=>!fe)}function E(fe){u()&&(g(v,fe.touches[0].clientX),g(h,s(v)),g(f,!0))}function L(fe){s(f)&&g(h,fe.touches[0].clientX)}function V(){s(f)&&(s(h)-s(v)<-70&&c("close"),g(f,!1),g(v,0),g(h,0))}X(()=>(s(f),s(h),s(v)),()=>{g(l,s(f)?Math.min(0,s(h)-s(v)):0)}),Bt(),_t();var G=td(),H=$e(G);{var W=fe=>{var Te=Jv();C("click",Te,()=>c("close")),wt(3,Te,()=>an,()=>({duration:200})),w(fe,Te)};j(H,fe=>{u()&&fe(W)})}var ue=m(H,2);let Y,ge;var me=d(ue),ae=d(me),N=d(ae),R=d(N),ne=d(R);te(ne,()=>(q(y),k(()=>y.BACK)));var F=m(N,2);let Z;var M=d(F),A=m(ae,2),J=d(A);te(J,()=>(q(y),k(()=>y.CLOSE)));var O=m(me,2),U=d(O),K=d(U);qt(K,1,()=>p,mn,(fe,Te)=>{var Ee=ed();let Se;var be=d(Ee),Re=d(be);te(Re,()=>(s(Te),k(()=>s(Te).icon)));var he=m(be,2);let Ae;var Ve=d(he);de(()=>{Se=Fe(Ee,1,"nav-item svelte-ji5owg",null,Se,{active:a()===s(Te).id}),bt(Ee,"title",(s(Te),k(()=>s(Te).label))),Ae=Fe(he,1,"label-text svelte-ji5owg",null,Ae,{hidden:r()}),ce(Ve,(s(Te),k(()=>s(Te).label)))}),C("click",Ee,()=>x(s(Te).id)),w(fe,Ee)});var S=m(K,2);let P;var I=d(S),ee=d(I);te(ee,()=>(q(y),k(()=>y.SEARCH)));var ie=m(I,2);let pe;var D=m(S,4),Q=d(D);let B;var re=d(Q);te(re,()=>(q(y),k(()=>y.SYNC)));var se=m(Q,2);let z;var ve=d(se),_e=m(D,4);let ke;var Ne=d(_e),ye=d(Ne);te(ye,()=>(q(y),k(()=>y.SETTINGS)));var oe=m(Ne,2);let Me;var Ce=m(U,2),Oe=d(Ce);let Ie;de(()=>{Y=Fe(ue,1,"side-menu svelte-ji5owg",null,Y,{"mobile-open":u(),collapsed:r()}),ge=Ze(ue,"",ge,{transform:u()?`translateX(${s(l)}px)`:"",transition:s(f)?"none":"width 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.3s ease"}),bt(N,"title",r()?"Expand":"Collapse"),Ze(R,`transform: rotate(${r()?"180deg":"0deg"})`),Z=Fe(F,1,"logo-wrapper svelte-ji5owg",null,Z,{hidden:r()}),bt(M,"src",Zv),P=Fe(S,1,"nav-item svelte-ji5owg",null,P,{active:a()==="search"}),pe=Fe(ie,1,"label-text svelte-ji5owg",null,pe,{hidden:r()}),D.disabled=t(),B=Fe(Q,1,"icon svelte-ji5owg",null,B,{spin:t()}),z=Fe(se,1,"label-text svelte-ji5owg",null,z,{hidden:r()}),ce(ve,t()?"Syncing...":"Update Library"),ke=Fe(_e,1,"nav-item svelte-ji5owg",null,ke,{active:a()==="settings"}),Me=Fe(oe,1,"label-text svelte-ji5owg",null,Me,{hidden:r()}),Ie=Fe(Oe,1,"footer-text svelte-ji5owg",null,Ie,{hidden:r()})}),C("click",N,_),C("click",A,()=>c("close")),C("click",S,()=>x("search")),C("click",D,b),C("click",_e,()=>x("settings")),C("touchstart",ue,E),C("touchmove",ue,L),C("touchend",ue,V),w(e,G),ht(),o()}var rd=T('<div class="toast-container svelte-k2bvk7"><div> </div></div>'),sd=T('<button class="back-btn svelte-k2bvk7"><span class="icon-inline svelte-k2bvk7"><!></span> Back</button>'),ad=T('<div class="view-title svelte-k2bvk7"><!></div>'),id=T('<div class="full-player-modal svelte-k2bvk7"><!></div>'),od=T('<div class="app-container svelte-k2bvk7"><div class="app-layout svelte-k2bvk7"><!> <!> <main class="content-area svelte-k2bvk7"><header class="top-bar svelte-k2bvk7"><button class="hamburger-btn svelte-k2bvk7"><!></button> <!></header> <div class="scroll-container svelte-k2bvk7"><div class="view-wrapper svelte-k2bvk7"><!></div></div></main> <div class="docked-player-container svelte-k2bvk7"><!></div></div> <div class="mini-player-wrapper svelte-k2bvk7"><!></div></div> <!>',1);function ld(e,n){ft(n,!1);const t=()=>xe(jt,"$navigationStack",o),r=()=>xe(Hs,"$toastMessage",o),a=()=>xe(Ct,"$activeMenuTab",o),i=()=>xe(rs,"$isFullPlayerOpen",o),[o,l]=It();let u=$(!1);br(()=>{window.history.replaceState({depth:t().length},"","");const M=()=>void 0;return window.addEventListener("popstate",M),()=>window.removeEventListener("popstate",M)}),_t();var c=od(),v=$e(c),h=d(v),f=d(h);{var p=M=>{var A=rd(),J=d(A),O=d(J);de(()=>{Fe(J,1,`toast-body ${r().type??""}`,"svelte-k2bvk7"),ce(O,r().text)}),wt(3,A,()=>Fi,()=>({y:-50,duration:300})),w(M,A)};j(f,M=>{r()&&M(p)})}var x=m(f,2);nd(x,{get isOpen(){return s(u)},$$events:{close:()=>g(u,!1)}});var b=m(x,2),_=d(b),E=d(_),L=d(E);te(L,()=>y.MENU);var V=m(E,2);{var G=M=>{var A=sd(),J=d(A),O=d(J);te(O,()=>y.BACK),C("click",A,function(...U){Mc?.apply(this,U)}),w(M,A)},H=M=>{var A=ad(),J=d(A);{var O=K=>{var S=In("Radio");w(K,S)},U=K=>{var S=We(),P=$e(S);{var I=ie=>{var pe=In("Playlists");w(ie,pe)},ee=ie=>{var pe=We(),D=$e(pe);{var Q=re=>{var se=In("Search");w(re,se)},B=re=>{var se=We(),z=$e(se);{var ve=ke=>{var Ne=In("Queue");w(ke,Ne)},_e=ke=>{var Ne=We(),ye=$e(Ne);{var oe=Ce=>{var Oe=In("Favorites");w(Ce,Oe)},Me=Ce=>{var Oe=We(),Ie=$e(Oe);{var fe=Ee=>{var Se=In("Settings");w(Ee,Se)},Te=Ee=>{var Se=In();de(be=>ce(Se,be),[()=>(a()||"Library").charAt(0).toUpperCase()+(a()||"library").slice(1)]),w(Ee,Se)};j(Ie,Ee=>{a()==="settings"?Ee(fe):Ee(Te,!1)},!0)}w(Ce,Oe)};j(ye,Ce=>{a()==="favorites"?Ce(oe):Ce(Me,!1)},!0)}w(ke,Ne)};j(z,ke=>{a()==="queue"?ke(ve):ke(_e,!1)},!0)}w(re,se)};j(D,re=>{a()==="search"?re(Q):re(B,!1)},!0)}w(ie,pe)};j(P,ie=>{a()==="playlists"?ie(I):ie(ee,!1)},!0)}w(K,S)};j(J,K=>{a()==="radio"?K(O):K(U,!1)})}w(M,A)};j(V,M=>{t().length>1?M(G):M(H,!1)})}var W=m(_,2),ue=d(W),Y=d(ue);{var ge=M=>{tv(M,{})},me=M=>{var A=We(),J=$e(A);{var O=K=>{Nv(K,{})},U=K=>{var S=We(),P=$e(S);{var I=ie=>{hv(ie,{})},ee=ie=>{var pe=We(),D=$e(pe);{var Q=re=>{Av(re,{})},B=re=>{var se=We(),z=$e(se);{var ve=ke=>{Pv(ke,{})},_e=ke=>{Bu(ke,{get activeCategory(){return a()}})};j(z,ke=>{a()==="settings"?ke(ve):ke(_e,!1)},!0)}w(re,se)};j(D,re=>{a()==="search"?re(Q):re(B,!1)},!0)}w(ie,pe)};j(P,ie=>{a()==="playlists"||a()==="favorites"?ie(I):ie(ee,!1)},!0)}w(K,S)};j(J,K=>{a()==="queue"?K(O):K(U,!1)},!0)}w(M,A)};j(Y,M=>{a()==="radio"?M(ge):M(me,!1)})}var ae=m(b,2),N=d(ae);Xa(N,{isDocked:!0});var R=m(h,2),ne=d(R);Hv(ne,{});var F=m(v,2);{var Z=M=>{var A=id(),J=d(A);Xa(J,{}),w(M,A)};j(F,M=>{i()&&M(Z)})}de(()=>Ze(W,`padding-bottom: ${i()?"0px":"var(--mini-player-height)"};`)),C("click",E,()=>g(u,!0)),w(e,c),ht(),l()}var cd=T('<button class="back-btn-area svelte-l8h85k"><span class="back-icon svelte-l8h85k"><!></span></button> <span class="header-title svelte-l8h85k">Select Playlist</span>',1),ud=T('<div class="track-info svelte-l8h85k"><div class="title text-ellipsis svelte-l8h85k"> </div> <div class="artist text-ellipsis svelte-l8h85k">Playlist</div></div>'),vd=T('<div class="track-info svelte-l8h85k"><div class="title text-ellipsis svelte-l8h85k"> </div> <div class="artist text-ellipsis svelte-l8h85k"> </div></div>'),dd=T('<button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span> </span></button>'),fd=T('<div class="empty-msg svelte-l8h85k">No custom playlists</div>'),hd=T("<!> <!>",1),pd=T('<button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Play Now</span></button> <div class="sep svelte-l8h85k"></div> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Rename</span></button> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Delete Playlist</span></button>',1),_d=T('<button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Go to Album</span></button> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Go to Artist</span></button>',1),gd=T('<div class="sep svelte-l8h85k"></div> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Remove from Playlist</span></button>',1),md=T('<div class="sep svelte-l8h85k"></div> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Remove from Queue</span></button>',1),bd=T('<button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Play Next</span></button> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Add to Queue</span></button> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Add to Playlist...</span></button> <!> <button class="menu-row svelte-l8h85k"><span><!></span> <span> </span></button> <!> <!>',1),wd=T('<div class="backdrop svelte-l8h85k"><div class="menu-card svelte-l8h85k"><div class="menu-header svelte-l8h85k"><!></div> <div class="menu-items scroll-y svelte-l8h85k"><!></div></div></div>');function yd(e,n){ft(n,!1);const t=()=>xe(da,"$contextMenu",i),r=()=>xe(En,"$favorites",i),a=()=>xe(va,"$playlists",i),[i,o]=It(),l=$(),u=$(),c=$(),v=$(),h=$(),f=$(),p=$();let x=$(),b=$(),_=$(),E=$(0),L=$(0),V=$("main"),G=$(!1);function H(S){t().isOpen&&(g(G,!1),$t())}function W(){$t()}function ue(){t().track&&Qt.playNext(t().track.file),$t()}function Y(){t().track&&Qt.addToQueue(t().track.file),$t()}function ge(){t().track&&rn.toggleFavorite(t().track),$t()}function me(){const S=t().track;S&&S.album&&An("tracks_by_album",{name:S.album,artist:S.artist}),$t()}function ae(){const S=t().track;S&&S.artist&&An("albums_by_artist",{name:S.artist}),$t()}async function N(){const{playlistName:S,index:P}=t().context;S&&P!==null&&(ir.update(I=>{const ee=[...I];return ee.splice(P,1),ee}),await rn.removeFromPlaylist(S,P)),$t()}function R(){const{index:S}=t().context;S!=null&&Qt.removeFromQueue(S),$t()}function ne(){const S=t().context.playlist;S&&we.send("stop").then(()=>we.send("clear")).then(()=>we.send(`load "${S.name.replace(/"/g,'\\"')}"`)).then(()=>we.send("play 0")),$t()}function F(){const S=t().context.playlist;S&&($t(),$n({title:"Rename Playlist",message:`Enter new name for "${S.name}":`,type:"prompt",placeholder:S.name,inputValue:S.name,confirmLabel:"Rename",onConfirm:P=>{P&&P!==S.name&&rn.renamePlaylist(S.name,P)}}))}function Z(){const S=t().context.playlist;S&&($t(),$n({title:"Delete Playlist",message:`Are you sure you want to delete "${S.name}"? This cannot be undone.`,type:"confirm",confirmLabel:"Delete",onConfirm:()=>{rn.deletePlaylist(S.name)}}))}function M(){g(V,"playlists")}function A(){g(V,"main")}async function J(S){const P=t().track;if(P)try{const I=S.replace(/"/g,'\\"'),ee=P.file.replace(/"/g,'\\"');await we.send(`playlistadd "${I}" "${ee}"`),ze(`Added to "${S}"`,"success"),$t()}catch(I){console.error(I),ze("Failed to add","error")}}X(()=>t(),()=>{t().isOpen&&g(V,"main")}),X(()=>(t(),s(G)),()=>{t().isOpen?!s(G)&&typeof history<"u"&&(history.pushState({contextMenuOpen:!0},""),g(G,!0)):s(G)&&typeof history<"u"&&(history.back(),g(G,!1))}),X(()=>(t(),r()),()=>{g(l,t().track&&r().has(t().track.file))}),X(()=>t(),()=>{g(u,t().track&&(t().track.file.includes("http")||t().track.file.includes("://")))}),X(()=>t(),()=>{g(c,t().context?.type==="playlist")}),X(()=>t(),()=>{g(v,t().context?.type==="queue")}),X(()=>t(),()=>{g(h,t().context?.type==="playlist-card")}),X(()=>t(),()=>{g(f,t().context?.source==="miniplayer")}),X(()=>(t(),s(L),s(E),s(x),s(f),s(b)),()=>{g(p,(()=>{if(!t().isOpen)return"";const S=t().triggerRect,P=t().x,I=t().y,ee=s(L)||220,ie=s(E)||320;if(s(x)<=768&&s(f)&&S)return`
        position: fixed; 
        bottom: ${s(b)-S.top}px; 
        left: 50%; 
        transform: translateX(-50%); 
        margin: 0; 
        transform-origin: bottom center;
      `;let pe=0,D=0,Q="top left";if(S){const re=S.left+S.width/2,se=S.top+S.height/2,z=re>s(x)/2,ve=se>s(b)/2;z?(pe=S.right-ee,Q=ve?"bottom right":"top right"):(pe=S.left,Q=ve?"bottom left":"top left"),ve?D=S.top-ie:D=S.bottom}else pe=P,D=I,pe+ee>s(x)&&(pe=s(x)-ee-10),D+ie>s(b)&&(D=s(b)-ie-10);const B=8;return pe<B&&(pe=B),pe+ee>s(x)-B&&(pe=s(x)-ee-B),D<B&&(D=B),D+ie>s(b)-B&&(D=s(b)-ie-B),`position: fixed; top: ${D}px; left: ${pe}px; margin: 0; transform-origin: ${Q};`})())}),Bt(),_t();var O=We();C("popstate",kn,H);var U=$e(O);{var K=S=>{var P=wd(),I=d(P),ee=d(I),ie=d(ee);{var pe=z=>{var ve=cd(),_e=$e(ve),ke=d(_e),Ne=d(ke);te(Ne,()=>(q(y),k(()=>y.BACK))),C("click",_e,A),w(z,ve)},D=z=>{var ve=We(),_e=$e(ve);{var ke=ye=>{var oe=ud(),Me=d(oe),Ce=d(Me);de(()=>ce(Ce,(t(),k(()=>t().context.playlist.name)))),w(ye,oe)},Ne=ye=>{var oe=vd(),Me=d(oe),Ce=d(Me),Oe=m(Me,2),Ie=d(Oe);de(()=>{ce(Ce,(t(),k(()=>t().track.title))),ce(Ie,(t(),k(()=>t().track.artist)))}),w(ye,oe)};j(_e,ye=>{s(h)?ye(ke):ye(Ne,!1)},!0)}w(z,ve)};j(ie,z=>{s(V)==="playlists"?z(pe):z(D,!1)})}var Q=m(ee,2),B=d(Q);{var re=z=>{var ve=hd(),_e=$e(ve);qt(_e,1,a,mn,(ye,oe)=>{var Me=We(),Ce=$e(Me);{var Oe=Ie=>{var fe=dd(),Te=d(fe),Ee=d(Te);te(Ee,()=>(q(y),k(()=>y.PLAYLISTS)));var Se=m(Te,2),be=d(Se);de(()=>ce(be,(s(oe),k(()=>s(oe).name)))),C("click",fe,()=>J(s(oe).name)),w(Ie,fe)};j(Ce,Ie=>{s(oe),k(()=>s(oe).name!=="Favorites")&&Ie(Oe)})}w(ye,Me)});var ke=m(_e,2);{var Ne=ye=>{var oe=fd();w(ye,oe)};j(ke,ye=>{a(),k(()=>a().filter(oe=>oe.name!=="Favorites").length===0)&&ye(Ne)})}w(z,ve)},se=z=>{var ve=We(),_e=$e(ve);{var ke=ye=>{var oe=pd(),Me=$e(oe),Ce=d(Me),Oe=d(Ce);te(Oe,()=>(q(y),k(()=>y.PLAY)));var Ie=m(Me,4),fe=d(Ie),Te=d(fe);te(Te,()=>(q(y),k(()=>y.EDIT)));var Ee=m(Ie,2),Se=d(Ee),be=d(Se);te(be,()=>(q(y),k(()=>y.REMOVE))),C("click",Me,ne),C("click",Ie,F),C("click",Ee,Z),w(ye,oe)},Ne=ye=>{var oe=bd(),Me=$e(oe),Ce=d(Me),Oe=d(Ce);te(Oe,()=>(q(y),k(()=>y.NEXT)));var Ie=m(Me,2),fe=d(Ie),Te=d(fe);te(Te,()=>(q(y),k(()=>y.MENU)));var Ee=m(Ie,2),Se=d(Ee),be=d(Se);te(be,()=>(q(y),k(()=>y.ADD_TO_PLAYLIST||y.ADD)));var Re=m(Ee,2);{var he=He=>{var Je=_d(),rt=$e(Je),Ut=d(rt),lt=d(Ut);te(lt,()=>(q(y),k(()=>y.ALBUM_LINK||y.ALBUMS)));var zt=m(rt,2),Tt=d(zt),Ln=d(Tt);te(Ln,()=>(q(y),k(()=>y.ARTIST_LINK||y.ARTISTS))),C("click",rt,me),C("click",zt,ae),w(He,Je)};j(Re,He=>{s(u)||He(he)})}var Ae=m(Re,2),Ve=d(Ae);let Ge;var je=d(Ve);te(je,()=>(s(l),q(y),k(()=>s(l)?y.HEART_FILLED:y.HEART)));var Qe=m(Ve,2),nt=d(Qe),gt=m(Ae,2);{var cn=He=>{var Je=gd(),rt=m($e(Je),2),Ut=d(rt),lt=d(Ut);te(lt,()=>(q(y),k(()=>y.REMOVE))),C("click",rt,N),w(He,Je)};j(gt,He=>{s(c)&&He(cn)})}var Mt=m(gt,2);{var yt=He=>{var Je=md(),rt=m($e(Je),2),Ut=d(rt),lt=d(Ut);te(lt,()=>(q(y),k(()=>y.REMOVE))),C("click",rt,R),w(He,Je)};j(Mt,He=>{s(v)&&He(yt)})}de(()=>{Ge=Fe(Ve,1,"icon svelte-l8h85k",null,Ge,{liked:s(l)}),ce(nt,s(l)?"Unlike":"Like")}),C("click",Me,ue),C("click",Ie,Y),C("click",Ee,M),C("click",Ae,ge),w(ye,oe)};j(_e,ye=>{s(h)?ye(ke):ye(Ne,!1)},!0)}w(z,ve)};j(B,z=>{s(V)==="playlists"?z(re):z(se,!1)})}Cn(I,z=>g(_,z),()=>s(_)),de(()=>Ze(I,s(p))),Pa(I,"clientHeight",z=>g(E,z)),Pa(I,"clientWidth",z=>g(L,z)),wt(3,I,()=>ua,()=>({start:.95,duration:100})),C("click",I,Yt(function(z){Rr.call(this,n,z)})),C("click",P,W),wt(3,P,()=>an,()=>({duration:100})),w(S,P)};j(U,S=>{t(),k(()=>t().isOpen)&&S(K)})}La("innerWidth",S=>g(x,S)),La("innerHeight",S=>g(b,S)),w(e,O),ht(),o()}var kd=T('<div class="input-wrapper svelte-1bxxaoh"><input type="text" autoFocus/></div>'),xd=T('<button class="btn cancel svelte-1bxxaoh"> </button>'),Ed=T('<div class="backdrop svelte-1bxxaoh"><div class="modal-card svelte-1bxxaoh"><div class="modal-header svelte-1bxxaoh"><span class="modal-title svelte-1bxxaoh"> </span></div> <div class="modal-body svelte-1bxxaoh"><p class="modal-message svelte-1bxxaoh"> </p> <!></div> <div class="modal-actions svelte-1bxxaoh"><!> <button class="btn confirm svelte-1bxxaoh"> </button></div></div></div>');function Sd(e,n){ft(n,!1);const t=()=>xe(ns,"$modal",r),[r,a]=It();let i=$(!1),o=$();function l(){if(t().type==="prompt"){const x=t().inputValue?t().inputValue.trim():"";if(x.length===0){u();return}t().onConfirm&&t().onConfirm(x)}else t().onConfirm&&t().onConfirm();Ls()}function u(){g(i,!0),s(o)&&s(o).focus(),setTimeout(()=>{g(i,!1)},400)}function c(){Ls()}function v(x){x.key==="Enter"&&l(),s(i)&&g(i,!1)}X(()=>t(),()=>{t().isOpen||g(i,!1)}),Bt(),_t();var h=We(),f=$e(h);{var p=x=>{var b=Ed(),_=d(b),E=d(_),L=d(E),V=d(L),G=m(E,2),H=d(G),W=d(H),ue=m(H,2);{var Y=ne=>{var F=kd(),Z=d(F);let M;Cn(Z,A=>g(o,A),()=>s(o)),de(()=>{M=Fe(Z,1,"modal-input svelte-1bxxaoh",null,M,{"shake-error":s(i)}),bt(Z,"placeholder",(t(),k(()=>t().placeholder)))}),hs(Z,()=>t().inputValue,A=>Al(ns,k(t).inputValue=A,k(t))),C("keydown",Z,v),w(ne,F)};j(ue,ne=>{t(),k(()=>t().type==="prompt")&&ne(Y)})}var ge=m(G,2),me=d(ge);{var ae=ne=>{var F=xd(),Z=d(F);de(()=>ce(Z,(t(),k(()=>t().cancelLabel)))),C("click",F,function(...M){Ls?.apply(this,M)}),w(ne,F)};j(me,ne=>{t(),k(()=>t().type==="confirm"||t().type==="prompt")&&ne(ae)})}var N=m(me,2),R=d(N);de(()=>{ce(V,(t(),k(()=>t().title))),ce(W,(t(),k(()=>t().message))),ce(R,(t(),k(()=>t().confirmLabel)))}),C("click",N,l),wt(3,_,()=>ua,()=>({start:.95,duration:200})),C("click",_,Yt(function(ne){Rr.call(this,n,ne)})),C("click",b,c),wt(3,b,()=>an,()=>({duration:150})),w(x,b)};j(f,x=>{t(),k(()=>t().isOpen)&&x(p)})}w(e,h),ht(),a()}const Ga={init(){this.handleHashChange(),window.addEventListener("hashchange",()=>this.handleHashChange())},handleHashChange(){let e=window.location.hash.slice(1);for(;e.startsWith("/");)e=e.slice(1);if(!e){(qe(jt).length>1||qe(Ct)==="search")&&(this.setRootTab("artists"),window.location.hash="/artists");return}const n=e.split("/").map(decodeURIComponent),t=n[0];let r=Sc();switch(r||n.length>1&&(t==="album"&&n.length>=3?r={artist:n[1],name:n[2]}:t==="artist"&&n.length>=2?r={name:n[1]}:r={name:n[1],displayName:n[1]}),console.log(`[Router] Navigating: ${t}`,r),t){case"queue":this.setRootTab("queue");break;case"radio":this.setRootTab("radio");break;case"playlists":this.setRootTab("playlists");break;case"settings":this.setRootTab("settings");break;case"favorites":Ct.set("favorites"),jt.set([{view:"root"},{view:"details",data:{name:"Favorites"}}]);break;case"artists":this.setRootTab("artists");break;case"albums":this.setRootTab("albums");break;case"search":Ct.set("search"),n[1]&&Mr.set(n[1]),jt.set([{view:"root"}]);break;case"album":Ct.set("albums"),jt.set([{view:"root"},{view:"tracks_by_album",data:r}]);break;case"artist":Ct.set("artists"),jt.set([{view:"root"},{view:"albums_by_artist",data:r}]);break;case"playlist":Ct.set("playlists"),jt.set([{view:"root"},{view:"details",data:r}]);break;default:this.setRootTab("artists");break}},setRootTab(e){Ct.set(e),jt.set([{view:"root"}])},updateUrl(e,n){let t="";if(e==="root"){const r=qe(Ct);if(r==="search"){const a=qe(Mr);t=a?`search/${encodeURIComponent(a)}`:"search"}else t=r}else if(e==="details"){const r=n.name||n;t=r==="Favorites"?"favorites":`playlist/${encodeURIComponent(r)}`}else if(e==="albums_by_artist"){const r=n.name||n;t=`artist/${encodeURIComponent(r)}`}else if(e==="tracks_by_album"){const r=n.name||n,a=n.artist;a?t=`album/${encodeURIComponent(a)}/${encodeURIComponent(r)}`:t=`album/${encodeURIComponent(r)}`}else e==="queue"&&(t="queue");if(t){const r=`#/${t}`;decodeURIComponent(window.location.hash)!==decodeURIComponent(r)&&(window.location.hash=`/${t}`)}}};var Md=T("<!> <!> <!>",1);function Td(e,n){ft(n,!1),br(async()=>{Ga.init(),Ec((o,l)=>{Ga.updateUrl(o,l)}),Yi(),Gs.loadRadioStations();try{const o=await Sn.getArtists();o.length>0?console.log(`[App] Database ready. Loaded ${o.length} artists from cache.`):(console.log("[App] Database empty. Starting initial sync..."),Gs.syncLibrary())}catch(o){console.error("[App] DB Check failed:",o),ze("Local DB error. Please update library manually.","error")}}),_t();var t=Md(),r=$e(t);ld(r,{});var a=m(r,2);yd(a,{});var i=m(a,2);Sd(i,{}),w(e,t),ht()}ul(Td,{target:document.getElementById("app")});
