(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function a(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=a(n);fetch(n.href,i)}})();const tn=!1;var is=Array.isArray,Lo=Array.prototype.indexOf,Is=Array.from,$i=Object.defineProperty,Tr=Object.getOwnPropertyDescriptor,Ai=Object.getOwnPropertyDescriptors,zo=Object.prototype,Ro=Array.prototype,kn=Object.getPrototypeOf,Yn=Object.isExtensible;function Io(e){return typeof e=="function"}const sa=()=>{};function jo(e){return e()}function xs(e){for(var t=0;t<e.length;t++)e[t]()}function Mi(){var e,t,a=new Promise((s,n)=>{e=s,t=n});return{promise:a,resolve:e,reject:t}}const Nt=2,xn=4,js=8,No=1<<24,Sa=16,Da=32,fr=64,Ns=128,ha=512,It=1024,Zt=2048,pa=4096,oa=8192,za=16384,Ds=32768,lr=65536,Un=1<<17,Ci=1<<18,Rr=1<<19,Pi=1<<20,Ca=1<<25,cr=32768,an=1<<21,Sn=1<<22,Va=1<<23,Ra=Symbol("$state"),Do=Symbol("legacy props"),Oo=Symbol(""),xr=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function En(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Fo(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function qo(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Bo(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Yo(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Uo(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Ho(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function Vo(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Wo(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Qo(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Xo(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Ko=1,Go=2,Li=4,Zo=8,Jo=16,el=1,tl=2,al=4,rl=8,sl=16,nl=1,il=2,ol=4,ll=1,cl=2,Ft=Symbol(),dl="http://www.w3.org/1999/xhtml";function vl(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function ul(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function zi(e){return e===this.v}function Tn(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function Ri(e){return!Tn(e,this.v)}let Ir=!1,fl=!1;function hl(){Ir=!0}let St=null;function Ar(e){St=e}function Lt(e,t=!1,a){St={p:St,i:!1,c:null,e:null,s:e,x:null,l:Ir&&!t?{s:null,u:null,$:[]}:null}}function zt(e){var t=St,a=t.e;if(a!==null){t.e=null;for(var s of a)Ki(s)}return t.i=!0,St=t.p,{}}function os(){return!Ir||St!==null&&St.l===null}let Ja=[];function Ii(){var e=Ja;Ja=[],xs(e)}function hr(e){if(Ja.length===0&&!Vr){var t=Ja;queueMicrotask(()=>{t===Ja&&Ii()})}Ja.push(e)}function pl(){for(;Ja.length>0;)Ii()}function ji(e){var t=ht;if(t===null)return vt.f|=Va,e;if((t.f&Ds)===0){if((t.f&Ns)===0)throw e;t.b.error(e)}else Mr(e,t)}function Mr(e,t){for(;t!==null;){if((t.f&Ns)!==0)try{t.b.error(e);return}catch(a){e=a}t=t.parent}throw e}const us=new Set;let ft=null,Hr=null,va=null,ca=[],Os=null,rn=!1,Vr=!1;class ma{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#a=0;#r=0;#l=null;#n=new Set;#s=new Set;skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#r>0}process(t){ca=[],Hr=null,this.apply();var a={parent:null,effect:null,effects:[],render_effects:[]};for(const s of t)this.#i(s,a);this.is_fork||this.#d(),this.is_deferred()?(this.#o(a.effects),this.#o(a.render_effects)):(Hr=this,ft=null,Hn(a.render_effects),Hn(a.effects),Hr=null,this.#l?.resolve()),va=null}#i(t,a){t.f^=It;for(var s=t.first;s!==null;){var n=s.f,i=(n&(Da|fr))!==0,o=i&&(n&It)!==0,l=o||(n&oa)!==0||this.skipped_effects.has(s);if((s.f&Ns)!==0&&s.b?.is_pending()&&(a={parent:a,effect:s,effects:[],render_effects:[]}),!l&&s.fn!==null){i?s.f^=It:(n&xn)!==0?a.effects.push(s):Nr(s)&&((s.f&Sa)!==0&&this.#n.add(s),Cr(s));var v=s.first;if(v!==null){s=v;continue}}var d=s.parent;for(s=s.next;s===null&&d!==null;)d===a.effect&&(this.#o(a.effects),this.#o(a.render_effects),a=a.parent),s=d.next,d=d.parent}}#o(t){for(const a of t)(a.f&Zt)!==0?this.#n.add(a):(a.f&pa)!==0&&this.#s.add(a),this.#c(a.deps),jt(a,It)}#c(t){if(t!==null)for(const a of t)(a.f&Nt)===0||(a.f&cr)===0||(a.f^=cr,this.#c(a.deps))}capture(t,a){this.previous.has(t)||this.previous.set(t,a),(t.f&Va)===0&&(this.current.set(t,t.v),va?.set(t,t.v))}activate(){ft=this,this.apply()}deactivate(){ft===this&&(ft=null,va=null)}flush(){if(this.activate(),ca.length>0){if(Ni(),ft!==null&&ft!==this)return}else this.#a===0&&this.process([]);this.deactivate()}discard(){for(const t of this.#t)t(this);this.#t.clear()}#d(){if(this.#r===0){for(const t of this.#e)t();this.#e.clear()}this.#a===0&&this.#v()}#v(){if(us.size>1){this.previous.clear();var t=va,a=!0,s={parent:null,effect:null,effects:[],render_effects:[]};for(const i of us){if(i===this){a=!1;continue}const o=[];for(const[v,d]of this.current){if(i.current.has(v))if(a&&d!==i.current.get(v))i.current.set(v,d);else continue;o.push(v)}if(o.length===0)continue;const l=[...i.current.keys()].filter(v=>!this.current.has(v));if(l.length>0){var n=ca;ca=[];const v=new Set,d=new Map;for(const u of o)Di(u,l,v,d);if(ca.length>0){ft=i,i.apply();for(const u of ca)i.#i(u,s);i.deactivate()}ca=n}}ft=null,va=t}this.committed=!0,us.delete(this)}increment(t){this.#a+=1,t&&(this.#r+=1)}decrement(t){this.#a-=1,t&&(this.#r-=1),this.revive()}revive(){for(const t of this.#n)this.#s.delete(t),jt(t,Zt),dr(t);for(const t of this.#s)jt(t,pa),dr(t);this.flush()}oncommit(t){this.#e.add(t)}ondiscard(t){this.#t.add(t)}settled(){return(this.#l??=Mi()).promise}static ensure(){if(ft===null){const t=ft=new ma;us.add(ft),Vr||ma.enqueue(()=>{ft===t&&t.flush()})}return ft}static enqueue(t){hr(t)}apply(){}}function gl(e){var t=Vr;Vr=!0;try{for(var a;;){if(pl(),ca.length===0&&(ft?.flush(),ca.length===0))return Os=null,a;Ni()}}finally{Vr=t}}function Ni(){var e=rr;rn=!0;var t=null;try{var a=0;for(Es(!0);ca.length>0;){var s=ma.ensure();if(a++>1e3){var n,i;_l()}s.process(ca),Wa.clear()}}finally{rn=!1,Es(e),Os=null}}function _l(){try{Uo()}catch(e){Mr(e,Os)}}let Aa=null;function Hn(e){var t=e.length;if(t!==0){for(var a=0;a<t;){var s=e[a++];if((s.f&(za|oa))===0&&Nr(s)&&(Aa=new Set,Cr(s),s.deps===null&&s.first===null&&s.nodes===null&&(s.teardown===null&&s.ac===null?eo(s):s.fn=null),Aa?.size>0)){Wa.clear();for(const n of Aa){if((n.f&(za|oa))!==0)continue;const i=[n];let o=n.parent;for(;o!==null;)Aa.has(o)&&(Aa.delete(o),i.push(o)),o=o.parent;for(let l=i.length-1;l>=0;l--){const v=i[l];(v.f&(za|oa))===0&&Cr(v)}}Aa.clear()}}Aa=null}}function Di(e,t,a,s){if(!a.has(e)&&(a.add(e),e.reactions!==null))for(const n of e.reactions){const i=n.f;(i&Nt)!==0?Di(n,t,a,s):(i&(Sn|Sa))!==0&&(i&Zt)===0&&Oi(n,t,s)&&(jt(n,Zt),dr(n))}}function Oi(e,t,a){const s=a.get(e);if(s!==void 0)return s;if(e.deps!==null)for(const n of e.deps){if(t.includes(n))return!0;if((n.f&Nt)!==0&&Oi(n,t,a))return a.set(n,!0),!0}return a.set(e,!1),!1}function dr(e){for(var t=Os=e;t.parent!==null;){t=t.parent;var a=t.f;if(rn&&t===ht&&(a&Sa)!==0&&(a&Ci)===0)return;if((a&(fr|Da))!==0){if((a&It)===0)return;t.f^=It}}ca.push(t)}function ml(e){let t=0,a=vr(0),s;return()=>{Zr()&&(r(a),jr(()=>(t===0&&(s=_(()=>e(()=>Wr(a)))),t+=1,()=>{hr(()=>{t-=1,t===0&&(s?.(),s=void 0,Wr(a))})})))}}var bl=lr|Rr|Ns;function yl(e,t,a){new wl(e,t,a)}class wl{parent;#e=!1;#t;#a=null;#r;#l;#n;#s=null;#i=null;#o=null;#c=null;#d=null;#v=0;#u=0;#h=!1;#f=null;#b=ml(()=>(this.#f=vr(this.#v),()=>{this.#f=null}));constructor(t,a,s){this.#t=t,this.#r=a,this.#l=s,this.parent=ht.b,this.#e=!!this.#r.pending,this.#n=An(()=>{ht.b=this;{var n=this.#_();try{this.#s=da(()=>s(n))}catch(i){this.error(i)}this.#u>0?this.#g():this.#e=!1}return()=>{this.#d?.remove()}},bl)}#y(){try{this.#s=da(()=>this.#l(this.#t))}catch(t){this.error(t)}this.#e=!1}#w(){const t=this.#r.pending;t&&(this.#i=da(()=>t(this.#t)),ma.enqueue(()=>{var a=this.#_();this.#s=this.#p(()=>(ma.ensure(),da(()=>this.#l(a)))),this.#u>0?this.#g():(ar(this.#i,()=>{this.#i=null}),this.#e=!1)}))}#_(){var t=this.#t;return this.#e&&(this.#d=Ia(),this.#t.before(this.#d),t=this.#d),t}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#r.pending}#p(t){var a=ht,s=vt,n=St;xa(this.#n),Kt(this.#n),Ar(this.#n.ctx);try{return t()}catch(i){return ji(i),null}finally{xa(a),Kt(s),Ar(n)}}#g(){const t=this.#r.pending;this.#s!==null&&(this.#c=document.createDocumentFragment(),this.#c.append(this.#d),ro(this.#s,this.#c)),this.#i===null&&(this.#i=da(()=>t(this.#t)))}#m(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#m(t);return}this.#u+=t,this.#u===0&&(this.#e=!1,this.#i&&ar(this.#i,()=>{this.#i=null}),this.#c&&(this.#t.before(this.#c),this.#c=null))}update_pending_count(t){this.#m(t),this.#v+=t,this.#f&&ur(this.#f,this.#v)}get_effect_pending(){return this.#b(),r(this.#f)}error(t){var a=this.#r.onerror;let s=this.#r.failed;if(this.#h||!a&&!s)throw t;this.#s&&(Gt(this.#s),this.#s=null),this.#i&&(Gt(this.#i),this.#i=null),this.#o&&(Gt(this.#o),this.#o=null);var n=!1,i=!1;const o=()=>{if(n){ul();return}n=!0,i&&Xo(),ma.ensure(),this.#v=0,this.#o!==null&&ar(this.#o,()=>{this.#o=null}),this.#e=this.has_pending_snippet(),this.#s=this.#p(()=>(this.#h=!1,da(()=>this.#l(this.#t)))),this.#u>0?this.#g():this.#e=!1};var l=vt;try{Kt(null),i=!0,a?.(t,o),i=!1}catch(v){Mr(v,this.#n&&this.#n.parent)}finally{Kt(l)}s&&hr(()=>{this.#o=this.#p(()=>{ma.ensure(),this.#h=!0;try{return da(()=>{s(this.#t,()=>t,()=>o)})}catch(v){return Mr(v,this.#n.parent),null}finally{this.#h=!1}})})}}function kl(e,t,a,s){const n=os()?ls:yt;if(a.length===0&&e.length===0){s(t.map(n));return}var i=ft,o=ht,l=xl();function v(){Promise.all(a.map(d=>Sl(d))).then(d=>{l();try{s([...t.map(n),...d])}catch(u){(o.f&za)===0&&Mr(u,o)}i?.deactivate(),Ss()}).catch(d=>{Mr(d,o)})}e.length>0?Promise.all(e).then(()=>{l();try{return v()}finally{i?.deactivate(),Ss()}}):v()}function xl(){var e=ht,t=vt,a=St,s=ft;return function(i=!0){xa(e),Kt(t),Ar(a),i&&s?.activate()}}function Ss(){xa(null),Kt(null),Ar(null)}function ls(e){var t=Nt|Zt,a=vt!==null&&(vt.f&Nt)!==0?vt:null;return ht!==null&&(ht.f|=Rr),{ctx:St,deps:null,effects:null,equals:zi,f:t,fn:e,reactions:null,rv:0,v:Ft,wv:0,parent:a??ht,ac:null}}function Sl(e,t){let a=ht;a===null&&Fo();var s=a.b,n=void 0,i=vr(Ft),o=!vt,l=new Map;return Il(()=>{var v=Mi();n=v.promise;try{Promise.resolve(e()).then(v.resolve,v.reject).then(()=>{d===ft&&d.committed&&d.deactivate(),Ss()})}catch(f){v.reject(f),Ss()}var d=ft;if(o){var u=!s.is_pending();s.update_pending_count(1),d.increment(u),l.get(d)?.reject(xr),l.delete(d),l.set(d,v)}const h=(f,p=void 0)=>{if(d.activate(),p)p!==xr&&(i.f|=Va,ur(i,p));else{(i.f&Va)!==0&&(i.f^=Va),ur(i,f);for(const[S,E]of l){if(l.delete(S),S===d)break;E.reject(xr)}}o&&(s.update_pending_count(-1),d.decrement(u))};v.promise.then(h,f=>h(null,f||"unknown"))}),ds(()=>{for(const v of l.values())v.reject(xr)}),new Promise(v=>{function d(u){function h(){u===n?v(i):d(n)}u.then(h,h)}d(n)})}function Fr(e){const t=ls(e);return so(t),t}function yt(e){const t=ls(e);return t.equals=Ri,t}function Fi(e){var t=e.effects;if(t!==null){e.effects=null;for(var a=0;a<t.length;a+=1)Gt(t[a])}}function El(e){for(var t=e.parent;t!==null;){if((t.f&Nt)===0)return(t.f&za)===0?t:null;t=t.parent}return null}function $n(e){var t,a=ht;xa(El(e));try{e.f&=~cr,Fi(e),t=lo(e)}finally{xa(a)}return t}function qi(e){var t=$n(e);if(e.equals(t)||(ft?.is_fork||(e.v=t),e.wv=io()),!gr)if(va!==null)(Zr()||ft?.is_fork)&&va.set(e,t);else{var a=(e.f&ha)===0?pa:It;jt(e,a)}}let sn=new Set;const Wa=new Map;let Bi=!1;function vr(e,t){var a={f:0,v:e,reactions:null,equals:zi,rv:0,wv:0};return a}function Fa(e,t){const a=vr(e);return so(a),a}function $(e,t=!1,a=!0){const s=vr(e);return t||(s.equals=Ri),Ir&&a&&St!==null&&St.l!==null&&(St.l.s??=[]).push(s),s}function fs(e,t){return b(e,_(()=>r(e))),t}function b(e,t,a=!1){vt!==null&&(!ba||(vt.f&Un)!==0)&&os()&&(vt.f&(Nt|Sa|Sn|Un))!==0&&!ja?.includes(e)&&Qo();let s=a?Sr(t):t;return ur(e,s)}function ur(e,t){if(!e.equals(t)){var a=e.v;gr?Wa.set(e,t):Wa.set(e,a),e.v=t;var s=ma.ensure();s.capture(e,a),(e.f&Nt)!==0&&((e.f&Zt)!==0&&$n(e),jt(e,(e.f&ha)!==0?It:pa)),e.wv=io(),Yi(e,Zt),os()&&ht!==null&&(ht.f&It)!==0&&(ht.f&(Da|fr))===0&&(la===null?Ol([e]):la.push(e)),!s.is_fork&&sn.size>0&&!Bi&&Tl()}return t}function Tl(){Bi=!1;var e=rr;Es(!0);const t=Array.from(sn);try{for(const a of t)(a.f&It)!==0&&jt(a,pa),Nr(a)&&Cr(a)}finally{Es(e)}sn.clear()}function Wr(e){b(e,e.v+1)}function Yi(e,t){var a=e.reactions;if(a!==null)for(var s=os(),n=a.length,i=0;i<n;i++){var o=a[i],l=o.f;if(!(!s&&o===ht)){var v=(l&Zt)===0;if(v&&jt(o,t),(l&Nt)!==0){var d=o;va?.delete(d),(l&cr)===0&&(l&ha&&(o.f|=cr),Yi(d,pa))}else v&&((l&Sa)!==0&&Aa!==null&&Aa.add(o),dr(o))}}}function Sr(e){if(typeof e!="object"||e===null||Ra in e)return e;const t=kn(e);if(t!==zo&&t!==Ro)return e;var a=new Map,s=is(e),n=Fa(0),i=sr,o=l=>{if(sr===i)return l();var v=vt,d=sr;Kt(null),Xn(i);var u=l();return Kt(v),Xn(d),u};return s&&a.set("length",Fa(e.length)),new Proxy(e,{defineProperty(l,v,d){(!("value"in d)||d.configurable===!1||d.enumerable===!1||d.writable===!1)&&Vo();var u=a.get(v);return u===void 0?u=o(()=>{var h=Fa(d.value);return a.set(v,h),h}):b(u,d.value,!0),!0},deleteProperty(l,v){var d=a.get(v);if(d===void 0){if(v in l){const u=o(()=>Fa(Ft));a.set(v,u),Wr(n)}}else b(d,Ft),Wr(n);return!0},get(l,v,d){if(v===Ra)return e;var u=a.get(v),h=v in l;if(u===void 0&&(!h||Tr(l,v)?.writable)&&(u=o(()=>{var p=Sr(h?l[v]:Ft),S=Fa(p);return S}),a.set(v,u)),u!==void 0){var f=r(u);return f===Ft?void 0:f}return Reflect.get(l,v,d)},getOwnPropertyDescriptor(l,v){var d=Reflect.getOwnPropertyDescriptor(l,v);if(d&&"value"in d){var u=a.get(v);u&&(d.value=r(u))}else if(d===void 0){var h=a.get(v),f=h?.v;if(h!==void 0&&f!==Ft)return{enumerable:!0,configurable:!0,value:f,writable:!0}}return d},has(l,v){if(v===Ra)return!0;var d=a.get(v),u=d!==void 0&&d.v!==Ft||Reflect.has(l,v);if(d!==void 0||ht!==null&&(!u||Tr(l,v)?.writable)){d===void 0&&(d=o(()=>{var f=u?Sr(l[v]):Ft,p=Fa(f);return p}),a.set(v,d));var h=r(d);if(h===Ft)return!1}return u},set(l,v,d,u){var h=a.get(v),f=v in l;if(s&&v==="length")for(var p=d;p<h.v;p+=1){var S=a.get(p+"");S!==void 0?b(S,Ft):p in l&&(S=o(()=>Fa(Ft)),a.set(p+"",S))}if(h===void 0)(!f||Tr(l,v)?.writable)&&(h=o(()=>Fa(void 0)),b(h,Sr(d)),a.set(v,h));else{f=h.v!==Ft;var E=o(()=>Sr(d));b(h,E)}var k=Reflect.getOwnPropertyDescriptor(l,v);if(k?.set&&k.set.call(u,d),!f){if(s&&typeof v=="string"){var x=a.get("length"),Q=Number(v);Number.isInteger(Q)&&Q>=x.v&&b(x,Q+1)}Wr(n)}return!0},ownKeys(l){r(n);var v=Reflect.ownKeys(l).filter(h=>{var f=a.get(h);return f===void 0||f.v!==Ft});for(var[d,u]of a)u.v!==Ft&&!(d in l)&&v.push(d);return v},setPrototypeOf(){Wo()}})}function Vn(e){try{if(e!==null&&typeof e=="object"&&Ra in e)return e[Ra]}catch{}return e}function $l(e,t){return Object.is(Vn(e),Vn(t))}var Ba,Ui,Hi,Vi;function Al(){if(Ba===void 0){Ba=window,Ui=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,a=Text.prototype;Hi=Tr(t,"firstChild").get,Vi=Tr(t,"nextSibling").get,Yn(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Yn(a)&&(a.__t=void 0)}}function Ia(e=""){return document.createTextNode(e)}function Ya(e){return Hi.call(e)}function cs(e){return Vi.call(e)}function c(e,t){return Ya(e)}function Ie(e,t=!1){{var a=Ya(e);return a instanceof Comment&&a.data===""?cs(a):a}}function g(e,t=1,a=!1){let s=e;for(;t--;)s=cs(s);return s}function Ml(e){e.textContent=""}function Wi(){return!1}let Wn=!1;function Cl(){Wn||(Wn=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function Pl(e,t,a,s=!0){s&&a();for(var n of t)e.addEventListener(n,a);ds(()=>{for(var i of t)e.removeEventListener(i,a)})}function pr(e){var t=vt,a=ht;Kt(null),xa(null);try{return e()}finally{Kt(t),xa(a)}}function Qi(e,t,a,s=a){e.addEventListener(t,()=>pr(a));const n=e.__on_r;n?e.__on_r=()=>{n(),s(!0)}:e.__on_r=()=>s(!0),Cl()}function Xi(e){ht===null&&(vt===null&&Yo(),Bo()),gr&&qo()}function Ll(e,t){var a=t.last;a===null?t.last=t.first=e:(a.next=e,e.prev=a,t.last=e)}function Ea(e,t,a){var s=ht;s!==null&&(s.f&oa)!==0&&(e|=oa);var n={ctx:St,deps:null,nodes:null,f:e|Zt|ha,first:null,fn:t,last:null,next:null,parent:s,b:s&&s.b,prev:null,teardown:null,wv:0,ac:null};if(a)try{Cr(n),n.f|=Ds}catch(l){throw Gt(n),l}else t!==null&&dr(n);var i=n;if(a&&i.deps===null&&i.teardown===null&&i.nodes===null&&i.first===i.last&&(i.f&Rr)===0&&(i=i.first,(e&Sa)!==0&&(e&lr)!==0&&i!==null&&(i.f|=lr)),i!==null&&(i.parent=s,s!==null&&Ll(i,s),vt!==null&&(vt.f&Nt)!==0&&(e&fr)===0)){var o=vt;(o.effects??=[]).push(i)}return n}function Zr(){return vt!==null&&!ba}function ds(e){const t=Ea(js,null,!1);return jt(t,It),t.teardown=e,t}function nn(e){Xi();var t=ht.f,a=!vt&&(t&Da)!==0&&(t&Ds)===0;if(a){var s=St;(s.e??=[]).push(e)}else return Ki(e)}function Ki(e){return Ea(xn|Pi,e,!1)}function zl(e){return Xi(),Ea(js|Pi,e,!0)}function Rl(e){ma.ensure();const t=Ea(fr|Rr,e,!0);return(a={})=>new Promise(s=>{a.outro?ar(t,()=>{Gt(t),s(void 0)}):(Gt(t),s(void 0))})}function Xt(e){return Ea(xn,e,!1)}function ne(e,t){var a=St,s={effect:null,ran:!1,deps:e};a.l.$.push(s),s.effect=jr(()=>{e(),!s.ran&&(s.ran=!0,_(t))})}function ea(){var e=St;jr(()=>{for(var t of e.l.$){t.deps();var a=t.effect;(a.f&It)!==0&&jt(a,pa),Nr(a)&&Cr(a),t.ran=!1}})}function Il(e){return Ea(Sn|Rr,e,!0)}function jr(e,t=0){return Ea(js|t,e,!0)}function ie(e,t=[],a=[],s=[]){kl(s,t,a,n=>{Ea(js,()=>e(...n.map(r)),!0)})}function An(e,t=0){var a=Ea(Sa|t,e,!0);return a}function da(e){return Ea(Da|Rr,e,!0)}function Gi(e){var t=e.teardown;if(t!==null){const a=gr,s=vt;Qn(!0),Kt(null);try{t.call(null)}finally{Qn(a),Kt(s)}}}function Zi(e,t=!1){var a=e.first;for(e.first=e.last=null;a!==null;){const n=a.ac;n!==null&&pr(()=>{n.abort(xr)});var s=a.next;(a.f&fr)!==0?a.parent=null:Gt(a,t),a=s}}function jl(e){for(var t=e.first;t!==null;){var a=t.next;(t.f&Da)===0&&Gt(t),t=a}}function Gt(e,t=!0){var a=!1;(t||(e.f&Ci)!==0)&&e.nodes!==null&&e.nodes.end!==null&&(Ji(e.nodes.start,e.nodes.end),a=!0),Zi(e,t&&!a),Ts(e,0),jt(e,za);var s=e.nodes&&e.nodes.t;if(s!==null)for(const i of s)i.stop();Gi(e);var n=e.parent;n!==null&&n.first!==null&&eo(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function Ji(e,t){for(;e!==null;){var a=e===t?null:cs(e);e.remove(),e=a}}function eo(e){var t=e.parent,a=e.prev,s=e.next;a!==null&&(a.next=s),s!==null&&(s.prev=a),t!==null&&(t.first===e&&(t.first=s),t.last===e&&(t.last=a))}function ar(e,t,a=!0){var s=[];to(e,s,!0);var n=()=>{a&&Gt(e),t&&t()},i=s.length;if(i>0){var o=()=>--i||n();for(var l of s)l.out(o)}else n()}function to(e,t,a){if((e.f&oa)===0){e.f^=oa;var s=e.nodes&&e.nodes.t;if(s!==null)for(const l of s)(l.is_global||a)&&t.push(l);for(var n=e.first;n!==null;){var i=n.next,o=(n.f&lr)!==0||(n.f&Da)!==0&&(e.f&Sa)!==0;to(n,t,o?a:!1),n=i}}}function Mn(e){ao(e,!0)}function ao(e,t){if((e.f&oa)!==0){e.f^=oa,(e.f&It)===0&&(jt(e,Zt),dr(e));for(var a=e.first;a!==null;){var s=a.next,n=(a.f&lr)!==0||(a.f&Da)!==0;ao(a,n?t:!1),a=s}var i=e.nodes&&e.nodes.t;if(i!==null)for(const o of i)(o.is_global||t)&&o.in()}}function ro(e,t){if(e.nodes)for(var a=e.nodes.start,s=e.nodes.end;a!==null;){var n=a===s?null:cs(a);t.append(a),a=n}}let kr=null;function Nl(e){var t=kr;try{if(kr=new Set,_(e),t!==null)for(var a of kr)t.add(a);return kr}finally{kr=t}}function Dl(e){for(var t of Nl(e))ur(t,t.v)}let rr=!1;function Es(e){rr=e}let gr=!1;function Qn(e){gr=e}let vt=null,ba=!1;function Kt(e){vt=e}let ht=null;function xa(e){ht=e}let ja=null;function so(e){vt!==null&&(ja===null?ja=[e]:ja.push(e))}let Ht=null,ta=0,la=null;function Ol(e){la=e}let no=1,Jr=0,sr=Jr;function Xn(e){sr=e}function io(){return++no}function Nr(e){var t=e.f;if((t&Zt)!==0)return!0;if(t&Nt&&(e.f&=~cr),(t&pa)!==0){var a=e.deps;if(a!==null)for(var s=a.length,n=0;n<s;n++){var i=a[n];if(Nr(i)&&qi(i),i.wv>e.wv)return!0}(t&ha)!==0&&va===null&&jt(e,It)}return!1}function oo(e,t,a=!0){var s=e.reactions;if(s!==null&&!ja?.includes(e))for(var n=0;n<s.length;n++){var i=s[n];(i.f&Nt)!==0?oo(i,t,!1):t===i&&(a?jt(i,Zt):(i.f&It)!==0&&jt(i,pa),dr(i))}}function lo(e){var t=Ht,a=ta,s=la,n=vt,i=ja,o=St,l=ba,v=sr,d=e.f;Ht=null,ta=0,la=null,vt=(d&(Da|fr))===0?e:null,ja=null,Ar(e.ctx),ba=!1,sr=++Jr,e.ac!==null&&(pr(()=>{e.ac.abort(xr)}),e.ac=null);try{e.f|=an;var u=e.fn,h=u(),f=e.deps;if(Ht!==null){var p;if(Ts(e,ta),f!==null&&ta>0)for(f.length=ta+Ht.length,p=0;p<Ht.length;p++)f[ta+p]=Ht[p];else e.deps=f=Ht;if(Zr()&&(e.f&ha)!==0)for(p=ta;p<f.length;p++)(f[p].reactions??=[]).push(e)}else f!==null&&ta<f.length&&(Ts(e,ta),f.length=ta);if(os()&&la!==null&&!ba&&f!==null&&(e.f&(Nt|pa|Zt))===0)for(p=0;p<la.length;p++)oo(la[p],e);return n!==null&&n!==e&&(Jr++,la!==null&&(s===null?s=la:s.push(...la))),(e.f&Va)!==0&&(e.f^=Va),h}catch(S){return ji(S)}finally{e.f^=an,Ht=t,ta=a,la=s,vt=n,ja=i,Ar(o),ba=l,sr=v}}function Fl(e,t){let a=t.reactions;if(a!==null){var s=Lo.call(a,e);if(s!==-1){var n=a.length-1;n===0?a=t.reactions=null:(a[s]=a[n],a.pop())}}a===null&&(t.f&Nt)!==0&&(Ht===null||!Ht.includes(t))&&(jt(t,pa),(t.f&ha)!==0&&(t.f^=ha,t.f&=~cr),Fi(t),Ts(t,0))}function Ts(e,t){var a=e.deps;if(a!==null)for(var s=t;s<a.length;s++)Fl(e,a[s])}function Cr(e){var t=e.f;if((t&za)===0){jt(e,It);var a=ht,s=rr;ht=e,rr=!0;try{(t&(Sa|No))!==0?jl(e):Zi(e),Gi(e);var n=lo(e);e.teardown=typeof n=="function"?n:null,e.wv=no;var i;tn&&fl&&(e.f&Zt)!==0&&e.deps}finally{rr=s,ht=a}}}async function $r(){await Promise.resolve(),gl()}function r(e){var t=e.f,a=(t&Nt)!==0;if(kr?.add(e),vt!==null&&!ba){var s=ht!==null&&(ht.f&za)!==0;if(!s&&!ja?.includes(e)){var n=vt.deps;if((vt.f&an)!==0)e.rv<Jr&&(e.rv=Jr,Ht===null&&n!==null&&n[ta]===e?ta++:Ht===null?Ht=[e]:Ht.includes(e)||Ht.push(e));else{(vt.deps??=[]).push(e);var i=e.reactions;i===null?e.reactions=[vt]:i.includes(vt)||i.push(vt)}}}if(gr){if(Wa.has(e))return Wa.get(e);if(a){var o=e,l=o.v;return((o.f&It)===0&&o.reactions!==null||vo(o))&&(l=$n(o)),Wa.set(o,l),l}}else a&&(!va?.has(e)||ft?.is_fork&&!Zr())&&(o=e,Nr(o)&&qi(o),rr&&Zr()&&(o.f&ha)===0&&co(o));if(va?.has(e))return va.get(e);if((e.f&Va)!==0)throw e.v;return e.v}function co(e){if(e.deps!==null){e.f^=ha;for(const t of e.deps)(t.reactions??=[]).push(e),(t.f&Nt)!==0&&(t.f&ha)===0&&co(t)}}function vo(e){if(e.v===Ft)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(Wa.has(t)||(t.f&Nt)!==0&&vo(t))return!0;return!1}function _(e){var t=ba;try{return ba=!0,e()}finally{ba=t}}const ql=-7169;function jt(e,t){e.f=e.f&ql|t}function L(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Ra in e)on(e);else if(!Array.isArray(e))for(let t in e){const a=e[t];typeof a=="object"&&a&&Ra in a&&on(a)}}}function on(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let s in e)try{on(e[s],t)}catch{}const a=kn(e);if(a!==Object.prototype&&a!==Array.prototype&&a!==Map.prototype&&a!==Set.prototype&&a!==Date.prototype){const s=Ai(a);for(let n in s){const i=s[n].get;if(i)try{i.call(e)}catch{}}}}}const Bl=["touchstart","touchmove"];function Yl(e){return Bl.includes(e)}const Ul=new Set,Kn=new Set;function Hl(e,t,a,s={}){function n(i){if(s.capture||Br.call(t,i),!i.cancelBubble)return pr(()=>a?.call(this,i))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?hr(()=>{t.addEventListener(e,n,s)}):t.addEventListener(e,n,s),n}function M(e,t,a,s,n){var i={capture:s,passive:n},o=Hl(e,t,a,i);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&ds(()=>{t.removeEventListener(e,o,i)})}let Gn=null;function Br(e){var t=this,a=t.ownerDocument,s=e.type,n=e.composedPath?.()||[],i=n[0]||e.target;Gn=e;var o=0,l=Gn===e&&e.__root;if(l){var v=n.indexOf(l);if(v!==-1&&(t===document||t===window)){e.__root=t;return}var d=n.indexOf(t);if(d===-1)return;v<=d&&(o=v)}if(i=n[o]||e.target,i!==t){$i(e,"currentTarget",{configurable:!0,get(){return i||a}});var u=vt,h=ht;Kt(null),xa(null);try{for(var f,p=[];i!==null;){var S=i.assignedSlot||i.parentNode||i.host||null;try{var E=i["__"+s];E!=null&&(!i.disabled||e.target===i)&&E.call(i,e)}catch(k){f?p.push(k):f=k}if(e.cancelBubble||S===t||S===null)break;i=S}if(f){for(let k of p)queueMicrotask(()=>{throw k});throw f}}finally{e.__root=t,delete e.currentTarget,Kt(u),xa(h)}}}function uo(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function es(e,t){var a=ht;a.nodes===null&&(a.nodes={start:e,end:t,a:null,t:null})}function w(e,t){var a=(t&ll)!==0,s=(t&cl)!==0,n,i=!e.startsWith("<!>");return()=>{n===void 0&&(n=uo(i?e:"<!>"+e),a||(n=Ya(n)));var o=s||Ui?document.importNode(n,!0):n.cloneNode(!0);if(a){var l=Ya(o),v=o.lastChild;es(l,v)}else es(o,o);return o}}function $a(e=""){{var t=Ia(e+"");return es(t,t),t}}function it(){var e=document.createDocumentFragment(),t=document.createComment(""),a=Ia();return e.append(t,a),es(t,a),e}function m(e,t){e!==null&&e.before(t)}let ln=!0;function oe(e,t){var a=t==null?"":typeof t=="object"?t+"":t;a!==(e.__t??=e.nodeValue)&&(e.__t=a,e.nodeValue=a+"")}function Vl(e,t){return Wl(e,t)}const _r=new Map;function Wl(e,{target:t,anchor:a,props:s={},events:n,context:i,intro:o=!0}){Al();var l=new Set,v=h=>{for(var f=0;f<h.length;f++){var p=h[f];if(!l.has(p)){l.add(p);var S=Yl(p);t.addEventListener(p,Br,{passive:S});var E=_r.get(p);E===void 0?(document.addEventListener(p,Br,{passive:S}),_r.set(p,1)):_r.set(p,E+1)}}};v(Is(Ul)),Kn.add(v);var d=void 0,u=Rl(()=>{var h=a??t.appendChild(Ia());return yl(h,{pending:()=>{}},f=>{if(i){Lt({});var p=St;p.c=i}n&&(s.$$events=n),ln=o,d=e(f,s)||{},ln=!0,i&&zt()}),()=>{for(var f of l){t.removeEventListener(f,Br);var p=_r.get(f);--p===0?(document.removeEventListener(f,Br),_r.delete(f)):_r.set(f,p)}Kn.delete(v),h!==a&&h.parentNode?.removeChild(h)}});return Ql.set(d,u),d}let Ql=new WeakMap;class Xl{anchor;#e=new Map;#t=new Map;#a=new Map;#r=new Set;#l=!0;constructor(t,a=!0){this.anchor=t,this.#l=a}#n=()=>{var t=ft;if(this.#e.has(t)){var a=this.#e.get(t),s=this.#t.get(a);if(s)Mn(s),this.#r.delete(a);else{var n=this.#a.get(a);n&&(this.#t.set(a,n.effect),this.#a.delete(a),n.fragment.lastChild.remove(),this.anchor.before(n.fragment),s=n.effect)}for(const[i,o]of this.#e){if(this.#e.delete(i),i===t)break;const l=this.#a.get(o);l&&(Gt(l.effect),this.#a.delete(o))}for(const[i,o]of this.#t){if(i===a||this.#r.has(i))continue;const l=()=>{if(Array.from(this.#e.values()).includes(i)){var d=document.createDocumentFragment();ro(o,d),d.append(Ia()),this.#a.set(i,{effect:o,fragment:d})}else Gt(o);this.#r.delete(i),this.#t.delete(i)};this.#l||!s?(this.#r.add(i),ar(o,l,!1)):l()}}};#s=t=>{this.#e.delete(t);const a=Array.from(this.#e.values());for(const[s,n]of this.#a)a.includes(s)||(Gt(n.effect),this.#a.delete(s))};ensure(t,a){var s=ft,n=Wi();if(a&&!this.#t.has(t)&&!this.#a.has(t))if(n){var i=document.createDocumentFragment(),o=Ia();i.append(o),this.#a.set(t,{effect:da(()=>a(o)),fragment:i})}else this.#t.set(t,da(()=>a(this.anchor)));if(this.#e.set(s,t),n){for(const[l,v]of this.#t)l===t?s.skipped_effects.delete(v):s.skipped_effects.add(v);for(const[l,v]of this.#a)l===t?s.skipped_effects.delete(v.effect):s.skipped_effects.add(v.effect);s.oncommit(this.#n),s.ondiscard(this.#s)}else this.#n()}}function P(e,t,a=!1){var s=new Xl(e),n=a?lr:0;function i(o,l){s.ensure(o,l)}An(()=>{var o=!1;t((l,v=!0)=>{o=!0,i(v,l)}),o||i(!1,null)},n)}function qt(e,t){return t}function Kl(e,t,a){for(var s=[],n=t.length,i,o=t.length,l=0;l<n;l++){let h=t[l];ar(h,()=>{if(i){if(i.pending.delete(h),i.done.add(h),i.pending.size===0){var f=e.outrogroups;cn(Is(i.done)),f.delete(i),f.size===0&&(e.outrogroups=null)}}else o-=1},!1)}if(o===0){var v=s.length===0&&a!==null;if(v){var d=a,u=d.parentNode;Ml(u),u.append(d),e.items.clear()}cn(t,!v)}else i={pending:new Set(t),done:new Set},(e.outrogroups??=new Set).add(i)}function cn(e,t=!0){for(var a=0;a<e.length;a++)Gt(e[a],t)}var Zn;function Et(e,t,a,s,n,i=null){var o=e,l=new Map,v=(t&Li)!==0;if(v){var d=e;o=d.appendChild(Ia())}var u=null,h=yt(()=>{var x=a();return is(x)?x:x==null?[]:Is(x)}),f,p=!0;function S(){k.fallback=u,Gl(k,f,o,t,s),u!==null&&(f.length===0?(u.f&Ca)===0?Mn(u):(u.f^=Ca,Yr(u,null,o)):ar(u,()=>{u=null}))}var E=An(()=>{f=r(h);for(var x=f.length,Q=new Set,de=ft,he=Wi(),J=0;J<x;J+=1){var ye=f[J],_e=s(ye,J),Z=p?null:l.get(_e);Z?(Z.v&&ur(Z.v,ye),Z.i&&ur(Z.i,J),he&&de.skipped_effects.delete(Z.e)):(Z=Zl(l,p?o:Zn??=Ia(),ye,_e,J,n,t,a),p||(Z.e.f|=Ca),l.set(_e,Z)),Q.add(_e)}if(x===0&&i&&!u&&(p?u=da(()=>i(o)):(u=da(()=>i(Zn??=Ia())),u.f|=Ca)),!p)if(he){for(const[Me,N]of l)Q.has(Me)||de.skipped_effects.add(N.e);de.oncommit(S),de.ondiscard(()=>{})}else S();r(h)}),k={effect:E,items:l,outrogroups:null,fallback:u};p=!1}function Gl(e,t,a,s,n){var i=(s&Zo)!==0,o=t.length,l=e.items,v=e.effect.first,d,u=null,h,f=[],p=[],S,E,k,x;if(i)for(x=0;x<o;x+=1)S=t[x],E=n(S,x),k=l.get(E).e,(k.f&Ca)===0&&(k.nodes?.a?.measure(),(h??=new Set).add(k));for(x=0;x<o;x+=1){if(S=t[x],E=n(S,x),k=l.get(E).e,e.outrogroups!==null)for(const N of e.outrogroups)N.pending.delete(k),N.done.delete(k);if((k.f&Ca)!==0)if(k.f^=Ca,k===v)Yr(k,null,a);else{var Q=u?u.next:v;k===e.effect.last&&(e.effect.last=k.prev),k.prev&&(k.prev.next=k.next),k.next&&(k.next.prev=k.prev),qa(e,u,k),qa(e,k,Q),Yr(k,Q,a),u=k,f=[],p=[],v=u.next;continue}if((k.f&oa)!==0&&(Mn(k),i&&(k.nodes?.a?.unfix(),(h??=new Set).delete(k))),k!==v){if(d!==void 0&&d.has(k)){if(f.length<p.length){var de=p[0],he;u=de.prev;var J=f[0],ye=f[f.length-1];for(he=0;he<f.length;he+=1)Yr(f[he],de,a);for(he=0;he<p.length;he+=1)d.delete(p[he]);qa(e,J.prev,ye.next),qa(e,u,J),qa(e,ye,de),v=de,u=ye,x-=1,f=[],p=[]}else d.delete(k),Yr(k,v,a),qa(e,k.prev,k.next),qa(e,k,u===null?e.effect.first:u.next),qa(e,u,k),u=k;continue}for(f=[],p=[];v!==null&&v!==k;)(d??=new Set).add(v),p.push(v),v=v.next;if(v===null)continue}(k.f&Ca)===0&&f.push(k),u=k,v=k.next}if(e.outrogroups!==null){for(const N of e.outrogroups)N.pending.size===0&&(cn(Is(N.done)),e.outrogroups?.delete(N));e.outrogroups.size===0&&(e.outrogroups=null)}if(v!==null||d!==void 0){var _e=[];if(d!==void 0)for(k of d)(k.f&oa)===0&&_e.push(k);for(;v!==null;)(v.f&oa)===0&&v!==e.fallback&&_e.push(v),v=v.next;var Z=_e.length;if(Z>0){var Me=(s&Li)!==0&&o===0?a:null;if(i){for(x=0;x<Z;x+=1)_e[x].nodes?.a?.measure();for(x=0;x<Z;x+=1)_e[x].nodes?.a?.fix()}Kl(e,_e,Me)}}i&&hr(()=>{if(h!==void 0)for(k of h)k.nodes?.a?.apply()})}function Zl(e,t,a,s,n,i,o,l){var v=(o&Ko)!==0?(o&Jo)===0?$(a,!1,!1):vr(a):null,d=(o&Go)!==0?vr(n):null;return{v,i:d,e:da(()=>(i(t,v??a,d??n,l),()=>{e.delete(s)}))}}function Yr(e,t,a){if(e.nodes)for(var s=e.nodes.start,n=e.nodes.end,i=t&&(t.f&Ca)===0?t.nodes.start:a;s!==null;){var o=cs(s);if(i.before(s),s===n)return;s=o}}function qa(e,t,a){t===null?e.effect.first=a:t.next=a,a===null?e.effect.last=t:a.prev=t}function ee(e,t,a=!1,s=!1,n=!1){var i=e,o="";ie(()=>{var l=ht;if(o!==(o=t()??"")&&(l.nodes!==null&&(Ji(l.nodes.start,l.nodes.end),l.nodes=null),o!=="")){var v=o+"";a?v=`<svg>${v}</svg>`:s&&(v=`<math>${v}</math>`);var d=uo(v);if((a||s)&&(d=Ya(d)),es(Ya(d),d.lastChild),a||s)for(;Ya(d);)i.before(Ya(d));else i.before(d)}})}function Ur(e,t,a,s,n){var i=t.$$slots?.[a],o=!1;i===!0&&(i=t[a==="default"?"children":a],o=!0),i===void 0||i(e,o?()=>s:s)}const Jl=()=>performance.now(),Ma={tick:e=>requestAnimationFrame(e),now:()=>Jl(),tasks:new Set};function fo(){const e=Ma.now();Ma.tasks.forEach(t=>{t.c(e)||(Ma.tasks.delete(t),t.f())}),Ma.tasks.size!==0&&Ma.tick(fo)}function ec(e){let t;return Ma.tasks.size===0&&Ma.tick(fo),{promise:new Promise(a=>{Ma.tasks.add(t={c:e,f:a})}),abort(){Ma.tasks.delete(t)}}}function hs(e,t){pr(()=>{e.dispatchEvent(new CustomEvent(t))})}function tc(e){if(e==="float")return"cssFloat";if(e==="offset")return"cssOffset";if(e.startsWith("--"))return e;const t=e.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(a=>a[0].toUpperCase()+a.slice(1)).join("")}function Jn(e){const t={},a=e.split(";");for(const s of a){const[n,i]=s.split(":");if(!n||i===void 0)break;const o=tc(n.trim());t[o]=i.trim()}return t}const ac=e=>e;function kt(e,t,a,s){var n=(e&nl)!==0,i=(e&il)!==0,o=n&&i,l=(e&ol)!==0,v=o?"both":n?"in":"out",d,u=t.inert,h=t.style.overflow,f,p;function S(){return pr(()=>d??=a()(t,s?.()??{},{direction:v}))}var E={is_global:l,in(){if(t.inert=u,!n){p?.abort(),p?.reset?.();return}i||f?.abort(),hs(t,"introstart"),f=dn(t,S(),p,1,()=>{hs(t,"introend"),f?.abort(),f=d=void 0,t.style.overflow=h})},out(de){if(!i){de?.(),d=void 0;return}t.inert=!0,hs(t,"outrostart"),p=dn(t,S(),f,0,()=>{hs(t,"outroend"),de?.()})},stop:()=>{f?.abort(),p?.abort()}},k=ht;if((k.nodes.t??=[]).push(E),n&&ln){var x=l;if(!x){for(var Q=k.parent;Q&&(Q.f&lr)!==0;)for(;(Q=Q.parent)&&(Q.f&Sa)===0;);x=!Q||(Q.f&Ds)!==0}x&&Xt(()=>{_(()=>E.in())})}}function dn(e,t,a,s,n){var i=s===1;if(Io(t)){var o,l=!1;return hr(()=>{if(!l){var k=t({direction:i?"in":"out"});o=dn(e,k,a,s,n)}}),{abort:()=>{l=!0,o?.abort()},deactivate:()=>o.deactivate(),reset:()=>o.reset(),t:()=>o.t()}}if(a?.deactivate(),!t?.duration)return n(),{abort:sa,deactivate:sa,reset:sa,t:()=>s};const{delay:v=0,css:d,tick:u,easing:h=ac}=t;var f=[];if(i&&a===void 0&&(u&&u(0,1),d)){var p=Jn(d(0,1));f.push(p,p)}var S=()=>1-s,E=e.animate(f,{duration:v,fill:"forwards"});return E.onfinish=()=>{E.cancel();var k=a?.t()??1-s;a?.abort();var x=s-k,Q=t.duration*Math.abs(x),de=[];if(Q>0){var he=!1;if(d)for(var J=Math.ceil(Q/16.666666666666668),ye=0;ye<=J;ye+=1){var _e=k+x*h(ye/J),Z=Jn(d(_e,1-_e));de.push(Z),he||=Z.overflow==="hidden"}he&&(e.style.overflow="hidden"),S=()=>{var Me=E.currentTime;return k+x*h(Me/Q)},u&&ec(()=>{if(E.playState!=="running")return!1;var Me=S();return u(Me,1-Me),!0})}E=e.animate(de,{duration:Q,fill:"forwards"}),E.onfinish=()=>{S=()=>s,u?.(s,1-s),n()}},{abort:()=>{E&&(E.cancel(),E.effect=null,E.onfinish=sa)},deactivate:()=>{n=sa},reset:()=>{s===0&&u?.(1,0)},t:()=>S()}}function Cn(e,t,a){Xt(()=>{var s=_(()=>t(e,a?.())||{});if(a&&s?.update){var n=!1,i={};jr(()=>{var o=a();L(o),n&&Tn(i,o)&&(i=o,s.update(o))}),n=!0}if(s?.destroy)return()=>s.destroy()})}const ei=[...` 	
\r\fÂ \v\uFEFF`];function rc(e,t,a){var s=e==null?"":""+e;if(t&&(s=s?s+" "+t:t),a){for(var n in a)if(a[n])s=s?s+" "+n:n;else if(s.length)for(var i=n.length,o=0;(o=s.indexOf(n,o))>=0;){var l=o+i;(o===0||ei.includes(s[o-1]))&&(l===s.length||ei.includes(s[l]))?s=(o===0?"":s.substring(0,o))+s.substring(l+1):o=l}}return s===""?null:s}function ti(e,t=!1){var a=t?" !important;":";",s="";for(var n in e){var i=e[n];i!=null&&i!==""&&(s+=" "+n+": "+i+a)}return s}function Hs(e){return e[0]!=="-"||e[1]!=="-"?e.toLowerCase():e}function sc(e,t){if(t){var a="",s,n;if(Array.isArray(t)?(s=t[0],n=t[1]):s=t,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var i=!1,o=0,l=!1,v=[];s&&v.push(...Object.keys(s).map(Hs)),n&&v.push(...Object.keys(n).map(Hs));var d=0,u=-1;const E=e.length;for(var h=0;h<E;h++){var f=e[h];if(l?f==="/"&&e[h-1]==="*"&&(l=!1):i?i===f&&(i=!1):f==="/"&&e[h+1]==="*"?l=!0:f==='"'||f==="'"?i=f:f==="("?o++:f===")"&&o--,!l&&i===!1&&o===0){if(f===":"&&u===-1)u=h;else if(f===";"||h===E-1){if(u!==-1){var p=Hs(e.substring(d,u).trim());if(!v.includes(p)){f!==";"&&h++;var S=e.substring(d,h).trim();a+=" "+S+";"}}d=h+1,u=-1}}}}return s&&(a+=ti(s)),n&&(a+=ti(n,!0)),a=a.trim(),a===""?null:a}return e==null?null:String(e)}function ot(e,t,a,s,n,i){var o=e.__className;if(o!==a||o===void 0){var l=rc(a,s,i);l==null?e.removeAttribute("class"):e.className=l,e.__className=a}else if(i&&n!==i)for(var v in i){var d=!!i[v];(n==null||d!==!!n[v])&&e.classList.toggle(v,d)}return i}function Vs(e,t={},a,s){for(var n in a){var i=a[n];t[n]!==i&&(a[n]==null?e.style.removeProperty(n):e.style.setProperty(n,i,s))}}function mt(e,t,a,s){var n=e.__style;if(n!==t){var i=sc(t,s);i==null?e.removeAttribute("style"):e.style.cssText=i,e.__style=t}else s&&(Array.isArray(s)?(Vs(e,a?.[0],s[0]),Vs(e,a?.[1],s[1],"important")):Vs(e,a,s));return s}function ho(e,t,a=!1){if(e.multiple){if(t==null)return;if(!is(t))return vl();for(var s of e.options)s.selected=t.includes(Qr(s));return}for(s of e.options){var n=Qr(s);if($l(n,t)){s.selected=!0;return}}(!a||t!==void 0)&&(e.selectedIndex=-1)}function nc(e){var t=new MutationObserver(()=>{ho(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),ds(()=>{t.disconnect()})}function ic(e,t,a=t){var s=new WeakSet,n=!0;Qi(e,"change",i=>{var o=i?"[selected]":":checked",l;if(e.multiple)l=[].map.call(e.querySelectorAll(o),Qr);else{var v=e.querySelector(o)??e.querySelector("option:not([disabled])");l=v&&Qr(v)}a(l),ft!==null&&s.add(ft)}),Xt(()=>{var i=t();if(e===document.activeElement){var o=Hr??ft;if(s.has(o))return}if(ho(e,i,n),n&&i===void 0){var l=e.querySelector(":checked");l!==null&&(i=Qr(l),a(i))}e.__value=i,n=!1}),nc(e)}function Qr(e){return"__value"in e?e.__value:e.value}const oc=Symbol("is custom element"),lc=Symbol("is html");function po(e,t){var a=go(e);a.value===(a.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!=="PROGRESS")||(e.value=t??"")}function Jt(e,t,a,s){var n=go(e);n[t]!==(n[t]=a)&&(t==="loading"&&(e[Oo]=a),a==null?e.removeAttribute(t):typeof a!="string"&&cc(e).includes(t)?e[t]=a:e.setAttribute(t,a))}function go(e){return e.__attributes??={[oc]:e.nodeName.includes("-"),[lc]:e.namespaceURI===dl}}var ai=new Map;function cc(e){var t=e.getAttribute("is")||e.nodeName,a=ai.get(t);if(a)return a;ai.set(t,a=[]);for(var s,n=e,i=Element.prototype;i!==n;){s=Ai(n);for(var o in s)s[o].set&&a.push(o);n=kn(n)}return a}function nr(e,t,a=t){var s=new WeakSet;Qi(e,"input",async n=>{var i=n?e.defaultValue:e.value;if(i=Ws(e)?Qs(i):i,a(i),ft!==null&&s.add(ft),await $r(),i!==(i=t())){var o=e.selectionStart,l=e.selectionEnd,v=e.value.length;if(e.value=i??"",l!==null){var d=e.value.length;o===l&&l===v&&d>v?(e.selectionStart=d,e.selectionEnd=d):(e.selectionStart=o,e.selectionEnd=Math.min(l,d))}}}),_(t)==null&&e.value&&(a(Ws(e)?Qs(e.value):e.value),ft!==null&&s.add(ft)),jr(()=>{var n=t();if(e===document.activeElement){var i=Hr??ft;if(s.has(i))return}Ws(e)&&n===Qs(e.value)||e.type==="date"&&!n&&!e.value||n!==e.value&&(e.value=n??"")})}function Ws(e){var t=e.type;return t==="number"||t==="range"}function Qs(e){return e===""?null:+e}class Pn{#e=new WeakMap;#t;#a;static entries=new WeakMap;constructor(t){this.#a=t}observe(t,a){var s=this.#e.get(t)||new Set;return s.add(a),this.#e.set(t,s),this.#r().observe(t,this.#a),()=>{var n=this.#e.get(t);n.delete(a),n.size===0&&(this.#e.delete(t),this.#t.unobserve(t))}}#r(){return this.#t??(this.#t=new ResizeObserver(t=>{for(var a of t){Pn.entries.set(a.target,a);for(var s of this.#e.get(a.target)||[])s(a)}}))}}var dc=new Pn({box:"border-box"});function ri(e,t,a){var s=dc.observe(e,()=>a(e[t]));Xt(()=>(_(()=>a(e[t])),s))}function si(e,t){return e===t||e?.[Ra]===t}function Na(e={},t,a,s){return Xt(()=>{var n,i;return jr(()=>{n=i,i=[],_(()=>{e!==a(...i)&&(t(e,...i),n&&si(a(...n),e)&&t(null,...n))})}),()=>{hr(()=>{i&&si(a(...i),e)&&t(null,...i)})}}),e}function ni(e,t){Pl(window,["resize"],()=>pr(()=>t(window[e])))}function na(e){return function(...t){var a=t[0];return a.stopPropagation(),e?.apply(this,t)}}function Dt(e=!1){const t=St,a=t.l.u;if(!a)return;let s=()=>L(t.s);if(e){let n=0,i={};const o=ls(()=>{let l=!1;const v=t.s;for(const d in v)v[d]!==i[d]&&(i[d]=v[d],l=!0);return l&&n++,n});s=()=>r(o)}a.b.length&&zl(()=>{ii(t,s),xs(a.b)}),nn(()=>{const n=_(()=>a.m.map(jo));return()=>{for(const i of n)typeof i=="function"&&i()}}),a.a.length&&nn(()=>{ii(t,s),xs(a.a)})}function ii(e,t){if(e.l.s)for(const a of e.l.s)r(a);t()}function ts(e,t){var a=e.$$events?.[t.type],s=is(a)?a.slice():a==null?[]:[a];for(var n of s)n.call(this,t)}function Ln(e,t,a){if(e==null)return t(void 0),a&&a(void 0),sa;const s=_(()=>e.subscribe(t,a));return s.unsubscribe?()=>s.unsubscribe():s}const mr=[];function vc(e,t){return{subscribe:Ze(e,t).subscribe}}function Ze(e,t=sa){let a=null;const s=new Set;function n(l){if(Tn(e,l)&&(e=l,a)){const v=!mr.length;for(const d of s)d[1](),mr.push(d,e);if(v){for(let d=0;d<mr.length;d+=2)mr[d][0](mr[d+1]);mr.length=0}}}function i(l){n(l(e))}function o(l,v=sa){const d=[l,v];return s.add(d),s.size===1&&(a=t(n,i)||sa),l(e),()=>{s.delete(d),s.size===0&&a&&(a(),a=null)}}return{set:n,update:i,subscribe:o}}function _o(e,t,a){const s=!Array.isArray(e),n=s?[e]:e;if(!n.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const i=t.length<2;return vc(a,(o,l)=>{let v=!1;const d=[];let u=0,h=sa;const f=()=>{if(u)return;h();const S=t(s?d[0]:d,o,l);i?o(S):h=typeof S=="function"?S:sa},p=n.map((S,E)=>Ln(S,k=>{d[E]=k,u&=~(1<<E),v&&f()},()=>{u|=1<<E}));return v=!0,f(),function(){xs(p),h(),v=!1}})}function et(e){let t;return Ln(e,a=>t=a)(),t}let ps=!1,vn=Symbol();function Te(e,t,a){const s=a[t]??={store:null,source:$(void 0),unsubscribe:sa};if(s.store!==e&&!(vn in a))if(s.unsubscribe(),s.store=e??null,e==null)s.source.v=void 0,s.unsubscribe=sa;else{var n=!0;s.unsubscribe=Ln(e,i=>{n?s.source.v=i:b(s.source,i)}),n=!1}return e&&vn in a?et(e):r(s.source)}function oi(e,t){return e.set(t),t}function Vt(){const e={};function t(){ds(()=>{for(var a in e)e[a].unsubscribe();$i(e,vn,{enumerable:!1,value:!0})})}return[e,t]}function uc(e,t,a){return e.set(a),t}function fc(e){var t=ps;try{return ps=!1,[e(),ps]}finally{ps=t}}function Tt(e,t,a,s){var n=!Ir||(a&tl)!==0,i=(a&rl)!==0,o=(a&sl)!==0,l=s,v=!0,d=()=>(v&&(v=!1,l=o?_(s):s),l),u;if(i){var h=Ra in e||Do in e;u=Tr(e,t)?.set??(h&&t in e?de=>e[t]=de:void 0)}var f,p=!1;i?[f,p]=fc(()=>e[t]):f=e[t],f===void 0&&s!==void 0&&(f=d(),u&&(n&&Ho(),u(f)));var S;if(n?S=()=>{var de=e[t];return de===void 0?d():(v=!0,de)}:S=()=>{var de=e[t];return de!==void 0&&(l=void 0),de===void 0?l:de},n&&(a&al)===0)return S;if(u){var E=e.$$legacy;return(function(de,he){return arguments.length>0?((!n||!he||E||p)&&u(he?S():de),de):S()})}var k=!1,x=((a&el)!==0?ls:yt)(()=>(k=!1,S()));i&&r(x);var Q=ht;return(function(de,he){if(arguments.length>0){const J=he?r(x):n&&i?Sr(de):de;return b(x,J),k=!0,l!==void 0&&(l=J),de}return gr&&k||(Q.f&za)!==0?x.v:r(x)})}function Oa(e){St===null&&En(),Ir&&St.l!==null?pc(St).m.push(e):nn(()=>{const t=_(e);if(typeof t=="function")return t})}function zn(e){St===null&&En(),Oa(()=>()=>_(e))}function hc(e,t,{bubbles:a=!1,cancelable:s=!1}={}){return new CustomEvent(e,{detail:t,bubbles:a,cancelable:s})}function Rn(){const e=St;return e===null&&En(),(t,a,s)=>{const n=e.s.$$events?.[t];if(n){const i=is(n)?n.slice():[n],o=hc(t,a,s);for(const l of i)l.call(e.x,o);return!o.defaultPrevented}return!0}}function pc(e){var t=e.l;return t.u??={a:[],b:[],m:[]}}const gc="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(gc);hl();const _c=e=>e;function mo(e){const t=e-1;return t*t*t+1}function li(e){const t=typeof e=="string"&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[e,"px"]}function At(e,{delay:t=0,duration:a=400,easing:s=_c}={}){const n=+getComputedStyle(e).opacity;return{delay:t,duration:a,easing:s,css:i=>`opacity: ${i*n}`}}function bo(e,{delay:t=0,duration:a=400,easing:s=mo,x:n=0,y:i=0,opacity:o=0}={}){const l=getComputedStyle(e),v=+l.opacity,d=l.transform==="none"?"":l.transform,u=v*(1-o),[h,f]=li(n),[p,S]=li(i);return{delay:t,duration:a,easing:s,css:(E,k)=>`
			transform: ${d} translate(${(1-E)*h}${f}, ${(1-E)*p}${S});
			opacity: ${v-u*k}`}}function In(e,{delay:t=0,duration:a=400,easing:s=mo,start:n=0,opacity:i=0}={}){const o=getComputedStyle(e),l=+o.opacity,v=o.transform==="none"?"":o.transform,d=1-n,u=l*(1-i);return{delay:t,duration:a,easing:s,css:(h,f)=>`
			transform: ${v} scale(${1-d*f});
			opacity: ${l-u*f}
		`}}const mc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-arrows-shuffle-2"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 4l3 3l-3 3" /><path d="M18 20l3 -3l-3 -3" /><path d="M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5" /><path d="M3 17h3a5 5 0 0 0 5 -5a5 5 0 0 1 5 -5h5" /></svg>',bc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-deezer"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 16.5h2v.5h-2z" /><path d="M8 16.5h2.5v.5h-2.5z" /><path d="M16 17h-2.5v-.5h2.5z" /><path d="M21.5 17h-2.5v-.5h2.5z" /><path d="M21.5 13h-2.5v.5h2.5z" /><path d="M21.5 9.5h-2.5v.5h2.5z" /><path d="M21.5 6h-2.5v.5h2.5z" /><path d="M16 13h-2.5v.5h2.5z" /><path d="M8 13.5h2.5v-.5h-2.5z" /><path d="M8 9.5h2.5v.5h-2.5z" /></svg>',yc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-compact-down"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 11l8 3l8 -3" /></svg>',wc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-compact-left"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M13 20l-3 -8l3 -8" /></svg>',kc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-left"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 6l-6 6l6 6" /></svg>',ci='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-disc"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0" /><path d="M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M7 12a5 5 0 0 1 5 -5" /><path d="M12 17a5 5 0 0 0 5 -5" /></svg>',xc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-grip-horizontal"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M5 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M12 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M12 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M19 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M19 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /></svg>',Sc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-heart"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M19.5 12.572l-7.5 7.428l-7.5 -7.428a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572" /></svg>',Ec='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-heart"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6.979 3.074a6 6 0 0 1 4.988 1.425l.037 .033l.034 -.03a6 6 0 0 1 4.733 -1.44l.246 .036a6 6 0 0 1 3.364 10.008l-.18 .185l-.048 .041l-7.45 7.379a1 1 0 0 1 -1.313 .082l-.094 -.082l-7.493 -7.422a6 6 0 0 1 3.176 -10.215z" /></svg>',Tc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-menu-2"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 6l16 0" /><path d="M4 12l16 0" /><path d="M4 18l16 0" /></svg>',Xs='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-music"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 17a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /><path d="M13 17a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /><path d="M9 17v-13h10v13" /><path d="M9 8h10" /></svg>',$c='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-pause"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z" /><path d="M17 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z" /></svg>',Ac='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-player-play"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 4v16l13 -8z" /></svg>',Mc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-play"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 4v16a1 1 0 0 0 1.524 .852l13 -8a1 1 0 0 0 0 -1.704l-13 -8a1 1 0 0 0 -1.524 .852z" /></svg>',Cc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-skip-back"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M19.496 4.136l-12 7a1 1 0 0 0 0 1.728l12 7a1 1 0 0 0 1.504 -.864v-14a1 1 0 0 0 -1.504 -.864z" /><path d="M4 4a1 1 0 0 1 .993 .883l.007 .117v14a1 1 0 0 1 -1.993 .117l-.007 -.117v-14a1 1 0 0 1 1 -1z" /></svg>',Pc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-skip-forward"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 5v14a1 1 0 0 0 1.504 .864l12 -7a1 1 0 0 0 0 -1.728l-12 -7a1 1 0 0 0 -1.504 .864z" /><path d="M20 4a1 1 0 0 1 .993 .883l.007 .117v14a1 1 0 0 1 -1.993 .117l-.007 -.117v-14a1 1 0 0 1 1 -1z" /></svg>',Lc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-playlist"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0" /><path d="M17 17v-13h4" /><path d="M13 5h-10" /><path d="M3 9l10 0" /><path d="M9 13h-6" /></svg>',zc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-radio"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3l-9.371 3.749a1 1 0 0 0 -.629 .928v11.323a1 1 0 0 0 1 1h14a1 1 0 0 0 1 -1v-11a1 1 0 0 0 -1 -1h-14.5" /><path d="M4 12h16" /><path d="M7 12v-2" /><path d="M17 16v.01" /><path d="M13 16v.01" /></svg>',Rc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-refresh"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4" /><path d="M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4" /></svg>',Ic='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-repeat"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 12v-3a3 3 0 0 1 3 -3h13m-3 -3l3 3l-3 3" /><path d="M20 12v3a3 3 0 0 1 -3 3h-13m3 3l-3 -3l3 -3" /></svg>',jc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-search"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0" /><path d="M21 21l-6 -6" /></svg>',Nc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-settings"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z" /><path d="M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /></svg>',Dc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-trash"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 7l16 0" /><path d="M10 11l0 6" /><path d="M14 11l0 6" /><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12" /><path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3" /></svg>',Oc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 8a5 5 0 0 1 0 8" /><path d="M17.7 5a9 9 0 0 1 0 14" /><path d="M6 15h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l3.5 -4.5a.8 .8 0 0 1 1.5 .5v14a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5" /></svg>',Fc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume-2"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 8a5 5 0 0 1 0 8" /><path d="M6 15h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l3.5 -4.5a.8 .8 0 0 1 1.5 .5v14a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5" /></svg>',qc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume-3"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 15h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l3.5 -4.5a.8 .8 0 0 1 1.5 .5v14a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5" /><path d="M16 10l4 4m0 -4l-4 4" /></svg>',Bc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume-off"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 8a5 5 0 0 1 1.912 4.934m-1.377 2.602a5 5 0 0 1 -.535 .464" /><path d="M17.7 5a9 9 0 0 1 2.362 11.086m-1.676 2.299a9 9 0 0 1 -.686 .615" /><path d="M9.069 5.054l.431 -.554a.8 .8 0 0 1 1.5 .5v2m0 4v8a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l1.294 -1.664" /><path d="M3 3l18 18" /></svg>',Yc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-x"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 6l-12 12" /><path d="M6 6l12 12" /></svg>',Uc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-device-floppy"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2" /><path d="M12 14m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0" /><path d="M14 4l0 4l-6 0l0 -4" /></svg>',Hc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-file-pencil"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3v4a1 1 0 0 0 1 1h4" /><path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z" /><path d="M10 18l5 -5a1.414 1.414 0 0 0 -2 -2l-5 5v2h2z" /></svg>',di='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-plus"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 5l0 14" /><path d="M5 12l14 0" /></svg>',Vc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-circle-check"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0" /><path d="M9 12l2 2l4 -4" /></svg>',Wc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-dots"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /></svg>',Qc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-sort-descending"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 6l9 0" /><path d="M4 12l7 0" /><path d="M4 18l7 0" /><path d="M15 15l3 3l3 -3" /><path d="M18 6l0 12" /></svg>',Xc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-sort-ascending"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 6l7 0" /><path d="M4 12l7 0" /><path d="M4 18l9 0" /><path d="M15 9l3 -3l3 3" /><path d="M18 6l0 12" /></svg>',Kc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-yandex"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 20v-16h-2a4 4 0 0 0 -4 4v1a4 4 0 0 0 4 4h2" /><path d="M9 20l3 -7" /></svg>',y={ARTISTS:Xs,ALBUMS:ci,GENRES:Xs,PLAYLISTS:Lc,RADIO:zc,SEARCH:jc,PLAY:Mc,PLAY_OUTLINE:Ac,PAUSE:$c,PREVIOUS:Cc,NEXT:Pc,SHUFFLE:mc,REPEAT:Ic,VOLUME_FULL:Oc,VOLUME_MEDIUM:Fc,VOLUME_MUTE:qc,VOLUME_OFF:Bc,HEART:Sc,HEART_FILLED:Ec,SYNC:Rc,SETTINGS:Nc,CLOSE:Yc,MENU:Tc,BACK:kc,BACK_COMPACT:wc,CHEVRON_DOWN:yc,DRAG_HANDLE:xc,REMOVE:Dc,DEEZER:bc,SAVE:Uc,EDIT:Hc,ADD:di,ACCEPT:Vc,DOTS:Wc,ADD_TO_PLAYLIST:di,ALBUM_LINK:ci,ARTIST_LINK:Xs,SORT_DESC:Qc,SORT_ASC:Xc,YANDEX:Kc},un=[{id:"default",label:"Default (Moode Dark)",colors:{"--c-white-10":"rgba(255, 255, 255, 0.1)","--c-white-20":"rgba(255, 255, 255, 0.2)","--c-white-30":"rgba(255, 255, 255, 0.3)","--c-white-50":"rgba(255, 255, 255, 0.5)","--c-white-60":"rgba(255, 255, 255, 0.6)","--c-white-90":"rgba(255, 255, 255, 0.9)","--c-black-20":"rgba(0, 0, 0, 0.2)","--c-black-50":"rgba(0, 0, 0, 0.5)","--c-black-70":"rgba(0, 0, 0, 0.7)","--c-black-80":"rgba(0, 0, 0, 0.8)","--c-black-90":"rgba(0, 0, 0, 0.9)","--c-accent":"#fa2d48","--c-accent-hover":"#ff4d65","--c-text-primary":"#ffffff","--c-text-secondary":"rgba(255, 255, 255, 0.6)","--c-text-muted":"#888888","--c-text-inverse":"#000000","--c-bg-app":"#000000","--c-bg-main":"#121212","--c-bg-sidebar":"#000000","--c-bg-card":"#1a1a1a","--c-bg-placeholder":"rgba(255, 255, 255, 0.1)","--c-bg-glass":"rgba(18, 18, 18, 0.95)","--c-bg-toast":"#333333","--c-heart":"#ff4444","--c-error":"#ff4444","--c-surface-hover":"rgba(255, 255, 255, 0.1)","--c-surface-active":"rgba(255, 255, 255, 0.2)","--c-surface-input":"#1a1a1a","--c-surface-input-focus":"rgba(255, 255, 255, 0.1)","--c-surface-button":"rgba(255, 255, 255, 0.1)","--c-surface-button-hover":"rgba(255, 255, 255, 0.1)","--c-surface-drag-phantom":"#1a1a1a","--c-surface-drag-land":"rgba(255, 255, 255, 0.1)","--c-rail-bg":"rgba(255, 255, 255, 0.2)","--c-rail-bg-hover":"rgba(255, 255, 255, 0.3)","--c-skeleton-base":"rgba(255, 255, 255, 0.1)","--c-border":"rgba(255, 255, 255, 0.1)","--c-border-dim":"rgba(255, 255, 255, 0.1)","--c-border-bright":"rgba(255, 255, 255, 0.2)","--c-border-dashed":"rgba(255, 255, 255, 0.2)","--c-border-dashed-hover":"rgba(255, 255, 255, 0.5)","--c-overlay-dim":"rgba(0, 0, 0, 0.5)","--c-overlay-backdrop":"rgba(0, 0, 0, 0.8)","--c-shadow-card":"rgba(0, 0, 0, 0.3)","--c-shadow-popover":"rgba(0, 0, 0, 0.5)","--c-shadow-header":"rgba(0, 0, 0, 0.5)","--c-shadow-phantom":"rgba(0, 0, 0, 0.7)","--c-shadow-glow-accent":"rgba(250, 45, 72, 0.5)","--c-icon-idle":"#9ca3af","--c-icon-hover":"#ffffff","--c-icon-faint":"rgba(255, 255, 255, 0.5)","--icon-stroke-width":"1.5px","--header-height":"64px","--mini-player-height":"90px","--sidebar-width":"260px","--radius-sm":"4px","--radius-md":"8px","--radius-lg":"12px","--radius-xl":"20px","--radius-full":"9999px","--z-base":"1","--z-dock":"1000","--z-modal":"2000","--z-toast":"3000","--z-drag-item":"9999","--trans-fast":"0.2s ease","--trans-smooth":"0.3s cubic-bezier(0.2, 0.8, 0.2, 1)","--c-pl-0":"#fa2d48","--c-pl-1":"#2d7afa","--c-pl-2":"#2dfa85","--c-pl-3":"#faac2d","--c-pl-4":"#b82dfa","--c-pl-5":"#2dfaf3"}},{id:"gruvbox",label:"Gruvbox Dark",colors:{"--c-white-10":"rgba(251, 241, 199, 0.1)","--c-white-20":"rgba(251, 241, 199, 0.2)","--c-white-30":"rgba(251, 241, 199, 0.3)","--c-white-50":"rgba(251, 241, 199, 0.5)","--c-white-60":"rgba(251, 241, 199, 0.6)","--c-white-90":"rgba(251, 241, 199, 0.9)","--c-black-20":"rgba(40, 40, 40, 0.2)","--c-black-50":"rgba(40, 40, 40, 0.5)","--c-black-70":"rgba(40, 40, 40, 0.7)","--c-black-80":"rgba(40, 40, 40, 0.8)","--c-black-90":"rgba(40, 40, 40, 0.9)","--c-accent":"#d65d0e","--c-accent-hover":"#fe8019","--c-text-primary":"#fbf1c7","--c-text-secondary":"#ebdbb2","--c-text-muted":"#928374","--c-text-inverse":"#282828","--c-bg-app":"#282828","--c-bg-main":"#282828","--c-bg-sidebar":"#282828","--c-bg-card":"#3c3836","--c-bg-placeholder":"#504945","--c-bg-glass":"rgba(40, 40, 40, 0.98)","--c-bg-toast":"#32302f","--c-heart":"#fb4934","--c-error":"#cc241d","--c-surface-hover":"#3c3836","--c-surface-active":"#504945","--c-surface-input":"#3c3836","--c-surface-input-focus":"#504945","--c-surface-button":"rgba(251, 241, 199, 0.1)","--c-surface-button-hover":"rgba(251, 241, 199, 0.2)","--c-surface-drag-phantom":"#504945","--c-surface-drag-land":"rgba(251, 241, 199, 0.1)","--c-rail-bg":"#504945","--c-rail-bg-hover":"#665c54","--c-skeleton-base":"#3c3836","--c-border":"#504945","--c-border-dim":"#3c3836","--c-border-bright":"#665c54","--c-border-dashed":"rgba(168, 153, 132, 0.2)","--c-border-dashed-hover":"rgba(168, 153, 132, 0.5)","--c-overlay-dim":"rgba(40, 40, 40, 0.6)","--c-overlay-backdrop":"rgba(29, 32, 33, 0.8)","--c-shadow-card":"rgba(0, 0, 0, 0.3)","--c-shadow-popover":"rgba(0, 0, 0, 0.5)","--c-shadow-header":"rgba(0, 0, 0, 0.2)","--c-shadow-phantom":"rgba(0, 0, 0, 0.5)","--c-shadow-glow-accent":"rgba(214, 93, 14, 0.3)","--c-icon-idle":"#a89984","--c-icon-hover":"#fbf1c7","--c-icon-faint":"#504945","--icon-stroke-width":"1.5px","--header-height":"64px","--mini-player-height":"90px","--sidebar-width":"260px","--radius-sm":"4px","--radius-md":"8px","--radius-lg":"12px","--radius-xl":"16px","--radius-full":"9999px","--z-base":"1","--z-dock":"1000","--z-modal":"2000","--z-toast":"3000","--z-drag-item":"9999","--trans-fast":"0.2s ease","--trans-smooth":"0.3s cubic-bezier(0.2, 0.8, 0.2, 1)","--c-pl-0":"#cc241d","--c-pl-1":"#458588","--c-pl-2":"#a6e3a1","--c-pl-3":"#d65d0e","--c-pl-4":"#b16286","--c-pl-5":"#fabd2f"}}],Gc=localStorage.getItem("app_theme")||"default",$s=Ze(Gc);$s.subscribe(e=>{if(typeof document>"u")return;localStorage.setItem("app_theme",e);const t=un.find(s=>s.id===e);if(!t)return;const a=document.documentElement;document.body.setAttribute("data-theme",e),Object.entries(t.colors).forEach(([s,n])=>{a.style.setProperty(s,n)})});const fn=Ze(null);let Ks;function $e(e,t="info"){fn.set({text:e,type:t}),Ks&&clearTimeout(Ks),Ks=setTimeout(()=>{fn.set(null)},3e3)}const As=Ze({isOpen:!1,title:"",message:"",confirmLabel:"Confirm",cancelLabel:"Cancel",onConfirm:null,type:"confirm",inputValue:"",placeholder:"",options:[]});function ya({title:e="Confirm Action",message:t="Are you sure?",confirmLabel:a="Confirm",cancelLabel:s="Cancel",type:n="confirm",inputValue:i="",placeholder:o="",options:l=[],onConfirm:v=()=>{}}){As.set({isOpen:!0,title:e,message:t,confirmLabel:a,cancelLabel:s,type:n,inputValue:i,placeholder:o,options:l,onConfirm:v})}function gs(){As.set({isOpen:!1,title:"",message:"",confirmLabel:"",cancelLabel:"",onConfirm:null,type:"confirm",inputValue:"",placeholder:"",options:[]})}const Ms=Ze(!1),Rt=Ze("library"),vi=Ze("Disconnected"),Zc=localStorage.getItem("sidebarCollapsed")==="true",hn=Ze(Zc);hn.subscribe(e=>{typeof localStorage<"u"&&localStorage.setItem("sidebarCollapsed",String(e))});const jn=Ze({isOpen:!1,track:null,context:{type:"general",playlistName:null,index:null},x:0,y:0,triggerRect:null});function Jc(){if(typeof navigator<"u"&&navigator.vibrate)try{navigator.vibrate(70)}catch{}}function as(e,t,a={}){if(!t&&a.type!=="playlist-card")return;Jc();let s=0,n=0,i=null,o=e.currentTarget;!o&&e.target&&e.target.closest&&(o=e.target.closest("button")||e.target),o&&o.getBoundingClientRect&&(i=o.getBoundingClientRect());const l=e.detail?.originalEvent||e;l.touches&&l.touches.length>0?(s=l.touches[0].clientX,n=l.touches[0].clientY):l.clientX&&(s=l.clientX,n=l.clientY);const v={type:"general",playlistName:null,index:null,...a};jn.set({isOpen:!0,track:t,context:v,x:s,y:n,triggerRect:i})}function Ut(){jn.set({isOpen:!1,track:null,context:{},x:0,y:0,triggerRect:null})}const Xa=Ze([]),Fs=Ze([]),Xr=Ze([]),ed=Ze(null),Ua=Ze(new Set),qs=Ze(null),bs=Ze(!1),pn=Ze(!1),gn=Ze(!1),ua=Ze(!1),xt=Ze([{view:"root"}]),Cs=Ze(!1),Kr=Ze(""),yo=Ze({});let _n=null,mn=null;function td(e){mn=e}function Wt(e,t=null){t&&(_n=t),xt.update(a=>[...a,{view:e,data:t}]),mn&&mn(e,t)}function ad(){const e=_n;return _n=null,e}function rd(){et(xt).length>1?xt.update(t=>t.slice(0,-1)):window.history.back()}function sd(){et(xt).length>1&&xt.update(t=>t.slice(0,-1))}function nd(e,t){yo.update(a=>({...a,[e]:t}))}function id(e){return et(yo)[e]||0}const er={DEFAULT_IP:typeof window<"u"?window.location.hostname:"localhost",get MOODE_IP(){try{return typeof localStorage<"u"?localStorage.getItem("moode_ip")||this.DEFAULT_IP:this.DEFAULT_IP}catch{return this.DEFAULT_IP}},setMoodeIp(e){if(typeof localStorage<"u"){const t=e?e.trim():"";t&&localStorage.setItem("moode_ip",t)}}},br=()=>typeof window<"u"&&window.location.port==="3000"?`http://${window.location.hostname}`:"",wt={NAME:"MoodePlayerDB",STORE_NAME:"music",VERSION:3},aa={get SYNC(){return`${br()}/wave-api.php`},get YANDEX(){return`${br()}/wave-yandex-api.php`},STATIONS:e=>`${br()}/wave-api.php?action=stations`,COVER_ART:e=>{let t=e;return t.startsWith("/")&&(t=t.slice(1)),`${br()}/coverart.php/${encodeURI(t)}`},THUMB_CACHE:(e,t="sm")=>{const a=t==="md"?"":"_sm";return`${br()}/imagesw/thmcache/${e}${a}.jpg`},RADIO_LOGOS:e=>`${br()}/imagesw/radio-logos/thumbs/${encodeURIComponent(e)}`};function Pr(e){if(!e||!e.image)return null;if(e.image.startsWith("http"))return e.image;let t="";return e.image==="local"?t=`${e.name}.jpg`:t=e.image,aa.RADIO_LOGOS(t)}function ui(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}function od(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Gs={exports:{}},Zs={exports:{}},fi;function ld(){return fi||(fi=1,(function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t={rotl:function(a,s){return a<<s|a>>>32-s},rotr:function(a,s){return a<<32-s|a>>>s},endian:function(a){if(a.constructor==Number)return t.rotl(a,8)&16711935|t.rotl(a,24)&4278255360;for(var s=0;s<a.length;s++)a[s]=t.endian(a[s]);return a},randomBytes:function(a){for(var s=[];a>0;a--)s.push(Math.floor(Math.random()*256));return s},bytesToWords:function(a){for(var s=[],n=0,i=0;n<a.length;n++,i+=8)s[i>>>5]|=a[n]<<24-i%32;return s},wordsToBytes:function(a){for(var s=[],n=0;n<a.length*32;n+=8)s.push(a[n>>>5]>>>24-n%32&255);return s},bytesToHex:function(a){for(var s=[],n=0;n<a.length;n++)s.push((a[n]>>>4).toString(16)),s.push((a[n]&15).toString(16));return s.join("")},hexToBytes:function(a){for(var s=[],n=0;n<a.length;n+=2)s.push(parseInt(a.substr(n,2),16));return s},bytesToBase64:function(a){for(var s=[],n=0;n<a.length;n+=3)for(var i=a[n]<<16|a[n+1]<<8|a[n+2],o=0;o<4;o++)n*8+o*6<=a.length*8?s.push(e.charAt(i>>>6*(3-o)&63)):s.push("=");return s.join("")},base64ToBytes:function(a){a=a.replace(/[^A-Z0-9+\/]/ig,"");for(var s=[],n=0,i=0;n<a.length;i=++n%4)i!=0&&s.push((e.indexOf(a.charAt(n-1))&Math.pow(2,-2*i+8)-1)<<i*2|e.indexOf(a.charAt(n))>>>6-i*2);return s}};Zs.exports=t})()),Zs.exports}var Js,hi;function pi(){if(hi)return Js;hi=1;var e={utf8:{stringToBytes:function(t){return e.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(e.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var a=[],s=0;s<t.length;s++)a.push(t.charCodeAt(s)&255);return a},bytesToString:function(t){for(var a=[],s=0;s<t.length;s++)a.push(String.fromCharCode(t[s]));return a.join("")}}};return Js=e,Js}var en,gi;function cd(){if(gi)return en;gi=1,en=function(a){return a!=null&&(e(a)||t(a)||!!a._isBuffer)};function e(a){return!!a.constructor&&typeof a.constructor.isBuffer=="function"&&a.constructor.isBuffer(a)}function t(a){return typeof a.readFloatLE=="function"&&typeof a.slice=="function"&&e(a.slice(0,0))}return en}var _i;function dd(){return _i||(_i=1,(function(){var e=ld(),t=pi().utf8,a=cd(),s=pi().bin,n=function(i,o){i.constructor==String?o&&o.encoding==="binary"?i=s.stringToBytes(i):i=t.stringToBytes(i):a(i)?i=Array.prototype.slice.call(i,0):!Array.isArray(i)&&i.constructor!==Uint8Array&&(i=i.toString());for(var l=e.bytesToWords(i),v=i.length*8,d=1732584193,u=-271733879,h=-1732584194,f=271733878,p=0;p<l.length;p++)l[p]=(l[p]<<8|l[p]>>>24)&16711935|(l[p]<<24|l[p]>>>8)&4278255360;l[v>>>5]|=128<<v%32,l[(v+64>>>9<<4)+14]=v;for(var S=n._ff,E=n._gg,k=n._hh,x=n._ii,p=0;p<l.length;p+=16){var Q=d,de=u,he=h,J=f;d=S(d,u,h,f,l[p+0],7,-680876936),f=S(f,d,u,h,l[p+1],12,-389564586),h=S(h,f,d,u,l[p+2],17,606105819),u=S(u,h,f,d,l[p+3],22,-1044525330),d=S(d,u,h,f,l[p+4],7,-176418897),f=S(f,d,u,h,l[p+5],12,1200080426),h=S(h,f,d,u,l[p+6],17,-1473231341),u=S(u,h,f,d,l[p+7],22,-45705983),d=S(d,u,h,f,l[p+8],7,1770035416),f=S(f,d,u,h,l[p+9],12,-1958414417),h=S(h,f,d,u,l[p+10],17,-42063),u=S(u,h,f,d,l[p+11],22,-1990404162),d=S(d,u,h,f,l[p+12],7,1804603682),f=S(f,d,u,h,l[p+13],12,-40341101),h=S(h,f,d,u,l[p+14],17,-1502002290),u=S(u,h,f,d,l[p+15],22,1236535329),d=E(d,u,h,f,l[p+1],5,-165796510),f=E(f,d,u,h,l[p+6],9,-1069501632),h=E(h,f,d,u,l[p+11],14,643717713),u=E(u,h,f,d,l[p+0],20,-373897302),d=E(d,u,h,f,l[p+5],5,-701558691),f=E(f,d,u,h,l[p+10],9,38016083),h=E(h,f,d,u,l[p+15],14,-660478335),u=E(u,h,f,d,l[p+4],20,-405537848),d=E(d,u,h,f,l[p+9],5,568446438),f=E(f,d,u,h,l[p+14],9,-1019803690),h=E(h,f,d,u,l[p+3],14,-187363961),u=E(u,h,f,d,l[p+8],20,1163531501),d=E(d,u,h,f,l[p+13],5,-1444681467),f=E(f,d,u,h,l[p+2],9,-51403784),h=E(h,f,d,u,l[p+7],14,1735328473),u=E(u,h,f,d,l[p+12],20,-1926607734),d=k(d,u,h,f,l[p+5],4,-378558),f=k(f,d,u,h,l[p+8],11,-2022574463),h=k(h,f,d,u,l[p+11],16,1839030562),u=k(u,h,f,d,l[p+14],23,-35309556),d=k(d,u,h,f,l[p+1],4,-1530992060),f=k(f,d,u,h,l[p+4],11,1272893353),h=k(h,f,d,u,l[p+7],16,-155497632),u=k(u,h,f,d,l[p+10],23,-1094730640),d=k(d,u,h,f,l[p+13],4,681279174),f=k(f,d,u,h,l[p+0],11,-358537222),h=k(h,f,d,u,l[p+3],16,-722521979),u=k(u,h,f,d,l[p+6],23,76029189),d=k(d,u,h,f,l[p+9],4,-640364487),f=k(f,d,u,h,l[p+12],11,-421815835),h=k(h,f,d,u,l[p+15],16,530742520),u=k(u,h,f,d,l[p+2],23,-995338651),d=x(d,u,h,f,l[p+0],6,-198630844),f=x(f,d,u,h,l[p+7],10,1126891415),h=x(h,f,d,u,l[p+14],15,-1416354905),u=x(u,h,f,d,l[p+5],21,-57434055),d=x(d,u,h,f,l[p+12],6,1700485571),f=x(f,d,u,h,l[p+3],10,-1894986606),h=x(h,f,d,u,l[p+10],15,-1051523),u=x(u,h,f,d,l[p+1],21,-2054922799),d=x(d,u,h,f,l[p+8],6,1873313359),f=x(f,d,u,h,l[p+15],10,-30611744),h=x(h,f,d,u,l[p+6],15,-1560198380),u=x(u,h,f,d,l[p+13],21,1309151649),d=x(d,u,h,f,l[p+4],6,-145523070),f=x(f,d,u,h,l[p+11],10,-1120210379),h=x(h,f,d,u,l[p+2],15,718787259),u=x(u,h,f,d,l[p+9],21,-343485551),d=d+Q>>>0,u=u+de>>>0,h=h+he>>>0,f=f+J>>>0}return e.endian([d,u,h,f])};n._ff=function(i,o,l,v,d,u,h){var f=i+(o&l|~o&v)+(d>>>0)+h;return(f<<u|f>>>32-u)+o},n._gg=function(i,o,l,v,d,u,h){var f=i+(o&v|l&~v)+(d>>>0)+h;return(f<<u|f>>>32-u)+o},n._hh=function(i,o,l,v,d,u,h){var f=i+(o^l^v)+(d>>>0)+h;return(f<<u|f>>>32-u)+o},n._ii=function(i,o,l,v,d,u,h){var f=i+(l^(o|~v))+(d>>>0)+h;return(f<<u|f>>>32-u)+o},n._blocksize=16,n._digestsize=16,Gs.exports=function(i,o){if(i==null)throw new Error("Illegal argument "+i);var l=e.wordsToBytes(n(i,o));return o&&o.asBytes?l:o&&o.asString?s.bytesToString(l):e.bytesToHex(l)}})()),Gs.exports}var vd=dd();const ud=od(vd),$t=Ze({state:"stop",volume:50,elapsed:0,duration:0,random:!1,repeat:!1,bitrate:0,format:"",song:0,songid:0}),Bt=Ze({title:"Not Playing",artist:"",album:"",file:"",stationName:null,id:null,pos:null,isYandex:!1}),Qa=Ze([]),wo=Ze(0),Mt=Ze(!1);function ko(e){return!e||e.includes("yandex.net")||e.includes("get-mp3")?!1:e.startsWith("http")||e.includes("://")||e.includes("RADIO")}function xo(e,t,a){const s=v=>(v||"").toString().toLowerCase().replace(/[^a-z0-9]/g,""),n=s(e?.title),i=s(e?.stationName),o=s(a);if(t&&t.length>0){const v=t.find(d=>{const u=s(d.name);return u?u===i||u===o||n&&u===n||n&&n.includes(u)&&u.length>3:!1});if(v)return Pr(v)}const l=e?.stationName||a;return l?Pr({name:l,image:"local"}):null}function Lr(e,t=[],a=null){return e&&e.image&&e.image.startsWith("http")?e.image:e&&e.cover&&e.cover.startsWith("http")?e.cover:!e||!e.file?"/images/default_cover.png":ko(e.file)||e.genre==="Radio"?e.image?Pr(e):xo(e,t,a)||"/images/radio_placeholder.png":aa.COVER_ART(e.file)}function rs(e,t="sm",a=[],s=null){if(!e)return"/images/default_icon.png";if(e.image&&e.image.startsWith("http"))return e.image;if(e.cover&&e.cover.startsWith("http"))return e.cover;if(e.file&&(ko(e.file)||e.genre==="Radio"||Array.isArray(e)))return e.image?Pr(e):xo(e,a,s)||"/images/radio_icon.png";if(!e.file)return"/images/default_icon.png";if(e.thumbHash)return aa.THUMB_CACHE(e.thumbHash,t);try{const n=e.file.lastIndexOf("/"),i=n===-1?".":e.file.substring(0,n),o=ud(i);return aa.THUMB_CACHE(o,t)}catch{return aa.COVER_ART(e.file)}}_o([Bt,Xa,qs],([e,t,a])=>Lr(e,t,a));_o(Bt,e=>!e||!e.file||e.file.startsWith("http")?null:aa.COVER_ART(e.file));const Ga=Ze(!1),ia=Ze(new Set),mi=Ze(null),Ps=Ze({active:!1,tracks:[],currentIndex:-1,currentTrackId:null,currentTrackFile:null,streamCache:{}}),bi=Ze({active:!1,context_name:"Yandex Music"}),fd=localStorage.getItem("alarmTime")||"08:00",hd=localStorage.getItem("alarmEnabled")==="true",pd=localStorage.getItem("alarmPlaylist")||"Favorites",bn=Ze(fd),yn=Ze(hd),wn=Ze(pd);bn.subscribe(e=>localStorage.setItem("alarmTime",e));yn.subscribe(e=>localStorage.setItem("alarmEnabled",String(e)));wn.subscribe(e=>localStorage.setItem("alarmPlaylist",e));const gd=localStorage.getItem("yandex_enabled")==="true",ss=Ze(gd);ss.subscribe(e=>{typeof localStorage<"u"&&localStorage.setItem("yandex_enabled",String(e))});const Ha={open(){return new Promise((e,t)=>{const a=indexedDB.open(wt.NAME,wt.VERSION);a.onupgradeneeded=s=>{const n=s.target.result,i=s.target.transaction;let o;n.objectStoreNames.contains(wt.STORE_NAME)?o=i.objectStore(wt.STORE_NAME):o=n.createObjectStore(wt.STORE_NAME,{keyPath:"file"}),o.indexNames.contains("artist")||o.createIndex("artist","artist",{unique:!1}),o.indexNames.contains("album")||o.createIndex("album","album",{unique:!1}),o.indexNames.contains("genre")||o.createIndex("genre","genre",{unique:!1}),o.indexNames.contains("album_artist")||o.createIndex("album_artist","album_artist",{unique:!1})},a.onsuccess=()=>e(a.result),a.onerror=()=>t(a.error)})},async clear(){const e=await this.open();return new Promise((t,a)=>{const s=e.transaction(wt.STORE_NAME,"readwrite");s.objectStore(wt.STORE_NAME).clear(),s.oncomplete=()=>t(),s.onerror=()=>a(s.error)})},async bulkAdd(e){const t=await this.open();return new Promise((a,s)=>{const n=t.transaction(wt.STORE_NAME,"readwrite"),i=n.objectStore(wt.STORE_NAME);e.forEach(o=>i.put(o)),n.oncomplete=()=>a(),n.onerror=()=>s(n.error)})},async getFilesMap(e){if(!e||e.length===0)return new Map;const t=await this.open();return new Promise(a=>{const n=t.transaction(wt.STORE_NAME,"readonly").objectStore(wt.STORE_NAME),i=new Map;let o=0;e.forEach(l=>{const v=l.normalize("NFC").trim(),d=n.get(v);d.onsuccess=u=>{u.target.result&&i.set(l,u.target.result),o++,o===e.length&&a(i)},d.onerror=()=>{o++,o===e.length&&a(i)}})})},async getArtists(){const e=await this.open();return new Promise((t,a)=>{const n=e.transaction(wt.STORE_NAME,"readonly").objectStore(wt.STORE_NAME),i=new Map,o=n.openCursor();o.onsuccess=l=>{const v=l.target.result;if(v){const d=v.value,u=d.album_artist||d.artist;u&&!i.has(u)&&i.set(u,{name:u,file:d.file,thumbHash:d.thumbHash}),v.continue()}else{const d=Array.from(i.values()).sort((u,h)=>u.name.localeCompare(h.name,void 0,{sensitivity:"base"}));t(d)}},o.onerror=()=>a(o.error)})},async getAlbums(){const e=await this.open();return new Promise((t,a)=>{const n=e.transaction(wt.STORE_NAME,"readonly").objectStore(wt.STORE_NAME).index("album"),i=[],o=n.openCursor(null,"nextunique");o.onsuccess=l=>{const v=l.target.result;if(v){const d=v.value;i.push({name:d.album,artist:d.album_artist||d.artist,file:d.file,thumbHash:d.thumbHash,qualityBadge:d.qualityBadge,year:d.year||0}),v.continue()}else t(i)},o.onerror=()=>a(o.error)})},async getArtistAlbums(e){if(!e)return[];const t=await this.open(),a=e.normalize("NFC").trim();return new Promise((s,n)=>{const o=t.transaction(wt.STORE_NAME,"readonly").objectStore(wt.STORE_NAME),l=new Promise(d=>{o.indexNames.contains("album_artist")?o.index("album_artist").getAll(IDBKeyRange.only(a)).onsuccess=u=>d(u.target.result):d([])}),v=new Promise(d=>{o.index("artist").getAll(IDBKeyRange.only(a)).onsuccess=u=>d(u.target.result)});Promise.all([l,v]).then(([d,u])=>{const h=[...d,...u],f=[],p=new Set;h.forEach(S=>{p.has(S.album)||(p.add(S.album),f.push({name:S.album,artist:S.album_artist||S.artist,file:S.file,thumbHash:S.thumbHash,qualityBadge:S.qualityBadge,year:S.year||0}))}),s(f)}).catch(d=>n(d))})},async getAlbumTracks(e,t=null){const a=await this.open(),s=e.normalize("NFC").trim(),n=t?t.normalize("NFC").trim():null;return console.log(`[DB] getAlbumTracks called. Album: "${s}", FilterArtist: "${n}"`),new Promise((i,o)=>{const v=a.transaction(wt.STORE_NAME,"readonly").objectStore(wt.STORE_NAME).index("album"),d=IDBKeyRange.only(s),u=v.getAll(d);u.onsuccess=()=>{let h=u.result;if(console.log(`[DB] Found ${h.length} raw tracks for album "${s}"`),n){const f=h.length;h=h.filter(p=>{const S=(p.artist||"").normalize("NFC").trim(),E=(p.album_artist||"").normalize("NFC").trim();return S===n||E===n}),console.log(`[DB] After artist filter: ${h.length} tracks (Removed ${f-h.length})`)}else console.log("[DB] No artist filter provided. Returning all tracks.");h.sort((f,p)=>{const S=parseInt(f.disc||1),E=parseInt(p.disc||1);if(S!==E)return S-E;const k=parseInt(f.track||0),x=parseInt(p.track||0);return k-x}),i(h)},u.onerror=()=>o(u.error)})},async getGenres(){const e=await this.open();return new Promise((t,a)=>{const n=e.transaction(wt.STORE_NAME,"readonly").objectStore(wt.STORE_NAME).index("genre"),i=[],o=n.openKeyCursor(null,"nextunique");o.onsuccess=l=>{const v=l.target.result;v?(i.push(v.key),v.continue()):t(i)},o.onerror=()=>a(o.error)})},async getGenreTracks(e){const t=await this.open(),a=e.normalize("NFC").trim();return new Promise((s,n)=>{const l=t.transaction(wt.STORE_NAME,"readonly").objectStore(wt.STORE_NAME).index("genre").getAll(IDBKeyRange.only(a));l.onsuccess=()=>s(l.result),l.onerror=()=>n(l.error)})},async search(e){if(!e)return[];const t=e.toLowerCase().normalize("NFC").trim(),a=await this.open();return new Promise((s,n)=>{const o=a.transaction(wt.STORE_NAME,"readonly").objectStore(wt.STORE_NAME),l=[],v=100,d=o.openCursor();d.onsuccess=u=>{const h=u.target.result;if(h){const f=h.value;if((f.title&&f.title.toLowerCase().includes(t)||f.artist&&f.artist.toLowerCase().includes(t)||f.album&&f.album.toLowerCase().includes(t)||f.album_artist&&f.album_artist.toLowerCase().includes(t))&&l.push(f),l.length>=v){s(l);return}h.continue()}else s(l)},d.onerror=()=>n(d.error)})}};var _d=w('<div class="skeleton svelte-tl058d"></div>');function _t(e,t){let a=Tt(t,"width",8,"100%"),s=Tt(t,"height",8,"20px"),n=Tt(t,"radius",8,"4px"),i=Tt(t,"style",8,"");var o=_d();ie(()=>mt(o,`width: ${a()??""}; height: ${s()??""}; border-radius: ${n()??""}; ${i()??""}`)),m(e,o)}var md=w('<div class="skel svelte-1b8que2"><!></div>'),bd=w('<img loading="lazy"/>'),yd=w('<div class="loader svelte-1b8que2"><!> <!> <!></div>');function ra(e,t){Lt(t,!1);let a=Tt(t,"src",8),s=Tt(t,"alt",8,""),n=Tt(t,"radius",8,"0px");const i=Rn();let o=$("loading");function l(){b(o,"loaded")}function v(k){i("error",k),b(o,"error")}ne(()=>L(a()),()=>{a()?b(o,"loading"):b(o,"error")}),ea(),Dt();var d=yd(),u=c(d);{var h=k=>{var x=md(),Q=c(x);_t(Q,{width:"100%",height:"100%",get radius(){return n()}}),kt(2,x,()=>At,()=>({duration:200})),m(k,x)};P(u,k=>{r(o)==="loading"&&k(h)})}var f=g(u,2);{var p=k=>{var x=bd();let Q;ie(()=>{Jt(x,"src",a()),Jt(x,"alt",s()),mt(x,`border-radius: ${n()??""}`),Q=ot(x,1,"svelte-1b8que2",null,Q,{vis:r(o)==="loaded"})}),M("load",x,l),M("error",x,v),m(k,x)};P(f,k=>{a()&&r(o)!=="error"&&k(p)})}var S=g(f,2);{var E=k=>{var x=it(),Q=Ie(x);Ur(Q,t,"fallback",{}),m(k,x)};P(S,k=>{r(o)==="error"&&k(E)})}ie(()=>mt(d,`border-radius: ${n()??""}`)),m(e,d),zt()}class wd{constructor(){this.socket=null,this.queue=[],this.isProcessing=!1,this.reconnectTimer=null,this.watchdogTimer=null,this._buffer=""}get isConnected(){return this.socket&&this.socket.readyState===WebSocket.OPEN}connect(){if(this.socket&&(this.socket.readyState===WebSocket.CONNECTING||this.socket.readyState===WebSocket.OPEN))return;this.reconnectTimer&&clearTimeout(this.reconnectTimer);let t=er.MOODE_IP||window.location.hostname;t=t.replace(/^https?:\/\//,"").split(":")[0].split("/")[0];const a=er.WS_PORT||"8080",s=`ws://${t}:${a}`;console.log("[MPD] Connecting to:",s);try{this.socket=new WebSocket(s,["binary"])}catch(n){console.error("[MPD] Connection Error:",n),this.reconnectTimer=setTimeout(()=>this.connect(),5e3);return}this.socket.onopen=()=>{console.log("[MPD] Connected"),vi.set("Connected"),this._processQueue()},this.socket.onmessage=n=>this._handleMessage(n),this.socket.onclose=n=>{console.warn("[MPD] Socket closed",n.code,n.reason),vi.set("Disconnected"),this._cleanup(),this.reconnectTimer=setTimeout(()=>this.connect(),3e3)},this.socket.onerror=n=>{console.error("[MPD] Socket error",n)}}send(t){return new Promise((a,s)=>{this.queue.push({cmd:t,resolve:a,reject:s}),this._processQueue()})}_cleanup(){for(this.isProcessing=!1,this._buffer="",this.watchdogTimer&&clearTimeout(this.watchdogTimer);this.queue.length>0;){const{reject:t}=this.queue.shift();t(new Error("Connection lost"))}}async _processQueue(){if(this.isProcessing||this.queue.length===0||!this.isConnected)return;this.isProcessing=!0;const{cmd:t}=this.queue[0];this.watchdogTimer&&clearTimeout(this.watchdogTimer),this.watchdogTimer=setTimeout(()=>{console.error("[MPD] Watchdog timeout"),this.socket&&this.socket.close()},2e4);try{const a=t.endsWith(`
`)?t:t+`
`;this.socket.send(new TextEncoder().encode(a))}catch(a){console.error("[MPD] Send error",a),this._cleanup()}}async _handleMessage(t){let a=t.data;a instanceof Blob&&(a=await a.text()),this.watchdogTimer&&(clearTimeout(this.watchdogTimer),this.watchdogTimer=null),this._buffer+=a;const s=this._buffer.endsWith(`
OK
`)||this._buffer===`OK
`,n=this._buffer.startsWith("ACK");if(s||n){const i=this._buffer;this._buffer="";const o=this.queue.shift();if(this.isProcessing=!1,o)if(n)console.error(`[MPD] Error for "${o.cmd.trim()}": ${i.trim()}`),o.reject(new Error(i.trim()));else{const l=i.replace(/\nOK\n$/,"").replace(/^OK\n$/,"");o.resolve(l)}this._processQueue()}else{if(!this.queue.length)return;this.watchdogTimer=setTimeout(()=>{console.error("[MPD] Watchdog timeout receiving large data"),this.socket&&this.socket.close()},2e4)}}}const Qe=new wd,Qt={parseKeyValue(e){const t={};if(!e)return t;const a=e.split(`
`);for(const s of a){const n=s.indexOf(": ");if(n===-1)continue;const i=s.substring(0,n).toLowerCase(),o=s.substring(n+2);t[i]=o}return t},parseStatus(e){const t=this.parseKeyValue(e);let a="";if(t.audio){const s=t.audio.split(":");s[1]&&(a=`${s[1]}-bit`)}return{state:t.state||"stop",volume:parseInt(t.volume)||0,elapsed:parseFloat(t.elapsed)||0,duration:parseFloat(t.duration)||0,random:t.random==="1",repeat:t.repeat==="1",song:parseInt(t.song)||0,songId:parseInt(t.songid)||-1,playlistLength:parseInt(t.playlistlength)||0,bitrate:parseInt(t.bitrate)||0,format:a,playlistVersion:parseInt(t.playlist)||0}},parseCurrentSong(e){const t=this.parseKeyValue(e);return this._normalizeTrack(t)},parsePlaylists(e){const t=e.split(`
`),a=[];let s=null;for(const n of t)n.startsWith("playlist: ")?(s&&a.push(s),s={playlist:n.substring(10)}):n.startsWith("Last-Modified: ")&&s&&(s["last-modified"]=n.substring(15));return s&&a.push(s),a.map(n=>({name:n.playlist,lastModified:n["last-modified"]}))},parseTracks(e){const t=[];let a=null,s=0,n=e.indexOf(`
`,s);for(;n!==-1;){const i=e.substring(s,n),o=i.indexOf(": ");if(o!==-1){const l=i.substring(0,o).toLowerCase(),v=i.substring(o+2);l==="file"?(a&&t.push(this._normalizeTrack(a)),a={file:v}):a&&(a[l]=v)}s=n+1,n=e.indexOf(`
`,s)}return a&&t.push(this._normalizeTrack(a)),t},_normalizeTrack(e){const t=e.file||e.File||"",a=e.Title||e.title||e.Name||e.name||t.split("/").pop()||"Unknown";return{file:t,title:a,artist:e.Artist||e.artist||"Unknown Artist",album:e.Album||e.album||"Unknown Album",genre:e.Genre||e.genre||"Unknown",time:parseFloat(e.Time||e.time||0),track:e.Track||e.track||"",id:e.Id||e.id,pos:e.Pos||e.pos||null,stationName:e.name||e.Name||null}}};function So(e){return new Worker("/assets/sync.worker-CxDcqL9_.js",{name:e?.name})}const bt={async request(e,t={},a="GET"){const s=aa.YANDEX,n=new URL(s,window.location.origin);n.searchParams.append("action",e);const i={method:a};if(a==="GET")for(const l in t)t[l]!==void 0&&t[l]!==null&&n.searchParams.append(l,t[l]);else i.body=JSON.stringify(t),i.headers={"Content-Type":"application/json"};const o=await fetch(n.toString(),i);if(!o.ok)throw new Error("API Error");return await o.json()},async search(e){return await this.request("search",{query:e})},async getUserPlaylists(){return await this.request("get_playlists")},async getLanding(){return await this.request("get_landing")},async getStationsDashboard(){return await this.request("get_stations_dashboard")},async getArtistDetails(e){return await this.request("get_artist_details",{id:e})},async getAlbumDetails(e){return await this.request("get_album_details",{id:e})},async getPlaylistTracks(e,t,a=0){return await this.request("get_playlist_tracks",{uid:e,kind:t,offset:a})},async getFavoritesIds(){return await this.request("get_favorites_ids")},async playRadio(e,t="station"){let a="user:onyourwave";return e&&(t==="track"?a="track:"+e:t==="artist"?a="artist:"+e:t==="album"?a="album:"+e:a=e),await this.request("play_station",{station:a})},async playStation(e){return await this.request("play_station",{station:e})},async playTrack(e){return await this.request("play_track",{id:e})},async playPlaylist(e,t){return await this.request("play_playlist",{tracks:e,context:t},"POST")},async addTracksToQueue(e){return await this.request("add_tracks",{tracks:e},"POST")},async toggleLike(e,t){const a=t?"dislike":"like";return await this.request(a,{track_id:e})}},wa={async syncLibrary(){if(et(ua))return;ua.set(!0);const e=new So;let t=aa.SYNC;t.startsWith("http")||(window.location.port==="3000"?t=`http://${window.location.hostname}${t}`:t=window.location.origin+t),e.postMessage({type:"START_SYNC",payload:{url:t}}),e.onmessage=a=>{const{type:s,status:n,count:i,message:o}=a.data;if(s==="PROGRESS"){const l={connecting:"Requesting library...",downloading:"Downloading data...",parsing:"Processing metadata...",saving:`Saving ${i} tracks...`};l[n]&&$e(l[n],"info")}s==="DONE"&&($e(`Library updated: ${i} tracks`,"success"),ua.set(!1),e.terminate()),s==="ERROR"&&(console.error("[API] Sync Error:",o),$e(`Sync Failed: ${o}`,"error"),ua.set(!1),e.terminate())},e.onerror=a=>{console.error("[API] Worker crash:",a),$e("Sync worker crashed","error"),ua.set(!1),e.terminate()}},async loadRadioStations(){if(!et(bs)){bs.set(!0);try{const t=await fetch(aa.STATIONS(!1));if(!t.ok)throw new Error("Network error");const a=await t.json();if(a.error)throw new Error(a.error);if(!Array.isArray(a))throw new Error("Invalid response format");const s=a.map(n=>({id:n.id,name:n.name,file:n.station,station:n.station,image:n.logo,genre:n.genre||"Radio"}));s.sort((n,i)=>n.name.localeCompare(i.name,void 0,{sensitivity:"base"})),Xa.set(s)}catch(e){console.error("[API] Failed to load stations",e),$e("Failed to load radio","error")}finally{bs.set(!1)}}},async setAlarm(e,t,a){try{const s=new FormData;s.append("action","set_alarm"),s.append("enabled",e?"1":"0"),s.append("time",t),s.append("playlist",a);const n=await fetch(aa.SYNC,{method:"POST",body:s});if(!n.ok)throw new Error("Server error");const i=await n.json();if(i.error)throw new Error(i.error);return!0}catch(s){throw console.error("[API] Failed to set alarm",s),s}},async getServerTime(){try{const e=await fetch(`${aa.SYNC}?action=get_time`);if(e.ok)return(await e.json()).time}catch(e){console.error("Failed to get server time",e)}return null},async checkYandexAuth(){try{const e=await bt.request("status");return Ga.set(e.authorized),e.authorized}catch(e){return console.error("Yandex Auth Check Failed",e),Ga.set(!1),!1}},async saveYandexToken(e){try{const t=await fetch(aa.YANDEX+"?action=save_token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e})}),a=await t.json();if(!t.ok)throw new Error(a.error||"Failed to save");return $e("Yandex connected successfully","success"),Ga.set(!0),!0}catch(t){return console.error(t),$e("Invalid token or server error","error"),Ga.set(!1),!1}},async getYandexMeta(e){try{const t=await fetch(aa.YANDEX+"?action=get_meta&url="+encodeURIComponent(e));if(t.ok)return await t.json()}catch{}return null},async syncYandexFavorites(){if(et(Ga))try{const e=await bt.getFavoritesIds();e&&e.ids&&(ia.set(new Set(e.ids.map(String))),console.log(`[API] Loaded ${e.ids.length} Yandex likes.`))}catch(e){console.warn("[API] Failed to sync Yandex likes",e)}}},kd=1e3,xd=250;let ys=null,Gr=null,ws=0,Za=1,Ls=!0,Pa=!1,tr=0,yr=null;function ks(e){return e?String(e).normalize("NFC").replace(/\\/g,"\\\\").replace(/"/g,'\\"'):""}function Sd(){Ed(),Ls=!0,Pa=!1,tr=0,Mt.set(!1),_a(),ys=setInterval(()=>{Qe.isConnected&&!Qe.isProcessing&&_a()},kd)}function Ed(){ys&&(clearInterval(ys),ys=null),Er()}async function _a(){try{const e=await Qe.send("status"),t=await Qe.send("currentsong"),a=Qt.parseStatus(e),s=Qt.parseCurrentSong(t);$d(a,s);const n=et(wo);if(et(Mt))return;(a.playlistLength>0&&a.playlistVersion!==n||a.playlistLength>0&&et(Qa).length===0)&&Td(a.playlistVersion)}catch{}}function Nn(e){if(!e)return null;let t=e.match(/[?&]track-id=([^&]+)/);return t||(t=e.match(/[?&]id=([^&]+)/),t)||(t=e.match(/\/track\/(\d+)/),t)?t[1]:null}async function Td(e){if(!et(Mt))try{const t=await Qe.send("playlistinfo");if(et(Mt))return;const a=Qt.parseTracks(t),s=et(Ps),n=a.map(l=>l.file).filter(l=>l&&!l.startsWith("http"));let i=new Map;if(n.length>0)try{i=await Ha.getFilesMap(n)}catch(l){console.warn("Failed to hydrate queue from DB",l)}const o=a.map(l=>{const v=l.file||"",d=v.includes("yandex.net")||v.includes("get-mp3")||v.startsWith("yandex:")||v.includes("storage.yandex.net");if(d&&s.streamCache){let f=s.streamCache[v];if(!f){const p=Nn(v);p&&(f=s.streamCache[String(p)])}if(f){const p=parseFloat(f.time||0),S=parseFloat(l.time||0);return{...l,title:f.title||l.title,artist:f.artist||l.artist,album:f.album||l.album,image:f.image,isYandex:!0,id:f.id,time:S>0?S:p,mpdId:l.id,mpdPos:l.pos,_uid:String(l.id||l.pos)+"y"}}}d&&Eo(v);const u=v.normalize("NFC"),h=i.get(u);return h?{...l,thumbHash:h.thumbHash,qualityBadge:h.qualityBadge,title:l.title||h.title,artist:l.artist||h.artist,album:l.album||h.album,isYandex:d,_uid:String(l.id||l.pos+l.file)}:{...l,isYandex:d,_uid:String(l.id||l.pos+l.file)}});Qa.set(o),wo.set(e)}catch(t){console.error("Queue sync error",t)}}async function Eo(e){const t=et(Ps);if(t.streamCache&&t.streamCache[e])return;const a=Nn(e);if(a&&t.streamCache&&t.streamCache[a])return;const s=await wa.getYandexMeta(e);s&&(Ps.update(i=>{const o={...i.streamCache};return o[e]={...s,isYandex:!0,file:e},s.id&&(o[String(s.id)]={...s,isYandex:!0,file:e}),{...i,streamCache:o}}),et(Bt).file===e&&(Bt.update(i=>({...i,...s,isYandex:!0})),$t.update(i=>s.time&&(i.duration===0||isNaN(i.duration))?{...i,duration:parseFloat(s.time)}:i)),Qa.update(i=>i.map(o=>o.file===e?{...o,...s,isYandex:!0,time:s.time||o.time}:o)))}function $d(e,t){const a=et(Bt),s=et(Xa),n=et(Ps);if(t.file){let o=null;if(n.streamCache&&(o=n.streamCache[t.file],!o)){const l=Nn(t.file);l&&(o=n.streamCache[String(l)])}o?(t.title=o.title,t.artist=o.artist,t.album=o.album,t.image=o.image,t.isYandex=!0,t.id=o.id,(e.duration===0||isNaN(e.duration))&&o.time&&(e.duration=parseFloat(o.time))):(t.file.includes("yandex.net")||t.file.includes("get-mp3"))&&Eo(t.file)}const i=t.file&&t.file.startsWith("http");if(i&&!t.isYandex){const o=u=>(u||"").toString().toLowerCase().replace(/[^a-z0-9]/g,""),l=o(t.file),v=o(t.title),d=s.find(u=>{const h=o(u.station||u.file||u.url||(Array.isArray(u)?u[1]:"")),f=o(u.name||(Array.isArray(u)?u[0]:""));return h&&l.includes(h)||f&&v.includes(f)});d?t.stationName=d.name||d[0]:a.stationName&&a.file===t.file&&(t.stationName=a.stationName)}Bt.set(t),$t.update(o=>{const l=e.state==="play",v=performance.now();if(e.state==="pause"||o.state==="pause")return _s(!1),v<tr?o:e;if(t.file!==a.file||Ls)return Ls=!1,Pa=!1,Za=1,i&&!t.isYandex&&(e.elapsed=0),_s(l&&(!i||t.isYandex)),e;if(v<tr)return o;if(Pa)return Pa=!1,Za=1,_s(l&&(!i||t.isYandex)),e;if(l&&(!i||t.isYandex)){const d=e.elapsed-o.elapsed;if(Math.abs(d)>2)return Za=1,e;if(Math.abs(d)<.05)Za=1;else{let h=d/1.5;Za=Math.max(.5,Math.min(1.5,1+h))}return{...e,elapsed:o.elapsed}}return _s(!1),e})}function _s(e){e?To():Er()}function To(){Gr||Ls||(ws=performance.now(),Gr=setInterval(()=>{const e=performance.now();let t=(e-ws)/1e3;t>2&&(t=0),ws=e,$t.update(a=>{if(a.state!=="play")return a;let s=a.elapsed+t*Za;return a.duration>0&&s>a.duration&&(s=a.duration),{...a,elapsed:s}})},xd))}function Er(){Gr&&(clearInterval(Gr),Gr=null),Za=1,ws=0}async function yi(e,t=!1){if(!e||e.length===0)return;Mt.set(!0),Pa=!0;const a=5;try{for(let s=0;s<e.length;s+=a){const n=e.slice(s,s+a),i=["command_list_begin"];n.forEach(o=>{i.push(`add "${ks(o.file)}"`)}),i.push("command_list_end"),await Qe.send(i.join(`
`))}t?(await Qe.send("play 0"),$e(`Playing ${e.length} tracks`,"success")):$e(`Added ${e.length} tracks`,"success")}catch(s){console.error("[Player] Bulk Action Failed:",s),$e("Error adding tracks","error")}finally{setTimeout(()=>{Mt.set(!1),_a()},1500)}}const fa={async togglePlay(){const t=et($t).state==="play";tr=performance.now()+800,$t.update(a=>{const s=t?"pause":"play";return s==="play"?To():Er(),{...a,state:s}}),await Qe.send(t?"pause 1":"play"),setTimeout(_a,900)},async next(){Pa=!0,tr=performance.now()+1e3,Bt.update(e=>({...e,title:"Loading...",artist:""})),$t.update(e=>({...e,elapsed:0})),Er(),await Qe.send("next"),_a()},async previous(){Pa=!0,tr=performance.now()+1e3,Bt.update(e=>({...e,title:"Loading...",artist:""})),$t.update(e=>({...e,elapsed:0})),Er(),await Qe.send("previous"),_a()},async setVolume(e){$t.update(t=>({...t,volume:e})),await Qe.send(`setvol ${e}`)},async seek(e){Pa=!0,tr=performance.now()+500,$t.update(t=>({...t,elapsed:e})),await Qe.send(`seekcur ${e}`),setTimeout(_a,600)},async toggleRandom(){const t=!et($t).random;$t.update(a=>({...a,random:t})),await Qe.send(`random ${t?1:0}`)},async toggleRepeat(){const t=!et($t).repeat;$t.update(a=>({...a,repeat:t})),await Qe.send(`repeat ${t?1:0}`)},async playUri(e,t={}){Mt.set(!0);const a=ks(e);Pa=!0,$t.update(s=>({...s,state:"play",elapsed:0})),Bt.set({title:t.title||"Loading...",artist:t.artist||"",album:t.album||"",file:e}),Er();try{const s=await Qe.send("currentsong"),n=parseInt(Qt.parseKeyValue(s).pos);if(e.startsWith("yandex:")){const i=e.split(":")[1];await bt.request("play_track",{id:i,append:1});const o=await Qe.send("status"),l=parseInt(Qt.parseKeyValue(o).playlistlength),v=isNaN(n)?0:n+1;l>0&&(await Qe.send(`move ${l-1} ${v}`),await Qe.send(`play ${v}`))}else{const i=await Qe.send(`addid "${a}"`),o=parseInt(Qt.parseKeyValue(i).id);if(isNaN(o))await Qe.send(`add "${a}"`),await Qe.send("play");else{const l=isNaN(n)?0:n+1;await Qe.send(`moveid ${o} ${l}`),await Qe.send(`playid ${o}`)}}}catch(s){console.error("Play error",s),$e("Failed to play","error")}setTimeout(()=>{Mt.set(!1),_a()},1200)},async addToQueue(e){if(e.startsWith("yandex:")){const t=e.split(":")[1];await bt.request("add_tracks",{tracks:[{id:t}]},"POST"),$e("Added to queue","success");return}try{await Qe.send(`add "${ks(e)}"`),$e("Added to queue","success")}catch(t){console.error("Add queue error",t),$e("Failed to add","error")}},async playNext(e){Mt.set(!0);const t=ks(e);try{const a=await Qe.send("currentsong"),s=parseInt(Qt.parseKeyValue(a).pos||-1);if(s===-1)Mt.set(!1),await this.playUri(e);else{if(e.startsWith("yandex:")){const n=e.split(":")[1];await bt.request("play_track",{id:n,append:1});const i=await Qe.send("status"),o=parseInt(Qt.parseKeyValue(i).playlistlength);o>0&&(await Qe.send(`move ${o-1} ${s+1}`),$e("Will play next","success"))}else{const n=await Qe.send(`addid "${t}"`),i=parseInt(Qt.parseKeyValue(n).id);isNaN(i)||(await Qe.send(`moveid ${i} ${s+1}`),$e("Will play next","success"))}setTimeout(()=>Mt.set(!1),1e3)}}catch(a){console.error("Play Next error",a),$e("Failed to set next","error"),Mt.set(!1)}},async removeFromQueue(e){Mt.set(!0),yr&&clearTimeout(yr);try{Qa.update(t=>{const a=[...t];return a.splice(e,1),a}),await Qe.send(`delete ${e}`)}catch{$e("Failed to remove","error"),Mt.set(!1);return}yr=setTimeout(()=>{Mt.set(!1)},1e3)},async moveTrack(e,t){if(e!==t){Mt.set(!0),yr&&clearTimeout(yr);try{await Qe.send(`move ${e} ${t}`)}catch(a){console.error("Move failed",a),$e("Move failed","error"),Mt.set(!1),_a();return}yr=setTimeout(()=>{Mt.set(!1),_a()},2e3)}},async playAllTracks(e){if(!(!e||e.length===0))try{await Qe.send("stop"),await Qe.send("clear"),await yi(e,!0)}catch(t){console.error(t)}},async addAllToQueue(e){!e||e.length===0||await yi(e,!1)},async saveQueue(e){if(!e)return;const t=e.replace(/"/g,'\\"');try{await Qe.send(`save "${t}"`),$e(`Playlist "${e}" saved`,"success")}catch(a){if(a.message.includes("exist")){if(confirm(`Playlist "${e}" exists. Overwrite?`))try{await Qe.send(`rm "${t}"`),await Qe.send(`save "${t}"`),$e(`Playlist "${e}" overwritten`,"success")}catch{$e("Failed to overwrite","error")}}else console.error(a)}}},qr="Favorites";let wi=Promise.resolve();const wr=e=>e?e.toLowerCase().replace(/^https?:\/\//,"").replace(/^www\./,"").split("?")[0].replace(/\/$/,""):"";function Ad(e){if(e==="Favorites")return"linear-gradient(135deg, hsl(348, 95%, 58%), hsl(348, 90%, 40%))";let t=0;for(let s=0;s<e.length;s++)t=e.charCodeAt(s)+((t<<5)-t);const a=Math.abs(t%360);return`linear-gradient(135deg, hsl(${a}, 60%, 40%), hsl(${(a+40)%360}, 60%, 30%))`}function Md(e){if(e==="Favorites")return"var(--c-heart)";let t=0;for(let s=0;s<e.length;s++)t=e.charCodeAt(s)+((t<<5)-t);return`var(--c-pl-${Math.abs(t%6)})`}const ka={async syncLibrary(){if(et(ua))return;ua.set(!0);const e=new So;e.postMessage({type:"START_SYNC",payload:{url:`http://${er.MOODE_IP}/wave-api.php`}}),e.onmessage=t=>{const{type:a,count:s}=t.data;a==="DONE"&&($e(`Library updated: ${s} tracks`,"success"),ua.set(!1),e.terminate()),a==="ERROR"&&($e("Sync Failed","error"),ua.set(!1),e.terminate())},e.onerror=()=>{ua.set(!1),e.terminate()}},async loadPlaylists(){pn.set(!0);try{const e=await Qe.send("listplaylists"),a=Qt.parsePlaylists(e).map(s=>({...s,color:Ad(s.name),colorVar:Md(s.name)}));Fs.set(a)}catch(e){console.error(e)}finally{pn.set(!1)}},async createPlaylistFromQueue(e){if(!e)return;const t=e.replace(/"/g,'\\"');try{await Qe.send(`save "${t}"`),$e(`Playlist "${e}" created`,"success"),await this.loadPlaylists()}catch(a){console.error(a),$e("Failed to create playlist","error")}},async deletePlaylist(e){if(!e)return;const t=e.replace(/"/g,'\\"');try{await Qe.send(`rm "${t}"`),$e("Playlist deleted","info"),await this.loadPlaylists()}catch(a){console.error(a),$e("Delete failed","error")}},async renamePlaylist(e,t){if(!e||!t)return;const a=e.replace(/"/g,'\\"'),s=t.replace(/"/g,'\\"');try{await Qe.send(`rename "${a}" "${s}"`),$e("Playlist renamed","success"),await this.loadPlaylists()}catch(n){console.error(n),$e("Rename failed","error")}},async openPlaylistDetails(e){if(!e)return;gn.set(!0);const t=e.replace(/"/g,'\\"');try{const a=await Qe.send(`listplaylistinfo "${t}"`),s=Qt.parseTracks(a),n=s.map(l=>l.file).filter(l=>l&&!l.startsWith("http"));let i=new Map;if(n.length>0)try{i=await Ha.getFilesMap(n)}catch(l){console.warn("Failed to hydrate playlist from DB",l)}const o=s.map(l=>{const v=i.get(l.file);return v?{...l,thumbHash:v.thumbHash,qualityBadge:v.qualityBadge,title:l.title||v.title,artist:l.artist||v.artist,album:l.album||v.album,_uid:ui()}:{...l,_uid:ui()}});Xr.set(o)}catch(a){console.error(a),$e("Could not load playlist","error")}finally{gn.set(!1)}},async movePlaylistTrack(e,t,a){const s=e.replace(/"/g,'\\"');try{await Qe.send(`playlistmove "${s}" ${t} ${a}`)}catch{$e("Move failed","error")}},async removeFromPlaylist(e,t){const a=e.replace(/"/g,'\\"');try{await Qe.send(`playlistdelete "${a}" ${t}`),$e("Track removed","success")}catch{$e("Delete failed","error")}},async loadFavorites(){try{const e=await Qe.send(`listplaylistinfo "${qr}"`),t=Qt.parseTracks(e),a=new Set;t.forEach(s=>{s.file&&a.add(s.file)}),Ua.set(a)}catch{Ua.set(new Set)}},async toggleFavorite(e){if(!e||!e.file)return;const t=e.file,a=t.replace(/"/g,'\\"'),s=t.startsWith("http"),n=et(Ua);let i=n.has(t);if(!i&&s){const o=wr(t);for(const l of n)if(wr(l)===o){i=!0;break}}Ua.update(o=>{const l=new Set(o);if(i){if(l.delete(t),s){const v=wr(t);for(const d of l)wr(d)===v&&l.delete(d)}}else l.add(t);return l}),wi=wi.then(async()=>{try{const o=await Qe.send(`listplaylistinfo "${qr}"`),l=Qt.parseTracks(o);let v=[];if(l.forEach((d,u)=>{let h=!1;(d.file===t||s&&wr(d.file)===wr(t)||s&&(d.file.includes(t)||t.includes(d.file)))&&(h=!0),h&&v.push(u)}),i){if(v.length>0){v.sort((d,u)=>u-d);for(const d of v)await Qe.send(`playlistdelete "${qr}" ${d}`);$e("Removed from Favorites","info")}}else v.length>0?console.log("[Fav] Track already exists. Skipping."):(await Qe.send(`playlistadd "${qr}" "${a}"`),l.length>0&&await Qe.send(`playlistmove "${qr}" ${l.length} 0`),$e("Added to Favorites","success"))}catch(o){console.error("Fav action failed",o),$e("Action failed","error")}finally{await this.loadFavorites()}})}};function $o(){Qe.connect(),Sd(),ka.loadPlaylists(),ka.loadFavorites()}function zs(e){return Qe.send(e)}const{togglePlay:Bs,toggleRandom:ir,toggleRepeat:or,setVolume:La,seek:Dn,addToQueue:Cd,playNext:Pd,removeFromQueue:Ld,moveTrack:zd,saveQueue:Rd,playAllTracks:Rs,addAllToQueue:On,playUri:Id}=fa,{syncLibrary:jd,loadRadioStations:Nd,loadPlaylists:Fn,openPlaylistDetails:Ao,toggleFavorite:Mo,loadFavorites:Dd,removeFromPlaylist:Co,movePlaylistTrack:Po}=ka;function ns(e){const t=et(Bt),a=et(Xa),s=et(qs);if(t.file&&t.file.startsWith("http")&&a.length>0&&!t.isYandex&&(e==="next"||e==="previous")){let i=a.findIndex(l=>l.name===s);i===-1&&(i=0);let o;e==="next"?(o=i+1,o>=a.length&&(o=0)):(o=i-1,o<0&&(o=a.length-1)),qn(a[o])}else e==="next"&&fa.next(),e==="previous"&&fa.previous()}function qn(e){if(!e)return;qs.set(e.name);const t=e[1]||e.station||e.file||e.url;t&&fa.playUri(t,{title:e.name,artist:e.genre||"Radio Stream",stationName:e.name})}function Ys(e){e&&(qs.set(null),fa.playUri(e.file,{title:e.title,artist:e.artist,album:e.album,stationName:null}))}const Od=Object.freeze(Object.defineProperty({__proto__:null,addAllToQueue:On,addToQueue:Cd,connect:$o,loadFavorites:Dd,loadPlaylists:Fn,loadRadioStations:Nd,movePlaylistTrack:Po,moveTrack:zd,nav:ns,openPlaylistDetails:Ao,playAllTracks:Rs,playNext:Pd,playStation:qn,playTrackOptimistic:Ys,playUri:Id,removeFromPlaylist:Co,removeFromQueue:Ld,runMpdRequest:zs,saveQueue:Rd,seek:Dn,setVolume:La,syncLibrary:jd,toggleFavorite:Mo,togglePlay:Bs,toggleRandom:ir,toggleRepeat:or},Symbol.toStringTag,{value:"Module"}));function Bn(e,t=2e3){let a;const s=i=>{i.type==="mousedown"&&i.button!==0||(a=setTimeout(()=>{e.dispatchEvent(new CustomEvent("longpress",{detail:{originalEvent:i}}))},t))},n=()=>{clearTimeout(a)};return e.addEventListener("mousedown",s),e.addEventListener("touchstart",s,{passive:!0}),e.addEventListener("mouseup",n),e.addEventListener("mouseleave",n),e.addEventListener("touchend",n),e.addEventListener("touchcancel",n),e.addEventListener("touchmove",n),{destroy(){e.removeEventListener("mousedown",s),e.removeEventListener("touchstart",s),e.removeEventListener("mouseup",n),e.removeEventListener("mouseleave",n),e.removeEventListener("touchend",n),e.removeEventListener("touchcancel",n),e.removeEventListener("touchmove",n)}}}var Fd=w('<div class="drag-handle svelte-5cs2hz" title="Drag to reorder"><div class="icon-small svelte-5cs2hz"><!></div></div>'),qd=w('<div class="eq-anim svelte-5cs2hz"><span class="bar b1 svelte-5cs2hz"></span> <span class="bar b2 svelte-5cs2hz"></span> <span class="bar b3 svelte-5cs2hz"></span></div>'),Bd=w('<div class="icon-small svelte-5cs2hz"><!></div>'),Yd=w('<div class="icon-small svelte-5cs2hz"><!></div>'),Ud=w('<div class="icon-small accent svelte-5cs2hz"><!></div>'),Hd=w('<span class="num svelte-5cs2hz"> </span>'),Vd=w('<button class="num-box svelte-5cs2hz"><!></button>'),Wd=w('<div slot="fallback" class="icon-ph svelte-5cs2hz"><!></div>'),Qd=w('<div class="title text-ellipsis svelte-5cs2hz"> </div>'),Xd=w('<div class="title text-ellipsis svelte-5cs2hz"> </div>'),Kd=w('<span class="meta-tag quality svelte-5cs2hz"> </span>'),Gd=w("<div> </div>"),Zd=w('<div class="artist text-ellipsis svelte-5cs2hz">Unknown Artist</div>'),Jd=w('<span class="yandex-icon-inline svelte-5cs2hz" title="Yandex Music"><!></span>'),ev=w('<button class="btn-icon small remove svelte-5cs2hz"><!></button>'),tv=w('<div class="dur svelte-5cs2hz"> </div>'),av=w('<div role="button" tabindex="0"><div class="left svelte-5cs2hz"><!> <div class="thumb svelte-5cs2hz"><!></div></div> <div class="info svelte-5cs2hz"><div class="title-row svelte-5cs2hz"><!> <!></div> <!></div> <div class="right svelte-5cs2hz"><!> <button class="btn-icon small context-menu-btn svelte-5cs2hz"><!></button> <button><!></button> <!></div></div>');function zr(e,t){Lt(t,!1);const a=()=>Te(ia,"$yandexFavorites",l),s=()=>Te(Ua,"$favorites",l),n=()=>Te(xt,"$navigationStack",l),i=()=>Te(Rt,"$activeMenuTab",l),o=()=>Te(Xa,"$stations",l),[l,v]=Vt(),d=$(),u=$(),h=$(),f=$(),p=$(),S=$(),E=$(),k=$(),x=$(),Q=$(),de=$(),he=$(),J=$(),ye=$(),_e=$(),Z=$(),Me=$();let N=Tt(t,"track",8),X=Tt(t,"index",8),j=Tt(t,"isEditable",8,!1),z=Tt(t,"playingIndex",24,()=>-1),we=Tt(t,"playingFile",8,null),H=Tt(t,"isPlaying",8,!1);const xe=Rn();let O=$(!1),q=$(!1);function Le(I){if(r(k))return"â";const K=parseFloat(I);if(!K||isNaN(K)||K===0)return"0:00";const B=Math.round(K),Re=Math.floor(B/60),fe=B%60;return`${Re}:${fe.toString().padStart(2,"0")}`}function te(I){I.stopPropagation(),r(S)?Bs():xe("play")}function ve(){return r(h)?.view==="details"&&r(h).data?.name?{type:"playlist",playlistName:r(h).data.name,index:X()}:r(f)?{type:"queue",index:X()}:{type:"general"}}function Se(I){I.stopPropagation(),as(I,N(),ve())}function be(I){j()||as(I.detail.originalEvent,N(),ve())}function Ce(I){I.stopPropagation(),r(d)&&N().artist?(Rt.set("yandex"),window.location.hash!=="#/yandex"&&history.pushState(null,"","#/yandex"),xt.set([{view:"root"},{view:"yandex_search",data:{query:N().artist}}])):!r(k)&&N().artist&&(Rt.set("artists"),window.location.hash!=="#/artists"&&history.pushState(null,"","#/artists"),xt.set([{view:"root"}]),Wt("albums_by_artist",{name:N().artist})),xe("artistclick",N())}async function De(I){if(I.stopPropagation(),r(d))try{const K=r(u);K?(ia.update(B=>(B.delete(String(N().id)),B)),$e("Removed from Yandex Likes","info")):(ia.update(B=>(B.add(String(N().id)),B)),$e("Added to Yandex Likes","success")),await bt.toggleLike(N().id,K)}catch{$e("Failed to update Yandex like","error");try{const B=await bt.getFavoritesIds();B&&B.ids&&ia.set(new Set(B.ids.map(String)))}catch{}}else Mo(N())}ne(()=>L(N()),()=>{N()&&b(q,!1)}),ne(()=>L(N()),()=>{b(d,N().isYandex||N().service==="yandex")}),ne(()=>(r(d),a(),L(N()),s()),()=>{b(u,r(d)?a().has(String(N().id)):s().has(N().file))}),ne(()=>n(),()=>{b(h,n()[n().length-1])}),ne(()=>(r(h),i()),()=>{b(f,r(h)?.view==="queue"||r(h)?.view==="root"&&i()==="queue")}),ne(()=>(r(f),L(X()),L(z())),()=>{b(p,r(f)?Number(X())===z():!1)}),ne(()=>(L(N()),L(we())),()=>{b(S,N().file===we())}),ne(()=>(r(S),r(p)),()=>{b(E,r(S)&&!r(p))}),ne(()=>(L(N()),r(d)),()=>{b(k,N().file&&(String(N().file).startsWith("http")||String(N().file).includes("RADIO"))&&!r(d))}),ne(()=>(r(p),L(H()),r(O)),()=>{b(x,r(p)&&H()&&r(O))}),ne(()=>(r(p),L(H()),r(O)),()=>{b(Q,r(p)&&H()&&!r(O))}),ne(()=>(r(p),L(H()),r(O)),()=>{b(de,r(p)&&!H()&&!r(O))}),ne(()=>(r(O),r(x)),()=>{b(he,r(O)&&!r(x))}),ne(()=>L(N()),()=>{b(J,N().title||N().file?.split("/").pop())}),ne(()=>L(N()),()=>{b(ye,Le(N().time||N().duration))}),ne(()=>L(N()),()=>{b(_e,N().qualityBadge?N().qualityBadge.split(" ")[0]:null)}),ne(()=>{},()=>{b(Z,null)}),ne(()=>(r(q),L(N()),o(),r(Z),rs),()=>{b(Me,r(q)?Lr(N(),o(),r(Z)):rs(N(),"sm",o(),r(Z)))}),ea(),Dt();var C=av();let ue;var Fe=c(C),R=c(Fe);{var D=I=>{var K=Fd(),B=c(K),Re=c(B);ee(Re,()=>(L(y),_(()=>y.DRAG_HANDLE))),M("mousedown",K,fe=>xe("startdrag",fe)),M("touchstart",K,fe=>xe("startdrag",fe),void 0,!0),M("click",K,na(function(fe){ts.call(this,t,fe)})),m(I,K)},re=I=>{var K=Vd(),B=c(K);{var Re=ge=>{var Be=qd();m(ge,Be)},fe=ge=>{var Be=it(),Ve=Ie(Be);{var ke=Ye=>{var Xe=Bd(),qe=c(Xe);ee(qe,()=>(L(y),_(()=>y.PAUSE))),m(Ye,Xe)},We=Ye=>{var Xe=it(),qe=Ie(Xe);{var Ke=dt=>{var tt=Yd(),nt=c(tt);ee(nt,()=>(L(y),_(()=>y.PLAY))),m(dt,tt)},at=dt=>{var tt=it(),nt=Ie(tt);{var lt=gt=>{var Yt=Ud(),Je=c(Yt);ee(Je,()=>(L(y),_(()=>y.PLAY))),m(gt,Yt)},ct=gt=>{var Yt=Hd(),Je=c(Yt);ie(()=>oe(Je,X()+1)),m(gt,Yt)};P(nt,gt=>{r(de)?gt(lt):gt(ct,!1)},!0)}m(dt,tt)};P(qe,dt=>{r(he)?dt(Ke):dt(at,!1)},!0)}m(Ye,Xe)};P(Ve,Ye=>{r(x)?Ye(ke):Ye(We,!1)},!0)}m(ge,Be)};P(B,ge=>{r(Q)?ge(Re):ge(fe,!1)})}M("click",K,te),m(I,K)};P(R,I=>{j()?I(D):I(re,!1)})}var G=g(R,2),Pe=c(G);ra(Pe,{get src(){return r(Me)},get alt(){return r(J)},radius:"4px",$$events:{error:()=>b(q,!0)},$$slots:{fallback:(I,K)=>{var B=Wd(),Re=c(B);ee(Re,()=>(r(k),L(y),_(()=>r(k)?y.RADIO:y.ALBUMS))),kt(1,B,()=>At),m(I,B)}}});var pe=g(Fe,2),T=c(pe),Y=c(T);{var F=I=>{var K=Qd(),B=c(K);ie(()=>{Jt(K,"title",(L(N()),_(()=>N().title))),oe(B,(L(N()),_(()=>N().title)))}),m(I,K)},me=I=>{var K=it(),B=Ie(K);{var Re=ge=>{var Be=Xd(),Ve=c(Be);ie(ke=>oe(Ve,ke),[()=>(L(N()),_(()=>N().file.split("/").pop()))]),m(ge,Be)},fe=ge=>{_t(ge,{width:"60%",height:"16px",radius:"4px"})};P(B,ge=>{L(N()),r(d),_(()=>N().file&&!r(d))?ge(Re):ge(fe,!1)},!0)}m(I,K)};P(Y,I=>{L(N()),_(()=>N().title)?I(F):I(me,!1)})}var Ue=g(Y,2);{var A=I=>{var K=Kd(),B=c(K);ie(()=>oe(B,r(_e))),m(I,K)};P(Ue,I=>{r(_e)&&!r(k)&&I(A)})}var W=g(T,2);{var le=I=>{var K=Gd();let B;var Re=c(K);ie(()=>{B=ot(K,1,"artist text-ellipsis svelte-5cs2hz",null,B,{link:!r(k)||r(d)}),oe(Re,(L(N()),_(()=>N().artist)))}),M("click",K,Ce),m(I,K)},ce=I=>{var K=it(),B=Ie(K);{var Re=ge=>{var Be=Zd();m(ge,Be)},fe=ge=>{_t(ge,{width:"40%",height:"12px",radius:"4px",style:"margin-top: 4px;"})};P(B,ge=>{L(N()),r(d),_(()=>N().title||N().file&&!r(d))?ge(Re):ge(fe,!1)},!0)}m(I,K)};P(W,I=>{L(N()),_(()=>N().artist)?I(le):I(ce,!1)})}var ze=g(pe,2),Ae=c(ze);{var Oe=I=>{var K=Jd(),B=c(K);ee(B,()=>(L(y),_(()=>y.YANDEX))),m(I,K)};P(Ae,I=>{r(d)&&I(Oe)})}var je=g(Ae,2),ae=c(je);ee(ae,()=>(L(y),_(()=>y.DOTS)));var se=g(je,2);let U;var Ne=c(se);ee(Ne,()=>(r(u),L(y),_(()=>r(u)?y.HEART_FILLED:y.HEART)));var He=g(se,2);{var Ge=I=>{var K=ev(),B=c(K);ee(B,()=>(L(y),_(()=>y.REMOVE))),M("click",K,na(()=>xe("remove",{index:X()}))),m(I,K)},V=I=>{var K=tv(),B=c(K);ie(()=>oe(B,r(ye))),m(I,K)};P(He,I=>{j()?I(Ge):I(V,!1)})}Xt(()=>M("click",C,()=>!r(p)&&xe("play"))),Xt(()=>M("mouseenter",C,()=>b(O,!0))),Xt(()=>M("mouseleave",C,()=>b(O,!1))),Cn(C,I=>Bn?.(I)),Xt(()=>M("longpress",C,be)),ie(()=>{ue=ot(C,1,"row svelte-5cs2hz",null,ue,{active:r(p),striped:r(E),editable:j()}),U=ot(se,1,"btn-icon small svelte-5cs2hz",null,U,{liked:r(u)})}),M("click",je,Se),M("click",se,na(De)),m(e,C),zt(),v()}const ms=100,ki=5,xi=25,Si=3;function rv({tracksStore:e,onMoveTrack:t}){const a=Ze(!1),s=Ze(!1),n=Ze(!1),i=Ze(null),o=Ze(null),l=Ze(null),v=Ze({x:0,y:0,width:0,height:0,grabOffsetX:0,grabOffsetY:0}),d=Ze(null);let u=!1,h=0,f=0,p=0,S=0;const E={scrollContainer:null,listBodyContainer:null};let k=null;function x(j,z,we){const H=j.detail;if(H.button===2||(window.getSelection&&window.getSelection().removeAllRanges(),!E.scrollContainer))return;const O=E.scrollContainer.querySelectorAll(".row-wrapper")[z];if(!O)return;const q=O.getBoundingClientRect(),Le=H.touches?H.touches[0].clientX:H.clientX,te=H.touches?H.touches[0].clientY:H.clientY,ve=Le-q.left,Se=te-q.top;u=!0,a.set(!1),s.set(!1),h=Le,f=te,p=Le,S=te,i.set(z),o.set(z),d.set(we),l.set(null),v.set({x:Le,y:te,width:q.width,height:q.height,grabOffsetX:ve,grabOffsetY:Se})}function Q(j){if(!u||et(s))return;const z=j.touches?j.touches[0].clientX:j.clientX,we=j.touches?j.touches[0].clientY:j.clientY;if(!et(a)){const H=Math.abs(z-h),xe=Math.abs(we-f);if(H<Si&&xe<Si)return;a.set(!0)}j.cancelable&&j.preventDefault(),p=z,S=we,v.update(H=>({...H,x:p,y:S})),Z(S),de()}function de(){if(!E.listBodyContainer)return;const j=E.listBodyContainer.getBoundingClientRect(),z=et(v),H=S-j.top-z.grabOffsetY+z.height/2,xe=et(e).length;if(H<0){o.set(0);return}if(H>j.height){o.set(xe);return}const O=Array.from(E.listBodyContainer.querySelectorAll(".row-wrapper"));let q=-1,Le=1/0;O.forEach((te,ve)=>{const Se=te.offsetTop+te.offsetHeight/2,be=Math.abs(H-Se);be<Le&&(Le=be,q=ve)}),q!==-1&&o.set(q)}function he(j){if(u){if(u=!1,!et(a)){ye();return}J()}}async function J(){N(),de(),a.set(!1),s.set(!0);const j=et(o);if(E.listBodyContainer&&j!==null){const q=E.listBodyContainer.querySelectorAll(".row-wrapper"),Le=E.listBodyContainer.getBoundingClientRect(),te=q[j];let ve=0,Se=0,be=!1;if(te)ve=Le.top+te.offsetTop,Se=Le.left+te.offsetLeft,be=!0;else if(j>=q.length&&q.length>0){const Ce=q[q.length-1];ve=Le.top+Ce.offsetTop+Ce.offsetHeight,Se=Le.left+Ce.offsetLeft,be=!0}else q.length===0&&(ve=Le.top,Se=Le.left,be=!0);be&&v.update(Ce=>({...Ce,y:ve+Ce.grabOffsetY,x:Se+Ce.grabOffsetX}))}await new Promise(q=>setTimeout(q,250)),n.set(!0),await $r();const z=et(i),we=et(e).length;let H=Math.max(0,Math.min(j,we)),xe=H;if(z!==null&&z!==H){const q=[...et(e)],[Le]=q.splice(z,1);xe=Math.max(0,Math.min(xe,q.length)),q.splice(xe,0,Le),e.set(q),t&&t(z,xe),i.set(xe)}await $r(),d.set(null),i.set(null),o.set(null),s.set(!1);const O=z!==H?xe:z;l.set(O),await $r(),requestAnimationFrame(()=>{requestAnimationFrame(()=>{n.set(!1),setTimeout(()=>{l.set(null)},300)})})}function ye(){u=!1,_e()}function _e(){a.set(!1),s.set(!1),i.set(null),o.set(null),d.set(null),N()}function Z(j){if(!E.scrollContainer)return;const{top:z,bottom:we}=E.scrollContainer.getBoundingClientRect(),H=j-z,xe=we-j;N();let O=0;if(H<ms&&H>0){const q=1-H/ms;O=-(ki+xi*(q*q))}else if(xe<ms&&xe>0){const q=1-xe/ms;O=ki+xi*(q*q)}O!==0&&Me(O)}function Me(j){k||(k=requestAnimationFrame(function z(){E.scrollContainer&&(E.scrollContainer.scrollTop+=j,et(a)&&(v.update(we=>({...we,x:p,y:S})),de(),k=requestAnimationFrame(z)))}))}function N(){k&&(cancelAnimationFrame(k),k=null)}function X(j,z,we,H,xe,O){return O||!z&&!we||H===null||xe===null?"":j===H?"opacity: 0; pointer-events: none;":H===xe?"":H<xe&&j>H&&j<=xe?"transform: translateY(-100%);":H>xe&&j>=xe&&j<H?"transform: translateY(100%);":""}return{isDragging:a,isDropping:s,isReordering:n,draggingIndex:i,hoverIndex:o,justDroppedIndex:l,draggedItemData:d,ghostCoords:v,refs:E,onDragInit:x,onPointerMove:Q,onPointerUp:he,getRowStyle:X,cancelDrag:ye}}var sv=w('<div><div style="pointer-events: none; width: 100%; height: 100%;" class="svelte-ym6b2"><!></div></div>'),nv=w('<div class="skeleton-row svelte-ym6b2"><div class="sk-left svelte-ym6b2"><!> <!></div> <div class="sk-info svelte-ym6b2"><!> <!></div> <div class="sk-right svelte-ym6b2"><!></div></div>'),iv=w('<div class="skeletons-wrapper svelte-ym6b2"></div>'),ov=w("<div><!></div>"),lv=w('<div class="content-padded svelte-ym6b2" style="text-align: center; opacity: 0.5;"> </div>'),cv=w("<!> <!> <!>",1),dv=w('<div><!> <div class="list-body svelte-ym6b2"><!> <!></div></div>');function vs(e,t){Lt(t,!1);const a=()=>Te(xt,"$navigationStack",p),s=()=>Te(Rt,"$activeMenuTab",p),n=()=>Te(N,"$isDragging",p),i=()=>Te(X,"$isDropping",p),o=()=>Te(xe,"$draggedItemData",p),l=()=>Te(O,"$ghostCoords",p),v=()=>Te(z,"$draggingIndex",p),d=()=>Te(E(),"$itemsStore",p),u=()=>Te(H,"$justDroppedIndex",p),h=()=>Te(j,"$isReordering",p),f=()=>Te(we,"$hoverIndex",p),[p,S]=Vt();let E=Tt(t,"itemsStore",8),k=Tt(t,"isEditMode",8,!1),x=Tt(t,"isLoading",8,!1),Q=Tt(t,"emptyText",8,"List is empty"),de=Tt(t,"onMoveItem",8,(R,D)=>{}),he=$(""),J=$(0),ye=$(!1);Oa(async()=>{b(J,id(r(he))),!x()&&r(J)>0&&r(Z).refs.scrollContainer&&(await $r(),fs(Z,r(Z).refs.scrollContainer.scrollTop=r(J)),b(ye,!0))});async function _e(){await $r(),r(Z).refs.scrollContainer&&(fs(Z,r(Z).refs.scrollContainer.scrollTop=r(J)),b(ye,!0))}zn(()=>{r(Z).cancelDrag(),r(Z).refs.scrollContainer&&nd(r(he),r(Z).refs.scrollContainer.scrollTop)});const Z=$(rv({tracksStore:E(),onMoveTrack:(R,D)=>{de()(R,D)}})),Me=r(Z),N=Me.isDragging,X=Me.isDropping,j=Me.isReordering,z=Me.draggingIndex,we=Me.hoverIndex,H=Me.justDroppedIndex,xe=Me.draggedItemData,O=Me.ghostCoords,q=$(Me.refs);function Le(R,D,re){k()&&r(Z).onDragInit(R,D,re)}ne(()=>(a(),s()),()=>{const R=a(),D=R[R.length-1],re=s();if(D&&D.view==="root")b(he,`root_${re}`);else if(D){const G=D.data?D.data.name||D.data:"unknown";b(he,`${D.view}_${G}`)}}),ne(()=>(L(x()),r(ye),r(J),r(Z)),()=>{!x()&&!r(ye)&&r(J)>0&&r(Z).refs.scrollContainer&&_e()}),ea(),Dt();var te=dv();M("mousemove",Ba,function(...R){r(Z).onPointerMove?.apply(this,R)}),M("mouseup",Ba,function(...R){r(Z).onPointerUp?.apply(this,R)}),M("touchmove",Ba,function(...R){r(Z).onPointerMove?.apply(this,R)},void 0,!1),M("touchend",Ba,function(...R){r(Z).onPointerUp?.apply(this,R)}),M("touchcancel",Ba,function(...R){r(Z).onPointerUp?.apply(this,R)});let ve;var Se=c(te);{var be=R=>{var D=sv();let re;var G=c(D),Pe=c(G);Ur(Pe,t,"row",{get item(){return o()},get index(){return v()},isGhost:!0,startDrag:()=>{}}),ie(()=>{re=ot(D,1,"floating-item svelte-ym6b2",null,re,{dropping:i()}),mt(D,`
            top: ${l(),_(()=>l().y-l().grabOffsetY)??""}px; 
            left: ${l(),_(()=>l().x-l().grabOffsetX)??""}px;
            width: ${l(),_(()=>l().width)??""}px; 
            height: ${l(),_(()=>l().height)??""}px;
        `)}),m(R,D)};P(Se,R=>{(n()||i())&&o()&&R(be)})}var Ce=g(Se,2),De=c(Ce);Ur(De,t,"header",{});var C=g(De,2);{var ue=R=>{var D=iv();Et(D,4,()=>Array(10),qt,(re,G)=>{var Pe=nv(),pe=c(Pe),T=c(pe);_t(T,{width:"24px",height:"24px",radius:"4px",style:"opacity: 0.3"});var Y=g(T,2);_t(Y,{width:"40px",height:"40px",radius:"4px",style:"margin-left: 12px;"});var F=g(pe,2),me=c(F);_t(me,{width:"40%",height:"14px",radius:"4px",style:"margin-bottom: 6px;"});var Ue=g(me,2);_t(Ue,{width:"25%",height:"12px",radius:"4px",style:"opacity: 0.6"});var A=g(F,2),W=c(A);_t(W,{width:"30px",height:"12px",radius:"4px"}),m(re,Pe)}),m(R,D)},Fe=R=>{var D=cv(),re=Ie(D);Et(re,3,d,(T,Y)=>T._uid||Y,(T,Y,F)=>{var me=ov();let Ue;var A=c(me);Ur(A,t,"row",{get item(){return r(Y)},get index(){return r(F)},isGhost:!1,startDrag:W=>Le(W,r(F),r(Y))}),ie(W=>{Ue=ot(me,1,"row-wrapper svelte-ym6b2",null,Ue,{"ghost-placeholder":v()===r(F)&&(n()||i()),"just-dropped":u()===r(F),"no-transition":h()}),mt(me,W)},[()=>(r(Z),L(r(F)),n(),i(),v(),f(),h(),_(()=>r(Z).getRowStyle(r(F),n(),i(),v(),f(),h())))]),m(T,me)});var G=g(re,2);{var Pe=T=>{var Y=lv(),F=c(Y);ie(()=>oe(F,Q())),m(T,Y)};P(G,T=>{d(),_(()=>d().length===0)&&T(Pe)})}var pe=g(G,2);Ur(pe,t,"footer",{}),m(R,D)};P(C,R=>{x()?R(ue):R(Fe,!1)})}Na(Ce,R=>fs(q,r(q).listBodyContainer=R),()=>r(q)?.listBodyContainer),Na(te,R=>fs(q,r(q).scrollContainer=R),()=>r(q)?.scrollContainer),ie(()=>ve=ot(te,1,"base-list-scroll-container svelte-ym6b2",null,ve,{dragging:n()})),kt(1,Ce,()=>At,()=>({duration:200})),m(e,te),zt(),S()}var vv=w('<div slot="fallback" class="icon-fallback svelte-1eh2rsb"><!></div>'),uv=w('<span class="meta-tag svelte-1eh2rsb"> </span>'),fv=w('<div class="header-subtitle-row svelte-1eh2rsb"><h2 class="header-sub-text svelte-1eh2rsb"> </h2> <!></div>'),hv=w('<span class="meta-tag svelte-1eh2rsb"> </span>'),pv=w('<span class="meta-tag svelte-1eh2rsb"> </span>'),gv=w('<span class="meta-tag quality svelte-1eh2rsb"> </span>'),_v=w('<div slot="header" class="content-padded svelte-1eh2rsb"><div class="view-header svelte-1eh2rsb"><div class="header-art svelte-1eh2rsb"><div style="width: 100%; height: 100%;" class="svelte-1eh2rsb"><!></div></div> <div class="header-info svelte-1eh2rsb"><div class="header-text-group svelte-1eh2rsb"><div class="header-label svelte-1eh2rsb"> </div> <h1 class="header-title svelte-1eh2rsb"> </h1> <!> <div class="meta-badges svelte-1eh2rsb"><!> <!> <!></div></div> <div class="header-actions svelte-1eh2rsb"><button class="btn-primary svelte-1eh2rsb"> </button> <button class="btn-secondary svelte-1eh2rsb"> </button></div></div></div></div>'),mv=w('<div slot="row" class="svelte-1eh2rsb"><!></div>'),bv=w("<button> </button>"),yv=w('<div class="sort-backdrop svelte-1eh2rsb"></div> <div class="sort-menu svelte-1eh2rsb"></div>',1),wv=w('<div class="sort-wrapper svelte-1eh2rsb"><button class="sort-trigger svelte-1eh2rsb"><span class="svelte-1eh2rsb"> </span> <span class="sort-trigger-icon svelte-1eh2rsb"><!></span></button> <!></div>'),kv=w('<div class="music-card skeleton-card svelte-1eh2rsb"><div class="card-img-container svelte-1eh2rsb"><!></div> <div class="card-title svelte-1eh2rsb" style="margin-top: 12px;"><!></div> <div class="card-sub-row svelte-1eh2rsb" style="margin-top: 6px;"><!></div></div>'),xv=w('<div class="music-grid svelte-1eh2rsb"></div>'),Sv=w('<div class="group-header header-label svelte-1eh2rsb"> </div>'),Ev=w('<div slot="fallback" class="icon-fallback svelte-1eh2rsb"><!></div>'),Tv=w('<div class="card-sub text-ellipsis svelte-1eh2rsb"> </div>'),$v=w('<div class="card-badge svelte-1eh2rsb"> </div>'),Av=w('<div class="card-badge quality svelte-1eh2rsb"> </div>'),Mv=w('<div class="music-card svelte-1eh2rsb" role="button" tabindex="0"><div class="card-img-container svelte-1eh2rsb"><!> <div class="play-overlay svelte-1eh2rsb"><span class="overlay-icon svelte-1eh2rsb"><!></span></div></div> <div class="card-title svelte-1eh2rsb"> </div> <div class="card-sub-row svelte-1eh2rsb"><!> <!> <!></div></div>'),Cv=w('<div class="empty-text svelte-1eh2rsb">No results found</div>'),Pv=w('<div class="music-grid svelte-1eh2rsb"></div>'),Lv=w('<div class="content-padded svelte-1eh2rsb"><div class="search-input-container svelte-1eh2rsb"><span class="search-icon svelte-1eh2rsb"><!></span> <input type="text" class="svelte-1eh2rsb"/> <!></div> <!></div>'),zv=w("<div><!></div>");function Rv(e,t){Lt(t,!1);const a=()=>Te(u,"$itemsStore",n),s=()=>Te(xt,"$navigationStack",n),[n,i]=Vt(),o=$(),l=$(),v=$();let d=Tt(t,"activeCategory",8,"artists");const u=Ze([]);let h=$(!0),f=$(""),p=$("name"),S=$(!1);const E=[{id:"name",label:"A-Z"},{id:"artist",label:"Artist"},{id:"year",label:"Oldest"},{id:"year_desc",label:"Newest"}];let k=$(!1),x=$(!1),Q=$(null),de=$(""),he=$(""),J=$(""),ye=$(0),_e=0;function Z(){b(S,!r(S))}function Me(te){b(p,te),b(S,!1)}function N(te,ve){if(!te||te.length===0)return[];const Se=[...te].sort((be,Ce)=>{switch(ve){case"name":return be.displayName.localeCompare(Ce.displayName,void 0,{sensitivity:"base"});case"artist":const De=be.artist||"",C=Ce.artist||"",ue=De.localeCompare(C,void 0,{sensitivity:"base"});return ue!==0?ue:(parseInt(be.year)||0)-(parseInt(Ce.year)||0);case"year":return(parseInt(be.year)||0)-(parseInt(Ce.year)||0);case"year_desc":return(parseInt(Ce.year)||0)-(parseInt(be.year)||0);default:return 0}});if(ve==="artist"){const be=[];let Ce=null;return Se.forEach(De=>{const C=De.artist||"Unknown Artist";C!==Ce&&(be.push({_uid:`header-${C}`,isHeader:!0,title:C}),Ce=C),be.push(De)}),be}return Se}async function X(te,ve){if(!ve)return;const Se=++_e;b(h,!0),u.set([]),b(Q,ve.data),b(de,""),b(he,""),b(J,""),b(ye,0),console.log(`[LibraryView #${Se}] Start loading:`,ve);try{let be=[];if(ve.view==="root")be=te==="artists"?await Ha.getArtists():await Ha.getAlbums();else if(ve.view==="albums_by_artist"){const De=ve.data.name||ve.data;be=await Ha.getArtistAlbums(De),b(p,"year")}else if(ve.view==="tracks_by_album"){const De=ve.data.name||ve.data,C=ve.data.artist;be=await Ha.getAlbumTracks(De,C)}if(Se!==_e){console.warn(`[LibraryView #${Se}] Request cancelled (stale).`);return}const Ce=be.map((De,C)=>{const Fe=typeof De=="string"?{name:De}:De;let R=String(Fe.year||"");return R.length>4&&(R=R.substring(0,4)),{...Fe,displayName:Fe.name||Fe.title||Fe.artist||"Unknown",thumbFile:Fe.file||null,year:R,_uid:(Fe.file||Fe.name||C)+te+ve.view}});if(console.log(`[LibraryView #${Se}] Setting ${Ce.length} items.`),u.set(Ce),ve.view==="tracks_by_album"&&Ce.length>0){b(Q,Ce[0]),b(ye,Ce.length),b(J,Ce[0].year);const De=Ce.reduce((C,ue)=>C+(ue.time||0),0);if(De>0){const C=Math.floor(De/3600),ue=Math.floor(De%3600/60);b(de,C>0?`${C} hr ${ue} min`:`${ue} min`)}Ce[0].qualityBadge&&b(he,Ce[0].qualityBadge)}}catch(be){Se===_e&&(console.error(be),u.set([]))}finally{Se===_e&&b(h,!1)}}function j(te){r(v).view==="root"?d()==="artists"?Wt("albums_by_artist",te):Wt("tracks_by_album",te):r(v).view==="albums_by_artist"&&Wt("tracks_by_album",te)}function z(){const te=a();if(te.length>0){const ve=r(v).data.name||r(v).data.displayName||"this selection";ya({title:"Replace Queue?",message:`This will clear your queue and play all tracks from "${ve}".`,confirmLabel:"Play",type:"confirm",onConfirm:()=>{b(k,!0),Rs(te)}})}}function we(){const te=a();te.length>0&&(b(x,!0),On(te),setTimeout(()=>{b(x,!1)},2e3))}ne(()=>L(d()),()=>{d()&&(b(f,""),d(),b(p,"name"))}),ne(()=>(r(p),y),()=>{b(o,r(p)==="year_desc"?y.SORT_ASC:y.SORT_DESC)}),ne(()=>(a(),r(f),r(p)),()=>{b(l,N(a().filter(te=>{if(!r(f))return!0;const ve=r(f).toLowerCase();return te.displayName.toLowerCase().includes(ve)||te.artist&&te.artist.toLowerCase().includes(ve)}),r(p)))}),ne(()=>s(),()=>{b(v,s()[s().length-1])}),ne(()=>(L(d()),r(v)),()=>{X(d(),r(v))}),ne(()=>r(v),()=>{r(v)&&(b(k,!1),b(x,!1),b(S,!1))}),ea(),Dt();var H=zv();let xe;var O=c(H);{var q=te=>{vs(te,{get itemsStore(){return u},get isLoading(){return r(h)},isEditMode:!1,emptyText:"No tracks found",$$slots:{header:(ve,Se)=>{var be=_v(),Ce=c(be),De=c(Ce),C=c(De),ue=c(C);{let ae=yt(()=>(L(Lr),r(Q),_(()=>Lr(r(Q)))));ra(ue,{get src(){return r(ae)},alt:"Art",radius:"8px",$$slots:{fallback:(se,U)=>{var Ne=vv(),He=c(Ne);ee(He,()=>(L(y),_(()=>y.ALBUMS))),m(se,Ne)}}})}var Fe=g(De,2),R=c(Fe),D=c(R),re=c(D),G=g(D,2),Pe=c(G),pe=g(G,2);{var T=ae=>{var se=fv(),U=c(se),Ne=c(U),He=g(U,2);{var Ge=V=>{var I=uv(),K=c(I);ie(()=>oe(K,r(J))),m(V,I)};P(He,V=>{r(J)&&r(J)!=="0"&&V(Ge)})}ie(()=>oe(Ne,(r(Q),_(()=>r(Q).artist)))),m(ae,se)};P(pe,ae=>{r(Q),_(()=>r(Q)&&r(Q).artist)&&ae(T)})}var Y=g(pe,2),F=c(Y);{var me=ae=>{var se=hv(),U=c(se);ie(()=>oe(U,`${r(ye)??""} tracks`)),m(ae,se)};P(F,ae=>{r(ye)>0&&ae(me)})}var Ue=g(F,2);{var A=ae=>{var se=pv(),U=c(se);ie(()=>oe(U,r(de))),m(ae,se)};P(Ue,ae=>{r(de)&&ae(A)})}var W=g(Ue,2);{var le=ae=>{var se=gv(),U=c(se);ie(()=>oe(U,r(he))),m(ae,se)};P(W,ae=>{r(he)&&ae(le)})}var ce=g(R,2),ze=c(ce),Ae=c(ze),Oe=g(ze,2),je=c(Oe);ie(()=>{oe(re,(r(v),_(()=>r(v).view==="albums_by_artist"?"Artist":"Album"))),Jt(G,"title",(r(v),_(()=>r(v).data.name||r(v).data.displayName))),oe(Pe,(r(v),_(()=>r(v).data.name||r(v).data.displayName||"Unknown"))),ze.disabled=r(k),oe(Ae,r(k)?"Playing...":"Play All"),Oe.disabled=r(x),oe(je,r(x)?"Added":"To Queue")}),M("click",ze,z),M("click",Oe,we),m(ve,be)},row:(ve,Se)=>{var be=mv();const Ce=yt(()=>Se.item),De=yt(()=>Se.index);var C=c(be);zr(C,{get track(){return r(Ce)},get index(){return r(De)},isEditable:!1,$$events:{play:()=>Ys(r(Ce))}}),m(ve,be)}}})},Le=te=>{var ve=Lv(),Se=c(ve),be=c(Se),Ce=c(be);ee(Ce,()=>(L(y),_(()=>y.SEARCH)));var De=g(be,2),C=g(De,2);{var ue=re=>{var G=wv(),Pe=c(G),pe=c(Pe),T=c(pe),Y=g(pe,2),F=c(Y);ee(F,()=>r(o));var me=g(Pe,2);{var Ue=A=>{var W=yv(),le=Ie(W),ce=g(le,2);Et(ce,5,()=>E,qt,(ze,Ae)=>{var Oe=bv();let je;var ae=c(Oe);ie(()=>{je=ot(Oe,1,"sort-item svelte-1eh2rsb",null,je,{selected:r(p)===r(Ae).id}),oe(ae,(r(Ae),_(()=>r(Ae).label)))}),M("click",Oe,()=>Me(r(Ae).id)),m(ze,Oe)}),M("click",le,Z),kt(3,le,()=>At,()=>({duration:100})),kt(3,ce,()=>In,()=>({start:.95,duration:100})),m(A,W)};P(me,A=>{r(S)&&A(Ue)})}ie(A=>oe(T,A),[()=>(r(p),_(()=>E.find(A=>A.id===r(p))?.label))]),M("click",Pe,Z),m(re,G)};P(C,re=>{L(d()),r(v),_(()=>d()==="albums"||r(v).view==="albums_by_artist")&&re(ue)})}var Fe=g(Se,2);{var R=re=>{var G=xv();Et(G,4,()=>Array(12),qt,(Pe,pe)=>{var T=kv(),Y=c(T),F=c(Y);_t(F,{width:"100%",height:"100%",radius:"8px"});var me=g(Y,2),Ue=c(me);_t(Ue,{width:"80%",height:"14px",radius:"4px"});var A=g(me,2),W=c(A);_t(W,{width:"50%",height:"12px",radius:"4px",style:"opacity: 0.6"}),m(Pe,T)}),m(re,G)},D=re=>{var G=Pv();Et(G,5,()=>r(l),Pe=>Pe._uid,(Pe,pe)=>{var T=it(),Y=Ie(T);{var F=Ue=>{var A=Sv(),W=c(A);ie(()=>oe(W,(r(pe),_(()=>r(pe).title)))),m(Ue,A)},me=Ue=>{var A=Mv(),W=c(A),le=c(W);{let I=yt(()=>(L(rs),r(pe),_(()=>rs(r(pe),"md"))));ra(le,{get src(){return r(I)},get alt(){return r(pe),_(()=>r(pe).displayName)},radius:"8px",$$slots:{fallback:(K,B)=>{var Re=Ev(),fe=c(Re);{var ge=Ve=>{var ke=it(),We=Ie(ke);ee(We,()=>(L(y),_(()=>y.ARTISTS))),m(Ve,ke)},Be=Ve=>{var ke=it(),We=Ie(ke);ee(We,()=>(L(y),_(()=>y.ALBUMS))),m(Ve,ke)};P(fe,Ve=>{d()==="artists"?Ve(ge):Ve(Be,!1)})}m(K,Re)}}})}var ce=g(le,2),ze=c(ce),Ae=c(ze);ee(Ae,()=>(L(y),_(()=>y.PLAY)));var Oe=g(W,2),je=c(Oe),ae=g(Oe,2),se=c(ae);{var U=I=>{var K=Tv(),B=c(K);ie(()=>oe(B,(r(pe),_(()=>r(pe).artist)))),m(I,K)};P(se,I=>{r(pe),_(()=>r(pe).artist)&&I(U)})}var Ne=g(se,2);{var He=I=>{var K=$v(),B=c(K);ie(()=>oe(B,(r(pe),_(()=>r(pe).year)))),m(I,K)};P(Ne,I=>{r(pe),_(()=>r(pe).year&&r(pe).year!=="0")&&I(He)})}var Ge=g(Ne,2);{var V=I=>{var K=Av(),B=c(K);ie(Re=>oe(B,Re),[()=>(r(pe),_(()=>r(pe).qualityBadge.split(" ")[0]))]),m(I,K)};P(Ge,I=>{r(pe),_(()=>r(pe).qualityBadge)&&I(V)})}ie(()=>oe(je,(r(pe),_(()=>r(pe).displayName)))),M("click",A,()=>j(r(pe))),M("keypress",A,I=>I.key==="Enter"&&j(r(pe))),m(Ue,A)};P(Y,Ue=>{r(pe),_(()=>r(pe).isHeader)?Ue(F):Ue(me,!1)})}m(Pe,T)},Pe=>{var pe=Cv();m(Pe,pe)}),m(re,G)};P(Fe,re=>{r(h)?re(R):re(D,!1)})}ie(()=>Jt(De,"placeholder",`Filter ${d()??""}...`)),nr(De,()=>r(f),re=>b(f,re)),m(te,ve)};P(O,te=>{r(v),_(()=>r(v)?.view==="tracks_by_album")?te(q):te(Le,!1)})}ie(()=>xe=ot(H,1,"view-container svelte-1eh2rsb",null,xe,{scrollable:r(v)?.view!=="tracks_by_album"})),m(e,H),zt(),i()}var Iv=w('<div class="music-card svelte-1otxnt7"><!> <!></div>'),jv=w('<div class="music-grid svelte-1otxnt7"></div>'),Nv=w('<div slot="fallback" class="icon-fallback svelte-1otxnt7">ð»</div>'),Dv=w('<div class="status-badge playing svelte-1otxnt7">PLAYING</div>'),Ov=w('<div class="status-badge paused svelte-1otxnt7">PAUSED</div>'),Fv=w('<span class="overlay-icon svelte-1otxnt7"><!></span>'),qv=w('<div class="card-sub svelte-1otxnt7"> </div>'),Bv=w('<div class="card-badge quality svelte-1otxnt7"> </div>'),Yv=w('<div role="button" tabindex="0"><div class="card-img-container svelte-1otxnt7"><!> <div class="play-overlay svelte-1otxnt7"><!></div></div> <div class="card-title svelte-1otxnt7"> </div> <div class="card-sub-row svelte-1otxnt7"><!> <!></div></div>'),Uv=w('<div class="empty-text svelte-1otxnt7">No stations found</div>'),Hv=w('<div class="music-grid svelte-1otxnt7"></div> <!>',1),Vv=w('<div class="view-container scrollable svelte-1otxnt7"><div class="content-padded no-bottom-pad svelte-1otxnt7"><div class="search-input-container svelte-1otxnt7"><span class="search-icon svelte-1otxnt7"><!></span> <input type="text" placeholder="Find station..." class="svelte-1otxnt7"/></div></div> <div class="content-padded svelte-1otxnt7"><!></div></div>');function Wv(e,t){Lt(t,!1);const a=()=>Te(Xa,"$stations",o),s=()=>Te($t,"$status",o),n=()=>Te(bs,"$isLoadingRadio",o),i=()=>Te(Bt,"$currentSong",o),[o,l]=Vt(),v=$(),d=$();let u=$("");ne(()=>(a(),r(u)),()=>{b(v,a().filter(J=>{const ye=r(u).toLowerCase();return J.name.toLowerCase().includes(ye)||J.genre&&J.genre.toLowerCase().includes(ye)}))}),ne(()=>s(),()=>{b(d,s().bitrate?`${s().bitrate} kbps`:s().format||"")}),ea(),Dt();var h=Vv(),f=c(h),p=c(f),S=c(p),E=c(S);ee(E,()=>(L(y),_(()=>y.SEARCH)));var k=g(S,2),x=g(f,2),Q=c(x);{var de=J=>{var ye=jv();Et(ye,4,()=>Array(12),qt,(_e,Z)=>{var Me=Iv(),N=c(Me);_t(N,{width:"100%",style:"aspect-ratio:1; border-radius:12px; margin-bottom:12px;"});var X=g(N,2);_t(X,{width:"70%",height:"16px"}),m(_e,Me)}),m(J,ye)},he=J=>{var ye=Hv(),_e=Ie(ye);Et(_e,5,()=>r(v),qt,(N,X)=>{const j=yt(()=>(r(X),_(()=>r(X).file))),z=yt(()=>(i(),r(X),L(r(j)),_(()=>i().stationName===r(X).name||i().file===r(j)))),we=yt(()=>(L(Pr),r(X),_(()=>Pr(r(X)))));var H=Yv();let xe;var O=c(H),q=c(O);ra(q,{get src(){return r(we)},get alt(){return r(X),_(()=>r(X).name)},radius:"8px",$$slots:{fallback:(D,re)=>{var G=Nv();m(D,G)}}});var Le=g(q,2),te=c(Le);{var ve=D=>{var re=it(),G=Ie(re);{var Pe=T=>{var Y=Dv();m(T,Y)},pe=T=>{var Y=Ov();m(T,Y)};P(G,T=>{s(),_(()=>s().state==="play")?T(Pe):T(pe,!1)})}m(D,re)},Se=D=>{var re=Fv(),G=c(re);ee(G,()=>(L(y),_(()=>y.PLAY))),m(D,re)};P(te,D=>{r(z)?D(ve):D(Se,!1)})}var be=g(O,2),Ce=c(be),De=g(be,2),C=c(De);{var ue=D=>{var re=qv(),G=c(re);ie(()=>oe(G,(r(X),_(()=>r(X).genre)))),m(D,re)};P(C,D=>{r(X),_(()=>r(X).genre)&&D(ue)})}var Fe=g(C,2);{var R=D=>{var re=Bv(),G=c(re);ie(()=>oe(G,r(d))),kt(1,re,()=>At),m(D,re)};P(Fe,D=>{r(z)&&r(d)&&D(R)})}ie(()=>{xe=ot(H,1,"music-card svelte-1otxnt7",null,xe,{"is-active":r(z)}),mt(Le,r(z)?"opacity: 1":""),oe(Ce,(r(X),_(()=>r(X).name)))}),M("click",H,()=>qn(r(X))),m(N,H)});var Z=g(_e,2);{var Me=N=>{var X=Uv();m(N,X)};P(Z,N=>{r(v),a(),_(()=>r(v).length===0&&a().length>0)&&N(Me)})}m(J,ye)};P(Q,J=>{n()?J(de):J(he,!1)})}nr(k,()=>r(u),J=>b(u,J)),kt(1,h,()=>At,()=>({duration:200})),m(e,h),zt(),l()}var Qv=w('<button class="clear-icon-btn svelte-m7c4tz"><!></button>'),Xv=w('<div class="spinner svelte-m7c4tz"></div>'),Kv=w('<div class="content-padded no-bottom-pad svelte-m7c4tz"><div class="search-input-container svelte-m7c4tz"><span class="search-icon svelte-m7c4tz"><!></span> <input type="text" placeholder="Search playlists &amp; tracks..." class="svelte-m7c4tz"/> <!> <!></div></div>'),Gv=w('<span class="meta-tag svelte-m7c4tz">Loading...</span>'),Zv=w('<span class="meta-tag svelte-m7c4tz"> </span>'),Jv=w('<span class="meta-tag quality svelte-m7c4tz"> </span>'),eu=w('<span class="meta-tag svelte-m7c4tz"> </span> <!> <!>',1),tu=w('<div slot="header" class="content-padded svelte-m7c4tz"><div class="view-header svelte-m7c4tz"><div class="header-art svelte-m7c4tz"><div class="header-icon-wrap svelte-m7c4tz"><!></div></div> <div class="header-info svelte-m7c4tz"><div class="header-text-group svelte-m7c4tz"><div class="header-label svelte-m7c4tz">Playlist</div> <h1 class="header-title svelte-m7c4tz"> </h1> <div class="meta-badges svelte-m7c4tz"><!></div></div> <div class="header-actions svelte-m7c4tz"><button class="btn-primary svelte-m7c4tz"> </button> <button class="btn-secondary svelte-m7c4tz"> </button> <button title="Edit"><!></button></div></div></div></div>'),au=w('<div slot="row" class="svelte-m7c4tz"><!></div>'),ru=w('<div class="music-card skeleton-card svelte-m7c4tz"><div class="card-img-container svelte-m7c4tz"><!></div> <div style="margin-top: 8px;" class="svelte-m7c4tz"><!></div></div>'),su=w('<div class="content-padded svelte-m7c4tz"><div class="music-grid playlists-grid-override svelte-m7c4tz"></div></div>'),nu=w('<button class="card-menu-btn svelte-m7c4tz"><!></button>'),iu=w('<div class="music-card svelte-m7c4tz"><div class="card-img-container svelte-m7c4tz"><div class="icon-wrap svelte-m7c4tz"><!></div> <!> <div class="play-overlay svelte-m7c4tz"><span class="overlay-icon svelte-m7c4tz"><!></span></div></div> <div class="card-title svelte-m7c4tz"> </div> <div class="card-sub-row svelte-m7c4tz"><div class="card-sub svelte-m7c4tz"> </div></div></div>'),ou=w('<div class="music-grid playlists-grid-override svelte-m7c4tz"><div class="music-card svelte-m7c4tz"><div class="card-img-container dashed-cover svelte-m7c4tz"><div class="icon-wrap svelte-m7c4tz"><!></div></div> <div class="card-title svelte-m7c4tz">New Playlist</div></div> <!></div>'),lu=w('<div class="music-card svelte-m7c4tz"><div class="card-img-container svelte-m7c4tz"><div class="icon-wrap svelte-m7c4tz"><!></div> <div class="play-overlay svelte-m7c4tz"><span class="overlay-icon svelte-m7c4tz"><!></span></div></div> <div class="card-title svelte-m7c4tz"> </div></div>'),cu=w('<div class="header-label section-spacing svelte-m7c4tz">Matched Playlists</div> <div class="music-grid horizontal section-mb svelte-m7c4tz"></div>',1),du=w('<div class="group-container svelte-m7c4tz"><div class="group-header svelte-m7c4tz"><div class="group-icon svelte-m7c4tz"><!></div> <div class="group-title svelte-m7c4tz"> </div> <div class="group-count svelte-m7c4tz"> </div> <div class="group-actions svelte-m7c4tz"><button class="btn-icon small svelte-m7c4tz" title="Play matches"><!></button> <button class="btn-icon small svelte-m7c4tz" title="Add matches to Queue"><!></button></div></div> <div class="group-tracks svelte-m7c4tz"></div></div>'),vu=w('<div class="header-label section-spacing svelte-m7c4tz">Matched Tracks</div> <div class="grouped-results svelte-m7c4tz"></div>',1),uu=w('<div class="empty-text svelte-m7c4tz"> </div>'),fu=w('<div class="empty-text svelte-m7c4tz" style="opacity: 0.7">Searching tracks in playlists...</div>'),hu=w("<!> <!> <!>",1),pu=w('<div class="content-padded svelte-m7c4tz"><!></div>'),gu=w("<div><!> <!></div>");function _u(e,t){Lt(t,!1);const a=()=>Te($t,"$status",f),s=()=>Te(Bt,"$currentSong",f),n=()=>Te(xt,"$navigationStack",f),i=()=>Te(Fs,"$playlists",f),o=()=>Te(Xr,"$activePlaylistTracks",f),l=()=>Te(gn,"$isLoadingTracks",f),v=()=>Te(ed,"$activePlaylistName",f),d=()=>Te(Qa,"$queue",f),u=()=>Te($s,"$currentTheme",f),h=()=>Te(pn,"$isLoadingPlaylists",f),[f,p]=Vt(),S=$(),E=$(),k=$(),x=$(),Q=$(),de=$();let he=$(!1),J=$(!1),ye=$(!1),_e=$(""),Z=$(!1),Me,N=0,X=$([]),j=$([]),z=$(""),we=$(""),H=$("");function xe(A){b(_e,A.target.value),clearTimeout(Me),r(_e).length>=2?Me=setTimeout(()=>{O(r(_e))},600):(b(Z,!1),b(X,[]),b(j,[]))}async function O(A){if(!A)return;N++;const W=N;b(Z,!0);const le=A.toLowerCase();b(X,i().filter(Ae=>Ae.name.toLowerCase().includes(le)));let ce=[];const ze=i().filter(Ae=>Ae.name!=="Favorites");for(const Ae of ze){if(W!==N)break;try{const Oe=await Qe.send(`listplaylistinfo "${Ae.name.replace(/"/g,'\\"')}"`),se=Qt.parseTracks(Oe).map((U,Ne)=>({...U,playlistPos:Ne})).filter(U=>U.title&&U.title.toLowerCase().includes(le)||U.artist&&U.artist.toLowerCase().includes(le));if(se.length>0){const U=se.map(Ne=>({...Ne,_uid:Math.random()}));ce.push({playlist:Ae,tracks:U}),b(j,[...ce])}}catch(Oe){console.warn(`Failed to search in playlist ${Ae.name}`,Oe)}}W===N&&b(Z,!1)}function q(A){r(he)||Ys(A)}function Le(A){A.deltaY!==0&&(A.currentTarget.scrollLeft+=A.deltaY)}function te(A,W){ya({title:"Play Search Results?",message:`This will clear your queue and play ${A.length} matching tracks from "${W}".`,confirmLabel:"Play",type:"confirm",onConfirm:()=>{Rs(A)}})}function ve(A){!A||A.length===0||On(A)}Oa(()=>{!r(Q)&&i().length===0&&Fn()});function Se(A){const W=A.reduce((ce,ze)=>ce+(parseFloat(ze.time)||0),0);if(W>0){const ce=Math.floor(W/3600),ze=Math.floor(W%3600/60);b(z,ce>0?`${ce} hr ${ze} min`:`${ze} min`)}else b(z,"");const le=new Set;A.forEach(ce=>{ce.qualityBadge&&le.add(ce.qualityBadge.split(" ")[0])}),b(we,le.size===1?A[0].qualityBadge:le.size>1?"Mixed":"")}function be(A){Wt("details",A)}function Ce(){if(d().length===0){ya({title:"Create Playlist",message:"Queue is empty. Add tracks to queue before saving a playlist.",confirmLabel:"OK",type:"alert"});return}ya({title:"New Playlist",message:"Save current queue as a new playlist:",type:"prompt",placeholder:"Playlist Name",confirmLabel:"Create",onConfirm:A=>{A&&ka.createPlaylistFromQueue(A)}})}function De(A,W){W.name!=="Favorites"&&(A.stopPropagation(),A.preventDefault(),as(A,null,{type:"playlist-card",playlist:W}))}function C(){ya({title:"Replace Queue?",message:`This will clear your current queue and play "${r(x).data.name}".`,confirmLabel:"Play",type:"confirm",onConfirm:()=>{b(J,!0),o()&&o().length>0?Rs(o()):b(J,!1)}})}function ue(){if(o().length>0){const A=r(x).data.name.replace(/"/g,'\\"');zs(`load "${A}"`),b(ye,!0),setTimeout(()=>{b(ye,!1)},2e3)}}function Fe(){b(he,!r(he))}function R(A){const W=r(x).data.name,le=o();le.splice(A,1),Xr.set(le),Co(W,A),Se(le)}function D(A,W){Po(r(x).data.name,A,W)}function re(A){if(A.name==="Favorites"){if(u()==="gruvbox"){const W="var(--c-heart)";return`background: linear-gradient(135deg, ${W}, transparent); background-color: ${W};`}return"background: linear-gradient(135deg, hsl(348, 95%, 58%), hsl(348, 90%, 40%));"}return u()==="gruvbox"?`background: linear-gradient(135deg, ${A.colorVar}, transparent); background-color: ${A.colorVar};`:`background: ${A.color}`}function G(A){if(!A)return"";if(A.name==="Favorites"){if(u()==="gruvbox"){const ce="var(--c-heart)";return`background: linear-gradient(135deg, ${ce}, transparent); background-color: ${ce};`}return"background: linear-gradient(135deg, hsl(348, 95%, 58%), hsl(348, 90%, 40%));"}const W="var(--c-bg-card)";if(u()==="gruvbox"){const ce=A.colorVar||A.color||W;return`background: linear-gradient(135deg, ${ce}, transparent); background-color: ${ce};`}return`background: ${A.color||A.colorVar||W}`}ne(()=>a(),()=>{b(S,Number(a().song))}),ne(()=>s(),()=>{b(E,s().file)}),ne(()=>a(),()=>{b(k,a().state==="play")}),ne(()=>n(),()=>{b(x,n()[n().length-1])}),ne(()=>r(x),()=>{b(Q,r(x).view==="details")}),ne(()=>(r(x),r(H)),()=>{const A=JSON.stringify(r(x));A!==r(H)&&(b(_e,""),b(J,!1),b(ye,!1),b(he,!1),b(X,[]),b(j,[]),b(Z,!1),b(H,A))}),ne(()=>(r(Q),o(),l()),()=>{r(Q)&&o().length>0?Se(o()):r(Q)&&o().length===0&&!l()&&(b(z,"0 min"),b(we,""))}),ne(()=>(r(Q),r(x),v(),Od),()=>{r(Q)&&r(x).data&&v()!==r(x).data.name&&Ao(r(x).data.name)}),ne(()=>r(x),()=>{b(de,r(x)?.data?.name==="Favorites")}),ea(),Dt();var Pe=gu();let pe;var T=c(Pe);{var Y=A=>{var W=Kv(),le=c(W),ce=c(le),ze=c(ce);ee(ze,()=>(L(y),_(()=>y.SEARCH)));var Ae=g(ce,2),Oe=g(Ae,2);{var je=U=>{var Ne=Qv(),He=c(Ne);ee(He,()=>(L(y),_(()=>y.CLOSE))),M("click",Ne,()=>{b(_e,""),b(X,[]),b(j,[]),b(Z,!1)}),m(U,Ne)};P(Oe,U=>{r(_e)&&U(je)})}var ae=g(Oe,2);{var se=U=>{var Ne=Xv();m(U,Ne)};P(ae,U=>{r(Z)&&U(se)})}ie(()=>po(Ae,r(_e))),M("input",Ae,xe),m(A,W)};P(T,A=>{r(Q)||A(Y)})}var F=g(T,2);{var me=A=>{vs(A,{get itemsStore(){return Xr},get isLoading(){return l()},get isEditMode(){return r(he)},emptyText:"This playlist is empty.",onMoveItem:D,$$slots:{header:(W,le)=>{var ce=tu(),ze=c(ce),Ae=c(ze),Oe=c(Ae),je=c(Oe);ee(je,()=>(r(de),L(y),_(()=>r(de)?y.HEART_FILLED:y.PLAYLISTS)));var ae=g(Ae,2),se=c(ae),U=g(c(se),2),Ne=c(U),He=g(U,2),Ge=c(He);{var V=We=>{var Ye=Gv();m(We,Ye)},I=We=>{var Ye=eu(),Xe=Ie(Ye),qe=c(Xe),Ke=g(Xe,2);{var at=nt=>{var lt=Zv(),ct=c(lt);ie(()=>oe(ct,r(z))),m(nt,lt)};P(Ke,nt=>{r(z)&&nt(at)})}var dt=g(Ke,2);{var tt=nt=>{var lt=Jv(),ct=c(lt);ie(()=>oe(ct,r(we))),m(nt,lt)};P(dt,nt=>{r(we)&&nt(tt)})}ie(()=>oe(qe,`${o(),_(()=>o().length)??""} tracks`)),m(We,Ye)};P(Ge,We=>{l()?We(V):We(I,!1)})}var K=g(se,2),B=c(K),Re=c(B),fe=g(B,2),ge=c(fe),Be=g(fe,2);let Ve;var ke=c(Be);ee(ke,()=>(r(he),L(y),_(()=>r(he)?y.ACCEPT:y.EDIT))),ie(We=>{mt(Ae,We),Jt(U,"title",(r(x),_(()=>r(x).data.name))),oe(Ne,(r(x),_(()=>r(x).data.name))),B.disabled=r(J),oe(Re,r(J)?"Playing...":"Play All"),fe.disabled=r(ye),oe(ge,r(ye)?"Added":"To Queue"),Ve=ot(Be,1,"btn-action svelte-m7c4tz",null,Ve,{active:r(he)})},[()=>(r(x),_(()=>G(r(x).data)))]),M("click",B,C),M("click",fe,ue),M("click",Be,Fe),m(W,ce)},row:(W,le)=>{var ce=au();const ze=yt(()=>le.item),Ae=yt(()=>le.index),Oe=yt(()=>le.startDrag);var je=c(ce);zr(je,{get track(){return r(ze)},get index(){return r(Ae)},get playingIndex(){return r(S)},get playingFile(){return r(E)},get isPlaying(){return r(k)},get isEditable(){return r(he)},$$events:{play:()=>q(r(ze)),remove:()=>R(r(Ae)),startdrag(...ae){r(Oe)?.apply(this,ae)}}}),m(W,ce)}}})},Ue=A=>{var W=it(),le=Ie(W);{var ce=Ae=>{var Oe=su(),je=c(Oe);Et(je,4,()=>Array(8),qt,(ae,se)=>{var U=ru(),Ne=c(U),He=c(Ne);_t(He,{width:"100%",height:"100%",radius:"12px"});var Ge=g(Ne,2),V=c(Ge);_t(V,{width:"60%",height:"16px",radius:"4px"}),m(ae,U)}),m(Ae,Oe)},ze=Ae=>{var Oe=pu(),je=c(Oe);{var ae=U=>{var Ne=ou(),He=c(Ne),Ge=c(He),V=c(Ge),I=c(V);ee(I,()=>(L(y),_(()=>y.ADD)));var K=g(He,2);Et(K,1,i,B=>B.name,(B,Re)=>{const fe=yt(()=>(r(Re),_(()=>r(Re).name==="Favorites")));var ge=iu(),Be=c(ge),Ve=c(Be),ke=c(Ve);ee(ke,()=>(L(r(fe)),L(y),_(()=>r(fe)?y.HEART_FILLED:y.PLAYLISTS)));var We=g(Ve,2);{var Ye=ct=>{var gt=nu(),Yt=c(gt);ee(Yt,()=>(L(y),_(()=>y.DOTS))),M("click",gt,Je=>De(Je,r(Re))),m(ct,gt)};P(We,ct=>{r(fe)||ct(Ye)})}var Xe=g(We,2),qe=c(Xe),Ke=c(qe);ee(Ke,()=>(L(y),_(()=>y.PLAY)));var at=g(Be,2),dt=c(at),tt=g(at,2),nt=c(tt),lt=c(nt);Xt(()=>M("click",ge,()=>be(r(Re)))),Cn(ge,ct=>Bn?.(ct)),Xt(()=>M("longpress",ge,ct=>De(ct.detail.originalEvent,r(Re)))),Xt(()=>M("contextmenu",ge,ct=>De(ct,r(Re)))),ie((ct,gt)=>{mt(Be,ct),oe(dt,(r(Re),_(()=>r(Re).name))),oe(lt,gt)},[()=>(r(Re),_(()=>re(r(Re)))),()=>(r(Re),_(()=>r(Re).lastModified?new Date(r(Re).lastModified).toLocaleDateString():"Playlist"))]),m(B,ge)}),M("click",He,Ce),m(U,Ne)},se=U=>{var Ne=hu(),He=Ie(Ne);{var Ge=fe=>{var ge=cu(),Be=g(Ie(ge),2);Et(Be,5,()=>r(X),Ve=>Ve.name,(Ve,ke)=>{const We=yt(()=>(r(ke),_(()=>r(ke).name==="Favorites")));var Ye=lu(),Xe=c(Ye),qe=c(Xe),Ke=c(qe);ee(Ke,()=>(L(r(We)),L(y),_(()=>r(We)?y.HEART_FILLED:y.PLAYLISTS)));var at=g(qe,2),dt=c(at),tt=c(dt);ee(tt,()=>(L(y),_(()=>y.PLAY)));var nt=g(Xe,2),lt=c(nt);ie(ct=>{mt(Xe,ct),oe(lt,(r(ke),_(()=>r(ke).name)))},[()=>(r(ke),_(()=>re(r(ke))))]),M("click",Ye,()=>be(r(ke))),m(Ve,Ye)}),M("wheel",Be,Le),m(fe,ge)};P(He,fe=>{r(X),_(()=>r(X).length>0)&&fe(Ge)})}var V=g(He,2);{var I=fe=>{var ge=vu(),Be=g(Ie(ge),2);Et(Be,5,()=>r(j),Ve=>Ve.playlist.name,(Ve,ke)=>{var We=du(),Ye=c(We),Xe=c(Ye),qe=c(Xe);ee(qe,()=>(L(y),_(()=>y.PLAYLISTS)));var Ke=g(Xe,2),at=c(Ke),dt=g(Ke,2),tt=c(dt),nt=g(dt,2),lt=c(nt),ct=c(lt);ee(ct,()=>(L(y),_(()=>y.PLAY)));var gt=g(lt,2),Yt=c(gt);ee(Yt,()=>(L(y),_(()=>y.ADD)));var Je=g(Ye,2);Et(Je,5,()=>(r(ke),_(()=>r(ke).tracks)),st=>st._uid,(st,pt)=>{zr(st,{get track(){return r(pt)},get index(){return r(pt),_(()=>r(pt).playlistPos)},get playingFile(){return r(E)},get isPlaying(){return r(k)},$$events:{play:()=>q(r(pt))}})}),ie(()=>{oe(at,(r(ke),_(()=>r(ke).playlist.name))),oe(tt,(r(ke),_(()=>r(ke).tracks.length)))}),M("click",lt,na(()=>te(r(ke).tracks,r(ke).playlist.name))),M("click",gt,na(()=>ve(r(ke).tracks))),M("click",Ye,()=>be(r(ke).playlist)),m(Ve,We)}),m(fe,ge)};P(V,fe=>{r(j),_(()=>r(j).length>0)&&fe(I)})}var K=g(V,2);{var B=fe=>{var ge=uu(),Be=c(ge);ie(()=>oe(Be,`No matches found for "${r(_e)??""}"`)),m(fe,ge)},Re=fe=>{var ge=it(),Be=Ie(ge);{var Ve=ke=>{var We=fu();m(ke,We)};P(Be,ke=>{r(Z),r(j),_(()=>r(Z)&&r(j).length===0)&&ke(Ve)},!0)}m(fe,ge)};P(K,fe=>{r(Z),r(X),r(j),_(()=>!r(Z)&&r(X).length===0&&r(j).length===0)?fe(B):fe(Re,!1)})}m(U,Ne)};P(je,U=>{r(_e)?U(se,!1):U(ae)})}m(Ae,Oe)};P(le,Ae=>{h()?Ae(ce):Ae(ze,!1)},!0)}m(A,W)};P(F,A=>{r(Q)?A(me):A(Ue,!1)})}ie(()=>pe=ot(Pe,1,"view-container svelte-m7c4tz",null,pe,{scrollable:!r(Q)})),m(e,Pe),zt(),p()}var mu=w('<button class="clear-icon-btn svelte-1d3z1zm"><!></button>'),bu=w('<div class="spinner svelte-1d3z1zm"></div>'),yu=w('<div class="placeholder-state svelte-1d3z1zm"><div class="placeholder-icon svelte-1d3z1zm">ð</div> <p class="svelte-1d3z1zm">Type to search your library</p></div>'),wu=w('<div class="empty-text svelte-1d3z1zm"> </div>'),ku=w('<div slot="fallback" class="icon-fallback svelte-1d3z1zm">ð¿</div>'),xu=w('<div class="meta-tag svelte-1d3z1zm"> </div>'),Su=w('<div class="meta-tag quality svelte-1d3z1zm"> </div>'),Eu=w('<div class="music-card svelte-1d3z1zm"><div class="card-img-container svelte-1d3z1zm"><!> <div class="play-overlay svelte-1d3z1zm"><span class="overlay-icon svelte-1d3z1zm"><!></span></div></div> <div class="card-title svelte-1d3z1zm"> </div> <div class="card-sub-row svelte-1d3z1zm"><div class="card-sub text-ellipsis svelte-1d3z1zm"> </div> <!> <!></div></div>'),Tu=w('<div class="header-label section-spacing svelte-1d3z1zm">Albums</div> <div class="music-grid horizontal section-mb svelte-1d3z1zm"></div>',1),$u=w('<div class="header-label svelte-1d3z1zm">Tracks</div>'),Au=w("<!> <!>",1),Mu=w('<div slot="header" class="content-padded svelte-1d3z1zm"><!></div>'),Cu=w('<div slot="row" class="svelte-1d3z1zm"><!></div>'),Pu=w('<div class="view-container svelte-1d3z1zm"><div class="content-padded no-bottom-pad svelte-1d3z1zm"><div class="search-input-container svelte-1d3z1zm"><span class="search-icon svelte-1d3z1zm"><!></span> <input type="text" placeholder="Artists, songs, or albums" autoFocus class="svelte-1d3z1zm"/> <!> <!></div></div> <!></div>');function Lu(e,t){Lt(t,!1);const a=()=>Te(Kr,"$searchQuery",n),s=()=>Te(o,"$tracksStore",n),[n,i]=Vt(),o=Ze([]);let l=$([]),v=$(!1),d,u=$(!1);Oa(()=>{a().length>=2&&p(a())});function h(j){Kr.set(j.target.value),clearTimeout(d),d=setTimeout(()=>{p(a())},300)}function f(){Kr.set(""),o.set([]),b(l,[]),b(u,!1)}async function p(j){const z=j.trim().toLowerCase();if(z.length<2){o.set([]),b(l,[]),b(u,!1);return}b(v,!0),b(u,!0);try{const we=await Ha.search(z),H=we.map((O,q)=>({...O,_uid:O.file?`${O.file}-${q}`:`search-${q}`}));o.set(H);const xe=new Map;we.forEach(O=>{const q=O.album;if(q&&!xe.has(q)){const Le=q.toLowerCase().includes(z),te=O.artist&&O.artist.toLowerCase().includes(z);if(Le||te){let ve=String(O.year||"");ve.length>4&&(ve=ve.substring(0,4)),xe.set(q,{name:q,artist:O.artist,file:O.file,thumbHash:O.thumbHash,_uid:`alb-${q}`,year:ve,qualityBadge:O.qualityBadge})}}}),b(l,Array.from(xe.values()))}finally{b(v,!1)}}function S(j){Ys(j)}function E(j){Wt("tracks_by_album",{name:j.name,artist:j.artist})}function k(j){j.deltaY!==0&&(j.currentTarget.scrollLeft+=j.deltaY)}Dt();var x=Pu(),Q=c(x),de=c(Q),he=c(de),J=c(he);ee(J,()=>y.SEARCH);var ye=g(he,2),_e=g(ye,2);{var Z=j=>{var z=mu(),we=c(z);ee(we,()=>y.CLOSE),M("click",z,f),m(j,z)};P(_e,j=>{a().length>0&&j(Z)})}var Me=g(_e,2);{var N=j=>{var z=bu();m(j,z)};P(Me,j=>{r(v)&&j(N)})}var X=g(Q,2);vs(X,{get itemsStore(){return o},isEditMode:!1,isLoading:!1,emptyText:"",$$slots:{header:(j,z)=>{var we=Mu(),H=c(we);{var xe=q=>{var Le=yu();m(q,Le)},O=q=>{var Le=it(),te=Ie(Le);{var ve=be=>{var Ce=wu(),De=c(Ce);ie(()=>oe(De,`No results found for "${a()??""}"`)),m(be,Ce)},Se=be=>{var Ce=Au(),De=Ie(Ce);{var C=R=>{var D=Tu(),re=g(Ie(D),2);Et(re,5,()=>r(l),G=>G._uid,(G,Pe)=>{var pe=Eu(),T=c(pe),Y=c(T);{let se=yt(()=>rs(r(Pe),"md"));ra(Y,{get src(){return r(se)},get alt(){return r(Pe).name},radius:"8px",$$slots:{fallback:(U,Ne)=>{var He=ku();m(U,He)}}})}var F=g(Y,2),me=c(F),Ue=c(me);ee(Ue,()=>y.PLAY);var A=g(T,2),W=c(A),le=g(A,2),ce=c(le),ze=c(ce),Ae=g(ce,2);{var Oe=se=>{var U=xu(),Ne=c(U);ie(()=>oe(Ne,r(Pe).year)),m(se,U)};P(Ae,se=>{r(Pe).year&&r(Pe).year!=="0"&&r(Pe).year!==0&&se(Oe)})}var je=g(Ae,2);{var ae=se=>{var U=Su(),Ne=c(U);ie(He=>oe(Ne,He),[()=>r(Pe).qualityBadge.split(" ")[0]]),m(se,U)};P(je,se=>{r(Pe).qualityBadge&&se(ae)})}ie(()=>{Jt(A,"title",r(Pe).name),oe(W,r(Pe).name),oe(ze,r(Pe).artist)}),M("click",pe,()=>E(r(Pe))),m(G,pe)}),M("wheel",re,k),m(R,D)};P(De,R=>{r(l).length>0&&R(C)})}var ue=g(De,2);{var Fe=R=>{var D=$u();m(R,D)};P(ue,R=>{s().length>0&&R(Fe)})}m(be,Ce)};P(te,be=>{!r(v)&&s().length===0&&r(l).length===0&&r(u)?be(ve):be(Se,!1)},!0)}m(q,Le)};P(H,q=>{a().length<2?q(xe):q(O,!1)})}m(j,we)},row:(j,z)=>{var we=Cu();const H=yt(()=>z.item),xe=yt(()=>z.index);var O=c(we);zr(O,{get track(){return r(H)},get index(){return r(xe)},isEditable:!1,$$events:{play:()=>S(r(H))}}),m(j,we)}}}),ie(()=>po(ye,a())),M("input",ye,h),m(e,x),zt(),i()}var zu=w('<span class="status-badge connected svelte-1j67jqh">Connected</span>'),Ru=w('<span class="status-badge disconnected svelte-1j67jqh">Not Connected</span>'),Iu=w('<div class="separator svelte-1j67jqh"></div> <div class="row space-between svelte-1j67jqh"><label class="svelte-1j67jqh">Connection Status</label> <!></div> <div class="separator svelte-1j67jqh"></div> <div class="row svelte-1j67jqh"><label for="yandex-token" class="svelte-1j67jqh">OAuth Token</label> <div class="input-group svelte-1j67jqh"><input id="yandex-token" type="password" placeholder="Paste token here..." class="svelte-1j67jqh"/> <button class="btn-primary small svelte-1j67jqh"> </button></div></div> <p class="hint svelte-1j67jqh">Token is stored securely on the device.</p>',1),ju=w('<option class="svelte-1j67jqh"> </option>'),Nu=w('<div class="separator svelte-1j67jqh"></div> <div class="row space-between svelte-1j67jqh"><label for="alarm-time" class="svelte-1j67jqh">Wake up time</label> <input id="alarm-time" type="time" class="svelte-1j67jqh"/></div> <div class="separator svelte-1j67jqh"></div> <div class="row space-between svelte-1j67jqh"><label for="alarm-pl" class="svelte-1j67jqh">Playlist</label> <div class="select-wrapper svelte-1j67jqh"><select id="alarm-pl" class="svelte-1j67jqh"></select> <div class="select-arrow svelte-1j67jqh"><!></div></div></div>',1),Du=w('<div class="view-container scrollable svelte-1j67jqh"><div class="content-padded svelte-1j67jqh"><h1 class="header-title big svelte-1j67jqh">Settings</h1> <div class="section svelte-1j67jqh"><div class="section-header svelte-1j67jqh"><span class="svelte-1j67jqh">Services</span></div> <div class="card svelte-1j67jqh"><div class="row space-between svelte-1j67jqh"><label class="svelte-1j67jqh">Enable Yandex Music (Beta)</label> <button><div class="toggle-circle svelte-1j67jqh"></div></button></div> <!></div></div> <div class="section svelte-1j67jqh"><div class="section-header svelte-1j67jqh"><span class="svelte-1j67jqh">Alarm Clock</span></div> <div class="card svelte-1j67jqh"><div class="row space-between svelte-1j67jqh"><span class="label-text svelte-1j67jqh">Current Player Time</span> <span class="mono-badge svelte-1j67jqh"> </span></div> <div class="separator svelte-1j67jqh"></div> <div class="row space-between svelte-1j67jqh"><label class="svelte-1j67jqh">Enable Alarm</label> <button><div class="toggle-circle svelte-1j67jqh"></div></button></div> <!></div></div> <div class="section svelte-1j67jqh"><div class="section-header svelte-1j67jqh"><span class="svelte-1j67jqh">Appearance</span></div> <div class="card clickable svelte-1j67jqh"><div class="row space-between svelte-1j67jqh"><span class="svelte-1j67jqh">Interface Theme</span> <div class="row-gap svelte-1j67jqh"><span class="value svelte-1j67jqh"> </span> <span class="chevron svelte-1j67jqh"><!></span></div></div></div></div> <div class="section svelte-1j67jqh"><div class="section-header svelte-1j67jqh"><span class="svelte-1j67jqh">Connection</span></div> <div class="card svelte-1j67jqh"><div class="row svelte-1j67jqh"><label for="ip" class="svelte-1j67jqh">Moode Device IP</label> <div class="input-group svelte-1j67jqh"><input id="ip" type="text" placeholder="192.168.x.x" class="svelte-1j67jqh"/> <button class="btn-primary small svelte-1j67jqh">Save</button></div></div> <p class="hint svelte-1j67jqh"> </p></div></div> <div class="section svelte-1j67jqh"><div class="section-header svelte-1j67jqh"><span class="svelte-1j67jqh">About</span></div> <div class="card svelte-1j67jqh"><div class="info-row svelte-1j67jqh"><span class="svelte-1j67jqh">Version</span> <span class="mono svelte-1j67jqh"> </span></div> <div class="separator svelte-1j67jqh"></div> <div class="info-row svelte-1j67jqh"><span class="svelte-1j67jqh">Build Date</span> <span class="mono small svelte-1j67jqh"> </span></div></div></div></div></div>');function Ou(e,t){Lt(t,!1);const a=()=>Te($s,"$currentTheme",d),s=()=>Te(yn,"$isAlarmEnabled",d),n=()=>Te(bn,"$alarmTime",d),i=()=>Te(wn,"$alarmPlaylist",d),o=()=>Te(ss,"$isYandexEnabled",d),l=()=>Te(Ga,"$yandexAuthStatus",d),v=()=>Te(Fs,"$playlists",d),[d,u]=Vt(),h=$();let f=$(er.MOODE_IP),p=$("--:--"),S,E=$(""),k=$(!1);function x(){er.setMoodeIp(r(f)),$e("IP Saved. Reloading...","success"),setTimeout(()=>location.reload(),1e3)}const Q="0.1.0",de="2026-01-20T08:49:37.798Z",he=new Date(de).toLocaleString();function J(){const V=un.map(I=>({label:I.label,value:I.id}));ya({title:"Select Theme",message:"Choose your preferred interface style:",type:"select",inputValue:a(),options:V,onConfirm:I=>{$s.set(I),$e("Theme updated","success")}})}async function ye(){const V=await wa.getServerTime();V&&b(p,V)}Oa(()=>{ye(),S=setInterval(ye,6e4),wa.checkYandexAuth()}),zn(()=>{S&&clearInterval(S)});async function _e(){try{await wa.setAlarm(s(),n(),i()),s()&&$e(`Alarm set for ${n()}`,"success")}catch{$e("Failed to sync alarm settings","error")}}function Z(){yn.update(V=>!V),_e()}function Me(){ss.update(V=>!V)}async function N(){if(!r(E))return;b(k,!0);const V=await wa.saveYandexToken(r(E));b(k,!1),V&&b(E,"")}ne(()=>a(),()=>{b(h,un.find(V=>V.id===a())?.label||"Default")}),ea(),Dt();var X=Du(),j=c(X),z=g(c(j),2),we=g(c(z),2),H=c(we),xe=g(c(H),2);let O;var q=g(H,2);{var Le=V=>{var I=Iu(),K=Ie(I),B=g(K,2),Re=g(c(B),2);{var fe=Ke=>{var at=zu();m(Ke,at)},ge=Ke=>{var at=Ru();m(Ke,at)};P(Re,Ke=>{l()?Ke(fe):Ke(ge,!1)})}var Be=g(B,2),Ve=g(Be,2),ke=g(c(Ve),2),We=c(ke),Ye=g(We,2),Xe=c(Ye),qe=g(Ve,2);ie(()=>{Ye.disabled=r(k),oe(Xe,r(k)?"Checking...":"Save")}),kt(1,K,()=>At),kt(1,B,()=>At),kt(1,Be,()=>At),nr(We,()=>r(E),Ke=>b(E,Ke)),M("click",Ye,N),kt(1,Ve,()=>At),kt(1,qe,()=>At),m(V,I)};P(q,V=>{o()&&V(Le)})}var te=g(z,2),ve=g(c(te),2),Se=c(ve),be=g(c(Se),2),Ce=c(be),De=g(Se,4),C=g(c(De),2);let ue;var Fe=g(De,2);{var R=V=>{var I=Nu(),K=Ie(I),B=g(K,2),Re=g(c(B),2),fe=g(B,2),ge=g(fe,2),Be=g(c(ge),2),Ve=c(Be);ie(()=>{i(),Dl(()=>{v()})}),Et(Ve,5,v,qt,(Ye,Xe)=>{var qe=ju(),Ke=c(qe),at={};ie(()=>{oe(Ke,(r(Xe),_(()=>r(Xe).name))),at!==(at=(r(Xe),_(()=>r(Xe).name)))&&(qe.value=(qe.__value=(r(Xe),_(()=>r(Xe).name)))??"")}),m(Ye,qe)});var ke=g(Ve,2),We=c(ke);ee(We,()=>(L(y),_(()=>y.CHEVRON_DOWN))),kt(1,K,()=>At),nr(Re,n,Ye=>oi(bn,Ye)),M("change",Re,_e),kt(1,B,()=>At),kt(1,fe,()=>At),ic(Ve,i,Ye=>oi(wn,Ye)),M("change",Ve,_e),kt(1,ge,()=>At),m(V,I)};P(Fe,V=>{s()&&V(R)})}var D=g(te,2),re=g(c(D),2),G=c(re),Pe=g(c(G),2),pe=c(Pe),T=c(pe),Y=g(pe,2),F=c(Y);ee(F,()=>(L(y),_(()=>y.NEXT)));var me=g(D,2),Ue=g(c(me),2),A=c(Ue),W=g(c(A),2),le=c(W),ce=g(le,2),ze=g(A,2),Ae=c(ze),Oe=g(me,2),je=g(c(Oe),2),ae=c(je),se=g(c(ae),2),U=c(se),Ne=g(ae,4),He=g(c(Ne),2),Ge=c(He);ie(()=>{O=ot(xe,1,"toggle-btn svelte-1j67jqh",null,O,{active:o()}),oe(Ce,r(p)),ue=ot(C,1,"toggle-btn svelte-1j67jqh",null,ue,{active:s()}),oe(T,r(h)),oe(Ae,`Current: ${L(er),_(()=>er.MOODE_IP)??""}`),oe(U,Q),oe(Ge,he)}),M("click",xe,Me),M("click",C,Z),M("click",re,J),nr(le,()=>r(f),V=>b(f,V)),M("click",ce,x),kt(1,X,()=>At,()=>({duration:200})),m(e,X),zt(),u()}var Fu=w('<span class="daemon-active svelte-185fgrr"> </span>'),qu=w('<span class="meta-tag svelte-185fgrr"> </span>'),Bu=w('<span class="meta-tag active-badge svelte-185fgrr">Daemon Active</span>'),Yu=w('<button class="btn-primary svelte-185fgrr">Stop Stream</button>'),Uu=w('<button class="btn-secondary svelte-185fgrr" title="Clear Queue">Clear</button>'),Hu=w('<div slot="header" class="content-padded svelte-185fgrr"><div class="view-header svelte-185fgrr"><div class="header-art svelte-185fgrr" style="background: var(--c-surface-active);"><div class="header-icon-wrap svelte-185fgrr"><!></div></div> <div class="header-info svelte-185fgrr"><div class="header-text-group svelte-185fgrr"><div class="header-label svelte-185fgrr">Now Playing</div> <h1 class="header-title svelte-185fgrr"><!></h1> <div class="meta-badges svelte-185fgrr"><span class="meta-tag svelte-185fgrr"> </span> <!> <!></div></div> <div class="header-actions svelte-185fgrr"><!> <button class="btn-action svelte-185fgrr" title="Save Queue"><!></button> <button><!></button></div></div></div></div>'),Vu=w('<div slot="row" class="svelte-185fgrr"><!></div>'),Wu=w('<div class="view-container svelte-185fgrr"><!></div>');function Qu(e,t){Lt(t,!1);const a=()=>Te($t,"$status",l),s=()=>Te(Mt,"$isQueueLocked",l),n=()=>Te(Bt,"$currentSong",l),i=()=>Te(Qa,"$queue",l),o=()=>Te(bi,"$yandexState",l),[l,v]=Vt(),d=$(),u=$(),h=$(),f=$();let p=$(!1),S=$(""),E,k=$(-1);async function x(){try{const X=await fetch("/wave-yandex-api.php?action=get_state");if(X.ok){const j=await X.json();bi.set(j)}}catch{}}async function Q(){try{await fetch("/wave-yandex-api.php?action=stop_daemon"),$e("Daemon stopped (Auto-fill disabled)","info"),x()}catch{$e("Failed to stop daemon","error")}}Oa(()=>{x(),E=setInterval(x,5e3)}),zn(()=>{E&&clearInterval(E)});function de(){b(p,!r(p))}function he(X){r(p)||zs(`play ${X}`)}function J(X){X<r(k)&&b(k,r(k)-1),fa.removeFromQueue(X)}async function ye(){ya({title:"Save Playlist",message:"Enter a name for this playlist:",type:"prompt",placeholder:"Playlist Name",confirmLabel:"Save",onConfirm:async X=>{X&&X.trim().length>0&&(await fa.saveQueue(X),Fn())}})}function _e(){i().length!==0&&ya({title:"Clear Queue",message:"Are you sure you want to clear the queue?",confirmLabel:"Clear All",type:"confirm",onConfirm:async()=>{o().active&&await Q(),Qa.set([]),Bt.set({title:"Not Playing",artist:"",album:"",file:"",stationName:null,id:null,pos:null}),$t.update(X=>({...X,state:"stop",song:-1,songid:-1,elapsed:0})),await zs("clear")}})}function Z(X,j){let z=r(k);X===z?z=j:X<z&&j>=z?z-=1:X>z&&j<=z&&(z+=1),b(k,z),fa.moveTrack(X,j)}ne(()=>a(),()=>{b(d,Number(a().song))}),ne(()=>(s(),r(d)),()=>{s()||b(k,r(d))}),ne(()=>r(k),()=>{b(u,r(k))}),ne(()=>n(),()=>{b(h,n().file)}),ne(()=>a(),()=>{b(f,a().state==="play")}),ne(()=>i(),()=>{if(i().length>=0){const X=i().reduce((j,z)=>j+(parseFloat(z.time)||0),0);if(X>0){const j=Math.floor(X/3600),z=Math.floor(X%3600/60);b(S,j>0?`${j} hr ${z} min`:`${z} min`)}else b(S,"")}}),ea(),Dt();var Me=Wu(),N=c(Me);vs(N,{get itemsStore(){return Qa},get isEditMode(){return r(p)},emptyText:"Queue is empty",onMoveItem:Z,$$slots:{header:(X,j)=>{var z=Hu(),we=c(z),H=c(we),xe=c(H),O=c(xe);ee(O,()=>(L(y),_(()=>y.MENU)));var q=g(H,2),Le=c(q),te=g(c(Le),2),ve=c(te);{var Se=A=>{var W=Fu(),le=c(W);ie(()=>oe(le,(o(),_(()=>o().context_name||"Yandex Stream")))),m(A,W)},be=A=>{var W=$a("Current Queue");m(A,W)};P(ve,A=>{o(),_(()=>o()&&o().active)?A(Se):A(be,!1)})}var Ce=g(te,2),De=c(Ce),C=c(De),ue=g(De,2);{var Fe=A=>{var W=qu(),le=c(W);ie(()=>oe(le,r(S))),m(A,W)};P(ue,A=>{r(S)&&A(Fe)})}var R=g(ue,2);{var D=A=>{var W=Bu();m(A,W)};P(R,A=>{o(),_(()=>o()&&o().active)&&A(D)})}var re=g(Le,2),G=c(re);{var Pe=A=>{var W=Yu();M("click",W,Q),m(A,W)},pe=A=>{var W=Uu();ie(()=>W.disabled=(i(),_(()=>i().length===0))),M("click",W,_e),m(A,W)};P(G,A=>{o(),_(()=>o()&&o().active)?A(Pe):A(pe,!1)})}var T=g(G,2),Y=c(T);ee(Y,()=>(L(y),_(()=>y.SAVE)));var F=g(T,2);let me;var Ue=c(F);ee(Ue,()=>(r(p),L(y),_(()=>r(p)?y.ACCEPT:y.EDIT))),ie(()=>{oe(C,`${i(),_(()=>i().length)??""} tracks`),T.disabled=(i(),_(()=>i().length===0)),me=ot(F,1,"btn-action svelte-185fgrr",null,me,{active:r(p)}),Jt(F,"title",r(p)?"Finish Editing":"Edit Queue"),F.disabled=(i(),_(()=>i().length===0))}),M("click",T,ye),M("click",F,de),m(X,z)},row:(X,j)=>{var z=Vu();const we=yt(()=>j.item),H=yt(()=>j.index),xe=yt(()=>j.startDrag);var O=c(z);zr(O,{get track(){return r(we)},get index(){return r(H)},get playingIndex(){return r(u)},get playingFile(){return r(h)},get isPlaying(){return r(f)},get isEditable(){return r(p)},$$events:{play:()=>he(r(H)),remove:()=>J(r(H)),startdrag(...q){r(xe)?.apply(this,q)}}}),m(X,z)}}}),m(e,Me),zt(),v()}var Xu=w('<div class="token-alert content-padded svelte-4g0hpd"><h3 class="svelte-4g0hpd">Yandex Music Not Connected</h3> <p class="svelte-4g0hpd">Please go to Settings and connect your account.</p></div>'),Ku=w('<button class="clear-btn svelte-4g0hpd"><!></button>'),Gu=w('<div class="content-padded no-bottom-pad svelte-4g0hpd"><div class="search-input-container svelte-4g0hpd"><span class="search-icon svelte-4g0hpd"><!></span> <input type="text" placeholder="Search Yandex Music..." class="svelte-4g0hpd"/> <!></div></div>'),Zu=w('<div class="music-card svelte-4g0hpd"><!> <!></div>'),Ju=w('<div class="music-card svelte-4g0hpd"><!> <!></div>'),ef=w('<h2 class="header-label svelte-4g0hpd"><!></h2> <div class="music-grid horizontal section-mb svelte-4g0hpd"></div> <h2 class="header-label svelte-4g0hpd"><!></h2> <div class="music-grid horizontal section-mb svelte-4g0hpd"></div>',1),tf=w('<div class="icon-wrap pulse-anim svelte-4g0hpd"><!></div>'),af=w('<div class="icon-wrap svelte-4g0hpd"><!></div>'),rf=w('<div class="music-card svelte-4g0hpd"><div><!> <div class="play-overlay svelte-4g0hpd"><span class="overlay-icon svelte-4g0hpd"><!></span></div></div> <div class="card-title center svelte-4g0hpd"> </div></div>'),sf=w('<div class="icon-wrap svelte-4g0hpd"><!></div>'),nf=w('<div slot="fallback" class="icon-fallback svelte-4g0hpd"><!></div>'),of=w('<div class="card-sub svelte-4g0hpd"> </div>'),lf=w('<div class="music-card svelte-4g0hpd"><div class="card-img-container svelte-4g0hpd"><!> <div class="play-overlay svelte-4g0hpd"><span class="overlay-icon svelte-4g0hpd"><!></span></div></div> <div class="card-title svelte-4g0hpd"> </div> <!></div>'),cf=w('<h2 class="header-label svelte-4g0hpd">Collection & Mixes</h2> <div class="music-grid horizontal section-mb svelte-4g0hpd"></div>',1),df=w('<h2 class="header-label svelte-4g0hpd">Vibes</h2> <div class="music-grid horizontal section-mb svelte-4g0hpd"></div> <!>',1),vf=w('<div class="content-padded svelte-4g0hpd"><!></div>'),uf=w('<div class="view-header svelte-4g0hpd"><div class="header-art svelte-4g0hpd"><!></div> <div class="header-info svelte-4g0hpd"><!> <!> <!> <div class="header-actions svelte-4g0hpd"><!> <!></div></div></div>'),ff=w('<div class="icon-wrap svelte-4g0hpd"><!></div>'),hf=w('<div slot="fallback" class="icon-fallback svelte-4g0hpd"><!></div>'),pf=w('<h2 class="header-sub-text svelte-4g0hpd"> </h2>'),gf=w(`<button class="btn-secondary svelte-4g0hpd"><span class="icon-inline svelte-4g0hpd"><!></span> Artist
                        Vibe</button>`),_f=w('<button class="btn-secondary svelte-4g0hpd"><span class="icon-inline svelte-4g0hpd"><!></span> Vibe</button>'),mf=w('<button class="btn-secondary svelte-4g0hpd">To Queue</button>'),bf=w('<div class="view-header svelte-4g0hpd"><div class="header-art svelte-4g0hpd"><!></div> <div class="header-info svelte-4g0hpd"><div class="header-text-group svelte-4g0hpd"><div class="header-label svelte-4g0hpd"> </div> <h1 class="header-title svelte-4g0hpd"> </h1> <!></div> <div class="header-actions svelte-4g0hpd"><button class="btn-primary svelte-4g0hpd">Play All</button> <!></div></div></div>'),yf=w('<div class="music-card svelte-4g0hpd"><div class="card-img-container svelte-4g0hpd"><!> <div class="play-overlay svelte-4g0hpd"><span class="overlay-icon svelte-4g0hpd"><!></span></div></div> <div class="card-title svelte-4g0hpd"> </div> <div class="card-sub svelte-4g0hpd"> </div></div>'),wf=w('<h3 class="header-label svelte-4g0hpd" style="margin-top: 20px;">Albums</h3> <div class="music-grid horizontal section-mb svelte-4g0hpd"></div> <h3 class="header-label svelte-4g0hpd">Popular Tracks</h3>',1),kf=w('<div class="music-card svelte-4g0hpd"><div class="card-img-container svelte-4g0hpd"><!></div> <div class="card-title center svelte-4g0hpd"> </div></div>'),xf=w('<h3 class="header-label svelte-4g0hpd">Artists</h3> <div class="music-grid horizontal section-mb svelte-4g0hpd"></div>',1),Sf=w('<div class="music-card svelte-4g0hpd"><div class="card-img-container svelte-4g0hpd"><!></div> <div class="card-title svelte-4g0hpd"> </div> <div class="card-sub svelte-4g0hpd"> </div></div>'),Ef=w('<h3 class="header-label svelte-4g0hpd">Albums</h3> <div class="music-grid horizontal section-mb svelte-4g0hpd"></div>',1),Tf=w("<!> <!>",1),$f=w('<div slot="header" class="content-padded svelte-4g0hpd"><!> <!> <!></div>'),Af=w('<div slot="row" class="svelte-4g0hpd"><!></div>'),Mf=w('<div class="spinner svelte-4g0hpd"></div>'),Cf=w('<div slot="footer" class="loading-footer svelte-4g0hpd"><!> <div style="height:20px;" class="svelte-4g0hpd"></div></div>'),Pf=w("<!> <!> <!>",1),Lf=w('<div class="view-container scrollable relative-parent svelte-4g0hpd"><!></div>');function zf(e,t){Lt(t,!1);const a=()=>Te(xt,"$navigationStack",v),s=()=>Te(Ga,"$yandexAuthStatus",v),n=()=>Te(mi,"$yandexSearchTrigger",v),i=()=>Te(ia,"$yandexFavorites",v),o=()=>Te(p,"$tracksStore",v),l=()=>Te(S,"$albumsStore",v),[v,d]=Vt(),u=$(),h=$(),f=$(),p=Ze([]),S=Ze([]);let E=$([]),k=$([]),x=$(!1),Q=$(!1),de={uid:null,kind:null,offset:0,type:"playlist"},he=!0,J=$(),ye=$(),_e=$(""),Z="all",Me=$({tracks:[],albums:[],artists:[]}),N,X=$("");function j(T){return!T||T.view==="root"?"dashboard":T.view.startsWith("yandex_")?T.view.replace("yandex_",""):"dashboard"}async function z(T,Y){if(T!=="dashboard"&&(T!=="search"&&p.set([]),S.set([])),T==="dashboard")b(_e,""),r(E).length===0&&await xe();else if(T==="search"){const F=Y?.query||"";b(_e,F),F&&await C()}else T==="playlist"?await q(Y):T==="artist_details"?await Le(Y):T==="album_details"&&await te(Y)}Oa(()=>{r(f)&&r(E).length===0&&(xe(),H()),we()});function we(){r(ye)&&r(ye).disconnect(),b(ye,new IntersectionObserver(T=>{T[0].isIntersecting&&!r(x)&&!r(Q)&&he&&["playlist","album_details","artist_details"].includes(r(h))&&Ce()},{rootMargin:"200px"}))}async function H(){try{const T=await bt.getFavoritesIds();T&&T.ids&&ia.set(new Set(T.ids.map(String)))}catch(T){console.error("Sync likes failed",T)}}async function xe(){b(x,!0);try{const[T,Y,F]=await Promise.all([bt.getUserPlaylists(),bt.getLanding(),bt.getStationsDashboard()]),me={title:"My Vibe",kind:"my_vibe",cover:null,isStation:!0,bgColor:"linear-gradient(135deg, #FFCC00, #FF3333)"},Ue=F.stations||[];b(E,[me,...Ue]);const A=(T||[]).map(W=>{if(W.kind==="favorites"){const le=i().size>0?i().size:W.trackCount||"â¥";return{...W,trackCount:le}}return W});b(k,[...Y.personal||[],...A])}catch(T){console.error("[YandexView] Dashboard Error:",T),$e("Failed to load dashboard","error")}finally{b(x,!1)}}function O(T){if(T.kind==="my_vibe"){$e("Starting My Vibe...","info"),bt.playRadio();return}if(T.kind==="station"){$e(`Starting vibe: ${T.title}`,"info"),bt.playStation(T.id);return}Wt("yandex_playlist",T)}async function q(T){b(x,!0),he=!0;let Y=T.uid,F=T.kind;if(!Y&&T.id&&typeof T.id=="string"&&T.id.includes(":")){const me=T.id.split(":");Y=me[0],F=me[1]}else T.kind==="favorites"&&(F="favorites");de={uid:Y,kind:F,offset:0,type:"playlist"};try{await be(Y,F,0)}finally{b(x,!1)}}async function Le(T){b(x,!0),he=!1;try{const Y=await bt.getArtistDetails(T.id),F=et(xt),me=F[F.length-1];me.view==="yandex_artist_details"&&(me.data={...me.data,name:Y.artist.name,title:Y.artist.name,description:Y.artist.description,cover:Y.cover},xt.set(F)),p.set(Y.tracks||[]),S.set(Y.albums||[])}finally{b(x,!1)}}async function te(T){b(x,!0),he=!1;try{const Y=await bt.getAlbumDetails(T.id),F=et(xt),me=F[F.length-1];me.view==="yandex_album_details"&&(me.data={...me.data,name:Y.title,title:Y.title,artist:Y.artist,cover:Y.cover},xt.set(F)),p.set(Y.tracks||[])}finally{b(x,!1)}}function ve(T){Wt("yandex_artist_details",T)}function Se(T){Wt("yandex_album_details",T)}async function be(T,Y,F){const me=await bt.getPlaylistTracks(T,Y,F);return me&&me.tracks?(F===0?p.set(me.tracks):p.update(Ue=>[...Ue,...me.tracks]),me.tracks.length===0&&(he=!1),me.tracks.length):(he=!1,0)}async function Ce(){if(!(r(Q)||!he)){b(Q,!0);try{de.offset+=50,de.type==="playlist"&&await be(de.uid,de.kind,de.offset)===0&&(he=!1)}finally{b(Q,!1)}}}function De(T){const Y=T.target.value;b(_e,Y),clearTimeout(N),Y.length>=2&&(N=setTimeout(()=>{r(h)!=="search"?Wt("yandex_search",{query:Y}):C()},600))}async function C(){if(r(_e)){b(x,!0),b(Me,{tracks:[],albums:[],artists:[]});try{const T=await bt.search(r(_e));T&&(b(Me,T),(Z==="track"||Z==="all")&&p.set(T.tracks||[]))}finally{b(x,!1)}}}async function ue(){const T=et(p);if(!T||T.length===0){$e("No tracks to play","error");return}let Y="Yandex Playlist";r(u)?.data&&(Y=r(u).data.title||r(u).data.name||Y,r(h)==="artist_details"&&(Y=`Artist: ${Y}`),r(h)==="album_details"&&(Y=`Album: ${Y}`)),$e(`Starting ${Y}...`,"info");try{(await bt.playPlaylist(T,Y)).status==="ok"?$e("Playing...","success"):$e("Error starting playback","error")}catch(F){console.error(F),$e("Network error","error")}}async function Fe(){const T=et(p);if(!(!T||T.length===0)){$e(`Adding ${T.length} tracks...`,"info");try{(await bt.addTracksToQueue(T)).status==="ok"&&$e("Added to queue","success")}catch(Y){console.error(Y),$e("Failed to add","error")}}}async function R(T){const Y=r(u)?.data;if(!(!Y||!Y.id)){$e(`Starting ${T} Vibe...`,"info");try{await bt.playRadio(Y.id,T)}catch{$e("Failed to start Vibe","error")}}}function D(T){T.deltaY!==0&&(T.currentTarget.scrollLeft+=T.deltaY)}ne(()=>a(),()=>{b(u,a()[a().length-1])}),ne(()=>r(u),()=>{b(h,j(r(u)))}),ne(()=>s(),()=>{b(f,s())}),ne(()=>(r(u),r(X)),()=>{const T=j(r(u)),Y=T+JSON.stringify(r(u)?.data||{});Y!==r(X)&&(b(X,Y),z(T,r(u)?.data))}),ne(()=>(n(),Wt),()=>{if(n()){const T=n();mi.set(null),Wt("yandex_search",{query:T})}}),ne(()=>(r(J),r(ye)),()=>{r(J)&&r(ye)&&r(ye).observe(r(J))}),ne(()=>(r(k),i()),()=>{r(k).length>0&&b(k,r(k).map(T=>T.kind==="favorites"&&i().size>0?{...T,trackCount:i().size}:T))}),ea(),Dt();var re=Lf(),G=c(re);{var Pe=T=>{var Y=Xu();m(T,Y)},pe=T=>{var Y=Pf(),F=Ie(Y);{var me=ce=>{var ze=Gu(),Ae=c(ze),Oe=c(Ae),je=c(Oe);ee(je,()=>(L(y),_(()=>y.SEARCH)));var ae=g(Oe,2),se=g(ae,2);{var U=Ne=>{var He=Ku(),Ge=c(He);ee(Ge,()=>(L(y),_(()=>y.CLOSE))),M("click",He,()=>{b(_e,""),r(h)==="search"&&window.history.back()}),m(Ne,He)};P(se,Ne=>{r(_e)&&Ne(U)})}nr(ae,()=>r(_e),Ne=>b(_e,Ne)),M("input",ae,De),m(ce,ze)};P(F,ce=>{(r(h)==="dashboard"||r(h)==="search")&&ce(me)})}var Ue=g(F,2);{var A=ce=>{var ze=vf(),Ae=c(ze);{var Oe=ae=>{var se=ef(),U=Ie(se),Ne=c(U);_t(Ne,{width:"100px",height:"20px"});var He=g(U,2);Et(He,4,()=>Array(4),qt,(K,B)=>{var Re=Zu(),fe=c(Re);_t(fe,{width:"100%",style:"aspect-ratio: 1; border-radius: 8px; margin-bottom: 8px;"});var ge=g(fe,2);_t(ge,{width:"80%",height:"16px"}),m(K,Re)});var Ge=g(He,2),V=c(Ge);_t(V,{width:"150px",height:"20px"});var I=g(Ge,2);Et(I,4,()=>Array(4),qt,(K,B)=>{var Re=Ju(),fe=c(Re);_t(fe,{width:"100%",style:"aspect-ratio: 1; border-radius: 8px; margin-bottom: 8px;"});var ge=g(fe,2);_t(ge,{width:"80%",height:"16px"}),m(K,Re)}),m(ae,se)},je=ae=>{var se=df(),U=g(Ie(se),2);Et(U,5,()=>r(E),qt,(Ge,V)=>{var I=rf(),K=c(I);let B;var Re=c(K);{var fe=Xe=>{var qe=tf(),Ke=c(qe);ee(Ke,()=>(L(y),_(()=>y.RADIO))),m(Xe,qe)},ge=Xe=>{var qe=it(),Ke=Ie(qe);{var at=tt=>{ra(tt,{get src(){return r(V),_(()=>r(V).cover)},get alt(){return r(V),_(()=>r(V).title)},radius:"8px"})},dt=tt=>{var nt=af(),lt=c(nt);ee(lt,()=>(L(y),_(()=>y.RADIO))),m(tt,nt)};P(Ke,tt=>{r(V),_(()=>r(V).cover)?tt(at):tt(dt,!1)},!0)}m(Xe,qe)};P(Re,Xe=>{r(V),_(()=>r(V).kind==="my_vibe")?Xe(fe):Xe(ge,!1)})}var Be=g(Re,2),Ve=c(Be),ke=c(Ve);ee(ke,()=>(L(y),_(()=>y.PLAY)));var We=g(K,2),Ye=c(We);ie(()=>{B=ot(K,1,"card-img-container svelte-4g0hpd",null,B,{"is-vibe":r(V).kind==="my_vibe"}),mt(K,(r(V),_(()=>r(V).bgColor&&!r(V).is_vibe?`background: ${r(V).bgColor}`:""))),oe(Ye,(r(V),_(()=>r(V).title)))}),M("click",I,()=>O(r(V))),m(Ge,I)});var Ne=g(U,2);{var He=Ge=>{var V=cf(),I=g(Ie(V),2);Et(I,5,()=>r(k),qt,(K,B)=>{const Re=yt(()=>(r(B),_(()=>r(B).kind==="favorites")));var fe=lf(),ge=c(fe),Be=c(ge);{var Ve=tt=>{var nt=sf(),lt=c(nt);ee(lt,()=>(L(y),_(()=>y.HEART_FILLED))),m(tt,nt)},ke=tt=>{ra(tt,{get src(){return r(B),_(()=>r(B).cover)},get alt(){return r(B),_(()=>r(B).title)},radius:"8px",$$slots:{fallback:(nt,lt)=>{var ct=nf(),gt=c(ct);ee(gt,()=>(L(y),_(()=>y.PLAYLISTS))),m(nt,ct)}}})};P(Be,tt=>{r(Re)?tt(Ve):tt(ke,!1)})}var We=g(Be,2),Ye=c(We),Xe=c(Ye);ee(Xe,()=>(L(y),_(()=>y.PLAY)));var qe=g(ge,2),Ke=c(qe),at=g(qe,2);{var dt=tt=>{var nt=of(),lt=c(nt);ie(()=>oe(lt,`${r(B),_(()=>r(B).trackCount)??""} tracks`)),m(tt,nt)};P(at,tt=>{r(B),_(()=>r(B).trackCount)&&tt(dt)})}ie(()=>{mt(ge,r(Re)?"background: linear-gradient(135deg, #fa2d48, #c01c33);":""),oe(Ke,(r(B),_(()=>r(B).title)))}),M("click",fe,()=>O(r(B))),m(K,fe)}),M("wheel",I,D),m(Ge,V)};P(Ne,Ge=>{r(k),_(()=>r(k).length>0)&&Ge(He)})}M("wheel",U,D),m(ae,se)};P(Ae,ae=>{r(x),r(E),_(()=>r(x)&&r(E).length===0)?ae(Oe):ae(je,!1)})}kt(1,ze,()=>At),m(ce,ze)};P(Ue,ce=>{r(h)==="dashboard"&&ce(A)})}var W=g(Ue,2);{var le=ce=>{vs(ce,{get itemsStore(){return p},get isLoading(){return r(x)},isEditMode:!1,emptyText:"No tracks found",$$slots:{header:(ze,Ae)=>{var Oe=$f(),je=c(Oe);{var ae=Ge=>{const V=yt(()=>(r(u),_(()=>r(u).data)));var I=it(),K=Ie(I);{var B=fe=>{var ge=uf(),Be=c(ge),Ve=c(Be);_t(Ve,{width:"100%",height:"100%",radius:"8px"});var ke=g(Be,2),We=c(ke);_t(We,{width:"100px",height:"14px",style:"margin-bottom:8px"});var Ye=g(We,2);_t(Ye,{width:"80%",height:"28px",style:"margin-bottom:8px"});var Xe=g(Ye,2);_t(Xe,{width:"60%",height:"16px",style:"margin-bottom:16px"});var qe=g(Xe,2),Ke=c(qe);_t(Ke,{width:"100px",height:"36px",radius:"18px"});var at=g(Ke,2);_t(at,{width:"100px",height:"36px",radius:"18px"}),m(fe,ge)},Re=fe=>{var ge=bf(),Be=c(ge),Ve=c(Be);{var ke=st=>{var pt=ff(),Ct=c(pt);ee(Ct,()=>(L(y),_(()=>y.HEART_FILLED))),m(st,pt)},We=st=>{{let pt=yt(()=>(L(r(V)),_(()=>r(V).cover||r(V).image)));ra(st,{get src(){return r(pt)},get alt(){return L(r(V)),_(()=>r(V).title)},radius:"8px",$$slots:{fallback:(Ct,Ee)=>{var rt=hf(),ut=c(rt);ee(ut,()=>(L(y),_(()=>y.ALBUMS))),m(Ct,rt)}}})}};P(Ve,st=>{L(r(V)),_(()=>r(V).kind==="favorites")?st(ke):st(We,!1)})}var Ye=g(Be,2),Xe=c(Ye),qe=c(Xe),Ke=c(qe),at=g(qe,2),dt=c(at),tt=g(at,2);{var nt=st=>{var pt=pf(),Ct=c(pt);ie(()=>oe(Ct,(L(r(V)),_(()=>r(V).artist||r(V).description)))),m(st,pt)};P(tt,st=>{L(r(V)),_(()=>r(V).artist||r(V).description)&&st(nt)})}var lt=g(Xe,2),ct=c(lt),gt=g(ct,2);{var Yt=st=>{var pt=gf(),Ct=c(pt),Ee=c(Ct);ee(Ee,()=>(L(y),_(()=>y.RADIO))),M("click",pt,()=>R("artist")),m(st,pt)},Je=st=>{var pt=it(),Ct=Ie(pt);{var Ee=ut=>{var Pt=_f(),Dr=c(Pt),Ot=c(Dr);ee(Ot,()=>(L(y),_(()=>y.RADIO))),M("click",Pt,()=>R("album")),m(ut,Pt)},rt=ut=>{var Pt=mf();ie(()=>Pt.disabled=(r(x),o(),_(()=>r(x)||o().length===0))),M("click",Pt,Fe),m(ut,Pt)};P(Ct,ut=>{r(h)==="album_details"?ut(Ee):ut(rt,!1)},!0)}m(st,pt)};P(gt,st=>{r(h)==="artist_details"?st(Yt):st(Je,!1)})}ie(st=>{mt(Be,(L(r(V)),_(()=>r(V).kind==="favorites"?"background: linear-gradient(135deg, #fa2d48, #c01c33);":""))),oe(Ke,st),oe(dt,(L(r(V)),_(()=>r(V).title||r(V).name))),ct.disabled=(r(x),o(),_(()=>r(x)||o().length===0))},[()=>(r(h),_(()=>r(h).replace("_details","").toUpperCase().replace("YANDEX_","")))]),M("click",ct,ue),m(fe,ge)};P(K,fe=>{r(x),L(r(V)),_(()=>r(x)&&!r(V).cover&&!r(V).image)?fe(B):fe(Re,!1)})}m(Ge,I)};P(je,Ge=>{r(h),r(u),_(()=>r(h)!=="search"&&r(u).data)&&Ge(ae)})}var se=g(je,2);{var U=Ge=>{var V=wf(),I=g(Ie(V),2);Et(I,5,l,qt,(K,B)=>{var Re=yf(),fe=c(Re),ge=c(fe);ra(ge,{get src(){return r(B),_(()=>r(B).image)},get alt(){return r(B),_(()=>r(B).title)},radius:"8px"});var Be=g(ge,2),Ve=c(Be),ke=c(Ve);ee(ke,()=>(L(y),_(()=>y.PLAY)));var We=g(fe,2),Ye=c(We),Xe=g(We,2),qe=c(Xe);ie(()=>{oe(Ye,(r(B),_(()=>r(B).title))),oe(qe,(r(B),_(()=>r(B).year)))}),M("click",Re,()=>Se(r(B))),m(K,Re)}),M("wheel",I,D),m(Ge,V)};P(se,Ge=>{r(h),l(),_(()=>r(h)==="artist_details"&&l().length>0)&&Ge(U)})}var Ne=g(se,2);{var He=Ge=>{var V=Tf(),I=Ie(V);{var K=fe=>{var ge=xf(),Be=g(Ie(ge),2);Et(Be,5,()=>(r(Me),_(()=>r(Me).artists)),qt,(Ve,ke)=>{var We=kf(),Ye=c(We),Xe=c(Ye);ra(Xe,{get src(){return r(ke),_(()=>r(ke).image)},get alt(){return r(ke),_(()=>r(ke).title)},radius:"8px"});var qe=g(Ye,2),Ke=c(qe);ie(()=>oe(Ke,(r(ke),_(()=>r(ke).title)))),M("click",We,()=>ve(r(ke))),m(Ve,We)}),M("wheel",Be,D),m(fe,ge)};P(I,fe=>{r(Me),_(()=>r(Me).artists.length>0)&&fe(K)})}var B=g(I,2);{var Re=fe=>{var ge=Ef(),Be=g(Ie(ge),2);Et(Be,5,()=>(r(Me),_(()=>r(Me).albums)),qt,(Ve,ke)=>{var We=Sf(),Ye=c(We),Xe=c(Ye);ra(Xe,{get src(){return r(ke),_(()=>r(ke).image)},get alt(){return r(ke),_(()=>r(ke).title)},radius:"8px"});var qe=g(Ye,2),Ke=c(qe),at=g(qe,2),dt=c(at);ie(()=>{oe(Ke,(r(ke),_(()=>r(ke).title))),oe(dt,(r(ke),_(()=>r(ke).artist)))}),M("click",We,()=>Se(r(ke))),m(Ve,We)}),M("wheel",Be,D),m(fe,ge)};P(B,fe=>{r(Me),_(()=>r(Me).albums.length>0)&&fe(Re)})}m(Ge,V)};P(Ne,Ge=>{r(h)==="search"&&!r(x)&&Ge(He)})}m(ze,Oe)},row:(ze,Ae)=>{var Oe=Af();const je=yt(()=>Ae.item),ae=yt(()=>Ae.index);var se=c(Oe);zr(se,{get track(){return r(je)},get index(){return r(ae)},$$events:{play:()=>bt.playTrack(r(je).id)}}),m(ze,Oe)},footer:(ze,Ae)=>{var Oe=Cf(),je=c(Oe);{var ae=U=>{var Ne=Mf();m(U,Ne)};P(je,U=>{r(Q)&&U(ae)})}var se=g(je,2);Na(se,U=>b(J,U),()=>r(J)),m(ze,Oe)}}})};P(W,ce=>{r(h),_(()=>["playlist","search","artist_details","album_details"].includes(r(h)))&&ce(le)})}m(T,Y)};P(G,T=>{r(f)?T(pe,!1):T(Pe)})}m(e,re),zt(),d()}var Rf=w('<div class="knob svelte-1jla3sy"></div>'),If=w('<div class="tooltip current svelte-1jla3sy"> </div> <span></span>',1),jf=w('<div slot="fallback" class="icon-fallback svelte-1jla3sy"><!></div>'),Nf=w('<span class="meta-tag quality"> </span>'),Df=w('<div class="dot svelte-1jla3sy"></div>'),Of=w("<button><!> <!></button>"),Ff=w('<div class="dock svelte-1jla3sy"><div class="progress-shadow svelte-1jla3sy"></div> <div><div class="rail svelte-1jla3sy"></div> <div class="fill svelte-1jla3sy"><!></div> <!></div> <div class="grid svelte-1jla3sy"><div class="info svelte-1jla3sy"><div class="art svelte-1jla3sy"><!></div> <div class="meta svelte-1jla3sy"><div class="title-row svelte-1jla3sy"><div class="title text-ellipsis svelte-1jla3sy"> </div> <button class="btn-icon tiny-dots svelte-1jla3sy"><!></button></div> <div class="artist-row svelte-1jla3sy"><div class="artist text-ellipsis svelte-1jla3sy"> </div> <!></div></div></div> <div class="controls svelte-1jla3sy"><button><!></button> <button class="btn-icon"><!></button> <button class="play-btn flex-center svelte-1jla3sy"><!></button> <button class="btn-icon"><!></button> <!></div> <div class="volume desktop svelte-1jla3sy"><button class="vol-btn-mini svelte-1jla3sy" title="Mute/Unmute"><!></button> <div class="custom-slider svelte-1jla3sy"><div class="slider-bg svelte-1jla3sy"><div class="slider-fill svelte-1jla3sy"></div> <div class="slider-knob svelte-1jla3sy"></div></div></div></div></div></div>');function qf(e,t){Lt(t,!1);const a=()=>Te($t,"$status",v),s=()=>Te(Bt,"$currentSong",v),n=()=>Te(ia,"$yandexFavorites",v),i=()=>Te(Ua,"$favorites",v),o=()=>Te(Xa,"$stations",v),l=()=>Te(Ms,"$isFullPlayerOpen",v),[v,d]=Vt(),u=$(),h=$(),f=$(),p=$(),S=$(),E=$(),k=$(),x=$(),Q=$(),de=$(),he=$(),J=$(),ye=$();let _e=$(!1),Z=$(!1),Me=!1,N=$(0),X=$(),j=$();const z=R=>D=>{D.stopPropagation(),R(D)};function we(R){if(isNaN(R)||R===null)return"0:00";const D=Math.floor(R/60),re=Math.floor(R%60);return`${D}:${re<10?"0":""}${re}`}function H(R,D){const re=D.getBoundingClientRect();return Math.max(0,Math.min(1,(R.clientX-re.left)/re.width))}function xe(R){r(p)||(b(Z,!0),b(N,H(R,r(X))),window.addEventListener("mousemove",O),window.addEventListener("mouseup",q))}function O(R){if(r(Z)&&b(N,H(R,r(X))),Me){const D=Math.round(H(R,r(j))*100);La(D)}}function q(){r(Z)&&!r(p)&&Dn(r(N)*r(u)),b(Z,!1),Me=!1,window.removeEventListener("mousemove",O),window.removeEventListener("mouseup",q)}let Le=50;function te(R){R.stopPropagation(),a().volume>0?(Le=a().volume,La(0)):La(Le>0?Le:30)}function ve(R){Me=!0;const D=Math.round(H(R,r(j))*100);La(D),window.addEventListener("mousemove",O),window.addEventListener("mouseup",q)}function Se(){const R=(r(ye)+1)%3;R===0?(a().random&&ir(),a().repeat&&or()):R===1?(a().random||ir(),a().repeat&&or()):R===2&&(a().random&&ir(),a().repeat||or())}function be(R){R.stopPropagation(),as(R,s(),{type:"general",source:"miniplayer"})}function Ce(R){as(R.detail.originalEvent,s(),{type:"general",source:"miniplayer"})}async function De(R){R&&R.stopPropagation&&R.stopPropagation();const D=s();if(!(!D.file&&!D.id))if(D.isYandex||D.service==="yandex"){const re=n().has(String(D.id));try{re?(ia.update(G=>(G.delete(String(D.id)),G)),$e("Removed from Yandex Likes","info")):(ia.update(G=>(G.add(String(D.id)),G)),$e("Added to Yandex Likes","success")),await bt.toggleLike(D.id,re)}catch{$e("Error updating like","error")}}else ka.toggleFavorite(D)}ne(()=>a(),()=>{b(u,a().duration>0?a().duration:1)}),ne(()=>a(),()=>{b(h,a().elapsed||0)}),ne(()=>a(),()=>{b(f,a().state==="play")}),ne(()=>s(),()=>{b(p,s().file?.startsWith("http")&&!s().isYandex)}),ne(()=>s(),()=>{b(S,s().title||"Not Playing")}),ne(()=>s(),()=>{b(E,s().stationName||s().artist||"Moode")}),ne(()=>(s(),n(),i()),()=>{b(k,s().isYandex||s().service==="yandex"?n().has(String(s().id)):s().file&&i().has(s().file))}),ne(()=>(s(),o()),()=>{b(x,Lr(s(),o(),s().stationName))}),ne(()=>(r(p),r(Z),r(N),r(h),r(u)),()=>{b(Q,r(p)?0:r(Z)?r(N)*100:r(h)/r(u)*100)}),ne(()=>(r(f),r(Z),r(p)),()=>{b(de,r(f)&&!r(Z)&&!r(p))}),ne(()=>a(),()=>{b(he,a().bitrate?`${a().bitrate} kbps`:a().format||"")}),ne(()=>(a(),y),()=>{b(J,a().volume===0?y.VOLUME_MUTE:a().volume<50?y.VOLUME_MEDIUM:y.VOLUME_FULL)}),ne(()=>a(),()=>{b(ye,a().repeat?2:a().random?1:0)}),ea(),Dt();var C=it(),ue=Ie(C);{var Fe=R=>{var D=Ff(),re=c(D),G=g(re,2);let Pe;var pe=g(c(G),2),T=c(pe);{var Y=Je=>{var st=Rf();m(Je,st)};P(T,Je=>{r(p)||Je(Y)})}var F=g(pe,2);{var me=Je=>{var st=If(),pt=Ie(st),Ct=c(pt);ie(Ee=>{mt(pt,`left: ${r(Q)??""}%`),oe(Ct,Ee)},[()=>(r(Z),r(N),r(u),r(h),_(()=>r(Z)?we(r(N)*r(u)):we(r(h))))]),m(Je,st)};P(F,Je=>{(r(_e)||r(Z))&&!r(p)&&Je(me)})}Na(G,Je=>b(X,Je),()=>r(X));var Ue=g(G,2),A=c(Ue),W=c(A),le=c(W);ra(le,{get src(){return r(x)},alt:"art",radius:"4px",$$slots:{fallback:(Je,st)=>{var pt=jf(),Ct=c(pt);ee(Ct,()=>(r(p),L(y),_(()=>r(p)?y.RADIO:y.ALBUMS))),m(Je,pt)}}});var ce=g(W,2),ze=c(ce),Ae=c(ze),Oe=c(Ae),je=g(Ae,2),ae=c(je);ee(ae,()=>(L(y),_(()=>y.DOTS)));var se=g(ze,2),U=c(se),Ne=c(U),He=g(U,2);{var Ge=Je=>{var st=Nf(),pt=c(st);ie(()=>oe(pt,r(he))),m(Je,st)};P(He,Je=>{r(he)&&Je(Ge)})}var V=g(A,2),I=c(V),K=Fr(()=>z(De));let B;var Re=c(I);ee(Re,()=>(r(k),L(y),_(()=>r(k)?y.HEART_FILLED:y.HEART)));var fe=g(I,2),ge=Fr(()=>z(()=>ns("previous"))),Be=c(fe);ee(Be,()=>(L(y),_(()=>y.PREVIOUS)));var Ve=g(fe,2),ke=Fr(()=>z(Bs)),We=c(Ve);ee(We,()=>(a(),L(y),_(()=>a().state==="play"?y.PAUSE:y.PLAY)));var Ye=g(Ve,2),Xe=Fr(()=>z(()=>ns("next"))),qe=c(Ye);ee(qe,()=>(L(y),_(()=>y.NEXT)));var Ke=g(Ye,2);{var at=Je=>{var st=Of(),pt=Fr(()=>z(Se));let Ct;var Ee=c(st);{var rt=Ot=>{var Ta=it(),Or=Ie(Ta);ee(Or,()=>(L(y),_(()=>y.REPEAT))),m(Ot,Ta)},ut=Ot=>{var Ta=it(),Or=Ie(Ta);ee(Or,()=>(L(y),_(()=>y.SHUFFLE))),m(Ot,Ta)};P(Ee,Ot=>{r(ye)===2?Ot(rt):Ot(ut,!1)})}var Pt=g(Ee,2);{var Dr=Ot=>{var Ta=Df();m(Ot,Ta)};P(Pt,Ot=>{r(ye)>0&&Ot(Dr)})}ie(()=>Ct=ot(st,1,"btn-icon desktop mode-btn svelte-1jla3sy",null,Ct,{active:r(ye)>0})),M("click",st,function(...Ot){r(pt)?.apply(this,Ot)}),m(Je,st)};P(Ke,Je=>{r(p)||Je(at)})}var dt=g(V,2),tt=c(dt),nt=c(tt);ee(nt,()=>r(J));var lt=g(tt,2),ct=c(lt),gt=c(ct),Yt=g(gt,2);Na(lt,Je=>b(j,Je),()=>r(j)),Xt(()=>M("click",D,()=>Ms.set(!0))),Cn(D,(Je,st)=>Bn?.(Je,st),()=>500),Xt(()=>M("longpress",D,Ce)),ie(()=>{mt(re,`width: ${r(Q)??""}%; transition: ${r(de)?"width 0.25s linear":"none"}`),Pe=ot(G,1,"progress-bar svelte-1jla3sy",null,Pe,{radio:r(p)}),mt(pe,`width: ${r(Q)??""}%; transition: ${r(de)?"width 0.25s linear":"none"}`),Jt(Ae,"title",r(S)),oe(Oe,r(S)),Jt(U,"title",r(E)),oe(Ne,r(E)),B=ot(I,1,"btn-icon desktop svelte-1jla3sy",null,B,{liked:r(k)}),mt(gt,`width: ${a(),_(()=>a().volume)??""}%`),mt(Yt,`left: ${a(),_(()=>a().volume)??""}%`)}),M("mouseenter",G,()=>b(_e,!0)),M("mouseleave",G,()=>b(_e,!1)),M("mousedown",G,na(xe)),M("click",G,na(function(Je){ts.call(this,t,Je)})),M("click",je,be),M("click",I,function(...Je){r(K)?.apply(this,Je)}),M("click",fe,function(...Je){r(ge)?.apply(this,Je)}),M("click",Ve,function(...Je){r(ke)?.apply(this,Je)}),M("click",Ye,function(...Je){r(Xe)?.apply(this,Je)}),M("click",tt,te),M("mousedown",lt,na(ve)),M("click",lt,na(function(Je){ts.call(this,t,Je)})),m(R,D)};P(ue,R=>{l()||R(Fe)})}m(e,C),zt(),d()}var Bf=w('<div class="drag-zone svelte-1olwzt8"><div class="drag-handle-icon svelte-1olwzt8"><!></div></div>'),Yf=w('<div slot="fallback" class="icon-fallback svelte-1olwzt8"><!></div>'),Uf=w('<span class="meta-tag quality"> </span>'),Hf=w('<span class="dot svelte-1olwzt8"></span>'),Vf=w("<button><!> <!></button>"),Wf=w('<div style="width: 44px;"></div>'),Qf=w('<div><!> <div class="bg-container svelte-1olwzt8"><div class="bg-gradient-fallback svelte-1olwzt8"></div> <img class="bg-img svelte-1olwzt8" alt="" loading="eager"/> <div class="bg-overlay svelte-1olwzt8"></div></div> <div class="player-body svelte-1olwzt8"><div class="art-container svelte-1olwzt8"><div class="artwork svelte-1olwzt8"><!></div></div> <div class="controls-area svelte-1olwzt8"><div class="meta svelte-1olwzt8"><h1 class="title text-ellipsis svelte-1olwzt8"> </h1> <div class="artist-row svelte-1olwzt8"><h2 class="artist text-ellipsis svelte-1olwzt8"> </h2> <!></div></div> <div class="progress-section"><div><div class="common-track svelte-1olwzt8"><div class="common-fill svelte-1olwzt8"><div class="common-knob svelte-1olwzt8"></div></div></div></div> <div class="time-row svelte-1olwzt8"><span> </span> <span> </span></div></div> <div class="buttons-row svelte-1olwzt8"><button><!></button> <button class="btn-icon side-btn svelte-1olwzt8"><!></button> <button class="play-btn-large flex-center svelte-1olwzt8"><!></button> <button class="btn-icon side-btn svelte-1olwzt8"><!></button> <!></div> <div class="volume-row svelte-1olwzt8"><button class="btn-icon small vol-btn svelte-1olwzt8"><!></button> <div class="volume-hit-area svelte-1olwzt8"><div class="common-track svelte-1olwzt8"><div class="common-fill svelte-1olwzt8"></div> <div class="common-knob svelte-1olwzt8"></div></div></div> <div class="vol-icon-static svelte-1olwzt8"><!></div></div></div></div></div>');function Ei(e,t){Lt(t,!1);const a=()=>Te(Bt,"$currentSong",l),s=()=>Te(Xa,"$stations",l),n=()=>Te($t,"$status",l),i=()=>Te(ia,"$yandexFavorites",l),o=()=>Te(Ua,"$favorites",l),[l,v]=Vt(),d=$(),u=$(),h=$(),f=$(),p=$(),S=$(),E=$(),k=$(),x=$(),Q=$(),de=$(),he=$();let J=Tt(t,"isDocked",8,!1),ye=0,_e=$(0),Z=$(!1);function Me(){Ms.set(!1)}function N(Ee){if(J())return;const rt=Ee.target;rt.closest(".bar-hit-area")||rt.closest(".volume-hit-area")||(ye=Ee.touches[0].clientY,b(Z,!0))}function X(Ee){if(!r(Z)||J())return;const rt=Ee.touches[0].clientY-ye;rt>0&&(Ee.cancelable&&rt>10&&Ee.preventDefault(),b(_e,rt))}function j(){J()||(b(Z,!1),r(_e)>150?Me():b(_e,0))}let z=$(!1),we=$(0),H=$();function xe(Ee){const rt=Math.floor(Ee/60)||0,ut=Math.floor(Ee%60)||0;return`${rt}:${ut.toString().padStart(2,"0")}`}function O(Ee,rt){const ut=rt.getBoundingClientRect(),Pt=Ee.touches?Ee.touches[0].clientX:Ee.clientX;return Math.max(0,Math.min(1,(Pt-ut.left)/ut.width))}function q(Ee){r(f)||(b(z,!0),b(we,O(Ee,r(H))))}function Le(Ee){r(z)&&b(we,O(Ee,r(H)))}function te(){r(z)&&!r(f)&&Dn(r(we)*r(u)),b(z,!1)}let ve=!1,Se=$(),be=50;function Ce(){n().volume>0?(be=n().volume,La(0)):La(be>0?be:30)}function De(Ee){ve=!0;const rt=Math.round(O(Ee,r(Se))*100);La(rt),window.addEventListener("mousemove",C),window.addEventListener("mouseup",ue),window.addEventListener("touchmove",C,{passive:!1}),window.addEventListener("touchend",ue)}function C(Ee){if(ve){Ee.preventDefault();const rt=Math.round(O(Ee,r(Se))*100);La(rt)}}function ue(){ve=!1,window.removeEventListener("mousemove",C),window.removeEventListener("mouseup",ue),window.removeEventListener("touchmove",C),window.removeEventListener("touchend",ue)}function Fe(){const Ee=(r(x)+1)%3;Ee===0?(n().random&&ir(),n().repeat&&or()):Ee===1?(n().random||ir(),n().repeat&&or()):Ee===2&&(n().random&&ir(),n().repeat||or())}async function R(){const Ee=a();if(!(!Ee.file&&!Ee.id))if(Ee.isYandex||Ee.service==="yandex"){const rt=i().has(String(Ee.id));try{rt?(ia.update(ut=>(ut.delete(String(Ee.id)),ut)),$e("Removed from Yandex Likes","info")):(ia.update(ut=>(ut.add(String(Ee.id)),ut)),$e("Added to Yandex Likes","success")),await bt.toggleLike(Ee.id,rt)}catch{$e("Error updating like","error")}}else ka.toggleFavorite(Ee)}ne(()=>(a(),s()),()=>{b(d,Lr(a(),s(),a().stationName))}),ne(()=>n(),()=>{b(u,n().duration||1)}),ne(()=>n(),()=>{b(h,n().elapsed||0)}),ne(()=>a(),()=>{b(f,a().file?.startsWith("http")&&!a().isYandex)}),ne(()=>n(),()=>{b(p,n().state==="play")}),ne(()=>(r(p),r(z),r(f)),()=>{b(S,r(p)&&!r(z)&&!r(f))}),ne(()=>(r(f),r(z),r(we),r(h),r(u)),()=>{b(E,r(f)?0:r(z)?r(we)*100:r(h)/r(u)*100)}),ne(()=>(n(),y),()=>{b(k,n().volume===0?y.VOLUME_MUTE:n().volume<50?y.VOLUME_MEDIUM:y.VOLUME_FULL)}),ne(()=>n(),()=>{b(x,n().repeat?2:n().random?1:0)}),ne(()=>n(),()=>{b(Q,n().bitrate?`${n().bitrate} kbps`:n().format||"")}),ne(()=>(a(),i(),o()),()=>{b(de,a().isYandex||a().service==="yandex"?i().has(String(a().id)):a().file&&o().has(a().file))}),ne(()=>L(J()),()=>{b(he,J()?"8px":"var(--radius-xl)")}),ea(),Dt();var D=Qf();let re;var G=c(D);{var Pe=Ee=>{var rt=Bf(),ut=c(rt),Pt=c(ut);ee(Pt,()=>(L(y),_(()=>y.CHEVRON_DOWN))),M("touchstart",rt,N),M("touchmove",rt,X),M("touchend",rt,j),M("click",rt,Me),m(Ee,rt)};P(G,Ee=>{J()||Ee(Pe)})}var pe=g(G,2),T=g(c(pe),2),Y=g(pe,2),F=c(Y),me=c(F),Ue=c(me);ra(Ue,{get src(){return r(d)},alt:"Cover",get radius(){return r(he)},$$slots:{fallback:(Ee,rt)=>{var ut=Yf(),Pt=c(ut);ee(Pt,()=>(r(f),L(y),_(()=>r(f)?y.RADIO:y.ALBUMS))),m(Ee,ut)}}});var A=g(F,2),W=c(A),le=c(W),ce=c(le),ze=g(le,2),Ae=c(ze),Oe=c(Ae),je=g(Ae,2);{var ae=Ee=>{var rt=Uf(),ut=c(rt);ie(()=>oe(ut,r(Q))),m(Ee,rt)};P(je,Ee=>{r(Q)&&Ee(ae)})}var se=g(W,2),U=c(se);let Ne;var He=c(U),Ge=c(He);Na(U,Ee=>b(H,Ee),()=>r(H));var V=g(U,2),I=c(V),K=c(I),B=g(I,2),Re=c(B),fe=g(se,2),ge=c(fe);let Be;var Ve=c(ge);ee(Ve,()=>(r(de),L(y),_(()=>r(de)?y.HEART_FILLED:y.HEART)));var ke=g(ge,2),We=c(ke);ee(We,()=>(L(y),_(()=>y.PREVIOUS)));var Ye=g(ke,2),Xe=c(Ye);ee(Xe,()=>(n(),L(y),_(()=>n().state==="play"?y.PAUSE:y.PLAY)));var qe=g(Ye,2),Ke=c(qe);ee(Ke,()=>(L(y),_(()=>y.NEXT)));var at=g(qe,2);{var dt=Ee=>{var rt=Vf();let ut;var Pt=c(rt);{var Dr=ga=>{var Ka=it(),Us=Ie(Ka);ee(Us,()=>(L(y),_(()=>y.REPEAT))),m(ga,Ka)},Ot=ga=>{var Ka=it(),Us=Ie(Ka);ee(Us,()=>(L(y),_(()=>y.SHUFFLE))),m(ga,Ka)};P(Pt,ga=>{r(x)===2?ga(Dr):ga(Ot,!1)})}var Ta=g(Pt,2);{var Or=ga=>{var Ka=Hf();m(ga,Ka)};P(Ta,ga=>{r(x)>0&&ga(Or)})}ie(()=>ut=ot(rt,1,"btn-icon side-btn mode-btn svelte-1olwzt8",null,ut,{active:r(x)>0})),M("click",rt,Fe),m(Ee,rt)},tt=Ee=>{var rt=Wf();m(Ee,rt)};P(at,Ee=>{r(f)?Ee(tt,!1):Ee(dt)})}var nt=g(fe,2),lt=c(nt),ct=c(lt);ee(ct,()=>r(k));var gt=g(lt,2),Yt=c(gt),Je=c(Yt),st=g(Je,2);Na(gt,Ee=>b(Se,Ee),()=>r(Se));var pt=g(gt,2),Ct=c(pt);ee(Ct,()=>(L(y),_(()=>y.VOLUME_FULL))),ie((Ee,rt)=>{re=ot(D,1,"full-player svelte-1olwzt8",null,re,{"is-docked":J()}),mt(D,J()?"":`transform: translateY(${r(_e)}px); transition: ${r(Z)?"none":"transform 0.3s cubic-bezier(0.2, 0.8, 0.2, 1)"}`),Jt(T,"src",r(d)),mt(me,`transform: scale(${1-r(_e)/3e3})`),mt(A,`opacity: ${1-r(_e)/400}`),oe(ce,(a(),_(()=>a().title||"Not Playing"))),oe(Oe,(a(),_(()=>a().stationName||a().artist||"Moode Audio"))),Ne=ot(U,1,"bar-hit-area svelte-1olwzt8",null,Ne,{"is-docked-bar":J()}),mt(Ge,`width: ${r(E)??""}%; transition: ${r(S)?"width 0.3s linear":"none"}`),oe(K,Ee),oe(Re,rt),Be=ot(ge,1,"btn-icon side-btn svelte-1olwzt8",null,Be,{liked:r(de)}),mt(Je,`width: ${n(),_(()=>n().volume)??""}%`),mt(st,`left: ${n(),_(()=>n().volume)??""}%; right: auto;`)},[()=>(r(z),r(we),r(u),r(h),_(()=>r(z)?xe(r(we)*r(u)):xe(r(h)))),()=>(r(f),r(u),_(()=>r(f)?"LIVE":xe(r(u))))]),M("mousedown",U,q),M("touchstart",U,q,void 0,!0),M("mousemove",U,function(...Ee){(r(z)?Le:null)?.apply(this,Ee)}),M("touchmove",U,function(...Ee){(r(z)?Le:null)?.apply(this,Ee)},void 0,!0),M("mouseup",U,te),M("touchend",U,te),M("click",ge,R),M("click",ke,()=>ns("previous")),M("click",Ye,function(...Ee){Bs?.apply(this,Ee)}),M("click",qe,()=>ns("next")),M("click",lt,Ce),M("mousedown",gt,na(De)),M("touchstart",gt,na(De)),kt(3,D,()=>bo,()=>({y:J()?0:800,duration:300,opacity:1})),m(e,D),zt(),v()}const Xf=`<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.0//EN" "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd">
<svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="600px" height="331px" viewBox="0 0 600 331" preserveAspectRatio="xMidYMid meet">
 <g fill="#eb1250">
  <path d="M 315.33 288.42 c -1.03 -0.33 -2.60 -1.34 -3.70 -2.39 -1.08 -1.01 -1.73 -2.81 -2.48 -6.68 -0.38 -1.99 -0.84 -4.29 -1.03 -5.13 -0.21 -0.84 -0.47 -2.20 -0.61 -3.05 -0.14 -0.84 -0.42 -2.34 -0.61 -3.33 -0.45 -2.20 -0.42 -2.04 -0.77 -4.17 -0.16 -0.96 -0.40 -2.16 -0.52 -2.65 -0.14 -0.52 -0.33 -1.45 -0.45 -2.11 -0.12 -0.68 -0.38 -2.02 -0.59 -2.98 -0.21 -0.96 -0.52 -2.55 -0.70 -3.52 -0.16 -0.96 -0.52 -2.81 -0.77 -4.10 -0.26 -1.29 -0.82 -4.08 -1.22 -6.21 -0.80 -4.20 -1.57 -8.13 -2.44 -12.54 -0.33 -1.55 -0.63 -3.23 -0.73 -3.75 -0.07 -0.52 -0.28 -1.57 -0.47 -2.34 -0.16 -0.77 -0.54 -2.63 -0.80 -4.10 -0.28 -1.48 -0.61 -3.12 -0.73 -3.63 -0.12 -0.52 -0.42 -2.20 -0.70 -3.75 -0.28 -1.55 -0.91 -4.92 -1.43 -7.50 -0.49 -2.58 -1.34 -7.01 -1.85 -9.84 -0.54 -2.84 -1.17 -6.26 -1.43 -7.62 -0.26 -1.36 -0.56 -3.07 -0.68 -3.80 -0.12 -0.75 -0.26 -1.43 -0.33 -1.55 -0.26 -0.42 -2.60 -12.89 -3.21 -17.16 -0.12 -0.84 -0.38 -2.16 -0.56 -2.93 -0.16 -0.77 -0.49 -2.34 -0.70 -3.52 -0.21 -1.15 -0.63 -3.26 -0.94 -4.69 -0.30 -1.41 -0.68 -3.30 -0.82 -4.22 -0.16 -0.89 -0.47 -2.58 -0.73 -3.75 -0.68 -3.30 -2.74 -14.16 -3.73 -19.80 -0.28 -1.48 -0.63 -3.38 -0.82 -4.22 -0.38 -1.71 -1.31 -6.70 -1.88 -10.08 -0.40 -2.34 -0.87 -4.71 -1.43 -7.27 -0.16 -0.84 -0.59 -3 -0.91 -4.80 -0.35 -1.80 -0.77 -4.01 -0.96 -4.92 -0.19 -0.89 -0.54 -2.98 -0.80 -4.64 -0.49 -3.26 -0.70 -3.91 -1.10 -3.40 -0.14 0.16 -0.30 0.63 -0.38 1.01 -0.07 0.40 -0.54 2.51 -1.01 4.69 -2.67 12.42 -3.16 14.77 -3.38 16.29 -0.28 1.99 -1.48 7.64 -3.77 18.05 -1.17 5.23 -2.37 10.66 -2.67 12.07 -0.33 1.43 -0.84 4.01 -1.17 5.74 -0.30 1.73 -1.05 5.27 -1.64 7.85 -0.59 2.58 -1.59 7.17 -2.25 10.20 -0.63 3.02 -1.38 5.93 -1.62 6.45 -0.66 1.36 -2.60 3.26 -4.05 3.96 -1.24 0.61 -1.24 0.61 -87.30 0.61 -86.04 0 -86.04 0 -87.33 -0.49 -1.59 -0.59 -3.56 -2.32 -4.41 -3.89 -1.97 -3.63 -0.35 -8.32 3.61 -10.43 1.01 -0.54 1.01 -0.54 83.44 -0.61 82.43 -0.05 82.43 -0.05 82.69 -1.41 0.14 -0.73 0.42 -1.85 0.59 -2.51 0.19 -0.63 0.82 -3.59 1.41 -6.56 0.59 -2.95 1.29 -6.23 1.52 -7.27 0.23 -1.03 0.82 -3.66 1.27 -5.86 0.47 -2.18 1.34 -6.30 1.97 -9.14 0.63 -2.84 1.34 -6.16 1.57 -7.38 0.21 -1.22 0.49 -2.39 0.61 -2.60 0.09 -0.21 0.42 -1.64 0.68 -3.16 0.26 -1.55 0.63 -3.26 0.82 -3.82 0.19 -0.59 0.35 -1.34 0.35 -1.69 0 -0.35 0.21 -1.57 0.49 -2.70 0.26 -1.13 0.59 -2.60 0.68 -3.23 0.21 -1.22 2.16 -10.08 3.05 -13.78 0.26 -1.13 1.05 -4.88 1.76 -8.32 0.70 -3.45 1.55 -7.59 1.88 -9.21 0.33 -1.62 1.08 -5.09 1.64 -7.73 1.62 -7.41 1.73 -7.95 2.13 -9.96 0.91 -4.62 1.92 -9.19 2.18 -9.80 0.14 -0.35 0.82 -1.24 1.48 -1.97 2.58 -2.72 5.84 -3.42 8.88 -1.90 1.97 0.98 3.73 2.74 4.27 4.31 0.42 1.20 1.41 6.42 1.80 9.47 0.09 0.84 0.30 1.83 0.45 2.18 0.14 0.38 0.26 1.10 0.26 1.66 0 0.54 0.16 1.45 0.35 2.04 0.19 0.56 0.56 2.25 0.84 3.73 0.82 4.50 1.78 9.28 2.20 11.13 0.19 0.77 0.45 2.04 0.56 2.81 0.47 2.63 1.92 10.08 2.25 11.60 0.19 0.84 0.45 2.16 0.56 2.93 0.28 1.64 0.63 3.56 1.08 5.86 0.19 0.91 0.49 2.60 0.70 3.75 0.21 1.17 0.54 2.79 0.70 3.63 0.19 0.84 0.77 3.75 1.29 6.45 0.54 2.72 1.17 5.88 1.41 7.03 0.23 1.17 0.66 3.38 0.94 4.92 0.26 1.55 0.70 4.03 0.96 5.51 0.26 1.48 0.73 3.91 1.03 5.39 0.30 1.48 0.68 3.45 0.82 4.34 0.16 0.91 0.47 2.48 0.70 3.52 0.70 3.19 2.23 10.73 2.58 12.89 0.09 0.66 0.47 2.48 0.80 4.10 0.63 3.05 0.70 3.35 1.66 8.77 0.33 1.80 0.82 4.29 1.08 5.51 0.26 1.24 0.56 2.79 0.68 3.42 0.19 1.17 0.89 4.76 1.55 8.09 0.21 0.96 0.63 3.23 0.96 5.04 0.84 4.64 1.41 7.55 1.69 8.91 0.14 0.66 0.35 1.76 0.49 2.46 0.12 0.70 0.38 2.04 0.56 2.93 0.19 0.91 0.61 3.16 0.94 5.04 1.05 5.86 2.48 13.41 2.88 15.12 0.19 0.91 0.42 2.02 0.47 2.46 0.07 0.45 0.33 1.78 0.59 2.93 0.26 1.17 0.56 2.70 0.68 3.40 0.12 0.70 0.30 1.62 0.42 1.99 0.12 0.40 0.35 1.48 0.52 2.41 0.26 1.50 0.35 1.69 0.82 1.69 0.45 0 0.54 -0.16 0.68 -0.98 0.23 -1.66 2.23 -11.86 2.84 -14.60 0.30 -1.41 0.66 -3.09 0.80 -3.75 0.89 -4.57 5.46 -26.60 6.47 -31.17 0.33 -1.41 0.77 -3.59 1.03 -4.80 0.52 -2.51 1.13 -5.44 2.13 -10.08 0.38 -1.73 1.01 -4.69 1.36 -6.56 0.38 -1.88 1.05 -5.13 1.50 -7.27 0.47 -2.13 0.94 -4.38 1.05 -5.04 0.45 -2.30 1.95 -9.63 2.18 -10.48 0.26 -1.01 1.64 -7.38 2.44 -11.32 0.30 -1.55 0.77 -3.87 1.05 -5.16 0.47 -2.34 2.91 -13.57 4.22 -19.57 0.38 -1.73 0.82 -3.89 0.96 -4.80 0.54 -3.26 2.16 -5.65 4.64 -6.91 1.73 -0.87 2.53 -1.01 4.36 -0.82 1.22 0.14 1.83 0.35 2.93 1.08 2.20 1.43 3.40 3.45 4.45 7.55 0.26 1.05 0.70 2.72 0.96 3.68 0.26 0.96 0.63 2.34 0.80 3.05 0.54 2.16 1.29 4.95 1.78 6.56 0.23 0.84 0.70 2.48 1.01 3.63 0.30 1.17 0.98 3.63 1.52 5.51 0.54 1.88 1.24 4.41 1.55 5.63 0.33 1.22 0.80 2.86 1.05 3.63 0.26 0.77 0.47 1.59 0.47 1.80 0 0.23 0.30 1.50 0.68 2.81 0.38 1.34 1.01 3.68 1.43 5.23 0.77 2.81 1.52 5.58 3.26 11.72 0.52 1.80 1.31 4.71 1.76 6.47 0.45 1.76 0.96 3.70 1.17 4.34 0.30 0.98 2.39 8.65 4.29 15.68 1.13 4.24 2.25 8.27 3.05 11.13 1.45 5.13 1.62 5.74 3.21 11.79 0.42 1.59 0.54 1.80 0.96 1.80 0.16 0 0.35 0.12 0.40 0.28 0.05 0.14 0.33 -0.52 0.63 -1.48 0.30 -0.96 1.73 -5.37 3.19 -9.82 1.48 -4.45 3.09 -9.52 3.63 -11.25 0.52 -1.73 1.85 -5.86 2.95 -9.14 1.13 -3.28 2.48 -7.45 3.05 -9.26 1.73 -5.44 2.23 -6.19 5.11 -7.69 1.43 -0.75 1.43 -0.75 69.40 -0.82 67.97 -0.07 67.97 -0.07 69.56 0.47 0.87 0.28 1.57 0.61 1.57 0.70 0 0.12 0.42 0.56 0.94 1.03 0.52 0.47 1.27 1.52 1.64 2.32 0.94 1.97 0.98 4.52 0.14 6.33 -0.73 1.57 -3.26 3.98 -4.52 4.31 -0.70 0.19 -19.31 0.28 -65.27 0.33 -64.29 0.05 -64.29 0.05 -66.82 7.66 -1.38 4.20 -4.97 14.95 -7.97 23.91 -5.58 16.71 -8.34 25.17 -9.89 30.12 -1.38 4.43 -2.34 5.98 -4.66 7.43 -1.15 0.75 -1.29 0.77 -3.66 0.77 -2.11 0 -2.63 -0.07 -3.59 -0.56 -1.20 -0.59 -2.65 -1.92 -3.59 -3.30 -0.47 -0.68 -2.44 -7.15 -4.17 -13.59 -0.19 -0.70 -0.61 -2.23 -0.94 -3.40 -0.33 -1.15 -0.77 -2.74 -0.98 -3.52 -0.19 -0.77 -0.45 -1.71 -0.56 -2.11 -0.12 -0.38 -0.49 -1.76 -0.82 -3.05 -0.35 -1.29 -1.03 -3.77 -1.52 -5.51 -1.90 -6.52 -2.79 -9.75 -2.95 -10.66 -0.07 -0.52 -0.23 -1.10 -0.35 -1.31 -0.12 -0.21 -0.63 -2.02 -1.15 -3.98 -0.94 -3.54 -1.66 -6.23 -3.40 -12.63 -0.47 -1.73 -1.10 -4.03 -1.43 -5.09 -0.30 -1.05 -0.94 -3.33 -1.38 -5.04 -0.45 -1.71 -1.03 -3.91 -1.29 -4.88 -0.28 -0.96 -0.59 -2.18 -0.68 -2.70 -0.12 -0.52 -0.75 -2.88 -1.41 -5.27 -0.66 -2.39 -1.45 -5.39 -1.80 -6.68 -0.33 -1.29 -0.70 -2.60 -0.80 -2.93 -0.30 -0.91 -2.04 -7.52 -2.25 -8.55 -0.16 -0.70 -0.33 -0.94 -0.66 -0.94 -0.40 0 -0.56 0.56 -1.45 4.80 -0.54 2.65 -1.36 6.61 -1.85 8.79 -0.47 2.20 -1.15 5.51 -1.50 7.38 -1.22 6.28 -1.92 9.73 -2.25 11.13 -0.19 0.77 -0.52 2.30 -0.70 3.40 -0.21 1.10 -0.54 2.53 -0.70 3.16 -0.19 0.66 -0.61 2.48 -0.91 4.10 -0.73 3.73 -1.69 8.48 -1.99 9.84 -0.49 2.30 -0.94 4.43 -1.29 6.21 -0.21 1.03 -0.75 3.61 -1.20 5.74 -0.45 2.13 -0.84 4.20 -0.91 4.57 -0.07 0.40 -0.23 1.34 -0.35 2.11 -0.14 0.77 -0.73 3.63 -1.31 6.33 -0.59 2.72 -1.17 5.55 -1.31 6.33 -0.30 1.83 -1.57 8.39 -1.85 9.61 -0.12 0.52 -0.54 2.58 -0.94 4.57 -0.40 1.99 -0.87 4.22 -1.05 4.92 -0.16 0.70 -0.45 2.09 -0.61 3.05 -0.16 0.96 -0.49 2.65 -0.73 3.75 -0.54 2.46 -0.59 2.70 -2.32 11.48 -0.77 3.94 -1.55 7.73 -1.73 8.44 -0.19 0.70 -0.56 2.39 -0.82 3.75 -0.28 1.36 -0.70 3.47 -0.96 4.69 -0.23 1.22 -0.61 3.23 -0.82 4.45 -0.63 3.87 -2.23 6.45 -4.83 7.85 -1.01 0.56 -1.57 0.68 -3.12 0.75 -1.13 0.05 -2.25 -0.07 -2.84 -0.26 z "/>
 </g>
</svg>`;var Kf=w('<div class="backdrop svelte-ji5owg"></div>'),Gf=w('<button><span class="icon svelte-ji5owg"><!></span> <span> </span></button>'),Zf=w('<!> <aside><div class="header svelte-ji5owg"><div class="header-inner svelte-ji5owg"><button class="collapse-btn svelte-ji5owg"><div class="chevron svelte-ji5owg"><!></div></button> <div><div class="logo svelte-ji5owg"><!></div></div></div> <button class="btn-icon mobile-close svelte-ji5owg"><!></button></div> <div class="scroll-area custom-scrollbar svelte-ji5owg"><nav class="svelte-ji5owg"><!> <button title="Search"><span class="icon svelte-ji5owg"><!></span> <span>Search</span></button> <div class="sep svelte-ji5owg"></div> <button class="nav-item sync svelte-ji5owg" title="Update Library"><span><!></span> <span> </span></button> <div class="sep svelte-ji5owg"></div> <button title="Settings"><span class="icon svelte-ji5owg"><!></span> <span>Settings</span></button></nav> <div class="footer svelte-ji5owg"><div>Moode WaveUI</div></div></div></aside>',1);function Jf(e,t){Lt(t,!1);const a=()=>Te(ss,"$isYandexEnabled",o),s=()=>Te(ua,"$isSyncingLibrary",o),n=()=>Te(hn,"$isSidebarCollapsed",o),i=()=>Te(Rt,"$activeMenuTab",o),[o,l]=Vt(),v=$(),d=$();let u=Tt(t,"isOpen",8,!1);const h=Rn();let f=$(0),p=$(0),S=$(!1);const E=[{id:"queue",label:"Queue",icon:y.MENU},{id:"favorites",label:"Favorites",icon:y.HEART},{id:"artists",label:"Artists",icon:y.ARTISTS},{id:"albums",label:"Albums",icon:y.ALBUMS},{id:"playlists",label:"Playlists",icon:y.PLAYLISTS},{id:"radio",label:"Radio",icon:y.RADIO},{id:"yandex",label:"Yandex Music",icon:y.YANDEX}];function k(ae){const se=`/${ae}`;window.location.hash===`#${se}`||window.location.hash===se?(Rt.set(ae),xt.set([{view:"root"}])):window.location.hash=se,h("close")}async function x(){s()||(await wa.syncLibrary(),window.location.hash="/artists")}function Q(){hn.update(ae=>!ae)}function de(ae){u()&&(b(f,ae.touches[0].clientX),b(p,r(f)),b(S,!0))}function he(ae){r(S)&&b(p,ae.touches[0].clientX)}function J(){r(S)&&(r(p)-r(f)<-70&&h("close"),b(S,!1),b(f,0),b(p,0))}ne(()=>a(),()=>{b(v,E.filter(ae=>ae.id==="yandex"?a():!0))}),ne(()=>(r(S),r(p),r(f)),()=>{b(d,r(S)?Math.min(0,r(p)-r(f)):0)}),ea(),Dt();var ye=Zf(),_e=Ie(ye);{var Z=ae=>{var se=Kf();M("click",se,()=>h("close")),kt(3,se,()=>At,()=>({duration:200})),m(ae,se)};P(_e,ae=>{u()&&ae(Z)})}var Me=g(_e,2);let N,X;var j=c(Me),z=c(j),we=c(z),H=c(we),xe=c(H);ee(xe,()=>(L(y),_(()=>y.BACK)));var O=g(we,2);let q;var Le=c(O),te=c(Le);ee(te,()=>Xf);var ve=g(z,2),Se=c(ve);ee(Se,()=>(L(y),_(()=>y.CLOSE)));var be=g(j,2),Ce=c(be),De=c(Ce);Et(De,1,()=>r(v),ae=>ae.id,(ae,se)=>{var U=Gf();let Ne;var He=c(U),Ge=c(He);ee(Ge,()=>(r(se),_(()=>r(se).icon)));var V=g(He,2);let I;var K=c(V);ie(()=>{Ne=ot(U,1,"nav-item svelte-ji5owg",null,Ne,{active:i()===r(se).id}),Jt(U,"title",(r(se),_(()=>r(se).label))),I=ot(V,1,"label-text svelte-ji5owg",null,I,{hidden:n()}),oe(K,(r(se),_(()=>r(se).label)))}),M("click",U,()=>k(r(se).id)),m(ae,U)});var C=g(De,2);let ue;var Fe=c(C),R=c(Fe);ee(R,()=>(L(y),_(()=>y.SEARCH)));var D=g(Fe,2);let re;var G=g(C,4),Pe=c(G);let pe;var T=c(Pe);ee(T,()=>(L(y),_(()=>y.SYNC)));var Y=g(Pe,2);let F;var me=c(Y),Ue=g(G,4);let A;var W=c(Ue),le=c(W);ee(le,()=>(L(y),_(()=>y.SETTINGS)));var ce=g(W,2);let ze;var Ae=g(Ce,2),Oe=c(Ae);let je;ie(()=>{N=ot(Me,1,"side-menu svelte-ji5owg",null,N,{"mobile-open":u(),collapsed:n()}),X=mt(Me,"",X,{transform:u()?`translateX(${r(d)}px)`:"",transition:r(S)?"none":"width 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.3s ease"}),Jt(we,"title",n()?"Expand":"Collapse"),mt(H,`transform: rotate(${n()?"180deg":"0deg"})`),q=ot(O,1,"logo-wrapper svelte-ji5owg",null,q,{hidden:n()}),ue=ot(C,1,"nav-item svelte-ji5owg",null,ue,{active:i()==="search"}),re=ot(D,1,"label-text svelte-ji5owg",null,re,{hidden:n()}),G.disabled=s(),pe=ot(Pe,1,"icon svelte-ji5owg",null,pe,{spin:s()}),F=ot(Y,1,"label-text svelte-ji5owg",null,F,{hidden:n()}),oe(me,s()?"Syncing...":"Update Library"),A=ot(Ue,1,"nav-item svelte-ji5owg",null,A,{active:i()==="settings"}),ze=ot(ce,1,"label-text svelte-ji5owg",null,ze,{hidden:n()}),je=ot(Oe,1,"footer-text svelte-ji5owg",null,je,{hidden:n()})}),M("click",we,Q),M("click",ve,()=>h("close")),M("click",C,()=>k("search")),M("click",G,x),M("click",Ue,()=>k("settings")),M("touchstart",Me,de),M("touchmove",Me,he),M("touchend",Me,J),m(e,ye),zt(),l()}var e0=w('<div class="toast-container svelte-k2bvk7"><div> </div></div>'),t0=w('<button class="back-btn svelte-k2bvk7"><span class="icon-inline svelte-k2bvk7"><!></span> Back</button>'),a0=w('<div class="view-title svelte-k2bvk7"><!></div>'),r0=w('<div class="full-player-modal svelte-k2bvk7"><!></div>'),s0=w('<div class="app-container svelte-k2bvk7"><div class="app-layout svelte-k2bvk7"><!> <!> <main class="content-area svelte-k2bvk7"><header class="top-bar svelte-k2bvk7"><button class="hamburger-btn svelte-k2bvk7"><!></button> <!></header> <div class="scroll-container svelte-k2bvk7"><div class="view-wrapper svelte-k2bvk7"><!></div></div></main> <div class="docked-player-container svelte-k2bvk7"><!></div></div> <div class="mini-player-wrapper svelte-k2bvk7"><!></div></div> <!>',1);function n0(e,t){Lt(t,!1);const a=()=>Te(xt,"$navigationStack",o),s=()=>Te(fn,"$toastMessage",o),n=()=>Te(Rt,"$activeMenuTab",o),i=()=>Te(Ms,"$isFullPlayerOpen",o),[o,l]=Vt();let v=$(!1);Oa(()=>{window.history.replaceState({depth:a().length},"","");const O=()=>{if(et(Cs)){Cs.set(!1);return}sd()};return window.addEventListener("popstate",O),()=>window.removeEventListener("popstate",O)}),Dt();var d=s0(),u=Ie(d),h=c(u),f=c(h);{var p=O=>{var q=e0(),Le=c(q),te=c(Le);ie(()=>{ot(Le,1,`toast-body ${s().type??""}`,"svelte-k2bvk7"),oe(te,s().text)}),kt(3,q,()=>bo,()=>({y:-50,duration:300})),m(O,q)};P(f,O=>{s()&&O(p)})}var S=g(f,2);Jf(S,{get isOpen(){return r(v)},$$events:{close:()=>b(v,!1)}});var E=g(S,2),k=c(E),x=c(k),Q=c(x);ee(Q,()=>y.MENU);var de=g(x,2);{var he=O=>{var q=t0(),Le=c(q),te=c(Le);ee(te,()=>y.BACK),M("click",q,function(...ve){rd?.apply(this,ve)}),m(O,q)},J=O=>{var q=a0(),Le=c(q);{var te=Se=>{var be=$a("Radio");m(Se,be)},ve=Se=>{var be=it(),Ce=Ie(be);{var De=ue=>{var Fe=$a("Playlists");m(ue,Fe)},C=ue=>{var Fe=it(),R=Ie(Fe);{var D=G=>{var Pe=$a("Search");m(G,Pe)},re=G=>{var Pe=it(),pe=Ie(Pe);{var T=F=>{var me=$a("Yandex Music");m(F,me)},Y=F=>{var me=it(),Ue=Ie(me);{var A=le=>{var ce=$a("Queue");m(le,ce)},W=le=>{var ce=it(),ze=Ie(ce);{var Ae=je=>{var ae=$a("Favorites");m(je,ae)},Oe=je=>{var ae=it(),se=Ie(ae);{var U=He=>{var Ge=$a("Settings");m(He,Ge)},Ne=He=>{var Ge=$a();ie(V=>oe(Ge,V),[()=>(n()||"Library").charAt(0).toUpperCase()+(n()||"library").slice(1)]),m(He,Ge)};P(se,He=>{n()==="settings"?He(U):He(Ne,!1)},!0)}m(je,ae)};P(ze,je=>{n()==="favorites"?je(Ae):je(Oe,!1)},!0)}m(le,ce)};P(Ue,le=>{n()==="queue"?le(A):le(W,!1)},!0)}m(F,me)};P(pe,F=>{n()==="yandex"?F(T):F(Y,!1)},!0)}m(G,Pe)};P(R,G=>{n()==="search"?G(D):G(re,!1)},!0)}m(ue,Fe)};P(Ce,ue=>{n()==="playlists"?ue(De):ue(C,!1)},!0)}m(Se,be)};P(Le,Se=>{n()==="radio"?Se(te):Se(ve,!1)})}m(O,q)};P(de,O=>{a().length>1?O(he):O(J,!1)})}var ye=g(k,2),_e=c(ye),Z=c(_e);{var Me=O=>{Wv(O,{})},N=O=>{var q=it(),Le=Ie(q);{var te=Se=>{zf(Se,{})},ve=Se=>{var be=it(),Ce=Ie(be);{var De=ue=>{Qu(ue,{})},C=ue=>{var Fe=it(),R=Ie(Fe);{var D=G=>{_u(G,{})},re=G=>{var Pe=it(),pe=Ie(Pe);{var T=F=>{Lu(F,{})},Y=F=>{var me=it(),Ue=Ie(me);{var A=le=>{Ou(le,{})},W=le=>{Rv(le,{get activeCategory(){return n()}})};P(Ue,le=>{n()==="settings"?le(A):le(W,!1)},!0)}m(F,me)};P(pe,F=>{n()==="search"?F(T):F(Y,!1)},!0)}m(G,Pe)};P(R,G=>{n()==="playlists"||n()==="favorites"?G(D):G(re,!1)},!0)}m(ue,Fe)};P(Ce,ue=>{n()==="queue"?ue(De):ue(C,!1)},!0)}m(Se,be)};P(Le,Se=>{n()==="yandex"?Se(te):Se(ve,!1)},!0)}m(O,q)};P(Z,O=>{n()==="radio"?O(Me):O(N,!1)})}var X=g(E,2),j=c(X);Ei(j,{isDocked:!0});var z=g(h,2),we=c(z);qf(we,{});var H=g(u,2);{var xe=O=>{var q=r0(),Le=c(q);Ei(Le,{}),m(O,q)};P(H,O=>{i()&&O(xe)})}ie(()=>mt(ye,`padding-bottom: ${i()?"0px":"var(--mini-player-height)"};`)),M("click",x,()=>b(v,!0)),m(e,d),zt(),l()}var i0=w('<button class="back-btn-area svelte-l8h85k"><span class="back-icon svelte-l8h85k"><!></span></button> <span class="header-title svelte-l8h85k">Select Playlist</span>',1),o0=w('<div class="track-info svelte-l8h85k"><div class="title text-ellipsis svelte-l8h85k"> </div> <div class="artist text-ellipsis svelte-l8h85k">Playlist</div></div>'),l0=w('<div class="track-info svelte-l8h85k"><div class="title text-ellipsis svelte-l8h85k"> </div> <div class="artist text-ellipsis svelte-l8h85k"> </div></div>'),c0=w('<button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span> </span></button>'),d0=w('<div class="empty-msg svelte-l8h85k">No custom playlists</div>'),v0=w("<!> <!>",1),u0=w('<button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Play Now</span></button> <div class="sep svelte-l8h85k"></div> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Rename</span></button> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Delete Playlist</span></button>',1),f0=w('<div class="sep svelte-l8h85k"></div> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Vibe by Track</span></button> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Vibe by Artist</span></button>',1),h0=w('<button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Go to Album</span></button> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Go to Artist</span></button>',1),p0=w('<div class="sep svelte-l8h85k"></div> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Remove from Playlist</span></button>',1),g0=w('<div class="sep svelte-l8h85k"></div> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Remove from Queue</span></button>',1),_0=w('<button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Play Next</span></button> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Add to Queue</span></button> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Add to Playlist...</span></button> <!> <!> <button class="menu-row svelte-l8h85k"><span><!></span> <span> </span></button> <!> <!>',1),m0=w('<div class="backdrop svelte-l8h85k"><div class="menu-card svelte-l8h85k"><div class="menu-header svelte-l8h85k"><!></div> <div class="menu-items scroll-y svelte-l8h85k"><!></div></div></div>');function b0(e,t){Lt(t,!1);const a=()=>Te(jn,"$contextMenu",i),s=()=>Te(Ua,"$favorites",i),n=()=>Te(Fs,"$playlists",i),[i,o]=Vt(),l=$(),v=$(),d=$(),u=$(),h=$(),f=$(),p=$(),S=$();let E=$(),k=$(),x=$(),Q=$(0),de=$(0),he=$("main"),J=$(!1);function ye(C){a().isOpen&&(b(J,!1),Ut())}function _e(){Ut()}function Z(){a().track&&fa.playNext(a().track.file),Ut()}function Me(){a().track&&fa.addToQueue(a().track.file),Ut()}function N(){a().track&&ka.toggleFavorite(a().track),Ut()}function X(){const C=a().track;C&&C.album&&(C.isYandex||Wt("tracks_by_album",{name:C.album,artist:C.artist})),Ut()}function j(){const C=a().track;C&&C.artist&&(C.isYandex||Wt("albums_by_artist",{name:C.artist})),Ut()}async function z(){const{playlistName:C,index:ue}=a().context;C&&ue!==null&&(Xr.update(Fe=>{const R=[...Fe];return R.splice(ue,1),R}),await ka.removeFromPlaylist(C,ue)),Ut()}function we(){const{index:C}=a().context;C!=null&&fa.removeFromQueue(C),Ut()}function H(){const C=a().context.playlist;C&&Qe.send("stop").then(()=>Qe.send("clear")).then(()=>Qe.send(`load "${C.name.replace(/"/g,'\\"')}"`)).then(()=>Qe.send("play 0")),Ut()}function xe(){const C=a().context.playlist;C&&(Ut(),ya({title:"Rename Playlist",message:`Enter new name for "${C.name}":`,type:"prompt",placeholder:C.name,inputValue:C.name,confirmLabel:"Rename",onConfirm:ue=>{ue&&ue!==C.name&&ka.renamePlaylist(C.name,ue)}}))}function O(){const C=a().context.playlist;C&&(Ut(),ya({title:"Delete Playlist",message:`Are you sure you want to delete "${C.name}"? This cannot be undone.`,type:"confirm",confirmLabel:"Delete",onConfirm:()=>{ka.deletePlaylist(C.name)}}))}async function q(){const C=a().track;if(C&&C.isYandex&&C.id){$e(`Starting radio based on "${C.title}"...`,"info");try{await bt.playRadio(C.id,"track")}catch(ue){console.error(ue),$e("Error starting radio","error")}}Ut()}async function Le(){const C=a().track;if(C&&C.isYandex&&C.artist){$e(`Searching artist "${C.artist}"...`,"info");try{const ue=await bt.search(C.artist);if(ue&&ue.artists&&ue.artists.length>0){const Fe=ue.artists[0].id;$e(`Starting Vibe for ${ue.artists[0].title}...`,"info"),await bt.playRadio(Fe,"artist")}else $e("Artist not found for Vibe","error")}catch{$e("Failed to start Artist Vibe","error")}}Ut()}function te(){b(he,"playlists")}function ve(){b(he,"main")}async function Se(C){const ue=a().track;if(ue)try{const Fe=C.replace(/"/g,'\\"'),R=ue.file.replace(/"/g,'\\"');await Qe.send(`playlistadd "${Fe}" "${R}"`),$e(`Added to "${C}"`,"success"),Ut()}catch(Fe){console.error(Fe),$e("Failed to add","error")}}ne(()=>a(),()=>{a().isOpen&&b(he,"main")}),ne(()=>(a(),r(J),Cs),()=>{a().isOpen?!r(J)&&typeof history<"u"&&(history.pushState({contextMenuOpen:!0},""),b(J,!0)):r(J)&&typeof history<"u"&&(Cs.set(!0),history.back(),b(J,!1))}),ne(()=>(a(),s()),()=>{b(l,a().track&&s().has(a().track.file))}),ne(()=>a(),()=>{b(v,a().track&&(String(a().track.file).includes("http")||String(a().track.file).includes("://")))}),ne(()=>a(),()=>{b(d,a().track&&(a().track.isYandex||a().track.service==="yandex"))}),ne(()=>a(),()=>{b(u,a().context?.type==="playlist")}),ne(()=>a(),()=>{b(h,a().context?.type==="queue")}),ne(()=>a(),()=>{b(f,a().context?.type==="playlist-card")}),ne(()=>a(),()=>{b(p,a().context?.source==="miniplayer")}),ne(()=>(a(),r(de),r(Q),r(E),r(p),r(k)),()=>{b(S,(()=>{if(!a().isOpen)return"";const C=a().triggerRect,ue=a().x,Fe=a().y,R=r(de)||220,D=r(Q)||320;if(r(E)<=768&&r(p)&&C)return`
        position: fixed; 
        bottom: ${r(k)-C.top}px; 
        left: 50%; 
        transform: translateX(-50%); 
        margin: 0; 
        transform-origin: bottom center;
      `;let re=0,G=0,Pe="top left";if(C){const T=C.left+C.width/2,Y=C.top+C.height/2,F=T>r(E)/2,me=Y>r(k)/2;F?(re=C.right-R,Pe=me?"bottom right":"top right"):(re=C.left,Pe=me?"bottom left":"top left"),me?G=C.top-D:G=C.bottom}else re=ue,G=Fe,re+R>r(E)&&(re=r(E)-R-10),G+D>r(k)&&(G=r(k)-D-10);const pe=8;return re<pe&&(re=pe),re+R>r(E)-pe&&(re=r(E)-R-pe),G<pe&&(G=pe),G+D>r(k)-pe&&(G=r(k)-D-pe),`position: fixed; top: ${G}px; left: ${re}px; margin: 0; transform-origin: ${Pe};`})())}),ea(),Dt();var be=it();M("popstate",Ba,ye);var Ce=Ie(be);{var De=C=>{var ue=m0(),Fe=c(ue),R=c(Fe),D=c(R);{var re=F=>{var me=i0(),Ue=Ie(me),A=c(Ue),W=c(A);ee(W,()=>(L(y),_(()=>y.BACK))),M("click",Ue,ve),m(F,me)},G=F=>{var me=it(),Ue=Ie(me);{var A=le=>{var ce=o0(),ze=c(ce),Ae=c(ze);ie(()=>oe(Ae,(a(),_(()=>a().context.playlist.name)))),m(le,ce)},W=le=>{var ce=l0(),ze=c(ce),Ae=c(ze),Oe=g(ze,2),je=c(Oe);ie(()=>{oe(Ae,(a(),_(()=>a().track.title))),oe(je,(a(),_(()=>a().track.artist)))}),m(le,ce)};P(Ue,le=>{r(f)?le(A):le(W,!1)},!0)}m(F,me)};P(D,F=>{r(he)==="playlists"?F(re):F(G,!1)})}var Pe=g(R,2),pe=c(Pe);{var T=F=>{var me=v0(),Ue=Ie(me);Et(Ue,1,n,qt,(le,ce)=>{var ze=it(),Ae=Ie(ze);{var Oe=je=>{var ae=c0(),se=c(ae),U=c(se);ee(U,()=>(L(y),_(()=>y.PLAYLISTS)));var Ne=g(se,2),He=c(Ne);ie(()=>oe(He,(r(ce),_(()=>r(ce).name)))),M("click",ae,()=>Se(r(ce).name)),m(je,ae)};P(Ae,je=>{r(ce),_(()=>r(ce).name!=="Favorites")&&je(Oe)})}m(le,ze)});var A=g(Ue,2);{var W=le=>{var ce=d0();m(le,ce)};P(A,le=>{n(),_(()=>n().filter(ce=>ce.name!=="Favorites").length===0)&&le(W)})}m(F,me)},Y=F=>{var me=it(),Ue=Ie(me);{var A=le=>{var ce=u0(),ze=Ie(ce),Ae=c(ze),Oe=c(Ae);ee(Oe,()=>(L(y),_(()=>y.PLAY)));var je=g(ze,4),ae=c(je),se=c(ae);ee(se,()=>(L(y),_(()=>y.EDIT)));var U=g(je,2),Ne=c(U),He=c(Ne);ee(He,()=>(L(y),_(()=>y.REMOVE))),M("click",ze,H),M("click",je,xe),M("click",U,O),m(le,ce)},W=le=>{var ce=_0(),ze=Ie(ce),Ae=c(ze),Oe=c(Ae);ee(Oe,()=>(L(y),_(()=>y.NEXT)));var je=g(ze,2),ae=c(je),se=c(ae);ee(se,()=>(L(y),_(()=>y.MENU)));var U=g(je,2),Ne=c(U),He=c(Ne);ee(He,()=>(L(y),_(()=>y.ADD_TO_PLAYLIST||y.ADD)));var Ge=g(U,2);{var V=qe=>{var Ke=f0(),at=g(Ie(Ke),2),dt=c(at),tt=c(dt);ee(tt,()=>(L(y),_(()=>y.RADIO)));var nt=g(at,2),lt=c(nt),ct=c(lt);ee(ct,()=>(L(y),_(()=>y.ARTISTS))),M("click",at,q),M("click",nt,Le),m(qe,Ke)};P(Ge,qe=>{r(d)&&qe(V)})}var I=g(Ge,2);{var K=qe=>{var Ke=h0(),at=Ie(Ke),dt=c(at),tt=c(dt);ee(tt,()=>(L(y),_(()=>y.ALBUM_LINK||y.ALBUMS)));var nt=g(at,2),lt=c(nt),ct=c(lt);ee(ct,()=>(L(y),_(()=>y.ARTIST_LINK||y.ARTISTS))),M("click",at,X),M("click",nt,j),m(qe,Ke)};P(I,qe=>{!r(v)&&!r(d)&&qe(K)})}var B=g(I,2),Re=c(B);let fe;var ge=c(Re);ee(ge,()=>(r(l),L(y),_(()=>r(l)?y.HEART_FILLED:y.HEART)));var Be=g(Re,2),Ve=c(Be),ke=g(B,2);{var We=qe=>{var Ke=p0(),at=g(Ie(Ke),2),dt=c(at),tt=c(dt);ee(tt,()=>(L(y),_(()=>y.REMOVE))),M("click",at,z),m(qe,Ke)};P(ke,qe=>{r(u)&&qe(We)})}var Ye=g(ke,2);{var Xe=qe=>{var Ke=g0(),at=g(Ie(Ke),2),dt=c(at),tt=c(dt);ee(tt,()=>(L(y),_(()=>y.REMOVE))),M("click",at,we),m(qe,Ke)};P(Ye,qe=>{r(h)&&qe(Xe)})}ie(()=>{fe=ot(Re,1,"icon svelte-l8h85k",null,fe,{liked:r(l)}),oe(Ve,r(l)?"Unlike":"Like")}),M("click",ze,Z),M("click",je,Me),M("click",U,te),M("click",B,N),m(le,ce)};P(Ue,le=>{r(f)?le(A):le(W,!1)},!0)}m(F,me)};P(pe,F=>{r(he)==="playlists"?F(T):F(Y,!1)})}Na(Fe,F=>b(x,F),()=>r(x)),ie(()=>mt(Fe,r(S))),ri(Fe,"clientHeight",F=>b(Q,F)),ri(Fe,"clientWidth",F=>b(de,F)),kt(3,Fe,()=>In,()=>({start:.95,duration:100})),M("click",Fe,na(function(F){ts.call(this,t,F)})),M("click",ue,_e),kt(3,ue,()=>At,()=>({duration:100})),m(C,ue)};P(Ce,C=>{a(),_(()=>a().isOpen)&&C(De)})}ni("innerWidth",C=>b(E,C)),ni("innerHeight",C=>b(k,C)),m(e,be),zt(),o()}var y0=w('<p class="modal-message svelte-1bxxaoh"> </p>'),w0=w('<div class="input-wrapper svelte-1bxxaoh"><input type="text" autoFocus/></div>'),k0=w('<span class="check svelte-1bxxaoh">â</span>'),x0=w("<button> <!></button>"),S0=w('<div class="select-list svelte-1bxxaoh"></div>'),E0=w('<button class="btn cancel svelte-1bxxaoh"> </button>'),T0=w('<div class="modal-actions svelte-1bxxaoh"><!> <button class="btn confirm svelte-1bxxaoh"> </button></div>'),$0=w('<div class="backdrop svelte-1bxxaoh"><div class="modal-card svelte-1bxxaoh"><div class="modal-header svelte-1bxxaoh"><span class="modal-title svelte-1bxxaoh"> </span></div> <div class="modal-body svelte-1bxxaoh"><!> <!></div> <!></div></div>');function A0(e,t){Lt(t,!1);const a=()=>Te(As,"$modal",s),[s,n]=Vt();let i=$(!1),o=$();function l(){if(a().type==="prompt"){const E=a().inputValue?a().inputValue.trim():"";if(E.length===0){d();return}a().onConfirm&&a().onConfirm(E)}else a().onConfirm&&a().onConfirm();gs()}function v(E){a().onConfirm&&a().onConfirm(E),gs()}function d(){b(i,!0),r(o)&&r(o).focus(),setTimeout(()=>{b(i,!1)},400)}function u(){gs()}function h(E){E.key==="Enter"&&a().type!=="select"&&l(),r(i)&&b(i,!1)}ne(()=>a(),()=>{a().isOpen||b(i,!1)}),ea(),Dt();var f=it(),p=Ie(f);{var S=E=>{var k=$0(),x=c(k),Q=c(x),de=c(Q),he=c(de),J=g(Q,2),ye=c(J);{var _e=z=>{var we=y0(),H=c(we);ie(()=>oe(H,(a(),_(()=>a().message)))),m(z,we)};P(ye,z=>{a(),_(()=>a().message)&&z(_e)})}var Z=g(ye,2);{var Me=z=>{var we=w0(),H=c(we);let xe;Na(H,O=>b(o,O),()=>r(o)),ie(()=>{xe=ot(H,1,"modal-input svelte-1bxxaoh",null,xe,{"shake-error":r(i)}),Jt(H,"placeholder",(a(),_(()=>a().placeholder)))}),nr(H,()=>a().inputValue,O=>uc(As,_(a).inputValue=O,_(a))),M("keydown",H,h),m(z,we)},N=z=>{var we=it(),H=Ie(we);{var xe=O=>{var q=S0();Et(q,5,()=>(a(),_(()=>a().options)),qt,(Le,te)=>{var ve=x0();let Se;var be=c(ve),Ce=g(be);{var De=C=>{var ue=k0();m(C,ue)};P(Ce,C=>{r(te),a(),_(()=>r(te).value===a().inputValue)&&C(De)})}ie(()=>{Se=ot(ve,1,"select-item svelte-1bxxaoh",null,Se,{active:r(te).value===a().inputValue}),oe(be,`${r(te),_(()=>r(te).label)??""} `)}),M("click",ve,()=>v(r(te).value)),m(Le,ve)}),m(O,q)};P(H,O=>{a(),_(()=>a().type==="select")&&O(xe)},!0)}m(z,we)};P(Z,z=>{a(),_(()=>a().type==="prompt")?z(Me):z(N,!1)})}var X=g(J,2);{var j=z=>{var we=T0(),H=c(we);{var xe=Le=>{var te=E0(),ve=c(te);ie(()=>oe(ve,(a(),_(()=>a().cancelLabel)))),M("click",te,function(...Se){gs?.apply(this,Se)}),m(Le,te)};P(H,Le=>{a(),_(()=>a().type==="confirm"||a().type==="prompt")&&Le(xe)})}var O=g(H,2),q=c(O);ie(()=>oe(q,(a(),_(()=>a().confirmLabel)))),M("click",O,l),m(z,we)};P(X,z=>{a(),_(()=>a().type!=="select")&&z(j)})}ie(()=>oe(he,(a(),_(()=>a().title)))),kt(3,x,()=>In,()=>({start:.95,duration:200})),M("click",x,na(function(z){ts.call(this,t,z)})),M("click",k,u),kt(3,k,()=>At,()=>({duration:150})),m(E,k)};P(p,E=>{a(),_(()=>a().isOpen)&&E(S)})}m(e,f),zt(),n()}const Ti={init(){this.handleHashChange(),window.addEventListener("hashchange",()=>this.handleHashChange())},handleHashChange(){let e=window.location.hash.slice(1);for(;e.startsWith("/");)e=e.slice(1);if(!e){(et(xt).length>1||et(Rt)==="search")&&(this.setRootTab("artists"),window.location.hash="/artists");return}const t=e.split("/").map(decodeURIComponent),a=t[0];let s=ad(),n=a;switch(a==="artist"&&(n="albums_by_artist"),a==="album"&&(n="tracks_by_album"),a==="playlist"&&(n="details"),a==="favorites"&&(n="details"),a==="yandex_search"&&(n="yandex_search"),a==="yandex_artist"&&(n="yandex_artist_details"),a==="yandex_album"&&(n="yandex_album_details"),a==="yandex_playlist"&&(n="yandex_playlist"),s||(a==="album"&&t.length>=2?s=t.length>=3?{artist:t[1],name:t[2]}:{name:t[1]}:a==="artist"&&t.length>=2?s={name:t[1]}:a==="playlist"&&t.length>=2?s={name:t[1],displayName:t[1]}:a==="favorites"?s={name:"Favorites"}:a==="yandex_playlist"&&t.length>=3?s={uid:t[1],kind:t[2],title:"Playlist"}:a==="yandex_album"&&t.length>=2?s={id:t[1],title:"Album"}:a==="yandex_artist"&&t.length>=2?s={id:t[1],title:"Artist"}:a==="yandex_search"&&t.length>=2?s={query:t[1]}:t.length>=2&&(s={name:t[1],displayName:t[1]})),console.log(`[Router] Navigating: ${a} -> ${n}`,s),!0){case a.startsWith("yandex"):Rt.set("yandex");break;case a==="queue":this.setRootTab("queue");return;case a==="radio":this.setRootTab("radio");return;case a==="playlists":case a==="playlist":case n==="details":if(s&&s.name==="Favorites"?Rt.set("favorites"):Rt.set("playlists"),a==="playlists"){this.setRootTab("playlists");return}break;case a==="settings":this.setRootTab("settings");return;case a==="favorites":Rt.set("favorites");break;case a==="search":Rt.set("search"),t[1]&&Kr.set(t[1]),xt.set([{view:"root"}]);return;case a==="artists":case a==="artist":if(Rt.set("artists"),a==="artists"){this.setRootTab("artists");return}break;case a==="albums":case a==="album":if(Rt.set("albums"),a==="albums"){this.setRootTab("albums");return}break}if(a==="yandex"){const i=et(xt);(i.length>1||i[0].view!=="root")&&xt.set([{view:"root"}])}else{const i=et(xt),o=i[i.length-1],l=o.view===n;let v=!1;if(s&&o.data?(s.name&&s.name===o.data.name||s.id&&s.id===o.data.id||s.uid&&s.uid===o.data.uid)&&(v=!0):!s&&!o.data&&(v=!0),l&&v)return;(s||n==="yandex_search")&&xt.update(d=>[...d,{view:n,data:s}])}},setRootTab(e){Rt.set(e),xt.set([{view:"root"}])},updateUrl(e,t){let a="";if(e==="root"){const s=et(Rt);if(s==="search"){const n=et(Kr);a=n?`search/${encodeURIComponent(n)}`:"search"}else a=s}else if(e==="details"){const s=t.name||t;a=s==="Favorites"?"favorites":`playlist/${encodeURIComponent(s)}`}else if(e==="albums_by_artist"){const s=t.name||t;a=`artist/${encodeURIComponent(s)}`}else if(e==="tracks_by_album"){const s=t.name||t,n=t.artist;n?a=`album/${encodeURIComponent(n)}/${encodeURIComponent(s)}`:a=`album/${encodeURIComponent(s)}`}else e==="queue"?a="queue":e==="yandex_playlist"?a=`yandex_playlist/${t.uid}/${t.kind}`:e==="yandex_album_details"?a=`yandex_album/${t.id}`:e==="yandex_artist_details"?a=`yandex_artist/${t.id}`:e==="yandex_search"&&(a=`yandex_search/${encodeURIComponent(t.query)}`);if(a){const s=`#/${a}`;decodeURIComponent(window.location.hash)!==decodeURIComponent(s)&&(e==="yandex_search"||e==="search"?window.history.replaceState(null,"",s):window.location.hash=`/${a}`)}}};var M0=w("<!> <!> <!>",1);function C0(e,t){Lt(t,!1),Oa(async()=>{Ti.init(),td((o,l)=>{Ti.updateUrl(o,l)}),$o(),wa.loadRadioStations(),et(ss)&&(await wa.checkYandexAuth(),wa.syncYandexFavorites());try{const o=await Ha.getArtists();o.length>0?console.log(`[App] Database ready. Loaded ${o.length} artists from cache.`):(console.log("[App] Database empty. Starting initial sync..."),wa.syncLibrary())}catch(o){console.error("[App] DB Check failed:",o),$e("Local DB error. Please update library manually.","error")}}),Dt();var a=M0(),s=Ie(a);n0(s,{});var n=g(s,2);b0(n,{});var i=g(n,2);A0(i,{}),m(e,a),zt()}Vl(C0,{target:document.getElementById("app")});
