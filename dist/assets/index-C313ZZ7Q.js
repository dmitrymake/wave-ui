(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();const Vn=!1;var Ka=Array.isArray,yo=Array.prototype.indexOf,xn=Array.from,pi=Object.defineProperty,ga=Object.getOwnPropertyDescriptor,gi=Object.getOwnPropertyDescriptors,wo=Object.prototype,ko=Array.prototype,us=Object.getPrototypeOf,Ls=Object.isExtensible;function xo(e){return typeof e=="function"}const Ht=()=>{};function Eo(e){return e()}function hn(e){for(var r=0;r<e.length;r++)e[r]()}function _i(){var e,r,t=new Promise((a,s)=>{e=a,r=s});return{promise:t,resolve:e,reject:r}}const St=2,fs=4,En=8,So=1<<24,gr=16,$r=32,na=64,Sn=128,sr=512,xt=1024,Dt=2048,ir=4096,Wt=8192,Er=16384,Tn=32768,Zr=65536,Rs=1<<17,mi=1<<18,xa=1<<19,bi=1<<20,wr=1<<25,Jr=32768,Yn=1<<21,hs=1<<22,Ir=1<<23,Sr=Symbol("$state"),To=Symbol("legacy props"),Mo=Symbol(""),ha=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function ps(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function $o(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Ao(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Po(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Co(e){throw new Error("https://svelte.dev/e/effect_orphan")}function zo(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Lo(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function Ro(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Io(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function jo(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function No(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Do=1,Oo=2,yi=4,Fo=8,qo=16,Bo=1,Uo=2,Ho=4,Vo=8,Yo=16,Wo=1,Qo=2,Ko=4,Xo=1,Go=2,At=Symbol(),Zo="http://www.w3.org/1999/xhtml";function Jo(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function el(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function wi(e){return e===this.v}function gs(e,r){return e!=e?r==r:e!==r||e!==null&&typeof e=="object"||typeof e=="function"}function ki(e){return!gs(e,this.v)}let Ea=!1,tl=!1;function rl(){Ea=!0}let it=null;function ma(e){it=e}function Tt(e,r=!1,t){it={p:it,i:!1,c:null,e:null,s:e,x:null,l:Ea&&!r?{s:null,u:null,$:[]}:null}}function Mt(e){var r=it,t=r.e;if(t!==null){r.e=null;for(var a of t)Di(a)}return r.i=!0,it=r.p,{}}function Xa(){return!Ea||it!==null&&it.l===null}let Ur=[];function xi(){var e=Ur;Ur=[],hn(e)}function sa(e){if(Ur.length===0&&!La){var r=Ur;queueMicrotask(()=>{r===Ur&&xi()})}Ur.push(e)}function al(){for(;Ur.length>0;)xi()}function Ei(e){var r=et;if(r===null)return Ge.f|=Ir,e;if((r.f&Tn)===0){if((r.f&Sn)===0)throw e;r.b.error(e)}else ba(e,r)}function ba(e,r){for(;r!==null;){if((r.f&Sn)!==0)try{r.b.error(e);return}catch(t){e=t}r=r.parent}throw e}const tn=new Set;let Je=null,za=null,er=null,Gt=[],Mn=null,Wn=!1,La=!1;class vr{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#r=0;#a=0;#l=null;#s=new Set;#n=new Set;skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#a>0}process(r){Gt=[],za=null,this.apply();var t={parent:null,effect:null,effects:[],render_effects:[]};for(const a of r)this.#i(a,t);this.is_fork||this.#v(),this.is_deferred()?(this.#o(t.effects),this.#o(t.render_effects)):(za=this,Je=null,Is(t.render_effects),Is(t.effects),za=null,this.#l?.resolve()),er=null}#i(r,t){r.f^=xt;for(var a=r.first;a!==null;){var s=a.f,i=(s&($r|na))!==0,o=i&&(s&xt)!==0,l=o||(s&Wt)!==0||this.skipped_effects.has(a);if((a.f&Sn)!==0&&a.b?.is_pending()&&(t={parent:t,effect:a,effects:[],render_effects:[]}),!l&&a.fn!==null){i?a.f^=xt:(s&fs)!==0?t.effects.push(a):Ta(a)&&((a.f&gr)!==0&&this.#s.add(a),ya(a));var d=a.first;if(d!==null){a=d;continue}}var c=a.parent;for(a=a.next;a===null&&c!==null;)c===t.effect&&(this.#o(t.effects),this.#o(t.render_effects),t=t.parent),a=c.next,c=c.parent}}#o(r){for(const t of r)(t.f&Dt)!==0?this.#s.add(t):(t.f&ir)!==0&&this.#n.add(t),this.#c(t.deps),Et(t,xt)}#c(r){if(r!==null)for(const t of r)(t.f&St)===0||(t.f&Jr)===0||(t.f^=Jr,this.#c(t.deps))}capture(r,t){this.previous.has(r)||this.previous.set(r,t),(r.f&Ir)===0&&(this.current.set(r,r.v),er?.set(r,r.v))}activate(){Je=this,this.apply()}deactivate(){Je===this&&(Je=null,er=null)}flush(){if(this.activate(),Gt.length>0){if(Si(),Je!==null&&Je!==this)return}else this.#r===0&&this.process([]);this.deactivate()}discard(){for(const r of this.#t)r(this);this.#t.clear()}#v(){if(this.#a===0){for(const r of this.#e)r();this.#e.clear()}this.#r===0&&this.#d()}#d(){if(tn.size>1){this.previous.clear();var r=er,t=!0,a={parent:null,effect:null,effects:[],render_effects:[]};for(const i of tn){if(i===this){t=!1;continue}const o=[];for(const[d,c]of this.current){if(i.current.has(d))if(t&&c!==i.current.get(d))i.current.set(d,c);else continue;o.push(d)}if(o.length===0)continue;const l=[...i.current.keys()].filter(d=>!this.current.has(d));if(l.length>0){var s=Gt;Gt=[];const d=new Set,c=new Map;for(const u of o)Ti(u,l,d,c);if(Gt.length>0){Je=i,i.apply();for(const u of Gt)i.#i(u,a);i.deactivate()}Gt=s}}Je=null,er=r}this.committed=!0,tn.delete(this)}increment(r){this.#r+=1,r&&(this.#a+=1)}decrement(r){this.#r-=1,r&&(this.#a-=1),this.revive()}revive(){for(const r of this.#s)this.#n.delete(r),Et(r,Dt),ea(r);for(const r of this.#n)Et(r,ir),ea(r);this.flush()}oncommit(r){this.#e.add(r)}ondiscard(r){this.#t.add(r)}settled(){return(this.#l??=_i()).promise}static ensure(){if(Je===null){const r=Je=new vr;tn.add(Je),La||vr.enqueue(()=>{Je===r&&r.flush()})}return Je}static enqueue(r){sa(r)}apply(){}}function nl(e){var r=La;La=!0;try{for(var t;;){if(al(),Gt.length===0&&(Je?.flush(),Gt.length===0))return Mn=null,t;Si()}}finally{La=r}}function Si(){var e=Wr;Wn=!0;var r=null;try{var t=0;for(gn(!0);Gt.length>0;){var a=vr.ensure();if(t++>1e3){var s,i;sl()}a.process(Gt),jr.clear()}}finally{Wn=!1,gn(e),Mn=null}}function sl(){try{zo()}catch(e){ba(e,Mn)}}let br=null;function Is(e){var r=e.length;if(r!==0){for(var t=0;t<r;){var a=e[t++];if((a.f&(Er|Wt))===0&&Ta(a)&&(br=new Set,ya(a),a.deps===null&&a.first===null&&a.nodes===null&&(a.teardown===null&&a.ac===null?Bi(a):a.fn=null),br?.size>0)){jr.clear();for(const s of br){if((s.f&(Er|Wt))!==0)continue;const i=[s];let o=s.parent;for(;o!==null;)br.has(o)&&(br.delete(o),i.push(o)),o=o.parent;for(let l=i.length-1;l>=0;l--){const d=i[l];(d.f&(Er|Wt))===0&&ya(d)}}br.clear()}}br=null}}function Ti(e,r,t,a){if(!t.has(e)&&(t.add(e),e.reactions!==null))for(const s of e.reactions){const i=s.f;(i&St)!==0?Ti(s,r,t,a):(i&(hs|gr))!==0&&(i&Dt)===0&&Mi(s,r,a)&&(Et(s,Dt),ea(s))}}function Mi(e,r,t){const a=t.get(e);if(a!==void 0)return a;if(e.deps!==null)for(const s of e.deps){if(r.includes(s))return!0;if((s.f&St)!==0&&Mi(s,r,t))return t.set(s,!0),!0}return t.set(e,!1),!1}function ea(e){for(var r=Mn=e;r.parent!==null;){r=r.parent;var t=r.f;if(Wn&&r===et&&(t&gr)!==0&&(t&mi)===0)return;if((t&(na|$r))!==0){if((t&xt)===0)return;r.f^=xt}}Gt.push(r)}function il(e){let r=0,t=ta(0),a;return()=>{Oa()&&(n(t),Sa(()=>(r===0&&(a=b(()=>e(()=>Ra(t)))),r+=1,()=>{sa(()=>{r-=1,r===0&&(a?.(),a=void 0,Ra(t))})})))}}var ol=Zr|xa|Sn;function ll(e,r,t){new cl(e,r,t)}class cl{parent;#e=!1;#t;#r=null;#a;#l;#s;#n=null;#i=null;#o=null;#c=null;#v=null;#d=0;#u=0;#h=!1;#f=null;#b=il(()=>(this.#f=ta(this.#d),()=>{this.#f=null}));constructor(r,t,a){this.#t=r,this.#a=t,this.#l=a,this.parent=et.b,this.#e=!!this.#a.pending,this.#s=ms(()=>{et.b=this;{var s=this.#_();try{this.#n=Zt(()=>a(s))}catch(i){this.error(i)}this.#u>0?this.#g():this.#e=!1}return()=>{this.#v?.remove()}},ol)}#y(){try{this.#n=Zt(()=>this.#l(this.#t))}catch(r){this.error(r)}this.#e=!1}#w(){const r=this.#a.pending;r&&(this.#i=Zt(()=>r(this.#t)),vr.enqueue(()=>{var t=this.#_();this.#n=this.#p(()=>(vr.ensure(),Zt(()=>this.#l(t)))),this.#u>0?this.#g():(Yr(this.#i,()=>{this.#i=null}),this.#e=!1)}))}#_(){var r=this.#t;return this.#e&&(this.#v=Tr(),this.#t.before(this.#v),r=this.#v),r}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#a.pending}#p(r){var t=et,a=Ge,s=it;hr(this.#s),jt(this.#s),ma(this.#s.ctx);try{return r()}catch(i){return Ei(i),null}finally{hr(t),jt(a),ma(s)}}#g(){const r=this.#a.pending;this.#n!==null&&(this.#c=document.createDocumentFragment(),this.#c.append(this.#v),Vi(this.#n,this.#c)),this.#i===null&&(this.#i=Zt(()=>r(this.#t)))}#m(r){if(!this.has_pending_snippet()){this.parent&&this.parent.#m(r);return}this.#u+=r,this.#u===0&&(this.#e=!1,this.#i&&Yr(this.#i,()=>{this.#i=null}),this.#c&&(this.#t.before(this.#c),this.#c=null))}update_pending_count(r){this.#m(r),this.#d+=r,this.#f&&ra(this.#f,this.#d)}get_effect_pending(){return this.#b(),n(this.#f)}error(r){var t=this.#a.onerror;let a=this.#a.failed;if(this.#h||!t&&!a)throw r;this.#n&&(Nt(this.#n),this.#n=null),this.#i&&(Nt(this.#i),this.#i=null),this.#o&&(Nt(this.#o),this.#o=null);var s=!1,i=!1;const o=()=>{if(s){el();return}s=!0,i&&No(),vr.ensure(),this.#d=0,this.#o!==null&&Yr(this.#o,()=>{this.#o=null}),this.#e=this.has_pending_snippet(),this.#n=this.#p(()=>(this.#h=!1,Zt(()=>this.#l(this.#t)))),this.#u>0?this.#g():this.#e=!1};var l=Ge;try{jt(null),i=!0,t?.(r,o),i=!1}catch(d){ba(d,this.#s&&this.#s.parent)}finally{jt(l)}a&&sa(()=>{this.#o=this.#p(()=>{vr.ensure(),this.#h=!0;try{return Zt(()=>{a(this.#t,()=>r,()=>o)})}catch(d){return ba(d,this.#s.parent),null}finally{this.#h=!1}})})}}function vl(e,r,t,a){const s=Xa()?Ga:ht;if(t.length===0&&e.length===0){a(r.map(s));return}var i=Je,o=et,l=dl();function d(){Promise.all(t.map(c=>ul(c))).then(c=>{l();try{a([...r.map(s),...c])}catch(u){(o.f&Er)===0&&ba(u,o)}i?.deactivate(),pn()}).catch(c=>{ba(c,o)})}e.length>0?Promise.all(e).then(()=>{l();try{return d()}finally{i?.deactivate(),pn()}}):d()}function dl(){var e=et,r=Ge,t=it,a=Je;return function(i=!0){hr(e),jt(r),ma(t),i&&a?.activate()}}function pn(){hr(null),jt(null),ma(null)}function Ga(e){var r=St|Dt,t=Ge!==null&&(Ge.f&St)!==0?Ge:null;return et!==null&&(et.f|=xa),{ctx:it,deps:null,effects:null,equals:wi,f:r,fn:e,reactions:null,rv:0,v:At,wv:0,parent:t??et,ac:null}}function ul(e,r){let t=et;t===null&&$o();var a=t.b,s=void 0,i=ta(At),o=!Ge,l=new Map;return xl(()=>{var d=_i();s=d.promise;try{Promise.resolve(e()).then(d.resolve,d.reject).then(()=>{c===Je&&c.committed&&c.deactivate(),pn()})}catch(f){d.reject(f),pn()}var c=Je;if(o){var u=!a.is_pending();a.update_pending_count(1),c.increment(u),l.get(c)?.reject(ha),l.delete(c),l.set(c,d)}const h=(f,p=void 0)=>{if(c.activate(),p)p!==ha&&(i.f|=Ir,ra(i,p));else{(i.f&Ir)!==0&&(i.f^=Ir),ra(i,f);for(const[k,S]of l){if(l.delete(k),k===c)break;S.reject(ha)}}o&&(a.update_pending_count(-1),c.decrement(u))};d.promise.then(h,f=>h(null,f||"unknown"))}),Ja(()=>{for(const d of l.values())d.reject(ha)}),new Promise(d=>{function c(u){function h(){u===s?d(i):c(s)}u.then(h,h)}c(s)})}function $a(e){const r=Ga(e);return Yi(r),r}function ht(e){const r=Ga(e);return r.equals=ki,r}function $i(e){var r=e.effects;if(r!==null){e.effects=null;for(var t=0;t<r.length;t+=1)Nt(r[t])}}function fl(e){for(var r=e.parent;r!==null;){if((r.f&St)===0)return(r.f&Er)===0?r:null;r=r.parent}return null}function _s(e){var r,t=et;hr(fl(e));try{e.f&=~Jr,$i(e),r=Xi(e)}finally{hr(t)}return r}function Ai(e){var r=_s(e);if(e.equals(r)||(Je?.is_fork||(e.v=r),e.wv=Qi()),!oa)if(er!==null)(Oa()||Je?.is_fork)&&er.set(e,r);else{var t=(e.f&sr)===0?ir:xt;Et(e,t)}}let Qn=new Set;const jr=new Map;let Pi=!1;function ta(e,r){var t={f:0,v:e,reactions:null,equals:wi,rv:0,wv:0};return t}function Ar(e,r){const t=ta(e);return Yi(t),t}function M(e,r=!1,t=!0){const a=ta(e);return r||(a.equals=ki),Ea&&t&&it!==null&&it.l!==null&&(it.l.s??=[]).push(a),a}function rn(e,r){return g(e,b(()=>n(e))),r}function g(e,r,t=!1){Ge!==null&&(!dr||(Ge.f&Rs)!==0)&&Xa()&&(Ge.f&(St|gr|hs|Rs))!==0&&!Mr?.includes(e)&&jo();let a=t?pa(r):r;return ra(e,a)}function ra(e,r){if(!e.equals(r)){var t=e.v;oa?jr.set(e,r):jr.set(e,t),e.v=r;var a=vr.ensure();a.capture(e,t),(e.f&St)!==0&&((e.f&Dt)!==0&&_s(e),Et(e,(e.f&sr)!==0?xt:ir)),e.wv=Qi(),Ci(e,Dt),Xa()&&et!==null&&(et.f&xt)!==0&&(et.f&($r|na))===0&&(Xt===null?Ml([e]):Xt.push(e)),!a.is_fork&&Qn.size>0&&!Pi&&hl()}return r}function hl(){Pi=!1;var e=Wr;gn(!0);const r=Array.from(Qn);try{for(const t of r)(t.f&xt)!==0&&Et(t,ir),Ta(t)&&ya(t)}finally{gn(e)}Qn.clear()}function Ra(e){g(e,e.v+1)}function Ci(e,r){var t=e.reactions;if(t!==null)for(var a=Xa(),s=t.length,i=0;i<s;i++){var o=t[i],l=o.f;if(!(!a&&o===et)){var d=(l&Dt)===0;if(d&&Et(o,r),(l&St)!==0){var c=o;er?.delete(c),(l&Jr)===0&&(l&sr&&(o.f|=Jr),Ci(c,ir))}else d&&((l&gr)!==0&&br!==null&&br.add(o),ea(o))}}}function pa(e){if(typeof e!="object"||e===null||Sr in e)return e;const r=us(e);if(r!==wo&&r!==ko)return e;var t=new Map,a=Ka(e),s=Ar(0),i=Qr,o=l=>{if(Qr===i)return l();var d=Ge,c=Qr;jt(null),Os(i);var u=l();return jt(d),Os(c),u};return a&&t.set("length",Ar(e.length)),new Proxy(e,{defineProperty(l,d,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&Ro();var u=t.get(d);return u===void 0?u=o(()=>{var h=Ar(c.value);return t.set(d,h),h}):g(u,c.value,!0),!0},deleteProperty(l,d){var c=t.get(d);if(c===void 0){if(d in l){const u=o(()=>Ar(At));t.set(d,u),Ra(s)}}else g(c,At),Ra(s);return!0},get(l,d,c){if(d===Sr)return e;var u=t.get(d),h=d in l;if(u===void 0&&(!h||ga(l,d)?.writable)&&(u=o(()=>{var p=pa(h?l[d]:At),k=Ar(p);return k}),t.set(d,u)),u!==void 0){var f=n(u);return f===At?void 0:f}return Reflect.get(l,d,c)},getOwnPropertyDescriptor(l,d){var c=Reflect.getOwnPropertyDescriptor(l,d);if(c&&"value"in c){var u=t.get(d);u&&(c.value=n(u))}else if(c===void 0){var h=t.get(d),f=h?.v;if(h!==void 0&&f!==At)return{enumerable:!0,configurable:!0,value:f,writable:!0}}return c},has(l,d){if(d===Sr)return!0;var c=t.get(d),u=c!==void 0&&c.v!==At||Reflect.has(l,d);if(c!==void 0||et!==null&&(!u||ga(l,d)?.writable)){c===void 0&&(c=o(()=>{var f=u?pa(l[d]):At,p=Ar(f);return p}),t.set(d,c));var h=n(c);if(h===At)return!1}return u},set(l,d,c,u){var h=t.get(d),f=d in l;if(a&&d==="length")for(var p=c;p<h.v;p+=1){var k=t.get(p+"");k!==void 0?g(k,At):p in l&&(k=o(()=>Ar(At)),t.set(p+"",k))}if(h===void 0)(!f||ga(l,d)?.writable)&&(h=o(()=>Ar(void 0)),g(h,pa(c)),t.set(d,h));else{f=h.v!==At;var S=o(()=>pa(c));g(h,S)}var w=Reflect.getOwnPropertyDescriptor(l,d);if(w?.set&&w.set.call(u,c),!f){if(a&&typeof d=="string"){var x=t.get("length"),U=Number(d);Number.isInteger(U)&&U>=x.v&&g(x,U+1)}Ra(s)}return!0},ownKeys(l){n(s);var d=Reflect.ownKeys(l).filter(h=>{var f=t.get(h);return f===void 0||f.v!==At});for(var[c,u]of t)u.v!==At&&!(c in l)&&d.push(c);return d},setPrototypeOf(){Io()}})}function js(e){try{if(e!==null&&typeof e=="object"&&Sr in e)return e[Sr]}catch{}return e}function pl(e,r){return Object.is(js(e),js(r))}var Cr,zi,Li,Ri;function gl(){if(Cr===void 0){Cr=window,zi=/Firefox/.test(navigator.userAgent);var e=Element.prototype,r=Node.prototype,t=Text.prototype;Li=ga(r,"firstChild").get,Ri=ga(r,"nextSibling").get,Ls(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Ls(t)&&(t.__t=void 0)}}function Tr(e=""){return document.createTextNode(e)}function zr(e){return Li.call(e)}function Za(e){return Ri.call(e)}function v(e,r){return zr(e)}function Le(e,r=!1){{var t=zr(e);return t instanceof Comment&&t.data===""?Za(t):t}}function _(e,r=1,t=!1){let a=e;for(;r--;)a=Za(a);return a}function _l(e){e.textContent=""}function Ii(){return!1}let Ns=!1;function ml(){Ns||(Ns=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const r of e.target.elements)r.__on_r?.()})},{capture:!0}))}function bl(e,r,t,a=!0){a&&t();for(var s of r)e.addEventListener(s,t);Ja(()=>{for(var i of r)e.removeEventListener(i,t)})}function ia(e){var r=Ge,t=et;jt(null),hr(null);try{return e()}finally{jt(r),hr(t)}}function ji(e,r,t,a=t){e.addEventListener(r,()=>ia(t));const s=e.__on_r;s?e.__on_r=()=>{s(),a(!0)}:e.__on_r=()=>a(!0),ml()}function Ni(e){et===null&&(Ge===null&&Co(),Po()),oa&&Ao()}function yl(e,r){var t=r.last;t===null?r.last=r.first=e:(t.next=e,e.prev=t,r.last=e)}function _r(e,r,t){var a=et;a!==null&&(a.f&Wt)!==0&&(e|=Wt);var s={ctx:it,deps:null,nodes:null,f:e|Dt|sr,first:null,fn:r,last:null,next:null,parent:a,b:a&&a.b,prev:null,teardown:null,wv:0,ac:null};if(t)try{ya(s),s.f|=Tn}catch(l){throw Nt(s),l}else r!==null&&ea(s);var i=s;if(t&&i.deps===null&&i.teardown===null&&i.nodes===null&&i.first===i.last&&(i.f&xa)===0&&(i=i.first,(e&gr)!==0&&(e&Zr)!==0&&i!==null&&(i.f|=Zr)),i!==null&&(i.parent=a,a!==null&&yl(i,a),Ge!==null&&(Ge.f&St)!==0&&(e&na)===0)){var o=Ge;(o.effects??=[]).push(i)}return s}function Oa(){return Ge!==null&&!dr}function Ja(e){const r=_r(En,null,!1);return Et(r,xt),r.teardown=e,r}function Kn(e){Ni();var r=et.f,t=!Ge&&(r&$r)!==0&&(r&Tn)===0;if(t){var a=it;(a.e??=[]).push(e)}else return Di(e)}function Di(e){return _r(fs|bi,e,!1)}function wl(e){return Ni(),_r(En|bi,e,!0)}function kl(e){vr.ensure();const r=_r(na|xa,e,!0);return(t={})=>new Promise(a=>{t.outro?Yr(r,()=>{Nt(r),a(void 0)}):(Nt(r),a(void 0))})}function It(e){return _r(fs,e,!1)}function ee(e,r){var t=it,a={effect:null,ran:!1,deps:e};t.l.$.push(a),a.effect=Sa(()=>{e(),!a.ran&&(a.ran=!0,b(r))})}function Qt(){var e=it;Sa(()=>{for(var r of e.l.$){r.deps();var t=r.effect;(t.f&xt)!==0&&Et(t,ir),Ta(t)&&ya(t),r.ran=!1}})}function xl(e){return _r(hs|xa,e,!0)}function Sa(e,r=0){return _r(En|r,e,!0)}function le(e,r=[],t=[],a=[]){vl(a,r,t,s=>{_r(En,()=>e(...s.map(n)),!0)})}function ms(e,r=0){var t=_r(gr|r,e,!0);return t}function Zt(e){return _r($r|xa,e,!0)}function Oi(e){var r=e.teardown;if(r!==null){const t=oa,a=Ge;Ds(!0),jt(null);try{r.call(null)}finally{Ds(t),jt(a)}}}function Fi(e,r=!1){var t=e.first;for(e.first=e.last=null;t!==null;){const s=t.ac;s!==null&&ia(()=>{s.abort(ha)});var a=t.next;(t.f&na)!==0?t.parent=null:Nt(t,r),t=a}}function El(e){for(var r=e.first;r!==null;){var t=r.next;(r.f&$r)===0&&Nt(r),r=t}}function Nt(e,r=!0){var t=!1;(r||(e.f&mi)!==0)&&e.nodes!==null&&e.nodes.end!==null&&(qi(e.nodes.start,e.nodes.end),t=!0),Fi(e,r&&!t),_n(e,0),Et(e,Er);var a=e.nodes&&e.nodes.t;if(a!==null)for(const i of a)i.stop();Oi(e);var s=e.parent;s!==null&&s.first!==null&&Bi(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function qi(e,r){for(;e!==null;){var t=e===r?null:Za(e);e.remove(),e=t}}function Bi(e){var r=e.parent,t=e.prev,a=e.next;t!==null&&(t.next=a),a!==null&&(a.prev=t),r!==null&&(r.first===e&&(r.first=a),r.last===e&&(r.last=t))}function Yr(e,r,t=!0){var a=[];Ui(e,a,!0);var s=()=>{t&&Nt(e),r&&r()},i=a.length;if(i>0){var o=()=>--i||s();for(var l of a)l.out(o)}else s()}function Ui(e,r,t){if((e.f&Wt)===0){e.f^=Wt;var a=e.nodes&&e.nodes.t;if(a!==null)for(const l of a)(l.is_global||t)&&r.push(l);for(var s=e.first;s!==null;){var i=s.next,o=(s.f&Zr)!==0||(s.f&$r)!==0&&(e.f&gr)!==0;Ui(s,r,o?t:!1),s=i}}}function bs(e){Hi(e,!0)}function Hi(e,r){if((e.f&Wt)!==0){e.f^=Wt,(e.f&xt)===0&&(Et(e,Dt),ea(e));for(var t=e.first;t!==null;){var a=t.next,s=(t.f&Zr)!==0||(t.f&$r)!==0;Hi(t,s?r:!1),t=a}var i=e.nodes&&e.nodes.t;if(i!==null)for(const o of i)(o.is_global||r)&&o.in()}}function Vi(e,r){if(e.nodes)for(var t=e.nodes.start,a=e.nodes.end;t!==null;){var s=t===a?null:Za(t);r.append(t),t=s}}let fa=null;function Sl(e){var r=fa;try{if(fa=new Set,b(e),r!==null)for(var t of fa)r.add(t);return fa}finally{fa=r}}function Tl(e){for(var r of Sl(e))ra(r,r.v)}let Wr=!1;function gn(e){Wr=e}let oa=!1;function Ds(e){oa=e}let Ge=null,dr=!1;function jt(e){Ge=e}let et=null;function hr(e){et=e}let Mr=null;function Yi(e){Ge!==null&&(Mr===null?Mr=[e]:Mr.push(e))}let zt=null,Bt=0,Xt=null;function Ml(e){Xt=e}let Wi=1,Fa=0,Qr=Fa;function Os(e){Qr=e}function Qi(){return++Wi}function Ta(e){var r=e.f;if((r&Dt)!==0)return!0;if(r&St&&(e.f&=~Jr),(r&ir)!==0){var t=e.deps;if(t!==null)for(var a=t.length,s=0;s<a;s++){var i=t[s];if(Ta(i)&&Ai(i),i.wv>e.wv)return!0}(r&sr)!==0&&er===null&&Et(e,xt)}return!1}function Ki(e,r,t=!0){var a=e.reactions;if(a!==null&&!Mr?.includes(e))for(var s=0;s<a.length;s++){var i=a[s];(i.f&St)!==0?Ki(i,r,!1):r===i&&(t?Et(i,Dt):(i.f&xt)!==0&&Et(i,ir),ea(i))}}function Xi(e){var r=zt,t=Bt,a=Xt,s=Ge,i=Mr,o=it,l=dr,d=Qr,c=e.f;zt=null,Bt=0,Xt=null,Ge=(c&($r|na))===0?e:null,Mr=null,ma(e.ctx),dr=!1,Qr=++Fa,e.ac!==null&&(ia(()=>{e.ac.abort(ha)}),e.ac=null);try{e.f|=Yn;var u=e.fn,h=u(),f=e.deps;if(zt!==null){var p;if(_n(e,Bt),f!==null&&Bt>0)for(f.length=Bt+zt.length,p=0;p<zt.length;p++)f[Bt+p]=zt[p];else e.deps=f=zt;if(Oa()&&(e.f&sr)!==0)for(p=Bt;p<f.length;p++)(f[p].reactions??=[]).push(e)}else f!==null&&Bt<f.length&&(_n(e,Bt),f.length=Bt);if(Xa()&&Xt!==null&&!dr&&f!==null&&(e.f&(St|ir|Dt))===0)for(p=0;p<Xt.length;p++)Ki(Xt[p],e);return s!==null&&s!==e&&(Fa++,Xt!==null&&(a===null?a=Xt:a.push(...Xt))),(e.f&Ir)!==0&&(e.f^=Ir),h}catch(k){return Ei(k)}finally{e.f^=Yn,zt=r,Bt=t,Xt=a,Ge=s,Mr=i,ma(o),dr=l,Qr=d}}function $l(e,r){let t=r.reactions;if(t!==null){var a=yo.call(t,e);if(a!==-1){var s=t.length-1;s===0?t=r.reactions=null:(t[a]=t[s],t.pop())}}t===null&&(r.f&St)!==0&&(zt===null||!zt.includes(r))&&(Et(r,ir),(r.f&sr)!==0&&(r.f^=sr,r.f&=~Jr),$i(r),_n(r,0))}function _n(e,r){var t=e.deps;if(t!==null)for(var a=r;a<t.length;a++)$l(e,t[a])}function ya(e){var r=e.f;if((r&Er)===0){Et(e,xt);var t=et,a=Wr;et=e,Wr=!0;try{(r&(gr|So))!==0?El(e):Fi(e),Oi(e);var s=Xi(e);e.teardown=typeof s=="function"?s:null,e.wv=Wi;var i;Vn&&tl&&(e.f&Dt)!==0&&e.deps}finally{Wr=a,et=t}}}async function _a(){await Promise.resolve(),nl()}function n(e){var r=e.f,t=(r&St)!==0;if(fa?.add(e),Ge!==null&&!dr){var a=et!==null&&(et.f&Er)!==0;if(!a&&!Mr?.includes(e)){var s=Ge.deps;if((Ge.f&Yn)!==0)e.rv<Fa&&(e.rv=Fa,zt===null&&s!==null&&s[Bt]===e?Bt++:zt===null?zt=[e]:zt.includes(e)||zt.push(e));else{(Ge.deps??=[]).push(e);var i=e.reactions;i===null?e.reactions=[Ge]:i.includes(Ge)||i.push(Ge)}}}if(oa){if(jr.has(e))return jr.get(e);if(t){var o=e,l=o.v;return((o.f&xt)===0&&o.reactions!==null||Zi(o))&&(l=_s(o)),jr.set(o,l),l}}else t&&(!er?.has(e)||Je?.is_fork&&!Oa())&&(o=e,Ta(o)&&Ai(o),Wr&&Oa()&&(o.f&sr)===0&&Gi(o));if(er?.has(e))return er.get(e);if((e.f&Ir)!==0)throw e.v;return e.v}function Gi(e){if(e.deps!==null){e.f^=sr;for(const r of e.deps)(r.reactions??=[]).push(e),(r.f&St)!==0&&(r.f&sr)===0&&Gi(r)}}function Zi(e){if(e.v===At)return!0;if(e.deps===null)return!1;for(const r of e.deps)if(jr.has(r)||(r.f&St)!==0&&Zi(r))return!0;return!1}function b(e){var r=dr;try{return dr=!0,e()}finally{dr=r}}const Al=-7169;function Et(e,r){e.f=e.f&Al|r}function I(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Sr in e)Xn(e);else if(!Array.isArray(e))for(let r in e){const t=e[r];typeof t=="object"&&t&&Sr in t&&Xn(t)}}}function Xn(e,r=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!r.has(e)){r.add(e),e instanceof Date&&e.getTime();for(let a in e)try{Xn(e[a],r)}catch{}const t=us(e);if(t!==Object.prototype&&t!==Array.prototype&&t!==Map.prototype&&t!==Set.prototype&&t!==Date.prototype){const a=gi(t);for(let s in a){const i=a[s].get;if(i)try{i.call(e)}catch{}}}}}const Pl=["touchstart","touchmove"];function Cl(e){return Pl.includes(e)}const zl=new Set,Fs=new Set;function Ll(e,r,t,a={}){function s(i){if(a.capture||Pa.call(r,i),!i.cancelBubble)return ia(()=>t?.call(this,i))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?sa(()=>{r.addEventListener(e,s,a)}):r.addEventListener(e,s,a),s}function A(e,r,t,a,s){var i={capture:a,passive:s},o=Ll(e,r,t,i);(r===document.body||r===window||r===document||r instanceof HTMLMediaElement)&&Ja(()=>{r.removeEventListener(e,o,i)})}let qs=null;function Pa(e){var r=this,t=r.ownerDocument,a=e.type,s=e.composedPath?.()||[],i=s[0]||e.target;qs=e;var o=0,l=qs===e&&e.__root;if(l){var d=s.indexOf(l);if(d!==-1&&(r===document||r===window)){e.__root=r;return}var c=s.indexOf(r);if(c===-1)return;d<=c&&(o=d)}if(i=s[o]||e.target,i!==r){pi(e,"currentTarget",{configurable:!0,get(){return i||t}});var u=Ge,h=et;jt(null),hr(null);try{for(var f,p=[];i!==null;){var k=i.assignedSlot||i.parentNode||i.host||null;try{var S=i["__"+a];S!=null&&(!i.disabled||e.target===i)&&S.call(i,e)}catch(w){f?p.push(w):f=w}if(e.cancelBubble||k===r||k===null)break;i=k}if(f){for(let w of p)queueMicrotask(()=>{throw w});throw f}}finally{e.__root=r,delete e.currentTarget,jt(u),hr(h)}}}function Ji(e){var r=document.createElement("template");return r.innerHTML=e.replaceAll("<!>","<!---->"),r.content}function qa(e,r){var t=et;t.nodes===null&&(t.nodes={start:e,end:r,a:null,t:null})}function E(e,r){var t=(r&Xo)!==0,a=(r&Go)!==0,s,i=!e.startsWith("<!>");return()=>{s===void 0&&(s=Ji(i?e:"<!>"+e),t||(s=zr(s)));var o=a||zi?document.importNode(s,!0):s.cloneNode(!0);if(t){var l=zr(o),d=o.lastChild;qa(l,d)}else qa(o,o);return o}}function qr(e=""){{var r=Tr(e+"");return qa(r,r),r}}function at(){var e=document.createDocumentFragment(),r=document.createComment(""),t=Tr();return e.append(r,t),qa(r,t),e}function m(e,r){e!==null&&e.before(r)}let Gn=!0;function oe(e,r){var t=r==null?"":typeof r=="object"?r+"":r;t!==(e.__t??=e.nodeValue)&&(e.__t=t,e.nodeValue=t+"")}function Rl(e,r){return Il(e,r)}const ca=new Map;function Il(e,{target:r,anchor:t,props:a={},events:s,context:i,intro:o=!0}){gl();var l=new Set,d=h=>{for(var f=0;f<h.length;f++){var p=h[f];if(!l.has(p)){l.add(p);var k=Cl(p);r.addEventListener(p,Pa,{passive:k});var S=ca.get(p);S===void 0?(document.addEventListener(p,Pa,{passive:k}),ca.set(p,1)):ca.set(p,S+1)}}};d(xn(zl)),Fs.add(d);var c=void 0,u=kl(()=>{var h=t??r.appendChild(Tr());return ll(h,{pending:()=>{}},f=>{if(i){Tt({});var p=it;p.c=i}s&&(a.$$events=s),Gn=o,c=e(f,a)||{},Gn=!0,i&&Mt()}),()=>{for(var f of l){r.removeEventListener(f,Pa);var p=ca.get(f);--p===0?(document.removeEventListener(f,Pa),ca.delete(f)):ca.set(f,p)}Fs.delete(d),h!==t&&h.parentNode?.removeChild(h)}});return jl.set(c,u),c}let jl=new WeakMap;class Nl{anchor;#e=new Map;#t=new Map;#r=new Map;#a=new Set;#l=!0;constructor(r,t=!0){this.anchor=r,this.#l=t}#s=()=>{var r=Je;if(this.#e.has(r)){var t=this.#e.get(r),a=this.#t.get(t);if(a)bs(a),this.#a.delete(t);else{var s=this.#r.get(t);s&&(this.#t.set(t,s.effect),this.#r.delete(t),s.fragment.lastChild.remove(),this.anchor.before(s.fragment),a=s.effect)}for(const[i,o]of this.#e){if(this.#e.delete(i),i===r)break;const l=this.#r.get(o);l&&(Nt(l.effect),this.#r.delete(o))}for(const[i,o]of this.#t){if(i===t||this.#a.has(i))continue;const l=()=>{if(Array.from(this.#e.values()).includes(i)){var c=document.createDocumentFragment();Vi(o,c),c.append(Tr()),this.#r.set(i,{effect:o,fragment:c})}else Nt(o);this.#a.delete(i),this.#t.delete(i)};this.#l||!a?(this.#a.add(i),Yr(o,l,!1)):l()}}};#n=r=>{this.#e.delete(r);const t=Array.from(this.#e.values());for(const[a,s]of this.#r)t.includes(a)||(Nt(s.effect),this.#r.delete(a))};ensure(r,t){var a=Je,s=Ii();if(t&&!this.#t.has(r)&&!this.#r.has(r))if(s){var i=document.createDocumentFragment(),o=Tr();i.append(o),this.#r.set(r,{effect:Zt(()=>t(o)),fragment:i})}else this.#t.set(r,Zt(()=>t(this.anchor)));if(this.#e.set(a,r),s){for(const[l,d]of this.#t)l===r?a.skipped_effects.delete(d):a.skipped_effects.add(d);for(const[l,d]of this.#r)l===r?a.skipped_effects.delete(d.effect):a.skipped_effects.add(d.effect);a.oncommit(this.#s),a.ondiscard(this.#n)}else this.#s()}}function L(e,r,t=!1){var a=new Nl(e),s=t?Zr:0;function i(o,l){a.ensure(o,l)}ms(()=>{var o=!1;r((l,d=!0)=>{o=!0,i(d,l)}),o||i(!1,null)},s)}function pr(e,r){return r}function Dl(e,r,t){for(var a=[],s=r.length,i,o=r.length,l=0;l<s;l++){let h=r[l];Yr(h,()=>{if(i){if(i.pending.delete(h),i.done.add(h),i.pending.size===0){var f=e.outrogroups;Zn(xn(i.done)),f.delete(i),f.size===0&&(e.outrogroups=null)}}else o-=1},!1)}if(o===0){var d=a.length===0&&t!==null;if(d){var c=t,u=c.parentNode;_l(u),u.append(c),e.items.clear()}Zn(r,!d)}else i={pending:new Set(r),done:new Set},(e.outrogroups??=new Set).add(i)}function Zn(e,r=!0){for(var t=0;t<e.length;t++)Nt(e[t],r)}var Bs;function kt(e,r,t,a,s,i=null){var o=e,l=new Map,d=(r&yi)!==0;if(d){var c=e;o=c.appendChild(Tr())}var u=null,h=ht(()=>{var x=t();return Ka(x)?x:x==null?[]:xn(x)}),f,p=!0;function k(){w.fallback=u,Ol(w,f,o,r,a),u!==null&&(f.length===0?(u.f&wr)===0?bs(u):(u.f^=wr,Ca(u,null,o)):Yr(u,()=>{u=null}))}var S=ms(()=>{f=n(h);for(var x=f.length,U=new Set,G=Je,K=Ii(),J=0;J<x;J+=1){var ce=f[J],z=a(ce,J),q=p?null:l.get(z);q?(q.v&&ra(q.v,ce),q.i&&ra(q.i,J),K&&G.skipped_effects.delete(q.e)):(q=Fl(l,p?o:Bs??=Tr(),ce,z,J,s,r,t),p||(q.e.f|=wr),l.set(z,q)),U.add(z)}if(x===0&&i&&!u&&(p?u=Zt(()=>i(o)):(u=Zt(()=>i(Bs??=Tr())),u.f|=wr)),!p)if(K){for(const[C,xe]of l)U.has(C)||G.skipped_effects.add(xe.e);G.oncommit(k),G.ondiscard(()=>{})}else k();n(h)}),w={effect:S,items:l,outrogroups:null,fallback:u};p=!1}function Ol(e,r,t,a,s){var i=(a&Fo)!==0,o=r.length,l=e.items,d=e.effect.first,c,u=null,h,f=[],p=[],k,S,w,x;if(i)for(x=0;x<o;x+=1)k=r[x],S=s(k,x),w=l.get(S).e,(w.f&wr)===0&&(w.nodes?.a?.measure(),(h??=new Set).add(w));for(x=0;x<o;x+=1){if(k=r[x],S=s(k,x),w=l.get(S).e,e.outrogroups!==null)for(const xe of e.outrogroups)xe.pending.delete(w),xe.done.delete(w);if((w.f&wr)!==0)if(w.f^=wr,w===d)Ca(w,null,t);else{var U=u?u.next:d;w===e.effect.last&&(e.effect.last=w.prev),w.prev&&(w.prev.next=w.next),w.next&&(w.next.prev=w.prev),Pr(e,u,w),Pr(e,w,U),Ca(w,U,t),u=w,f=[],p=[],d=u.next;continue}if((w.f&Wt)!==0&&(bs(w),i&&(w.nodes?.a?.unfix(),(h??=new Set).delete(w))),w!==d){if(c!==void 0&&c.has(w)){if(f.length<p.length){var G=p[0],K;u=G.prev;var J=f[0],ce=f[f.length-1];for(K=0;K<f.length;K+=1)Ca(f[K],G,t);for(K=0;K<p.length;K+=1)c.delete(p[K]);Pr(e,J.prev,ce.next),Pr(e,u,J),Pr(e,ce,G),d=G,u=ce,x-=1,f=[],p=[]}else c.delete(w),Ca(w,d,t),Pr(e,w.prev,w.next),Pr(e,w,u===null?e.effect.first:u.next),Pr(e,u,w),u=w;continue}for(f=[],p=[];d!==null&&d!==w;)(c??=new Set).add(d),p.push(d),d=d.next;if(d===null)continue}(w.f&wr)===0&&f.push(w),u=w,d=w.next}if(e.outrogroups!==null){for(const xe of e.outrogroups)xe.pending.size===0&&(Zn(xn(xe.done)),e.outrogroups?.delete(xe));e.outrogroups.size===0&&(e.outrogroups=null)}if(d!==null||c!==void 0){var z=[];if(c!==void 0)for(w of c)(w.f&Wt)===0&&z.push(w);for(;d!==null;)(d.f&Wt)===0&&d!==e.fallback&&z.push(d),d=d.next;var q=z.length;if(q>0){var C=(a&yi)!==0&&o===0?t:null;if(i){for(x=0;x<q;x+=1)z[x].nodes?.a?.measure();for(x=0;x<q;x+=1)z[x].nodes?.a?.fix()}Dl(e,z,C)}}i&&sa(()=>{if(h!==void 0)for(w of h)w.nodes?.a?.apply()})}function Fl(e,r,t,a,s,i,o,l){var d=(o&Do)!==0?(o&qo)===0?M(t,!1,!1):ta(t):null,c=(o&Oo)!==0?ta(s):null;return{v:d,i:c,e:Zt(()=>(i(r,d??t,c??s,l),()=>{e.delete(a)}))}}function Ca(e,r,t){if(e.nodes)for(var a=e.nodes.start,s=e.nodes.end,i=r&&(r.f&wr)===0?r.nodes.start:t;a!==null;){var o=Za(a);if(i.before(a),a===s)return;a=o}}function Pr(e,r,t){r===null?e.effect.first=t:r.next=t,t===null?e.effect.last=r:t.prev=r}function re(e,r,t=!1,a=!1,s=!1){var i=e,o="";le(()=>{var l=et;if(o!==(o=r()??"")&&(l.nodes!==null&&(qi(l.nodes.start,l.nodes.end),l.nodes=null),o!=="")){var d=o+"";t?d=`<svg>${d}</svg>`:a&&(d=`<math>${d}</math>`);var c=Ji(d);if((t||a)&&(c=zr(c)),qa(zr(c),c.lastChild),t||a)for(;zr(c);)i.before(zr(c));else i.before(c)}})}function cn(e,r,t,a,s){var i=r.$$slots?.[t],o=!1;i===!0&&(i=r[t==="default"?"children":t],o=!0),i===void 0||i(e,o?()=>a:a)}const ql=()=>performance.now(),yr={tick:e=>requestAnimationFrame(e),now:()=>ql(),tasks:new Set};function eo(){const e=yr.now();yr.tasks.forEach(r=>{r.c(e)||(yr.tasks.delete(r),r.f())}),yr.tasks.size!==0&&yr.tick(eo)}function Bl(e){let r;return yr.tasks.size===0&&yr.tick(eo),{promise:new Promise(t=>{yr.tasks.add(r={c:e,f:t})}),abort(){yr.tasks.delete(r)}}}function an(e,r){ia(()=>{e.dispatchEvent(new CustomEvent(r))})}function Ul(e){if(e==="float")return"cssFloat";if(e==="offset")return"cssOffset";if(e.startsWith("--"))return e;const r=e.split("-");return r.length===1?r[0]:r[0]+r.slice(1).map(t=>t[0].toUpperCase()+t.slice(1)).join("")}function Us(e){const r={},t=e.split(";");for(const a of t){const[s,i]=a.split(":");if(!s||i===void 0)break;const o=Ul(s.trim());r[o]=i.trim()}return r}const Hl=e=>e;function pt(e,r,t,a){var s=(e&Wo)!==0,i=(e&Qo)!==0,o=s&&i,l=(e&Ko)!==0,d=o?"both":s?"in":"out",c,u=r.inert,h=r.style.overflow,f,p;function k(){return ia(()=>c??=t()(r,a?.()??{},{direction:d}))}var S={is_global:l,in(){if(r.inert=u,!s){p?.abort(),p?.reset?.();return}i||f?.abort(),an(r,"introstart"),f=Jn(r,k(),p,1,()=>{an(r,"introend"),f?.abort(),f=c=void 0,r.style.overflow=h})},out(G){if(!i){G?.(),c=void 0;return}r.inert=!0,an(r,"outrostart"),p=Jn(r,k(),f,0,()=>{an(r,"outroend"),G?.()})},stop:()=>{f?.abort(),p?.abort()}},w=et;if((w.nodes.t??=[]).push(S),s&&Gn){var x=l;if(!x){for(var U=w.parent;U&&(U.f&Zr)!==0;)for(;(U=U.parent)&&(U.f&gr)===0;);x=!U||(U.f&Tn)!==0}x&&It(()=>{b(()=>S.in())})}}function Jn(e,r,t,a,s){var i=a===1;if(xo(r)){var o,l=!1;return sa(()=>{if(!l){var w=r({direction:i?"in":"out"});o=Jn(e,w,t,a,s)}}),{abort:()=>{l=!0,o?.abort()},deactivate:()=>o.deactivate(),reset:()=>o.reset(),t:()=>o.t()}}if(t?.deactivate(),!r?.duration)return s(),{abort:Ht,deactivate:Ht,reset:Ht,t:()=>a};const{delay:d=0,css:c,tick:u,easing:h=Hl}=r;var f=[];if(i&&t===void 0&&(u&&u(0,1),c)){var p=Us(c(0,1));f.push(p,p)}var k=()=>1-a,S=e.animate(f,{duration:d,fill:"forwards"});return S.onfinish=()=>{S.cancel();var w=t?.t()??1-a;t?.abort();var x=a-w,U=r.duration*Math.abs(x),G=[];if(U>0){var K=!1;if(c)for(var J=Math.ceil(U/16.666666666666668),ce=0;ce<=J;ce+=1){var z=w+x*h(ce/J),q=Us(c(z,1-z));G.push(q),K||=q.overflow==="hidden"}K&&(e.style.overflow="hidden"),k=()=>{var C=S.currentTime;return w+x*h(C/U)},u&&Bl(()=>{if(S.playState!=="running")return!1;var C=k();return u(C,1-C),!0})}S=e.animate(G,{duration:U,fill:"forwards"}),S.onfinish=()=>{k=()=>a,u?.(a,1-a),s()}},{abort:()=>{S&&(S.cancel(),S.effect=null,S.onfinish=Ht)},deactivate:()=>{s=Ht},reset:()=>{a===0&&u?.(1,0)},t:()=>k()}}function ys(e,r,t){It(()=>{var a=b(()=>r(e,t?.())||{});if(t&&a?.update){var s=!1,i={};Sa(()=>{var o=t();I(o),s&&gs(i,o)&&(i=o,a.update(o))}),s=!0}if(a?.destroy)return()=>a.destroy()})}const Hs=[...` 	
\r\fÂ \v\uFEFF`];function Vl(e,r,t){var a=e==null?"":""+e;if(r&&(a=a?a+" "+r:r),t){for(var s in t)if(t[s])a=a?a+" "+s:s;else if(a.length)for(var i=s.length,o=0;(o=a.indexOf(s,o))>=0;){var l=o+i;(o===0||Hs.includes(a[o-1]))&&(l===a.length||Hs.includes(a[l]))?a=(o===0?"":a.substring(0,o))+a.substring(l+1):o=l}}return a===""?null:a}function Vs(e,r=!1){var t=r?" !important;":";",a="";for(var s in e){var i=e[s];i!=null&&i!==""&&(a+=" "+s+": "+i+t)}return a}function Rn(e){return e[0]!=="-"||e[1]!=="-"?e.toLowerCase():e}function Yl(e,r){if(r){var t="",a,s;if(Array.isArray(r)?(a=r[0],s=r[1]):a=r,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var i=!1,o=0,l=!1,d=[];a&&d.push(...Object.keys(a).map(Rn)),s&&d.push(...Object.keys(s).map(Rn));var c=0,u=-1;const S=e.length;for(var h=0;h<S;h++){var f=e[h];if(l?f==="/"&&e[h-1]==="*"&&(l=!1):i?i===f&&(i=!1):f==="/"&&e[h+1]==="*"?l=!0:f==='"'||f==="'"?i=f:f==="("?o++:f===")"&&o--,!l&&i===!1&&o===0){if(f===":"&&u===-1)u=h;else if(f===";"||h===S-1){if(u!==-1){var p=Rn(e.substring(c,u).trim());if(!d.includes(p)){f!==";"&&h++;var k=e.substring(c,h).trim();t+=" "+k+";"}}c=h+1,u=-1}}}}return a&&(t+=Vs(a)),s&&(t+=Vs(s,!0)),t=t.trim(),t===""?null:t}return e==null?null:String(e)}function Ye(e,r,t,a,s,i){var o=e.__className;if(o!==t||o===void 0){var l=Vl(t,a,i);l==null?e.removeAttribute("class"):e.className=l,e.__className=t}else if(i&&s!==i)for(var d in i){var c=!!i[d];(s==null||c!==!!s[d])&&e.classList.toggle(d,c)}return i}function In(e,r={},t,a){for(var s in t){var i=t[s];r[s]!==i&&(t[s]==null?e.style.removeProperty(s):e.style.setProperty(s,i,a))}}function ot(e,r,t,a){var s=e.__style;if(s!==r){var i=Yl(r,a);i==null?e.removeAttribute("style"):e.style.cssText=i,e.__style=r}else a&&(Array.isArray(a)?(In(e,t?.[0],a[0]),In(e,t?.[1],a[1],"important")):In(e,t,a));return a}function to(e,r,t=!1){if(e.multiple){if(r==null)return;if(!Ka(r))return Jo();for(var a of e.options)a.selected=r.includes(Ia(a));return}for(a of e.options){var s=Ia(a);if(pl(s,r)){a.selected=!0;return}}(!t||r!==void 0)&&(e.selectedIndex=-1)}function Wl(e){var r=new MutationObserver(()=>{to(e,e.__value)});r.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Ja(()=>{r.disconnect()})}function Ql(e,r,t=r){var a=new WeakSet,s=!0;ji(e,"change",i=>{var o=i?"[selected]":":checked",l;if(e.multiple)l=[].map.call(e.querySelectorAll(o),Ia);else{var d=e.querySelector(o)??e.querySelector("option:not([disabled])");l=d&&Ia(d)}t(l),Je!==null&&a.add(Je)}),It(()=>{var i=r();if(e===document.activeElement){var o=za??Je;if(a.has(o))return}if(to(e,i,s),s&&i===void 0){var l=e.querySelector(":checked");l!==null&&(i=Ia(l),t(i))}e.__value=i,s=!1}),Wl(e)}function Ia(e){return"__value"in e?e.__value:e.value}const Kl=Symbol("is custom element"),Xl=Symbol("is html");function ro(e,r){var t=ao(e);t.value===(t.value=r??void 0)||e.value===r&&(r!==0||e.nodeName!=="PROGRESS")||(e.value=r??"")}function Ot(e,r,t,a){var s=ao(e);s[r]!==(s[r]=t)&&(r==="loading"&&(e[Mo]=t),t==null?e.removeAttribute(r):typeof t!="string"&&Gl(e).includes(r)?e[r]=t:e.setAttribute(r,t))}function ao(e){return e.__attributes??={[Kl]:e.nodeName.includes("-"),[Xl]:e.namespaceURI===Zo}}var Ys=new Map;function Gl(e){var r=e.getAttribute("is")||e.nodeName,t=Ys.get(r);if(t)return t;Ys.set(r,t=[]);for(var a,s=e,i=Element.prototype;i!==s;){a=gi(s);for(var o in a)a[o].set&&t.push(o);s=us(s)}return t}function Ba(e,r,t=r){var a=new WeakSet;ji(e,"input",async s=>{var i=s?e.defaultValue:e.value;if(i=jn(e)?Nn(i):i,t(i),Je!==null&&a.add(Je),await _a(),i!==(i=r())){var o=e.selectionStart,l=e.selectionEnd,d=e.value.length;if(e.value=i??"",l!==null){var c=e.value.length;o===l&&l===d&&c>d?(e.selectionStart=c,e.selectionEnd=c):(e.selectionStart=o,e.selectionEnd=Math.min(l,c))}}}),b(r)==null&&e.value&&(t(jn(e)?Nn(e.value):e.value),Je!==null&&a.add(Je)),Sa(()=>{var s=r();if(e===document.activeElement){var i=za??Je;if(a.has(i))return}jn(e)&&s===Nn(e.value)||e.type==="date"&&!s&&!e.value||s!==e.value&&(e.value=s??"")})}function jn(e){var r=e.type;return r==="number"||r==="range"}function Nn(e){return e===""?null:+e}class ws{#e=new WeakMap;#t;#r;static entries=new WeakMap;constructor(r){this.#r=r}observe(r,t){var a=this.#e.get(r)||new Set;return a.add(t),this.#e.set(r,a),this.#a().observe(r,this.#r),()=>{var s=this.#e.get(r);s.delete(t),s.size===0&&(this.#e.delete(r),this.#t.unobserve(r))}}#a(){return this.#t??(this.#t=new ResizeObserver(r=>{for(var t of r){ws.entries.set(t.target,t);for(var a of this.#e.get(t.target)||[])a(t)}}))}}var Zl=new ws({box:"border-box"});function Ws(e,r,t){var a=Zl.observe(e,()=>t(e[r]));It(()=>(b(()=>t(e[r])),a))}function Qs(e,r){return e===r||e?.[Sr]===r}function Dr(e={},r,t,a){return It(()=>{var s,i;return Sa(()=>{s=i,i=[],b(()=>{e!==t(...i)&&(r(e,...i),s&&Qs(t(...s),e)&&r(null,...s))})}),()=>{sa(()=>{i&&Qs(t(...i),e)&&r(null,...i)})}}),e}function Ks(e,r){bl(window,["resize"],()=>ia(()=>r(window[e])))}function Yt(e){return function(...r){var t=r[0];return t.stopPropagation(),e?.apply(this,r)}}function Pt(e=!1){const r=it,t=r.l.u;if(!t)return;let a=()=>I(r.s);if(e){let s=0,i={};const o=Ga(()=>{let l=!1;const d=r.s;for(const c in d)d[c]!==i[c]&&(i[c]=d[c],l=!0);return l&&s++,s});a=()=>n(o)}t.b.length&&wl(()=>{Xs(r,a),hn(t.b)}),Kn(()=>{const s=b(()=>t.m.map(Eo));return()=>{for(const i of s)typeof i=="function"&&i()}}),t.a.length&&Kn(()=>{Xs(r,a),hn(t.a)})}function Xs(e,r){if(e.l.s)for(const t of e.l.s)n(t);r()}function Ua(e,r){var t=e.$$events?.[r.type],a=Ka(t)?t.slice():t==null?[]:[t];for(var s of a)s.call(this,r)}function ks(e,r,t){if(e==null)return r(void 0),t&&t(void 0),Ht;const a=b(()=>e.subscribe(r,t));return a.unsubscribe?()=>a.unsubscribe():a}const va=[];function Jl(e,r){return{subscribe:qe(e,r).subscribe}}function qe(e,r=Ht){let t=null;const a=new Set;function s(l){if(gs(e,l)&&(e=l,t)){const d=!va.length;for(const c of a)c[1](),va.push(c,e);if(d){for(let c=0;c<va.length;c+=2)va[c][0](va[c+1]);va.length=0}}}function i(l){s(l(e))}function o(l,d=Ht){const c=[l,d];return a.add(c),a.size===1&&(t=r(s,i)||Ht),l(e),()=>{a.delete(c),a.size===0&&t&&(t(),t=null)}}return{set:s,update:i,subscribe:o}}function no(e,r,t){const a=!Array.isArray(e),s=a?[e]:e;if(!s.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const i=r.length<2;return Jl(t,(o,l)=>{let d=!1;const c=[];let u=0,h=Ht;const f=()=>{if(u)return;h();const k=r(a?c[0]:c,o,l);i?o(k):h=typeof k=="function"?k:Ht},p=s.map((k,S)=>ks(k,w=>{c[S]=w,u&=~(1<<S),d&&f()},()=>{u|=1<<S}));return d=!0,f(),function(){hn(p),h(),d=!1}})}function Xe(e){let r;return ks(e,t=>r=t)(),r}let nn=!1,es=Symbol();function ke(e,r,t){const a=t[r]??={store:null,source:M(void 0),unsubscribe:Ht};if(a.store!==e&&!(es in t))if(a.unsubscribe(),a.store=e??null,e==null)a.source.v=void 0,a.unsubscribe=Ht;else{var s=!0;a.unsubscribe=ks(e,i=>{s?a.source.v=i:g(a.source,i)}),s=!1}return e&&es in t?Xe(e):n(a.source)}function Gs(e,r){return e.set(r),r}function Ft(){const e={};function r(){Ja(()=>{for(var t in e)e[t].unsubscribe();pi(e,es,{enumerable:!1,value:!0})})}return[e,r]}function ec(e,r,t){return e.set(t),r}function tc(e){var r=nn;try{return nn=!1,[e(),nn]}finally{nn=r}}function ft(e,r,t,a){var s=!Ea||(t&Uo)!==0,i=(t&Vo)!==0,o=(t&Yo)!==0,l=a,d=!0,c=()=>(d&&(d=!1,l=o?b(a):a),l),u;if(i){var h=Sr in e||To in e;u=ga(e,r)?.set??(h&&r in e?G=>e[r]=G:void 0)}var f,p=!1;i?[f,p]=tc(()=>e[r]):f=e[r],f===void 0&&a!==void 0&&(f=c(),u&&(s&&Lo(),u(f)));var k;if(s?k=()=>{var G=e[r];return G===void 0?c():(d=!0,G)}:k=()=>{var G=e[r];return G!==void 0&&(l=void 0),G===void 0?l:G},s&&(t&Ho)===0)return k;if(u){var S=e.$$legacy;return(function(G,K){return arguments.length>0?((!s||!K||S||p)&&u(K?k():G),G):k()})}var w=!1,x=((t&Bo)!==0?Ga:ht)(()=>(w=!1,k()));i&&n(x);var U=et;return(function(G,K){if(arguments.length>0){const J=K?n(x):s&&i?pa(G):G;return g(x,J),w=!0,l!==void 0&&(l=J),G}return oa&&w||(U.f&Er)!==0?x.v:n(x)})}function la(e){it===null&&ps(),Ea&&it.l!==null?ac(it).m.push(e):Kn(()=>{const r=b(e);if(typeof r=="function")return r})}function so(e){it===null&&ps(),la(()=>()=>b(e))}function rc(e,r,{bubbles:t=!1,cancelable:a=!1}={}){return new CustomEvent(e,{detail:r,bubbles:t,cancelable:a})}function xs(){const e=it;return e===null&&ps(),(r,t,a)=>{const s=e.s.$$events?.[r];if(s){const i=Ka(s)?s.slice():[s],o=rc(r,t,a);for(const l of i)l.call(e.x,o);return!o.defaultPrevented}return!0}}function ac(e){var r=e.l;return r.u??={a:[],b:[],m:[]}}const nc="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(nc);rl();const sc=e=>e;function io(e){const r=e-1;return r*r*r+1}function Zs(e){const r=typeof e=="string"&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return r?[parseFloat(r[1]),r[2]||"px"]:[e,"px"]}function Lt(e,{delay:r=0,duration:t=400,easing:a=sc}={}){const s=+getComputedStyle(e).opacity;return{delay:r,duration:t,easing:a,css:i=>`opacity: ${i*s}`}}function oo(e,{delay:r=0,duration:t=400,easing:a=io,x:s=0,y:i=0,opacity:o=0}={}){const l=getComputedStyle(e),d=+l.opacity,c=l.transform==="none"?"":l.transform,u=d*(1-o),[h,f]=Zs(s),[p,k]=Zs(i);return{delay:r,duration:t,easing:a,css:(S,w)=>`
			transform: ${c} translate(${(1-S)*h}${f}, ${(1-S)*p}${k});
			opacity: ${d-u*w}`}}function Es(e,{delay:r=0,duration:t=400,easing:a=io,start:s=0,opacity:i=0}={}){const o=getComputedStyle(e),l=+o.opacity,d=o.transform==="none"?"":o.transform,c=1-s,u=l*(1-i);return{delay:r,duration:t,easing:a,css:(h,f)=>`
			transform: ${d} scale(${1-c*f});
			opacity: ${l-u*f}
		`}}const ic='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-arrows-shuffle-2"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 4l3 3l-3 3" /><path d="M18 20l3 -3l-3 -3" /><path d="M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5" /><path d="M3 17h3a5 5 0 0 0 5 -5a5 5 0 0 1 5 -5h5" /></svg>',oc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-deezer"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 16.5h2v.5h-2z" /><path d="M8 16.5h2.5v.5h-2.5z" /><path d="M16 17h-2.5v-.5h2.5z" /><path d="M21.5 17h-2.5v-.5h2.5z" /><path d="M21.5 13h-2.5v.5h2.5z" /><path d="M21.5 9.5h-2.5v.5h2.5z" /><path d="M21.5 6h-2.5v.5h2.5z" /><path d="M16 13h-2.5v.5h2.5z" /><path d="M8 13.5h2.5v-.5h-2.5z" /><path d="M8 9.5h2.5v.5h-2.5z" /></svg>',lc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-compact-down"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 11l8 3l8 -3" /></svg>',cc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-compact-left"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M13 20l-3 -8l3 -8" /></svg>',vc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-left"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 6l-6 6l6 6" /></svg>',Js='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-disc"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0" /><path d="M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M7 12a5 5 0 0 1 5 -5" /><path d="M12 17a5 5 0 0 0 5 -5" /></svg>',dc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-grip-horizontal"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M5 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M12 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M12 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M19 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M19 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /></svg>',uc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-heart"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M19.5 12.572l-7.5 7.428l-7.5 -7.428a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572" /></svg>',fc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-heart"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6.979 3.074a6 6 0 0 1 4.988 1.425l.037 .033l.034 -.03a6 6 0 0 1 4.733 -1.44l.246 .036a6 6 0 0 1 3.364 10.008l-.18 .185l-.048 .041l-7.45 7.379a1 1 0 0 1 -1.313 .082l-.094 -.082l-7.493 -7.422a6 6 0 0 1 3.176 -10.215z" /></svg>',hc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-menu-2"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 6l16 0" /><path d="M4 12l16 0" /><path d="M4 18l16 0" /></svg>',Dn='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-music"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 17a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /><path d="M13 17a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /><path d="M9 17v-13h10v13" /><path d="M9 8h10" /></svg>',pc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-pause"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z" /><path d="M17 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z" /></svg>',gc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-player-play"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 4v16l13 -8z" /></svg>',_c='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-play"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 4v16a1 1 0 0 0 1.524 .852l13 -8a1 1 0 0 0 0 -1.704l-13 -8a1 1 0 0 0 -1.524 .852z" /></svg>',mc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-skip-back"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M19.496 4.136l-12 7a1 1 0 0 0 0 1.728l12 7a1 1 0 0 0 1.504 -.864v-14a1 1 0 0 0 -1.504 -.864z" /><path d="M4 4a1 1 0 0 1 .993 .883l.007 .117v14a1 1 0 0 1 -1.993 .117l-.007 -.117v-14a1 1 0 0 1 1 -1z" /></svg>',bc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-skip-forward"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 5v14a1 1 0 0 0 1.504 .864l12 -7a1 1 0 0 0 0 -1.728l-12 -7a1 1 0 0 0 -1.504 .864z" /><path d="M20 4a1 1 0 0 1 .993 .883l.007 .117v14a1 1 0 0 1 -1.993 .117l-.007 -.117v-14a1 1 0 0 1 1 -1z" /></svg>',yc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-playlist"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0" /><path d="M17 17v-13h4" /><path d="M13 5h-10" /><path d="M3 9l10 0" /><path d="M9 13h-6" /></svg>',wc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-radio"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3l-9.371 3.749a1 1 0 0 0 -.629 .928v11.323a1 1 0 0 0 1 1h14a1 1 0 0 0 1 -1v-11a1 1 0 0 0 -1 -1h-14.5" /><path d="M4 12h16" /><path d="M7 12v-2" /><path d="M17 16v.01" /><path d="M13 16v.01" /></svg>',kc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-refresh"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4" /><path d="M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4" /></svg>',xc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-repeat"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 12v-3a3 3 0 0 1 3 -3h13m-3 -3l3 3l-3 3" /><path d="M20 12v3a3 3 0 0 1 -3 3h-13m3 3l-3 -3l3 -3" /></svg>',Ec='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-search"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0" /><path d="M21 21l-6 -6" /></svg>',Sc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-settings"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z" /><path d="M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /></svg>',Tc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-trash"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 7l16 0" /><path d="M10 11l0 6" /><path d="M14 11l0 6" /><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12" /><path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3" /></svg>',Mc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 8a5 5 0 0 1 0 8" /><path d="M17.7 5a9 9 0 0 1 0 14" /><path d="M6 15h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l3.5 -4.5a.8 .8 0 0 1 1.5 .5v14a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5" /></svg>',$c='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume-2"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 8a5 5 0 0 1 0 8" /><path d="M6 15h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l3.5 -4.5a.8 .8 0 0 1 1.5 .5v14a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5" /></svg>',Ac='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume-3"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 15h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l3.5 -4.5a.8 .8 0 0 1 1.5 .5v14a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5" /><path d="M16 10l4 4m0 -4l-4 4" /></svg>',Pc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume-off"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 8a5 5 0 0 1 1.912 4.934m-1.377 2.602a5 5 0 0 1 -.535 .464" /><path d="M17.7 5a9 9 0 0 1 2.362 11.086m-1.676 2.299a9 9 0 0 1 -.686 .615" /><path d="M9.069 5.054l.431 -.554a.8 .8 0 0 1 1.5 .5v2m0 4v8a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l1.294 -1.664" /><path d="M3 3l18 18" /></svg>',Cc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-x"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 6l-12 12" /><path d="M6 6l12 12" /></svg>',zc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-device-floppy"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2" /><path d="M12 14m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0" /><path d="M14 4l0 4l-6 0l0 -4" /></svg>',Lc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-file-pencil"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3v4a1 1 0 0 0 1 1h4" /><path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z" /><path d="M10 18l5 -5a1.414 1.414 0 0 0 -2 -2l-5 5v2h2z" /></svg>',ei='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-plus"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 5l0 14" /><path d="M5 12l14 0" /></svg>',Rc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-circle-check"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0" /><path d="M9 12l2 2l4 -4" /></svg>',Ic='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-dots"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /></svg>',jc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-sort-descending"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 6l9 0" /><path d="M4 12l7 0" /><path d="M4 18l7 0" /><path d="M15 15l3 3l3 -3" /><path d="M18 6l0 12" /></svg>',Nc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-sort-ascending"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 6l7 0" /><path d="M4 12l7 0" /><path d="M4 18l9 0" /><path d="M15 9l3 -3l3 3" /><path d="M18 6l0 12" /></svg>',y={ARTISTS:Dn,ALBUMS:Js,GENRES:Dn,PLAYLISTS:yc,RADIO:wc,SEARCH:Ec,PLAY:_c,PLAY_OUTLINE:gc,PAUSE:pc,PREVIOUS:mc,NEXT:bc,SHUFFLE:ic,REPEAT:xc,VOLUME_FULL:Mc,VOLUME_MEDIUM:$c,VOLUME_MUTE:Ac,VOLUME_OFF:Pc,HEART:uc,HEART_FILLED:fc,SYNC:kc,SETTINGS:Sc,CLOSE:Cc,MENU:hc,BACK:vc,BACK_COMPACT:cc,CHEVRON_DOWN:lc,DRAG_HANDLE:dc,REMOVE:Tc,DEEZER:oc,SAVE:zc,EDIT:Lc,ADD:ei,ACCEPT:Rc,DOTS:Ic,ADD_TO_PLAYLIST:ei,ALBUM_LINK:Js,ARTIST_LINK:Dn,SORT_DESC:jc,SORT_ASC:Nc};function wa(e){if(!e||!e.image)return null;if(e.image.startsWith("http"))return e.image;let r="";return e.image==="local"?r=`${e.name}.jpg`:r=e.image,`/imagesw/radio-logos/thumbs/${encodeURIComponent(r)}`}function ti(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}const ts=[{id:"default",label:"Default (Moode Dark)",colors:{"--c-white-10":"rgba(255, 255, 255, 0.1)","--c-white-20":"rgba(255, 255, 255, 0.2)","--c-white-30":"rgba(255, 255, 255, 0.3)","--c-white-50":"rgba(255, 255, 255, 0.5)","--c-white-60":"rgba(255, 255, 255, 0.6)","--c-white-90":"rgba(255, 255, 255, 0.9)","--c-black-20":"rgba(0, 0, 0, 0.2)","--c-black-50":"rgba(0, 0, 0, 0.5)","--c-black-70":"rgba(0, 0, 0, 0.7)","--c-black-80":"rgba(0, 0, 0, 0.8)","--c-black-90":"rgba(0, 0, 0, 0.9)","--c-accent":"#fa2d48","--c-accent-hover":"#ff4d65","--c-text-primary":"#ffffff","--c-text-secondary":"rgba(255, 255, 255, 0.6)","--c-text-muted":"#888888","--c-text-inverse":"#000000","--c-bg-app":"#000000","--c-bg-main":"#121212","--c-bg-sidebar":"#000000","--c-bg-card":"#1a1a1a","--c-bg-placeholder":"rgba(255, 255, 255, 0.1)","--c-bg-glass":"rgba(18, 18, 18, 0.95)","--c-bg-toast":"#333333","--c-heart":"#ff4444","--c-error":"#ff4444","--c-surface-hover":"rgba(255, 255, 255, 0.1)","--c-surface-active":"rgba(255, 255, 255, 0.2)","--c-surface-input":"#1a1a1a","--c-surface-input-focus":"rgba(255, 255, 255, 0.1)","--c-surface-button":"rgba(255, 255, 255, 0.1)","--c-surface-button-hover":"rgba(255, 255, 255, 0.1)","--c-surface-drag-phantom":"#1a1a1a","--c-surface-drag-land":"rgba(255, 255, 255, 0.1)","--c-rail-bg":"rgba(255, 255, 255, 0.2)","--c-rail-bg-hover":"rgba(255, 255, 255, 0.3)","--c-skeleton-base":"rgba(255, 255, 255, 0.1)","--c-border":"rgba(255, 255, 255, 0.1)","--c-border-dim":"rgba(255, 255, 255, 0.1)","--c-border-bright":"rgba(255, 255, 255, 0.2)","--c-border-dashed":"rgba(255, 255, 255, 0.2)","--c-border-dashed-hover":"rgba(255, 255, 255, 0.5)","--c-overlay-dim":"rgba(0, 0, 0, 0.5)","--c-overlay-backdrop":"rgba(0, 0, 0, 0.8)","--c-shadow-card":"rgba(0, 0, 0, 0.3)","--c-shadow-popover":"rgba(0, 0, 0, 0.5)","--c-shadow-header":"rgba(0, 0, 0, 0.5)","--c-shadow-phantom":"rgba(0, 0, 0, 0.7)","--c-shadow-glow-accent":"rgba(250, 45, 72, 0.5)","--c-icon-idle":"#9ca3af","--c-icon-hover":"#ffffff","--c-icon-faint":"rgba(255, 255, 255, 0.5)","--icon-stroke-width":"1.5px","--header-height":"64px","--mini-player-height":"90px","--sidebar-width":"260px","--radius-sm":"4px","--radius-md":"8px","--radius-lg":"12px","--radius-xl":"20px","--radius-full":"9999px","--z-base":"1","--z-dock":"1000","--z-modal":"2000","--z-toast":"3000","--z-drag-item":"9999","--trans-fast":"0.2s ease","--trans-smooth":"0.3s cubic-bezier(0.2, 0.8, 0.2, 1)","--c-pl-0":"#fa2d48","--c-pl-1":"#2d7afa","--c-pl-2":"#2dfa85","--c-pl-3":"#faac2d","--c-pl-4":"#b82dfa","--c-pl-5":"#2dfaf3"}},{id:"gruvbox",label:"Gruvbox Dark",colors:{"--c-white-10":"rgba(251, 241, 199, 0.1)","--c-white-20":"rgba(251, 241, 199, 0.2)","--c-white-30":"rgba(251, 241, 199, 0.3)","--c-white-50":"rgba(251, 241, 199, 0.5)","--c-white-60":"rgba(251, 241, 199, 0.6)","--c-white-90":"rgba(251, 241, 199, 0.9)","--c-black-20":"rgba(40, 40, 40, 0.2)","--c-black-50":"rgba(40, 40, 40, 0.5)","--c-black-70":"rgba(40, 40, 40, 0.7)","--c-black-80":"rgba(40, 40, 40, 0.8)","--c-black-90":"rgba(40, 40, 40, 0.9)","--c-accent":"#d65d0e","--c-accent-hover":"#fe8019","--c-text-primary":"#fbf1c7","--c-text-secondary":"#ebdbb2","--c-text-muted":"#928374","--c-text-inverse":"#282828","--c-bg-app":"#282828","--c-bg-main":"#282828","--c-bg-sidebar":"#282828","--c-bg-card":"#3c3836","--c-bg-placeholder":"#504945","--c-bg-glass":"rgba(40, 40, 40, 0.98)","--c-bg-toast":"#32302f","--c-heart":"#fb4934","--c-error":"#cc241d","--c-surface-hover":"#3c3836","--c-surface-active":"#504945","--c-surface-input":"#3c3836","--c-surface-input-focus":"#504945","--c-surface-button":"rgba(251, 241, 199, 0.1)","--c-surface-button-hover":"rgba(251, 241, 199, 0.2)","--c-surface-drag-phantom":"#504945","--c-surface-drag-land":"rgba(251, 241, 199, 0.1)","--c-rail-bg":"#504945","--c-rail-bg-hover":"#665c54","--c-skeleton-base":"#3c3836","--c-border":"#504945","--c-border-dim":"#3c3836","--c-border-bright":"#665c54","--c-border-dashed":"rgba(168, 153, 132, 0.2)","--c-border-dashed-hover":"rgba(168, 153, 132, 0.5)","--c-overlay-dim":"rgba(40, 40, 40, 0.6)","--c-overlay-backdrop":"rgba(29, 32, 33, 0.8)","--c-shadow-card":"rgba(0, 0, 0, 0.3)","--c-shadow-popover":"rgba(0, 0, 0, 0.5)","--c-shadow-header":"rgba(0, 0, 0, 0.2)","--c-shadow-phantom":"rgba(0, 0, 0, 0.5)","--c-shadow-glow-accent":"rgba(214, 93, 14, 0.3)","--c-icon-idle":"#a89984","--c-icon-hover":"#fbf1c7","--c-icon-faint":"#504945","--icon-stroke-width":"1.5px","--header-height":"64px","--mini-player-height":"90px","--sidebar-width":"260px","--radius-sm":"4px","--radius-md":"8px","--radius-lg":"12px","--radius-xl":"16px","--radius-full":"9999px","--z-base":"1","--z-dock":"1000","--z-modal":"2000","--z-toast":"3000","--z-drag-item":"9999","--trans-fast":"0.2s ease","--trans-smooth":"0.3s cubic-bezier(0.2, 0.8, 0.2, 1)","--c-pl-0":"#cc241d","--c-pl-1":"#458588","--c-pl-2":"#a6e3a1","--c-pl-3":"#d65d0e","--c-pl-4":"#b16286","--c-pl-5":"#fabd2f"}}];function Dc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var On={exports:{}},Fn={exports:{}},ri;function Oc(){return ri||(ri=1,(function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={rotl:function(t,a){return t<<a|t>>>32-a},rotr:function(t,a){return t<<32-a|t>>>a},endian:function(t){if(t.constructor==Number)return r.rotl(t,8)&16711935|r.rotl(t,24)&4278255360;for(var a=0;a<t.length;a++)t[a]=r.endian(t[a]);return t},randomBytes:function(t){for(var a=[];t>0;t--)a.push(Math.floor(Math.random()*256));return a},bytesToWords:function(t){for(var a=[],s=0,i=0;s<t.length;s++,i+=8)a[i>>>5]|=t[s]<<24-i%32;return a},wordsToBytes:function(t){for(var a=[],s=0;s<t.length*32;s+=8)a.push(t[s>>>5]>>>24-s%32&255);return a},bytesToHex:function(t){for(var a=[],s=0;s<t.length;s++)a.push((t[s]>>>4).toString(16)),a.push((t[s]&15).toString(16));return a.join("")},hexToBytes:function(t){for(var a=[],s=0;s<t.length;s+=2)a.push(parseInt(t.substr(s,2),16));return a},bytesToBase64:function(t){for(var a=[],s=0;s<t.length;s+=3)for(var i=t[s]<<16|t[s+1]<<8|t[s+2],o=0;o<4;o++)s*8+o*6<=t.length*8?a.push(e.charAt(i>>>6*(3-o)&63)):a.push("=");return a.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/ig,"");for(var a=[],s=0,i=0;s<t.length;i=++s%4)i!=0&&a.push((e.indexOf(t.charAt(s-1))&Math.pow(2,-2*i+8)-1)<<i*2|e.indexOf(t.charAt(s))>>>6-i*2);return a}};Fn.exports=r})()),Fn.exports}var qn,ai;function ni(){if(ai)return qn;ai=1;var e={utf8:{stringToBytes:function(r){return e.bin.stringToBytes(unescape(encodeURIComponent(r)))},bytesToString:function(r){return decodeURIComponent(escape(e.bin.bytesToString(r)))}},bin:{stringToBytes:function(r){for(var t=[],a=0;a<r.length;a++)t.push(r.charCodeAt(a)&255);return t},bytesToString:function(r){for(var t=[],a=0;a<r.length;a++)t.push(String.fromCharCode(r[a]));return t.join("")}}};return qn=e,qn}var Bn,si;function Fc(){if(si)return Bn;si=1,Bn=function(t){return t!=null&&(e(t)||r(t)||!!t._isBuffer)};function e(t){return!!t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function r(t){return typeof t.readFloatLE=="function"&&typeof t.slice=="function"&&e(t.slice(0,0))}return Bn}var ii;function qc(){return ii||(ii=1,(function(){var e=Oc(),r=ni().utf8,t=Fc(),a=ni().bin,s=function(i,o){i.constructor==String?o&&o.encoding==="binary"?i=a.stringToBytes(i):i=r.stringToBytes(i):t(i)?i=Array.prototype.slice.call(i,0):!Array.isArray(i)&&i.constructor!==Uint8Array&&(i=i.toString());for(var l=e.bytesToWords(i),d=i.length*8,c=1732584193,u=-271733879,h=-1732584194,f=271733878,p=0;p<l.length;p++)l[p]=(l[p]<<8|l[p]>>>24)&16711935|(l[p]<<24|l[p]>>>8)&4278255360;l[d>>>5]|=128<<d%32,l[(d+64>>>9<<4)+14]=d;for(var k=s._ff,S=s._gg,w=s._hh,x=s._ii,p=0;p<l.length;p+=16){var U=c,G=u,K=h,J=f;c=k(c,u,h,f,l[p+0],7,-680876936),f=k(f,c,u,h,l[p+1],12,-389564586),h=k(h,f,c,u,l[p+2],17,606105819),u=k(u,h,f,c,l[p+3],22,-1044525330),c=k(c,u,h,f,l[p+4],7,-176418897),f=k(f,c,u,h,l[p+5],12,1200080426),h=k(h,f,c,u,l[p+6],17,-1473231341),u=k(u,h,f,c,l[p+7],22,-45705983),c=k(c,u,h,f,l[p+8],7,1770035416),f=k(f,c,u,h,l[p+9],12,-1958414417),h=k(h,f,c,u,l[p+10],17,-42063),u=k(u,h,f,c,l[p+11],22,-1990404162),c=k(c,u,h,f,l[p+12],7,1804603682),f=k(f,c,u,h,l[p+13],12,-40341101),h=k(h,f,c,u,l[p+14],17,-1502002290),u=k(u,h,f,c,l[p+15],22,1236535329),c=S(c,u,h,f,l[p+1],5,-165796510),f=S(f,c,u,h,l[p+6],9,-1069501632),h=S(h,f,c,u,l[p+11],14,643717713),u=S(u,h,f,c,l[p+0],20,-373897302),c=S(c,u,h,f,l[p+5],5,-701558691),f=S(f,c,u,h,l[p+10],9,38016083),h=S(h,f,c,u,l[p+15],14,-660478335),u=S(u,h,f,c,l[p+4],20,-405537848),c=S(c,u,h,f,l[p+9],5,568446438),f=S(f,c,u,h,l[p+14],9,-1019803690),h=S(h,f,c,u,l[p+3],14,-187363961),u=S(u,h,f,c,l[p+8],20,1163531501),c=S(c,u,h,f,l[p+13],5,-1444681467),f=S(f,c,u,h,l[p+2],9,-51403784),h=S(h,f,c,u,l[p+7],14,1735328473),u=S(u,h,f,c,l[p+12],20,-1926607734),c=w(c,u,h,f,l[p+5],4,-378558),f=w(f,c,u,h,l[p+8],11,-2022574463),h=w(h,f,c,u,l[p+11],16,1839030562),u=w(u,h,f,c,l[p+14],23,-35309556),c=w(c,u,h,f,l[p+1],4,-1530992060),f=w(f,c,u,h,l[p+4],11,1272893353),h=w(h,f,c,u,l[p+7],16,-155497632),u=w(u,h,f,c,l[p+10],23,-1094730640),c=w(c,u,h,f,l[p+13],4,681279174),f=w(f,c,u,h,l[p+0],11,-358537222),h=w(h,f,c,u,l[p+3],16,-722521979),u=w(u,h,f,c,l[p+6],23,76029189),c=w(c,u,h,f,l[p+9],4,-640364487),f=w(f,c,u,h,l[p+12],11,-421815835),h=w(h,f,c,u,l[p+15],16,530742520),u=w(u,h,f,c,l[p+2],23,-995338651),c=x(c,u,h,f,l[p+0],6,-198630844),f=x(f,c,u,h,l[p+7],10,1126891415),h=x(h,f,c,u,l[p+14],15,-1416354905),u=x(u,h,f,c,l[p+5],21,-57434055),c=x(c,u,h,f,l[p+12],6,1700485571),f=x(f,c,u,h,l[p+3],10,-1894986606),h=x(h,f,c,u,l[p+10],15,-1051523),u=x(u,h,f,c,l[p+1],21,-2054922799),c=x(c,u,h,f,l[p+8],6,1873313359),f=x(f,c,u,h,l[p+15],10,-30611744),h=x(h,f,c,u,l[p+6],15,-1560198380),u=x(u,h,f,c,l[p+13],21,1309151649),c=x(c,u,h,f,l[p+4],6,-145523070),f=x(f,c,u,h,l[p+11],10,-1120210379),h=x(h,f,c,u,l[p+2],15,718787259),u=x(u,h,f,c,l[p+9],21,-343485551),c=c+U>>>0,u=u+G>>>0,h=h+K>>>0,f=f+J>>>0}return e.endian([c,u,h,f])};s._ff=function(i,o,l,d,c,u,h){var f=i+(o&l|~o&d)+(c>>>0)+h;return(f<<u|f>>>32-u)+o},s._gg=function(i,o,l,d,c,u,h){var f=i+(o&d|l&~d)+(c>>>0)+h;return(f<<u|f>>>32-u)+o},s._hh=function(i,o,l,d,c,u,h){var f=i+(o^l^d)+(c>>>0)+h;return(f<<u|f>>>32-u)+o},s._ii=function(i,o,l,d,c,u,h){var f=i+(l^(o|~d))+(c>>>0)+h;return(f<<u|f>>>32-u)+o},s._blocksize=16,s._digestsize=16,On.exports=function(i,o){if(i==null)throw new Error("Illegal argument "+i);var l=e.wordsToBytes(s(i,o));return o&&o.asBytes?l:o&&o.asString?a.bytesToString(l):e.bytesToHex(l)}})()),On.exports}var Bc=qc();const Uc=Dc(Bc),oi=qe("Disconnected"),rs=qe(null);let Un;function Oe(e,r="info"){rs.set({text:e,type:r}),Un&&clearTimeout(Un),Un=setTimeout(()=>{rs.set(null)},3e3)}const Hc=localStorage.getItem("app_theme")||"default",mn=qe(Hc);mn.subscribe(e=>{if(typeof document>"u")return;localStorage.setItem("app_theme",e);const r=ts.find(a=>a.id===e);if(!r)return;const t=document.documentElement;document.body.setAttribute("data-theme",e),Object.entries(r.colors).forEach(([a,s])=>{t.style.setProperty(a,s)})});const bn=qe({isOpen:!1,title:"",message:"",confirmLabel:"Confirm",cancelLabel:"Cancel",onConfirm:null,type:"confirm",inputValue:"",placeholder:"",options:[]});function ur({title:e="Confirm Action",message:r="Are you sure?",confirmLabel:t="Confirm",cancelLabel:a="Cancel",type:s="confirm",inputValue:i="",placeholder:o="",options:l=[],onConfirm:d=()=>{}}){bn.set({isOpen:!0,title:e,message:r,confirmLabel:t,cancelLabel:a,type:s,inputValue:i,placeholder:o,options:l,onConfirm:d})}function sn(){bn.set({isOpen:!1,title:"",message:"",confirmLabel:"",cancelLabel:"",onConfirm:null,type:"confirm",inputValue:"",placeholder:"",options:[]})}const yt=qe({state:"stop",volume:50,elapsed:0,duration:0,random:!1,repeat:!1,bitrate:0,format:"",song:0,songid:0}),rr=qe({title:"Not Playing",artist:"",album:"",file:"",stationName:null,id:null,pos:null}),yn=qe(!1),vn=qe(!1),as=qe(!1),ns=qe(!1),Ut=qe("library"),en=qe(null),ar=qe(!1),Vc=localStorage.getItem("sidebarCollapsed")==="true",ss=qe(Vc);ss.subscribe(e=>{typeof localStorage<"u"&&localStorage.setItem("sidebarCollapsed",String(e))});const Or=qe([]),$n=qe([]),ja=qe([]),Yc=qe(null),Lr=qe(new Set),mt=qe(!1),Jt=qe([{view:"root"}]),Kr=qe([]),lo=qe(0),Na=qe(""),co=qe({});function Wc(e,r){co.update(t=>({...t,[e]:r}))}function Qc(e){return Xe(co)[e]||0}const Ss=qe({isOpen:!1,track:null,context:{type:"general",playlistName:null,index:null},x:0,y:0,triggerRect:null});function Kc(){if(typeof navigator<"u"&&navigator.vibrate)try{navigator.vibrate(70)}catch{}}function Ha(e,r,t={}){if(!r&&t.type!=="playlist-card")return;Kc();let a=0,s=0,i=null,o=e.currentTarget;!o&&e.target&&e.target.closest&&(o=e.target.closest("button")||e.target),o&&o.getBoundingClientRect&&(i=o.getBoundingClientRect());const l=e.detail?.originalEvent||e;l.touches&&l.touches.length>0?(a=l.touches[0].clientX,s=l.touches[0].clientY):l.clientX&&(a=l.clientX,s=l.clientY);const d={type:"general",playlistName:null,index:null,...t};Ss.set({isOpen:!0,track:r,context:d,x:a,y:s,triggerRect:i})}function qt(){Ss.set({isOpen:!1,track:null,context:{},x:0,y:0,triggerRect:null})}let is=null,os=null;function Xc(e){os=e}function Nr(e,r=null){r&&(is=r),os?os(e,r):console.warn("Router callback not set!")}function Gc(){const e=is;return is=null,e}function Zc(){window.history.back()}function ka(e,r=[],t=null){if(!e||!e.file)return"/images/default_cover.png";if(vo(e.file)||e.genre==="Radio")return e.image?wa(e):uo(e,r,t)||"/images/radio_placeholder.png";let a=e.file.startsWith("/")?e.file.slice(1):e.file;return`/coverart.php/${encodeURI(a)}`}function Va(e,r="sm",t=[],a=null){if(!e||e.file&&(vo(e.file)||e.genre==="Radio"||Array.isArray(e)))return e&&e.image?wa(e):uo(e,t,a)||"/images/radio_icon.png";if(!e.file)return"/images/default_icon.png";if(e.thumbHash){const s=r==="md"?"":"_sm";return`/imagesw/thmcache/${e.thumbHash}${s}.jpg`}try{const s=e.file.lastIndexOf("/"),i=s===-1?".":e.file.substring(0,s);return`/imagesw/thmcache/${Uc(i)}${r==="md"?"":"_sm"}.jpg`}catch{let i=e.file.startsWith("/")?e.file.slice(1):e.file;return`/coverart.php/${encodeURI(i)}`}}function vo(e){return e?e.startsWith("http")||e.includes("://")||e.includes("RADIO"):!1}function uo(e,r,t){const a=d=>(d||"").toString().toLowerCase().replace(/[^a-z0-9]/g,""),s=a(e?.title),i=a(e?.stationName),o=a(t);if(r&&r.length>0){const d=r.find(c=>{const u=a(c.name);return u?u===i||u===o||s&&u===s||s&&s.includes(u)&&u.length>3:!1});if(d)return wa(d)}const l=e?.stationName||t;return l?wa({name:l,image:"local"}):null}no([rr,Or,en],([e,r,t])=>ka(e,r,t));no(rr,e=>!e||!e.file||e.file.startsWith("http")?null:`/coverart.php/${encodeURI(e.file)}`);const Jc=localStorage.getItem("alarmTime")||"08:00",ev=localStorage.getItem("alarmEnabled")==="true",tv=localStorage.getItem("alarmPlaylist")||"Favorites",ls=qe(Jc),cs=qe(ev),vs=qe(tv);ls.subscribe(e=>localStorage.setItem("alarmTime",e));cs.subscribe(e=>localStorage.setItem("alarmEnabled",String(e)));vs.subscribe(e=>localStorage.setItem("alarmPlaylist",e));const st={NAME:"MoodePlayerDB",STORE_NAME:"music",VERSION:3},Hn={SYNC:"/wave-api.php",STATIONS:e=>"/wave-api.php?action=stations",COVER_ART:e=>`/coverart.php?u=${encodeURIComponent(e)}`,RADIO_LOGOS:e=>`/imagesw/radio-logos/thumbs/${e}`},Rr={open(){return new Promise((e,r)=>{const t=indexedDB.open(st.NAME,st.VERSION);t.onupgradeneeded=a=>{const s=a.target.result,i=a.target.transaction;let o;s.objectStoreNames.contains(st.STORE_NAME)?o=i.objectStore(st.STORE_NAME):o=s.createObjectStore(st.STORE_NAME,{keyPath:"file"}),o.indexNames.contains("artist")||o.createIndex("artist","artist",{unique:!1}),o.indexNames.contains("album")||o.createIndex("album","album",{unique:!1}),o.indexNames.contains("genre")||o.createIndex("genre","genre",{unique:!1}),o.indexNames.contains("album_artist")||o.createIndex("album_artist","album_artist",{unique:!1})},t.onsuccess=()=>e(t.result),t.onerror=()=>r(t.error)})},async clear(){const e=await this.open();return new Promise((r,t)=>{const a=e.transaction(st.STORE_NAME,"readwrite");a.objectStore(st.STORE_NAME).clear(),a.oncomplete=()=>r(),a.onerror=()=>t(a.error)})},async bulkAdd(e){const r=await this.open();return new Promise((t,a)=>{const s=r.transaction(st.STORE_NAME,"readwrite"),i=s.objectStore(st.STORE_NAME);e.forEach(o=>i.put(o)),s.oncomplete=()=>t(),s.onerror=()=>a(s.error)})},async getFilesMap(e){if(!e||e.length===0)return new Map;const r=await this.open();return new Promise(t=>{const s=r.transaction(st.STORE_NAME,"readonly").objectStore(st.STORE_NAME),i=new Map;let o=0;e.forEach(l=>{const d=l.normalize("NFC").trim(),c=s.get(d);c.onsuccess=u=>{u.target.result&&i.set(l,u.target.result),o++,o===e.length&&t(i)},c.onerror=()=>{o++,o===e.length&&t(i)}})})},async getArtists(){const e=await this.open();return new Promise((r,t)=>{const s=e.transaction(st.STORE_NAME,"readonly").objectStore(st.STORE_NAME),i=new Map,o=s.openCursor();o.onsuccess=l=>{const d=l.target.result;if(d){const c=d.value,u=c.album_artist||c.artist;u&&!i.has(u)&&i.set(u,{name:u,file:c.file,thumbHash:c.thumbHash}),d.continue()}else{const c=Array.from(i.values()).sort((u,h)=>u.name.localeCompare(h.name,void 0,{sensitivity:"base"}));r(c)}},o.onerror=()=>t(o.error)})},async getAlbums(){const e=await this.open();return new Promise((r,t)=>{const s=e.transaction(st.STORE_NAME,"readonly").objectStore(st.STORE_NAME).index("album"),i=[],o=s.openCursor(null,"nextunique");o.onsuccess=l=>{const d=l.target.result;if(d){const c=d.value;i.push({name:c.album,artist:c.album_artist||c.artist,file:c.file,thumbHash:c.thumbHash,qualityBadge:c.qualityBadge,year:c.year||0}),d.continue()}else r(i)},o.onerror=()=>t(o.error)})},async getArtistAlbums(e){if(!e)return[];const r=await this.open(),t=e.normalize("NFC").trim();return new Promise((a,s)=>{const o=r.transaction(st.STORE_NAME,"readonly").objectStore(st.STORE_NAME),l=new Promise(c=>{o.indexNames.contains("album_artist")?o.index("album_artist").getAll(IDBKeyRange.only(t)).onsuccess=u=>c(u.target.result):c([])}),d=new Promise(c=>{o.index("artist").getAll(IDBKeyRange.only(t)).onsuccess=u=>c(u.target.result)});Promise.all([l,d]).then(([c,u])=>{const h=[...c,...u],f=[],p=new Set;h.forEach(k=>{p.has(k.album)||(p.add(k.album),f.push({name:k.album,artist:k.album_artist||k.artist,file:k.file,thumbHash:k.thumbHash,qualityBadge:k.qualityBadge,year:k.year||0}))}),a(f)}).catch(c=>s(c))})},async getAlbumTracks(e,r=null){const t=await this.open(),a=e.normalize("NFC").trim(),s=r?r.normalize("NFC").trim():null;return console.log(`[DB] getAlbumTracks called. Album: "${a}", FilterArtist: "${s}"`),new Promise((i,o)=>{const d=t.transaction(st.STORE_NAME,"readonly").objectStore(st.STORE_NAME).index("album"),c=IDBKeyRange.only(a),u=d.getAll(c);u.onsuccess=()=>{let h=u.result;if(console.log(`[DB] Found ${h.length} raw tracks for album "${a}"`),s){const f=h.length;h=h.filter(p=>{const k=(p.artist||"").normalize("NFC").trim(),S=(p.album_artist||"").normalize("NFC").trim();return k===s||S===s}),console.log(`[DB] After artist filter: ${h.length} tracks (Removed ${f-h.length})`)}else console.log("[DB] No artist filter provided. Returning all tracks.");h.sort((f,p)=>{const k=parseInt(f.disc||1),S=parseInt(p.disc||1);if(k!==S)return k-S;const w=parseInt(f.track||0),x=parseInt(p.track||0);return w-x}),i(h)},u.onerror=()=>o(u.error)})},async getGenres(){const e=await this.open();return new Promise((r,t)=>{const s=e.transaction(st.STORE_NAME,"readonly").objectStore(st.STORE_NAME).index("genre"),i=[],o=s.openKeyCursor(null,"nextunique");o.onsuccess=l=>{const d=l.target.result;d?(i.push(d.key),d.continue()):r(i)},o.onerror=()=>t(o.error)})},async getGenreTracks(e){const r=await this.open(),t=e.normalize("NFC").trim();return new Promise((a,s)=>{const l=r.transaction(st.STORE_NAME,"readonly").objectStore(st.STORE_NAME).index("genre").getAll(IDBKeyRange.only(t));l.onsuccess=()=>a(l.result),l.onerror=()=>s(l.error)})},async search(e){if(!e)return[];const r=e.toLowerCase().normalize("NFC").trim(),t=await this.open();return new Promise((a,s)=>{const o=t.transaction(st.STORE_NAME,"readonly").objectStore(st.STORE_NAME),l=[],d=100,c=o.openCursor();c.onsuccess=u=>{const h=u.target.result;if(h){const f=h.value;if((f.title&&f.title.toLowerCase().includes(r)||f.artist&&f.artist.toLowerCase().includes(r)||f.album&&f.album.toLowerCase().includes(r)||f.album_artist&&f.album_artist.toLowerCase().includes(r))&&l.push(f),l.length>=d){a(l);return}h.continue()}else a(l)},c.onerror=()=>s(c.error)})}};var rv=E('<div class="skeleton svelte-tl058d"></div>');function Vt(e,r){let t=ft(r,"width",8,"100%"),a=ft(r,"height",8,"20px"),s=ft(r,"radius",8,"4px"),i=ft(r,"style",8,"");var o=rv();le(()=>ot(o,`width: ${t()??""}; height: ${a()??""}; border-radius: ${s()??""}; ${i()??""}`)),m(e,o)}var av=E('<div class="skel svelte-1b8que2"><!></div>'),nv=E('<img loading="lazy"/>'),sv=E('<div class="loader svelte-1b8que2"><!> <!> <!></div>');function aa(e,r){Tt(r,!1);let t=ft(r,"src",8),a=ft(r,"alt",8,""),s=ft(r,"radius",8,"0px");const i=xs();let o=M("loading");function l(){g(o,"loaded")}function d(w){i("error",w),g(o,"error")}ee(()=>I(t()),()=>{t()?g(o,"loading"):g(o,"error")}),Qt(),Pt();var c=sv(),u=v(c);{var h=w=>{var x=av(),U=v(x);Vt(U,{width:"100%",height:"100%",get radius(){return s()}}),pt(2,x,()=>Lt,()=>({duration:200})),m(w,x)};L(u,w=>{n(o)==="loading"&&w(h)})}var f=_(u,2);{var p=w=>{var x=nv();let U;le(()=>{Ot(x,"src",t()),Ot(x,"alt",a()),ot(x,`border-radius: ${s()??""}`),U=Ye(x,1,"svelte-1b8que2",null,U,{vis:n(o)==="loaded"})}),A("load",x,l),A("error",x,d),m(w,x)};L(f,w=>{t()&&n(o)!=="error"&&w(p)})}var k=_(f,2);{var S=w=>{var x=at(),U=Le(x);cn(U,r,"fallback",{}),m(w,x)};L(k,w=>{n(o)==="error"&&w(S)})}le(()=>ot(c,`border-radius: ${s()??""}`)),m(e,c),Mt()}const Hr={DEFAULT_IP:typeof window<"u"?window.location.hostname:"localhost",get MOODE_IP(){try{return typeof localStorage<"u"?localStorage.getItem("moode_ip")||this.DEFAULT_IP:this.DEFAULT_IP}catch{return this.DEFAULT_IP}},setMoodeIp(e){if(typeof localStorage<"u"){const r=e?e.trim():"";r&&localStorage.setItem("moode_ip",r)}}};class iv{constructor(){this.socket=null,this.queue=[],this.isProcessing=!1,this.reconnectTimer=null,this.watchdogTimer=null,this._buffer=""}get isConnected(){return this.socket&&this.socket.readyState===WebSocket.OPEN}connect(){if(this.socket&&(this.socket.readyState===WebSocket.CONNECTING||this.socket.readyState===WebSocket.OPEN))return;this.reconnectTimer&&clearTimeout(this.reconnectTimer);let r=Hr.MOODE_IP||window.location.hostname;r=r.replace(/^https?:\/\//,"").split(":")[0].split("/")[0];const t=Hr.WS_PORT||"8080",a=`ws://${r}:${t}`;console.log("[MPD] Connecting to:",a);try{this.socket=new WebSocket(a,["binary"])}catch(s){console.error("[MPD] Connection Error:",s),this.reconnectTimer=setTimeout(()=>this.connect(),5e3);return}this.socket.onopen=()=>{console.log("[MPD] Connected"),oi.set("Connected"),Oe("Connected to Moode","success"),this._processQueue()},this.socket.onmessage=s=>this._handleMessage(s),this.socket.onclose=s=>{console.warn("[MPD] Socket closed",s.code,s.reason),oi.set("Disconnected"),this._cleanup(),this.reconnectTimer=setTimeout(()=>this.connect(),3e3)},this.socket.onerror=s=>{console.error("[MPD] Socket error",s)}}send(r){return new Promise((t,a)=>{this.queue.push({cmd:r,resolve:t,reject:a}),this._processQueue()})}_cleanup(){for(this.isProcessing=!1,this._buffer="",this.watchdogTimer&&clearTimeout(this.watchdogTimer);this.queue.length>0;){const{reject:r}=this.queue.shift();r(new Error("Connection lost"))}}async _processQueue(){if(this.isProcessing||this.queue.length===0||!this.isConnected)return;this.isProcessing=!0;const{cmd:r}=this.queue[0];this.watchdogTimer&&clearTimeout(this.watchdogTimer),this.watchdogTimer=setTimeout(()=>{console.error("[MPD] Watchdog timeout"),this.socket&&this.socket.close()},2e4);try{const t=r.endsWith(`
`)?r:r+`
`;this.socket.send(new TextEncoder().encode(t))}catch(t){console.error("[MPD] Send error",t),this._cleanup()}}async _handleMessage(r){let t=r.data;t instanceof Blob&&(t=await t.text()),this.watchdogTimer&&(clearTimeout(this.watchdogTimer),this.watchdogTimer=null),this._buffer+=t;const a=this._buffer.endsWith(`
OK
`)||this._buffer===`OK
`,s=this._buffer.startsWith("ACK");if(a||s){const i=this._buffer;this._buffer="";const o=this.queue.shift();if(this.isProcessing=!1,o)if(s)console.error(`[MPD] Error: ${i.trim()}`),o.reject(new Error(i.trim()));else{const l=i.replace(/\nOK\n$/,"").replace(/^OK\n$/,"");o.resolve(l)}this._processQueue()}else{if(!this.queue.length)return;this.watchdogTimer=setTimeout(()=>{console.error("[MPD] Watchdog timeout receiving large data"),this.socket&&this.socket.close()},2e4)}}}const Ae=new iv,tr={parseKeyValue(e){const r={};if(!e)return r;const t=e.split(`
`);for(const a of t){const s=a.indexOf(": ");if(s===-1)continue;const i=a.substring(0,s).toLowerCase(),o=a.substring(s+2);r[i]=o}return r},parseStatus(e){const r=this.parseKeyValue(e);let t="";if(r.audio){const a=r.audio.split(":");a[1]&&(t=`${a[1]}-bit`)}return{state:r.state||"stop",volume:parseInt(r.volume)||0,elapsed:parseFloat(r.elapsed)||0,duration:parseFloat(r.duration)||0,random:r.random==="1",repeat:r.repeat==="1",song:parseInt(r.song)||0,songId:parseInt(r.songid)||-1,playlistLength:parseInt(r.playlistlength)||0,bitrate:parseInt(r.bitrate)||0,format:t,playlistVersion:parseInt(r.playlist)||0}},parseCurrentSong(e){const r=this.parseKeyValue(e);return this._normalizeTrack(r)},parsePlaylists(e){const r=e.split(`
`),t=[];let a=null;for(const s of r)s.startsWith("playlist: ")?(a&&t.push(a),a={playlist:s.substring(10)}):s.startsWith("Last-Modified: ")&&a&&(a["last-modified"]=s.substring(15));return a&&t.push(a),t.map(s=>({name:s.playlist,lastModified:s["last-modified"]}))},parseTracks(e){const r=[];let t=null,a=0,s=e.indexOf(`
`,a);for(;s!==-1;){const i=e.substring(a,s),o=i.indexOf(": ");if(o!==-1){const l=i.substring(0,o).toLowerCase(),d=i.substring(o+2);l==="file"?(t&&r.push(this._normalizeTrack(t)),t={file:d}):t&&(t[l]=d)}a=s+1,s=e.indexOf(`
`,a)}return t&&r.push(this._normalizeTrack(t)),r},_normalizeTrack(e){const r=e.file||e.File||"",t=e.Title||e.title||e.Name||e.name||r.split("/").pop()||"Unknown";return{file:r,title:t,artist:e.Artist||e.artist||"Unknown Artist",album:e.Album||e.album||"Unknown Album",genre:e.Genre||e.genre||"Unknown",time:parseFloat(e.Time||e.time||0),track:e.Track||e.track||"",id:e.Id||e.id,pos:e.Pos||e.pos||null,stationName:e.name||e.Name||null}}},ov=1e3,lv=250;let dn=null,Da=null,un=0,Br=1,wn=!0,kr=!1,Vr=0,da=null;function fn(e){return e?String(e).normalize("NFC").replace(/\\/g,"\\\\").replace(/"/g,'\\"'):""}function cv(){vv(),wn=!0,kr=!1,Vr=0,mt.set(!1),cr(),dn=setInterval(()=>{Ae.isConnected&&!Ae.isProcessing&&cr()},ov)}function vv(){dn&&(clearInterval(dn),dn=null),Ts()}async function cr(){try{const e=await Ae.send("status"),r=await Ae.send("currentsong"),t=tr.parseStatus(e),a=tr.parseCurrentSong(r);uv(t,a);const s=Xe(lo);if(Xe(mt))return;(t.playlistLength>0&&t.playlistVersion!==s||t.playlistLength>0&&Xe(Kr).length===0)&&dv(t.playlistVersion)}catch{}}async function dv(e){if(!Xe(mt))try{const r=await Ae.send("playlistinfo");if(Xe(mt))return;const t=tr.parseTracks(r),a=t.map(o=>o.file).filter(o=>o&&!o.startsWith("http"));let s=new Map;if(a.length>0)try{s=await Rr.getFilesMap(a)}catch(o){console.warn("Failed to hydrate queue from DB",o)}const i=t.map(o=>{const l=(o.file||"").normalize("NFC"),d=s.get(l);return d?{...o,thumbHash:d.thumbHash,qualityBadge:d.qualityBadge,title:o.title||d.title,artist:o.artist||d.artist,album:o.album||d.album,_uid:String(o.id||o.pos+o.file)}:{...o,_uid:String(o.id||o.pos+o.file)}});Kr.set(i),lo.set(e)}catch(r){console.error("Queue sync error",r)}}function uv(e,r){const t=Xe(rr),a=Xe(Or),s=r.file&&r.file.startsWith("http");if(s){const i=c=>(c||"").toString().toLowerCase().replace(/[^a-z0-9]/g,""),o=i(r.file),l=i(r.title),d=a.find(c=>{const u=i(c.station||c.file||c.url||(Array.isArray(c)?c[1]:"")),h=i(c.name||(Array.isArray(c)?c[0]:""));return u&&o.includes(u)||h&&l.includes(h)});d?r.stationName=d.name||d[0]:t.stationName&&t.file===r.file&&(r.stationName=t.stationName)}rr.set(r),yt.update(i=>{const o=e.state==="play",l=performance.now();if(e.state==="pause"||i.state==="pause")return on(!1),l<Vr?i:e;if(r.file!==t.file||wn)return wn=!1,kr=!1,Br=1,s&&(e.elapsed=0),on(o&&!s),e;if(l<Vr)return i;if(kr)return kr=!1,Br=1,on(o&&!s),e;if(o&&!s){const d=e.elapsed-i.elapsed;if(Math.abs(d)>2)return Br=1,e;if(Math.abs(d)<.05)Br=1;else{let u=d/1.5;Br=Math.max(.5,Math.min(1.5,1+u))}return{...e,elapsed:i.elapsed}}return on(!1),e})}function on(e){e?ds():Ts()}function ds(){Da||wn||(un=performance.now(),Da=setInterval(()=>{const e=performance.now();let r=(e-un)/1e3;r>2&&(r=0),un=e,yt.update(t=>{if(t.state!=="play")return t;let a=t.elapsed+r*Br;return t.duration>0&&a>t.duration&&(a=t.duration),{...t,elapsed:a}})},lv))}function Ts(){Da&&(clearInterval(Da),Da=null),Br=1,un=0}async function li(e,r=!1){if(!e||e.length===0)return;mt.set(!0),kr=!0;const t=5;try{for(let a=0;a<e.length;a+=t){const s=e.slice(a,a+t),i=["command_list_begin"];s.forEach(o=>{i.push(`add "${fn(o.file)}"`)}),i.push("command_list_end"),await Ae.send(i.join(`
`))}r?(await Ae.send("play 0"),Oe(`Playing ${e.length} tracks`,"success")):Oe(`Added ${e.length} tracks`,"success")}catch(a){console.error("[Player] Bulk Action Failed:",a),Oe("Error adding tracks","error")}finally{setTimeout(()=>{mt.set(!1),cr()},1500)}}const nr={async togglePlay(){const r=Xe(yt).state==="play";Vr=performance.now()+800,yt.update(t=>{const a=r?"pause":"play";return a==="play"?ds():Ts(),{...t,state:a}}),await Ae.send(r?"pause 1":"play"),setTimeout(cr,900)},async next(){kr=!0,Vr=0,await Ae.send("next"),cr()},async previous(){kr=!0,Vr=0,yt.update(e=>({...e,elapsed:0})),await Ae.send("previous"),cr()},async setVolume(e){yt.update(r=>({...r,volume:e})),await Ae.send(`setvol ${e}`)},async seek(e){kr=!0,Vr=performance.now()+500,yt.update(r=>({...r,elapsed:e})),await Ae.send(`seekcur ${e}`),setTimeout(cr,600)},async toggleRandom(){const r=!Xe(yt).random;yt.update(t=>({...t,random:r})),await Ae.send(`random ${r?1:0}`)},async toggleRepeat(){const r=!Xe(yt).repeat;yt.update(t=>({...t,repeat:r})),await Ae.send(`repeat ${r?1:0}`)},async playUri(e,r={}){mt.set(!0);const t=fn(e);kr=!0,yt.update(a=>({...a,state:"play",elapsed:0})),rr.set({title:r.title||e.split("/").pop(),artist:r.artist||"",file:e}),ds();try{const a=await Ae.send("currentsong"),s=parseInt(tr.parseKeyValue(a).pos),i=await Ae.send(`addid "${t}"`),o=parseInt(tr.parseKeyValue(i).id);if(isNaN(o))await Ae.send(`add "${t}"`),await Ae.send("play");else{const l=isNaN(s)?0:s+1;await Ae.send(`moveid ${o} ${l}`),await Ae.send(`playid ${o}`)}}catch(a){console.error("Play error",a),Oe("Failed to play","error")}setTimeout(()=>{mt.set(!1),cr()},1200)},async addToQueue(e){try{await Ae.send(`add "${fn(e)}"`),Oe("Added to queue","success")}catch(r){console.error("Add queue error",r),Oe("Failed to add","error")}},async playNext(e){mt.set(!0);const r=fn(e);try{const t=await Ae.send("currentsong"),a=parseInt(tr.parseKeyValue(t).pos||-1);if(a===-1)mt.set(!1),await this.playUri(e);else{const s=await Ae.send(`addid "${r}"`),i=parseInt(tr.parseKeyValue(s).id);isNaN(i)||(await Ae.send(`moveid ${i} ${a+1}`),Oe("Will play next","success")),setTimeout(()=>mt.set(!1),1e3)}}catch(t){console.error("Play Next error",t),Oe("Failed to set next","error"),mt.set(!1)}},async removeFromQueue(e){mt.set(!0),da&&clearTimeout(da);try{Kr.update(r=>{const t=[...r];return t.splice(e,1),t}),await Ae.send(`delete ${e}`)}catch{Oe("Failed to remove","error"),mt.set(!1);return}da=setTimeout(()=>{mt.set(!1)},1e3)},async moveTrack(e,r){if(e!==r){mt.set(!0),da&&clearTimeout(da);try{await Ae.send(`move ${e} ${r}`)}catch(t){console.error("Move failed",t),Oe("Move failed","error"),mt.set(!1),cr();return}da=setTimeout(()=>{mt.set(!1),cr()},2e3)}},async playAllTracks(e){if(!(!e||e.length===0))try{await Ae.send("stop"),await Ae.send("clear"),await li(e,!0)}catch(r){console.error(r)}},async addAllToQueue(e){!e||e.length===0||await li(e,!1)},async saveQueue(e){if(!e)return;const r=e.replace(/"/g,'\\"');try{await Ae.send(`save "${r}"`),Oe(`Playlist "${e}" saved`,"success")}catch(t){if(t.message.includes("exist")){if(confirm(`Playlist "${e}" exists. Overwrite?`))try{await Ae.send(`rm "${r}"`),await Ae.send(`save "${r}"`),Oe(`Playlist "${e}" overwritten`,"success")}catch{Oe("Failed to overwrite","error")}}else console.error(t)}}};function fo(e){return new Worker("/assets/sync.worker-CxDcqL9_.js",{name:e?.name})}const Aa="Favorites";let ci=Promise.resolve();const ua=e=>e?e.toLowerCase().replace(/^https?:\/\//,"").replace(/^www\./,"").split("?")[0].replace(/\/$/,""):"";function fv(e){if(e==="Favorites")return"linear-gradient(135deg, hsl(348, 95%, 58%), hsl(348, 90%, 40%))";let r=0;for(let a=0;a<e.length;a++)r=e.charCodeAt(a)+((r<<5)-r);const t=Math.abs(r%360);return`linear-gradient(135deg, hsl(${t}, 60%, 40%), hsl(${(t+40)%360}, 60%, 30%))`}function hv(e){if(e==="Favorites")return"var(--c-heart)";let r=0;for(let a=0;a<e.length;a++)r=e.charCodeAt(a)+((r<<5)-r);return`var(--c-pl-${Math.abs(r%6)})`}const fr={async syncLibrary(){if(Xe(ar))return;ar.set(!0);const e=new fo;e.postMessage({type:"START_SYNC",payload:{url:`http://${Hr.MOODE_IP}/wave-api.php`}}),e.onmessage=r=>{const{type:t,count:a}=r.data;t==="DONE"&&(Oe(`Library updated: ${a} tracks`,"success"),ar.set(!1),e.terminate()),t==="ERROR"&&(Oe("Sync Failed","error"),ar.set(!1),e.terminate())},e.onerror=()=>{ar.set(!1),e.terminate()}},async loadPlaylists(){as.set(!0);try{const e=await Ae.send("listplaylists"),t=tr.parsePlaylists(e).map(a=>({...a,color:fv(a.name),colorVar:hv(a.name)}));$n.set(t)}catch(e){console.error(e)}finally{as.set(!1)}},async createPlaylistFromQueue(e){if(!e)return;const r=e.replace(/"/g,'\\"');try{await Ae.send(`save "${r}"`),Oe(`Playlist "${e}" created`,"success"),await this.loadPlaylists()}catch(t){console.error(t),Oe("Failed to create playlist","error")}},async deletePlaylist(e){if(!e)return;const r=e.replace(/"/g,'\\"');try{await Ae.send(`rm "${r}"`),Oe("Playlist deleted","info"),await this.loadPlaylists()}catch(t){console.error(t),Oe("Delete failed","error")}},async renamePlaylist(e,r){if(!e||!r)return;const t=e.replace(/"/g,'\\"'),a=r.replace(/"/g,'\\"');try{await Ae.send(`rename "${t}" "${a}"`),Oe("Playlist renamed","success"),await this.loadPlaylists()}catch(s){console.error(s),Oe("Rename failed","error")}},async openPlaylistDetails(e){if(!e)return;ns.set(!0);const r=e.replace(/"/g,'\\"');try{const t=await Ae.send(`listplaylistinfo "${r}"`),a=tr.parseTracks(t),s=a.map(l=>l.file).filter(l=>l&&!l.startsWith("http"));let i=new Map;if(s.length>0)try{i=await Rr.getFilesMap(s)}catch(l){console.warn("Failed to hydrate playlist from DB",l)}const o=a.map(l=>{const d=i.get(l.file);return d?{...l,thumbHash:d.thumbHash,qualityBadge:d.qualityBadge,title:l.title||d.title,artist:l.artist||d.artist,album:l.album||d.album,_uid:ti()}:{...l,_uid:ti()}});ja.set(o)}catch(t){console.error(t),Oe("Could not load playlist","error")}finally{ns.set(!1)}},async movePlaylistTrack(e,r,t){const a=e.replace(/"/g,'\\"');try{await Ae.send(`playlistmove "${a}" ${r} ${t}`)}catch{Oe("Move failed","error")}},async removeFromPlaylist(e,r){const t=e.replace(/"/g,'\\"');try{await Ae.send(`playlistdelete "${t}" ${r}`),Oe("Track removed","success")}catch{Oe("Delete failed","error")}},async loadFavorites(){try{const e=await Ae.send(`listplaylistinfo "${Aa}"`),r=tr.parseTracks(e),t=new Set;r.forEach(a=>{a.file&&t.add(a.file)}),Lr.set(t)}catch{Lr.set(new Set)}},async toggleFavorite(e){if(!e||!e.file)return;const r=e.file,t=r.replace(/"/g,'\\"'),a=r.startsWith("http"),s=Xe(Lr);let i=s.has(r);if(!i&&a){const o=ua(r);for(const l of s)if(ua(l)===o){i=!0;break}}Lr.update(o=>{const l=new Set(o);if(i){if(l.delete(r),a){const d=ua(r);for(const c of l)ua(c)===d&&l.delete(c)}}else l.add(r);return l}),ci=ci.then(async()=>{try{const o=await Ae.send(`listplaylistinfo "${Aa}"`),l=tr.parseTracks(o);let d=[];if(l.forEach((c,u)=>{let h=!1;(c.file===r||a&&ua(c.file)===ua(r)||a&&(c.file.includes(r)||r.includes(c.file)))&&(h=!0),h&&d.push(u)}),i){if(d.length>0){d.sort((c,u)=>u-c);for(const c of d)await Ae.send(`playlistdelete "${Aa}" ${c}`);Oe("Removed from Favorites","info")}}else d.length>0?console.log("[Fav] Track already exists. Skipping."):(await Ae.send(`playlistadd "${Aa}" "${t}"`),l.length>0&&await Ae.send(`playlistmove "${Aa}" ${l.length} 0`),Oe("Added to Favorites","success"))}catch(o){console.error("Fav action failed",o),Oe("Action failed","error")}finally{await this.loadFavorites()}})}};function ho(){Ae.connect(),cv(),fr.loadPlaylists(),fr.loadFavorites()}function kn(e){return Ae.send(e)}const{togglePlay:An,toggleRandom:Xr,toggleRepeat:Gr,setVolume:xr,seek:Ms,addToQueue:pv,playNext:gv,removeFromQueue:_v,moveTrack:mv,saveQueue:bv,playAllTracks:$s,addAllToQueue:As}=nr,{syncLibrary:yv,loadRadioStations:wv,loadPlaylists:Ps,openPlaylistDetails:po,toggleFavorite:go,loadFavorites:kv,removeFromPlaylist:_o,movePlaylistTrack:mo}=fr;function Ya(e){const r=Xe(rr),t=Xe(Or),a=Xe(en);if(r.file&&r.file.startsWith("http")&&t.length>0&&(e==="next"||e==="previous")){let i=t.findIndex(l=>l.name===a);i===-1&&(i=0);let o;e==="next"?(o=i+1,o>=t.length&&(o=0)):(o=i-1,o<0&&(o=t.length-1)),Cs(t[o])}else e==="next"&&nr.next(),e==="previous"&&nr.previous()}function Cs(e){if(!e)return;en.set(e.name);const r=e[1]||e.station||e.file||e.url;r&&nr.playUri(r,{title:e.name,artist:e.genre||"Radio Stream",stationName:e.name})}function Pn(e){e&&(en.set(null),nr.playUri(e.file,{title:e.title,artist:e.artist,album:e.album,stationName:null}))}async function bo(e,r=0){if(!e)return;en.set(null);const t=e.replace(/"/g,'\\"');try{await Ae.send("stop"),await Ae.send("clear"),await Ae.send(`load "${t}"`),await Ae.send(`play ${r}`)}catch(a){console.error("Failed to play playlist context",a)}}const xv=Object.freeze(Object.defineProperty({__proto__:null,addAllToQueue:As,addToQueue:pv,connect:ho,loadFavorites:kv,loadPlaylists:Ps,loadRadioStations:wv,movePlaylistTrack:mo,moveTrack:mv,nav:Ya,openPlaylistDetails:po,playAllTracks:$s,playNext:gv,playPlaylistContext:bo,playStation:Cs,playTrackOptimistic:Pn,removeFromPlaylist:_o,removeFromQueue:_v,runMpdRequest:kn,saveQueue:bv,seek:Ms,setVolume:xr,syncLibrary:yv,toggleFavorite:go,togglePlay:An,toggleRandom:Xr,toggleRepeat:Gr},Symbol.toStringTag,{value:"Module"}));function zs(e,r=2e3){let t;const a=i=>{i.type==="mousedown"&&i.button!==0||(t=setTimeout(()=>{e.dispatchEvent(new CustomEvent("longpress",{detail:{originalEvent:i}}))},r))},s=()=>{clearTimeout(t)};return e.addEventListener("mousedown",a),e.addEventListener("touchstart",a,{passive:!0}),e.addEventListener("mouseup",s),e.addEventListener("mouseleave",s),e.addEventListener("touchend",s),e.addEventListener("touchcancel",s),e.addEventListener("touchmove",s),{destroy(){e.removeEventListener("mousedown",a),e.removeEventListener("touchstart",a),e.removeEventListener("mouseup",s),e.removeEventListener("mouseleave",s),e.removeEventListener("touchend",s),e.removeEventListener("touchcancel",s),e.removeEventListener("touchmove",s)}}}var Ev=E('<div class="drag-handle svelte-5cs2hz" title="Drag to reorder"><div class="icon-small svelte-5cs2hz"><!></div></div>'),Sv=E('<div class="eq-anim svelte-5cs2hz"><span class="bar b1 svelte-5cs2hz"></span> <span class="bar b2 svelte-5cs2hz"></span> <span class="bar b3 svelte-5cs2hz"></span></div>'),Tv=E('<div class="icon-small svelte-5cs2hz"><!></div>'),Mv=E('<div class="icon-small svelte-5cs2hz"><!></div>'),$v=E('<div class="icon-small accent svelte-5cs2hz"><!></div>'),Av=E('<span class="num svelte-5cs2hz"> </span>'),Pv=E('<button class="num-box svelte-5cs2hz"><!></button>'),Cv=E('<div slot="fallback" class="icon-ph svelte-5cs2hz"><!></div>'),zv=E('<span class="meta-tag quality svelte-5cs2hz"> </span>'),Lv=E('<button class="btn-icon small remove svelte-5cs2hz"><!></button>'),Rv=E('<div class="dur svelte-5cs2hz"> </div>'),Iv=E('<div role="button" tabindex="0"><div class="left svelte-5cs2hz"><!> <div class="thumb svelte-5cs2hz"><!></div></div> <div class="info svelte-5cs2hz"><div class="title-row svelte-5cs2hz"><div class="title text-ellipsis svelte-5cs2hz"> </div> <!></div> <div> </div></div> <div class="right svelte-5cs2hz"><button class="btn-icon small context-menu-btn svelte-5cs2hz" title="Options"><!></button> <button><!></button> <!></div></div>');function Wa(e,r){Tt(r,!1);const t=()=>ke(Lr,"$favorites",o),a=()=>ke(Jt,"$navigationStack",o),s=()=>ke(Ut,"$activeMenuTab",o),i=()=>ke(Or,"$stations",o),[o,l]=Ft(),d=M(),c=M(),u=M(),h=M(),f=M(),p=M(),k=M(),S=M(),w=M(),x=M(),U=M(),G=M(),K=M(),J=M(),ce=M(),z=M(),q=M();let C=ft(r,"track",8),xe=ft(r,"index",8),he=ft(r,"isEditable",8,!1),P=ft(r,"playingIndex",24,()=>-1),j=ft(r,"playingFile",8,null),ae=ft(r,"isPlaying",8,!1);const V=xs();let te=M(!1),N=M(!1);function R(D){if(n(k))return"â";if(!D)return"0:00";const pe=parseInt(D,10),ze=Math.floor(pe/60),Fe=pe%60;return`${ze}:${Fe.toString().padStart(2,"0")}`}function _e(D){D.stopPropagation(),n(f)?An():V("play")}function H(){return n(c)?.view==="details"&&n(c).data?.name?{type:"playlist",playlistName:n(c).data.name,index:xe()}:n(u)?{type:"queue",index:xe()}:{type:"general"}}function Z(D){D.stopPropagation(),Ha(D,C(),H())}function se(D){he()||Ha(D.detail.originalEvent,C(),H())}function T(D){D.stopPropagation(),!n(k)&&C().artist&&(Ut.set("artists"),Nr("albums_by_artist",{name:C().artist}))}ee(()=>I(C()),()=>{C()&&g(N,!1)}),ee(()=>(t(),I(C())),()=>{g(d,t().has(C().file))}),ee(()=>a(),()=>{g(c,a()[a().length-1])}),ee(()=>(n(c),s()),()=>{g(u,n(c)?.view==="queue"||n(c)?.view==="root"&&s()==="queue")}),ee(()=>(n(u),I(xe()),I(P())),()=>{g(h,n(u)?Number(xe())===P():!1)}),ee(()=>(I(C()),I(j())),()=>{g(f,C().file===j())}),ee(()=>(n(f),n(h)),()=>{g(p,n(f)&&!n(h))}),ee(()=>I(C()),()=>{g(k,C().file&&(C().file.startsWith("http")||C().file.includes("RADIO")))}),ee(()=>(n(h),I(ae()),n(te)),()=>{g(S,n(h)&&ae()&&n(te))}),ee(()=>(n(h),I(ae()),n(te)),()=>{g(w,n(h)&&ae()&&!n(te))}),ee(()=>(n(h),I(ae()),n(te)),()=>{g(x,n(h)&&!ae()&&!n(te))}),ee(()=>(n(te),n(S)),()=>{g(U,n(te)&&!n(S))}),ee(()=>I(C()),()=>{g(G,C().title||C().file?.split("/").pop())}),ee(()=>I(C()),()=>{g(K,C().artist||"Unknown")}),ee(()=>I(C()),()=>{g(J,R(C().time))}),ee(()=>I(C()),()=>{g(ce,C().qualityBadge?C().qualityBadge.split(" ")[0]:null)}),ee(()=>{},()=>{g(z,null)}),ee(()=>(n(N),I(C()),i(),n(z),Va),()=>{g(q,n(N)?ka(C(),i(),n(z)):Va(C(),"sm",i(),n(z)))}),Qt(),Pt();var O=Iv();let X;var ve=v(O),W=v(ve);{var ie=D=>{var pe=Ev(),ze=v(pe),Fe=v(ze);re(Fe,()=>(I(y),b(()=>y.DRAG_HANDLE))),A("mousedown",pe,Ue=>V("startdrag",Ue)),A("touchstart",pe,Ue=>V("startdrag",Ue),void 0,!0),A("click",pe,Yt(function(Ue){Ua.call(this,r,Ue)})),m(D,pe)},B=D=>{var pe=Pv(),ze=v(pe);{var Fe=Ne=>{var tt=Sv();m(Ne,tt)},Ue=Ne=>{var tt=at(),rt=Le(tt);{var We=He=>{var Ze=Tv(),De=v(Ze);re(De,()=>(I(y),b(()=>y.PAUSE))),m(He,Ze)},Qe=He=>{var Ze=at(),De=Le(Ze);{var Re=Ke=>{var nt=Mv(),gt=v(nt);re(gt,()=>(I(y),b(()=>y.PLAY))),m(Ke,nt)},Be=Ke=>{var nt=at(),gt=Le(nt);{var wt=_t=>{var ct=$v(),dt=v(ct);re(dt,()=>(I(y),b(()=>y.PLAY))),m(_t,ct)},bt=_t=>{var ct=Av(),dt=v(ct);le(()=>oe(dt,xe()+1)),m(_t,ct)};L(gt,_t=>{n(x)?_t(wt):_t(bt,!1)},!0)}m(Ke,nt)};L(De,Ke=>{n(U)?Ke(Re):Ke(Be,!1)},!0)}m(He,Ze)};L(rt,He=>{n(S)?He(We):He(Qe,!1)},!0)}m(Ne,tt)};L(ze,Ne=>{n(w)?Ne(Fe):Ne(Ue,!1)})}A("click",pe,_e),m(D,pe)};L(W,D=>{he()?D(ie):D(B,!1)})}var Q=_(W,2),ne=v(Q);aa(ne,{get src(){return n(q)},get alt(){return n(G)},radius:"4px",$$events:{error:()=>g(N,!0)},$$slots:{fallback:(D,pe)=>{var ze=Cv(),Fe=v(ze);re(Fe,()=>(n(k),I(y),b(()=>n(k)?y.RADIO:y.ALBUMS))),pt(1,ze,()=>Lt),m(D,ze)}}});var ue=_(ve,2),ye=v(ue),F=v(ye),ge=v(F),Ce=_(F,2);{var Pe=D=>{var pe=zv(),ze=v(pe);le(()=>oe(ze,n(ce))),m(D,pe)};L(Ce,D=>{n(ce)&&!n(k)&&D(Pe)})}var je=_(ye,2);let Me;var $=v(je),Y=_(ue,2),fe=v(Y),be=v(fe);re(be,()=>(I(y),b(()=>y.DOTS)));var $e=_(fe,2);let Ee;var we=v($e);re(we,()=>(n(d),I(y),b(()=>n(d)?y.HEART_FILLED:y.HEART)));var Te=_($e,2);{var de=D=>{var pe=Lv(),ze=v(pe);re(ze,()=>(I(y),b(()=>y.REMOVE))),A("click",pe,Yt(()=>V("remove",{index:xe()}))),m(D,pe)},Se=D=>{var pe=Rv(),ze=v(pe);le(()=>oe(ze,n(J))),m(D,pe)};L(Te,D=>{he()?D(de):D(Se,!1)})}It(()=>A("click",O,()=>!n(h)&&V("play"))),It(()=>A("mouseenter",O,()=>g(te,!0))),It(()=>A("mouseleave",O,()=>g(te,!1))),ys(O,D=>zs?.(D)),It(()=>A("longpress",O,se)),le(()=>{X=Ye(O,1,"row svelte-5cs2hz",null,X,{active:n(h),striped:n(p),editable:he()}),Ot(F,"title",n(G)),oe(ge,n(G)),Me=Ye(je,1,"artist text-ellipsis svelte-5cs2hz",null,Me,{link:!n(k)}),oe($,n(K)),Ee=Ye($e,1,"btn-icon small svelte-5cs2hz",null,Ee,{liked:n(d)})}),A("click",je,T),A("click",fe,Z),A("click",$e,Yt(()=>go(C()))),m(e,O),Mt(),l()}const ln=100,vi=5,di=25,ui=3;function jv({tracksStore:e,onMoveTrack:r}){const t=qe(!1),a=qe(!1),s=qe(!1),i=qe(null),o=qe(null),l=qe(null),d=qe({x:0,y:0,width:0,height:0,grabOffsetX:0,grabOffsetY:0}),c=qe(null);let u=!1,h=0,f=0,p=0,k=0;const S={scrollContainer:null,listBodyContainer:null};let w=null;function x(P,j,ae){const V=P.detail;if(V.button===2||(window.getSelection&&window.getSelection().removeAllRanges(),!S.scrollContainer))return;const N=S.scrollContainer.querySelectorAll(".row-wrapper")[j];if(!N)return;const R=N.getBoundingClientRect(),_e=V.touches?V.touches[0].clientX:V.clientX,H=V.touches?V.touches[0].clientY:V.clientY,Z=_e-R.left,se=H-R.top;u=!0,t.set(!1),a.set(!1),h=_e,f=H,p=_e,k=H,i.set(j),o.set(j),c.set(ae),l.set(null),d.set({x:_e,y:H,width:R.width,height:R.height,grabOffsetX:Z,grabOffsetY:se})}function U(P){if(!u||Xe(a))return;const j=P.touches?P.touches[0].clientX:P.clientX,ae=P.touches?P.touches[0].clientY:P.clientY;if(!Xe(t)){const V=Math.abs(j-h),te=Math.abs(ae-f);if(V<ui&&te<ui)return;t.set(!0)}P.cancelable&&P.preventDefault(),p=j,k=ae,d.update(V=>({...V,x:p,y:k})),q(k),G()}function G(){if(!S.listBodyContainer)return;const P=S.listBodyContainer.getBoundingClientRect(),j=Xe(d),V=k-P.top-j.grabOffsetY+j.height/2,te=Xe(e).length;if(V<0){o.set(0);return}if(V>P.height){o.set(te);return}const N=Array.from(S.listBodyContainer.querySelectorAll(".row-wrapper"));let R=-1,_e=1/0;N.forEach((H,Z)=>{const se=H.offsetTop+H.offsetHeight/2,T=Math.abs(V-se);T<_e&&(_e=T,R=Z)}),R!==-1&&o.set(R)}function K(P){if(u){if(u=!1,!Xe(t)){ce();return}J()}}async function J(){xe(),G(),t.set(!1),a.set(!0);const P=Xe(o);if(S.listBodyContainer&&P!==null){const R=S.listBodyContainer.querySelectorAll(".row-wrapper"),_e=S.listBodyContainer.getBoundingClientRect(),H=R[P];let Z=0,se=0,T=!1;if(H)Z=_e.top+H.offsetTop,se=_e.left+H.offsetLeft,T=!0;else if(P>=R.length&&R.length>0){const O=R[R.length-1];Z=_e.top+O.offsetTop+O.offsetHeight,se=_e.left+O.offsetLeft,T=!0}else R.length===0&&(Z=_e.top,se=_e.left,T=!0);T&&d.update(O=>({...O,y:Z+O.grabOffsetY,x:se+O.grabOffsetX}))}await new Promise(R=>setTimeout(R,250)),s.set(!0),await _a();const j=Xe(i),ae=Xe(e).length;let V=Math.max(0,Math.min(P,ae)),te=V;if(j!==null&&j!==V){const R=[...Xe(e)],[_e]=R.splice(j,1);te=Math.max(0,Math.min(te,R.length)),R.splice(te,0,_e),e.set(R),r&&r(j,te),i.set(te)}await _a(),c.set(null),i.set(null),o.set(null),a.set(!1);const N=j!==V?te:j;l.set(N),await _a(),requestAnimationFrame(()=>{requestAnimationFrame(()=>{s.set(!1),setTimeout(()=>{l.set(null)},300)})})}function ce(){u=!1,z()}function z(){t.set(!1),a.set(!1),i.set(null),o.set(null),c.set(null),xe()}function q(P){if(!S.scrollContainer)return;const{top:j,bottom:ae}=S.scrollContainer.getBoundingClientRect(),V=P-j,te=ae-P;xe();let N=0;if(V<ln&&V>0){const R=1-V/ln;N=-(vi+di*(R*R))}else if(te<ln&&te>0){const R=1-te/ln;N=vi+di*(R*R)}N!==0&&C(N)}function C(P){w||(w=requestAnimationFrame(function j(){S.scrollContainer&&(S.scrollContainer.scrollTop+=P,Xe(t)&&(d.update(ae=>({...ae,x:p,y:k})),G(),w=requestAnimationFrame(j)))}))}function xe(){w&&(cancelAnimationFrame(w),w=null)}function he(P,j,ae,V,te,N){return N||!j&&!ae||V===null||te===null?"":P===V?"opacity: 0; pointer-events: none;":V===te?"":V<te&&P>V&&P<=te?"transform: translateY(-100%);":V>te&&P>=te&&P<V?"transform: translateY(100%);":""}return{isDragging:t,isDropping:a,isReordering:s,draggingIndex:i,hoverIndex:o,justDroppedIndex:l,draggedItemData:c,ghostCoords:d,refs:S,onDragInit:x,onPointerMove:U,onPointerUp:K,getRowStyle:he,cancelDrag:ce}}var Nv=E('<div><div style="pointer-events: none; width: 100%; height: 100%;" class="svelte-ym6b2"><!></div></div>'),Dv=E('<div class="skeleton-row svelte-ym6b2"><div class="sk-left svelte-ym6b2"><!> <!></div> <div class="sk-info svelte-ym6b2"><!> <!></div> <div class="sk-right svelte-ym6b2"><!></div></div>'),Ov=E('<div class="skeletons-wrapper svelte-ym6b2"></div>'),Fv=E("<div><!></div>"),qv=E('<div class="content-padded svelte-ym6b2" style="text-align: center; opacity: 0.5;"> </div>'),Bv=E("<!> <!>",1),Uv=E('<div><!> <div class="list-body svelte-ym6b2"><!> <!></div></div>');function Cn(e,r){Tt(r,!1);const t=()=>ke(Jt,"$navigationStack",p),a=()=>ke(Ut,"$activeMenuTab",p),s=()=>ke(xe,"$isDragging",p),i=()=>ke(he,"$isDropping",p),o=()=>ke(te,"$draggedItemData",p),l=()=>ke(N,"$ghostCoords",p),d=()=>ke(j,"$draggingIndex",p),c=()=>ke(S(),"$itemsStore",p),u=()=>ke(V,"$justDroppedIndex",p),h=()=>ke(P,"$isReordering",p),f=()=>ke(ae,"$hoverIndex",p),[p,k]=Ft();let S=ft(r,"itemsStore",8),w=ft(r,"isEditMode",8,!1),x=ft(r,"isLoading",8,!1),U=ft(r,"emptyText",8,"List is empty"),G=ft(r,"onMoveItem",8,(B,Q)=>{}),K=M(""),J=M(0),ce=M(!1);la(async()=>{g(J,Qc(n(K))),!x()&&n(J)>0&&n(q).refs.scrollContainer&&(await _a(),rn(q,n(q).refs.scrollContainer.scrollTop=n(J)),g(ce,!0))});async function z(){await _a(),n(q).refs.scrollContainer&&(rn(q,n(q).refs.scrollContainer.scrollTop=n(J)),g(ce,!0))}so(()=>{n(q).cancelDrag(),n(q).refs.scrollContainer&&Wc(n(K),n(q).refs.scrollContainer.scrollTop)});const q=M(jv({tracksStore:S(),onMoveTrack:(B,Q)=>{G()(B,Q)}})),C=n(q),xe=C.isDragging,he=C.isDropping,P=C.isReordering,j=C.draggingIndex,ae=C.hoverIndex,V=C.justDroppedIndex,te=C.draggedItemData,N=C.ghostCoords,R=M(C.refs);function _e(B,Q,ne){w()&&n(q).onDragInit(B,Q,ne)}ee(()=>(t(),a()),()=>{const B=t(),Q=B[B.length-1],ne=a();if(Q&&Q.view==="root")g(K,`root_${ne}`);else if(Q){const ue=Q.data?Q.data.name||Q.data:"unknown";g(K,`${Q.view}_${ue}`)}}),ee(()=>(I(x()),n(ce),n(J),n(q)),()=>{!x()&&!n(ce)&&n(J)>0&&n(q).refs.scrollContainer&&z()}),Qt(),Pt();var H=Uv();A("mousemove",Cr,function(...B){n(q).onPointerMove?.apply(this,B)}),A("mouseup",Cr,function(...B){n(q).onPointerUp?.apply(this,B)}),A("touchmove",Cr,function(...B){n(q).onPointerMove?.apply(this,B)},void 0,!1),A("touchend",Cr,function(...B){n(q).onPointerUp?.apply(this,B)}),A("touchcancel",Cr,function(...B){n(q).onPointerUp?.apply(this,B)});let Z;var se=v(H);{var T=B=>{var Q=Nv();let ne;var ue=v(Q),ye=v(ue);cn(ye,r,"row",{get item(){return o()},get index(){return d()},isGhost:!0,startDrag:()=>{}}),le(()=>{ne=Ye(Q,1,"floating-item svelte-ym6b2",null,ne,{dropping:i()}),ot(Q,`
            top: ${l(),b(()=>l().y-l().grabOffsetY)??""}px; 
            left: ${l(),b(()=>l().x-l().grabOffsetX)??""}px;
            width: ${l(),b(()=>l().width)??""}px; 
            height: ${l(),b(()=>l().height)??""}px;
        `)}),m(B,Q)};L(se,B=>{(s()||i())&&o()&&B(T)})}var O=_(se,2),X=v(O);cn(X,r,"header",{});var ve=_(X,2);{var W=B=>{var Q=Ov();kt(Q,4,()=>Array(10),pr,(ne,ue)=>{var ye=Dv(),F=v(ye),ge=v(F);Vt(ge,{width:"24px",height:"24px",radius:"4px",style:"opacity: 0.3"});var Ce=_(ge,2);Vt(Ce,{width:"40px",height:"40px",radius:"4px",style:"margin-left: 12px;"});var Pe=_(F,2),je=v(Pe);Vt(je,{width:"40%",height:"14px",radius:"4px",style:"margin-bottom: 6px;"});var Me=_(je,2);Vt(Me,{width:"25%",height:"12px",radius:"4px",style:"opacity: 0.6"});var $=_(Pe,2),Y=v($);Vt(Y,{width:"30px",height:"12px",radius:"4px"}),m(ne,ye)}),m(B,Q)},ie=B=>{var Q=Bv(),ne=Le(Q);kt(ne,3,c,(F,ge)=>F._uid||ge,(F,ge,Ce)=>{var Pe=Fv();let je;var Me=v(Pe);cn(Me,r,"row",{get item(){return n(ge)},get index(){return n(Ce)},isGhost:!1,startDrag:$=>_e($,n(Ce),n(ge))}),le($=>{je=Ye(Pe,1,"row-wrapper svelte-ym6b2",null,je,{"ghost-placeholder":d()===n(Ce)&&(s()||i()),"just-dropped":u()===n(Ce),"no-transition":h()}),ot(Pe,$)},[()=>(n(q),I(n(Ce)),s(),i(),d(),f(),h(),b(()=>n(q).getRowStyle(n(Ce),s(),i(),d(),f(),h())))]),m(F,Pe)});var ue=_(ne,2);{var ye=F=>{var ge=qv(),Ce=v(ge);le(()=>oe(Ce,U())),m(F,ge)};L(ue,F=>{c(),b(()=>c().length===0)&&F(ye)})}m(B,Q)};L(ve,B=>{x()?B(W):B(ie,!1)})}Dr(O,B=>rn(R,n(R).listBodyContainer=B),()=>n(R)?.listBodyContainer),Dr(H,B=>rn(R,n(R).scrollContainer=B),()=>n(R)?.scrollContainer),le(()=>Z=Ye(H,1,"base-list-scroll-container svelte-ym6b2",null,Z,{dragging:s()})),pt(1,O,()=>Lt,()=>({duration:200})),m(e,H),Mt(),k()}var Hv=E('<div slot="fallback" class="icon-fallback svelte-1eh2rsb"><!></div>'),Vv=E('<span class="meta-tag svelte-1eh2rsb"> </span>'),Yv=E('<div class="header-subtitle-row svelte-1eh2rsb"><h2 class="header-sub-text svelte-1eh2rsb"> </h2> <!></div>'),Wv=E('<span class="meta-tag svelte-1eh2rsb"> </span>'),Qv=E('<span class="meta-tag svelte-1eh2rsb"> </span>'),Kv=E('<span class="meta-tag quality svelte-1eh2rsb"> </span>'),Xv=E('<div slot="header" class="content-padded svelte-1eh2rsb"><div class="view-header svelte-1eh2rsb"><div class="header-art svelte-1eh2rsb"><div style="width: 100%; height: 100%;" class="svelte-1eh2rsb"><!></div></div> <div class="header-info svelte-1eh2rsb"><div class="header-text-group svelte-1eh2rsb"><div class="header-label svelte-1eh2rsb"> </div> <h1 class="header-title svelte-1eh2rsb"> </h1> <!> <div class="meta-badges svelte-1eh2rsb"><!> <!> <!></div></div> <div class="header-actions svelte-1eh2rsb"><button class="btn-primary svelte-1eh2rsb"> </button> <button class="btn-secondary svelte-1eh2rsb"> </button></div></div></div></div>'),Gv=E('<div slot="row" class="svelte-1eh2rsb"><!></div>'),Zv=E("<button> </button>"),Jv=E('<div class="sort-backdrop svelte-1eh2rsb"></div> <div class="sort-menu svelte-1eh2rsb"></div>',1),ed=E('<div class="sort-wrapper svelte-1eh2rsb"><button class="sort-trigger svelte-1eh2rsb"><span class="svelte-1eh2rsb"> </span> <span class="sort-trigger-icon svelte-1eh2rsb"><!></span></button> <!></div>'),td=E('<div class="music-card skeleton-card svelte-1eh2rsb"><div class="card-img-container svelte-1eh2rsb"><!></div> <div class="card-title svelte-1eh2rsb" style="margin-top: 12px;"><!></div> <div class="card-sub-row svelte-1eh2rsb" style="margin-top: 6px;"><!></div></div>'),rd=E('<div class="music-grid svelte-1eh2rsb"></div>'),ad=E('<div class="group-header header-label svelte-1eh2rsb"> </div>'),nd=E('<div slot="fallback" class="icon-fallback svelte-1eh2rsb"><!></div>'),sd=E('<div class="card-sub text-ellipsis svelte-1eh2rsb"> </div>'),id=E('<div class="card-badge svelte-1eh2rsb"> </div>'),od=E('<div class="card-badge quality svelte-1eh2rsb"> </div>'),ld=E('<div class="music-card svelte-1eh2rsb" role="button" tabindex="0"><div class="card-img-container svelte-1eh2rsb"><!> <div class="play-overlay svelte-1eh2rsb"><span class="overlay-icon svelte-1eh2rsb"><!></span></div></div> <div class="card-title svelte-1eh2rsb"> </div> <div class="card-sub-row svelte-1eh2rsb"><!> <!> <!></div></div>'),cd=E('<div class="empty-text svelte-1eh2rsb">No results found</div>'),vd=E('<div class="music-grid svelte-1eh2rsb"></div>'),dd=E('<div class="content-padded svelte-1eh2rsb"><div class="search-input-container svelte-1eh2rsb"><span class="search-icon svelte-1eh2rsb"><!></span> <input type="text" class="svelte-1eh2rsb"/> <!></div> <!></div>'),ud=E("<div><!></div>");function fd(e,r){Tt(r,!1);const t=()=>ke(u,"$itemsStore",s),a=()=>ke(Jt,"$navigationStack",s),[s,i]=Ft(),o=M(),l=M(),d=M();let c=ft(r,"activeCategory",8,"artists");const u=qe([]);let h=M(!0),f=M(""),p=M("name"),k=M(!1);const S=[{id:"name",label:"A-Z"},{id:"artist",label:"Artist"},{id:"year",label:"Oldest"},{id:"year_desc",label:"Newest"}];let w=M(!1),x=M(!1),U=M(null),G=M(""),K=M(""),J=M(""),ce=M(0),z=0;function q(){g(k,!n(k))}function C(H){g(p,H),g(k,!1)}function xe(H,Z){if(!H||H.length===0)return[];const se=[...H].sort((T,O)=>{switch(Z){case"name":return T.displayName.localeCompare(O.displayName,void 0,{sensitivity:"base"});case"artist":const X=T.artist||"",ve=O.artist||"",W=X.localeCompare(ve,void 0,{sensitivity:"base"});return W!==0?W:(parseInt(T.year)||0)-(parseInt(O.year)||0);case"year":return(parseInt(T.year)||0)-(parseInt(O.year)||0);case"year_desc":return(parseInt(O.year)||0)-(parseInt(T.year)||0);default:return 0}});if(Z==="artist"){const T=[];let O=null;return se.forEach(X=>{const ve=X.artist||"Unknown Artist";ve!==O&&(T.push({_uid:`header-${ve}`,isHeader:!0,title:ve}),O=ve),T.push(X)}),T}return se}async function he(H,Z){if(!Z)return;const se=++z;g(h,!0),u.set([]),g(U,Z.data),g(G,""),g(K,""),g(J,""),g(ce,0),console.log(`[LibraryView #${se}] Start loading:`,Z);try{let T=[];if(Z.view==="root")T=H==="artists"?await Rr.getArtists():await Rr.getAlbums();else if(Z.view==="albums_by_artist"){const X=Z.data.name||Z.data;T=await Rr.getArtistAlbums(X),g(p,"year")}else if(Z.view==="tracks_by_album"){const X=Z.data.name||Z.data,ve=Z.data.artist;T=await Rr.getAlbumTracks(X,ve)}if(se!==z){console.warn(`[LibraryView #${se}] Request cancelled (stale).`);return}const O=T.map((X,ve)=>{const ie=typeof X=="string"?{name:X}:X;let B=String(ie.year||"");return B.length>4&&(B=B.substring(0,4)),{...ie,displayName:ie.name||ie.title||ie.artist||"Unknown",thumbFile:ie.file||null,year:B,_uid:(ie.file||ie.name||ve)+H+Z.view}});if(console.log(`[LibraryView #${se}] Setting ${O.length} items.`),u.set(O),Z.view==="tracks_by_album"&&O.length>0){g(U,O[0]),g(ce,O.length),g(J,O[0].year);const X=O.reduce((ve,W)=>ve+(W.time||0),0);if(X>0){const ve=Math.floor(X/3600),W=Math.floor(X%3600/60);g(G,ve>0?`${ve} hr ${W} min`:`${W} min`)}O[0].qualityBadge&&g(K,O[0].qualityBadge)}}catch(T){se===z&&(console.error(T),u.set([]))}finally{se===z&&g(h,!1)}}function P(H){n(d).view==="root"?c()==="artists"?Nr("albums_by_artist",H):Nr("tracks_by_album",H):n(d).view==="albums_by_artist"&&Nr("tracks_by_album",H)}function j(){const H=t();if(H.length>0){const Z=n(d).data.name||n(d).data.displayName||"this selection";ur({title:"Replace Queue?",message:`This will clear your queue and play all tracks from "${Z}".`,confirmLabel:"Play",type:"confirm",onConfirm:()=>{g(w,!0),$s(H)}})}}function ae(){const H=t();H.length>0&&(g(x,!0),As(H),setTimeout(()=>{g(x,!1)},2e3))}ee(()=>I(c()),()=>{c()&&(g(f,""),c(),g(p,"name"))}),ee(()=>(n(p),y),()=>{g(o,n(p)==="year_desc"?y.SORT_ASC:y.SORT_DESC)}),ee(()=>(t(),n(f),n(p)),()=>{g(l,xe(t().filter(H=>{if(!n(f))return!0;const Z=n(f).toLowerCase();return H.displayName.toLowerCase().includes(Z)||H.artist&&H.artist.toLowerCase().includes(Z)}),n(p)))}),ee(()=>a(),()=>{g(d,a()[a().length-1])}),ee(()=>(I(c()),n(d)),()=>{he(c(),n(d))}),ee(()=>n(d),()=>{n(d)&&(g(w,!1),g(x,!1),g(k,!1))}),Qt(),Pt();var V=ud();let te;var N=v(V);{var R=H=>{Cn(H,{get itemsStore(){return u},get isLoading(){return n(h)},isEditMode:!1,emptyText:"No tracks found",$$slots:{header:(Z,se)=>{var T=Xv(),O=v(T),X=v(O),ve=v(X),W=v(ve);{let de=ht(()=>(I(ka),n(U),b(()=>ka(n(U)))));aa(W,{get src(){return n(de)},alt:"Art",radius:"8px",$$slots:{fallback:(Se,D)=>{var pe=Hv(),ze=v(pe);re(ze,()=>(I(y),b(()=>y.ALBUMS))),m(Se,pe)}}})}var ie=_(X,2),B=v(ie),Q=v(B),ne=v(Q),ue=_(Q,2),ye=v(ue),F=_(ue,2);{var ge=de=>{var Se=Yv(),D=v(Se),pe=v(D),ze=_(D,2);{var Fe=Ue=>{var Ne=Vv(),tt=v(Ne);le(()=>oe(tt,n(J))),m(Ue,Ne)};L(ze,Ue=>{n(J)&&n(J)!=="0"&&Ue(Fe)})}le(()=>oe(pe,(n(U),b(()=>n(U).artist)))),m(de,Se)};L(F,de=>{n(U),b(()=>n(U)&&n(U).artist)&&de(ge)})}var Ce=_(F,2),Pe=v(Ce);{var je=de=>{var Se=Wv(),D=v(Se);le(()=>oe(D,`${n(ce)??""} tracks`)),m(de,Se)};L(Pe,de=>{n(ce)>0&&de(je)})}var Me=_(Pe,2);{var $=de=>{var Se=Qv(),D=v(Se);le(()=>oe(D,n(G))),m(de,Se)};L(Me,de=>{n(G)&&de($)})}var Y=_(Me,2);{var fe=de=>{var Se=Kv(),D=v(Se);le(()=>oe(D,n(K))),m(de,Se)};L(Y,de=>{n(K)&&de(fe)})}var be=_(B,2),$e=v(be),Ee=v($e),we=_($e,2),Te=v(we);le(()=>{oe(ne,(n(d),b(()=>n(d).view==="albums_by_artist"?"Artist":"Album"))),Ot(ue,"title",(n(d),b(()=>n(d).data.name||n(d).data.displayName))),oe(ye,(n(d),b(()=>n(d).data.name||n(d).data.displayName||"Unknown"))),$e.disabled=n(w),oe(Ee,n(w)?"Playing...":"Play All"),we.disabled=n(x),oe(Te,n(x)?"Added":"To Queue")}),A("click",$e,j),A("click",we,ae),m(Z,T)},row:(Z,se)=>{var T=Gv();const O=ht(()=>se.item),X=ht(()=>se.index);var ve=v(T);Wa(ve,{get track(){return n(O)},get index(){return n(X)},isEditable:!1,$$events:{play:()=>Pn(n(O))}}),m(Z,T)}}})},_e=H=>{var Z=dd(),se=v(Z),T=v(se),O=v(T);re(O,()=>(I(y),b(()=>y.SEARCH)));var X=_(T,2),ve=_(X,2);{var W=ne=>{var ue=ed(),ye=v(ue),F=v(ye),ge=v(F),Ce=_(F,2),Pe=v(Ce);re(Pe,()=>n(o));var je=_(ye,2);{var Me=$=>{var Y=Jv(),fe=Le(Y),be=_(fe,2);kt(be,5,()=>S,pr,($e,Ee)=>{var we=Zv();let Te;var de=v(we);le(()=>{Te=Ye(we,1,"sort-item svelte-1eh2rsb",null,Te,{selected:n(p)===n(Ee).id}),oe(de,(n(Ee),b(()=>n(Ee).label)))}),A("click",we,()=>C(n(Ee).id)),m($e,we)}),A("click",fe,q),pt(3,fe,()=>Lt,()=>({duration:100})),pt(3,be,()=>Es,()=>({start:.95,duration:100})),m($,Y)};L(je,$=>{n(k)&&$(Me)})}le($=>oe(ge,$),[()=>(n(p),b(()=>S.find($=>$.id===n(p))?.label))]),A("click",ye,q),m(ne,ue)};L(ve,ne=>{I(c()),n(d),b(()=>c()==="albums"||n(d).view==="albums_by_artist")&&ne(W)})}var ie=_(se,2);{var B=ne=>{var ue=rd();kt(ue,4,()=>Array(12),pr,(ye,F)=>{var ge=td(),Ce=v(ge),Pe=v(Ce);Vt(Pe,{width:"100%",height:"100%",radius:"8px"});var je=_(Ce,2),Me=v(je);Vt(Me,{width:"80%",height:"14px",radius:"4px"});var $=_(je,2),Y=v($);Vt(Y,{width:"50%",height:"12px",radius:"4px",style:"opacity: 0.6"}),m(ye,ge)}),m(ne,ue)},Q=ne=>{var ue=vd();kt(ue,5,()=>n(l),ye=>ye._uid,(ye,F)=>{var ge=at(),Ce=Le(ge);{var Pe=Me=>{var $=ad(),Y=v($);le(()=>oe(Y,(n(F),b(()=>n(F).title)))),m(Me,$)},je=Me=>{var $=ld(),Y=v($),fe=v(Y);{let Ne=ht(()=>(I(Va),n(F),b(()=>Va(n(F),"md"))));aa(fe,{get src(){return n(Ne)},get alt(){return n(F),b(()=>n(F).displayName)},radius:"8px",$$slots:{fallback:(tt,rt)=>{var We=nd(),Qe=v(We);{var He=De=>{var Re=at(),Be=Le(Re);re(Be,()=>(I(y),b(()=>y.ARTISTS))),m(De,Re)},Ze=De=>{var Re=at(),Be=Le(Re);re(Be,()=>(I(y),b(()=>y.ALBUMS))),m(De,Re)};L(Qe,De=>{c()==="artists"?De(He):De(Ze,!1)})}m(tt,We)}}})}var be=_(fe,2),$e=v(be),Ee=v($e);re(Ee,()=>(I(y),b(()=>y.PLAY)));var we=_(Y,2),Te=v(we),de=_(we,2),Se=v(de);{var D=Ne=>{var tt=sd(),rt=v(tt);le(()=>oe(rt,(n(F),b(()=>n(F).artist)))),m(Ne,tt)};L(Se,Ne=>{n(F),b(()=>n(F).artist)&&Ne(D)})}var pe=_(Se,2);{var ze=Ne=>{var tt=id(),rt=v(tt);le(()=>oe(rt,(n(F),b(()=>n(F).year)))),m(Ne,tt)};L(pe,Ne=>{n(F),b(()=>n(F).year&&n(F).year!=="0")&&Ne(ze)})}var Fe=_(pe,2);{var Ue=Ne=>{var tt=od(),rt=v(tt);le(We=>oe(rt,We),[()=>(n(F),b(()=>n(F).qualityBadge.split(" ")[0]))]),m(Ne,tt)};L(Fe,Ne=>{n(F),b(()=>n(F).qualityBadge)&&Ne(Ue)})}le(()=>oe(Te,(n(F),b(()=>n(F).displayName)))),A("click",$,()=>P(n(F))),A("keypress",$,Ne=>Ne.key==="Enter"&&P(n(F))),m(Me,$)};L(Ce,Me=>{n(F),b(()=>n(F).isHeader)?Me(Pe):Me(je,!1)})}m(ye,ge)},ye=>{var F=cd();m(ye,F)}),m(ne,ue)};L(ie,ne=>{n(h)?ne(B):ne(Q,!1)})}le(()=>Ot(X,"placeholder",`Filter ${c()??""}...`)),Ba(X,()=>n(f),ne=>g(f,ne)),m(H,Z)};L(N,H=>{n(d),b(()=>n(d)?.view==="tracks_by_album")?H(R):H(_e,!1)})}le(()=>te=Ye(V,1,"view-container svelte-1eh2rsb",null,te,{scrollable:n(d)?.view!=="tracks_by_album"})),m(e,V),Mt(),i()}var hd=E('<div class="music-card svelte-1otxnt7"><!> <!></div>'),pd=E('<div class="music-grid svelte-1otxnt7"></div>'),gd=E('<div slot="fallback" class="icon-fallback svelte-1otxnt7">ð»</div>'),_d=E('<div class="status-badge playing svelte-1otxnt7">PLAYING</div>'),md=E('<div class="status-badge paused svelte-1otxnt7">PAUSED</div>'),bd=E('<span class="overlay-icon svelte-1otxnt7"><!></span>'),yd=E('<div class="card-sub svelte-1otxnt7"> </div>'),wd=E('<div class="card-badge quality svelte-1otxnt7"> </div>'),kd=E('<div role="button" tabindex="0"><div class="card-img-container svelte-1otxnt7"><!> <div class="play-overlay svelte-1otxnt7"><!></div></div> <div class="card-title svelte-1otxnt7"> </div> <div class="card-sub-row svelte-1otxnt7"><!> <!></div></div>'),xd=E('<div class="empty-text svelte-1otxnt7">No stations found</div>'),Ed=E('<div class="music-grid svelte-1otxnt7"></div> <!>',1),Sd=E('<div class="view-container scrollable svelte-1otxnt7"><div class="content-padded no-bottom-pad svelte-1otxnt7"><div class="search-input-container svelte-1otxnt7"><span class="search-icon svelte-1otxnt7"><!></span> <input type="text" placeholder="Find station..." class="svelte-1otxnt7"/></div></div> <div class="content-padded svelte-1otxnt7"><!></div></div>');function Td(e,r){Tt(r,!1);const t=()=>ke(Or,"$stations",o),a=()=>ke(yt,"$status",o),s=()=>ke(vn,"$isLoadingRadio",o),i=()=>ke(rr,"$currentSong",o),[o,l]=Ft(),d=M(),c=M();let u=M("");ee(()=>(t(),n(u)),()=>{g(d,t().filter(J=>{const ce=n(u).toLowerCase();return J.name.toLowerCase().includes(ce)||J.genre&&J.genre.toLowerCase().includes(ce)}))}),ee(()=>a(),()=>{g(c,a().bitrate?`${a().bitrate} kbps`:a().format||"")}),Qt(),Pt();var h=Sd(),f=v(h),p=v(f),k=v(p),S=v(k);re(S,()=>(I(y),b(()=>y.SEARCH)));var w=_(k,2),x=_(f,2),U=v(x);{var G=J=>{var ce=pd();kt(ce,4,()=>Array(12),pr,(z,q)=>{var C=hd(),xe=v(C);Vt(xe,{width:"100%",style:"aspect-ratio:1; border-radius:12px; margin-bottom:12px;"});var he=_(xe,2);Vt(he,{width:"70%",height:"16px"}),m(z,C)}),m(J,ce)},K=J=>{var ce=Ed(),z=Le(ce);kt(z,5,()=>n(d),pr,(xe,he)=>{const P=ht(()=>(n(he),b(()=>n(he).file))),j=ht(()=>(i(),n(he),I(n(P)),b(()=>i().stationName===n(he).name||i().file===n(P)))),ae=ht(()=>(I(wa),n(he),b(()=>wa(n(he)))));var V=kd();let te;var N=v(V),R=v(N);aa(R,{get src(){return n(ae)},get alt(){return n(he),b(()=>n(he).name)},radius:"8px",$$slots:{fallback:(Q,ne)=>{var ue=gd();m(Q,ue)}}});var _e=_(R,2),H=v(_e);{var Z=Q=>{var ne=at(),ue=Le(ne);{var ye=ge=>{var Ce=_d();m(ge,Ce)},F=ge=>{var Ce=md();m(ge,Ce)};L(ue,ge=>{a(),b(()=>a().state==="play")?ge(ye):ge(F,!1)})}m(Q,ne)},se=Q=>{var ne=bd(),ue=v(ne);re(ue,()=>(I(y),b(()=>y.PLAY))),m(Q,ne)};L(H,Q=>{n(j)?Q(Z):Q(se,!1)})}var T=_(N,2),O=v(T),X=_(T,2),ve=v(X);{var W=Q=>{var ne=yd(),ue=v(ne);le(()=>oe(ue,(n(he),b(()=>n(he).genre)))),m(Q,ne)};L(ve,Q=>{n(he),b(()=>n(he).genre)&&Q(W)})}var ie=_(ve,2);{var B=Q=>{var ne=wd(),ue=v(ne);le(()=>oe(ue,n(c))),pt(1,ne,()=>Lt),m(Q,ne)};L(ie,Q=>{n(j)&&n(c)&&Q(B)})}le(()=>{te=Ye(V,1,"music-card svelte-1otxnt7",null,te,{"is-active":n(j)}),ot(_e,n(j)?"opacity: 1":""),oe(O,(n(he),b(()=>n(he).name)))}),A("click",V,()=>Cs(n(he))),m(xe,V)});var q=_(z,2);{var C=xe=>{var he=xd();m(xe,he)};L(q,xe=>{n(d),t(),b(()=>n(d).length===0&&t().length>0)&&xe(C)})}m(J,ce)};L(U,J=>{s()?J(G):J(K,!1)})}Ba(w,()=>n(u),J=>g(u,J)),pt(1,h,()=>Lt,()=>({duration:200})),m(e,h),Mt(),l()}var Md=E('<button class="clear-icon-btn svelte-m7c4tz"><!></button>'),$d=E('<div class="spinner svelte-m7c4tz"></div>'),Ad=E('<div class="content-padded no-bottom-pad svelte-m7c4tz"><div class="search-input-container svelte-m7c4tz"><span class="search-icon svelte-m7c4tz"><!></span> <input type="text" placeholder="Search playlists &amp; tracks..." class="svelte-m7c4tz"/> <!> <!></div></div>'),Pd=E('<span class="meta-tag svelte-m7c4tz">Loading...</span>'),Cd=E('<span class="meta-tag svelte-m7c4tz"> </span>'),zd=E('<span class="meta-tag quality svelte-m7c4tz"> </span>'),Ld=E('<span class="meta-tag svelte-m7c4tz"> </span> <!> <!>',1),Rd=E('<div slot="header" class="content-padded svelte-m7c4tz"><div class="view-header svelte-m7c4tz"><div class="header-art svelte-m7c4tz"><div class="header-icon-wrap svelte-m7c4tz"><!></div></div> <div class="header-info svelte-m7c4tz"><div class="header-text-group svelte-m7c4tz"><div class="header-label svelte-m7c4tz">Playlist</div> <h1 class="header-title svelte-m7c4tz"> </h1> <div class="meta-badges svelte-m7c4tz"><!></div></div> <div class="header-actions svelte-m7c4tz"><button class="btn-primary svelte-m7c4tz"> </button> <button class="btn-secondary svelte-m7c4tz"> </button> <button title="Edit"><!></button></div></div></div></div>'),Id=E('<div slot="row" class="svelte-m7c4tz"><!></div>'),jd=E('<div class="music-card skeleton-card svelte-m7c4tz"><div class="card-img-container svelte-m7c4tz"><!></div> <div style="margin-top: 8px;" class="svelte-m7c4tz"><!></div></div>'),Nd=E('<div class="content-padded svelte-m7c4tz"><div class="music-grid playlists-grid-override svelte-m7c4tz"></div></div>'),Dd=E('<button class="card-menu-btn svelte-m7c4tz"><!></button>'),Od=E('<div class="music-card svelte-m7c4tz"><div class="card-img-container svelte-m7c4tz"><div class="icon-wrap svelte-m7c4tz"><!></div> <!> <div class="play-overlay svelte-m7c4tz"><span class="overlay-icon svelte-m7c4tz"><!></span></div></div> <div class="card-title svelte-m7c4tz"> </div> <div class="card-sub-row svelte-m7c4tz"><div class="card-sub svelte-m7c4tz"> </div></div></div>'),Fd=E('<div class="music-grid playlists-grid-override svelte-m7c4tz"><div class="music-card svelte-m7c4tz"><div class="card-img-container dashed-cover svelte-m7c4tz"><div class="icon-wrap svelte-m7c4tz"><!></div></div> <div class="card-title svelte-m7c4tz">New Playlist</div></div> <!></div>'),qd=E('<div class="music-card svelte-m7c4tz"><div class="card-img-container svelte-m7c4tz"><div class="icon-wrap svelte-m7c4tz"><!></div> <div class="play-overlay svelte-m7c4tz"><span class="overlay-icon svelte-m7c4tz"><!></span></div></div> <div class="card-title svelte-m7c4tz"> </div></div>'),Bd=E('<div class="header-label section-spacing svelte-m7c4tz">Matched Playlists</div> <div class="music-grid horizontal section-mb svelte-m7c4tz"></div>',1),Ud=E('<div class="group-container svelte-m7c4tz"><div class="group-header svelte-m7c4tz"><div class="group-icon svelte-m7c4tz"><!></div> <div class="group-title svelte-m7c4tz"> </div> <div class="group-count svelte-m7c4tz"> </div> <div class="group-actions svelte-m7c4tz"><button class="btn-icon small svelte-m7c4tz" title="Play matches"><!></button> <button class="btn-icon small svelte-m7c4tz" title="Add matches to Queue"><!></button></div></div> <div class="group-tracks svelte-m7c4tz"></div></div>'),Hd=E('<div class="header-label section-spacing svelte-m7c4tz">Matched Tracks</div> <div class="grouped-results svelte-m7c4tz"></div>',1),Vd=E('<div class="empty-text svelte-m7c4tz"> </div>'),Yd=E('<div class="empty-text svelte-m7c4tz" style="opacity: 0.7">Searching tracks in playlists...</div>'),Wd=E("<!> <!> <!>",1),Qd=E('<div class="content-padded svelte-m7c4tz"><!></div>'),Kd=E("<div><!> <!></div>");function Xd(e,r){Tt(r,!1);const t=()=>ke(yt,"$status",f),a=()=>ke(rr,"$currentSong",f),s=()=>ke(Jt,"$navigationStack",f),i=()=>ke($n,"$playlists",f),o=()=>ke(ja,"$activePlaylistTracks",f),l=()=>ke(ns,"$isLoadingTracks",f),d=()=>ke(Yc,"$activePlaylistName",f),c=()=>ke(Kr,"$queue",f),u=()=>ke(mn,"$currentTheme",f),h=()=>ke(as,"$isLoadingPlaylists",f),[f,p]=Ft(),k=M(),S=M(),w=M(),x=M(),U=M(),G=M();let K=M(!1),J=M(!1),ce=M(!1),z=M(""),q=M(!1),C,xe=0,he=M([]),P=M([]),j=M(""),ae=M(""),V=M("");function te($){g(z,$.target.value),clearTimeout(C),n(z).length>=2?C=setTimeout(()=>{N(n(z))},600):(g(q,!1),g(he,[]),g(P,[]))}async function N($){if(!$)return;xe++;const Y=xe;g(q,!0);const fe=$.toLowerCase();g(he,i().filter(Ee=>Ee.name.toLowerCase().includes(fe)));let be=[];const $e=i().filter(Ee=>Ee.name!=="Favorites");for(const Ee of $e){if(Y!==xe)break;try{const we=await Ae.send(`listplaylistinfo "${Ee.name.replace(/"/g,'\\"')}"`),Se=tr.parseTracks(we).map((D,pe)=>({...D,playlistPos:pe})).filter(D=>D.title&&D.title.toLowerCase().includes(fe)||D.artist&&D.artist.toLowerCase().includes(fe));if(Se.length>0){const D=Se.map(pe=>({...pe,_uid:Math.random()}));be.push({playlist:Ee,tracks:D}),g(P,[...be])}}catch(we){console.warn(`Failed to search in playlist ${Ee.name}`,we)}}Y===xe&&g(q,!1)}function R($){n(K)||Pn($)}function _e($){$.deltaY!==0&&($.currentTarget.scrollLeft+=$.deltaY)}function H($,Y){ur({title:"Play Search Results?",message:`This will clear your queue and play ${$.length} matching tracks from "${Y}".`,confirmLabel:"Play",type:"confirm",onConfirm:()=>{$s($)}})}function Z($){!$||$.length===0||As($)}la(()=>{!n(U)&&i().length===0&&Ps()});function se($){const Y=$.reduce((be,$e)=>be+(parseFloat($e.time)||0),0);if(Y>0){const be=Math.floor(Y/3600),$e=Math.floor(Y%3600/60);g(j,be>0?`${be} hr ${$e} min`:`${$e} min`)}else g(j,"");const fe=new Set;$.forEach(be=>{be.qualityBadge&&fe.add(be.qualityBadge.split(" ")[0])}),g(ae,fe.size===1?$[0].qualityBadge:fe.size>1?"Mixed":"")}function T($){Nr("details",$)}function O(){if(c().length===0){ur({title:"Create Playlist",message:"Queue is empty. Add tracks to queue before saving a playlist.",confirmLabel:"OK",type:"alert"});return}ur({title:"New Playlist",message:"Save current queue as a new playlist:",type:"prompt",placeholder:"Playlist Name",confirmLabel:"Create",onConfirm:$=>{$&&fr.createPlaylistFromQueue($)}})}function X($,Y){Y.name!=="Favorites"&&($.stopPropagation(),$.preventDefault(),Ha($,null,{type:"playlist-card",playlist:Y}))}function ve(){ur({title:"Replace Queue?",message:`This will clear your current queue and play "${n(x).data.name}".`,confirmLabel:"Play",type:"confirm",onConfirm:()=>{g(J,!0),bo(n(x).data.name,0)}})}function W(){if(o().length>0){const $=n(x).data.name.replace(/"/g,'\\"');kn(`load "${$}"`),g(ce,!0),setTimeout(()=>{g(ce,!1)},2e3)}}function ie(){g(K,!n(K))}function B($){const Y=n(x).data.name,fe=o();fe.splice($,1),ja.set(fe),_o(Y,$),se(fe)}function Q($,Y){mo(n(x).data.name,$,Y)}function ne($){if($.name==="Favorites"){if(u()==="gruvbox"){const Y="var(--c-heart)";return`background: linear-gradient(135deg, ${Y}, transparent); background-color: ${Y};`}return"background: linear-gradient(135deg, hsl(348, 95%, 58%), hsl(348, 90%, 40%));"}return u()==="gruvbox"?`background: linear-gradient(135deg, ${$.colorVar}, transparent); background-color: ${$.colorVar};`:`background: ${$.color}`}function ue($){if(!$)return"";if($.name==="Favorites"){if(u()==="gruvbox"){const be="var(--c-heart)";return`background: linear-gradient(135deg, ${be}, transparent); background-color: ${be};`}return"background: linear-gradient(135deg, hsl(348, 95%, 58%), hsl(348, 90%, 40%));"}const Y="var(--c-bg-card)";if(u()==="gruvbox"){const be=$.colorVar||$.color||Y;return`background: linear-gradient(135deg, ${be}, transparent); background-color: ${be};`}return`background: ${$.color||$.colorVar||Y}`}ee(()=>t(),()=>{g(k,Number(t().song))}),ee(()=>a(),()=>{g(S,a().file)}),ee(()=>t(),()=>{g(w,t().state==="play")}),ee(()=>s(),()=>{g(x,s()[s().length-1])}),ee(()=>n(x),()=>{g(U,n(x).view==="details")}),ee(()=>(n(x),n(V)),()=>{const $=JSON.stringify(n(x));$!==n(V)&&(g(z,""),g(J,!1),g(ce,!1),g(K,!1),g(he,[]),g(P,[]),g(q,!1),g(V,$))}),ee(()=>(n(U),o(),l()),()=>{n(U)&&o().length>0?se(o()):n(U)&&o().length===0&&!l()&&(g(j,"0 min"),g(ae,""))}),ee(()=>(n(U),n(x),d(),xv),()=>{n(U)&&n(x).data&&d()!==n(x).data.name&&po(n(x).data.name)}),ee(()=>n(x),()=>{g(G,n(x)?.data?.name==="Favorites")}),Qt(),Pt();var ye=Kd();let F;var ge=v(ye);{var Ce=$=>{var Y=Ad(),fe=v(Y),be=v(fe),$e=v(be);re($e,()=>(I(y),b(()=>y.SEARCH)));var Ee=_(be,2),we=_(Ee,2);{var Te=D=>{var pe=Md(),ze=v(pe);re(ze,()=>(I(y),b(()=>y.CLOSE))),A("click",pe,()=>{g(z,""),g(he,[]),g(P,[]),g(q,!1)}),m(D,pe)};L(we,D=>{n(z)&&D(Te)})}var de=_(we,2);{var Se=D=>{var pe=$d();m(D,pe)};L(de,D=>{n(q)&&D(Se)})}le(()=>ro(Ee,n(z))),A("input",Ee,te),m($,Y)};L(ge,$=>{n(U)||$(Ce)})}var Pe=_(ge,2);{var je=$=>{Cn($,{get itemsStore(){return ja},get isLoading(){return l()},get isEditMode(){return n(K)},emptyText:"This playlist is empty.",onMoveItem:Q,$$slots:{header:(Y,fe)=>{var be=Rd(),$e=v(be),Ee=v($e),we=v(Ee),Te=v(we);re(Te,()=>(n(G),I(y),b(()=>n(G)?y.HEART_FILLED:y.PLAYLISTS)));var de=_(Ee,2),Se=v(de),D=_(v(Se),2),pe=v(D),ze=_(D,2),Fe=v(ze);{var Ue=Be=>{var Ke=Pd();m(Be,Ke)},Ne=Be=>{var Ke=Ld(),nt=Le(Ke),gt=v(nt),wt=_(nt,2);{var bt=dt=>{var vt=Cd(),lt=v(vt);le(()=>oe(lt,n(j))),m(dt,vt)};L(wt,dt=>{n(j)&&dt(bt)})}var _t=_(wt,2);{var ct=dt=>{var vt=zd(),lt=v(vt);le(()=>oe(lt,n(ae))),m(dt,vt)};L(_t,dt=>{n(ae)&&dt(ct)})}le(()=>oe(gt,`${o(),b(()=>o().length)??""} tracks`)),m(Be,Ke)};L(Fe,Be=>{l()?Be(Ue):Be(Ne,!1)})}var tt=_(Se,2),rt=v(tt),We=v(rt),Qe=_(rt,2),He=v(Qe),Ze=_(Qe,2);let De;var Re=v(Ze);re(Re,()=>(n(K),I(y),b(()=>n(K)?y.ACCEPT:y.EDIT))),le(Be=>{ot(Ee,Be),Ot(D,"title",(n(x),b(()=>n(x).data.name))),oe(pe,(n(x),b(()=>n(x).data.name))),rt.disabled=n(J),oe(We,n(J)?"Playing...":"Play All"),Qe.disabled=n(ce),oe(He,n(ce)?"Added":"To Queue"),De=Ye(Ze,1,"btn-action svelte-m7c4tz",null,De,{active:n(K)})},[()=>(n(x),b(()=>ue(n(x).data)))]),A("click",rt,ve),A("click",Qe,W),A("click",Ze,ie),m(Y,be)},row:(Y,fe)=>{var be=Id();const $e=ht(()=>fe.item),Ee=ht(()=>fe.index),we=ht(()=>fe.startDrag);var Te=v(be);Wa(Te,{get track(){return n($e)},get index(){return n(Ee)},get playingIndex(){return n(k)},get playingFile(){return n(S)},get isPlaying(){return n(w)},get isEditable(){return n(K)},$$events:{play:()=>R(n($e)),remove:()=>B(n(Ee)),startdrag(...de){n(we)?.apply(this,de)}}}),m(Y,be)}}})},Me=$=>{var Y=at(),fe=Le(Y);{var be=Ee=>{var we=Nd(),Te=v(we);kt(Te,4,()=>Array(8),pr,(de,Se)=>{var D=jd(),pe=v(D),ze=v(pe);Vt(ze,{width:"100%",height:"100%",radius:"12px"});var Fe=_(pe,2),Ue=v(Fe);Vt(Ue,{width:"60%",height:"16px",radius:"4px"}),m(de,D)}),m(Ee,we)},$e=Ee=>{var we=Qd(),Te=v(we);{var de=D=>{var pe=Fd(),ze=v(pe),Fe=v(ze),Ue=v(Fe),Ne=v(Ue);re(Ne,()=>(I(y),b(()=>y.ADD)));var tt=_(ze,2);kt(tt,1,i,rt=>rt.name,(rt,We)=>{const Qe=ht(()=>(n(We),b(()=>n(We).name==="Favorites")));var He=Od(),Ze=v(He),De=v(Ze),Re=v(De);re(Re,()=>(I(n(Qe)),I(y),b(()=>n(Qe)?y.HEART_FILLED:y.PLAYLISTS)));var Be=_(De,2);{var Ke=lt=>{var Ie=Dd(),ut=v(Ie);re(ut,()=>(I(y),b(()=>y.DOTS))),A("click",Ie,Ct=>X(Ct,n(We))),m(lt,Ie)};L(Be,lt=>{n(Qe)||lt(Ke)})}var nt=_(Be,2),gt=v(nt),wt=v(gt);re(wt,()=>(I(y),b(()=>y.PLAY)));var bt=_(Ze,2),_t=v(bt),ct=_(bt,2),dt=v(ct),vt=v(dt);It(()=>A("click",He,()=>T(n(We)))),ys(He,lt=>zs?.(lt)),It(()=>A("longpress",He,lt=>X(lt.detail.originalEvent,n(We)))),It(()=>A("contextmenu",He,lt=>X(lt,n(We)))),le((lt,Ie)=>{ot(Ze,lt),oe(_t,(n(We),b(()=>n(We).name))),oe(vt,Ie)},[()=>(n(We),b(()=>ne(n(We)))),()=>(n(We),b(()=>n(We).lastModified?new Date(n(We).lastModified).toLocaleDateString():"Playlist"))]),m(rt,He)}),A("click",ze,O),m(D,pe)},Se=D=>{var pe=Wd(),ze=Le(pe);{var Fe=Qe=>{var He=Bd(),Ze=_(Le(He),2);kt(Ze,5,()=>n(he),De=>De.name,(De,Re)=>{const Be=ht(()=>(n(Re),b(()=>n(Re).name==="Favorites")));var Ke=qd(),nt=v(Ke),gt=v(nt),wt=v(gt);re(wt,()=>(I(n(Be)),I(y),b(()=>n(Be)?y.HEART_FILLED:y.PLAYLISTS)));var bt=_(gt,2),_t=v(bt),ct=v(_t);re(ct,()=>(I(y),b(()=>y.PLAY)));var dt=_(nt,2),vt=v(dt);le(lt=>{ot(nt,lt),oe(vt,(n(Re),b(()=>n(Re).name)))},[()=>(n(Re),b(()=>ne(n(Re))))]),A("click",Ke,()=>T(n(Re))),m(De,Ke)}),A("wheel",Ze,_e),m(Qe,He)};L(ze,Qe=>{n(he),b(()=>n(he).length>0)&&Qe(Fe)})}var Ue=_(ze,2);{var Ne=Qe=>{var He=Hd(),Ze=_(Le(He),2);kt(Ze,5,()=>n(P),De=>De.playlist.name,(De,Re)=>{var Be=Ud(),Ke=v(Be),nt=v(Ke),gt=v(nt);re(gt,()=>(I(y),b(()=>y.PLAYLISTS)));var wt=_(nt,2),bt=v(wt),_t=_(wt,2),ct=v(_t),dt=_(_t,2),vt=v(dt),lt=v(vt);re(lt,()=>(I(y),b(()=>y.PLAY)));var Ie=_(vt,2),ut=v(Ie);re(ut,()=>(I(y),b(()=>y.ADD)));var Ct=_(Ke,2);kt(Ct,5,()=>(n(Re),b(()=>n(Re).tracks)),Kt=>Kt._uid,(Kt,me)=>{Wa(Kt,{get track(){return n(me)},get index(){return n(me),b(()=>n(me).playlistPos)},get playingFile(){return n(S)},get isPlaying(){return n(w)},$$events:{play:()=>R(n(me))}})}),le(()=>{oe(bt,(n(Re),b(()=>n(Re).playlist.name))),oe(ct,(n(Re),b(()=>n(Re).tracks.length)))}),A("click",vt,Yt(()=>H(n(Re).tracks,n(Re).playlist.name))),A("click",Ie,Yt(()=>Z(n(Re).tracks))),A("click",Ke,()=>T(n(Re).playlist)),m(De,Be)}),m(Qe,He)};L(Ue,Qe=>{n(P),b(()=>n(P).length>0)&&Qe(Ne)})}var tt=_(Ue,2);{var rt=Qe=>{var He=Vd(),Ze=v(He);le(()=>oe(Ze,`No matches found for "${n(z)??""}"`)),m(Qe,He)},We=Qe=>{var He=at(),Ze=Le(He);{var De=Re=>{var Be=Yd();m(Re,Be)};L(Ze,Re=>{n(q),n(P),b(()=>n(q)&&n(P).length===0)&&Re(De)},!0)}m(Qe,He)};L(tt,Qe=>{n(q),n(he),n(P),b(()=>!n(q)&&n(he).length===0&&n(P).length===0)?Qe(rt):Qe(We,!1)})}m(D,pe)};L(Te,D=>{n(z)?D(Se,!1):D(de)})}m(Ee,we)};L(fe,Ee=>{h()?Ee(be):Ee($e,!1)},!0)}m($,Y)};L(Pe,$=>{n(U)?$(je):$(Me,!1)})}le(()=>F=Ye(ye,1,"view-container svelte-m7c4tz",null,F,{scrollable:!n(U)})),m(e,ye),Mt(),p()}var Gd=E('<button class="clear-icon-btn svelte-1d3z1zm"><!></button>'),Zd=E('<div class="spinner svelte-1d3z1zm"></div>'),Jd=E('<div class="placeholder-state svelte-1d3z1zm"><div class="placeholder-icon svelte-1d3z1zm">ð</div> <p class="svelte-1d3z1zm">Type to search your library</p></div>'),eu=E('<div class="empty-text svelte-1d3z1zm"> </div>'),tu=E('<div slot="fallback" class="icon-fallback svelte-1d3z1zm">ð¿</div>'),ru=E('<div class="meta-tag svelte-1d3z1zm"> </div>'),au=E('<div class="meta-tag quality svelte-1d3z1zm"> </div>'),nu=E('<div class="music-card svelte-1d3z1zm"><div class="card-img-container svelte-1d3z1zm"><!> <div class="play-overlay svelte-1d3z1zm"><span class="overlay-icon svelte-1d3z1zm"><!></span></div></div> <div class="card-title svelte-1d3z1zm"> </div> <div class="card-sub-row svelte-1d3z1zm"><div class="card-sub text-ellipsis svelte-1d3z1zm"> </div> <!> <!></div></div>'),su=E('<div class="header-label section-spacing svelte-1d3z1zm">Albums</div> <div class="music-grid horizontal section-mb svelte-1d3z1zm"></div>',1),iu=E('<div class="header-label svelte-1d3z1zm">Tracks</div>'),ou=E("<!> <!>",1),lu=E('<div slot="header" class="content-padded svelte-1d3z1zm"><!></div>'),cu=E('<div slot="row" class="svelte-1d3z1zm"><!></div>'),vu=E('<div class="view-container svelte-1d3z1zm"><div class="content-padded no-bottom-pad svelte-1d3z1zm"><div class="search-input-container svelte-1d3z1zm"><span class="search-icon svelte-1d3z1zm"><!></span> <input type="text" placeholder="Artists, songs, or albums" autoFocus class="svelte-1d3z1zm"/> <!> <!></div></div> <!></div>');function du(e,r){Tt(r,!1);const t=()=>ke(Na,"$searchQuery",s),a=()=>ke(o,"$tracksStore",s),[s,i]=Ft(),o=qe([]);let l=M([]),d=M(!1),c,u=M(!1);la(()=>{t().length>=2&&p(t())});function h(P){Na.set(P.target.value),clearTimeout(c),c=setTimeout(()=>{p(t())},300)}function f(){Na.set(""),o.set([]),g(l,[]),g(u,!1)}async function p(P){const j=P.trim().toLowerCase();if(j.length<2){o.set([]),g(l,[]),g(u,!1);return}g(d,!0),g(u,!0);try{const ae=await Rr.search(j),V=ae.map((N,R)=>({...N,_uid:N.file?`${N.file}-${R}`:`search-${R}`}));o.set(V);const te=new Map;ae.forEach(N=>{const R=N.album;if(R&&!te.has(R)){const _e=R.toLowerCase().includes(j),H=N.artist&&N.artist.toLowerCase().includes(j);if(_e||H){let Z=String(N.year||"");Z.length>4&&(Z=Z.substring(0,4)),te.set(R,{name:R,artist:N.artist,file:N.file,thumbHash:N.thumbHash,_uid:`alb-${R}`,year:Z,qualityBadge:N.qualityBadge})}}}),g(l,Array.from(te.values()))}finally{g(d,!1)}}function k(P){Pn(P)}function S(P){Nr("tracks_by_album",{name:P.name,artist:P.artist})}function w(P){P.deltaY!==0&&(P.currentTarget.scrollLeft+=P.deltaY)}Pt();var x=vu(),U=v(x),G=v(U),K=v(G),J=v(K);re(J,()=>y.SEARCH);var ce=_(K,2),z=_(ce,2);{var q=P=>{var j=Gd(),ae=v(j);re(ae,()=>y.CLOSE),A("click",j,f),m(P,j)};L(z,P=>{t().length>0&&P(q)})}var C=_(z,2);{var xe=P=>{var j=Zd();m(P,j)};L(C,P=>{n(d)&&P(xe)})}var he=_(U,2);Cn(he,{get itemsStore(){return o},isEditMode:!1,isLoading:!1,emptyText:"",$$slots:{header:(P,j)=>{var ae=lu(),V=v(ae);{var te=R=>{var _e=Jd();m(R,_e)},N=R=>{var _e=at(),H=Le(_e);{var Z=T=>{var O=eu(),X=v(O);le(()=>oe(X,`No results found for "${t()??""}"`)),m(T,O)},se=T=>{var O=ou(),X=Le(O);{var ve=B=>{var Q=su(),ne=_(Le(Q),2);kt(ne,5,()=>n(l),ue=>ue._uid,(ue,ye)=>{var F=nu(),ge=v(F),Ce=v(ge);{let Se=ht(()=>Va(n(ye),"md"));aa(Ce,{get src(){return n(Se)},get alt(){return n(ye).name},radius:"8px",$$slots:{fallback:(D,pe)=>{var ze=tu();m(D,ze)}}})}var Pe=_(Ce,2),je=v(Pe),Me=v(je);re(Me,()=>y.PLAY);var $=_(ge,2),Y=v($),fe=_($,2),be=v(fe),$e=v(be),Ee=_(be,2);{var we=Se=>{var D=ru(),pe=v(D);le(()=>oe(pe,n(ye).year)),m(Se,D)};L(Ee,Se=>{n(ye).year&&n(ye).year!=="0"&&n(ye).year!==0&&Se(we)})}var Te=_(Ee,2);{var de=Se=>{var D=au(),pe=v(D);le(ze=>oe(pe,ze),[()=>n(ye).qualityBadge.split(" ")[0]]),m(Se,D)};L(Te,Se=>{n(ye).qualityBadge&&Se(de)})}le(()=>{Ot($,"title",n(ye).name),oe(Y,n(ye).name),oe($e,n(ye).artist)}),A("click",F,()=>S(n(ye))),m(ue,F)}),A("wheel",ne,w),m(B,Q)};L(X,B=>{n(l).length>0&&B(ve)})}var W=_(X,2);{var ie=B=>{var Q=iu();m(B,Q)};L(W,B=>{a().length>0&&B(ie)})}m(T,O)};L(H,T=>{!n(d)&&a().length===0&&n(l).length===0&&n(u)?T(Z):T(se,!1)},!0)}m(R,_e)};L(V,R=>{t().length<2?R(te):R(N,!1)})}m(P,ae)},row:(P,j)=>{var ae=cu();const V=ht(()=>j.item),te=ht(()=>j.index);var N=v(ae);Wa(N,{get track(){return n(V)},get index(){return n(te)},isEditable:!1,$$events:{play:()=>k(n(V))}}),m(P,ae)}}}),le(()=>ro(ce,t())),A("input",ce,h),m(e,x),Mt(),i()}const Qa={async syncLibrary(){if(Xe(ar))return;ar.set(!0);const e=new fo,r=window.location.origin+"/wave-api.php";e.postMessage({type:"START_SYNC",payload:{url:r}}),e.onmessage=t=>{const{type:a,status:s,count:i,message:o}=t.data;if(a==="PROGRESS"){const l={connecting:"Requesting library...",downloading:"Downloading data...",parsing:"Processing metadata...",saving:`Saving ${i} tracks...`};l[s]&&Oe(l[s],"info")}a==="DONE"&&(Oe(`Library updated: ${i} tracks`,"success"),ar.set(!1),e.terminate()),a==="ERROR"&&(console.error("[API] Sync Error:",o),Oe(`Sync Failed: ${o}`,"error"),ar.set(!1),e.terminate())},e.onerror=t=>{console.error("[API] Worker crash:",t),Oe("Sync worker crashed","error"),ar.set(!1),e.terminate()}},async loadRadioStations(){if(!Xe(vn)){vn.set(!0);try{const r=await fetch(Hn.STATIONS(!1));if(!r.ok)throw new Error("Network error");const t=await r.json();if(t.error)throw new Error(t.error);if(!Array.isArray(t))throw new Error("Invalid response format");const a=t.map(s=>({id:s.id,name:s.name,file:s.station,station:s.station,image:s.logo,genre:s.genre||"Radio"}));a.sort((s,i)=>s.name.localeCompare(i.name,void 0,{sensitivity:"base"})),Or.set(a)}catch(e){console.error("[API] Failed to load stations",e),Oe("Failed to load radio","error")}finally{vn.set(!1)}}},async setAlarm(e,r,t){try{const a=new FormData;a.append("action","set_alarm"),a.append("enabled",e?"1":"0"),a.append("time",r),a.append("playlist",t);const s=await fetch(Hn.SYNC,{method:"POST",body:a});if(!s.ok)throw new Error("Server error");const i=await s.json();if(i.error)throw new Error(i.error);return!0}catch(a){throw console.error("[API] Failed to set alarm",a),a}},async getServerTime(){try{const e=await fetch(`${Hn.SYNC}?action=get_time`);if(e.ok)return(await e.json()).time}catch(e){console.error("Failed to get server time",e)}return null}};var uu=E('<option class="svelte-1j67jqh"> </option>'),fu=E('<div class="separator svelte-1j67jqh"></div> <div class="row space-between svelte-1j67jqh"><label for="alarm-time" class="svelte-1j67jqh">Wake up time</label> <input id="alarm-time" type="time" class="svelte-1j67jqh"/></div> <div class="separator svelte-1j67jqh"></div> <div class="row space-between svelte-1j67jqh"><label for="alarm-pl" class="svelte-1j67jqh">Playlist</label> <div class="select-wrapper svelte-1j67jqh"><select id="alarm-pl" class="svelte-1j67jqh"></select> <div class="select-arrow svelte-1j67jqh"><!></div></div></div> <p class="hint svelte-1j67jqh">Player will clear queue, load this playlist and play at set time.</p>',1),hu=E('<div class="view-container scrollable svelte-1j67jqh"><div class="content-padded svelte-1j67jqh"><h1 class="header-title big svelte-1j67jqh">Settings</h1> <div class="section svelte-1j67jqh"><div class="section-header svelte-1j67jqh"><span class="svelte-1j67jqh">Alarm Clock</span></div> <div class="card svelte-1j67jqh"><div class="row space-between svelte-1j67jqh"><span class="label-text svelte-1j67jqh">Current Player Time</span> <span class="mono-badge svelte-1j67jqh"> </span></div> <div class="separator svelte-1j67jqh"></div> <div class="row space-between svelte-1j67jqh"><label class="svelte-1j67jqh">Enable Alarm</label> <button><div class="toggle-circle svelte-1j67jqh"></div></button></div> <!></div></div> <div class="section svelte-1j67jqh"><div class="section-header svelte-1j67jqh"><span class="svelte-1j67jqh">Appearance</span></div> <div class="card clickable svelte-1j67jqh"><div class="row space-between svelte-1j67jqh"><span class="svelte-1j67jqh">Interface Theme</span> <div class="row-gap svelte-1j67jqh"><span class="value svelte-1j67jqh"> </span> <span class="chevron svelte-1j67jqh"><!></span></div></div></div></div> <div class="section svelte-1j67jqh"><div class="section-header svelte-1j67jqh"><span class="svelte-1j67jqh">Connection</span></div> <div class="card svelte-1j67jqh"><div class="row svelte-1j67jqh"><label for="ip" class="svelte-1j67jqh">Moode Device IP</label> <div class="input-group svelte-1j67jqh"><input id="ip" type="text" placeholder="192.168.x.x" class="svelte-1j67jqh"/> <button class="btn-primary small svelte-1j67jqh">Save</button></div></div> <p class="hint svelte-1j67jqh"> </p></div></div> <div class="section svelte-1j67jqh"><div class="section-header svelte-1j67jqh"><span class="svelte-1j67jqh">About</span></div> <div class="card svelte-1j67jqh"><div class="info-row svelte-1j67jqh"><span class="svelte-1j67jqh">Version</span> <span class="mono svelte-1j67jqh"> </span></div> <div class="separator svelte-1j67jqh"></div> <div class="info-row svelte-1j67jqh"><span class="svelte-1j67jqh">Build Date</span> <span class="mono small svelte-1j67jqh"> </span></div> <div class="separator svelte-1j67jqh"></div> <div class="info-row svelte-1j67jqh"><span class="svelte-1j67jqh">Developer</span> <span class="svelte-1j67jqh">Moode WaveUI</span></div></div></div></div></div>');function pu(e,r){Tt(r,!1);const t=()=>ke(mn,"$currentTheme",l),a=()=>ke(cs,"$isAlarmEnabled",l),s=()=>ke(ls,"$alarmTime",l),i=()=>ke(vs,"$alarmPlaylist",l),o=()=>ke($n,"$playlists",l),[l,d]=Ft(),c=M();let u=M(Hr.MOODE_IP),h=M("--:--"),f;function p(){Hr.setMoodeIp(n(u)),Oe("IP Saved. Reloading...","success"),setTimeout(()=>location.reload(),1e3)}const k="0.0.1",S="2026-01-09T01:08:31.182Z",w=new Date(S).toLocaleString();function x(){const Y=ts.map(fe=>({label:fe.label,value:fe.id}));ur({title:"Select Theme",message:"Choose your preferred interface style:",type:"select",inputValue:t(),options:Y,onConfirm:fe=>{mn.set(fe),Oe("Theme updated","success")}})}async function U(){const Y=await Qa.getServerTime();Y&&g(h,Y)}la(()=>{U(),f=setInterval(U,6e4)}),so(()=>{f&&clearInterval(f)});async function G(){try{await Qa.setAlarm(a(),s(),i()),a()&&Oe(`Alarm set for ${s()}`,"success")}catch{Oe("Failed to sync alarm settings","error")}}function K(){cs.update(Y=>!Y),G()}ee(()=>t(),()=>{g(c,ts.find(Y=>Y.id===t())?.label||"Default")}),Qt(),Pt();var J=hu(),ce=v(J),z=_(v(ce),2),q=_(v(z),2),C=v(q),xe=_(v(C),2),he=v(xe),P=_(C,4),j=_(v(P),2);let ae;var V=_(P,2);{var te=Y=>{var fe=fu(),be=Le(fe),$e=_(be,2),Ee=_(v($e),2),we=_($e,2),Te=_(we,2),de=_(v(Te),2),Se=v(de);le(()=>{i(),Tl(()=>{o()})}),kt(Se,5,o,pr,(Fe,Ue)=>{var Ne=uu(),tt=v(Ne),rt={};le(()=>{oe(tt,(n(Ue),b(()=>n(Ue).name))),rt!==(rt=(n(Ue),b(()=>n(Ue).name)))&&(Ne.value=(Ne.__value=(n(Ue),b(()=>n(Ue).name)))??"")}),m(Fe,Ne)});var D=_(Se,2),pe=v(D);re(pe,()=>(I(y),b(()=>y.CHEVRON_DOWN)));var ze=_(Te,2);pt(1,be,()=>Lt),Ba(Ee,s,Fe=>Gs(ls,Fe)),A("change",Ee,G),pt(1,$e,()=>Lt),pt(1,we,()=>Lt),Ql(Se,i,Fe=>Gs(vs,Fe)),A("change",Se,G),pt(1,Te,()=>Lt),pt(1,ze,()=>Lt),m(Y,fe)};L(V,Y=>{a()&&Y(te)})}var N=_(z,2),R=_(v(N),2),_e=v(R),H=_(v(_e),2),Z=v(H),se=v(Z),T=_(Z,2),O=v(T);re(O,()=>(I(y),b(()=>y.NEXT)));var X=_(N,2),ve=_(v(X),2),W=v(ve),ie=_(v(W),2),B=v(ie),Q=_(B,2),ne=_(W,2),ue=v(ne),ye=_(X,2),F=_(v(ye),2),ge=v(F),Ce=_(v(ge),2),Pe=v(Ce),je=_(ge,4),Me=_(v(je),2),$=v(Me);le(()=>{oe(he,n(h)),ae=Ye(j,1,"toggle-btn svelte-1j67jqh",null,ae,{active:a()}),oe(se,n(c)),oe(ue,`Current: ${I(Hr),b(()=>Hr.MOODE_IP)??""}`),oe(Pe,k),oe($,w)}),A("click",j,K),A("click",R,x),Ba(B,()=>n(u),Y=>g(u,Y)),A("click",Q,p),pt(1,J,()=>Lt,()=>({duration:200})),m(e,J),Mt(),d()}var gu=E('<span class="meta-tag svelte-185fgrr"> </span>'),_u=E('<div slot="header" class="content-padded svelte-185fgrr"><div class="view-header svelte-185fgrr"><div class="header-art svelte-185fgrr" style="background: var(--c-surface-active);"><div class="header-icon-wrap svelte-185fgrr"><!></div></div> <div class="header-info svelte-185fgrr"><div class="header-text-group svelte-185fgrr"><div class="header-label svelte-185fgrr">Now Playing</div> <h1 class="header-title svelte-185fgrr">Current Queue</h1> <div class="meta-badges svelte-185fgrr"><span class="meta-tag svelte-185fgrr"> </span> <!></div></div> <div class="header-actions svelte-185fgrr"><button class="btn-secondary svelte-185fgrr" title="Clear Queue">Clear</button> <button class="btn-action svelte-185fgrr" title="Save Queue"><!></button> <button><!></button></div></div></div></div>'),mu=E('<div slot="row" class="svelte-185fgrr"><!></div>'),bu=E('<div class="view-container svelte-185fgrr"><!></div>');function yu(e,r){Tt(r,!1);const t=()=>ke(yt,"$status",o),a=()=>ke(mt,"$isQueueLocked",o),s=()=>ke(rr,"$currentSong",o),i=()=>ke(Kr,"$queue",o),[o,l]=Ft(),d=M(),c=M(),u=M(),h=M();let f=M(!1),p=M(""),k=M(-1);function S(){g(f,!n(f))}function w(z){n(f)||kn(`play ${z}`)}function x(z){z<n(k)&&g(k,n(k)-1),nr.removeFromQueue(z)}async function U(){ur({title:"Save Playlist",message:"Enter a name for this playlist:",type:"prompt",placeholder:"Playlist Name",confirmLabel:"Save",onConfirm:async z=>{z&&z.trim().length>0&&(await nr.saveQueue(z),Ps())}})}function G(){i().length!==0&&ur({title:"Clear Queue",message:"Are you sure you want to clear the entire play queue?",confirmLabel:"Clear All",type:"confirm",onConfirm:async()=>{Kr.set([]),rr.set({title:"Not Playing",artist:"",album:"",file:"",stationName:null,id:null,pos:null}),yt.update(z=>({...z,state:"stop",song:-1,songid:-1,elapsed:0})),await kn("clear")}})}function K(z,q){let C=n(k);z===C?C=q:z<C&&q>=C?C-=1:z>C&&q<=C&&(C+=1),g(k,C),nr.moveTrack(z,q)}ee(()=>t(),()=>{g(d,Number(t().song))}),ee(()=>(a(),n(d)),()=>{a()||g(k,n(d))}),ee(()=>n(k),()=>{g(c,n(k))}),ee(()=>s(),()=>{g(u,s().file)}),ee(()=>t(),()=>{g(h,t().state==="play")}),ee(()=>i(),()=>{if(i().length>=0){const z=i().reduce((q,C)=>q+(parseFloat(C.time)||0),0);if(z>0){const q=Math.floor(z/3600),C=Math.floor(z%3600/60);q>0?g(p,`${q} hr ${C} min`):g(p,`${C} min`)}else g(p,"")}}),Qt(),Pt();var J=bu(),ce=v(J);Cn(ce,{get itemsStore(){return Kr},get isEditMode(){return n(f)},emptyText:"Queue is empty",onMoveItem:K,$$slots:{header:(z,q)=>{var C=_u(),xe=v(C),he=v(xe),P=v(he),j=v(P);re(j,()=>(I(y),b(()=>y.MENU)));var ae=_(he,2),V=v(ae),te=_(v(V),4),N=v(te),R=v(N),_e=_(N,2);{var H=ie=>{var B=gu(),Q=v(B);le(()=>oe(Q,n(p))),m(ie,B)};L(_e,ie=>{n(p)&&ie(H)})}var Z=_(V,2),se=v(Z),T=_(se,2),O=v(T);re(O,()=>(I(y),b(()=>y.SAVE)));var X=_(T,2);let ve;var W=v(X);re(W,()=>(n(f),I(y),b(()=>n(f)?y.ACCEPT:y.EDIT))),le(()=>{oe(R,`${i(),b(()=>i().length)??""} tracks`),se.disabled=(i(),b(()=>i().length===0)),T.disabled=(i(),b(()=>i().length===0)),ve=Ye(X,1,"btn-action svelte-185fgrr",null,ve,{active:n(f)}),Ot(X,"title",n(f)?"Finish Editing":"Edit Queue"),X.disabled=(i(),b(()=>i().length===0))}),A("click",se,G),A("click",T,U),A("click",X,S),m(z,C)},row:(z,q)=>{var C=mu();const xe=ht(()=>q.item),he=ht(()=>q.index),P=ht(()=>q.startDrag);var j=v(C);Wa(j,{get track(){return n(xe)},get index(){return n(he)},get playingIndex(){return n(c)},get playingFile(){return n(u)},get isPlaying(){return n(h)},get isEditable(){return n(f)},$$events:{play:()=>w(n(he)),remove:()=>x(n(he)),startdrag(...ae){n(P)?.apply(this,ae)}}}),m(z,C)}}}),m(e,J),Mt(),l()}var wu=E('<div class="knob svelte-1jla3sy"></div>'),ku=E('<div class="tooltip current svelte-1jla3sy"> </div> <span></span>',1),xu=E('<div slot="fallback" class="icon-fallback svelte-1jla3sy"><!></div>'),Eu=E('<span class="meta-tag quality"> </span>'),Su=E('<div class="dot svelte-1jla3sy"></div>'),Tu=E("<button><!> <!></button>"),Mu=E('<div class="dock svelte-1jla3sy"><div class="progress-shadow svelte-1jla3sy"></div> <div><div class="rail svelte-1jla3sy"></div> <div class="fill svelte-1jla3sy"><!></div> <!></div> <div class="grid svelte-1jla3sy"><div class="info svelte-1jla3sy"><div class="art svelte-1jla3sy"><!></div> <div class="meta svelte-1jla3sy"><div class="title-row svelte-1jla3sy"><div class="title text-ellipsis svelte-1jla3sy"> </div> <button class="btn-icon tiny-dots svelte-1jla3sy"><!></button></div> <div class="artist-row svelte-1jla3sy"><div class="artist text-ellipsis svelte-1jla3sy"> </div> <!></div></div></div> <div class="controls svelte-1jla3sy"><button><!></button> <button class="btn-icon"><!></button> <button class="play-btn flex-center svelte-1jla3sy"><!></button> <button class="btn-icon"><!></button> <!></div> <div class="volume desktop svelte-1jla3sy"><button class="vol-btn-mini svelte-1jla3sy" title="Mute/Unmute"><!></button> <div class="custom-slider svelte-1jla3sy"><div class="slider-bg svelte-1jla3sy"><div class="slider-fill svelte-1jla3sy"></div> <div class="slider-knob svelte-1jla3sy"></div></div></div></div></div></div>');function $u(e,r){Tt(r,!1);const t=()=>ke(yt,"$status",l),a=()=>ke(rr,"$currentSong",l),s=()=>ke(Lr,"$favorites",l),i=()=>ke(Or,"$stations",l),o=()=>ke(yn,"$isFullPlayerOpen",l),[l,d]=Ft(),c=M(),u=M(),h=M(),f=M(),p=M(),k=M(),S=M(),w=M(),x=M(),U=M(),G=M(),K=M(),J=M();let ce=M(!1),z=M(!1),q=!1,C=M(0),xe=M(),he=M();const P=W=>ie=>{ie.stopPropagation(),W()};function j(W){if(isNaN(W)||W===null)return"0:00";const ie=Math.floor(W/60),B=Math.floor(W%60);return`${ie}:${B<10?"0":""}${B}`}function ae(W,ie){const B=ie.getBoundingClientRect();return Math.max(0,Math.min(1,(W.clientX-B.left)/B.width))}function V(W){n(f)||(g(z,!0),g(C,ae(W,n(xe))),window.addEventListener("mousemove",te),window.addEventListener("mouseup",N))}function te(W){if(n(z)&&g(C,ae(W,n(xe))),q){const ie=Math.round(ae(W,n(he))*100);xr(ie)}}function N(){n(z)&&!n(f)&&Ms(n(C)*n(c)),g(z,!1),q=!1,window.removeEventListener("mousemove",te),window.removeEventListener("mouseup",N)}let R=50;function _e(W){W.stopPropagation(),t().volume>0?(R=t().volume,xr(0)):xr(R>0?R:30)}function H(W){q=!0;const ie=Math.round(ae(W,n(he))*100);xr(ie),window.addEventListener("mousemove",te),window.addEventListener("mouseup",N)}function Z(){const W=(n(J)+1)%3;W===0?(t().random&&Xr(),t().repeat&&Gr()):W===1?(t().random||Xr(),t().repeat&&Gr()):W===2&&(t().random&&Xr(),t().repeat||Gr())}function se(W){W.stopPropagation(),Ha(W,a(),{type:"general",source:"miniplayer"})}function T(W){Ha(W.detail.originalEvent,a(),{type:"general",source:"miniplayer"})}ee(()=>t(),()=>{g(c,t().duration>0?t().duration:1)}),ee(()=>t(),()=>{g(u,t().elapsed||0)}),ee(()=>t(),()=>{g(h,t().state==="play")}),ee(()=>a(),()=>{g(f,a().file?.startsWith("http"))}),ee(()=>a(),()=>{g(p,a().title||"Not Playing")}),ee(()=>a(),()=>{g(k,a().stationName||a().artist||"Moode")}),ee(()=>(a(),s()),()=>{g(S,a().file&&s().has(a().file))}),ee(()=>(a(),i()),()=>{g(w,ka(a(),i(),a().stationName))}),ee(()=>(n(f),n(z),n(C),n(u),n(c)),()=>{g(x,n(f)?0:n(z)?n(C)*100:n(u)/n(c)*100)}),ee(()=>(n(h),n(z),n(f)),()=>{g(U,n(h)&&!n(z)&&!n(f))}),ee(()=>t(),()=>{g(G,t().bitrate?`${t().bitrate} kbps`:t().format||"")}),ee(()=>(t(),y),()=>{g(K,t().volume===0?y.VOLUME_MUTE:t().volume<50?y.VOLUME_MEDIUM:y.VOLUME_FULL)}),ee(()=>t(),()=>{g(J,t().repeat?2:t().random?1:0)}),Qt(),Pt();var O=at(),X=Le(O);{var ve=W=>{var ie=Mu(),B=v(ie),Q=_(B,2);let ne;var ue=_(v(Q),2),ye=v(ue);{var F=Ie=>{var ut=wu();m(Ie,ut)};L(ye,Ie=>{n(f)||Ie(F)})}var ge=_(ue,2);{var Ce=Ie=>{var ut=ku(),Ct=Le(ut),Kt=v(Ct);le(me=>{ot(Ct,`left: ${n(x)??""}%`),oe(Kt,me)},[()=>(n(z),n(C),n(c),n(u),b(()=>n(z)?j(n(C)*n(c)):j(n(u))))]),m(Ie,ut)};L(ge,Ie=>{(n(ce)||n(z))&&!n(f)&&Ie(Ce)})}Dr(Q,Ie=>g(xe,Ie),()=>n(xe));var Pe=_(Q,2),je=v(Pe),Me=v(je),$=v(Me);aa($,{get src(){return n(w)},alt:"art",radius:"4px",$$slots:{fallback:(Ie,ut)=>{var Ct=xu(),Kt=v(Ct);re(Kt,()=>(n(f),I(y),b(()=>n(f)?y.RADIO:y.ALBUMS))),m(Ie,Ct)}}});var Y=_(Me,2),fe=v(Y),be=v(fe),$e=v(be),Ee=_(be,2),we=v(Ee);re(we,()=>(I(y),b(()=>y.DOTS)));var Te=_(fe,2),de=v(Te),Se=v(de),D=_(de,2);{var pe=Ie=>{var ut=Eu(),Ct=v(ut);le(()=>oe(Ct,n(G))),m(Ie,ut)};L(D,Ie=>{n(G)&&Ie(pe)})}var ze=_(je,2),Fe=v(ze),Ue=$a(()=>P(()=>fr.toggleFavorite(a())));let Ne;var tt=v(Fe);re(tt,()=>(n(S),I(y),b(()=>n(S)?y.HEART_FILLED:y.HEART)));var rt=_(Fe,2),We=$a(()=>P(()=>Ya("previous"))),Qe=v(rt);re(Qe,()=>(I(y),b(()=>y.PREVIOUS)));var He=_(rt,2),Ze=$a(()=>P(An)),De=v(He);re(De,()=>(t(),I(y),b(()=>t().state==="play"?y.PAUSE:y.PLAY)));var Re=_(He,2),Be=$a(()=>P(()=>Ya("next"))),Ke=v(Re);re(Ke,()=>(I(y),b(()=>y.NEXT)));var nt=_(Re,2);{var gt=Ie=>{var ut=Tu(),Ct=$a(()=>P(Z));let Kt;var me=v(ut);{var Ve=Rt=>{var mr=at(),Ma=Le(mr);re(Ma,()=>(I(y),b(()=>y.REPEAT))),m(Rt,mr)},$t=Rt=>{var mr=at(),Ma=Le(mr);re(Ma,()=>(I(y),b(()=>y.SHUFFLE))),m(Rt,mr)};L(me,Rt=>{n(J)===2?Rt(Ve):Rt($t,!1)})}var or=_(me,2);{var zn=Rt=>{var mr=Su();m(Rt,mr)};L(or,Rt=>{n(J)>0&&Rt(zn)})}le(()=>Kt=Ye(ut,1,"btn-icon desktop mode-btn svelte-1jla3sy",null,Kt,{active:n(J)>0})),A("click",ut,function(...Rt){n(Ct)?.apply(this,Rt)}),m(Ie,ut)};L(nt,Ie=>{n(f)||Ie(gt)})}var wt=_(ze,2),bt=v(wt),_t=v(bt);re(_t,()=>n(K));var ct=_(bt,2),dt=v(ct),vt=v(dt),lt=_(vt,2);Dr(ct,Ie=>g(he,Ie),()=>n(he)),It(()=>A("click",ie,()=>yn.set(!0))),ys(ie,(Ie,ut)=>zs?.(Ie,ut),()=>500),It(()=>A("longpress",ie,T)),le(()=>{ot(B,`width: ${n(x)??""}%; transition: ${n(U)?"width 0.25s linear":"none"}`),ne=Ye(Q,1,"progress-bar svelte-1jla3sy",null,ne,{radio:n(f)}),ot(ue,`width: ${n(x)??""}%; transition: ${n(U)?"width 0.25s linear":"none"}`),Ot(be,"title",n(p)),oe($e,n(p)),Ot(de,"title",n(k)),oe(Se,n(k)),Ne=Ye(Fe,1,"btn-icon desktop svelte-1jla3sy",null,Ne,{liked:n(S)}),ot(vt,`width: ${t(),b(()=>t().volume)??""}%`),ot(lt,`left: ${t(),b(()=>t().volume)??""}%`)}),A("mouseenter",Q,()=>g(ce,!0)),A("mouseleave",Q,()=>g(ce,!1)),A("mousedown",Q,Yt(V)),A("click",Q,Yt(function(Ie){Ua.call(this,r,Ie)})),A("click",Ee,se),A("click",Fe,function(...Ie){n(Ue)?.apply(this,Ie)}),A("click",rt,function(...Ie){n(We)?.apply(this,Ie)}),A("click",He,function(...Ie){n(Ze)?.apply(this,Ie)}),A("click",Re,function(...Ie){n(Be)?.apply(this,Ie)}),A("click",bt,_e),A("mousedown",ct,Yt(H)),A("click",ct,Yt(function(Ie){Ua.call(this,r,Ie)})),m(W,ie)};L(X,W=>{o()||W(ve)})}m(e,O),Mt(),d()}var Au=E('<div class="drag-zone svelte-1olwzt8"><div class="drag-handle-icon svelte-1olwzt8"><!></div></div>'),Pu=E('<div slot="fallback" class="icon-fallback svelte-1olwzt8"><!></div>'),Cu=E('<span class="meta-tag quality"> </span>'),zu=E('<span class="dot svelte-1olwzt8"></span>'),Lu=E("<button><!> <!></button>"),Ru=E('<div style="width: 44px;"></div>'),Iu=E('<div><!> <div class="bg-container svelte-1olwzt8"><div class="bg-gradient-fallback svelte-1olwzt8"></div> <img class="bg-img svelte-1olwzt8" alt="" loading="eager"/> <div class="bg-overlay svelte-1olwzt8"></div></div> <div class="player-body svelte-1olwzt8"><div class="art-container svelte-1olwzt8"><div class="artwork svelte-1olwzt8"><!></div></div> <div class="controls-area svelte-1olwzt8"><div class="meta svelte-1olwzt8"><h1 class="title text-ellipsis svelte-1olwzt8"> </h1> <div class="artist-row svelte-1olwzt8"><h2 class="artist text-ellipsis svelte-1olwzt8"> </h2> <!></div></div> <div class="progress-section"><div><div class="common-track svelte-1olwzt8"><div class="common-fill svelte-1olwzt8"><div class="common-knob svelte-1olwzt8"></div></div></div></div> <div class="time-row svelte-1olwzt8"><span> </span> <span> </span></div></div> <div class="buttons-row svelte-1olwzt8"><button><!></button> <button class="btn-icon side-btn svelte-1olwzt8"><!></button> <button class="play-btn-large flex-center svelte-1olwzt8"><!></button> <button class="btn-icon side-btn svelte-1olwzt8"><!></button> <!></div> <div class="volume-row svelte-1olwzt8"><button class="btn-icon small vol-btn svelte-1olwzt8"><!></button> <div class="volume-hit-area svelte-1olwzt8"><div class="common-track svelte-1olwzt8"><div class="common-fill svelte-1olwzt8"></div> <div class="common-knob svelte-1olwzt8"></div></div></div> <div class="vol-icon-static svelte-1olwzt8"><!></div></div></div></div></div>');function fi(e,r){Tt(r,!1);const t=()=>ke(rr,"$currentSong",o),a=()=>ke(Or,"$stations",o),s=()=>ke(yt,"$status",o),i=()=>ke(Lr,"$favorites",o),[o,l]=Ft(),d=M(),c=M(),u=M(),h=M(),f=M(),p=M(),k=M(),S=M(),w=M(),x=M(),U=M(),G=M();let K=ft(r,"isDocked",8,!1),J=0,ce=M(0),z=M(!1);function q(){yn.set(!1)}function C(me){if(K())return;const Ve=me.target;Ve.closest(".bar-hit-area")||Ve.closest(".volume-hit-area")||(J=me.touches[0].clientY,g(z,!0))}function xe(me){if(!n(z)||K())return;const Ve=me.touches[0].clientY-J;Ve>0&&(me.cancelable&&Ve>10&&me.preventDefault(),g(ce,Ve))}function he(){K()||(g(z,!1),n(ce)>150?q():g(ce,0))}let P=M(!1),j=M(0),ae=M();function V(me){const Ve=Math.floor(me/60)||0,$t=Math.floor(me%60)||0;return`${Ve}:${$t.toString().padStart(2,"0")}`}function te(me,Ve){const $t=Ve.getBoundingClientRect(),or=me.touches?me.touches[0].clientX:me.clientX;return Math.max(0,Math.min(1,(or-$t.left)/$t.width))}function N(me){n(h)||(g(P,!0),g(j,te(me,n(ae))))}function R(me){n(P)&&g(j,te(me,n(ae)))}function _e(){n(P)&&!n(h)&&Ms(n(j)*n(c)),g(P,!1)}let H=!1,Z=M(),se=50;function T(){s().volume>0?(se=s().volume,xr(0)):xr(se>0?se:30)}function O(me){H=!0;const Ve=Math.round(te(me,n(Z))*100);xr(Ve),window.addEventListener("mousemove",X),window.addEventListener("mouseup",ve),window.addEventListener("touchmove",X,{passive:!1}),window.addEventListener("touchend",ve)}function X(me){if(H){me.preventDefault();const Ve=Math.round(te(me,n(Z))*100);xr(Ve)}}function ve(){H=!1,window.removeEventListener("mousemove",X),window.removeEventListener("mouseup",ve),window.removeEventListener("touchmove",X),window.removeEventListener("touchend",ve)}function W(){const me=(n(w)+1)%3;me===0?(s().random&&Xr(),s().repeat&&Gr()):me===1?(s().random||Xr(),s().repeat&&Gr()):me===2&&(s().random&&Xr(),s().repeat||Gr())}ee(()=>(t(),a()),()=>{g(d,ka(t(),a(),t().stationName))}),ee(()=>s(),()=>{g(c,s().duration||1)}),ee(()=>s(),()=>{g(u,s().elapsed||0)}),ee(()=>t(),()=>{g(h,t().file?.startsWith("http"))}),ee(()=>s(),()=>{g(f,s().state==="play")}),ee(()=>(n(f),n(P),n(h)),()=>{g(p,n(f)&&!n(P)&&!n(h))}),ee(()=>(n(h),n(P),n(j),n(u),n(c)),()=>{g(k,n(h)?0:n(P)?n(j)*100:n(u)/n(c)*100)}),ee(()=>(s(),y),()=>{g(S,s().volume===0?y.VOLUME_MUTE:s().volume<50?y.VOLUME_MEDIUM:y.VOLUME_FULL)}),ee(()=>s(),()=>{g(w,s().repeat?2:s().random?1:0)}),ee(()=>s(),()=>{g(x,s().bitrate?`${s().bitrate} kbps`:s().format||"")}),ee(()=>(t(),i()),()=>{g(U,t().file&&i().has(t().file))}),ee(()=>I(K()),()=>{g(G,K()?"8px":"var(--radius-xl)")}),Qt(),Pt();var ie=Iu();let B;var Q=v(ie);{var ne=me=>{var Ve=Au(),$t=v(Ve),or=v($t);re(or,()=>(I(y),b(()=>y.CHEVRON_DOWN))),A("touchstart",Ve,C),A("touchmove",Ve,xe),A("touchend",Ve,he),A("click",Ve,q),m(me,Ve)};L(Q,me=>{K()||me(ne)})}var ue=_(Q,2),ye=_(v(ue),2),F=_(ue,2),ge=v(F),Ce=v(ge),Pe=v(Ce);aa(Pe,{get src(){return n(d)},alt:"Cover",get radius(){return n(G)},$$slots:{fallback:(me,Ve)=>{var $t=Pu(),or=v($t);re(or,()=>(n(h),I(y),b(()=>n(h)?y.RADIO:y.ALBUMS))),m(me,$t)}}});var je=_(ge,2),Me=v(je),$=v(Me),Y=v($),fe=_($,2),be=v(fe),$e=v(be),Ee=_(be,2);{var we=me=>{var Ve=Cu(),$t=v(Ve);le(()=>oe($t,n(x))),m(me,Ve)};L(Ee,me=>{n(x)&&me(we)})}var Te=_(Me,2),de=v(Te);let Se;var D=v(de),pe=v(D);Dr(de,me=>g(ae,me),()=>n(ae));var ze=_(de,2),Fe=v(ze),Ue=v(Fe),Ne=_(Fe,2),tt=v(Ne),rt=_(Te,2),We=v(rt);let Qe;var He=v(We);re(He,()=>(n(U),I(y),b(()=>n(U)?y.HEART_FILLED:y.HEART)));var Ze=_(We,2),De=v(Ze);re(De,()=>(I(y),b(()=>y.PREVIOUS)));var Re=_(Ze,2),Be=v(Re);re(Be,()=>(s(),I(y),b(()=>s().state==="play"?y.PAUSE:y.PLAY)));var Ke=_(Re,2),nt=v(Ke);re(nt,()=>(I(y),b(()=>y.NEXT)));var gt=_(Ke,2);{var wt=me=>{var Ve=Lu();let $t;var or=v(Ve);{var zn=lr=>{var Fr=at(),Ln=Le(Fr);re(Ln,()=>(I(y),b(()=>y.REPEAT))),m(lr,Fr)},Rt=lr=>{var Fr=at(),Ln=Le(Fr);re(Ln,()=>(I(y),b(()=>y.SHUFFLE))),m(lr,Fr)};L(or,lr=>{n(w)===2?lr(zn):lr(Rt,!1)})}var mr=_(or,2);{var Ma=lr=>{var Fr=zu();m(lr,Fr)};L(mr,lr=>{n(w)>0&&lr(Ma)})}le(()=>$t=Ye(Ve,1,"btn-icon side-btn mode-btn svelte-1olwzt8",null,$t,{active:n(w)>0})),A("click",Ve,W),m(me,Ve)},bt=me=>{var Ve=Ru();m(me,Ve)};L(gt,me=>{n(h)?me(bt,!1):me(wt)})}var _t=_(rt,2),ct=v(_t),dt=v(ct);re(dt,()=>n(S));var vt=_(ct,2),lt=v(vt),Ie=v(lt),ut=_(Ie,2);Dr(vt,me=>g(Z,me),()=>n(Z));var Ct=_(vt,2),Kt=v(Ct);re(Kt,()=>(I(y),b(()=>y.VOLUME_FULL))),le((me,Ve)=>{B=Ye(ie,1,"full-player svelte-1olwzt8",null,B,{"is-docked":K()}),ot(ie,K()?"":`transform: translateY(${n(ce)}px); transition: ${n(z)?"none":"transform 0.3s cubic-bezier(0.2, 0.8, 0.2, 1)"}`),Ot(ye,"src",n(d)),ot(Ce,`transform: scale(${1-n(ce)/3e3})`),ot(je,`opacity: ${1-n(ce)/400}`),oe(Y,(t(),b(()=>t().title||"Not Playing"))),oe($e,(t(),b(()=>t().stationName||t().artist||"Moode Audio"))),Se=Ye(de,1,"bar-hit-area svelte-1olwzt8",null,Se,{"is-docked-bar":K()}),ot(pe,`width: ${n(k)??""}%; transition: ${n(p)?"width 0.3s linear":"none"}`),oe(Ue,me),oe(tt,Ve),Qe=Ye(We,1,"btn-icon side-btn svelte-1olwzt8",null,Qe,{liked:n(U)}),ot(Ie,`width: ${s(),b(()=>s().volume)??""}%`),ot(ut,`left: ${s(),b(()=>s().volume)??""}%; right: auto;`)},[()=>(n(P),n(j),n(c),n(u),b(()=>n(P)?V(n(j)*n(c)):V(n(u)))),()=>(n(h),n(c),b(()=>n(h)?"LIVE":V(n(c))))]),A("mousedown",de,N),A("touchstart",de,N,void 0,!0),A("mousemove",de,function(...me){(n(P)?R:null)?.apply(this,me)}),A("touchmove",de,function(...me){(n(P)?R:null)?.apply(this,me)},void 0,!0),A("mouseup",de,_e),A("touchend",de,_e),A("click",We,()=>fr.toggleFavorite(t())),A("click",Ze,()=>Ya("previous")),A("click",Re,function(...me){An?.apply(this,me)}),A("click",Ke,()=>Ya("next")),A("click",ct,T),A("mousedown",vt,Yt(O)),A("touchstart",vt,Yt(O)),pt(3,ie,()=>oo,()=>({y:K()?0:800,duration:300,opacity:1})),m(e,ie),Mt(),l()}const ju=`<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.0//EN" "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd">
<svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="600px" height="331px" viewBox="0 0 600 331" preserveAspectRatio="xMidYMid meet">
 <g fill="#eb1250">
  <path d="M 315.33 288.42 c -1.03 -0.33 -2.60 -1.34 -3.70 -2.39 -1.08 -1.01 -1.73 -2.81 -2.48 -6.68 -0.38 -1.99 -0.84 -4.29 -1.03 -5.13 -0.21 -0.84 -0.47 -2.20 -0.61 -3.05 -0.14 -0.84 -0.42 -2.34 -0.61 -3.33 -0.45 -2.20 -0.42 -2.04 -0.77 -4.17 -0.16 -0.96 -0.40 -2.16 -0.52 -2.65 -0.14 -0.52 -0.33 -1.45 -0.45 -2.11 -0.12 -0.68 -0.38 -2.02 -0.59 -2.98 -0.21 -0.96 -0.52 -2.55 -0.70 -3.52 -0.16 -0.96 -0.52 -2.81 -0.77 -4.10 -0.26 -1.29 -0.82 -4.08 -1.22 -6.21 -0.80 -4.20 -1.57 -8.13 -2.44 -12.54 -0.33 -1.55 -0.63 -3.23 -0.73 -3.75 -0.07 -0.52 -0.28 -1.57 -0.47 -2.34 -0.16 -0.77 -0.54 -2.63 -0.80 -4.10 -0.28 -1.48 -0.61 -3.12 -0.73 -3.63 -0.12 -0.52 -0.42 -2.20 -0.70 -3.75 -0.28 -1.55 -0.91 -4.92 -1.43 -7.50 -0.49 -2.58 -1.34 -7.01 -1.85 -9.84 -0.54 -2.84 -1.17 -6.26 -1.43 -7.62 -0.26 -1.36 -0.56 -3.07 -0.68 -3.80 -0.12 -0.75 -0.26 -1.43 -0.33 -1.55 -0.26 -0.42 -2.60 -12.89 -3.21 -17.16 -0.12 -0.84 -0.38 -2.16 -0.56 -2.93 -0.16 -0.77 -0.49 -2.34 -0.70 -3.52 -0.21 -1.15 -0.63 -3.26 -0.94 -4.69 -0.30 -1.41 -0.68 -3.30 -0.82 -4.22 -0.16 -0.89 -0.47 -2.58 -0.73 -3.75 -0.68 -3.30 -2.74 -14.16 -3.73 -19.80 -0.28 -1.48 -0.63 -3.38 -0.82 -4.22 -0.38 -1.71 -1.31 -6.70 -1.88 -10.08 -0.40 -2.34 -0.87 -4.71 -1.43 -7.27 -0.16 -0.84 -0.59 -3 -0.91 -4.80 -0.35 -1.80 -0.77 -4.01 -0.96 -4.92 -0.19 -0.89 -0.54 -2.98 -0.80 -4.64 -0.49 -3.26 -0.70 -3.91 -1.10 -3.40 -0.14 0.16 -0.30 0.63 -0.38 1.01 -0.07 0.40 -0.54 2.51 -1.01 4.69 -2.67 12.42 -3.16 14.77 -3.38 16.29 -0.28 1.99 -1.48 7.64 -3.77 18.05 -1.17 5.23 -2.37 10.66 -2.67 12.07 -0.33 1.43 -0.84 4.01 -1.17 5.74 -0.30 1.73 -1.05 5.27 -1.64 7.85 -0.59 2.58 -1.59 7.17 -2.25 10.20 -0.63 3.02 -1.38 5.93 -1.62 6.45 -0.66 1.36 -2.60 3.26 -4.05 3.96 -1.24 0.61 -1.24 0.61 -87.30 0.61 -86.04 0 -86.04 0 -87.33 -0.49 -1.59 -0.59 -3.56 -2.32 -4.41 -3.89 -1.97 -3.63 -0.35 -8.32 3.61 -10.43 1.01 -0.54 1.01 -0.54 83.44 -0.61 82.43 -0.05 82.43 -0.05 82.69 -1.41 0.14 -0.73 0.42 -1.85 0.59 -2.51 0.19 -0.63 0.82 -3.59 1.41 -6.56 0.59 -2.95 1.29 -6.23 1.52 -7.27 0.23 -1.03 0.82 -3.66 1.27 -5.86 0.47 -2.18 1.34 -6.30 1.97 -9.14 0.63 -2.84 1.34 -6.16 1.57 -7.38 0.21 -1.22 0.49 -2.39 0.61 -2.60 0.09 -0.21 0.42 -1.64 0.68 -3.16 0.26 -1.55 0.63 -3.26 0.82 -3.82 0.19 -0.59 0.35 -1.34 0.35 -1.69 0 -0.35 0.21 -1.57 0.49 -2.70 0.26 -1.13 0.59 -2.60 0.68 -3.23 0.21 -1.22 2.16 -10.08 3.05 -13.78 0.26 -1.13 1.05 -4.88 1.76 -8.32 0.70 -3.45 1.55 -7.59 1.88 -9.21 0.33 -1.62 1.08 -5.09 1.64 -7.73 1.62 -7.41 1.73 -7.95 2.13 -9.96 0.91 -4.62 1.92 -9.19 2.18 -9.80 0.14 -0.35 0.82 -1.24 1.48 -1.97 2.58 -2.72 5.84 -3.42 8.88 -1.90 1.97 0.98 3.73 2.74 4.27 4.31 0.42 1.20 1.41 6.42 1.80 9.47 0.09 0.84 0.30 1.83 0.45 2.18 0.14 0.38 0.26 1.10 0.26 1.66 0 0.54 0.16 1.45 0.35 2.04 0.19 0.56 0.56 2.25 0.84 3.73 0.82 4.50 1.78 9.28 2.20 11.13 0.19 0.77 0.45 2.04 0.56 2.81 0.47 2.63 1.92 10.08 2.25 11.60 0.19 0.84 0.45 2.16 0.56 2.93 0.28 1.64 0.63 3.56 1.08 5.86 0.19 0.91 0.49 2.60 0.70 3.75 0.21 1.17 0.54 2.79 0.70 3.63 0.19 0.84 0.77 3.75 1.29 6.45 0.54 2.72 1.17 5.88 1.41 7.03 0.23 1.17 0.66 3.38 0.94 4.92 0.26 1.55 0.70 4.03 0.96 5.51 0.26 1.48 0.73 3.91 1.03 5.39 0.30 1.48 0.68 3.45 0.82 4.34 0.16 0.91 0.47 2.48 0.70 3.52 0.70 3.19 2.23 10.73 2.58 12.89 0.09 0.66 0.47 2.48 0.80 4.10 0.63 3.05 0.70 3.35 1.66 8.77 0.33 1.80 0.82 4.29 1.08 5.51 0.26 1.24 0.56 2.79 0.68 3.42 0.19 1.17 0.89 4.76 1.55 8.09 0.21 0.96 0.63 3.23 0.96 5.04 0.84 4.64 1.41 7.55 1.69 8.91 0.14 0.66 0.35 1.76 0.49 2.46 0.12 0.70 0.38 2.04 0.56 2.93 0.19 0.91 0.61 3.16 0.94 5.04 1.05 5.86 2.48 13.41 2.88 15.12 0.19 0.91 0.42 2.02 0.47 2.46 0.07 0.45 0.33 1.78 0.59 2.93 0.26 1.17 0.56 2.70 0.68 3.40 0.12 0.70 0.30 1.62 0.42 1.99 0.12 0.40 0.35 1.48 0.52 2.41 0.26 1.50 0.35 1.69 0.82 1.69 0.45 0 0.54 -0.16 0.68 -0.98 0.23 -1.66 2.23 -11.86 2.84 -14.60 0.30 -1.41 0.66 -3.09 0.80 -3.75 0.89 -4.57 5.46 -26.60 6.47 -31.17 0.33 -1.41 0.77 -3.59 1.03 -4.80 0.52 -2.51 1.13 -5.44 2.13 -10.08 0.38 -1.73 1.01 -4.69 1.36 -6.56 0.38 -1.88 1.05 -5.13 1.50 -7.27 0.47 -2.13 0.94 -4.38 1.05 -5.04 0.45 -2.30 1.95 -9.63 2.18 -10.48 0.26 -1.01 1.64 -7.38 2.44 -11.32 0.30 -1.55 0.77 -3.87 1.05 -5.16 0.47 -2.34 2.91 -13.57 4.22 -19.57 0.38 -1.73 0.82 -3.89 0.96 -4.80 0.54 -3.26 2.16 -5.65 4.64 -6.91 1.73 -0.87 2.53 -1.01 4.36 -0.82 1.22 0.14 1.83 0.35 2.93 1.08 2.20 1.43 3.40 3.45 4.45 7.55 0.26 1.05 0.70 2.72 0.96 3.68 0.26 0.96 0.63 2.34 0.80 3.05 0.54 2.16 1.29 4.95 1.78 6.56 0.23 0.84 0.70 2.48 1.01 3.63 0.30 1.17 0.98 3.63 1.52 5.51 0.54 1.88 1.24 4.41 1.55 5.63 0.33 1.22 0.80 2.86 1.05 3.63 0.26 0.77 0.47 1.59 0.47 1.80 0 0.23 0.30 1.50 0.68 2.81 0.38 1.34 1.01 3.68 1.43 5.23 0.77 2.81 1.52 5.58 3.26 11.72 0.52 1.80 1.31 4.71 1.76 6.47 0.45 1.76 0.96 3.70 1.17 4.34 0.30 0.98 2.39 8.65 4.29 15.68 1.13 4.24 2.25 8.27 3.05 11.13 1.45 5.13 1.62 5.74 3.21 11.79 0.42 1.59 0.54 1.80 0.96 1.80 0.16 0 0.35 0.12 0.40 0.28 0.05 0.14 0.33 -0.52 0.63 -1.48 0.30 -0.96 1.73 -5.37 3.19 -9.82 1.48 -4.45 3.09 -9.52 3.63 -11.25 0.52 -1.73 1.85 -5.86 2.95 -9.14 1.13 -3.28 2.48 -7.45 3.05 -9.26 1.73 -5.44 2.23 -6.19 5.11 -7.69 1.43 -0.75 1.43 -0.75 69.40 -0.82 67.97 -0.07 67.97 -0.07 69.56 0.47 0.87 0.28 1.57 0.61 1.57 0.70 0 0.12 0.42 0.56 0.94 1.03 0.52 0.47 1.27 1.52 1.64 2.32 0.94 1.97 0.98 4.52 0.14 6.33 -0.73 1.57 -3.26 3.98 -4.52 4.31 -0.70 0.19 -19.31 0.28 -65.27 0.33 -64.29 0.05 -64.29 0.05 -66.82 7.66 -1.38 4.20 -4.97 14.95 -7.97 23.91 -5.58 16.71 -8.34 25.17 -9.89 30.12 -1.38 4.43 -2.34 5.98 -4.66 7.43 -1.15 0.75 -1.29 0.77 -3.66 0.77 -2.11 0 -2.63 -0.07 -3.59 -0.56 -1.20 -0.59 -2.65 -1.92 -3.59 -3.30 -0.47 -0.68 -2.44 -7.15 -4.17 -13.59 -0.19 -0.70 -0.61 -2.23 -0.94 -3.40 -0.33 -1.15 -0.77 -2.74 -0.98 -3.52 -0.19 -0.77 -0.45 -1.71 -0.56 -2.11 -0.12 -0.38 -0.49 -1.76 -0.82 -3.05 -0.35 -1.29 -1.03 -3.77 -1.52 -5.51 -1.90 -6.52 -2.79 -9.75 -2.95 -10.66 -0.07 -0.52 -0.23 -1.10 -0.35 -1.31 -0.12 -0.21 -0.63 -2.02 -1.15 -3.98 -0.94 -3.54 -1.66 -6.23 -3.40 -12.63 -0.47 -1.73 -1.10 -4.03 -1.43 -5.09 -0.30 -1.05 -0.94 -3.33 -1.38 -5.04 -0.45 -1.71 -1.03 -3.91 -1.29 -4.88 -0.28 -0.96 -0.59 -2.18 -0.68 -2.70 -0.12 -0.52 -0.75 -2.88 -1.41 -5.27 -0.66 -2.39 -1.45 -5.39 -1.80 -6.68 -0.33 -1.29 -0.70 -2.60 -0.80 -2.93 -0.30 -0.91 -2.04 -7.52 -2.25 -8.55 -0.16 -0.70 -0.33 -0.94 -0.66 -0.94 -0.40 0 -0.56 0.56 -1.45 4.80 -0.54 2.65 -1.36 6.61 -1.85 8.79 -0.47 2.20 -1.15 5.51 -1.50 7.38 -1.22 6.28 -1.92 9.73 -2.25 11.13 -0.19 0.77 -0.52 2.30 -0.70 3.40 -0.21 1.10 -0.54 2.53 -0.70 3.16 -0.19 0.66 -0.61 2.48 -0.91 4.10 -0.73 3.73 -1.69 8.48 -1.99 9.84 -0.49 2.30 -0.94 4.43 -1.29 6.21 -0.21 1.03 -0.75 3.61 -1.20 5.74 -0.45 2.13 -0.84 4.20 -0.91 4.57 -0.07 0.40 -0.23 1.34 -0.35 2.11 -0.14 0.77 -0.73 3.63 -1.31 6.33 -0.59 2.72 -1.17 5.55 -1.31 6.33 -0.30 1.83 -1.57 8.39 -1.85 9.61 -0.12 0.52 -0.54 2.58 -0.94 4.57 -0.40 1.99 -0.87 4.22 -1.05 4.92 -0.16 0.70 -0.45 2.09 -0.61 3.05 -0.16 0.96 -0.49 2.65 -0.73 3.75 -0.54 2.46 -0.59 2.70 -2.32 11.48 -0.77 3.94 -1.55 7.73 -1.73 8.44 -0.19 0.70 -0.56 2.39 -0.82 3.75 -0.28 1.36 -0.70 3.47 -0.96 4.69 -0.23 1.22 -0.61 3.23 -0.82 4.45 -0.63 3.87 -2.23 6.45 -4.83 7.85 -1.01 0.56 -1.57 0.68 -3.12 0.75 -1.13 0.05 -2.25 -0.07 -2.84 -0.26 z "/>
 </g>
</svg>`;var Nu=E('<div class="backdrop svelte-ji5owg"></div>'),Du=E('<button><span class="icon svelte-ji5owg"><!></span> <span> </span></button>'),Ou=E('<!> <aside><div class="header svelte-ji5owg"><div class="header-inner svelte-ji5owg"><button class="collapse-btn svelte-ji5owg"><div class="chevron svelte-ji5owg"><!></div></button> <div><div class="logo svelte-ji5owg"><!></div></div></div> <button class="btn-icon mobile-close svelte-ji5owg"><!></button></div> <div class="scroll-area custom-scrollbar svelte-ji5owg"><nav class="svelte-ji5owg"><!> <button title="Search"><span class="icon svelte-ji5owg"><!></span> <span>Search</span></button> <div class="sep svelte-ji5owg"></div> <button class="nav-item sync svelte-ji5owg" title="Update Library"><span><!></span> <span> </span></button> <div class="sep svelte-ji5owg"></div> <button title="Settings"><span class="icon svelte-ji5owg"><!></span> <span>Settings</span></button></nav> <div class="footer svelte-ji5owg"><div>Moode WaveUI</div></div></div></aside>',1);function Fu(e,r){Tt(r,!1);const t=()=>ke(ar,"$isSyncingLibrary",i),a=()=>ke(ss,"$isSidebarCollapsed",i),s=()=>ke(Ut,"$activeMenuTab",i),[i,o]=Ft(),l=M();let d=ft(r,"isOpen",8,!1);const c=xs();let u=M(0),h=M(0),f=M(!1);const p=[{id:"queue",label:"Queue",icon:y.MENU},{id:"favorites",label:"Favorites",icon:y.HEART},{id:"artists",label:"Artists",icon:y.ARTISTS},{id:"albums",label:"Albums",icon:y.ALBUMS},{id:"playlists",label:"Playlists",icon:y.PLAYLISTS},{id:"radio",label:"Radio",icon:y.RADIO}];function k(we){window.location.hash=`/${we}`,c("close")}async function S(){t()||(await Qa.syncLibrary(),window.location.hash="/artists")}function w(){ss.update(we=>!we)}function x(we){d()&&(g(u,we.touches[0].clientX),g(h,n(u)),g(f,!0))}function U(we){n(f)&&g(h,we.touches[0].clientX)}function G(){n(f)&&(n(h)-n(u)<-70&&c("close"),g(f,!1),g(u,0),g(h,0))}ee(()=>(n(f),n(h),n(u)),()=>{g(l,n(f)?Math.min(0,n(h)-n(u)):0)}),Qt(),Pt();var K=Ou(),J=Le(K);{var ce=we=>{var Te=Nu();A("click",Te,()=>c("close")),pt(3,Te,()=>Lt,()=>({duration:200})),m(we,Te)};L(J,we=>{d()&&we(ce)})}var z=_(J,2);let q,C;var xe=v(z),he=v(xe),P=v(he),j=v(P),ae=v(j);re(ae,()=>(I(y),b(()=>y.BACK)));var V=_(P,2);let te;var N=v(V),R=v(N);re(R,()=>ju);var _e=_(he,2),H=v(_e);re(H,()=>(I(y),b(()=>y.CLOSE)));var Z=_(xe,2),se=v(Z),T=v(se);kt(T,1,()=>p,pr,(we,Te)=>{var de=Du();let Se;var D=v(de),pe=v(D);re(pe,()=>(n(Te),b(()=>n(Te).icon)));var ze=_(D,2);let Fe;var Ue=v(ze);le(()=>{Se=Ye(de,1,"nav-item svelte-ji5owg",null,Se,{active:s()===n(Te).id}),Ot(de,"title",(n(Te),b(()=>n(Te).label))),Fe=Ye(ze,1,"label-text svelte-ji5owg",null,Fe,{hidden:a()}),oe(Ue,(n(Te),b(()=>n(Te).label)))}),A("click",de,()=>k(n(Te).id)),m(we,de)});var O=_(T,2);let X;var ve=v(O),W=v(ve);re(W,()=>(I(y),b(()=>y.SEARCH)));var ie=_(ve,2);let B;var Q=_(O,4),ne=v(Q);let ue;var ye=v(ne);re(ye,()=>(I(y),b(()=>y.SYNC)));var F=_(ne,2);let ge;var Ce=v(F),Pe=_(Q,4);let je;var Me=v(Pe),$=v(Me);re($,()=>(I(y),b(()=>y.SETTINGS)));var Y=_(Me,2);let fe;var be=_(se,2),$e=v(be);let Ee;le(()=>{q=Ye(z,1,"side-menu svelte-ji5owg",null,q,{"mobile-open":d(),collapsed:a()}),C=ot(z,"",C,{transform:d()?`translateX(${n(l)}px)`:"",transition:n(f)?"none":"width 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.3s ease"}),Ot(P,"title",a()?"Expand":"Collapse"),ot(j,`transform: rotate(${a()?"180deg":"0deg"})`),te=Ye(V,1,"logo-wrapper svelte-ji5owg",null,te,{hidden:a()}),X=Ye(O,1,"nav-item svelte-ji5owg",null,X,{active:s()==="search"}),B=Ye(ie,1,"label-text svelte-ji5owg",null,B,{hidden:a()}),Q.disabled=t(),ue=Ye(ne,1,"icon svelte-ji5owg",null,ue,{spin:t()}),ge=Ye(F,1,"label-text svelte-ji5owg",null,ge,{hidden:a()}),oe(Ce,t()?"Syncing...":"Update Library"),je=Ye(Pe,1,"nav-item svelte-ji5owg",null,je,{active:s()==="settings"}),fe=Ye(Y,1,"label-text svelte-ji5owg",null,fe,{hidden:a()}),Ee=Ye($e,1,"footer-text svelte-ji5owg",null,Ee,{hidden:a()})}),A("click",P,w),A("click",_e,()=>c("close")),A("click",O,()=>k("search")),A("click",Q,S),A("click",Pe,()=>k("settings")),A("touchstart",z,x),A("touchmove",z,U),A("touchend",z,G),m(e,K),Mt(),o()}var qu=E('<div class="toast-container svelte-k2bvk7"><div> </div></div>'),Bu=E('<button class="back-btn svelte-k2bvk7"><span class="icon-inline svelte-k2bvk7"><!></span> Back</button>'),Uu=E('<div class="view-title svelte-k2bvk7"><!></div>'),Hu=E('<div class="full-player-modal svelte-k2bvk7"><!></div>'),Vu=E('<div class="app-container svelte-k2bvk7"><div class="app-layout svelte-k2bvk7"><!> <!> <main class="content-area svelte-k2bvk7"><header class="top-bar svelte-k2bvk7"><button class="hamburger-btn svelte-k2bvk7"><!></button> <!></header> <div class="scroll-container svelte-k2bvk7"><div class="view-wrapper svelte-k2bvk7"><!></div></div></main> <div class="docked-player-container svelte-k2bvk7"><!></div></div> <div class="mini-player-wrapper svelte-k2bvk7"><!></div></div> <!>',1);function Yu(e,r){Tt(r,!1);const t=()=>ke(Jt,"$navigationStack",o),a=()=>ke(rs,"$toastMessage",o),s=()=>ke(Ut,"$activeMenuTab",o),i=()=>ke(yn,"$isFullPlayerOpen",o),[o,l]=Ft();let d=M(!1);la(()=>{window.history.replaceState({depth:t().length},"","");const N=()=>void 0;return window.addEventListener("popstate",N),()=>window.removeEventListener("popstate",N)}),Pt();var c=Vu(),u=Le(c),h=v(u),f=v(h);{var p=N=>{var R=qu(),_e=v(R),H=v(_e);le(()=>{Ye(_e,1,`toast-body ${a().type??""}`,"svelte-k2bvk7"),oe(H,a().text)}),pt(3,R,()=>oo,()=>({y:-50,duration:300})),m(N,R)};L(f,N=>{a()&&N(p)})}var k=_(f,2);Fu(k,{get isOpen(){return n(d)},$$events:{close:()=>g(d,!1)}});var S=_(k,2),w=v(S),x=v(w),U=v(x);re(U,()=>y.MENU);var G=_(x,2);{var K=N=>{var R=Bu(),_e=v(R),H=v(_e);re(H,()=>y.BACK),A("click",R,function(...Z){Zc?.apply(this,Z)}),m(N,R)},J=N=>{var R=Uu(),_e=v(R);{var H=se=>{var T=qr("Radio");m(se,T)},Z=se=>{var T=at(),O=Le(T);{var X=W=>{var ie=qr("Playlists");m(W,ie)},ve=W=>{var ie=at(),B=Le(ie);{var Q=ue=>{var ye=qr("Search");m(ue,ye)},ne=ue=>{var ye=at(),F=Le(ye);{var ge=Pe=>{var je=qr("Queue");m(Pe,je)},Ce=Pe=>{var je=at(),Me=Le(je);{var $=fe=>{var be=qr("Favorites");m(fe,be)},Y=fe=>{var be=at(),$e=Le(be);{var Ee=Te=>{var de=qr("Settings");m(Te,de)},we=Te=>{var de=qr();le(Se=>oe(de,Se),[()=>(s()||"Library").charAt(0).toUpperCase()+(s()||"library").slice(1)]),m(Te,de)};L($e,Te=>{s()==="settings"?Te(Ee):Te(we,!1)},!0)}m(fe,be)};L(Me,fe=>{s()==="favorites"?fe($):fe(Y,!1)},!0)}m(Pe,je)};L(F,Pe=>{s()==="queue"?Pe(ge):Pe(Ce,!1)},!0)}m(ue,ye)};L(B,ue=>{s()==="search"?ue(Q):ue(ne,!1)},!0)}m(W,ie)};L(O,W=>{s()==="playlists"?W(X):W(ve,!1)},!0)}m(se,T)};L(_e,se=>{s()==="radio"?se(H):se(Z,!1)})}m(N,R)};L(G,N=>{t().length>1?N(K):N(J,!1)})}var ce=_(w,2),z=v(ce),q=v(z);{var C=N=>{Td(N,{})},xe=N=>{var R=at(),_e=Le(R);{var H=se=>{yu(se,{})},Z=se=>{var T=at(),O=Le(T);{var X=W=>{Xd(W,{})},ve=W=>{var ie=at(),B=Le(ie);{var Q=ue=>{du(ue,{})},ne=ue=>{var ye=at(),F=Le(ye);{var ge=Pe=>{pu(Pe,{})},Ce=Pe=>{fd(Pe,{get activeCategory(){return s()}})};L(F,Pe=>{s()==="settings"?Pe(ge):Pe(Ce,!1)},!0)}m(ue,ye)};L(B,ue=>{s()==="search"?ue(Q):ue(ne,!1)},!0)}m(W,ie)};L(O,W=>{s()==="playlists"||s()==="favorites"?W(X):W(ve,!1)},!0)}m(se,T)};L(_e,se=>{s()==="queue"?se(H):se(Z,!1)},!0)}m(N,R)};L(q,N=>{s()==="radio"?N(C):N(xe,!1)})}var he=_(S,2),P=v(he);fi(P,{isDocked:!0});var j=_(h,2),ae=v(j);$u(ae,{});var V=_(u,2);{var te=N=>{var R=Hu(),_e=v(R);fi(_e,{}),m(N,R)};L(V,N=>{i()&&N(te)})}le(()=>ot(ce,`padding-bottom: ${i()?"0px":"var(--mini-player-height)"};`)),A("click",x,()=>g(d,!0)),m(e,c),Mt(),l()}var Wu=E('<button class="back-btn-area svelte-l8h85k"><span class="back-icon svelte-l8h85k"><!></span></button> <span class="header-title svelte-l8h85k">Select Playlist</span>',1),Qu=E('<div class="track-info svelte-l8h85k"><div class="title text-ellipsis svelte-l8h85k"> </div> <div class="artist text-ellipsis svelte-l8h85k">Playlist</div></div>'),Ku=E('<div class="track-info svelte-l8h85k"><div class="title text-ellipsis svelte-l8h85k"> </div> <div class="artist text-ellipsis svelte-l8h85k"> </div></div>'),Xu=E('<button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span> </span></button>'),Gu=E('<div class="empty-msg svelte-l8h85k">No custom playlists</div>'),Zu=E("<!> <!>",1),Ju=E('<button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Play Now</span></button> <div class="sep svelte-l8h85k"></div> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Rename</span></button> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Delete Playlist</span></button>',1),ef=E('<button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Go to Album</span></button> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Go to Artist</span></button>',1),tf=E('<div class="sep svelte-l8h85k"></div> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Remove from Playlist</span></button>',1),rf=E('<div class="sep svelte-l8h85k"></div> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Remove from Queue</span></button>',1),af=E('<button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Play Next</span></button> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Add to Queue</span></button> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Add to Playlist...</span></button> <!> <button class="menu-row svelte-l8h85k"><span><!></span> <span> </span></button> <!> <!>',1),nf=E('<div class="backdrop svelte-l8h85k"><div class="menu-card svelte-l8h85k"><div class="menu-header svelte-l8h85k"><!></div> <div class="menu-items scroll-y svelte-l8h85k"><!></div></div></div>');function sf(e,r){Tt(r,!1);const t=()=>ke(Ss,"$contextMenu",i),a=()=>ke(Lr,"$favorites",i),s=()=>ke($n,"$playlists",i),[i,o]=Ft(),l=M(),d=M(),c=M(),u=M(),h=M(),f=M(),p=M();let k=M(),S=M(),w=M(),x=M(0),U=M(0),G=M("main"),K=M(!1);function J(T){t().isOpen&&(g(K,!1),qt())}function ce(){qt()}function z(){t().track&&nr.playNext(t().track.file),qt()}function q(){t().track&&nr.addToQueue(t().track.file),qt()}function C(){t().track&&fr.toggleFavorite(t().track),qt()}function xe(){const T=t().track;T&&T.album&&Nr("tracks_by_album",{name:T.album,artist:T.artist}),qt()}function he(){const T=t().track;T&&T.artist&&Nr("albums_by_artist",{name:T.artist}),qt()}async function P(){const{playlistName:T,index:O}=t().context;T&&O!==null&&(ja.update(X=>{const ve=[...X];return ve.splice(O,1),ve}),await fr.removeFromPlaylist(T,O)),qt()}function j(){const{index:T}=t().context;T!=null&&nr.removeFromQueue(T),qt()}function ae(){const T=t().context.playlist;T&&Ae.send("stop").then(()=>Ae.send("clear")).then(()=>Ae.send(`load "${T.name.replace(/"/g,'\\"')}"`)).then(()=>Ae.send("play 0")),qt()}function V(){const T=t().context.playlist;T&&(qt(),ur({title:"Rename Playlist",message:`Enter new name for "${T.name}":`,type:"prompt",placeholder:T.name,inputValue:T.name,confirmLabel:"Rename",onConfirm:O=>{O&&O!==T.name&&fr.renamePlaylist(T.name,O)}}))}function te(){const T=t().context.playlist;T&&(qt(),ur({title:"Delete Playlist",message:`Are you sure you want to delete "${T.name}"? This cannot be undone.`,type:"confirm",confirmLabel:"Delete",onConfirm:()=>{fr.deletePlaylist(T.name)}}))}function N(){g(G,"playlists")}function R(){g(G,"main")}async function _e(T){const O=t().track;if(O)try{const X=T.replace(/"/g,'\\"'),ve=O.file.replace(/"/g,'\\"');await Ae.send(`playlistadd "${X}" "${ve}"`),Oe(`Added to "${T}"`,"success"),qt()}catch(X){console.error(X),Oe("Failed to add","error")}}ee(()=>t(),()=>{t().isOpen&&g(G,"main")}),ee(()=>(t(),n(K)),()=>{t().isOpen?!n(K)&&typeof history<"u"&&(history.pushState({contextMenuOpen:!0},""),g(K,!0)):n(K)&&typeof history<"u"&&(history.back(),g(K,!1))}),ee(()=>(t(),a()),()=>{g(l,t().track&&a().has(t().track.file))}),ee(()=>t(),()=>{g(d,t().track&&(t().track.file.includes("http")||t().track.file.includes("://")))}),ee(()=>t(),()=>{g(c,t().context?.type==="playlist")}),ee(()=>t(),()=>{g(u,t().context?.type==="queue")}),ee(()=>t(),()=>{g(h,t().context?.type==="playlist-card")}),ee(()=>t(),()=>{g(f,t().context?.source==="miniplayer")}),ee(()=>(t(),n(U),n(x),n(k),n(f),n(S)),()=>{g(p,(()=>{if(!t().isOpen)return"";const T=t().triggerRect,O=t().x,X=t().y,ve=n(U)||220,W=n(x)||320;if(n(k)<=768&&n(f)&&T)return`
        position: fixed; 
        bottom: ${n(S)-T.top}px; 
        left: 50%; 
        transform: translateX(-50%); 
        margin: 0; 
        transform-origin: bottom center;
      `;let ie=0,B=0,Q="top left";if(T){const ue=T.left+T.width/2,ye=T.top+T.height/2,F=ue>n(k)/2,ge=ye>n(S)/2;F?(ie=T.right-ve,Q=ge?"bottom right":"top right"):(ie=T.left,Q=ge?"bottom left":"top left"),ge?B=T.top-W:B=T.bottom}else ie=O,B=X,ie+ve>n(k)&&(ie=n(k)-ve-10),B+W>n(S)&&(B=n(S)-W-10);const ne=8;return ie<ne&&(ie=ne),ie+ve>n(k)-ne&&(ie=n(k)-ve-ne),B<ne&&(B=ne),B+W>n(S)-ne&&(B=n(S)-W-ne),`position: fixed; top: ${B}px; left: ${ie}px; margin: 0; transform-origin: ${Q};`})())}),Qt(),Pt();var H=at();A("popstate",Cr,J);var Z=Le(H);{var se=T=>{var O=nf(),X=v(O),ve=v(X),W=v(ve);{var ie=F=>{var ge=Wu(),Ce=Le(ge),Pe=v(Ce),je=v(Pe);re(je,()=>(I(y),b(()=>y.BACK))),A("click",Ce,R),m(F,ge)},B=F=>{var ge=at(),Ce=Le(ge);{var Pe=Me=>{var $=Qu(),Y=v($),fe=v(Y);le(()=>oe(fe,(t(),b(()=>t().context.playlist.name)))),m(Me,$)},je=Me=>{var $=Ku(),Y=v($),fe=v(Y),be=_(Y,2),$e=v(be);le(()=>{oe(fe,(t(),b(()=>t().track.title))),oe($e,(t(),b(()=>t().track.artist)))}),m(Me,$)};L(Ce,Me=>{n(h)?Me(Pe):Me(je,!1)},!0)}m(F,ge)};L(W,F=>{n(G)==="playlists"?F(ie):F(B,!1)})}var Q=_(ve,2),ne=v(Q);{var ue=F=>{var ge=Zu(),Ce=Le(ge);kt(Ce,1,s,pr,(Me,$)=>{var Y=at(),fe=Le(Y);{var be=$e=>{var Ee=Xu(),we=v(Ee),Te=v(we);re(Te,()=>(I(y),b(()=>y.PLAYLISTS)));var de=_(we,2),Se=v(de);le(()=>oe(Se,(n($),b(()=>n($).name)))),A("click",Ee,()=>_e(n($).name)),m($e,Ee)};L(fe,$e=>{n($),b(()=>n($).name!=="Favorites")&&$e(be)})}m(Me,Y)});var Pe=_(Ce,2);{var je=Me=>{var $=Gu();m(Me,$)};L(Pe,Me=>{s(),b(()=>s().filter($=>$.name!=="Favorites").length===0)&&Me(je)})}m(F,ge)},ye=F=>{var ge=at(),Ce=Le(ge);{var Pe=Me=>{var $=Ju(),Y=Le($),fe=v(Y),be=v(fe);re(be,()=>(I(y),b(()=>y.PLAY)));var $e=_(Y,4),Ee=v($e),we=v(Ee);re(we,()=>(I(y),b(()=>y.EDIT)));var Te=_($e,2),de=v(Te),Se=v(de);re(Se,()=>(I(y),b(()=>y.REMOVE))),A("click",Y,ae),A("click",$e,V),A("click",Te,te),m(Me,$)},je=Me=>{var $=af(),Y=Le($),fe=v(Y),be=v(fe);re(be,()=>(I(y),b(()=>y.NEXT)));var $e=_(Y,2),Ee=v($e),we=v(Ee);re(we,()=>(I(y),b(()=>y.MENU)));var Te=_($e,2),de=v(Te),Se=v(de);re(Se,()=>(I(y),b(()=>y.ADD_TO_PLAYLIST||y.ADD)));var D=_(Te,2);{var pe=De=>{var Re=ef(),Be=Le(Re),Ke=v(Be),nt=v(Ke);re(nt,()=>(I(y),b(()=>y.ALBUM_LINK||y.ALBUMS)));var gt=_(Be,2),wt=v(gt),bt=v(wt);re(bt,()=>(I(y),b(()=>y.ARTIST_LINK||y.ARTISTS))),A("click",Be,xe),A("click",gt,he),m(De,Re)};L(D,De=>{n(d)||De(pe)})}var ze=_(D,2),Fe=v(ze);let Ue;var Ne=v(Fe);re(Ne,()=>(n(l),I(y),b(()=>n(l)?y.HEART_FILLED:y.HEART)));var tt=_(Fe,2),rt=v(tt),We=_(ze,2);{var Qe=De=>{var Re=tf(),Be=_(Le(Re),2),Ke=v(Be),nt=v(Ke);re(nt,()=>(I(y),b(()=>y.REMOVE))),A("click",Be,P),m(De,Re)};L(We,De=>{n(c)&&De(Qe)})}var He=_(We,2);{var Ze=De=>{var Re=rf(),Be=_(Le(Re),2),Ke=v(Be),nt=v(Ke);re(nt,()=>(I(y),b(()=>y.REMOVE))),A("click",Be,j),m(De,Re)};L(He,De=>{n(u)&&De(Ze)})}le(()=>{Ue=Ye(Fe,1,"icon svelte-l8h85k",null,Ue,{liked:n(l)}),oe(rt,n(l)?"Unlike":"Like")}),A("click",Y,z),A("click",$e,q),A("click",Te,N),A("click",ze,C),m(Me,$)};L(Ce,Me=>{n(h)?Me(Pe):Me(je,!1)},!0)}m(F,ge)};L(ne,F=>{n(G)==="playlists"?F(ue):F(ye,!1)})}Dr(X,F=>g(w,F),()=>n(w)),le(()=>ot(X,n(p))),Ws(X,"clientHeight",F=>g(x,F)),Ws(X,"clientWidth",F=>g(U,F)),pt(3,X,()=>Es,()=>({start:.95,duration:100})),A("click",X,Yt(function(F){Ua.call(this,r,F)})),A("click",O,ce),pt(3,O,()=>Lt,()=>({duration:100})),m(T,O)};L(Z,T=>{t(),b(()=>t().isOpen)&&T(se)})}Ks("innerWidth",T=>g(k,T)),Ks("innerHeight",T=>g(S,T)),m(e,H),Mt(),o()}var of=E('<p class="modal-message svelte-1bxxaoh"> </p>'),lf=E('<div class="input-wrapper svelte-1bxxaoh"><input type="text" autoFocus/></div>'),cf=E('<span class="check svelte-1bxxaoh">â</span>'),vf=E("<button> <!></button>"),df=E('<div class="select-list svelte-1bxxaoh"></div>'),uf=E('<button class="btn cancel svelte-1bxxaoh"> </button>'),ff=E('<div class="modal-actions svelte-1bxxaoh"><!> <button class="btn confirm svelte-1bxxaoh"> </button></div>'),hf=E('<div class="backdrop svelte-1bxxaoh"><div class="modal-card svelte-1bxxaoh"><div class="modal-header svelte-1bxxaoh"><span class="modal-title svelte-1bxxaoh"> </span></div> <div class="modal-body svelte-1bxxaoh"><!> <!></div> <!></div></div>');function pf(e,r){Tt(r,!1);const t=()=>ke(bn,"$modal",a),[a,s]=Ft();let i=M(!1),o=M();function l(){if(t().type==="prompt"){const S=t().inputValue?t().inputValue.trim():"";if(S.length===0){c();return}t().onConfirm&&t().onConfirm(S)}else t().onConfirm&&t().onConfirm();sn()}function d(S){t().onConfirm&&t().onConfirm(S),sn()}function c(){g(i,!0),n(o)&&n(o).focus(),setTimeout(()=>{g(i,!1)},400)}function u(){sn()}function h(S){S.key==="Enter"&&t().type!=="select"&&l(),n(i)&&g(i,!1)}ee(()=>t(),()=>{t().isOpen||g(i,!1)}),Qt(),Pt();var f=at(),p=Le(f);{var k=S=>{var w=hf(),x=v(w),U=v(x),G=v(U),K=v(G),J=_(U,2),ce=v(J);{var z=j=>{var ae=of(),V=v(ae);le(()=>oe(V,(t(),b(()=>t().message)))),m(j,ae)};L(ce,j=>{t(),b(()=>t().message)&&j(z)})}var q=_(ce,2);{var C=j=>{var ae=lf(),V=v(ae);let te;Dr(V,N=>g(o,N),()=>n(o)),le(()=>{te=Ye(V,1,"modal-input svelte-1bxxaoh",null,te,{"shake-error":n(i)}),Ot(V,"placeholder",(t(),b(()=>t().placeholder)))}),Ba(V,()=>t().inputValue,N=>ec(bn,b(t).inputValue=N,b(t))),A("keydown",V,h),m(j,ae)},xe=j=>{var ae=at(),V=Le(ae);{var te=N=>{var R=df();kt(R,5,()=>(t(),b(()=>t().options)),pr,(_e,H)=>{var Z=vf();let se;var T=v(Z),O=_(T);{var X=ve=>{var W=cf();m(ve,W)};L(O,ve=>{n(H),t(),b(()=>n(H).value===t().inputValue)&&ve(X)})}le(()=>{se=Ye(Z,1,"select-item svelte-1bxxaoh",null,se,{active:n(H).value===t().inputValue}),oe(T,`${n(H),b(()=>n(H).label)??""} `)}),A("click",Z,()=>d(n(H).value)),m(_e,Z)}),m(N,R)};L(V,N=>{t(),b(()=>t().type==="select")&&N(te)},!0)}m(j,ae)};L(q,j=>{t(),b(()=>t().type==="prompt")?j(C):j(xe,!1)})}var he=_(J,2);{var P=j=>{var ae=ff(),V=v(ae);{var te=_e=>{var H=uf(),Z=v(H);le(()=>oe(Z,(t(),b(()=>t().cancelLabel)))),A("click",H,function(...se){sn?.apply(this,se)}),m(_e,H)};L(V,_e=>{t(),b(()=>t().type==="confirm"||t().type==="prompt")&&_e(te)})}var N=_(V,2),R=v(N);le(()=>oe(R,(t(),b(()=>t().confirmLabel)))),A("click",N,l),m(j,ae)};L(he,j=>{t(),b(()=>t().type!=="select")&&j(P)})}le(()=>oe(K,(t(),b(()=>t().title)))),pt(3,x,()=>Es,()=>({start:.95,duration:200})),A("click",x,Yt(function(j){Ua.call(this,r,j)})),A("click",w,u),pt(3,w,()=>Lt,()=>({duration:150})),m(S,w)};L(p,S=>{t(),b(()=>t().isOpen)&&S(k)})}m(e,f),Mt(),s()}const hi={init(){this.handleHashChange(),window.addEventListener("hashchange",()=>this.handleHashChange())},handleHashChange(){let e=window.location.hash.slice(1);for(;e.startsWith("/");)e=e.slice(1);if(!e){(Xe(Jt).length>1||Xe(Ut)==="search")&&(this.setRootTab("artists"),window.location.hash="/artists");return}const r=e.split("/").map(decodeURIComponent),t=r[0];let a=Gc();switch(a||r.length>1&&(t==="album"&&r.length>=3?a={artist:r[1],name:r[2]}:t==="artist"&&r.length>=2?a={name:r[1]}:a={name:r[1],displayName:r[1]}),console.log(`[Router] Navigating: ${t}`,a),t){case"queue":this.setRootTab("queue");break;case"radio":this.setRootTab("radio");break;case"playlists":this.setRootTab("playlists");break;case"settings":this.setRootTab("settings");break;case"favorites":Ut.set("favorites"),Jt.set([{view:"root"},{view:"details",data:{name:"Favorites"}}]);break;case"artists":this.setRootTab("artists");break;case"albums":this.setRootTab("albums");break;case"search":Ut.set("search"),r[1]&&Na.set(r[1]),Jt.set([{view:"root"}]);break;case"album":Ut.set("albums"),Jt.set([{view:"root"},{view:"tracks_by_album",data:a}]);break;case"artist":Ut.set("artists"),Jt.set([{view:"root"},{view:"albums_by_artist",data:a}]);break;case"playlist":Ut.set("playlists"),Jt.set([{view:"root"},{view:"details",data:a}]);break;default:this.setRootTab("artists");break}},setRootTab(e){Ut.set(e),Jt.set([{view:"root"}])},updateUrl(e,r){let t="";if(e==="root"){const a=Xe(Ut);if(a==="search"){const s=Xe(Na);t=s?`search/${encodeURIComponent(s)}`:"search"}else t=a}else if(e==="details"){const a=r.name||r;t=a==="Favorites"?"favorites":`playlist/${encodeURIComponent(a)}`}else if(e==="albums_by_artist"){const a=r.name||r;t=`artist/${encodeURIComponent(a)}`}else if(e==="tracks_by_album"){const a=r.name||r,s=r.artist;s?t=`album/${encodeURIComponent(s)}/${encodeURIComponent(a)}`:t=`album/${encodeURIComponent(a)}`}else e==="queue"&&(t="queue");if(t){const a=`#/${t}`;decodeURIComponent(window.location.hash)!==decodeURIComponent(a)&&(window.location.hash=`/${t}`)}}};var gf=E("<!> <!> <!>",1);function _f(e,r){Tt(r,!1),la(async()=>{hi.init(),Xc((o,l)=>{hi.updateUrl(o,l)}),ho(),Qa.loadRadioStations();try{const o=await Rr.getArtists();o.length>0?console.log(`[App] Database ready. Loaded ${o.length} artists from cache.`):(console.log("[App] Database empty. Starting initial sync..."),Qa.syncLibrary())}catch(o){console.error("[App] DB Check failed:",o),Oe("Local DB error. Please update library manually.","error")}}),Pt();var t=gf(),a=Le(t);Yu(a,{});var s=_(a,2);sf(s,{});var i=_(s,2);pf(i,{}),m(e,t),Mt()}Rl(_f,{target:document.getElementById("app")});
