(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function a(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=a(s);fetch(s.href,i)}})();const Qn=!1;var Jr=Array.isArray,Eo=Array.prototype.indexOf,Mn=Array.from,bi=Object.defineProperty,yr=Object.getOwnPropertyDescriptor,yi=Object.getOwnPropertyDescriptors,So=Object.prototype,To=Array.prototype,ps=Object.getPrototypeOf,Ns=Object.isExtensible;function Mo(e){return typeof e=="function"}const Qt=()=>{};function $o(e){return e()}function _n(e){for(var t=0;t<e.length;t++)e[t]()}function wi(){var e,t,a=new Promise((n,s)=>{e=n,t=s});return{promise:a,resolve:e,reject:t}}const $t=2,gs=4,$n=8,Ao=1<<24,ga=16,$a=32,lr=64,An=128,ia=512,Tt=1024,Bt=2048,oa=4096,Kt=8192,Ea=16384,Cn=32768,rr=65536,Ds=1<<17,ki=1<<18,$r=1<<19,xi=1<<20,wa=1<<25,nr=32768,Xn=1<<21,_s=1<<22,Da=1<<23,Sa=Symbol("$state"),Co=Symbol("legacy props"),Po=Symbol(""),_r=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function ms(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Lo(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function zo(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Ro(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function jo(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Io(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function No(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function Do(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Oo(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Fo(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function qo(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Bo=1,Uo=2,Ei=4,Yo=8,Ho=16,Vo=1,Wo=2,Qo=4,Xo=8,Ko=16,Go=1,Zo=2,Jo=4,el=1,tl=2,Pt=Symbol(),al="http://www.w3.org/1999/xhtml";function rl(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function nl(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Si(e){return e===this.v}function bs(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function Ti(e){return!bs(e,this.v)}let Ar=!1,sl=!1;function il(){Ar=!0}let ft=null;function kr(e){ft=e}function Et(e,t=!1,a){ft={p:ft,i:!1,c:null,e:null,s:e,x:null,l:Ar&&!t?{s:null,u:null,$:[]}:null}}function St(e){var t=ft,a=t.e;if(a!==null){t.e=null;for(var n of a)Bi(n)}return t.i=!0,ft=t.p,{}}function en(){return!Ar||ft!==null&&ft.l===null}let Qa=[];function Mi(){var e=Qa;Qa=[],_n(e)}function cr(e){if(Qa.length===0&&!Or){var t=Qa;queueMicrotask(()=>{t===Qa&&Mi()})}Qa.push(e)}function ol(){for(;Qa.length>0;)Mi()}function $i(e){var t=ot;if(t===null)return st.f|=Da,e;if((t.f&Cn)===0){if((t.f&An)===0)throw e;t.b.error(e)}else xr(e,t)}function xr(e,t){for(;t!==null;){if((t.f&An)!==0)try{t.b.error(e);return}catch(a){e=a}t=t.parent}throw e}const sn=new Set;let it=null,Dr=null,ta=null,Jt=[],Pn=null,Kn=!1,Or=!1;class va{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#a=0;#r=0;#l=null;#s=new Set;#n=new Set;skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#r>0}process(t){Jt=[],Dr=null,this.apply();var a={parent:null,effect:null,effects:[],render_effects:[]};for(const n of t)this.#i(n,a);this.is_fork||this.#d(),this.is_deferred()?(this.#o(a.effects),this.#o(a.render_effects)):(Dr=this,it=null,Os(a.render_effects),Os(a.effects),Dr=null,this.#l?.resolve()),ta=null}#i(t,a){t.f^=Tt;for(var n=t.first;n!==null;){var s=n.f,i=(s&($a|lr))!==0,l=i&&(s&Tt)!==0,o=l||(s&Kt)!==0||this.skipped_effects.has(n);if((n.f&An)!==0&&n.b?.is_pending()&&(a={parent:a,effect:n,effects:[],render_effects:[]}),!o&&n.fn!==null){i?n.f^=Tt:(s&gs)!==0?a.effects.push(n):Pr(n)&&((n.f&ga)!==0&&this.#s.add(n),Er(n));var u=n.first;if(u!==null){n=u;continue}}var c=n.parent;for(n=n.next;n===null&&c!==null;)c===a.effect&&(this.#o(a.effects),this.#o(a.render_effects),a=a.parent),n=c.next,c=c.parent}}#o(t){for(const a of t)(a.f&Bt)!==0?this.#s.add(a):(a.f&oa)!==0&&this.#n.add(a),this.#c(a.deps),Mt(a,Tt)}#c(t){if(t!==null)for(const a of t)(a.f&$t)===0||(a.f&nr)===0||(a.f^=nr,this.#c(a.deps))}capture(t,a){this.previous.has(t)||this.previous.set(t,a),(t.f&Da)===0&&(this.current.set(t,t.v),ta?.set(t,t.v))}activate(){it=this,this.apply()}deactivate(){it===this&&(it=null,ta=null)}flush(){if(this.activate(),Jt.length>0){if(Ai(),it!==null&&it!==this)return}else this.#a===0&&this.process([]);this.deactivate()}discard(){for(const t of this.#t)t(this);this.#t.clear()}#d(){if(this.#r===0){for(const t of this.#e)t();this.#e.clear()}this.#a===0&&this.#v()}#v(){if(sn.size>1){this.previous.clear();var t=ta,a=!0,n={parent:null,effect:null,effects:[],render_effects:[]};for(const i of sn){if(i===this){a=!1;continue}const l=[];for(const[u,c]of this.current){if(i.current.has(u))if(a&&c!==i.current.get(u))i.current.set(u,c);else continue;l.push(u)}if(l.length===0)continue;const o=[...i.current.keys()].filter(u=>!this.current.has(u));if(o.length>0){var s=Jt;Jt=[];const u=new Set,c=new Map;for(const v of l)Ci(v,o,u,c);if(Jt.length>0){it=i,i.apply();for(const v of Jt)i.#i(v,n);i.deactivate()}Jt=s}}it=null,ta=t}this.committed=!0,sn.delete(this)}increment(t){this.#a+=1,t&&(this.#r+=1)}decrement(t){this.#a-=1,t&&(this.#r-=1),this.revive()}revive(){for(const t of this.#s)this.#n.delete(t),Mt(t,Bt),sr(t);for(const t of this.#n)Mt(t,oa),sr(t);this.flush()}oncommit(t){this.#e.add(t)}ondiscard(t){this.#t.add(t)}settled(){return(this.#l??=wi()).promise}static ensure(){if(it===null){const t=it=new va;sn.add(it),Or||va.enqueue(()=>{it===t&&t.flush()})}return it}static enqueue(t){cr(t)}apply(){}}function ll(e){var t=Or;Or=!0;try{for(var a;;){if(ol(),Jt.length===0&&(it?.flush(),Jt.length===0))return Pn=null,a;Ai()}}finally{Or=t}}function Ai(){var e=Za;Kn=!0;var t=null;try{var a=0;for(bn(!0);Jt.length>0;){var n=va.ensure();if(a++>1e3){var s,i;cl()}n.process(Jt),Oa.clear()}}finally{Kn=!1,bn(e),Pn=null}}function cl(){try{Io()}catch(e){xr(e,Pn)}}let ba=null;function Os(e){var t=e.length;if(t!==0){for(var a=0;a<t;){var n=e[a++];if((n.f&(Ea|Kt))===0&&Pr(n)&&(ba=new Set,Er(n),n.deps===null&&n.first===null&&n.nodes===null&&(n.teardown===null&&n.ac===null?Vi(n):n.fn=null),ba?.size>0)){Oa.clear();for(const s of ba){if((s.f&(Ea|Kt))!==0)continue;const i=[s];let l=s.parent;for(;l!==null;)ba.has(l)&&(ba.delete(l),i.push(l)),l=l.parent;for(let o=i.length-1;o>=0;o--){const u=i[o];(u.f&(Ea|Kt))===0&&Er(u)}}ba.clear()}}ba=null}}function Ci(e,t,a,n){if(!a.has(e)&&(a.add(e),e.reactions!==null))for(const s of e.reactions){const i=s.f;(i&$t)!==0?Ci(s,t,a,n):(i&(_s|ga))!==0&&(i&Bt)===0&&Pi(s,t,n)&&(Mt(s,Bt),sr(s))}}function Pi(e,t,a){const n=a.get(e);if(n!==void 0)return n;if(e.deps!==null)for(const s of e.deps){if(t.includes(s))return!0;if((s.f&$t)!==0&&Pi(s,t,a))return a.set(s,!0),!0}return a.set(e,!1),!1}function sr(e){for(var t=Pn=e;t.parent!==null;){t=t.parent;var a=t.f;if(Kn&&t===ot&&(a&ga)!==0&&(a&ki)===0)return;if((a&(lr|$a))!==0){if((a&Tt)===0)return;t.f^=Tt}}Jt.push(t)}function dl(e){let t=0,a=ir(0),n;return()=>{Vr()&&(r(a),Cr(()=>(t===0&&(n=b(()=>e(()=>Fr(a)))),t+=1,()=>{cr(()=>{t-=1,t===0&&(n?.(),n=void 0,Fr(a))})})))}}var vl=rr|$r|An;function ul(e,t,a){new fl(e,t,a)}class fl{parent;#e=!1;#t;#a=null;#r;#l;#s;#n=null;#i=null;#o=null;#c=null;#d=null;#v=0;#u=0;#h=!1;#f=null;#b=dl(()=>(this.#f=ir(this.#v),()=>{this.#f=null}));constructor(t,a,n){this.#t=t,this.#r=a,this.#l=n,this.parent=ot.b,this.#e=!!this.#r.pending,this.#s=ws(()=>{ot.b=this;{var s=this.#_();try{this.#n=ea(()=>n(s))}catch(i){this.error(i)}this.#u>0?this.#g():this.#e=!1}return()=>{this.#d?.remove()}},vl)}#y(){try{this.#n=ea(()=>this.#l(this.#t))}catch(t){this.error(t)}this.#e=!1}#w(){const t=this.#r.pending;t&&(this.#i=ea(()=>t(this.#t)),va.enqueue(()=>{var a=this.#_();this.#n=this.#p(()=>(va.ensure(),ea(()=>this.#l(a)))),this.#u>0?this.#g():(Ga(this.#i,()=>{this.#i=null}),this.#e=!1)}))}#_(){var t=this.#t;return this.#e&&(this.#d=Ta(),this.#t.before(this.#d),t=this.#d),t}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#r.pending}#p(t){var a=ot,n=st,s=ft;pa(this.#s),Ft(this.#s),kr(this.#s.ctx);try{return t()}catch(i){return $i(i),null}finally{pa(a),Ft(n),kr(s)}}#g(){const t=this.#r.pending;this.#n!==null&&(this.#c=document.createDocumentFragment(),this.#c.append(this.#d),Xi(this.#n,this.#c)),this.#i===null&&(this.#i=ea(()=>t(this.#t)))}#m(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#m(t);return}this.#u+=t,this.#u===0&&(this.#e=!1,this.#i&&Ga(this.#i,()=>{this.#i=null}),this.#c&&(this.#t.before(this.#c),this.#c=null))}update_pending_count(t){this.#m(t),this.#v+=t,this.#f&&or(this.#f,this.#v)}get_effect_pending(){return this.#b(),r(this.#f)}error(t){var a=this.#r.onerror;let n=this.#r.failed;if(this.#h||!a&&!n)throw t;this.#n&&(qt(this.#n),this.#n=null),this.#i&&(qt(this.#i),this.#i=null),this.#o&&(qt(this.#o),this.#o=null);var s=!1,i=!1;const l=()=>{if(s){nl();return}s=!0,i&&qo(),va.ensure(),this.#v=0,this.#o!==null&&Ga(this.#o,()=>{this.#o=null}),this.#e=this.has_pending_snippet(),this.#n=this.#p(()=>(this.#h=!1,ea(()=>this.#l(this.#t)))),this.#u>0?this.#g():this.#e=!1};var o=st;try{Ft(null),i=!0,a?.(t,l),i=!1}catch(u){xr(u,this.#s&&this.#s.parent)}finally{Ft(o)}n&&cr(()=>{this.#o=this.#p(()=>{va.ensure(),this.#h=!0;try{return ea(()=>{n(this.#t,()=>t,()=>l)})}catch(u){return xr(u,this.#s.parent),null}finally{this.#h=!1}})})}}function hl(e,t,a,n){const s=en()?tn:pt;if(a.length===0&&e.length===0){n(t.map(s));return}var i=it,l=ot,o=pl();function u(){Promise.all(a.map(c=>gl(c))).then(c=>{o();try{n([...t.map(s),...c])}catch(v){(l.f&Ea)===0&&xr(v,l)}i?.deactivate(),mn()}).catch(c=>{xr(c,l)})}e.length>0?Promise.all(e).then(()=>{o();try{return u()}finally{i?.deactivate(),mn()}}):u()}function pl(){var e=ot,t=st,a=ft,n=it;return function(i=!0){pa(e),Ft(t),kr(a),i&&n?.activate()}}function mn(){pa(null),Ft(null),kr(null)}function tn(e){var t=$t|Bt,a=st!==null&&(st.f&$t)!==0?st:null;return ot!==null&&(ot.f|=$r),{ctx:ft,deps:null,effects:null,equals:Si,f:t,fn:e,reactions:null,rv:0,v:Pt,wv:0,parent:a??ot,ac:null}}function gl(e,t){let a=ot;a===null&&Lo();var n=a.b,s=void 0,i=ir(Pt),l=!st,o=new Map;return Ml(()=>{var u=wi();s=u.promise;try{Promise.resolve(e()).then(u.resolve,u.reject).then(()=>{c===it&&c.committed&&c.deactivate(),mn()})}catch(f){u.reject(f),mn()}var c=it;if(l){var v=!n.is_pending();n.update_pending_count(1),c.increment(v),o.get(c)?.reject(_r),o.delete(c),o.set(c,u)}const h=(f,p=void 0)=>{if(c.activate(),p)p!==_r&&(i.f|=Da,or(i,p));else{(i.f&Da)!==0&&(i.f^=Da),or(i,f);for(const[E,S]of o){if(o.delete(E),E===c)break;S.reject(_r)}}l&&(n.update_pending_count(-1),c.decrement(v))};u.promise.then(h,f=>h(null,f||"unknown"))}),rn(()=>{for(const u of o.values())u.reject(_r)}),new Promise(u=>{function c(v){function h(){v===s?u(i):c(s)}v.then(h,h)}c(s)})}function zr(e){const t=tn(e);return Ki(t),t}function pt(e){const t=tn(e);return t.equals=Ti,t}function Li(e){var t=e.effects;if(t!==null){e.effects=null;for(var a=0;a<t.length;a+=1)qt(t[a])}}function _l(e){for(var t=e.parent;t!==null;){if((t.f&$t)===0)return(t.f&Ea)===0?t:null;t=t.parent}return null}function ys(e){var t,a=ot;pa(_l(e));try{e.f&=~nr,Li(e),t=eo(e)}finally{pa(a)}return t}function zi(e){var t=ys(e);if(e.equals(t)||(it?.is_fork||(e.v=t),e.wv=Zi()),!vr)if(ta!==null)(Vr()||it?.is_fork)&&ta.set(e,t);else{var a=(e.f&ia)===0?oa:Tt;Mt(e,a)}}let Gn=new Set;const Oa=new Map;let Ri=!1;function ir(e,t){var a={f:0,v:e,reactions:null,equals:Si,rv:0,wv:0};return a}function Aa(e,t){const a=ir(e);return Ki(a),a}function T(e,t=!1,a=!0){const n=ir(e);return t||(n.equals=Ti),Ar&&a&&ft!==null&&ft.l!==null&&(ft.l.s??=[]).push(n),n}function on(e,t){return g(e,b(()=>r(e))),t}function g(e,t,a=!1){st!==null&&(!ua||(st.f&Ds)!==0)&&en()&&(st.f&($t|ga|_s|Ds))!==0&&!Ma?.includes(e)&&Fo();let n=a?mr(t):t;return or(e,n)}function or(e,t){if(!e.equals(t)){var a=e.v;vr?Oa.set(e,t):Oa.set(e,a),e.v=t;var n=va.ensure();n.capture(e,a),(e.f&$t)!==0&&((e.f&Bt)!==0&&ys(e),Mt(e,(e.f&ia)!==0?Tt:oa)),e.wv=Zi(),ji(e,Bt),en()&&ot!==null&&(ot.f&Tt)!==0&&(ot.f&($a|lr))===0&&(Zt===null?Pl([e]):Zt.push(e)),!n.is_fork&&Gn.size>0&&!Ri&&ml()}return t}function ml(){Ri=!1;var e=Za;bn(!0);const t=Array.from(Gn);try{for(const a of t)(a.f&Tt)!==0&&Mt(a,oa),Pr(a)&&Er(a)}finally{bn(e)}Gn.clear()}function Fr(e){g(e,e.v+1)}function ji(e,t){var a=e.reactions;if(a!==null)for(var n=en(),s=a.length,i=0;i<s;i++){var l=a[i],o=l.f;if(!(!n&&l===ot)){var u=(o&Bt)===0;if(u&&Mt(l,t),(o&$t)!==0){var c=l;ta?.delete(c),(o&nr)===0&&(o&ia&&(l.f|=nr),ji(c,oa))}else u&&((o&ga)!==0&&ba!==null&&ba.add(l),sr(l))}}}function mr(e){if(typeof e!="object"||e===null||Sa in e)return e;const t=ps(e);if(t!==So&&t!==To)return e;var a=new Map,n=Jr(e),s=Aa(0),i=Ja,l=o=>{if(Ja===i)return o();var u=st,c=Ja;Ft(null),Us(i);var v=o();return Ft(u),Us(c),v};return n&&a.set("length",Aa(e.length)),new Proxy(e,{defineProperty(o,u,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&Do();var v=a.get(u);return v===void 0?v=l(()=>{var h=Aa(c.value);return a.set(u,h),h}):g(v,c.value,!0),!0},deleteProperty(o,u){var c=a.get(u);if(c===void 0){if(u in o){const v=l(()=>Aa(Pt));a.set(u,v),Fr(s)}}else g(c,Pt),Fr(s);return!0},get(o,u,c){if(u===Sa)return e;var v=a.get(u),h=u in o;if(v===void 0&&(!h||yr(o,u)?.writable)&&(v=l(()=>{var p=mr(h?o[u]:Pt),E=Aa(p);return E}),a.set(u,v)),v!==void 0){var f=r(v);return f===Pt?void 0:f}return Reflect.get(o,u,c)},getOwnPropertyDescriptor(o,u){var c=Reflect.getOwnPropertyDescriptor(o,u);if(c&&"value"in c){var v=a.get(u);v&&(c.value=r(v))}else if(c===void 0){var h=a.get(u),f=h?.v;if(h!==void 0&&f!==Pt)return{enumerable:!0,configurable:!0,value:f,writable:!0}}return c},has(o,u){if(u===Sa)return!0;var c=a.get(u),v=c!==void 0&&c.v!==Pt||Reflect.has(o,u);if(c!==void 0||ot!==null&&(!v||yr(o,u)?.writable)){c===void 0&&(c=l(()=>{var f=v?mr(o[u]):Pt,p=Aa(f);return p}),a.set(u,c));var h=r(c);if(h===Pt)return!1}return v},set(o,u,c,v){var h=a.get(u),f=u in o;if(n&&u==="length")for(var p=c;p<h.v;p+=1){var E=a.get(p+"");E!==void 0?g(E,Pt):p in o&&(E=l(()=>Aa(Pt)),a.set(p+"",E))}if(h===void 0)(!f||yr(o,u)?.writable)&&(h=l(()=>Aa(void 0)),g(h,mr(c)),a.set(u,h));else{f=h.v!==Pt;var S=l(()=>mr(c));g(h,S)}var w=Reflect.getOwnPropertyDescriptor(o,u);if(w?.set&&w.set.call(v,c),!f){if(n&&typeof u=="string"){var x=a.get("length"),H=Number(u);Number.isInteger(H)&&H>=x.v&&g(x,H+1)}Fr(s)}return!0},ownKeys(o){r(s);var u=Reflect.ownKeys(o).filter(h=>{var f=a.get(h);return f===void 0||f.v!==Pt});for(var[c,v]of a)v.v!==Pt&&!(c in o)&&u.push(c);return u},setPrototypeOf(){Oo()}})}function Fs(e){try{if(e!==null&&typeof e=="object"&&Sa in e)return e[Sa]}catch{}return e}function bl(e,t){return Object.is(Fs(e),Fs(t))}var za,Ii,Ni,Di;function yl(){if(za===void 0){za=window,Ii=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,a=Text.prototype;Ni=yr(t,"firstChild").get,Di=yr(t,"nextSibling").get,Ns(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Ns(a)&&(a.__t=void 0)}}function Ta(e=""){return document.createTextNode(e)}function Ra(e){return Ni.call(e)}function an(e){return Di.call(e)}function d(e,t){return Ra(e)}function Ce(e,t=!1){{var a=Ra(e);return a instanceof Comment&&a.data===""?an(a):a}}function _(e,t=1,a=!1){let n=e;for(;t--;)n=an(n);return n}function wl(e){e.textContent=""}function Oi(){return!1}let qs=!1;function kl(){qs||(qs=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function xl(e,t,a,n=!0){n&&a();for(var s of t)e.addEventListener(s,a);rn(()=>{for(var i of t)e.removeEventListener(i,a)})}function dr(e){var t=st,a=ot;Ft(null),pa(null);try{return e()}finally{Ft(t),pa(a)}}function Fi(e,t,a,n=a){e.addEventListener(t,()=>dr(a));const s=e.__on_r;s?e.__on_r=()=>{s(),n(!0)}:e.__on_r=()=>n(!0),kl()}function qi(e){ot===null&&(st===null&&jo(),Ro()),vr&&zo()}function El(e,t){var a=t.last;a===null?t.last=t.first=e:(a.next=e,e.prev=a,t.last=e)}function _a(e,t,a){var n=ot;n!==null&&(n.f&Kt)!==0&&(e|=Kt);var s={ctx:ft,deps:null,nodes:null,f:e|Bt|ia,first:null,fn:t,last:null,next:null,parent:n,b:n&&n.b,prev:null,teardown:null,wv:0,ac:null};if(a)try{Er(s),s.f|=Cn}catch(o){throw qt(s),o}else t!==null&&sr(s);var i=s;if(a&&i.deps===null&&i.teardown===null&&i.nodes===null&&i.first===i.last&&(i.f&$r)===0&&(i=i.first,(e&ga)!==0&&(e&rr)!==0&&i!==null&&(i.f|=rr)),i!==null&&(i.parent=n,n!==null&&El(i,n),st!==null&&(st.f&$t)!==0&&(e&lr)===0)){var l=st;(l.effects??=[]).push(i)}return s}function Vr(){return st!==null&&!ua}function rn(e){const t=_a($n,null,!1);return Mt(t,Tt),t.teardown=e,t}function Zn(e){qi();var t=ot.f,a=!st&&(t&$a)!==0&&(t&Cn)===0;if(a){var n=ft;(n.e??=[]).push(e)}else return Bi(e)}function Bi(e){return _a(gs|xi,e,!1)}function Sl(e){return qi(),_a($n|xi,e,!0)}function Tl(e){va.ensure();const t=_a(lr|$r,e,!0);return(a={})=>new Promise(n=>{a.outro?Ga(t,()=>{qt(t),n(void 0)}):(qt(t),n(void 0))})}function Ot(e){return _a(gs,e,!1)}function re(e,t){var a=ft,n={effect:null,ran:!1,deps:e};a.l.$.push(n),n.effect=Cr(()=>{e(),!n.ran&&(n.ran=!0,b(t))})}function Ht(){var e=ft;Cr(()=>{for(var t of e.l.$){t.deps();var a=t.effect;(a.f&Tt)!==0&&Mt(a,oa),Pr(a)&&Er(a),t.ran=!1}})}function Ml(e){return _a(_s|$r,e,!0)}function Cr(e,t=0){return _a($n|t,e,!0)}function fe(e,t=[],a=[],n=[]){hl(n,t,a,s=>{_a($n,()=>e(...s.map(r)),!0)})}function ws(e,t=0){var a=_a(ga|t,e,!0);return a}function ea(e){return _a($a|$r,e,!0)}function Ui(e){var t=e.teardown;if(t!==null){const a=vr,n=st;Bs(!0),Ft(null);try{t.call(null)}finally{Bs(a),Ft(n)}}}function Yi(e,t=!1){var a=e.first;for(e.first=e.last=null;a!==null;){const s=a.ac;s!==null&&dr(()=>{s.abort(_r)});var n=a.next;(a.f&lr)!==0?a.parent=null:qt(a,t),a=n}}function $l(e){for(var t=e.first;t!==null;){var a=t.next;(t.f&$a)===0&&qt(t),t=a}}function qt(e,t=!0){var a=!1;(t||(e.f&ki)!==0)&&e.nodes!==null&&e.nodes.end!==null&&(Hi(e.nodes.start,e.nodes.end),a=!0),Yi(e,t&&!a),yn(e,0),Mt(e,Ea);var n=e.nodes&&e.nodes.t;if(n!==null)for(const i of n)i.stop();Ui(e);var s=e.parent;s!==null&&s.first!==null&&Vi(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function Hi(e,t){for(;e!==null;){var a=e===t?null:an(e);e.remove(),e=a}}function Vi(e){var t=e.parent,a=e.prev,n=e.next;a!==null&&(a.next=n),n!==null&&(n.prev=a),t!==null&&(t.first===e&&(t.first=n),t.last===e&&(t.last=a))}function Ga(e,t,a=!0){var n=[];Wi(e,n,!0);var s=()=>{a&&qt(e),t&&t()},i=n.length;if(i>0){var l=()=>--i||s();for(var o of n)o.out(l)}else s()}function Wi(e,t,a){if((e.f&Kt)===0){e.f^=Kt;var n=e.nodes&&e.nodes.t;if(n!==null)for(const o of n)(o.is_global||a)&&t.push(o);for(var s=e.first;s!==null;){var i=s.next,l=(s.f&rr)!==0||(s.f&$a)!==0&&(e.f&ga)!==0;Wi(s,t,l?a:!1),s=i}}}function ks(e){Qi(e,!0)}function Qi(e,t){if((e.f&Kt)!==0){e.f^=Kt,(e.f&Tt)===0&&(Mt(e,Bt),sr(e));for(var a=e.first;a!==null;){var n=a.next,s=(a.f&rr)!==0||(a.f&$a)!==0;Qi(a,s?t:!1),a=n}var i=e.nodes&&e.nodes.t;if(i!==null)for(const l of i)(l.is_global||t)&&l.in()}}function Xi(e,t){if(e.nodes)for(var a=e.nodes.start,n=e.nodes.end;a!==null;){var s=a===n?null:an(a);t.append(a),a=s}}let gr=null;function Al(e){var t=gr;try{if(gr=new Set,b(e),t!==null)for(var a of gr)t.add(a);return gr}finally{gr=t}}function Cl(e){for(var t of Al(e))or(t,t.v)}let Za=!1;function bn(e){Za=e}let vr=!1;function Bs(e){vr=e}let st=null,ua=!1;function Ft(e){st=e}let ot=null;function pa(e){ot=e}let Ma=null;function Ki(e){st!==null&&(Ma===null?Ma=[e]:Ma.push(e))}let zt=null,Vt=0,Zt=null;function Pl(e){Zt=e}let Gi=1,Wr=0,Ja=Wr;function Us(e){Ja=e}function Zi(){return++Gi}function Pr(e){var t=e.f;if((t&Bt)!==0)return!0;if(t&$t&&(e.f&=~nr),(t&oa)!==0){var a=e.deps;if(a!==null)for(var n=a.length,s=0;s<n;s++){var i=a[s];if(Pr(i)&&zi(i),i.wv>e.wv)return!0}(t&ia)!==0&&ta===null&&Mt(e,Tt)}return!1}function Ji(e,t,a=!0){var n=e.reactions;if(n!==null&&!Ma?.includes(e))for(var s=0;s<n.length;s++){var i=n[s];(i.f&$t)!==0?Ji(i,t,!1):t===i&&(a?Mt(i,Bt):(i.f&Tt)!==0&&Mt(i,oa),sr(i))}}function eo(e){var t=zt,a=Vt,n=Zt,s=st,i=Ma,l=ft,o=ua,u=Ja,c=e.f;zt=null,Vt=0,Zt=null,st=(c&($a|lr))===0?e:null,Ma=null,kr(e.ctx),ua=!1,Ja=++Wr,e.ac!==null&&(dr(()=>{e.ac.abort(_r)}),e.ac=null);try{e.f|=Xn;var v=e.fn,h=v(),f=e.deps;if(zt!==null){var p;if(yn(e,Vt),f!==null&&Vt>0)for(f.length=Vt+zt.length,p=0;p<zt.length;p++)f[Vt+p]=zt[p];else e.deps=f=zt;if(Vr()&&(e.f&ia)!==0)for(p=Vt;p<f.length;p++)(f[p].reactions??=[]).push(e)}else f!==null&&Vt<f.length&&(yn(e,Vt),f.length=Vt);if(en()&&Zt!==null&&!ua&&f!==null&&(e.f&($t|oa|Bt))===0)for(p=0;p<Zt.length;p++)Ji(Zt[p],e);return s!==null&&s!==e&&(Wr++,Zt!==null&&(n===null?n=Zt:n.push(...Zt))),(e.f&Da)!==0&&(e.f^=Da),h}catch(E){return $i(E)}finally{e.f^=Xn,zt=t,Vt=a,Zt=n,st=s,Ma=i,kr(l),ua=o,Ja=u}}function Ll(e,t){let a=t.reactions;if(a!==null){var n=Eo.call(a,e);if(n!==-1){var s=a.length-1;s===0?a=t.reactions=null:(a[n]=a[s],a.pop())}}a===null&&(t.f&$t)!==0&&(zt===null||!zt.includes(t))&&(Mt(t,oa),(t.f&ia)!==0&&(t.f^=ia,t.f&=~nr),Li(t),yn(t,0))}function yn(e,t){var a=e.deps;if(a!==null)for(var n=t;n<a.length;n++)Ll(e,a[n])}function Er(e){var t=e.f;if((t&Ea)===0){Mt(e,Tt);var a=ot,n=Za;ot=e,Za=!0;try{(t&(ga|Ao))!==0?$l(e):Yi(e),Ui(e);var s=eo(e);e.teardown=typeof s=="function"?s:null,e.wv=Gi;var i;Qn&&sl&&(e.f&Bt)!==0&&e.deps}finally{Za=n,ot=a}}}async function wr(){await Promise.resolve(),ll()}function r(e){var t=e.f,a=(t&$t)!==0;if(gr?.add(e),st!==null&&!ua){var n=ot!==null&&(ot.f&Ea)!==0;if(!n&&!Ma?.includes(e)){var s=st.deps;if((st.f&Xn)!==0)e.rv<Wr&&(e.rv=Wr,zt===null&&s!==null&&s[Vt]===e?Vt++:zt===null?zt=[e]:zt.includes(e)||zt.push(e));else{(st.deps??=[]).push(e);var i=e.reactions;i===null?e.reactions=[st]:i.includes(st)||i.push(st)}}}if(vr){if(Oa.has(e))return Oa.get(e);if(a){var l=e,o=l.v;return((l.f&Tt)===0&&l.reactions!==null||ao(l))&&(o=ys(l)),Oa.set(l,o),o}}else a&&(!ta?.has(e)||it?.is_fork&&!Vr())&&(l=e,Pr(l)&&zi(l),Za&&Vr()&&(l.f&ia)===0&&to(l));if(ta?.has(e))return ta.get(e);if((e.f&Da)!==0)throw e.v;return e.v}function to(e){if(e.deps!==null){e.f^=ia;for(const t of e.deps)(t.reactions??=[]).push(e),(t.f&$t)!==0&&(t.f&ia)===0&&to(t)}}function ao(e){if(e.v===Pt)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(Oa.has(t)||(t.f&$t)!==0&&ao(t))return!0;return!1}function b(e){var t=ua;try{return ua=!0,e()}finally{ua=t}}const zl=-7169;function Mt(e,t){e.f=e.f&zl|t}function R(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Sa in e)Jn(e);else if(!Array.isArray(e))for(let t in e){const a=e[t];typeof a=="object"&&a&&Sa in a&&Jn(a)}}}function Jn(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let n in e)try{Jn(e[n],t)}catch{}const a=ps(e);if(a!==Object.prototype&&a!==Array.prototype&&a!==Map.prototype&&a!==Set.prototype&&a!==Date.prototype){const n=yi(a);for(let s in n){const i=n[s].get;if(i)try{i.call(e)}catch{}}}}}const Rl=["touchstart","touchmove"];function jl(e){return Rl.includes(e)}const Il=new Set,Ys=new Set;function Nl(e,t,a,n={}){function s(i){if(n.capture||jr.call(t,i),!i.cancelBubble)return dr(()=>a?.call(this,i))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?cr(()=>{t.addEventListener(e,s,n)}):t.addEventListener(e,s,n),s}function M(e,t,a,n,s){var i={capture:n,passive:s},l=Nl(e,t,a,i);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&rn(()=>{t.removeEventListener(e,l,i)})}let Hs=null;function jr(e){var t=this,a=t.ownerDocument,n=e.type,s=e.composedPath?.()||[],i=s[0]||e.target;Hs=e;var l=0,o=Hs===e&&e.__root;if(o){var u=s.indexOf(o);if(u!==-1&&(t===document||t===window)){e.__root=t;return}var c=s.indexOf(t);if(c===-1)return;u<=c&&(l=u)}if(i=s[l]||e.target,i!==t){bi(e,"currentTarget",{configurable:!0,get(){return i||a}});var v=st,h=ot;Ft(null),pa(null);try{for(var f,p=[];i!==null;){var E=i.assignedSlot||i.parentNode||i.host||null;try{var S=i["__"+n];S!=null&&(!i.disabled||e.target===i)&&S.call(i,e)}catch(w){f?p.push(w):f=w}if(e.cancelBubble||E===t||E===null)break;i=E}if(f){for(let w of p)queueMicrotask(()=>{throw w});throw f}}finally{e.__root=t,delete e.currentTarget,Ft(v),pa(h)}}}function ro(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function Qr(e,t){var a=ot;a.nodes===null&&(a.nodes={start:e,end:t,a:null,t:null})}function k(e,t){var a=(t&el)!==0,n=(t&tl)!==0,s,i=!e.startsWith("<!>");return()=>{s===void 0&&(s=ro(i?e:"<!>"+e),a||(s=Ra(s)));var l=n||Ii?document.importNode(s,!0):s.cloneNode(!0);if(a){var o=Ra(l),u=l.lastChild;Qr(o,u)}else Qr(l,l);return l}}function Ca(e=""){{var t=Ta(e+"");return Qr(t,t),t}}function nt(){var e=document.createDocumentFragment(),t=document.createComment(""),a=Ta();return e.append(t,a),Qr(t,a),e}function m(e,t){e!==null&&e.before(t)}let es=!0;function ue(e,t){var a=t==null?"":typeof t=="object"?t+"":t;a!==(e.__t??=e.nodeValue)&&(e.__t=a,e.nodeValue=a+"")}function Dl(e,t){return Ol(e,t)}const ur=new Map;function Ol(e,{target:t,anchor:a,props:n={},events:s,context:i,intro:l=!0}){yl();var o=new Set,u=h=>{for(var f=0;f<h.length;f++){var p=h[f];if(!o.has(p)){o.add(p);var E=jl(p);t.addEventListener(p,jr,{passive:E});var S=ur.get(p);S===void 0?(document.addEventListener(p,jr,{passive:E}),ur.set(p,1)):ur.set(p,S+1)}}};u(Mn(Il)),Ys.add(u);var c=void 0,v=Tl(()=>{var h=a??t.appendChild(Ta());return ul(h,{pending:()=>{}},f=>{if(i){Et({});var p=ft;p.c=i}s&&(n.$$events=s),es=l,c=e(f,n)||{},es=!0,i&&St()}),()=>{for(var f of o){t.removeEventListener(f,jr);var p=ur.get(f);--p===0?(document.removeEventListener(f,jr),ur.delete(f)):ur.set(f,p)}Ys.delete(u),h!==a&&h.parentNode?.removeChild(h)}});return Fl.set(c,v),c}let Fl=new WeakMap;class ql{anchor;#e=new Map;#t=new Map;#a=new Map;#r=new Set;#l=!0;constructor(t,a=!0){this.anchor=t,this.#l=a}#s=()=>{var t=it;if(this.#e.has(t)){var a=this.#e.get(t),n=this.#t.get(a);if(n)ks(n),this.#r.delete(a);else{var s=this.#a.get(a);s&&(this.#t.set(a,s.effect),this.#a.delete(a),s.fragment.lastChild.remove(),this.anchor.before(s.fragment),n=s.effect)}for(const[i,l]of this.#e){if(this.#e.delete(i),i===t)break;const o=this.#a.get(l);o&&(qt(o.effect),this.#a.delete(l))}for(const[i,l]of this.#t){if(i===a||this.#r.has(i))continue;const o=()=>{if(Array.from(this.#e.values()).includes(i)){var c=document.createDocumentFragment();Xi(l,c),c.append(Ta()),this.#a.set(i,{effect:l,fragment:c})}else qt(l);this.#r.delete(i),this.#t.delete(i)};this.#l||!n?(this.#r.add(i),Ga(l,o,!1)):o()}}};#n=t=>{this.#e.delete(t);const a=Array.from(this.#e.values());for(const[n,s]of this.#a)a.includes(n)||(qt(s.effect),this.#a.delete(n))};ensure(t,a){var n=it,s=Oi();if(a&&!this.#t.has(t)&&!this.#a.has(t))if(s){var i=document.createDocumentFragment(),l=Ta();i.append(l),this.#a.set(t,{effect:ea(()=>a(l)),fragment:i})}else this.#t.set(t,ea(()=>a(this.anchor)));if(this.#e.set(n,t),s){for(const[o,u]of this.#t)o===t?n.skipped_effects.delete(u):n.skipped_effects.add(u);for(const[o,u]of this.#a)o===t?n.skipped_effects.delete(u.effect):n.skipped_effects.add(u.effect);n.oncommit(this.#s),n.ondiscard(this.#n)}else this.#s()}}function L(e,t,a=!1){var n=new ql(e),s=a?rr:0;function i(l,o){n.ensure(l,o)}ws(()=>{var l=!1;t((o,u=!0)=>{l=!0,i(u,o)}),l||i(!1,null)},s)}function ra(e,t){return t}function Bl(e,t,a){for(var n=[],s=t.length,i,l=t.length,o=0;o<s;o++){let h=t[o];Ga(h,()=>{if(i){if(i.pending.delete(h),i.done.add(h),i.pending.size===0){var f=e.outrogroups;ts(Mn(i.done)),f.delete(i),f.size===0&&(e.outrogroups=null)}}else l-=1},!1)}if(l===0){var u=n.length===0&&a!==null;if(u){var c=a,v=c.parentNode;wl(v),v.append(c),e.items.clear()}ts(t,!u)}else i={pending:new Set(t),done:new Set},(e.outrogroups??=new Set).add(i)}function ts(e,t=!0){for(var a=0;a<e.length;a++)qt(e[a],t)}var Vs;function wt(e,t,a,n,s,i=null){var l=e,o=new Map,u=(t&Ei)!==0;if(u){var c=e;l=c.appendChild(Ta())}var v=null,h=pt(()=>{var x=a();return Jr(x)?x:x==null?[]:Mn(x)}),f,p=!0;function E(){w.fallback=v,Ul(w,f,l,t,n),v!==null&&(f.length===0?(v.f&wa)===0?ks(v):(v.f^=wa,Ir(v,null,l)):Ga(v,()=>{v=null}))}var S=ws(()=>{f=r(h);for(var x=f.length,H=new Set,oe=it,J=Oi(),K=0;K<x;K+=1){var pe=f[K],N=n(pe,K),B=p?null:o.get(N);B?(B.v&&or(B.v,pe),B.i&&or(B.i,K),J&&oe.skipped_effects.delete(B.e)):(B=Yl(o,p?l:Vs??=Ta(),pe,N,K,s,t,a),p||(B.e.f|=wa),o.set(N,B)),H.add(N)}if(x===0&&i&&!v&&(p?v=ea(()=>i(l)):(v=ea(()=>i(Vs??=Ta())),v.f|=wa)),!p)if(J){for(const[D,U]of o)H.has(D)||oe.skipped_effects.add(U.e);oe.oncommit(E),oe.ondiscard(()=>{})}else E();r(h)}),w={effect:S,items:o,outrogroups:null,fallback:v};p=!1}function Ul(e,t,a,n,s){var i=(n&Yo)!==0,l=t.length,o=e.items,u=e.effect.first,c,v=null,h,f=[],p=[],E,S,w,x;if(i)for(x=0;x<l;x+=1)E=t[x],S=s(E,x),w=o.get(S).e,(w.f&wa)===0&&(w.nodes?.a?.measure(),(h??=new Set).add(w));for(x=0;x<l;x+=1){if(E=t[x],S=s(E,x),w=o.get(S).e,e.outrogroups!==null)for(const U of e.outrogroups)U.pending.delete(w),U.done.delete(w);if((w.f&wa)!==0)if(w.f^=wa,w===u)Ir(w,null,a);else{var H=v?v.next:u;w===e.effect.last&&(e.effect.last=w.prev),w.prev&&(w.prev.next=w.next),w.next&&(w.next.prev=w.prev),Pa(e,v,w),Pa(e,w,H),Ir(w,H,a),v=w,f=[],p=[],u=v.next;continue}if((w.f&Kt)!==0&&(ks(w),i&&(w.nodes?.a?.unfix(),(h??=new Set).delete(w))),w!==u){if(c!==void 0&&c.has(w)){if(f.length<p.length){var oe=p[0],J;v=oe.prev;var K=f[0],pe=f[f.length-1];for(J=0;J<f.length;J+=1)Ir(f[J],oe,a);for(J=0;J<p.length;J+=1)c.delete(p[J]);Pa(e,K.prev,pe.next),Pa(e,v,K),Pa(e,pe,oe),u=oe,v=pe,x-=1,f=[],p=[]}else c.delete(w),Ir(w,u,a),Pa(e,w.prev,w.next),Pa(e,w,v===null?e.effect.first:v.next),Pa(e,v,w),v=w;continue}for(f=[],p=[];u!==null&&u!==w;)(c??=new Set).add(u),p.push(u),u=u.next;if(u===null)continue}(w.f&wa)===0&&f.push(w),v=w,u=w.next}if(e.outrogroups!==null){for(const U of e.outrogroups)U.pending.size===0&&(ts(Mn(U.done)),e.outrogroups?.delete(U));e.outrogroups.size===0&&(e.outrogroups=null)}if(u!==null||c!==void 0){var N=[];if(c!==void 0)for(w of c)(w.f&Kt)===0&&N.push(w);for(;u!==null;)(u.f&Kt)===0&&u!==e.fallback&&N.push(u),u=u.next;var B=N.length;if(B>0){var D=(n&Ei)!==0&&l===0?a:null;if(i){for(x=0;x<B;x+=1)N[x].nodes?.a?.measure();for(x=0;x<B;x+=1)N[x].nodes?.a?.fix()}Bl(e,N,D)}}i&&cr(()=>{if(h!==void 0)for(w of h)w.nodes?.a?.apply()})}function Yl(e,t,a,n,s,i,l,o){var u=(l&Bo)!==0?(l&Ho)===0?T(a,!1,!1):ir(a):null,c=(l&Uo)!==0?ir(s):null;return{v:u,i:c,e:ea(()=>(i(t,u??a,c??s,o),()=>{e.delete(n)}))}}function Ir(e,t,a){if(e.nodes)for(var n=e.nodes.start,s=e.nodes.end,i=t&&(t.f&wa)===0?t.nodes.start:a;n!==null;){var l=an(n);if(i.before(n),n===s)return;n=l}}function Pa(e,t,a){t===null?e.effect.first=a:t.next=a,a===null?e.effect.last=t:a.prev=t}function ee(e,t,a=!1,n=!1,s=!1){var i=e,l="";fe(()=>{var o=ot;if(l!==(l=t()??"")&&(o.nodes!==null&&(Hi(o.nodes.start,o.nodes.end),o.nodes=null),l!=="")){var u=l+"";a?u=`<svg>${u}</svg>`:n&&(u=`<math>${u}</math>`);var c=ro(u);if((a||n)&&(c=Ra(c)),Qr(Ra(c),c.lastChild),a||n)for(;Ra(c);)i.before(Ra(c));else i.before(c)}})}function Nr(e,t,a,n,s){var i=t.$$slots?.[a],l=!1;i===!0&&(i=t[a==="default"?"children":a],l=!0),i===void 0||i(e,l?()=>n:n)}const Hl=()=>performance.now(),ya={tick:e=>requestAnimationFrame(e),now:()=>Hl(),tasks:new Set};function no(){const e=ya.now();ya.tasks.forEach(t=>{t.c(e)||(ya.tasks.delete(t),t.f())}),ya.tasks.size!==0&&ya.tick(no)}function Vl(e){let t;return ya.tasks.size===0&&ya.tick(no),{promise:new Promise(a=>{ya.tasks.add(t={c:e,f:a})}),abort(){ya.tasks.delete(t)}}}function ln(e,t){dr(()=>{e.dispatchEvent(new CustomEvent(t))})}function Wl(e){if(e==="float")return"cssFloat";if(e==="offset")return"cssOffset";if(e.startsWith("--"))return e;const t=e.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(a=>a[0].toUpperCase()+a.slice(1)).join("")}function Ws(e){const t={},a=e.split(";");for(const n of a){const[s,i]=n.split(":");if(!s||i===void 0)break;const l=Wl(s.trim());t[l]=i.trim()}return t}const Ql=e=>e;function ut(e,t,a,n){var s=(e&Go)!==0,i=(e&Zo)!==0,l=s&&i,o=(e&Jo)!==0,u=l?"both":s?"in":"out",c,v=t.inert,h=t.style.overflow,f,p;function E(){return dr(()=>c??=a()(t,n?.()??{},{direction:u}))}var S={is_global:o,in(){if(t.inert=v,!s){p?.abort(),p?.reset?.();return}i||f?.abort(),ln(t,"introstart"),f=as(t,E(),p,1,()=>{ln(t,"introend"),f?.abort(),f=c=void 0,t.style.overflow=h})},out(oe){if(!i){oe?.(),c=void 0;return}t.inert=!0,ln(t,"outrostart"),p=as(t,E(),f,0,()=>{ln(t,"outroend"),oe?.()})},stop:()=>{f?.abort(),p?.abort()}},w=ot;if((w.nodes.t??=[]).push(S),s&&es){var x=o;if(!x){for(var H=w.parent;H&&(H.f&rr)!==0;)for(;(H=H.parent)&&(H.f&ga)===0;);x=!H||(H.f&Cn)!==0}x&&Ot(()=>{b(()=>S.in())})}}function as(e,t,a,n,s){var i=n===1;if(Mo(t)){var l,o=!1;return cr(()=>{if(!o){var w=t({direction:i?"in":"out"});l=as(e,w,a,n,s)}}),{abort:()=>{o=!0,l?.abort()},deactivate:()=>l.deactivate(),reset:()=>l.reset(),t:()=>l.t()}}if(a?.deactivate(),!t?.duration)return s(),{abort:Qt,deactivate:Qt,reset:Qt,t:()=>n};const{delay:u=0,css:c,tick:v,easing:h=Ql}=t;var f=[];if(i&&a===void 0&&(v&&v(0,1),c)){var p=Ws(c(0,1));f.push(p,p)}var E=()=>1-n,S=e.animate(f,{duration:u,fill:"forwards"});return S.onfinish=()=>{S.cancel();var w=a?.t()??1-n;a?.abort();var x=n-w,H=t.duration*Math.abs(x),oe=[];if(H>0){var J=!1;if(c)for(var K=Math.ceil(H/16.666666666666668),pe=0;pe<=K;pe+=1){var N=w+x*h(pe/K),B=Ws(c(N,1-N));oe.push(B),J||=B.overflow==="hidden"}J&&(e.style.overflow="hidden"),E=()=>{var D=S.currentTime;return w+x*h(D/H)},v&&Vl(()=>{if(S.playState!=="running")return!1;var D=E();return v(D,1-D),!0})}S=e.animate(oe,{duration:H,fill:"forwards"}),S.onfinish=()=>{E=()=>n,v?.(n,1-n),s()}},{abort:()=>{S&&(S.cancel(),S.effect=null,S.onfinish=Qt)},deactivate:()=>{s=Qt},reset:()=>{n===0&&v?.(1,0)},t:()=>E()}}function xs(e,t,a){Ot(()=>{var n=b(()=>t(e,a?.())||{});if(a&&n?.update){var s=!1,i={};Cr(()=>{var l=a();R(l),s&&bs(i,l)&&(i=l,n.update(l))}),s=!0}if(n?.destroy)return()=>n.destroy()})}const Qs=[...` 	
\r\fÂ \v\uFEFF`];function Xl(e,t,a){var n=e==null?"":""+e;if(t&&(n=n?n+" "+t:t),a){for(var s in a)if(a[s])n=n?n+" "+s:s;else if(n.length)for(var i=s.length,l=0;(l=n.indexOf(s,l))>=0;){var o=l+i;(l===0||Qs.includes(n[l-1]))&&(o===n.length||Qs.includes(n[o]))?n=(l===0?"":n.substring(0,l))+n.substring(o+1):l=o}}return n===""?null:n}function Xs(e,t=!1){var a=t?" !important;":";",n="";for(var s in e){var i=e[s];i!=null&&i!==""&&(n+=" "+s+": "+i+a)}return n}function Dn(e){return e[0]!=="-"||e[1]!=="-"?e.toLowerCase():e}function Kl(e,t){if(t){var a="",n,s;if(Array.isArray(t)?(n=t[0],s=t[1]):n=t,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var i=!1,l=0,o=!1,u=[];n&&u.push(...Object.keys(n).map(Dn)),s&&u.push(...Object.keys(s).map(Dn));var c=0,v=-1;const S=e.length;for(var h=0;h<S;h++){var f=e[h];if(o?f==="/"&&e[h-1]==="*"&&(o=!1):i?i===f&&(i=!1):f==="/"&&e[h+1]==="*"?o=!0:f==='"'||f==="'"?i=f:f==="("?l++:f===")"&&l--,!o&&i===!1&&l===0){if(f===":"&&v===-1)v=h;else if(f===";"||h===S-1){if(v!==-1){var p=Dn(e.substring(c,v).trim());if(!u.includes(p)){f!==";"&&h++;var E=e.substring(c,h).trim();a+=" "+E+";"}}c=h+1,v=-1}}}}return n&&(a+=Xs(n)),s&&(a+=Xs(s,!0)),a=a.trim(),a===""?null:a}return e==null?null:String(e)}function Ke(e,t,a,n,s,i){var l=e.__className;if(l!==a||l===void 0){var o=Xl(a,n,i);o==null?e.removeAttribute("class"):e.className=o,e.__className=a}else if(i&&s!==i)for(var u in i){var c=!!i[u];(s==null||c!==!!s[u])&&e.classList.toggle(u,c)}return i}function On(e,t={},a,n){for(var s in a){var i=a[s];t[s]!==i&&(a[s]==null?e.style.removeProperty(s):e.style.setProperty(s,i,n))}}function ht(e,t,a,n){var s=e.__style;if(s!==t){var i=Kl(t,n);i==null?e.removeAttribute("style"):e.style.cssText=i,e.__style=t}else n&&(Array.isArray(n)?(On(e,a?.[0],n[0]),On(e,a?.[1],n[1],"important")):On(e,a,n));return n}function so(e,t,a=!1){if(e.multiple){if(t==null)return;if(!Jr(t))return rl();for(var n of e.options)n.selected=t.includes(qr(n));return}for(n of e.options){var s=qr(n);if(bl(s,t)){n.selected=!0;return}}(!a||t!==void 0)&&(e.selectedIndex=-1)}function Gl(e){var t=new MutationObserver(()=>{so(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),rn(()=>{t.disconnect()})}function Zl(e,t,a=t){var n=new WeakSet,s=!0;Fi(e,"change",i=>{var l=i?"[selected]":":checked",o;if(e.multiple)o=[].map.call(e.querySelectorAll(l),qr);else{var u=e.querySelector(l)??e.querySelector("option:not([disabled])");o=u&&qr(u)}a(o),it!==null&&n.add(it)}),Ot(()=>{var i=t();if(e===document.activeElement){var l=Dr??it;if(n.has(l))return}if(so(e,i,s),s&&i===void 0){var o=e.querySelector(":checked");o!==null&&(i=qr(o),a(i))}e.__value=i,s=!1}),Gl(e)}function qr(e){return"__value"in e?e.__value:e.value}const Jl=Symbol("is custom element"),ec=Symbol("is html");function io(e,t){var a=oo(e);a.value===(a.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!=="PROGRESS")||(e.value=t??"")}function Ut(e,t,a,n){var s=oo(e);s[t]!==(s[t]=a)&&(t==="loading"&&(e[Po]=a),a==null?e.removeAttribute(t):typeof a!="string"&&tc(e).includes(t)?e[t]=a:e.setAttribute(t,a))}function oo(e){return e.__attributes??={[Jl]:e.nodeName.includes("-"),[ec]:e.namespaceURI===al}}var Ks=new Map;function tc(e){var t=e.getAttribute("is")||e.nodeName,a=Ks.get(t);if(a)return a;Ks.set(t,a=[]);for(var n,s=e,i=Element.prototype;i!==s;){n=yi(s);for(var l in n)n[l].set&&a.push(l);s=ps(s)}return a}function er(e,t,a=t){var n=new WeakSet;Fi(e,"input",async s=>{var i=s?e.defaultValue:e.value;if(i=Fn(e)?qn(i):i,a(i),it!==null&&n.add(it),await wr(),i!==(i=t())){var l=e.selectionStart,o=e.selectionEnd,u=e.value.length;if(e.value=i??"",o!==null){var c=e.value.length;l===o&&o===u&&c>u?(e.selectionStart=c,e.selectionEnd=c):(e.selectionStart=l,e.selectionEnd=Math.min(o,c))}}}),b(t)==null&&e.value&&(a(Fn(e)?qn(e.value):e.value),it!==null&&n.add(it)),Cr(()=>{var s=t();if(e===document.activeElement){var i=Dr??it;if(n.has(i))return}Fn(e)&&s===qn(e.value)||e.type==="date"&&!s&&!e.value||s!==e.value&&(e.value=s??"")})}function Fn(e){var t=e.type;return t==="number"||t==="range"}function qn(e){return e===""?null:+e}class Es{#e=new WeakMap;#t;#a;static entries=new WeakMap;constructor(t){this.#a=t}observe(t,a){var n=this.#e.get(t)||new Set;return n.add(a),this.#e.set(t,n),this.#r().observe(t,this.#a),()=>{var s=this.#e.get(t);s.delete(a),s.size===0&&(this.#e.delete(t),this.#t.unobserve(t))}}#r(){return this.#t??(this.#t=new ResizeObserver(t=>{for(var a of t){Es.entries.set(a.target,a);for(var n of this.#e.get(a.target)||[])n(a)}}))}}var ac=new Es({box:"border-box"});function Gs(e,t,a){var n=ac.observe(e,()=>a(e[t]));Ot(()=>(b(()=>a(e[t])),n))}function Zs(e,t){return e===t||e?.[Sa]===t}function Ba(e={},t,a,n){return Ot(()=>{var s,i;return Cr(()=>{s=i,i=[],b(()=>{e!==a(...i)&&(t(e,...i),s&&Zs(a(...s),e)&&t(null,...s))})}),()=>{cr(()=>{i&&Zs(a(...i),e)&&t(null,...i)})}}),e}function Js(e,t){xl(window,["resize"],()=>dr(()=>t(window[e])))}function Xt(e){return function(...t){var a=t[0];return a.stopPropagation(),e?.apply(this,t)}}function At(e=!1){const t=ft,a=t.l.u;if(!a)return;let n=()=>R(t.s);if(e){let s=0,i={};const l=tn(()=>{let o=!1;const u=t.s;for(const c in u)u[c]!==i[c]&&(i[c]=u[c],o=!0);return o&&s++,s});n=()=>r(l)}a.b.length&&Sl(()=>{ei(t,n),_n(a.b)}),Zn(()=>{const s=b(()=>a.m.map($o));return()=>{for(const i of s)typeof i=="function"&&i()}}),a.a.length&&Zn(()=>{ei(t,n),_n(a.a)})}function ei(e,t){if(e.l.s)for(const a of e.l.s)r(a);t()}function Xr(e,t){var a=e.$$events?.[t.type],n=Jr(a)?a.slice():a==null?[]:[a];for(var s of n)s.call(this,t)}function Ss(e,t,a){if(e==null)return t(void 0),a&&a(void 0),Qt;const n=b(()=>e.subscribe(t,a));return n.unsubscribe?()=>n.unsubscribe():n}const fr=[];function rc(e,t){return{subscribe:Be(e,t).subscribe}}function Be(e,t=Qt){let a=null;const n=new Set;function s(o){if(bs(e,o)&&(e=o,a)){const u=!fr.length;for(const c of n)c[1](),fr.push(c,e);if(u){for(let c=0;c<fr.length;c+=2)fr[c][0](fr[c+1]);fr.length=0}}}function i(o){s(o(e))}function l(o,u=Qt){const c=[o,u];return n.add(c),n.size===1&&(a=t(s,i)||Qt),o(e),()=>{n.delete(c),n.size===0&&a&&(a(),a=null)}}return{set:s,update:i,subscribe:l}}function lo(e,t,a){const n=!Array.isArray(e),s=n?[e]:e;if(!s.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const i=t.length<2;return rc(a,(l,o)=>{let u=!1;const c=[];let v=0,h=Qt;const f=()=>{if(v)return;h();const E=t(n?c[0]:c,l,o);i?l(E):h=typeof E=="function"?E:Qt},p=s.map((E,S)=>Ss(E,w=>{c[S]=w,v&=~(1<<S),u&&f()},()=>{v|=1<<S}));return u=!0,f(),function(){_n(p),h(),u=!1}})}function et(e){let t;return Ss(e,a=>t=a)(),t}let cn=!1,rs=Symbol();function xe(e,t,a){const n=a[t]??={store:null,source:T(void 0),unsubscribe:Qt};if(n.store!==e&&!(rs in a))if(n.unsubscribe(),n.store=e??null,e==null)n.source.v=void 0,n.unsubscribe=Qt;else{var s=!0;n.unsubscribe=Ss(e,i=>{s?n.source.v=i:g(n.source,i)}),s=!1}return e&&rs in a?et(e):r(n.source)}function ti(e,t){return e.set(t),t}function jt(){const e={};function t(){rn(()=>{for(var a in e)e[a].unsubscribe();bi(e,rs,{enumerable:!1,value:!0})})}return[e,t]}function nc(e,t,a){return e.set(a),t}function sc(e){var t=cn;try{return cn=!1,[e(),cn]}finally{cn=t}}function mt(e,t,a,n){var s=!Ar||(a&Wo)!==0,i=(a&Xo)!==0,l=(a&Ko)!==0,o=n,u=!0,c=()=>(u&&(u=!1,o=l?b(n):n),o),v;if(i){var h=Sa in e||Co in e;v=yr(e,t)?.set??(h&&t in e?oe=>e[t]=oe:void 0)}var f,p=!1;i?[f,p]=sc(()=>e[t]):f=e[t],f===void 0&&n!==void 0&&(f=c(),v&&(s&&No(),v(f)));var E;if(s?E=()=>{var oe=e[t];return oe===void 0?c():(u=!0,oe)}:E=()=>{var oe=e[t];return oe!==void 0&&(o=void 0),oe===void 0?o:oe},s&&(a&Qo)===0)return E;if(v){var S=e.$$legacy;return(function(oe,J){return arguments.length>0?((!s||!J||S||p)&&v(J?E():oe),oe):E()})}var w=!1,x=((a&Vo)!==0?tn:pt)(()=>(w=!1,E()));i&&r(x);var H=ot;return(function(oe,J){if(arguments.length>0){const K=J?r(x):s&&i?mr(oe):oe;return g(x,K),w=!0,o!==void 0&&(o=K),oe}return vr&&w||(H.f&Ea)!==0?x.v:r(x)})}function Ya(e){ft===null&&ms(),Ar&&ft.l!==null?oc(ft).m.push(e):Zn(()=>{const t=b(e);if(typeof t=="function")return t})}function co(e){ft===null&&ms(),Ya(()=>()=>b(e))}function ic(e,t,{bubbles:a=!1,cancelable:n=!1}={}){return new CustomEvent(e,{detail:t,bubbles:a,cancelable:n})}function Ts(){const e=ft;return e===null&&ms(),(t,a,n)=>{const s=e.s.$$events?.[t];if(s){const i=Jr(s)?s.slice():[s],l=ic(t,a,n);for(const o of i)o.call(e.x,l);return!l.defaultPrevented}return!0}}function oc(e){var t=e.l;return t.u??={a:[],b:[],m:[]}}const lc="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(lc);il();const cc=e=>e;function vo(e){const t=e-1;return t*t*t+1}function ai(e){const t=typeof e=="string"&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[e,"px"]}function yt(e,{delay:t=0,duration:a=400,easing:n=cc}={}){const s=+getComputedStyle(e).opacity;return{delay:t,duration:a,easing:n,css:i=>`opacity: ${i*s}`}}function uo(e,{delay:t=0,duration:a=400,easing:n=vo,x:s=0,y:i=0,opacity:l=0}={}){const o=getComputedStyle(e),u=+o.opacity,c=o.transform==="none"?"":o.transform,v=u*(1-l),[h,f]=ai(s),[p,E]=ai(i);return{delay:t,duration:a,easing:n,css:(S,w)=>`
			transform: ${c} translate(${(1-S)*h}${f}, ${(1-S)*p}${E});
			opacity: ${u-v*w}`}}function Ms(e,{delay:t=0,duration:a=400,easing:n=vo,start:s=0,opacity:i=0}={}){const l=getComputedStyle(e),o=+l.opacity,u=l.transform==="none"?"":l.transform,c=1-s,v=o*(1-i);return{delay:t,duration:a,easing:n,css:(h,f)=>`
			transform: ${u} scale(${1-c*f});
			opacity: ${o-v*f}
		`}}const dc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-arrows-shuffle-2"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 4l3 3l-3 3" /><path d="M18 20l3 -3l-3 -3" /><path d="M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5" /><path d="M3 17h3a5 5 0 0 0 5 -5a5 5 0 0 1 5 -5h5" /></svg>',vc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-deezer"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 16.5h2v.5h-2z" /><path d="M8 16.5h2.5v.5h-2.5z" /><path d="M16 17h-2.5v-.5h2.5z" /><path d="M21.5 17h-2.5v-.5h2.5z" /><path d="M21.5 13h-2.5v.5h2.5z" /><path d="M21.5 9.5h-2.5v.5h2.5z" /><path d="M21.5 6h-2.5v.5h2.5z" /><path d="M16 13h-2.5v.5h2.5z" /><path d="M8 13.5h2.5v-.5h-2.5z" /><path d="M8 9.5h2.5v.5h-2.5z" /></svg>',uc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-compact-down"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 11l8 3l8 -3" /></svg>',fc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-compact-left"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M13 20l-3 -8l3 -8" /></svg>',hc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-left"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 6l-6 6l6 6" /></svg>',ri='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-disc"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0" /><path d="M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M7 12a5 5 0 0 1 5 -5" /><path d="M12 17a5 5 0 0 0 5 -5" /></svg>',pc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-grip-horizontal"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M5 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M12 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M12 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M19 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M19 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /></svg>',gc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-heart"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M19.5 12.572l-7.5 7.428l-7.5 -7.428a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572" /></svg>',_c='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-heart"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6.979 3.074a6 6 0 0 1 4.988 1.425l.037 .033l.034 -.03a6 6 0 0 1 4.733 -1.44l.246 .036a6 6 0 0 1 3.364 10.008l-.18 .185l-.048 .041l-7.45 7.379a1 1 0 0 1 -1.313 .082l-.094 -.082l-7.493 -7.422a6 6 0 0 1 3.176 -10.215z" /></svg>',mc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-menu-2"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 6l16 0" /><path d="M4 12l16 0" /><path d="M4 18l16 0" /></svg>',Bn='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-music"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 17a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /><path d="M13 17a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /><path d="M9 17v-13h10v13" /><path d="M9 8h10" /></svg>',bc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-pause"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z" /><path d="M17 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z" /></svg>',yc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-player-play"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 4v16l13 -8z" /></svg>',wc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-play"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 4v16a1 1 0 0 0 1.524 .852l13 -8a1 1 0 0 0 0 -1.704l-13 -8a1 1 0 0 0 -1.524 .852z" /></svg>',kc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-skip-back"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M19.496 4.136l-12 7a1 1 0 0 0 0 1.728l12 7a1 1 0 0 0 1.504 -.864v-14a1 1 0 0 0 -1.504 -.864z" /><path d="M4 4a1 1 0 0 1 .993 .883l.007 .117v14a1 1 0 0 1 -1.993 .117l-.007 -.117v-14a1 1 0 0 1 1 -1z" /></svg>',xc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-skip-forward"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 5v14a1 1 0 0 0 1.504 .864l12 -7a1 1 0 0 0 0 -1.728l-12 -7a1 1 0 0 0 -1.504 .864z" /><path d="M20 4a1 1 0 0 1 .993 .883l.007 .117v14a1 1 0 0 1 -1.993 .117l-.007 -.117v-14a1 1 0 0 1 1 -1z" /></svg>',Ec='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-playlist"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0" /><path d="M17 17v-13h4" /><path d="M13 5h-10" /><path d="M3 9l10 0" /><path d="M9 13h-6" /></svg>',Sc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-radio"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3l-9.371 3.749a1 1 0 0 0 -.629 .928v11.323a1 1 0 0 0 1 1h14a1 1 0 0 0 1 -1v-11a1 1 0 0 0 -1 -1h-14.5" /><path d="M4 12h16" /><path d="M7 12v-2" /><path d="M17 16v.01" /><path d="M13 16v.01" /></svg>',Tc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-refresh"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4" /><path d="M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4" /></svg>',Mc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-repeat"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 12v-3a3 3 0 0 1 3 -3h13m-3 -3l3 3l-3 3" /><path d="M20 12v3a3 3 0 0 1 -3 3h-13m3 3l-3 -3l3 -3" /></svg>',$c='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-search"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0" /><path d="M21 21l-6 -6" /></svg>',Ac='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-settings"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z" /><path d="M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /></svg>',Cc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-trash"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 7l16 0" /><path d="M10 11l0 6" /><path d="M14 11l0 6" /><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12" /><path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3" /></svg>',Pc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 8a5 5 0 0 1 0 8" /><path d="M17.7 5a9 9 0 0 1 0 14" /><path d="M6 15h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l3.5 -4.5a.8 .8 0 0 1 1.5 .5v14a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5" /></svg>',Lc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume-2"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 8a5 5 0 0 1 0 8" /><path d="M6 15h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l3.5 -4.5a.8 .8 0 0 1 1.5 .5v14a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5" /></svg>',zc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume-3"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 15h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l3.5 -4.5a.8 .8 0 0 1 1.5 .5v14a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5" /><path d="M16 10l4 4m0 -4l-4 4" /></svg>',Rc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume-off"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 8a5 5 0 0 1 1.912 4.934m-1.377 2.602a5 5 0 0 1 -.535 .464" /><path d="M17.7 5a9 9 0 0 1 2.362 11.086m-1.676 2.299a9 9 0 0 1 -.686 .615" /><path d="M9.069 5.054l.431 -.554a.8 .8 0 0 1 1.5 .5v2m0 4v8a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l1.294 -1.664" /><path d="M3 3l18 18" /></svg>',jc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-x"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 6l-12 12" /><path d="M6 6l12 12" /></svg>',Ic='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-device-floppy"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2" /><path d="M12 14m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0" /><path d="M14 4l0 4l-6 0l0 -4" /></svg>',Nc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-file-pencil"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3v4a1 1 0 0 0 1 1h4" /><path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z" /><path d="M10 18l5 -5a1.414 1.414 0 0 0 -2 -2l-5 5v2h2z" /></svg>',ni='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-plus"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 5l0 14" /><path d="M5 12l14 0" /></svg>',Dc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-circle-check"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0" /><path d="M9 12l2 2l4 -4" /></svg>',Oc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-dots"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /></svg>',Fc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-sort-descending"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 6l9 0" /><path d="M4 12l7 0" /><path d="M4 18l7 0" /><path d="M15 15l3 3l3 -3" /><path d="M18 6l0 12" /></svg>',qc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-sort-ascending"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 6l7 0" /><path d="M4 12l7 0" /><path d="M4 18l9 0" /><path d="M15 9l3 -3l3 3" /><path d="M18 6l0 12" /></svg>',Bc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-yandex"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 20v-16h-2a4 4 0 0 0 -4 4v1a4 4 0 0 0 4 4h2" /><path d="M9 20l3 -7" /></svg>',y={ARTISTS:Bn,ALBUMS:ri,GENRES:Bn,PLAYLISTS:Ec,RADIO:Sc,SEARCH:$c,PLAY:wc,PLAY_OUTLINE:yc,PAUSE:bc,PREVIOUS:kc,NEXT:xc,SHUFFLE:dc,REPEAT:Mc,VOLUME_FULL:Pc,VOLUME_MEDIUM:Lc,VOLUME_MUTE:zc,VOLUME_OFF:Rc,HEART:gc,HEART_FILLED:_c,SYNC:Tc,SETTINGS:Ac,CLOSE:jc,MENU:mc,BACK:hc,BACK_COMPACT:fc,CHEVRON_DOWN:uc,DRAG_HANDLE:pc,REMOVE:Cc,DEEZER:vc,SAVE:Ic,EDIT:Nc,ADD:ni,ACCEPT:Dc,DOTS:Oc,ADD_TO_PLAYLIST:ni,ALBUM_LINK:ri,ARTIST_LINK:Bn,SORT_DESC:Fc,SORT_ASC:qc,YANDEX:Bc};function Sr(e){if(!e||!e.image)return null;if(e.image.startsWith("http"))return e.image;let t="";return e.image==="local"?t=`${e.name}.jpg`:t=e.image,`/imagesw/radio-logos/thumbs/${encodeURIComponent(t)}`}function si(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}const ns=[{id:"default",label:"Default (Moode Dark)",colors:{"--c-white-10":"rgba(255, 255, 255, 0.1)","--c-white-20":"rgba(255, 255, 255, 0.2)","--c-white-30":"rgba(255, 255, 255, 0.3)","--c-white-50":"rgba(255, 255, 255, 0.5)","--c-white-60":"rgba(255, 255, 255, 0.6)","--c-white-90":"rgba(255, 255, 255, 0.9)","--c-black-20":"rgba(0, 0, 0, 0.2)","--c-black-50":"rgba(0, 0, 0, 0.5)","--c-black-70":"rgba(0, 0, 0, 0.7)","--c-black-80":"rgba(0, 0, 0, 0.8)","--c-black-90":"rgba(0, 0, 0, 0.9)","--c-accent":"#fa2d48","--c-accent-hover":"#ff4d65","--c-text-primary":"#ffffff","--c-text-secondary":"rgba(255, 255, 255, 0.6)","--c-text-muted":"#888888","--c-text-inverse":"#000000","--c-bg-app":"#000000","--c-bg-main":"#121212","--c-bg-sidebar":"#000000","--c-bg-card":"#1a1a1a","--c-bg-placeholder":"rgba(255, 255, 255, 0.1)","--c-bg-glass":"rgba(18, 18, 18, 0.95)","--c-bg-toast":"#333333","--c-heart":"#ff4444","--c-error":"#ff4444","--c-surface-hover":"rgba(255, 255, 255, 0.1)","--c-surface-active":"rgba(255, 255, 255, 0.2)","--c-surface-input":"#1a1a1a","--c-surface-input-focus":"rgba(255, 255, 255, 0.1)","--c-surface-button":"rgba(255, 255, 255, 0.1)","--c-surface-button-hover":"rgba(255, 255, 255, 0.1)","--c-surface-drag-phantom":"#1a1a1a","--c-surface-drag-land":"rgba(255, 255, 255, 0.1)","--c-rail-bg":"rgba(255, 255, 255, 0.2)","--c-rail-bg-hover":"rgba(255, 255, 255, 0.3)","--c-skeleton-base":"rgba(255, 255, 255, 0.1)","--c-border":"rgba(255, 255, 255, 0.1)","--c-border-dim":"rgba(255, 255, 255, 0.1)","--c-border-bright":"rgba(255, 255, 255, 0.2)","--c-border-dashed":"rgba(255, 255, 255, 0.2)","--c-border-dashed-hover":"rgba(255, 255, 255, 0.5)","--c-overlay-dim":"rgba(0, 0, 0, 0.5)","--c-overlay-backdrop":"rgba(0, 0, 0, 0.8)","--c-shadow-card":"rgba(0, 0, 0, 0.3)","--c-shadow-popover":"rgba(0, 0, 0, 0.5)","--c-shadow-header":"rgba(0, 0, 0, 0.5)","--c-shadow-phantom":"rgba(0, 0, 0, 0.7)","--c-shadow-glow-accent":"rgba(250, 45, 72, 0.5)","--c-icon-idle":"#9ca3af","--c-icon-hover":"#ffffff","--c-icon-faint":"rgba(255, 255, 255, 0.5)","--icon-stroke-width":"1.5px","--header-height":"64px","--mini-player-height":"90px","--sidebar-width":"260px","--radius-sm":"4px","--radius-md":"8px","--radius-lg":"12px","--radius-xl":"20px","--radius-full":"9999px","--z-base":"1","--z-dock":"1000","--z-modal":"2000","--z-toast":"3000","--z-drag-item":"9999","--trans-fast":"0.2s ease","--trans-smooth":"0.3s cubic-bezier(0.2, 0.8, 0.2, 1)","--c-pl-0":"#fa2d48","--c-pl-1":"#2d7afa","--c-pl-2":"#2dfa85","--c-pl-3":"#faac2d","--c-pl-4":"#b82dfa","--c-pl-5":"#2dfaf3"}},{id:"gruvbox",label:"Gruvbox Dark",colors:{"--c-white-10":"rgba(251, 241, 199, 0.1)","--c-white-20":"rgba(251, 241, 199, 0.2)","--c-white-30":"rgba(251, 241, 199, 0.3)","--c-white-50":"rgba(251, 241, 199, 0.5)","--c-white-60":"rgba(251, 241, 199, 0.6)","--c-white-90":"rgba(251, 241, 199, 0.9)","--c-black-20":"rgba(40, 40, 40, 0.2)","--c-black-50":"rgba(40, 40, 40, 0.5)","--c-black-70":"rgba(40, 40, 40, 0.7)","--c-black-80":"rgba(40, 40, 40, 0.8)","--c-black-90":"rgba(40, 40, 40, 0.9)","--c-accent":"#d65d0e","--c-accent-hover":"#fe8019","--c-text-primary":"#fbf1c7","--c-text-secondary":"#ebdbb2","--c-text-muted":"#928374","--c-text-inverse":"#282828","--c-bg-app":"#282828","--c-bg-main":"#282828","--c-bg-sidebar":"#282828","--c-bg-card":"#3c3836","--c-bg-placeholder":"#504945","--c-bg-glass":"rgba(40, 40, 40, 0.98)","--c-bg-toast":"#32302f","--c-heart":"#fb4934","--c-error":"#cc241d","--c-surface-hover":"#3c3836","--c-surface-active":"#504945","--c-surface-input":"#3c3836","--c-surface-input-focus":"#504945","--c-surface-button":"rgba(251, 241, 199, 0.1)","--c-surface-button-hover":"rgba(251, 241, 199, 0.2)","--c-surface-drag-phantom":"#504945","--c-surface-drag-land":"rgba(251, 241, 199, 0.1)","--c-rail-bg":"#504945","--c-rail-bg-hover":"#665c54","--c-skeleton-base":"#3c3836","--c-border":"#504945","--c-border-dim":"#3c3836","--c-border-bright":"#665c54","--c-border-dashed":"rgba(168, 153, 132, 0.2)","--c-border-dashed-hover":"rgba(168, 153, 132, 0.5)","--c-overlay-dim":"rgba(40, 40, 40, 0.6)","--c-overlay-backdrop":"rgba(29, 32, 33, 0.8)","--c-shadow-card":"rgba(0, 0, 0, 0.3)","--c-shadow-popover":"rgba(0, 0, 0, 0.5)","--c-shadow-header":"rgba(0, 0, 0, 0.2)","--c-shadow-phantom":"rgba(0, 0, 0, 0.5)","--c-shadow-glow-accent":"rgba(214, 93, 14, 0.3)","--c-icon-idle":"#a89984","--c-icon-hover":"#fbf1c7","--c-icon-faint":"#504945","--icon-stroke-width":"1.5px","--header-height":"64px","--mini-player-height":"90px","--sidebar-width":"260px","--radius-sm":"4px","--radius-md":"8px","--radius-lg":"12px","--radius-xl":"16px","--radius-full":"9999px","--z-base":"1","--z-dock":"1000","--z-modal":"2000","--z-toast":"3000","--z-drag-item":"9999","--trans-fast":"0.2s ease","--trans-smooth":"0.3s cubic-bezier(0.2, 0.8, 0.2, 1)","--c-pl-0":"#cc241d","--c-pl-1":"#458588","--c-pl-2":"#a6e3a1","--c-pl-3":"#d65d0e","--c-pl-4":"#b16286","--c-pl-5":"#fabd2f"}}];function Uc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Un={exports:{}},Yn={exports:{}},ii;function Yc(){return ii||(ii=1,(function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t={rotl:function(a,n){return a<<n|a>>>32-n},rotr:function(a,n){return a<<32-n|a>>>n},endian:function(a){if(a.constructor==Number)return t.rotl(a,8)&16711935|t.rotl(a,24)&4278255360;for(var n=0;n<a.length;n++)a[n]=t.endian(a[n]);return a},randomBytes:function(a){for(var n=[];a>0;a--)n.push(Math.floor(Math.random()*256));return n},bytesToWords:function(a){for(var n=[],s=0,i=0;s<a.length;s++,i+=8)n[i>>>5]|=a[s]<<24-i%32;return n},wordsToBytes:function(a){for(var n=[],s=0;s<a.length*32;s+=8)n.push(a[s>>>5]>>>24-s%32&255);return n},bytesToHex:function(a){for(var n=[],s=0;s<a.length;s++)n.push((a[s]>>>4).toString(16)),n.push((a[s]&15).toString(16));return n.join("")},hexToBytes:function(a){for(var n=[],s=0;s<a.length;s+=2)n.push(parseInt(a.substr(s,2),16));return n},bytesToBase64:function(a){for(var n=[],s=0;s<a.length;s+=3)for(var i=a[s]<<16|a[s+1]<<8|a[s+2],l=0;l<4;l++)s*8+l*6<=a.length*8?n.push(e.charAt(i>>>6*(3-l)&63)):n.push("=");return n.join("")},base64ToBytes:function(a){a=a.replace(/[^A-Z0-9+\/]/ig,"");for(var n=[],s=0,i=0;s<a.length;i=++s%4)i!=0&&n.push((e.indexOf(a.charAt(s-1))&Math.pow(2,-2*i+8)-1)<<i*2|e.indexOf(a.charAt(s))>>>6-i*2);return n}};Yn.exports=t})()),Yn.exports}var Hn,oi;function li(){if(oi)return Hn;oi=1;var e={utf8:{stringToBytes:function(t){return e.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(e.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var a=[],n=0;n<t.length;n++)a.push(t.charCodeAt(n)&255);return a},bytesToString:function(t){for(var a=[],n=0;n<t.length;n++)a.push(String.fromCharCode(t[n]));return a.join("")}}};return Hn=e,Hn}var Vn,ci;function Hc(){if(ci)return Vn;ci=1,Vn=function(a){return a!=null&&(e(a)||t(a)||!!a._isBuffer)};function e(a){return!!a.constructor&&typeof a.constructor.isBuffer=="function"&&a.constructor.isBuffer(a)}function t(a){return typeof a.readFloatLE=="function"&&typeof a.slice=="function"&&e(a.slice(0,0))}return Vn}var di;function Vc(){return di||(di=1,(function(){var e=Yc(),t=li().utf8,a=Hc(),n=li().bin,s=function(i,l){i.constructor==String?l&&l.encoding==="binary"?i=n.stringToBytes(i):i=t.stringToBytes(i):a(i)?i=Array.prototype.slice.call(i,0):!Array.isArray(i)&&i.constructor!==Uint8Array&&(i=i.toString());for(var o=e.bytesToWords(i),u=i.length*8,c=1732584193,v=-271733879,h=-1732584194,f=271733878,p=0;p<o.length;p++)o[p]=(o[p]<<8|o[p]>>>24)&16711935|(o[p]<<24|o[p]>>>8)&4278255360;o[u>>>5]|=128<<u%32,o[(u+64>>>9<<4)+14]=u;for(var E=s._ff,S=s._gg,w=s._hh,x=s._ii,p=0;p<o.length;p+=16){var H=c,oe=v,J=h,K=f;c=E(c,v,h,f,o[p+0],7,-680876936),f=E(f,c,v,h,o[p+1],12,-389564586),h=E(h,f,c,v,o[p+2],17,606105819),v=E(v,h,f,c,o[p+3],22,-1044525330),c=E(c,v,h,f,o[p+4],7,-176418897),f=E(f,c,v,h,o[p+5],12,1200080426),h=E(h,f,c,v,o[p+6],17,-1473231341),v=E(v,h,f,c,o[p+7],22,-45705983),c=E(c,v,h,f,o[p+8],7,1770035416),f=E(f,c,v,h,o[p+9],12,-1958414417),h=E(h,f,c,v,o[p+10],17,-42063),v=E(v,h,f,c,o[p+11],22,-1990404162),c=E(c,v,h,f,o[p+12],7,1804603682),f=E(f,c,v,h,o[p+13],12,-40341101),h=E(h,f,c,v,o[p+14],17,-1502002290),v=E(v,h,f,c,o[p+15],22,1236535329),c=S(c,v,h,f,o[p+1],5,-165796510),f=S(f,c,v,h,o[p+6],9,-1069501632),h=S(h,f,c,v,o[p+11],14,643717713),v=S(v,h,f,c,o[p+0],20,-373897302),c=S(c,v,h,f,o[p+5],5,-701558691),f=S(f,c,v,h,o[p+10],9,38016083),h=S(h,f,c,v,o[p+15],14,-660478335),v=S(v,h,f,c,o[p+4],20,-405537848),c=S(c,v,h,f,o[p+9],5,568446438),f=S(f,c,v,h,o[p+14],9,-1019803690),h=S(h,f,c,v,o[p+3],14,-187363961),v=S(v,h,f,c,o[p+8],20,1163531501),c=S(c,v,h,f,o[p+13],5,-1444681467),f=S(f,c,v,h,o[p+2],9,-51403784),h=S(h,f,c,v,o[p+7],14,1735328473),v=S(v,h,f,c,o[p+12],20,-1926607734),c=w(c,v,h,f,o[p+5],4,-378558),f=w(f,c,v,h,o[p+8],11,-2022574463),h=w(h,f,c,v,o[p+11],16,1839030562),v=w(v,h,f,c,o[p+14],23,-35309556),c=w(c,v,h,f,o[p+1],4,-1530992060),f=w(f,c,v,h,o[p+4],11,1272893353),h=w(h,f,c,v,o[p+7],16,-155497632),v=w(v,h,f,c,o[p+10],23,-1094730640),c=w(c,v,h,f,o[p+13],4,681279174),f=w(f,c,v,h,o[p+0],11,-358537222),h=w(h,f,c,v,o[p+3],16,-722521979),v=w(v,h,f,c,o[p+6],23,76029189),c=w(c,v,h,f,o[p+9],4,-640364487),f=w(f,c,v,h,o[p+12],11,-421815835),h=w(h,f,c,v,o[p+15],16,530742520),v=w(v,h,f,c,o[p+2],23,-995338651),c=x(c,v,h,f,o[p+0],6,-198630844),f=x(f,c,v,h,o[p+7],10,1126891415),h=x(h,f,c,v,o[p+14],15,-1416354905),v=x(v,h,f,c,o[p+5],21,-57434055),c=x(c,v,h,f,o[p+12],6,1700485571),f=x(f,c,v,h,o[p+3],10,-1894986606),h=x(h,f,c,v,o[p+10],15,-1051523),v=x(v,h,f,c,o[p+1],21,-2054922799),c=x(c,v,h,f,o[p+8],6,1873313359),f=x(f,c,v,h,o[p+15],10,-30611744),h=x(h,f,c,v,o[p+6],15,-1560198380),v=x(v,h,f,c,o[p+13],21,1309151649),c=x(c,v,h,f,o[p+4],6,-145523070),f=x(f,c,v,h,o[p+11],10,-1120210379),h=x(h,f,c,v,o[p+2],15,718787259),v=x(v,h,f,c,o[p+9],21,-343485551),c=c+H>>>0,v=v+oe>>>0,h=h+J>>>0,f=f+K>>>0}return e.endian([c,v,h,f])};s._ff=function(i,l,o,u,c,v,h){var f=i+(l&o|~l&u)+(c>>>0)+h;return(f<<v|f>>>32-v)+l},s._gg=function(i,l,o,u,c,v,h){var f=i+(l&u|o&~u)+(c>>>0)+h;return(f<<v|f>>>32-v)+l},s._hh=function(i,l,o,u,c,v,h){var f=i+(l^o^u)+(c>>>0)+h;return(f<<v|f>>>32-v)+l},s._ii=function(i,l,o,u,c,v,h){var f=i+(o^(l|~u))+(c>>>0)+h;return(f<<v|f>>>32-v)+l},s._blocksize=16,s._digestsize=16,Un.exports=function(i,l){if(i==null)throw new Error("Illegal argument "+i);var o=e.wordsToBytes(s(i,l));return l&&l.asBytes?o:l&&l.asString?n.bytesToString(o):e.bytesToHex(o)}})()),Un.exports}var Wc=Vc();const Qc=Uc(Wc),vi=Be("Disconnected"),br=Be(!1),ss=Be(null);let Wn;function ze(e,t="info"){ss.set({text:e,type:t}),Wn&&clearTimeout(Wn),Wn=setTimeout(()=>{ss.set(null)},3e3)}const Xc=localStorage.getItem("app_theme")||"default",wn=Be(Xc);wn.subscribe(e=>{if(typeof document>"u")return;localStorage.setItem("app_theme",e);const t=ns.find(n=>n.id===e);if(!t)return;const a=document.documentElement;document.body.setAttribute("data-theme",e),Object.entries(t.colors).forEach(([n,s])=>{a.style.setProperty(n,s)})});const kn=Be({isOpen:!1,title:"",message:"",confirmLabel:"Confirm",cancelLabel:"Cancel",onConfirm:null,type:"confirm",inputValue:"",placeholder:"",options:[]});function fa({title:e="Confirm Action",message:t="Are you sure?",confirmLabel:a="Confirm",cancelLabel:n="Cancel",type:s="confirm",inputValue:i="",placeholder:l="",options:o=[],onConfirm:u=()=>{}}){kn.set({isOpen:!0,title:e,message:t,confirmLabel:a,cancelLabel:n,type:s,inputValue:i,placeholder:l,options:o,onConfirm:u})}function dn(){kn.set({isOpen:!1,title:"",message:"",confirmLabel:"",cancelLabel:"",onConfirm:null,type:"confirm",inputValue:"",placeholder:"",options:[]})}const xt=Be({state:"stop",volume:50,elapsed:0,duration:0,random:!1,repeat:!1,bitrate:0,format:"",song:0,songid:0}),Yt=Be({title:"Not Playing",artist:"",album:"",file:"",stationName:null,id:null,pos:null,isYandex:!1}),$s=Be({active:!1,tracks:[],currentIndex:-1,currentTrackId:null,currentTrackFile:null,streamCache:{}}),xn=Be(!1),fn=Be(!1),is=Be(!1),os=Be(!1),Dt=Be("library"),Ln=Be(null),na=Be(!1),Kc=localStorage.getItem("sidebarCollapsed")==="true",ls=Be(Kc);ls.subscribe(e=>{typeof localStorage<"u"&&localStorage.setItem("sidebarCollapsed",String(e))});const Ha=Be([]),zn=Be([]),Br=Be([]),Gc=Be(null),ja=Be(new Set),kt=Be(!1),Wt=Be([{view:"root"}]),Fa=Be([]),fo=Be(0),Ur=Be(""),ho=Be({});function Zc(e,t){ho.update(a=>({...a,[e]:t}))}function Jc(e){return et(ho)[e]||0}const As=Be({isOpen:!1,track:null,context:{type:"general",playlistName:null,index:null},x:0,y:0,triggerRect:null});function ed(){if(typeof navigator<"u"&&navigator.vibrate)try{navigator.vibrate(70)}catch{}}function Kr(e,t,a={}){if(!t&&a.type!=="playlist-card")return;ed();let n=0,s=0,i=null,l=e.currentTarget;!l&&e.target&&e.target.closest&&(l=e.target.closest("button")||e.target),l&&l.getBoundingClientRect&&(i=l.getBoundingClientRect());const o=e.detail?.originalEvent||e;o.touches&&o.touches.length>0?(n=o.touches[0].clientX,s=o.touches[0].clientY):o.clientX&&(n=o.clientX,s=o.clientY);const u={type:"general",playlistName:null,index:null,...a};As.set({isOpen:!0,track:t,context:u,x:n,y:s,triggerRect:i})}function Nt(){As.set({isOpen:!1,track:null,context:{},x:0,y:0,triggerRect:null})}let cs=null,ds=null;function td(e){ds=e}function qa(e,t=null){t&&(cs=t),ds?ds(e,t):console.warn("Router callback not set!")}function ad(){const e=cs;return cs=null,e}function rd(){window.history.back()}function Tr(e,t=[],a=null){if(!e||!e.file)return"/images/default_cover.png";if(e.image&&e.image.startsWith("http"))return e.image;if(po(e.file)||e.genre==="Radio")return e.image?Sr(e):go(e,t,a)||"/images/radio_placeholder.png";let n=e.file.startsWith("/")?e.file.slice(1):e.file;return`/coverart.php/${encodeURI(n)}`}function Gr(e,t="sm",a=[],n=null){if(!e||e.file&&(po(e.file)||e.genre==="Radio"||Array.isArray(e)))return e&&e.image?Sr(e):go(e,a,n)||"/images/radio_icon.png";if(e.image&&e.image.startsWith("http"))return e.image;if(!e.file)return"/images/default_icon.png";if(e.thumbHash){const s=t==="md"?"":"_sm";return`/imagesw/thmcache/${e.thumbHash}${s}.jpg`}try{const s=e.file.lastIndexOf("/"),i=s===-1?".":e.file.substring(0,s);return`/imagesw/thmcache/${Qc(i)}${t==="md"?"":"_sm"}.jpg`}catch{let i=e.file.startsWith("/")?e.file.slice(1):e.file;return`/coverart.php/${encodeURI(i)}`}}function po(e){return!e||e.includes("yandex.net")||e.includes("get-mp3")?!1:e.startsWith("http")||e.includes("://")||e.includes("RADIO")}function go(e,t,a){const n=u=>(u||"").toString().toLowerCase().replace(/[^a-z0-9]/g,""),s=n(e?.title),i=n(e?.stationName),l=n(a);if(t&&t.length>0){const u=t.find(c=>{const v=n(c.name);return v?v===i||v===l||s&&v===s||s&&s.includes(v)&&v.length>3:!1});if(u)return Sr(u)}const o=e?.stationName||a;return o?Sr({name:o,image:"local"}):null}lo([Yt,Ha,Ln],([e,t,a])=>Tr(e,t,a));lo(Yt,e=>!e||!e.file||e.file.startsWith("http")?null:`/coverart.php/${encodeURI(e.file)}`);const nd=localStorage.getItem("alarmTime")||"08:00",sd=localStorage.getItem("alarmEnabled")==="true",id=localStorage.getItem("alarmPlaylist")||"Favorites",vs=Be(nd),us=Be(sd),fs=Be(id);vs.subscribe(e=>localStorage.setItem("alarmTime",e));us.subscribe(e=>localStorage.setItem("alarmEnabled",String(e)));fs.subscribe(e=>localStorage.setItem("alarmPlaylist",e));const od=localStorage.getItem("yandex_enabled")==="true",En=Be(od);En.subscribe(e=>{typeof localStorage<"u"&&localStorage.setItem("yandex_enabled",String(e))});const ld=Be(new Set),vt={NAME:"MoodePlayerDB",STORE_NAME:"music",VERSION:3},La={SYNC:"/wave-api.php",YANDEX:"/wave-yandex-api.php",STATIONS:e=>"/wave-api.php?action=stations",COVER_ART:e=>`/coverart.php?u=${encodeURIComponent(e)}`,RADIO_LOGOS:e=>`/imagesw/radio-logos/thumbs/${e}`},Ia={open(){return new Promise((e,t)=>{const a=indexedDB.open(vt.NAME,vt.VERSION);a.onupgradeneeded=n=>{const s=n.target.result,i=n.target.transaction;let l;s.objectStoreNames.contains(vt.STORE_NAME)?l=i.objectStore(vt.STORE_NAME):l=s.createObjectStore(vt.STORE_NAME,{keyPath:"file"}),l.indexNames.contains("artist")||l.createIndex("artist","artist",{unique:!1}),l.indexNames.contains("album")||l.createIndex("album","album",{unique:!1}),l.indexNames.contains("genre")||l.createIndex("genre","genre",{unique:!1}),l.indexNames.contains("album_artist")||l.createIndex("album_artist","album_artist",{unique:!1})},a.onsuccess=()=>e(a.result),a.onerror=()=>t(a.error)})},async clear(){const e=await this.open();return new Promise((t,a)=>{const n=e.transaction(vt.STORE_NAME,"readwrite");n.objectStore(vt.STORE_NAME).clear(),n.oncomplete=()=>t(),n.onerror=()=>a(n.error)})},async bulkAdd(e){const t=await this.open();return new Promise((a,n)=>{const s=t.transaction(vt.STORE_NAME,"readwrite"),i=s.objectStore(vt.STORE_NAME);e.forEach(l=>i.put(l)),s.oncomplete=()=>a(),s.onerror=()=>n(s.error)})},async getFilesMap(e){if(!e||e.length===0)return new Map;const t=await this.open();return new Promise(a=>{const s=t.transaction(vt.STORE_NAME,"readonly").objectStore(vt.STORE_NAME),i=new Map;let l=0;e.forEach(o=>{const u=o.normalize("NFC").trim(),c=s.get(u);c.onsuccess=v=>{v.target.result&&i.set(o,v.target.result),l++,l===e.length&&a(i)},c.onerror=()=>{l++,l===e.length&&a(i)}})})},async getArtists(){const e=await this.open();return new Promise((t,a)=>{const s=e.transaction(vt.STORE_NAME,"readonly").objectStore(vt.STORE_NAME),i=new Map,l=s.openCursor();l.onsuccess=o=>{const u=o.target.result;if(u){const c=u.value,v=c.album_artist||c.artist;v&&!i.has(v)&&i.set(v,{name:v,file:c.file,thumbHash:c.thumbHash}),u.continue()}else{const c=Array.from(i.values()).sort((v,h)=>v.name.localeCompare(h.name,void 0,{sensitivity:"base"}));t(c)}},l.onerror=()=>a(l.error)})},async getAlbums(){const e=await this.open();return new Promise((t,a)=>{const s=e.transaction(vt.STORE_NAME,"readonly").objectStore(vt.STORE_NAME).index("album"),i=[],l=s.openCursor(null,"nextunique");l.onsuccess=o=>{const u=o.target.result;if(u){const c=u.value;i.push({name:c.album,artist:c.album_artist||c.artist,file:c.file,thumbHash:c.thumbHash,qualityBadge:c.qualityBadge,year:c.year||0}),u.continue()}else t(i)},l.onerror=()=>a(l.error)})},async getArtistAlbums(e){if(!e)return[];const t=await this.open(),a=e.normalize("NFC").trim();return new Promise((n,s)=>{const l=t.transaction(vt.STORE_NAME,"readonly").objectStore(vt.STORE_NAME),o=new Promise(c=>{l.indexNames.contains("album_artist")?l.index("album_artist").getAll(IDBKeyRange.only(a)).onsuccess=v=>c(v.target.result):c([])}),u=new Promise(c=>{l.index("artist").getAll(IDBKeyRange.only(a)).onsuccess=v=>c(v.target.result)});Promise.all([o,u]).then(([c,v])=>{const h=[...c,...v],f=[],p=new Set;h.forEach(E=>{p.has(E.album)||(p.add(E.album),f.push({name:E.album,artist:E.album_artist||E.artist,file:E.file,thumbHash:E.thumbHash,qualityBadge:E.qualityBadge,year:E.year||0}))}),n(f)}).catch(c=>s(c))})},async getAlbumTracks(e,t=null){const a=await this.open(),n=e.normalize("NFC").trim(),s=t?t.normalize("NFC").trim():null;return console.log(`[DB] getAlbumTracks called. Album: "${n}", FilterArtist: "${s}"`),new Promise((i,l)=>{const u=a.transaction(vt.STORE_NAME,"readonly").objectStore(vt.STORE_NAME).index("album"),c=IDBKeyRange.only(n),v=u.getAll(c);v.onsuccess=()=>{let h=v.result;if(console.log(`[DB] Found ${h.length} raw tracks for album "${n}"`),s){const f=h.length;h=h.filter(p=>{const E=(p.artist||"").normalize("NFC").trim(),S=(p.album_artist||"").normalize("NFC").trim();return E===s||S===s}),console.log(`[DB] After artist filter: ${h.length} tracks (Removed ${f-h.length})`)}else console.log("[DB] No artist filter provided. Returning all tracks.");h.sort((f,p)=>{const E=parseInt(f.disc||1),S=parseInt(p.disc||1);if(E!==S)return E-S;const w=parseInt(f.track||0),x=parseInt(p.track||0);return w-x}),i(h)},v.onerror=()=>l(v.error)})},async getGenres(){const e=await this.open();return new Promise((t,a)=>{const s=e.transaction(vt.STORE_NAME,"readonly").objectStore(vt.STORE_NAME).index("genre"),i=[],l=s.openKeyCursor(null,"nextunique");l.onsuccess=o=>{const u=o.target.result;u?(i.push(u.key),u.continue()):t(i)},l.onerror=()=>a(l.error)})},async getGenreTracks(e){const t=await this.open(),a=e.normalize("NFC").trim();return new Promise((n,s)=>{const o=t.transaction(vt.STORE_NAME,"readonly").objectStore(vt.STORE_NAME).index("genre").getAll(IDBKeyRange.only(a));o.onsuccess=()=>n(o.result),o.onerror=()=>s(o.error)})},async search(e){if(!e)return[];const t=e.toLowerCase().normalize("NFC").trim(),a=await this.open();return new Promise((n,s)=>{const l=a.transaction(vt.STORE_NAME,"readonly").objectStore(vt.STORE_NAME),o=[],u=100,c=l.openCursor();c.onsuccess=v=>{const h=v.target.result;if(h){const f=h.value;if((f.title&&f.title.toLowerCase().includes(t)||f.artist&&f.artist.toLowerCase().includes(t)||f.album&&f.album.toLowerCase().includes(t)||f.album_artist&&f.album_artist.toLowerCase().includes(t))&&o.push(f),o.length>=u){n(o);return}h.continue()}else n(o)},c.onerror=()=>s(c.error)})}};var cd=k('<div class="skeleton svelte-tl058d"></div>');function Rt(e,t){let a=mt(t,"width",8,"100%"),n=mt(t,"height",8,"20px"),s=mt(t,"radius",8,"4px"),i=mt(t,"style",8,"");var l=cd();fe(()=>ht(l,`width: ${a()??""}; height: ${n()??""}; border-radius: ${s()??""}; ${i()??""}`)),m(e,l)}var dd=k('<div class="skel svelte-1b8que2"><!></div>'),vd=k('<img loading="lazy"/>'),ud=k('<div class="loader svelte-1b8que2"><!> <!> <!></div>');function Ua(e,t){Et(t,!1);let a=mt(t,"src",8),n=mt(t,"alt",8,""),s=mt(t,"radius",8,"0px");const i=Ts();let l=T("loading");function o(){g(l,"loaded")}function u(w){i("error",w),g(l,"error")}re(()=>R(a()),()=>{a()?g(l,"loading"):g(l,"error")}),Ht(),At();var c=ud(),v=d(c);{var h=w=>{var x=dd(),H=d(x);Rt(H,{width:"100%",height:"100%",get radius(){return s()}}),ut(2,x,()=>yt,()=>({duration:200})),m(w,x)};L(v,w=>{r(l)==="loading"&&w(h)})}var f=_(v,2);{var p=w=>{var x=vd();let H;fe(()=>{Ut(x,"src",a()),Ut(x,"alt",n()),ht(x,`border-radius: ${s()??""}`),H=Ke(x,1,"svelte-1b8que2",null,H,{vis:r(l)==="loaded"})}),M("load",x,o),M("error",x,u),m(w,x)};L(f,w=>{a()&&r(l)!=="error"&&w(p)})}var E=_(f,2);{var S=w=>{var x=nt(),H=Ce(x);Nr(H,t,"fallback",{}),m(w,x)};L(E,w=>{r(l)==="error"&&w(S)})}fe(()=>ht(c,`border-radius: ${s()??""}`)),m(e,c),St()}const Xa={DEFAULT_IP:typeof window<"u"?window.location.hostname:"localhost",get MOODE_IP(){try{return typeof localStorage<"u"?localStorage.getItem("moode_ip")||this.DEFAULT_IP:this.DEFAULT_IP}catch{return this.DEFAULT_IP}},setMoodeIp(e){if(typeof localStorage<"u"){const t=e?e.trim():"";t&&localStorage.setItem("moode_ip",t)}}};class fd{constructor(){this.socket=null,this.queue=[],this.isProcessing=!1,this.reconnectTimer=null,this.watchdogTimer=null,this._buffer=""}get isConnected(){return this.socket&&this.socket.readyState===WebSocket.OPEN}connect(){if(this.socket&&(this.socket.readyState===WebSocket.CONNECTING||this.socket.readyState===WebSocket.OPEN))return;this.reconnectTimer&&clearTimeout(this.reconnectTimer);let t=Xa.MOODE_IP||window.location.hostname;t=t.replace(/^https?:\/\//,"").split(":")[0].split("/")[0];const a=Xa.WS_PORT||"8080",n=`ws://${t}:${a}`;console.log("[MPD] Connecting to:",n);try{this.socket=new WebSocket(n,["binary"])}catch(s){console.error("[MPD] Connection Error:",s),this.reconnectTimer=setTimeout(()=>this.connect(),5e3);return}this.socket.onopen=()=>{console.log("[MPD] Connected"),vi.set("Connected"),ze("Connected to Moode","success"),this._processQueue()},this.socket.onmessage=s=>this._handleMessage(s),this.socket.onclose=s=>{console.warn("[MPD] Socket closed",s.code,s.reason),vi.set("Disconnected"),this._cleanup(),this.reconnectTimer=setTimeout(()=>this.connect(),3e3)},this.socket.onerror=s=>{console.error("[MPD] Socket error",s)}}send(t){return new Promise((a,n)=>{this.queue.push({cmd:t,resolve:a,reject:n}),this._processQueue()})}_cleanup(){for(this.isProcessing=!1,this._buffer="",this.watchdogTimer&&clearTimeout(this.watchdogTimer);this.queue.length>0;){const{reject:t}=this.queue.shift();t(new Error("Connection lost"))}}async _processQueue(){if(this.isProcessing||this.queue.length===0||!this.isConnected)return;this.isProcessing=!0;const{cmd:t}=this.queue[0];this.watchdogTimer&&clearTimeout(this.watchdogTimer),this.watchdogTimer=setTimeout(()=>{console.error("[MPD] Watchdog timeout"),this.socket&&this.socket.close()},2e4);try{const a=t.endsWith(`
`)?t:t+`
`;this.socket.send(new TextEncoder().encode(a))}catch(a){console.error("[MPD] Send error",a),this._cleanup()}}async _handleMessage(t){let a=t.data;a instanceof Blob&&(a=await a.text()),this.watchdogTimer&&(clearTimeout(this.watchdogTimer),this.watchdogTimer=null),this._buffer+=a;const n=this._buffer.endsWith(`
OK
`)||this._buffer===`OK
`,s=this._buffer.startsWith("ACK");if(n||s){const i=this._buffer;this._buffer="";const l=this.queue.shift();if(this.isProcessing=!1,l)if(s)console.error(`[MPD] Error: ${i.trim()}`),l.reject(new Error(i.trim()));else{const o=i.replace(/\nOK\n$/,"").replace(/^OK\n$/,"");l.resolve(o)}this._processQueue()}else{if(!this.queue.length)return;this.watchdogTimer=setTimeout(()=>{console.error("[MPD] Watchdog timeout receiving large data"),this.socket&&this.socket.close()},2e4)}}}const De=new fd,aa={parseKeyValue(e){const t={};if(!e)return t;const a=e.split(`
`);for(const n of a){const s=n.indexOf(": ");if(s===-1)continue;const i=n.substring(0,s).toLowerCase(),l=n.substring(s+2);t[i]=l}return t},parseStatus(e){const t=this.parseKeyValue(e);let a="";if(t.audio){const n=t.audio.split(":");n[1]&&(a=`${n[1]}-bit`)}return{state:t.state||"stop",volume:parseInt(t.volume)||0,elapsed:parseFloat(t.elapsed)||0,duration:parseFloat(t.duration)||0,random:t.random==="1",repeat:t.repeat==="1",song:parseInt(t.song)||0,songId:parseInt(t.songid)||-1,playlistLength:parseInt(t.playlistlength)||0,bitrate:parseInt(t.bitrate)||0,format:a,playlistVersion:parseInt(t.playlist)||0}},parseCurrentSong(e){const t=this.parseKeyValue(e);return this._normalizeTrack(t)},parsePlaylists(e){const t=e.split(`
`),a=[];let n=null;for(const s of t)s.startsWith("playlist: ")?(n&&a.push(n),n={playlist:s.substring(10)}):s.startsWith("Last-Modified: ")&&n&&(n["last-modified"]=s.substring(15));return n&&a.push(n),a.map(s=>({name:s.playlist,lastModified:s["last-modified"]}))},parseTracks(e){const t=[];let a=null,n=0,s=e.indexOf(`
`,n);for(;s!==-1;){const i=e.substring(n,s),l=i.indexOf(": ");if(l!==-1){const o=i.substring(0,l).toLowerCase(),u=i.substring(l+2);o==="file"?(a&&t.push(this._normalizeTrack(a)),a={file:u}):a&&(a[o]=u)}n=s+1,s=e.indexOf(`
`,n)}return a&&t.push(this._normalizeTrack(a)),t},_normalizeTrack(e){const t=e.file||e.File||"",a=e.Title||e.title||e.Name||e.name||t.split("/").pop()||"Unknown";return{file:t,title:a,artist:e.Artist||e.artist||"Unknown Artist",album:e.Album||e.album||"Unknown Album",genre:e.Genre||e.genre||"Unknown",time:parseFloat(e.Time||e.time||0),track:e.Track||e.track||"",id:e.Id||e.id,pos:e.Pos||e.pos||null,stationName:e.name||e.Name||null}}};function _o(e){return new Worker("/assets/sync.worker-CxDcqL9_.js",{name:e?.name})}const Na={async syncLibrary(){if(et(na))return;na.set(!0);const e=new _o,t=window.location.origin+"/wave-api.php";e.postMessage({type:"START_SYNC",payload:{url:t}}),e.onmessage=a=>{const{type:n,status:s,count:i,message:l}=a.data;if(n==="PROGRESS"){const o={connecting:"Requesting library...",downloading:"Downloading data...",parsing:"Processing metadata...",saving:`Saving ${i} tracks...`};o[s]&&ze(o[s],"info")}n==="DONE"&&(ze(`Library updated: ${i} tracks`,"success"),na.set(!1),e.terminate()),n==="ERROR"&&(console.error("[API] Sync Error:",l),ze(`Sync Failed: ${l}`,"error"),na.set(!1),e.terminate())},e.onerror=a=>{console.error("[API] Worker crash:",a),ze("Sync worker crashed","error"),na.set(!1),e.terminate()}},async loadRadioStations(){if(!et(fn)){fn.set(!0);try{const t=await fetch(La.STATIONS(!1));if(!t.ok)throw new Error("Network error");const a=await t.json();if(a.error)throw new Error(a.error);if(!Array.isArray(a))throw new Error("Invalid response format");const n=a.map(s=>({id:s.id,name:s.name,file:s.station,station:s.station,image:s.logo,genre:s.genre||"Radio"}));n.sort((s,i)=>s.name.localeCompare(i.name,void 0,{sensitivity:"base"})),Ha.set(n)}catch(e){console.error("[API] Failed to load stations",e),ze("Failed to load radio","error")}finally{fn.set(!1)}}},async setAlarm(e,t,a){try{const n=new FormData;n.append("action","set_alarm"),n.append("enabled",e?"1":"0"),n.append("time",t),n.append("playlist",a);const s=await fetch(La.SYNC,{method:"POST",body:n});if(!s.ok)throw new Error("Server error");const i=await s.json();if(i.error)throw new Error(i.error);return!0}catch(n){throw console.error("[API] Failed to set alarm",n),n}},async getServerTime(){try{const e=await fetch(`${La.SYNC}?action=get_time`);if(e.ok)return(await e.json()).time}catch(e){console.error("Failed to get server time",e)}return null},async checkYandexAuth(){try{const t=await(await fetch(La.YANDEX+"?action=status")).json();return br.set(t.authorized),t.authorized}catch(e){return console.error("Yandex Auth Check Failed",e),br.set(!1),!1}},async saveYandexToken(e){try{const t=await fetch(La.YANDEX+"?action=save_token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e})}),a=await t.json();if(!t.ok)throw new Error(a.error||"Failed to save");return ze("Yandex connected successfully","success"),br.set(!0),!0}catch(t){return console.error(t),ze("Invalid token or server error","error"),br.set(!1),!1}},async playYandexStation(e="user:onetwo"){try{await fetch(La.YANDEX+`?action=play_station&station=${e}`),ze("Starting My Vibe...","success")}catch{ze("Failed to start radio","error")}},async getYandexMeta(e){try{const t=await fetch(La.YANDEX+"?action=get_meta&url="+encodeURIComponent(e));if(t.ok)return await t.json()}catch{}return null}},hd=1e3,pd=250;let hn=null,Yr=null,pn=0,Wa=1,Sn=!0,ka=!1,Ka=0,hr=null;function gn(e){return e?String(e).normalize("NFC").replace(/\\/g,"\\\\").replace(/"/g,'\\"'):""}function gd(){_d(),Sn=!0,ka=!1,Ka=0,kt.set(!1),da(),hn=setInterval(()=>{De.isConnected&&!De.isProcessing&&da()},hd)}function _d(){hn&&(clearInterval(hn),hn=null),Cs()}async function da(){try{const e=await De.send("status"),t=await De.send("currentsong"),a=aa.parseStatus(e),n=aa.parseCurrentSong(t);bd(a,n);const s=et(fo);if(et(kt))return;(a.playlistLength>0&&a.playlistVersion!==s||a.playlistLength>0&&et(Fa).length===0)&&md(a.playlistVersion)}catch{}}async function md(e){if(!et(kt))try{const t=await De.send("playlistinfo");if(et(kt))return;const a=aa.parseTracks(t),n=et($s),s=a.map(o=>o.file).filter(o=>o&&!o.startsWith("http"));let i=new Map;if(s.length>0)try{i=await Ia.getFilesMap(s)}catch(o){console.warn("Failed to hydrate queue from DB",o)}const l=a.map(o=>{const u=o.file||"";if(n.streamCache&&n.streamCache[u]){const h=n.streamCache[u];return{...o,title:h.title,artist:h.artist,album:h.album,image:h.image,isYandex:!0,id:h.id,mpdId:o.id,mpdPos:o.pos,_uid:String(o.id||o.pos)+"y"}}(u.includes("yandex.net")||u.includes("get-mp3"))&&mo(u);const c=u.normalize("NFC"),v=i.get(c);return v?{...o,thumbHash:v.thumbHash,qualityBadge:v.qualityBadge,title:o.title||v.title,artist:o.artist||v.artist,album:o.album||v.album,_uid:String(o.id||o.pos+o.file)}:{...o,_uid:String(o.id||o.pos+o.file)}});Fa.set(l),fo.set(e)}catch(t){console.error("Queue sync error",t)}}async function mo(e){const t=await Na.getYandexMeta(e);t&&($s.update(n=>{const s={...n.streamCache};return s[e]={...t,isYandex:!0,file:e},{...n,streamCache:s}}),et(Yt).file===e&&Yt.update(n=>({...n,...t,isYandex:!0})),Fa.update(n=>n.map(s=>s.file===e?{...s,...t,isYandex:!0}:s)))}function bd(e,t){const a=et(Yt),n=et(Ha),s=et($s);if(t.file&&s.streamCache&&s.streamCache[t.file]){const l=s.streamCache[t.file];t.title=l.title,t.artist=l.artist,t.album=l.album,t.image=l.image,t.isYandex=!0,t.id=l.id,l.time>0&&(e.duration===0||isNaN(e.duration))&&(e.duration=l.time)}else t.file&&(t.file.includes("yandex.net")||t.file.includes("get-mp3"))&&mo(t.file);const i=t.file&&t.file.startsWith("http");if(i&&!t.isYandex){const l=v=>(v||"").toString().toLowerCase().replace(/[^a-z0-9]/g,""),o=l(t.file),u=l(t.title),c=n.find(v=>{const h=l(v.station||v.file||v.url||(Array.isArray(v)?v[1]:"")),f=l(v.name||(Array.isArray(v)?v[0]:""));return h&&o.includes(h)||f&&u.includes(f)});c?t.stationName=c.name||c[0]:a.stationName&&a.file===t.file&&(t.stationName=a.stationName)}Yt.set(t),xt.update(l=>{const o=e.state==="play",u=performance.now();if(e.state==="pause"||l.state==="pause")return vn(!1),u<Ka?l:e;if(t.file!==a.file||Sn)return Sn=!1,ka=!1,Wa=1,i&&!t.isYandex&&(e.elapsed=0),vn(o&&(!i||t.isYandex)),e;if(u<Ka)return l;if(ka)return ka=!1,Wa=1,vn(o&&(!i||t.isYandex)),e;if(o&&(!i||t.isYandex)){const c=e.elapsed-l.elapsed;if(Math.abs(c)>2)return Wa=1,e;if(Math.abs(c)<.05)Wa=1;else{let h=c/1.5;Wa=Math.max(.5,Math.min(1.5,1+h))}return{...e,elapsed:l.elapsed}}return vn(!1),e})}function vn(e){e?hs():Cs()}function hs(){Yr||Sn||(pn=performance.now(),Yr=setInterval(()=>{const e=performance.now();let t=(e-pn)/1e3;t>2&&(t=0),pn=e,xt.update(a=>{if(a.state!=="play")return a;let n=a.elapsed+t*Wa;return a.duration>0&&n>a.duration&&(n=a.duration),{...a,elapsed:n}})},pd))}function Cs(){Yr&&(clearInterval(Yr),Yr=null),Wa=1,pn=0}async function ui(e,t=!1){if(!e||e.length===0)return;kt.set(!0),ka=!0;const a=5;try{for(let n=0;n<e.length;n+=a){const s=e.slice(n,n+a),i=["command_list_begin"];s.forEach(l=>{i.push(`add "${gn(l.file)}"`)}),i.push("command_list_end"),await De.send(i.join(`
`))}t?(await De.send("play 0"),ze(`Playing ${e.length} tracks`,"success")):ze(`Added ${e.length} tracks`,"success")}catch(n){console.error("[Player] Bulk Action Failed:",n),ze("Error adding tracks","error")}finally{setTimeout(()=>{kt.set(!1),da()},1500)}}const sa={async togglePlay(){const t=et(xt).state==="play";Ka=performance.now()+800,xt.update(a=>{const n=t?"pause":"play";return n==="play"?hs():Cs(),{...a,state:n}}),await De.send(t?"pause 1":"play"),setTimeout(da,900)},async next(){ka=!0,Ka=0,await De.send("next"),da()},async previous(){ka=!0,Ka=0,xt.update(e=>({...e,elapsed:0})),await De.send("previous"),da()},async setVolume(e){xt.update(t=>({...t,volume:e})),await De.send(`setvol ${e}`)},async seek(e){ka=!0,Ka=performance.now()+500,xt.update(t=>({...t,elapsed:e})),await De.send(`seekcur ${e}`),setTimeout(da,600)},async toggleRandom(){const t=!et(xt).random;xt.update(a=>({...a,random:t})),await De.send(`random ${t?1:0}`)},async toggleRepeat(){const t=!et(xt).repeat;xt.update(a=>({...a,repeat:t})),await De.send(`repeat ${t?1:0}`)},async playUri(e,t={}){kt.set(!0);const a=gn(e);ka=!0,xt.update(n=>({...n,state:"play",elapsed:0})),Yt.set({title:t.title||e.split("/").pop(),artist:t.artist||"",album:t.album||"",file:e}),hs();try{const n=await De.send("currentsong"),s=parseInt(aa.parseKeyValue(n).pos),i=await De.send(`addid "${a}"`),l=parseInt(aa.parseKeyValue(i).id);if(isNaN(l))await De.send(`add "${a}"`),await De.send("play");else{const o=isNaN(s)?0:s+1;await De.send(`moveid ${l} ${o}`),await De.send(`playid ${l}`)}}catch(n){console.error("Play error",n),ze("Failed to play","error")}setTimeout(()=>{kt.set(!1),da()},1200)},async addToQueue(e){try{await De.send(`add "${gn(e)}"`),ze("Added to queue","success")}catch(t){console.error("Add queue error",t),ze("Failed to add","error")}},async playNext(e){kt.set(!0);const t=gn(e);try{const a=await De.send("currentsong"),n=parseInt(aa.parseKeyValue(a).pos||-1);if(n===-1)kt.set(!1),await this.playUri(e);else{const s=await De.send(`addid "${t}"`),i=parseInt(aa.parseKeyValue(s).id);isNaN(i)||(await De.send(`moveid ${i} ${n+1}`),ze("Will play next","success")),setTimeout(()=>kt.set(!1),1e3)}}catch(a){console.error("Play Next error",a),ze("Failed to set next","error"),kt.set(!1)}},async removeFromQueue(e){kt.set(!0),hr&&clearTimeout(hr);try{Fa.update(t=>{const a=[...t];return a.splice(e,1),a}),await De.send(`delete ${e}`)}catch{ze("Failed to remove","error"),kt.set(!1);return}hr=setTimeout(()=>{kt.set(!1)},1e3)},async moveTrack(e,t){if(e!==t){kt.set(!0),hr&&clearTimeout(hr);try{await De.send(`move ${e} ${t}`)}catch(a){console.error("Move failed",a),ze("Move failed","error"),kt.set(!1),da();return}hr=setTimeout(()=>{kt.set(!1),da()},2e3)}},async playAllTracks(e){if(!(!e||e.length===0))try{await De.send("stop"),await De.send("clear"),await ui(e,!0)}catch(t){console.error(t)}},async addAllToQueue(e){!e||e.length===0||await ui(e,!1)},async saveQueue(e){if(!e)return;const t=e.replace(/"/g,'\\"');try{await De.send(`save "${t}"`),ze(`Playlist "${e}" saved`,"success")}catch(a){if(a.message.includes("exist")){if(confirm(`Playlist "${e}" exists. Overwrite?`))try{await De.send(`rm "${t}"`),await De.send(`save "${t}"`),ze(`Playlist "${e}" overwritten`,"success")}catch{ze("Failed to overwrite","error")}}else console.error(a)}}},Rr="Favorites";let fi=Promise.resolve();const pr=e=>e?e.toLowerCase().replace(/^https?:\/\//,"").replace(/^www\./,"").split("?")[0].replace(/\/$/,""):"";function yd(e){if(e==="Favorites")return"linear-gradient(135deg, hsl(348, 95%, 58%), hsl(348, 90%, 40%))";let t=0;for(let n=0;n<e.length;n++)t=e.charCodeAt(n)+((t<<5)-t);const a=Math.abs(t%360);return`linear-gradient(135deg, hsl(${a}, 60%, 40%), hsl(${(a+40)%360}, 60%, 30%))`}function wd(e){if(e==="Favorites")return"var(--c-heart)";let t=0;for(let n=0;n<e.length;n++)t=e.charCodeAt(n)+((t<<5)-t);return`var(--c-pl-${Math.abs(t%6)})`}const ha={async syncLibrary(){if(et(na))return;na.set(!0);const e=new _o;e.postMessage({type:"START_SYNC",payload:{url:`http://${Xa.MOODE_IP}/wave-api.php`}}),e.onmessage=t=>{const{type:a,count:n}=t.data;a==="DONE"&&(ze(`Library updated: ${n} tracks`,"success"),na.set(!1),e.terminate()),a==="ERROR"&&(ze("Sync Failed","error"),na.set(!1),e.terminate())},e.onerror=()=>{na.set(!1),e.terminate()}},async loadPlaylists(){is.set(!0);try{const e=await De.send("listplaylists"),a=aa.parsePlaylists(e).map(n=>({...n,color:yd(n.name),colorVar:wd(n.name)}));zn.set(a)}catch(e){console.error(e)}finally{is.set(!1)}},async createPlaylistFromQueue(e){if(!e)return;const t=e.replace(/"/g,'\\"');try{await De.send(`save "${t}"`),ze(`Playlist "${e}" created`,"success"),await this.loadPlaylists()}catch(a){console.error(a),ze("Failed to create playlist","error")}},async deletePlaylist(e){if(!e)return;const t=e.replace(/"/g,'\\"');try{await De.send(`rm "${t}"`),ze("Playlist deleted","info"),await this.loadPlaylists()}catch(a){console.error(a),ze("Delete failed","error")}},async renamePlaylist(e,t){if(!e||!t)return;const a=e.replace(/"/g,'\\"'),n=t.replace(/"/g,'\\"');try{await De.send(`rename "${a}" "${n}"`),ze("Playlist renamed","success"),await this.loadPlaylists()}catch(s){console.error(s),ze("Rename failed","error")}},async openPlaylistDetails(e){if(!e)return;os.set(!0);const t=e.replace(/"/g,'\\"');try{const a=await De.send(`listplaylistinfo "${t}"`),n=aa.parseTracks(a),s=n.map(o=>o.file).filter(o=>o&&!o.startsWith("http"));let i=new Map;if(s.length>0)try{i=await Ia.getFilesMap(s)}catch(o){console.warn("Failed to hydrate playlist from DB",o)}const l=n.map(o=>{const u=i.get(o.file);return u?{...o,thumbHash:u.thumbHash,qualityBadge:u.qualityBadge,title:o.title||u.title,artist:o.artist||u.artist,album:o.album||u.album,_uid:si()}:{...o,_uid:si()}});Br.set(l)}catch(a){console.error(a),ze("Could not load playlist","error")}finally{os.set(!1)}},async movePlaylistTrack(e,t,a){const n=e.replace(/"/g,'\\"');try{await De.send(`playlistmove "${n}" ${t} ${a}`)}catch{ze("Move failed","error")}},async removeFromPlaylist(e,t){const a=e.replace(/"/g,'\\"');try{await De.send(`playlistdelete "${a}" ${t}`),ze("Track removed","success")}catch{ze("Delete failed","error")}},async loadFavorites(){try{const e=await De.send(`listplaylistinfo "${Rr}"`),t=aa.parseTracks(e),a=new Set;t.forEach(n=>{n.file&&a.add(n.file)}),ja.set(a)}catch{ja.set(new Set)}},async toggleFavorite(e){if(!e||!e.file)return;const t=e.file,a=t.replace(/"/g,'\\"'),n=t.startsWith("http"),s=et(ja);let i=s.has(t);if(!i&&n){const l=pr(t);for(const o of s)if(pr(o)===l){i=!0;break}}ja.update(l=>{const o=new Set(l);if(i){if(o.delete(t),n){const u=pr(t);for(const c of o)pr(c)===u&&o.delete(c)}}else o.add(t);return o}),fi=fi.then(async()=>{try{const l=await De.send(`listplaylistinfo "${Rr}"`),o=aa.parseTracks(l);let u=[];if(o.forEach((c,v)=>{let h=!1;(c.file===t||n&&pr(c.file)===pr(t)||n&&(c.file.includes(t)||t.includes(c.file)))&&(h=!0),h&&u.push(v)}),i){if(u.length>0){u.sort((c,v)=>v-c);for(const c of u)await De.send(`playlistdelete "${Rr}" ${c}`);ze("Removed from Favorites","info")}}else u.length>0?console.log("[Fav] Track already exists. Skipping."):(await De.send(`playlistadd "${Rr}" "${a}"`),o.length>0&&await De.send(`playlistmove "${Rr}" ${o.length} 0`),ze("Added to Favorites","success"))}catch(l){console.error("Fav action failed",l),ze("Action failed","error")}finally{await this.loadFavorites()}})}};function bo(){De.connect(),gd(),ha.loadPlaylists(),ha.loadFavorites()}function Tn(e){return De.send(e)}const{togglePlay:Rn,toggleRandom:tr,toggleRepeat:ar,setVolume:xa,seek:Ps,addToQueue:kd,playNext:xd,removeFromQueue:Ed,moveTrack:Sd,saveQueue:Td,playAllTracks:Ls,addAllToQueue:zs,playUri:Md}=sa,{syncLibrary:$d,loadRadioStations:Ad,loadPlaylists:Rs,openPlaylistDetails:yo,toggleFavorite:wo,loadFavorites:Cd,removeFromPlaylist:ko,movePlaylistTrack:xo}=ha;function Zr(e){const t=et(Yt),a=et(Ha),n=et(Ln);if(t.file&&t.file.startsWith("http")&&a.length>0&&!t.isYandex&&(e==="next"||e==="previous")){let i=a.findIndex(o=>o.name===n);i===-1&&(i=0);let l;e==="next"?(l=i+1,l>=a.length&&(l=0)):(l=i-1,l<0&&(l=a.length-1)),js(a[l])}else e==="next"&&sa.next(),e==="previous"&&sa.previous()}function js(e){if(!e)return;Ln.set(e.name);const t=e[1]||e.station||e.file||e.url;t&&sa.playUri(t,{title:e.name,artist:e.genre||"Radio Stream",stationName:e.name})}function jn(e){e&&(Ln.set(null),sa.playUri(e.file,{title:e.title,artist:e.artist,album:e.album,stationName:null}))}const Pd=Object.freeze(Object.defineProperty({__proto__:null,addAllToQueue:zs,addToQueue:kd,connect:bo,loadFavorites:Cd,loadPlaylists:Rs,loadRadioStations:Ad,movePlaylistTrack:xo,moveTrack:Sd,nav:Zr,openPlaylistDetails:yo,playAllTracks:Ls,playNext:xd,playStation:js,playTrackOptimistic:jn,playUri:Md,removeFromPlaylist:ko,removeFromQueue:Ed,runMpdRequest:Tn,saveQueue:Td,seek:Ps,setVolume:xa,syncLibrary:$d,toggleFavorite:wo,togglePlay:Rn,toggleRandom:tr,toggleRepeat:ar},Symbol.toStringTag,{value:"Module"})),Hr={async request(e,t={}){const a=new URL(window.location.origin+La.YANDEX);a.searchParams.append("action",e);for(const s in t)a.searchParams.append(s,t[s]);const n=await fetch(a);if(!n.ok)throw new Error("API Error");return await n.json()},async search(e){return await this.request("search",{query:e})},async getFavorites(e=0){return await this.request("get_favorites",{page:e})},async toggleLike(e,t){const a=t?"dislike":"like";return await this.request(a,{track_id:e})},async playRadio(e){return await this.request("play_station",{station:"track:"+e})}};function Is(e,t=2e3){let a;const n=i=>{i.type==="mousedown"&&i.button!==0||(a=setTimeout(()=>{e.dispatchEvent(new CustomEvent("longpress",{detail:{originalEvent:i}}))},t))},s=()=>{clearTimeout(a)};return e.addEventListener("mousedown",n),e.addEventListener("touchstart",n,{passive:!0}),e.addEventListener("mouseup",s),e.addEventListener("mouseleave",s),e.addEventListener("touchend",s),e.addEventListener("touchcancel",s),e.addEventListener("touchmove",s),{destroy(){e.removeEventListener("mousedown",n),e.removeEventListener("touchstart",n),e.removeEventListener("mouseup",s),e.removeEventListener("mouseleave",s),e.removeEventListener("touchend",s),e.removeEventListener("touchcancel",s),e.removeEventListener("touchmove",s)}}}var Ld=k('<div class="drag-handle svelte-5cs2hz" title="Drag to reorder"><div class="icon-small svelte-5cs2hz"><!></div></div>'),zd=k('<div class="eq-anim svelte-5cs2hz"><span class="bar b1 svelte-5cs2hz"></span> <span class="bar b2 svelte-5cs2hz"></span> <span class="bar b3 svelte-5cs2hz"></span></div>'),Rd=k('<div class="icon-small svelte-5cs2hz"><!></div>'),jd=k('<div class="icon-small svelte-5cs2hz"><!></div>'),Id=k('<div class="icon-small accent svelte-5cs2hz"><!></div>'),Nd=k('<span class="num svelte-5cs2hz"> </span>'),Dd=k('<button class="num-box svelte-5cs2hz"><!></button>'),Od=k('<div slot="fallback" class="icon-ph svelte-5cs2hz"><!></div>'),Fd=k('<span class="meta-tag quality svelte-5cs2hz"> </span>'),qd=k('<button class="btn-icon small remove svelte-5cs2hz"><!></button>'),Bd=k('<div class="dur svelte-5cs2hz"> </div>'),Ud=k('<div role="button" tabindex="0"><div class="left svelte-5cs2hz"><!> <div class="thumb svelte-5cs2hz"><!></div></div> <div class="info svelte-5cs2hz"><div class="title-row svelte-5cs2hz"><div class="title text-ellipsis svelte-5cs2hz"> </div> <!></div> <div> </div></div> <div class="right svelte-5cs2hz"><button class="btn-icon small context-menu-btn svelte-5cs2hz" title="Options"><!></button> <button><!></button> <!></div></div>');function Mr(e,t){Et(t,!1);const a=()=>xe(ld,"$yandexFavorites",o),n=()=>xe(ja,"$favorites",o),s=()=>xe(Wt,"$navigationStack",o),i=()=>xe(Dt,"$activeMenuTab",o),l=()=>xe(Ha,"$stations",o),[o,u]=jt(),c=T(),v=T(),h=T(),f=T(),p=T(),E=T(),S=T(),w=T(),x=T(),H=T(),oe=T(),J=T(),K=T(),pe=T(),N=T(),B=T(),D=T();let U=mt(t,"track",8),_e=mt(t,"index",8),P=mt(t,"isEditable",8,!1),O=mt(t,"playingIndex",24,()=>-1),de=mt(t,"playingFile",8,null),Y=mt(t,"isPlaying",8,!1);const ve=Ts();let z=T(!1),j=T(!1);function Ee(ie){if(r(S))return"â";if(!ie)return"0:00";const Pe=parseInt(ie,10),Se=Math.floor(Pe/60),je=Pe%60;return`${Se}:${je.toString().padStart(2,"0")}`}function V(ie){ie.stopPropagation(),r(p)?Rn():ve("play")}function G(){return r(v)?.view==="details"&&r(v).data?.name?{type:"playlist",playlistName:r(v).data.name,index:_e()}:r(h)?{type:"queue",index:_e()}:{type:"general"}}function he(ie){ie.stopPropagation(),Kr(ie,U(),G())}function ne(ie){P()||Kr(ie.detail.originalEvent,U(),G())}function be(ie){ie.stopPropagation(),!r(S)&&U().artist&&(Dt.set("artists"),qa("albums_by_artist",{name:U().artist}))}async function $(ie){if(ie.stopPropagation(),U().isYandex)try{await Hr.toggleLike(U().id,r(c)),ze(r(c)?"Removed from Yandex Likes":"Added to Yandex Likes","success")}catch{ze("Failed to update Yandex like","error")}else wo(U())}re(()=>R(U()),()=>{U()&&g(j,!1)}),re(()=>(R(U()),a(),n()),()=>{g(c,U().isYandex?a().has(String(U().id)):n().has(U().file))}),re(()=>s(),()=>{g(v,s()[s().length-1])}),re(()=>(r(v),i()),()=>{g(h,r(v)?.view==="queue"||r(v)?.view==="root"&&i()==="queue")}),re(()=>(r(h),R(_e()),R(O())),()=>{g(f,r(h)?Number(_e())===O():!1)}),re(()=>(R(U()),R(de())),()=>{g(p,U().file===de())}),re(()=>(r(p),r(f)),()=>{g(E,r(p)&&!r(f))}),re(()=>R(U()),()=>{g(S,U().file&&(U().file.startsWith("http")||U().file.includes("RADIO"))&&!U().isYandex)}),re(()=>(r(f),R(Y()),r(z)),()=>{g(w,r(f)&&Y()&&r(z))}),re(()=>(r(f),R(Y()),r(z)),()=>{g(x,r(f)&&Y()&&!r(z))}),re(()=>(r(f),R(Y()),r(z)),()=>{g(H,r(f)&&!Y()&&!r(z))}),re(()=>(r(z),r(w)),()=>{g(oe,r(z)&&!r(w))}),re(()=>R(U()),()=>{g(J,U().title||U().file?.split("/").pop())}),re(()=>R(U()),()=>{g(K,U().artist||"Unknown")}),re(()=>R(U()),()=>{g(pe,Ee(U().time))}),re(()=>R(U()),()=>{g(N,U().qualityBadge?U().qualityBadge.split(" ")[0]:null)}),re(()=>{},()=>{g(B,null)}),re(()=>(r(j),R(U()),l(),r(B),Gr),()=>{g(D,r(j)?Tr(U(),l(),r(B)):Gr(U(),"sm",l(),r(B)))}),Ht(),At();var Z=Ud();let A;var q=d(Z),I=d(q);{var F=ie=>{var Pe=Ld(),Se=d(Pe),je=d(Se);ee(je,()=>(R(y),b(()=>y.DRAG_HANDLE))),M("mousedown",Pe,Ye=>ve("startdrag",Ye)),M("touchstart",Pe,Ye=>ve("startdrag",Ye),void 0,!0),M("click",Pe,Xt(function(Ye){Xr.call(this,t,Ye)})),m(ie,Pe)},Q=ie=>{var Pe=Dd(),Se=d(Pe);{var je=Ue=>{var He=zd();m(Ue,He)},Ye=Ue=>{var He=nt(),Qe=Ce(He);{var Ze=qe=>{var Ne=Rd(),Ge=d(Ne);ee(Ge,()=>(R(y),b(()=>y.PAUSE))),m(qe,Ne)},at=qe=>{var Ne=nt(),Ge=Ce(Ne);{var tt=Xe=>{var We=jd(),rt=d(We);ee(rt,()=>(R(y),b(()=>y.PLAY))),m(Xe,We)},Ve=Xe=>{var We=nt(),rt=Ce(We);{var bt=dt=>{var lt=Id(),ct=d(lt);ee(ct,()=>(R(y),b(()=>y.PLAY))),m(dt,lt)},gt=dt=>{var lt=Nd(),ct=d(lt);fe(()=>ue(ct,_e()+1)),m(dt,lt)};L(rt,dt=>{r(H)?dt(bt):dt(gt,!1)},!0)}m(Xe,We)};L(Ge,Xe=>{r(oe)?Xe(tt):Xe(Ve,!1)},!0)}m(qe,Ne)};L(Qe,qe=>{r(w)?qe(Ze):qe(at,!1)},!0)}m(Ue,He)};L(Se,Ue=>{r(x)?Ue(je):Ue(Ye,!1)})}M("click",Pe,V),m(ie,Pe)};L(I,ie=>{P()?ie(F):ie(Q,!1)})}var X=_(I,2),se=d(X);Ua(se,{get src(){return r(D)},get alt(){return r(J)},radius:"4px",$$events:{error:()=>g(j,!0)},$$slots:{fallback:(ie,Pe)=>{var Se=Od(),je=d(Se);ee(je,()=>(r(S),R(y),b(()=>r(S)?y.RADIO:y.ALBUMS))),ut(1,Se,()=>yt),m(ie,Se)}}});var ce=_(q,2),ke=d(ce),le=d(ke),me=d(le),Ae=_(le,2);{var Re=ie=>{var Pe=Fd(),Se=d(Pe);fe(()=>ue(Se,r(N))),m(ie,Pe)};L(Ae,ie=>{r(N)&&!r(S)&&ie(Re)})}var C=_(ke,2);let W;var te=d(C),ge=_(ce,2),Le=d(ge),Me=d(Le);ee(Me,()=>(R(y),b(()=>y.DOTS)));var $e=_(Le,2);let Oe;var ae=d($e);ee(ae,()=>(r(c),R(y),b(()=>r(c)?y.HEART_FILLED:y.HEART)));var we=_($e,2);{var ye=ie=>{var Pe=qd(),Se=d(Pe);ee(Se,()=>(R(y),b(()=>y.REMOVE))),M("click",Pe,Xt(()=>ve("remove",{index:_e()}))),m(ie,Pe)},Ie=ie=>{var Pe=Bd(),Se=d(Pe);fe(()=>ue(Se,r(pe))),m(ie,Pe)};L(we,ie=>{P()?ie(ye):ie(Ie,!1)})}Ot(()=>M("click",Z,()=>!r(f)&&ve("play"))),Ot(()=>M("mouseenter",Z,()=>g(z,!0))),Ot(()=>M("mouseleave",Z,()=>g(z,!1))),xs(Z,ie=>Is?.(ie)),Ot(()=>M("longpress",Z,ne)),fe(()=>{A=Ke(Z,1,"row svelte-5cs2hz",null,A,{active:r(f),striped:r(E),editable:P()}),Ut(le,"title",r(J)),ue(me,r(J)),W=Ke(C,1,"artist text-ellipsis svelte-5cs2hz",null,W,{link:!r(S)&&!U().isYandex}),ue(te,r(K)),Oe=Ke($e,1,"btn-icon small svelte-5cs2hz",null,Oe,{liked:r(c)})}),M("click",C,function(...ie){(U().isYandex?void 0:be)?.apply(this,ie)}),M("click",Le,he),M("click",$e,Xt($)),m(e,Z),St(),u()}const un=100,hi=5,pi=25,gi=3;function Yd({tracksStore:e,onMoveTrack:t}){const a=Be(!1),n=Be(!1),s=Be(!1),i=Be(null),l=Be(null),o=Be(null),u=Be({x:0,y:0,width:0,height:0,grabOffsetX:0,grabOffsetY:0}),c=Be(null);let v=!1,h=0,f=0,p=0,E=0;const S={scrollContainer:null,listBodyContainer:null};let w=null;function x(P,O,de){const Y=P.detail;if(Y.button===2||(window.getSelection&&window.getSelection().removeAllRanges(),!S.scrollContainer))return;const z=S.scrollContainer.querySelectorAll(".row-wrapper")[O];if(!z)return;const j=z.getBoundingClientRect(),Ee=Y.touches?Y.touches[0].clientX:Y.clientX,V=Y.touches?Y.touches[0].clientY:Y.clientY,G=Ee-j.left,he=V-j.top;v=!0,a.set(!1),n.set(!1),h=Ee,f=V,p=Ee,E=V,i.set(O),l.set(O),c.set(de),o.set(null),u.set({x:Ee,y:V,width:j.width,height:j.height,grabOffsetX:G,grabOffsetY:he})}function H(P){if(!v||et(n))return;const O=P.touches?P.touches[0].clientX:P.clientX,de=P.touches?P.touches[0].clientY:P.clientY;if(!et(a)){const Y=Math.abs(O-h),ve=Math.abs(de-f);if(Y<gi&&ve<gi)return;a.set(!0)}P.cancelable&&P.preventDefault(),p=O,E=de,u.update(Y=>({...Y,x:p,y:E})),B(E),oe()}function oe(){if(!S.listBodyContainer)return;const P=S.listBodyContainer.getBoundingClientRect(),O=et(u),Y=E-P.top-O.grabOffsetY+O.height/2,ve=et(e).length;if(Y<0){l.set(0);return}if(Y>P.height){l.set(ve);return}const z=Array.from(S.listBodyContainer.querySelectorAll(".row-wrapper"));let j=-1,Ee=1/0;z.forEach((V,G)=>{const he=V.offsetTop+V.offsetHeight/2,ne=Math.abs(Y-he);ne<Ee&&(Ee=ne,j=G)}),j!==-1&&l.set(j)}function J(P){if(v){if(v=!1,!et(a)){pe();return}K()}}async function K(){U(),oe(),a.set(!1),n.set(!0);const P=et(l);if(S.listBodyContainer&&P!==null){const j=S.listBodyContainer.querySelectorAll(".row-wrapper"),Ee=S.listBodyContainer.getBoundingClientRect(),V=j[P];let G=0,he=0,ne=!1;if(V)G=Ee.top+V.offsetTop,he=Ee.left+V.offsetLeft,ne=!0;else if(P>=j.length&&j.length>0){const be=j[j.length-1];G=Ee.top+be.offsetTop+be.offsetHeight,he=Ee.left+be.offsetLeft,ne=!0}else j.length===0&&(G=Ee.top,he=Ee.left,ne=!0);ne&&u.update(be=>({...be,y:G+be.grabOffsetY,x:he+be.grabOffsetX}))}await new Promise(j=>setTimeout(j,250)),s.set(!0),await wr();const O=et(i),de=et(e).length;let Y=Math.max(0,Math.min(P,de)),ve=Y;if(O!==null&&O!==Y){const j=[...et(e)],[Ee]=j.splice(O,1);ve=Math.max(0,Math.min(ve,j.length)),j.splice(ve,0,Ee),e.set(j),t&&t(O,ve),i.set(ve)}await wr(),c.set(null),i.set(null),l.set(null),n.set(!1);const z=O!==Y?ve:O;o.set(z),await wr(),requestAnimationFrame(()=>{requestAnimationFrame(()=>{s.set(!1),setTimeout(()=>{o.set(null)},300)})})}function pe(){v=!1,N()}function N(){a.set(!1),n.set(!1),i.set(null),l.set(null),c.set(null),U()}function B(P){if(!S.scrollContainer)return;const{top:O,bottom:de}=S.scrollContainer.getBoundingClientRect(),Y=P-O,ve=de-P;U();let z=0;if(Y<un&&Y>0){const j=1-Y/un;z=-(hi+pi*(j*j))}else if(ve<un&&ve>0){const j=1-ve/un;z=hi+pi*(j*j)}z!==0&&D(z)}function D(P){w||(w=requestAnimationFrame(function O(){S.scrollContainer&&(S.scrollContainer.scrollTop+=P,et(a)&&(u.update(de=>({...de,x:p,y:E})),oe(),w=requestAnimationFrame(O)))}))}function U(){w&&(cancelAnimationFrame(w),w=null)}function _e(P,O,de,Y,ve,z){return z||!O&&!de||Y===null||ve===null?"":P===Y?"opacity: 0; pointer-events: none;":Y===ve?"":Y<ve&&P>Y&&P<=ve?"transform: translateY(-100%);":Y>ve&&P>=ve&&P<Y?"transform: translateY(100%);":""}return{isDragging:a,isDropping:n,isReordering:s,draggingIndex:i,hoverIndex:l,justDroppedIndex:o,draggedItemData:c,ghostCoords:u,refs:S,onDragInit:x,onPointerMove:H,onPointerUp:J,getRowStyle:_e,cancelDrag:pe}}var Hd=k('<div><div style="pointer-events: none; width: 100%; height: 100%;" class="svelte-ym6b2"><!></div></div>'),Vd=k('<div class="skeleton-row svelte-ym6b2"><div class="sk-left svelte-ym6b2"><!> <!></div> <div class="sk-info svelte-ym6b2"><!> <!></div> <div class="sk-right svelte-ym6b2"><!></div></div>'),Wd=k('<div class="skeletons-wrapper svelte-ym6b2"></div>'),Qd=k("<div><!></div>"),Xd=k('<div class="content-padded svelte-ym6b2" style="text-align: center; opacity: 0.5;"> </div>'),Kd=k("<!> <!> <!>",1),Gd=k('<div><!> <div class="list-body svelte-ym6b2"><!> <!></div></div>');function nn(e,t){Et(t,!1);const a=()=>xe(Wt,"$navigationStack",p),n=()=>xe(Dt,"$activeMenuTab",p),s=()=>xe(U,"$isDragging",p),i=()=>xe(_e,"$isDropping",p),l=()=>xe(ve,"$draggedItemData",p),o=()=>xe(z,"$ghostCoords",p),u=()=>xe(O,"$draggingIndex",p),c=()=>xe(S(),"$itemsStore",p),v=()=>xe(Y,"$justDroppedIndex",p),h=()=>xe(P,"$isReordering",p),f=()=>xe(de,"$hoverIndex",p),[p,E]=jt();let S=mt(t,"itemsStore",8),w=mt(t,"isEditMode",8,!1),x=mt(t,"isLoading",8,!1),H=mt(t,"emptyText",8,"List is empty"),oe=mt(t,"onMoveItem",8,(I,F)=>{}),J=T(""),K=T(0),pe=T(!1);Ya(async()=>{g(K,Jc(r(J))),!x()&&r(K)>0&&r(B).refs.scrollContainer&&(await wr(),on(B,r(B).refs.scrollContainer.scrollTop=r(K)),g(pe,!0))});async function N(){await wr(),r(B).refs.scrollContainer&&(on(B,r(B).refs.scrollContainer.scrollTop=r(K)),g(pe,!0))}co(()=>{r(B).cancelDrag(),r(B).refs.scrollContainer&&Zc(r(J),r(B).refs.scrollContainer.scrollTop)});const B=T(Yd({tracksStore:S(),onMoveTrack:(I,F)=>{oe()(I,F)}})),D=r(B),U=D.isDragging,_e=D.isDropping,P=D.isReordering,O=D.draggingIndex,de=D.hoverIndex,Y=D.justDroppedIndex,ve=D.draggedItemData,z=D.ghostCoords,j=T(D.refs);function Ee(I,F,Q){w()&&r(B).onDragInit(I,F,Q)}re(()=>(a(),n()),()=>{const I=a(),F=I[I.length-1],Q=n();if(F&&F.view==="root")g(J,`root_${Q}`);else if(F){const X=F.data?F.data.name||F.data:"unknown";g(J,`${F.view}_${X}`)}}),re(()=>(R(x()),r(pe),r(K),r(B)),()=>{!x()&&!r(pe)&&r(K)>0&&r(B).refs.scrollContainer&&N()}),Ht(),At();var V=Gd();M("mousemove",za,function(...I){r(B).onPointerMove?.apply(this,I)}),M("mouseup",za,function(...I){r(B).onPointerUp?.apply(this,I)}),M("touchmove",za,function(...I){r(B).onPointerMove?.apply(this,I)},void 0,!1),M("touchend",za,function(...I){r(B).onPointerUp?.apply(this,I)}),M("touchcancel",za,function(...I){r(B).onPointerUp?.apply(this,I)});let G;var he=d(V);{var ne=I=>{var F=Hd();let Q;var X=d(F),se=d(X);Nr(se,t,"row",{get item(){return l()},get index(){return u()},isGhost:!0,startDrag:()=>{}}),fe(()=>{Q=Ke(F,1,"floating-item svelte-ym6b2",null,Q,{dropping:i()}),ht(F,`
            top: ${o(),b(()=>o().y-o().grabOffsetY)??""}px; 
            left: ${o(),b(()=>o().x-o().grabOffsetX)??""}px;
            width: ${o(),b(()=>o().width)??""}px; 
            height: ${o(),b(()=>o().height)??""}px;
        `)}),m(I,F)};L(he,I=>{(s()||i())&&l()&&I(ne)})}var be=_(he,2),$=d(be);Nr($,t,"header",{});var Z=_($,2);{var A=I=>{var F=Wd();wt(F,4,()=>Array(10),ra,(Q,X)=>{var se=Vd(),ce=d(se),ke=d(ce);Rt(ke,{width:"24px",height:"24px",radius:"4px",style:"opacity: 0.3"});var le=_(ke,2);Rt(le,{width:"40px",height:"40px",radius:"4px",style:"margin-left: 12px;"});var me=_(ce,2),Ae=d(me);Rt(Ae,{width:"40%",height:"14px",radius:"4px",style:"margin-bottom: 6px;"});var Re=_(Ae,2);Rt(Re,{width:"25%",height:"12px",radius:"4px",style:"opacity: 0.6"});var C=_(me,2),W=d(C);Rt(W,{width:"30px",height:"12px",radius:"4px"}),m(Q,se)}),m(I,F)},q=I=>{var F=Kd(),Q=Ce(F);wt(Q,3,c,(ke,le)=>ke._uid||le,(ke,le,me)=>{var Ae=Qd();let Re;var C=d(Ae);Nr(C,t,"row",{get item(){return r(le)},get index(){return r(me)},isGhost:!1,startDrag:W=>Ee(W,r(me),r(le))}),fe(W=>{Re=Ke(Ae,1,"row-wrapper svelte-ym6b2",null,Re,{"ghost-placeholder":u()===r(me)&&(s()||i()),"just-dropped":v()===r(me),"no-transition":h()}),ht(Ae,W)},[()=>(r(B),R(r(me)),s(),i(),u(),f(),h(),b(()=>r(B).getRowStyle(r(me),s(),i(),u(),f(),h())))]),m(ke,Ae)});var X=_(Q,2);{var se=ke=>{var le=Xd(),me=d(le);fe(()=>ue(me,H())),m(ke,le)};L(X,ke=>{c(),b(()=>c().length===0)&&ke(se)})}var ce=_(X,2);Nr(ce,t,"footer",{}),m(I,F)};L(Z,I=>{x()?I(A):I(q,!1)})}Ba(be,I=>on(j,r(j).listBodyContainer=I),()=>r(j)?.listBodyContainer),Ba(V,I=>on(j,r(j).scrollContainer=I),()=>r(j)?.scrollContainer),fe(()=>G=Ke(V,1,"base-list-scroll-container svelte-ym6b2",null,G,{dragging:s()})),ut(1,be,()=>yt,()=>({duration:200})),m(e,V),St(),E()}var Zd=k('<div slot="fallback" class="icon-fallback svelte-1eh2rsb"><!></div>'),Jd=k('<span class="meta-tag svelte-1eh2rsb"> </span>'),ev=k('<div class="header-subtitle-row svelte-1eh2rsb"><h2 class="header-sub-text svelte-1eh2rsb"> </h2> <!></div>'),tv=k('<span class="meta-tag svelte-1eh2rsb"> </span>'),av=k('<span class="meta-tag svelte-1eh2rsb"> </span>'),rv=k('<span class="meta-tag quality svelte-1eh2rsb"> </span>'),nv=k('<div slot="header" class="content-padded svelte-1eh2rsb"><div class="view-header svelte-1eh2rsb"><div class="header-art svelte-1eh2rsb"><div style="width: 100%; height: 100%;" class="svelte-1eh2rsb"><!></div></div> <div class="header-info svelte-1eh2rsb"><div class="header-text-group svelte-1eh2rsb"><div class="header-label svelte-1eh2rsb"> </div> <h1 class="header-title svelte-1eh2rsb"> </h1> <!> <div class="meta-badges svelte-1eh2rsb"><!> <!> <!></div></div> <div class="header-actions svelte-1eh2rsb"><button class="btn-primary svelte-1eh2rsb"> </button> <button class="btn-secondary svelte-1eh2rsb"> </button></div></div></div></div>'),sv=k('<div slot="row" class="svelte-1eh2rsb"><!></div>'),iv=k("<button> </button>"),ov=k('<div class="sort-backdrop svelte-1eh2rsb"></div> <div class="sort-menu svelte-1eh2rsb"></div>',1),lv=k('<div class="sort-wrapper svelte-1eh2rsb"><button class="sort-trigger svelte-1eh2rsb"><span class="svelte-1eh2rsb"> </span> <span class="sort-trigger-icon svelte-1eh2rsb"><!></span></button> <!></div>'),cv=k('<div class="music-card skeleton-card svelte-1eh2rsb"><div class="card-img-container svelte-1eh2rsb"><!></div> <div class="card-title svelte-1eh2rsb" style="margin-top: 12px;"><!></div> <div class="card-sub-row svelte-1eh2rsb" style="margin-top: 6px;"><!></div></div>'),dv=k('<div class="music-grid svelte-1eh2rsb"></div>'),vv=k('<div class="group-header header-label svelte-1eh2rsb"> </div>'),uv=k('<div slot="fallback" class="icon-fallback svelte-1eh2rsb"><!></div>'),fv=k('<div class="card-sub text-ellipsis svelte-1eh2rsb"> </div>'),hv=k('<div class="card-badge svelte-1eh2rsb"> </div>'),pv=k('<div class="card-badge quality svelte-1eh2rsb"> </div>'),gv=k('<div class="music-card svelte-1eh2rsb" role="button" tabindex="0"><div class="card-img-container svelte-1eh2rsb"><!> <div class="play-overlay svelte-1eh2rsb"><span class="overlay-icon svelte-1eh2rsb"><!></span></div></div> <div class="card-title svelte-1eh2rsb"> </div> <div class="card-sub-row svelte-1eh2rsb"><!> <!> <!></div></div>'),_v=k('<div class="empty-text svelte-1eh2rsb">No results found</div>'),mv=k('<div class="music-grid svelte-1eh2rsb"></div>'),bv=k('<div class="content-padded svelte-1eh2rsb"><div class="search-input-container svelte-1eh2rsb"><span class="search-icon svelte-1eh2rsb"><!></span> <input type="text" class="svelte-1eh2rsb"/> <!></div> <!></div>'),yv=k("<div><!></div>");function wv(e,t){Et(t,!1);const a=()=>xe(v,"$itemsStore",s),n=()=>xe(Wt,"$navigationStack",s),[s,i]=jt(),l=T(),o=T(),u=T();let c=mt(t,"activeCategory",8,"artists");const v=Be([]);let h=T(!0),f=T(""),p=T("name"),E=T(!1);const S=[{id:"name",label:"A-Z"},{id:"artist",label:"Artist"},{id:"year",label:"Oldest"},{id:"year_desc",label:"Newest"}];let w=T(!1),x=T(!1),H=T(null),oe=T(""),J=T(""),K=T(""),pe=T(0),N=0;function B(){g(E,!r(E))}function D(V){g(p,V),g(E,!1)}function U(V,G){if(!V||V.length===0)return[];const he=[...V].sort((ne,be)=>{switch(G){case"name":return ne.displayName.localeCompare(be.displayName,void 0,{sensitivity:"base"});case"artist":const $=ne.artist||"",Z=be.artist||"",A=$.localeCompare(Z,void 0,{sensitivity:"base"});return A!==0?A:(parseInt(ne.year)||0)-(parseInt(be.year)||0);case"year":return(parseInt(ne.year)||0)-(parseInt(be.year)||0);case"year_desc":return(parseInt(be.year)||0)-(parseInt(ne.year)||0);default:return 0}});if(G==="artist"){const ne=[];let be=null;return he.forEach($=>{const Z=$.artist||"Unknown Artist";Z!==be&&(ne.push({_uid:`header-${Z}`,isHeader:!0,title:Z}),be=Z),ne.push($)}),ne}return he}async function _e(V,G){if(!G)return;const he=++N;g(h,!0),v.set([]),g(H,G.data),g(oe,""),g(J,""),g(K,""),g(pe,0),console.log(`[LibraryView #${he}] Start loading:`,G);try{let ne=[];if(G.view==="root")ne=V==="artists"?await Ia.getArtists():await Ia.getAlbums();else if(G.view==="albums_by_artist"){const $=G.data.name||G.data;ne=await Ia.getArtistAlbums($),g(p,"year")}else if(G.view==="tracks_by_album"){const $=G.data.name||G.data,Z=G.data.artist;ne=await Ia.getAlbumTracks($,Z)}if(he!==N){console.warn(`[LibraryView #${he}] Request cancelled (stale).`);return}const be=ne.map(($,Z)=>{const q=typeof $=="string"?{name:$}:$;let I=String(q.year||"");return I.length>4&&(I=I.substring(0,4)),{...q,displayName:q.name||q.title||q.artist||"Unknown",thumbFile:q.file||null,year:I,_uid:(q.file||q.name||Z)+V+G.view}});if(console.log(`[LibraryView #${he}] Setting ${be.length} items.`),v.set(be),G.view==="tracks_by_album"&&be.length>0){g(H,be[0]),g(pe,be.length),g(K,be[0].year);const $=be.reduce((Z,A)=>Z+(A.time||0),0);if($>0){const Z=Math.floor($/3600),A=Math.floor($%3600/60);g(oe,Z>0?`${Z} hr ${A} min`:`${A} min`)}be[0].qualityBadge&&g(J,be[0].qualityBadge)}}catch(ne){he===N&&(console.error(ne),v.set([]))}finally{he===N&&g(h,!1)}}function P(V){r(u).view==="root"?c()==="artists"?qa("albums_by_artist",V):qa("tracks_by_album",V):r(u).view==="albums_by_artist"&&qa("tracks_by_album",V)}function O(){const V=a();if(V.length>0){const G=r(u).data.name||r(u).data.displayName||"this selection";fa({title:"Replace Queue?",message:`This will clear your queue and play all tracks from "${G}".`,confirmLabel:"Play",type:"confirm",onConfirm:()=>{g(w,!0),Ls(V)}})}}function de(){const V=a();V.length>0&&(g(x,!0),zs(V),setTimeout(()=>{g(x,!1)},2e3))}re(()=>R(c()),()=>{c()&&(g(f,""),c(),g(p,"name"))}),re(()=>(r(p),y),()=>{g(l,r(p)==="year_desc"?y.SORT_ASC:y.SORT_DESC)}),re(()=>(a(),r(f),r(p)),()=>{g(o,U(a().filter(V=>{if(!r(f))return!0;const G=r(f).toLowerCase();return V.displayName.toLowerCase().includes(G)||V.artist&&V.artist.toLowerCase().includes(G)}),r(p)))}),re(()=>n(),()=>{g(u,n()[n().length-1])}),re(()=>(R(c()),r(u)),()=>{_e(c(),r(u))}),re(()=>r(u),()=>{r(u)&&(g(w,!1),g(x,!1),g(E,!1))}),Ht(),At();var Y=yv();let ve;var z=d(Y);{var j=V=>{nn(V,{get itemsStore(){return v},get isLoading(){return r(h)},isEditMode:!1,emptyText:"No tracks found",$$slots:{header:(G,he)=>{var ne=nv(),be=d(ne),$=d(be),Z=d($),A=d(Z);{let ae=pt(()=>(R(Tr),r(H),b(()=>Tr(r(H)))));Ua(A,{get src(){return r(ae)},alt:"Art",radius:"8px",$$slots:{fallback:(we,ye)=>{var Ie=Zd(),ie=d(Ie);ee(ie,()=>(R(y),b(()=>y.ALBUMS))),m(we,Ie)}}})}var q=_($,2),I=d(q),F=d(I),Q=d(F),X=_(F,2),se=d(X),ce=_(X,2);{var ke=ae=>{var we=ev(),ye=d(we),Ie=d(ye),ie=_(ye,2);{var Pe=Se=>{var je=Jd(),Ye=d(je);fe(()=>ue(Ye,r(K))),m(Se,je)};L(ie,Se=>{r(K)&&r(K)!=="0"&&Se(Pe)})}fe(()=>ue(Ie,(r(H),b(()=>r(H).artist)))),m(ae,we)};L(ce,ae=>{r(H),b(()=>r(H)&&r(H).artist)&&ae(ke)})}var le=_(ce,2),me=d(le);{var Ae=ae=>{var we=tv(),ye=d(we);fe(()=>ue(ye,`${r(pe)??""} tracks`)),m(ae,we)};L(me,ae=>{r(pe)>0&&ae(Ae)})}var Re=_(me,2);{var C=ae=>{var we=av(),ye=d(we);fe(()=>ue(ye,r(oe))),m(ae,we)};L(Re,ae=>{r(oe)&&ae(C)})}var W=_(Re,2);{var te=ae=>{var we=rv(),ye=d(we);fe(()=>ue(ye,r(J))),m(ae,we)};L(W,ae=>{r(J)&&ae(te)})}var ge=_(I,2),Le=d(ge),Me=d(Le),$e=_(Le,2),Oe=d($e);fe(()=>{ue(Q,(r(u),b(()=>r(u).view==="albums_by_artist"?"Artist":"Album"))),Ut(X,"title",(r(u),b(()=>r(u).data.name||r(u).data.displayName))),ue(se,(r(u),b(()=>r(u).data.name||r(u).data.displayName||"Unknown"))),Le.disabled=r(w),ue(Me,r(w)?"Playing...":"Play All"),$e.disabled=r(x),ue(Oe,r(x)?"Added":"To Queue")}),M("click",Le,O),M("click",$e,de),m(G,ne)},row:(G,he)=>{var ne=sv();const be=pt(()=>he.item),$=pt(()=>he.index);var Z=d(ne);Mr(Z,{get track(){return r(be)},get index(){return r($)},isEditable:!1,$$events:{play:()=>jn(r(be))}}),m(G,ne)}}})},Ee=V=>{var G=bv(),he=d(G),ne=d(he),be=d(ne);ee(be,()=>(R(y),b(()=>y.SEARCH)));var $=_(ne,2),Z=_($,2);{var A=Q=>{var X=lv(),se=d(X),ce=d(se),ke=d(ce),le=_(ce,2),me=d(le);ee(me,()=>r(l));var Ae=_(se,2);{var Re=C=>{var W=ov(),te=Ce(W),ge=_(te,2);wt(ge,5,()=>S,ra,(Le,Me)=>{var $e=iv();let Oe;var ae=d($e);fe(()=>{Oe=Ke($e,1,"sort-item svelte-1eh2rsb",null,Oe,{selected:r(p)===r(Me).id}),ue(ae,(r(Me),b(()=>r(Me).label)))}),M("click",$e,()=>D(r(Me).id)),m(Le,$e)}),M("click",te,B),ut(3,te,()=>yt,()=>({duration:100})),ut(3,ge,()=>Ms,()=>({start:.95,duration:100})),m(C,W)};L(Ae,C=>{r(E)&&C(Re)})}fe(C=>ue(ke,C),[()=>(r(p),b(()=>S.find(C=>C.id===r(p))?.label))]),M("click",se,B),m(Q,X)};L(Z,Q=>{R(c()),r(u),b(()=>c()==="albums"||r(u).view==="albums_by_artist")&&Q(A)})}var q=_(he,2);{var I=Q=>{var X=dv();wt(X,4,()=>Array(12),ra,(se,ce)=>{var ke=cv(),le=d(ke),me=d(le);Rt(me,{width:"100%",height:"100%",radius:"8px"});var Ae=_(le,2),Re=d(Ae);Rt(Re,{width:"80%",height:"14px",radius:"4px"});var C=_(Ae,2),W=d(C);Rt(W,{width:"50%",height:"12px",radius:"4px",style:"opacity: 0.6"}),m(se,ke)}),m(Q,X)},F=Q=>{var X=mv();wt(X,5,()=>r(o),se=>se._uid,(se,ce)=>{var ke=nt(),le=Ce(ke);{var me=Re=>{var C=vv(),W=d(C);fe(()=>ue(W,(r(ce),b(()=>r(ce).title)))),m(Re,C)},Ae=Re=>{var C=gv(),W=d(C),te=d(W);{let je=pt(()=>(R(Gr),r(ce),b(()=>Gr(r(ce),"md"))));Ua(te,{get src(){return r(je)},get alt(){return r(ce),b(()=>r(ce).displayName)},radius:"8px",$$slots:{fallback:(Ye,Ue)=>{var He=uv(),Qe=d(He);{var Ze=qe=>{var Ne=nt(),Ge=Ce(Ne);ee(Ge,()=>(R(y),b(()=>y.ARTISTS))),m(qe,Ne)},at=qe=>{var Ne=nt(),Ge=Ce(Ne);ee(Ge,()=>(R(y),b(()=>y.ALBUMS))),m(qe,Ne)};L(Qe,qe=>{c()==="artists"?qe(Ze):qe(at,!1)})}m(Ye,He)}}})}var ge=_(te,2),Le=d(ge),Me=d(Le);ee(Me,()=>(R(y),b(()=>y.PLAY)));var $e=_(W,2),Oe=d($e),ae=_($e,2),we=d(ae);{var ye=je=>{var Ye=fv(),Ue=d(Ye);fe(()=>ue(Ue,(r(ce),b(()=>r(ce).artist)))),m(je,Ye)};L(we,je=>{r(ce),b(()=>r(ce).artist)&&je(ye)})}var Ie=_(we,2);{var ie=je=>{var Ye=hv(),Ue=d(Ye);fe(()=>ue(Ue,(r(ce),b(()=>r(ce).year)))),m(je,Ye)};L(Ie,je=>{r(ce),b(()=>r(ce).year&&r(ce).year!=="0")&&je(ie)})}var Pe=_(Ie,2);{var Se=je=>{var Ye=pv(),Ue=d(Ye);fe(He=>ue(Ue,He),[()=>(r(ce),b(()=>r(ce).qualityBadge.split(" ")[0]))]),m(je,Ye)};L(Pe,je=>{r(ce),b(()=>r(ce).qualityBadge)&&je(Se)})}fe(()=>ue(Oe,(r(ce),b(()=>r(ce).displayName)))),M("click",C,()=>P(r(ce))),M("keypress",C,je=>je.key==="Enter"&&P(r(ce))),m(Re,C)};L(le,Re=>{r(ce),b(()=>r(ce).isHeader)?Re(me):Re(Ae,!1)})}m(se,ke)},se=>{var ce=_v();m(se,ce)}),m(Q,X)};L(q,Q=>{r(h)?Q(I):Q(F,!1)})}fe(()=>Ut($,"placeholder",`Filter ${c()??""}...`)),er($,()=>r(f),Q=>g(f,Q)),m(V,G)};L(z,V=>{r(u),b(()=>r(u)?.view==="tracks_by_album")?V(j):V(Ee,!1)})}fe(()=>ve=Ke(Y,1,"view-container svelte-1eh2rsb",null,ve,{scrollable:r(u)?.view!=="tracks_by_album"})),m(e,Y),St(),i()}var kv=k('<div class="music-card svelte-1otxnt7"><!> <!></div>'),xv=k('<div class="music-grid svelte-1otxnt7"></div>'),Ev=k('<div slot="fallback" class="icon-fallback svelte-1otxnt7">ð»</div>'),Sv=k('<div class="status-badge playing svelte-1otxnt7">PLAYING</div>'),Tv=k('<div class="status-badge paused svelte-1otxnt7">PAUSED</div>'),Mv=k('<span class="overlay-icon svelte-1otxnt7"><!></span>'),$v=k('<div class="card-sub svelte-1otxnt7"> </div>'),Av=k('<div class="card-badge quality svelte-1otxnt7"> </div>'),Cv=k('<div role="button" tabindex="0"><div class="card-img-container svelte-1otxnt7"><!> <div class="play-overlay svelte-1otxnt7"><!></div></div> <div class="card-title svelte-1otxnt7"> </div> <div class="card-sub-row svelte-1otxnt7"><!> <!></div></div>'),Pv=k('<div class="empty-text svelte-1otxnt7">No stations found</div>'),Lv=k('<div class="music-grid svelte-1otxnt7"></div> <!>',1),zv=k('<div class="view-container scrollable svelte-1otxnt7"><div class="content-padded no-bottom-pad svelte-1otxnt7"><div class="search-input-container svelte-1otxnt7"><span class="search-icon svelte-1otxnt7"><!></span> <input type="text" placeholder="Find station..." class="svelte-1otxnt7"/></div></div> <div class="content-padded svelte-1otxnt7"><!></div></div>');function Rv(e,t){Et(t,!1);const a=()=>xe(Ha,"$stations",l),n=()=>xe(xt,"$status",l),s=()=>xe(fn,"$isLoadingRadio",l),i=()=>xe(Yt,"$currentSong",l),[l,o]=jt(),u=T(),c=T();let v=T("");re(()=>(a(),r(v)),()=>{g(u,a().filter(K=>{const pe=r(v).toLowerCase();return K.name.toLowerCase().includes(pe)||K.genre&&K.genre.toLowerCase().includes(pe)}))}),re(()=>n(),()=>{g(c,n().bitrate?`${n().bitrate} kbps`:n().format||"")}),Ht(),At();var h=zv(),f=d(h),p=d(f),E=d(p),S=d(E);ee(S,()=>(R(y),b(()=>y.SEARCH)));var w=_(E,2),x=_(f,2),H=d(x);{var oe=K=>{var pe=xv();wt(pe,4,()=>Array(12),ra,(N,B)=>{var D=kv(),U=d(D);Rt(U,{width:"100%",style:"aspect-ratio:1; border-radius:12px; margin-bottom:12px;"});var _e=_(U,2);Rt(_e,{width:"70%",height:"16px"}),m(N,D)}),m(K,pe)},J=K=>{var pe=Lv(),N=Ce(pe);wt(N,5,()=>r(u),ra,(U,_e)=>{const P=pt(()=>(r(_e),b(()=>r(_e).file))),O=pt(()=>(i(),r(_e),R(r(P)),b(()=>i().stationName===r(_e).name||i().file===r(P)))),de=pt(()=>(R(Sr),r(_e),b(()=>Sr(r(_e)))));var Y=Cv();let ve;var z=d(Y),j=d(z);Ua(j,{get src(){return r(de)},get alt(){return r(_e),b(()=>r(_e).name)},radius:"8px",$$slots:{fallback:(F,Q)=>{var X=Ev();m(F,X)}}});var Ee=_(j,2),V=d(Ee);{var G=F=>{var Q=nt(),X=Ce(Q);{var se=ke=>{var le=Sv();m(ke,le)},ce=ke=>{var le=Tv();m(ke,le)};L(X,ke=>{n(),b(()=>n().state==="play")?ke(se):ke(ce,!1)})}m(F,Q)},he=F=>{var Q=Mv(),X=d(Q);ee(X,()=>(R(y),b(()=>y.PLAY))),m(F,Q)};L(V,F=>{r(O)?F(G):F(he,!1)})}var ne=_(z,2),be=d(ne),$=_(ne,2),Z=d($);{var A=F=>{var Q=$v(),X=d(Q);fe(()=>ue(X,(r(_e),b(()=>r(_e).genre)))),m(F,Q)};L(Z,F=>{r(_e),b(()=>r(_e).genre)&&F(A)})}var q=_(Z,2);{var I=F=>{var Q=Av(),X=d(Q);fe(()=>ue(X,r(c))),ut(1,Q,()=>yt),m(F,Q)};L(q,F=>{r(O)&&r(c)&&F(I)})}fe(()=>{ve=Ke(Y,1,"music-card svelte-1otxnt7",null,ve,{"is-active":r(O)}),ht(Ee,r(O)?"opacity: 1":""),ue(be,(r(_e),b(()=>r(_e).name)))}),M("click",Y,()=>js(r(_e))),m(U,Y)});var B=_(N,2);{var D=U=>{var _e=Pv();m(U,_e)};L(B,U=>{r(u),a(),b(()=>r(u).length===0&&a().length>0)&&U(D)})}m(K,pe)};L(H,K=>{s()?K(oe):K(J,!1)})}er(w,()=>r(v),K=>g(v,K)),ut(1,h,()=>yt,()=>({duration:200})),m(e,h),St(),o()}var jv=k('<button class="clear-icon-btn svelte-m7c4tz"><!></button>'),Iv=k('<div class="spinner svelte-m7c4tz"></div>'),Nv=k('<div class="content-padded no-bottom-pad svelte-m7c4tz"><div class="search-input-container svelte-m7c4tz"><span class="search-icon svelte-m7c4tz"><!></span> <input type="text" placeholder="Search playlists &amp; tracks..." class="svelte-m7c4tz"/> <!> <!></div></div>'),Dv=k('<span class="meta-tag svelte-m7c4tz">Loading...</span>'),Ov=k('<span class="meta-tag svelte-m7c4tz"> </span>'),Fv=k('<span class="meta-tag quality svelte-m7c4tz"> </span>'),qv=k('<span class="meta-tag svelte-m7c4tz"> </span> <!> <!>',1),Bv=k('<div slot="header" class="content-padded svelte-m7c4tz"><div class="view-header svelte-m7c4tz"><div class="header-art svelte-m7c4tz"><div class="header-icon-wrap svelte-m7c4tz"><!></div></div> <div class="header-info svelte-m7c4tz"><div class="header-text-group svelte-m7c4tz"><div class="header-label svelte-m7c4tz">Playlist</div> <h1 class="header-title svelte-m7c4tz"> </h1> <div class="meta-badges svelte-m7c4tz"><!></div></div> <div class="header-actions svelte-m7c4tz"><button class="btn-primary svelte-m7c4tz"> </button> <button class="btn-secondary svelte-m7c4tz"> </button> <button title="Edit"><!></button></div></div></div></div>'),Uv=k('<div slot="row" class="svelte-m7c4tz"><!></div>'),Yv=k('<div class="music-card skeleton-card svelte-m7c4tz"><div class="card-img-container svelte-m7c4tz"><!></div> <div style="margin-top: 8px;" class="svelte-m7c4tz"><!></div></div>'),Hv=k('<div class="content-padded svelte-m7c4tz"><div class="music-grid playlists-grid-override svelte-m7c4tz"></div></div>'),Vv=k('<button class="card-menu-btn svelte-m7c4tz"><!></button>'),Wv=k('<div class="music-card svelte-m7c4tz"><div class="card-img-container svelte-m7c4tz"><div class="icon-wrap svelte-m7c4tz"><!></div> <!> <div class="play-overlay svelte-m7c4tz"><span class="overlay-icon svelte-m7c4tz"><!></span></div></div> <div class="card-title svelte-m7c4tz"> </div> <div class="card-sub-row svelte-m7c4tz"><div class="card-sub svelte-m7c4tz"> </div></div></div>'),Qv=k('<div class="music-grid playlists-grid-override svelte-m7c4tz"><div class="music-card svelte-m7c4tz"><div class="card-img-container dashed-cover svelte-m7c4tz"><div class="icon-wrap svelte-m7c4tz"><!></div></div> <div class="card-title svelte-m7c4tz">New Playlist</div></div> <!></div>'),Xv=k('<div class="music-card svelte-m7c4tz"><div class="card-img-container svelte-m7c4tz"><div class="icon-wrap svelte-m7c4tz"><!></div> <div class="play-overlay svelte-m7c4tz"><span class="overlay-icon svelte-m7c4tz"><!></span></div></div> <div class="card-title svelte-m7c4tz"> </div></div>'),Kv=k('<div class="header-label section-spacing svelte-m7c4tz">Matched Playlists</div> <div class="music-grid horizontal section-mb svelte-m7c4tz"></div>',1),Gv=k('<div class="group-container svelte-m7c4tz"><div class="group-header svelte-m7c4tz"><div class="group-icon svelte-m7c4tz"><!></div> <div class="group-title svelte-m7c4tz"> </div> <div class="group-count svelte-m7c4tz"> </div> <div class="group-actions svelte-m7c4tz"><button class="btn-icon small svelte-m7c4tz" title="Play matches"><!></button> <button class="btn-icon small svelte-m7c4tz" title="Add matches to Queue"><!></button></div></div> <div class="group-tracks svelte-m7c4tz"></div></div>'),Zv=k('<div class="header-label section-spacing svelte-m7c4tz">Matched Tracks</div> <div class="grouped-results svelte-m7c4tz"></div>',1),Jv=k('<div class="empty-text svelte-m7c4tz"> </div>'),eu=k('<div class="empty-text svelte-m7c4tz" style="opacity: 0.7">Searching tracks in playlists...</div>'),tu=k("<!> <!> <!>",1),au=k('<div class="content-padded svelte-m7c4tz"><!></div>'),ru=k("<div><!> <!></div>");function nu(e,t){Et(t,!1);const a=()=>xe(xt,"$status",f),n=()=>xe(Yt,"$currentSong",f),s=()=>xe(Wt,"$navigationStack",f),i=()=>xe(zn,"$playlists",f),l=()=>xe(Br,"$activePlaylistTracks",f),o=()=>xe(os,"$isLoadingTracks",f),u=()=>xe(Gc,"$activePlaylistName",f),c=()=>xe(Fa,"$queue",f),v=()=>xe(wn,"$currentTheme",f),h=()=>xe(is,"$isLoadingPlaylists",f),[f,p]=jt(),E=T(),S=T(),w=T(),x=T(),H=T(),oe=T();let J=T(!1),K=T(!1),pe=T(!1),N=T(""),B=T(!1),D,U=0,_e=T([]),P=T([]),O=T(""),de=T(""),Y=T("");function ve(C){g(N,C.target.value),clearTimeout(D),r(N).length>=2?D=setTimeout(()=>{z(r(N))},600):(g(B,!1),g(_e,[]),g(P,[]))}async function z(C){if(!C)return;U++;const W=U;g(B,!0);const te=C.toLowerCase();g(_e,i().filter(Me=>Me.name.toLowerCase().includes(te)));let ge=[];const Le=i().filter(Me=>Me.name!=="Favorites");for(const Me of Le){if(W!==U)break;try{const $e=await De.send(`listplaylistinfo "${Me.name.replace(/"/g,'\\"')}"`),we=aa.parseTracks($e).map((ye,Ie)=>({...ye,playlistPos:Ie})).filter(ye=>ye.title&&ye.title.toLowerCase().includes(te)||ye.artist&&ye.artist.toLowerCase().includes(te));if(we.length>0){const ye=we.map(Ie=>({...Ie,_uid:Math.random()}));ge.push({playlist:Me,tracks:ye}),g(P,[...ge])}}catch($e){console.warn(`Failed to search in playlist ${Me.name}`,$e)}}W===U&&g(B,!1)}function j(C){r(J)||jn(C)}function Ee(C){C.deltaY!==0&&(C.currentTarget.scrollLeft+=C.deltaY)}function V(C,W){fa({title:"Play Search Results?",message:`This will clear your queue and play ${C.length} matching tracks from "${W}".`,confirmLabel:"Play",type:"confirm",onConfirm:()=>{Ls(C)}})}function G(C){!C||C.length===0||zs(C)}Ya(()=>{!r(H)&&i().length===0&&Rs()});function he(C){const W=C.reduce((ge,Le)=>ge+(parseFloat(Le.time)||0),0);if(W>0){const ge=Math.floor(W/3600),Le=Math.floor(W%3600/60);g(O,ge>0?`${ge} hr ${Le} min`:`${Le} min`)}else g(O,"");const te=new Set;C.forEach(ge=>{ge.qualityBadge&&te.add(ge.qualityBadge.split(" ")[0])}),g(de,te.size===1?C[0].qualityBadge:te.size>1?"Mixed":"")}function ne(C){qa("details",C)}function be(){if(c().length===0){fa({title:"Create Playlist",message:"Queue is empty. Add tracks to queue before saving a playlist.",confirmLabel:"OK",type:"alert"});return}fa({title:"New Playlist",message:"Save current queue as a new playlist:",type:"prompt",placeholder:"Playlist Name",confirmLabel:"Create",onConfirm:C=>{C&&ha.createPlaylistFromQueue(C)}})}function $(C,W){W.name!=="Favorites"&&(C.stopPropagation(),C.preventDefault(),Kr(C,null,{type:"playlist-card",playlist:W}))}function Z(){fa({title:"Replace Queue?",message:`This will clear your current queue and play "${r(x).data.name}".`,confirmLabel:"Play",type:"confirm",onConfirm:()=>{g(K,!0),(void 0)(r(x).data.name,0)}})}function A(){if(l().length>0){const C=r(x).data.name.replace(/"/g,'\\"');Tn(`load "${C}"`),g(pe,!0),setTimeout(()=>{g(pe,!1)},2e3)}}function q(){g(J,!r(J))}function I(C){const W=r(x).data.name,te=l();te.splice(C,1),Br.set(te),ko(W,C),he(te)}function F(C,W){xo(r(x).data.name,C,W)}function Q(C){if(C.name==="Favorites"){if(v()==="gruvbox"){const W="var(--c-heart)";return`background: linear-gradient(135deg, ${W}, transparent); background-color: ${W};`}return"background: linear-gradient(135deg, hsl(348, 95%, 58%), hsl(348, 90%, 40%));"}return v()==="gruvbox"?`background: linear-gradient(135deg, ${C.colorVar}, transparent); background-color: ${C.colorVar};`:`background: ${C.color}`}function X(C){if(!C)return"";if(C.name==="Favorites"){if(v()==="gruvbox"){const ge="var(--c-heart)";return`background: linear-gradient(135deg, ${ge}, transparent); background-color: ${ge};`}return"background: linear-gradient(135deg, hsl(348, 95%, 58%), hsl(348, 90%, 40%));"}const W="var(--c-bg-card)";if(v()==="gruvbox"){const ge=C.colorVar||C.color||W;return`background: linear-gradient(135deg, ${ge}, transparent); background-color: ${ge};`}return`background: ${C.color||C.colorVar||W}`}re(()=>a(),()=>{g(E,Number(a().song))}),re(()=>n(),()=>{g(S,n().file)}),re(()=>a(),()=>{g(w,a().state==="play")}),re(()=>s(),()=>{g(x,s()[s().length-1])}),re(()=>r(x),()=>{g(H,r(x).view==="details")}),re(()=>(r(x),r(Y)),()=>{const C=JSON.stringify(r(x));C!==r(Y)&&(g(N,""),g(K,!1),g(pe,!1),g(J,!1),g(_e,[]),g(P,[]),g(B,!1),g(Y,C))}),re(()=>(r(H),l(),o()),()=>{r(H)&&l().length>0?he(l()):r(H)&&l().length===0&&!o()&&(g(O,"0 min"),g(de,""))}),re(()=>(r(H),r(x),u(),Pd),()=>{r(H)&&r(x).data&&u()!==r(x).data.name&&yo(r(x).data.name)}),re(()=>r(x),()=>{g(oe,r(x)?.data?.name==="Favorites")}),Ht(),At();var se=ru();let ce;var ke=d(se);{var le=C=>{var W=Nv(),te=d(W),ge=d(te),Le=d(ge);ee(Le,()=>(R(y),b(()=>y.SEARCH)));var Me=_(ge,2),$e=_(Me,2);{var Oe=ye=>{var Ie=jv(),ie=d(Ie);ee(ie,()=>(R(y),b(()=>y.CLOSE))),M("click",Ie,()=>{g(N,""),g(_e,[]),g(P,[]),g(B,!1)}),m(ye,Ie)};L($e,ye=>{r(N)&&ye(Oe)})}var ae=_($e,2);{var we=ye=>{var Ie=Iv();m(ye,Ie)};L(ae,ye=>{r(B)&&ye(we)})}fe(()=>io(Me,r(N))),M("input",Me,ve),m(C,W)};L(ke,C=>{r(H)||C(le)})}var me=_(ke,2);{var Ae=C=>{nn(C,{get itemsStore(){return Br},get isLoading(){return o()},get isEditMode(){return r(J)},emptyText:"This playlist is empty.",onMoveItem:F,$$slots:{header:(W,te)=>{var ge=Bv(),Le=d(ge),Me=d(Le),$e=d(Me),Oe=d($e);ee(Oe,()=>(r(oe),R(y),b(()=>r(oe)?y.HEART_FILLED:y.PLAYLISTS)));var ae=_(Me,2),we=d(ae),ye=_(d(we),2),Ie=d(ye),ie=_(ye,2),Pe=d(ie);{var Se=Ge=>{var tt=Dv();m(Ge,tt)},je=Ge=>{var tt=qv(),Ve=Ce(tt),Xe=d(Ve),We=_(Ve,2);{var rt=dt=>{var lt=Ov(),ct=d(lt);fe(()=>ue(ct,r(O))),m(dt,lt)};L(We,dt=>{r(O)&&dt(rt)})}var bt=_(We,2);{var gt=dt=>{var lt=Fv(),ct=d(lt);fe(()=>ue(ct,r(de))),m(dt,lt)};L(bt,dt=>{r(de)&&dt(gt)})}fe(()=>ue(Xe,`${l(),b(()=>l().length)??""} tracks`)),m(Ge,tt)};L(Pe,Ge=>{o()?Ge(Se):Ge(je,!1)})}var Ye=_(we,2),Ue=d(Ye),He=d(Ue),Qe=_(Ue,2),Ze=d(Qe),at=_(Qe,2);let qe;var Ne=d(at);ee(Ne,()=>(r(J),R(y),b(()=>r(J)?y.ACCEPT:y.EDIT))),fe(Ge=>{ht(Me,Ge),Ut(ye,"title",(r(x),b(()=>r(x).data.name))),ue(Ie,(r(x),b(()=>r(x).data.name))),Ue.disabled=r(K),ue(He,r(K)?"Playing...":"Play All"),Qe.disabled=r(pe),ue(Ze,r(pe)?"Added":"To Queue"),qe=Ke(at,1,"btn-action svelte-m7c4tz",null,qe,{active:r(J)})},[()=>(r(x),b(()=>X(r(x).data)))]),M("click",Ue,Z),M("click",Qe,A),M("click",at,q),m(W,ge)},row:(W,te)=>{var ge=Uv();const Le=pt(()=>te.item),Me=pt(()=>te.index),$e=pt(()=>te.startDrag);var Oe=d(ge);Mr(Oe,{get track(){return r(Le)},get index(){return r(Me)},get playingIndex(){return r(E)},get playingFile(){return r(S)},get isPlaying(){return r(w)},get isEditable(){return r(J)},$$events:{play:()=>j(r(Le)),remove:()=>I(r(Me)),startdrag(...ae){r($e)?.apply(this,ae)}}}),m(W,ge)}}})},Re=C=>{var W=nt(),te=Ce(W);{var ge=Me=>{var $e=Hv(),Oe=d($e);wt(Oe,4,()=>Array(8),ra,(ae,we)=>{var ye=Yv(),Ie=d(ye),ie=d(Ie);Rt(ie,{width:"100%",height:"100%",radius:"12px"});var Pe=_(Ie,2),Se=d(Pe);Rt(Se,{width:"60%",height:"16px",radius:"4px"}),m(ae,ye)}),m(Me,$e)},Le=Me=>{var $e=au(),Oe=d($e);{var ae=ye=>{var Ie=Qv(),ie=d(Ie),Pe=d(ie),Se=d(Pe),je=d(Se);ee(je,()=>(R(y),b(()=>y.ADD)));var Ye=_(ie,2);wt(Ye,1,i,Ue=>Ue.name,(Ue,He)=>{const Qe=pt(()=>(r(He),b(()=>r(He).name==="Favorites")));var Ze=Wv(),at=d(Ze),qe=d(at),Ne=d(qe);ee(Ne,()=>(R(r(Qe)),R(y),b(()=>r(Qe)?y.HEART_FILLED:y.PLAYLISTS)));var Ge=_(qe,2);{var tt=ct=>{var Fe=Vv(),_t=d(Fe);ee(_t,()=>(R(y),b(()=>y.DOTS))),M("click",Fe,Lt=>$(Lt,r(He))),m(ct,Fe)};L(Ge,ct=>{r(Qe)||ct(tt)})}var Ve=_(Ge,2),Xe=d(Ve),We=d(Xe);ee(We,()=>(R(y),b(()=>y.PLAY)));var rt=_(at,2),bt=d(rt),gt=_(rt,2),dt=d(gt),lt=d(dt);Ot(()=>M("click",Ze,()=>ne(r(He)))),xs(Ze,ct=>Is?.(ct)),Ot(()=>M("longpress",Ze,ct=>$(ct.detail.originalEvent,r(He)))),Ot(()=>M("contextmenu",Ze,ct=>$(ct,r(He)))),fe((ct,Fe)=>{ht(at,ct),ue(bt,(r(He),b(()=>r(He).name))),ue(lt,Fe)},[()=>(r(He),b(()=>Q(r(He)))),()=>(r(He),b(()=>r(He).lastModified?new Date(r(He).lastModified).toLocaleDateString():"Playlist"))]),m(Ue,Ze)}),M("click",ie,be),m(ye,Ie)},we=ye=>{var Ie=tu(),ie=Ce(Ie);{var Pe=Qe=>{var Ze=Kv(),at=_(Ce(Ze),2);wt(at,5,()=>r(_e),qe=>qe.name,(qe,Ne)=>{const Ge=pt(()=>(r(Ne),b(()=>r(Ne).name==="Favorites")));var tt=Xv(),Ve=d(tt),Xe=d(Ve),We=d(Xe);ee(We,()=>(R(r(Ge)),R(y),b(()=>r(Ge)?y.HEART_FILLED:y.PLAYLISTS)));var rt=_(Xe,2),bt=d(rt),gt=d(bt);ee(gt,()=>(R(y),b(()=>y.PLAY)));var dt=_(Ve,2),lt=d(dt);fe(ct=>{ht(Ve,ct),ue(lt,(r(Ne),b(()=>r(Ne).name)))},[()=>(r(Ne),b(()=>Q(r(Ne))))]),M("click",tt,()=>ne(r(Ne))),m(qe,tt)}),M("wheel",at,Ee),m(Qe,Ze)};L(ie,Qe=>{r(_e),b(()=>r(_e).length>0)&&Qe(Pe)})}var Se=_(ie,2);{var je=Qe=>{var Ze=Zv(),at=_(Ce(Ze),2);wt(at,5,()=>r(P),qe=>qe.playlist.name,(qe,Ne)=>{var Ge=Gv(),tt=d(Ge),Ve=d(tt),Xe=d(Ve);ee(Xe,()=>(R(y),b(()=>y.PLAYLISTS)));var We=_(Ve,2),rt=d(We),bt=_(We,2),gt=d(bt),dt=_(bt,2),lt=d(dt),ct=d(lt);ee(ct,()=>(R(y),b(()=>y.PLAY)));var Fe=_(lt,2),_t=d(Fe);ee(_t,()=>(R(y),b(()=>y.ADD)));var Lt=_(tt,2);wt(Lt,5,()=>(r(Ne),b(()=>r(Ne).tracks)),Gt=>Gt._uid,(Gt,Te)=>{Mr(Gt,{get track(){return r(Te)},get index(){return r(Te),b(()=>r(Te).playlistPos)},get playingFile(){return r(S)},get isPlaying(){return r(w)},$$events:{play:()=>j(r(Te))}})}),fe(()=>{ue(rt,(r(Ne),b(()=>r(Ne).playlist.name))),ue(gt,(r(Ne),b(()=>r(Ne).tracks.length)))}),M("click",lt,Xt(()=>V(r(Ne).tracks,r(Ne).playlist.name))),M("click",Fe,Xt(()=>G(r(Ne).tracks))),M("click",tt,()=>ne(r(Ne).playlist)),m(qe,Ge)}),m(Qe,Ze)};L(Se,Qe=>{r(P),b(()=>r(P).length>0)&&Qe(je)})}var Ye=_(Se,2);{var Ue=Qe=>{var Ze=Jv(),at=d(Ze);fe(()=>ue(at,`No matches found for "${r(N)??""}"`)),m(Qe,Ze)},He=Qe=>{var Ze=nt(),at=Ce(Ze);{var qe=Ne=>{var Ge=eu();m(Ne,Ge)};L(at,Ne=>{r(B),r(P),b(()=>r(B)&&r(P).length===0)&&Ne(qe)},!0)}m(Qe,Ze)};L(Ye,Qe=>{r(B),r(_e),r(P),b(()=>!r(B)&&r(_e).length===0&&r(P).length===0)?Qe(Ue):Qe(He,!1)})}m(ye,Ie)};L(Oe,ye=>{r(N)?ye(we,!1):ye(ae)})}m(Me,$e)};L(te,Me=>{h()?Me(ge):Me(Le,!1)},!0)}m(C,W)};L(me,C=>{r(H)?C(Ae):C(Re,!1)})}fe(()=>ce=Ke(se,1,"view-container svelte-m7c4tz",null,ce,{scrollable:!r(H)})),m(e,se),St(),p()}var su=k('<button class="clear-icon-btn svelte-1d3z1zm"><!></button>'),iu=k('<div class="spinner svelte-1d3z1zm"></div>'),ou=k('<div class="placeholder-state svelte-1d3z1zm"><div class="placeholder-icon svelte-1d3z1zm">ð</div> <p class="svelte-1d3z1zm">Type to search your library</p></div>'),lu=k('<div class="empty-text svelte-1d3z1zm"> </div>'),cu=k('<div slot="fallback" class="icon-fallback svelte-1d3z1zm">ð¿</div>'),du=k('<div class="meta-tag svelte-1d3z1zm"> </div>'),vu=k('<div class="meta-tag quality svelte-1d3z1zm"> </div>'),uu=k('<div class="music-card svelte-1d3z1zm"><div class="card-img-container svelte-1d3z1zm"><!> <div class="play-overlay svelte-1d3z1zm"><span class="overlay-icon svelte-1d3z1zm"><!></span></div></div> <div class="card-title svelte-1d3z1zm"> </div> <div class="card-sub-row svelte-1d3z1zm"><div class="card-sub text-ellipsis svelte-1d3z1zm"> </div> <!> <!></div></div>'),fu=k('<div class="header-label section-spacing svelte-1d3z1zm">Albums</div> <div class="music-grid horizontal section-mb svelte-1d3z1zm"></div>',1),hu=k('<div class="header-label svelte-1d3z1zm">Tracks</div>'),pu=k("<!> <!>",1),gu=k('<div slot="header" class="content-padded svelte-1d3z1zm"><!></div>'),_u=k('<div slot="row" class="svelte-1d3z1zm"><!></div>'),mu=k('<div class="view-container svelte-1d3z1zm"><div class="content-padded no-bottom-pad svelte-1d3z1zm"><div class="search-input-container svelte-1d3z1zm"><span class="search-icon svelte-1d3z1zm"><!></span> <input type="text" placeholder="Artists, songs, or albums" autoFocus class="svelte-1d3z1zm"/> <!> <!></div></div> <!></div>');function bu(e,t){Et(t,!1);const a=()=>xe(Ur,"$searchQuery",s),n=()=>xe(l,"$tracksStore",s),[s,i]=jt(),l=Be([]);let o=T([]),u=T(!1),c,v=T(!1);Ya(()=>{a().length>=2&&p(a())});function h(P){Ur.set(P.target.value),clearTimeout(c),c=setTimeout(()=>{p(a())},300)}function f(){Ur.set(""),l.set([]),g(o,[]),g(v,!1)}async function p(P){const O=P.trim().toLowerCase();if(O.length<2){l.set([]),g(o,[]),g(v,!1);return}g(u,!0),g(v,!0);try{const de=await Ia.search(O),Y=de.map((z,j)=>({...z,_uid:z.file?`${z.file}-${j}`:`search-${j}`}));l.set(Y);const ve=new Map;de.forEach(z=>{const j=z.album;if(j&&!ve.has(j)){const Ee=j.toLowerCase().includes(O),V=z.artist&&z.artist.toLowerCase().includes(O);if(Ee||V){let G=String(z.year||"");G.length>4&&(G=G.substring(0,4)),ve.set(j,{name:j,artist:z.artist,file:z.file,thumbHash:z.thumbHash,_uid:`alb-${j}`,year:G,qualityBadge:z.qualityBadge})}}}),g(o,Array.from(ve.values()))}finally{g(u,!1)}}function E(P){jn(P)}function S(P){qa("tracks_by_album",{name:P.name,artist:P.artist})}function w(P){P.deltaY!==0&&(P.currentTarget.scrollLeft+=P.deltaY)}At();var x=mu(),H=d(x),oe=d(H),J=d(oe),K=d(J);ee(K,()=>y.SEARCH);var pe=_(J,2),N=_(pe,2);{var B=P=>{var O=su(),de=d(O);ee(de,()=>y.CLOSE),M("click",O,f),m(P,O)};L(N,P=>{a().length>0&&P(B)})}var D=_(N,2);{var U=P=>{var O=iu();m(P,O)};L(D,P=>{r(u)&&P(U)})}var _e=_(H,2);nn(_e,{get itemsStore(){return l},isEditMode:!1,isLoading:!1,emptyText:"",$$slots:{header:(P,O)=>{var de=gu(),Y=d(de);{var ve=j=>{var Ee=ou();m(j,Ee)},z=j=>{var Ee=nt(),V=Ce(Ee);{var G=ne=>{var be=lu(),$=d(be);fe(()=>ue($,`No results found for "${a()??""}"`)),m(ne,be)},he=ne=>{var be=pu(),$=Ce(be);{var Z=I=>{var F=fu(),Q=_(Ce(F),2);wt(Q,5,()=>r(o),X=>X._uid,(X,se)=>{var ce=uu(),ke=d(ce),le=d(ke);{let we=pt(()=>Gr(r(se),"md"));Ua(le,{get src(){return r(we)},get alt(){return r(se).name},radius:"8px",$$slots:{fallback:(ye,Ie)=>{var ie=cu();m(ye,ie)}}})}var me=_(le,2),Ae=d(me),Re=d(Ae);ee(Re,()=>y.PLAY);var C=_(ke,2),W=d(C),te=_(C,2),ge=d(te),Le=d(ge),Me=_(ge,2);{var $e=we=>{var ye=du(),Ie=d(ye);fe(()=>ue(Ie,r(se).year)),m(we,ye)};L(Me,we=>{r(se).year&&r(se).year!=="0"&&r(se).year!==0&&we($e)})}var Oe=_(Me,2);{var ae=we=>{var ye=vu(),Ie=d(ye);fe(ie=>ue(Ie,ie),[()=>r(se).qualityBadge.split(" ")[0]]),m(we,ye)};L(Oe,we=>{r(se).qualityBadge&&we(ae)})}fe(()=>{Ut(C,"title",r(se).name),ue(W,r(se).name),ue(Le,r(se).artist)}),M("click",ce,()=>S(r(se))),m(X,ce)}),M("wheel",Q,w),m(I,F)};L($,I=>{r(o).length>0&&I(Z)})}var A=_($,2);{var q=I=>{var F=hu();m(I,F)};L(A,I=>{n().length>0&&I(q)})}m(ne,be)};L(V,ne=>{!r(u)&&n().length===0&&r(o).length===0&&r(v)?ne(G):ne(he,!1)},!0)}m(j,Ee)};L(Y,j=>{a().length<2?j(ve):j(z,!1)})}m(P,de)},row:(P,O)=>{var de=_u();const Y=pt(()=>O.item),ve=pt(()=>O.index);var z=d(de);Mr(z,{get track(){return r(Y)},get index(){return r(ve)},isEditable:!1,$$events:{play:()=>E(r(Y))}}),m(P,de)}}}),fe(()=>io(pe,a())),M("input",pe,h),m(e,x),St(),i()}var yu=k('<span class="status-badge connected svelte-1j67jqh">Connected</span>'),wu=k('<span class="status-badge disconnected svelte-1j67jqh">Not Connected</span>'),ku=k('<div class="separator svelte-1j67jqh"></div> <div class="row space-between svelte-1j67jqh"><label class="svelte-1j67jqh">Connection Status</label> <!></div> <div class="separator svelte-1j67jqh"></div> <div class="row svelte-1j67jqh"><label for="yandex-token" class="svelte-1j67jqh">OAuth Token</label> <div class="input-group svelte-1j67jqh"><input id="yandex-token" type="password" placeholder="Paste token here..." class="svelte-1j67jqh"/> <button class="btn-primary small svelte-1j67jqh"> </button></div></div> <p class="hint svelte-1j67jqh">Token is stored securely on the device.</p>',1),xu=k('<option class="svelte-1j67jqh"> </option>'),Eu=k('<div class="separator svelte-1j67jqh"></div> <div class="row space-between svelte-1j67jqh"><label for="alarm-time" class="svelte-1j67jqh">Wake up time</label> <input id="alarm-time" type="time" class="svelte-1j67jqh"/></div> <div class="separator svelte-1j67jqh"></div> <div class="row space-between svelte-1j67jqh"><label for="alarm-pl" class="svelte-1j67jqh">Playlist</label> <div class="select-wrapper svelte-1j67jqh"><select id="alarm-pl" class="svelte-1j67jqh"></select> <div class="select-arrow svelte-1j67jqh"><!></div></div></div>',1),Su=k('<div class="view-container scrollable svelte-1j67jqh"><div class="content-padded svelte-1j67jqh"><h1 class="header-title big svelte-1j67jqh">Settings</h1> <div class="section svelte-1j67jqh"><div class="section-header svelte-1j67jqh"><span class="svelte-1j67jqh">Services</span></div> <div class="card svelte-1j67jqh"><div class="row space-between svelte-1j67jqh"><label class="svelte-1j67jqh">Enable Yandex Music (Beta)</label> <button><div class="toggle-circle svelte-1j67jqh"></div></button></div> <!></div></div> <div class="section svelte-1j67jqh"><div class="section-header svelte-1j67jqh"><span class="svelte-1j67jqh">Alarm Clock</span></div> <div class="card svelte-1j67jqh"><div class="row space-between svelte-1j67jqh"><span class="label-text svelte-1j67jqh">Current Player Time</span> <span class="mono-badge svelte-1j67jqh"> </span></div> <div class="separator svelte-1j67jqh"></div> <div class="row space-between svelte-1j67jqh"><label class="svelte-1j67jqh">Enable Alarm</label> <button><div class="toggle-circle svelte-1j67jqh"></div></button></div> <!></div></div> <div class="section svelte-1j67jqh"><div class="section-header svelte-1j67jqh"><span class="svelte-1j67jqh">Appearance</span></div> <div class="card clickable svelte-1j67jqh"><div class="row space-between svelte-1j67jqh"><span class="svelte-1j67jqh">Interface Theme</span> <div class="row-gap svelte-1j67jqh"><span class="value svelte-1j67jqh"> </span> <span class="chevron svelte-1j67jqh"><!></span></div></div></div></div> <div class="section svelte-1j67jqh"><div class="section-header svelte-1j67jqh"><span class="svelte-1j67jqh">Connection</span></div> <div class="card svelte-1j67jqh"><div class="row svelte-1j67jqh"><label for="ip" class="svelte-1j67jqh">Moode Device IP</label> <div class="input-group svelte-1j67jqh"><input id="ip" type="text" placeholder="192.168.x.x" class="svelte-1j67jqh"/> <button class="btn-primary small svelte-1j67jqh">Save</button></div></div> <p class="hint svelte-1j67jqh"> </p></div></div> <div class="section svelte-1j67jqh"><div class="section-header svelte-1j67jqh"><span class="svelte-1j67jqh">About</span></div> <div class="card svelte-1j67jqh"><div class="info-row svelte-1j67jqh"><span class="svelte-1j67jqh">Version</span> <span class="mono svelte-1j67jqh"> </span></div> <div class="separator svelte-1j67jqh"></div> <div class="info-row svelte-1j67jqh"><span class="svelte-1j67jqh">Build Date</span> <span class="mono small svelte-1j67jqh"> </span></div></div></div></div></div>');function Tu(e,t){Et(t,!1);const a=()=>xe(wn,"$currentTheme",c),n=()=>xe(us,"$isAlarmEnabled",c),s=()=>xe(vs,"$alarmTime",c),i=()=>xe(fs,"$alarmPlaylist",c),l=()=>xe(En,"$isYandexEnabled",c),o=()=>xe(br,"$yandexAuthStatus",c),u=()=>xe(zn,"$playlists",c),[c,v]=jt(),h=T();let f=T(Xa.MOODE_IP),p=T("--:--"),E,S=T(""),w=T(!1);function x(){Xa.setMoodeIp(r(f)),ze("IP Saved. Reloading...","success"),setTimeout(()=>location.reload(),1e3)}const H="0.0.1",oe="2026-01-09T14:07:38.987Z",J=new Date(oe).toLocaleString();function K(){const Se=ns.map(je=>({label:je.label,value:je.id}));fa({title:"Select Theme",message:"Choose your preferred interface style:",type:"select",inputValue:a(),options:Se,onConfirm:je=>{wn.set(je),ze("Theme updated","success")}})}async function pe(){const Se=await Na.getServerTime();Se&&g(p,Se)}Ya(()=>{pe(),E=setInterval(pe,6e4),Na.checkYandexAuth()}),co(()=>{E&&clearInterval(E)});async function N(){try{await Na.setAlarm(n(),s(),i()),n()&&ze(`Alarm set for ${s()}`,"success")}catch{ze("Failed to sync alarm settings","error")}}function B(){us.update(Se=>!Se),N()}function D(){En.update(Se=>!Se)}async function U(){if(!r(S))return;g(w,!0);const Se=await Na.saveYandexToken(r(S));g(w,!1),Se&&g(S,"")}re(()=>a(),()=>{g(h,ns.find(Se=>Se.id===a())?.label||"Default")}),Ht(),At();var _e=Su(),P=d(_e),O=_(d(P),2),de=_(d(O),2),Y=d(de),ve=_(d(Y),2);let z;var j=_(Y,2);{var Ee=Se=>{var je=ku(),Ye=Ce(je),Ue=_(Ye,2),He=_(d(Ue),2);{var Qe=We=>{var rt=yu();m(We,rt)},Ze=We=>{var rt=wu();m(We,rt)};L(He,We=>{o()?We(Qe):We(Ze,!1)})}var at=_(Ue,2),qe=_(at,2),Ne=_(d(qe),2),Ge=d(Ne),tt=_(Ge,2),Ve=d(tt),Xe=_(qe,2);fe(()=>{tt.disabled=r(w),ue(Ve,r(w)?"Checking...":"Save")}),ut(1,Ye,()=>yt),ut(1,Ue,()=>yt),ut(1,at,()=>yt),er(Ge,()=>r(S),We=>g(S,We)),M("click",tt,U),ut(1,qe,()=>yt),ut(1,Xe,()=>yt),m(Se,je)};L(j,Se=>{l()&&Se(Ee)})}var V=_(O,2),G=_(d(V),2),he=d(G),ne=_(d(he),2),be=d(ne),$=_(he,4),Z=_(d($),2);let A;var q=_($,2);{var I=Se=>{var je=Eu(),Ye=Ce(je),Ue=_(Ye,2),He=_(d(Ue),2),Qe=_(Ue,2),Ze=_(Qe,2),at=_(d(Ze),2),qe=d(at);fe(()=>{i(),Cl(()=>{u()})}),wt(qe,5,u,ra,(tt,Ve)=>{var Xe=xu(),We=d(Xe),rt={};fe(()=>{ue(We,(r(Ve),b(()=>r(Ve).name))),rt!==(rt=(r(Ve),b(()=>r(Ve).name)))&&(Xe.value=(Xe.__value=(r(Ve),b(()=>r(Ve).name)))??"")}),m(tt,Xe)});var Ne=_(qe,2),Ge=d(Ne);ee(Ge,()=>(R(y),b(()=>y.CHEVRON_DOWN))),ut(1,Ye,()=>yt),er(He,s,tt=>ti(vs,tt)),M("change",He,N),ut(1,Ue,()=>yt),ut(1,Qe,()=>yt),Zl(qe,i,tt=>ti(fs,tt)),M("change",qe,N),ut(1,Ze,()=>yt),m(Se,je)};L(q,Se=>{n()&&Se(I)})}var F=_(V,2),Q=_(d(F),2),X=d(Q),se=_(d(X),2),ce=d(se),ke=d(ce),le=_(ce,2),me=d(le);ee(me,()=>(R(y),b(()=>y.NEXT)));var Ae=_(F,2),Re=_(d(Ae),2),C=d(Re),W=_(d(C),2),te=d(W),ge=_(te,2),Le=_(C,2),Me=d(Le),$e=_(Ae,2),Oe=_(d($e),2),ae=d(Oe),we=_(d(ae),2),ye=d(we),Ie=_(ae,4),ie=_(d(Ie),2),Pe=d(ie);fe(()=>{z=Ke(ve,1,"toggle-btn svelte-1j67jqh",null,z,{active:l()}),ue(be,r(p)),A=Ke(Z,1,"toggle-btn svelte-1j67jqh",null,A,{active:n()}),ue(ke,r(h)),ue(Me,`Current: ${R(Xa),b(()=>Xa.MOODE_IP)??""}`),ue(ye,H),ue(Pe,J)}),M("click",ve,D),M("click",Z,B),M("click",Q,K),er(te,()=>r(f),Se=>g(f,Se)),M("click",ge,x),ut(1,_e,()=>yt,()=>({duration:200})),m(e,_e),St(),v()}var Mu=k('<span class="meta-tag svelte-185fgrr"> </span>'),$u=k('<div slot="header" class="content-padded svelte-185fgrr"><div class="view-header svelte-185fgrr"><div class="header-art svelte-185fgrr" style="background: var(--c-surface-active);"><div class="header-icon-wrap svelte-185fgrr"><!></div></div> <div class="header-info svelte-185fgrr"><div class="header-text-group svelte-185fgrr"><div class="header-label svelte-185fgrr">Now Playing</div> <h1 class="header-title svelte-185fgrr">Current Queue</h1> <div class="meta-badges svelte-185fgrr"><span class="meta-tag svelte-185fgrr"> </span> <!></div></div> <div class="header-actions svelte-185fgrr"><button class="btn-secondary svelte-185fgrr" title="Clear Queue">Clear</button> <button class="btn-action svelte-185fgrr" title="Save Queue"><!></button> <button><!></button></div></div></div></div>'),Au=k('<div slot="row" class="svelte-185fgrr"><!></div>'),Cu=k('<div class="view-container svelte-185fgrr"><!></div>');function Pu(e,t){Et(t,!1);const a=()=>xe(xt,"$status",l),n=()=>xe(kt,"$isQueueLocked",l),s=()=>xe(Yt,"$currentSong",l),i=()=>xe(Fa,"$queue",l),[l,o]=jt(),u=T(),c=T(),v=T(),h=T();let f=T(!1),p=T(""),E=T(-1);function S(){g(f,!r(f))}function w(N){r(f)||Tn(`play ${N}`)}function x(N){N<r(E)&&g(E,r(E)-1),sa.removeFromQueue(N)}async function H(){fa({title:"Save Playlist",message:"Enter a name for this playlist:",type:"prompt",placeholder:"Playlist Name",confirmLabel:"Save",onConfirm:async N=>{N&&N.trim().length>0&&(await sa.saveQueue(N),Rs())}})}function oe(){i().length!==0&&fa({title:"Clear Queue",message:"Are you sure you want to clear the entire play queue?",confirmLabel:"Clear All",type:"confirm",onConfirm:async()=>{Fa.set([]),Yt.set({title:"Not Playing",artist:"",album:"",file:"",stationName:null,id:null,pos:null}),xt.update(N=>({...N,state:"stop",song:-1,songid:-1,elapsed:0})),await Tn("clear")}})}function J(N,B){let D=r(E);N===D?D=B:N<D&&B>=D?D-=1:N>D&&B<=D&&(D+=1),g(E,D),sa.moveTrack(N,B)}re(()=>a(),()=>{g(u,Number(a().song))}),re(()=>(n(),r(u)),()=>{n()||g(E,r(u))}),re(()=>r(E),()=>{g(c,r(E))}),re(()=>s(),()=>{g(v,s().file)}),re(()=>a(),()=>{g(h,a().state==="play")}),re(()=>i(),()=>{if(i().length>=0){const N=i().reduce((B,D)=>B+(parseFloat(D.time)||0),0);if(N>0){const B=Math.floor(N/3600),D=Math.floor(N%3600/60);B>0?g(p,`${B} hr ${D} min`):g(p,`${D} min`)}else g(p,"")}}),Ht(),At();var K=Cu(),pe=d(K);nn(pe,{get itemsStore(){return Fa},get isEditMode(){return r(f)},emptyText:"Queue is empty",onMoveItem:J,$$slots:{header:(N,B)=>{var D=$u(),U=d(D),_e=d(U),P=d(_e),O=d(P);ee(O,()=>(R(y),b(()=>y.MENU)));var de=_(_e,2),Y=d(de),ve=_(d(Y),4),z=d(ve),j=d(z),Ee=_(z,2);{var V=q=>{var I=Mu(),F=d(I);fe(()=>ue(F,r(p))),m(q,I)};L(Ee,q=>{r(p)&&q(V)})}var G=_(Y,2),he=d(G),ne=_(he,2),be=d(ne);ee(be,()=>(R(y),b(()=>y.SAVE)));var $=_(ne,2);let Z;var A=d($);ee(A,()=>(r(f),R(y),b(()=>r(f)?y.ACCEPT:y.EDIT))),fe(()=>{ue(j,`${i(),b(()=>i().length)??""} tracks`),he.disabled=(i(),b(()=>i().length===0)),ne.disabled=(i(),b(()=>i().length===0)),Z=Ke($,1,"btn-action svelte-185fgrr",null,Z,{active:r(f)}),Ut($,"title",r(f)?"Finish Editing":"Edit Queue"),$.disabled=(i(),b(()=>i().length===0))}),M("click",he,oe),M("click",ne,H),M("click",$,S),m(N,D)},row:(N,B)=>{var D=Au();const U=pt(()=>B.item),_e=pt(()=>B.index),P=pt(()=>B.startDrag);var O=d(D);Mr(O,{get track(){return r(U)},get index(){return r(_e)},get playingIndex(){return r(c)},get playingFile(){return r(v)},get isPlaying(){return r(h)},get isEditable(){return r(f)},$$events:{play:()=>w(r(_e)),remove:()=>x(r(_e)),startdrag(...de){r(P)?.apply(this,de)}}}),m(N,D)}}}),m(e,K),St(),o()}var Lu=k('<div class="token-alert content-padded svelte-4g0hpd"><h3 class="svelte-4g0hpd">Yandex Music Not Connected</h3> <p class="svelte-4g0hpd">Please go to Settings and connect your account.</p></div>'),zu=k('<button class="back-icon-btn svelte-4g0hpd"><!></button>'),Ru=k('<span class="search-icon svelte-4g0hpd"><!></span>'),ju=k('<button class="clear-btn svelte-4g0hpd"><!></button>'),Iu=k('<div class="filter-tabs svelte-4g0hpd"><button>All</button> <button>Tracks</button></div>'),Nu=k('<div class="music-card skeleton-card svelte-4g0hpd"><!> <!></div>'),Du=k('<div class="music-grid svelte-4g0hpd"></div>'),Ou=k('<div class="music-card svelte-4g0hpd"><div class="card-img-container is-fav svelte-4g0hpd"><div class="icon-wrap svelte-4g0hpd"><!></div> <div class="play-overlay svelte-4g0hpd"><span class="overlay-icon svelte-4g0hpd"><!></span></div></div> <div class="card-title svelte-4g0hpd"> </div></div>'),Fu=k('<div class="music-grid svelte-4g0hpd"></div>'),qu=k('<div class="content-padded svelte-4g0hpd"><h2 class="header-label svelte-4g0hpd">My Music</h2> <!></div>'),Bu=k('<div slot="fallback" class="icon-fallback svelte-4g0hpd"><!></div>'),Uu=k('<div class="music-card svelte-4g0hpd"><div class="card-img-container svelte-4g0hpd"><!></div> <div class="card-title svelte-4g0hpd"> </div> <div class="card-sub svelte-4g0hpd"> </div></div>'),Yu=k('<h3 class="header-label svelte-4g0hpd">Albums</h3> <div class="music-grid horizontal section-mb svelte-4g0hpd"></div>',1),Hu=k('<div class="content-padded svelte-4g0hpd"><!></div>'),Vu=k('<div slot="row" class="svelte-4g0hpd"><!></div>'),Wu=k('<div class="content-padded no-bottom-pad svelte-4g0hpd"><div class="search-input-container svelte-4g0hpd"><!> <input type="text" placeholder="Search Yandex Music..." class="svelte-4g0hpd"/> <!></div> <!></div> <!> <!> <!>',1),Qu=k('<div class="view-container scrollable relative-parent svelte-4g0hpd"><!></div>');function Xu(e,t){Et(t,!1);const a=()=>xe(br,"$yandexAuthStatus",n),[n,s]=jt(),i=T(),l=Be([]);let o=T([]),u=T(!1),c=T("dashboard"),v=T(""),h=T("all"),f=T({tracks:[],albums:[],artists:[]}),p;Ya(()=>{r(i)&&E()});async function E(){g(u,!0);try{g(o,[{kind:"favorites",title:"My Vibe",isStation:!0}])}finally{g(u,!1)}}async function S(D){if(D.isStation){ze("Starting My Vibe...","info");try{await Hr.playRadio("user:onetwo")}catch{ze("Failed to start radio","error")}}}function w(D){g(v,D.target.value),clearTimeout(p),r(v).length>2?p=setTimeout(()=>{H()},600):r(v).length===0&&g(c,"dashboard")}function x(D){g(h,D),r(v).length>2&&H()}async function H(){g(u,!0),g(c,"search"),g(f,{tracks:[],albums:[],artists:[]});try{const D=await Hr.search(r(v));g(f,D),r(h)==="track"||r(h)==="all"?l.set(D.tracks||[]):l.set([])}catch{ze("Search failed","error")}finally{g(u,!1)}}function oe(){g(c,"dashboard"),g(v,""),l.set([])}async function J(D){if(D.id){ze("Starting radio based on track...","info");try{await Hr.playRadio(D.id)}catch{ze("Error starting radio","error")}}}re(()=>a(),()=>{g(i,a())}),Ht(),At();var K=Qu(),pe=d(K);{var N=D=>{var U=Lu();m(D,U)},B=D=>{var U=Wu(),_e=Ce(U),P=d(_e),O=d(P);{var de=A=>{var q=zu(),I=d(q);ee(I,()=>(R(y),b(()=>y.BACK))),M("click",q,oe),m(A,q)},Y=A=>{var q=Ru(),I=d(q);ee(I,()=>(R(y),b(()=>y.SEARCH))),m(A,q)};L(O,A=>{r(c)!=="dashboard"?A(de):A(Y,!1)})}var ve=_(O,2),z=_(ve,2);{var j=A=>{var q=ju(),I=d(q);ee(I,()=>(R(y),b(()=>y.CLOSE))),M("click",q,oe),m(A,q)};L(z,A=>{r(v)&&A(j)})}var Ee=_(P,2);{var V=A=>{var q=Iu(),I=d(q);let F;var Q=_(I,2);let X;fe(()=>{F=Ke(I,1,"svelte-4g0hpd",null,F,{active:r(h)==="all"}),X=Ke(Q,1,"svelte-4g0hpd",null,X,{active:r(h)==="track"})}),M("click",I,()=>x("all")),M("click",Q,()=>x("track")),m(A,q)};L(Ee,A=>{r(c)==="search"&&A(V)})}var G=_(_e,2);{var he=A=>{var q=qu(),I=_(d(q),2);{var F=X=>{var se=Du();wt(se,4,()=>Array(6),ra,(ce,ke)=>{var le=Nu(),me=d(le);Rt(me,{width:"100%",style:"aspect-ratio:1; border-radius:12px; margin-bottom: 8px;"});var Ae=_(me,2);Rt(Ae,{width:"70%",height:"14px"}),m(ce,le)}),m(X,se)},Q=X=>{var se=Fu();wt(se,5,()=>r(o),ra,(ce,ke)=>{var le=Ou(),me=d(le),Ae=d(me),Re=d(Ae);ee(Re,()=>(R(y),b(()=>y.RADIO)));var C=_(Ae,2),W=d(C),te=d(W);ee(te,()=>(R(y),b(()=>y.PLAY)));var ge=_(me,2),Le=d(ge);fe(()=>ue(Le,(r(ke),b(()=>r(ke).title)))),M("click",le,()=>S(r(ke))),m(ce,le)}),m(X,se)};L(I,X=>{r(u)?X(F):X(Q,!1)})}ut(1,q,()=>yt),m(A,q)};L(G,A=>{r(c)==="dashboard"&&A(he)})}var ne=_(G,2);{var be=A=>{var q=Hu(),I=d(q);{var F=Q=>{var X=Yu(),se=_(Ce(X),2);wt(se,5,()=>(r(f),b(()=>r(f).albums)),ra,(ce,ke)=>{var le=Uu(),me=d(le),Ae=d(me);Ua(Ae,{get src(){return r(ke),b(()=>r(ke).image)},get alt(){return r(ke),b(()=>r(ke).title)},radius:"8px",$$slots:{fallback:(ge,Le)=>{var Me=Bu(),$e=d(Me);ee($e,()=>(R(y),b(()=>y.ALBUMS))),m(ge,Me)}}});var Re=_(me,2),C=d(Re),W=_(Re,2),te=d(W);fe(()=>{ue(C,(r(ke),b(()=>r(ke).title))),ue(te,(r(ke),b(()=>r(ke).artist)))}),m(ce,le)}),m(Q,X)};L(I,Q=>{r(f),r(h),b(()=>r(f).albums&&r(f).albums.length>0&&r(h)==="all")&&Q(F)})}m(A,q)};L(ne,A=>{r(c)==="search"&&A(be)})}var $=_(ne,2);{var Z=A=>{{let q=pt(()=>r(c)==="search"?"No results":"Playlist is empty");nn(A,{get itemsStore(){return l},get isLoading(){return r(u)},get emptyText(){return r(q)},$$slots:{row:(I,F)=>{var Q=Vu();const X=pt(()=>F.item),se=pt(()=>F.index);var ce=d(Q);Mr(ce,{get track(){return r(X)},get index(){return r(se)},isEditable:!1,$$events:{play:()=>J(r(X))}}),m(I,Q)}}})}};L($,A=>{(r(c)==="playlist"||r(c)==="search"&&(r(h)==="all"||r(h)==="track"))&&A(Z)})}er(ve,()=>r(v),A=>g(v,A)),M("input",ve,w),m(D,U)};L(pe,D=>{r(i)?D(B,!1):D(N)})}m(e,K),St(),s()}var Ku=k('<div class="knob svelte-1jla3sy"></div>'),Gu=k('<div class="tooltip current svelte-1jla3sy"> </div> <span></span>',1),Zu=k('<div slot="fallback" class="icon-fallback svelte-1jla3sy"><!></div>'),Ju=k('<span class="meta-tag quality"> </span>'),ef=k('<div class="dot svelte-1jla3sy"></div>'),tf=k("<button><!> <!></button>"),af=k('<div class="dock svelte-1jla3sy"><div class="progress-shadow svelte-1jla3sy"></div> <div><div class="rail svelte-1jla3sy"></div> <div class="fill svelte-1jla3sy"><!></div> <!></div> <div class="grid svelte-1jla3sy"><div class="info svelte-1jla3sy"><div class="art svelte-1jla3sy"><!></div> <div class="meta svelte-1jla3sy"><div class="title-row svelte-1jla3sy"><div class="title text-ellipsis svelte-1jla3sy"> </div> <button class="btn-icon tiny-dots svelte-1jla3sy"><!></button></div> <div class="artist-row svelte-1jla3sy"><div class="artist text-ellipsis svelte-1jla3sy"> </div> <!></div></div></div> <div class="controls svelte-1jla3sy"><button><!></button> <button class="btn-icon"><!></button> <button class="play-btn flex-center svelte-1jla3sy"><!></button> <button class="btn-icon"><!></button> <!></div> <div class="volume desktop svelte-1jla3sy"><button class="vol-btn-mini svelte-1jla3sy" title="Mute/Unmute"><!></button> <div class="custom-slider svelte-1jla3sy"><div class="slider-bg svelte-1jla3sy"><div class="slider-fill svelte-1jla3sy"></div> <div class="slider-knob svelte-1jla3sy"></div></div></div></div></div></div>');function rf(e,t){Et(t,!1);const a=()=>xe(xt,"$status",o),n=()=>xe(Yt,"$currentSong",o),s=()=>xe(ja,"$favorites",o),i=()=>xe(Ha,"$stations",o),l=()=>xe(xn,"$isFullPlayerOpen",o),[o,u]=jt(),c=T(),v=T(),h=T(),f=T(),p=T(),E=T(),S=T(),w=T(),x=T(),H=T(),oe=T(),J=T(),K=T();let pe=T(!1),N=T(!1),B=!1,D=T(0),U=T(),_e=T();const P=A=>q=>{q.stopPropagation(),A()};function O(A){if(isNaN(A)||A===null)return"0:00";const q=Math.floor(A/60),I=Math.floor(A%60);return`${q}:${I<10?"0":""}${I}`}function de(A,q){const I=q.getBoundingClientRect();return Math.max(0,Math.min(1,(A.clientX-I.left)/I.width))}function Y(A){r(f)||(g(N,!0),g(D,de(A,r(U))),window.addEventListener("mousemove",ve),window.addEventListener("mouseup",z))}function ve(A){if(r(N)&&g(D,de(A,r(U))),B){const q=Math.round(de(A,r(_e))*100);xa(q)}}function z(){r(N)&&!r(f)&&Ps(r(D)*r(c)),g(N,!1),B=!1,window.removeEventListener("mousemove",ve),window.removeEventListener("mouseup",z)}let j=50;function Ee(A){A.stopPropagation(),a().volume>0?(j=a().volume,xa(0)):xa(j>0?j:30)}function V(A){B=!0;const q=Math.round(de(A,r(_e))*100);xa(q),window.addEventListener("mousemove",ve),window.addEventListener("mouseup",z)}function G(){const A=(r(K)+1)%3;A===0?(a().random&&tr(),a().repeat&&ar()):A===1?(a().random||tr(),a().repeat&&ar()):A===2&&(a().random&&tr(),a().repeat||ar())}function he(A){A.stopPropagation(),Kr(A,n(),{type:"general",source:"miniplayer"})}function ne(A){Kr(A.detail.originalEvent,n(),{type:"general",source:"miniplayer"})}re(()=>a(),()=>{g(c,a().duration>0?a().duration:1)}),re(()=>a(),()=>{g(v,a().elapsed||0)}),re(()=>a(),()=>{g(h,a().state==="play")}),re(()=>n(),()=>{g(f,n().file?.startsWith("http")&&!n().isYandex)}),re(()=>n(),()=>{g(p,n().title||"Not Playing")}),re(()=>n(),()=>{g(E,n().stationName||n().artist||"Moode")}),re(()=>(n(),s()),()=>{g(S,n().file&&s().has(n().file))}),re(()=>(n(),i()),()=>{g(w,Tr(n(),i(),n().stationName))}),re(()=>(r(f),r(N),r(D),r(v),r(c)),()=>{g(x,r(f)?0:r(N)?r(D)*100:r(v)/r(c)*100)}),re(()=>(r(h),r(N),r(f)),()=>{g(H,r(h)&&!r(N)&&!r(f))}),re(()=>a(),()=>{g(oe,a().bitrate?`${a().bitrate} kbps`:a().format||"")}),re(()=>(a(),y),()=>{g(J,a().volume===0?y.VOLUME_MUTE:a().volume<50?y.VOLUME_MEDIUM:y.VOLUME_FULL)}),re(()=>a(),()=>{g(K,a().repeat?2:a().random?1:0)}),Ht(),At();var be=nt(),$=Ce(be);{var Z=A=>{var q=af(),I=d(q),F=_(I,2);let Q;var X=_(d(F),2),se=d(X);{var ce=Fe=>{var _t=Ku();m(Fe,_t)};L(se,Fe=>{r(f)||Fe(ce)})}var ke=_(X,2);{var le=Fe=>{var _t=Gu(),Lt=Ce(_t),Gt=d(Lt);fe(Te=>{ht(Lt,`left: ${r(x)??""}%`),ue(Gt,Te)},[()=>(r(N),r(D),r(c),r(v),b(()=>r(N)?O(r(D)*r(c)):O(r(v))))]),m(Fe,_t)};L(ke,Fe=>{(r(pe)||r(N))&&!r(f)&&Fe(le)})}Ba(F,Fe=>g(U,Fe),()=>r(U));var me=_(F,2),Ae=d(me),Re=d(Ae),C=d(Re);Ua(C,{get src(){return r(w)},alt:"art",radius:"4px",$$slots:{fallback:(Fe,_t)=>{var Lt=Zu(),Gt=d(Lt);ee(Gt,()=>(r(f),R(y),b(()=>r(f)?y.RADIO:y.ALBUMS))),m(Fe,Lt)}}});var W=_(Re,2),te=d(W),ge=d(te),Le=d(ge),Me=_(ge,2),$e=d(Me);ee($e,()=>(R(y),b(()=>y.DOTS)));var Oe=_(te,2),ae=d(Oe),we=d(ae),ye=_(ae,2);{var Ie=Fe=>{var _t=Ju(),Lt=d(_t);fe(()=>ue(Lt,r(oe))),m(Fe,_t)};L(ye,Fe=>{r(oe)&&Fe(Ie)})}var ie=_(Ae,2),Pe=d(ie),Se=zr(()=>P(()=>ha.toggleFavorite(n())));let je;var Ye=d(Pe);ee(Ye,()=>(r(S),R(y),b(()=>r(S)?y.HEART_FILLED:y.HEART)));var Ue=_(Pe,2),He=zr(()=>P(()=>Zr("previous"))),Qe=d(Ue);ee(Qe,()=>(R(y),b(()=>y.PREVIOUS)));var Ze=_(Ue,2),at=zr(()=>P(Rn)),qe=d(Ze);ee(qe,()=>(a(),R(y),b(()=>a().state==="play"?y.PAUSE:y.PLAY)));var Ne=_(Ze,2),Ge=zr(()=>P(()=>Zr("next"))),tt=d(Ne);ee(tt,()=>(R(y),b(()=>y.NEXT)));var Ve=_(Ne,2);{var Xe=Fe=>{var _t=tf(),Lt=zr(()=>P(G));let Gt;var Te=d(_t);{var Je=It=>{var ma=nt(),Lr=Ce(ma);ee(Lr,()=>(R(y),b(()=>y.REPEAT))),m(It,ma)},Ct=It=>{var ma=nt(),Lr=Ce(ma);ee(Lr,()=>(R(y),b(()=>y.SHUFFLE))),m(It,ma)};L(Te,It=>{r(K)===2?It(Je):It(Ct,!1)})}var la=_(Te,2);{var In=It=>{var ma=ef();m(It,ma)};L(la,It=>{r(K)>0&&It(In)})}fe(()=>Gt=Ke(_t,1,"btn-icon desktop mode-btn svelte-1jla3sy",null,Gt,{active:r(K)>0})),M("click",_t,function(...It){r(Lt)?.apply(this,It)}),m(Fe,_t)};L(Ve,Fe=>{r(f)||Fe(Xe)})}var We=_(ie,2),rt=d(We),bt=d(rt);ee(bt,()=>r(J));var gt=_(rt,2),dt=d(gt),lt=d(dt),ct=_(lt,2);Ba(gt,Fe=>g(_e,Fe),()=>r(_e)),Ot(()=>M("click",q,()=>xn.set(!0))),xs(q,(Fe,_t)=>Is?.(Fe,_t),()=>500),Ot(()=>M("longpress",q,ne)),fe(()=>{ht(I,`width: ${r(x)??""}%; transition: ${r(H)?"width 0.25s linear":"none"}`),Q=Ke(F,1,"progress-bar svelte-1jla3sy",null,Q,{radio:r(f)}),ht(X,`width: ${r(x)??""}%; transition: ${r(H)?"width 0.25s linear":"none"}`),Ut(ge,"title",r(p)),ue(Le,r(p)),Ut(ae,"title",r(E)),ue(we,r(E)),je=Ke(Pe,1,"btn-icon desktop svelte-1jla3sy",null,je,{liked:r(S)}),ht(lt,`width: ${a(),b(()=>a().volume)??""}%`),ht(ct,`left: ${a(),b(()=>a().volume)??""}%`)}),M("mouseenter",F,()=>g(pe,!0)),M("mouseleave",F,()=>g(pe,!1)),M("mousedown",F,Xt(Y)),M("click",F,Xt(function(Fe){Xr.call(this,t,Fe)})),M("click",Me,he),M("click",Pe,function(...Fe){r(Se)?.apply(this,Fe)}),M("click",Ue,function(...Fe){r(He)?.apply(this,Fe)}),M("click",Ze,function(...Fe){r(at)?.apply(this,Fe)}),M("click",Ne,function(...Fe){r(Ge)?.apply(this,Fe)}),M("click",rt,Ee),M("mousedown",gt,Xt(V)),M("click",gt,Xt(function(Fe){Xr.call(this,t,Fe)})),m(A,q)};L($,A=>{l()||A(Z)})}m(e,be),St(),u()}var nf=k('<div class="drag-zone svelte-1olwzt8"><div class="drag-handle-icon svelte-1olwzt8"><!></div></div>'),sf=k('<div slot="fallback" class="icon-fallback svelte-1olwzt8"><!></div>'),of=k('<span class="meta-tag quality"> </span>'),lf=k('<span class="dot svelte-1olwzt8"></span>'),cf=k("<button><!> <!></button>"),df=k('<div style="width: 44px;"></div>'),vf=k('<div><!> <div class="bg-container svelte-1olwzt8"><div class="bg-gradient-fallback svelte-1olwzt8"></div> <img class="bg-img svelte-1olwzt8" alt="" loading="eager"/> <div class="bg-overlay svelte-1olwzt8"></div></div> <div class="player-body svelte-1olwzt8"><div class="art-container svelte-1olwzt8"><div class="artwork svelte-1olwzt8"><!></div></div> <div class="controls-area svelte-1olwzt8"><div class="meta svelte-1olwzt8"><h1 class="title text-ellipsis svelte-1olwzt8"> </h1> <div class="artist-row svelte-1olwzt8"><h2 class="artist text-ellipsis svelte-1olwzt8"> </h2> <!></div></div> <div class="progress-section"><div><div class="common-track svelte-1olwzt8"><div class="common-fill svelte-1olwzt8"><div class="common-knob svelte-1olwzt8"></div></div></div></div> <div class="time-row svelte-1olwzt8"><span> </span> <span> </span></div></div> <div class="buttons-row svelte-1olwzt8"><button><!></button> <button class="btn-icon side-btn svelte-1olwzt8"><!></button> <button class="play-btn-large flex-center svelte-1olwzt8"><!></button> <button class="btn-icon side-btn svelte-1olwzt8"><!></button> <!></div> <div class="volume-row svelte-1olwzt8"><button class="btn-icon small vol-btn svelte-1olwzt8"><!></button> <div class="volume-hit-area svelte-1olwzt8"><div class="common-track svelte-1olwzt8"><div class="common-fill svelte-1olwzt8"></div> <div class="common-knob svelte-1olwzt8"></div></div></div> <div class="vol-icon-static svelte-1olwzt8"><!></div></div></div></div></div>');function _i(e,t){Et(t,!1);const a=()=>xe(Yt,"$currentSong",l),n=()=>xe(Ha,"$stations",l),s=()=>xe(xt,"$status",l),i=()=>xe(ja,"$favorites",l),[l,o]=jt(),u=T(),c=T(),v=T(),h=T(),f=T(),p=T(),E=T(),S=T(),w=T(),x=T(),H=T(),oe=T();let J=mt(t,"isDocked",8,!1),K=0,pe=T(0),N=T(!1);function B(){xn.set(!1)}function D(Te){if(J())return;const Je=Te.target;Je.closest(".bar-hit-area")||Je.closest(".volume-hit-area")||(K=Te.touches[0].clientY,g(N,!0))}function U(Te){if(!r(N)||J())return;const Je=Te.touches[0].clientY-K;Je>0&&(Te.cancelable&&Je>10&&Te.preventDefault(),g(pe,Je))}function _e(){J()||(g(N,!1),r(pe)>150?B():g(pe,0))}let P=T(!1),O=T(0),de=T();function Y(Te){const Je=Math.floor(Te/60)||0,Ct=Math.floor(Te%60)||0;return`${Je}:${Ct.toString().padStart(2,"0")}`}function ve(Te,Je){const Ct=Je.getBoundingClientRect(),la=Te.touches?Te.touches[0].clientX:Te.clientX;return Math.max(0,Math.min(1,(la-Ct.left)/Ct.width))}function z(Te){r(h)||(g(P,!0),g(O,ve(Te,r(de))))}function j(Te){r(P)&&g(O,ve(Te,r(de)))}function Ee(){r(P)&&!r(h)&&Ps(r(O)*r(c)),g(P,!1)}let V=!1,G=T(),he=50;function ne(){s().volume>0?(he=s().volume,xa(0)):xa(he>0?he:30)}function be(Te){V=!0;const Je=Math.round(ve(Te,r(G))*100);xa(Je),window.addEventListener("mousemove",$),window.addEventListener("mouseup",Z),window.addEventListener("touchmove",$,{passive:!1}),window.addEventListener("touchend",Z)}function $(Te){if(V){Te.preventDefault();const Je=Math.round(ve(Te,r(G))*100);xa(Je)}}function Z(){V=!1,window.removeEventListener("mousemove",$),window.removeEventListener("mouseup",Z),window.removeEventListener("touchmove",$),window.removeEventListener("touchend",Z)}function A(){const Te=(r(w)+1)%3;Te===0?(s().random&&tr(),s().repeat&&ar()):Te===1?(s().random||tr(),s().repeat&&ar()):Te===2&&(s().random&&tr(),s().repeat||ar())}re(()=>(a(),n()),()=>{g(u,Tr(a(),n(),a().stationName))}),re(()=>s(),()=>{g(c,s().duration||1)}),re(()=>s(),()=>{g(v,s().elapsed||0)}),re(()=>a(),()=>{g(h,a().file?.startsWith("http")&&!a().isYandex)}),re(()=>s(),()=>{g(f,s().state==="play")}),re(()=>(r(f),r(P),r(h)),()=>{g(p,r(f)&&!r(P)&&!r(h))}),re(()=>(r(h),r(P),r(O),r(v),r(c)),()=>{g(E,r(h)?0:r(P)?r(O)*100:r(v)/r(c)*100)}),re(()=>(s(),y),()=>{g(S,s().volume===0?y.VOLUME_MUTE:s().volume<50?y.VOLUME_MEDIUM:y.VOLUME_FULL)}),re(()=>s(),()=>{g(w,s().repeat?2:s().random?1:0)}),re(()=>s(),()=>{g(x,s().bitrate?`${s().bitrate} kbps`:s().format||"")}),re(()=>(a(),i()),()=>{g(H,a().file&&i().has(a().file))}),re(()=>R(J()),()=>{g(oe,J()?"8px":"var(--radius-xl)")}),Ht(),At();var q=vf();let I;var F=d(q);{var Q=Te=>{var Je=nf(),Ct=d(Je),la=d(Ct);ee(la,()=>(R(y),b(()=>y.CHEVRON_DOWN))),M("touchstart",Je,D),M("touchmove",Je,U),M("touchend",Je,_e),M("click",Je,B),m(Te,Je)};L(F,Te=>{J()||Te(Q)})}var X=_(F,2),se=_(d(X),2),ce=_(X,2),ke=d(ce),le=d(ke),me=d(le);Ua(me,{get src(){return r(u)},alt:"Cover",get radius(){return r(oe)},$$slots:{fallback:(Te,Je)=>{var Ct=sf(),la=d(Ct);ee(la,()=>(r(h),R(y),b(()=>r(h)?y.RADIO:y.ALBUMS))),m(Te,Ct)}}});var Ae=_(ke,2),Re=d(Ae),C=d(Re),W=d(C),te=_(C,2),ge=d(te),Le=d(ge),Me=_(ge,2);{var $e=Te=>{var Je=of(),Ct=d(Je);fe(()=>ue(Ct,r(x))),m(Te,Je)};L(Me,Te=>{r(x)&&Te($e)})}var Oe=_(Re,2),ae=d(Oe);let we;var ye=d(ae),Ie=d(ye);Ba(ae,Te=>g(de,Te),()=>r(de));var ie=_(ae,2),Pe=d(ie),Se=d(Pe),je=_(Pe,2),Ye=d(je),Ue=_(Oe,2),He=d(Ue);let Qe;var Ze=d(He);ee(Ze,()=>(r(H),R(y),b(()=>r(H)?y.HEART_FILLED:y.HEART)));var at=_(He,2),qe=d(at);ee(qe,()=>(R(y),b(()=>y.PREVIOUS)));var Ne=_(at,2),Ge=d(Ne);ee(Ge,()=>(s(),R(y),b(()=>s().state==="play"?y.PAUSE:y.PLAY)));var tt=_(Ne,2),Ve=d(tt);ee(Ve,()=>(R(y),b(()=>y.NEXT)));var Xe=_(tt,2);{var We=Te=>{var Je=cf();let Ct;var la=d(Je);{var In=ca=>{var Va=nt(),Nn=Ce(Va);ee(Nn,()=>(R(y),b(()=>y.REPEAT))),m(ca,Va)},It=ca=>{var Va=nt(),Nn=Ce(Va);ee(Nn,()=>(R(y),b(()=>y.SHUFFLE))),m(ca,Va)};L(la,ca=>{r(w)===2?ca(In):ca(It,!1)})}var ma=_(la,2);{var Lr=ca=>{var Va=lf();m(ca,Va)};L(ma,ca=>{r(w)>0&&ca(Lr)})}fe(()=>Ct=Ke(Je,1,"btn-icon side-btn mode-btn svelte-1olwzt8",null,Ct,{active:r(w)>0})),M("click",Je,A),m(Te,Je)},rt=Te=>{var Je=df();m(Te,Je)};L(Xe,Te=>{r(h)?Te(rt,!1):Te(We)})}var bt=_(Ue,2),gt=d(bt),dt=d(gt);ee(dt,()=>r(S));var lt=_(gt,2),ct=d(lt),Fe=d(ct),_t=_(Fe,2);Ba(lt,Te=>g(G,Te),()=>r(G));var Lt=_(lt,2),Gt=d(Lt);ee(Gt,()=>(R(y),b(()=>y.VOLUME_FULL))),fe((Te,Je)=>{I=Ke(q,1,"full-player svelte-1olwzt8",null,I,{"is-docked":J()}),ht(q,J()?"":`transform: translateY(${r(pe)}px); transition: ${r(N)?"none":"transform 0.3s cubic-bezier(0.2, 0.8, 0.2, 1)"}`),Ut(se,"src",r(u)),ht(le,`transform: scale(${1-r(pe)/3e3})`),ht(Ae,`opacity: ${1-r(pe)/400}`),ue(W,(a(),b(()=>a().title||"Not Playing"))),ue(Le,(a(),b(()=>a().stationName||a().artist||"Moode Audio"))),we=Ke(ae,1,"bar-hit-area svelte-1olwzt8",null,we,{"is-docked-bar":J()}),ht(Ie,`width: ${r(E)??""}%; transition: ${r(p)?"width 0.3s linear":"none"}`),ue(Se,Te),ue(Ye,Je),Qe=Ke(He,1,"btn-icon side-btn svelte-1olwzt8",null,Qe,{liked:r(H)}),ht(Fe,`width: ${s(),b(()=>s().volume)??""}%`),ht(_t,`left: ${s(),b(()=>s().volume)??""}%; right: auto;`)},[()=>(r(P),r(O),r(c),r(v),b(()=>r(P)?Y(r(O)*r(c)):Y(r(v)))),()=>(r(h),r(c),b(()=>r(h)?"LIVE":Y(r(c))))]),M("mousedown",ae,z),M("touchstart",ae,z,void 0,!0),M("mousemove",ae,function(...Te){(r(P)?j:null)?.apply(this,Te)}),M("touchmove",ae,function(...Te){(r(P)?j:null)?.apply(this,Te)},void 0,!0),M("mouseup",ae,Ee),M("touchend",ae,Ee),M("click",He,()=>ha.toggleFavorite(a())),M("click",at,()=>Zr("previous")),M("click",Ne,function(...Te){Rn?.apply(this,Te)}),M("click",tt,()=>Zr("next")),M("click",gt,ne),M("mousedown",lt,Xt(be)),M("touchstart",lt,Xt(be)),ut(3,q,()=>uo,()=>({y:J()?0:800,duration:300,opacity:1})),m(e,q),St(),o()}const uf=`<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.0//EN" "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd">
<svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="600px" height="331px" viewBox="0 0 600 331" preserveAspectRatio="xMidYMid meet">
 <g fill="#eb1250">
  <path d="M 315.33 288.42 c -1.03 -0.33 -2.60 -1.34 -3.70 -2.39 -1.08 -1.01 -1.73 -2.81 -2.48 -6.68 -0.38 -1.99 -0.84 -4.29 -1.03 -5.13 -0.21 -0.84 -0.47 -2.20 -0.61 -3.05 -0.14 -0.84 -0.42 -2.34 -0.61 -3.33 -0.45 -2.20 -0.42 -2.04 -0.77 -4.17 -0.16 -0.96 -0.40 -2.16 -0.52 -2.65 -0.14 -0.52 -0.33 -1.45 -0.45 -2.11 -0.12 -0.68 -0.38 -2.02 -0.59 -2.98 -0.21 -0.96 -0.52 -2.55 -0.70 -3.52 -0.16 -0.96 -0.52 -2.81 -0.77 -4.10 -0.26 -1.29 -0.82 -4.08 -1.22 -6.21 -0.80 -4.20 -1.57 -8.13 -2.44 -12.54 -0.33 -1.55 -0.63 -3.23 -0.73 -3.75 -0.07 -0.52 -0.28 -1.57 -0.47 -2.34 -0.16 -0.77 -0.54 -2.63 -0.80 -4.10 -0.28 -1.48 -0.61 -3.12 -0.73 -3.63 -0.12 -0.52 -0.42 -2.20 -0.70 -3.75 -0.28 -1.55 -0.91 -4.92 -1.43 -7.50 -0.49 -2.58 -1.34 -7.01 -1.85 -9.84 -0.54 -2.84 -1.17 -6.26 -1.43 -7.62 -0.26 -1.36 -0.56 -3.07 -0.68 -3.80 -0.12 -0.75 -0.26 -1.43 -0.33 -1.55 -0.26 -0.42 -2.60 -12.89 -3.21 -17.16 -0.12 -0.84 -0.38 -2.16 -0.56 -2.93 -0.16 -0.77 -0.49 -2.34 -0.70 -3.52 -0.21 -1.15 -0.63 -3.26 -0.94 -4.69 -0.30 -1.41 -0.68 -3.30 -0.82 -4.22 -0.16 -0.89 -0.47 -2.58 -0.73 -3.75 -0.68 -3.30 -2.74 -14.16 -3.73 -19.80 -0.28 -1.48 -0.63 -3.38 -0.82 -4.22 -0.38 -1.71 -1.31 -6.70 -1.88 -10.08 -0.40 -2.34 -0.87 -4.71 -1.43 -7.27 -0.16 -0.84 -0.59 -3 -0.91 -4.80 -0.35 -1.80 -0.77 -4.01 -0.96 -4.92 -0.19 -0.89 -0.54 -2.98 -0.80 -4.64 -0.49 -3.26 -0.70 -3.91 -1.10 -3.40 -0.14 0.16 -0.30 0.63 -0.38 1.01 -0.07 0.40 -0.54 2.51 -1.01 4.69 -2.67 12.42 -3.16 14.77 -3.38 16.29 -0.28 1.99 -1.48 7.64 -3.77 18.05 -1.17 5.23 -2.37 10.66 -2.67 12.07 -0.33 1.43 -0.84 4.01 -1.17 5.74 -0.30 1.73 -1.05 5.27 -1.64 7.85 -0.59 2.58 -1.59 7.17 -2.25 10.20 -0.63 3.02 -1.38 5.93 -1.62 6.45 -0.66 1.36 -2.60 3.26 -4.05 3.96 -1.24 0.61 -1.24 0.61 -87.30 0.61 -86.04 0 -86.04 0 -87.33 -0.49 -1.59 -0.59 -3.56 -2.32 -4.41 -3.89 -1.97 -3.63 -0.35 -8.32 3.61 -10.43 1.01 -0.54 1.01 -0.54 83.44 -0.61 82.43 -0.05 82.43 -0.05 82.69 -1.41 0.14 -0.73 0.42 -1.85 0.59 -2.51 0.19 -0.63 0.82 -3.59 1.41 -6.56 0.59 -2.95 1.29 -6.23 1.52 -7.27 0.23 -1.03 0.82 -3.66 1.27 -5.86 0.47 -2.18 1.34 -6.30 1.97 -9.14 0.63 -2.84 1.34 -6.16 1.57 -7.38 0.21 -1.22 0.49 -2.39 0.61 -2.60 0.09 -0.21 0.42 -1.64 0.68 -3.16 0.26 -1.55 0.63 -3.26 0.82 -3.82 0.19 -0.59 0.35 -1.34 0.35 -1.69 0 -0.35 0.21 -1.57 0.49 -2.70 0.26 -1.13 0.59 -2.60 0.68 -3.23 0.21 -1.22 2.16 -10.08 3.05 -13.78 0.26 -1.13 1.05 -4.88 1.76 -8.32 0.70 -3.45 1.55 -7.59 1.88 -9.21 0.33 -1.62 1.08 -5.09 1.64 -7.73 1.62 -7.41 1.73 -7.95 2.13 -9.96 0.91 -4.62 1.92 -9.19 2.18 -9.80 0.14 -0.35 0.82 -1.24 1.48 -1.97 2.58 -2.72 5.84 -3.42 8.88 -1.90 1.97 0.98 3.73 2.74 4.27 4.31 0.42 1.20 1.41 6.42 1.80 9.47 0.09 0.84 0.30 1.83 0.45 2.18 0.14 0.38 0.26 1.10 0.26 1.66 0 0.54 0.16 1.45 0.35 2.04 0.19 0.56 0.56 2.25 0.84 3.73 0.82 4.50 1.78 9.28 2.20 11.13 0.19 0.77 0.45 2.04 0.56 2.81 0.47 2.63 1.92 10.08 2.25 11.60 0.19 0.84 0.45 2.16 0.56 2.93 0.28 1.64 0.63 3.56 1.08 5.86 0.19 0.91 0.49 2.60 0.70 3.75 0.21 1.17 0.54 2.79 0.70 3.63 0.19 0.84 0.77 3.75 1.29 6.45 0.54 2.72 1.17 5.88 1.41 7.03 0.23 1.17 0.66 3.38 0.94 4.92 0.26 1.55 0.70 4.03 0.96 5.51 0.26 1.48 0.73 3.91 1.03 5.39 0.30 1.48 0.68 3.45 0.82 4.34 0.16 0.91 0.47 2.48 0.70 3.52 0.70 3.19 2.23 10.73 2.58 12.89 0.09 0.66 0.47 2.48 0.80 4.10 0.63 3.05 0.70 3.35 1.66 8.77 0.33 1.80 0.82 4.29 1.08 5.51 0.26 1.24 0.56 2.79 0.68 3.42 0.19 1.17 0.89 4.76 1.55 8.09 0.21 0.96 0.63 3.23 0.96 5.04 0.84 4.64 1.41 7.55 1.69 8.91 0.14 0.66 0.35 1.76 0.49 2.46 0.12 0.70 0.38 2.04 0.56 2.93 0.19 0.91 0.61 3.16 0.94 5.04 1.05 5.86 2.48 13.41 2.88 15.12 0.19 0.91 0.42 2.02 0.47 2.46 0.07 0.45 0.33 1.78 0.59 2.93 0.26 1.17 0.56 2.70 0.68 3.40 0.12 0.70 0.30 1.62 0.42 1.99 0.12 0.40 0.35 1.48 0.52 2.41 0.26 1.50 0.35 1.69 0.82 1.69 0.45 0 0.54 -0.16 0.68 -0.98 0.23 -1.66 2.23 -11.86 2.84 -14.60 0.30 -1.41 0.66 -3.09 0.80 -3.75 0.89 -4.57 5.46 -26.60 6.47 -31.17 0.33 -1.41 0.77 -3.59 1.03 -4.80 0.52 -2.51 1.13 -5.44 2.13 -10.08 0.38 -1.73 1.01 -4.69 1.36 -6.56 0.38 -1.88 1.05 -5.13 1.50 -7.27 0.47 -2.13 0.94 -4.38 1.05 -5.04 0.45 -2.30 1.95 -9.63 2.18 -10.48 0.26 -1.01 1.64 -7.38 2.44 -11.32 0.30 -1.55 0.77 -3.87 1.05 -5.16 0.47 -2.34 2.91 -13.57 4.22 -19.57 0.38 -1.73 0.82 -3.89 0.96 -4.80 0.54 -3.26 2.16 -5.65 4.64 -6.91 1.73 -0.87 2.53 -1.01 4.36 -0.82 1.22 0.14 1.83 0.35 2.93 1.08 2.20 1.43 3.40 3.45 4.45 7.55 0.26 1.05 0.70 2.72 0.96 3.68 0.26 0.96 0.63 2.34 0.80 3.05 0.54 2.16 1.29 4.95 1.78 6.56 0.23 0.84 0.70 2.48 1.01 3.63 0.30 1.17 0.98 3.63 1.52 5.51 0.54 1.88 1.24 4.41 1.55 5.63 0.33 1.22 0.80 2.86 1.05 3.63 0.26 0.77 0.47 1.59 0.47 1.80 0 0.23 0.30 1.50 0.68 2.81 0.38 1.34 1.01 3.68 1.43 5.23 0.77 2.81 1.52 5.58 3.26 11.72 0.52 1.80 1.31 4.71 1.76 6.47 0.45 1.76 0.96 3.70 1.17 4.34 0.30 0.98 2.39 8.65 4.29 15.68 1.13 4.24 2.25 8.27 3.05 11.13 1.45 5.13 1.62 5.74 3.21 11.79 0.42 1.59 0.54 1.80 0.96 1.80 0.16 0 0.35 0.12 0.40 0.28 0.05 0.14 0.33 -0.52 0.63 -1.48 0.30 -0.96 1.73 -5.37 3.19 -9.82 1.48 -4.45 3.09 -9.52 3.63 -11.25 0.52 -1.73 1.85 -5.86 2.95 -9.14 1.13 -3.28 2.48 -7.45 3.05 -9.26 1.73 -5.44 2.23 -6.19 5.11 -7.69 1.43 -0.75 1.43 -0.75 69.40 -0.82 67.97 -0.07 67.97 -0.07 69.56 0.47 0.87 0.28 1.57 0.61 1.57 0.70 0 0.12 0.42 0.56 0.94 1.03 0.52 0.47 1.27 1.52 1.64 2.32 0.94 1.97 0.98 4.52 0.14 6.33 -0.73 1.57 -3.26 3.98 -4.52 4.31 -0.70 0.19 -19.31 0.28 -65.27 0.33 -64.29 0.05 -64.29 0.05 -66.82 7.66 -1.38 4.20 -4.97 14.95 -7.97 23.91 -5.58 16.71 -8.34 25.17 -9.89 30.12 -1.38 4.43 -2.34 5.98 -4.66 7.43 -1.15 0.75 -1.29 0.77 -3.66 0.77 -2.11 0 -2.63 -0.07 -3.59 -0.56 -1.20 -0.59 -2.65 -1.92 -3.59 -3.30 -0.47 -0.68 -2.44 -7.15 -4.17 -13.59 -0.19 -0.70 -0.61 -2.23 -0.94 -3.40 -0.33 -1.15 -0.77 -2.74 -0.98 -3.52 -0.19 -0.77 -0.45 -1.71 -0.56 -2.11 -0.12 -0.38 -0.49 -1.76 -0.82 -3.05 -0.35 -1.29 -1.03 -3.77 -1.52 -5.51 -1.90 -6.52 -2.79 -9.75 -2.95 -10.66 -0.07 -0.52 -0.23 -1.10 -0.35 -1.31 -0.12 -0.21 -0.63 -2.02 -1.15 -3.98 -0.94 -3.54 -1.66 -6.23 -3.40 -12.63 -0.47 -1.73 -1.10 -4.03 -1.43 -5.09 -0.30 -1.05 -0.94 -3.33 -1.38 -5.04 -0.45 -1.71 -1.03 -3.91 -1.29 -4.88 -0.28 -0.96 -0.59 -2.18 -0.68 -2.70 -0.12 -0.52 -0.75 -2.88 -1.41 -5.27 -0.66 -2.39 -1.45 -5.39 -1.80 -6.68 -0.33 -1.29 -0.70 -2.60 -0.80 -2.93 -0.30 -0.91 -2.04 -7.52 -2.25 -8.55 -0.16 -0.70 -0.33 -0.94 -0.66 -0.94 -0.40 0 -0.56 0.56 -1.45 4.80 -0.54 2.65 -1.36 6.61 -1.85 8.79 -0.47 2.20 -1.15 5.51 -1.50 7.38 -1.22 6.28 -1.92 9.73 -2.25 11.13 -0.19 0.77 -0.52 2.30 -0.70 3.40 -0.21 1.10 -0.54 2.53 -0.70 3.16 -0.19 0.66 -0.61 2.48 -0.91 4.10 -0.73 3.73 -1.69 8.48 -1.99 9.84 -0.49 2.30 -0.94 4.43 -1.29 6.21 -0.21 1.03 -0.75 3.61 -1.20 5.74 -0.45 2.13 -0.84 4.20 -0.91 4.57 -0.07 0.40 -0.23 1.34 -0.35 2.11 -0.14 0.77 -0.73 3.63 -1.31 6.33 -0.59 2.72 -1.17 5.55 -1.31 6.33 -0.30 1.83 -1.57 8.39 -1.85 9.61 -0.12 0.52 -0.54 2.58 -0.94 4.57 -0.40 1.99 -0.87 4.22 -1.05 4.92 -0.16 0.70 -0.45 2.09 -0.61 3.05 -0.16 0.96 -0.49 2.65 -0.73 3.75 -0.54 2.46 -0.59 2.70 -2.32 11.48 -0.77 3.94 -1.55 7.73 -1.73 8.44 -0.19 0.70 -0.56 2.39 -0.82 3.75 -0.28 1.36 -0.70 3.47 -0.96 4.69 -0.23 1.22 -0.61 3.23 -0.82 4.45 -0.63 3.87 -2.23 6.45 -4.83 7.85 -1.01 0.56 -1.57 0.68 -3.12 0.75 -1.13 0.05 -2.25 -0.07 -2.84 -0.26 z "/>
 </g>
</svg>`;var ff=k('<div class="backdrop svelte-ji5owg"></div>'),hf=k('<button><span class="icon svelte-ji5owg"><!></span> <span> </span></button>'),pf=k('<!> <aside><div class="header svelte-ji5owg"><div class="header-inner svelte-ji5owg"><button class="collapse-btn svelte-ji5owg"><div class="chevron svelte-ji5owg"><!></div></button> <div><div class="logo svelte-ji5owg"><!></div></div></div> <button class="btn-icon mobile-close svelte-ji5owg"><!></button></div> <div class="scroll-area custom-scrollbar svelte-ji5owg"><nav class="svelte-ji5owg"><!> <button title="Search"><span class="icon svelte-ji5owg"><!></span> <span>Search</span></button> <div class="sep svelte-ji5owg"></div> <button class="nav-item sync svelte-ji5owg" title="Update Library"><span><!></span> <span> </span></button> <div class="sep svelte-ji5owg"></div> <button title="Settings"><span class="icon svelte-ji5owg"><!></span> <span>Settings</span></button></nav> <div class="footer svelte-ji5owg"><div>Moode WaveUI</div></div></div></aside>',1);function gf(e,t){Et(t,!1);const a=()=>xe(En,"$isYandexEnabled",l),n=()=>xe(na,"$isSyncingLibrary",l),s=()=>xe(ls,"$isSidebarCollapsed",l),i=()=>xe(Dt,"$activeMenuTab",l),[l,o]=jt(),u=T(),c=T();let v=mt(t,"isOpen",8,!1);const h=Ts();let f=T(0),p=T(0),E=T(!1);const S=[{id:"queue",label:"Queue",icon:y.MENU},{id:"favorites",label:"Favorites",icon:y.HEART},{id:"artists",label:"Artists",icon:y.ARTISTS},{id:"albums",label:"Albums",icon:y.ALBUMS},{id:"playlists",label:"Playlists",icon:y.PLAYLISTS},{id:"radio",label:"Radio",icon:y.RADIO},{id:"yandex",label:"Yandex Music",icon:y.YANDEX}];function w(ae){window.location.hash=`/${ae}`,h("close")}async function x(){n()||(await Na.syncLibrary(),window.location.hash="/artists")}function H(){ls.update(ae=>!ae)}function oe(ae){v()&&(g(f,ae.touches[0].clientX),g(p,r(f)),g(E,!0))}function J(ae){r(E)&&g(p,ae.touches[0].clientX)}function K(){r(E)&&(r(p)-r(f)<-70&&h("close"),g(E,!1),g(f,0),g(p,0))}re(()=>a(),()=>{g(u,S.filter(ae=>ae.id==="yandex"?a():!0))}),re(()=>(r(E),r(p),r(f)),()=>{g(c,r(E)?Math.min(0,r(p)-r(f)):0)}),Ht(),At();var pe=pf(),N=Ce(pe);{var B=ae=>{var we=ff();M("click",we,()=>h("close")),ut(3,we,()=>yt,()=>({duration:200})),m(ae,we)};L(N,ae=>{v()&&ae(B)})}var D=_(N,2);let U,_e;var P=d(D),O=d(P),de=d(O),Y=d(de),ve=d(Y);ee(ve,()=>(R(y),b(()=>y.BACK)));var z=_(de,2);let j;var Ee=d(z),V=d(Ee);ee(V,()=>uf);var G=_(O,2),he=d(G);ee(he,()=>(R(y),b(()=>y.CLOSE)));var ne=_(P,2),be=d(ne),$=d(be);wt($,1,()=>r(u),ae=>ae.id,(ae,we)=>{var ye=hf();let Ie;var ie=d(ye),Pe=d(ie);ee(Pe,()=>(r(we),b(()=>r(we).icon)));var Se=_(ie,2);let je;var Ye=d(Se);fe(()=>{Ie=Ke(ye,1,"nav-item svelte-ji5owg",null,Ie,{active:i()===r(we).id}),Ut(ye,"title",(r(we),b(()=>r(we).label))),je=Ke(Se,1,"label-text svelte-ji5owg",null,je,{hidden:s()}),ue(Ye,(r(we),b(()=>r(we).label)))}),M("click",ye,()=>w(r(we).id)),m(ae,ye)});var Z=_($,2);let A;var q=d(Z),I=d(q);ee(I,()=>(R(y),b(()=>y.SEARCH)));var F=_(q,2);let Q;var X=_(Z,4),se=d(X);let ce;var ke=d(se);ee(ke,()=>(R(y),b(()=>y.SYNC)));var le=_(se,2);let me;var Ae=d(le),Re=_(X,4);let C;var W=d(Re),te=d(W);ee(te,()=>(R(y),b(()=>y.SETTINGS)));var ge=_(W,2);let Le;var Me=_(be,2),$e=d(Me);let Oe;fe(()=>{U=Ke(D,1,"side-menu svelte-ji5owg",null,U,{"mobile-open":v(),collapsed:s()}),_e=ht(D,"",_e,{transform:v()?`translateX(${r(c)}px)`:"",transition:r(E)?"none":"width 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.3s ease"}),Ut(de,"title",s()?"Expand":"Collapse"),ht(Y,`transform: rotate(${s()?"180deg":"0deg"})`),j=Ke(z,1,"logo-wrapper svelte-ji5owg",null,j,{hidden:s()}),A=Ke(Z,1,"nav-item svelte-ji5owg",null,A,{active:i()==="search"}),Q=Ke(F,1,"label-text svelte-ji5owg",null,Q,{hidden:s()}),X.disabled=n(),ce=Ke(se,1,"icon svelte-ji5owg",null,ce,{spin:n()}),me=Ke(le,1,"label-text svelte-ji5owg",null,me,{hidden:s()}),ue(Ae,n()?"Syncing...":"Update Library"),C=Ke(Re,1,"nav-item svelte-ji5owg",null,C,{active:i()==="settings"}),Le=Ke(ge,1,"label-text svelte-ji5owg",null,Le,{hidden:s()}),Oe=Ke($e,1,"footer-text svelte-ji5owg",null,Oe,{hidden:s()})}),M("click",de,H),M("click",G,()=>h("close")),M("click",Z,()=>w("search")),M("click",X,x),M("click",Re,()=>w("settings")),M("touchstart",D,oe),M("touchmove",D,J),M("touchend",D,K),m(e,pe),St(),o()}var _f=k('<div class="toast-container svelte-k2bvk7"><div> </div></div>'),mf=k('<button class="back-btn svelte-k2bvk7"><span class="icon-inline svelte-k2bvk7"><!></span> Back</button>'),bf=k('<div class="view-title svelte-k2bvk7"><!></div>'),yf=k('<div class="full-player-modal svelte-k2bvk7"><!></div>'),wf=k('<div class="app-container svelte-k2bvk7"><div class="app-layout svelte-k2bvk7"><!> <!> <main class="content-area svelte-k2bvk7"><header class="top-bar svelte-k2bvk7"><button class="hamburger-btn svelte-k2bvk7"><!></button> <!></header> <div class="scroll-container svelte-k2bvk7"><div class="view-wrapper svelte-k2bvk7"><!></div></div></main> <div class="docked-player-container svelte-k2bvk7"><!></div></div> <div class="mini-player-wrapper svelte-k2bvk7"><!></div></div> <!>',1);function kf(e,t){Et(t,!1);const a=()=>xe(Wt,"$navigationStack",l),n=()=>xe(ss,"$toastMessage",l),s=()=>xe(Dt,"$activeMenuTab",l),i=()=>xe(xn,"$isFullPlayerOpen",l),[l,o]=jt();let u=T(!1);Ya(()=>{window.history.replaceState({depth:a().length},"","");const z=()=>void 0;return window.addEventListener("popstate",z),()=>window.removeEventListener("popstate",z)}),At();var c=wf(),v=Ce(c),h=d(v),f=d(h);{var p=z=>{var j=_f(),Ee=d(j),V=d(Ee);fe(()=>{Ke(Ee,1,`toast-body ${n().type??""}`,"svelte-k2bvk7"),ue(V,n().text)}),ut(3,j,()=>uo,()=>({y:-50,duration:300})),m(z,j)};L(f,z=>{n()&&z(p)})}var E=_(f,2);gf(E,{get isOpen(){return r(u)},$$events:{close:()=>g(u,!1)}});var S=_(E,2),w=d(S),x=d(w),H=d(x);ee(H,()=>y.MENU);var oe=_(x,2);{var J=z=>{var j=mf(),Ee=d(j),V=d(Ee);ee(V,()=>y.BACK),M("click",j,function(...G){rd?.apply(this,G)}),m(z,j)},K=z=>{var j=bf(),Ee=d(j);{var V=he=>{var ne=Ca("Radio");m(he,ne)},G=he=>{var ne=nt(),be=Ce(ne);{var $=A=>{var q=Ca("Playlists");m(A,q)},Z=A=>{var q=nt(),I=Ce(q);{var F=X=>{var se=Ca("Search");m(X,se)},Q=X=>{var se=nt(),ce=Ce(se);{var ke=me=>{var Ae=Ca("Yandex Music");m(me,Ae)},le=me=>{var Ae=nt(),Re=Ce(Ae);{var C=te=>{var ge=Ca("Queue");m(te,ge)},W=te=>{var ge=nt(),Le=Ce(ge);{var Me=Oe=>{var ae=Ca("Favorites");m(Oe,ae)},$e=Oe=>{var ae=nt(),we=Ce(ae);{var ye=ie=>{var Pe=Ca("Settings");m(ie,Pe)},Ie=ie=>{var Pe=Ca();fe(Se=>ue(Pe,Se),[()=>(s()||"Library").charAt(0).toUpperCase()+(s()||"library").slice(1)]),m(ie,Pe)};L(we,ie=>{s()==="settings"?ie(ye):ie(Ie,!1)},!0)}m(Oe,ae)};L(Le,Oe=>{s()==="favorites"?Oe(Me):Oe($e,!1)},!0)}m(te,ge)};L(Re,te=>{s()==="queue"?te(C):te(W,!1)},!0)}m(me,Ae)};L(ce,me=>{s()==="yandex"?me(ke):me(le,!1)},!0)}m(X,se)};L(I,X=>{s()==="search"?X(F):X(Q,!1)},!0)}m(A,q)};L(be,A=>{s()==="playlists"?A($):A(Z,!1)},!0)}m(he,ne)};L(Ee,he=>{s()==="radio"?he(V):he(G,!1)})}m(z,j)};L(oe,z=>{a().length>1?z(J):z(K,!1)})}var pe=_(w,2),N=d(pe),B=d(N);{var D=z=>{Rv(z,{})},U=z=>{var j=nt(),Ee=Ce(j);{var V=he=>{Xu(he,{})},G=he=>{var ne=nt(),be=Ce(ne);{var $=A=>{Pu(A,{})},Z=A=>{var q=nt(),I=Ce(q);{var F=X=>{nu(X,{})},Q=X=>{var se=nt(),ce=Ce(se);{var ke=me=>{bu(me,{})},le=me=>{var Ae=nt(),Re=Ce(Ae);{var C=te=>{Tu(te,{})},W=te=>{wv(te,{get activeCategory(){return s()}})};L(Re,te=>{s()==="settings"?te(C):te(W,!1)},!0)}m(me,Ae)};L(ce,me=>{s()==="search"?me(ke):me(le,!1)},!0)}m(X,se)};L(I,X=>{s()==="playlists"||s()==="favorites"?X(F):X(Q,!1)},!0)}m(A,q)};L(be,A=>{s()==="queue"?A($):A(Z,!1)},!0)}m(he,ne)};L(Ee,he=>{s()==="yandex"?he(V):he(G,!1)},!0)}m(z,j)};L(B,z=>{s()==="radio"?z(D):z(U,!1)})}var _e=_(S,2),P=d(_e);_i(P,{isDocked:!0});var O=_(h,2),de=d(O);rf(de,{});var Y=_(v,2);{var ve=z=>{var j=yf(),Ee=d(j);_i(Ee,{}),m(z,j)};L(Y,z=>{i()&&z(ve)})}fe(()=>ht(pe,`padding-bottom: ${i()?"0px":"var(--mini-player-height)"};`)),M("click",x,()=>g(u,!0)),m(e,c),St(),o()}var xf=k('<button class="back-btn-area svelte-l8h85k"><span class="back-icon svelte-l8h85k"><!></span></button> <span class="header-title svelte-l8h85k">Select Playlist</span>',1),Ef=k('<div class="track-info svelte-l8h85k"><div class="title text-ellipsis svelte-l8h85k"> </div> <div class="artist text-ellipsis svelte-l8h85k">Playlist</div></div>'),Sf=k('<div class="track-info svelte-l8h85k"><div class="title text-ellipsis svelte-l8h85k"> </div> <div class="artist text-ellipsis svelte-l8h85k"> </div></div>'),Tf=k('<button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span> </span></button>'),Mf=k('<div class="empty-msg svelte-l8h85k">No custom playlists</div>'),$f=k("<!> <!>",1),Af=k('<button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Play Now</span></button> <div class="sep svelte-l8h85k"></div> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Rename</span></button> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Delete Playlist</span></button>',1),Cf=k('<button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>My Vibe</span></button>'),Pf=k('<button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Go to Album</span></button> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Go to Artist</span></button>',1),Lf=k('<div class="sep svelte-l8h85k"></div> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Remove from Playlist</span></button>',1),zf=k('<div class="sep svelte-l8h85k"></div> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Remove from Queue</span></button>',1),Rf=k('<button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Play Next</span></button> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Add to Queue</span></button> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Add to Playlist...</span></button> <!> <!> <button class="menu-row svelte-l8h85k"><span><!></span> <span> </span></button> <!> <!>',1),jf=k('<div class="backdrop svelte-l8h85k"><div class="menu-card svelte-l8h85k"><div class="menu-header svelte-l8h85k"><!></div> <div class="menu-items scroll-y svelte-l8h85k"><!></div></div></div>');function If(e,t){Et(t,!1);const a=()=>xe(As,"$contextMenu",i),n=()=>xe(ja,"$favorites",i),s=()=>xe(zn,"$playlists",i),[i,l]=jt(),o=T(),u=T(),c=T(),v=T(),h=T(),f=T(),p=T(),E=T();let S=T(),w=T(),x=T(),H=T(0),oe=T(0),J=T("main"),K=T(!1);function pe($){a().isOpen&&(g(K,!1),Nt())}function N(){Nt()}function B(){a().track&&sa.playNext(a().track.file),Nt()}function D(){a().track&&sa.addToQueue(a().track.file),Nt()}function U(){a().track&&ha.toggleFavorite(a().track),Nt()}function _e(){const $=a().track;$&&$.album&&qa("tracks_by_album",{name:$.album,artist:$.artist}),Nt()}function P(){const $=a().track;$&&$.artist&&qa("albums_by_artist",{name:$.artist}),Nt()}async function O(){const{playlistName:$,index:Z}=a().context;$&&Z!==null&&(Br.update(A=>{const q=[...A];return q.splice(Z,1),q}),await ha.removeFromPlaylist($,Z)),Nt()}function de(){const{index:$}=a().context;$!=null&&sa.removeFromQueue($),Nt()}function Y(){const $=a().context.playlist;$&&De.send("stop").then(()=>De.send("clear")).then(()=>De.send(`load "${$.name.replace(/"/g,'\\"')}"`)).then(()=>De.send("play 0")),Nt()}function ve(){const $=a().context.playlist;$&&(Nt(),fa({title:"Rename Playlist",message:`Enter new name for "${$.name}":`,type:"prompt",placeholder:$.name,inputValue:$.name,confirmLabel:"Rename",onConfirm:Z=>{Z&&Z!==$.name&&ha.renamePlaylist($.name,Z)}}))}function z(){const $=a().context.playlist;$&&(Nt(),fa({title:"Delete Playlist",message:`Are you sure you want to delete "${$.name}"? This cannot be undone.`,type:"confirm",confirmLabel:"Delete",onConfirm:()=>{ha.deletePlaylist($.name)}}))}async function j(){const $=a().track;if($&&$.isYandex&&$.id){ze("Starting My Vibe...","info");try{await Hr.playRadio($.id)}catch{ze("Failed to start radio","error")}}Nt()}function Ee(){g(J,"playlists")}function V(){g(J,"main")}async function G($){const Z=a().track;if(Z)try{const A=$.replace(/"/g,'\\"'),q=Z.file.replace(/"/g,'\\"');await De.send(`playlistadd "${A}" "${q}"`),ze(`Added to "${$}"`,"success"),Nt()}catch(A){console.error(A),ze("Failed to add","error")}}re(()=>a(),()=>{a().isOpen&&g(J,"main")}),re(()=>(a(),r(K)),()=>{a().isOpen?!r(K)&&typeof history<"u"&&(history.pushState({contextMenuOpen:!0},""),g(K,!0)):r(K)&&typeof history<"u"&&(history.back(),g(K,!1))}),re(()=>(a(),n()),()=>{g(o,a().track&&n().has(a().track.file))}),re(()=>a(),()=>{g(u,a().track&&(a().track.file.includes("http")||a().track.file.includes("://")))}),re(()=>a(),()=>{g(c,a().track&&a().track.isYandex)}),re(()=>a(),()=>{g(v,a().context?.type==="playlist")}),re(()=>a(),()=>{g(h,a().context?.type==="queue")}),re(()=>a(),()=>{g(f,a().context?.type==="playlist-card")}),re(()=>a(),()=>{g(p,a().context?.source==="miniplayer")}),re(()=>(a(),r(oe),r(H),r(S),r(p),r(w)),()=>{g(E,(()=>{if(!a().isOpen)return"";const $=a().triggerRect,Z=a().x,A=a().y,q=r(oe)||220,I=r(H)||320;if(r(S)<=768&&r(p)&&$)return`
        position: fixed; 
        bottom: ${r(w)-$.top}px; 
        left: 50%; 
        transform: translateX(-50%); 
        margin: 0; 
        transform-origin: bottom center;
      `;let F=0,Q=0,X="top left";if($){const ce=$.left+$.width/2,ke=$.top+$.height/2,le=ce>r(S)/2,me=ke>r(w)/2;le?(F=$.right-q,X=me?"bottom right":"top right"):(F=$.left,X=me?"bottom left":"top left"),me?Q=$.top-I:Q=$.bottom}else F=Z,Q=A,F+q>r(S)&&(F=r(S)-q-10),Q+I>r(w)&&(Q=r(w)-I-10);const se=8;return F<se&&(F=se),F+q>r(S)-se&&(F=r(S)-q-se),Q<se&&(Q=se),Q+I>r(w)-se&&(Q=r(w)-I-se),`position: fixed; top: ${Q}px; left: ${F}px; margin: 0; transform-origin: ${X};`})())}),Ht(),At();var he=nt();M("popstate",za,pe);var ne=Ce(he);{var be=$=>{var Z=jf(),A=d(Z),q=d(A),I=d(q);{var F=le=>{var me=xf(),Ae=Ce(me),Re=d(Ae),C=d(Re);ee(C,()=>(R(y),b(()=>y.BACK))),M("click",Ae,V),m(le,me)},Q=le=>{var me=nt(),Ae=Ce(me);{var Re=W=>{var te=Ef(),ge=d(te),Le=d(ge);fe(()=>ue(Le,(a(),b(()=>a().context.playlist.name)))),m(W,te)},C=W=>{var te=Sf(),ge=d(te),Le=d(ge),Me=_(ge,2),$e=d(Me);fe(()=>{ue(Le,(a(),b(()=>a().track.title))),ue($e,(a(),b(()=>a().track.artist)))}),m(W,te)};L(Ae,W=>{r(f)?W(Re):W(C,!1)},!0)}m(le,me)};L(I,le=>{r(J)==="playlists"?le(F):le(Q,!1)})}var X=_(q,2),se=d(X);{var ce=le=>{var me=$f(),Ae=Ce(me);wt(Ae,1,s,ra,(W,te)=>{var ge=nt(),Le=Ce(ge);{var Me=$e=>{var Oe=Tf(),ae=d(Oe),we=d(ae);ee(we,()=>(R(y),b(()=>y.PLAYLISTS)));var ye=_(ae,2),Ie=d(ye);fe(()=>ue(Ie,(r(te),b(()=>r(te).name)))),M("click",Oe,()=>G(r(te).name)),m($e,Oe)};L(Le,$e=>{r(te),b(()=>r(te).name!=="Favorites")&&$e(Me)})}m(W,ge)});var Re=_(Ae,2);{var C=W=>{var te=Mf();m(W,te)};L(Re,W=>{s(),b(()=>s().filter(te=>te.name!=="Favorites").length===0)&&W(C)})}m(le,me)},ke=le=>{var me=nt(),Ae=Ce(me);{var Re=W=>{var te=Af(),ge=Ce(te),Le=d(ge),Me=d(Le);ee(Me,()=>(R(y),b(()=>y.PLAY)));var $e=_(ge,4),Oe=d($e),ae=d(Oe);ee(ae,()=>(R(y),b(()=>y.EDIT)));var we=_($e,2),ye=d(we),Ie=d(ye);ee(Ie,()=>(R(y),b(()=>y.REMOVE))),M("click",ge,Y),M("click",$e,ve),M("click",we,z),m(W,te)},C=W=>{var te=Rf(),ge=Ce(te),Le=d(ge),Me=d(Le);ee(Me,()=>(R(y),b(()=>y.NEXT)));var $e=_(ge,2),Oe=d($e),ae=d(Oe);ee(ae,()=>(R(y),b(()=>y.MENU)));var we=_($e,2),ye=d(we),Ie=d(ye);ee(Ie,()=>(R(y),b(()=>y.ADD_TO_PLAYLIST||y.ADD)));var ie=_(we,2);{var Pe=Ve=>{var Xe=Cf(),We=d(Xe),rt=d(We);ee(rt,()=>(R(y),b(()=>y.RADIO))),M("click",Xe,j),m(Ve,Xe)};L(ie,Ve=>{r(c)&&Ve(Pe)})}var Se=_(ie,2);{var je=Ve=>{var Xe=Pf(),We=Ce(Xe),rt=d(We),bt=d(rt);ee(bt,()=>(R(y),b(()=>y.ALBUM_LINK||y.ALBUMS)));var gt=_(We,2),dt=d(gt),lt=d(dt);ee(lt,()=>(R(y),b(()=>y.ARTIST_LINK||y.ARTISTS))),M("click",We,_e),M("click",gt,P),m(Ve,Xe)};L(Se,Ve=>{r(u)||Ve(je)})}var Ye=_(Se,2),Ue=d(Ye);let He;var Qe=d(Ue);ee(Qe,()=>(r(o),R(y),b(()=>r(o)?y.HEART_FILLED:y.HEART)));var Ze=_(Ue,2),at=d(Ze),qe=_(Ye,2);{var Ne=Ve=>{var Xe=Lf(),We=_(Ce(Xe),2),rt=d(We),bt=d(rt);ee(bt,()=>(R(y),b(()=>y.REMOVE))),M("click",We,O),m(Ve,Xe)};L(qe,Ve=>{r(v)&&Ve(Ne)})}var Ge=_(qe,2);{var tt=Ve=>{var Xe=zf(),We=_(Ce(Xe),2),rt=d(We),bt=d(rt);ee(bt,()=>(R(y),b(()=>y.REMOVE))),M("click",We,de),m(Ve,Xe)};L(Ge,Ve=>{r(h)&&Ve(tt)})}fe(()=>{He=Ke(Ue,1,"icon svelte-l8h85k",null,He,{liked:r(o)}),ue(at,r(o)?"Unlike":"Like")}),M("click",ge,B),M("click",$e,D),M("click",we,Ee),M("click",Ye,U),m(W,te)};L(Ae,W=>{r(f)?W(Re):W(C,!1)},!0)}m(le,me)};L(se,le=>{r(J)==="playlists"?le(ce):le(ke,!1)})}Ba(A,le=>g(x,le),()=>r(x)),fe(()=>ht(A,r(E))),Gs(A,"clientHeight",le=>g(H,le)),Gs(A,"clientWidth",le=>g(oe,le)),ut(3,A,()=>Ms,()=>({start:.95,duration:100})),M("click",A,Xt(function(le){Xr.call(this,t,le)})),M("click",Z,N),ut(3,Z,()=>yt,()=>({duration:100})),m($,Z)};L(ne,$=>{a(),b(()=>a().isOpen)&&$(be)})}Js("innerWidth",$=>g(S,$)),Js("innerHeight",$=>g(w,$)),m(e,he),St(),l()}var Nf=k('<p class="modal-message svelte-1bxxaoh"> </p>'),Df=k('<div class="input-wrapper svelte-1bxxaoh"><input type="text" autoFocus/></div>'),Of=k('<span class="check svelte-1bxxaoh">â</span>'),Ff=k("<button> <!></button>"),qf=k('<div class="select-list svelte-1bxxaoh"></div>'),Bf=k('<button class="btn cancel svelte-1bxxaoh"> </button>'),Uf=k('<div class="modal-actions svelte-1bxxaoh"><!> <button class="btn confirm svelte-1bxxaoh"> </button></div>'),Yf=k('<div class="backdrop svelte-1bxxaoh"><div class="modal-card svelte-1bxxaoh"><div class="modal-header svelte-1bxxaoh"><span class="modal-title svelte-1bxxaoh"> </span></div> <div class="modal-body svelte-1bxxaoh"><!> <!></div> <!></div></div>');function Hf(e,t){Et(t,!1);const a=()=>xe(kn,"$modal",n),[n,s]=jt();let i=T(!1),l=T();function o(){if(a().type==="prompt"){const S=a().inputValue?a().inputValue.trim():"";if(S.length===0){c();return}a().onConfirm&&a().onConfirm(S)}else a().onConfirm&&a().onConfirm();dn()}function u(S){a().onConfirm&&a().onConfirm(S),dn()}function c(){g(i,!0),r(l)&&r(l).focus(),setTimeout(()=>{g(i,!1)},400)}function v(){dn()}function h(S){S.key==="Enter"&&a().type!=="select"&&o(),r(i)&&g(i,!1)}re(()=>a(),()=>{a().isOpen||g(i,!1)}),Ht(),At();var f=nt(),p=Ce(f);{var E=S=>{var w=Yf(),x=d(w),H=d(x),oe=d(H),J=d(oe),K=_(H,2),pe=d(K);{var N=O=>{var de=Nf(),Y=d(de);fe(()=>ue(Y,(a(),b(()=>a().message)))),m(O,de)};L(pe,O=>{a(),b(()=>a().message)&&O(N)})}var B=_(pe,2);{var D=O=>{var de=Df(),Y=d(de);let ve;Ba(Y,z=>g(l,z),()=>r(l)),fe(()=>{ve=Ke(Y,1,"modal-input svelte-1bxxaoh",null,ve,{"shake-error":r(i)}),Ut(Y,"placeholder",(a(),b(()=>a().placeholder)))}),er(Y,()=>a().inputValue,z=>nc(kn,b(a).inputValue=z,b(a))),M("keydown",Y,h),m(O,de)},U=O=>{var de=nt(),Y=Ce(de);{var ve=z=>{var j=qf();wt(j,5,()=>(a(),b(()=>a().options)),ra,(Ee,V)=>{var G=Ff();let he;var ne=d(G),be=_(ne);{var $=Z=>{var A=Of();m(Z,A)};L(be,Z=>{r(V),a(),b(()=>r(V).value===a().inputValue)&&Z($)})}fe(()=>{he=Ke(G,1,"select-item svelte-1bxxaoh",null,he,{active:r(V).value===a().inputValue}),ue(ne,`${r(V),b(()=>r(V).label)??""} `)}),M("click",G,()=>u(r(V).value)),m(Ee,G)}),m(z,j)};L(Y,z=>{a(),b(()=>a().type==="select")&&z(ve)},!0)}m(O,de)};L(B,O=>{a(),b(()=>a().type==="prompt")?O(D):O(U,!1)})}var _e=_(K,2);{var P=O=>{var de=Uf(),Y=d(de);{var ve=Ee=>{var V=Bf(),G=d(V);fe(()=>ue(G,(a(),b(()=>a().cancelLabel)))),M("click",V,function(...he){dn?.apply(this,he)}),m(Ee,V)};L(Y,Ee=>{a(),b(()=>a().type==="confirm"||a().type==="prompt")&&Ee(ve)})}var z=_(Y,2),j=d(z);fe(()=>ue(j,(a(),b(()=>a().confirmLabel)))),M("click",z,o),m(O,de)};L(_e,O=>{a(),b(()=>a().type!=="select")&&O(P)})}fe(()=>ue(J,(a(),b(()=>a().title)))),ut(3,x,()=>Ms,()=>({start:.95,duration:200})),M("click",x,Xt(function(O){Xr.call(this,t,O)})),M("click",w,v),ut(3,w,()=>yt,()=>({duration:150})),m(S,w)};L(p,S=>{a(),b(()=>a().isOpen)&&S(E)})}m(e,f),St(),s()}const mi={init(){this.handleHashChange(),window.addEventListener("hashchange",()=>this.handleHashChange())},handleHashChange(){let e=window.location.hash.slice(1);for(;e.startsWith("/");)e=e.slice(1);if(!e){(et(Wt).length>1||et(Dt)==="search")&&(this.setRootTab("artists"),window.location.hash="/artists");return}const t=e.split("/").map(decodeURIComponent),a=t[0];let n=ad();switch(n||t.length>1&&(a==="album"&&t.length>=3?n={artist:t[1],name:t[2]}:a==="artist"&&t.length>=2?n={name:t[1]}:n={name:t[1],displayName:t[1]}),console.log(`[Router] Navigating: ${a}`,n),a){case"queue":this.setRootTab("queue");break;case"radio":this.setRootTab("radio");break;case"playlists":this.setRootTab("playlists");break;case"settings":this.setRootTab("settings");break;case"favorites":Dt.set("favorites"),Wt.set([{view:"root"},{view:"details",data:{name:"Favorites"}}]);break;case"artists":this.setRootTab("artists");break;case"albums":this.setRootTab("albums");break;case"search":Dt.set("search"),t[1]&&Ur.set(t[1]),Wt.set([{view:"root"}]);break;case"album":Dt.set("albums"),Wt.set([{view:"root"},{view:"tracks_by_album",data:n}]);break;case"artist":Dt.set("artists"),Wt.set([{view:"root"},{view:"albums_by_artist",data:n}]);break;case"playlist":Dt.set("playlists"),Wt.set([{view:"root"},{view:"details",data:n}]);break;case"yandex":Dt.set("yandex"),Wt.set([{view:"root"}]);break;default:this.setRootTab("artists");break}},setRootTab(e){Dt.set(e),Wt.set([{view:"root"}])},updateUrl(e,t){let a="";if(e==="root"){const n=et(Dt);if(n==="search"){const s=et(Ur);a=s?`search/${encodeURIComponent(s)}`:"search"}else a=n}else if(e==="details"){const n=t.name||t;a=n==="Favorites"?"favorites":`playlist/${encodeURIComponent(n)}`}else if(e==="albums_by_artist"){const n=t.name||t;a=`artist/${encodeURIComponent(n)}`}else if(e==="tracks_by_album"){const n=t.name||t,s=t.artist;s?a=`album/${encodeURIComponent(s)}/${encodeURIComponent(n)}`:a=`album/${encodeURIComponent(n)}`}else e==="queue"&&(a="queue");if(a){const n=`#/${a}`;decodeURIComponent(window.location.hash)!==decodeURIComponent(n)&&(window.location.hash=`/${a}`)}}};var Vf=k("<!> <!> <!>",1);function Wf(e,t){Et(t,!1),Ya(async()=>{mi.init(),td((l,o)=>{mi.updateUrl(l,o)}),bo(),Na.loadRadioStations();try{const l=await Ia.getArtists();l.length>0?console.log(`[App] Database ready. Loaded ${l.length} artists from cache.`):(console.log("[App] Database empty. Starting initial sync..."),Na.syncLibrary())}catch(l){console.error("[App] DB Check failed:",l),ze("Local DB error. Please update library manually.","error")}}),At();var a=Vf(),n=Ce(a);kf(n,{});var s=_(n,2);If(s,{});var i=_(s,2);Hf(i,{}),m(e,a),St()}Dl(Wf,{target:document.getElementById("app")});
