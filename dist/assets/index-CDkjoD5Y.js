(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function a(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=a(n);fetch(n.href,i)}})();const Gs=!1;var ns=Array.isArray,Ao=Array.prototype.indexOf,Cs=Array.from,Si=Object.defineProperty,Er=Object.getOwnPropertyDescriptor,Ei=Object.getOwnPropertyDescriptors,Co=Object.prototype,Po=Array.prototype,yn=Object.getPrototypeOf,Bn=Object.isExtensible;function Lo(e){return typeof e=="function"}const Zt=()=>{};function zo(e){return e()}function ks(e){for(var t=0;t<e.length;t++)e[t]()}function Ti(){var e,t,a=new Promise((s,n)=>{e=s,t=n});return{promise:a,resolve:e,reject:t}}const Pt=2,wn=4,Ps=8,Ro=1<<24,ya=16,Ra=32,fr=64,Ls=128,da=512,At=1024,Wt=2048,va=4096,ta=8192,Aa=16384,zs=32768,lr=65536,Yn=1<<17,$i=1<<18,Lr=1<<19,Mi=1<<20,Ea=1<<25,cr=32768,Zs=1<<21,kn=1<<22,Ya=1<<23,Ca=Symbol("$state"),jo=Symbol("legacy props"),Io=Symbol(""),kr=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function xn(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function No(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Do(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Oo(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Fo(e){throw new Error("https://svelte.dev/e/effect_orphan")}function qo(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Bo(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function Yo(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Uo(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Ho(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Vo(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Wo=1,Qo=2,Ai=4,Xo=8,Ko=16,Go=1,Zo=2,Jo=4,el=8,tl=16,al=1,rl=2,sl=4,nl=1,il=2,Rt=Symbol(),ol="http://www.w3.org/1999/xhtml";function ll(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function cl(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Ci(e){return e===this.v}function Sn(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function Pi(e){return!Sn(e,this.v)}let zr=!1,dl=!1;function vl(){zr=!0}let _t=null;function Tr(e){_t=e}function $t(e,t=!1,a){_t={p:_t,i:!1,c:null,e:null,s:e,x:null,l:zr&&!t?{s:null,u:null,$:[]}:null}}function Mt(e){var t=_t,a=t.e;if(a!==null){t.e=null;for(var s of a)Wi(s)}return t.i=!0,_t=t.p,{}}function is(){return!zr||_t!==null&&_t.l===null}let Ja=[];function Li(){var e=Ja;Ja=[],ks(e)}function hr(e){if(Ja.length===0&&!Yr){var t=Ja;queueMicrotask(()=>{t===Ja&&Li()})}Ja.push(e)}function ul(){for(;Ja.length>0;)Li()}function zi(e){var t=lt;if(t===null)return nt.f|=Ya,e;if((t.f&zs)===0){if((t.f&Ls)===0)throw e;t.b.error(e)}else $r(e,t)}function $r(e,t){for(;t!==null;){if((t.f&Ls)!==0)try{t.b.error(e);return}catch(a){e=a}t=t.parent}throw e}const vs=new Set;let ot=null,Br=null,na=null,ra=[],Rs=null,Js=!1,Yr=!1;class pa{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#a=0;#r=0;#l=null;#n=new Set;#s=new Set;skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#r>0}process(t){ra=[],Br=null,this.apply();var a={parent:null,effect:null,effects:[],render_effects:[]};for(const s of t)this.#i(s,a);this.is_fork||this.#d(),this.is_deferred()?(this.#o(a.effects),this.#o(a.render_effects)):(Br=this,ot=null,Un(a.render_effects),Un(a.effects),Br=null,this.#l?.resolve()),na=null}#i(t,a){t.f^=At;for(var s=t.first;s!==null;){var n=s.f,i=(n&(Ra|fr))!==0,l=i&&(n&At)!==0,o=l||(n&ta)!==0||this.skipped_effects.has(s);if((s.f&Ls)!==0&&s.b?.is_pending()&&(a={parent:a,effect:s,effects:[],render_effects:[]}),!o&&s.fn!==null){i?s.f^=At:(n&wn)!==0?a.effects.push(s):jr(s)&&((s.f&ya)!==0&&this.#n.add(s),Mr(s));var f=s.first;if(f!==null){s=f;continue}}var d=s.parent;for(s=s.next;s===null&&d!==null;)d===a.effect&&(this.#o(a.effects),this.#o(a.render_effects),a=a.parent),s=d.next,d=d.parent}}#o(t){for(const a of t)(a.f&Wt)!==0?this.#n.add(a):(a.f&va)!==0&&this.#s.add(a),this.#c(a.deps),Ct(a,At)}#c(t){if(t!==null)for(const a of t)(a.f&Pt)===0||(a.f&cr)===0||(a.f^=cr,this.#c(a.deps))}capture(t,a){this.previous.has(t)||this.previous.set(t,a),(t.f&Ya)===0&&(this.current.set(t,t.v),na?.set(t,t.v))}activate(){ot=this,this.apply()}deactivate(){ot===this&&(ot=null,na=null)}flush(){if(this.activate(),ra.length>0){if(Ri(),ot!==null&&ot!==this)return}else this.#a===0&&this.process([]);this.deactivate()}discard(){for(const t of this.#t)t(this);this.#t.clear()}#d(){if(this.#r===0){for(const t of this.#e)t();this.#e.clear()}this.#a===0&&this.#v()}#v(){if(vs.size>1){this.previous.clear();var t=na,a=!0,s={parent:null,effect:null,effects:[],render_effects:[]};for(const i of vs){if(i===this){a=!1;continue}const l=[];for(const[f,d]of this.current){if(i.current.has(f))if(a&&d!==i.current.get(f))i.current.set(f,d);else continue;l.push(f)}if(l.length===0)continue;const o=[...i.current.keys()].filter(f=>!this.current.has(f));if(o.length>0){var n=ra;ra=[];const f=new Set,d=new Map;for(const v of l)ji(v,o,f,d);if(ra.length>0){ot=i,i.apply();for(const v of ra)i.#i(v,s);i.deactivate()}ra=n}}ot=null,na=t}this.committed=!0,vs.delete(this)}increment(t){this.#a+=1,t&&(this.#r+=1)}decrement(t){this.#a-=1,t&&(this.#r-=1),this.revive()}revive(){for(const t of this.#n)this.#s.delete(t),Ct(t,Wt),dr(t);for(const t of this.#s)Ct(t,va),dr(t);this.flush()}oncommit(t){this.#e.add(t)}ondiscard(t){this.#t.add(t)}settled(){return(this.#l??=Ti()).promise}static ensure(){if(ot===null){const t=ot=new pa;vs.add(ot),Yr||pa.enqueue(()=>{ot===t&&t.flush()})}return ot}static enqueue(t){hr(t)}apply(){}}function fl(e){var t=Yr;Yr=!0;try{for(var a;;){if(ul(),ra.length===0&&(ot?.flush(),ra.length===0))return Rs=null,a;Ri()}}finally{Yr=t}}function Ri(){var e=rr;Js=!0;var t=null;try{var a=0;for(Ss(!0);ra.length>0;){var s=pa.ensure();if(a++>1e3){var n,i;hl()}s.process(ra),Ua.clear()}}finally{Js=!1,Ss(e),Rs=null}}function hl(){try{qo()}catch(e){$r(e,Rs)}}let xa=null;function Un(e){var t=e.length;if(t!==0){for(var a=0;a<t;){var s=e[a++];if((s.f&(Aa|ta))===0&&jr(s)&&(xa=new Set,Mr(s),s.deps===null&&s.first===null&&s.nodes===null&&(s.teardown===null&&s.ac===null?Gi(s):s.fn=null),xa?.size>0)){Ua.clear();for(const n of xa){if((n.f&(Aa|ta))!==0)continue;const i=[n];let l=n.parent;for(;l!==null;)xa.has(l)&&(xa.delete(l),i.push(l)),l=l.parent;for(let o=i.length-1;o>=0;o--){const f=i[o];(f.f&(Aa|ta))===0&&Mr(f)}}xa.clear()}}xa=null}}function ji(e,t,a,s){if(!a.has(e)&&(a.add(e),e.reactions!==null))for(const n of e.reactions){const i=n.f;(i&Pt)!==0?ji(n,t,a,s):(i&(kn|ya))!==0&&(i&Wt)===0&&Ii(n,t,s)&&(Ct(n,Wt),dr(n))}}function Ii(e,t,a){const s=a.get(e);if(s!==void 0)return s;if(e.deps!==null)for(const n of e.deps){if(t.includes(n))return!0;if((n.f&Pt)!==0&&Ii(n,t,a))return a.set(n,!0),!0}return a.set(e,!1),!1}function dr(e){for(var t=Rs=e;t.parent!==null;){t=t.parent;var a=t.f;if(Js&&t===lt&&(a&ya)!==0&&(a&$i)===0)return;if((a&(fr|Ra))!==0){if((a&At)===0)return;t.f^=At}}ra.push(t)}function pl(e){let t=0,a=vr(0),s;return()=>{Xr()&&(r(a),Rr(()=>(t===0&&(s=m(()=>e(()=>Ur(a)))),t+=1,()=>{hr(()=>{t-=1,t===0&&(s?.(),s=void 0,Ur(a))})})))}}var gl=lr|Lr|Ls;function _l(e,t,a){new ml(e,t,a)}class ml{parent;#e=!1;#t;#a=null;#r;#l;#n;#s=null;#i=null;#o=null;#c=null;#d=null;#v=0;#u=0;#h=!1;#f=null;#b=pl(()=>(this.#f=vr(this.#v),()=>{this.#f=null}));constructor(t,a,s){this.#t=t,this.#r=a,this.#l=s,this.parent=lt.b,this.#e=!!this.#r.pending,this.#n=Tn(()=>{lt.b=this;{var n=this.#_();try{this.#s=sa(()=>s(n))}catch(i){this.error(i)}this.#u>0?this.#g():this.#e=!1}return()=>{this.#d?.remove()}},gl)}#y(){try{this.#s=sa(()=>this.#l(this.#t))}catch(t){this.error(t)}this.#e=!1}#w(){const t=this.#r.pending;t&&(this.#i=sa(()=>t(this.#t)),pa.enqueue(()=>{var a=this.#_();this.#s=this.#p(()=>(pa.ensure(),sa(()=>this.#l(a)))),this.#u>0?this.#g():(ar(this.#i,()=>{this.#i=null}),this.#e=!1)}))}#_(){var t=this.#t;return this.#e&&(this.#d=Pa(),this.#t.before(this.#d),t=this.#d),t}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#r.pending}#p(t){var a=lt,s=nt,n=_t;ba(this.#n),Ht(this.#n),Tr(this.#n.ctx);try{return t()}catch(i){return zi(i),null}finally{ba(a),Ht(s),Tr(n)}}#g(){const t=this.#r.pending;this.#s!==null&&(this.#c=document.createDocumentFragment(),this.#c.append(this.#d),eo(this.#s,this.#c)),this.#i===null&&(this.#i=sa(()=>t(this.#t)))}#m(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#m(t);return}this.#u+=t,this.#u===0&&(this.#e=!1,this.#i&&ar(this.#i,()=>{this.#i=null}),this.#c&&(this.#t.before(this.#c),this.#c=null))}update_pending_count(t){this.#m(t),this.#v+=t,this.#f&&ur(this.#f,this.#v)}get_effect_pending(){return this.#b(),r(this.#f)}error(t){var a=this.#r.onerror;let s=this.#r.failed;if(this.#h||!a&&!s)throw t;this.#s&&(Vt(this.#s),this.#s=null),this.#i&&(Vt(this.#i),this.#i=null),this.#o&&(Vt(this.#o),this.#o=null);var n=!1,i=!1;const l=()=>{if(n){cl();return}n=!0,i&&Vo(),pa.ensure(),this.#v=0,this.#o!==null&&ar(this.#o,()=>{this.#o=null}),this.#e=this.has_pending_snippet(),this.#s=this.#p(()=>(this.#h=!1,sa(()=>this.#l(this.#t)))),this.#u>0?this.#g():this.#e=!1};var o=nt;try{Ht(null),i=!0,a?.(t,l),i=!1}catch(f){$r(f,this.#n&&this.#n.parent)}finally{Ht(o)}s&&hr(()=>{this.#o=this.#p(()=>{pa.ensure(),this.#h=!0;try{return sa(()=>{s(this.#t,()=>t,()=>l)})}catch(f){return $r(f,this.#n.parent),null}finally{this.#h=!1}})})}}function bl(e,t,a,s){const n=is()?os:gt;if(a.length===0&&e.length===0){s(t.map(n));return}var i=ot,l=lt,o=yl();function f(){Promise.all(a.map(d=>wl(d))).then(d=>{o();try{s([...t.map(n),...d])}catch(v){(l.f&Aa)===0&&$r(v,l)}i?.deactivate(),xs()}).catch(d=>{$r(d,l)})}e.length>0?Promise.all(e).then(()=>{o();try{return f()}finally{i?.deactivate(),xs()}}):f()}function yl(){var e=lt,t=nt,a=_t,s=ot;return function(i=!0){ba(e),Ht(t),Tr(a),i&&s?.activate()}}function xs(){ba(null),Ht(null),Tr(null)}function os(e){var t=Pt|Wt,a=nt!==null&&(nt.f&Pt)!==0?nt:null;return lt!==null&&(lt.f|=Lr),{ctx:_t,deps:null,effects:null,equals:Ci,f:t,fn:e,reactions:null,rv:0,v:Rt,wv:0,parent:a??lt,ac:null}}function wl(e,t){let a=lt;a===null&&No();var s=a.b,n=void 0,i=vr(Rt),l=!nt,o=new Map;return Ll(()=>{var f=Ti();n=f.promise;try{Promise.resolve(e()).then(f.resolve,f.reject).then(()=>{d===ot&&d.committed&&d.deactivate(),xs()})}catch(u){f.reject(u),xs()}var d=ot;if(l){var v=!s.is_pending();s.update_pending_count(1),d.increment(v),o.get(d)?.reject(kr),o.delete(d),o.set(d,f)}const h=(u,p=void 0)=>{if(d.activate(),p)p!==kr&&(i.f|=Ya,ur(i,p));else{(i.f&Ya)!==0&&(i.f^=Ya),ur(i,u);for(const[S,$]of o){if(o.delete(S),S===d)break;$.reject(kr)}}l&&(s.update_pending_count(-1),d.decrement(v))};f.promise.then(h,u=>h(null,u||"unknown"))}),cs(()=>{for(const f of o.values())f.reject(kr)}),new Promise(f=>{function d(v){function h(){v===n?f(i):d(n)}v.then(h,h)}d(n)})}function Nr(e){const t=os(e);return to(t),t}function gt(e){const t=os(e);return t.equals=Pi,t}function Ni(e){var t=e.effects;if(t!==null){e.effects=null;for(var a=0;a<t.length;a+=1)Vt(t[a])}}function kl(e){for(var t=e.parent;t!==null;){if((t.f&Pt)===0)return(t.f&Aa)===0?t:null;t=t.parent}return null}function En(e){var t,a=lt;ba(kl(e));try{e.f&=~cr,Ni(e),t=no(e)}finally{ba(a)}return t}function Di(e){var t=En(e);if(e.equals(t)||(ot?.is_fork||(e.v=t),e.wv=ro()),!gr)if(na!==null)(Xr()||ot?.is_fork)&&na.set(e,t);else{var a=(e.f&da)===0?va:At;Ct(e,a)}}let en=new Set;const Ua=new Map;let Oi=!1;function vr(e,t){var a={f:0,v:e,reactions:null,equals:Ci,rv:0,wv:0};return a}function Ia(e,t){const a=vr(e);return to(a),a}function T(e,t=!1,a=!0){const s=vr(e);return t||(s.equals=Pi),zr&&a&&_t!==null&&_t.l!==null&&(_t.l.s??=[]).push(s),s}function us(e,t){return _(e,m(()=>r(e))),t}function _(e,t,a=!1){nt!==null&&(!ga||(nt.f&Yn)!==0)&&is()&&(nt.f&(Pt|ya|kn|Yn))!==0&&!La?.includes(e)&&Ho();let s=a?xr(t):t;return ur(e,s)}function ur(e,t){if(!e.equals(t)){var a=e.v;gr?Ua.set(e,t):Ua.set(e,a),e.v=t;var s=pa.ensure();s.capture(e,a),(e.f&Pt)!==0&&((e.f&Wt)!==0&&En(e),Ct(e,(e.f&da)!==0?At:va)),e.wv=ro(),Fi(e,Wt),is()&&lt!==null&&(lt.f&At)!==0&&(lt.f&(Ra|fr))===0&&(aa===null?Il([e]):aa.push(e)),!s.is_fork&&en.size>0&&!Oi&&xl()}return t}function xl(){Oi=!1;var e=rr;Ss(!0);const t=Array.from(en);try{for(const a of t)(a.f&At)!==0&&Ct(a,va),jr(a)&&Mr(a)}finally{Ss(e)}en.clear()}function Ur(e){_(e,e.v+1)}function Fi(e,t){var a=e.reactions;if(a!==null)for(var s=is(),n=a.length,i=0;i<n;i++){var l=a[i],o=l.f;if(!(!s&&l===lt)){var f=(o&Wt)===0;if(f&&Ct(l,t),(o&Pt)!==0){var d=l;na?.delete(d),(o&cr)===0&&(o&da&&(l.f|=cr),Fi(d,va))}else f&&((o&ya)!==0&&xa!==null&&xa.add(l),dr(l))}}}function xr(e){if(typeof e!="object"||e===null||Ca in e)return e;const t=yn(e);if(t!==Co&&t!==Po)return e;var a=new Map,s=ns(e),n=Ia(0),i=sr,l=o=>{if(sr===i)return o();var f=nt,d=sr;Ht(null),Qn(i);var v=o();return Ht(f),Qn(d),v};return s&&a.set("length",Ia(e.length)),new Proxy(e,{defineProperty(o,f,d){(!("value"in d)||d.configurable===!1||d.enumerable===!1||d.writable===!1)&&Yo();var v=a.get(f);return v===void 0?v=l(()=>{var h=Ia(d.value);return a.set(f,h),h}):_(v,d.value,!0),!0},deleteProperty(o,f){var d=a.get(f);if(d===void 0){if(f in o){const v=l(()=>Ia(Rt));a.set(f,v),Ur(n)}}else _(d,Rt),Ur(n);return!0},get(o,f,d){if(f===Ca)return e;var v=a.get(f),h=f in o;if(v===void 0&&(!h||Er(o,f)?.writable)&&(v=l(()=>{var p=xr(h?o[f]:Rt),S=Ia(p);return S}),a.set(f,v)),v!==void 0){var u=r(v);return u===Rt?void 0:u}return Reflect.get(o,f,d)},getOwnPropertyDescriptor(o,f){var d=Reflect.getOwnPropertyDescriptor(o,f);if(d&&"value"in d){var v=a.get(f);v&&(d.value=r(v))}else if(d===void 0){var h=a.get(f),u=h?.v;if(h!==void 0&&u!==Rt)return{enumerable:!0,configurable:!0,value:u,writable:!0}}return d},has(o,f){if(f===Ca)return!0;var d=a.get(f),v=d!==void 0&&d.v!==Rt||Reflect.has(o,f);if(d!==void 0||lt!==null&&(!v||Er(o,f)?.writable)){d===void 0&&(d=l(()=>{var u=v?xr(o[f]):Rt,p=Ia(u);return p}),a.set(f,d));var h=r(d);if(h===Rt)return!1}return v},set(o,f,d,v){var h=a.get(f),u=f in o;if(s&&f==="length")for(var p=d;p<h.v;p+=1){var S=a.get(p+"");S!==void 0?_(S,Rt):p in o&&(S=l(()=>Ia(Rt)),a.set(p+"",S))}if(h===void 0)(!u||Er(o,f)?.writable)&&(h=l(()=>Ia(void 0)),_(h,xr(d)),a.set(f,h));else{u=h.v!==Rt;var $=l(()=>xr(d));_(h,$)}var w=Reflect.getOwnPropertyDescriptor(o,f);if(w?.set&&w.set.call(v,d),!u){if(s&&typeof f=="string"){var x=a.get("length"),K=Number(f);Number.isInteger(K)&&K>=x.v&&_(x,K+1)}Ur(n)}return!0},ownKeys(o){r(n);var f=Reflect.ownKeys(o).filter(h=>{var u=a.get(h);return u===void 0||u.v!==Rt});for(var[d,v]of a)v.v!==Rt&&!(d in o)&&f.push(d);return f},setPrototypeOf(){Uo()}})}function Hn(e){try{if(e!==null&&typeof e=="object"&&Ca in e)return e[Ca]}catch{}return e}function Sl(e,t){return Object.is(Hn(e),Hn(t))}var Oa,qi,Bi,Yi;function El(){if(Oa===void 0){Oa=window,qi=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,a=Text.prototype;Bi=Er(t,"firstChild").get,Yi=Er(t,"nextSibling").get,Bn(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Bn(a)&&(a.__t=void 0)}}function Pa(e=""){return document.createTextNode(e)}function Fa(e){return Bi.call(e)}function ls(e){return Yi.call(e)}function c(e,t){return Fa(e)}function Ie(e,t=!1){{var a=Fa(e);return a instanceof Comment&&a.data===""?ls(a):a}}function g(e,t=1,a=!1){let s=e;for(;t--;)s=ls(s);return s}function Tl(e){e.textContent=""}function Ui(){return!1}let Vn=!1;function $l(){Vn||(Vn=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function Ml(e,t,a,s=!0){s&&a();for(var n of t)e.addEventListener(n,a);cs(()=>{for(var i of t)e.removeEventListener(i,a)})}function pr(e){var t=nt,a=lt;Ht(null),ba(null);try{return e()}finally{Ht(t),ba(a)}}function Hi(e,t,a,s=a){e.addEventListener(t,()=>pr(a));const n=e.__on_r;n?e.__on_r=()=>{n(),s(!0)}:e.__on_r=()=>s(!0),$l()}function Vi(e){lt===null&&(nt===null&&Fo(),Oo()),gr&&Do()}function Al(e,t){var a=t.last;a===null?t.last=t.first=e:(a.next=e,e.prev=a,t.last=e)}function wa(e,t,a){var s=lt;s!==null&&(s.f&ta)!==0&&(e|=ta);var n={ctx:_t,deps:null,nodes:null,f:e|Wt|da,first:null,fn:t,last:null,next:null,parent:s,b:s&&s.b,prev:null,teardown:null,wv:0,ac:null};if(a)try{Mr(n),n.f|=zs}catch(o){throw Vt(n),o}else t!==null&&dr(n);var i=n;if(a&&i.deps===null&&i.teardown===null&&i.nodes===null&&i.first===i.last&&(i.f&Lr)===0&&(i=i.first,(e&ya)!==0&&(e&lr)!==0&&i!==null&&(i.f|=lr)),i!==null&&(i.parent=s,s!==null&&Al(i,s),nt!==null&&(nt.f&Pt)!==0&&(e&fr)===0)){var l=nt;(l.effects??=[]).push(i)}return n}function Xr(){return nt!==null&&!ga}function cs(e){const t=wa(Ps,null,!1);return Ct(t,At),t.teardown=e,t}function tn(e){Vi();var t=lt.f,a=!nt&&(t&Ra)!==0&&(t&zs)===0;if(a){var s=_t;(s.e??=[]).push(e)}else return Wi(e)}function Wi(e){return wa(wn|Mi,e,!1)}function Cl(e){return Vi(),wa(Ps|Mi,e,!0)}function Pl(e){pa.ensure();const t=wa(fr|Lr,e,!0);return(a={})=>new Promise(s=>{a.outro?ar(t,()=>{Vt(t),s(void 0)}):(Vt(t),s(void 0))})}function Ut(e){return wa(wn,e,!1)}function ae(e,t){var a=_t,s={effect:null,ran:!1,deps:e};a.l.$.push(s),s.effect=Rr(()=>{e(),!s.ran&&(s.ran=!0,m(t))})}function Xt(){var e=_t;Rr(()=>{for(var t of e.l.$){t.deps();var a=t.effect;(a.f&At)!==0&&Ct(a,va),jr(a)&&Mr(a),t.ran=!1}})}function Ll(e){return wa(kn|Lr,e,!0)}function Rr(e,t=0){return wa(Ps|t,e,!0)}function fe(e,t=[],a=[],s=[]){bl(s,t,a,n=>{wa(Ps,()=>e(...n.map(r)),!0)})}function Tn(e,t=0){var a=wa(ya|t,e,!0);return a}function sa(e){return wa(Ra|Lr,e,!0)}function Qi(e){var t=e.teardown;if(t!==null){const a=gr,s=nt;Wn(!0),Ht(null);try{t.call(null)}finally{Wn(a),Ht(s)}}}function Xi(e,t=!1){var a=e.first;for(e.first=e.last=null;a!==null;){const n=a.ac;n!==null&&pr(()=>{n.abort(kr)});var s=a.next;(a.f&fr)!==0?a.parent=null:Vt(a,t),a=s}}function zl(e){for(var t=e.first;t!==null;){var a=t.next;(t.f&Ra)===0&&Vt(t),t=a}}function Vt(e,t=!0){var a=!1;(t||(e.f&$i)!==0)&&e.nodes!==null&&e.nodes.end!==null&&(Ki(e.nodes.start,e.nodes.end),a=!0),Xi(e,t&&!a),Es(e,0),Ct(e,Aa);var s=e.nodes&&e.nodes.t;if(s!==null)for(const i of s)i.stop();Qi(e);var n=e.parent;n!==null&&n.first!==null&&Gi(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function Ki(e,t){for(;e!==null;){var a=e===t?null:ls(e);e.remove(),e=a}}function Gi(e){var t=e.parent,a=e.prev,s=e.next;a!==null&&(a.next=s),s!==null&&(s.prev=a),t!==null&&(t.first===e&&(t.first=s),t.last===e&&(t.last=a))}function ar(e,t,a=!0){var s=[];Zi(e,s,!0);var n=()=>{a&&Vt(e),t&&t()},i=s.length;if(i>0){var l=()=>--i||n();for(var o of s)o.out(l)}else n()}function Zi(e,t,a){if((e.f&ta)===0){e.f^=ta;var s=e.nodes&&e.nodes.t;if(s!==null)for(const o of s)(o.is_global||a)&&t.push(o);for(var n=e.first;n!==null;){var i=n.next,l=(n.f&lr)!==0||(n.f&Ra)!==0&&(e.f&ya)!==0;Zi(n,t,l?a:!1),n=i}}}function $n(e){Ji(e,!0)}function Ji(e,t){if((e.f&ta)!==0){e.f^=ta,(e.f&At)===0&&(Ct(e,Wt),dr(e));for(var a=e.first;a!==null;){var s=a.next,n=(a.f&lr)!==0||(a.f&Ra)!==0;Ji(a,n?t:!1),a=s}var i=e.nodes&&e.nodes.t;if(i!==null)for(const l of i)(l.is_global||t)&&l.in()}}function eo(e,t){if(e.nodes)for(var a=e.nodes.start,s=e.nodes.end;a!==null;){var n=a===s?null:ls(a);t.append(a),a=n}}let wr=null;function Rl(e){var t=wr;try{if(wr=new Set,m(e),t!==null)for(var a of wr)t.add(a);return wr}finally{wr=t}}function jl(e){for(var t of Rl(e))ur(t,t.v)}let rr=!1;function Ss(e){rr=e}let gr=!1;function Wn(e){gr=e}let nt=null,ga=!1;function Ht(e){nt=e}let lt=null;function ba(e){lt=e}let La=null;function to(e){nt!==null&&(La===null?La=[e]:La.push(e))}let Nt=null,Gt=0,aa=null;function Il(e){aa=e}let ao=1,Kr=0,sr=Kr;function Qn(e){sr=e}function ro(){return++ao}function jr(e){var t=e.f;if((t&Wt)!==0)return!0;if(t&Pt&&(e.f&=~cr),(t&va)!==0){var a=e.deps;if(a!==null)for(var s=a.length,n=0;n<s;n++){var i=a[n];if(jr(i)&&Di(i),i.wv>e.wv)return!0}(t&da)!==0&&na===null&&Ct(e,At)}return!1}function so(e,t,a=!0){var s=e.reactions;if(s!==null&&!La?.includes(e))for(var n=0;n<s.length;n++){var i=s[n];(i.f&Pt)!==0?so(i,t,!1):t===i&&(a?Ct(i,Wt):(i.f&At)!==0&&Ct(i,va),dr(i))}}function no(e){var t=Nt,a=Gt,s=aa,n=nt,i=La,l=_t,o=ga,f=sr,d=e.f;Nt=null,Gt=0,aa=null,nt=(d&(Ra|fr))===0?e:null,La=null,Tr(e.ctx),ga=!1,sr=++Kr,e.ac!==null&&(pr(()=>{e.ac.abort(kr)}),e.ac=null);try{e.f|=Zs;var v=e.fn,h=v(),u=e.deps;if(Nt!==null){var p;if(Es(e,Gt),u!==null&&Gt>0)for(u.length=Gt+Nt.length,p=0;p<Nt.length;p++)u[Gt+p]=Nt[p];else e.deps=u=Nt;if(Xr()&&(e.f&da)!==0)for(p=Gt;p<u.length;p++)(u[p].reactions??=[]).push(e)}else u!==null&&Gt<u.length&&(Es(e,Gt),u.length=Gt);if(is()&&aa!==null&&!ga&&u!==null&&(e.f&(Pt|va|Wt))===0)for(p=0;p<aa.length;p++)so(aa[p],e);return n!==null&&n!==e&&(Kr++,aa!==null&&(s===null?s=aa:s.push(...aa))),(e.f&Ya)!==0&&(e.f^=Ya),h}catch(S){return zi(S)}finally{e.f^=Zs,Nt=t,Gt=a,aa=s,nt=n,La=i,Tr(l),ga=o,sr=f}}function Nl(e,t){let a=t.reactions;if(a!==null){var s=Ao.call(a,e);if(s!==-1){var n=a.length-1;n===0?a=t.reactions=null:(a[s]=a[n],a.pop())}}a===null&&(t.f&Pt)!==0&&(Nt===null||!Nt.includes(t))&&(Ct(t,va),(t.f&da)!==0&&(t.f^=da,t.f&=~cr),Ni(t),Es(t,0))}function Es(e,t){var a=e.deps;if(a!==null)for(var s=t;s<a.length;s++)Nl(e,a[s])}function Mr(e){var t=e.f;if((t&Aa)===0){Ct(e,At);var a=lt,s=rr;lt=e,rr=!0;try{(t&(ya|Ro))!==0?zl(e):Xi(e),Qi(e);var n=no(e);e.teardown=typeof n=="function"?n:null,e.wv=ao;var i;Gs&&dl&&(e.f&Wt)!==0&&e.deps}finally{rr=s,lt=a}}}async function Ha(){await Promise.resolve(),fl()}function r(e){var t=e.f,a=(t&Pt)!==0;if(wr?.add(e),nt!==null&&!ga){var s=lt!==null&&(lt.f&Aa)!==0;if(!s&&!La?.includes(e)){var n=nt.deps;if((nt.f&Zs)!==0)e.rv<Kr&&(e.rv=Kr,Nt===null&&n!==null&&n[Gt]===e?Gt++:Nt===null?Nt=[e]:Nt.includes(e)||Nt.push(e));else{(nt.deps??=[]).push(e);var i=e.reactions;i===null?e.reactions=[nt]:i.includes(nt)||i.push(nt)}}}if(gr){if(Ua.has(e))return Ua.get(e);if(a){var l=e,o=l.v;return((l.f&At)===0&&l.reactions!==null||oo(l))&&(o=En(l)),Ua.set(l,o),o}}else a&&(!na?.has(e)||ot?.is_fork&&!Xr())&&(l=e,jr(l)&&Di(l),rr&&Xr()&&(l.f&da)===0&&io(l));if(na?.has(e))return na.get(e);if((e.f&Ya)!==0)throw e.v;return e.v}function io(e){if(e.deps!==null){e.f^=da;for(const t of e.deps)(t.reactions??=[]).push(e),(t.f&Pt)!==0&&(t.f&da)===0&&io(t)}}function oo(e){if(e.v===Rt)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(Ua.has(t)||(t.f&Pt)!==0&&oo(t))return!0;return!1}function m(e){var t=ga;try{return ga=!0,e()}finally{ga=t}}const Dl=-7169;function Ct(e,t){e.f=e.f&Dl|t}function j(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Ca in e)an(e);else if(!Array.isArray(e))for(let t in e){const a=e[t];typeof a=="object"&&a&&Ca in a&&an(a)}}}function an(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let s in e)try{an(e[s],t)}catch{}const a=yn(e);if(a!==Object.prototype&&a!==Array.prototype&&a!==Map.prototype&&a!==Set.prototype&&a!==Date.prototype){const s=Ei(a);for(let n in s){const i=s[n].get;if(i)try{i.call(e)}catch{}}}}}const Ol=["touchstart","touchmove"];function Fl(e){return Ol.includes(e)}const ql=new Set,Xn=new Set;function Bl(e,t,a,s={}){function n(i){if(s.capture||Or.call(t,i),!i.cancelBubble)return pr(()=>a?.call(this,i))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?hr(()=>{t.addEventListener(e,n,s)}):t.addEventListener(e,n,s),n}function M(e,t,a,s,n){var i={capture:s,passive:n},l=Bl(e,t,a,i);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&cs(()=>{t.removeEventListener(e,l,i)})}let Kn=null;function Or(e){var t=this,a=t.ownerDocument,s=e.type,n=e.composedPath?.()||[],i=n[0]||e.target;Kn=e;var l=0,o=Kn===e&&e.__root;if(o){var f=n.indexOf(o);if(f!==-1&&(t===document||t===window)){e.__root=t;return}var d=n.indexOf(t);if(d===-1)return;f<=d&&(l=f)}if(i=n[l]||e.target,i!==t){Si(e,"currentTarget",{configurable:!0,get(){return i||a}});var v=nt,h=lt;Ht(null),ba(null);try{for(var u,p=[];i!==null;){var S=i.assignedSlot||i.parentNode||i.host||null;try{var $=i["__"+s];$!=null&&(!i.disabled||e.target===i)&&$.call(i,e)}catch(w){u?p.push(w):u=w}if(e.cancelBubble||S===t||S===null)break;i=S}if(u){for(let w of p)queueMicrotask(()=>{throw w});throw u}}finally{e.__root=t,delete e.currentTarget,Ht(v),ba(h)}}}function lo(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function Gr(e,t){var a=lt;a.nodes===null&&(a.nodes={start:e,end:t,a:null,t:null})}function k(e,t){var a=(t&nl)!==0,s=(t&il)!==0,n,i=!e.startsWith("<!>");return()=>{n===void 0&&(n=lo(i?e:"<!>"+e),a||(n=Fa(n)));var l=s||qi?document.importNode(n,!0):n.cloneNode(!0);if(a){var o=Fa(l),f=l.lastChild;Gr(o,f)}else Gr(l,l);return l}}function Na(e=""){{var t=Pa(e+"");return Gr(t,t),t}}function st(){var e=document.createDocumentFragment(),t=document.createComment(""),a=Pa();return e.append(t,a),Gr(t,a),e}function b(e,t){e!==null&&e.before(t)}let rn=!0;function oe(e,t){var a=t==null?"":typeof t=="object"?t+"":t;a!==(e.__t??=e.nodeValue)&&(e.__t=a,e.nodeValue=a+"")}function Yl(e,t){return Ul(e,t)}const _r=new Map;function Ul(e,{target:t,anchor:a,props:s={},events:n,context:i,intro:l=!0}){El();var o=new Set,f=h=>{for(var u=0;u<h.length;u++){var p=h[u];if(!o.has(p)){o.add(p);var S=Fl(p);t.addEventListener(p,Or,{passive:S});var $=_r.get(p);$===void 0?(document.addEventListener(p,Or,{passive:S}),_r.set(p,1)):_r.set(p,$+1)}}};f(Cs(ql)),Xn.add(f);var d=void 0,v=Pl(()=>{var h=a??t.appendChild(Pa());return _l(h,{pending:()=>{}},u=>{if(i){$t({});var p=_t;p.c=i}n&&(s.$$events=n),rn=l,d=e(u,s)||{},rn=!0,i&&Mt()}),()=>{for(var u of o){t.removeEventListener(u,Or);var p=_r.get(u);--p===0?(document.removeEventListener(u,Or),_r.delete(u)):_r.set(u,p)}Xn.delete(f),h!==a&&h.parentNode?.removeChild(h)}});return Hl.set(d,v),d}let Hl=new WeakMap;class Vl{anchor;#e=new Map;#t=new Map;#a=new Map;#r=new Set;#l=!0;constructor(t,a=!0){this.anchor=t,this.#l=a}#n=()=>{var t=ot;if(this.#e.has(t)){var a=this.#e.get(t),s=this.#t.get(a);if(s)$n(s),this.#r.delete(a);else{var n=this.#a.get(a);n&&(this.#t.set(a,n.effect),this.#a.delete(a),n.fragment.lastChild.remove(),this.anchor.before(n.fragment),s=n.effect)}for(const[i,l]of this.#e){if(this.#e.delete(i),i===t)break;const o=this.#a.get(l);o&&(Vt(o.effect),this.#a.delete(l))}for(const[i,l]of this.#t){if(i===a||this.#r.has(i))continue;const o=()=>{if(Array.from(this.#e.values()).includes(i)){var d=document.createDocumentFragment();eo(l,d),d.append(Pa()),this.#a.set(i,{effect:l,fragment:d})}else Vt(l);this.#r.delete(i),this.#t.delete(i)};this.#l||!s?(this.#r.add(i),ar(l,o,!1)):o()}}};#s=t=>{this.#e.delete(t);const a=Array.from(this.#e.values());for(const[s,n]of this.#a)a.includes(s)||(Vt(n.effect),this.#a.delete(s))};ensure(t,a){var s=ot,n=Ui();if(a&&!this.#t.has(t)&&!this.#a.has(t))if(n){var i=document.createDocumentFragment(),l=Pa();i.append(l),this.#a.set(t,{effect:sa(()=>a(l)),fragment:i})}else this.#t.set(t,sa(()=>a(this.anchor)));if(this.#e.set(s,t),n){for(const[o,f]of this.#t)o===t?s.skipped_effects.delete(f):s.skipped_effects.add(f);for(const[o,f]of this.#a)o===t?s.skipped_effects.delete(f.effect):s.skipped_effects.add(f.effect);s.oncommit(this.#n),s.ondiscard(this.#s)}else this.#n()}}function P(e,t,a=!1){var s=new Vl(e),n=a?lr:0;function i(l,o){s.ensure(l,o)}Tn(()=>{var l=!1;t((o,f=!0)=>{l=!0,i(f,o)}),l||i(!1,null)},n)}function Dt(e,t){return t}function Wl(e,t,a){for(var s=[],n=t.length,i,l=t.length,o=0;o<n;o++){let h=t[o];ar(h,()=>{if(i){if(i.pending.delete(h),i.done.add(h),i.pending.size===0){var u=e.outrogroups;sn(Cs(i.done)),u.delete(i),u.size===0&&(e.outrogroups=null)}}else l-=1},!1)}if(l===0){var f=s.length===0&&a!==null;if(f){var d=a,v=d.parentNode;Tl(v),v.append(d),e.items.clear()}sn(t,!f)}else i={pending:new Set(t),done:new Set},(e.outrogroups??=new Set).add(i)}function sn(e,t=!0){for(var a=0;a<e.length;a++)Vt(e[a],t)}var Gn;function yt(e,t,a,s,n,i=null){var l=e,o=new Map,f=(t&Ai)!==0;if(f){var d=e;l=d.appendChild(Pa())}var v=null,h=gt(()=>{var x=a();return ns(x)?x:x==null?[]:Cs(x)}),u,p=!0;function S(){w.fallback=v,Ql(w,u,l,t,s),v!==null&&(u.length===0?(v.f&Ea)===0?$n(v):(v.f^=Ea,Fr(v,null,l)):ar(v,()=>{v=null}))}var $=Tn(()=>{u=r(h);for(var x=u.length,K=new Set,le=ot,ce=Ui(),G=0;G<x;G+=1){var me=u[G],H=s(me,G),I=p?null:o.get(H);I?(I.v&&ur(I.v,me),I.i&&ur(I.i,G),ce&&le.skipped_effects.delete(I.e)):(I=Xl(o,p?l:Gn??=Pa(),me,H,G,n,t,a),p||(I.e.f|=Ea),o.set(H,I)),K.add(H)}if(x===0&&i&&!v&&(p?v=sa(()=>i(l)):(v=sa(()=>i(Gn??=Pa())),v.f|=Ea)),!p)if(ce){for(const[ee,Re]of o)K.has(ee)||le.skipped_effects.add(Re.e);le.oncommit(S),le.ondiscard(()=>{})}else S();r(h)}),w={effect:$,items:o,outrogroups:null,fallback:v};p=!1}function Ql(e,t,a,s,n){var i=(s&Xo)!==0,l=t.length,o=e.items,f=e.effect.first,d,v=null,h,u=[],p=[],S,$,w,x;if(i)for(x=0;x<l;x+=1)S=t[x],$=n(S,x),w=o.get($).e,(w.f&Ea)===0&&(w.nodes?.a?.measure(),(h??=new Set).add(w));for(x=0;x<l;x+=1){if(S=t[x],$=n(S,x),w=o.get($).e,e.outrogroups!==null)for(const Re of e.outrogroups)Re.pending.delete(w),Re.done.delete(w);if((w.f&Ea)!==0)if(w.f^=Ea,w===f)Fr(w,null,a);else{var K=v?v.next:f;w===e.effect.last&&(e.effect.last=w.prev),w.prev&&(w.prev.next=w.next),w.next&&(w.next.prev=w.prev),Da(e,v,w),Da(e,w,K),Fr(w,K,a),v=w,u=[],p=[],f=v.next;continue}if((w.f&ta)!==0&&($n(w),i&&(w.nodes?.a?.unfix(),(h??=new Set).delete(w))),w!==f){if(d!==void 0&&d.has(w)){if(u.length<p.length){var le=p[0],ce;v=le.prev;var G=u[0],me=u[u.length-1];for(ce=0;ce<u.length;ce+=1)Fr(u[ce],le,a);for(ce=0;ce<p.length;ce+=1)d.delete(p[ce]);Da(e,G.prev,me.next),Da(e,v,G),Da(e,me,le),f=le,v=me,x-=1,u=[],p=[]}else d.delete(w),Fr(w,f,a),Da(e,w.prev,w.next),Da(e,w,v===null?e.effect.first:v.next),Da(e,v,w),v=w;continue}for(u=[],p=[];f!==null&&f!==w;)(d??=new Set).add(f),p.push(f),f=f.next;if(f===null)continue}(w.f&Ea)===0&&u.push(w),v=w,f=w.next}if(e.outrogroups!==null){for(const Re of e.outrogroups)Re.pending.size===0&&(sn(Cs(Re.done)),e.outrogroups?.delete(Re));e.outrogroups.size===0&&(e.outrogroups=null)}if(f!==null||d!==void 0){var H=[];if(d!==void 0)for(w of d)(w.f&ta)===0&&H.push(w);for(;f!==null;)(f.f&ta)===0&&f!==e.fallback&&H.push(f),f=f.next;var I=H.length;if(I>0){var ee=(s&Ai)!==0&&l===0?a:null;if(i){for(x=0;x<I;x+=1)H[x].nodes?.a?.measure();for(x=0;x<I;x+=1)H[x].nodes?.a?.fix()}Wl(e,H,ee)}}i&&hr(()=>{if(h!==void 0)for(w of h)w.nodes?.a?.apply()})}function Xl(e,t,a,s,n,i,l,o){var f=(l&Wo)!==0?(l&Ko)===0?T(a,!1,!1):vr(a):null,d=(l&Qo)!==0?vr(n):null;return{v:f,i:d,e:sa(()=>(i(t,f??a,d??n,o),()=>{e.delete(s)}))}}function Fr(e,t,a){if(e.nodes)for(var s=e.nodes.start,n=e.nodes.end,i=t&&(t.f&Ea)===0?t.nodes.start:a;s!==null;){var l=ls(s);if(i.before(s),s===n)return;s=l}}function Da(e,t,a){t===null?e.effect.first=a:t.next=a,a===null?e.effect.last=t:a.prev=t}function se(e,t,a=!1,s=!1,n=!1){var i=e,l="";fe(()=>{var o=lt;if(l!==(l=t()??"")&&(o.nodes!==null&&(Ki(o.nodes.start,o.nodes.end),o.nodes=null),l!=="")){var f=l+"";a?f=`<svg>${f}</svg>`:s&&(f=`<math>${f}</math>`);var d=lo(f);if((a||s)&&(d=Fa(d)),Gr(Fa(d),d.lastChild),a||s)for(;Fa(d);)i.before(Fa(d));else i.before(d)}})}function qr(e,t,a,s,n){var i=t.$$slots?.[a],l=!1;i===!0&&(i=t[a==="default"?"children":a],l=!0),i===void 0||i(e,l?()=>s:s)}const Kl=()=>performance.now(),Sa={tick:e=>requestAnimationFrame(e),now:()=>Kl(),tasks:new Set};function co(){const e=Sa.now();Sa.tasks.forEach(t=>{t.c(e)||(Sa.tasks.delete(t),t.f())}),Sa.tasks.size!==0&&Sa.tick(co)}function Gl(e){let t;return Sa.tasks.size===0&&Sa.tick(co),{promise:new Promise(a=>{Sa.tasks.add(t={c:e,f:a})}),abort(){Sa.tasks.delete(t)}}}function fs(e,t){pr(()=>{e.dispatchEvent(new CustomEvent(t))})}function Zl(e){if(e==="float")return"cssFloat";if(e==="offset")return"cssOffset";if(e.startsWith("--"))return e;const t=e.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(a=>a[0].toUpperCase()+a.slice(1)).join("")}function Zn(e){const t={},a=e.split(";");for(const s of a){const[n,i]=s.split(":");if(!n||i===void 0)break;const l=Zl(n.trim());t[l]=i.trim()}return t}const Jl=e=>e;function vt(e,t,a,s){var n=(e&al)!==0,i=(e&rl)!==0,l=n&&i,o=(e&sl)!==0,f=l?"both":n?"in":"out",d,v=t.inert,h=t.style.overflow,u,p;function S(){return pr(()=>d??=a()(t,s?.()??{},{direction:f}))}var $={is_global:o,in(){if(t.inert=v,!n){p?.abort(),p?.reset?.();return}i||u?.abort(),fs(t,"introstart"),u=nn(t,S(),p,1,()=>{fs(t,"introend"),u?.abort(),u=d=void 0,t.style.overflow=h})},out(le){if(!i){le?.(),d=void 0;return}t.inert=!0,fs(t,"outrostart"),p=nn(t,S(),u,0,()=>{fs(t,"outroend"),le?.()})},stop:()=>{u?.abort(),p?.abort()}},w=lt;if((w.nodes.t??=[]).push($),n&&rn){var x=o;if(!x){for(var K=w.parent;K&&(K.f&lr)!==0;)for(;(K=K.parent)&&(K.f&ya)===0;);x=!K||(K.f&zs)!==0}x&&Ut(()=>{m(()=>$.in())})}}function nn(e,t,a,s,n){var i=s===1;if(Lo(t)){var l,o=!1;return hr(()=>{if(!o){var w=t({direction:i?"in":"out"});l=nn(e,w,a,s,n)}}),{abort:()=>{o=!0,l?.abort()},deactivate:()=>l.deactivate(),reset:()=>l.reset(),t:()=>l.t()}}if(a?.deactivate(),!t?.duration)return n(),{abort:Zt,deactivate:Zt,reset:Zt,t:()=>s};const{delay:f=0,css:d,tick:v,easing:h=Jl}=t;var u=[];if(i&&a===void 0&&(v&&v(0,1),d)){var p=Zn(d(0,1));u.push(p,p)}var S=()=>1-s,$=e.animate(u,{duration:f,fill:"forwards"});return $.onfinish=()=>{$.cancel();var w=a?.t()??1-s;a?.abort();var x=s-w,K=t.duration*Math.abs(x),le=[];if(K>0){var ce=!1;if(d)for(var G=Math.ceil(K/16.666666666666668),me=0;me<=G;me+=1){var H=w+x*h(me/G),I=Zn(d(H,1-H));le.push(I),ce||=I.overflow==="hidden"}ce&&(e.style.overflow="hidden"),S=()=>{var ee=$.currentTime;return w+x*h(ee/K)},v&&Gl(()=>{if($.playState!=="running")return!1;var ee=S();return v(ee,1-ee),!0})}$=e.animate(le,{duration:K,fill:"forwards"}),$.onfinish=()=>{S=()=>s,v?.(s,1-s),n()}},{abort:()=>{$&&($.cancel(),$.effect=null,$.onfinish=Zt)},deactivate:()=>{n=Zt},reset:()=>{s===0&&v?.(1,0)},t:()=>S()}}function Mn(e,t,a){Ut(()=>{var s=m(()=>t(e,a?.())||{});if(a&&s?.update){var n=!1,i={};Rr(()=>{var l=a();j(l),n&&Sn(i,l)&&(i=l,s.update(l))}),n=!0}if(s?.destroy)return()=>s.destroy()})}const Jn=[...` 	
\r\fÂ \v\uFEFF`];function ec(e,t,a){var s=e==null?"":""+e;if(t&&(s=s?s+" "+t:t),a){for(var n in a)if(a[n])s=s?s+" "+n:n;else if(s.length)for(var i=n.length,l=0;(l=s.indexOf(n,l))>=0;){var o=l+i;(l===0||Jn.includes(s[l-1]))&&(o===s.length||Jn.includes(s[o]))?s=(l===0?"":s.substring(0,l))+s.substring(o+1):l=o}}return s===""?null:s}function ei(e,t=!1){var a=t?" !important;":";",s="";for(var n in e){var i=e[n];i!=null&&i!==""&&(s+=" "+n+": "+i+a)}return s}function qs(e){return e[0]!=="-"||e[1]!=="-"?e.toLowerCase():e}function tc(e,t){if(t){var a="",s,n;if(Array.isArray(t)?(s=t[0],n=t[1]):s=t,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var i=!1,l=0,o=!1,f=[];s&&f.push(...Object.keys(s).map(qs)),n&&f.push(...Object.keys(n).map(qs));var d=0,v=-1;const $=e.length;for(var h=0;h<$;h++){var u=e[h];if(o?u==="/"&&e[h-1]==="*"&&(o=!1):i?i===u&&(i=!1):u==="/"&&e[h+1]==="*"?o=!0:u==='"'||u==="'"?i=u:u==="("?l++:u===")"&&l--,!o&&i===!1&&l===0){if(u===":"&&v===-1)v=h;else if(u===";"||h===$-1){if(v!==-1){var p=qs(e.substring(d,v).trim());if(!f.includes(p)){u!==";"&&h++;var S=e.substring(d,h).trim();a+=" "+S+";"}}d=h+1,v=-1}}}}return s&&(a+=ei(s)),n&&(a+=ei(n,!0)),a=a.trim(),a===""?null:a}return e==null?null:String(e)}function Je(e,t,a,s,n,i){var l=e.__className;if(l!==a||l===void 0){var o=ec(a,s,i);o==null?e.removeAttribute("class"):e.className=o,e.__className=a}else if(i&&n!==i)for(var f in i){var d=!!i[f];(n==null||d!==!!n[f])&&e.classList.toggle(f,d)}return i}function Bs(e,t={},a,s){for(var n in a){var i=a[n];t[n]!==i&&(a[n]==null?e.style.removeProperty(n):e.style.setProperty(n,i,s))}}function pt(e,t,a,s){var n=e.__style;if(n!==t){var i=tc(t,s);i==null?e.removeAttribute("style"):e.style.cssText=i,e.__style=t}else s&&(Array.isArray(s)?(Bs(e,a?.[0],s[0]),Bs(e,a?.[1],s[1],"important")):Bs(e,a,s));return s}function vo(e,t,a=!1){if(e.multiple){if(t==null)return;if(!ns(t))return ll();for(var s of e.options)s.selected=t.includes(Hr(s));return}for(s of e.options){var n=Hr(s);if(Sl(n,t)){s.selected=!0;return}}(!a||t!==void 0)&&(e.selectedIndex=-1)}function ac(e){var t=new MutationObserver(()=>{vo(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),cs(()=>{t.disconnect()})}function rc(e,t,a=t){var s=new WeakSet,n=!0;Hi(e,"change",i=>{var l=i?"[selected]":":checked",o;if(e.multiple)o=[].map.call(e.querySelectorAll(l),Hr);else{var f=e.querySelector(l)??e.querySelector("option:not([disabled])");o=f&&Hr(f)}a(o),ot!==null&&s.add(ot)}),Ut(()=>{var i=t();if(e===document.activeElement){var l=Br??ot;if(s.has(l))return}if(vo(e,i,n),n&&i===void 0){var o=e.querySelector(":checked");o!==null&&(i=Hr(o),a(i))}e.__value=i,n=!1}),ac(e)}function Hr(e){return"__value"in e?e.__value:e.value}const sc=Symbol("is custom element"),nc=Symbol("is html");function uo(e,t){var a=fo(e);a.value===(a.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!=="PROGRESS")||(e.value=t??"")}function Ot(e,t,a,s){var n=fo(e);n[t]!==(n[t]=a)&&(t==="loading"&&(e[Io]=a),a==null?e.removeAttribute(t):typeof a!="string"&&ic(e).includes(t)?e[t]=a:e.setAttribute(t,a))}function fo(e){return e.__attributes??={[sc]:e.nodeName.includes("-"),[nc]:e.namespaceURI===ol}}var ti=new Map;function ic(e){var t=e.getAttribute("is")||e.nodeName,a=ti.get(t);if(a)return a;ti.set(t,a=[]);for(var s,n=e,i=Element.prototype;i!==n;){s=Ei(n);for(var l in s)s[l].set&&a.push(l);n=yn(n)}return a}function nr(e,t,a=t){var s=new WeakSet;Hi(e,"input",async n=>{var i=n?e.defaultValue:e.value;if(i=Ys(e)?Us(i):i,a(i),ot!==null&&s.add(ot),await Ha(),i!==(i=t())){var l=e.selectionStart,o=e.selectionEnd,f=e.value.length;if(e.value=i??"",o!==null){var d=e.value.length;l===o&&o===f&&d>f?(e.selectionStart=d,e.selectionEnd=d):(e.selectionStart=l,e.selectionEnd=Math.min(o,d))}}}),m(t)==null&&e.value&&(a(Ys(e)?Us(e.value):e.value),ot!==null&&s.add(ot)),Rr(()=>{var n=t();if(e===document.activeElement){var i=Br??ot;if(s.has(i))return}Ys(e)&&n===Us(e.value)||e.type==="date"&&!n&&!e.value||n!==e.value&&(e.value=n??"")})}function Ys(e){var t=e.type;return t==="number"||t==="range"}function Us(e){return e===""?null:+e}class An{#e=new WeakMap;#t;#a;static entries=new WeakMap;constructor(t){this.#a=t}observe(t,a){var s=this.#e.get(t)||new Set;return s.add(a),this.#e.set(t,s),this.#r().observe(t,this.#a),()=>{var n=this.#e.get(t);n.delete(a),n.size===0&&(this.#e.delete(t),this.#t.unobserve(t))}}#r(){return this.#t??(this.#t=new ResizeObserver(t=>{for(var a of t){An.entries.set(a.target,a);for(var s of this.#e.get(a.target)||[])s(a)}}))}}var oc=new An({box:"border-box"});function ai(e,t,a){var s=oc.observe(e,()=>a(e[t]));Ut(()=>(m(()=>a(e[t])),s))}function ri(e,t){return e===t||e?.[Ca]===t}function za(e={},t,a,s){return Ut(()=>{var n,i;return Rr(()=>{n=i,i=[],m(()=>{e!==a(...i)&&(t(e,...i),n&&ri(a(...n),e)&&t(null,...n))})}),()=>{hr(()=>{i&&ri(a(...i),e)&&t(null,...i)})}}),e}function si(e,t){Ml(window,["resize"],()=>pr(()=>t(window[e])))}function ea(e){return function(...t){var a=t[0];return a.stopPropagation(),e?.apply(this,t)}}function Lt(e=!1){const t=_t,a=t.l.u;if(!a)return;let s=()=>j(t.s);if(e){let n=0,i={};const l=os(()=>{let o=!1;const f=t.s;for(const d in f)f[d]!==i[d]&&(i[d]=f[d],o=!0);return o&&n++,n});s=()=>r(l)}a.b.length&&Cl(()=>{ni(t,s),ks(a.b)}),tn(()=>{const n=m(()=>a.m.map(zo));return()=>{for(const i of n)typeof i=="function"&&i()}}),a.a.length&&tn(()=>{ni(t,s),ks(a.a)})}function ni(e,t){if(e.l.s)for(const a of e.l.s)r(a);t()}function Zr(e,t){var a=e.$$events?.[t.type],s=ns(a)?a.slice():a==null?[]:[a];for(var n of s)n.call(this,t)}function Cn(e,t,a){if(e==null)return t(void 0),a&&a(void 0),Zt;const s=m(()=>e.subscribe(t,a));return s.unsubscribe?()=>s.unsubscribe():s}const mr=[];function lc(e,t){return{subscribe:Qe(e,t).subscribe}}function Qe(e,t=Zt){let a=null;const s=new Set;function n(o){if(Sn(e,o)&&(e=o,a)){const f=!mr.length;for(const d of s)d[1](),mr.push(d,e);if(f){for(let d=0;d<mr.length;d+=2)mr[d][0](mr[d+1]);mr.length=0}}}function i(o){n(o(e))}function l(o,f=Zt){const d=[o,f];return s.add(d),s.size===1&&(a=t(n,i)||Zt),o(e),()=>{s.delete(d),s.size===0&&a&&(a(),a=null)}}return{set:n,update:i,subscribe:l}}function ho(e,t,a){const s=!Array.isArray(e),n=s?[e]:e;if(!n.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const i=t.length<2;return lc(a,(l,o)=>{let f=!1;const d=[];let v=0,h=Zt;const u=()=>{if(v)return;h();const S=t(s?d[0]:d,l,o);i?l(S):h=typeof S=="function"?S:Zt},p=n.map((S,$)=>Cn(S,w=>{d[$]=w,v&=~(1<<$),f&&u()},()=>{v|=1<<$}));return f=!0,u(),function(){ks(p),h(),f=!1}})}function at(e){let t;return Cn(e,a=>t=a)(),t}let hs=!1,on=Symbol();function Ee(e,t,a){const s=a[t]??={store:null,source:T(void 0),unsubscribe:Zt};if(s.store!==e&&!(on in a))if(s.unsubscribe(),s.store=e??null,e==null)s.source.v=void 0,s.unsubscribe=Zt;else{var n=!0;s.unsubscribe=Cn(e,i=>{n?s.source.v=i:_(s.source,i)}),n=!1}return e&&on in a?at(e):r(s.source)}function ii(e,t){return e.set(t),t}function Ft(){const e={};function t(){cs(()=>{for(var a in e)e[a].unsubscribe();Si(e,on,{enumerable:!1,value:!0})})}return[e,t]}function cc(e,t,a){return e.set(a),t}function dc(e){var t=hs;try{return hs=!1,[e(),hs]}finally{hs=t}}function xt(e,t,a,s){var n=!zr||(a&Zo)!==0,i=(a&el)!==0,l=(a&tl)!==0,o=s,f=!0,d=()=>(f&&(f=!1,o=l?m(s):s),o),v;if(i){var h=Ca in e||jo in e;v=Er(e,t)?.set??(h&&t in e?le=>e[t]=le:void 0)}var u,p=!1;i?[u,p]=dc(()=>e[t]):u=e[t],u===void 0&&s!==void 0&&(u=d(),v&&(n&&Bo(),v(u)));var S;if(n?S=()=>{var le=e[t];return le===void 0?d():(f=!0,le)}:S=()=>{var le=e[t];return le!==void 0&&(o=void 0),le===void 0?o:le},n&&(a&Jo)===0)return S;if(v){var $=e.$$legacy;return(function(le,ce){return arguments.length>0?((!n||!ce||$||p)&&v(ce?S():le),le):S()})}var w=!1,x=((a&Go)!==0?os:gt)(()=>(w=!1,S()));i&&r(x);var K=lt;return(function(le,ce){if(arguments.length>0){const G=ce?r(x):n&&i?xr(le):le;return _(x,G),w=!0,o!==void 0&&(o=G),le}return gr&&w||(K.f&Aa)!==0?x.v:r(x)})}function Qa(e){_t===null&&xn(),zr&&_t.l!==null?uc(_t).m.push(e):tn(()=>{const t=m(e);if(typeof t=="function")return t})}function po(e){_t===null&&xn(),Qa(()=>()=>m(e))}function vc(e,t,{bubbles:a=!1,cancelable:s=!1}={}){return new CustomEvent(e,{detail:t,bubbles:a,cancelable:s})}function Pn(){const e=_t;return e===null&&xn(),(t,a,s)=>{const n=e.s.$$events?.[t];if(n){const i=ns(n)?n.slice():[n],l=vc(t,a,s);for(const o of i)o.call(e.x,l);return!l.defaultPrevented}return!0}}function uc(e){var t=e.l;return t.u??={a:[],b:[],m:[]}}const fc="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(fc);vl();const hc=e=>e;function go(e){const t=e-1;return t*t*t+1}function oi(e){const t=typeof e=="string"&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[e,"px"]}function kt(e,{delay:t=0,duration:a=400,easing:s=hc}={}){const n=+getComputedStyle(e).opacity;return{delay:t,duration:a,easing:s,css:i=>`opacity: ${i*n}`}}function _o(e,{delay:t=0,duration:a=400,easing:s=go,x:n=0,y:i=0,opacity:l=0}={}){const o=getComputedStyle(e),f=+o.opacity,d=o.transform==="none"?"":o.transform,v=f*(1-l),[h,u]=oi(n),[p,S]=oi(i);return{delay:t,duration:a,easing:s,css:($,w)=>`
			transform: ${d} translate(${(1-$)*h}${u}, ${(1-$)*p}${S});
			opacity: ${f-v*w}`}}function Ln(e,{delay:t=0,duration:a=400,easing:s=go,start:n=0,opacity:i=0}={}){const l=getComputedStyle(e),o=+l.opacity,f=l.transform==="none"?"":l.transform,d=1-n,v=o*(1-i);return{delay:t,duration:a,easing:s,css:(h,u)=>`
			transform: ${f} scale(${1-d*u});
			opacity: ${o-v*u}
		`}}const pc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-arrows-shuffle-2"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 4l3 3l-3 3" /><path d="M18 20l3 -3l-3 -3" /><path d="M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5" /><path d="M3 17h3a5 5 0 0 0 5 -5a5 5 0 0 1 5 -5h5" /></svg>',gc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-deezer"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 16.5h2v.5h-2z" /><path d="M8 16.5h2.5v.5h-2.5z" /><path d="M16 17h-2.5v-.5h2.5z" /><path d="M21.5 17h-2.5v-.5h2.5z" /><path d="M21.5 13h-2.5v.5h2.5z" /><path d="M21.5 9.5h-2.5v.5h2.5z" /><path d="M21.5 6h-2.5v.5h2.5z" /><path d="M16 13h-2.5v.5h2.5z" /><path d="M8 13.5h2.5v-.5h-2.5z" /><path d="M8 9.5h2.5v.5h-2.5z" /></svg>',_c='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-compact-down"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 11l8 3l8 -3" /></svg>',mc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-compact-left"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M13 20l-3 -8l3 -8" /></svg>',bc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-left"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 6l-6 6l6 6" /></svg>',li='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-disc"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0" /><path d="M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M7 12a5 5 0 0 1 5 -5" /><path d="M12 17a5 5 0 0 0 5 -5" /></svg>',yc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-grip-horizontal"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M5 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M12 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M12 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M19 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M19 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /></svg>',wc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-heart"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M19.5 12.572l-7.5 7.428l-7.5 -7.428a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572" /></svg>',kc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-heart"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6.979 3.074a6 6 0 0 1 4.988 1.425l.037 .033l.034 -.03a6 6 0 0 1 4.733 -1.44l.246 .036a6 6 0 0 1 3.364 10.008l-.18 .185l-.048 .041l-7.45 7.379a1 1 0 0 1 -1.313 .082l-.094 -.082l-7.493 -7.422a6 6 0 0 1 3.176 -10.215z" /></svg>',xc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-menu-2"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 6l16 0" /><path d="M4 12l16 0" /><path d="M4 18l16 0" /></svg>',Hs='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-music"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 17a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /><path d="M13 17a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /><path d="M9 17v-13h10v13" /><path d="M9 8h10" /></svg>',Sc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-pause"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z" /><path d="M17 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z" /></svg>',Ec='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-player-play"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 4v16l13 -8z" /></svg>',Tc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-play"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 4v16a1 1 0 0 0 1.524 .852l13 -8a1 1 0 0 0 0 -1.704l-13 -8a1 1 0 0 0 -1.524 .852z" /></svg>',$c='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-skip-back"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M19.496 4.136l-12 7a1 1 0 0 0 0 1.728l12 7a1 1 0 0 0 1.504 -.864v-14a1 1 0 0 0 -1.504 -.864z" /><path d="M4 4a1 1 0 0 1 .993 .883l.007 .117v14a1 1 0 0 1 -1.993 .117l-.007 -.117v-14a1 1 0 0 1 1 -1z" /></svg>',Mc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-skip-forward"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 5v14a1 1 0 0 0 1.504 .864l12 -7a1 1 0 0 0 0 -1.728l-12 -7a1 1 0 0 0 -1.504 .864z" /><path d="M20 4a1 1 0 0 1 .993 .883l.007 .117v14a1 1 0 0 1 -1.993 .117l-.007 -.117v-14a1 1 0 0 1 1 -1z" /></svg>',Ac='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-playlist"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0" /><path d="M17 17v-13h4" /><path d="M13 5h-10" /><path d="M3 9l10 0" /><path d="M9 13h-6" /></svg>',Cc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-radio"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3l-9.371 3.749a1 1 0 0 0 -.629 .928v11.323a1 1 0 0 0 1 1h14a1 1 0 0 0 1 -1v-11a1 1 0 0 0 -1 -1h-14.5" /><path d="M4 12h16" /><path d="M7 12v-2" /><path d="M17 16v.01" /><path d="M13 16v.01" /></svg>',Pc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-refresh"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4" /><path d="M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4" /></svg>',Lc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-repeat"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 12v-3a3 3 0 0 1 3 -3h13m-3 -3l3 3l-3 3" /><path d="M20 12v3a3 3 0 0 1 -3 3h-13m3 3l-3 -3l3 -3" /></svg>',zc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-search"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0" /><path d="M21 21l-6 -6" /></svg>',Rc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-settings"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z" /><path d="M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /></svg>',jc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-trash"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 7l16 0" /><path d="M10 11l0 6" /><path d="M14 11l0 6" /><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12" /><path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3" /></svg>',Ic='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 8a5 5 0 0 1 0 8" /><path d="M17.7 5a9 9 0 0 1 0 14" /><path d="M6 15h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l3.5 -4.5a.8 .8 0 0 1 1.5 .5v14a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5" /></svg>',Nc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume-2"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 8a5 5 0 0 1 0 8" /><path d="M6 15h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l3.5 -4.5a.8 .8 0 0 1 1.5 .5v14a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5" /></svg>',Dc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume-3"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 15h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l3.5 -4.5a.8 .8 0 0 1 1.5 .5v14a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5" /><path d="M16 10l4 4m0 -4l-4 4" /></svg>',Oc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume-off"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 8a5 5 0 0 1 1.912 4.934m-1.377 2.602a5 5 0 0 1 -.535 .464" /><path d="M17.7 5a9 9 0 0 1 2.362 11.086m-1.676 2.299a9 9 0 0 1 -.686 .615" /><path d="M9.069 5.054l.431 -.554a.8 .8 0 0 1 1.5 .5v2m0 4v8a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l1.294 -1.664" /><path d="M3 3l18 18" /></svg>',Fc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-x"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 6l-12 12" /><path d="M6 6l12 12" /></svg>',qc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-device-floppy"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2" /><path d="M12 14m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0" /><path d="M14 4l0 4l-6 0l0 -4" /></svg>',Bc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-file-pencil"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3v4a1 1 0 0 0 1 1h4" /><path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z" /><path d="M10 18l5 -5a1.414 1.414 0 0 0 -2 -2l-5 5v2h2z" /></svg>',ci='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-plus"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 5l0 14" /><path d="M5 12l14 0" /></svg>',Yc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-circle-check"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0" /><path d="M9 12l2 2l4 -4" /></svg>',Uc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-dots"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /></svg>',Hc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-sort-descending"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 6l9 0" /><path d="M4 12l7 0" /><path d="M4 18l7 0" /><path d="M15 15l3 3l3 -3" /><path d="M18 6l0 12" /></svg>',Vc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-sort-ascending"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 6l7 0" /><path d="M4 12l7 0" /><path d="M4 18l9 0" /><path d="M15 9l3 -3l3 3" /><path d="M18 6l0 12" /></svg>',Wc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-yandex"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 20v-16h-2a4 4 0 0 0 -4 4v1a4 4 0 0 0 4 4h2" /><path d="M9 20l3 -7" /></svg>',y={ARTISTS:Hs,ALBUMS:li,GENRES:Hs,PLAYLISTS:Ac,RADIO:Cc,SEARCH:zc,PLAY:Tc,PLAY_OUTLINE:Ec,PAUSE:Sc,PREVIOUS:$c,NEXT:Mc,SHUFFLE:pc,REPEAT:Lc,VOLUME_FULL:Ic,VOLUME_MEDIUM:Nc,VOLUME_MUTE:Dc,VOLUME_OFF:Oc,HEART:wc,HEART_FILLED:kc,SYNC:Pc,SETTINGS:Rc,CLOSE:Fc,MENU:xc,BACK:bc,BACK_COMPACT:mc,CHEVRON_DOWN:_c,DRAG_HANDLE:yc,REMOVE:jc,DEEZER:gc,SAVE:qc,EDIT:Bc,ADD:ci,ACCEPT:Yc,DOTS:Uc,ADD_TO_PLAYLIST:ci,ALBUM_LINK:li,ARTIST_LINK:Hs,SORT_DESC:Hc,SORT_ASC:Vc,YANDEX:Wc};function Ar(e){if(!e||!e.image)return null;if(e.image.startsWith("http"))return e.image;let t="";return e.image==="local"?t=`${e.name}.jpg`:t=e.image,`/imagesw/radio-logos/thumbs/${encodeURIComponent(t)}`}function di(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}const ln=[{id:"default",label:"Default (Moode Dark)",colors:{"--c-white-10":"rgba(255, 255, 255, 0.1)","--c-white-20":"rgba(255, 255, 255, 0.2)","--c-white-30":"rgba(255, 255, 255, 0.3)","--c-white-50":"rgba(255, 255, 255, 0.5)","--c-white-60":"rgba(255, 255, 255, 0.6)","--c-white-90":"rgba(255, 255, 255, 0.9)","--c-black-20":"rgba(0, 0, 0, 0.2)","--c-black-50":"rgba(0, 0, 0, 0.5)","--c-black-70":"rgba(0, 0, 0, 0.7)","--c-black-80":"rgba(0, 0, 0, 0.8)","--c-black-90":"rgba(0, 0, 0, 0.9)","--c-accent":"#fa2d48","--c-accent-hover":"#ff4d65","--c-text-primary":"#ffffff","--c-text-secondary":"rgba(255, 255, 255, 0.6)","--c-text-muted":"#888888","--c-text-inverse":"#000000","--c-bg-app":"#000000","--c-bg-main":"#121212","--c-bg-sidebar":"#000000","--c-bg-card":"#1a1a1a","--c-bg-placeholder":"rgba(255, 255, 255, 0.1)","--c-bg-glass":"rgba(18, 18, 18, 0.95)","--c-bg-toast":"#333333","--c-heart":"#ff4444","--c-error":"#ff4444","--c-surface-hover":"rgba(255, 255, 255, 0.1)","--c-surface-active":"rgba(255, 255, 255, 0.2)","--c-surface-input":"#1a1a1a","--c-surface-input-focus":"rgba(255, 255, 255, 0.1)","--c-surface-button":"rgba(255, 255, 255, 0.1)","--c-surface-button-hover":"rgba(255, 255, 255, 0.1)","--c-surface-drag-phantom":"#1a1a1a","--c-surface-drag-land":"rgba(255, 255, 255, 0.1)","--c-rail-bg":"rgba(255, 255, 255, 0.2)","--c-rail-bg-hover":"rgba(255, 255, 255, 0.3)","--c-skeleton-base":"rgba(255, 255, 255, 0.1)","--c-border":"rgba(255, 255, 255, 0.1)","--c-border-dim":"rgba(255, 255, 255, 0.1)","--c-border-bright":"rgba(255, 255, 255, 0.2)","--c-border-dashed":"rgba(255, 255, 255, 0.2)","--c-border-dashed-hover":"rgba(255, 255, 255, 0.5)","--c-overlay-dim":"rgba(0, 0, 0, 0.5)","--c-overlay-backdrop":"rgba(0, 0, 0, 0.8)","--c-shadow-card":"rgba(0, 0, 0, 0.3)","--c-shadow-popover":"rgba(0, 0, 0, 0.5)","--c-shadow-header":"rgba(0, 0, 0, 0.5)","--c-shadow-phantom":"rgba(0, 0, 0, 0.7)","--c-shadow-glow-accent":"rgba(250, 45, 72, 0.5)","--c-icon-idle":"#9ca3af","--c-icon-hover":"#ffffff","--c-icon-faint":"rgba(255, 255, 255, 0.5)","--icon-stroke-width":"1.5px","--header-height":"64px","--mini-player-height":"90px","--sidebar-width":"260px","--radius-sm":"4px","--radius-md":"8px","--radius-lg":"12px","--radius-xl":"20px","--radius-full":"9999px","--z-base":"1","--z-dock":"1000","--z-modal":"2000","--z-toast":"3000","--z-drag-item":"9999","--trans-fast":"0.2s ease","--trans-smooth":"0.3s cubic-bezier(0.2, 0.8, 0.2, 1)","--c-pl-0":"#fa2d48","--c-pl-1":"#2d7afa","--c-pl-2":"#2dfa85","--c-pl-3":"#faac2d","--c-pl-4":"#b82dfa","--c-pl-5":"#2dfaf3"}},{id:"gruvbox",label:"Gruvbox Dark",colors:{"--c-white-10":"rgba(251, 241, 199, 0.1)","--c-white-20":"rgba(251, 241, 199, 0.2)","--c-white-30":"rgba(251, 241, 199, 0.3)","--c-white-50":"rgba(251, 241, 199, 0.5)","--c-white-60":"rgba(251, 241, 199, 0.6)","--c-white-90":"rgba(251, 241, 199, 0.9)","--c-black-20":"rgba(40, 40, 40, 0.2)","--c-black-50":"rgba(40, 40, 40, 0.5)","--c-black-70":"rgba(40, 40, 40, 0.7)","--c-black-80":"rgba(40, 40, 40, 0.8)","--c-black-90":"rgba(40, 40, 40, 0.9)","--c-accent":"#d65d0e","--c-accent-hover":"#fe8019","--c-text-primary":"#fbf1c7","--c-text-secondary":"#ebdbb2","--c-text-muted":"#928374","--c-text-inverse":"#282828","--c-bg-app":"#282828","--c-bg-main":"#282828","--c-bg-sidebar":"#282828","--c-bg-card":"#3c3836","--c-bg-placeholder":"#504945","--c-bg-glass":"rgba(40, 40, 40, 0.98)","--c-bg-toast":"#32302f","--c-heart":"#fb4934","--c-error":"#cc241d","--c-surface-hover":"#3c3836","--c-surface-active":"#504945","--c-surface-input":"#3c3836","--c-surface-input-focus":"#504945","--c-surface-button":"rgba(251, 241, 199, 0.1)","--c-surface-button-hover":"rgba(251, 241, 199, 0.2)","--c-surface-drag-phantom":"#504945","--c-surface-drag-land":"rgba(251, 241, 199, 0.1)","--c-rail-bg":"#504945","--c-rail-bg-hover":"#665c54","--c-skeleton-base":"#3c3836","--c-border":"#504945","--c-border-dim":"#3c3836","--c-border-bright":"#665c54","--c-border-dashed":"rgba(168, 153, 132, 0.2)","--c-border-dashed-hover":"rgba(168, 153, 132, 0.5)","--c-overlay-dim":"rgba(40, 40, 40, 0.6)","--c-overlay-backdrop":"rgba(29, 32, 33, 0.8)","--c-shadow-card":"rgba(0, 0, 0, 0.3)","--c-shadow-popover":"rgba(0, 0, 0, 0.5)","--c-shadow-header":"rgba(0, 0, 0, 0.2)","--c-shadow-phantom":"rgba(0, 0, 0, 0.5)","--c-shadow-glow-accent":"rgba(214, 93, 14, 0.3)","--c-icon-idle":"#a89984","--c-icon-hover":"#fbf1c7","--c-icon-faint":"#504945","--icon-stroke-width":"1.5px","--header-height":"64px","--mini-player-height":"90px","--sidebar-width":"260px","--radius-sm":"4px","--radius-md":"8px","--radius-lg":"12px","--radius-xl":"16px","--radius-full":"9999px","--z-base":"1","--z-dock":"1000","--z-modal":"2000","--z-toast":"3000","--z-drag-item":"9999","--trans-fast":"0.2s ease","--trans-smooth":"0.3s cubic-bezier(0.2, 0.8, 0.2, 1)","--c-pl-0":"#cc241d","--c-pl-1":"#458588","--c-pl-2":"#a6e3a1","--c-pl-3":"#d65d0e","--c-pl-4":"#b16286","--c-pl-5":"#fabd2f"}}];function Qc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Vs={exports:{}},Ws={exports:{}},vi;function Xc(){return vi||(vi=1,(function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t={rotl:function(a,s){return a<<s|a>>>32-s},rotr:function(a,s){return a<<32-s|a>>>s},endian:function(a){if(a.constructor==Number)return t.rotl(a,8)&16711935|t.rotl(a,24)&4278255360;for(var s=0;s<a.length;s++)a[s]=t.endian(a[s]);return a},randomBytes:function(a){for(var s=[];a>0;a--)s.push(Math.floor(Math.random()*256));return s},bytesToWords:function(a){for(var s=[],n=0,i=0;n<a.length;n++,i+=8)s[i>>>5]|=a[n]<<24-i%32;return s},wordsToBytes:function(a){for(var s=[],n=0;n<a.length*32;n+=8)s.push(a[n>>>5]>>>24-n%32&255);return s},bytesToHex:function(a){for(var s=[],n=0;n<a.length;n++)s.push((a[n]>>>4).toString(16)),s.push((a[n]&15).toString(16));return s.join("")},hexToBytes:function(a){for(var s=[],n=0;n<a.length;n+=2)s.push(parseInt(a.substr(n,2),16));return s},bytesToBase64:function(a){for(var s=[],n=0;n<a.length;n+=3)for(var i=a[n]<<16|a[n+1]<<8|a[n+2],l=0;l<4;l++)n*8+l*6<=a.length*8?s.push(e.charAt(i>>>6*(3-l)&63)):s.push("=");return s.join("")},base64ToBytes:function(a){a=a.replace(/[^A-Z0-9+\/]/ig,"");for(var s=[],n=0,i=0;n<a.length;i=++n%4)i!=0&&s.push((e.indexOf(a.charAt(n-1))&Math.pow(2,-2*i+8)-1)<<i*2|e.indexOf(a.charAt(n))>>>6-i*2);return s}};Ws.exports=t})()),Ws.exports}var Qs,ui;function fi(){if(ui)return Qs;ui=1;var e={utf8:{stringToBytes:function(t){return e.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(e.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var a=[],s=0;s<t.length;s++)a.push(t.charCodeAt(s)&255);return a},bytesToString:function(t){for(var a=[],s=0;s<t.length;s++)a.push(String.fromCharCode(t[s]));return a.join("")}}};return Qs=e,Qs}var Xs,hi;function Kc(){if(hi)return Xs;hi=1,Xs=function(a){return a!=null&&(e(a)||t(a)||!!a._isBuffer)};function e(a){return!!a.constructor&&typeof a.constructor.isBuffer=="function"&&a.constructor.isBuffer(a)}function t(a){return typeof a.readFloatLE=="function"&&typeof a.slice=="function"&&e(a.slice(0,0))}return Xs}var pi;function Gc(){return pi||(pi=1,(function(){var e=Xc(),t=fi().utf8,a=Kc(),s=fi().bin,n=function(i,l){i.constructor==String?l&&l.encoding==="binary"?i=s.stringToBytes(i):i=t.stringToBytes(i):a(i)?i=Array.prototype.slice.call(i,0):!Array.isArray(i)&&i.constructor!==Uint8Array&&(i=i.toString());for(var o=e.bytesToWords(i),f=i.length*8,d=1732584193,v=-271733879,h=-1732584194,u=271733878,p=0;p<o.length;p++)o[p]=(o[p]<<8|o[p]>>>24)&16711935|(o[p]<<24|o[p]>>>8)&4278255360;o[f>>>5]|=128<<f%32,o[(f+64>>>9<<4)+14]=f;for(var S=n._ff,$=n._gg,w=n._hh,x=n._ii,p=0;p<o.length;p+=16){var K=d,le=v,ce=h,G=u;d=S(d,v,h,u,o[p+0],7,-680876936),u=S(u,d,v,h,o[p+1],12,-389564586),h=S(h,u,d,v,o[p+2],17,606105819),v=S(v,h,u,d,o[p+3],22,-1044525330),d=S(d,v,h,u,o[p+4],7,-176418897),u=S(u,d,v,h,o[p+5],12,1200080426),h=S(h,u,d,v,o[p+6],17,-1473231341),v=S(v,h,u,d,o[p+7],22,-45705983),d=S(d,v,h,u,o[p+8],7,1770035416),u=S(u,d,v,h,o[p+9],12,-1958414417),h=S(h,u,d,v,o[p+10],17,-42063),v=S(v,h,u,d,o[p+11],22,-1990404162),d=S(d,v,h,u,o[p+12],7,1804603682),u=S(u,d,v,h,o[p+13],12,-40341101),h=S(h,u,d,v,o[p+14],17,-1502002290),v=S(v,h,u,d,o[p+15],22,1236535329),d=$(d,v,h,u,o[p+1],5,-165796510),u=$(u,d,v,h,o[p+6],9,-1069501632),h=$(h,u,d,v,o[p+11],14,643717713),v=$(v,h,u,d,o[p+0],20,-373897302),d=$(d,v,h,u,o[p+5],5,-701558691),u=$(u,d,v,h,o[p+10],9,38016083),h=$(h,u,d,v,o[p+15],14,-660478335),v=$(v,h,u,d,o[p+4],20,-405537848),d=$(d,v,h,u,o[p+9],5,568446438),u=$(u,d,v,h,o[p+14],9,-1019803690),h=$(h,u,d,v,o[p+3],14,-187363961),v=$(v,h,u,d,o[p+8],20,1163531501),d=$(d,v,h,u,o[p+13],5,-1444681467),u=$(u,d,v,h,o[p+2],9,-51403784),h=$(h,u,d,v,o[p+7],14,1735328473),v=$(v,h,u,d,o[p+12],20,-1926607734),d=w(d,v,h,u,o[p+5],4,-378558),u=w(u,d,v,h,o[p+8],11,-2022574463),h=w(h,u,d,v,o[p+11],16,1839030562),v=w(v,h,u,d,o[p+14],23,-35309556),d=w(d,v,h,u,o[p+1],4,-1530992060),u=w(u,d,v,h,o[p+4],11,1272893353),h=w(h,u,d,v,o[p+7],16,-155497632),v=w(v,h,u,d,o[p+10],23,-1094730640),d=w(d,v,h,u,o[p+13],4,681279174),u=w(u,d,v,h,o[p+0],11,-358537222),h=w(h,u,d,v,o[p+3],16,-722521979),v=w(v,h,u,d,o[p+6],23,76029189),d=w(d,v,h,u,o[p+9],4,-640364487),u=w(u,d,v,h,o[p+12],11,-421815835),h=w(h,u,d,v,o[p+15],16,530742520),v=w(v,h,u,d,o[p+2],23,-995338651),d=x(d,v,h,u,o[p+0],6,-198630844),u=x(u,d,v,h,o[p+7],10,1126891415),h=x(h,u,d,v,o[p+14],15,-1416354905),v=x(v,h,u,d,o[p+5],21,-57434055),d=x(d,v,h,u,o[p+12],6,1700485571),u=x(u,d,v,h,o[p+3],10,-1894986606),h=x(h,u,d,v,o[p+10],15,-1051523),v=x(v,h,u,d,o[p+1],21,-2054922799),d=x(d,v,h,u,o[p+8],6,1873313359),u=x(u,d,v,h,o[p+15],10,-30611744),h=x(h,u,d,v,o[p+6],15,-1560198380),v=x(v,h,u,d,o[p+13],21,1309151649),d=x(d,v,h,u,o[p+4],6,-145523070),u=x(u,d,v,h,o[p+11],10,-1120210379),h=x(h,u,d,v,o[p+2],15,718787259),v=x(v,h,u,d,o[p+9],21,-343485551),d=d+K>>>0,v=v+le>>>0,h=h+ce>>>0,u=u+G>>>0}return e.endian([d,v,h,u])};n._ff=function(i,l,o,f,d,v,h){var u=i+(l&o|~l&f)+(d>>>0)+h;return(u<<v|u>>>32-v)+l},n._gg=function(i,l,o,f,d,v,h){var u=i+(l&f|o&~f)+(d>>>0)+h;return(u<<v|u>>>32-v)+l},n._hh=function(i,l,o,f,d,v,h){var u=i+(l^o^f)+(d>>>0)+h;return(u<<v|u>>>32-v)+l},n._ii=function(i,l,o,f,d,v,h){var u=i+(o^(l|~f))+(d>>>0)+h;return(u<<v|u>>>32-v)+l},n._blocksize=16,n._digestsize=16,Vs.exports=function(i,l){if(i==null)throw new Error("Illegal argument "+i);var o=e.wordsToBytes(n(i,l));return l&&l.asBytes?o:l&&l.asString?s.bytesToString(o):e.bytesToHex(o)}})()),Vs.exports}var Zc=Gc();const Jc=Qc(Zc),gi=Qe("Disconnected"),Sr=Qe(!1),cn=Qe(null);let Ks;function ze(e,t="info"){cn.set({text:e,type:t}),Ks&&clearTimeout(Ks),Ks=setTimeout(()=>{cn.set(null)},3e3)}const ed=localStorage.getItem("app_theme")||"default",Ts=Qe(ed);Ts.subscribe(e=>{if(typeof document>"u")return;localStorage.setItem("app_theme",e);const t=ln.find(s=>s.id===e);if(!t)return;const a=document.documentElement;document.body.setAttribute("data-theme",e),Object.entries(t.colors).forEach(([s,n])=>{a.style.setProperty(s,n)})});const $s=Qe({isOpen:!1,title:"",message:"",confirmLabel:"Confirm",cancelLabel:"Cancel",onConfirm:null,type:"confirm",inputValue:"",placeholder:"",options:[]});function _a({title:e="Confirm Action",message:t="Are you sure?",confirmLabel:a="Confirm",cancelLabel:s="Cancel",type:n="confirm",inputValue:i="",placeholder:l="",options:o=[],onConfirm:f=()=>{}}){$s.set({isOpen:!0,title:e,message:t,confirmLabel:a,cancelLabel:s,type:n,inputValue:i,placeholder:l,options:o,onConfirm:f})}function ps(){$s.set({isOpen:!1,title:"",message:"",confirmLabel:"",cancelLabel:"",onConfirm:null,type:"confirm",inputValue:"",placeholder:"",options:[]})}const Tt=Qe({state:"stop",volume:50,elapsed:0,duration:0,random:!1,repeat:!1,bitrate:0,format:"",song:0,songid:0}),Qt=Qe({title:"Not Playing",artist:"",album:"",file:"",stationName:null,id:null,pos:null,isYandex:!1}),Jr=Qe({active:!1,tracks:[],currentIndex:-1,currentTrackId:null,currentTrackFile:null,streamCache:{}}),Ms=Qe(!1),ms=Qe(!1),dn=Qe(!1),vn=Qe(!1),It=Qe("library"),js=Qe(null),oa=Qe(!1),td=localStorage.getItem("sidebarCollapsed")==="true",un=Qe(td);un.subscribe(e=>{typeof localStorage<"u"&&localStorage.setItem("sidebarCollapsed",String(e))});const Xa=Qe([]),Is=Qe([]),Vr=Qe([]),ad=Qe(null),qa=Qe(new Set),St=Qe(!1),Et=Qe([{view:"root"}]),Va=Qe([]),mo=Qe(0),Wr=Qe(""),fn=Qe(null),bo=Qe({});function rd(e,t){bo.update(a=>({...a,[e]:t}))}function sd(e){return at(bo)[e]||0}const zn=Qe({isOpen:!1,track:null,context:{type:"general",playlistName:null,index:null},x:0,y:0,triggerRect:null});function nd(){if(typeof navigator<"u"&&navigator.vibrate)try{navigator.vibrate(70)}catch{}}function es(e,t,a={}){if(!t&&a.type!=="playlist-card")return;nd();let s=0,n=0,i=null,l=e.currentTarget;!l&&e.target&&e.target.closest&&(l=e.target.closest("button")||e.target),l&&l.getBoundingClientRect&&(i=l.getBoundingClientRect());const o=e.detail?.originalEvent||e;o.touches&&o.touches.length>0?(s=o.touches[0].clientX,n=o.touches[0].clientY):o.clientX&&(s=o.clientX,n=o.clientY);const f={type:"general",playlistName:null,index:null,...a};zn.set({isOpen:!0,track:t,context:f,x:s,y:n,triggerRect:i})}function Bt(){zn.set({isOpen:!1,track:null,context:{},x:0,y:0,triggerRect:null})}let hn=null,pn=null;function id(e){pn=e}function Wa(e,t=null){t&&(hn=t),pn?pn(e,t):console.warn("Router callback not set!")}function od(){const e=hn;return hn=null,e}function ld(){window.history.back()}function Cr(e,t=[],a=null){if(e&&e.image&&e.image.startsWith("http"))return e.image;if(e&&e.cover&&e.cover.startsWith("http"))return e.cover;if(!e||!e.file)return"/images/default_cover.png";if(yo(e.file)||e.genre==="Radio")return e.image?Ar(e):wo(e,t,a)||"/images/radio_placeholder.png";let s=e.file.startsWith("/")?e.file.slice(1):e.file;return`/coverart.php/${encodeURI(s)}`}function ts(e,t="sm",a=[],s=null){if(!e)return"/images/default_icon.png";if(e.image&&e.image.startsWith("http"))return e.image;if(e.cover&&e.cover.startsWith("http"))return e.cover;if(e.file&&(yo(e.file)||e.genre==="Radio"||Array.isArray(e)))return e.image?Ar(e):wo(e,a,s)||"/images/radio_icon.png";if(!e.file)return"/images/default_icon.png";if(e.thumbHash){const n=t==="md"?"":"_sm";return`/imagesw/thmcache/${e.thumbHash}${n}.jpg`}try{const n=e.file.lastIndexOf("/"),i=n===-1?".":e.file.substring(0,n);return`/imagesw/thmcache/${Jc(i)}${t==="md"?"":"_sm"}.jpg`}catch{let i=e.file.startsWith("/")?e.file.slice(1):e.file;return`/coverart.php/${encodeURI(i)}`}}function yo(e){return!e||e.includes("yandex.net")||e.includes("get-mp3")?!1:e.startsWith("http")||e.includes("://")||e.includes("RADIO")}function wo(e,t,a){const s=f=>(f||"").toString().toLowerCase().replace(/[^a-z0-9]/g,""),n=s(e?.title),i=s(e?.stationName),l=s(a);if(t&&t.length>0){const f=t.find(d=>{const v=s(d.name);return v?v===i||v===l||n&&v===n||n&&n.includes(v)&&v.length>3:!1});if(f)return Ar(f)}const o=e?.stationName||a;return o?Ar({name:o,image:"local"}):null}ho([Qt,Xa,js],([e,t,a])=>Cr(e,t,a));ho(Qt,e=>!e||!e.file||e.file.startsWith("http")?null:`/coverart.php/${encodeURI(e.file)}`);const cd=localStorage.getItem("alarmTime")||"08:00",dd=localStorage.getItem("alarmEnabled")==="true",vd=localStorage.getItem("alarmPlaylist")||"Favorites",gn=Qe(cd),_n=Qe(dd),mn=Qe(vd);gn.subscribe(e=>localStorage.setItem("alarmTime",e));_n.subscribe(e=>localStorage.setItem("alarmEnabled",String(e)));mn.subscribe(e=>localStorage.setItem("alarmPlaylist",e));const ud=localStorage.getItem("yandex_enabled")==="true",as=Qe(ud);as.subscribe(e=>{typeof localStorage<"u"&&localStorage.setItem("yandex_enabled",String(e))});const la=Qe(new Set),ht={NAME:"MoodePlayerDB",STORE_NAME:"music",VERSION:3},Ga={SYNC:"/wave-api.php",YANDEX:"/wave-yandex-api.php",STATIONS:e=>"/wave-api.php?action=stations",COVER_ART:e=>`/coverart.php?u=${encodeURIComponent(e)}`,RADIO_LOGOS:e=>`/imagesw/radio-logos/thumbs/${e}`},Ba={open(){return new Promise((e,t)=>{const a=indexedDB.open(ht.NAME,ht.VERSION);a.onupgradeneeded=s=>{const n=s.target.result,i=s.target.transaction;let l;n.objectStoreNames.contains(ht.STORE_NAME)?l=i.objectStore(ht.STORE_NAME):l=n.createObjectStore(ht.STORE_NAME,{keyPath:"file"}),l.indexNames.contains("artist")||l.createIndex("artist","artist",{unique:!1}),l.indexNames.contains("album")||l.createIndex("album","album",{unique:!1}),l.indexNames.contains("genre")||l.createIndex("genre","genre",{unique:!1}),l.indexNames.contains("album_artist")||l.createIndex("album_artist","album_artist",{unique:!1})},a.onsuccess=()=>e(a.result),a.onerror=()=>t(a.error)})},async clear(){const e=await this.open();return new Promise((t,a)=>{const s=e.transaction(ht.STORE_NAME,"readwrite");s.objectStore(ht.STORE_NAME).clear(),s.oncomplete=()=>t(),s.onerror=()=>a(s.error)})},async bulkAdd(e){const t=await this.open();return new Promise((a,s)=>{const n=t.transaction(ht.STORE_NAME,"readwrite"),i=n.objectStore(ht.STORE_NAME);e.forEach(l=>i.put(l)),n.oncomplete=()=>a(),n.onerror=()=>s(n.error)})},async getFilesMap(e){if(!e||e.length===0)return new Map;const t=await this.open();return new Promise(a=>{const n=t.transaction(ht.STORE_NAME,"readonly").objectStore(ht.STORE_NAME),i=new Map;let l=0;e.forEach(o=>{const f=o.normalize("NFC").trim(),d=n.get(f);d.onsuccess=v=>{v.target.result&&i.set(o,v.target.result),l++,l===e.length&&a(i)},d.onerror=()=>{l++,l===e.length&&a(i)}})})},async getArtists(){const e=await this.open();return new Promise((t,a)=>{const n=e.transaction(ht.STORE_NAME,"readonly").objectStore(ht.STORE_NAME),i=new Map,l=n.openCursor();l.onsuccess=o=>{const f=o.target.result;if(f){const d=f.value,v=d.album_artist||d.artist;v&&!i.has(v)&&i.set(v,{name:v,file:d.file,thumbHash:d.thumbHash}),f.continue()}else{const d=Array.from(i.values()).sort((v,h)=>v.name.localeCompare(h.name,void 0,{sensitivity:"base"}));t(d)}},l.onerror=()=>a(l.error)})},async getAlbums(){const e=await this.open();return new Promise((t,a)=>{const n=e.transaction(ht.STORE_NAME,"readonly").objectStore(ht.STORE_NAME).index("album"),i=[],l=n.openCursor(null,"nextunique");l.onsuccess=o=>{const f=o.target.result;if(f){const d=f.value;i.push({name:d.album,artist:d.album_artist||d.artist,file:d.file,thumbHash:d.thumbHash,qualityBadge:d.qualityBadge,year:d.year||0}),f.continue()}else t(i)},l.onerror=()=>a(l.error)})},async getArtistAlbums(e){if(!e)return[];const t=await this.open(),a=e.normalize("NFC").trim();return new Promise((s,n)=>{const l=t.transaction(ht.STORE_NAME,"readonly").objectStore(ht.STORE_NAME),o=new Promise(d=>{l.indexNames.contains("album_artist")?l.index("album_artist").getAll(IDBKeyRange.only(a)).onsuccess=v=>d(v.target.result):d([])}),f=new Promise(d=>{l.index("artist").getAll(IDBKeyRange.only(a)).onsuccess=v=>d(v.target.result)});Promise.all([o,f]).then(([d,v])=>{const h=[...d,...v],u=[],p=new Set;h.forEach(S=>{p.has(S.album)||(p.add(S.album),u.push({name:S.album,artist:S.album_artist||S.artist,file:S.file,thumbHash:S.thumbHash,qualityBadge:S.qualityBadge,year:S.year||0}))}),s(u)}).catch(d=>n(d))})},async getAlbumTracks(e,t=null){const a=await this.open(),s=e.normalize("NFC").trim(),n=t?t.normalize("NFC").trim():null;return console.log(`[DB] getAlbumTracks called. Album: "${s}", FilterArtist: "${n}"`),new Promise((i,l)=>{const f=a.transaction(ht.STORE_NAME,"readonly").objectStore(ht.STORE_NAME).index("album"),d=IDBKeyRange.only(s),v=f.getAll(d);v.onsuccess=()=>{let h=v.result;if(console.log(`[DB] Found ${h.length} raw tracks for album "${s}"`),n){const u=h.length;h=h.filter(p=>{const S=(p.artist||"").normalize("NFC").trim(),$=(p.album_artist||"").normalize("NFC").trim();return S===n||$===n}),console.log(`[DB] After artist filter: ${h.length} tracks (Removed ${u-h.length})`)}else console.log("[DB] No artist filter provided. Returning all tracks.");h.sort((u,p)=>{const S=parseInt(u.disc||1),$=parseInt(p.disc||1);if(S!==$)return S-$;const w=parseInt(u.track||0),x=parseInt(p.track||0);return w-x}),i(h)},v.onerror=()=>l(v.error)})},async getGenres(){const e=await this.open();return new Promise((t,a)=>{const n=e.transaction(ht.STORE_NAME,"readonly").objectStore(ht.STORE_NAME).index("genre"),i=[],l=n.openKeyCursor(null,"nextunique");l.onsuccess=o=>{const f=o.target.result;f?(i.push(f.key),f.continue()):t(i)},l.onerror=()=>a(l.error)})},async getGenreTracks(e){const t=await this.open(),a=e.normalize("NFC").trim();return new Promise((s,n)=>{const o=t.transaction(ht.STORE_NAME,"readonly").objectStore(ht.STORE_NAME).index("genre").getAll(IDBKeyRange.only(a));o.onsuccess=()=>s(o.result),o.onerror=()=>n(o.error)})},async search(e){if(!e)return[];const t=e.toLowerCase().normalize("NFC").trim(),a=await this.open();return new Promise((s,n)=>{const l=a.transaction(ht.STORE_NAME,"readonly").objectStore(ht.STORE_NAME),o=[],f=100,d=l.openCursor();d.onsuccess=v=>{const h=v.target.result;if(h){const u=h.value;if((u.title&&u.title.toLowerCase().includes(t)||u.artist&&u.artist.toLowerCase().includes(t)||u.album&&u.album.toLowerCase().includes(t)||u.album_artist&&u.album_artist.toLowerCase().includes(t))&&o.push(u),o.length>=f){s(o);return}h.continue()}else s(o)},d.onerror=()=>n(d.error)})}};var fd=k('<div class="skeleton svelte-tl058d"></div>');function Jt(e,t){let a=xt(t,"width",8,"100%"),s=xt(t,"height",8,"20px"),n=xt(t,"radius",8,"4px"),i=xt(t,"style",8,"");var l=fd();fe(()=>pt(l,`width: ${a()??""}; height: ${s()??""}; border-radius: ${n()??""}; ${i()??""}`)),b(e,l)}var hd=k('<div class="skel svelte-1b8que2"><!></div>'),pd=k('<img loading="lazy"/>'),gd=k('<div class="loader svelte-1b8que2"><!> <!> <!></div>');function Yt(e,t){$t(t,!1);let a=xt(t,"src",8),s=xt(t,"alt",8,""),n=xt(t,"radius",8,"0px");const i=Pn();let l=T("loading");function o(){_(l,"loaded")}function f(w){i("error",w),_(l,"error")}ae(()=>j(a()),()=>{a()?_(l,"loading"):_(l,"error")}),Xt(),Lt();var d=gd(),v=c(d);{var h=w=>{var x=hd(),K=c(x);Jt(K,{width:"100%",height:"100%",get radius(){return n()}}),vt(2,x,()=>kt,()=>({duration:200})),b(w,x)};P(v,w=>{r(l)==="loading"&&w(h)})}var u=g(v,2);{var p=w=>{var x=pd();let K;fe(()=>{Ot(x,"src",a()),Ot(x,"alt",s()),pt(x,`border-radius: ${n()??""}`),K=Je(x,1,"svelte-1b8que2",null,K,{vis:r(l)==="loaded"})}),M("load",x,o),M("error",x,f),b(w,x)};P(u,w=>{a()&&r(l)!=="error"&&w(p)})}var S=g(u,2);{var $=w=>{var x=st(),K=Ie(x);qr(K,t,"fallback",{}),b(w,x)};P(S,w=>{r(l)==="error"&&w($)})}fe(()=>pt(d,`border-radius: ${n()??""}`)),b(e,d),Mt()}const er={DEFAULT_IP:typeof window<"u"?window.location.hostname:"localhost",get MOODE_IP(){try{return typeof localStorage<"u"?localStorage.getItem("moode_ip")||this.DEFAULT_IP:this.DEFAULT_IP}catch{return this.DEFAULT_IP}},setMoodeIp(e){if(typeof localStorage<"u"){const t=e?e.trim():"";t&&localStorage.setItem("moode_ip",t)}}};class _d{constructor(){this.socket=null,this.queue=[],this.isProcessing=!1,this.reconnectTimer=null,this.watchdogTimer=null,this._buffer=""}get isConnected(){return this.socket&&this.socket.readyState===WebSocket.OPEN}connect(){if(this.socket&&(this.socket.readyState===WebSocket.CONNECTING||this.socket.readyState===WebSocket.OPEN))return;this.reconnectTimer&&clearTimeout(this.reconnectTimer);let t=er.MOODE_IP||window.location.hostname;t=t.replace(/^https?:\/\//,"").split(":")[0].split("/")[0];const a=er.WS_PORT||"8080",s=`ws://${t}:${a}`;console.log("[MPD] Connecting to:",s);try{this.socket=new WebSocket(s,["binary"])}catch(n){console.error("[MPD] Connection Error:",n),this.reconnectTimer=setTimeout(()=>this.connect(),5e3);return}this.socket.onopen=()=>{console.log("[MPD] Connected"),gi.set("Connected"),ze("Connected to Moode","success"),this._processQueue()},this.socket.onmessage=n=>this._handleMessage(n),this.socket.onclose=n=>{console.warn("[MPD] Socket closed",n.code,n.reason),gi.set("Disconnected"),this._cleanup(),this.reconnectTimer=setTimeout(()=>this.connect(),3e3)},this.socket.onerror=n=>{console.error("[MPD] Socket error",n)}}send(t){return new Promise((a,s)=>{this.queue.push({cmd:t,resolve:a,reject:s}),this._processQueue()})}_cleanup(){for(this.isProcessing=!1,this._buffer="",this.watchdogTimer&&clearTimeout(this.watchdogTimer);this.queue.length>0;){const{reject:t}=this.queue.shift();t(new Error("Connection lost"))}}async _processQueue(){if(this.isProcessing||this.queue.length===0||!this.isConnected)return;this.isProcessing=!0;const{cmd:t}=this.queue[0];this.watchdogTimer&&clearTimeout(this.watchdogTimer),this.watchdogTimer=setTimeout(()=>{console.error("[MPD] Watchdog timeout"),this.socket&&this.socket.close()},2e4);try{const a=t.endsWith(`
`)?t:t+`
`;this.socket.send(new TextEncoder().encode(a))}catch(a){console.error("[MPD] Send error",a),this._cleanup()}}async _handleMessage(t){let a=t.data;a instanceof Blob&&(a=await a.text()),this.watchdogTimer&&(clearTimeout(this.watchdogTimer),this.watchdogTimer=null),this._buffer+=a;const s=this._buffer.endsWith(`
OK
`)||this._buffer===`OK
`,n=this._buffer.startsWith("ACK");if(s||n){const i=this._buffer;this._buffer="";const l=this.queue.shift();if(this.isProcessing=!1,l)if(n)console.error(`[MPD] Error: ${i.trim()}`),l.reject(new Error(i.trim()));else{const o=i.replace(/\nOK\n$/,"").replace(/^OK\n$/,"");l.resolve(o)}this._processQueue()}else{if(!this.queue.length)return;this.watchdogTimer=setTimeout(()=>{console.error("[MPD] Watchdog timeout receiving large data"),this.socket&&this.socket.close()},2e4)}}}const Ye=new _d,ia={parseKeyValue(e){const t={};if(!e)return t;const a=e.split(`
`);for(const s of a){const n=s.indexOf(": ");if(n===-1)continue;const i=s.substring(0,n).toLowerCase(),l=s.substring(n+2);t[i]=l}return t},parseStatus(e){const t=this.parseKeyValue(e);let a="";if(t.audio){const s=t.audio.split(":");s[1]&&(a=`${s[1]}-bit`)}return{state:t.state||"stop",volume:parseInt(t.volume)||0,elapsed:parseFloat(t.elapsed)||0,duration:parseFloat(t.duration)||0,random:t.random==="1",repeat:t.repeat==="1",song:parseInt(t.song)||0,songId:parseInt(t.songid)||-1,playlistLength:parseInt(t.playlistlength)||0,bitrate:parseInt(t.bitrate)||0,format:a,playlistVersion:parseInt(t.playlist)||0}},parseCurrentSong(e){const t=this.parseKeyValue(e);return this._normalizeTrack(t)},parsePlaylists(e){const t=e.split(`
`),a=[];let s=null;for(const n of t)n.startsWith("playlist: ")?(s&&a.push(s),s={playlist:n.substring(10)}):n.startsWith("Last-Modified: ")&&s&&(s["last-modified"]=n.substring(15));return s&&a.push(s),a.map(n=>({name:n.playlist,lastModified:n["last-modified"]}))},parseTracks(e){const t=[];let a=null,s=0,n=e.indexOf(`
`,s);for(;n!==-1;){const i=e.substring(s,n),l=i.indexOf(": ");if(l!==-1){const o=i.substring(0,l).toLowerCase(),f=i.substring(l+2);o==="file"?(a&&t.push(this._normalizeTrack(a)),a={file:f}):a&&(a[o]=f)}s=n+1,n=e.indexOf(`
`,s)}return a&&t.push(this._normalizeTrack(a)),t},_normalizeTrack(e){const t=e.file||e.File||"",a=e.Title||e.title||e.Name||e.name||t.split("/").pop()||"Unknown";return{file:t,title:a,artist:e.Artist||e.artist||"Unknown Artist",album:e.Album||e.album||"Unknown Album",genre:e.Genre||e.genre||"Unknown",time:parseFloat(e.Time||e.time||0),track:e.Track||e.track||"",id:e.Id||e.id,pos:e.Pos||e.pos||null,stationName:e.name||e.Name||null}}};function ko(e){return new Worker("/assets/sync.worker-CxDcqL9_.js",{name:e?.name})}const Ta={async syncLibrary(){if(at(oa))return;oa.set(!0);const e=new ko,t=window.location.origin+"/wave-api.php";e.postMessage({type:"START_SYNC",payload:{url:t}}),e.onmessage=a=>{const{type:s,status:n,count:i,message:l}=a.data;if(s==="PROGRESS"){const o={connecting:"Requesting library...",downloading:"Downloading data...",parsing:"Processing metadata...",saving:`Saving ${i} tracks...`};o[n]&&ze(o[n],"info")}s==="DONE"&&(ze(`Library updated: ${i} tracks`,"success"),oa.set(!1),e.terminate()),s==="ERROR"&&(console.error("[API] Sync Error:",l),ze(`Sync Failed: ${l}`,"error"),oa.set(!1),e.terminate())},e.onerror=a=>{console.error("[API] Worker crash:",a),ze("Sync worker crashed","error"),oa.set(!1),e.terminate()}},async loadRadioStations(){if(!at(ms)){ms.set(!0);try{const t=await fetch(Ga.STATIONS(!1));if(!t.ok)throw new Error("Network error");const a=await t.json();if(a.error)throw new Error(a.error);if(!Array.isArray(a))throw new Error("Invalid response format");const s=a.map(n=>({id:n.id,name:n.name,file:n.station,station:n.station,image:n.logo,genre:n.genre||"Radio"}));s.sort((n,i)=>n.name.localeCompare(i.name,void 0,{sensitivity:"base"})),Xa.set(s)}catch(e){console.error("[API] Failed to load stations",e),ze("Failed to load radio","error")}finally{ms.set(!1)}}},async setAlarm(e,t,a){try{const s=new FormData;s.append("action","set_alarm"),s.append("enabled",e?"1":"0"),s.append("time",t),s.append("playlist",a);const n=await fetch(Ga.SYNC,{method:"POST",body:s});if(!n.ok)throw new Error("Server error");const i=await n.json();if(i.error)throw new Error(i.error);return!0}catch(s){throw console.error("[API] Failed to set alarm",s),s}},async getServerTime(){try{const e=await fetch(`${Ga.SYNC}?action=get_time`);if(e.ok)return(await e.json()).time}catch(e){console.error("Failed to get server time",e)}return null},async checkYandexAuth(){try{const t=await(await fetch(Ga.YANDEX+"?action=status")).json();return Sr.set(t.authorized),t.authorized}catch(e){return console.error("Yandex Auth Check Failed",e),Sr.set(!1),!1}},async saveYandexToken(e){try{const t=await fetch(Ga.YANDEX+"?action=save_token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e})}),a=await t.json();if(!t.ok)throw new Error(a.error||"Failed to save");return ze("Yandex connected successfully","success"),Sr.set(!0),!0}catch(t){return console.error(t),ze("Invalid token or server error","error"),Sr.set(!1),!1}},async getYandexMeta(e){try{const t=await fetch(Ga.YANDEX+"?action=get_meta&url="+encodeURIComponent(e));if(t.ok)return await t.json()}catch{}return null}},md=1e3,bd=250;let bs=null,Qr=null,ys=0,Za=1,As=!0,$a=!1,tr=0,br=null;function ws(e){return e?String(e).normalize("NFC").replace(/\\/g,"\\\\").replace(/"/g,'\\"'):""}function yd(){wd(),As=!0,$a=!1,tr=0,St.set(!1),ha(),bs=setInterval(()=>{Ye.isConnected&&!Ye.isProcessing&&ha()},md)}function wd(){bs&&(clearInterval(bs),bs=null),jn()}async function ha(){try{const e=await Ye.send("status"),t=await Ye.send("currentsong"),a=ia.parseStatus(e),s=ia.parseCurrentSong(t);xd(a,s);const n=at(mo);if(at(St))return;(a.playlistLength>0&&a.playlistVersion!==n||a.playlistLength>0&&at(Va).length===0)&&kd(a.playlistVersion)}catch{}}function Rn(e){if(!e)return null;let t=e.match(/[?&]track-id=([^&]+)/);return t||(t=e.match(/[?&]id=([^&]+)/),t)||(t=e.match(/\/track\/(\d+)/),t)?t[1]:null}async function kd(e){if(!at(St))try{const t=await Ye.send("playlistinfo");if(at(St))return;const a=ia.parseTracks(t),s=at(Jr),n=a.map(o=>o.file).filter(o=>o&&!o.startsWith("http"));let i=new Map;if(n.length>0)try{i=await Ba.getFilesMap(n)}catch(o){console.warn("Failed to hydrate queue from DB",o)}const l=a.map(o=>{const f=o.file||"",d=f.includes("yandex.net")||f.includes("get-mp3")||f.startsWith("yandex:")||f.includes("storage.yandex.net");if(d&&s.streamCache){let u=s.streamCache[f];if(!u){const p=Rn(f);p&&(u=s.streamCache[String(p)])}if(u)return{...o,title:u.title||o.title,artist:u.artist||o.artist,album:u.album||o.album,image:u.image,isYandex:!0,id:u.id,mpdId:o.id,mpdPos:o.pos,_uid:String(o.id||o.pos)+"y"}}d&&xo(f);const v=f.normalize("NFC"),h=i.get(v);return h?{...o,thumbHash:h.thumbHash,qualityBadge:h.qualityBadge,title:o.title||h.title,artist:o.artist||h.artist,album:o.album||h.album,isYandex:d,_uid:String(o.id||o.pos+o.file)}:{...o,isYandex:d,_uid:String(o.id||o.pos+o.file)}});Va.set(l),mo.set(e)}catch(t){console.error("Queue sync error",t)}}async function xo(e){const t=at(Jr);if(t.streamCache&&t.streamCache[e])return;const a=Rn(e);if(a&&t.streamCache&&t.streamCache[a])return;console.log(`[Player] Fetching meta for: ${e}`);const s=await Ta.getYandexMeta(e);s&&(console.log(`[Player] Meta fetched: ${s.artist} - ${s.title}`),Jr.update(i=>{const l={...i.streamCache};return l[e]={...s,isYandex:!0,file:e},s.id&&(l[String(s.id)]={...s,isYandex:!0,file:e}),{...i,streamCache:l}}),at(Qt).file===e&&Qt.update(i=>({...i,...s,isYandex:!0})),Va.update(i=>i.map(l=>l.file===e?{...l,...s,isYandex:!0}:l)))}function xd(e,t){const a=at(Qt),s=at(Xa),n=at(Jr);if(t.file){let l=null;if(n.streamCache&&(l=n.streamCache[t.file],!l)){const o=Rn(t.file);o&&(l=n.streamCache[String(o)])}l?(t.title=l.title,t.artist=l.artist,t.album=l.album,t.image=l.image,t.isYandex=!0,t.id=l.id,l.time>0&&(e.duration===0||isNaN(e.duration))&&(e.duration=l.time)):(t.file.includes("yandex.net")||t.file.includes("get-mp3"))&&xo(t.file)}const i=t.file&&t.file.startsWith("http");if(i&&!t.isYandex){const l=v=>(v||"").toString().toLowerCase().replace(/[^a-z0-9]/g,""),o=l(t.file),f=l(t.title),d=s.find(v=>{const h=l(v.station||v.file||v.url||(Array.isArray(v)?v[1]:"")),u=l(v.name||(Array.isArray(v)?v[0]:""));return h&&o.includes(h)||u&&f.includes(u)});d?t.stationName=d.name||d[0]:a.stationName&&a.file===t.file&&(t.stationName=a.stationName)}Qt.set(t),Tt.update(l=>{const o=e.state==="play",f=performance.now();if(e.state==="pause"||l.state==="pause")return gs(!1),f<tr?l:e;if(t.file!==a.file||As)return As=!1,$a=!1,Za=1,i&&!t.isYandex&&(e.elapsed=0),gs(o&&(!i||t.isYandex)),e;if(f<tr)return l;if($a)return $a=!1,Za=1,gs(o&&(!i||t.isYandex)),e;if(o&&(!i||t.isYandex)){const d=e.elapsed-l.elapsed;if(Math.abs(d)>2)return Za=1,e;if(Math.abs(d)<.05)Za=1;else{let h=d/1.5;Za=Math.max(.5,Math.min(1.5,1+h))}return{...e,elapsed:l.elapsed}}return gs(!1),e})}function gs(e){e?bn():jn()}function bn(){Qr||As||(ys=performance.now(),Qr=setInterval(()=>{const e=performance.now();let t=(e-ys)/1e3;t>2&&(t=0),ys=e,Tt.update(a=>{if(a.state!=="play")return a;let s=a.elapsed+t*Za;return a.duration>0&&s>a.duration&&(s=a.duration),{...a,elapsed:s}})},bd))}function jn(){Qr&&(clearInterval(Qr),Qr=null),Za=1,ys=0}async function _i(e,t=!1){if(!e||e.length===0)return;St.set(!0),$a=!0;const a=5;try{for(let s=0;s<e.length;s+=a){const n=e.slice(s,s+a),i=["command_list_begin"];n.forEach(l=>{i.push(`add "${ws(l.file)}"`)}),i.push("command_list_end"),await Ye.send(i.join(`
`))}t?(await Ye.send("play 0"),ze(`Playing ${e.length} tracks`,"success")):ze(`Added ${e.length} tracks`,"success")}catch(s){console.error("[Player] Bulk Action Failed:",s),ze("Error adding tracks","error")}finally{setTimeout(()=>{St.set(!1),ha()},1500)}}const ca={async togglePlay(){const t=at(Tt).state==="play";tr=performance.now()+800,Tt.update(a=>{const s=t?"pause":"play";return s==="play"?bn():jn(),{...a,state:s}}),await Ye.send(t?"pause 1":"play"),setTimeout(ha,900)},async next(){$a=!0,tr=0,await Ye.send("next"),ha()},async previous(){$a=!0,tr=0,Tt.update(e=>({...e,elapsed:0})),await Ye.send("previous"),ha()},async setVolume(e){Tt.update(t=>({...t,volume:e})),await Ye.send(`setvol ${e}`)},async seek(e){$a=!0,tr=performance.now()+500,Tt.update(t=>({...t,elapsed:e})),await Ye.send(`seekcur ${e}`),setTimeout(ha,600)},async toggleRandom(){const t=!at(Tt).random;Tt.update(a=>({...a,random:t})),await Ye.send(`random ${t?1:0}`)},async toggleRepeat(){const t=!at(Tt).repeat;Tt.update(a=>({...a,repeat:t})),await Ye.send(`repeat ${t?1:0}`)},async playUri(e,t={}){St.set(!0);const a=ws(e);$a=!0,Tt.update(s=>({...s,state:"play",elapsed:0})),Qt.set({title:t.title||e.split("/").pop(),artist:t.artist||"",album:t.album||"",file:e}),bn();try{const s=await Ye.send("currentsong"),n=parseInt(ia.parseKeyValue(s).pos),i=await Ye.send(`addid "${a}"`),l=parseInt(ia.parseKeyValue(i).id);if(isNaN(l))await Ye.send(`add "${a}"`),await Ye.send("play");else{const o=isNaN(n)?0:n+1;await Ye.send(`moveid ${l} ${o}`),await Ye.send(`playid ${l}`)}}catch(s){console.error("Play error",s),ze("Failed to play","error")}setTimeout(()=>{St.set(!1),ha()},1200)},async addToQueue(e){try{await Ye.send(`add "${ws(e)}"`),ze("Added to queue","success")}catch(t){console.error("Add queue error",t),ze("Failed to add","error")}},async playNext(e){St.set(!0);const t=ws(e);try{const a=await Ye.send("currentsong"),s=parseInt(ia.parseKeyValue(a).pos||-1);if(s===-1)St.set(!1),await this.playUri(e);else{const n=await Ye.send(`addid "${t}"`),i=parseInt(ia.parseKeyValue(n).id);isNaN(i)||(await Ye.send(`moveid ${i} ${s+1}`),ze("Will play next","success")),setTimeout(()=>St.set(!1),1e3)}}catch(a){console.error("Play Next error",a),ze("Failed to set next","error"),St.set(!1)}},async removeFromQueue(e){St.set(!0),br&&clearTimeout(br);try{Va.update(t=>{const a=[...t];return a.splice(e,1),a}),await Ye.send(`delete ${e}`)}catch{ze("Failed to remove","error"),St.set(!1);return}br=setTimeout(()=>{St.set(!1)},1e3)},async moveTrack(e,t){if(e!==t){St.set(!0),br&&clearTimeout(br);try{await Ye.send(`move ${e} ${t}`)}catch(a){console.error("Move failed",a),ze("Move failed","error"),St.set(!1),ha();return}br=setTimeout(()=>{St.set(!1),ha()},2e3)}},async playAllTracks(e){if(!(!e||e.length===0))try{await Ye.send("stop"),await Ye.send("clear"),await _i(e,!0)}catch(t){console.error(t)}},async addAllToQueue(e){!e||e.length===0||await _i(e,!1)},async saveQueue(e){if(!e)return;const t=e.replace(/"/g,'\\"');try{await Ye.send(`save "${t}"`),ze(`Playlist "${e}" saved`,"success")}catch(a){if(a.message.includes("exist")){if(confirm(`Playlist "${e}" exists. Overwrite?`))try{await Ye.send(`rm "${t}"`),await Ye.send(`save "${t}"`),ze(`Playlist "${e}" overwritten`,"success")}catch{ze("Failed to overwrite","error")}}else console.error(a)}}},Dr="Favorites";let mi=Promise.resolve();const yr=e=>e?e.toLowerCase().replace(/^https?:\/\//,"").replace(/^www\./,"").split("?")[0].replace(/\/$/,""):"";function Sd(e){if(e==="Favorites")return"linear-gradient(135deg, hsl(348, 95%, 58%), hsl(348, 90%, 40%))";let t=0;for(let s=0;s<e.length;s++)t=e.charCodeAt(s)+((t<<5)-t);const a=Math.abs(t%360);return`linear-gradient(135deg, hsl(${a}, 60%, 40%), hsl(${(a+40)%360}, 60%, 30%))`}function Ed(e){if(e==="Favorites")return"var(--c-heart)";let t=0;for(let s=0;s<e.length;s++)t=e.charCodeAt(s)+((t<<5)-t);return`var(--c-pl-${Math.abs(t%6)})`}const ma={async syncLibrary(){if(at(oa))return;oa.set(!0);const e=new ko;e.postMessage({type:"START_SYNC",payload:{url:`http://${er.MOODE_IP}/wave-api.php`}}),e.onmessage=t=>{const{type:a,count:s}=t.data;a==="DONE"&&(ze(`Library updated: ${s} tracks`,"success"),oa.set(!1),e.terminate()),a==="ERROR"&&(ze("Sync Failed","error"),oa.set(!1),e.terminate())},e.onerror=()=>{oa.set(!1),e.terminate()}},async loadPlaylists(){dn.set(!0);try{const e=await Ye.send("listplaylists"),a=ia.parsePlaylists(e).map(s=>({...s,color:Sd(s.name),colorVar:Ed(s.name)}));Is.set(a)}catch(e){console.error(e)}finally{dn.set(!1)}},async createPlaylistFromQueue(e){if(!e)return;const t=e.replace(/"/g,'\\"');try{await Ye.send(`save "${t}"`),ze(`Playlist "${e}" created`,"success"),await this.loadPlaylists()}catch(a){console.error(a),ze("Failed to create playlist","error")}},async deletePlaylist(e){if(!e)return;const t=e.replace(/"/g,'\\"');try{await Ye.send(`rm "${t}"`),ze("Playlist deleted","info"),await this.loadPlaylists()}catch(a){console.error(a),ze("Delete failed","error")}},async renamePlaylist(e,t){if(!e||!t)return;const a=e.replace(/"/g,'\\"'),s=t.replace(/"/g,'\\"');try{await Ye.send(`rename "${a}" "${s}"`),ze("Playlist renamed","success"),await this.loadPlaylists()}catch(n){console.error(n),ze("Rename failed","error")}},async openPlaylistDetails(e){if(!e)return;vn.set(!0);const t=e.replace(/"/g,'\\"');try{const a=await Ye.send(`listplaylistinfo "${t}"`),s=ia.parseTracks(a),n=s.map(o=>o.file).filter(o=>o&&!o.startsWith("http"));let i=new Map;if(n.length>0)try{i=await Ba.getFilesMap(n)}catch(o){console.warn("Failed to hydrate playlist from DB",o)}const l=s.map(o=>{const f=i.get(o.file);return f?{...o,thumbHash:f.thumbHash,qualityBadge:f.qualityBadge,title:o.title||f.title,artist:o.artist||f.artist,album:o.album||f.album,_uid:di()}:{...o,_uid:di()}});Vr.set(l)}catch(a){console.error(a),ze("Could not load playlist","error")}finally{vn.set(!1)}},async movePlaylistTrack(e,t,a){const s=e.replace(/"/g,'\\"');try{await Ye.send(`playlistmove "${s}" ${t} ${a}`)}catch{ze("Move failed","error")}},async removeFromPlaylist(e,t){const a=e.replace(/"/g,'\\"');try{await Ye.send(`playlistdelete "${a}" ${t}`),ze("Track removed","success")}catch{ze("Delete failed","error")}},async loadFavorites(){try{const e=await Ye.send(`listplaylistinfo "${Dr}"`),t=ia.parseTracks(e),a=new Set;t.forEach(s=>{s.file&&a.add(s.file)}),qa.set(a)}catch{qa.set(new Set)}},async toggleFavorite(e){if(!e||!e.file)return;const t=e.file,a=t.replace(/"/g,'\\"'),s=t.startsWith("http"),n=at(qa);let i=n.has(t);if(!i&&s){const l=yr(t);for(const o of n)if(yr(o)===l){i=!0;break}}qa.update(l=>{const o=new Set(l);if(i){if(o.delete(t),s){const f=yr(t);for(const d of o)yr(d)===f&&o.delete(d)}}else o.add(t);return o}),mi=mi.then(async()=>{try{const l=await Ye.send(`listplaylistinfo "${Dr}"`),o=ia.parseTracks(l);let f=[];if(o.forEach((d,v)=>{let h=!1;(d.file===t||s&&yr(d.file)===yr(t)||s&&(d.file.includes(t)||t.includes(d.file)))&&(h=!0),h&&f.push(v)}),i){if(f.length>0){f.sort((d,v)=>v-d);for(const d of f)await Ye.send(`playlistdelete "${Dr}" ${d}`);ze("Removed from Favorites","info")}}else f.length>0?console.log("[Fav] Track already exists. Skipping."):(await Ye.send(`playlistadd "${Dr}" "${a}"`),o.length>0&&await Ye.send(`playlistmove "${Dr}" ${o.length} 0`),ze("Added to Favorites","success"))}catch(l){console.error("Fav action failed",l),ze("Action failed","error")}finally{await this.loadFavorites()}})}};function So(){Ye.connect(),yd(),ma.loadPlaylists(),ma.loadFavorites()}function rs(e){return Ye.send(e)}const{togglePlay:Ns,toggleRandom:ir,toggleRepeat:or,setVolume:Ma,seek:In,addToQueue:Td,playNext:$d,removeFromQueue:Md,moveTrack:Ad,saveQueue:Cd,playAllTracks:Nn,addAllToQueue:Dn,playUri:Pd}=ca,{syncLibrary:Ld,loadRadioStations:zd,loadPlaylists:On,openPlaylistDetails:Eo,toggleFavorite:To,loadFavorites:Rd,removeFromPlaylist:$o,movePlaylistTrack:Mo}=ma;function ss(e){const t=at(Qt),a=at(Xa),s=at(js);if(t.file&&t.file.startsWith("http")&&a.length>0&&!t.isYandex&&(e==="next"||e==="previous")){let i=a.findIndex(o=>o.name===s);i===-1&&(i=0);let l;e==="next"?(l=i+1,l>=a.length&&(l=0)):(l=i-1,l<0&&(l=a.length-1)),Fn(a[l])}else e==="next"&&ca.next(),e==="previous"&&ca.previous()}function Fn(e){if(!e)return;js.set(e.name);const t=e[1]||e.station||e.file||e.url;t&&ca.playUri(t,{title:e.name,artist:e.genre||"Radio Stream",stationName:e.name})}function Ds(e){e&&(js.set(null),ca.playUri(e.file,{title:e.title,artist:e.artist,album:e.album,stationName:null}))}const jd=Object.freeze(Object.defineProperty({__proto__:null,addAllToQueue:Dn,addToQueue:Td,connect:So,loadFavorites:Rd,loadPlaylists:On,loadRadioStations:zd,movePlaylistTrack:Mo,moveTrack:Ad,nav:ss,openPlaylistDetails:Eo,playAllTracks:Nn,playNext:$d,playStation:Fn,playTrackOptimistic:Ds,playUri:Pd,removeFromPlaylist:$o,removeFromQueue:Md,runMpdRequest:rs,saveQueue:Cd,seek:In,setVolume:Ma,syncLibrary:Ld,toggleFavorite:To,togglePlay:Ns,toggleRandom:ir,toggleRepeat:or},Symbol.toStringTag,{value:"Module"})),jt={async request(e,t={}){const a=new URL(window.location.origin+Ga.YANDEX);a.searchParams.append("action",e);for(const n in t)t[n]!==void 0&&t[n]!==null&&a.searchParams.append(n,t[n]);const s=await fetch(a);if(!s.ok)throw new Error("API Error");return await s.json()},async search(e){return await this.request("search",{query:e})},async getUserPlaylists(){return await this.request("get_playlists")},async getLanding(){return await this.request("get_landing")},async getArtistDetails(e){return await this.request("get_artist_details",{id:e})},async getAlbumDetails(e){return await this.request("get_album_details",{id:e})},async getPlaylistTracks(e,t,a=0){return await this.request("get_playlist_tracks",{uid:e,kind:t,offset:a})},async getFavoritesIds(){return await this.request("get_favorites_ids")},async playRadio(e){return e?await this.request("play_station",{station:"track:"+e}):await this.request("play_station",{station:"user:onetwo"})},async playStation(e){return await this.request("play_station",{station:e})},async playTrack(e){return await this.request("play_track",{id:e})},async toggleLike(e,t){const a=t?"dislike":"like";return await this.request(a,{track_id:e})}};function qn(e,t=2e3){let a;const s=i=>{i.type==="mousedown"&&i.button!==0||(a=setTimeout(()=>{e.dispatchEvent(new CustomEvent("longpress",{detail:{originalEvent:i}}))},t))},n=()=>{clearTimeout(a)};return e.addEventListener("mousedown",s),e.addEventListener("touchstart",s,{passive:!0}),e.addEventListener("mouseup",n),e.addEventListener("mouseleave",n),e.addEventListener("touchend",n),e.addEventListener("touchcancel",n),e.addEventListener("touchmove",n),{destroy(){e.removeEventListener("mousedown",s),e.removeEventListener("touchstart",s),e.removeEventListener("mouseup",n),e.removeEventListener("mouseleave",n),e.removeEventListener("touchend",n),e.removeEventListener("touchcancel",n),e.removeEventListener("touchmove",n)}}}var Id=k('<div class="drag-handle svelte-5cs2hz" title="Drag to reorder"><div class="icon-small svelte-5cs2hz"><!></div></div>'),Nd=k('<div class="eq-anim svelte-5cs2hz"><span class="bar b1 svelte-5cs2hz"></span> <span class="bar b2 svelte-5cs2hz"></span> <span class="bar b3 svelte-5cs2hz"></span></div>'),Dd=k('<div class="icon-small svelte-5cs2hz"><!></div>'),Od=k('<div class="icon-small svelte-5cs2hz"><!></div>'),Fd=k('<div class="icon-small accent svelte-5cs2hz"><!></div>'),qd=k('<span class="num svelte-5cs2hz"> </span>'),Bd=k('<button class="num-box svelte-5cs2hz"><!></button>'),Yd=k('<div slot="fallback" class="icon-ph svelte-5cs2hz"><!></div>'),Ud=k('<span class="meta-tag quality svelte-5cs2hz"> </span>'),Hd=k('<span class="yandex-icon-inline svelte-5cs2hz" title="Yandex Music"><!></span>'),Vd=k('<button class="btn-icon small remove svelte-5cs2hz"><!></button>'),Wd=k('<div class="dur svelte-5cs2hz"> </div>'),Qd=k('<div role="button" tabindex="0"><div class="left svelte-5cs2hz"><!> <div class="thumb svelte-5cs2hz"><!></div></div> <div class="info svelte-5cs2hz"><div class="title-row svelte-5cs2hz"><div class="title text-ellipsis svelte-5cs2hz"> </div> <!></div> <div> </div></div> <div class="right svelte-5cs2hz"><!> <button class="btn-icon small context-menu-btn svelte-5cs2hz"><!></button> <button><!></button> <!></div></div>');function Pr(e,t){$t(t,!1);const a=()=>Ee(la,"$yandexFavorites",o),s=()=>Ee(qa,"$favorites",o),n=()=>Ee(Et,"$navigationStack",o),i=()=>Ee(It,"$activeMenuTab",o),l=()=>Ee(Xa,"$stations",o),[o,f]=Ft(),d=T(),v=T(),h=T(),u=T(),p=T(),S=T(),$=T(),w=T(),x=T(),K=T(),le=T(),ce=T(),G=T(),me=T(),H=T(),I=T(),ee=T(),Re=T();let B=xt(t,"track",8),Y=xt(t,"index",8),O=xt(t,"isEditable",8,!1),pe=xt(t,"playingIndex",24,()=>-1),Z=xt(t,"playingFile",8,null),ke=xt(t,"isPlaying",8,!1);const V=Pn();let D=T(!1),Te=T(!1);function te(q){if(r(w))return"â";const ie=parseFloat(q);if(!ie||isNaN(ie)||ie===0)return"0:00";const be=Math.round(ie),Fe=Math.floor(be/60),Oe=be%60;return`${Fe}:${Oe.toString().padStart(2,"0")}`}function de(q){q.stopPropagation(),r(S)?Ns():V("play")}function ge(){return r(h)?.view==="details"&&r(h).data?.name?{type:"playlist",playlistName:r(h).data.name,index:Y()}:r(u)?{type:"queue",index:Y()}:{type:"general"}}function he(q){q.stopPropagation(),es(q,B(),ge())}function $e(q){O()||es(q.detail.originalEvent,B(),ge())}function A(q){q.stopPropagation(),r(d)&&B().artist?(It.set("yandex"),fn.set(B().artist)):!r(w)&&B().artist&&(It.set("artists"),Wa("albums_by_artist",{name:B().artist})),V("artistclick",B())}async function ne(q){if(q.stopPropagation(),r(d))try{const ie=r(v);ie?(la.update(be=>(be.delete(String(B().id)),be)),ze("Removed from Yandex Likes","info")):(la.update(be=>(be.add(String(B().id)),be)),ze("Added to Yandex Likes","success")),await jt.toggleLike(B().id,ie)}catch{ze("Failed to update Yandex like","error");try{const be=await jt.getFavoritesIds();be&&be.ids&&la.set(new Set(be.ids.map(String)))}catch{}}else To(B())}ae(()=>j(B()),()=>{B()&&_(Te,!1)}),ae(()=>j(B()),()=>{_(d,B().isYandex||B().service==="yandex")}),ae(()=>(r(d),a(),j(B()),s()),()=>{_(v,r(d)?a().has(String(B().id)):s().has(B().file))}),ae(()=>n(),()=>{_(h,n()[n().length-1])}),ae(()=>(r(h),i()),()=>{_(u,r(h)?.view==="queue"||r(h)?.view==="root"&&i()==="queue")}),ae(()=>(r(u),j(Y()),j(pe())),()=>{_(p,r(u)?Number(Y())===pe():!1)}),ae(()=>(j(B()),j(Z())),()=>{_(S,B().file===Z())}),ae(()=>(r(S),r(p)),()=>{_($,r(S)&&!r(p))}),ae(()=>(j(B()),r(d)),()=>{_(w,B().file&&(String(B().file).startsWith("http")||String(B().file).includes("RADIO"))&&!r(d))}),ae(()=>(r(p),j(ke()),r(D)),()=>{_(x,r(p)&&ke()&&r(D))}),ae(()=>(r(p),j(ke()),r(D)),()=>{_(K,r(p)&&ke()&&!r(D))}),ae(()=>(r(p),j(ke()),r(D)),()=>{_(le,r(p)&&!ke()&&!r(D))}),ae(()=>(r(D),r(x)),()=>{_(ce,r(D)&&!r(x))}),ae(()=>j(B()),()=>{_(G,B().title||B().file?.split("/").pop())}),ae(()=>j(B()),()=>{_(me,B().artist||"Unknown")}),ae(()=>j(B()),()=>{_(H,te(B().time||B().duration))}),ae(()=>j(B()),()=>{_(I,B().qualityBadge?B().qualityBadge.split(" ")[0]:null)}),ae(()=>{},()=>{_(ee,null)}),ae(()=>(r(Te),j(B()),l(),r(ee),ts),()=>{_(Re,r(Te)?Cr(B(),l(),r(ee)):ts(B(),"sm",l(),r(ee)))}),Xt(),Lt();var _e=Qd();let De;var R=c(_e),N=c(R);{var E=q=>{var ie=Id(),be=c(ie),Fe=c(be);se(Fe,()=>(j(y),m(()=>y.DRAG_HANDLE))),M("mousedown",ie,Oe=>V("startdrag",Oe)),M("touchstart",ie,Oe=>V("startdrag",Oe),void 0,!0),M("click",ie,ea(function(Oe){Zr.call(this,t,Oe)})),b(q,ie)},C=q=>{var ie=Bd(),be=c(ie);{var Fe=qe=>{var We=Nd();b(qe,We)},Oe=qe=>{var We=st(),Ue=Ie(We);{var Be=Ke=>{var Ve=Dd(),Ze=c(Ve);se(Ze,()=>(j(y),m(()=>y.PAUSE))),b(Ke,Ve)},tt=Ke=>{var Ve=st(),Ze=Ie(Ve);{var Ge=it=>{var ut=Od(),ct=c(ut);se(ct,()=>(j(y),m(()=>y.PLAY))),b(it,ut)},rt=it=>{var ut=st(),ct=Ie(ut);{var dt=mt=>{var Kt=Fd(),Xe=c(Kt);se(Xe,()=>(j(y),m(()=>y.PLAY))),b(mt,Kt)},ft=mt=>{var Kt=qd(),Xe=c(Kt);fe(()=>oe(Xe,Y()+1)),b(mt,Kt)};P(ct,mt=>{r(le)?mt(dt):mt(ft,!1)},!0)}b(it,ut)};P(Ze,it=>{r(ce)?it(Ge):it(rt,!1)},!0)}b(Ke,Ve)};P(Ue,Ke=>{r(x)?Ke(Be):Ke(tt,!1)},!0)}b(qe,We)};P(be,qe=>{r(K)?qe(Fe):qe(Oe,!1)})}M("click",ie,de),b(q,ie)};P(N,q=>{O()?q(E):q(C,!1)})}var W=g(N,2),re=c(W);Yt(re,{get src(){return r(Re)},get alt(){return r(G)},radius:"4px",$$events:{error:()=>_(Te,!0)},$$slots:{fallback:(q,ie)=>{var be=Yd(),Fe=c(be);se(Fe,()=>(r(w),j(y),m(()=>r(w)?y.RADIO:y.ALBUMS))),vt(1,be,()=>kt),b(q,be)}}});var Ce=g(R,2),Se=c(Ce),xe=c(Se),Ne=c(xe),He=g(xe,2);{var z=q=>{var ie=Ud(),be=c(ie);fe(()=>oe(be,r(I))),b(q,ie)};P(He,q=>{r(I)&&!r(w)&&q(z)})}var U=g(Se,2);let X;var ue=c(U),Pe=g(Ce,2),ye=c(Pe);{var Me=q=>{var ie=Hd(),be=c(ie);se(be,()=>(j(y),m(()=>y.YANDEX))),b(q,ie)};P(ye,q=>{r(d)&&q(Me)})}var Le=g(ye,2),Q=c(Le);se(Q,()=>(j(y),m(()=>y.DOTS)));var F=g(Le,2);let L;var J=c(F);se(J,()=>(r(v),j(y),m(()=>r(v)?y.HEART_FILLED:y.HEART)));var ve=g(F,2);{var je=q=>{var ie=Vd(),be=c(ie);se(be,()=>(j(y),m(()=>y.REMOVE))),M("click",ie,ea(()=>V("remove",{index:Y()}))),b(q,ie)},we=q=>{var ie=Wd(),be=c(ie);fe(()=>oe(be,r(H))),b(q,ie)};P(ve,q=>{O()?q(je):q(we,!1)})}Ut(()=>M("click",_e,()=>!r(p)&&V("play"))),Ut(()=>M("mouseenter",_e,()=>_(D,!0))),Ut(()=>M("mouseleave",_e,()=>_(D,!1))),Mn(_e,q=>qn?.(q)),Ut(()=>M("longpress",_e,$e)),fe(()=>{De=Je(_e,1,"row svelte-5cs2hz",null,De,{active:r(p),striped:r($),editable:O()}),Ot(xe,"title",r(G)),oe(Ne,r(G)),X=Je(U,1,"artist text-ellipsis svelte-5cs2hz",null,X,{link:!r(w)||r(d)}),oe(ue,r(me)),L=Je(F,1,"btn-icon small svelte-5cs2hz",null,L,{liked:r(v)})}),M("click",U,A),M("click",Le,he),M("click",F,ea(ne)),b(e,_e),Mt(),f()}const _s=100,bi=5,yi=25,wi=3;function Xd({tracksStore:e,onMoveTrack:t}){const a=Qe(!1),s=Qe(!1),n=Qe(!1),i=Qe(null),l=Qe(null),o=Qe(null),f=Qe({x:0,y:0,width:0,height:0,grabOffsetX:0,grabOffsetY:0}),d=Qe(null);let v=!1,h=0,u=0,p=0,S=0;const $={scrollContainer:null,listBodyContainer:null};let w=null;function x(Y,O,pe){const Z=Y.detail;if(Z.button===2||(window.getSelection&&window.getSelection().removeAllRanges(),!$.scrollContainer))return;const V=$.scrollContainer.querySelectorAll(".row-wrapper")[O];if(!V)return;const D=V.getBoundingClientRect(),Te=Z.touches?Z.touches[0].clientX:Z.clientX,te=Z.touches?Z.touches[0].clientY:Z.clientY,de=Te-D.left,ge=te-D.top;v=!0,a.set(!1),s.set(!1),h=Te,u=te,p=Te,S=te,i.set(O),l.set(O),d.set(pe),o.set(null),f.set({x:Te,y:te,width:D.width,height:D.height,grabOffsetX:de,grabOffsetY:ge})}function K(Y){if(!v||at(s))return;const O=Y.touches?Y.touches[0].clientX:Y.clientX,pe=Y.touches?Y.touches[0].clientY:Y.clientY;if(!at(a)){const Z=Math.abs(O-h),ke=Math.abs(pe-u);if(Z<wi&&ke<wi)return;a.set(!0)}Y.cancelable&&Y.preventDefault(),p=O,S=pe,f.update(Z=>({...Z,x:p,y:S})),I(S),le()}function le(){if(!$.listBodyContainer)return;const Y=$.listBodyContainer.getBoundingClientRect(),O=at(f),Z=S-Y.top-O.grabOffsetY+O.height/2,ke=at(e).length;if(Z<0){l.set(0);return}if(Z>Y.height){l.set(ke);return}const V=Array.from($.listBodyContainer.querySelectorAll(".row-wrapper"));let D=-1,Te=1/0;V.forEach((te,de)=>{const ge=te.offsetTop+te.offsetHeight/2,he=Math.abs(Z-ge);he<Te&&(Te=he,D=de)}),D!==-1&&l.set(D)}function ce(Y){if(v){if(v=!1,!at(a)){me();return}G()}}async function G(){Re(),le(),a.set(!1),s.set(!0);const Y=at(l);if($.listBodyContainer&&Y!==null){const D=$.listBodyContainer.querySelectorAll(".row-wrapper"),Te=$.listBodyContainer.getBoundingClientRect(),te=D[Y];let de=0,ge=0,he=!1;if(te)de=Te.top+te.offsetTop,ge=Te.left+te.offsetLeft,he=!0;else if(Y>=D.length&&D.length>0){const $e=D[D.length-1];de=Te.top+$e.offsetTop+$e.offsetHeight,ge=Te.left+$e.offsetLeft,he=!0}else D.length===0&&(de=Te.top,ge=Te.left,he=!0);he&&f.update($e=>({...$e,y:de+$e.grabOffsetY,x:ge+$e.grabOffsetX}))}await new Promise(D=>setTimeout(D,250)),n.set(!0),await Ha();const O=at(i),pe=at(e).length;let Z=Math.max(0,Math.min(Y,pe)),ke=Z;if(O!==null&&O!==Z){const D=[...at(e)],[Te]=D.splice(O,1);ke=Math.max(0,Math.min(ke,D.length)),D.splice(ke,0,Te),e.set(D),t&&t(O,ke),i.set(ke)}await Ha(),d.set(null),i.set(null),l.set(null),s.set(!1);const V=O!==Z?ke:O;o.set(V),await Ha(),requestAnimationFrame(()=>{requestAnimationFrame(()=>{n.set(!1),setTimeout(()=>{o.set(null)},300)})})}function me(){v=!1,H()}function H(){a.set(!1),s.set(!1),i.set(null),l.set(null),d.set(null),Re()}function I(Y){if(!$.scrollContainer)return;const{top:O,bottom:pe}=$.scrollContainer.getBoundingClientRect(),Z=Y-O,ke=pe-Y;Re();let V=0;if(Z<_s&&Z>0){const D=1-Z/_s;V=-(bi+yi*(D*D))}else if(ke<_s&&ke>0){const D=1-ke/_s;V=bi+yi*(D*D)}V!==0&&ee(V)}function ee(Y){w||(w=requestAnimationFrame(function O(){$.scrollContainer&&($.scrollContainer.scrollTop+=Y,at(a)&&(f.update(pe=>({...pe,x:p,y:S})),le(),w=requestAnimationFrame(O)))}))}function Re(){w&&(cancelAnimationFrame(w),w=null)}function B(Y,O,pe,Z,ke,V){return V||!O&&!pe||Z===null||ke===null?"":Y===Z?"opacity: 0; pointer-events: none;":Z===ke?"":Z<ke&&Y>Z&&Y<=ke?"transform: translateY(-100%);":Z>ke&&Y>=ke&&Y<Z?"transform: translateY(100%);":""}return{isDragging:a,isDropping:s,isReordering:n,draggingIndex:i,hoverIndex:l,justDroppedIndex:o,draggedItemData:d,ghostCoords:f,refs:$,onDragInit:x,onPointerMove:K,onPointerUp:ce,getRowStyle:B,cancelDrag:me}}var Kd=k('<div><div style="pointer-events: none; width: 100%; height: 100%;" class="svelte-ym6b2"><!></div></div>'),Gd=k('<div class="skeleton-row svelte-ym6b2"><div class="sk-left svelte-ym6b2"><!> <!></div> <div class="sk-info svelte-ym6b2"><!> <!></div> <div class="sk-right svelte-ym6b2"><!></div></div>'),Zd=k('<div class="skeletons-wrapper svelte-ym6b2"></div>'),Jd=k("<div><!></div>"),ev=k('<div class="content-padded svelte-ym6b2" style="text-align: center; opacity: 0.5;"> </div>'),tv=k("<!> <!> <!>",1),av=k('<div><!> <div class="list-body svelte-ym6b2"><!> <!></div></div>');function ds(e,t){$t(t,!1);const a=()=>Ee(Et,"$navigationStack",p),s=()=>Ee(It,"$activeMenuTab",p),n=()=>Ee(Re,"$isDragging",p),i=()=>Ee(B,"$isDropping",p),l=()=>Ee(ke,"$draggedItemData",p),o=()=>Ee(V,"$ghostCoords",p),f=()=>Ee(O,"$draggingIndex",p),d=()=>Ee($(),"$itemsStore",p),v=()=>Ee(Z,"$justDroppedIndex",p),h=()=>Ee(Y,"$isReordering",p),u=()=>Ee(pe,"$hoverIndex",p),[p,S]=Ft();let $=xt(t,"itemsStore",8),w=xt(t,"isEditMode",8,!1),x=xt(t,"isLoading",8,!1),K=xt(t,"emptyText",8,"List is empty"),le=xt(t,"onMoveItem",8,(R,N)=>{}),ce=T(""),G=T(0),me=T(!1);Qa(async()=>{_(G,sd(r(ce))),!x()&&r(G)>0&&r(I).refs.scrollContainer&&(await Ha(),us(I,r(I).refs.scrollContainer.scrollTop=r(G)),_(me,!0))});async function H(){await Ha(),r(I).refs.scrollContainer&&(us(I,r(I).refs.scrollContainer.scrollTop=r(G)),_(me,!0))}po(()=>{r(I).cancelDrag(),r(I).refs.scrollContainer&&rd(r(ce),r(I).refs.scrollContainer.scrollTop)});const I=T(Xd({tracksStore:$(),onMoveTrack:(R,N)=>{le()(R,N)}})),ee=r(I),Re=ee.isDragging,B=ee.isDropping,Y=ee.isReordering,O=ee.draggingIndex,pe=ee.hoverIndex,Z=ee.justDroppedIndex,ke=ee.draggedItemData,V=ee.ghostCoords,D=T(ee.refs);function Te(R,N,E){w()&&r(I).onDragInit(R,N,E)}ae(()=>(a(),s()),()=>{const R=a(),N=R[R.length-1],E=s();if(N&&N.view==="root")_(ce,`root_${E}`);else if(N){const C=N.data?N.data.name||N.data:"unknown";_(ce,`${N.view}_${C}`)}}),ae(()=>(j(x()),r(me),r(G),r(I)),()=>{!x()&&!r(me)&&r(G)>0&&r(I).refs.scrollContainer&&H()}),Xt(),Lt();var te=av();M("mousemove",Oa,function(...R){r(I).onPointerMove?.apply(this,R)}),M("mouseup",Oa,function(...R){r(I).onPointerUp?.apply(this,R)}),M("touchmove",Oa,function(...R){r(I).onPointerMove?.apply(this,R)},void 0,!1),M("touchend",Oa,function(...R){r(I).onPointerUp?.apply(this,R)}),M("touchcancel",Oa,function(...R){r(I).onPointerUp?.apply(this,R)});let de;var ge=c(te);{var he=R=>{var N=Kd();let E;var C=c(N),W=c(C);qr(W,t,"row",{get item(){return l()},get index(){return f()},isGhost:!0,startDrag:()=>{}}),fe(()=>{E=Je(N,1,"floating-item svelte-ym6b2",null,E,{dropping:i()}),pt(N,`
            top: ${o(),m(()=>o().y-o().grabOffsetY)??""}px; 
            left: ${o(),m(()=>o().x-o().grabOffsetX)??""}px;
            width: ${o(),m(()=>o().width)??""}px; 
            height: ${o(),m(()=>o().height)??""}px;
        `)}),b(R,N)};P(ge,R=>{(n()||i())&&l()&&R(he)})}var $e=g(ge,2),A=c($e);qr(A,t,"header",{});var ne=g(A,2);{var _e=R=>{var N=Zd();yt(N,4,()=>Array(10),Dt,(E,C)=>{var W=Gd(),re=c(W),Ce=c(re);Jt(Ce,{width:"24px",height:"24px",radius:"4px",style:"opacity: 0.3"});var Se=g(Ce,2);Jt(Se,{width:"40px",height:"40px",radius:"4px",style:"margin-left: 12px;"});var xe=g(re,2),Ne=c(xe);Jt(Ne,{width:"40%",height:"14px",radius:"4px",style:"margin-bottom: 6px;"});var He=g(Ne,2);Jt(He,{width:"25%",height:"12px",radius:"4px",style:"opacity: 0.6"});var z=g(xe,2),U=c(z);Jt(U,{width:"30px",height:"12px",radius:"4px"}),b(E,W)}),b(R,N)},De=R=>{var N=tv(),E=Ie(N);yt(E,3,d,(Ce,Se)=>Ce._uid||Se,(Ce,Se,xe)=>{var Ne=Jd();let He;var z=c(Ne);qr(z,t,"row",{get item(){return r(Se)},get index(){return r(xe)},isGhost:!1,startDrag:U=>Te(U,r(xe),r(Se))}),fe(U=>{He=Je(Ne,1,"row-wrapper svelte-ym6b2",null,He,{"ghost-placeholder":f()===r(xe)&&(n()||i()),"just-dropped":v()===r(xe),"no-transition":h()}),pt(Ne,U)},[()=>(r(I),j(r(xe)),n(),i(),f(),u(),h(),m(()=>r(I).getRowStyle(r(xe),n(),i(),f(),u(),h())))]),b(Ce,Ne)});var C=g(E,2);{var W=Ce=>{var Se=ev(),xe=c(Se);fe(()=>oe(xe,K())),b(Ce,Se)};P(C,Ce=>{d(),m(()=>d().length===0)&&Ce(W)})}var re=g(C,2);qr(re,t,"footer",{}),b(R,N)};P(ne,R=>{x()?R(_e):R(De,!1)})}za($e,R=>us(D,r(D).listBodyContainer=R),()=>r(D)?.listBodyContainer),za(te,R=>us(D,r(D).scrollContainer=R),()=>r(D)?.scrollContainer),fe(()=>de=Je(te,1,"base-list-scroll-container svelte-ym6b2",null,de,{dragging:n()})),vt(1,$e,()=>kt,()=>({duration:200})),b(e,te),Mt(),S()}var rv=k('<div slot="fallback" class="icon-fallback svelte-1eh2rsb"><!></div>'),sv=k('<span class="meta-tag svelte-1eh2rsb"> </span>'),nv=k('<div class="header-subtitle-row svelte-1eh2rsb"><h2 class="header-sub-text svelte-1eh2rsb"> </h2> <!></div>'),iv=k('<span class="meta-tag svelte-1eh2rsb"> </span>'),ov=k('<span class="meta-tag svelte-1eh2rsb"> </span>'),lv=k('<span class="meta-tag quality svelte-1eh2rsb"> </span>'),cv=k('<div slot="header" class="content-padded svelte-1eh2rsb"><div class="view-header svelte-1eh2rsb"><div class="header-art svelte-1eh2rsb"><div style="width: 100%; height: 100%;" class="svelte-1eh2rsb"><!></div></div> <div class="header-info svelte-1eh2rsb"><div class="header-text-group svelte-1eh2rsb"><div class="header-label svelte-1eh2rsb"> </div> <h1 class="header-title svelte-1eh2rsb"> </h1> <!> <div class="meta-badges svelte-1eh2rsb"><!> <!> <!></div></div> <div class="header-actions svelte-1eh2rsb"><button class="btn-primary svelte-1eh2rsb"> </button> <button class="btn-secondary svelte-1eh2rsb"> </button></div></div></div></div>'),dv=k('<div slot="row" class="svelte-1eh2rsb"><!></div>'),vv=k("<button> </button>"),uv=k('<div class="sort-backdrop svelte-1eh2rsb"></div> <div class="sort-menu svelte-1eh2rsb"></div>',1),fv=k('<div class="sort-wrapper svelte-1eh2rsb"><button class="sort-trigger svelte-1eh2rsb"><span class="svelte-1eh2rsb"> </span> <span class="sort-trigger-icon svelte-1eh2rsb"><!></span></button> <!></div>'),hv=k('<div class="music-card skeleton-card svelte-1eh2rsb"><div class="card-img-container svelte-1eh2rsb"><!></div> <div class="card-title svelte-1eh2rsb" style="margin-top: 12px;"><!></div> <div class="card-sub-row svelte-1eh2rsb" style="margin-top: 6px;"><!></div></div>'),pv=k('<div class="music-grid svelte-1eh2rsb"></div>'),gv=k('<div class="group-header header-label svelte-1eh2rsb"> </div>'),_v=k('<div slot="fallback" class="icon-fallback svelte-1eh2rsb"><!></div>'),mv=k('<div class="card-sub text-ellipsis svelte-1eh2rsb"> </div>'),bv=k('<div class="card-badge svelte-1eh2rsb"> </div>'),yv=k('<div class="card-badge quality svelte-1eh2rsb"> </div>'),wv=k('<div class="music-card svelte-1eh2rsb" role="button" tabindex="0"><div class="card-img-container svelte-1eh2rsb"><!> <div class="play-overlay svelte-1eh2rsb"><span class="overlay-icon svelte-1eh2rsb"><!></span></div></div> <div class="card-title svelte-1eh2rsb"> </div> <div class="card-sub-row svelte-1eh2rsb"><!> <!> <!></div></div>'),kv=k('<div class="empty-text svelte-1eh2rsb">No results found</div>'),xv=k('<div class="music-grid svelte-1eh2rsb"></div>'),Sv=k('<div class="content-padded svelte-1eh2rsb"><div class="search-input-container svelte-1eh2rsb"><span class="search-icon svelte-1eh2rsb"><!></span> <input type="text" class="svelte-1eh2rsb"/> <!></div> <!></div>'),Ev=k("<div><!></div>");function Tv(e,t){$t(t,!1);const a=()=>Ee(v,"$itemsStore",n),s=()=>Ee(Et,"$navigationStack",n),[n,i]=Ft(),l=T(),o=T(),f=T();let d=xt(t,"activeCategory",8,"artists");const v=Qe([]);let h=T(!0),u=T(""),p=T("name"),S=T(!1);const $=[{id:"name",label:"A-Z"},{id:"artist",label:"Artist"},{id:"year",label:"Oldest"},{id:"year_desc",label:"Newest"}];let w=T(!1),x=T(!1),K=T(null),le=T(""),ce=T(""),G=T(""),me=T(0),H=0;function I(){_(S,!r(S))}function ee(te){_(p,te),_(S,!1)}function Re(te,de){if(!te||te.length===0)return[];const ge=[...te].sort((he,$e)=>{switch(de){case"name":return he.displayName.localeCompare($e.displayName,void 0,{sensitivity:"base"});case"artist":const A=he.artist||"",ne=$e.artist||"",_e=A.localeCompare(ne,void 0,{sensitivity:"base"});return _e!==0?_e:(parseInt(he.year)||0)-(parseInt($e.year)||0);case"year":return(parseInt(he.year)||0)-(parseInt($e.year)||0);case"year_desc":return(parseInt($e.year)||0)-(parseInt(he.year)||0);default:return 0}});if(de==="artist"){const he=[];let $e=null;return ge.forEach(A=>{const ne=A.artist||"Unknown Artist";ne!==$e&&(he.push({_uid:`header-${ne}`,isHeader:!0,title:ne}),$e=ne),he.push(A)}),he}return ge}async function B(te,de){if(!de)return;const ge=++H;_(h,!0),v.set([]),_(K,de.data),_(le,""),_(ce,""),_(G,""),_(me,0),console.log(`[LibraryView #${ge}] Start loading:`,de);try{let he=[];if(de.view==="root")he=te==="artists"?await Ba.getArtists():await Ba.getAlbums();else if(de.view==="albums_by_artist"){const A=de.data.name||de.data;he=await Ba.getArtistAlbums(A),_(p,"year")}else if(de.view==="tracks_by_album"){const A=de.data.name||de.data,ne=de.data.artist;he=await Ba.getAlbumTracks(A,ne)}if(ge!==H){console.warn(`[LibraryView #${ge}] Request cancelled (stale).`);return}const $e=he.map((A,ne)=>{const De=typeof A=="string"?{name:A}:A;let R=String(De.year||"");return R.length>4&&(R=R.substring(0,4)),{...De,displayName:De.name||De.title||De.artist||"Unknown",thumbFile:De.file||null,year:R,_uid:(De.file||De.name||ne)+te+de.view}});if(console.log(`[LibraryView #${ge}] Setting ${$e.length} items.`),v.set($e),de.view==="tracks_by_album"&&$e.length>0){_(K,$e[0]),_(me,$e.length),_(G,$e[0].year);const A=$e.reduce((ne,_e)=>ne+(_e.time||0),0);if(A>0){const ne=Math.floor(A/3600),_e=Math.floor(A%3600/60);_(le,ne>0?`${ne} hr ${_e} min`:`${_e} min`)}$e[0].qualityBadge&&_(ce,$e[0].qualityBadge)}}catch(he){ge===H&&(console.error(he),v.set([]))}finally{ge===H&&_(h,!1)}}function Y(te){r(f).view==="root"?d()==="artists"?Wa("albums_by_artist",te):Wa("tracks_by_album",te):r(f).view==="albums_by_artist"&&Wa("tracks_by_album",te)}function O(){const te=a();if(te.length>0){const de=r(f).data.name||r(f).data.displayName||"this selection";_a({title:"Replace Queue?",message:`This will clear your queue and play all tracks from "${de}".`,confirmLabel:"Play",type:"confirm",onConfirm:()=>{_(w,!0),Nn(te)}})}}function pe(){const te=a();te.length>0&&(_(x,!0),Dn(te),setTimeout(()=>{_(x,!1)},2e3))}ae(()=>j(d()),()=>{d()&&(_(u,""),d(),_(p,"name"))}),ae(()=>(r(p),y),()=>{_(l,r(p)==="year_desc"?y.SORT_ASC:y.SORT_DESC)}),ae(()=>(a(),r(u),r(p)),()=>{_(o,Re(a().filter(te=>{if(!r(u))return!0;const de=r(u).toLowerCase();return te.displayName.toLowerCase().includes(de)||te.artist&&te.artist.toLowerCase().includes(de)}),r(p)))}),ae(()=>s(),()=>{_(f,s()[s().length-1])}),ae(()=>(j(d()),r(f)),()=>{B(d(),r(f))}),ae(()=>r(f),()=>{r(f)&&(_(w,!1),_(x,!1),_(S,!1))}),Xt(),Lt();var Z=Ev();let ke;var V=c(Z);{var D=te=>{ds(te,{get itemsStore(){return v},get isLoading(){return r(h)},isEditMode:!1,emptyText:"No tracks found",$$slots:{header:(de,ge)=>{var he=cv(),$e=c(he),A=c($e),ne=c(A),_e=c(ne);{let Q=gt(()=>(j(Cr),r(K),m(()=>Cr(r(K)))));Yt(_e,{get src(){return r(Q)},alt:"Art",radius:"8px",$$slots:{fallback:(F,L)=>{var J=rv(),ve=c(J);se(ve,()=>(j(y),m(()=>y.ALBUMS))),b(F,J)}}})}var De=g(A,2),R=c(De),N=c(R),E=c(N),C=g(N,2),W=c(C),re=g(C,2);{var Ce=Q=>{var F=nv(),L=c(F),J=c(L),ve=g(L,2);{var je=we=>{var q=sv(),ie=c(q);fe(()=>oe(ie,r(G))),b(we,q)};P(ve,we=>{r(G)&&r(G)!=="0"&&we(je)})}fe(()=>oe(J,(r(K),m(()=>r(K).artist)))),b(Q,F)};P(re,Q=>{r(K),m(()=>r(K)&&r(K).artist)&&Q(Ce)})}var Se=g(re,2),xe=c(Se);{var Ne=Q=>{var F=iv(),L=c(F);fe(()=>oe(L,`${r(me)??""} tracks`)),b(Q,F)};P(xe,Q=>{r(me)>0&&Q(Ne)})}var He=g(xe,2);{var z=Q=>{var F=ov(),L=c(F);fe(()=>oe(L,r(le))),b(Q,F)};P(He,Q=>{r(le)&&Q(z)})}var U=g(He,2);{var X=Q=>{var F=lv(),L=c(F);fe(()=>oe(L,r(ce))),b(Q,F)};P(U,Q=>{r(ce)&&Q(X)})}var ue=g(R,2),Pe=c(ue),ye=c(Pe),Me=g(Pe,2),Le=c(Me);fe(()=>{oe(E,(r(f),m(()=>r(f).view==="albums_by_artist"?"Artist":"Album"))),Ot(C,"title",(r(f),m(()=>r(f).data.name||r(f).data.displayName))),oe(W,(r(f),m(()=>r(f).data.name||r(f).data.displayName||"Unknown"))),Pe.disabled=r(w),oe(ye,r(w)?"Playing...":"Play All"),Me.disabled=r(x),oe(Le,r(x)?"Added":"To Queue")}),M("click",Pe,O),M("click",Me,pe),b(de,he)},row:(de,ge)=>{var he=dv();const $e=gt(()=>ge.item),A=gt(()=>ge.index);var ne=c(he);Pr(ne,{get track(){return r($e)},get index(){return r(A)},isEditable:!1,$$events:{play:()=>Ds(r($e))}}),b(de,he)}}})},Te=te=>{var de=Sv(),ge=c(de),he=c(ge),$e=c(he);se($e,()=>(j(y),m(()=>y.SEARCH)));var A=g(he,2),ne=g(A,2);{var _e=E=>{var C=fv(),W=c(C),re=c(W),Ce=c(re),Se=g(re,2),xe=c(Se);se(xe,()=>r(l));var Ne=g(W,2);{var He=z=>{var U=uv(),X=Ie(U),ue=g(X,2);yt(ue,5,()=>$,Dt,(Pe,ye)=>{var Me=vv();let Le;var Q=c(Me);fe(()=>{Le=Je(Me,1,"sort-item svelte-1eh2rsb",null,Le,{selected:r(p)===r(ye).id}),oe(Q,(r(ye),m(()=>r(ye).label)))}),M("click",Me,()=>ee(r(ye).id)),b(Pe,Me)}),M("click",X,I),vt(3,X,()=>kt,()=>({duration:100})),vt(3,ue,()=>Ln,()=>({start:.95,duration:100})),b(z,U)};P(Ne,z=>{r(S)&&z(He)})}fe(z=>oe(Ce,z),[()=>(r(p),m(()=>$.find(z=>z.id===r(p))?.label))]),M("click",W,I),b(E,C)};P(ne,E=>{j(d()),r(f),m(()=>d()==="albums"||r(f).view==="albums_by_artist")&&E(_e)})}var De=g(ge,2);{var R=E=>{var C=pv();yt(C,4,()=>Array(12),Dt,(W,re)=>{var Ce=hv(),Se=c(Ce),xe=c(Se);Jt(xe,{width:"100%",height:"100%",radius:"8px"});var Ne=g(Se,2),He=c(Ne);Jt(He,{width:"80%",height:"14px",radius:"4px"});var z=g(Ne,2),U=c(z);Jt(U,{width:"50%",height:"12px",radius:"4px",style:"opacity: 0.6"}),b(W,Ce)}),b(E,C)},N=E=>{var C=xv();yt(C,5,()=>r(o),W=>W._uid,(W,re)=>{var Ce=st(),Se=Ie(Ce);{var xe=He=>{var z=gv(),U=c(z);fe(()=>oe(U,(r(re),m(()=>r(re).title)))),b(He,z)},Ne=He=>{var z=wv(),U=c(z),X=c(U);{let q=gt(()=>(j(ts),r(re),m(()=>ts(r(re),"md"))));Yt(X,{get src(){return r(q)},get alt(){return r(re),m(()=>r(re).displayName)},radius:"8px",$$slots:{fallback:(ie,be)=>{var Fe=_v(),Oe=c(Fe);{var qe=Ue=>{var Be=st(),tt=Ie(Be);se(tt,()=>(j(y),m(()=>y.ARTISTS))),b(Ue,Be)},We=Ue=>{var Be=st(),tt=Ie(Be);se(tt,()=>(j(y),m(()=>y.ALBUMS))),b(Ue,Be)};P(Oe,Ue=>{d()==="artists"?Ue(qe):Ue(We,!1)})}b(ie,Fe)}}})}var ue=g(X,2),Pe=c(ue),ye=c(Pe);se(ye,()=>(j(y),m(()=>y.PLAY)));var Me=g(U,2),Le=c(Me),Q=g(Me,2),F=c(Q);{var L=q=>{var ie=mv(),be=c(ie);fe(()=>oe(be,(r(re),m(()=>r(re).artist)))),b(q,ie)};P(F,q=>{r(re),m(()=>r(re).artist)&&q(L)})}var J=g(F,2);{var ve=q=>{var ie=bv(),be=c(ie);fe(()=>oe(be,(r(re),m(()=>r(re).year)))),b(q,ie)};P(J,q=>{r(re),m(()=>r(re).year&&r(re).year!=="0")&&q(ve)})}var je=g(J,2);{var we=q=>{var ie=yv(),be=c(ie);fe(Fe=>oe(be,Fe),[()=>(r(re),m(()=>r(re).qualityBadge.split(" ")[0]))]),b(q,ie)};P(je,q=>{r(re),m(()=>r(re).qualityBadge)&&q(we)})}fe(()=>oe(Le,(r(re),m(()=>r(re).displayName)))),M("click",z,()=>Y(r(re))),M("keypress",z,q=>q.key==="Enter"&&Y(r(re))),b(He,z)};P(Se,He=>{r(re),m(()=>r(re).isHeader)?He(xe):He(Ne,!1)})}b(W,Ce)},W=>{var re=kv();b(W,re)}),b(E,C)};P(De,E=>{r(h)?E(R):E(N,!1)})}fe(()=>Ot(A,"placeholder",`Filter ${d()??""}...`)),nr(A,()=>r(u),E=>_(u,E)),b(te,de)};P(V,te=>{r(f),m(()=>r(f)?.view==="tracks_by_album")?te(D):te(Te,!1)})}fe(()=>ke=Je(Z,1,"view-container svelte-1eh2rsb",null,ke,{scrollable:r(f)?.view!=="tracks_by_album"})),b(e,Z),Mt(),i()}var $v=k('<div class="music-card svelte-1otxnt7"><!> <!></div>'),Mv=k('<div class="music-grid svelte-1otxnt7"></div>'),Av=k('<div slot="fallback" class="icon-fallback svelte-1otxnt7">ð»</div>'),Cv=k('<div class="status-badge playing svelte-1otxnt7">PLAYING</div>'),Pv=k('<div class="status-badge paused svelte-1otxnt7">PAUSED</div>'),Lv=k('<span class="overlay-icon svelte-1otxnt7"><!></span>'),zv=k('<div class="card-sub svelte-1otxnt7"> </div>'),Rv=k('<div class="card-badge quality svelte-1otxnt7"> </div>'),jv=k('<div role="button" tabindex="0"><div class="card-img-container svelte-1otxnt7"><!> <div class="play-overlay svelte-1otxnt7"><!></div></div> <div class="card-title svelte-1otxnt7"> </div> <div class="card-sub-row svelte-1otxnt7"><!> <!></div></div>'),Iv=k('<div class="empty-text svelte-1otxnt7">No stations found</div>'),Nv=k('<div class="music-grid svelte-1otxnt7"></div> <!>',1),Dv=k('<div class="view-container scrollable svelte-1otxnt7"><div class="content-padded no-bottom-pad svelte-1otxnt7"><div class="search-input-container svelte-1otxnt7"><span class="search-icon svelte-1otxnt7"><!></span> <input type="text" placeholder="Find station..." class="svelte-1otxnt7"/></div></div> <div class="content-padded svelte-1otxnt7"><!></div></div>');function Ov(e,t){$t(t,!1);const a=()=>Ee(Xa,"$stations",l),s=()=>Ee(Tt,"$status",l),n=()=>Ee(ms,"$isLoadingRadio",l),i=()=>Ee(Qt,"$currentSong",l),[l,o]=Ft(),f=T(),d=T();let v=T("");ae(()=>(a(),r(v)),()=>{_(f,a().filter(G=>{const me=r(v).toLowerCase();return G.name.toLowerCase().includes(me)||G.genre&&G.genre.toLowerCase().includes(me)}))}),ae(()=>s(),()=>{_(d,s().bitrate?`${s().bitrate} kbps`:s().format||"")}),Xt(),Lt();var h=Dv(),u=c(h),p=c(u),S=c(p),$=c(S);se($,()=>(j(y),m(()=>y.SEARCH)));var w=g(S,2),x=g(u,2),K=c(x);{var le=G=>{var me=Mv();yt(me,4,()=>Array(12),Dt,(H,I)=>{var ee=$v(),Re=c(ee);Jt(Re,{width:"100%",style:"aspect-ratio:1; border-radius:12px; margin-bottom:12px;"});var B=g(Re,2);Jt(B,{width:"70%",height:"16px"}),b(H,ee)}),b(G,me)},ce=G=>{var me=Nv(),H=Ie(me);yt(H,5,()=>r(f),Dt,(Re,B)=>{const Y=gt(()=>(r(B),m(()=>r(B).file))),O=gt(()=>(i(),r(B),j(r(Y)),m(()=>i().stationName===r(B).name||i().file===r(Y)))),pe=gt(()=>(j(Ar),r(B),m(()=>Ar(r(B)))));var Z=jv();let ke;var V=c(Z),D=c(V);Yt(D,{get src(){return r(pe)},get alt(){return r(B),m(()=>r(B).name)},radius:"8px",$$slots:{fallback:(N,E)=>{var C=Av();b(N,C)}}});var Te=g(D,2),te=c(Te);{var de=N=>{var E=st(),C=Ie(E);{var W=Ce=>{var Se=Cv();b(Ce,Se)},re=Ce=>{var Se=Pv();b(Ce,Se)};P(C,Ce=>{s(),m(()=>s().state==="play")?Ce(W):Ce(re,!1)})}b(N,E)},ge=N=>{var E=Lv(),C=c(E);se(C,()=>(j(y),m(()=>y.PLAY))),b(N,E)};P(te,N=>{r(O)?N(de):N(ge,!1)})}var he=g(V,2),$e=c(he),A=g(he,2),ne=c(A);{var _e=N=>{var E=zv(),C=c(E);fe(()=>oe(C,(r(B),m(()=>r(B).genre)))),b(N,E)};P(ne,N=>{r(B),m(()=>r(B).genre)&&N(_e)})}var De=g(ne,2);{var R=N=>{var E=Rv(),C=c(E);fe(()=>oe(C,r(d))),vt(1,E,()=>kt),b(N,E)};P(De,N=>{r(O)&&r(d)&&N(R)})}fe(()=>{ke=Je(Z,1,"music-card svelte-1otxnt7",null,ke,{"is-active":r(O)}),pt(Te,r(O)?"opacity: 1":""),oe($e,(r(B),m(()=>r(B).name)))}),M("click",Z,()=>Fn(r(B))),b(Re,Z)});var I=g(H,2);{var ee=Re=>{var B=Iv();b(Re,B)};P(I,Re=>{r(f),a(),m(()=>r(f).length===0&&a().length>0)&&Re(ee)})}b(G,me)};P(K,G=>{n()?G(le):G(ce,!1)})}nr(w,()=>r(v),G=>_(v,G)),vt(1,h,()=>kt,()=>({duration:200})),b(e,h),Mt(),o()}var Fv=k('<button class="clear-icon-btn svelte-m7c4tz"><!></button>'),qv=k('<div class="spinner svelte-m7c4tz"></div>'),Bv=k('<div class="content-padded no-bottom-pad svelte-m7c4tz"><div class="search-input-container svelte-m7c4tz"><span class="search-icon svelte-m7c4tz"><!></span> <input type="text" placeholder="Search playlists &amp; tracks..." class="svelte-m7c4tz"/> <!> <!></div></div>'),Yv=k('<span class="meta-tag svelte-m7c4tz">Loading...</span>'),Uv=k('<span class="meta-tag svelte-m7c4tz"> </span>'),Hv=k('<span class="meta-tag quality svelte-m7c4tz"> </span>'),Vv=k('<span class="meta-tag svelte-m7c4tz"> </span> <!> <!>',1),Wv=k('<div slot="header" class="content-padded svelte-m7c4tz"><div class="view-header svelte-m7c4tz"><div class="header-art svelte-m7c4tz"><div class="header-icon-wrap svelte-m7c4tz"><!></div></div> <div class="header-info svelte-m7c4tz"><div class="header-text-group svelte-m7c4tz"><div class="header-label svelte-m7c4tz">Playlist</div> <h1 class="header-title svelte-m7c4tz"> </h1> <div class="meta-badges svelte-m7c4tz"><!></div></div> <div class="header-actions svelte-m7c4tz"><button class="btn-primary svelte-m7c4tz"> </button> <button class="btn-secondary svelte-m7c4tz"> </button> <button title="Edit"><!></button></div></div></div></div>'),Qv=k('<div slot="row" class="svelte-m7c4tz"><!></div>'),Xv=k('<div class="music-card skeleton-card svelte-m7c4tz"><div class="card-img-container svelte-m7c4tz"><!></div> <div style="margin-top: 8px;" class="svelte-m7c4tz"><!></div></div>'),Kv=k('<div class="content-padded svelte-m7c4tz"><div class="music-grid playlists-grid-override svelte-m7c4tz"></div></div>'),Gv=k('<button class="card-menu-btn svelte-m7c4tz"><!></button>'),Zv=k('<div class="music-card svelte-m7c4tz"><div class="card-img-container svelte-m7c4tz"><div class="icon-wrap svelte-m7c4tz"><!></div> <!> <div class="play-overlay svelte-m7c4tz"><span class="overlay-icon svelte-m7c4tz"><!></span></div></div> <div class="card-title svelte-m7c4tz"> </div> <div class="card-sub-row svelte-m7c4tz"><div class="card-sub svelte-m7c4tz"> </div></div></div>'),Jv=k('<div class="music-grid playlists-grid-override svelte-m7c4tz"><div class="music-card svelte-m7c4tz"><div class="card-img-container dashed-cover svelte-m7c4tz"><div class="icon-wrap svelte-m7c4tz"><!></div></div> <div class="card-title svelte-m7c4tz">New Playlist</div></div> <!></div>'),eu=k('<div class="music-card svelte-m7c4tz"><div class="card-img-container svelte-m7c4tz"><div class="icon-wrap svelte-m7c4tz"><!></div> <div class="play-overlay svelte-m7c4tz"><span class="overlay-icon svelte-m7c4tz"><!></span></div></div> <div class="card-title svelte-m7c4tz"> </div></div>'),tu=k('<div class="header-label section-spacing svelte-m7c4tz">Matched Playlists</div> <div class="music-grid horizontal section-mb svelte-m7c4tz"></div>',1),au=k('<div class="group-container svelte-m7c4tz"><div class="group-header svelte-m7c4tz"><div class="group-icon svelte-m7c4tz"><!></div> <div class="group-title svelte-m7c4tz"> </div> <div class="group-count svelte-m7c4tz"> </div> <div class="group-actions svelte-m7c4tz"><button class="btn-icon small svelte-m7c4tz" title="Play matches"><!></button> <button class="btn-icon small svelte-m7c4tz" title="Add matches to Queue"><!></button></div></div> <div class="group-tracks svelte-m7c4tz"></div></div>'),ru=k('<div class="header-label section-spacing svelte-m7c4tz">Matched Tracks</div> <div class="grouped-results svelte-m7c4tz"></div>',1),su=k('<div class="empty-text svelte-m7c4tz"> </div>'),nu=k('<div class="empty-text svelte-m7c4tz" style="opacity: 0.7">Searching tracks in playlists...</div>'),iu=k("<!> <!> <!>",1),ou=k('<div class="content-padded svelte-m7c4tz"><!></div>'),lu=k("<div><!> <!></div>");function cu(e,t){$t(t,!1);const a=()=>Ee(Tt,"$status",u),s=()=>Ee(Qt,"$currentSong",u),n=()=>Ee(Et,"$navigationStack",u),i=()=>Ee(Is,"$playlists",u),l=()=>Ee(Vr,"$activePlaylistTracks",u),o=()=>Ee(vn,"$isLoadingTracks",u),f=()=>Ee(ad,"$activePlaylistName",u),d=()=>Ee(Va,"$queue",u),v=()=>Ee(Ts,"$currentTheme",u),h=()=>Ee(dn,"$isLoadingPlaylists",u),[u,p]=Ft(),S=T(),$=T(),w=T(),x=T(),K=T(),le=T();let ce=T(!1),G=T(!1),me=T(!1),H=T(""),I=T(!1),ee,Re=0,B=T([]),Y=T([]),O=T(""),pe=T(""),Z=T("");function ke(z){_(H,z.target.value),clearTimeout(ee),r(H).length>=2?ee=setTimeout(()=>{V(r(H))},600):(_(I,!1),_(B,[]),_(Y,[]))}async function V(z){if(!z)return;Re++;const U=Re;_(I,!0);const X=z.toLowerCase();_(B,i().filter(ye=>ye.name.toLowerCase().includes(X)));let ue=[];const Pe=i().filter(ye=>ye.name!=="Favorites");for(const ye of Pe){if(U!==Re)break;try{const Me=await Ye.send(`listplaylistinfo "${ye.name.replace(/"/g,'\\"')}"`),F=ia.parseTracks(Me).map((L,J)=>({...L,playlistPos:J})).filter(L=>L.title&&L.title.toLowerCase().includes(X)||L.artist&&L.artist.toLowerCase().includes(X));if(F.length>0){const L=F.map(J=>({...J,_uid:Math.random()}));ue.push({playlist:ye,tracks:L}),_(Y,[...ue])}}catch(Me){console.warn(`Failed to search in playlist ${ye.name}`,Me)}}U===Re&&_(I,!1)}function D(z){r(ce)||Ds(z)}function Te(z){z.deltaY!==0&&(z.currentTarget.scrollLeft+=z.deltaY)}function te(z,U){_a({title:"Play Search Results?",message:`This will clear your queue and play ${z.length} matching tracks from "${U}".`,confirmLabel:"Play",type:"confirm",onConfirm:()=>{Nn(z)}})}function de(z){!z||z.length===0||Dn(z)}Qa(()=>{!r(K)&&i().length===0&&On()});function ge(z){const U=z.reduce((ue,Pe)=>ue+(parseFloat(Pe.time)||0),0);if(U>0){const ue=Math.floor(U/3600),Pe=Math.floor(U%3600/60);_(O,ue>0?`${ue} hr ${Pe} min`:`${Pe} min`)}else _(O,"");const X=new Set;z.forEach(ue=>{ue.qualityBadge&&X.add(ue.qualityBadge.split(" ")[0])}),_(pe,X.size===1?z[0].qualityBadge:X.size>1?"Mixed":"")}function he(z){Wa("details",z)}function $e(){if(d().length===0){_a({title:"Create Playlist",message:"Queue is empty. Add tracks to queue before saving a playlist.",confirmLabel:"OK",type:"alert"});return}_a({title:"New Playlist",message:"Save current queue as a new playlist:",type:"prompt",placeholder:"Playlist Name",confirmLabel:"Create",onConfirm:z=>{z&&ma.createPlaylistFromQueue(z)}})}function A(z,U){U.name!=="Favorites"&&(z.stopPropagation(),z.preventDefault(),es(z,null,{type:"playlist-card",playlist:U}))}function ne(){_a({title:"Replace Queue?",message:`This will clear your current queue and play "${r(x).data.name}".`,confirmLabel:"Play",type:"confirm",onConfirm:()=>{_(G,!0),(void 0)(r(x).data.name,0)}})}function _e(){if(l().length>0){const z=r(x).data.name.replace(/"/g,'\\"');rs(`load "${z}"`),_(me,!0),setTimeout(()=>{_(me,!1)},2e3)}}function De(){_(ce,!r(ce))}function R(z){const U=r(x).data.name,X=l();X.splice(z,1),Vr.set(X),$o(U,z),ge(X)}function N(z,U){Mo(r(x).data.name,z,U)}function E(z){if(z.name==="Favorites"){if(v()==="gruvbox"){const U="var(--c-heart)";return`background: linear-gradient(135deg, ${U}, transparent); background-color: ${U};`}return"background: linear-gradient(135deg, hsl(348, 95%, 58%), hsl(348, 90%, 40%));"}return v()==="gruvbox"?`background: linear-gradient(135deg, ${z.colorVar}, transparent); background-color: ${z.colorVar};`:`background: ${z.color}`}function C(z){if(!z)return"";if(z.name==="Favorites"){if(v()==="gruvbox"){const ue="var(--c-heart)";return`background: linear-gradient(135deg, ${ue}, transparent); background-color: ${ue};`}return"background: linear-gradient(135deg, hsl(348, 95%, 58%), hsl(348, 90%, 40%));"}const U="var(--c-bg-card)";if(v()==="gruvbox"){const ue=z.colorVar||z.color||U;return`background: linear-gradient(135deg, ${ue}, transparent); background-color: ${ue};`}return`background: ${z.color||z.colorVar||U}`}ae(()=>a(),()=>{_(S,Number(a().song))}),ae(()=>s(),()=>{_($,s().file)}),ae(()=>a(),()=>{_(w,a().state==="play")}),ae(()=>n(),()=>{_(x,n()[n().length-1])}),ae(()=>r(x),()=>{_(K,r(x).view==="details")}),ae(()=>(r(x),r(Z)),()=>{const z=JSON.stringify(r(x));z!==r(Z)&&(_(H,""),_(G,!1),_(me,!1),_(ce,!1),_(B,[]),_(Y,[]),_(I,!1),_(Z,z))}),ae(()=>(r(K),l(),o()),()=>{r(K)&&l().length>0?ge(l()):r(K)&&l().length===0&&!o()&&(_(O,"0 min"),_(pe,""))}),ae(()=>(r(K),r(x),f(),jd),()=>{r(K)&&r(x).data&&f()!==r(x).data.name&&Eo(r(x).data.name)}),ae(()=>r(x),()=>{_(le,r(x)?.data?.name==="Favorites")}),Xt(),Lt();var W=lu();let re;var Ce=c(W);{var Se=z=>{var U=Bv(),X=c(U),ue=c(X),Pe=c(ue);se(Pe,()=>(j(y),m(()=>y.SEARCH)));var ye=g(ue,2),Me=g(ye,2);{var Le=L=>{var J=Fv(),ve=c(J);se(ve,()=>(j(y),m(()=>y.CLOSE))),M("click",J,()=>{_(H,""),_(B,[]),_(Y,[]),_(I,!1)}),b(L,J)};P(Me,L=>{r(H)&&L(Le)})}var Q=g(Me,2);{var F=L=>{var J=qv();b(L,J)};P(Q,L=>{r(I)&&L(F)})}fe(()=>uo(ye,r(H))),M("input",ye,ke),b(z,U)};P(Ce,z=>{r(K)||z(Se)})}var xe=g(Ce,2);{var Ne=z=>{ds(z,{get itemsStore(){return Vr},get isLoading(){return o()},get isEditMode(){return r(ce)},emptyText:"This playlist is empty.",onMoveItem:N,$$slots:{header:(U,X)=>{var ue=Wv(),Pe=c(ue),ye=c(Pe),Me=c(ye),Le=c(Me);se(Le,()=>(r(le),j(y),m(()=>r(le)?y.HEART_FILLED:y.PLAYLISTS)));var Q=g(ye,2),F=c(Q),L=g(c(F),2),J=c(L),ve=g(L,2),je=c(ve);{var we=tt=>{var Ke=Yv();b(tt,Ke)},q=tt=>{var Ke=Vv(),Ve=Ie(Ke),Ze=c(Ve),Ge=g(Ve,2);{var rt=ct=>{var dt=Uv(),ft=c(dt);fe(()=>oe(ft,r(O))),b(ct,dt)};P(Ge,ct=>{r(O)&&ct(rt)})}var it=g(Ge,2);{var ut=ct=>{var dt=Hv(),ft=c(dt);fe(()=>oe(ft,r(pe))),b(ct,dt)};P(it,ct=>{r(pe)&&ct(ut)})}fe(()=>oe(Ze,`${l(),m(()=>l().length)??""} tracks`)),b(tt,Ke)};P(je,tt=>{o()?tt(we):tt(q,!1)})}var ie=g(F,2),be=c(ie),Fe=c(be),Oe=g(be,2),qe=c(Oe),We=g(Oe,2);let Ue;var Be=c(We);se(Be,()=>(r(ce),j(y),m(()=>r(ce)?y.ACCEPT:y.EDIT))),fe(tt=>{pt(ye,tt),Ot(L,"title",(r(x),m(()=>r(x).data.name))),oe(J,(r(x),m(()=>r(x).data.name))),be.disabled=r(G),oe(Fe,r(G)?"Playing...":"Play All"),Oe.disabled=r(me),oe(qe,r(me)?"Added":"To Queue"),Ue=Je(We,1,"btn-action svelte-m7c4tz",null,Ue,{active:r(ce)})},[()=>(r(x),m(()=>C(r(x).data)))]),M("click",be,ne),M("click",Oe,_e),M("click",We,De),b(U,ue)},row:(U,X)=>{var ue=Qv();const Pe=gt(()=>X.item),ye=gt(()=>X.index),Me=gt(()=>X.startDrag);var Le=c(ue);Pr(Le,{get track(){return r(Pe)},get index(){return r(ye)},get playingIndex(){return r(S)},get playingFile(){return r($)},get isPlaying(){return r(w)},get isEditable(){return r(ce)},$$events:{play:()=>D(r(Pe)),remove:()=>R(r(ye)),startdrag(...Q){r(Me)?.apply(this,Q)}}}),b(U,ue)}}})},He=z=>{var U=st(),X=Ie(U);{var ue=ye=>{var Me=Kv(),Le=c(Me);yt(Le,4,()=>Array(8),Dt,(Q,F)=>{var L=Xv(),J=c(L),ve=c(J);Jt(ve,{width:"100%",height:"100%",radius:"12px"});var je=g(J,2),we=c(je);Jt(we,{width:"60%",height:"16px",radius:"4px"}),b(Q,L)}),b(ye,Me)},Pe=ye=>{var Me=ou(),Le=c(Me);{var Q=L=>{var J=Jv(),ve=c(J),je=c(ve),we=c(je),q=c(we);se(q,()=>(j(y),m(()=>y.ADD)));var ie=g(ve,2);yt(ie,1,i,be=>be.name,(be,Fe)=>{const Oe=gt(()=>(r(Fe),m(()=>r(Fe).name==="Favorites")));var qe=Zv(),We=c(qe),Ue=c(We),Be=c(Ue);se(Be,()=>(j(r(Oe)),j(y),m(()=>r(Oe)?y.HEART_FILLED:y.PLAYLISTS)));var tt=g(Ue,2);{var Ke=ft=>{var mt=Gv(),Kt=c(mt);se(Kt,()=>(j(y),m(()=>y.DOTS))),M("click",mt,Xe=>A(Xe,r(Fe))),b(ft,mt)};P(tt,ft=>{r(Oe)||ft(Ke)})}var Ve=g(tt,2),Ze=c(Ve),Ge=c(Ze);se(Ge,()=>(j(y),m(()=>y.PLAY)));var rt=g(We,2),it=c(rt),ut=g(rt,2),ct=c(ut),dt=c(ct);Ut(()=>M("click",qe,()=>he(r(Fe)))),Mn(qe,ft=>qn?.(ft)),Ut(()=>M("longpress",qe,ft=>A(ft.detail.originalEvent,r(Fe)))),Ut(()=>M("contextmenu",qe,ft=>A(ft,r(Fe)))),fe((ft,mt)=>{pt(We,ft),oe(it,(r(Fe),m(()=>r(Fe).name))),oe(dt,mt)},[()=>(r(Fe),m(()=>E(r(Fe)))),()=>(r(Fe),m(()=>r(Fe).lastModified?new Date(r(Fe).lastModified).toLocaleDateString():"Playlist"))]),b(be,qe)}),M("click",ve,$e),b(L,J)},F=L=>{var J=iu(),ve=Ie(J);{var je=Oe=>{var qe=tu(),We=g(Ie(qe),2);yt(We,5,()=>r(B),Ue=>Ue.name,(Ue,Be)=>{const tt=gt(()=>(r(Be),m(()=>r(Be).name==="Favorites")));var Ke=eu(),Ve=c(Ke),Ze=c(Ve),Ge=c(Ze);se(Ge,()=>(j(r(tt)),j(y),m(()=>r(tt)?y.HEART_FILLED:y.PLAYLISTS)));var rt=g(Ze,2),it=c(rt),ut=c(it);se(ut,()=>(j(y),m(()=>y.PLAY)));var ct=g(Ve,2),dt=c(ct);fe(ft=>{pt(Ve,ft),oe(dt,(r(Be),m(()=>r(Be).name)))},[()=>(r(Be),m(()=>E(r(Be))))]),M("click",Ke,()=>he(r(Be))),b(Ue,Ke)}),M("wheel",We,Te),b(Oe,qe)};P(ve,Oe=>{r(B),m(()=>r(B).length>0)&&Oe(je)})}var we=g(ve,2);{var q=Oe=>{var qe=ru(),We=g(Ie(qe),2);yt(We,5,()=>r(Y),Ue=>Ue.playlist.name,(Ue,Be)=>{var tt=au(),Ke=c(tt),Ve=c(Ke),Ze=c(Ve);se(Ze,()=>(j(y),m(()=>y.PLAYLISTS)));var Ge=g(Ve,2),rt=c(Ge),it=g(Ge,2),ut=c(it),ct=g(it,2),dt=c(ct),ft=c(dt);se(ft,()=>(j(y),m(()=>y.PLAY)));var mt=g(dt,2),Kt=c(mt);se(Kt,()=>(j(y),m(()=>y.ADD)));var Xe=g(Ke,2);yt(Xe,5,()=>(r(Be),m(()=>r(Be).tracks)),wt=>wt._uid,(wt,zt)=>{Pr(wt,{get track(){return r(zt)},get index(){return r(zt),m(()=>r(zt).playlistPos)},get playingFile(){return r($)},get isPlaying(){return r(w)},$$events:{play:()=>D(r(zt))}})}),fe(()=>{oe(rt,(r(Be),m(()=>r(Be).playlist.name))),oe(ut,(r(Be),m(()=>r(Be).tracks.length)))}),M("click",dt,ea(()=>te(r(Be).tracks,r(Be).playlist.name))),M("click",mt,ea(()=>de(r(Be).tracks))),M("click",Ke,()=>he(r(Be).playlist)),b(Ue,tt)}),b(Oe,qe)};P(we,Oe=>{r(Y),m(()=>r(Y).length>0)&&Oe(q)})}var ie=g(we,2);{var be=Oe=>{var qe=su(),We=c(qe);fe(()=>oe(We,`No matches found for "${r(H)??""}"`)),b(Oe,qe)},Fe=Oe=>{var qe=st(),We=Ie(qe);{var Ue=Be=>{var tt=nu();b(Be,tt)};P(We,Be=>{r(I),r(Y),m(()=>r(I)&&r(Y).length===0)&&Be(Ue)},!0)}b(Oe,qe)};P(ie,Oe=>{r(I),r(B),r(Y),m(()=>!r(I)&&r(B).length===0&&r(Y).length===0)?Oe(be):Oe(Fe,!1)})}b(L,J)};P(Le,L=>{r(H)?L(F,!1):L(Q)})}b(ye,Me)};P(X,ye=>{h()?ye(ue):ye(Pe,!1)},!0)}b(z,U)};P(xe,z=>{r(K)?z(Ne):z(He,!1)})}fe(()=>re=Je(W,1,"view-container svelte-m7c4tz",null,re,{scrollable:!r(K)})),b(e,W),Mt(),p()}var du=k('<button class="clear-icon-btn svelte-1d3z1zm"><!></button>'),vu=k('<div class="spinner svelte-1d3z1zm"></div>'),uu=k('<div class="placeholder-state svelte-1d3z1zm"><div class="placeholder-icon svelte-1d3z1zm">ð</div> <p class="svelte-1d3z1zm">Type to search your library</p></div>'),fu=k('<div class="empty-text svelte-1d3z1zm"> </div>'),hu=k('<div slot="fallback" class="icon-fallback svelte-1d3z1zm">ð¿</div>'),pu=k('<div class="meta-tag svelte-1d3z1zm"> </div>'),gu=k('<div class="meta-tag quality svelte-1d3z1zm"> </div>'),_u=k('<div class="music-card svelte-1d3z1zm"><div class="card-img-container svelte-1d3z1zm"><!> <div class="play-overlay svelte-1d3z1zm"><span class="overlay-icon svelte-1d3z1zm"><!></span></div></div> <div class="card-title svelte-1d3z1zm"> </div> <div class="card-sub-row svelte-1d3z1zm"><div class="card-sub text-ellipsis svelte-1d3z1zm"> </div> <!> <!></div></div>'),mu=k('<div class="header-label section-spacing svelte-1d3z1zm">Albums</div> <div class="music-grid horizontal section-mb svelte-1d3z1zm"></div>',1),bu=k('<div class="header-label svelte-1d3z1zm">Tracks</div>'),yu=k("<!> <!>",1),wu=k('<div slot="header" class="content-padded svelte-1d3z1zm"><!></div>'),ku=k('<div slot="row" class="svelte-1d3z1zm"><!></div>'),xu=k('<div class="view-container svelte-1d3z1zm"><div class="content-padded no-bottom-pad svelte-1d3z1zm"><div class="search-input-container svelte-1d3z1zm"><span class="search-icon svelte-1d3z1zm"><!></span> <input type="text" placeholder="Artists, songs, or albums" autoFocus class="svelte-1d3z1zm"/> <!> <!></div></div> <!></div>');function Su(e,t){$t(t,!1);const a=()=>Ee(Wr,"$searchQuery",n),s=()=>Ee(l,"$tracksStore",n),[n,i]=Ft(),l=Qe([]);let o=T([]),f=T(!1),d,v=T(!1);Qa(()=>{a().length>=2&&p(a())});function h(Y){Wr.set(Y.target.value),clearTimeout(d),d=setTimeout(()=>{p(a())},300)}function u(){Wr.set(""),l.set([]),_(o,[]),_(v,!1)}async function p(Y){const O=Y.trim().toLowerCase();if(O.length<2){l.set([]),_(o,[]),_(v,!1);return}_(f,!0),_(v,!0);try{const pe=await Ba.search(O),Z=pe.map((V,D)=>({...V,_uid:V.file?`${V.file}-${D}`:`search-${D}`}));l.set(Z);const ke=new Map;pe.forEach(V=>{const D=V.album;if(D&&!ke.has(D)){const Te=D.toLowerCase().includes(O),te=V.artist&&V.artist.toLowerCase().includes(O);if(Te||te){let de=String(V.year||"");de.length>4&&(de=de.substring(0,4)),ke.set(D,{name:D,artist:V.artist,file:V.file,thumbHash:V.thumbHash,_uid:`alb-${D}`,year:de,qualityBadge:V.qualityBadge})}}}),_(o,Array.from(ke.values()))}finally{_(f,!1)}}function S(Y){Ds(Y)}function $(Y){Wa("tracks_by_album",{name:Y.name,artist:Y.artist})}function w(Y){Y.deltaY!==0&&(Y.currentTarget.scrollLeft+=Y.deltaY)}Lt();var x=xu(),K=c(x),le=c(K),ce=c(le),G=c(ce);se(G,()=>y.SEARCH);var me=g(ce,2),H=g(me,2);{var I=Y=>{var O=du(),pe=c(O);se(pe,()=>y.CLOSE),M("click",O,u),b(Y,O)};P(H,Y=>{a().length>0&&Y(I)})}var ee=g(H,2);{var Re=Y=>{var O=vu();b(Y,O)};P(ee,Y=>{r(f)&&Y(Re)})}var B=g(K,2);ds(B,{get itemsStore(){return l},isEditMode:!1,isLoading:!1,emptyText:"",$$slots:{header:(Y,O)=>{var pe=wu(),Z=c(pe);{var ke=D=>{var Te=uu();b(D,Te)},V=D=>{var Te=st(),te=Ie(Te);{var de=he=>{var $e=fu(),A=c($e);fe(()=>oe(A,`No results found for "${a()??""}"`)),b(he,$e)},ge=he=>{var $e=yu(),A=Ie($e);{var ne=R=>{var N=mu(),E=g(Ie(N),2);yt(E,5,()=>r(o),C=>C._uid,(C,W)=>{var re=_u(),Ce=c(re),Se=c(Ce);{let F=gt(()=>ts(r(W),"md"));Yt(Se,{get src(){return r(F)},get alt(){return r(W).name},radius:"8px",$$slots:{fallback:(L,J)=>{var ve=hu();b(L,ve)}}})}var xe=g(Se,2),Ne=c(xe),He=c(Ne);se(He,()=>y.PLAY);var z=g(Ce,2),U=c(z),X=g(z,2),ue=c(X),Pe=c(ue),ye=g(ue,2);{var Me=F=>{var L=pu(),J=c(L);fe(()=>oe(J,r(W).year)),b(F,L)};P(ye,F=>{r(W).year&&r(W).year!=="0"&&r(W).year!==0&&F(Me)})}var Le=g(ye,2);{var Q=F=>{var L=gu(),J=c(L);fe(ve=>oe(J,ve),[()=>r(W).qualityBadge.split(" ")[0]]),b(F,L)};P(Le,F=>{r(W).qualityBadge&&F(Q)})}fe(()=>{Ot(z,"title",r(W).name),oe(U,r(W).name),oe(Pe,r(W).artist)}),M("click",re,()=>$(r(W))),b(C,re)}),M("wheel",E,w),b(R,N)};P(A,R=>{r(o).length>0&&R(ne)})}var _e=g(A,2);{var De=R=>{var N=bu();b(R,N)};P(_e,R=>{s().length>0&&R(De)})}b(he,$e)};P(te,he=>{!r(f)&&s().length===0&&r(o).length===0&&r(v)?he(de):he(ge,!1)},!0)}b(D,Te)};P(Z,D=>{a().length<2?D(ke):D(V,!1)})}b(Y,pe)},row:(Y,O)=>{var pe=ku();const Z=gt(()=>O.item),ke=gt(()=>O.index);var V=c(pe);Pr(V,{get track(){return r(Z)},get index(){return r(ke)},isEditable:!1,$$events:{play:()=>S(r(Z))}}),b(Y,pe)}}}),fe(()=>uo(me,a())),M("input",me,h),b(e,x),Mt(),i()}var Eu=k('<span class="status-badge connected svelte-1j67jqh">Connected</span>'),Tu=k('<span class="status-badge disconnected svelte-1j67jqh">Not Connected</span>'),$u=k('<div class="separator svelte-1j67jqh"></div> <div class="row space-between svelte-1j67jqh"><label class="svelte-1j67jqh">Connection Status</label> <!></div> <div class="separator svelte-1j67jqh"></div> <div class="row svelte-1j67jqh"><label for="yandex-token" class="svelte-1j67jqh">OAuth Token</label> <div class="input-group svelte-1j67jqh"><input id="yandex-token" type="password" placeholder="Paste token here..." class="svelte-1j67jqh"/> <button class="btn-primary small svelte-1j67jqh"> </button></div></div> <p class="hint svelte-1j67jqh">Token is stored securely on the device.</p>',1),Mu=k('<option class="svelte-1j67jqh"> </option>'),Au=k('<div class="separator svelte-1j67jqh"></div> <div class="row space-between svelte-1j67jqh"><label for="alarm-time" class="svelte-1j67jqh">Wake up time</label> <input id="alarm-time" type="time" class="svelte-1j67jqh"/></div> <div class="separator svelte-1j67jqh"></div> <div class="row space-between svelte-1j67jqh"><label for="alarm-pl" class="svelte-1j67jqh">Playlist</label> <div class="select-wrapper svelte-1j67jqh"><select id="alarm-pl" class="svelte-1j67jqh"></select> <div class="select-arrow svelte-1j67jqh"><!></div></div></div>',1),Cu=k('<div class="view-container scrollable svelte-1j67jqh"><div class="content-padded svelte-1j67jqh"><h1 class="header-title big svelte-1j67jqh">Settings</h1> <div class="section svelte-1j67jqh"><div class="section-header svelte-1j67jqh"><span class="svelte-1j67jqh">Services</span></div> <div class="card svelte-1j67jqh"><div class="row space-between svelte-1j67jqh"><label class="svelte-1j67jqh">Enable Yandex Music (Beta)</label> <button><div class="toggle-circle svelte-1j67jqh"></div></button></div> <!></div></div> <div class="section svelte-1j67jqh"><div class="section-header svelte-1j67jqh"><span class="svelte-1j67jqh">Alarm Clock</span></div> <div class="card svelte-1j67jqh"><div class="row space-between svelte-1j67jqh"><span class="label-text svelte-1j67jqh">Current Player Time</span> <span class="mono-badge svelte-1j67jqh"> </span></div> <div class="separator svelte-1j67jqh"></div> <div class="row space-between svelte-1j67jqh"><label class="svelte-1j67jqh">Enable Alarm</label> <button><div class="toggle-circle svelte-1j67jqh"></div></button></div> <!></div></div> <div class="section svelte-1j67jqh"><div class="section-header svelte-1j67jqh"><span class="svelte-1j67jqh">Appearance</span></div> <div class="card clickable svelte-1j67jqh"><div class="row space-between svelte-1j67jqh"><span class="svelte-1j67jqh">Interface Theme</span> <div class="row-gap svelte-1j67jqh"><span class="value svelte-1j67jqh"> </span> <span class="chevron svelte-1j67jqh"><!></span></div></div></div></div> <div class="section svelte-1j67jqh"><div class="section-header svelte-1j67jqh"><span class="svelte-1j67jqh">Connection</span></div> <div class="card svelte-1j67jqh"><div class="row svelte-1j67jqh"><label for="ip" class="svelte-1j67jqh">Moode Device IP</label> <div class="input-group svelte-1j67jqh"><input id="ip" type="text" placeholder="192.168.x.x" class="svelte-1j67jqh"/> <button class="btn-primary small svelte-1j67jqh">Save</button></div></div> <p class="hint svelte-1j67jqh"> </p></div></div> <div class="section svelte-1j67jqh"><div class="section-header svelte-1j67jqh"><span class="svelte-1j67jqh">About</span></div> <div class="card svelte-1j67jqh"><div class="info-row svelte-1j67jqh"><span class="svelte-1j67jqh">Version</span> <span class="mono svelte-1j67jqh"> </span></div> <div class="separator svelte-1j67jqh"></div> <div class="info-row svelte-1j67jqh"><span class="svelte-1j67jqh">Build Date</span> <span class="mono small svelte-1j67jqh"> </span></div></div></div></div></div>');function Pu(e,t){$t(t,!1);const a=()=>Ee(Ts,"$currentTheme",d),s=()=>Ee(_n,"$isAlarmEnabled",d),n=()=>Ee(gn,"$alarmTime",d),i=()=>Ee(mn,"$alarmPlaylist",d),l=()=>Ee(as,"$isYandexEnabled",d),o=()=>Ee(Sr,"$yandexAuthStatus",d),f=()=>Ee(Is,"$playlists",d),[d,v]=Ft(),h=T();let u=T(er.MOODE_IP),p=T("--:--"),S,$=T(""),w=T(!1);function x(){er.setMoodeIp(r(u)),ze("IP Saved. Reloading...","success"),setTimeout(()=>location.reload(),1e3)}const K="0.0.1",le="2026-01-11T01:10:48.496Z",ce=new Date(le).toLocaleString();function G(){const we=ln.map(q=>({label:q.label,value:q.id}));_a({title:"Select Theme",message:"Choose your preferred interface style:",type:"select",inputValue:a(),options:we,onConfirm:q=>{Ts.set(q),ze("Theme updated","success")}})}async function me(){const we=await Ta.getServerTime();we&&_(p,we)}Qa(()=>{me(),S=setInterval(me,6e4),Ta.checkYandexAuth()}),po(()=>{S&&clearInterval(S)});async function H(){try{await Ta.setAlarm(s(),n(),i()),s()&&ze(`Alarm set for ${n()}`,"success")}catch{ze("Failed to sync alarm settings","error")}}function I(){_n.update(we=>!we),H()}function ee(){as.update(we=>!we)}async function Re(){if(!r($))return;_(w,!0);const we=await Ta.saveYandexToken(r($));_(w,!1),we&&_($,"")}ae(()=>a(),()=>{_(h,ln.find(we=>we.id===a())?.label||"Default")}),Xt(),Lt();var B=Cu(),Y=c(B),O=g(c(Y),2),pe=g(c(O),2),Z=c(pe),ke=g(c(Z),2);let V;var D=g(Z,2);{var Te=we=>{var q=$u(),ie=Ie(q),be=g(ie,2),Fe=g(c(be),2);{var Oe=Ge=>{var rt=Eu();b(Ge,rt)},qe=Ge=>{var rt=Tu();b(Ge,rt)};P(Fe,Ge=>{o()?Ge(Oe):Ge(qe,!1)})}var We=g(be,2),Ue=g(We,2),Be=g(c(Ue),2),tt=c(Be),Ke=g(tt,2),Ve=c(Ke),Ze=g(Ue,2);fe(()=>{Ke.disabled=r(w),oe(Ve,r(w)?"Checking...":"Save")}),vt(1,ie,()=>kt),vt(1,be,()=>kt),vt(1,We,()=>kt),nr(tt,()=>r($),Ge=>_($,Ge)),M("click",Ke,Re),vt(1,Ue,()=>kt),vt(1,Ze,()=>kt),b(we,q)};P(D,we=>{l()&&we(Te)})}var te=g(O,2),de=g(c(te),2),ge=c(de),he=g(c(ge),2),$e=c(he),A=g(ge,4),ne=g(c(A),2);let _e;var De=g(A,2);{var R=we=>{var q=Au(),ie=Ie(q),be=g(ie,2),Fe=g(c(be),2),Oe=g(be,2),qe=g(Oe,2),We=g(c(qe),2),Ue=c(We);fe(()=>{i(),jl(()=>{f()})}),yt(Ue,5,f,Dt,(Ke,Ve)=>{var Ze=Mu(),Ge=c(Ze),rt={};fe(()=>{oe(Ge,(r(Ve),m(()=>r(Ve).name))),rt!==(rt=(r(Ve),m(()=>r(Ve).name)))&&(Ze.value=(Ze.__value=(r(Ve),m(()=>r(Ve).name)))??"")}),b(Ke,Ze)});var Be=g(Ue,2),tt=c(Be);se(tt,()=>(j(y),m(()=>y.CHEVRON_DOWN))),vt(1,ie,()=>kt),nr(Fe,n,Ke=>ii(gn,Ke)),M("change",Fe,H),vt(1,be,()=>kt),vt(1,Oe,()=>kt),rc(Ue,i,Ke=>ii(mn,Ke)),M("change",Ue,H),vt(1,qe,()=>kt),b(we,q)};P(De,we=>{s()&&we(R)})}var N=g(te,2),E=g(c(N),2),C=c(E),W=g(c(C),2),re=c(W),Ce=c(re),Se=g(re,2),xe=c(Se);se(xe,()=>(j(y),m(()=>y.NEXT)));var Ne=g(N,2),He=g(c(Ne),2),z=c(He),U=g(c(z),2),X=c(U),ue=g(X,2),Pe=g(z,2),ye=c(Pe),Me=g(Ne,2),Le=g(c(Me),2),Q=c(Le),F=g(c(Q),2),L=c(F),J=g(Q,4),ve=g(c(J),2),je=c(ve);fe(()=>{V=Je(ke,1,"toggle-btn svelte-1j67jqh",null,V,{active:l()}),oe($e,r(p)),_e=Je(ne,1,"toggle-btn svelte-1j67jqh",null,_e,{active:s()}),oe(Ce,r(h)),oe(ye,`Current: ${j(er),m(()=>er.MOODE_IP)??""}`),oe(L,K),oe(je,ce)}),M("click",ke,ee),M("click",ne,I),M("click",E,G),nr(X,()=>r(u),we=>_(u,we)),M("click",ue,x),vt(1,B,()=>kt,()=>({duration:200})),b(e,B),Mt(),v()}var Lu=k('<span class="meta-tag svelte-185fgrr"> </span>'),zu=k('<div slot="header" class="content-padded svelte-185fgrr"><div class="view-header svelte-185fgrr"><div class="header-art svelte-185fgrr" style="background: var(--c-surface-active);"><div class="header-icon-wrap svelte-185fgrr"><!></div></div> <div class="header-info svelte-185fgrr"><div class="header-text-group svelte-185fgrr"><div class="header-label svelte-185fgrr">Now Playing</div> <h1 class="header-title svelte-185fgrr">Current Queue</h1> <div class="meta-badges svelte-185fgrr"><span class="meta-tag svelte-185fgrr"> </span> <!></div></div> <div class="header-actions svelte-185fgrr"><button class="btn-secondary svelte-185fgrr" title="Clear Queue">Clear</button> <button class="btn-action svelte-185fgrr" title="Save Queue"><!></button> <button><!></button></div></div></div></div>'),Ru=k('<div slot="row" class="svelte-185fgrr"><!></div>'),ju=k('<div class="view-container svelte-185fgrr"><!></div>');function Iu(e,t){$t(t,!1);const a=()=>Ee(Tt,"$status",l),s=()=>Ee(St,"$isQueueLocked",l),n=()=>Ee(Qt,"$currentSong",l),i=()=>Ee(Va,"$queue",l),[l,o]=Ft(),f=T(),d=T(),v=T(),h=T();let u=T(!1),p=T(""),S=T(-1);function $(){_(u,!r(u))}function w(H){r(u)||rs(`play ${H}`)}function x(H){H<r(S)&&_(S,r(S)-1),ca.removeFromQueue(H)}async function K(){_a({title:"Save Playlist",message:"Enter a name for this playlist:",type:"prompt",placeholder:"Playlist Name",confirmLabel:"Save",onConfirm:async H=>{H&&H.trim().length>0&&(await ca.saveQueue(H),On())}})}function le(){i().length!==0&&_a({title:"Clear Queue",message:"Are you sure you want to clear the entire play queue?",confirmLabel:"Clear All",type:"confirm",onConfirm:async()=>{Va.set([]),Qt.set({title:"Not Playing",artist:"",album:"",file:"",stationName:null,id:null,pos:null}),Tt.update(H=>({...H,state:"stop",song:-1,songid:-1,elapsed:0})),await rs("clear")}})}function ce(H,I){let ee=r(S);H===ee?ee=I:H<ee&&I>=ee?ee-=1:H>ee&&I<=ee&&(ee+=1),_(S,ee),ca.moveTrack(H,I)}ae(()=>a(),()=>{_(f,Number(a().song))}),ae(()=>(s(),r(f)),()=>{s()||_(S,r(f))}),ae(()=>r(S),()=>{_(d,r(S))}),ae(()=>n(),()=>{_(v,n().file)}),ae(()=>a(),()=>{_(h,a().state==="play")}),ae(()=>i(),()=>{if(i().length>=0){const H=i().reduce((I,ee)=>I+(parseFloat(ee.time)||0),0);if(H>0){const I=Math.floor(H/3600),ee=Math.floor(H%3600/60);I>0?_(p,`${I} hr ${ee} min`):_(p,`${ee} min`)}else _(p,"")}}),Xt(),Lt();var G=ju(),me=c(G);ds(me,{get itemsStore(){return Va},get isEditMode(){return r(u)},emptyText:"Queue is empty",onMoveItem:ce,$$slots:{header:(H,I)=>{var ee=zu(),Re=c(ee),B=c(Re),Y=c(B),O=c(Y);se(O,()=>(j(y),m(()=>y.MENU)));var pe=g(B,2),Z=c(pe),ke=g(c(Z),4),V=c(ke),D=c(V),Te=g(V,2);{var te=De=>{var R=Lu(),N=c(R);fe(()=>oe(N,r(p))),b(De,R)};P(Te,De=>{r(p)&&De(te)})}var de=g(Z,2),ge=c(de),he=g(ge,2),$e=c(he);se($e,()=>(j(y),m(()=>y.SAVE)));var A=g(he,2);let ne;var _e=c(A);se(_e,()=>(r(u),j(y),m(()=>r(u)?y.ACCEPT:y.EDIT))),fe(()=>{oe(D,`${i(),m(()=>i().length)??""} tracks`),ge.disabled=(i(),m(()=>i().length===0)),he.disabled=(i(),m(()=>i().length===0)),ne=Je(A,1,"btn-action svelte-185fgrr",null,ne,{active:r(u)}),Ot(A,"title",r(u)?"Finish Editing":"Edit Queue"),A.disabled=(i(),m(()=>i().length===0))}),M("click",ge,le),M("click",he,K),M("click",A,$),b(H,ee)},row:(H,I)=>{var ee=Ru();const Re=gt(()=>I.item),B=gt(()=>I.index),Y=gt(()=>I.startDrag);var O=c(ee);Pr(O,{get track(){return r(Re)},get index(){return r(B)},get playingIndex(){return r(d)},get playingFile(){return r(v)},get isPlaying(){return r(h)},get isEditable(){return r(u)},$$events:{play:()=>w(r(B)),remove:()=>x(r(B)),startdrag(...pe){r(Y)?.apply(this,pe)}}}),b(H,ee)}}}),b(e,G),Mt(),o()}var Nu=k('<div class="token-alert content-padded svelte-4g0hpd"><h3 class="svelte-4g0hpd">Yandex Music Not Connected</h3> <p class="svelte-4g0hpd">Please go to Settings and connect your account.</p></div>'),Du=k('<button class="clear-btn svelte-4g0hpd"><!></button>'),Ou=k('<div class="filter-tabs svelte-4g0hpd"><button>All</button> <button>Tracks</button></div>'),Fu=k('<div class="content-padded no-bottom-pad svelte-4g0hpd"><div class="search-input-container svelte-4g0hpd"><span class="search-icon svelte-4g0hpd"><!></span> <input type="text" placeholder="Search Yandex Music..." class="svelte-4g0hpd"/> <!></div> <!></div>'),qu=k('<div class="icon-wrap svelte-4g0hpd"><!></div>'),Bu=k('<div class="music-card svelte-4g0hpd"><div><!> <div class="play-overlay svelte-4g0hpd"><span class="overlay-icon svelte-4g0hpd"><!></span></div></div> <div class="card-title svelte-4g0hpd"> </div></div>'),Yu=k('<div class="music-card svelte-4g0hpd"><div class="card-img-container svelte-4g0hpd"><!> <div class="play-overlay svelte-4g0hpd"><span class="overlay-icon svelte-4g0hpd"><!></span></div></div> <div class="card-title svelte-4g0hpd"> </div></div>'),Uu=k('<h2 class="header-label svelte-4g0hpd">Moods & Genres</h2> <div class="music-grid horizontal section-mb svelte-4g0hpd"></div>',1),Hu=k('<div class="music-card svelte-4g0hpd"><div class="card-img-container svelte-4g0hpd"><!></div> <div class="card-title svelte-4g0hpd"> </div></div>'),Vu=k('<h2 class="header-label svelte-4g0hpd">Mixes for You</h2> <div class="music-grid horizontal section-mb svelte-4g0hpd"></div>',1),Wu=k('<div class="content-padded svelte-4g0hpd"><h2 class="header-label svelte-4g0hpd">Library & Vibe</h2> <div class="music-grid horizontal section-mb svelte-4g0hpd"></div> <!> <!></div>'),Qu=k('<div class="music-card svelte-4g0hpd"><div class="card-img-container svelte-4g0hpd"><!></div> <div class="card-title center svelte-4g0hpd"> </div></div>'),Xu=k('<h3 class="header-label svelte-4g0hpd">Artists</h3> <div class="music-grid horizontal section-mb svelte-4g0hpd"></div>',1),Ku=k('<div class="music-card svelte-4g0hpd"><div class="card-img-container svelte-4g0hpd"><!></div> <div class="card-title svelte-4g0hpd"> </div> <div class="card-sub svelte-4g0hpd"> </div></div>'),Gu=k('<h3 class="header-label svelte-4g0hpd">Albums</h3> <div class="music-grid horizontal section-mb svelte-4g0hpd"></div>',1),Zu=k('<div class="content-padded svelte-4g0hpd"><!> <!></div>'),Ju=k('<div slot="fallback" class="icon-fallback svelte-4g0hpd"><!></div>'),ef=k('<div class="header-subtitle-row svelte-4g0hpd"><span class="card-sub svelte-4g0hpd" style="font-size: 13px; line-clamp:2; overflow:hidden;"> </span></div>'),tf=k('<div class="view-header svelte-4g0hpd"><div class="header-art svelte-4g0hpd"><div style="width: 100%; height: 100%;" class="svelte-4g0hpd"><!></div></div> <div class="header-info svelte-4g0hpd"><div class="header-text-group svelte-4g0hpd"><div class="header-label svelte-4g0hpd"> </div> <h1 class="header-title svelte-4g0hpd"> </h1> <!> <div class="meta-badges svelte-4g0hpd"><span class="meta-tag svelte-4g0hpd"> </span> <span class="meta-tag svelte-4g0hpd">Yandex</span></div></div> <div class="header-actions svelte-4g0hpd"><button class="btn-primary svelte-4g0hpd">Play All</button> <button class="btn-secondary svelte-4g0hpd">To Queue</button></div></div></div>'),af=k('<div class="music-card svelte-4g0hpd"><div class="card-img-container svelte-4g0hpd"><!> <div class="play-overlay svelte-4g0hpd"><span class="overlay-icon svelte-4g0hpd"><!></span></div></div> <div class="card-title svelte-4g0hpd"> </div> <div class="card-sub svelte-4g0hpd"> </div></div>'),rf=k('<div class="header-label section-spacing svelte-4g0hpd" style="margin-top: 24px;">Albums</div> <div class="music-grid horizontal section-mb svelte-4g0hpd"></div> <div class="header-label section-spacing svelte-4g0hpd">Popular Tracks</div>',1),sf=k('<div slot="header" class="content-padded svelte-4g0hpd"><!> <!></div>'),nf=k('<div slot="row" class="svelte-4g0hpd"><!></div>'),of=k('<div class="spinner svelte-4g0hpd"></div>'),lf=k('<div slot="footer" class="loading-footer svelte-4g0hpd"><!> <div style="height: 20px; width: 100%;" class="svelte-4g0hpd"></div></div>'),cf=k("<!> <!> <!> <!>",1),df=k('<div class="view-container scrollable relative-parent svelte-4g0hpd"><!></div>');function vf(e,t){$t(t,!1);const a=()=>Ee(Et,"$navigationStack",o),s=()=>Ee(Sr,"$yandexAuthStatus",o),n=()=>Ee(fn,"$yandexSearchTrigger",o),i=()=>Ee(u,"$tracksStore",o),l=()=>Ee(p,"$albumsStore",o),[o,f]=Ft(),d=T(),v=T(),h=T(),u=Qe([]),p=Qe([]);let S=T([]),$=T([]),w=T([]),x=T(!1),K=T(!1),le={uid:null,kind:null,offset:0,type:"playlist"},ce=!0,G=T(),me=T(),H=T(""),I=T("all"),ee=T({tracks:[],albums:[],artists:[]}),Re;function B(E){return!E||E.view==="root"?"dashboard":E.view.startsWith("yandex_")?E.view.replace("yandex_",""):"dashboard"}Qa(()=>{r(h)&&r(S).length===0&&(pe(),O()),setTimeout(()=>{s()&&r(S).length===0&&!r(x)&&pe()},1e3),Y()});function Y(){r(me)&&r(me).disconnect(),_(me,new IntersectionObserver(E=>{E[0].isIntersecting&&!r(x)&&!r(K)&&ce&&["playlist","album_details","artist_details"].includes(r(v))&&V()},{rootMargin:"200px"}))}async function O(){try{const E=await jt.getFavoritesIds();E&&E.ids&&la.set(new Set(E.ids.map(String)))}catch(E){console.error("Sync likes failed",E)}}async function pe(){_(x,!0);try{const E=await jt.getUserPlaylists(),C=await jt.getLanding();_($,C.moods||[]),_(w,C.personal||[]),_(S,[{title:"My Vibe",kind:"my_vibe",cover:null,isStation:!0,description:"Endless flow based on your taste"},...E])}catch{ze("Failed to load dashboard","error")}finally{_(x,!1)}}async function Z(E){if(E.kind==="my_vibe"){ze("Starting My Vibe...","info"),jt.playRadio();return}if(E.kind==="station"){ze(`Starting ${E.title}...`,"info"),jt.playStation(E.id);return}Et.update(C=>[...C,{view:"yandex_playlist",data:E}]),u.set([]),p.set([]),_(x,!0),ce=!0;try{let C=E.uid,W=E.kind;!C&&E.id&&E.id.includes(":")&&([C,W]=E.id.split(":")),le={uid:C,kind:W,offset:0,type:"playlist"},await ke(C,W,0)}catch(C){console.error(C)}finally{_(x,!1)}}async function ke(E,C,W){const re=await jt.getPlaylistTracks(E,C,W);return re&&re.tracks?(W===0?u.set(re.tracks):u.update(Ce=>[...Ce,...re.tracks]),re.tracks.length===0&&(ce=!1),re.tracks.length):(ce=!1,0)}async function V(){if(!(r(K)||!ce)){_(K,!0);try{le.offset+=50,le.type==="playlist"?await ke(le.uid,le.kind,le.offset)===0&&(ce=!1):ce=!1}catch{ce=!1}finally{_(K,!1)}}}async function D(E){Et.update(C=>[...C,{view:"yandex_artist_details",data:E}]),u.set([]),p.set([]),_(x,!0),ce=!1;try{const C=await jt.getArtistDetails(E.id);u.set(C.tracks||[]),p.set(C.albums||[])}catch{ze("Failed to load artist","error")}finally{_(x,!1)}}async function Te(E){Et.update(C=>[...C,{view:"yandex_album_details",data:E}]),u.set([]),p.set([]),_(x,!0),ce=!1;try{const C=await jt.getAlbumDetails(E.id);u.set(C.tracks||[])}catch{ze("Failed to load album","error")}finally{_(x,!1)}}function te(E){_(H,E.target.value),clearTimeout(Re),r(H).length>=2?(r(v)!=="search"&&Et.update(C=>[...C,{view:"yandex_search"}]),Re=setTimeout(de,600)):r(H).length===0&&r(v)==="search"&&window.history.back()}async function de(){if(r(H)){_(x,!0),_(ee,{tracks:[],albums:[],artists:[]}),console.log("[YandexView] Perform search:",r(H));try{const E=await jt.search(r(H));E&&(_(ee,E),(r(I)==="track"||r(I)==="all")&&u.set(E.tracks||[]))}catch(E){console.error("Search error",E)}finally{_(x,!1)}}}function ge(E){_(I,E),r(ee).tracks&&E==="track"&&u.set(r(ee).tracks)}function he(E){const C=E.map(W=>{let re=W.artist;!re&&W.artists&&W.artists.length>0&&(re=W.artists.map(xe=>xe.name).join(", "));let Ce=W.album?.title;!Ce&&W.albums&&W.albums.length>0&&(Ce=W.albums[0].title);let Se=W.image;if(!Se&&(W.coverUri||W.cover)){let Ne=(W.coverUri||W.cover).replace("%%","400x400");!Ne.startsWith("http")&&!Ne.startsWith("//")?Ne="https://"+Ne:Ne.startsWith("//")&&(Ne="https:"+Ne),Se=Ne}return{...W,artist:re||"Unknown Artist",album:Ce||"Unknown Album",title:W.title||"Unknown Title",image:Se,file:W.file,id:W.id}});return console.log(`[YandexView] Caching ${C.length} tracks for playback context...`),Jr.update(W=>{const re={...W.streamCache};return C.forEach(Ce=>{Ce.file&&(re[Ce.file]=Ce),Ce.id&&(re[String(Ce.id)]=Ce)}),{...W,streamCache:re}}),C}async function $e(){const E=i();if(!E.length)return;const C=he(E);ze("Adding tracks to queue...","info"),(await fetch("/wave-yandex-api.php?action=play_playlist",{method:"POST",body:JSON.stringify({tracks:C})})).ok?(ze("Playing...","success"),setTimeout(()=>rs("play"),500)):ze("Failed to play","error")}async function A(){const E=i();if(!E.length)return;const C=he(E);ze(`Adding ${C.length} tracks...`,"info"),(await fetch("/wave-yandex-api.php?action=add_tracks",{method:"POST",body:JSON.stringify({tracks:C})})).ok&&ze("Added to queue","success")}function ne(E){E.deltaY!==0&&(E.currentTarget.scrollLeft+=E.deltaY)}ae(()=>a(),()=>{_(d,a()[a().length-1])}),ae(()=>r(d),()=>{_(v,B(r(d)))}),ae(()=>s(),()=>{_(h,s())}),ae(()=>r(v),()=>{r(v)==="dashboard"&&_(H,"")}),ae(()=>(r(h),r(S),r(x)),()=>{r(h)&&r(S).length===0&&!r(x)&&(pe(),O())}),ae(()=>(n(),r(v),Ha),()=>{if(n()){const E=n();fn.set(null),console.log("[YandexView] Auto-search triggered:",E),_(H,E),r(v)!=="search"&&Et.update(C=>[...C,{view:"yandex_search"}]),Ha().then(()=>{de()})}}),ae(()=>(r(G),r(me)),()=>{r(G)&&r(me)&&r(me).observe(r(G))}),Xt(),Lt();var _e=df(),De=c(_e);{var R=E=>{var C=Nu();b(E,C)},N=E=>{var C=cf(),W=Ie(C);{var re=U=>{var X=Fu(),ue=c(X),Pe=c(ue),ye=c(Pe);se(ye,()=>(j(y),m(()=>y.SEARCH)));var Me=g(Pe,2),Le=g(Me,2);{var Q=J=>{var ve=Du(),je=c(ve);se(je,()=>(j(y),m(()=>y.CLOSE))),M("click",ve,()=>{_(H,""),r(v)==="search"&&window.history.back()}),b(J,ve)};P(Le,J=>{r(H)&&J(Q)})}var F=g(ue,2);{var L=J=>{var ve=Ou(),je=c(ve);let we;var q=g(je,2);let ie;fe(()=>{we=Je(je,1,"svelte-4g0hpd",null,we,{active:r(I)==="all"}),ie=Je(q,1,"svelte-4g0hpd",null,ie,{active:r(I)==="track"})}),M("click",je,()=>ge("all")),M("click",q,()=>ge("track")),b(J,ve)};P(F,J=>{r(v)==="search"&&J(L)})}nr(Me,()=>r(H),J=>_(H,J)),M("input",Me,te),b(U,X)};P(W,U=>{(r(v)==="dashboard"||r(v)==="search")&&U(re)})}var Ce=g(W,2);{var Se=U=>{var X=Wu(),ue=g(c(X),2);yt(ue,5,()=>r(S),Dt,(Q,F)=>{var L=Bu(),J=c(L);let ve;var je=c(J);{var we=We=>{var Ue=qu(),Be=c(Ue);se(Be,()=>(j(y),m(()=>y.RADIO))),b(We,Ue)},q=We=>{Yt(We,{get src(){return r(F),m(()=>r(F).cover)},get alt(){return r(F),m(()=>r(F).title)},radius:"8px"})};P(je,We=>{r(F),m(()=>r(F).kind==="my_vibe")?We(we):We(q,!1)})}var ie=g(je,2),be=c(ie),Fe=c(be);se(Fe,()=>(j(y),m(()=>y.PLAY)));var Oe=g(J,2),qe=c(Oe);fe(()=>{ve=Je(J,1,"card-img-container svelte-4g0hpd",null,ve,{"is-vibe":r(F).kind==="my_vibe"}),oe(qe,(r(F),m(()=>r(F).title)))}),M("click",L,()=>Z(r(F))),b(Q,L)});var Pe=g(ue,2);{var ye=Q=>{var F=Uu(),L=g(Ie(F),2);yt(L,5,()=>r($),Dt,(J,ve)=>{var je=Yu(),we=c(je),q=c(we);Yt(q,{get src(){return r(ve),m(()=>r(ve).cover)},get alt(){return r(ve),m(()=>r(ve).title)},radius:"8px"});var ie=g(q,2),be=c(ie),Fe=c(be);se(Fe,()=>(j(y),m(()=>y.RADIO)));var Oe=g(we,2),qe=c(Oe);fe(()=>{pt(we,`background-color: ${r(ve),m(()=>r(ve).bgColor||"#333")??""}`),oe(qe,(r(ve),m(()=>r(ve).title)))}),M("click",je,()=>Z(r(ve))),b(J,je)}),M("wheel",L,ne),b(Q,F)};P(Pe,Q=>{r($),m(()=>r($).length>0)&&Q(ye)})}var Me=g(Pe,2);{var Le=Q=>{var F=Vu(),L=g(Ie(F),2);yt(L,5,()=>r(w),Dt,(J,ve)=>{var je=Hu(),we=c(je),q=c(we);Yt(q,{get src(){return r(ve),m(()=>r(ve).cover)},get alt(){return r(ve),m(()=>r(ve).title)},radius:"8px"});var ie=g(we,2),be=c(ie);fe(()=>oe(be,(r(ve),m(()=>r(ve).title)))),M("click",je,()=>Z(r(ve))),b(J,je)}),M("wheel",L,ne),b(Q,F)};P(Me,Q=>{r(w),m(()=>r(w).length>0)&&Q(Le)})}M("wheel",ue,ne),vt(1,X,()=>kt),b(U,X)};P(Ce,U=>{r(v)==="dashboard"&&U(Se)})}var xe=g(Ce,2);{var Ne=U=>{var X=Zu(),ue=c(X);{var Pe=Le=>{var Q=Xu(),F=g(Ie(Q),2);yt(F,5,()=>(r(ee),m(()=>r(ee).artists)),Dt,(L,J)=>{var ve=Qu(),je=c(ve),we=c(je);Yt(we,{get src(){return r(J),m(()=>r(J).image)},get alt(){return r(J),m(()=>r(J).title)},radius:"8px"});var q=g(je,2),ie=c(q);fe(()=>oe(ie,(r(J),m(()=>r(J).title)))),M("click",ve,()=>D(r(J))),b(L,ve)}),M("wheel",F,ne),b(Le,Q)};P(ue,Le=>{r(ee),r(I),m(()=>r(ee).artists.length>0&&r(I)==="all")&&Le(Pe)})}var ye=g(ue,2);{var Me=Le=>{var Q=Gu(),F=g(Ie(Q),2);yt(F,5,()=>(r(ee),m(()=>r(ee).albums)),Dt,(L,J)=>{var ve=Ku(),je=c(ve),we=c(je);Yt(we,{get src(){return r(J),m(()=>r(J).image)},get alt(){return r(J),m(()=>r(J).title)},radius:"8px"});var q=g(je,2),ie=c(q),be=g(q,2),Fe=c(be);fe(()=>{oe(ie,(r(J),m(()=>r(J).title))),oe(Fe,(r(J),m(()=>r(J).artist)))}),M("click",ve,()=>Te(r(J))),b(L,ve)}),M("wheel",F,ne),b(Le,Q)};P(ye,Le=>{r(ee),r(I),m(()=>r(ee).albums.length>0&&r(I)==="all")&&Le(Me)})}vt(1,X,()=>kt),b(U,X)};P(xe,U=>{r(v)==="search"&&!r(x)&&U(Ne)})}var He=g(xe,2);{var z=U=>{ds(U,{get itemsStore(){return u},get isLoading(){return r(x)},isEditMode:!1,emptyText:"No tracks found",$$slots:{header:(X,ue)=>{var Pe=sf(),ye=c(Pe);{var Me=F=>{const L=gt(()=>(r(d),m(()=>r(d).data)));var J=tf(),ve=c(J),je=c(ve),we=c(je);{let rt=gt(()=>(j(r(L)),m(()=>r(L).cover||r(L).image)));Yt(we,{get src(){return r(rt)},get alt(){return j(r(L)),m(()=>r(L).title)},radius:"8px",$$slots:{fallback:(it,ut)=>{var ct=Ju(),dt=c(ct);se(dt,()=>(j(y),m(()=>y.ALBUMS))),b(it,ct)}}})}var q=g(ve,2),ie=c(q),be=c(ie),Fe=c(be),Oe=g(be,2),qe=c(Oe),We=g(Oe,2);{var Ue=rt=>{var it=ef(),ut=c(it),ct=c(ut);fe(()=>oe(ct,(j(r(L)),m(()=>r(L).artist||r(L).description)))),b(rt,it)};P(We,rt=>{j(r(L)),m(()=>r(L).description||r(L).artist)&&rt(Ue)})}var Be=g(We,2),tt=c(Be),Ke=c(tt),Ve=g(ie,2),Ze=c(Ve),Ge=g(Ze,2);fe(rt=>{oe(Fe,rt),Ot(Oe,"title",(j(r(L)),m(()=>r(L).title))),oe(qe,(j(r(L)),m(()=>r(L).title||r(L).name))),oe(Ke,`${i(),m(()=>i().length)??""} tracks`)},[()=>(r(v),m(()=>r(v).includes("artist")?"Artist":r(v).includes("album")?"Album":"Playlist"))]),M("click",Ze,$e),M("click",Ge,A),b(F,J)};P(ye,F=>{r(v),r(d),m(()=>r(v)!=="search"&&r(d).data)&&F(Me)})}var Le=g(ye,2);{var Q=F=>{var L=rf(),J=g(Ie(L),2);yt(J,5,l,Dt,(ve,je)=>{var we=af(),q=c(we),ie=c(q);Yt(ie,{get src(){return r(je),m(()=>r(je).image)},get alt(){return r(je),m(()=>r(je).title)},radius:"8px"});var be=g(ie,2),Fe=c(be),Oe=c(Fe);se(Oe,()=>(j(y),m(()=>y.PLAY)));var qe=g(q,2),We=c(qe),Ue=g(qe,2),Be=c(Ue);fe(()=>{oe(We,(r(je),m(()=>r(je).title))),oe(Be,(r(je),m(()=>r(je).year)))}),M("click",we,()=>Te(r(je))),b(ve,we)}),M("wheel",J,ne),b(F,L)};P(Le,F=>{r(v),l(),m(()=>r(v).includes("artist")&&l().length>0)&&F(Q)})}b(X,Pe)},row:(X,ue)=>{var Pe=nf();const ye=gt(()=>ue.item),Me=gt(()=>ue.index);var Le=c(Pe);Pr(Le,{get track(){return r(ye)},get index(){return r(Me)},$$events:{play:()=>jt.playTrack(r(ye).id),artistclick:()=>{}}}),b(X,Pe)},footer:(X,ue)=>{var Pe=lf(),ye=c(Pe);{var Me=Q=>{var F=of();b(Q,F)};P(ye,Q=>{r(K)&&Q(Me)})}var Le=g(ye,2);za(Le,Q=>_(G,Q),()=>r(G)),b(X,Pe)}}})};P(He,U=>{r(v),m(()=>["playlist","search","artist_details","album_details"].includes(r(v)))&&U(z)})}b(E,C)};P(De,E=>{r(h)?E(N,!1):E(R)})}b(e,_e),Mt(),f()}var uf=k('<div class="knob svelte-1jla3sy"></div>'),ff=k('<div class="tooltip current svelte-1jla3sy"> </div> <span></span>',1),hf=k('<div slot="fallback" class="icon-fallback svelte-1jla3sy"><!></div>'),pf=k('<span class="meta-tag quality"> </span>'),gf=k('<div class="dot svelte-1jla3sy"></div>'),_f=k("<button><!> <!></button>"),mf=k('<div class="dock svelte-1jla3sy"><div class="progress-shadow svelte-1jla3sy"></div> <div><div class="rail svelte-1jla3sy"></div> <div class="fill svelte-1jla3sy"><!></div> <!></div> <div class="grid svelte-1jla3sy"><div class="info svelte-1jla3sy"><div class="art svelte-1jla3sy"><!></div> <div class="meta svelte-1jla3sy"><div class="title-row svelte-1jla3sy"><div class="title text-ellipsis svelte-1jla3sy"> </div> <button class="btn-icon tiny-dots svelte-1jla3sy"><!></button></div> <div class="artist-row svelte-1jla3sy"><div class="artist text-ellipsis svelte-1jla3sy"> </div> <!></div></div></div> <div class="controls svelte-1jla3sy"><button><!></button> <button class="btn-icon"><!></button> <button class="play-btn flex-center svelte-1jla3sy"><!></button> <button class="btn-icon"><!></button> <!></div> <div class="volume desktop svelte-1jla3sy"><button class="vol-btn-mini svelte-1jla3sy" title="Mute/Unmute"><!></button> <div class="custom-slider svelte-1jla3sy"><div class="slider-bg svelte-1jla3sy"><div class="slider-fill svelte-1jla3sy"></div> <div class="slider-knob svelte-1jla3sy"></div></div></div></div></div></div>');function bf(e,t){$t(t,!1);const a=()=>Ee(Tt,"$status",f),s=()=>Ee(Qt,"$currentSong",f),n=()=>Ee(la,"$yandexFavorites",f),i=()=>Ee(qa,"$favorites",f),l=()=>Ee(Xa,"$stations",f),o=()=>Ee(Ms,"$isFullPlayerOpen",f),[f,d]=Ft(),v=T(),h=T(),u=T(),p=T(),S=T(),$=T(),w=T(),x=T(),K=T(),le=T(),ce=T(),G=T(),me=T();let H=T(!1),I=T(!1),ee=!1,Re=T(0),B=T(),Y=T();const O=R=>N=>{N.stopPropagation(),R(N)};function pe(R){if(isNaN(R)||R===null)return"0:00";const N=Math.floor(R/60),E=Math.floor(R%60);return`${N}:${E<10?"0":""}${E}`}function Z(R,N){const E=N.getBoundingClientRect();return Math.max(0,Math.min(1,(R.clientX-E.left)/E.width))}function ke(R){r(p)||(_(I,!0),_(Re,Z(R,r(B))),window.addEventListener("mousemove",V),window.addEventListener("mouseup",D))}function V(R){if(r(I)&&_(Re,Z(R,r(B))),ee){const N=Math.round(Z(R,r(Y))*100);Ma(N)}}function D(){r(I)&&!r(p)&&In(r(Re)*r(v)),_(I,!1),ee=!1,window.removeEventListener("mousemove",V),window.removeEventListener("mouseup",D)}let Te=50;function te(R){R.stopPropagation(),a().volume>0?(Te=a().volume,Ma(0)):Ma(Te>0?Te:30)}function de(R){ee=!0;const N=Math.round(Z(R,r(Y))*100);Ma(N),window.addEventListener("mousemove",V),window.addEventListener("mouseup",D)}function ge(){const R=(r(me)+1)%3;R===0?(a().random&&ir(),a().repeat&&or()):R===1?(a().random||ir(),a().repeat&&or()):R===2&&(a().random&&ir(),a().repeat||or())}function he(R){R.stopPropagation(),es(R,s(),{type:"general",source:"miniplayer"})}function $e(R){es(R.detail.originalEvent,s(),{type:"general",source:"miniplayer"})}async function A(R){R&&R.stopPropagation&&R.stopPropagation();const N=s();if(!(!N.file&&!N.id))if(N.isYandex||N.service==="yandex"){const E=n().has(String(N.id));try{E?(la.update(C=>(C.delete(String(N.id)),C)),ze("Removed from Yandex Likes","info")):(la.update(C=>(C.add(String(N.id)),C)),ze("Added to Yandex Likes","success")),await jt.toggleLike(N.id,E)}catch{ze("Error updating like","error")}}else ma.toggleFavorite(N)}ae(()=>a(),()=>{_(v,a().duration>0?a().duration:1)}),ae(()=>a(),()=>{_(h,a().elapsed||0)}),ae(()=>a(),()=>{_(u,a().state==="play")}),ae(()=>s(),()=>{_(p,s().file?.startsWith("http")&&!s().isYandex)}),ae(()=>s(),()=>{_(S,s().title||"Not Playing")}),ae(()=>s(),()=>{_($,s().stationName||s().artist||"Moode")}),ae(()=>(s(),n(),i()),()=>{_(w,s().isYandex||s().service==="yandex"?n().has(String(s().id)):s().file&&i().has(s().file))}),ae(()=>(s(),l()),()=>{_(x,Cr(s(),l(),s().stationName))}),ae(()=>(r(p),r(I),r(Re),r(h),r(v)),()=>{_(K,r(p)?0:r(I)?r(Re)*100:r(h)/r(v)*100)}),ae(()=>(r(u),r(I),r(p)),()=>{_(le,r(u)&&!r(I)&&!r(p))}),ae(()=>a(),()=>{_(ce,a().bitrate?`${a().bitrate} kbps`:a().format||"")}),ae(()=>(a(),y),()=>{_(G,a().volume===0?y.VOLUME_MUTE:a().volume<50?y.VOLUME_MEDIUM:y.VOLUME_FULL)}),ae(()=>a(),()=>{_(me,a().repeat?2:a().random?1:0)}),Xt(),Lt();var ne=st(),_e=Ie(ne);{var De=R=>{var N=mf(),E=c(N),C=g(E,2);let W;var re=g(c(C),2),Ce=c(re);{var Se=Xe=>{var wt=uf();b(Xe,wt)};P(Ce,Xe=>{r(p)||Xe(Se)})}var xe=g(re,2);{var Ne=Xe=>{var wt=ff(),zt=Ie(wt),ja=c(zt);fe(Ae=>{pt(zt,`left: ${r(K)??""}%`),oe(ja,Ae)},[()=>(r(I),r(Re),r(v),r(h),m(()=>r(I)?pe(r(Re)*r(v)):pe(r(h))))]),b(Xe,wt)};P(xe,Xe=>{(r(H)||r(I))&&!r(p)&&Xe(Ne)})}za(C,Xe=>_(B,Xe),()=>r(B));var He=g(C,2),z=c(He),U=c(z),X=c(U);Yt(X,{get src(){return r(x)},alt:"art",radius:"4px",$$slots:{fallback:(Xe,wt)=>{var zt=hf(),ja=c(zt);se(ja,()=>(r(p),j(y),m(()=>r(p)?y.RADIO:y.ALBUMS))),b(Xe,zt)}}});var ue=g(U,2),Pe=c(ue),ye=c(Pe),Me=c(ye),Le=g(ye,2),Q=c(Le);se(Q,()=>(j(y),m(()=>y.DOTS)));var F=g(Pe,2),L=c(F),J=c(L),ve=g(L,2);{var je=Xe=>{var wt=pf(),zt=c(wt);fe(()=>oe(zt,r(ce))),b(Xe,wt)};P(ve,Xe=>{r(ce)&&Xe(je)})}var we=g(z,2),q=c(we),ie=Nr(()=>O(A));let be;var Fe=c(q);se(Fe,()=>(r(w),j(y),m(()=>r(w)?y.HEART_FILLED:y.HEART)));var Oe=g(q,2),qe=Nr(()=>O(()=>ss("previous"))),We=c(Oe);se(We,()=>(j(y),m(()=>y.PREVIOUS)));var Ue=g(Oe,2),Be=Nr(()=>O(Ns)),tt=c(Ue);se(tt,()=>(a(),j(y),m(()=>a().state==="play"?y.PAUSE:y.PLAY)));var Ke=g(Ue,2),Ve=Nr(()=>O(()=>ss("next"))),Ze=c(Ke);se(Ze,()=>(j(y),m(()=>y.NEXT)));var Ge=g(Ke,2);{var rt=Xe=>{var wt=_f(),zt=Nr(()=>O(ge));let ja;var Ae=c(wt);{var et=qt=>{var ka=st(),Ir=Ie(ka);se(Ir,()=>(j(y),m(()=>y.REPEAT))),b(qt,ka)},bt=qt=>{var ka=st(),Ir=Ie(ka);se(Ir,()=>(j(y),m(()=>y.SHUFFLE))),b(qt,ka)};P(Ae,qt=>{r(me)===2?qt(et):qt(bt,!1)})}var ua=g(Ae,2);{var Os=qt=>{var ka=gf();b(qt,ka)};P(ua,qt=>{r(me)>0&&qt(Os)})}fe(()=>ja=Je(wt,1,"btn-icon desktop mode-btn svelte-1jla3sy",null,ja,{active:r(me)>0})),M("click",wt,function(...qt){r(zt)?.apply(this,qt)}),b(Xe,wt)};P(Ge,Xe=>{r(p)||Xe(rt)})}var it=g(we,2),ut=c(it),ct=c(ut);se(ct,()=>r(G));var dt=g(ut,2),ft=c(dt),mt=c(ft),Kt=g(mt,2);za(dt,Xe=>_(Y,Xe),()=>r(Y)),Ut(()=>M("click",N,()=>Ms.set(!0))),Mn(N,(Xe,wt)=>qn?.(Xe,wt),()=>500),Ut(()=>M("longpress",N,$e)),fe(()=>{pt(E,`width: ${r(K)??""}%; transition: ${r(le)?"width 0.25s linear":"none"}`),W=Je(C,1,"progress-bar svelte-1jla3sy",null,W,{radio:r(p)}),pt(re,`width: ${r(K)??""}%; transition: ${r(le)?"width 0.25s linear":"none"}`),Ot(ye,"title",r(S)),oe(Me,r(S)),Ot(L,"title",r($)),oe(J,r($)),be=Je(q,1,"btn-icon desktop svelte-1jla3sy",null,be,{liked:r(w)}),pt(mt,`width: ${a(),m(()=>a().volume)??""}%`),pt(Kt,`left: ${a(),m(()=>a().volume)??""}%`)}),M("mouseenter",C,()=>_(H,!0)),M("mouseleave",C,()=>_(H,!1)),M("mousedown",C,ea(ke)),M("click",C,ea(function(Xe){Zr.call(this,t,Xe)})),M("click",Le,he),M("click",q,function(...Xe){r(ie)?.apply(this,Xe)}),M("click",Oe,function(...Xe){r(qe)?.apply(this,Xe)}),M("click",Ue,function(...Xe){r(Be)?.apply(this,Xe)}),M("click",Ke,function(...Xe){r(Ve)?.apply(this,Xe)}),M("click",ut,te),M("mousedown",dt,ea(de)),M("click",dt,ea(function(Xe){Zr.call(this,t,Xe)})),b(R,N)};P(_e,R=>{o()||R(De)})}b(e,ne),Mt(),d()}var yf=k('<div class="drag-zone svelte-1olwzt8"><div class="drag-handle-icon svelte-1olwzt8"><!></div></div>'),wf=k('<div slot="fallback" class="icon-fallback svelte-1olwzt8"><!></div>'),kf=k('<span class="meta-tag quality"> </span>'),xf=k('<span class="dot svelte-1olwzt8"></span>'),Sf=k("<button><!> <!></button>"),Ef=k('<div style="width: 44px;"></div>'),Tf=k('<div><!> <div class="bg-container svelte-1olwzt8"><div class="bg-gradient-fallback svelte-1olwzt8"></div> <img class="bg-img svelte-1olwzt8" alt="" loading="eager"/> <div class="bg-overlay svelte-1olwzt8"></div></div> <div class="player-body svelte-1olwzt8"><div class="art-container svelte-1olwzt8"><div class="artwork svelte-1olwzt8"><!></div></div> <div class="controls-area svelte-1olwzt8"><div class="meta svelte-1olwzt8"><h1 class="title text-ellipsis svelte-1olwzt8"> </h1> <div class="artist-row svelte-1olwzt8"><h2 class="artist text-ellipsis svelte-1olwzt8"> </h2> <!></div></div> <div class="progress-section"><div><div class="common-track svelte-1olwzt8"><div class="common-fill svelte-1olwzt8"><div class="common-knob svelte-1olwzt8"></div></div></div></div> <div class="time-row svelte-1olwzt8"><span> </span> <span> </span></div></div> <div class="buttons-row svelte-1olwzt8"><button><!></button> <button class="btn-icon side-btn svelte-1olwzt8"><!></button> <button class="play-btn-large flex-center svelte-1olwzt8"><!></button> <button class="btn-icon side-btn svelte-1olwzt8"><!></button> <!></div> <div class="volume-row svelte-1olwzt8"><button class="btn-icon small vol-btn svelte-1olwzt8"><!></button> <div class="volume-hit-area svelte-1olwzt8"><div class="common-track svelte-1olwzt8"><div class="common-fill svelte-1olwzt8"></div> <div class="common-knob svelte-1olwzt8"></div></div></div> <div class="vol-icon-static svelte-1olwzt8"><!></div></div></div></div></div>');function ki(e,t){$t(t,!1);const a=()=>Ee(Qt,"$currentSong",o),s=()=>Ee(Xa,"$stations",o),n=()=>Ee(Tt,"$status",o),i=()=>Ee(la,"$yandexFavorites",o),l=()=>Ee(qa,"$favorites",o),[o,f]=Ft(),d=T(),v=T(),h=T(),u=T(),p=T(),S=T(),$=T(),w=T(),x=T(),K=T(),le=T(),ce=T();let G=xt(t,"isDocked",8,!1),me=0,H=T(0),I=T(!1);function ee(){Ms.set(!1)}function Re(Ae){if(G())return;const et=Ae.target;et.closest(".bar-hit-area")||et.closest(".volume-hit-area")||(me=Ae.touches[0].clientY,_(I,!0))}function B(Ae){if(!r(I)||G())return;const et=Ae.touches[0].clientY-me;et>0&&(Ae.cancelable&&et>10&&Ae.preventDefault(),_(H,et))}function Y(){G()||(_(I,!1),r(H)>150?ee():_(H,0))}let O=T(!1),pe=T(0),Z=T();function ke(Ae){const et=Math.floor(Ae/60)||0,bt=Math.floor(Ae%60)||0;return`${et}:${bt.toString().padStart(2,"0")}`}function V(Ae,et){const bt=et.getBoundingClientRect(),ua=Ae.touches?Ae.touches[0].clientX:Ae.clientX;return Math.max(0,Math.min(1,(ua-bt.left)/bt.width))}function D(Ae){r(u)||(_(O,!0),_(pe,V(Ae,r(Z))))}function Te(Ae){r(O)&&_(pe,V(Ae,r(Z)))}function te(){r(O)&&!r(u)&&In(r(pe)*r(v)),_(O,!1)}let de=!1,ge=T(),he=50;function $e(){n().volume>0?(he=n().volume,Ma(0)):Ma(he>0?he:30)}function A(Ae){de=!0;const et=Math.round(V(Ae,r(ge))*100);Ma(et),window.addEventListener("mousemove",ne),window.addEventListener("mouseup",_e),window.addEventListener("touchmove",ne,{passive:!1}),window.addEventListener("touchend",_e)}function ne(Ae){if(de){Ae.preventDefault();const et=Math.round(V(Ae,r(ge))*100);Ma(et)}}function _e(){de=!1,window.removeEventListener("mousemove",ne),window.removeEventListener("mouseup",_e),window.removeEventListener("touchmove",ne),window.removeEventListener("touchend",_e)}function De(){const Ae=(r(x)+1)%3;Ae===0?(n().random&&ir(),n().repeat&&or()):Ae===1?(n().random||ir(),n().repeat&&or()):Ae===2&&(n().random&&ir(),n().repeat||or())}async function R(){const Ae=a();if(!(!Ae.file&&!Ae.id))if(Ae.isYandex||Ae.service==="yandex"){const et=i().has(String(Ae.id));try{et?(la.update(bt=>(bt.delete(String(Ae.id)),bt)),ze("Removed from Yandex Likes","info")):(la.update(bt=>(bt.add(String(Ae.id)),bt)),ze("Added to Yandex Likes","success")),await jt.toggleLike(Ae.id,et)}catch{ze("Error updating like","error")}}else ma.toggleFavorite(Ae)}ae(()=>(a(),s()),()=>{_(d,Cr(a(),s(),a().stationName))}),ae(()=>n(),()=>{_(v,n().duration||1)}),ae(()=>n(),()=>{_(h,n().elapsed||0)}),ae(()=>a(),()=>{_(u,a().file?.startsWith("http")&&!a().isYandex)}),ae(()=>n(),()=>{_(p,n().state==="play")}),ae(()=>(r(p),r(O),r(u)),()=>{_(S,r(p)&&!r(O)&&!r(u))}),ae(()=>(r(u),r(O),r(pe),r(h),r(v)),()=>{_($,r(u)?0:r(O)?r(pe)*100:r(h)/r(v)*100)}),ae(()=>(n(),y),()=>{_(w,n().volume===0?y.VOLUME_MUTE:n().volume<50?y.VOLUME_MEDIUM:y.VOLUME_FULL)}),ae(()=>n(),()=>{_(x,n().repeat?2:n().random?1:0)}),ae(()=>n(),()=>{_(K,n().bitrate?`${n().bitrate} kbps`:n().format||"")}),ae(()=>(a(),i(),l()),()=>{_(le,a().isYandex||a().service==="yandex"?i().has(String(a().id)):a().file&&l().has(a().file))}),ae(()=>j(G()),()=>{_(ce,G()?"8px":"var(--radius-xl)")}),Xt(),Lt();var N=Tf();let E;var C=c(N);{var W=Ae=>{var et=yf(),bt=c(et),ua=c(bt);se(ua,()=>(j(y),m(()=>y.CHEVRON_DOWN))),M("touchstart",et,Re),M("touchmove",et,B),M("touchend",et,Y),M("click",et,ee),b(Ae,et)};P(C,Ae=>{G()||Ae(W)})}var re=g(C,2),Ce=g(c(re),2),Se=g(re,2),xe=c(Se),Ne=c(xe),He=c(Ne);Yt(He,{get src(){return r(d)},alt:"Cover",get radius(){return r(ce)},$$slots:{fallback:(Ae,et)=>{var bt=wf(),ua=c(bt);se(ua,()=>(r(u),j(y),m(()=>r(u)?y.RADIO:y.ALBUMS))),b(Ae,bt)}}});var z=g(xe,2),U=c(z),X=c(U),ue=c(X),Pe=g(X,2),ye=c(Pe),Me=c(ye),Le=g(ye,2);{var Q=Ae=>{var et=kf(),bt=c(et);fe(()=>oe(bt,r(K))),b(Ae,et)};P(Le,Ae=>{r(K)&&Ae(Q)})}var F=g(U,2),L=c(F);let J;var ve=c(L),je=c(ve);za(L,Ae=>_(Z,Ae),()=>r(Z));var we=g(L,2),q=c(we),ie=c(q),be=g(q,2),Fe=c(be),Oe=g(F,2),qe=c(Oe);let We;var Ue=c(qe);se(Ue,()=>(r(le),j(y),m(()=>r(le)?y.HEART_FILLED:y.HEART)));var Be=g(qe,2),tt=c(Be);se(tt,()=>(j(y),m(()=>y.PREVIOUS)));var Ke=g(Be,2),Ve=c(Ke);se(Ve,()=>(n(),j(y),m(()=>n().state==="play"?y.PAUSE:y.PLAY)));var Ze=g(Ke,2),Ge=c(Ze);se(Ge,()=>(j(y),m(()=>y.NEXT)));var rt=g(Ze,2);{var it=Ae=>{var et=Sf();let bt;var ua=c(et);{var Os=fa=>{var Ka=st(),Fs=Ie(Ka);se(Fs,()=>(j(y),m(()=>y.REPEAT))),b(fa,Ka)},qt=fa=>{var Ka=st(),Fs=Ie(Ka);se(Fs,()=>(j(y),m(()=>y.SHUFFLE))),b(fa,Ka)};P(ua,fa=>{r(x)===2?fa(Os):fa(qt,!1)})}var ka=g(ua,2);{var Ir=fa=>{var Ka=xf();b(fa,Ka)};P(ka,fa=>{r(x)>0&&fa(Ir)})}fe(()=>bt=Je(et,1,"btn-icon side-btn mode-btn svelte-1olwzt8",null,bt,{active:r(x)>0})),M("click",et,De),b(Ae,et)},ut=Ae=>{var et=Ef();b(Ae,et)};P(rt,Ae=>{r(u)?Ae(ut,!1):Ae(it)})}var ct=g(Oe,2),dt=c(ct),ft=c(dt);se(ft,()=>r(w));var mt=g(dt,2),Kt=c(mt),Xe=c(Kt),wt=g(Xe,2);za(mt,Ae=>_(ge,Ae),()=>r(ge));var zt=g(mt,2),ja=c(zt);se(ja,()=>(j(y),m(()=>y.VOLUME_FULL))),fe((Ae,et)=>{E=Je(N,1,"full-player svelte-1olwzt8",null,E,{"is-docked":G()}),pt(N,G()?"":`transform: translateY(${r(H)}px); transition: ${r(I)?"none":"transform 0.3s cubic-bezier(0.2, 0.8, 0.2, 1)"}`),Ot(Ce,"src",r(d)),pt(Ne,`transform: scale(${1-r(H)/3e3})`),pt(z,`opacity: ${1-r(H)/400}`),oe(ue,(a(),m(()=>a().title||"Not Playing"))),oe(Me,(a(),m(()=>a().stationName||a().artist||"Moode Audio"))),J=Je(L,1,"bar-hit-area svelte-1olwzt8",null,J,{"is-docked-bar":G()}),pt(je,`width: ${r($)??""}%; transition: ${r(S)?"width 0.3s linear":"none"}`),oe(ie,Ae),oe(Fe,et),We=Je(qe,1,"btn-icon side-btn svelte-1olwzt8",null,We,{liked:r(le)}),pt(Xe,`width: ${n(),m(()=>n().volume)??""}%`),pt(wt,`left: ${n(),m(()=>n().volume)??""}%; right: auto;`)},[()=>(r(O),r(pe),r(v),r(h),m(()=>r(O)?ke(r(pe)*r(v)):ke(r(h)))),()=>(r(u),r(v),m(()=>r(u)?"LIVE":ke(r(v))))]),M("mousedown",L,D),M("touchstart",L,D,void 0,!0),M("mousemove",L,function(...Ae){(r(O)?Te:null)?.apply(this,Ae)}),M("touchmove",L,function(...Ae){(r(O)?Te:null)?.apply(this,Ae)},void 0,!0),M("mouseup",L,te),M("touchend",L,te),M("click",qe,R),M("click",Be,()=>ss("previous")),M("click",Ke,function(...Ae){Ns?.apply(this,Ae)}),M("click",Ze,()=>ss("next")),M("click",dt,$e),M("mousedown",mt,ea(A)),M("touchstart",mt,ea(A)),vt(3,N,()=>_o,()=>({y:G()?0:800,duration:300,opacity:1})),b(e,N),Mt(),f()}const $f=`<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.0//EN" "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd">
<svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="600px" height="331px" viewBox="0 0 600 331" preserveAspectRatio="xMidYMid meet">
 <g fill="#eb1250">
  <path d="M 315.33 288.42 c -1.03 -0.33 -2.60 -1.34 -3.70 -2.39 -1.08 -1.01 -1.73 -2.81 -2.48 -6.68 -0.38 -1.99 -0.84 -4.29 -1.03 -5.13 -0.21 -0.84 -0.47 -2.20 -0.61 -3.05 -0.14 -0.84 -0.42 -2.34 -0.61 -3.33 -0.45 -2.20 -0.42 -2.04 -0.77 -4.17 -0.16 -0.96 -0.40 -2.16 -0.52 -2.65 -0.14 -0.52 -0.33 -1.45 -0.45 -2.11 -0.12 -0.68 -0.38 -2.02 -0.59 -2.98 -0.21 -0.96 -0.52 -2.55 -0.70 -3.52 -0.16 -0.96 -0.52 -2.81 -0.77 -4.10 -0.26 -1.29 -0.82 -4.08 -1.22 -6.21 -0.80 -4.20 -1.57 -8.13 -2.44 -12.54 -0.33 -1.55 -0.63 -3.23 -0.73 -3.75 -0.07 -0.52 -0.28 -1.57 -0.47 -2.34 -0.16 -0.77 -0.54 -2.63 -0.80 -4.10 -0.28 -1.48 -0.61 -3.12 -0.73 -3.63 -0.12 -0.52 -0.42 -2.20 -0.70 -3.75 -0.28 -1.55 -0.91 -4.92 -1.43 -7.50 -0.49 -2.58 -1.34 -7.01 -1.85 -9.84 -0.54 -2.84 -1.17 -6.26 -1.43 -7.62 -0.26 -1.36 -0.56 -3.07 -0.68 -3.80 -0.12 -0.75 -0.26 -1.43 -0.33 -1.55 -0.26 -0.42 -2.60 -12.89 -3.21 -17.16 -0.12 -0.84 -0.38 -2.16 -0.56 -2.93 -0.16 -0.77 -0.49 -2.34 -0.70 -3.52 -0.21 -1.15 -0.63 -3.26 -0.94 -4.69 -0.30 -1.41 -0.68 -3.30 -0.82 -4.22 -0.16 -0.89 -0.47 -2.58 -0.73 -3.75 -0.68 -3.30 -2.74 -14.16 -3.73 -19.80 -0.28 -1.48 -0.63 -3.38 -0.82 -4.22 -0.38 -1.71 -1.31 -6.70 -1.88 -10.08 -0.40 -2.34 -0.87 -4.71 -1.43 -7.27 -0.16 -0.84 -0.59 -3 -0.91 -4.80 -0.35 -1.80 -0.77 -4.01 -0.96 -4.92 -0.19 -0.89 -0.54 -2.98 -0.80 -4.64 -0.49 -3.26 -0.70 -3.91 -1.10 -3.40 -0.14 0.16 -0.30 0.63 -0.38 1.01 -0.07 0.40 -0.54 2.51 -1.01 4.69 -2.67 12.42 -3.16 14.77 -3.38 16.29 -0.28 1.99 -1.48 7.64 -3.77 18.05 -1.17 5.23 -2.37 10.66 -2.67 12.07 -0.33 1.43 -0.84 4.01 -1.17 5.74 -0.30 1.73 -1.05 5.27 -1.64 7.85 -0.59 2.58 -1.59 7.17 -2.25 10.20 -0.63 3.02 -1.38 5.93 -1.62 6.45 -0.66 1.36 -2.60 3.26 -4.05 3.96 -1.24 0.61 -1.24 0.61 -87.30 0.61 -86.04 0 -86.04 0 -87.33 -0.49 -1.59 -0.59 -3.56 -2.32 -4.41 -3.89 -1.97 -3.63 -0.35 -8.32 3.61 -10.43 1.01 -0.54 1.01 -0.54 83.44 -0.61 82.43 -0.05 82.43 -0.05 82.69 -1.41 0.14 -0.73 0.42 -1.85 0.59 -2.51 0.19 -0.63 0.82 -3.59 1.41 -6.56 0.59 -2.95 1.29 -6.23 1.52 -7.27 0.23 -1.03 0.82 -3.66 1.27 -5.86 0.47 -2.18 1.34 -6.30 1.97 -9.14 0.63 -2.84 1.34 -6.16 1.57 -7.38 0.21 -1.22 0.49 -2.39 0.61 -2.60 0.09 -0.21 0.42 -1.64 0.68 -3.16 0.26 -1.55 0.63 -3.26 0.82 -3.82 0.19 -0.59 0.35 -1.34 0.35 -1.69 0 -0.35 0.21 -1.57 0.49 -2.70 0.26 -1.13 0.59 -2.60 0.68 -3.23 0.21 -1.22 2.16 -10.08 3.05 -13.78 0.26 -1.13 1.05 -4.88 1.76 -8.32 0.70 -3.45 1.55 -7.59 1.88 -9.21 0.33 -1.62 1.08 -5.09 1.64 -7.73 1.62 -7.41 1.73 -7.95 2.13 -9.96 0.91 -4.62 1.92 -9.19 2.18 -9.80 0.14 -0.35 0.82 -1.24 1.48 -1.97 2.58 -2.72 5.84 -3.42 8.88 -1.90 1.97 0.98 3.73 2.74 4.27 4.31 0.42 1.20 1.41 6.42 1.80 9.47 0.09 0.84 0.30 1.83 0.45 2.18 0.14 0.38 0.26 1.10 0.26 1.66 0 0.54 0.16 1.45 0.35 2.04 0.19 0.56 0.56 2.25 0.84 3.73 0.82 4.50 1.78 9.28 2.20 11.13 0.19 0.77 0.45 2.04 0.56 2.81 0.47 2.63 1.92 10.08 2.25 11.60 0.19 0.84 0.45 2.16 0.56 2.93 0.28 1.64 0.63 3.56 1.08 5.86 0.19 0.91 0.49 2.60 0.70 3.75 0.21 1.17 0.54 2.79 0.70 3.63 0.19 0.84 0.77 3.75 1.29 6.45 0.54 2.72 1.17 5.88 1.41 7.03 0.23 1.17 0.66 3.38 0.94 4.92 0.26 1.55 0.70 4.03 0.96 5.51 0.26 1.48 0.73 3.91 1.03 5.39 0.30 1.48 0.68 3.45 0.82 4.34 0.16 0.91 0.47 2.48 0.70 3.52 0.70 3.19 2.23 10.73 2.58 12.89 0.09 0.66 0.47 2.48 0.80 4.10 0.63 3.05 0.70 3.35 1.66 8.77 0.33 1.80 0.82 4.29 1.08 5.51 0.26 1.24 0.56 2.79 0.68 3.42 0.19 1.17 0.89 4.76 1.55 8.09 0.21 0.96 0.63 3.23 0.96 5.04 0.84 4.64 1.41 7.55 1.69 8.91 0.14 0.66 0.35 1.76 0.49 2.46 0.12 0.70 0.38 2.04 0.56 2.93 0.19 0.91 0.61 3.16 0.94 5.04 1.05 5.86 2.48 13.41 2.88 15.12 0.19 0.91 0.42 2.02 0.47 2.46 0.07 0.45 0.33 1.78 0.59 2.93 0.26 1.17 0.56 2.70 0.68 3.40 0.12 0.70 0.30 1.62 0.42 1.99 0.12 0.40 0.35 1.48 0.52 2.41 0.26 1.50 0.35 1.69 0.82 1.69 0.45 0 0.54 -0.16 0.68 -0.98 0.23 -1.66 2.23 -11.86 2.84 -14.60 0.30 -1.41 0.66 -3.09 0.80 -3.75 0.89 -4.57 5.46 -26.60 6.47 -31.17 0.33 -1.41 0.77 -3.59 1.03 -4.80 0.52 -2.51 1.13 -5.44 2.13 -10.08 0.38 -1.73 1.01 -4.69 1.36 -6.56 0.38 -1.88 1.05 -5.13 1.50 -7.27 0.47 -2.13 0.94 -4.38 1.05 -5.04 0.45 -2.30 1.95 -9.63 2.18 -10.48 0.26 -1.01 1.64 -7.38 2.44 -11.32 0.30 -1.55 0.77 -3.87 1.05 -5.16 0.47 -2.34 2.91 -13.57 4.22 -19.57 0.38 -1.73 0.82 -3.89 0.96 -4.80 0.54 -3.26 2.16 -5.65 4.64 -6.91 1.73 -0.87 2.53 -1.01 4.36 -0.82 1.22 0.14 1.83 0.35 2.93 1.08 2.20 1.43 3.40 3.45 4.45 7.55 0.26 1.05 0.70 2.72 0.96 3.68 0.26 0.96 0.63 2.34 0.80 3.05 0.54 2.16 1.29 4.95 1.78 6.56 0.23 0.84 0.70 2.48 1.01 3.63 0.30 1.17 0.98 3.63 1.52 5.51 0.54 1.88 1.24 4.41 1.55 5.63 0.33 1.22 0.80 2.86 1.05 3.63 0.26 0.77 0.47 1.59 0.47 1.80 0 0.23 0.30 1.50 0.68 2.81 0.38 1.34 1.01 3.68 1.43 5.23 0.77 2.81 1.52 5.58 3.26 11.72 0.52 1.80 1.31 4.71 1.76 6.47 0.45 1.76 0.96 3.70 1.17 4.34 0.30 0.98 2.39 8.65 4.29 15.68 1.13 4.24 2.25 8.27 3.05 11.13 1.45 5.13 1.62 5.74 3.21 11.79 0.42 1.59 0.54 1.80 0.96 1.80 0.16 0 0.35 0.12 0.40 0.28 0.05 0.14 0.33 -0.52 0.63 -1.48 0.30 -0.96 1.73 -5.37 3.19 -9.82 1.48 -4.45 3.09 -9.52 3.63 -11.25 0.52 -1.73 1.85 -5.86 2.95 -9.14 1.13 -3.28 2.48 -7.45 3.05 -9.26 1.73 -5.44 2.23 -6.19 5.11 -7.69 1.43 -0.75 1.43 -0.75 69.40 -0.82 67.97 -0.07 67.97 -0.07 69.56 0.47 0.87 0.28 1.57 0.61 1.57 0.70 0 0.12 0.42 0.56 0.94 1.03 0.52 0.47 1.27 1.52 1.64 2.32 0.94 1.97 0.98 4.52 0.14 6.33 -0.73 1.57 -3.26 3.98 -4.52 4.31 -0.70 0.19 -19.31 0.28 -65.27 0.33 -64.29 0.05 -64.29 0.05 -66.82 7.66 -1.38 4.20 -4.97 14.95 -7.97 23.91 -5.58 16.71 -8.34 25.17 -9.89 30.12 -1.38 4.43 -2.34 5.98 -4.66 7.43 -1.15 0.75 -1.29 0.77 -3.66 0.77 -2.11 0 -2.63 -0.07 -3.59 -0.56 -1.20 -0.59 -2.65 -1.92 -3.59 -3.30 -0.47 -0.68 -2.44 -7.15 -4.17 -13.59 -0.19 -0.70 -0.61 -2.23 -0.94 -3.40 -0.33 -1.15 -0.77 -2.74 -0.98 -3.52 -0.19 -0.77 -0.45 -1.71 -0.56 -2.11 -0.12 -0.38 -0.49 -1.76 -0.82 -3.05 -0.35 -1.29 -1.03 -3.77 -1.52 -5.51 -1.90 -6.52 -2.79 -9.75 -2.95 -10.66 -0.07 -0.52 -0.23 -1.10 -0.35 -1.31 -0.12 -0.21 -0.63 -2.02 -1.15 -3.98 -0.94 -3.54 -1.66 -6.23 -3.40 -12.63 -0.47 -1.73 -1.10 -4.03 -1.43 -5.09 -0.30 -1.05 -0.94 -3.33 -1.38 -5.04 -0.45 -1.71 -1.03 -3.91 -1.29 -4.88 -0.28 -0.96 -0.59 -2.18 -0.68 -2.70 -0.12 -0.52 -0.75 -2.88 -1.41 -5.27 -0.66 -2.39 -1.45 -5.39 -1.80 -6.68 -0.33 -1.29 -0.70 -2.60 -0.80 -2.93 -0.30 -0.91 -2.04 -7.52 -2.25 -8.55 -0.16 -0.70 -0.33 -0.94 -0.66 -0.94 -0.40 0 -0.56 0.56 -1.45 4.80 -0.54 2.65 -1.36 6.61 -1.85 8.79 -0.47 2.20 -1.15 5.51 -1.50 7.38 -1.22 6.28 -1.92 9.73 -2.25 11.13 -0.19 0.77 -0.52 2.30 -0.70 3.40 -0.21 1.10 -0.54 2.53 -0.70 3.16 -0.19 0.66 -0.61 2.48 -0.91 4.10 -0.73 3.73 -1.69 8.48 -1.99 9.84 -0.49 2.30 -0.94 4.43 -1.29 6.21 -0.21 1.03 -0.75 3.61 -1.20 5.74 -0.45 2.13 -0.84 4.20 -0.91 4.57 -0.07 0.40 -0.23 1.34 -0.35 2.11 -0.14 0.77 -0.73 3.63 -1.31 6.33 -0.59 2.72 -1.17 5.55 -1.31 6.33 -0.30 1.83 -1.57 8.39 -1.85 9.61 -0.12 0.52 -0.54 2.58 -0.94 4.57 -0.40 1.99 -0.87 4.22 -1.05 4.92 -0.16 0.70 -0.45 2.09 -0.61 3.05 -0.16 0.96 -0.49 2.65 -0.73 3.75 -0.54 2.46 -0.59 2.70 -2.32 11.48 -0.77 3.94 -1.55 7.73 -1.73 8.44 -0.19 0.70 -0.56 2.39 -0.82 3.75 -0.28 1.36 -0.70 3.47 -0.96 4.69 -0.23 1.22 -0.61 3.23 -0.82 4.45 -0.63 3.87 -2.23 6.45 -4.83 7.85 -1.01 0.56 -1.57 0.68 -3.12 0.75 -1.13 0.05 -2.25 -0.07 -2.84 -0.26 z "/>
 </g>
</svg>`;var Mf=k('<div class="backdrop svelte-ji5owg"></div>'),Af=k('<button><span class="icon svelte-ji5owg"><!></span> <span> </span></button>'),Cf=k('<!> <aside><div class="header svelte-ji5owg"><div class="header-inner svelte-ji5owg"><button class="collapse-btn svelte-ji5owg"><div class="chevron svelte-ji5owg"><!></div></button> <div><div class="logo svelte-ji5owg"><!></div></div></div> <button class="btn-icon mobile-close svelte-ji5owg"><!></button></div> <div class="scroll-area custom-scrollbar svelte-ji5owg"><nav class="svelte-ji5owg"><!> <button title="Search"><span class="icon svelte-ji5owg"><!></span> <span>Search</span></button> <div class="sep svelte-ji5owg"></div> <button class="nav-item sync svelte-ji5owg" title="Update Library"><span><!></span> <span> </span></button> <div class="sep svelte-ji5owg"></div> <button title="Settings"><span class="icon svelte-ji5owg"><!></span> <span>Settings</span></button></nav> <div class="footer svelte-ji5owg"><div>Moode WaveUI</div></div></div></aside>',1);function Pf(e,t){$t(t,!1);const a=()=>Ee(as,"$isYandexEnabled",l),s=()=>Ee(oa,"$isSyncingLibrary",l),n=()=>Ee(un,"$isSidebarCollapsed",l),i=()=>Ee(It,"$activeMenuTab",l),[l,o]=Ft(),f=T(),d=T();let v=xt(t,"isOpen",8,!1);const h=Pn();let u=T(0),p=T(0),S=T(!1);const $=[{id:"queue",label:"Queue",icon:y.MENU},{id:"favorites",label:"Favorites",icon:y.HEART},{id:"artists",label:"Artists",icon:y.ARTISTS},{id:"albums",label:"Albums",icon:y.ALBUMS},{id:"playlists",label:"Playlists",icon:y.PLAYLISTS},{id:"radio",label:"Radio",icon:y.RADIO},{id:"yandex",label:"Yandex Music",icon:y.YANDEX}];function w(Q){window.location.hash=`/${Q}`,h("close")}async function x(){s()||(await Ta.syncLibrary(),window.location.hash="/artists")}function K(){un.update(Q=>!Q)}function le(Q){v()&&(_(u,Q.touches[0].clientX),_(p,r(u)),_(S,!0))}function ce(Q){r(S)&&_(p,Q.touches[0].clientX)}function G(){r(S)&&(r(p)-r(u)<-70&&h("close"),_(S,!1),_(u,0),_(p,0))}ae(()=>a(),()=>{_(f,$.filter(Q=>Q.id==="yandex"?a():!0))}),ae(()=>(r(S),r(p),r(u)),()=>{_(d,r(S)?Math.min(0,r(p)-r(u)):0)}),Xt(),Lt();var me=Cf(),H=Ie(me);{var I=Q=>{var F=Mf();M("click",F,()=>h("close")),vt(3,F,()=>kt,()=>({duration:200})),b(Q,F)};P(H,Q=>{v()&&Q(I)})}var ee=g(H,2);let Re,B;var Y=c(ee),O=c(Y),pe=c(O),Z=c(pe),ke=c(Z);se(ke,()=>(j(y),m(()=>y.BACK)));var V=g(pe,2);let D;var Te=c(V),te=c(Te);se(te,()=>$f);var de=g(O,2),ge=c(de);se(ge,()=>(j(y),m(()=>y.CLOSE)));var he=g(Y,2),$e=c(he),A=c($e);yt(A,1,()=>r(f),Q=>Q.id,(Q,F)=>{var L=Af();let J;var ve=c(L),je=c(ve);se(je,()=>(r(F),m(()=>r(F).icon)));var we=g(ve,2);let q;var ie=c(we);fe(()=>{J=Je(L,1,"nav-item svelte-ji5owg",null,J,{active:i()===r(F).id}),Ot(L,"title",(r(F),m(()=>r(F).label))),q=Je(we,1,"label-text svelte-ji5owg",null,q,{hidden:n()}),oe(ie,(r(F),m(()=>r(F).label)))}),M("click",L,()=>w(r(F).id)),b(Q,L)});var ne=g(A,2);let _e;var De=c(ne),R=c(De);se(R,()=>(j(y),m(()=>y.SEARCH)));var N=g(De,2);let E;var C=g(ne,4),W=c(C);let re;var Ce=c(W);se(Ce,()=>(j(y),m(()=>y.SYNC)));var Se=g(W,2);let xe;var Ne=c(Se),He=g(C,4);let z;var U=c(He),X=c(U);se(X,()=>(j(y),m(()=>y.SETTINGS)));var ue=g(U,2);let Pe;var ye=g($e,2),Me=c(ye);let Le;fe(()=>{Re=Je(ee,1,"side-menu svelte-ji5owg",null,Re,{"mobile-open":v(),collapsed:n()}),B=pt(ee,"",B,{transform:v()?`translateX(${r(d)}px)`:"",transition:r(S)?"none":"width 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.3s ease"}),Ot(pe,"title",n()?"Expand":"Collapse"),pt(Z,`transform: rotate(${n()?"180deg":"0deg"})`),D=Je(V,1,"logo-wrapper svelte-ji5owg",null,D,{hidden:n()}),_e=Je(ne,1,"nav-item svelte-ji5owg",null,_e,{active:i()==="search"}),E=Je(N,1,"label-text svelte-ji5owg",null,E,{hidden:n()}),C.disabled=s(),re=Je(W,1,"icon svelte-ji5owg",null,re,{spin:s()}),xe=Je(Se,1,"label-text svelte-ji5owg",null,xe,{hidden:n()}),oe(Ne,s()?"Syncing...":"Update Library"),z=Je(He,1,"nav-item svelte-ji5owg",null,z,{active:i()==="settings"}),Pe=Je(ue,1,"label-text svelte-ji5owg",null,Pe,{hidden:n()}),Le=Je(Me,1,"footer-text svelte-ji5owg",null,Le,{hidden:n()})}),M("click",pe,K),M("click",de,()=>h("close")),M("click",ne,()=>w("search")),M("click",C,x),M("click",He,()=>w("settings")),M("touchstart",ee,le),M("touchmove",ee,ce),M("touchend",ee,G),b(e,me),Mt(),o()}var Lf=k('<div class="toast-container svelte-k2bvk7"><div> </div></div>'),zf=k('<button class="back-btn svelte-k2bvk7"><span class="icon-inline svelte-k2bvk7"><!></span> Back</button>'),Rf=k('<div class="view-title svelte-k2bvk7"><!></div>'),jf=k('<div class="full-player-modal svelte-k2bvk7"><!></div>'),If=k('<div class="app-container svelte-k2bvk7"><div class="app-layout svelte-k2bvk7"><!> <!> <main class="content-area svelte-k2bvk7"><header class="top-bar svelte-k2bvk7"><button class="hamburger-btn svelte-k2bvk7"><!></button> <!></header> <div class="scroll-container svelte-k2bvk7"><div class="view-wrapper svelte-k2bvk7"><!></div></div></main> <div class="docked-player-container svelte-k2bvk7"><!></div></div> <div class="mini-player-wrapper svelte-k2bvk7"><!></div></div> <!>',1);function Nf(e,t){$t(t,!1);const a=()=>Ee(Et,"$navigationStack",l),s=()=>Ee(cn,"$toastMessage",l),n=()=>Ee(It,"$activeMenuTab",l),i=()=>Ee(Ms,"$isFullPlayerOpen",l),[l,o]=Ft();let f=T(!1);Qa(()=>{window.history.replaceState({depth:a().length},"","");const V=()=>void 0;return window.addEventListener("popstate",V),()=>window.removeEventListener("popstate",V)}),Lt();var d=If(),v=Ie(d),h=c(v),u=c(h);{var p=V=>{var D=Lf(),Te=c(D),te=c(Te);fe(()=>{Je(Te,1,`toast-body ${s().type??""}`,"svelte-k2bvk7"),oe(te,s().text)}),vt(3,D,()=>_o,()=>({y:-50,duration:300})),b(V,D)};P(u,V=>{s()&&V(p)})}var S=g(u,2);Pf(S,{get isOpen(){return r(f)},$$events:{close:()=>_(f,!1)}});var $=g(S,2),w=c($),x=c(w),K=c(x);se(K,()=>y.MENU);var le=g(x,2);{var ce=V=>{var D=zf(),Te=c(D),te=c(Te);se(te,()=>y.BACK),M("click",D,function(...de){ld?.apply(this,de)}),b(V,D)},G=V=>{var D=Rf(),Te=c(D);{var te=ge=>{var he=Na("Radio");b(ge,he)},de=ge=>{var he=st(),$e=Ie(he);{var A=_e=>{var De=Na("Playlists");b(_e,De)},ne=_e=>{var De=st(),R=Ie(De);{var N=C=>{var W=Na("Search");b(C,W)},E=C=>{var W=st(),re=Ie(W);{var Ce=xe=>{var Ne=Na("Yandex Music");b(xe,Ne)},Se=xe=>{var Ne=st(),He=Ie(Ne);{var z=X=>{var ue=Na("Queue");b(X,ue)},U=X=>{var ue=st(),Pe=Ie(ue);{var ye=Le=>{var Q=Na("Favorites");b(Le,Q)},Me=Le=>{var Q=st(),F=Ie(Q);{var L=ve=>{var je=Na("Settings");b(ve,je)},J=ve=>{var je=Na();fe(we=>oe(je,we),[()=>(n()||"Library").charAt(0).toUpperCase()+(n()||"library").slice(1)]),b(ve,je)};P(F,ve=>{n()==="settings"?ve(L):ve(J,!1)},!0)}b(Le,Q)};P(Pe,Le=>{n()==="favorites"?Le(ye):Le(Me,!1)},!0)}b(X,ue)};P(He,X=>{n()==="queue"?X(z):X(U,!1)},!0)}b(xe,Ne)};P(re,xe=>{n()==="yandex"?xe(Ce):xe(Se,!1)},!0)}b(C,W)};P(R,C=>{n()==="search"?C(N):C(E,!1)},!0)}b(_e,De)};P($e,_e=>{n()==="playlists"?_e(A):_e(ne,!1)},!0)}b(ge,he)};P(Te,ge=>{n()==="radio"?ge(te):ge(de,!1)})}b(V,D)};P(le,V=>{a().length>1?V(ce):V(G,!1)})}var me=g(w,2),H=c(me),I=c(H);{var ee=V=>{Ov(V,{})},Re=V=>{var D=st(),Te=Ie(D);{var te=ge=>{vf(ge,{})},de=ge=>{var he=st(),$e=Ie(he);{var A=_e=>{Iu(_e,{})},ne=_e=>{var De=st(),R=Ie(De);{var N=C=>{cu(C,{})},E=C=>{var W=st(),re=Ie(W);{var Ce=xe=>{Su(xe,{})},Se=xe=>{var Ne=st(),He=Ie(Ne);{var z=X=>{Pu(X,{})},U=X=>{Tv(X,{get activeCategory(){return n()}})};P(He,X=>{n()==="settings"?X(z):X(U,!1)},!0)}b(xe,Ne)};P(re,xe=>{n()==="search"?xe(Ce):xe(Se,!1)},!0)}b(C,W)};P(R,C=>{n()==="playlists"||n()==="favorites"?C(N):C(E,!1)},!0)}b(_e,De)};P($e,_e=>{n()==="queue"?_e(A):_e(ne,!1)},!0)}b(ge,he)};P(Te,ge=>{n()==="yandex"?ge(te):ge(de,!1)},!0)}b(V,D)};P(I,V=>{n()==="radio"?V(ee):V(Re,!1)})}var B=g($,2),Y=c(B);ki(Y,{isDocked:!0});var O=g(h,2),pe=c(O);bf(pe,{});var Z=g(v,2);{var ke=V=>{var D=jf(),Te=c(D);ki(Te,{}),b(V,D)};P(Z,V=>{i()&&V(ke)})}fe(()=>pt(me,`padding-bottom: ${i()?"0px":"var(--mini-player-height)"};`)),M("click",x,()=>_(f,!0)),b(e,d),Mt(),o()}var Df=k('<button class="back-btn-area svelte-l8h85k"><span class="back-icon svelte-l8h85k"><!></span></button> <span class="header-title svelte-l8h85k">Select Playlist</span>',1),Of=k('<div class="track-info svelte-l8h85k"><div class="title text-ellipsis svelte-l8h85k"> </div> <div class="artist text-ellipsis svelte-l8h85k">Playlist</div></div>'),Ff=k('<div class="track-info svelte-l8h85k"><div class="title text-ellipsis svelte-l8h85k"> </div> <div class="artist text-ellipsis svelte-l8h85k"> </div></div>'),qf=k('<button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span> </span></button>'),Bf=k('<div class="empty-msg svelte-l8h85k">No custom playlists</div>'),Yf=k("<!> <!>",1),Uf=k('<button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Play Now</span></button> <div class="sep svelte-l8h85k"></div> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Rename</span></button> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Delete Playlist</span></button>',1),Hf=k('<div class="sep svelte-l8h85k"></div> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Vibe by Track</span></button>',1),Vf=k('<button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Go to Album</span></button> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Go to Artist</span></button>',1),Wf=k('<div class="sep svelte-l8h85k"></div> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Remove from Playlist</span></button>',1),Qf=k('<div class="sep svelte-l8h85k"></div> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Remove from Queue</span></button>',1),Xf=k('<button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Play Next</span></button> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Add to Queue</span></button> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Add to Playlist...</span></button> <!> <!> <button class="menu-row svelte-l8h85k"><span><!></span> <span> </span></button> <!> <!>',1),Kf=k('<div class="backdrop svelte-l8h85k"><div class="menu-card svelte-l8h85k"><div class="menu-header svelte-l8h85k"><!></div> <div class="menu-items scroll-y svelte-l8h85k"><!></div></div></div>');function Gf(e,t){$t(t,!1);const a=()=>Ee(zn,"$contextMenu",i),s=()=>Ee(qa,"$favorites",i),n=()=>Ee(Is,"$playlists",i),[i,l]=Ft(),o=T(),f=T(),d=T(),v=T(),h=T(),u=T(),p=T(),S=T();let $=T(),w=T(),x=T(),K=T(0),le=T(0),ce=T("main"),G=T(!1);function me(A){a().isOpen&&(_(G,!1),Bt())}function H(){Bt()}function I(){a().track&&ca.playNext(a().track.file),Bt()}function ee(){a().track&&ca.addToQueue(a().track.file),Bt()}function Re(){a().track&&ma.toggleFavorite(a().track),Bt()}function B(){const A=a().track;A&&A.album&&(A.isYandex||Wa("tracks_by_album",{name:A.album,artist:A.artist})),Bt()}function Y(){const A=a().track;A&&A.artist&&(A.isYandex||Wa("albums_by_artist",{name:A.artist})),Bt()}async function O(){const{playlistName:A,index:ne}=a().context;A&&ne!==null&&(Vr.update(_e=>{const De=[..._e];return De.splice(ne,1),De}),await ma.removeFromPlaylist(A,ne)),Bt()}function pe(){const{index:A}=a().context;A!=null&&ca.removeFromQueue(A),Bt()}function Z(){const A=a().context.playlist;A&&Ye.send("stop").then(()=>Ye.send("clear")).then(()=>Ye.send(`load "${A.name.replace(/"/g,'\\"')}"`)).then(()=>Ye.send("play 0")),Bt()}function ke(){const A=a().context.playlist;A&&(Bt(),_a({title:"Rename Playlist",message:`Enter new name for "${A.name}":`,type:"prompt",placeholder:A.name,inputValue:A.name,confirmLabel:"Rename",onConfirm:ne=>{ne&&ne!==A.name&&ma.renamePlaylist(A.name,ne)}}))}function V(){const A=a().context.playlist;A&&(Bt(),_a({title:"Delete Playlist",message:`Are you sure you want to delete "${A.name}"? This cannot be undone.`,type:"confirm",confirmLabel:"Delete",onConfirm:()=>{ma.deletePlaylist(A.name)}}))}async function D(){const A=a().track;if(A&&A.isYandex&&A.id){ze(`Starting radio based on "${A.title}"...`,"info");try{await jt.playRadio(A.id)}catch(ne){console.error(ne),ze("Error starting radio","error")}}Bt()}function Te(){_(ce,"playlists")}function te(){_(ce,"main")}async function de(A){const ne=a().track;if(ne)try{const _e=A.replace(/"/g,'\\"'),De=ne.file.replace(/"/g,'\\"');await Ye.send(`playlistadd "${_e}" "${De}"`),ze(`Added to "${A}"`,"success"),Bt()}catch(_e){console.error(_e),ze("Failed to add","error")}}ae(()=>a(),()=>{a().isOpen&&_(ce,"main")}),ae(()=>(a(),r(G)),()=>{a().isOpen?!r(G)&&typeof history<"u"&&(history.pushState({contextMenuOpen:!0},""),_(G,!0)):r(G)&&typeof history<"u"&&(history.back(),_(G,!1))}),ae(()=>(a(),s()),()=>{_(o,a().track&&s().has(a().track.file))}),ae(()=>a(),()=>{_(f,a().track&&(String(a().track.file).includes("http")||String(a().track.file).includes("://")))}),ae(()=>a(),()=>{_(d,a().track&&(a().track.isYandex||a().track.service==="yandex"))}),ae(()=>a(),()=>{_(v,a().context?.type==="playlist")}),ae(()=>a(),()=>{_(h,a().context?.type==="queue")}),ae(()=>a(),()=>{_(u,a().context?.type==="playlist-card")}),ae(()=>a(),()=>{_(p,a().context?.source==="miniplayer")}),ae(()=>(a(),r(le),r(K),r($),r(p),r(w)),()=>{_(S,(()=>{if(!a().isOpen)return"";const A=a().triggerRect,ne=a().x,_e=a().y,De=r(le)||220,R=r(K)||320;if(r($)<=768&&r(p)&&A)return`
        position: fixed; 
        bottom: ${r(w)-A.top}px; 
        left: 50%; 
        transform: translateX(-50%); 
        margin: 0; 
        transform-origin: bottom center;
      `;let N=0,E=0,C="top left";if(A){const re=A.left+A.width/2,Ce=A.top+A.height/2,Se=re>r($)/2,xe=Ce>r(w)/2;Se?(N=A.right-De,C=xe?"bottom right":"top right"):(N=A.left,C=xe?"bottom left":"top left"),xe?E=A.top-R:E=A.bottom}else N=ne,E=_e,N+De>r($)&&(N=r($)-De-10),E+R>r(w)&&(E=r(w)-R-10);const W=8;return N<W&&(N=W),N+De>r($)-W&&(N=r($)-De-W),E<W&&(E=W),E+R>r(w)-W&&(E=r(w)-R-W),`position: fixed; top: ${E}px; left: ${N}px; margin: 0; transform-origin: ${C};`})())}),Xt(),Lt();var ge=st();M("popstate",Oa,me);var he=Ie(ge);{var $e=A=>{var ne=Kf(),_e=c(ne),De=c(_e),R=c(De);{var N=Se=>{var xe=Df(),Ne=Ie(xe),He=c(Ne),z=c(He);se(z,()=>(j(y),m(()=>y.BACK))),M("click",Ne,te),b(Se,xe)},E=Se=>{var xe=st(),Ne=Ie(xe);{var He=U=>{var X=Of(),ue=c(X),Pe=c(ue);fe(()=>oe(Pe,(a(),m(()=>a().context.playlist.name)))),b(U,X)},z=U=>{var X=Ff(),ue=c(X),Pe=c(ue),ye=g(ue,2),Me=c(ye);fe(()=>{oe(Pe,(a(),m(()=>a().track.title))),oe(Me,(a(),m(()=>a().track.artist)))}),b(U,X)};P(Ne,U=>{r(u)?U(He):U(z,!1)},!0)}b(Se,xe)};P(R,Se=>{r(ce)==="playlists"?Se(N):Se(E,!1)})}var C=g(De,2),W=c(C);{var re=Se=>{var xe=Yf(),Ne=Ie(xe);yt(Ne,1,n,Dt,(U,X)=>{var ue=st(),Pe=Ie(ue);{var ye=Me=>{var Le=qf(),Q=c(Le),F=c(Q);se(F,()=>(j(y),m(()=>y.PLAYLISTS)));var L=g(Q,2),J=c(L);fe(()=>oe(J,(r(X),m(()=>r(X).name)))),M("click",Le,()=>de(r(X).name)),b(Me,Le)};P(Pe,Me=>{r(X),m(()=>r(X).name!=="Favorites")&&Me(ye)})}b(U,ue)});var He=g(Ne,2);{var z=U=>{var X=Bf();b(U,X)};P(He,U=>{n(),m(()=>n().filter(X=>X.name!=="Favorites").length===0)&&U(z)})}b(Se,xe)},Ce=Se=>{var xe=st(),Ne=Ie(xe);{var He=U=>{var X=Uf(),ue=Ie(X),Pe=c(ue),ye=c(Pe);se(ye,()=>(j(y),m(()=>y.PLAY)));var Me=g(ue,4),Le=c(Me),Q=c(Le);se(Q,()=>(j(y),m(()=>y.EDIT)));var F=g(Me,2),L=c(F),J=c(L);se(J,()=>(j(y),m(()=>y.REMOVE))),M("click",ue,Z),M("click",Me,ke),M("click",F,V),b(U,X)},z=U=>{var X=Xf(),ue=Ie(X),Pe=c(ue),ye=c(Pe);se(ye,()=>(j(y),m(()=>y.NEXT)));var Me=g(ue,2),Le=c(Me),Q=c(Le);se(Q,()=>(j(y),m(()=>y.MENU)));var F=g(Me,2),L=c(F),J=c(L);se(J,()=>(j(y),m(()=>y.ADD_TO_PLAYLIST||y.ADD)));var ve=g(F,2);{var je=Ve=>{var Ze=Hf(),Ge=g(Ie(Ze),2),rt=c(Ge),it=c(rt);se(it,()=>(j(y),m(()=>y.RADIO))),M("click",Ge,D),b(Ve,Ze)};P(ve,Ve=>{r(d)&&Ve(je)})}var we=g(ve,2);{var q=Ve=>{var Ze=Vf(),Ge=Ie(Ze),rt=c(Ge),it=c(rt);se(it,()=>(j(y),m(()=>y.ALBUM_LINK||y.ALBUMS)));var ut=g(Ge,2),ct=c(ut),dt=c(ct);se(dt,()=>(j(y),m(()=>y.ARTIST_LINK||y.ARTISTS))),M("click",Ge,B),M("click",ut,Y),b(Ve,Ze)};P(we,Ve=>{!r(f)&&!r(d)&&Ve(q)})}var ie=g(we,2),be=c(ie);let Fe;var Oe=c(be);se(Oe,()=>(r(o),j(y),m(()=>r(o)?y.HEART_FILLED:y.HEART)));var qe=g(be,2),We=c(qe),Ue=g(ie,2);{var Be=Ve=>{var Ze=Wf(),Ge=g(Ie(Ze),2),rt=c(Ge),it=c(rt);se(it,()=>(j(y),m(()=>y.REMOVE))),M("click",Ge,O),b(Ve,Ze)};P(Ue,Ve=>{r(v)&&Ve(Be)})}var tt=g(Ue,2);{var Ke=Ve=>{var Ze=Qf(),Ge=g(Ie(Ze),2),rt=c(Ge),it=c(rt);se(it,()=>(j(y),m(()=>y.REMOVE))),M("click",Ge,pe),b(Ve,Ze)};P(tt,Ve=>{r(h)&&Ve(Ke)})}fe(()=>{Fe=Je(be,1,"icon svelte-l8h85k",null,Fe,{liked:r(o)}),oe(We,r(o)?"Unlike":"Like")}),M("click",ue,I),M("click",Me,ee),M("click",F,Te),M("click",ie,Re),b(U,X)};P(Ne,U=>{r(u)?U(He):U(z,!1)},!0)}b(Se,xe)};P(W,Se=>{r(ce)==="playlists"?Se(re):Se(Ce,!1)})}za(_e,Se=>_(x,Se),()=>r(x)),fe(()=>pt(_e,r(S))),ai(_e,"clientHeight",Se=>_(K,Se)),ai(_e,"clientWidth",Se=>_(le,Se)),vt(3,_e,()=>Ln,()=>({start:.95,duration:100})),M("click",_e,ea(function(Se){Zr.call(this,t,Se)})),M("click",ne,H),vt(3,ne,()=>kt,()=>({duration:100})),b(A,ne)};P(he,A=>{a(),m(()=>a().isOpen)&&A($e)})}si("innerWidth",A=>_($,A)),si("innerHeight",A=>_(w,A)),b(e,ge),Mt(),l()}var Zf=k('<p class="modal-message svelte-1bxxaoh"> </p>'),Jf=k('<div class="input-wrapper svelte-1bxxaoh"><input type="text" autoFocus/></div>'),e0=k('<span class="check svelte-1bxxaoh">â</span>'),t0=k("<button> <!></button>"),a0=k('<div class="select-list svelte-1bxxaoh"></div>'),r0=k('<button class="btn cancel svelte-1bxxaoh"> </button>'),s0=k('<div class="modal-actions svelte-1bxxaoh"><!> <button class="btn confirm svelte-1bxxaoh"> </button></div>'),n0=k('<div class="backdrop svelte-1bxxaoh"><div class="modal-card svelte-1bxxaoh"><div class="modal-header svelte-1bxxaoh"><span class="modal-title svelte-1bxxaoh"> </span></div> <div class="modal-body svelte-1bxxaoh"><!> <!></div> <!></div></div>');function i0(e,t){$t(t,!1);const a=()=>Ee($s,"$modal",s),[s,n]=Ft();let i=T(!1),l=T();function o(){if(a().type==="prompt"){const $=a().inputValue?a().inputValue.trim():"";if($.length===0){d();return}a().onConfirm&&a().onConfirm($)}else a().onConfirm&&a().onConfirm();ps()}function f($){a().onConfirm&&a().onConfirm($),ps()}function d(){_(i,!0),r(l)&&r(l).focus(),setTimeout(()=>{_(i,!1)},400)}function v(){ps()}function h($){$.key==="Enter"&&a().type!=="select"&&o(),r(i)&&_(i,!1)}ae(()=>a(),()=>{a().isOpen||_(i,!1)}),Xt(),Lt();var u=st(),p=Ie(u);{var S=$=>{var w=n0(),x=c(w),K=c(x),le=c(K),ce=c(le),G=g(K,2),me=c(G);{var H=O=>{var pe=Zf(),Z=c(pe);fe(()=>oe(Z,(a(),m(()=>a().message)))),b(O,pe)};P(me,O=>{a(),m(()=>a().message)&&O(H)})}var I=g(me,2);{var ee=O=>{var pe=Jf(),Z=c(pe);let ke;za(Z,V=>_(l,V),()=>r(l)),fe(()=>{ke=Je(Z,1,"modal-input svelte-1bxxaoh",null,ke,{"shake-error":r(i)}),Ot(Z,"placeholder",(a(),m(()=>a().placeholder)))}),nr(Z,()=>a().inputValue,V=>cc($s,m(a).inputValue=V,m(a))),M("keydown",Z,h),b(O,pe)},Re=O=>{var pe=st(),Z=Ie(pe);{var ke=V=>{var D=a0();yt(D,5,()=>(a(),m(()=>a().options)),Dt,(Te,te)=>{var de=t0();let ge;var he=c(de),$e=g(he);{var A=ne=>{var _e=e0();b(ne,_e)};P($e,ne=>{r(te),a(),m(()=>r(te).value===a().inputValue)&&ne(A)})}fe(()=>{ge=Je(de,1,"select-item svelte-1bxxaoh",null,ge,{active:r(te).value===a().inputValue}),oe(he,`${r(te),m(()=>r(te).label)??""} `)}),M("click",de,()=>f(r(te).value)),b(Te,de)}),b(V,D)};P(Z,V=>{a(),m(()=>a().type==="select")&&V(ke)},!0)}b(O,pe)};P(I,O=>{a(),m(()=>a().type==="prompt")?O(ee):O(Re,!1)})}var B=g(G,2);{var Y=O=>{var pe=s0(),Z=c(pe);{var ke=Te=>{var te=r0(),de=c(te);fe(()=>oe(de,(a(),m(()=>a().cancelLabel)))),M("click",te,function(...ge){ps?.apply(this,ge)}),b(Te,te)};P(Z,Te=>{a(),m(()=>a().type==="confirm"||a().type==="prompt")&&Te(ke)})}var V=g(Z,2),D=c(V);fe(()=>oe(D,(a(),m(()=>a().confirmLabel)))),M("click",V,o),b(O,pe)};P(B,O=>{a(),m(()=>a().type!=="select")&&O(Y)})}fe(()=>oe(ce,(a(),m(()=>a().title)))),vt(3,x,()=>Ln,()=>({start:.95,duration:200})),M("click",x,ea(function(O){Zr.call(this,t,O)})),M("click",w,v),vt(3,w,()=>kt,()=>({duration:150})),b($,w)};P(p,$=>{a(),m(()=>a().isOpen)&&$(S)})}b(e,u),Mt(),n()}const xi={init(){this.handleHashChange(),window.addEventListener("hashchange",()=>this.handleHashChange())},handleHashChange(){let e=window.location.hash.slice(1);for(;e.startsWith("/");)e=e.slice(1);if(!e){(at(Et).length>1||at(It)==="search")&&(this.setRootTab("artists"),window.location.hash="/artists");return}const t=e.split("/").map(decodeURIComponent),a=t[0];let s=od();switch(s||t.length>1&&(a==="album"&&t.length>=3?s={artist:t[1],name:t[2]}:a==="artist"&&t.length>=2?s={name:t[1]}:s={name:t[1],displayName:t[1]}),console.log(`[Router] Navigating: ${a}`,s),a){case"queue":this.setRootTab("queue");break;case"radio":this.setRootTab("radio");break;case"playlists":this.setRootTab("playlists");break;case"settings":this.setRootTab("settings");break;case"favorites":It.set("favorites"),Et.set([{view:"root"},{view:"details",data:{name:"Favorites"}}]);break;case"artists":this.setRootTab("artists");break;case"albums":this.setRootTab("albums");break;case"search":It.set("search"),t[1]&&Wr.set(t[1]),Et.set([{view:"root"}]);break;case"album":It.set("albums"),Et.set([{view:"root"},{view:"tracks_by_album",data:s}]);break;case"artist":It.set("artists"),Et.set([{view:"root"},{view:"albums_by_artist",data:s}]);break;case"playlist":It.set("playlists"),Et.set([{view:"root"},{view:"details",data:s}]);break;case"yandex":It.set("yandex"),Et.set([{view:"root"}]);break;default:this.setRootTab("artists");break}},setRootTab(e){It.set(e),Et.set([{view:"root"}])},updateUrl(e,t){let a="";if(e==="root"){const s=at(It);if(s==="search"){const n=at(Wr);a=n?`search/${encodeURIComponent(n)}`:"search"}else a=s}else if(e==="details"){const s=t.name||t;a=s==="Favorites"?"favorites":`playlist/${encodeURIComponent(s)}`}else if(e==="albums_by_artist"){const s=t.name||t;a=`artist/${encodeURIComponent(s)}`}else if(e==="tracks_by_album"){const s=t.name||t,n=t.artist;n?a=`album/${encodeURIComponent(n)}/${encodeURIComponent(s)}`:a=`album/${encodeURIComponent(s)}`}else e==="queue"&&(a="queue");if(a){const s=`#/${a}`;decodeURIComponent(window.location.hash)!==decodeURIComponent(s)&&(window.location.hash=`/${a}`)}}};var o0=k("<!> <!> <!>",1);function l0(e,t){$t(t,!1),Qa(async()=>{xi.init(),id((l,o)=>{xi.updateUrl(l,o)}),So(),Ta.loadRadioStations(),at(as)&&Ta.checkYandexAuth();try{const l=await Ba.getArtists();l.length>0?console.log(`[App] Database ready. Loaded ${l.length} artists from cache.`):(console.log("[App] Database empty. Starting initial sync..."),Ta.syncLibrary())}catch(l){console.error("[App] DB Check failed:",l),ze("Local DB error. Please update library manually.","error")}}),Lt();var a=o0(),s=Ie(a);Nf(s,{});var n=g(s,2);Gf(n,{});var i=g(n,2);i0(i,{}),b(e,a),Mt()}Yl(l0,{target:document.getElementById("app")});
