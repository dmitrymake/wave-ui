(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function a(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=a(n);fetch(n.href,i)}})();const Qs=!1;var Jr=Array.isArray,Eo=Array.prototype.indexOf,$s=Array.from,bi=Object.defineProperty,wr=Object.getOwnPropertyDescriptor,yi=Object.getOwnPropertyDescriptors,So=Object.prototype,To=Array.prototype,gn=Object.getPrototypeOf,Nn=Object.isExtensible;function $o(e){return typeof e=="function"}const Xt=()=>{};function Mo(e){return e()}function gs(e){for(var t=0;t<e.length;t++)e[t]()}function wi(){var e,t,a=new Promise((s,n)=>{e=s,t=n});return{promise:a,resolve:e,reject:t}}const Mt=2,_n=4,Ms=8,Ao=1<<24,ma=16,Ca=32,cr=64,As=128,la=512,Tt=1024,Bt=2048,ca=4096,Zt=8192,Ta=16384,Cs=32768,sr=65536,Dn=1<<17,ki=1<<18,Ar=1<<19,xi=1<<20,xa=1<<25,nr=32768,Xs=1<<21,mn=1<<22,Oa=1<<23,$a=Symbol("$state"),Co=Symbol("legacy props"),Po=Symbol(""),mr=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function bn(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Lo(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function zo(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Ro(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function jo(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Io(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function No(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function Do(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Oo(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function qo(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Fo(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Bo=1,Uo=2,Ei=4,Yo=8,Ho=16,Vo=1,Wo=2,Qo=4,Xo=8,Ko=16,Go=1,Zo=2,Jo=4,el=1,tl=2,Pt=Symbol(),al="http://www.w3.org/1999/xhtml";function rl(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function sl(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Si(e){return e===this.v}function yn(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function Ti(e){return!yn(e,this.v)}let Cr=!1,nl=!1;function il(){Cr=!0}let _t=null;function xr(e){_t=e}function Et(e,t=!1,a){_t={p:_t,i:!1,c:null,e:null,s:e,x:null,l:Cr&&!t?{s:null,u:null,$:[]}:null}}function St(e){var t=_t,a=t.e;if(a!==null){t.e=null;for(var s of a)Bi(s)}return t.i=!0,_t=t.p,{}}function es(){return!Cr||_t!==null&&_t.l===null}let Xa=[];function $i(){var e=Xa;Xa=[],gs(e)}function dr(e){if(Xa.length===0&&!qr){var t=Xa;queueMicrotask(()=>{t===Xa&&$i()})}Xa.push(e)}function ol(){for(;Xa.length>0;)$i()}function Mi(e){var t=ot;if(t===null)return nt.f|=Oa,e;if((t.f&Cs)===0){if((t.f&As)===0)throw e;t.b.error(e)}else Er(e,t)}function Er(e,t){for(;t!==null;){if((t.f&As)!==0)try{t.b.error(e);return}catch(a){e=a}t=t.parent}throw e}const ns=new Set;let it=null,Or=null,sa=null,aa=[],Ps=null,Ks=!1,qr=!1;class fa{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#a=0;#r=0;#l=null;#n=new Set;#s=new Set;skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#r>0}process(t){aa=[],Or=null,this.apply();var a={parent:null,effect:null,effects:[],render_effects:[]};for(const s of t)this.#i(s,a);this.is_fork||this.#d(),this.is_deferred()?(this.#o(a.effects),this.#o(a.render_effects)):(Or=this,it=null,On(a.render_effects),On(a.effects),Or=null,this.#l?.resolve()),sa=null}#i(t,a){t.f^=Tt;for(var s=t.first;s!==null;){var n=s.f,i=(n&(Ca|cr))!==0,l=i&&(n&Tt)!==0,o=l||(n&Zt)!==0||this.skipped_effects.has(s);if((s.f&As)!==0&&s.b?.is_pending()&&(a={parent:a,effect:s,effects:[],render_effects:[]}),!o&&s.fn!==null){i?s.f^=Tt:(n&_n)!==0?a.effects.push(s):Lr(s)&&((s.f&ma)!==0&&this.#n.add(s),Sr(s));var u=s.first;if(u!==null){s=u;continue}}var d=s.parent;for(s=s.next;s===null&&d!==null;)d===a.effect&&(this.#o(a.effects),this.#o(a.render_effects),a=a.parent),s=d.next,d=d.parent}}#o(t){for(const a of t)(a.f&Bt)!==0?this.#n.add(a):(a.f&ca)!==0&&this.#s.add(a),this.#c(a.deps),$t(a,Tt)}#c(t){if(t!==null)for(const a of t)(a.f&Mt)===0||(a.f&nr)===0||(a.f^=nr,this.#c(a.deps))}capture(t,a){this.previous.has(t)||this.previous.set(t,a),(t.f&Oa)===0&&(this.current.set(t,t.v),sa?.set(t,t.v))}activate(){it=this,this.apply()}deactivate(){it===this&&(it=null,sa=null)}flush(){if(this.activate(),aa.length>0){if(Ai(),it!==null&&it!==this)return}else this.#a===0&&this.process([]);this.deactivate()}discard(){for(const t of this.#t)t(this);this.#t.clear()}#d(){if(this.#r===0){for(const t of this.#e)t();this.#e.clear()}this.#a===0&&this.#v()}#v(){if(ns.size>1){this.previous.clear();var t=sa,a=!0,s={parent:null,effect:null,effects:[],render_effects:[]};for(const i of ns){if(i===this){a=!1;continue}const l=[];for(const[u,d]of this.current){if(i.current.has(u))if(a&&d!==i.current.get(u))i.current.set(u,d);else continue;l.push(u)}if(l.length===0)continue;const o=[...i.current.keys()].filter(u=>!this.current.has(u));if(o.length>0){var n=aa;aa=[];const u=new Set,d=new Map;for(const f of l)Ci(f,o,u,d);if(aa.length>0){it=i,i.apply();for(const f of aa)i.#i(f,s);i.deactivate()}aa=n}}it=null,sa=t}this.committed=!0,ns.delete(this)}increment(t){this.#a+=1,t&&(this.#r+=1)}decrement(t){this.#a-=1,t&&(this.#r-=1),this.revive()}revive(){for(const t of this.#n)this.#s.delete(t),$t(t,Bt),ir(t);for(const t of this.#s)$t(t,ca),ir(t);this.flush()}oncommit(t){this.#e.add(t)}ondiscard(t){this.#t.add(t)}settled(){return(this.#l??=wi()).promise}static ensure(){if(it===null){const t=it=new fa;ns.add(it),qr||fa.enqueue(()=>{it===t&&t.flush()})}return it}static enqueue(t){dr(t)}apply(){}}function ll(e){var t=qr;qr=!0;try{for(var a;;){if(ol(),aa.length===0&&(it?.flush(),aa.length===0))return Ps=null,a;Ai()}}finally{qr=t}}function Ai(){var e=Ja;Ks=!0;var t=null;try{var a=0;for(ms(!0);aa.length>0;){var s=fa.ensure();if(a++>1e3){var n,i;cl()}s.process(aa),qa.clear()}}finally{Ks=!1,ms(e),Ps=null}}function cl(){try{Io()}catch(e){Er(e,Ps)}}let wa=null;function On(e){var t=e.length;if(t!==0){for(var a=0;a<t;){var s=e[a++];if((s.f&(Ta|Zt))===0&&Lr(s)&&(wa=new Set,Sr(s),s.deps===null&&s.first===null&&s.nodes===null&&(s.teardown===null&&s.ac===null?Vi(s):s.fn=null),wa?.size>0)){qa.clear();for(const n of wa){if((n.f&(Ta|Zt))!==0)continue;const i=[n];let l=n.parent;for(;l!==null;)wa.has(l)&&(wa.delete(l),i.push(l)),l=l.parent;for(let o=i.length-1;o>=0;o--){const u=i[o];(u.f&(Ta|Zt))===0&&Sr(u)}}wa.clear()}}wa=null}}function Ci(e,t,a,s){if(!a.has(e)&&(a.add(e),e.reactions!==null))for(const n of e.reactions){const i=n.f;(i&Mt)!==0?Ci(n,t,a,s):(i&(mn|ma))!==0&&(i&Bt)===0&&Pi(n,t,s)&&($t(n,Bt),ir(n))}}function Pi(e,t,a){const s=a.get(e);if(s!==void 0)return s;if(e.deps!==null)for(const n of e.deps){if(t.includes(n))return!0;if((n.f&Mt)!==0&&Pi(n,t,a))return a.set(n,!0),!0}return a.set(e,!1),!1}function ir(e){for(var t=Ps=e;t.parent!==null;){t=t.parent;var a=t.f;if(Ks&&t===ot&&(a&ma)!==0&&(a&ki)===0)return;if((a&(cr|Ca))!==0){if((a&Tt)===0)return;t.f^=Tt}}aa.push(t)}function dl(e){let t=0,a=or(0),s;return()=>{Vr()&&(r(a),Pr(()=>(t===0&&(s=m(()=>e(()=>Fr(a)))),t+=1,()=>{dr(()=>{t-=1,t===0&&(s?.(),s=void 0,Fr(a))})})))}}var vl=sr|Ar|As;function ul(e,t,a){new fl(e,t,a)}class fl{parent;#e=!1;#t;#a=null;#r;#l;#n;#s=null;#i=null;#o=null;#c=null;#d=null;#v=0;#u=0;#h=!1;#f=null;#b=dl(()=>(this.#f=or(this.#v),()=>{this.#f=null}));constructor(t,a,s){this.#t=t,this.#r=a,this.#l=s,this.parent=ot.b,this.#e=!!this.#r.pending,this.#n=kn(()=>{ot.b=this;{var n=this.#_();try{this.#s=ra(()=>s(n))}catch(i){this.error(i)}this.#u>0?this.#g():this.#e=!1}return()=>{this.#d?.remove()}},vl)}#y(){try{this.#s=ra(()=>this.#l(this.#t))}catch(t){this.error(t)}this.#e=!1}#w(){const t=this.#r.pending;t&&(this.#i=ra(()=>t(this.#t)),fa.enqueue(()=>{var a=this.#_();this.#s=this.#p(()=>(fa.ensure(),ra(()=>this.#l(a)))),this.#u>0?this.#g():(Za(this.#i,()=>{this.#i=null}),this.#e=!1)}))}#_(){var t=this.#t;return this.#e&&(this.#d=Ma(),this.#t.before(this.#d),t=this.#d),t}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#r.pending}#p(t){var a=ot,s=nt,n=_t;_a(this.#n),qt(this.#n),xr(this.#n.ctx);try{return t()}catch(i){return Mi(i),null}finally{_a(a),qt(s),xr(n)}}#g(){const t=this.#r.pending;this.#s!==null&&(this.#c=document.createDocumentFragment(),this.#c.append(this.#d),Xi(this.#s,this.#c)),this.#i===null&&(this.#i=ra(()=>t(this.#t)))}#m(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#m(t);return}this.#u+=t,this.#u===0&&(this.#e=!1,this.#i&&Za(this.#i,()=>{this.#i=null}),this.#c&&(this.#t.before(this.#c),this.#c=null))}update_pending_count(t){this.#m(t),this.#v+=t,this.#f&&lr(this.#f,this.#v)}get_effect_pending(){return this.#b(),r(this.#f)}error(t){var a=this.#r.onerror;let s=this.#r.failed;if(this.#h||!a&&!s)throw t;this.#s&&(Ft(this.#s),this.#s=null),this.#i&&(Ft(this.#i),this.#i=null),this.#o&&(Ft(this.#o),this.#o=null);var n=!1,i=!1;const l=()=>{if(n){sl();return}n=!0,i&&Fo(),fa.ensure(),this.#v=0,this.#o!==null&&Za(this.#o,()=>{this.#o=null}),this.#e=this.has_pending_snippet(),this.#s=this.#p(()=>(this.#h=!1,ra(()=>this.#l(this.#t)))),this.#u>0?this.#g():this.#e=!1};var o=nt;try{qt(null),i=!0,a?.(t,l),i=!1}catch(u){Er(u,this.#n&&this.#n.parent)}finally{qt(o)}s&&dr(()=>{this.#o=this.#p(()=>{fa.ensure(),this.#h=!0;try{return ra(()=>{s(this.#t,()=>t,()=>l)})}catch(u){return Er(u,this.#n.parent),null}finally{this.#h=!1}})})}}function hl(e,t,a,s){const n=es()?ts:mt;if(a.length===0&&e.length===0){s(t.map(n));return}var i=it,l=ot,o=pl();function u(){Promise.all(a.map(d=>gl(d))).then(d=>{o();try{s([...t.map(n),...d])}catch(f){(l.f&Ta)===0&&Er(f,l)}i?.deactivate(),_s()}).catch(d=>{Er(d,l)})}e.length>0?Promise.all(e).then(()=>{o();try{return u()}finally{i?.deactivate(),_s()}}):u()}function pl(){var e=ot,t=nt,a=_t,s=it;return function(i=!0){_a(e),qt(t),xr(a),i&&s?.activate()}}function _s(){_a(null),qt(null),xr(null)}function ts(e){var t=Mt|Bt,a=nt!==null&&(nt.f&Mt)!==0?nt:null;return ot!==null&&(ot.f|=Ar),{ctx:_t,deps:null,effects:null,equals:Si,f:t,fn:e,reactions:null,rv:0,v:Pt,wv:0,parent:a??ot,ac:null}}function gl(e,t){let a=ot;a===null&&Lo();var s=a.b,n=void 0,i=or(Pt),l=!nt,o=new Map;return $l(()=>{var u=wi();n=u.promise;try{Promise.resolve(e()).then(u.resolve,u.reject).then(()=>{d===it&&d.committed&&d.deactivate(),_s()})}catch(v){u.reject(v),_s()}var d=it;if(l){var f=!s.is_pending();s.update_pending_count(1),d.increment(f),o.get(d)?.reject(mr),o.delete(d),o.set(d,u)}const h=(v,p=void 0)=>{if(d.activate(),p)p!==mr&&(i.f|=Oa,lr(i,p));else{(i.f&Oa)!==0&&(i.f^=Oa),lr(i,v);for(const[x,E]of o){if(o.delete(x),x===d)break;E.reject(mr)}}l&&(s.update_pending_count(-1),d.decrement(f))};u.promise.then(h,v=>h(null,v||"unknown"))}),rs(()=>{for(const u of o.values())u.reject(mr)}),new Promise(u=>{function d(f){function h(){f===n?u(i):d(n)}f.then(h,h)}d(n)})}function Rr(e){const t=ts(e);return Ki(t),t}function mt(e){const t=ts(e);return t.equals=Ti,t}function Li(e){var t=e.effects;if(t!==null){e.effects=null;for(var a=0;a<t.length;a+=1)Ft(t[a])}}function _l(e){for(var t=e.parent;t!==null;){if((t.f&Mt)===0)return(t.f&Ta)===0?t:null;t=t.parent}return null}function wn(e){var t,a=ot;_a(_l(e));try{e.f&=~nr,Li(e),t=eo(e)}finally{_a(a)}return t}function zi(e){var t=wn(e);if(e.equals(t)||(it?.is_fork||(e.v=t),e.wv=Zi()),!ur)if(sa!==null)(Vr()||it?.is_fork)&&sa.set(e,t);else{var a=(e.f&la)===0?ca:Tt;$t(e,a)}}let Gs=new Set;const qa=new Map;let Ri=!1;function or(e,t){var a={f:0,v:e,reactions:null,equals:Si,rv:0,wv:0};return a}function Pa(e,t){const a=or(e);return Ki(a),a}function T(e,t=!1,a=!0){const s=or(e);return t||(s.equals=Ti),Cr&&a&&_t!==null&&_t.l!==null&&(_t.l.s??=[]).push(s),s}function is(e,t){return g(e,m(()=>r(e))),t}function g(e,t,a=!1){nt!==null&&(!ha||(nt.f&Dn)!==0)&&es()&&(nt.f&(Mt|ma|mn|Dn))!==0&&!Aa?.includes(e)&&qo();let s=a?br(t):t;return lr(e,s)}function lr(e,t){if(!e.equals(t)){var a=e.v;ur?qa.set(e,t):qa.set(e,a),e.v=t;var s=fa.ensure();s.capture(e,a),(e.f&Mt)!==0&&((e.f&Bt)!==0&&wn(e),$t(e,(e.f&la)!==0?Tt:ca)),e.wv=Zi(),ji(e,Bt),es()&&ot!==null&&(ot.f&Tt)!==0&&(ot.f&(Ca|cr))===0&&(ea===null?Pl([e]):ea.push(e)),!s.is_fork&&Gs.size>0&&!Ri&&ml()}return t}function ml(){Ri=!1;var e=Ja;ms(!0);const t=Array.from(Gs);try{for(const a of t)(a.f&Tt)!==0&&$t(a,ca),Lr(a)&&Sr(a)}finally{ms(e)}Gs.clear()}function Fr(e){g(e,e.v+1)}function ji(e,t){var a=e.reactions;if(a!==null)for(var s=es(),n=a.length,i=0;i<n;i++){var l=a[i],o=l.f;if(!(!s&&l===ot)){var u=(o&Bt)===0;if(u&&$t(l,t),(o&Mt)!==0){var d=l;sa?.delete(d),(o&nr)===0&&(o&la&&(l.f|=nr),ji(d,ca))}else u&&((o&ma)!==0&&wa!==null&&wa.add(l),ir(l))}}}function br(e){if(typeof e!="object"||e===null||$a in e)return e;const t=gn(e);if(t!==So&&t!==To)return e;var a=new Map,s=Jr(e),n=Pa(0),i=er,l=o=>{if(er===i)return o();var u=nt,d=er;qt(null),Un(i);var f=o();return qt(u),Un(d),f};return s&&a.set("length",Pa(e.length)),new Proxy(e,{defineProperty(o,u,d){(!("value"in d)||d.configurable===!1||d.enumerable===!1||d.writable===!1)&&Do();var f=a.get(u);return f===void 0?f=l(()=>{var h=Pa(d.value);return a.set(u,h),h}):g(f,d.value,!0),!0},deleteProperty(o,u){var d=a.get(u);if(d===void 0){if(u in o){const f=l(()=>Pa(Pt));a.set(u,f),Fr(n)}}else g(d,Pt),Fr(n);return!0},get(o,u,d){if(u===$a)return e;var f=a.get(u),h=u in o;if(f===void 0&&(!h||wr(o,u)?.writable)&&(f=l(()=>{var p=br(h?o[u]:Pt),x=Pa(p);return x}),a.set(u,f)),f!==void 0){var v=r(f);return v===Pt?void 0:v}return Reflect.get(o,u,d)},getOwnPropertyDescriptor(o,u){var d=Reflect.getOwnPropertyDescriptor(o,u);if(d&&"value"in d){var f=a.get(u);f&&(d.value=r(f))}else if(d===void 0){var h=a.get(u),v=h?.v;if(h!==void 0&&v!==Pt)return{enumerable:!0,configurable:!0,value:v,writable:!0}}return d},has(o,u){if(u===$a)return!0;var d=a.get(u),f=d!==void 0&&d.v!==Pt||Reflect.has(o,u);if(d!==void 0||ot!==null&&(!f||wr(o,u)?.writable)){d===void 0&&(d=l(()=>{var v=f?br(o[u]):Pt,p=Pa(v);return p}),a.set(u,d));var h=r(d);if(h===Pt)return!1}return f},set(o,u,d,f){var h=a.get(u),v=u in o;if(s&&u==="length")for(var p=d;p<h.v;p+=1){var x=a.get(p+"");x!==void 0?g(x,Pt):p in o&&(x=l(()=>Pa(Pt)),a.set(p+"",x))}if(h===void 0)(!v||wr(o,u)?.writable)&&(h=l(()=>Pa(void 0)),g(h,br(d)),a.set(u,h));else{v=h.v!==Pt;var E=l(()=>br(d));g(h,E)}var w=Reflect.getOwnPropertyDescriptor(o,u);if(w?.set&&w.set.call(f,d),!v){if(s&&typeof u=="string"){var S=a.get("length"),X=Number(u);Number.isInteger(X)&&X>=S.v&&g(S,X+1)}Fr(n)}return!0},ownKeys(o){r(n);var u=Reflect.ownKeys(o).filter(h=>{var v=a.get(h);return v===void 0||v.v!==Pt});for(var[d,f]of a)f.v!==Pt&&!(d in o)&&u.push(d);return u},setPrototypeOf(){Oo()}})}function qn(e){try{if(e!==null&&typeof e=="object"&&$a in e)return e[$a]}catch{}return e}function bl(e,t){return Object.is(qn(e),qn(t))}var Ra,Ii,Ni,Di;function yl(){if(Ra===void 0){Ra=window,Ii=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,a=Text.prototype;Ni=wr(t,"firstChild").get,Di=wr(t,"nextSibling").get,Nn(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Nn(a)&&(a.__t=void 0)}}function Ma(e=""){return document.createTextNode(e)}function ja(e){return Ni.call(e)}function as(e){return Di.call(e)}function c(e,t){return ja(e)}function Re(e,t=!1){{var a=ja(e);return a instanceof Comment&&a.data===""?as(a):a}}function _(e,t=1,a=!1){let s=e;for(;t--;)s=as(s);return s}function wl(e){e.textContent=""}function Oi(){return!1}let Fn=!1;function kl(){Fn||(Fn=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function xl(e,t,a,s=!0){s&&a();for(var n of t)e.addEventListener(n,a);rs(()=>{for(var i of t)e.removeEventListener(i,a)})}function vr(e){var t=nt,a=ot;qt(null),_a(null);try{return e()}finally{qt(t),_a(a)}}function qi(e,t,a,s=a){e.addEventListener(t,()=>vr(a));const n=e.__on_r;n?e.__on_r=()=>{n(),s(!0)}:e.__on_r=()=>s(!0),kl()}function Fi(e){ot===null&&(nt===null&&jo(),Ro()),ur&&zo()}function El(e,t){var a=t.last;a===null?t.last=t.first=e:(a.next=e,e.prev=a,t.last=e)}function ba(e,t,a){var s=ot;s!==null&&(s.f&Zt)!==0&&(e|=Zt);var n={ctx:_t,deps:null,nodes:null,f:e|Bt|la,first:null,fn:t,last:null,next:null,parent:s,b:s&&s.b,prev:null,teardown:null,wv:0,ac:null};if(a)try{Sr(n),n.f|=Cs}catch(o){throw Ft(n),o}else t!==null&&ir(n);var i=n;if(a&&i.deps===null&&i.teardown===null&&i.nodes===null&&i.first===i.last&&(i.f&Ar)===0&&(i=i.first,(e&ma)!==0&&(e&sr)!==0&&i!==null&&(i.f|=sr)),i!==null&&(i.parent=s,s!==null&&El(i,s),nt!==null&&(nt.f&Mt)!==0&&(e&cr)===0)){var l=nt;(l.effects??=[]).push(i)}return n}function Vr(){return nt!==null&&!ha}function rs(e){const t=ba(Ms,null,!1);return $t(t,Tt),t.teardown=e,t}function Zs(e){Fi();var t=ot.f,a=!nt&&(t&Ca)!==0&&(t&Cs)===0;if(a){var s=_t;(s.e??=[]).push(e)}else return Bi(e)}function Bi(e){return ba(_n|xi,e,!1)}function Sl(e){return Fi(),ba(Ms|xi,e,!0)}function Tl(e){fa.ensure();const t=ba(cr|Ar,e,!0);return(a={})=>new Promise(s=>{a.outro?Za(t,()=>{Ft(t),s(void 0)}):(Ft(t),s(void 0))})}function Ot(e){return ba(_n,e,!1)}function ne(e,t){var a=_t,s={effect:null,ran:!1,deps:e};a.l.$.push(s),s.effect=Pr(()=>{e(),!s.ran&&(s.ran=!0,m(t))})}function Ht(){var e=_t;Pr(()=>{for(var t of e.l.$){t.deps();var a=t.effect;(a.f&Tt)!==0&&$t(a,ca),Lr(a)&&Sr(a),t.ran=!1}})}function $l(e){return ba(mn|Ar,e,!0)}function Pr(e,t=0){return ba(Ms|t,e,!0)}function ve(e,t=[],a=[],s=[]){hl(s,t,a,n=>{ba(Ms,()=>e(...n.map(r)),!0)})}function kn(e,t=0){var a=ba(ma|t,e,!0);return a}function ra(e){return ba(Ca|Ar,e,!0)}function Ui(e){var t=e.teardown;if(t!==null){const a=ur,s=nt;Bn(!0),qt(null);try{t.call(null)}finally{Bn(a),qt(s)}}}function Yi(e,t=!1){var a=e.first;for(e.first=e.last=null;a!==null;){const n=a.ac;n!==null&&vr(()=>{n.abort(mr)});var s=a.next;(a.f&cr)!==0?a.parent=null:Ft(a,t),a=s}}function Ml(e){for(var t=e.first;t!==null;){var a=t.next;(t.f&Ca)===0&&Ft(t),t=a}}function Ft(e,t=!0){var a=!1;(t||(e.f&ki)!==0)&&e.nodes!==null&&e.nodes.end!==null&&(Hi(e.nodes.start,e.nodes.end),a=!0),Yi(e,t&&!a),bs(e,0),$t(e,Ta);var s=e.nodes&&e.nodes.t;if(s!==null)for(const i of s)i.stop();Ui(e);var n=e.parent;n!==null&&n.first!==null&&Vi(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function Hi(e,t){for(;e!==null;){var a=e===t?null:as(e);e.remove(),e=a}}function Vi(e){var t=e.parent,a=e.prev,s=e.next;a!==null&&(a.next=s),s!==null&&(s.prev=a),t!==null&&(t.first===e&&(t.first=s),t.last===e&&(t.last=a))}function Za(e,t,a=!0){var s=[];Wi(e,s,!0);var n=()=>{a&&Ft(e),t&&t()},i=s.length;if(i>0){var l=()=>--i||n();for(var o of s)o.out(l)}else n()}function Wi(e,t,a){if((e.f&Zt)===0){e.f^=Zt;var s=e.nodes&&e.nodes.t;if(s!==null)for(const o of s)(o.is_global||a)&&t.push(o);for(var n=e.first;n!==null;){var i=n.next,l=(n.f&sr)!==0||(n.f&Ca)!==0&&(e.f&ma)!==0;Wi(n,t,l?a:!1),n=i}}}function xn(e){Qi(e,!0)}function Qi(e,t){if((e.f&Zt)!==0){e.f^=Zt,(e.f&Tt)===0&&($t(e,Bt),ir(e));for(var a=e.first;a!==null;){var s=a.next,n=(a.f&sr)!==0||(a.f&Ca)!==0;Qi(a,n?t:!1),a=s}var i=e.nodes&&e.nodes.t;if(i!==null)for(const l of i)(l.is_global||t)&&l.in()}}function Xi(e,t){if(e.nodes)for(var a=e.nodes.start,s=e.nodes.end;a!==null;){var n=a===s?null:as(a);t.append(a),a=n}}let _r=null;function Al(e){var t=_r;try{if(_r=new Set,m(e),t!==null)for(var a of _r)t.add(a);return _r}finally{_r=t}}function Cl(e){for(var t of Al(e))lr(t,t.v)}let Ja=!1;function ms(e){Ja=e}let ur=!1;function Bn(e){ur=e}let nt=null,ha=!1;function qt(e){nt=e}let ot=null;function _a(e){ot=e}let Aa=null;function Ki(e){nt!==null&&(Aa===null?Aa=[e]:Aa.push(e))}let Rt=null,Vt=0,ea=null;function Pl(e){ea=e}let Gi=1,Wr=0,er=Wr;function Un(e){er=e}function Zi(){return++Gi}function Lr(e){var t=e.f;if((t&Bt)!==0)return!0;if(t&Mt&&(e.f&=~nr),(t&ca)!==0){var a=e.deps;if(a!==null)for(var s=a.length,n=0;n<s;n++){var i=a[n];if(Lr(i)&&zi(i),i.wv>e.wv)return!0}(t&la)!==0&&sa===null&&$t(e,Tt)}return!1}function Ji(e,t,a=!0){var s=e.reactions;if(s!==null&&!Aa?.includes(e))for(var n=0;n<s.length;n++){var i=s[n];(i.f&Mt)!==0?Ji(i,t,!1):t===i&&(a?$t(i,Bt):(i.f&Tt)!==0&&$t(i,ca),ir(i))}}function eo(e){var t=Rt,a=Vt,s=ea,n=nt,i=Aa,l=_t,o=ha,u=er,d=e.f;Rt=null,Vt=0,ea=null,nt=(d&(Ca|cr))===0?e:null,Aa=null,xr(e.ctx),ha=!1,er=++Wr,e.ac!==null&&(vr(()=>{e.ac.abort(mr)}),e.ac=null);try{e.f|=Xs;var f=e.fn,h=f(),v=e.deps;if(Rt!==null){var p;if(bs(e,Vt),v!==null&&Vt>0)for(v.length=Vt+Rt.length,p=0;p<Rt.length;p++)v[Vt+p]=Rt[p];else e.deps=v=Rt;if(Vr()&&(e.f&la)!==0)for(p=Vt;p<v.length;p++)(v[p].reactions??=[]).push(e)}else v!==null&&Vt<v.length&&(bs(e,Vt),v.length=Vt);if(es()&&ea!==null&&!ha&&v!==null&&(e.f&(Mt|ca|Bt))===0)for(p=0;p<ea.length;p++)Ji(ea[p],e);return n!==null&&n!==e&&(Wr++,ea!==null&&(s===null?s=ea:s.push(...ea))),(e.f&Oa)!==0&&(e.f^=Oa),h}catch(x){return Mi(x)}finally{e.f^=Xs,Rt=t,Vt=a,ea=s,nt=n,Aa=i,xr(l),ha=o,er=u}}function Ll(e,t){let a=t.reactions;if(a!==null){var s=Eo.call(a,e);if(s!==-1){var n=a.length-1;n===0?a=t.reactions=null:(a[s]=a[n],a.pop())}}a===null&&(t.f&Mt)!==0&&(Rt===null||!Rt.includes(t))&&($t(t,ca),(t.f&la)!==0&&(t.f^=la,t.f&=~nr),Li(t),bs(t,0))}function bs(e,t){var a=e.deps;if(a!==null)for(var s=t;s<a.length;s++)Ll(e,a[s])}function Sr(e){var t=e.f;if((t&Ta)===0){$t(e,Tt);var a=ot,s=Ja;ot=e,Ja=!0;try{(t&(ma|Ao))!==0?Ml(e):Yi(e),Ui(e);var n=eo(e);e.teardown=typeof n=="function"?n:null,e.wv=Gi;var i;Qs&&nl&&(e.f&Bt)!==0&&e.deps}finally{Ja=s,ot=a}}}async function kr(){await Promise.resolve(),ll()}function r(e){var t=e.f,a=(t&Mt)!==0;if(_r?.add(e),nt!==null&&!ha){var s=ot!==null&&(ot.f&Ta)!==0;if(!s&&!Aa?.includes(e)){var n=nt.deps;if((nt.f&Xs)!==0)e.rv<Wr&&(e.rv=Wr,Rt===null&&n!==null&&n[Vt]===e?Vt++:Rt===null?Rt=[e]:Rt.includes(e)||Rt.push(e));else{(nt.deps??=[]).push(e);var i=e.reactions;i===null?e.reactions=[nt]:i.includes(nt)||i.push(nt)}}}if(ur){if(qa.has(e))return qa.get(e);if(a){var l=e,o=l.v;return((l.f&Tt)===0&&l.reactions!==null||ao(l))&&(o=wn(l)),qa.set(l,o),o}}else a&&(!sa?.has(e)||it?.is_fork&&!Vr())&&(l=e,Lr(l)&&zi(l),Ja&&Vr()&&(l.f&la)===0&&to(l));if(sa?.has(e))return sa.get(e);if((e.f&Oa)!==0)throw e.v;return e.v}function to(e){if(e.deps!==null){e.f^=la;for(const t of e.deps)(t.reactions??=[]).push(e),(t.f&Mt)!==0&&(t.f&la)===0&&to(t)}}function ao(e){if(e.v===Pt)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(qa.has(t)||(t.f&Mt)!==0&&ao(t))return!0;return!1}function m(e){var t=ha;try{return ha=!0,e()}finally{ha=t}}const zl=-7169;function $t(e,t){e.f=e.f&zl|t}function j(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if($a in e)Js(e);else if(!Array.isArray(e))for(let t in e){const a=e[t];typeof a=="object"&&a&&$a in a&&Js(a)}}}function Js(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let s in e)try{Js(e[s],t)}catch{}const a=gn(e);if(a!==Object.prototype&&a!==Array.prototype&&a!==Map.prototype&&a!==Set.prototype&&a!==Date.prototype){const s=yi(a);for(let n in s){const i=s[n].get;if(i)try{i.call(e)}catch{}}}}}const Rl=["touchstart","touchmove"];function jl(e){return Rl.includes(e)}const Il=new Set,Yn=new Set;function Nl(e,t,a,s={}){function n(i){if(s.capture||Ir.call(t,i),!i.cancelBubble)return vr(()=>a?.call(this,i))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?dr(()=>{t.addEventListener(e,n,s)}):t.addEventListener(e,n,s),n}function M(e,t,a,s,n){var i={capture:s,passive:n},l=Nl(e,t,a,i);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&rs(()=>{t.removeEventListener(e,l,i)})}let Hn=null;function Ir(e){var t=this,a=t.ownerDocument,s=e.type,n=e.composedPath?.()||[],i=n[0]||e.target;Hn=e;var l=0,o=Hn===e&&e.__root;if(o){var u=n.indexOf(o);if(u!==-1&&(t===document||t===window)){e.__root=t;return}var d=n.indexOf(t);if(d===-1)return;u<=d&&(l=u)}if(i=n[l]||e.target,i!==t){bi(e,"currentTarget",{configurable:!0,get(){return i||a}});var f=nt,h=ot;qt(null),_a(null);try{for(var v,p=[];i!==null;){var x=i.assignedSlot||i.parentNode||i.host||null;try{var E=i["__"+s];E!=null&&(!i.disabled||e.target===i)&&E.call(i,e)}catch(w){v?p.push(w):v=w}if(e.cancelBubble||x===t||x===null)break;i=x}if(v){for(let w of p)queueMicrotask(()=>{throw w});throw v}}finally{e.__root=t,delete e.currentTarget,qt(f),_a(h)}}}function ro(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function Qr(e,t){var a=ot;a.nodes===null&&(a.nodes={start:e,end:t,a:null,t:null})}function k(e,t){var a=(t&el)!==0,s=(t&tl)!==0,n,i=!e.startsWith("<!>");return()=>{n===void 0&&(n=ro(i?e:"<!>"+e),a||(n=ja(n)));var l=s||Ii?document.importNode(n,!0):n.cloneNode(!0);if(a){var o=ja(l),u=l.lastChild;Qr(o,u)}else Qr(l,l);return l}}function La(e=""){{var t=Ma(e+"");return Qr(t,t),t}}function st(){var e=document.createDocumentFragment(),t=document.createComment(""),a=Ma();return e.append(t,a),Qr(t,a),e}function b(e,t){e!==null&&e.before(t)}let en=!0;function le(e,t){var a=t==null?"":typeof t=="object"?t+"":t;a!==(e.__t??=e.nodeValue)&&(e.__t=a,e.nodeValue=a+"")}function Dl(e,t){return Ol(e,t)}const fr=new Map;function Ol(e,{target:t,anchor:a,props:s={},events:n,context:i,intro:l=!0}){yl();var o=new Set,u=h=>{for(var v=0;v<h.length;v++){var p=h[v];if(!o.has(p)){o.add(p);var x=jl(p);t.addEventListener(p,Ir,{passive:x});var E=fr.get(p);E===void 0?(document.addEventListener(p,Ir,{passive:x}),fr.set(p,1)):fr.set(p,E+1)}}};u($s(Il)),Yn.add(u);var d=void 0,f=Tl(()=>{var h=a??t.appendChild(Ma());return ul(h,{pending:()=>{}},v=>{if(i){Et({});var p=_t;p.c=i}n&&(s.$$events=n),en=l,d=e(v,s)||{},en=!0,i&&St()}),()=>{for(var v of o){t.removeEventListener(v,Ir);var p=fr.get(v);--p===0?(document.removeEventListener(v,Ir),fr.delete(v)):fr.set(v,p)}Yn.delete(u),h!==a&&h.parentNode?.removeChild(h)}});return ql.set(d,f),d}let ql=new WeakMap;class Fl{anchor;#e=new Map;#t=new Map;#a=new Map;#r=new Set;#l=!0;constructor(t,a=!0){this.anchor=t,this.#l=a}#n=()=>{var t=it;if(this.#e.has(t)){var a=this.#e.get(t),s=this.#t.get(a);if(s)xn(s),this.#r.delete(a);else{var n=this.#a.get(a);n&&(this.#t.set(a,n.effect),this.#a.delete(a),n.fragment.lastChild.remove(),this.anchor.before(n.fragment),s=n.effect)}for(const[i,l]of this.#e){if(this.#e.delete(i),i===t)break;const o=this.#a.get(l);o&&(Ft(o.effect),this.#a.delete(l))}for(const[i,l]of this.#t){if(i===a||this.#r.has(i))continue;const o=()=>{if(Array.from(this.#e.values()).includes(i)){var d=document.createDocumentFragment();Xi(l,d),d.append(Ma()),this.#a.set(i,{effect:l,fragment:d})}else Ft(l);this.#r.delete(i),this.#t.delete(i)};this.#l||!s?(this.#r.add(i),Za(l,o,!1)):o()}}};#s=t=>{this.#e.delete(t);const a=Array.from(this.#e.values());for(const[s,n]of this.#a)a.includes(s)||(Ft(n.effect),this.#a.delete(s))};ensure(t,a){var s=it,n=Oi();if(a&&!this.#t.has(t)&&!this.#a.has(t))if(n){var i=document.createDocumentFragment(),l=Ma();i.append(l),this.#a.set(t,{effect:ra(()=>a(l)),fragment:i})}else this.#t.set(t,ra(()=>a(this.anchor)));if(this.#e.set(s,t),n){for(const[o,u]of this.#t)o===t?s.skipped_effects.delete(u):s.skipped_effects.add(u);for(const[o,u]of this.#a)o===t?s.skipped_effects.delete(u.effect):s.skipped_effects.add(u.effect);s.oncommit(this.#n),s.ondiscard(this.#s)}else this.#n()}}function P(e,t,a=!1){var s=new Fl(e),n=a?sr:0;function i(l,o){s.ensure(l,o)}kn(()=>{var l=!1;t((o,u=!0)=>{l=!0,i(u,o)}),l||i(!1,null)},n)}function Dt(e,t){return t}function Bl(e,t,a){for(var s=[],n=t.length,i,l=t.length,o=0;o<n;o++){let h=t[o];Za(h,()=>{if(i){if(i.pending.delete(h),i.done.add(h),i.pending.size===0){var v=e.outrogroups;tn($s(i.done)),v.delete(i),v.size===0&&(e.outrogroups=null)}}else l-=1},!1)}if(l===0){var u=s.length===0&&a!==null;if(u){var d=a,f=d.parentNode;wl(f),f.append(d),e.items.clear()}tn(t,!u)}else i={pending:new Set(t),done:new Set},(e.outrogroups??=new Set).add(i)}function tn(e,t=!0){for(var a=0;a<e.length;a++)Ft(e[a],t)}var Vn;function bt(e,t,a,s,n,i=null){var l=e,o=new Map,u=(t&Ei)!==0;if(u){var d=e;l=d.appendChild(Ma())}var f=null,h=mt(()=>{var S=a();return Jr(S)?S:S==null?[]:$s(S)}),v,p=!0;function x(){w.fallback=f,Ul(w,v,l,t,s),f!==null&&(v.length===0?(f.f&xa)===0?xn(f):(f.f^=xa,Nr(f,null,l)):Za(f,()=>{f=null}))}var E=kn(()=>{v=r(h);for(var S=v.length,X=new Set,he=it,ae=Oi(),re=0;re<S;re+=1){var be=v[re],O=s(be,re),U=p?null:o.get(O);U?(U.v&&lr(U.v,be),U.i&&lr(U.i,re),ae&&he.skipped_effects.delete(U.e)):(U=Yl(o,p?l:Vn??=Ma(),be,O,re,n,t,a),p||(U.e.f|=xa),o.set(O,U)),X.add(O)}if(S===0&&i&&!f&&(p?f=ra(()=>i(l)):(f=ra(()=>i(Vn??=Ma())),f.f|=xa)),!p)if(ae){for(const[ie,H]of o)X.has(ie)||he.skipped_effects.add(H.e);he.oncommit(x),he.ondiscard(()=>{})}else x();r(h)}),w={effect:E,items:o,outrogroups:null,fallback:f};p=!1}function Ul(e,t,a,s,n){var i=(s&Yo)!==0,l=t.length,o=e.items,u=e.effect.first,d,f=null,h,v=[],p=[],x,E,w,S;if(i)for(S=0;S<l;S+=1)x=t[S],E=n(x,S),w=o.get(E).e,(w.f&xa)===0&&(w.nodes?.a?.measure(),(h??=new Set).add(w));for(S=0;S<l;S+=1){if(x=t[S],E=n(x,S),w=o.get(E).e,e.outrogroups!==null)for(const H of e.outrogroups)H.pending.delete(w),H.done.delete(w);if((w.f&xa)!==0)if(w.f^=xa,w===u)Nr(w,null,a);else{var X=f?f.next:u;w===e.effect.last&&(e.effect.last=w.prev),w.prev&&(w.prev.next=w.next),w.next&&(w.next.prev=w.prev),za(e,f,w),za(e,w,X),Nr(w,X,a),f=w,v=[],p=[],u=f.next;continue}if((w.f&Zt)!==0&&(xn(w),i&&(w.nodes?.a?.unfix(),(h??=new Set).delete(w))),w!==u){if(d!==void 0&&d.has(w)){if(v.length<p.length){var he=p[0],ae;f=he.prev;var re=v[0],be=v[v.length-1];for(ae=0;ae<v.length;ae+=1)Nr(v[ae],he,a);for(ae=0;ae<p.length;ae+=1)d.delete(p[ae]);za(e,re.prev,be.next),za(e,f,re),za(e,be,he),u=he,f=be,S-=1,v=[],p=[]}else d.delete(w),Nr(w,u,a),za(e,w.prev,w.next),za(e,w,f===null?e.effect.first:f.next),za(e,f,w),f=w;continue}for(v=[],p=[];u!==null&&u!==w;)(d??=new Set).add(u),p.push(u),u=u.next;if(u===null)continue}(w.f&xa)===0&&v.push(w),f=w,u=w.next}if(e.outrogroups!==null){for(const H of e.outrogroups)H.pending.size===0&&(tn($s(H.done)),e.outrogroups?.delete(H));e.outrogroups.size===0&&(e.outrogroups=null)}if(u!==null||d!==void 0){var O=[];if(d!==void 0)for(w of d)(w.f&Zt)===0&&O.push(w);for(;u!==null;)(u.f&Zt)===0&&u!==e.fallback&&O.push(u),u=u.next;var U=O.length;if(U>0){var ie=(s&Ei)!==0&&l===0?a:null;if(i){for(S=0;S<U;S+=1)O[S].nodes?.a?.measure();for(S=0;S<U;S+=1)O[S].nodes?.a?.fix()}Bl(e,O,ie)}}i&&dr(()=>{if(h!==void 0)for(w of h)w.nodes?.a?.apply()})}function Yl(e,t,a,s,n,i,l,o){var u=(l&Bo)!==0?(l&Ho)===0?T(a,!1,!1):or(a):null,d=(l&Uo)!==0?or(n):null;return{v:u,i:d,e:ra(()=>(i(t,u??a,d??n,o),()=>{e.delete(s)}))}}function Nr(e,t,a){if(e.nodes)for(var s=e.nodes.start,n=e.nodes.end,i=t&&(t.f&xa)===0?t.nodes.start:a;s!==null;){var l=as(s);if(i.before(s),s===n)return;s=l}}function za(e,t,a){t===null?e.effect.first=a:t.next=a,a===null?e.effect.last=t:a.prev=t}function ee(e,t,a=!1,s=!1,n=!1){var i=e,l="";ve(()=>{var o=ot;if(l!==(l=t()??"")&&(o.nodes!==null&&(Hi(o.nodes.start,o.nodes.end),o.nodes=null),l!=="")){var u=l+"";a?u=`<svg>${u}</svg>`:s&&(u=`<math>${u}</math>`);var d=ro(u);if((a||s)&&(d=ja(d)),Qr(ja(d),d.lastChild),a||s)for(;ja(d);)i.before(ja(d));else i.before(d)}})}function Dr(e,t,a,s,n){var i=t.$$slots?.[a],l=!1;i===!0&&(i=t[a==="default"?"children":a],l=!0),i===void 0||i(e,l?()=>s:s)}const Hl=()=>performance.now(),ka={tick:e=>requestAnimationFrame(e),now:()=>Hl(),tasks:new Set};function so(){const e=ka.now();ka.tasks.forEach(t=>{t.c(e)||(ka.tasks.delete(t),t.f())}),ka.tasks.size!==0&&ka.tick(so)}function Vl(e){let t;return ka.tasks.size===0&&ka.tick(so),{promise:new Promise(a=>{ka.tasks.add(t={c:e,f:a})}),abort(){ka.tasks.delete(t)}}}function os(e,t){vr(()=>{e.dispatchEvent(new CustomEvent(t))})}function Wl(e){if(e==="float")return"cssFloat";if(e==="offset")return"cssOffset";if(e.startsWith("--"))return e;const t=e.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(a=>a[0].toUpperCase()+a.slice(1)).join("")}function Wn(e){const t={},a=e.split(";");for(const s of a){const[n,i]=s.split(":");if(!n||i===void 0)break;const l=Wl(n.trim());t[l]=i.trim()}return t}const Ql=e=>e;function ut(e,t,a,s){var n=(e&Go)!==0,i=(e&Zo)!==0,l=n&&i,o=(e&Jo)!==0,u=l?"both":n?"in":"out",d,f=t.inert,h=t.style.overflow,v,p;function x(){return vr(()=>d??=a()(t,s?.()??{},{direction:u}))}var E={is_global:o,in(){if(t.inert=f,!n){p?.abort(),p?.reset?.();return}i||v?.abort(),os(t,"introstart"),v=an(t,x(),p,1,()=>{os(t,"introend"),v?.abort(),v=d=void 0,t.style.overflow=h})},out(he){if(!i){he?.(),d=void 0;return}t.inert=!0,os(t,"outrostart"),p=an(t,x(),v,0,()=>{os(t,"outroend"),he?.()})},stop:()=>{v?.abort(),p?.abort()}},w=ot;if((w.nodes.t??=[]).push(E),n&&en){var S=o;if(!S){for(var X=w.parent;X&&(X.f&sr)!==0;)for(;(X=X.parent)&&(X.f&ma)===0;);S=!X||(X.f&Cs)!==0}S&&Ot(()=>{m(()=>E.in())})}}function an(e,t,a,s,n){var i=s===1;if($o(t)){var l,o=!1;return dr(()=>{if(!o){var w=t({direction:i?"in":"out"});l=an(e,w,a,s,n)}}),{abort:()=>{o=!0,l?.abort()},deactivate:()=>l.deactivate(),reset:()=>l.reset(),t:()=>l.t()}}if(a?.deactivate(),!t?.duration)return n(),{abort:Xt,deactivate:Xt,reset:Xt,t:()=>s};const{delay:u=0,css:d,tick:f,easing:h=Ql}=t;var v=[];if(i&&a===void 0&&(f&&f(0,1),d)){var p=Wn(d(0,1));v.push(p,p)}var x=()=>1-s,E=e.animate(v,{duration:u,fill:"forwards"});return E.onfinish=()=>{E.cancel();var w=a?.t()??1-s;a?.abort();var S=s-w,X=t.duration*Math.abs(S),he=[];if(X>0){var ae=!1;if(d)for(var re=Math.ceil(X/16.666666666666668),be=0;be<=re;be+=1){var O=w+S*h(be/re),U=Wn(d(O,1-O));he.push(U),ae||=U.overflow==="hidden"}ae&&(e.style.overflow="hidden"),x=()=>{var ie=E.currentTime;return w+S*h(ie/X)},f&&Vl(()=>{if(E.playState!=="running")return!1;var ie=x();return f(ie,1-ie),!0})}E=e.animate(he,{duration:X,fill:"forwards"}),E.onfinish=()=>{x=()=>s,f?.(s,1-s),n()}},{abort:()=>{E&&(E.cancel(),E.effect=null,E.onfinish=Xt)},deactivate:()=>{n=Xt},reset:()=>{s===0&&f?.(1,0)},t:()=>x()}}function En(e,t,a){Ot(()=>{var s=m(()=>t(e,a?.())||{});if(a&&s?.update){var n=!1,i={};Pr(()=>{var l=a();j(l),n&&yn(i,l)&&(i=l,s.update(l))}),n=!0}if(s?.destroy)return()=>s.destroy()})}const Qn=[...` 	
\r\fÂ \v\uFEFF`];function Xl(e,t,a){var s=e==null?"":""+e;if(t&&(s=s?s+" "+t:t),a){for(var n in a)if(a[n])s=s?s+" "+n:n;else if(s.length)for(var i=n.length,l=0;(l=s.indexOf(n,l))>=0;){var o=l+i;(l===0||Qn.includes(s[l-1]))&&(o===s.length||Qn.includes(s[o]))?s=(l===0?"":s.substring(0,l))+s.substring(o+1):l=o}}return s===""?null:s}function Xn(e,t=!1){var a=t?" !important;":";",s="";for(var n in e){var i=e[n];i!=null&&i!==""&&(s+=" "+n+": "+i+a)}return s}function Ds(e){return e[0]!=="-"||e[1]!=="-"?e.toLowerCase():e}function Kl(e,t){if(t){var a="",s,n;if(Array.isArray(t)?(s=t[0],n=t[1]):s=t,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var i=!1,l=0,o=!1,u=[];s&&u.push(...Object.keys(s).map(Ds)),n&&u.push(...Object.keys(n).map(Ds));var d=0,f=-1;const E=e.length;for(var h=0;h<E;h++){var v=e[h];if(o?v==="/"&&e[h-1]==="*"&&(o=!1):i?i===v&&(i=!1):v==="/"&&e[h+1]==="*"?o=!0:v==='"'||v==="'"?i=v:v==="("?l++:v===")"&&l--,!o&&i===!1&&l===0){if(v===":"&&f===-1)f=h;else if(v===";"||h===E-1){if(f!==-1){var p=Ds(e.substring(d,f).trim());if(!u.includes(p)){v!==";"&&h++;var x=e.substring(d,h).trim();a+=" "+x+";"}}d=h+1,f=-1}}}}return s&&(a+=Xn(s)),n&&(a+=Xn(n,!0)),a=a.trim(),a===""?null:a}return e==null?null:String(e)}function Xe(e,t,a,s,n,i){var l=e.__className;if(l!==a||l===void 0){var o=Xl(a,s,i);o==null?e.removeAttribute("class"):e.className=o,e.__className=a}else if(i&&n!==i)for(var u in i){var d=!!i[u];(n==null||d!==!!n[u])&&e.classList.toggle(u,d)}return i}function Os(e,t={},a,s){for(var n in a){var i=a[n];t[n]!==i&&(a[n]==null?e.style.removeProperty(n):e.style.setProperty(n,i,s))}}function gt(e,t,a,s){var n=e.__style;if(n!==t){var i=Kl(t,s);i==null?e.removeAttribute("style"):e.style.cssText=i,e.__style=t}else s&&(Array.isArray(s)?(Os(e,a?.[0],s[0]),Os(e,a?.[1],s[1],"important")):Os(e,a,s));return s}function no(e,t,a=!1){if(e.multiple){if(t==null)return;if(!Jr(t))return rl();for(var s of e.options)s.selected=t.includes(Br(s));return}for(s of e.options){var n=Br(s);if(bl(n,t)){s.selected=!0;return}}(!a||t!==void 0)&&(e.selectedIndex=-1)}function Gl(e){var t=new MutationObserver(()=>{no(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),rs(()=>{t.disconnect()})}function Zl(e,t,a=t){var s=new WeakSet,n=!0;qi(e,"change",i=>{var l=i?"[selected]":":checked",o;if(e.multiple)o=[].map.call(e.querySelectorAll(l),Br);else{var u=e.querySelector(l)??e.querySelector("option:not([disabled])");o=u&&Br(u)}a(o),it!==null&&s.add(it)}),Ot(()=>{var i=t();if(e===document.activeElement){var l=Or??it;if(s.has(l))return}if(no(e,i,n),n&&i===void 0){var o=e.querySelector(":checked");o!==null&&(i=Br(o),a(i))}e.__value=i,n=!1}),Gl(e)}function Br(e){return"__value"in e?e.__value:e.value}const Jl=Symbol("is custom element"),ec=Symbol("is html");function io(e,t){var a=oo(e);a.value===(a.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!=="PROGRESS")||(e.value=t??"")}function Ut(e,t,a,s){var n=oo(e);n[t]!==(n[t]=a)&&(t==="loading"&&(e[Po]=a),a==null?e.removeAttribute(t):typeof a!="string"&&tc(e).includes(t)?e[t]=a:e.setAttribute(t,a))}function oo(e){return e.__attributes??={[Jl]:e.nodeName.includes("-"),[ec]:e.namespaceURI===al}}var Kn=new Map;function tc(e){var t=e.getAttribute("is")||e.nodeName,a=Kn.get(t);if(a)return a;Kn.set(t,a=[]);for(var s,n=e,i=Element.prototype;i!==n;){s=yi(n);for(var l in s)s[l].set&&a.push(l);n=gn(n)}return a}function tr(e,t,a=t){var s=new WeakSet;qi(e,"input",async n=>{var i=n?e.defaultValue:e.value;if(i=qs(e)?Fs(i):i,a(i),it!==null&&s.add(it),await kr(),i!==(i=t())){var l=e.selectionStart,o=e.selectionEnd,u=e.value.length;if(e.value=i??"",o!==null){var d=e.value.length;l===o&&o===u&&d>u?(e.selectionStart=d,e.selectionEnd=d):(e.selectionStart=l,e.selectionEnd=Math.min(o,d))}}}),m(t)==null&&e.value&&(a(qs(e)?Fs(e.value):e.value),it!==null&&s.add(it)),Pr(()=>{var n=t();if(e===document.activeElement){var i=Or??it;if(s.has(i))return}qs(e)&&n===Fs(e.value)||e.type==="date"&&!n&&!e.value||n!==e.value&&(e.value=n??"")})}function qs(e){var t=e.type;return t==="number"||t==="range"}function Fs(e){return e===""?null:+e}class Sn{#e=new WeakMap;#t;#a;static entries=new WeakMap;constructor(t){this.#a=t}observe(t,a){var s=this.#e.get(t)||new Set;return s.add(a),this.#e.set(t,s),this.#r().observe(t,this.#a),()=>{var n=this.#e.get(t);n.delete(a),n.size===0&&(this.#e.delete(t),this.#t.unobserve(t))}}#r(){return this.#t??(this.#t=new ResizeObserver(t=>{for(var a of t){Sn.entries.set(a.target,a);for(var s of this.#e.get(a.target)||[])s(a)}}))}}var ac=new Sn({box:"border-box"});function Gn(e,t,a){var s=ac.observe(e,()=>a(e[t]));Ot(()=>(m(()=>a(e[t])),s))}function Zn(e,t){return e===t||e?.[$a]===t}function Ua(e={},t,a,s){return Ot(()=>{var n,i;return Pr(()=>{n=i,i=[],m(()=>{e!==a(...i)&&(t(e,...i),n&&Zn(a(...n),e)&&t(null,...n))})}),()=>{dr(()=>{i&&Zn(a(...i),e)&&t(null,...i)})}}),e}function Jn(e,t){xl(window,["resize"],()=>vr(()=>t(window[e])))}function Gt(e){return function(...t){var a=t[0];return a.stopPropagation(),e?.apply(this,t)}}function At(e=!1){const t=_t,a=t.l.u;if(!a)return;let s=()=>j(t.s);if(e){let n=0,i={};const l=ts(()=>{let o=!1;const u=t.s;for(const d in u)u[d]!==i[d]&&(i[d]=u[d],o=!0);return o&&n++,n});s=()=>r(l)}a.b.length&&Sl(()=>{ei(t,s),gs(a.b)}),Zs(()=>{const n=m(()=>a.m.map(Mo));return()=>{for(const i of n)typeof i=="function"&&i()}}),a.a.length&&Zs(()=>{ei(t,s),gs(a.a)})}function ei(e,t){if(e.l.s)for(const a of e.l.s)r(a);t()}function Xr(e,t){var a=e.$$events?.[t.type],s=Jr(a)?a.slice():a==null?[]:[a];for(var n of s)n.call(this,t)}function Tn(e,t,a){if(e==null)return t(void 0),a&&a(void 0),Xt;const s=m(()=>e.subscribe(t,a));return s.unsubscribe?()=>s.unsubscribe():s}const hr=[];function rc(e,t){return{subscribe:Ue(e,t).subscribe}}function Ue(e,t=Xt){let a=null;const s=new Set;function n(o){if(yn(e,o)&&(e=o,a)){const u=!hr.length;for(const d of s)d[1](),hr.push(d,e);if(u){for(let d=0;d<hr.length;d+=2)hr[d][0](hr[d+1]);hr.length=0}}}function i(o){n(o(e))}function l(o,u=Xt){const d=[o,u];return s.add(d),s.size===1&&(a=t(n,i)||Xt),o(e),()=>{s.delete(d),s.size===0&&a&&(a(),a=null)}}return{set:n,update:i,subscribe:l}}function lo(e,t,a){const s=!Array.isArray(e),n=s?[e]:e;if(!n.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const i=t.length<2;return rc(a,(l,o)=>{let u=!1;const d=[];let f=0,h=Xt;const v=()=>{if(f)return;h();const x=t(s?d[0]:d,l,o);i?l(x):h=typeof x=="function"?x:Xt},p=n.map((x,E)=>Tn(x,w=>{d[E]=w,f&=~(1<<E),u&&v()},()=>{f|=1<<E}));return u=!0,v(),function(){gs(p),h(),u=!1}})}function et(e){let t;return Tn(e,a=>t=a)(),t}let ls=!1,rn=Symbol();function Ae(e,t,a){const s=a[t]??={store:null,source:T(void 0),unsubscribe:Xt};if(s.store!==e&&!(rn in a))if(s.unsubscribe(),s.store=e??null,e==null)s.source.v=void 0,s.unsubscribe=Xt;else{var n=!0;s.unsubscribe=Tn(e,i=>{n?s.source.v=i:g(s.source,i)}),n=!1}return e&&rn in a?et(e):r(s.source)}function ti(e,t){return e.set(t),t}function jt(){const e={};function t(){rs(()=>{for(var a in e)e[a].unsubscribe();bi(e,rn,{enumerable:!1,value:!0})})}return[e,t]}function sc(e,t,a){return e.set(a),t}function nc(e){var t=ls;try{return ls=!1,[e(),ls]}finally{ls=t}}function wt(e,t,a,s){var n=!Cr||(a&Wo)!==0,i=(a&Xo)!==0,l=(a&Ko)!==0,o=s,u=!0,d=()=>(u&&(u=!1,o=l?m(s):s),o),f;if(i){var h=$a in e||Co in e;f=wr(e,t)?.set??(h&&t in e?he=>e[t]=he:void 0)}var v,p=!1;i?[v,p]=nc(()=>e[t]):v=e[t],v===void 0&&s!==void 0&&(v=d(),f&&(n&&No(),f(v)));var x;if(n?x=()=>{var he=e[t];return he===void 0?d():(u=!0,he)}:x=()=>{var he=e[t];return he!==void 0&&(o=void 0),he===void 0?o:he},n&&(a&Qo)===0)return x;if(f){var E=e.$$legacy;return(function(he,ae){return arguments.length>0?((!n||!ae||E||p)&&f(ae?x():he),he):x()})}var w=!1,S=((a&Vo)!==0?ts:mt)(()=>(w=!1,x()));i&&r(S);var X=ot;return(function(he,ae){if(arguments.length>0){const re=ae?r(S):n&&i?br(he):he;return g(S,re),w=!0,o!==void 0&&(o=re),he}return ur&&w||(X.f&Ta)!==0?S.v:r(S)})}function Ya(e){_t===null&&bn(),Cr&&_t.l!==null?oc(_t).m.push(e):Zs(()=>{const t=m(e);if(typeof t=="function")return t})}function co(e){_t===null&&bn(),Ya(()=>()=>m(e))}function ic(e,t,{bubbles:a=!1,cancelable:s=!1}={}){return new CustomEvent(e,{detail:t,bubbles:a,cancelable:s})}function $n(){const e=_t;return e===null&&bn(),(t,a,s)=>{const n=e.s.$$events?.[t];if(n){const i=Jr(n)?n.slice():[n],l=ic(t,a,s);for(const o of i)o.call(e.x,l);return!l.defaultPrevented}return!0}}function oc(e){var t=e.l;return t.u??={a:[],b:[],m:[]}}const lc="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(lc);il();const cc=e=>e;function vo(e){const t=e-1;return t*t*t+1}function ai(e){const t=typeof e=="string"&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[e,"px"]}function yt(e,{delay:t=0,duration:a=400,easing:s=cc}={}){const n=+getComputedStyle(e).opacity;return{delay:t,duration:a,easing:s,css:i=>`opacity: ${i*n}`}}function uo(e,{delay:t=0,duration:a=400,easing:s=vo,x:n=0,y:i=0,opacity:l=0}={}){const o=getComputedStyle(e),u=+o.opacity,d=o.transform==="none"?"":o.transform,f=u*(1-l),[h,v]=ai(n),[p,x]=ai(i);return{delay:t,duration:a,easing:s,css:(E,w)=>`
			transform: ${d} translate(${(1-E)*h}${v}, ${(1-E)*p}${x});
			opacity: ${u-f*w}`}}function Mn(e,{delay:t=0,duration:a=400,easing:s=vo,start:n=0,opacity:i=0}={}){const l=getComputedStyle(e),o=+l.opacity,u=l.transform==="none"?"":l.transform,d=1-n,f=o*(1-i);return{delay:t,duration:a,easing:s,css:(h,v)=>`
			transform: ${u} scale(${1-d*v});
			opacity: ${o-f*v}
		`}}const dc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-arrows-shuffle-2"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 4l3 3l-3 3" /><path d="M18 20l3 -3l-3 -3" /><path d="M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5" /><path d="M3 17h3a5 5 0 0 0 5 -5a5 5 0 0 1 5 -5h5" /></svg>',vc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-deezer"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 16.5h2v.5h-2z" /><path d="M8 16.5h2.5v.5h-2.5z" /><path d="M16 17h-2.5v-.5h2.5z" /><path d="M21.5 17h-2.5v-.5h2.5z" /><path d="M21.5 13h-2.5v.5h2.5z" /><path d="M21.5 9.5h-2.5v.5h2.5z" /><path d="M21.5 6h-2.5v.5h2.5z" /><path d="M16 13h-2.5v.5h2.5z" /><path d="M8 13.5h2.5v-.5h-2.5z" /><path d="M8 9.5h2.5v.5h-2.5z" /></svg>',uc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-compact-down"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 11l8 3l8 -3" /></svg>',fc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-compact-left"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M13 20l-3 -8l3 -8" /></svg>',hc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-left"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 6l-6 6l6 6" /></svg>',ri='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-disc"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0" /><path d="M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M7 12a5 5 0 0 1 5 -5" /><path d="M12 17a5 5 0 0 0 5 -5" /></svg>',pc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-grip-horizontal"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M5 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M12 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M12 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M19 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M19 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /></svg>',gc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-heart"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M19.5 12.572l-7.5 7.428l-7.5 -7.428a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572" /></svg>',_c='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-heart"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6.979 3.074a6 6 0 0 1 4.988 1.425l.037 .033l.034 -.03a6 6 0 0 1 4.733 -1.44l.246 .036a6 6 0 0 1 3.364 10.008l-.18 .185l-.048 .041l-7.45 7.379a1 1 0 0 1 -1.313 .082l-.094 -.082l-7.493 -7.422a6 6 0 0 1 3.176 -10.215z" /></svg>',mc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-menu-2"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 6l16 0" /><path d="M4 12l16 0" /><path d="M4 18l16 0" /></svg>',Bs='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-music"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 17a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /><path d="M13 17a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /><path d="M9 17v-13h10v13" /><path d="M9 8h10" /></svg>',bc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-pause"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z" /><path d="M17 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z" /></svg>',yc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-player-play"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 4v16l13 -8z" /></svg>',wc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-play"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 4v16a1 1 0 0 0 1.524 .852l13 -8a1 1 0 0 0 0 -1.704l-13 -8a1 1 0 0 0 -1.524 .852z" /></svg>',kc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-skip-back"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M19.496 4.136l-12 7a1 1 0 0 0 0 1.728l12 7a1 1 0 0 0 1.504 -.864v-14a1 1 0 0 0 -1.504 -.864z" /><path d="M4 4a1 1 0 0 1 .993 .883l.007 .117v14a1 1 0 0 1 -1.993 .117l-.007 -.117v-14a1 1 0 0 1 1 -1z" /></svg>',xc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-skip-forward"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 5v14a1 1 0 0 0 1.504 .864l12 -7a1 1 0 0 0 0 -1.728l-12 -7a1 1 0 0 0 -1.504 .864z" /><path d="M20 4a1 1 0 0 1 .993 .883l.007 .117v14a1 1 0 0 1 -1.993 .117l-.007 -.117v-14a1 1 0 0 1 1 -1z" /></svg>',Ec='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-playlist"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0" /><path d="M17 17v-13h4" /><path d="M13 5h-10" /><path d="M3 9l10 0" /><path d="M9 13h-6" /></svg>',Sc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-radio"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3l-9.371 3.749a1 1 0 0 0 -.629 .928v11.323a1 1 0 0 0 1 1h14a1 1 0 0 0 1 -1v-11a1 1 0 0 0 -1 -1h-14.5" /><path d="M4 12h16" /><path d="M7 12v-2" /><path d="M17 16v.01" /><path d="M13 16v.01" /></svg>',Tc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-refresh"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4" /><path d="M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4" /></svg>',$c='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-repeat"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 12v-3a3 3 0 0 1 3 -3h13m-3 -3l3 3l-3 3" /><path d="M20 12v3a3 3 0 0 1 -3 3h-13m3 3l-3 -3l3 -3" /></svg>',Mc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-search"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0" /><path d="M21 21l-6 -6" /></svg>',Ac='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-settings"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z" /><path d="M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /></svg>',Cc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-trash"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 7l16 0" /><path d="M10 11l0 6" /><path d="M14 11l0 6" /><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12" /><path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3" /></svg>',Pc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 8a5 5 0 0 1 0 8" /><path d="M17.7 5a9 9 0 0 1 0 14" /><path d="M6 15h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l3.5 -4.5a.8 .8 0 0 1 1.5 .5v14a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5" /></svg>',Lc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume-2"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 8a5 5 0 0 1 0 8" /><path d="M6 15h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l3.5 -4.5a.8 .8 0 0 1 1.5 .5v14a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5" /></svg>',zc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume-3"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 15h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l3.5 -4.5a.8 .8 0 0 1 1.5 .5v14a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5" /><path d="M16 10l4 4m0 -4l-4 4" /></svg>',Rc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume-off"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 8a5 5 0 0 1 1.912 4.934m-1.377 2.602a5 5 0 0 1 -.535 .464" /><path d="M17.7 5a9 9 0 0 1 2.362 11.086m-1.676 2.299a9 9 0 0 1 -.686 .615" /><path d="M9.069 5.054l.431 -.554a.8 .8 0 0 1 1.5 .5v2m0 4v8a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l1.294 -1.664" /><path d="M3 3l18 18" /></svg>',jc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-x"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 6l-12 12" /><path d="M6 6l12 12" /></svg>',Ic='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-device-floppy"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2" /><path d="M12 14m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0" /><path d="M14 4l0 4l-6 0l0 -4" /></svg>',Nc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-file-pencil"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3v4a1 1 0 0 0 1 1h4" /><path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z" /><path d="M10 18l5 -5a1.414 1.414 0 0 0 -2 -2l-5 5v2h2z" /></svg>',si='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-plus"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 5l0 14" /><path d="M5 12l14 0" /></svg>',Dc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-circle-check"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0" /><path d="M9 12l2 2l4 -4" /></svg>',Oc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-dots"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /></svg>',qc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-sort-descending"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 6l9 0" /><path d="M4 12l7 0" /><path d="M4 18l7 0" /><path d="M15 15l3 3l3 -3" /><path d="M18 6l0 12" /></svg>',Fc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-sort-ascending"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 6l7 0" /><path d="M4 12l7 0" /><path d="M4 18l9 0" /><path d="M15 9l3 -3l3 3" /><path d="M18 6l0 12" /></svg>',Bc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-yandex"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 20v-16h-2a4 4 0 0 0 -4 4v1a4 4 0 0 0 4 4h2" /><path d="M9 20l3 -7" /></svg>',y={ARTISTS:Bs,ALBUMS:ri,GENRES:Bs,PLAYLISTS:Ec,RADIO:Sc,SEARCH:Mc,PLAY:wc,PLAY_OUTLINE:yc,PAUSE:bc,PREVIOUS:kc,NEXT:xc,SHUFFLE:dc,REPEAT:$c,VOLUME_FULL:Pc,VOLUME_MEDIUM:Lc,VOLUME_MUTE:zc,VOLUME_OFF:Rc,HEART:gc,HEART_FILLED:_c,SYNC:Tc,SETTINGS:Ac,CLOSE:jc,MENU:mc,BACK:hc,BACK_COMPACT:fc,CHEVRON_DOWN:uc,DRAG_HANDLE:pc,REMOVE:Cc,DEEZER:vc,SAVE:Ic,EDIT:Nc,ADD:si,ACCEPT:Dc,DOTS:Oc,ADD_TO_PLAYLIST:si,ALBUM_LINK:ri,ARTIST_LINK:Bs,SORT_DESC:qc,SORT_ASC:Fc,YANDEX:Bc};function Tr(e){if(!e||!e.image)return null;if(e.image.startsWith("http"))return e.image;let t="";return e.image==="local"?t=`${e.name}.jpg`:t=e.image,`/imagesw/radio-logos/thumbs/${encodeURIComponent(t)}`}function ni(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}const sn=[{id:"default",label:"Default (Moode Dark)",colors:{"--c-white-10":"rgba(255, 255, 255, 0.1)","--c-white-20":"rgba(255, 255, 255, 0.2)","--c-white-30":"rgba(255, 255, 255, 0.3)","--c-white-50":"rgba(255, 255, 255, 0.5)","--c-white-60":"rgba(255, 255, 255, 0.6)","--c-white-90":"rgba(255, 255, 255, 0.9)","--c-black-20":"rgba(0, 0, 0, 0.2)","--c-black-50":"rgba(0, 0, 0, 0.5)","--c-black-70":"rgba(0, 0, 0, 0.7)","--c-black-80":"rgba(0, 0, 0, 0.8)","--c-black-90":"rgba(0, 0, 0, 0.9)","--c-accent":"#fa2d48","--c-accent-hover":"#ff4d65","--c-text-primary":"#ffffff","--c-text-secondary":"rgba(255, 255, 255, 0.6)","--c-text-muted":"#888888","--c-text-inverse":"#000000","--c-bg-app":"#000000","--c-bg-main":"#121212","--c-bg-sidebar":"#000000","--c-bg-card":"#1a1a1a","--c-bg-placeholder":"rgba(255, 255, 255, 0.1)","--c-bg-glass":"rgba(18, 18, 18, 0.95)","--c-bg-toast":"#333333","--c-heart":"#ff4444","--c-error":"#ff4444","--c-surface-hover":"rgba(255, 255, 255, 0.1)","--c-surface-active":"rgba(255, 255, 255, 0.2)","--c-surface-input":"#1a1a1a","--c-surface-input-focus":"rgba(255, 255, 255, 0.1)","--c-surface-button":"rgba(255, 255, 255, 0.1)","--c-surface-button-hover":"rgba(255, 255, 255, 0.1)","--c-surface-drag-phantom":"#1a1a1a","--c-surface-drag-land":"rgba(255, 255, 255, 0.1)","--c-rail-bg":"rgba(255, 255, 255, 0.2)","--c-rail-bg-hover":"rgba(255, 255, 255, 0.3)","--c-skeleton-base":"rgba(255, 255, 255, 0.1)","--c-border":"rgba(255, 255, 255, 0.1)","--c-border-dim":"rgba(255, 255, 255, 0.1)","--c-border-bright":"rgba(255, 255, 255, 0.2)","--c-border-dashed":"rgba(255, 255, 255, 0.2)","--c-border-dashed-hover":"rgba(255, 255, 255, 0.5)","--c-overlay-dim":"rgba(0, 0, 0, 0.5)","--c-overlay-backdrop":"rgba(0, 0, 0, 0.8)","--c-shadow-card":"rgba(0, 0, 0, 0.3)","--c-shadow-popover":"rgba(0, 0, 0, 0.5)","--c-shadow-header":"rgba(0, 0, 0, 0.5)","--c-shadow-phantom":"rgba(0, 0, 0, 0.7)","--c-shadow-glow-accent":"rgba(250, 45, 72, 0.5)","--c-icon-idle":"#9ca3af","--c-icon-hover":"#ffffff","--c-icon-faint":"rgba(255, 255, 255, 0.5)","--icon-stroke-width":"1.5px","--header-height":"64px","--mini-player-height":"90px","--sidebar-width":"260px","--radius-sm":"4px","--radius-md":"8px","--radius-lg":"12px","--radius-xl":"20px","--radius-full":"9999px","--z-base":"1","--z-dock":"1000","--z-modal":"2000","--z-toast":"3000","--z-drag-item":"9999","--trans-fast":"0.2s ease","--trans-smooth":"0.3s cubic-bezier(0.2, 0.8, 0.2, 1)","--c-pl-0":"#fa2d48","--c-pl-1":"#2d7afa","--c-pl-2":"#2dfa85","--c-pl-3":"#faac2d","--c-pl-4":"#b82dfa","--c-pl-5":"#2dfaf3"}},{id:"gruvbox",label:"Gruvbox Dark",colors:{"--c-white-10":"rgba(251, 241, 199, 0.1)","--c-white-20":"rgba(251, 241, 199, 0.2)","--c-white-30":"rgba(251, 241, 199, 0.3)","--c-white-50":"rgba(251, 241, 199, 0.5)","--c-white-60":"rgba(251, 241, 199, 0.6)","--c-white-90":"rgba(251, 241, 199, 0.9)","--c-black-20":"rgba(40, 40, 40, 0.2)","--c-black-50":"rgba(40, 40, 40, 0.5)","--c-black-70":"rgba(40, 40, 40, 0.7)","--c-black-80":"rgba(40, 40, 40, 0.8)","--c-black-90":"rgba(40, 40, 40, 0.9)","--c-accent":"#d65d0e","--c-accent-hover":"#fe8019","--c-text-primary":"#fbf1c7","--c-text-secondary":"#ebdbb2","--c-text-muted":"#928374","--c-text-inverse":"#282828","--c-bg-app":"#282828","--c-bg-main":"#282828","--c-bg-sidebar":"#282828","--c-bg-card":"#3c3836","--c-bg-placeholder":"#504945","--c-bg-glass":"rgba(40, 40, 40, 0.98)","--c-bg-toast":"#32302f","--c-heart":"#fb4934","--c-error":"#cc241d","--c-surface-hover":"#3c3836","--c-surface-active":"#504945","--c-surface-input":"#3c3836","--c-surface-input-focus":"#504945","--c-surface-button":"rgba(251, 241, 199, 0.1)","--c-surface-button-hover":"rgba(251, 241, 199, 0.2)","--c-surface-drag-phantom":"#504945","--c-surface-drag-land":"rgba(251, 241, 199, 0.1)","--c-rail-bg":"#504945","--c-rail-bg-hover":"#665c54","--c-skeleton-base":"#3c3836","--c-border":"#504945","--c-border-dim":"#3c3836","--c-border-bright":"#665c54","--c-border-dashed":"rgba(168, 153, 132, 0.2)","--c-border-dashed-hover":"rgba(168, 153, 132, 0.5)","--c-overlay-dim":"rgba(40, 40, 40, 0.6)","--c-overlay-backdrop":"rgba(29, 32, 33, 0.8)","--c-shadow-card":"rgba(0, 0, 0, 0.3)","--c-shadow-popover":"rgba(0, 0, 0, 0.5)","--c-shadow-header":"rgba(0, 0, 0, 0.2)","--c-shadow-phantom":"rgba(0, 0, 0, 0.5)","--c-shadow-glow-accent":"rgba(214, 93, 14, 0.3)","--c-icon-idle":"#a89984","--c-icon-hover":"#fbf1c7","--c-icon-faint":"#504945","--icon-stroke-width":"1.5px","--header-height":"64px","--mini-player-height":"90px","--sidebar-width":"260px","--radius-sm":"4px","--radius-md":"8px","--radius-lg":"12px","--radius-xl":"16px","--radius-full":"9999px","--z-base":"1","--z-dock":"1000","--z-modal":"2000","--z-toast":"3000","--z-drag-item":"9999","--trans-fast":"0.2s ease","--trans-smooth":"0.3s cubic-bezier(0.2, 0.8, 0.2, 1)","--c-pl-0":"#cc241d","--c-pl-1":"#458588","--c-pl-2":"#a6e3a1","--c-pl-3":"#d65d0e","--c-pl-4":"#b16286","--c-pl-5":"#fabd2f"}}];function Uc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Us={exports:{}},Ys={exports:{}},ii;function Yc(){return ii||(ii=1,(function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t={rotl:function(a,s){return a<<s|a>>>32-s},rotr:function(a,s){return a<<32-s|a>>>s},endian:function(a){if(a.constructor==Number)return t.rotl(a,8)&16711935|t.rotl(a,24)&4278255360;for(var s=0;s<a.length;s++)a[s]=t.endian(a[s]);return a},randomBytes:function(a){for(var s=[];a>0;a--)s.push(Math.floor(Math.random()*256));return s},bytesToWords:function(a){for(var s=[],n=0,i=0;n<a.length;n++,i+=8)s[i>>>5]|=a[n]<<24-i%32;return s},wordsToBytes:function(a){for(var s=[],n=0;n<a.length*32;n+=8)s.push(a[n>>>5]>>>24-n%32&255);return s},bytesToHex:function(a){for(var s=[],n=0;n<a.length;n++)s.push((a[n]>>>4).toString(16)),s.push((a[n]&15).toString(16));return s.join("")},hexToBytes:function(a){for(var s=[],n=0;n<a.length;n+=2)s.push(parseInt(a.substr(n,2),16));return s},bytesToBase64:function(a){for(var s=[],n=0;n<a.length;n+=3)for(var i=a[n]<<16|a[n+1]<<8|a[n+2],l=0;l<4;l++)n*8+l*6<=a.length*8?s.push(e.charAt(i>>>6*(3-l)&63)):s.push("=");return s.join("")},base64ToBytes:function(a){a=a.replace(/[^A-Z0-9+\/]/ig,"");for(var s=[],n=0,i=0;n<a.length;i=++n%4)i!=0&&s.push((e.indexOf(a.charAt(n-1))&Math.pow(2,-2*i+8)-1)<<i*2|e.indexOf(a.charAt(n))>>>6-i*2);return s}};Ys.exports=t})()),Ys.exports}var Hs,oi;function li(){if(oi)return Hs;oi=1;var e={utf8:{stringToBytes:function(t){return e.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(e.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var a=[],s=0;s<t.length;s++)a.push(t.charCodeAt(s)&255);return a},bytesToString:function(t){for(var a=[],s=0;s<t.length;s++)a.push(String.fromCharCode(t[s]));return a.join("")}}};return Hs=e,Hs}var Vs,ci;function Hc(){if(ci)return Vs;ci=1,Vs=function(a){return a!=null&&(e(a)||t(a)||!!a._isBuffer)};function e(a){return!!a.constructor&&typeof a.constructor.isBuffer=="function"&&a.constructor.isBuffer(a)}function t(a){return typeof a.readFloatLE=="function"&&typeof a.slice=="function"&&e(a.slice(0,0))}return Vs}var di;function Vc(){return di||(di=1,(function(){var e=Yc(),t=li().utf8,a=Hc(),s=li().bin,n=function(i,l){i.constructor==String?l&&l.encoding==="binary"?i=s.stringToBytes(i):i=t.stringToBytes(i):a(i)?i=Array.prototype.slice.call(i,0):!Array.isArray(i)&&i.constructor!==Uint8Array&&(i=i.toString());for(var o=e.bytesToWords(i),u=i.length*8,d=1732584193,f=-271733879,h=-1732584194,v=271733878,p=0;p<o.length;p++)o[p]=(o[p]<<8|o[p]>>>24)&16711935|(o[p]<<24|o[p]>>>8)&4278255360;o[u>>>5]|=128<<u%32,o[(u+64>>>9<<4)+14]=u;for(var x=n._ff,E=n._gg,w=n._hh,S=n._ii,p=0;p<o.length;p+=16){var X=d,he=f,ae=h,re=v;d=x(d,f,h,v,o[p+0],7,-680876936),v=x(v,d,f,h,o[p+1],12,-389564586),h=x(h,v,d,f,o[p+2],17,606105819),f=x(f,h,v,d,o[p+3],22,-1044525330),d=x(d,f,h,v,o[p+4],7,-176418897),v=x(v,d,f,h,o[p+5],12,1200080426),h=x(h,v,d,f,o[p+6],17,-1473231341),f=x(f,h,v,d,o[p+7],22,-45705983),d=x(d,f,h,v,o[p+8],7,1770035416),v=x(v,d,f,h,o[p+9],12,-1958414417),h=x(h,v,d,f,o[p+10],17,-42063),f=x(f,h,v,d,o[p+11],22,-1990404162),d=x(d,f,h,v,o[p+12],7,1804603682),v=x(v,d,f,h,o[p+13],12,-40341101),h=x(h,v,d,f,o[p+14],17,-1502002290),f=x(f,h,v,d,o[p+15],22,1236535329),d=E(d,f,h,v,o[p+1],5,-165796510),v=E(v,d,f,h,o[p+6],9,-1069501632),h=E(h,v,d,f,o[p+11],14,643717713),f=E(f,h,v,d,o[p+0],20,-373897302),d=E(d,f,h,v,o[p+5],5,-701558691),v=E(v,d,f,h,o[p+10],9,38016083),h=E(h,v,d,f,o[p+15],14,-660478335),f=E(f,h,v,d,o[p+4],20,-405537848),d=E(d,f,h,v,o[p+9],5,568446438),v=E(v,d,f,h,o[p+14],9,-1019803690),h=E(h,v,d,f,o[p+3],14,-187363961),f=E(f,h,v,d,o[p+8],20,1163531501),d=E(d,f,h,v,o[p+13],5,-1444681467),v=E(v,d,f,h,o[p+2],9,-51403784),h=E(h,v,d,f,o[p+7],14,1735328473),f=E(f,h,v,d,o[p+12],20,-1926607734),d=w(d,f,h,v,o[p+5],4,-378558),v=w(v,d,f,h,o[p+8],11,-2022574463),h=w(h,v,d,f,o[p+11],16,1839030562),f=w(f,h,v,d,o[p+14],23,-35309556),d=w(d,f,h,v,o[p+1],4,-1530992060),v=w(v,d,f,h,o[p+4],11,1272893353),h=w(h,v,d,f,o[p+7],16,-155497632),f=w(f,h,v,d,o[p+10],23,-1094730640),d=w(d,f,h,v,o[p+13],4,681279174),v=w(v,d,f,h,o[p+0],11,-358537222),h=w(h,v,d,f,o[p+3],16,-722521979),f=w(f,h,v,d,o[p+6],23,76029189),d=w(d,f,h,v,o[p+9],4,-640364487),v=w(v,d,f,h,o[p+12],11,-421815835),h=w(h,v,d,f,o[p+15],16,530742520),f=w(f,h,v,d,o[p+2],23,-995338651),d=S(d,f,h,v,o[p+0],6,-198630844),v=S(v,d,f,h,o[p+7],10,1126891415),h=S(h,v,d,f,o[p+14],15,-1416354905),f=S(f,h,v,d,o[p+5],21,-57434055),d=S(d,f,h,v,o[p+12],6,1700485571),v=S(v,d,f,h,o[p+3],10,-1894986606),h=S(h,v,d,f,o[p+10],15,-1051523),f=S(f,h,v,d,o[p+1],21,-2054922799),d=S(d,f,h,v,o[p+8],6,1873313359),v=S(v,d,f,h,o[p+15],10,-30611744),h=S(h,v,d,f,o[p+6],15,-1560198380),f=S(f,h,v,d,o[p+13],21,1309151649),d=S(d,f,h,v,o[p+4],6,-145523070),v=S(v,d,f,h,o[p+11],10,-1120210379),h=S(h,v,d,f,o[p+2],15,718787259),f=S(f,h,v,d,o[p+9],21,-343485551),d=d+X>>>0,f=f+he>>>0,h=h+ae>>>0,v=v+re>>>0}return e.endian([d,f,h,v])};n._ff=function(i,l,o,u,d,f,h){var v=i+(l&o|~l&u)+(d>>>0)+h;return(v<<f|v>>>32-f)+l},n._gg=function(i,l,o,u,d,f,h){var v=i+(l&u|o&~u)+(d>>>0)+h;return(v<<f|v>>>32-f)+l},n._hh=function(i,l,o,u,d,f,h){var v=i+(l^o^u)+(d>>>0)+h;return(v<<f|v>>>32-f)+l},n._ii=function(i,l,o,u,d,f,h){var v=i+(o^(l|~u))+(d>>>0)+h;return(v<<f|v>>>32-f)+l},n._blocksize=16,n._digestsize=16,Us.exports=function(i,l){if(i==null)throw new Error("Illegal argument "+i);var o=e.wordsToBytes(n(i,l));return l&&l.asBytes?o:l&&l.asString?s.bytesToString(o):e.bytesToHex(o)}})()),Us.exports}var Wc=Vc();const Qc=Uc(Wc),vi=Ue("Disconnected"),yr=Ue(!1),nn=Ue(null);let Ws;function Ie(e,t="info"){nn.set({text:e,type:t}),Ws&&clearTimeout(Ws),Ws=setTimeout(()=>{nn.set(null)},3e3)}const Xc=localStorage.getItem("app_theme")||"default",ys=Ue(Xc);ys.subscribe(e=>{if(typeof document>"u")return;localStorage.setItem("app_theme",e);const t=sn.find(s=>s.id===e);if(!t)return;const a=document.documentElement;document.body.setAttribute("data-theme",e),Object.entries(t.colors).forEach(([s,n])=>{a.style.setProperty(s,n)})});const ws=Ue({isOpen:!1,title:"",message:"",confirmLabel:"Confirm",cancelLabel:"Cancel",onConfirm:null,type:"confirm",inputValue:"",placeholder:"",options:[]});function pa({title:e="Confirm Action",message:t="Are you sure?",confirmLabel:a="Confirm",cancelLabel:s="Cancel",type:n="confirm",inputValue:i="",placeholder:l="",options:o=[],onConfirm:u=()=>{}}){ws.set({isOpen:!0,title:e,message:t,confirmLabel:a,cancelLabel:s,type:n,inputValue:i,placeholder:l,options:o,onConfirm:u})}function cs(){ws.set({isOpen:!1,title:"",message:"",confirmLabel:"",cancelLabel:"",onConfirm:null,type:"confirm",inputValue:"",placeholder:"",options:[]})}const xt=Ue({state:"stop",volume:50,elapsed:0,duration:0,random:!1,repeat:!1,bitrate:0,format:"",song:0,songid:0}),Yt=Ue({title:"Not Playing",artist:"",album:"",file:"",stationName:null,id:null,pos:null,isYandex:!1}),ks=Ue({active:!1,tracks:[],currentIndex:-1,currentTrackId:null,currentTrackFile:null,streamCache:{}}),xs=Ue(!1),us=Ue(!1),on=Ue(!1),ln=Ue(!1),Nt=Ue("library"),Ls=Ue(null),ia=Ue(!1),Kc=localStorage.getItem("sidebarCollapsed")==="true",cn=Ue(Kc);cn.subscribe(e=>{typeof localStorage<"u"&&localStorage.setItem("sidebarCollapsed",String(e))});const Ha=Ue([]),zs=Ue([]),Ur=Ue([]),Gc=Ue(null),Ia=Ue(new Set),kt=Ue(!1),Wt=Ue([{view:"root"}]),Fa=Ue([]),fo=Ue(0),Yr=Ue(""),ho=Ue({});function Zc(e,t){ho.update(a=>({...a,[e]:t}))}function Jc(e){return et(ho)[e]||0}const An=Ue({isOpen:!1,track:null,context:{type:"general",playlistName:null,index:null},x:0,y:0,triggerRect:null});function ed(){if(typeof navigator<"u"&&navigator.vibrate)try{navigator.vibrate(70)}catch{}}function Kr(e,t,a={}){if(!t&&a.type!=="playlist-card")return;ed();let s=0,n=0,i=null,l=e.currentTarget;!l&&e.target&&e.target.closest&&(l=e.target.closest("button")||e.target),l&&l.getBoundingClientRect&&(i=l.getBoundingClientRect());const o=e.detail?.originalEvent||e;o.touches&&o.touches.length>0?(s=o.touches[0].clientX,n=o.touches[0].clientY):o.clientX&&(s=o.clientX,n=o.clientY);const u={type:"general",playlistName:null,index:null,...a};An.set({isOpen:!0,track:t,context:u,x:s,y:n,triggerRect:i})}function zt(){An.set({isOpen:!1,track:null,context:{},x:0,y:0,triggerRect:null})}let dn=null,vn=null;function td(e){vn=e}function Ba(e,t=null){t&&(dn=t),vn?vn(e,t):console.warn("Router callback not set!")}function ad(){const e=dn;return dn=null,e}function rd(){window.history.back()}function $r(e,t=[],a=null){if(!e||!e.file)return"/images/default_cover.png";if(e.image&&e.image.startsWith("http"))return e.image;if(po(e.file)||e.genre==="Radio")return e.image?Tr(e):go(e,t,a)||"/images/radio_placeholder.png";let s=e.file.startsWith("/")?e.file.slice(1):e.file;return`/coverart.php/${encodeURI(s)}`}function Gr(e,t="sm",a=[],s=null){if(!e||e.file&&(po(e.file)||e.genre==="Radio"||Array.isArray(e)))return e&&e.image?Tr(e):go(e,a,s)||"/images/radio_icon.png";if(e.image&&e.image.startsWith("http"))return e.image;if(!e.file)return"/images/default_icon.png";if(e.thumbHash){const n=t==="md"?"":"_sm";return`/imagesw/thmcache/${e.thumbHash}${n}.jpg`}try{const n=e.file.lastIndexOf("/"),i=n===-1?".":e.file.substring(0,n);return`/imagesw/thmcache/${Qc(i)}${t==="md"?"":"_sm"}.jpg`}catch{let i=e.file.startsWith("/")?e.file.slice(1):e.file;return`/coverart.php/${encodeURI(i)}`}}function po(e){return!e||e.includes("yandex.net")||e.includes("get-mp3")?!1:e.startsWith("http")||e.includes("://")||e.includes("RADIO")}function go(e,t,a){const s=u=>(u||"").toString().toLowerCase().replace(/[^a-z0-9]/g,""),n=s(e?.title),i=s(e?.stationName),l=s(a);if(t&&t.length>0){const u=t.find(d=>{const f=s(d.name);return f?f===i||f===l||n&&f===n||n&&n.includes(f)&&f.length>3:!1});if(u)return Tr(u)}const o=e?.stationName||a;return o?Tr({name:o,image:"local"}):null}lo([Yt,Ha,Ls],([e,t,a])=>$r(e,t,a));lo(Yt,e=>!e||!e.file||e.file.startsWith("http")?null:`/coverart.php/${encodeURI(e.file)}`);const sd=localStorage.getItem("alarmTime")||"08:00",nd=localStorage.getItem("alarmEnabled")==="true",id=localStorage.getItem("alarmPlaylist")||"Favorites",un=Ue(sd),fn=Ue(nd),hn=Ue(id);un.subscribe(e=>localStorage.setItem("alarmTime",e));fn.subscribe(e=>localStorage.setItem("alarmEnabled",String(e)));hn.subscribe(e=>localStorage.setItem("alarmPlaylist",e));const od=localStorage.getItem("yandex_enabled")==="true",Es=Ue(od);Es.subscribe(e=>{typeof localStorage<"u"&&localStorage.setItem("yandex_enabled",String(e))});const ld=Ue(new Set),pt={NAME:"MoodePlayerDB",STORE_NAME:"music",VERSION:3},Wa={SYNC:"/wave-api.php",YANDEX:"/wave-yandex-api.php",STATIONS:e=>"/wave-api.php?action=stations",COVER_ART:e=>`/coverart.php?u=${encodeURIComponent(e)}`,RADIO_LOGOS:e=>`/imagesw/radio-logos/thumbs/${e}`},Na={open(){return new Promise((e,t)=>{const a=indexedDB.open(pt.NAME,pt.VERSION);a.onupgradeneeded=s=>{const n=s.target.result,i=s.target.transaction;let l;n.objectStoreNames.contains(pt.STORE_NAME)?l=i.objectStore(pt.STORE_NAME):l=n.createObjectStore(pt.STORE_NAME,{keyPath:"file"}),l.indexNames.contains("artist")||l.createIndex("artist","artist",{unique:!1}),l.indexNames.contains("album")||l.createIndex("album","album",{unique:!1}),l.indexNames.contains("genre")||l.createIndex("genre","genre",{unique:!1}),l.indexNames.contains("album_artist")||l.createIndex("album_artist","album_artist",{unique:!1})},a.onsuccess=()=>e(a.result),a.onerror=()=>t(a.error)})},async clear(){const e=await this.open();return new Promise((t,a)=>{const s=e.transaction(pt.STORE_NAME,"readwrite");s.objectStore(pt.STORE_NAME).clear(),s.oncomplete=()=>t(),s.onerror=()=>a(s.error)})},async bulkAdd(e){const t=await this.open();return new Promise((a,s)=>{const n=t.transaction(pt.STORE_NAME,"readwrite"),i=n.objectStore(pt.STORE_NAME);e.forEach(l=>i.put(l)),n.oncomplete=()=>a(),n.onerror=()=>s(n.error)})},async getFilesMap(e){if(!e||e.length===0)return new Map;const t=await this.open();return new Promise(a=>{const n=t.transaction(pt.STORE_NAME,"readonly").objectStore(pt.STORE_NAME),i=new Map;let l=0;e.forEach(o=>{const u=o.normalize("NFC").trim(),d=n.get(u);d.onsuccess=f=>{f.target.result&&i.set(o,f.target.result),l++,l===e.length&&a(i)},d.onerror=()=>{l++,l===e.length&&a(i)}})})},async getArtists(){const e=await this.open();return new Promise((t,a)=>{const n=e.transaction(pt.STORE_NAME,"readonly").objectStore(pt.STORE_NAME),i=new Map,l=n.openCursor();l.onsuccess=o=>{const u=o.target.result;if(u){const d=u.value,f=d.album_artist||d.artist;f&&!i.has(f)&&i.set(f,{name:f,file:d.file,thumbHash:d.thumbHash}),u.continue()}else{const d=Array.from(i.values()).sort((f,h)=>f.name.localeCompare(h.name,void 0,{sensitivity:"base"}));t(d)}},l.onerror=()=>a(l.error)})},async getAlbums(){const e=await this.open();return new Promise((t,a)=>{const n=e.transaction(pt.STORE_NAME,"readonly").objectStore(pt.STORE_NAME).index("album"),i=[],l=n.openCursor(null,"nextunique");l.onsuccess=o=>{const u=o.target.result;if(u){const d=u.value;i.push({name:d.album,artist:d.album_artist||d.artist,file:d.file,thumbHash:d.thumbHash,qualityBadge:d.qualityBadge,year:d.year||0}),u.continue()}else t(i)},l.onerror=()=>a(l.error)})},async getArtistAlbums(e){if(!e)return[];const t=await this.open(),a=e.normalize("NFC").trim();return new Promise((s,n)=>{const l=t.transaction(pt.STORE_NAME,"readonly").objectStore(pt.STORE_NAME),o=new Promise(d=>{l.indexNames.contains("album_artist")?l.index("album_artist").getAll(IDBKeyRange.only(a)).onsuccess=f=>d(f.target.result):d([])}),u=new Promise(d=>{l.index("artist").getAll(IDBKeyRange.only(a)).onsuccess=f=>d(f.target.result)});Promise.all([o,u]).then(([d,f])=>{const h=[...d,...f],v=[],p=new Set;h.forEach(x=>{p.has(x.album)||(p.add(x.album),v.push({name:x.album,artist:x.album_artist||x.artist,file:x.file,thumbHash:x.thumbHash,qualityBadge:x.qualityBadge,year:x.year||0}))}),s(v)}).catch(d=>n(d))})},async getAlbumTracks(e,t=null){const a=await this.open(),s=e.normalize("NFC").trim(),n=t?t.normalize("NFC").trim():null;return console.log(`[DB] getAlbumTracks called. Album: "${s}", FilterArtist: "${n}"`),new Promise((i,l)=>{const u=a.transaction(pt.STORE_NAME,"readonly").objectStore(pt.STORE_NAME).index("album"),d=IDBKeyRange.only(s),f=u.getAll(d);f.onsuccess=()=>{let h=f.result;if(console.log(`[DB] Found ${h.length} raw tracks for album "${s}"`),n){const v=h.length;h=h.filter(p=>{const x=(p.artist||"").normalize("NFC").trim(),E=(p.album_artist||"").normalize("NFC").trim();return x===n||E===n}),console.log(`[DB] After artist filter: ${h.length} tracks (Removed ${v-h.length})`)}else console.log("[DB] No artist filter provided. Returning all tracks.");h.sort((v,p)=>{const x=parseInt(v.disc||1),E=parseInt(p.disc||1);if(x!==E)return x-E;const w=parseInt(v.track||0),S=parseInt(p.track||0);return w-S}),i(h)},f.onerror=()=>l(f.error)})},async getGenres(){const e=await this.open();return new Promise((t,a)=>{const n=e.transaction(pt.STORE_NAME,"readonly").objectStore(pt.STORE_NAME).index("genre"),i=[],l=n.openKeyCursor(null,"nextunique");l.onsuccess=o=>{const u=o.target.result;u?(i.push(u.key),u.continue()):t(i)},l.onerror=()=>a(l.error)})},async getGenreTracks(e){const t=await this.open(),a=e.normalize("NFC").trim();return new Promise((s,n)=>{const o=t.transaction(pt.STORE_NAME,"readonly").objectStore(pt.STORE_NAME).index("genre").getAll(IDBKeyRange.only(a));o.onsuccess=()=>s(o.result),o.onerror=()=>n(o.error)})},async search(e){if(!e)return[];const t=e.toLowerCase().normalize("NFC").trim(),a=await this.open();return new Promise((s,n)=>{const l=a.transaction(pt.STORE_NAME,"readonly").objectStore(pt.STORE_NAME),o=[],u=100,d=l.openCursor();d.onsuccess=f=>{const h=f.target.result;if(h){const v=h.value;if((v.title&&v.title.toLowerCase().includes(t)||v.artist&&v.artist.toLowerCase().includes(t)||v.album&&v.album.toLowerCase().includes(t)||v.album_artist&&v.album_artist.toLowerCase().includes(t))&&o.push(v),o.length>=u){s(o);return}h.continue()}else s(o)},d.onerror=()=>n(d.error)})}};var cd=k('<div class="skeleton svelte-tl058d"></div>');function Kt(e,t){let a=wt(t,"width",8,"100%"),s=wt(t,"height",8,"20px"),n=wt(t,"radius",8,"4px"),i=wt(t,"style",8,"");var l=cd();ve(()=>gt(l,`width: ${a()??""}; height: ${s()??""}; border-radius: ${n()??""}; ${i()??""}`)),b(e,l)}var dd=k('<div class="skel svelte-1b8que2"><!></div>'),vd=k('<img loading="lazy"/>'),ud=k('<div class="loader svelte-1b8que2"><!> <!> <!></div>');function Qt(e,t){Et(t,!1);let a=wt(t,"src",8),s=wt(t,"alt",8,""),n=wt(t,"radius",8,"0px");const i=$n();let l=T("loading");function o(){g(l,"loaded")}function u(w){i("error",w),g(l,"error")}ne(()=>j(a()),()=>{a()?g(l,"loading"):g(l,"error")}),Ht(),At();var d=ud(),f=c(d);{var h=w=>{var S=dd(),X=c(S);Kt(X,{width:"100%",height:"100%",get radius(){return n()}}),ut(2,S,()=>yt,()=>({duration:200})),b(w,S)};P(f,w=>{r(l)==="loading"&&w(h)})}var v=_(f,2);{var p=w=>{var S=vd();let X;ve(()=>{Ut(S,"src",a()),Ut(S,"alt",s()),gt(S,`border-radius: ${n()??""}`),X=Xe(S,1,"svelte-1b8que2",null,X,{vis:r(l)==="loaded"})}),M("load",S,o),M("error",S,u),b(w,S)};P(v,w=>{a()&&r(l)!=="error"&&w(p)})}var x=_(v,2);{var E=w=>{var S=st(),X=Re(S);Dr(X,t,"fallback",{}),b(w,S)};P(x,w=>{r(l)==="error"&&w(E)})}ve(()=>gt(d,`border-radius: ${n()??""}`)),b(e,d),St()}const Ka={DEFAULT_IP:typeof window<"u"?window.location.hostname:"localhost",get MOODE_IP(){try{return typeof localStorage<"u"?localStorage.getItem("moode_ip")||this.DEFAULT_IP:this.DEFAULT_IP}catch{return this.DEFAULT_IP}},setMoodeIp(e){if(typeof localStorage<"u"){const t=e?e.trim():"";t&&localStorage.setItem("moode_ip",t)}}};class fd{constructor(){this.socket=null,this.queue=[],this.isProcessing=!1,this.reconnectTimer=null,this.watchdogTimer=null,this._buffer=""}get isConnected(){return this.socket&&this.socket.readyState===WebSocket.OPEN}connect(){if(this.socket&&(this.socket.readyState===WebSocket.CONNECTING||this.socket.readyState===WebSocket.OPEN))return;this.reconnectTimer&&clearTimeout(this.reconnectTimer);let t=Ka.MOODE_IP||window.location.hostname;t=t.replace(/^https?:\/\//,"").split(":")[0].split("/")[0];const a=Ka.WS_PORT||"8080",s=`ws://${t}:${a}`;console.log("[MPD] Connecting to:",s);try{this.socket=new WebSocket(s,["binary"])}catch(n){console.error("[MPD] Connection Error:",n),this.reconnectTimer=setTimeout(()=>this.connect(),5e3);return}this.socket.onopen=()=>{console.log("[MPD] Connected"),vi.set("Connected"),Ie("Connected to Moode","success"),this._processQueue()},this.socket.onmessage=n=>this._handleMessage(n),this.socket.onclose=n=>{console.warn("[MPD] Socket closed",n.code,n.reason),vi.set("Disconnected"),this._cleanup(),this.reconnectTimer=setTimeout(()=>this.connect(),3e3)},this.socket.onerror=n=>{console.error("[MPD] Socket error",n)}}send(t){return new Promise((a,s)=>{this.queue.push({cmd:t,resolve:a,reject:s}),this._processQueue()})}_cleanup(){for(this.isProcessing=!1,this._buffer="",this.watchdogTimer&&clearTimeout(this.watchdogTimer);this.queue.length>0;){const{reject:t}=this.queue.shift();t(new Error("Connection lost"))}}async _processQueue(){if(this.isProcessing||this.queue.length===0||!this.isConnected)return;this.isProcessing=!0;const{cmd:t}=this.queue[0];this.watchdogTimer&&clearTimeout(this.watchdogTimer),this.watchdogTimer=setTimeout(()=>{console.error("[MPD] Watchdog timeout"),this.socket&&this.socket.close()},2e4);try{const a=t.endsWith(`
`)?t:t+`
`;this.socket.send(new TextEncoder().encode(a))}catch(a){console.error("[MPD] Send error",a),this._cleanup()}}async _handleMessage(t){let a=t.data;a instanceof Blob&&(a=await a.text()),this.watchdogTimer&&(clearTimeout(this.watchdogTimer),this.watchdogTimer=null),this._buffer+=a;const s=this._buffer.endsWith(`
OK
`)||this._buffer===`OK
`,n=this._buffer.startsWith("ACK");if(s||n){const i=this._buffer;this._buffer="";const l=this.queue.shift();if(this.isProcessing=!1,l)if(n)console.error(`[MPD] Error: ${i.trim()}`),l.reject(new Error(i.trim()));else{const o=i.replace(/\nOK\n$/,"").replace(/^OK\n$/,"");l.resolve(o)}this._processQueue()}else{if(!this.queue.length)return;this.watchdogTimer=setTimeout(()=>{console.error("[MPD] Watchdog timeout receiving large data"),this.socket&&this.socket.close()},2e4)}}}const Oe=new fd,na={parseKeyValue(e){const t={};if(!e)return t;const a=e.split(`
`);for(const s of a){const n=s.indexOf(": ");if(n===-1)continue;const i=s.substring(0,n).toLowerCase(),l=s.substring(n+2);t[i]=l}return t},parseStatus(e){const t=this.parseKeyValue(e);let a="";if(t.audio){const s=t.audio.split(":");s[1]&&(a=`${s[1]}-bit`)}return{state:t.state||"stop",volume:parseInt(t.volume)||0,elapsed:parseFloat(t.elapsed)||0,duration:parseFloat(t.duration)||0,random:t.random==="1",repeat:t.repeat==="1",song:parseInt(t.song)||0,songId:parseInt(t.songid)||-1,playlistLength:parseInt(t.playlistlength)||0,bitrate:parseInt(t.bitrate)||0,format:a,playlistVersion:parseInt(t.playlist)||0}},parseCurrentSong(e){const t=this.parseKeyValue(e);return this._normalizeTrack(t)},parsePlaylists(e){const t=e.split(`
`),a=[];let s=null;for(const n of t)n.startsWith("playlist: ")?(s&&a.push(s),s={playlist:n.substring(10)}):n.startsWith("Last-Modified: ")&&s&&(s["last-modified"]=n.substring(15));return s&&a.push(s),a.map(n=>({name:n.playlist,lastModified:n["last-modified"]}))},parseTracks(e){const t=[];let a=null,s=0,n=e.indexOf(`
`,s);for(;n!==-1;){const i=e.substring(s,n),l=i.indexOf(": ");if(l!==-1){const o=i.substring(0,l).toLowerCase(),u=i.substring(l+2);o==="file"?(a&&t.push(this._normalizeTrack(a)),a={file:u}):a&&(a[o]=u)}s=n+1,n=e.indexOf(`
`,s)}return a&&t.push(this._normalizeTrack(a)),t},_normalizeTrack(e){const t=e.file||e.File||"",a=e.Title||e.title||e.Name||e.name||t.split("/").pop()||"Unknown";return{file:t,title:a,artist:e.Artist||e.artist||"Unknown Artist",album:e.Album||e.album||"Unknown Album",genre:e.Genre||e.genre||"Unknown",time:parseFloat(e.Time||e.time||0),track:e.Track||e.track||"",id:e.Id||e.id,pos:e.Pos||e.pos||null,stationName:e.name||e.Name||null}}};function _o(e){return new Worker("/assets/sync.worker-CxDcqL9_.js",{name:e?.name})}const Da={async syncLibrary(){if(et(ia))return;ia.set(!0);const e=new _o,t=window.location.origin+"/wave-api.php";e.postMessage({type:"START_SYNC",payload:{url:t}}),e.onmessage=a=>{const{type:s,status:n,count:i,message:l}=a.data;if(s==="PROGRESS"){const o={connecting:"Requesting library...",downloading:"Downloading data...",parsing:"Processing metadata...",saving:`Saving ${i} tracks...`};o[n]&&Ie(o[n],"info")}s==="DONE"&&(Ie(`Library updated: ${i} tracks`,"success"),ia.set(!1),e.terminate()),s==="ERROR"&&(console.error("[API] Sync Error:",l),Ie(`Sync Failed: ${l}`,"error"),ia.set(!1),e.terminate())},e.onerror=a=>{console.error("[API] Worker crash:",a),Ie("Sync worker crashed","error"),ia.set(!1),e.terminate()}},async loadRadioStations(){if(!et(us)){us.set(!0);try{const t=await fetch(Wa.STATIONS(!1));if(!t.ok)throw new Error("Network error");const a=await t.json();if(a.error)throw new Error(a.error);if(!Array.isArray(a))throw new Error("Invalid response format");const s=a.map(n=>({id:n.id,name:n.name,file:n.station,station:n.station,image:n.logo,genre:n.genre||"Radio"}));s.sort((n,i)=>n.name.localeCompare(i.name,void 0,{sensitivity:"base"})),Ha.set(s)}catch(e){console.error("[API] Failed to load stations",e),Ie("Failed to load radio","error")}finally{us.set(!1)}}},async setAlarm(e,t,a){try{const s=new FormData;s.append("action","set_alarm"),s.append("enabled",e?"1":"0"),s.append("time",t),s.append("playlist",a);const n=await fetch(Wa.SYNC,{method:"POST",body:s});if(!n.ok)throw new Error("Server error");const i=await n.json();if(i.error)throw new Error(i.error);return!0}catch(s){throw console.error("[API] Failed to set alarm",s),s}},async getServerTime(){try{const e=await fetch(`${Wa.SYNC}?action=get_time`);if(e.ok)return(await e.json()).time}catch(e){console.error("Failed to get server time",e)}return null},async checkYandexAuth(){try{const t=await(await fetch(Wa.YANDEX+"?action=status")).json();return yr.set(t.authorized),t.authorized}catch(e){return console.error("Yandex Auth Check Failed",e),yr.set(!1),!1}},async saveYandexToken(e){try{const t=await fetch(Wa.YANDEX+"?action=save_token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e})}),a=await t.json();if(!t.ok)throw new Error(a.error||"Failed to save");return Ie("Yandex connected successfully","success"),yr.set(!0),!0}catch(t){return console.error(t),Ie("Invalid token or server error","error"),yr.set(!1),!1}},async getYandexMeta(e){try{const t=await fetch(Wa.YANDEX+"?action=get_meta&url="+encodeURIComponent(e));if(t.ok)return await t.json()}catch{}return null}},hd=1e3,pd=250;let fs=null,Hr=null,hs=0,Qa=1,Ss=!0,Ea=!1,Ga=0,pr=null;function ps(e){return e?String(e).normalize("NFC").replace(/\\/g,"\\\\").replace(/"/g,'\\"'):""}function gd(){_d(),Ss=!0,Ea=!1,Ga=0,kt.set(!1),ua(),fs=setInterval(()=>{Oe.isConnected&&!Oe.isProcessing&&ua()},hd)}function _d(){fs&&(clearInterval(fs),fs=null),Cn()}async function ua(){try{const e=await Oe.send("status"),t=await Oe.send("currentsong"),a=na.parseStatus(e),s=na.parseCurrentSong(t);bd(a,s);const n=et(fo);if(et(kt))return;(a.playlistLength>0&&a.playlistVersion!==n||a.playlistLength>0&&et(Fa).length===0)&&md(a.playlistVersion)}catch{}}async function md(e){if(!et(kt))try{const t=await Oe.send("playlistinfo");if(et(kt))return;const a=na.parseTracks(t),s=et(ks),n=a.map(o=>o.file).filter(o=>o&&!o.startsWith("http"));let i=new Map;if(n.length>0)try{i=await Na.getFilesMap(n)}catch(o){console.warn("Failed to hydrate queue from DB",o)}const l=a.map(o=>{const u=o.file||"",d=u.includes("yandex.net")||u.includes("get-mp3")||u.startsWith("yandex:");if(d&&s.streamCache&&s.streamCache[u]){const v=s.streamCache[u];return{...o,title:v.title||o.title,artist:v.artist||o.artist,album:v.album||o.album,image:v.image,isYandex:!0,id:v.id,mpdId:o.id,mpdPos:o.pos,_uid:String(o.id||o.pos)+"y"}}d&&mo(u);const f=u.normalize("NFC"),h=i.get(f);return h?{...o,thumbHash:h.thumbHash,qualityBadge:h.qualityBadge,title:o.title||h.title,artist:o.artist||h.artist,album:o.album||h.album,isYandex:d,_uid:String(o.id||o.pos+o.file)}:{...o,isYandex:d,_uid:String(o.id||o.pos+o.file)}});Fa.set(l),fo.set(e)}catch(t){console.error("Queue sync error",t)}}async function mo(e){const t=et(ks);if(t.streamCache&&t.streamCache[e])return;const a=await Da.getYandexMeta(e);ks.update(n=>{const i={...n.streamCache};return i[e]={...a,isYandex:!0,file:e},{...n,streamCache:i}}),et(Yt).file===e&&Yt.update(n=>({...n,...a,isYandex:!0})),Fa.update(n=>n.map(i=>i.file===e?{...i,...a,isYandex:!0}:i))}function bd(e,t){const a=et(Yt),s=et(Ha),n=et(ks);if(t.file&&n.streamCache&&n.streamCache[t.file]){const l=n.streamCache[t.file];t.title=l.title,t.artist=l.artist,t.album=l.album,t.image=l.image,t.isYandex=!0,t.id=l.id,l.time>0&&(e.duration===0||isNaN(e.duration))&&(e.duration=l.time)}else t.file&&(t.file.includes("yandex.net")||t.file.includes("get-mp3"))&&mo(t.file);const i=t.file&&t.file.startsWith("http");if(i&&!t.isYandex){const l=f=>(f||"").toString().toLowerCase().replace(/[^a-z0-9]/g,""),o=l(t.file),u=l(t.title),d=s.find(f=>{const h=l(f.station||f.file||f.url||(Array.isArray(f)?f[1]:"")),v=l(f.name||(Array.isArray(f)?f[0]:""));return h&&o.includes(h)||v&&u.includes(v)});d?t.stationName=d.name||d[0]:a.stationName&&a.file===t.file&&(t.stationName=a.stationName)}Yt.set(t),xt.update(l=>{const o=e.state==="play",u=performance.now();if(e.state==="pause"||l.state==="pause")return ds(!1),u<Ga?l:e;if(t.file!==a.file||Ss)return Ss=!1,Ea=!1,Qa=1,i&&!t.isYandex&&(e.elapsed=0),ds(o&&(!i||t.isYandex)),e;if(u<Ga)return l;if(Ea)return Ea=!1,Qa=1,ds(o&&(!i||t.isYandex)),e;if(o&&(!i||t.isYandex)){const d=e.elapsed-l.elapsed;if(Math.abs(d)>2)return Qa=1,e;if(Math.abs(d)<.05)Qa=1;else{let h=d/1.5;Qa=Math.max(.5,Math.min(1.5,1+h))}return{...e,elapsed:l.elapsed}}return ds(!1),e})}function ds(e){e?pn():Cn()}function pn(){Hr||Ss||(hs=performance.now(),Hr=setInterval(()=>{const e=performance.now();let t=(e-hs)/1e3;t>2&&(t=0),hs=e,xt.update(a=>{if(a.state!=="play")return a;let s=a.elapsed+t*Qa;return a.duration>0&&s>a.duration&&(s=a.duration),{...a,elapsed:s}})},pd))}function Cn(){Hr&&(clearInterval(Hr),Hr=null),Qa=1,hs=0}async function ui(e,t=!1){if(!e||e.length===0)return;kt.set(!0),Ea=!0;const a=5;try{for(let s=0;s<e.length;s+=a){const n=e.slice(s,s+a),i=["command_list_begin"];n.forEach(l=>{i.push(`add "${ps(l.file)}"`)}),i.push("command_list_end"),await Oe.send(i.join(`
`))}t?(await Oe.send("play 0"),Ie(`Playing ${e.length} tracks`,"success")):Ie(`Added ${e.length} tracks`,"success")}catch(s){console.error("[Player] Bulk Action Failed:",s),Ie("Error adding tracks","error")}finally{setTimeout(()=>{kt.set(!1),ua()},1500)}}const oa={async togglePlay(){const t=et(xt).state==="play";Ga=performance.now()+800,xt.update(a=>{const s=t?"pause":"play";return s==="play"?pn():Cn(),{...a,state:s}}),await Oe.send(t?"pause 1":"play"),setTimeout(ua,900)},async next(){Ea=!0,Ga=0,await Oe.send("next"),ua()},async previous(){Ea=!0,Ga=0,xt.update(e=>({...e,elapsed:0})),await Oe.send("previous"),ua()},async setVolume(e){xt.update(t=>({...t,volume:e})),await Oe.send(`setvol ${e}`)},async seek(e){Ea=!0,Ga=performance.now()+500,xt.update(t=>({...t,elapsed:e})),await Oe.send(`seekcur ${e}`),setTimeout(ua,600)},async toggleRandom(){const t=!et(xt).random;xt.update(a=>({...a,random:t})),await Oe.send(`random ${t?1:0}`)},async toggleRepeat(){const t=!et(xt).repeat;xt.update(a=>({...a,repeat:t})),await Oe.send(`repeat ${t?1:0}`)},async playUri(e,t={}){kt.set(!0);const a=ps(e);Ea=!0,xt.update(s=>({...s,state:"play",elapsed:0})),Yt.set({title:t.title||e.split("/").pop(),artist:t.artist||"",album:t.album||"",file:e}),pn();try{const s=await Oe.send("currentsong"),n=parseInt(na.parseKeyValue(s).pos),i=await Oe.send(`addid "${a}"`),l=parseInt(na.parseKeyValue(i).id);if(isNaN(l))await Oe.send(`add "${a}"`),await Oe.send("play");else{const o=isNaN(n)?0:n+1;await Oe.send(`moveid ${l} ${o}`),await Oe.send(`playid ${l}`)}}catch(s){console.error("Play error",s),Ie("Failed to play","error")}setTimeout(()=>{kt.set(!1),ua()},1200)},async addToQueue(e){try{await Oe.send(`add "${ps(e)}"`),Ie("Added to queue","success")}catch(t){console.error("Add queue error",t),Ie("Failed to add","error")}},async playNext(e){kt.set(!0);const t=ps(e);try{const a=await Oe.send("currentsong"),s=parseInt(na.parseKeyValue(a).pos||-1);if(s===-1)kt.set(!1),await this.playUri(e);else{const n=await Oe.send(`addid "${t}"`),i=parseInt(na.parseKeyValue(n).id);isNaN(i)||(await Oe.send(`moveid ${i} ${s+1}`),Ie("Will play next","success")),setTimeout(()=>kt.set(!1),1e3)}}catch(a){console.error("Play Next error",a),Ie("Failed to set next","error"),kt.set(!1)}},async removeFromQueue(e){kt.set(!0),pr&&clearTimeout(pr);try{Fa.update(t=>{const a=[...t];return a.splice(e,1),a}),await Oe.send(`delete ${e}`)}catch{Ie("Failed to remove","error"),kt.set(!1);return}pr=setTimeout(()=>{kt.set(!1)},1e3)},async moveTrack(e,t){if(e!==t){kt.set(!0),pr&&clearTimeout(pr);try{await Oe.send(`move ${e} ${t}`)}catch(a){console.error("Move failed",a),Ie("Move failed","error"),kt.set(!1),ua();return}pr=setTimeout(()=>{kt.set(!1),ua()},2e3)}},async playAllTracks(e){if(!(!e||e.length===0))try{await Oe.send("stop"),await Oe.send("clear"),await ui(e,!0)}catch(t){console.error(t)}},async addAllToQueue(e){!e||e.length===0||await ui(e,!1)},async saveQueue(e){if(!e)return;const t=e.replace(/"/g,'\\"');try{await Oe.send(`save "${t}"`),Ie(`Playlist "${e}" saved`,"success")}catch(a){if(a.message.includes("exist")){if(confirm(`Playlist "${e}" exists. Overwrite?`))try{await Oe.send(`rm "${t}"`),await Oe.send(`save "${t}"`),Ie(`Playlist "${e}" overwritten`,"success")}catch{Ie("Failed to overwrite","error")}}else console.error(a)}}},jr="Favorites";let fi=Promise.resolve();const gr=e=>e?e.toLowerCase().replace(/^https?:\/\//,"").replace(/^www\./,"").split("?")[0].replace(/\/$/,""):"";function yd(e){if(e==="Favorites")return"linear-gradient(135deg, hsl(348, 95%, 58%), hsl(348, 90%, 40%))";let t=0;for(let s=0;s<e.length;s++)t=e.charCodeAt(s)+((t<<5)-t);const a=Math.abs(t%360);return`linear-gradient(135deg, hsl(${a}, 60%, 40%), hsl(${(a+40)%360}, 60%, 30%))`}function wd(e){if(e==="Favorites")return"var(--c-heart)";let t=0;for(let s=0;s<e.length;s++)t=e.charCodeAt(s)+((t<<5)-t);return`var(--c-pl-${Math.abs(t%6)})`}const ga={async syncLibrary(){if(et(ia))return;ia.set(!0);const e=new _o;e.postMessage({type:"START_SYNC",payload:{url:`http://${Ka.MOODE_IP}/wave-api.php`}}),e.onmessage=t=>{const{type:a,count:s}=t.data;a==="DONE"&&(Ie(`Library updated: ${s} tracks`,"success"),ia.set(!1),e.terminate()),a==="ERROR"&&(Ie("Sync Failed","error"),ia.set(!1),e.terminate())},e.onerror=()=>{ia.set(!1),e.terminate()}},async loadPlaylists(){on.set(!0);try{const e=await Oe.send("listplaylists"),a=na.parsePlaylists(e).map(s=>({...s,color:yd(s.name),colorVar:wd(s.name)}));zs.set(a)}catch(e){console.error(e)}finally{on.set(!1)}},async createPlaylistFromQueue(e){if(!e)return;const t=e.replace(/"/g,'\\"');try{await Oe.send(`save "${t}"`),Ie(`Playlist "${e}" created`,"success"),await this.loadPlaylists()}catch(a){console.error(a),Ie("Failed to create playlist","error")}},async deletePlaylist(e){if(!e)return;const t=e.replace(/"/g,'\\"');try{await Oe.send(`rm "${t}"`),Ie("Playlist deleted","info"),await this.loadPlaylists()}catch(a){console.error(a),Ie("Delete failed","error")}},async renamePlaylist(e,t){if(!e||!t)return;const a=e.replace(/"/g,'\\"'),s=t.replace(/"/g,'\\"');try{await Oe.send(`rename "${a}" "${s}"`),Ie("Playlist renamed","success"),await this.loadPlaylists()}catch(n){console.error(n),Ie("Rename failed","error")}},async openPlaylistDetails(e){if(!e)return;ln.set(!0);const t=e.replace(/"/g,'\\"');try{const a=await Oe.send(`listplaylistinfo "${t}"`),s=na.parseTracks(a),n=s.map(o=>o.file).filter(o=>o&&!o.startsWith("http"));let i=new Map;if(n.length>0)try{i=await Na.getFilesMap(n)}catch(o){console.warn("Failed to hydrate playlist from DB",o)}const l=s.map(o=>{const u=i.get(o.file);return u?{...o,thumbHash:u.thumbHash,qualityBadge:u.qualityBadge,title:o.title||u.title,artist:o.artist||u.artist,album:o.album||u.album,_uid:ni()}:{...o,_uid:ni()}});Ur.set(l)}catch(a){console.error(a),Ie("Could not load playlist","error")}finally{ln.set(!1)}},async movePlaylistTrack(e,t,a){const s=e.replace(/"/g,'\\"');try{await Oe.send(`playlistmove "${s}" ${t} ${a}`)}catch{Ie("Move failed","error")}},async removeFromPlaylist(e,t){const a=e.replace(/"/g,'\\"');try{await Oe.send(`playlistdelete "${a}" ${t}`),Ie("Track removed","success")}catch{Ie("Delete failed","error")}},async loadFavorites(){try{const e=await Oe.send(`listplaylistinfo "${jr}"`),t=na.parseTracks(e),a=new Set;t.forEach(s=>{s.file&&a.add(s.file)}),Ia.set(a)}catch{Ia.set(new Set)}},async toggleFavorite(e){if(!e||!e.file)return;const t=e.file,a=t.replace(/"/g,'\\"'),s=t.startsWith("http"),n=et(Ia);let i=n.has(t);if(!i&&s){const l=gr(t);for(const o of n)if(gr(o)===l){i=!0;break}}Ia.update(l=>{const o=new Set(l);if(i){if(o.delete(t),s){const u=gr(t);for(const d of o)gr(d)===u&&o.delete(d)}}else o.add(t);return o}),fi=fi.then(async()=>{try{const l=await Oe.send(`listplaylistinfo "${jr}"`),o=na.parseTracks(l);let u=[];if(o.forEach((d,f)=>{let h=!1;(d.file===t||s&&gr(d.file)===gr(t)||s&&(d.file.includes(t)||t.includes(d.file)))&&(h=!0),h&&u.push(f)}),i){if(u.length>0){u.sort((d,f)=>f-d);for(const d of u)await Oe.send(`playlistdelete "${jr}" ${d}`);Ie("Removed from Favorites","info")}}else u.length>0?console.log("[Fav] Track already exists. Skipping."):(await Oe.send(`playlistadd "${jr}" "${a}"`),o.length>0&&await Oe.send(`playlistmove "${jr}" ${o.length} 0`),Ie("Added to Favorites","success"))}catch(l){console.error("Fav action failed",l),Ie("Action failed","error")}finally{await this.loadFavorites()}})}};function bo(){Oe.connect(),gd(),ga.loadPlaylists(),ga.loadFavorites()}function Ts(e){return Oe.send(e)}const{togglePlay:Rs,toggleRandom:ar,toggleRepeat:rr,setVolume:Sa,seek:Pn,addToQueue:kd,playNext:xd,removeFromQueue:Ed,moveTrack:Sd,saveQueue:Td,playAllTracks:Ln,addAllToQueue:zn,playUri:$d}=oa,{syncLibrary:Md,loadRadioStations:Ad,loadPlaylists:Rn,openPlaylistDetails:yo,toggleFavorite:wo,loadFavorites:Cd,removeFromPlaylist:ko,movePlaylistTrack:xo}=ga;function Zr(e){const t=et(Yt),a=et(Ha),s=et(Ls);if(t.file&&t.file.startsWith("http")&&a.length>0&&!t.isYandex&&(e==="next"||e==="previous")){let i=a.findIndex(o=>o.name===s);i===-1&&(i=0);let l;e==="next"?(l=i+1,l>=a.length&&(l=0)):(l=i-1,l<0&&(l=a.length-1)),jn(a[l])}else e==="next"&&oa.next(),e==="previous"&&oa.previous()}function jn(e){if(!e)return;Ls.set(e.name);const t=e[1]||e.station||e.file||e.url;t&&oa.playUri(t,{title:e.name,artist:e.genre||"Radio Stream",stationName:e.name})}function js(e){e&&(Ls.set(null),oa.playUri(e.file,{title:e.title,artist:e.artist,album:e.album,stationName:null}))}const Pd=Object.freeze(Object.defineProperty({__proto__:null,addAllToQueue:zn,addToQueue:kd,connect:bo,loadFavorites:Cd,loadPlaylists:Rn,loadRadioStations:Ad,movePlaylistTrack:xo,moveTrack:Sd,nav:Zr,openPlaylistDetails:yo,playAllTracks:Ln,playNext:xd,playStation:jn,playTrackOptimistic:js,playUri:$d,removeFromPlaylist:ko,removeFromQueue:Ed,runMpdRequest:Ts,saveQueue:Td,seek:Pn,setVolume:Sa,syncLibrary:Md,toggleFavorite:wo,togglePlay:Rs,toggleRandom:ar,toggleRepeat:rr},Symbol.toStringTag,{value:"Module"})),ta={async request(e,t={}){const a=new URL(window.location.origin+Wa.YANDEX);a.searchParams.append("action",e);for(const n in t)a.searchParams.append(n,t[n]);const s=await fetch(a);if(!s.ok)throw new Error("API Error");return await s.json()},async search(e){return await this.request("search",{query:e})},async getUserPlaylists(){return await this.request("get_playlists")},async getLanding(){return await this.request("get_landing")},async getArtistDetails(e){return await this.request("get_artist_details",{id:e})},async getAlbumDetails(e){return await this.request("get_album_details",{id:e})},async getPlaylistTracks(e,t){return await this.request("get_playlist_tracks",{uid:e,kind:t})},async playRadio(e){return e?await this.request("play_station",{station:"track:"+e}):await this.request("play_station",{station:"user:onetwo"})},async playStation(e){return await this.request("play_station",{station:e})},async playTrack(e){return await this.request("play_track",{id:e})},async toggleLike(e,t){const a=t?"dislike":"like";return await this.request(a,{track_id:e})}};function In(e,t=2e3){let a;const s=i=>{i.type==="mousedown"&&i.button!==0||(a=setTimeout(()=>{e.dispatchEvent(new CustomEvent("longpress",{detail:{originalEvent:i}}))},t))},n=()=>{clearTimeout(a)};return e.addEventListener("mousedown",s),e.addEventListener("touchstart",s,{passive:!0}),e.addEventListener("mouseup",n),e.addEventListener("mouseleave",n),e.addEventListener("touchend",n),e.addEventListener("touchcancel",n),e.addEventListener("touchmove",n),{destroy(){e.removeEventListener("mousedown",s),e.removeEventListener("touchstart",s),e.removeEventListener("mouseup",n),e.removeEventListener("mouseleave",n),e.removeEventListener("touchend",n),e.removeEventListener("touchcancel",n),e.removeEventListener("touchmove",n)}}}var Ld=k('<div class="drag-handle svelte-5cs2hz" title="Drag to reorder"><div class="icon-small svelte-5cs2hz"><!></div></div>'),zd=k('<div class="eq-anim svelte-5cs2hz"><span class="bar b1 svelte-5cs2hz"></span> <span class="bar b2 svelte-5cs2hz"></span> <span class="bar b3 svelte-5cs2hz"></span></div>'),Rd=k('<div class="icon-small svelte-5cs2hz"><!></div>'),jd=k('<div class="icon-small svelte-5cs2hz"><!></div>'),Id=k('<div class="icon-small accent svelte-5cs2hz"><!></div>'),Nd=k('<span class="num svelte-5cs2hz"> </span>'),Dd=k('<button class="num-box svelte-5cs2hz"><!></button>'),Od=k('<div slot="fallback" class="icon-ph svelte-5cs2hz"><!></div>'),qd=k('<span class="meta-tag quality svelte-5cs2hz"> </span>'),Fd=k('<span class="yandex-icon-inline svelte-5cs2hz" title="Yandex Music"><!></span>'),Bd=k('<button class="btn-icon small remove svelte-5cs2hz"><!></button>'),Ud=k('<div class="dur svelte-5cs2hz"> </div>'),Yd=k('<div role="button" tabindex="0"><div class="left svelte-5cs2hz"><!> <div class="thumb svelte-5cs2hz"><!></div></div> <div class="info svelte-5cs2hz"><div class="title-row svelte-5cs2hz"><div class="title text-ellipsis svelte-5cs2hz"> </div> <!></div> <div> </div></div> <div class="right svelte-5cs2hz"><!> <button class="btn-icon small context-menu-btn svelte-5cs2hz"><!></button> <button><!></button> <!></div></div>');function Mr(e,t){Et(t,!1);const a=()=>Ae(ld,"$yandexFavorites",o),s=()=>Ae(Ia,"$favorites",o),n=()=>Ae(Wt,"$navigationStack",o),i=()=>Ae(Nt,"$activeMenuTab",o),l=()=>Ae(Ha,"$stations",o),[o,u]=jt(),d=T(),f=T(),h=T(),v=T(),p=T(),x=T(),E=T(),w=T(),S=T(),X=T(),he=T(),ae=T(),re=T(),be=T(),O=T(),U=T(),ie=T();let H=wt(t,"track",8),we=wt(t,"index",8),z=wt(t,"isEditable",8,!1),F=wt(t,"playingIndex",24,()=>-1),me=wt(t,"playingFile",8,null),W=wt(t,"isPlaying",8,!1);const L=$n();let $=T(!1),I=T(!1);function Ee(B){if(r(E))return"â";if(!B)return"0:00";const ge=parseInt(B,10),Ne=Math.floor(ge/60),He=ge%60;return`${Ne}:${He.toString().padStart(2,"0")}`}function Q(B){B.stopPropagation(),r(p)?Rs():L("play")}function se(){return r(f)?.view==="details"&&r(f).data?.name?{type:"playlist",playlistName:r(f).data.name,index:we()}:r(h)?{type:"queue",index:we()}:{type:"general"}}function ye(B){B.stopPropagation(),Kr(B,H(),se())}function ce(B){z()||Kr(B.detail.originalEvent,H(),se())}function ke(B){B.stopPropagation(),H().isYandex?L("artistclick",H()):!r(E)&&H().artist&&(Nt.set("artists"),Ba("albums_by_artist",{name:H().artist}))}async function Se(B){if(B.stopPropagation(),H().isYandex)try{await ta.toggleLike(H().id,r(d)),Ie(r(d)?"Removed from Yandex Likes":"Added to Yandex Likes","success")}catch{Ie("Failed to update Yandex like","error")}else wo(H())}ne(()=>j(H()),()=>{H()&&g(I,!1)}),ne(()=>(j(H()),a(),s()),()=>{g(d,H().isYandex?a().has(String(H().id)):s().has(H().file))}),ne(()=>n(),()=>{g(f,n()[n().length-1])}),ne(()=>(r(f),i()),()=>{g(h,r(f)?.view==="queue"||r(f)?.view==="root"&&i()==="queue")}),ne(()=>(r(h),j(we()),j(F())),()=>{g(v,r(h)?Number(we())===F():!1)}),ne(()=>(j(H()),j(me())),()=>{g(p,H().file===me())}),ne(()=>(r(p),r(v)),()=>{g(x,r(p)&&!r(v))}),ne(()=>j(H()),()=>{g(E,H().file&&(H().file.startsWith("http")||H().file.includes("RADIO"))&&!H().isYandex)}),ne(()=>(r(v),j(W()),r($)),()=>{g(w,r(v)&&W()&&r($))}),ne(()=>(r(v),j(W()),r($)),()=>{g(S,r(v)&&W()&&!r($))}),ne(()=>(r(v),j(W()),r($)),()=>{g(X,r(v)&&!W()&&!r($))}),ne(()=>(r($),r(w)),()=>{g(he,r($)&&!r(w))}),ne(()=>j(H()),()=>{g(ae,H().title||H().file?.split("/").pop())}),ne(()=>j(H()),()=>{g(re,H().artist||"Unknown")}),ne(()=>j(H()),()=>{g(be,Ee(H().time))}),ne(()=>j(H()),()=>{g(O,H().qualityBadge?H().qualityBadge.split(" ")[0]:null)}),ne(()=>{},()=>{g(U,null)}),ne(()=>(r(I),j(H()),l(),r(U),Gr),()=>{g(ie,r(I)?$r(H(),l(),r(U)):Gr(H(),"sm",l(),r(U)))}),Ht(),At();var A=Yd();let q;var ue=c(A),Y=c(ue);{var G=B=>{var ge=Ld(),Ne=c(ge),He=c(Ne);ee(He,()=>(j(y),m(()=>y.DRAG_HANDLE))),M("mousedown",ge,Fe=>L("startdrag",Fe)),M("touchstart",ge,Fe=>L("startdrag",Fe),void 0,!0),M("click",ge,Gt(function(Fe){Xr.call(this,t,Fe)})),b(B,ge)},_e=B=>{var ge=Dd(),Ne=c(ge);{var He=Be=>{var Qe=zd();b(Be,Qe)},Fe=Be=>{var Qe=st(),rt=Re(Qe);{var Ke=We=>{var Ge=Rd(),lt=c(Ge);ee(lt,()=>(j(y),m(()=>y.PAUSE))),b(We,Ge)},qe=We=>{var Ge=st(),lt=Re(Ge);{var Je=Ve=>{var vt=jd(),ct=c(vt);ee(ct,()=>(j(y),m(()=>y.PLAY))),b(Ve,vt)},Ze=Ve=>{var vt=st(),ct=Re(vt);{var ft=at=>{var De=Id(),ht=c(De);ee(ht,()=>(j(y),m(()=>y.PLAY))),b(at,De)},dt=at=>{var De=Nd(),ht=c(De);ve(()=>le(ht,we()+1)),b(at,De)};P(ct,at=>{r(X)?at(ft):at(dt,!1)},!0)}b(Ve,vt)};P(lt,Ve=>{r(he)?Ve(Je):Ve(Ze,!1)},!0)}b(We,Ge)};P(rt,We=>{r(w)?We(Ke):We(qe,!1)},!0)}b(Be,Qe)};P(Ne,Be=>{r(S)?Be(He):Be(Fe,!1)})}M("click",ge,Q),b(B,ge)};P(Y,B=>{z()?B(G):B(_e,!1)})}var fe=_(Y,2),Ce=c(fe);Qt(Ce,{get src(){return r(ie)},get alt(){return r(ae)},radius:"4px",$$events:{error:()=>g(I,!0)},$$slots:{fallback:(B,ge)=>{var Ne=Od(),He=c(Ne);ee(He,()=>(r(E),j(y),m(()=>r(E)?y.RADIO:y.ALBUMS))),ut(1,Ne,()=>yt),b(B,Ne)}}});var N=_(ue,2),pe=c(N),Me=c(pe),te=c(Me),Te=_(Me,2);{var ze=B=>{var ge=qd(),Ne=c(ge);ve(()=>le(Ne,r(O))),b(B,ge)};P(Te,B=>{r(O)&&!r(E)&&B(ze)})}var C=_(pe,2);let K;var R=c(C),V=_(N,2),$e=c(V);{var Z=B=>{var ge=Fd(),Ne=c(ge);ee(Ne,()=>(j(y),m(()=>y.YANDEX))),b(B,ge)};P($e,B=>{j(H()),m(()=>H().service==="yandex"||H().isYandex)&&B(Z)})}var oe=_($e,2),xe=c(oe);ee(xe,()=>(j(y),m(()=>y.DOTS)));var D=_(oe,2);let de;var J=c(D);ee(J,()=>(r(d),j(y),m(()=>r(d)?y.HEART_FILLED:y.HEART)));var Le=_(D,2);{var je=B=>{var ge=Bd(),Ne=c(ge);ee(Ne,()=>(j(y),m(()=>y.REMOVE))),M("click",ge,Gt(()=>L("remove",{index:we()}))),b(B,ge)},Ye=B=>{var ge=Ud(),Ne=c(ge);ve(()=>le(Ne,r(be))),b(B,ge)};P(Le,B=>{z()?B(je):B(Ye,!1)})}Ot(()=>M("click",A,()=>!r(v)&&L("play"))),Ot(()=>M("mouseenter",A,()=>g($,!0))),Ot(()=>M("mouseleave",A,()=>g($,!1))),En(A,B=>In?.(B)),Ot(()=>M("longpress",A,ce)),ve(()=>{q=Xe(A,1,"row svelte-5cs2hz",null,q,{active:r(v),striped:r(x),editable:z()}),Ut(Me,"title",r(ae)),le(te,r(ae)),K=Xe(C,1,"artist text-ellipsis svelte-5cs2hz",null,K,{link:!r(E)}),le(R,r(re)),de=Xe(D,1,"btn-icon small svelte-5cs2hz",null,de,{liked:r(d)})}),M("click",C,ke),M("click",oe,ye),M("click",D,Gt(Se)),b(e,A),St(),u()}const vs=100,hi=5,pi=25,gi=3;function Hd({tracksStore:e,onMoveTrack:t}){const a=Ue(!1),s=Ue(!1),n=Ue(!1),i=Ue(null),l=Ue(null),o=Ue(null),u=Ue({x:0,y:0,width:0,height:0,grabOffsetX:0,grabOffsetY:0}),d=Ue(null);let f=!1,h=0,v=0,p=0,x=0;const E={scrollContainer:null,listBodyContainer:null};let w=null;function S(z,F,me){const W=z.detail;if(W.button===2||(window.getSelection&&window.getSelection().removeAllRanges(),!E.scrollContainer))return;const $=E.scrollContainer.querySelectorAll(".row-wrapper")[F];if(!$)return;const I=$.getBoundingClientRect(),Ee=W.touches?W.touches[0].clientX:W.clientX,Q=W.touches?W.touches[0].clientY:W.clientY,se=Ee-I.left,ye=Q-I.top;f=!0,a.set(!1),s.set(!1),h=Ee,v=Q,p=Ee,x=Q,i.set(F),l.set(F),d.set(me),o.set(null),u.set({x:Ee,y:Q,width:I.width,height:I.height,grabOffsetX:se,grabOffsetY:ye})}function X(z){if(!f||et(s))return;const F=z.touches?z.touches[0].clientX:z.clientX,me=z.touches?z.touches[0].clientY:z.clientY;if(!et(a)){const W=Math.abs(F-h),L=Math.abs(me-v);if(W<gi&&L<gi)return;a.set(!0)}z.cancelable&&z.preventDefault(),p=F,x=me,u.update(W=>({...W,x:p,y:x})),U(x),he()}function he(){if(!E.listBodyContainer)return;const z=E.listBodyContainer.getBoundingClientRect(),F=et(u),W=x-z.top-F.grabOffsetY+F.height/2,L=et(e).length;if(W<0){l.set(0);return}if(W>z.height){l.set(L);return}const $=Array.from(E.listBodyContainer.querySelectorAll(".row-wrapper"));let I=-1,Ee=1/0;$.forEach((Q,se)=>{const ye=Q.offsetTop+Q.offsetHeight/2,ce=Math.abs(W-ye);ce<Ee&&(Ee=ce,I=se)}),I!==-1&&l.set(I)}function ae(z){if(f){if(f=!1,!et(a)){be();return}re()}}async function re(){H(),he(),a.set(!1),s.set(!0);const z=et(l);if(E.listBodyContainer&&z!==null){const I=E.listBodyContainer.querySelectorAll(".row-wrapper"),Ee=E.listBodyContainer.getBoundingClientRect(),Q=I[z];let se=0,ye=0,ce=!1;if(Q)se=Ee.top+Q.offsetTop,ye=Ee.left+Q.offsetLeft,ce=!0;else if(z>=I.length&&I.length>0){const ke=I[I.length-1];se=Ee.top+ke.offsetTop+ke.offsetHeight,ye=Ee.left+ke.offsetLeft,ce=!0}else I.length===0&&(se=Ee.top,ye=Ee.left,ce=!0);ce&&u.update(ke=>({...ke,y:se+ke.grabOffsetY,x:ye+ke.grabOffsetX}))}await new Promise(I=>setTimeout(I,250)),n.set(!0),await kr();const F=et(i),me=et(e).length;let W=Math.max(0,Math.min(z,me)),L=W;if(F!==null&&F!==W){const I=[...et(e)],[Ee]=I.splice(F,1);L=Math.max(0,Math.min(L,I.length)),I.splice(L,0,Ee),e.set(I),t&&t(F,L),i.set(L)}await kr(),d.set(null),i.set(null),l.set(null),s.set(!1);const $=F!==W?L:F;o.set($),await kr(),requestAnimationFrame(()=>{requestAnimationFrame(()=>{n.set(!1),setTimeout(()=>{o.set(null)},300)})})}function be(){f=!1,O()}function O(){a.set(!1),s.set(!1),i.set(null),l.set(null),d.set(null),H()}function U(z){if(!E.scrollContainer)return;const{top:F,bottom:me}=E.scrollContainer.getBoundingClientRect(),W=z-F,L=me-z;H();let $=0;if(W<vs&&W>0){const I=1-W/vs;$=-(hi+pi*(I*I))}else if(L<vs&&L>0){const I=1-L/vs;$=hi+pi*(I*I)}$!==0&&ie($)}function ie(z){w||(w=requestAnimationFrame(function F(){E.scrollContainer&&(E.scrollContainer.scrollTop+=z,et(a)&&(u.update(me=>({...me,x:p,y:x})),he(),w=requestAnimationFrame(F)))}))}function H(){w&&(cancelAnimationFrame(w),w=null)}function we(z,F,me,W,L,$){return $||!F&&!me||W===null||L===null?"":z===W?"opacity: 0; pointer-events: none;":W===L?"":W<L&&z>W&&z<=L?"transform: translateY(-100%);":W>L&&z>=L&&z<W?"transform: translateY(100%);":""}return{isDragging:a,isDropping:s,isReordering:n,draggingIndex:i,hoverIndex:l,justDroppedIndex:o,draggedItemData:d,ghostCoords:u,refs:E,onDragInit:S,onPointerMove:X,onPointerUp:ae,getRowStyle:we,cancelDrag:be}}var Vd=k('<div><div style="pointer-events: none; width: 100%; height: 100%;" class="svelte-ym6b2"><!></div></div>'),Wd=k('<div class="skeleton-row svelte-ym6b2"><div class="sk-left svelte-ym6b2"><!> <!></div> <div class="sk-info svelte-ym6b2"><!> <!></div> <div class="sk-right svelte-ym6b2"><!></div></div>'),Qd=k('<div class="skeletons-wrapper svelte-ym6b2"></div>'),Xd=k("<div><!></div>"),Kd=k('<div class="content-padded svelte-ym6b2" style="text-align: center; opacity: 0.5;"> </div>'),Gd=k("<!> <!> <!>",1),Zd=k('<div><!> <div class="list-body svelte-ym6b2"><!> <!></div></div>');function ss(e,t){Et(t,!1);const a=()=>Ae(Wt,"$navigationStack",p),s=()=>Ae(Nt,"$activeMenuTab",p),n=()=>Ae(H,"$isDragging",p),i=()=>Ae(we,"$isDropping",p),l=()=>Ae(L,"$draggedItemData",p),o=()=>Ae($,"$ghostCoords",p),u=()=>Ae(F,"$draggingIndex",p),d=()=>Ae(E(),"$itemsStore",p),f=()=>Ae(W,"$justDroppedIndex",p),h=()=>Ae(z,"$isReordering",p),v=()=>Ae(me,"$hoverIndex",p),[p,x]=jt();let E=wt(t,"itemsStore",8),w=wt(t,"isEditMode",8,!1),S=wt(t,"isLoading",8,!1),X=wt(t,"emptyText",8,"List is empty"),he=wt(t,"onMoveItem",8,(Y,G)=>{}),ae=T(""),re=T(0),be=T(!1);Ya(async()=>{g(re,Jc(r(ae))),!S()&&r(re)>0&&r(U).refs.scrollContainer&&(await kr(),is(U,r(U).refs.scrollContainer.scrollTop=r(re)),g(be,!0))});async function O(){await kr(),r(U).refs.scrollContainer&&(is(U,r(U).refs.scrollContainer.scrollTop=r(re)),g(be,!0))}co(()=>{r(U).cancelDrag(),r(U).refs.scrollContainer&&Zc(r(ae),r(U).refs.scrollContainer.scrollTop)});const U=T(Hd({tracksStore:E(),onMoveTrack:(Y,G)=>{he()(Y,G)}})),ie=r(U),H=ie.isDragging,we=ie.isDropping,z=ie.isReordering,F=ie.draggingIndex,me=ie.hoverIndex,W=ie.justDroppedIndex,L=ie.draggedItemData,$=ie.ghostCoords,I=T(ie.refs);function Ee(Y,G,_e){w()&&r(U).onDragInit(Y,G,_e)}ne(()=>(a(),s()),()=>{const Y=a(),G=Y[Y.length-1],_e=s();if(G&&G.view==="root")g(ae,`root_${_e}`);else if(G){const fe=G.data?G.data.name||G.data:"unknown";g(ae,`${G.view}_${fe}`)}}),ne(()=>(j(S()),r(be),r(re),r(U)),()=>{!S()&&!r(be)&&r(re)>0&&r(U).refs.scrollContainer&&O()}),Ht(),At();var Q=Zd();M("mousemove",Ra,function(...Y){r(U).onPointerMove?.apply(this,Y)}),M("mouseup",Ra,function(...Y){r(U).onPointerUp?.apply(this,Y)}),M("touchmove",Ra,function(...Y){r(U).onPointerMove?.apply(this,Y)},void 0,!1),M("touchend",Ra,function(...Y){r(U).onPointerUp?.apply(this,Y)}),M("touchcancel",Ra,function(...Y){r(U).onPointerUp?.apply(this,Y)});let se;var ye=c(Q);{var ce=Y=>{var G=Vd();let _e;var fe=c(G),Ce=c(fe);Dr(Ce,t,"row",{get item(){return l()},get index(){return u()},isGhost:!0,startDrag:()=>{}}),ve(()=>{_e=Xe(G,1,"floating-item svelte-ym6b2",null,_e,{dropping:i()}),gt(G,`
            top: ${o(),m(()=>o().y-o().grabOffsetY)??""}px; 
            left: ${o(),m(()=>o().x-o().grabOffsetX)??""}px;
            width: ${o(),m(()=>o().width)??""}px; 
            height: ${o(),m(()=>o().height)??""}px;
        `)}),b(Y,G)};P(ye,Y=>{(n()||i())&&l()&&Y(ce)})}var ke=_(ye,2),Se=c(ke);Dr(Se,t,"header",{});var A=_(Se,2);{var q=Y=>{var G=Qd();bt(G,4,()=>Array(10),Dt,(_e,fe)=>{var Ce=Wd(),N=c(Ce),pe=c(N);Kt(pe,{width:"24px",height:"24px",radius:"4px",style:"opacity: 0.3"});var Me=_(pe,2);Kt(Me,{width:"40px",height:"40px",radius:"4px",style:"margin-left: 12px;"});var te=_(N,2),Te=c(te);Kt(Te,{width:"40%",height:"14px",radius:"4px",style:"margin-bottom: 6px;"});var ze=_(Te,2);Kt(ze,{width:"25%",height:"12px",radius:"4px",style:"opacity: 0.6"});var C=_(te,2),K=c(C);Kt(K,{width:"30px",height:"12px",radius:"4px"}),b(_e,Ce)}),b(Y,G)},ue=Y=>{var G=Gd(),_e=Re(G);bt(_e,3,d,(pe,Me)=>pe._uid||Me,(pe,Me,te)=>{var Te=Xd();let ze;var C=c(Te);Dr(C,t,"row",{get item(){return r(Me)},get index(){return r(te)},isGhost:!1,startDrag:K=>Ee(K,r(te),r(Me))}),ve(K=>{ze=Xe(Te,1,"row-wrapper svelte-ym6b2",null,ze,{"ghost-placeholder":u()===r(te)&&(n()||i()),"just-dropped":f()===r(te),"no-transition":h()}),gt(Te,K)},[()=>(r(U),j(r(te)),n(),i(),u(),v(),h(),m(()=>r(U).getRowStyle(r(te),n(),i(),u(),v(),h())))]),b(pe,Te)});var fe=_(_e,2);{var Ce=pe=>{var Me=Kd(),te=c(Me);ve(()=>le(te,X())),b(pe,Me)};P(fe,pe=>{d(),m(()=>d().length===0)&&pe(Ce)})}var N=_(fe,2);Dr(N,t,"footer",{}),b(Y,G)};P(A,Y=>{S()?Y(q):Y(ue,!1)})}Ua(ke,Y=>is(I,r(I).listBodyContainer=Y),()=>r(I)?.listBodyContainer),Ua(Q,Y=>is(I,r(I).scrollContainer=Y),()=>r(I)?.scrollContainer),ve(()=>se=Xe(Q,1,"base-list-scroll-container svelte-ym6b2",null,se,{dragging:n()})),ut(1,ke,()=>yt,()=>({duration:200})),b(e,Q),St(),x()}var Jd=k('<div slot="fallback" class="icon-fallback svelte-1eh2rsb"><!></div>'),ev=k('<span class="meta-tag svelte-1eh2rsb"> </span>'),tv=k('<div class="header-subtitle-row svelte-1eh2rsb"><h2 class="header-sub-text svelte-1eh2rsb"> </h2> <!></div>'),av=k('<span class="meta-tag svelte-1eh2rsb"> </span>'),rv=k('<span class="meta-tag svelte-1eh2rsb"> </span>'),sv=k('<span class="meta-tag quality svelte-1eh2rsb"> </span>'),nv=k('<div slot="header" class="content-padded svelte-1eh2rsb"><div class="view-header svelte-1eh2rsb"><div class="header-art svelte-1eh2rsb"><div style="width: 100%; height: 100%;" class="svelte-1eh2rsb"><!></div></div> <div class="header-info svelte-1eh2rsb"><div class="header-text-group svelte-1eh2rsb"><div class="header-label svelte-1eh2rsb"> </div> <h1 class="header-title svelte-1eh2rsb"> </h1> <!> <div class="meta-badges svelte-1eh2rsb"><!> <!> <!></div></div> <div class="header-actions svelte-1eh2rsb"><button class="btn-primary svelte-1eh2rsb"> </button> <button class="btn-secondary svelte-1eh2rsb"> </button></div></div></div></div>'),iv=k('<div slot="row" class="svelte-1eh2rsb"><!></div>'),ov=k("<button> </button>"),lv=k('<div class="sort-backdrop svelte-1eh2rsb"></div> <div class="sort-menu svelte-1eh2rsb"></div>',1),cv=k('<div class="sort-wrapper svelte-1eh2rsb"><button class="sort-trigger svelte-1eh2rsb"><span class="svelte-1eh2rsb"> </span> <span class="sort-trigger-icon svelte-1eh2rsb"><!></span></button> <!></div>'),dv=k('<div class="music-card skeleton-card svelte-1eh2rsb"><div class="card-img-container svelte-1eh2rsb"><!></div> <div class="card-title svelte-1eh2rsb" style="margin-top: 12px;"><!></div> <div class="card-sub-row svelte-1eh2rsb" style="margin-top: 6px;"><!></div></div>'),vv=k('<div class="music-grid svelte-1eh2rsb"></div>'),uv=k('<div class="group-header header-label svelte-1eh2rsb"> </div>'),fv=k('<div slot="fallback" class="icon-fallback svelte-1eh2rsb"><!></div>'),hv=k('<div class="card-sub text-ellipsis svelte-1eh2rsb"> </div>'),pv=k('<div class="card-badge svelte-1eh2rsb"> </div>'),gv=k('<div class="card-badge quality svelte-1eh2rsb"> </div>'),_v=k('<div class="music-card svelte-1eh2rsb" role="button" tabindex="0"><div class="card-img-container svelte-1eh2rsb"><!> <div class="play-overlay svelte-1eh2rsb"><span class="overlay-icon svelte-1eh2rsb"><!></span></div></div> <div class="card-title svelte-1eh2rsb"> </div> <div class="card-sub-row svelte-1eh2rsb"><!> <!> <!></div></div>'),mv=k('<div class="empty-text svelte-1eh2rsb">No results found</div>'),bv=k('<div class="music-grid svelte-1eh2rsb"></div>'),yv=k('<div class="content-padded svelte-1eh2rsb"><div class="search-input-container svelte-1eh2rsb"><span class="search-icon svelte-1eh2rsb"><!></span> <input type="text" class="svelte-1eh2rsb"/> <!></div> <!></div>'),wv=k("<div><!></div>");function kv(e,t){Et(t,!1);const a=()=>Ae(f,"$itemsStore",n),s=()=>Ae(Wt,"$navigationStack",n),[n,i]=jt(),l=T(),o=T(),u=T();let d=wt(t,"activeCategory",8,"artists");const f=Ue([]);let h=T(!0),v=T(""),p=T("name"),x=T(!1);const E=[{id:"name",label:"A-Z"},{id:"artist",label:"Artist"},{id:"year",label:"Oldest"},{id:"year_desc",label:"Newest"}];let w=T(!1),S=T(!1),X=T(null),he=T(""),ae=T(""),re=T(""),be=T(0),O=0;function U(){g(x,!r(x))}function ie(Q){g(p,Q),g(x,!1)}function H(Q,se){if(!Q||Q.length===0)return[];const ye=[...Q].sort((ce,ke)=>{switch(se){case"name":return ce.displayName.localeCompare(ke.displayName,void 0,{sensitivity:"base"});case"artist":const Se=ce.artist||"",A=ke.artist||"",q=Se.localeCompare(A,void 0,{sensitivity:"base"});return q!==0?q:(parseInt(ce.year)||0)-(parseInt(ke.year)||0);case"year":return(parseInt(ce.year)||0)-(parseInt(ke.year)||0);case"year_desc":return(parseInt(ke.year)||0)-(parseInt(ce.year)||0);default:return 0}});if(se==="artist"){const ce=[];let ke=null;return ye.forEach(Se=>{const A=Se.artist||"Unknown Artist";A!==ke&&(ce.push({_uid:`header-${A}`,isHeader:!0,title:A}),ke=A),ce.push(Se)}),ce}return ye}async function we(Q,se){if(!se)return;const ye=++O;g(h,!0),f.set([]),g(X,se.data),g(he,""),g(ae,""),g(re,""),g(be,0),console.log(`[LibraryView #${ye}] Start loading:`,se);try{let ce=[];if(se.view==="root")ce=Q==="artists"?await Na.getArtists():await Na.getAlbums();else if(se.view==="albums_by_artist"){const Se=se.data.name||se.data;ce=await Na.getArtistAlbums(Se),g(p,"year")}else if(se.view==="tracks_by_album"){const Se=se.data.name||se.data,A=se.data.artist;ce=await Na.getAlbumTracks(Se,A)}if(ye!==O){console.warn(`[LibraryView #${ye}] Request cancelled (stale).`);return}const ke=ce.map((Se,A)=>{const ue=typeof Se=="string"?{name:Se}:Se;let Y=String(ue.year||"");return Y.length>4&&(Y=Y.substring(0,4)),{...ue,displayName:ue.name||ue.title||ue.artist||"Unknown",thumbFile:ue.file||null,year:Y,_uid:(ue.file||ue.name||A)+Q+se.view}});if(console.log(`[LibraryView #${ye}] Setting ${ke.length} items.`),f.set(ke),se.view==="tracks_by_album"&&ke.length>0){g(X,ke[0]),g(be,ke.length),g(re,ke[0].year);const Se=ke.reduce((A,q)=>A+(q.time||0),0);if(Se>0){const A=Math.floor(Se/3600),q=Math.floor(Se%3600/60);g(he,A>0?`${A} hr ${q} min`:`${q} min`)}ke[0].qualityBadge&&g(ae,ke[0].qualityBadge)}}catch(ce){ye===O&&(console.error(ce),f.set([]))}finally{ye===O&&g(h,!1)}}function z(Q){r(u).view==="root"?d()==="artists"?Ba("albums_by_artist",Q):Ba("tracks_by_album",Q):r(u).view==="albums_by_artist"&&Ba("tracks_by_album",Q)}function F(){const Q=a();if(Q.length>0){const se=r(u).data.name||r(u).data.displayName||"this selection";pa({title:"Replace Queue?",message:`This will clear your queue and play all tracks from "${se}".`,confirmLabel:"Play",type:"confirm",onConfirm:()=>{g(w,!0),Ln(Q)}})}}function me(){const Q=a();Q.length>0&&(g(S,!0),zn(Q),setTimeout(()=>{g(S,!1)},2e3))}ne(()=>j(d()),()=>{d()&&(g(v,""),d(),g(p,"name"))}),ne(()=>(r(p),y),()=>{g(l,r(p)==="year_desc"?y.SORT_ASC:y.SORT_DESC)}),ne(()=>(a(),r(v),r(p)),()=>{g(o,H(a().filter(Q=>{if(!r(v))return!0;const se=r(v).toLowerCase();return Q.displayName.toLowerCase().includes(se)||Q.artist&&Q.artist.toLowerCase().includes(se)}),r(p)))}),ne(()=>s(),()=>{g(u,s()[s().length-1])}),ne(()=>(j(d()),r(u)),()=>{we(d(),r(u))}),ne(()=>r(u),()=>{r(u)&&(g(w,!1),g(S,!1),g(x,!1))}),Ht(),At();var W=wv();let L;var $=c(W);{var I=Q=>{ss(Q,{get itemsStore(){return f},get isLoading(){return r(h)},isEditMode:!1,emptyText:"No tracks found",$$slots:{header:(se,ye)=>{var ce=nv(),ke=c(ce),Se=c(ke),A=c(Se),q=c(A);{let D=mt(()=>(j($r),r(X),m(()=>$r(r(X)))));Qt(q,{get src(){return r(D)},alt:"Art",radius:"8px",$$slots:{fallback:(de,J)=>{var Le=Jd(),je=c(Le);ee(je,()=>(j(y),m(()=>y.ALBUMS))),b(de,Le)}}})}var ue=_(Se,2),Y=c(ue),G=c(Y),_e=c(G),fe=_(G,2),Ce=c(fe),N=_(fe,2);{var pe=D=>{var de=tv(),J=c(de),Le=c(J),je=_(J,2);{var Ye=B=>{var ge=ev(),Ne=c(ge);ve(()=>le(Ne,r(re))),b(B,ge)};P(je,B=>{r(re)&&r(re)!=="0"&&B(Ye)})}ve(()=>le(Le,(r(X),m(()=>r(X).artist)))),b(D,de)};P(N,D=>{r(X),m(()=>r(X)&&r(X).artist)&&D(pe)})}var Me=_(N,2),te=c(Me);{var Te=D=>{var de=av(),J=c(de);ve(()=>le(J,`${r(be)??""} tracks`)),b(D,de)};P(te,D=>{r(be)>0&&D(Te)})}var ze=_(te,2);{var C=D=>{var de=rv(),J=c(de);ve(()=>le(J,r(he))),b(D,de)};P(ze,D=>{r(he)&&D(C)})}var K=_(ze,2);{var R=D=>{var de=sv(),J=c(de);ve(()=>le(J,r(ae))),b(D,de)};P(K,D=>{r(ae)&&D(R)})}var V=_(Y,2),$e=c(V),Z=c($e),oe=_($e,2),xe=c(oe);ve(()=>{le(_e,(r(u),m(()=>r(u).view==="albums_by_artist"?"Artist":"Album"))),Ut(fe,"title",(r(u),m(()=>r(u).data.name||r(u).data.displayName))),le(Ce,(r(u),m(()=>r(u).data.name||r(u).data.displayName||"Unknown"))),$e.disabled=r(w),le(Z,r(w)?"Playing...":"Play All"),oe.disabled=r(S),le(xe,r(S)?"Added":"To Queue")}),M("click",$e,F),M("click",oe,me),b(se,ce)},row:(se,ye)=>{var ce=iv();const ke=mt(()=>ye.item),Se=mt(()=>ye.index);var A=c(ce);Mr(A,{get track(){return r(ke)},get index(){return r(Se)},isEditable:!1,$$events:{play:()=>js(r(ke))}}),b(se,ce)}}})},Ee=Q=>{var se=yv(),ye=c(se),ce=c(ye),ke=c(ce);ee(ke,()=>(j(y),m(()=>y.SEARCH)));var Se=_(ce,2),A=_(Se,2);{var q=_e=>{var fe=cv(),Ce=c(fe),N=c(Ce),pe=c(N),Me=_(N,2),te=c(Me);ee(te,()=>r(l));var Te=_(Ce,2);{var ze=C=>{var K=lv(),R=Re(K),V=_(R,2);bt(V,5,()=>E,Dt,($e,Z)=>{var oe=ov();let xe;var D=c(oe);ve(()=>{xe=Xe(oe,1,"sort-item svelte-1eh2rsb",null,xe,{selected:r(p)===r(Z).id}),le(D,(r(Z),m(()=>r(Z).label)))}),M("click",oe,()=>ie(r(Z).id)),b($e,oe)}),M("click",R,U),ut(3,R,()=>yt,()=>({duration:100})),ut(3,V,()=>Mn,()=>({start:.95,duration:100})),b(C,K)};P(Te,C=>{r(x)&&C(ze)})}ve(C=>le(pe,C),[()=>(r(p),m(()=>E.find(C=>C.id===r(p))?.label))]),M("click",Ce,U),b(_e,fe)};P(A,_e=>{j(d()),r(u),m(()=>d()==="albums"||r(u).view==="albums_by_artist")&&_e(q)})}var ue=_(ye,2);{var Y=_e=>{var fe=vv();bt(fe,4,()=>Array(12),Dt,(Ce,N)=>{var pe=dv(),Me=c(pe),te=c(Me);Kt(te,{width:"100%",height:"100%",radius:"8px"});var Te=_(Me,2),ze=c(Te);Kt(ze,{width:"80%",height:"14px",radius:"4px"});var C=_(Te,2),K=c(C);Kt(K,{width:"50%",height:"12px",radius:"4px",style:"opacity: 0.6"}),b(Ce,pe)}),b(_e,fe)},G=_e=>{var fe=bv();bt(fe,5,()=>r(o),Ce=>Ce._uid,(Ce,N)=>{var pe=st(),Me=Re(pe);{var te=ze=>{var C=uv(),K=c(C);ve(()=>le(K,(r(N),m(()=>r(N).title)))),b(ze,C)},Te=ze=>{var C=_v(),K=c(C),R=c(K);{let ge=mt(()=>(j(Gr),r(N),m(()=>Gr(r(N),"md"))));Qt(R,{get src(){return r(ge)},get alt(){return r(N),m(()=>r(N).displayName)},radius:"8px",$$slots:{fallback:(Ne,He)=>{var Fe=fv(),Be=c(Fe);{var Qe=Ke=>{var qe=st(),We=Re(qe);ee(We,()=>(j(y),m(()=>y.ARTISTS))),b(Ke,qe)},rt=Ke=>{var qe=st(),We=Re(qe);ee(We,()=>(j(y),m(()=>y.ALBUMS))),b(Ke,qe)};P(Be,Ke=>{d()==="artists"?Ke(Qe):Ke(rt,!1)})}b(Ne,Fe)}}})}var V=_(R,2),$e=c(V),Z=c($e);ee(Z,()=>(j(y),m(()=>y.PLAY)));var oe=_(K,2),xe=c(oe),D=_(oe,2),de=c(D);{var J=ge=>{var Ne=hv(),He=c(Ne);ve(()=>le(He,(r(N),m(()=>r(N).artist)))),b(ge,Ne)};P(de,ge=>{r(N),m(()=>r(N).artist)&&ge(J)})}var Le=_(de,2);{var je=ge=>{var Ne=pv(),He=c(Ne);ve(()=>le(He,(r(N),m(()=>r(N).year)))),b(ge,Ne)};P(Le,ge=>{r(N),m(()=>r(N).year&&r(N).year!=="0")&&ge(je)})}var Ye=_(Le,2);{var B=ge=>{var Ne=gv(),He=c(Ne);ve(Fe=>le(He,Fe),[()=>(r(N),m(()=>r(N).qualityBadge.split(" ")[0]))]),b(ge,Ne)};P(Ye,ge=>{r(N),m(()=>r(N).qualityBadge)&&ge(B)})}ve(()=>le(xe,(r(N),m(()=>r(N).displayName)))),M("click",C,()=>z(r(N))),M("keypress",C,ge=>ge.key==="Enter"&&z(r(N))),b(ze,C)};P(Me,ze=>{r(N),m(()=>r(N).isHeader)?ze(te):ze(Te,!1)})}b(Ce,pe)},Ce=>{var N=mv();b(Ce,N)}),b(_e,fe)};P(ue,_e=>{r(h)?_e(Y):_e(G,!1)})}ve(()=>Ut(Se,"placeholder",`Filter ${d()??""}...`)),tr(Se,()=>r(v),_e=>g(v,_e)),b(Q,se)};P($,Q=>{r(u),m(()=>r(u)?.view==="tracks_by_album")?Q(I):Q(Ee,!1)})}ve(()=>L=Xe(W,1,"view-container svelte-1eh2rsb",null,L,{scrollable:r(u)?.view!=="tracks_by_album"})),b(e,W),St(),i()}var xv=k('<div class="music-card svelte-1otxnt7"><!> <!></div>'),Ev=k('<div class="music-grid svelte-1otxnt7"></div>'),Sv=k('<div slot="fallback" class="icon-fallback svelte-1otxnt7">ð»</div>'),Tv=k('<div class="status-badge playing svelte-1otxnt7">PLAYING</div>'),$v=k('<div class="status-badge paused svelte-1otxnt7">PAUSED</div>'),Mv=k('<span class="overlay-icon svelte-1otxnt7"><!></span>'),Av=k('<div class="card-sub svelte-1otxnt7"> </div>'),Cv=k('<div class="card-badge quality svelte-1otxnt7"> </div>'),Pv=k('<div role="button" tabindex="0"><div class="card-img-container svelte-1otxnt7"><!> <div class="play-overlay svelte-1otxnt7"><!></div></div> <div class="card-title svelte-1otxnt7"> </div> <div class="card-sub-row svelte-1otxnt7"><!> <!></div></div>'),Lv=k('<div class="empty-text svelte-1otxnt7">No stations found</div>'),zv=k('<div class="music-grid svelte-1otxnt7"></div> <!>',1),Rv=k('<div class="view-container scrollable svelte-1otxnt7"><div class="content-padded no-bottom-pad svelte-1otxnt7"><div class="search-input-container svelte-1otxnt7"><span class="search-icon svelte-1otxnt7"><!></span> <input type="text" placeholder="Find station..." class="svelte-1otxnt7"/></div></div> <div class="content-padded svelte-1otxnt7"><!></div></div>');function jv(e,t){Et(t,!1);const a=()=>Ae(Ha,"$stations",l),s=()=>Ae(xt,"$status",l),n=()=>Ae(us,"$isLoadingRadio",l),i=()=>Ae(Yt,"$currentSong",l),[l,o]=jt(),u=T(),d=T();let f=T("");ne(()=>(a(),r(f)),()=>{g(u,a().filter(re=>{const be=r(f).toLowerCase();return re.name.toLowerCase().includes(be)||re.genre&&re.genre.toLowerCase().includes(be)}))}),ne(()=>s(),()=>{g(d,s().bitrate?`${s().bitrate} kbps`:s().format||"")}),Ht(),At();var h=Rv(),v=c(h),p=c(v),x=c(p),E=c(x);ee(E,()=>(j(y),m(()=>y.SEARCH)));var w=_(x,2),S=_(v,2),X=c(S);{var he=re=>{var be=Ev();bt(be,4,()=>Array(12),Dt,(O,U)=>{var ie=xv(),H=c(ie);Kt(H,{width:"100%",style:"aspect-ratio:1; border-radius:12px; margin-bottom:12px;"});var we=_(H,2);Kt(we,{width:"70%",height:"16px"}),b(O,ie)}),b(re,be)},ae=re=>{var be=zv(),O=Re(be);bt(O,5,()=>r(u),Dt,(H,we)=>{const z=mt(()=>(r(we),m(()=>r(we).file))),F=mt(()=>(i(),r(we),j(r(z)),m(()=>i().stationName===r(we).name||i().file===r(z)))),me=mt(()=>(j(Tr),r(we),m(()=>Tr(r(we)))));var W=Pv();let L;var $=c(W),I=c($);Qt(I,{get src(){return r(me)},get alt(){return r(we),m(()=>r(we).name)},radius:"8px",$$slots:{fallback:(G,_e)=>{var fe=Sv();b(G,fe)}}});var Ee=_(I,2),Q=c(Ee);{var se=G=>{var _e=st(),fe=Re(_e);{var Ce=pe=>{var Me=Tv();b(pe,Me)},N=pe=>{var Me=$v();b(pe,Me)};P(fe,pe=>{s(),m(()=>s().state==="play")?pe(Ce):pe(N,!1)})}b(G,_e)},ye=G=>{var _e=Mv(),fe=c(_e);ee(fe,()=>(j(y),m(()=>y.PLAY))),b(G,_e)};P(Q,G=>{r(F)?G(se):G(ye,!1)})}var ce=_($,2),ke=c(ce),Se=_(ce,2),A=c(Se);{var q=G=>{var _e=Av(),fe=c(_e);ve(()=>le(fe,(r(we),m(()=>r(we).genre)))),b(G,_e)};P(A,G=>{r(we),m(()=>r(we).genre)&&G(q)})}var ue=_(A,2);{var Y=G=>{var _e=Cv(),fe=c(_e);ve(()=>le(fe,r(d))),ut(1,_e,()=>yt),b(G,_e)};P(ue,G=>{r(F)&&r(d)&&G(Y)})}ve(()=>{L=Xe(W,1,"music-card svelte-1otxnt7",null,L,{"is-active":r(F)}),gt(Ee,r(F)?"opacity: 1":""),le(ke,(r(we),m(()=>r(we).name)))}),M("click",W,()=>jn(r(we))),b(H,W)});var U=_(O,2);{var ie=H=>{var we=Lv();b(H,we)};P(U,H=>{r(u),a(),m(()=>r(u).length===0&&a().length>0)&&H(ie)})}b(re,be)};P(X,re=>{n()?re(he):re(ae,!1)})}tr(w,()=>r(f),re=>g(f,re)),ut(1,h,()=>yt,()=>({duration:200})),b(e,h),St(),o()}var Iv=k('<button class="clear-icon-btn svelte-m7c4tz"><!></button>'),Nv=k('<div class="spinner svelte-m7c4tz"></div>'),Dv=k('<div class="content-padded no-bottom-pad svelte-m7c4tz"><div class="search-input-container svelte-m7c4tz"><span class="search-icon svelte-m7c4tz"><!></span> <input type="text" placeholder="Search playlists &amp; tracks..." class="svelte-m7c4tz"/> <!> <!></div></div>'),Ov=k('<span class="meta-tag svelte-m7c4tz">Loading...</span>'),qv=k('<span class="meta-tag svelte-m7c4tz"> </span>'),Fv=k('<span class="meta-tag quality svelte-m7c4tz"> </span>'),Bv=k('<span class="meta-tag svelte-m7c4tz"> </span> <!> <!>',1),Uv=k('<div slot="header" class="content-padded svelte-m7c4tz"><div class="view-header svelte-m7c4tz"><div class="header-art svelte-m7c4tz"><div class="header-icon-wrap svelte-m7c4tz"><!></div></div> <div class="header-info svelte-m7c4tz"><div class="header-text-group svelte-m7c4tz"><div class="header-label svelte-m7c4tz">Playlist</div> <h1 class="header-title svelte-m7c4tz"> </h1> <div class="meta-badges svelte-m7c4tz"><!></div></div> <div class="header-actions svelte-m7c4tz"><button class="btn-primary svelte-m7c4tz"> </button> <button class="btn-secondary svelte-m7c4tz"> </button> <button title="Edit"><!></button></div></div></div></div>'),Yv=k('<div slot="row" class="svelte-m7c4tz"><!></div>'),Hv=k('<div class="music-card skeleton-card svelte-m7c4tz"><div class="card-img-container svelte-m7c4tz"><!></div> <div style="margin-top: 8px;" class="svelte-m7c4tz"><!></div></div>'),Vv=k('<div class="content-padded svelte-m7c4tz"><div class="music-grid playlists-grid-override svelte-m7c4tz"></div></div>'),Wv=k('<button class="card-menu-btn svelte-m7c4tz"><!></button>'),Qv=k('<div class="music-card svelte-m7c4tz"><div class="card-img-container svelte-m7c4tz"><div class="icon-wrap svelte-m7c4tz"><!></div> <!> <div class="play-overlay svelte-m7c4tz"><span class="overlay-icon svelte-m7c4tz"><!></span></div></div> <div class="card-title svelte-m7c4tz"> </div> <div class="card-sub-row svelte-m7c4tz"><div class="card-sub svelte-m7c4tz"> </div></div></div>'),Xv=k('<div class="music-grid playlists-grid-override svelte-m7c4tz"><div class="music-card svelte-m7c4tz"><div class="card-img-container dashed-cover svelte-m7c4tz"><div class="icon-wrap svelte-m7c4tz"><!></div></div> <div class="card-title svelte-m7c4tz">New Playlist</div></div> <!></div>'),Kv=k('<div class="music-card svelte-m7c4tz"><div class="card-img-container svelte-m7c4tz"><div class="icon-wrap svelte-m7c4tz"><!></div> <div class="play-overlay svelte-m7c4tz"><span class="overlay-icon svelte-m7c4tz"><!></span></div></div> <div class="card-title svelte-m7c4tz"> </div></div>'),Gv=k('<div class="header-label section-spacing svelte-m7c4tz">Matched Playlists</div> <div class="music-grid horizontal section-mb svelte-m7c4tz"></div>',1),Zv=k('<div class="group-container svelte-m7c4tz"><div class="group-header svelte-m7c4tz"><div class="group-icon svelte-m7c4tz"><!></div> <div class="group-title svelte-m7c4tz"> </div> <div class="group-count svelte-m7c4tz"> </div> <div class="group-actions svelte-m7c4tz"><button class="btn-icon small svelte-m7c4tz" title="Play matches"><!></button> <button class="btn-icon small svelte-m7c4tz" title="Add matches to Queue"><!></button></div></div> <div class="group-tracks svelte-m7c4tz"></div></div>'),Jv=k('<div class="header-label section-spacing svelte-m7c4tz">Matched Tracks</div> <div class="grouped-results svelte-m7c4tz"></div>',1),eu=k('<div class="empty-text svelte-m7c4tz"> </div>'),tu=k('<div class="empty-text svelte-m7c4tz" style="opacity: 0.7">Searching tracks in playlists...</div>'),au=k("<!> <!> <!>",1),ru=k('<div class="content-padded svelte-m7c4tz"><!></div>'),su=k("<div><!> <!></div>");function nu(e,t){Et(t,!1);const a=()=>Ae(xt,"$status",v),s=()=>Ae(Yt,"$currentSong",v),n=()=>Ae(Wt,"$navigationStack",v),i=()=>Ae(zs,"$playlists",v),l=()=>Ae(Ur,"$activePlaylistTracks",v),o=()=>Ae(ln,"$isLoadingTracks",v),u=()=>Ae(Gc,"$activePlaylistName",v),d=()=>Ae(Fa,"$queue",v),f=()=>Ae(ys,"$currentTheme",v),h=()=>Ae(on,"$isLoadingPlaylists",v),[v,p]=jt(),x=T(),E=T(),w=T(),S=T(),X=T(),he=T();let ae=T(!1),re=T(!1),be=T(!1),O=T(""),U=T(!1),ie,H=0,we=T([]),z=T([]),F=T(""),me=T(""),W=T("");function L(C){g(O,C.target.value),clearTimeout(ie),r(O).length>=2?ie=setTimeout(()=>{$(r(O))},600):(g(U,!1),g(we,[]),g(z,[]))}async function $(C){if(!C)return;H++;const K=H;g(U,!0);const R=C.toLowerCase();g(we,i().filter(Z=>Z.name.toLowerCase().includes(R)));let V=[];const $e=i().filter(Z=>Z.name!=="Favorites");for(const Z of $e){if(K!==H)break;try{const oe=await Oe.send(`listplaylistinfo "${Z.name.replace(/"/g,'\\"')}"`),de=na.parseTracks(oe).map((J,Le)=>({...J,playlistPos:Le})).filter(J=>J.title&&J.title.toLowerCase().includes(R)||J.artist&&J.artist.toLowerCase().includes(R));if(de.length>0){const J=de.map(Le=>({...Le,_uid:Math.random()}));V.push({playlist:Z,tracks:J}),g(z,[...V])}}catch(oe){console.warn(`Failed to search in playlist ${Z.name}`,oe)}}K===H&&g(U,!1)}function I(C){r(ae)||js(C)}function Ee(C){C.deltaY!==0&&(C.currentTarget.scrollLeft+=C.deltaY)}function Q(C,K){pa({title:"Play Search Results?",message:`This will clear your queue and play ${C.length} matching tracks from "${K}".`,confirmLabel:"Play",type:"confirm",onConfirm:()=>{Ln(C)}})}function se(C){!C||C.length===0||zn(C)}Ya(()=>{!r(X)&&i().length===0&&Rn()});function ye(C){const K=C.reduce((V,$e)=>V+(parseFloat($e.time)||0),0);if(K>0){const V=Math.floor(K/3600),$e=Math.floor(K%3600/60);g(F,V>0?`${V} hr ${$e} min`:`${$e} min`)}else g(F,"");const R=new Set;C.forEach(V=>{V.qualityBadge&&R.add(V.qualityBadge.split(" ")[0])}),g(me,R.size===1?C[0].qualityBadge:R.size>1?"Mixed":"")}function ce(C){Ba("details",C)}function ke(){if(d().length===0){pa({title:"Create Playlist",message:"Queue is empty. Add tracks to queue before saving a playlist.",confirmLabel:"OK",type:"alert"});return}pa({title:"New Playlist",message:"Save current queue as a new playlist:",type:"prompt",placeholder:"Playlist Name",confirmLabel:"Create",onConfirm:C=>{C&&ga.createPlaylistFromQueue(C)}})}function Se(C,K){K.name!=="Favorites"&&(C.stopPropagation(),C.preventDefault(),Kr(C,null,{type:"playlist-card",playlist:K}))}function A(){pa({title:"Replace Queue?",message:`This will clear your current queue and play "${r(S).data.name}".`,confirmLabel:"Play",type:"confirm",onConfirm:()=>{g(re,!0),(void 0)(r(S).data.name,0)}})}function q(){if(l().length>0){const C=r(S).data.name.replace(/"/g,'\\"');Ts(`load "${C}"`),g(be,!0),setTimeout(()=>{g(be,!1)},2e3)}}function ue(){g(ae,!r(ae))}function Y(C){const K=r(S).data.name,R=l();R.splice(C,1),Ur.set(R),ko(K,C),ye(R)}function G(C,K){xo(r(S).data.name,C,K)}function _e(C){if(C.name==="Favorites"){if(f()==="gruvbox"){const K="var(--c-heart)";return`background: linear-gradient(135deg, ${K}, transparent); background-color: ${K};`}return"background: linear-gradient(135deg, hsl(348, 95%, 58%), hsl(348, 90%, 40%));"}return f()==="gruvbox"?`background: linear-gradient(135deg, ${C.colorVar}, transparent); background-color: ${C.colorVar};`:`background: ${C.color}`}function fe(C){if(!C)return"";if(C.name==="Favorites"){if(f()==="gruvbox"){const V="var(--c-heart)";return`background: linear-gradient(135deg, ${V}, transparent); background-color: ${V};`}return"background: linear-gradient(135deg, hsl(348, 95%, 58%), hsl(348, 90%, 40%));"}const K="var(--c-bg-card)";if(f()==="gruvbox"){const V=C.colorVar||C.color||K;return`background: linear-gradient(135deg, ${V}, transparent); background-color: ${V};`}return`background: ${C.color||C.colorVar||K}`}ne(()=>a(),()=>{g(x,Number(a().song))}),ne(()=>s(),()=>{g(E,s().file)}),ne(()=>a(),()=>{g(w,a().state==="play")}),ne(()=>n(),()=>{g(S,n()[n().length-1])}),ne(()=>r(S),()=>{g(X,r(S).view==="details")}),ne(()=>(r(S),r(W)),()=>{const C=JSON.stringify(r(S));C!==r(W)&&(g(O,""),g(re,!1),g(be,!1),g(ae,!1),g(we,[]),g(z,[]),g(U,!1),g(W,C))}),ne(()=>(r(X),l(),o()),()=>{r(X)&&l().length>0?ye(l()):r(X)&&l().length===0&&!o()&&(g(F,"0 min"),g(me,""))}),ne(()=>(r(X),r(S),u(),Pd),()=>{r(X)&&r(S).data&&u()!==r(S).data.name&&yo(r(S).data.name)}),ne(()=>r(S),()=>{g(he,r(S)?.data?.name==="Favorites")}),Ht(),At();var Ce=su();let N;var pe=c(Ce);{var Me=C=>{var K=Dv(),R=c(K),V=c(R),$e=c(V);ee($e,()=>(j(y),m(()=>y.SEARCH)));var Z=_(V,2),oe=_(Z,2);{var xe=J=>{var Le=Iv(),je=c(Le);ee(je,()=>(j(y),m(()=>y.CLOSE))),M("click",Le,()=>{g(O,""),g(we,[]),g(z,[]),g(U,!1)}),b(J,Le)};P(oe,J=>{r(O)&&J(xe)})}var D=_(oe,2);{var de=J=>{var Le=Nv();b(J,Le)};P(D,J=>{r(U)&&J(de)})}ve(()=>io(Z,r(O))),M("input",Z,L),b(C,K)};P(pe,C=>{r(X)||C(Me)})}var te=_(pe,2);{var Te=C=>{ss(C,{get itemsStore(){return Ur},get isLoading(){return o()},get isEditMode(){return r(ae)},emptyText:"This playlist is empty.",onMoveItem:G,$$slots:{header:(K,R)=>{var V=Uv(),$e=c(V),Z=c($e),oe=c(Z),xe=c(oe);ee(xe,()=>(r(he),j(y),m(()=>r(he)?y.HEART_FILLED:y.PLAYLISTS)));var D=_(Z,2),de=c(D),J=_(c(de),2),Le=c(J),je=_(J,2),Ye=c(je);{var B=We=>{var Ge=Ov();b(We,Ge)},ge=We=>{var Ge=Bv(),lt=Re(Ge),Je=c(lt),Ze=_(lt,2);{var Ve=ft=>{var dt=qv(),at=c(dt);ve(()=>le(at,r(F))),b(ft,dt)};P(Ze,ft=>{r(F)&&ft(Ve)})}var vt=_(Ze,2);{var ct=ft=>{var dt=Fv(),at=c(dt);ve(()=>le(at,r(me))),b(ft,dt)};P(vt,ft=>{r(me)&&ft(ct)})}ve(()=>le(Je,`${l(),m(()=>l().length)??""} tracks`)),b(We,Ge)};P(Ye,We=>{o()?We(B):We(ge,!1)})}var Ne=_(de,2),He=c(Ne),Fe=c(He),Be=_(He,2),Qe=c(Be),rt=_(Be,2);let Ke;var qe=c(rt);ee(qe,()=>(r(ae),j(y),m(()=>r(ae)?y.ACCEPT:y.EDIT))),ve(We=>{gt(Z,We),Ut(J,"title",(r(S),m(()=>r(S).data.name))),le(Le,(r(S),m(()=>r(S).data.name))),He.disabled=r(re),le(Fe,r(re)?"Playing...":"Play All"),Be.disabled=r(be),le(Qe,r(be)?"Added":"To Queue"),Ke=Xe(rt,1,"btn-action svelte-m7c4tz",null,Ke,{active:r(ae)})},[()=>(r(S),m(()=>fe(r(S).data)))]),M("click",He,A),M("click",Be,q),M("click",rt,ue),b(K,V)},row:(K,R)=>{var V=Yv();const $e=mt(()=>R.item),Z=mt(()=>R.index),oe=mt(()=>R.startDrag);var xe=c(V);Mr(xe,{get track(){return r($e)},get index(){return r(Z)},get playingIndex(){return r(x)},get playingFile(){return r(E)},get isPlaying(){return r(w)},get isEditable(){return r(ae)},$$events:{play:()=>I(r($e)),remove:()=>Y(r(Z)),startdrag(...D){r(oe)?.apply(this,D)}}}),b(K,V)}}})},ze=C=>{var K=st(),R=Re(K);{var V=Z=>{var oe=Vv(),xe=c(oe);bt(xe,4,()=>Array(8),Dt,(D,de)=>{var J=Hv(),Le=c(J),je=c(Le);Kt(je,{width:"100%",height:"100%",radius:"12px"});var Ye=_(Le,2),B=c(Ye);Kt(B,{width:"60%",height:"16px",radius:"4px"}),b(D,J)}),b(Z,oe)},$e=Z=>{var oe=ru(),xe=c(oe);{var D=J=>{var Le=Xv(),je=c(Le),Ye=c(je),B=c(Ye),ge=c(B);ee(ge,()=>(j(y),m(()=>y.ADD)));var Ne=_(je,2);bt(Ne,1,i,He=>He.name,(He,Fe)=>{const Be=mt(()=>(r(Fe),m(()=>r(Fe).name==="Favorites")));var Qe=Qv(),rt=c(Qe),Ke=c(rt),qe=c(Ke);ee(qe,()=>(j(r(Be)),j(y),m(()=>r(Be)?y.HEART_FILLED:y.PLAYLISTS)));var We=_(Ke,2);{var Ge=at=>{var De=Wv(),ht=c(De);ee(ht,()=>(j(y),m(()=>y.DOTS))),M("click",De,Lt=>Se(Lt,r(Fe))),b(at,De)};P(We,at=>{r(Be)||at(Ge)})}var lt=_(We,2),Je=c(lt),Ze=c(Je);ee(Ze,()=>(j(y),m(()=>y.PLAY)));var Ve=_(rt,2),vt=c(Ve),ct=_(Ve,2),ft=c(ct),dt=c(ft);Ot(()=>M("click",Qe,()=>ce(r(Fe)))),En(Qe,at=>In?.(at)),Ot(()=>M("longpress",Qe,at=>Se(at.detail.originalEvent,r(Fe)))),Ot(()=>M("contextmenu",Qe,at=>Se(at,r(Fe)))),ve((at,De)=>{gt(rt,at),le(vt,(r(Fe),m(()=>r(Fe).name))),le(dt,De)},[()=>(r(Fe),m(()=>_e(r(Fe)))),()=>(r(Fe),m(()=>r(Fe).lastModified?new Date(r(Fe).lastModified).toLocaleDateString():"Playlist"))]),b(He,Qe)}),M("click",je,ke),b(J,Le)},de=J=>{var Le=au(),je=Re(Le);{var Ye=Be=>{var Qe=Gv(),rt=_(Re(Qe),2);bt(rt,5,()=>r(we),Ke=>Ke.name,(Ke,qe)=>{const We=mt(()=>(r(qe),m(()=>r(qe).name==="Favorites")));var Ge=Kv(),lt=c(Ge),Je=c(lt),Ze=c(Je);ee(Ze,()=>(j(r(We)),j(y),m(()=>r(We)?y.HEART_FILLED:y.PLAYLISTS)));var Ve=_(Je,2),vt=c(Ve),ct=c(vt);ee(ct,()=>(j(y),m(()=>y.PLAY)));var ft=_(lt,2),dt=c(ft);ve(at=>{gt(lt,at),le(dt,(r(qe),m(()=>r(qe).name)))},[()=>(r(qe),m(()=>_e(r(qe))))]),M("click",Ge,()=>ce(r(qe))),b(Ke,Ge)}),M("wheel",rt,Ee),b(Be,Qe)};P(je,Be=>{r(we),m(()=>r(we).length>0)&&Be(Ye)})}var B=_(je,2);{var ge=Be=>{var Qe=Jv(),rt=_(Re(Qe),2);bt(rt,5,()=>r(z),Ke=>Ke.playlist.name,(Ke,qe)=>{var We=Zv(),Ge=c(We),lt=c(Ge),Je=c(lt);ee(Je,()=>(j(y),m(()=>y.PLAYLISTS)));var Ze=_(lt,2),Ve=c(Ze),vt=_(Ze,2),ct=c(vt),ft=_(vt,2),dt=c(ft),at=c(dt);ee(at,()=>(j(y),m(()=>y.PLAY)));var De=_(dt,2),ht=c(De);ee(ht,()=>(j(y),m(()=>y.ADD)));var Lt=_(Ge,2);bt(Lt,5,()=>(r(qe),m(()=>r(qe).tracks)),Jt=>Jt._uid,(Jt,Pe)=>{Mr(Jt,{get track(){return r(Pe)},get index(){return r(Pe),m(()=>r(Pe).playlistPos)},get playingFile(){return r(E)},get isPlaying(){return r(w)},$$events:{play:()=>I(r(Pe))}})}),ve(()=>{le(Ve,(r(qe),m(()=>r(qe).playlist.name))),le(ct,(r(qe),m(()=>r(qe).tracks.length)))}),M("click",dt,Gt(()=>Q(r(qe).tracks,r(qe).playlist.name))),M("click",De,Gt(()=>se(r(qe).tracks))),M("click",Ge,()=>ce(r(qe).playlist)),b(Ke,We)}),b(Be,Qe)};P(B,Be=>{r(z),m(()=>r(z).length>0)&&Be(ge)})}var Ne=_(B,2);{var He=Be=>{var Qe=eu(),rt=c(Qe);ve(()=>le(rt,`No matches found for "${r(O)??""}"`)),b(Be,Qe)},Fe=Be=>{var Qe=st(),rt=Re(Qe);{var Ke=qe=>{var We=tu();b(qe,We)};P(rt,qe=>{r(U),r(z),m(()=>r(U)&&r(z).length===0)&&qe(Ke)},!0)}b(Be,Qe)};P(Ne,Be=>{r(U),r(we),r(z),m(()=>!r(U)&&r(we).length===0&&r(z).length===0)?Be(He):Be(Fe,!1)})}b(J,Le)};P(xe,J=>{r(O)?J(de,!1):J(D)})}b(Z,oe)};P(R,Z=>{h()?Z(V):Z($e,!1)},!0)}b(C,K)};P(te,C=>{r(X)?C(Te):C(ze,!1)})}ve(()=>N=Xe(Ce,1,"view-container svelte-m7c4tz",null,N,{scrollable:!r(X)})),b(e,Ce),St(),p()}var iu=k('<button class="clear-icon-btn svelte-1d3z1zm"><!></button>'),ou=k('<div class="spinner svelte-1d3z1zm"></div>'),lu=k('<div class="placeholder-state svelte-1d3z1zm"><div class="placeholder-icon svelte-1d3z1zm">ð</div> <p class="svelte-1d3z1zm">Type to search your library</p></div>'),cu=k('<div class="empty-text svelte-1d3z1zm"> </div>'),du=k('<div slot="fallback" class="icon-fallback svelte-1d3z1zm">ð¿</div>'),vu=k('<div class="meta-tag svelte-1d3z1zm"> </div>'),uu=k('<div class="meta-tag quality svelte-1d3z1zm"> </div>'),fu=k('<div class="music-card svelte-1d3z1zm"><div class="card-img-container svelte-1d3z1zm"><!> <div class="play-overlay svelte-1d3z1zm"><span class="overlay-icon svelte-1d3z1zm"><!></span></div></div> <div class="card-title svelte-1d3z1zm"> </div> <div class="card-sub-row svelte-1d3z1zm"><div class="card-sub text-ellipsis svelte-1d3z1zm"> </div> <!> <!></div></div>'),hu=k('<div class="header-label section-spacing svelte-1d3z1zm">Albums</div> <div class="music-grid horizontal section-mb svelte-1d3z1zm"></div>',1),pu=k('<div class="header-label svelte-1d3z1zm">Tracks</div>'),gu=k("<!> <!>",1),_u=k('<div slot="header" class="content-padded svelte-1d3z1zm"><!></div>'),mu=k('<div slot="row" class="svelte-1d3z1zm"><!></div>'),bu=k('<div class="view-container svelte-1d3z1zm"><div class="content-padded no-bottom-pad svelte-1d3z1zm"><div class="search-input-container svelte-1d3z1zm"><span class="search-icon svelte-1d3z1zm"><!></span> <input type="text" placeholder="Artists, songs, or albums" autoFocus class="svelte-1d3z1zm"/> <!> <!></div></div> <!></div>');function yu(e,t){Et(t,!1);const a=()=>Ae(Yr,"$searchQuery",n),s=()=>Ae(l,"$tracksStore",n),[n,i]=jt(),l=Ue([]);let o=T([]),u=T(!1),d,f=T(!1);Ya(()=>{a().length>=2&&p(a())});function h(z){Yr.set(z.target.value),clearTimeout(d),d=setTimeout(()=>{p(a())},300)}function v(){Yr.set(""),l.set([]),g(o,[]),g(f,!1)}async function p(z){const F=z.trim().toLowerCase();if(F.length<2){l.set([]),g(o,[]),g(f,!1);return}g(u,!0),g(f,!0);try{const me=await Na.search(F),W=me.map(($,I)=>({...$,_uid:$.file?`${$.file}-${I}`:`search-${I}`}));l.set(W);const L=new Map;me.forEach($=>{const I=$.album;if(I&&!L.has(I)){const Ee=I.toLowerCase().includes(F),Q=$.artist&&$.artist.toLowerCase().includes(F);if(Ee||Q){let se=String($.year||"");se.length>4&&(se=se.substring(0,4)),L.set(I,{name:I,artist:$.artist,file:$.file,thumbHash:$.thumbHash,_uid:`alb-${I}`,year:se,qualityBadge:$.qualityBadge})}}}),g(o,Array.from(L.values()))}finally{g(u,!1)}}function x(z){js(z)}function E(z){Ba("tracks_by_album",{name:z.name,artist:z.artist})}function w(z){z.deltaY!==0&&(z.currentTarget.scrollLeft+=z.deltaY)}At();var S=bu(),X=c(S),he=c(X),ae=c(he),re=c(ae);ee(re,()=>y.SEARCH);var be=_(ae,2),O=_(be,2);{var U=z=>{var F=iu(),me=c(F);ee(me,()=>y.CLOSE),M("click",F,v),b(z,F)};P(O,z=>{a().length>0&&z(U)})}var ie=_(O,2);{var H=z=>{var F=ou();b(z,F)};P(ie,z=>{r(u)&&z(H)})}var we=_(X,2);ss(we,{get itemsStore(){return l},isEditMode:!1,isLoading:!1,emptyText:"",$$slots:{header:(z,F)=>{var me=_u(),W=c(me);{var L=I=>{var Ee=lu();b(I,Ee)},$=I=>{var Ee=st(),Q=Re(Ee);{var se=ce=>{var ke=cu(),Se=c(ke);ve(()=>le(Se,`No results found for "${a()??""}"`)),b(ce,ke)},ye=ce=>{var ke=gu(),Se=Re(ke);{var A=Y=>{var G=hu(),_e=_(Re(G),2);bt(_e,5,()=>r(o),fe=>fe._uid,(fe,Ce)=>{var N=fu(),pe=c(N),Me=c(pe);{let de=mt(()=>Gr(r(Ce),"md"));Qt(Me,{get src(){return r(de)},get alt(){return r(Ce).name},radius:"8px",$$slots:{fallback:(J,Le)=>{var je=du();b(J,je)}}})}var te=_(Me,2),Te=c(te),ze=c(Te);ee(ze,()=>y.PLAY);var C=_(pe,2),K=c(C),R=_(C,2),V=c(R),$e=c(V),Z=_(V,2);{var oe=de=>{var J=vu(),Le=c(J);ve(()=>le(Le,r(Ce).year)),b(de,J)};P(Z,de=>{r(Ce).year&&r(Ce).year!=="0"&&r(Ce).year!==0&&de(oe)})}var xe=_(Z,2);{var D=de=>{var J=uu(),Le=c(J);ve(je=>le(Le,je),[()=>r(Ce).qualityBadge.split(" ")[0]]),b(de,J)};P(xe,de=>{r(Ce).qualityBadge&&de(D)})}ve(()=>{Ut(C,"title",r(Ce).name),le(K,r(Ce).name),le($e,r(Ce).artist)}),M("click",N,()=>E(r(Ce))),b(fe,N)}),M("wheel",_e,w),b(Y,G)};P(Se,Y=>{r(o).length>0&&Y(A)})}var q=_(Se,2);{var ue=Y=>{var G=pu();b(Y,G)};P(q,Y=>{s().length>0&&Y(ue)})}b(ce,ke)};P(Q,ce=>{!r(u)&&s().length===0&&r(o).length===0&&r(f)?ce(se):ce(ye,!1)},!0)}b(I,Ee)};P(W,I=>{a().length<2?I(L):I($,!1)})}b(z,me)},row:(z,F)=>{var me=mu();const W=mt(()=>F.item),L=mt(()=>F.index);var $=c(me);Mr($,{get track(){return r(W)},get index(){return r(L)},isEditable:!1,$$events:{play:()=>x(r(W))}}),b(z,me)}}}),ve(()=>io(be,a())),M("input",be,h),b(e,S),St(),i()}var wu=k('<span class="status-badge connected svelte-1j67jqh">Connected</span>'),ku=k('<span class="status-badge disconnected svelte-1j67jqh">Not Connected</span>'),xu=k('<div class="separator svelte-1j67jqh"></div> <div class="row space-between svelte-1j67jqh"><label class="svelte-1j67jqh">Connection Status</label> <!></div> <div class="separator svelte-1j67jqh"></div> <div class="row svelte-1j67jqh"><label for="yandex-token" class="svelte-1j67jqh">OAuth Token</label> <div class="input-group svelte-1j67jqh"><input id="yandex-token" type="password" placeholder="Paste token here..." class="svelte-1j67jqh"/> <button class="btn-primary small svelte-1j67jqh"> </button></div></div> <p class="hint svelte-1j67jqh">Token is stored securely on the device.</p>',1),Eu=k('<option class="svelte-1j67jqh"> </option>'),Su=k('<div class="separator svelte-1j67jqh"></div> <div class="row space-between svelte-1j67jqh"><label for="alarm-time" class="svelte-1j67jqh">Wake up time</label> <input id="alarm-time" type="time" class="svelte-1j67jqh"/></div> <div class="separator svelte-1j67jqh"></div> <div class="row space-between svelte-1j67jqh"><label for="alarm-pl" class="svelte-1j67jqh">Playlist</label> <div class="select-wrapper svelte-1j67jqh"><select id="alarm-pl" class="svelte-1j67jqh"></select> <div class="select-arrow svelte-1j67jqh"><!></div></div></div>',1),Tu=k('<div class="view-container scrollable svelte-1j67jqh"><div class="content-padded svelte-1j67jqh"><h1 class="header-title big svelte-1j67jqh">Settings</h1> <div class="section svelte-1j67jqh"><div class="section-header svelte-1j67jqh"><span class="svelte-1j67jqh">Services</span></div> <div class="card svelte-1j67jqh"><div class="row space-between svelte-1j67jqh"><label class="svelte-1j67jqh">Enable Yandex Music (Beta)</label> <button><div class="toggle-circle svelte-1j67jqh"></div></button></div> <!></div></div> <div class="section svelte-1j67jqh"><div class="section-header svelte-1j67jqh"><span class="svelte-1j67jqh">Alarm Clock</span></div> <div class="card svelte-1j67jqh"><div class="row space-between svelte-1j67jqh"><span class="label-text svelte-1j67jqh">Current Player Time</span> <span class="mono-badge svelte-1j67jqh"> </span></div> <div class="separator svelte-1j67jqh"></div> <div class="row space-between svelte-1j67jqh"><label class="svelte-1j67jqh">Enable Alarm</label> <button><div class="toggle-circle svelte-1j67jqh"></div></button></div> <!></div></div> <div class="section svelte-1j67jqh"><div class="section-header svelte-1j67jqh"><span class="svelte-1j67jqh">Appearance</span></div> <div class="card clickable svelte-1j67jqh"><div class="row space-between svelte-1j67jqh"><span class="svelte-1j67jqh">Interface Theme</span> <div class="row-gap svelte-1j67jqh"><span class="value svelte-1j67jqh"> </span> <span class="chevron svelte-1j67jqh"><!></span></div></div></div></div> <div class="section svelte-1j67jqh"><div class="section-header svelte-1j67jqh"><span class="svelte-1j67jqh">Connection</span></div> <div class="card svelte-1j67jqh"><div class="row svelte-1j67jqh"><label for="ip" class="svelte-1j67jqh">Moode Device IP</label> <div class="input-group svelte-1j67jqh"><input id="ip" type="text" placeholder="192.168.x.x" class="svelte-1j67jqh"/> <button class="btn-primary small svelte-1j67jqh">Save</button></div></div> <p class="hint svelte-1j67jqh"> </p></div></div> <div class="section svelte-1j67jqh"><div class="section-header svelte-1j67jqh"><span class="svelte-1j67jqh">About</span></div> <div class="card svelte-1j67jqh"><div class="info-row svelte-1j67jqh"><span class="svelte-1j67jqh">Version</span> <span class="mono svelte-1j67jqh"> </span></div> <div class="separator svelte-1j67jqh"></div> <div class="info-row svelte-1j67jqh"><span class="svelte-1j67jqh">Build Date</span> <span class="mono small svelte-1j67jqh"> </span></div></div></div></div></div>');function $u(e,t){Et(t,!1);const a=()=>Ae(ys,"$currentTheme",d),s=()=>Ae(fn,"$isAlarmEnabled",d),n=()=>Ae(un,"$alarmTime",d),i=()=>Ae(hn,"$alarmPlaylist",d),l=()=>Ae(Es,"$isYandexEnabled",d),o=()=>Ae(yr,"$yandexAuthStatus",d),u=()=>Ae(zs,"$playlists",d),[d,f]=jt(),h=T();let v=T(Ka.MOODE_IP),p=T("--:--"),x,E=T(""),w=T(!1);function S(){Ka.setMoodeIp(r(v)),Ie("IP Saved. Reloading...","success"),setTimeout(()=>location.reload(),1e3)}const X="0.0.1",he="2026-01-10T22:30:01.164Z",ae=new Date(he).toLocaleString();function re(){const B=sn.map(ge=>({label:ge.label,value:ge.id}));pa({title:"Select Theme",message:"Choose your preferred interface style:",type:"select",inputValue:a(),options:B,onConfirm:ge=>{ys.set(ge),Ie("Theme updated","success")}})}async function be(){const B=await Da.getServerTime();B&&g(p,B)}Ya(()=>{be(),x=setInterval(be,6e4),Da.checkYandexAuth()}),co(()=>{x&&clearInterval(x)});async function O(){try{await Da.setAlarm(s(),n(),i()),s()&&Ie(`Alarm set for ${n()}`,"success")}catch{Ie("Failed to sync alarm settings","error")}}function U(){fn.update(B=>!B),O()}function ie(){Es.update(B=>!B)}async function H(){if(!r(E))return;g(w,!0);const B=await Da.saveYandexToken(r(E));g(w,!1),B&&g(E,"")}ne(()=>a(),()=>{g(h,sn.find(B=>B.id===a())?.label||"Default")}),Ht(),At();var we=Tu(),z=c(we),F=_(c(z),2),me=_(c(F),2),W=c(me),L=_(c(W),2);let $;var I=_(W,2);{var Ee=B=>{var ge=xu(),Ne=Re(ge),He=_(Ne,2),Fe=_(c(He),2);{var Be=Ze=>{var Ve=wu();b(Ze,Ve)},Qe=Ze=>{var Ve=ku();b(Ze,Ve)};P(Fe,Ze=>{o()?Ze(Be):Ze(Qe,!1)})}var rt=_(He,2),Ke=_(rt,2),qe=_(c(Ke),2),We=c(qe),Ge=_(We,2),lt=c(Ge),Je=_(Ke,2);ve(()=>{Ge.disabled=r(w),le(lt,r(w)?"Checking...":"Save")}),ut(1,Ne,()=>yt),ut(1,He,()=>yt),ut(1,rt,()=>yt),tr(We,()=>r(E),Ze=>g(E,Ze)),M("click",Ge,H),ut(1,Ke,()=>yt),ut(1,Je,()=>yt),b(B,ge)};P(I,B=>{l()&&B(Ee)})}var Q=_(F,2),se=_(c(Q),2),ye=c(se),ce=_(c(ye),2),ke=c(ce),Se=_(ye,4),A=_(c(Se),2);let q;var ue=_(Se,2);{var Y=B=>{var ge=Su(),Ne=Re(ge),He=_(Ne,2),Fe=_(c(He),2),Be=_(He,2),Qe=_(Be,2),rt=_(c(Qe),2),Ke=c(rt);ve(()=>{i(),Cl(()=>{u()})}),bt(Ke,5,u,Dt,(Ge,lt)=>{var Je=Eu(),Ze=c(Je),Ve={};ve(()=>{le(Ze,(r(lt),m(()=>r(lt).name))),Ve!==(Ve=(r(lt),m(()=>r(lt).name)))&&(Je.value=(Je.__value=(r(lt),m(()=>r(lt).name)))??"")}),b(Ge,Je)});var qe=_(Ke,2),We=c(qe);ee(We,()=>(j(y),m(()=>y.CHEVRON_DOWN))),ut(1,Ne,()=>yt),tr(Fe,n,Ge=>ti(un,Ge)),M("change",Fe,O),ut(1,He,()=>yt),ut(1,Be,()=>yt),Zl(Ke,i,Ge=>ti(hn,Ge)),M("change",Ke,O),ut(1,Qe,()=>yt),b(B,ge)};P(ue,B=>{s()&&B(Y)})}var G=_(Q,2),_e=_(c(G),2),fe=c(_e),Ce=_(c(fe),2),N=c(Ce),pe=c(N),Me=_(N,2),te=c(Me);ee(te,()=>(j(y),m(()=>y.NEXT)));var Te=_(G,2),ze=_(c(Te),2),C=c(ze),K=_(c(C),2),R=c(K),V=_(R,2),$e=_(C,2),Z=c($e),oe=_(Te,2),xe=_(c(oe),2),D=c(xe),de=_(c(D),2),J=c(de),Le=_(D,4),je=_(c(Le),2),Ye=c(je);ve(()=>{$=Xe(L,1,"toggle-btn svelte-1j67jqh",null,$,{active:l()}),le(ke,r(p)),q=Xe(A,1,"toggle-btn svelte-1j67jqh",null,q,{active:s()}),le(pe,r(h)),le(Z,`Current: ${j(Ka),m(()=>Ka.MOODE_IP)??""}`),le(J,X),le(Ye,ae)}),M("click",L,ie),M("click",A,U),M("click",_e,re),tr(R,()=>r(v),B=>g(v,B)),M("click",V,S),ut(1,we,()=>yt,()=>({duration:200})),b(e,we),St(),f()}var Mu=k('<span class="meta-tag svelte-185fgrr"> </span>'),Au=k('<div slot="header" class="content-padded svelte-185fgrr"><div class="view-header svelte-185fgrr"><div class="header-art svelte-185fgrr" style="background: var(--c-surface-active);"><div class="header-icon-wrap svelte-185fgrr"><!></div></div> <div class="header-info svelte-185fgrr"><div class="header-text-group svelte-185fgrr"><div class="header-label svelte-185fgrr">Now Playing</div> <h1 class="header-title svelte-185fgrr">Current Queue</h1> <div class="meta-badges svelte-185fgrr"><span class="meta-tag svelte-185fgrr"> </span> <!></div></div> <div class="header-actions svelte-185fgrr"><button class="btn-secondary svelte-185fgrr" title="Clear Queue">Clear</button> <button class="btn-action svelte-185fgrr" title="Save Queue"><!></button> <button><!></button></div></div></div></div>'),Cu=k('<div slot="row" class="svelte-185fgrr"><!></div>'),Pu=k('<div class="view-container svelte-185fgrr"><!></div>');function Lu(e,t){Et(t,!1);const a=()=>Ae(xt,"$status",l),s=()=>Ae(kt,"$isQueueLocked",l),n=()=>Ae(Yt,"$currentSong",l),i=()=>Ae(Fa,"$queue",l),[l,o]=jt(),u=T(),d=T(),f=T(),h=T();let v=T(!1),p=T(""),x=T(-1);function E(){g(v,!r(v))}function w(O){r(v)||Ts(`play ${O}`)}function S(O){O<r(x)&&g(x,r(x)-1),oa.removeFromQueue(O)}async function X(){pa({title:"Save Playlist",message:"Enter a name for this playlist:",type:"prompt",placeholder:"Playlist Name",confirmLabel:"Save",onConfirm:async O=>{O&&O.trim().length>0&&(await oa.saveQueue(O),Rn())}})}function he(){i().length!==0&&pa({title:"Clear Queue",message:"Are you sure you want to clear the entire play queue?",confirmLabel:"Clear All",type:"confirm",onConfirm:async()=>{Fa.set([]),Yt.set({title:"Not Playing",artist:"",album:"",file:"",stationName:null,id:null,pos:null}),xt.update(O=>({...O,state:"stop",song:-1,songid:-1,elapsed:0})),await Ts("clear")}})}function ae(O,U){let ie=r(x);O===ie?ie=U:O<ie&&U>=ie?ie-=1:O>ie&&U<=ie&&(ie+=1),g(x,ie),oa.moveTrack(O,U)}ne(()=>a(),()=>{g(u,Number(a().song))}),ne(()=>(s(),r(u)),()=>{s()||g(x,r(u))}),ne(()=>r(x),()=>{g(d,r(x))}),ne(()=>n(),()=>{g(f,n().file)}),ne(()=>a(),()=>{g(h,a().state==="play")}),ne(()=>i(),()=>{if(i().length>=0){const O=i().reduce((U,ie)=>U+(parseFloat(ie.time)||0),0);if(O>0){const U=Math.floor(O/3600),ie=Math.floor(O%3600/60);U>0?g(p,`${U} hr ${ie} min`):g(p,`${ie} min`)}else g(p,"")}}),Ht(),At();var re=Pu(),be=c(re);ss(be,{get itemsStore(){return Fa},get isEditMode(){return r(v)},emptyText:"Queue is empty",onMoveItem:ae,$$slots:{header:(O,U)=>{var ie=Au(),H=c(ie),we=c(H),z=c(we),F=c(z);ee(F,()=>(j(y),m(()=>y.MENU)));var me=_(we,2),W=c(me),L=_(c(W),4),$=c(L),I=c($),Ee=_($,2);{var Q=ue=>{var Y=Mu(),G=c(Y);ve(()=>le(G,r(p))),b(ue,Y)};P(Ee,ue=>{r(p)&&ue(Q)})}var se=_(W,2),ye=c(se),ce=_(ye,2),ke=c(ce);ee(ke,()=>(j(y),m(()=>y.SAVE)));var Se=_(ce,2);let A;var q=c(Se);ee(q,()=>(r(v),j(y),m(()=>r(v)?y.ACCEPT:y.EDIT))),ve(()=>{le(I,`${i(),m(()=>i().length)??""} tracks`),ye.disabled=(i(),m(()=>i().length===0)),ce.disabled=(i(),m(()=>i().length===0)),A=Xe(Se,1,"btn-action svelte-185fgrr",null,A,{active:r(v)}),Ut(Se,"title",r(v)?"Finish Editing":"Edit Queue"),Se.disabled=(i(),m(()=>i().length===0))}),M("click",ye,he),M("click",ce,X),M("click",Se,E),b(O,ie)},row:(O,U)=>{var ie=Cu();const H=mt(()=>U.item),we=mt(()=>U.index),z=mt(()=>U.startDrag);var F=c(ie);Mr(F,{get track(){return r(H)},get index(){return r(we)},get playingIndex(){return r(d)},get playingFile(){return r(f)},get isPlaying(){return r(h)},get isEditable(){return r(v)},$$events:{play:()=>w(r(we)),remove:()=>S(r(we)),startdrag(...me){r(z)?.apply(this,me)}}}),b(O,ie)}}}),b(e,re),St(),o()}var zu=k('<div class="token-alert content-padded svelte-4g0hpd"><h3 class="svelte-4g0hpd">Yandex Music Not Connected</h3> <p class="svelte-4g0hpd">Please go to Settings and connect your account.</p></div>'),Ru=k('<button class="back-icon-btn svelte-4g0hpd"><!></button>'),ju=k('<span class="search-icon svelte-4g0hpd"><!></span>'),Iu=k('<button class="clear-btn svelte-4g0hpd"><!></button>'),Nu=k('<div class="filter-tabs svelte-4g0hpd"><button>All</button> <button>Tracks</button></div>'),Du=k('<div class="icon-wrap svelte-4g0hpd"><!></div>'),Ou=k('<div class="music-card svelte-4g0hpd"><div><!> <div class="play-overlay svelte-4g0hpd"><span class="overlay-icon svelte-4g0hpd"><!></span></div></div> <div class="card-title svelte-4g0hpd"> </div></div>'),qu=k('<div class="music-card svelte-4g0hpd"><div class="card-img-container svelte-4g0hpd"><!> <div class="play-overlay svelte-4g0hpd"><span class="overlay-icon svelte-4g0hpd"><!></span></div></div> <div class="card-title svelte-4g0hpd"> </div></div>'),Fu=k('<h2 class="header-label svelte-4g0hpd">Moods & Genres</h2> <div class="music-grid horizontal section-mb svelte-4g0hpd"></div>',1),Bu=k('<div class="music-card svelte-4g0hpd"><div class="card-img-container svelte-4g0hpd"><!></div> <div class="card-title svelte-4g0hpd"> </div></div>'),Uu=k('<h2 class="header-label svelte-4g0hpd">Mixes for You</h2> <div class="music-grid horizontal section-mb svelte-4g0hpd"></div>',1),Yu=k('<div class="content-padded svelte-4g0hpd"><h2 class="header-label svelte-4g0hpd">Library & Vibe</h2> <div class="music-grid horizontal section-mb svelte-4g0hpd"></div> <!> <!></div>'),Hu=k('<div class="spinner svelte-4g0hpd"></div>'),Vu=k('<div class="music-card svelte-4g0hpd"><div class="card-img-container rounded svelte-4g0hpd"><!></div> <div class="card-title center svelte-4g0hpd"> </div></div>'),Wu=k('<h3 class="header-label svelte-4g0hpd">Artists</h3> <div class="music-grid horizontal section-mb svelte-4g0hpd"></div>',1),Qu=k('<div class="music-card svelte-4g0hpd"><div class="card-img-container svelte-4g0hpd"><!></div> <div class="card-title svelte-4g0hpd"> </div> <div class="card-sub svelte-4g0hpd"> </div></div>'),Xu=k('<h3 class="header-label svelte-4g0hpd">Albums</h3> <div class="music-grid horizontal section-mb svelte-4g0hpd"></div>',1),Ku=k('<div class="content-padded svelte-4g0hpd"><!> <!> <!></div>'),Gu=k('<div slot="fallback" class="icon-fallback svelte-4g0hpd"><!></div>'),Zu=k('<p style="font-size:13px; color:var(--c-text-secondary); margin-top:10px; line-clamp:2; overflow:hidden;" class="svelte-4g0hpd"> </p>'),Ju=k('<div class="view-header svelte-4g0hpd" style="display:flex; gap: 20px; align-items:flex-end; margin-bottom:20px;"><div style="width: 140px; height: 140px; flex-shrink:0;" class="svelte-4g0hpd"><!></div> <div style="flex: 1; min-width: 0;" class="svelte-4g0hpd"><div class="card-sub svelte-4g0hpd" style="font-size:14px; text-transform:uppercase; margin-bottom:4px;"> </div> <h1 style="font-size:32px; margin:0; line-height:1.1;" class="svelte-4g0hpd"> </h1> <!> <button class="btn-primary svelte-4g0hpd" style="margin-top:16px;">Play All</button></div></div>'),ef=k('<div slot="header" class="content-padded svelte-4g0hpd"><!></div>'),tf=k('<div slot="row" class="svelte-4g0hpd"><!></div>'),af=k('<div class="content-padded no-bottom-pad svelte-4g0hpd"><div class="search-input-container svelte-4g0hpd"><!> <input type="text" placeholder="Search Yandex Music..." class="svelte-4g0hpd"/> <!></div> <!></div> <!> <!> <!>',1),rf=k('<div class="view-container scrollable relative-parent svelte-4g0hpd"><!></div>');function sf(e,t){Et(t,!1);const a=()=>Ae(yr,"$yandexAuthStatus",n),s=()=>Ae(o,"$tracksStore",n),[n,i]=jt(),l=T(),o=Ue([]);let u=T([]),d=T([]),f=T([]),h=T(!1),v=T("dashboard"),p=T({title:"",sub:"",cover:null,description:""}),x=T(""),E=T("all"),w=T({tracks:[],albums:[],artists:[]}),S;Ya(()=>{r(l)&&X()});async function X(){g(h,!0);try{const L=await ta.getUserPlaylists(),$=await ta.getLanding();g(d,$.moods||[]),g(f,$.personal||[]),g(u,[{title:"My Vibe",kind:"my_vibe",cover:null,isStation:!0,description:"Endless flow based on your taste"},...L])}catch(L){console.error(L),Ie("Failed to load dashboard","error")}finally{g(h,!1)}}async function he(L){if(L.kind==="my_vibe"){Ie("Starting My Vibe...","info"),ta.playRadio();return}if(L.kind==="station"){Ie(`Starting ${L.title}...`,"info"),ta.playStation(L.id);return}g(v,"list"),g(p,{title:L.title,sub:"Playlist",cover:L.cover}),o.set([]),g(h,!0);try{let $=L.uid,I=L.kind;!$&&L.id&&L.id.includes(":")&&([$,I]=L.id.split(":"));const Ee=await ta.getPlaylistTracks($,I);Ee&&Ee.tracks&&o.set(Ee.tracks)}catch($){console.error($)}finally{g(h,!1)}}async function ae(L){g(v,"artist_details"),g(p,{title:L.title,sub:"Artist",cover:L.image}),o.set([]),g(h,!0);try{const $=await ta.getArtistDetails(L.id);g(p,{title:$.name,sub:"Popular Tracks",cover:$.cover,description:$.description}),o.set($.tracks||[])}catch{Ie("Failed to load artist","error")}finally{g(h,!1)}}async function re(L){g(v,"album_details"),g(p,{title:L.title,sub:L.artist,cover:L.image}),o.set([]),g(h,!0);try{const $=await ta.getAlbumDetails(L.id);g(p,{title:$.title,sub:$.artist+($.year?` â¢ ${$.year}`:""),cover:$.cover}),o.set($.tracks||[])}catch{Ie("Failed to load album","error")}finally{g(h,!1)}}function be(L){g(x,L.target.value),clearTimeout(S),r(x).length>2?S=setTimeout(O,600):r(x).length===0&&g(v,"dashboard")}async function O(){g(h,!0),g(v,"search"),g(w,{tracks:[],albums:[],artists:[]});try{const L=await ta.search(r(x));L&&(g(w,L),(r(E)==="track"||r(E)==="all")&&o.set(L.tracks||[]))}catch{Ie("Search failed","error")}finally{g(h,!1)}}function U(L){g(E,L),r(w).tracks&&L==="track"&&o.set(r(w).tracks)}function ie(){r(v)==="search"?(g(v,"dashboard"),g(x,"")):["list","artist_details","album_details"].includes(r(v))&&(r(x).length>0?g(v,"search"):g(v,"dashboard"))}async function H(){const L=s();if(!L.length)return;(await fetch("/wave-yandex-api.php?action=play_playlist",{method:"POST",body:JSON.stringify({tracks:L})})).ok&&Ie("Playing...","success")}function we(L){const $=L.detail;$.artistId?ae({id:$.artistId,title:$.artist}):(g(x,$.artist),O())}ne(()=>a(),()=>{g(l,a())}),Ht(),At();var z=rf(),F=c(z);{var me=L=>{var $=zu();b(L,$)},W=L=>{var $=af(),I=Re($),Ee=c(I),Q=c(Ee);{var se=N=>{var pe=Ru(),Me=c(pe);ee(Me,()=>(j(y),m(()=>y.BACK))),M("click",pe,ie),b(N,pe)},ye=N=>{var pe=ju(),Me=c(pe);ee(Me,()=>(j(y),m(()=>y.SEARCH))),b(N,pe)};P(Q,N=>{r(v)!=="dashboard"?N(se):N(ye,!1)})}var ce=_(Q,2),ke=_(ce,2);{var Se=N=>{var pe=Iu(),Me=c(pe);ee(Me,()=>(j(y),m(()=>y.CLOSE))),M("click",pe,()=>{g(x,""),g(v,"dashboard")}),b(N,pe)};P(ke,N=>{r(x)&&N(Se)})}var A=_(Ee,2);{var q=N=>{var pe=Nu(),Me=c(pe);let te;var Te=_(Me,2);let ze;ve(()=>{te=Xe(Me,1,"svelte-4g0hpd",null,te,{active:r(E)==="all"}),ze=Xe(Te,1,"svelte-4g0hpd",null,ze,{active:r(E)==="track"})}),M("click",Me,()=>U("all")),M("click",Te,()=>U("track")),b(N,pe)};P(A,N=>{r(v)==="search"&&N(q)})}var ue=_(I,2);{var Y=N=>{var pe=Yu(),Me=_(c(pe),2);bt(Me,5,()=>r(u),Dt,(K,R)=>{var V=Ou(),$e=c(V);let Z;var oe=c($e);{var xe=B=>{var ge=Du(),Ne=c(ge);ee(Ne,()=>(j(y),m(()=>y.RADIO))),b(B,ge)},D=B=>{Qt(B,{get src(){return r(R),m(()=>r(R).cover)},get alt(){return r(R),m(()=>r(R).title)},radius:"8px"})};P(oe,B=>{r(R),m(()=>r(R).kind==="my_vibe")?B(xe):B(D,!1)})}var de=_(oe,2),J=c(de),Le=c(J);ee(Le,()=>(j(y),m(()=>y.PLAY)));var je=_($e,2),Ye=c(je);ve(()=>{Z=Xe($e,1,"card-img-container svelte-4g0hpd",null,Z,{"is-vibe":r(R).kind==="my_vibe"}),le(Ye,(r(R),m(()=>r(R).title)))}),M("click",V,()=>he(r(R))),b(K,V)});var te=_(Me,2);{var Te=K=>{var R=Fu(),V=_(Re(R),2);bt(V,5,()=>r(d),Dt,($e,Z)=>{var oe=qu(),xe=c(oe),D=c(xe);Qt(D,{get src(){return r(Z),m(()=>r(Z).cover)},get alt(){return r(Z),m(()=>r(Z).title)},radius:"8px"});var de=_(D,2),J=c(de),Le=c(J);ee(Le,()=>(j(y),m(()=>y.RADIO)));var je=_(xe,2),Ye=c(je);ve(()=>{gt(xe,`background-color: ${r(Z),m(()=>r(Z).bgColor||"#333")??""}`),le(Ye,(r(Z),m(()=>r(Z).title)))}),M("click",oe,()=>he(r(Z))),b($e,oe)}),b(K,R)};P(te,K=>{r(d),m(()=>r(d).length>0)&&K(Te)})}var ze=_(te,2);{var C=K=>{var R=Uu(),V=_(Re(R),2);bt(V,5,()=>r(f),Dt,($e,Z)=>{var oe=Bu(),xe=c(oe),D=c(xe);Qt(D,{get src(){return r(Z),m(()=>r(Z).cover)},get alt(){return r(Z),m(()=>r(Z).title)},radius:"8px"});var de=_(xe,2),J=c(de);ve(()=>le(J,(r(Z),m(()=>r(Z).title)))),M("click",oe,()=>he(r(Z))),b($e,oe)}),b(K,R)};P(ze,K=>{r(f),m(()=>r(f).length>0)&&K(C)})}ut(1,pe,()=>yt),b(N,pe)};P(ue,N=>{r(v)==="dashboard"&&N(Y)})}var G=_(ue,2);{var _e=N=>{var pe=Ku(),Me=c(pe);{var te=R=>{var V=Hu();b(R,V)};P(Me,R=>{r(h)&&R(te)})}var Te=_(Me,2);{var ze=R=>{var V=Wu(),$e=_(Re(V),2);bt($e,5,()=>(r(w),m(()=>r(w).artists)),Dt,(Z,oe)=>{var xe=Vu(),D=c(xe),de=c(D);Qt(de,{get src(){return r(oe),m(()=>r(oe).image)},get alt(){return r(oe),m(()=>r(oe).title)},radius:"50%"});var J=_(D,2),Le=c(J);ve(()=>le(Le,(r(oe),m(()=>r(oe).title)))),M("click",xe,()=>ae(r(oe))),b(Z,xe)}),b(R,V)};P(Te,R=>{r(w),r(E),m(()=>r(w).artists.length>0&&r(E)==="all")&&R(ze)})}var C=_(Te,2);{var K=R=>{var V=Xu(),$e=_(Re(V),2);bt($e,5,()=>(r(w),m(()=>r(w).albums)),Dt,(Z,oe)=>{var xe=Qu(),D=c(xe),de=c(D);Qt(de,{get src(){return r(oe),m(()=>r(oe).image)},get alt(){return r(oe),m(()=>r(oe).title)},radius:"8px"});var J=_(D,2),Le=c(J),je=_(J,2),Ye=c(je);ve(()=>{le(Le,(r(oe),m(()=>r(oe).title))),le(Ye,(r(oe),m(()=>r(oe).artist)))}),M("click",xe,()=>re(r(oe))),b(Z,xe)}),b(R,V)};P(C,R=>{r(w),r(E),m(()=>r(w).albums.length>0&&r(E)==="all")&&R(K)})}ut(1,pe,()=>yt),b(N,pe)};P(G,N=>{r(v)==="search"&&N(_e)})}var fe=_(G,2);{var Ce=N=>{ss(N,{get itemsStore(){return o},get isLoading(){return r(h)},emptyText:"No tracks found",$$slots:{header:(pe,Me)=>{var te=ef(),Te=c(te);{var ze=C=>{var K=Ju(),R=c(K),V=c(R);{let je=mt(()=>r(v)==="artist_details"?"50%":"8px");Qt(V,{get src(){return r(p),m(()=>r(p).cover)},get radius(){return r(je)},$$slots:{fallback:(Ye,B)=>{var ge=Gu(),Ne=c(ge);ee(Ne,()=>(j(y),m(()=>y.ALBUMS))),b(Ye,ge)}}})}var $e=_(R,2),Z=c($e),oe=c(Z),xe=_(Z,2),D=c(xe),de=_(xe,2);{var J=je=>{var Ye=Zu(),B=c(Ye);ve(()=>le(B,(r(p),m(()=>r(p).description)))),b(je,Ye)};P(de,je=>{r(p),m(()=>r(p).description)&&je(J)})}var Le=_(de,2);ve(()=>{le(oe,(r(p),m(()=>r(p).sub))),le(D,(r(p),m(()=>r(p).title)))}),M("click",Le,H),b(C,K)};P(Te,C=>{r(v),r(p),m(()=>r(v)!=="search"&&r(p).title)&&C(ze)})}b(pe,te)},row:(pe,Me)=>{var te=tf();const Te=mt(()=>Me.item),ze=mt(()=>Me.index);var C=c(te);Mr(C,{get track(){return r(Te)},get index(){return r(ze)},$$events:{play:()=>ta.playTrack(r(Te).id),artistclick:we}}),b(pe,te)}}})};P(fe,N=>{r(v),m(()=>["list","search","artist_details","album_details"].includes(r(v)))&&N(Ce)})}tr(ce,()=>r(x),N=>g(x,N)),M("input",ce,be),b(L,$)};P(F,L=>{r(l)?L(W,!1):L(me)})}b(e,z),St(),i()}var nf=k('<div class="knob svelte-1jla3sy"></div>'),of=k('<div class="tooltip current svelte-1jla3sy"> </div> <span></span>',1),lf=k('<div slot="fallback" class="icon-fallback svelte-1jla3sy"><!></div>'),cf=k('<span class="meta-tag quality"> </span>'),df=k('<div class="dot svelte-1jla3sy"></div>'),vf=k("<button><!> <!></button>"),uf=k('<div class="dock svelte-1jla3sy"><div class="progress-shadow svelte-1jla3sy"></div> <div><div class="rail svelte-1jla3sy"></div> <div class="fill svelte-1jla3sy"><!></div> <!></div> <div class="grid svelte-1jla3sy"><div class="info svelte-1jla3sy"><div class="art svelte-1jla3sy"><!></div> <div class="meta svelte-1jla3sy"><div class="title-row svelte-1jla3sy"><div class="title text-ellipsis svelte-1jla3sy"> </div> <button class="btn-icon tiny-dots svelte-1jla3sy"><!></button></div> <div class="artist-row svelte-1jla3sy"><div class="artist text-ellipsis svelte-1jla3sy"> </div> <!></div></div></div> <div class="controls svelte-1jla3sy"><button><!></button> <button class="btn-icon"><!></button> <button class="play-btn flex-center svelte-1jla3sy"><!></button> <button class="btn-icon"><!></button> <!></div> <div class="volume desktop svelte-1jla3sy"><button class="vol-btn-mini svelte-1jla3sy" title="Mute/Unmute"><!></button> <div class="custom-slider svelte-1jla3sy"><div class="slider-bg svelte-1jla3sy"><div class="slider-fill svelte-1jla3sy"></div> <div class="slider-knob svelte-1jla3sy"></div></div></div></div></div></div>');function ff(e,t){Et(t,!1);const a=()=>Ae(xt,"$status",o),s=()=>Ae(Yt,"$currentSong",o),n=()=>Ae(Ia,"$favorites",o),i=()=>Ae(Ha,"$stations",o),l=()=>Ae(xs,"$isFullPlayerOpen",o),[o,u]=jt(),d=T(),f=T(),h=T(),v=T(),p=T(),x=T(),E=T(),w=T(),S=T(),X=T(),he=T(),ae=T(),re=T();let be=T(!1),O=T(!1),U=!1,ie=T(0),H=T(),we=T();const z=q=>ue=>{ue.stopPropagation(),q()};function F(q){if(isNaN(q)||q===null)return"0:00";const ue=Math.floor(q/60),Y=Math.floor(q%60);return`${ue}:${Y<10?"0":""}${Y}`}function me(q,ue){const Y=ue.getBoundingClientRect();return Math.max(0,Math.min(1,(q.clientX-Y.left)/Y.width))}function W(q){r(v)||(g(O,!0),g(ie,me(q,r(H))),window.addEventListener("mousemove",L),window.addEventListener("mouseup",$))}function L(q){if(r(O)&&g(ie,me(q,r(H))),U){const ue=Math.round(me(q,r(we))*100);Sa(ue)}}function $(){r(O)&&!r(v)&&Pn(r(ie)*r(d)),g(O,!1),U=!1,window.removeEventListener("mousemove",L),window.removeEventListener("mouseup",$)}let I=50;function Ee(q){q.stopPropagation(),a().volume>0?(I=a().volume,Sa(0)):Sa(I>0?I:30)}function Q(q){U=!0;const ue=Math.round(me(q,r(we))*100);Sa(ue),window.addEventListener("mousemove",L),window.addEventListener("mouseup",$)}function se(){const q=(r(re)+1)%3;q===0?(a().random&&ar(),a().repeat&&rr()):q===1?(a().random||ar(),a().repeat&&rr()):q===2&&(a().random&&ar(),a().repeat||rr())}function ye(q){q.stopPropagation(),Kr(q,s(),{type:"general",source:"miniplayer"})}function ce(q){Kr(q.detail.originalEvent,s(),{type:"general",source:"miniplayer"})}ne(()=>a(),()=>{g(d,a().duration>0?a().duration:1)}),ne(()=>a(),()=>{g(f,a().elapsed||0)}),ne(()=>a(),()=>{g(h,a().state==="play")}),ne(()=>s(),()=>{g(v,s().file?.startsWith("http")&&!s().isYandex)}),ne(()=>s(),()=>{g(p,s().title||"Not Playing")}),ne(()=>s(),()=>{g(x,s().stationName||s().artist||"Moode")}),ne(()=>(s(),n()),()=>{g(E,s().file&&n().has(s().file))}),ne(()=>(s(),i()),()=>{g(w,$r(s(),i(),s().stationName))}),ne(()=>(r(v),r(O),r(ie),r(f),r(d)),()=>{g(S,r(v)?0:r(O)?r(ie)*100:r(f)/r(d)*100)}),ne(()=>(r(h),r(O),r(v)),()=>{g(X,r(h)&&!r(O)&&!r(v))}),ne(()=>a(),()=>{g(he,a().bitrate?`${a().bitrate} kbps`:a().format||"")}),ne(()=>(a(),y),()=>{g(ae,a().volume===0?y.VOLUME_MUTE:a().volume<50?y.VOLUME_MEDIUM:y.VOLUME_FULL)}),ne(()=>a(),()=>{g(re,a().repeat?2:a().random?1:0)}),Ht(),At();var ke=st(),Se=Re(ke);{var A=q=>{var ue=uf(),Y=c(ue),G=_(Y,2);let _e;var fe=_(c(G),2),Ce=c(fe);{var N=De=>{var ht=nf();b(De,ht)};P(Ce,De=>{r(v)||De(N)})}var pe=_(fe,2);{var Me=De=>{var ht=of(),Lt=Re(ht),Jt=c(Lt);ve(Pe=>{gt(Lt,`left: ${r(S)??""}%`),le(Jt,Pe)},[()=>(r(O),r(ie),r(d),r(f),m(()=>r(O)?F(r(ie)*r(d)):F(r(f))))]),b(De,ht)};P(pe,De=>{(r(be)||r(O))&&!r(v)&&De(Me)})}Ua(G,De=>g(H,De),()=>r(H));var te=_(G,2),Te=c(te),ze=c(Te),C=c(ze);Qt(C,{get src(){return r(w)},alt:"art",radius:"4px",$$slots:{fallback:(De,ht)=>{var Lt=lf(),Jt=c(Lt);ee(Jt,()=>(r(v),j(y),m(()=>r(v)?y.RADIO:y.ALBUMS))),b(De,Lt)}}});var K=_(ze,2),R=c(K),V=c(R),$e=c(V),Z=_(V,2),oe=c(Z);ee(oe,()=>(j(y),m(()=>y.DOTS)));var xe=_(R,2),D=c(xe),de=c(D),J=_(D,2);{var Le=De=>{var ht=cf(),Lt=c(ht);ve(()=>le(Lt,r(he))),b(De,ht)};P(J,De=>{r(he)&&De(Le)})}var je=_(Te,2),Ye=c(je),B=Rr(()=>z(()=>ga.toggleFavorite(s())));let ge;var Ne=c(Ye);ee(Ne,()=>(r(E),j(y),m(()=>r(E)?y.HEART_FILLED:y.HEART)));var He=_(Ye,2),Fe=Rr(()=>z(()=>Zr("previous"))),Be=c(He);ee(Be,()=>(j(y),m(()=>y.PREVIOUS)));var Qe=_(He,2),rt=Rr(()=>z(Rs)),Ke=c(Qe);ee(Ke,()=>(a(),j(y),m(()=>a().state==="play"?y.PAUSE:y.PLAY)));var qe=_(Qe,2),We=Rr(()=>z(()=>Zr("next"))),Ge=c(qe);ee(Ge,()=>(j(y),m(()=>y.NEXT)));var lt=_(qe,2);{var Je=De=>{var ht=vf(),Lt=Rr(()=>z(se));let Jt;var Pe=c(ht);{var tt=It=>{var ya=st(),zr=Re(ya);ee(zr,()=>(j(y),m(()=>y.REPEAT))),b(It,ya)},Ct=It=>{var ya=st(),zr=Re(ya);ee(zr,()=>(j(y),m(()=>y.SHUFFLE))),b(It,ya)};P(Pe,It=>{r(re)===2?It(tt):It(Ct,!1)})}var da=_(Pe,2);{var Is=It=>{var ya=df();b(It,ya)};P(da,It=>{r(re)>0&&It(Is)})}ve(()=>Jt=Xe(ht,1,"btn-icon desktop mode-btn svelte-1jla3sy",null,Jt,{active:r(re)>0})),M("click",ht,function(...It){r(Lt)?.apply(this,It)}),b(De,ht)};P(lt,De=>{r(v)||De(Je)})}var Ze=_(je,2),Ve=c(Ze),vt=c(Ve);ee(vt,()=>r(ae));var ct=_(Ve,2),ft=c(ct),dt=c(ft),at=_(dt,2);Ua(ct,De=>g(we,De),()=>r(we)),Ot(()=>M("click",ue,()=>xs.set(!0))),En(ue,(De,ht)=>In?.(De,ht),()=>500),Ot(()=>M("longpress",ue,ce)),ve(()=>{gt(Y,`width: ${r(S)??""}%; transition: ${r(X)?"width 0.25s linear":"none"}`),_e=Xe(G,1,"progress-bar svelte-1jla3sy",null,_e,{radio:r(v)}),gt(fe,`width: ${r(S)??""}%; transition: ${r(X)?"width 0.25s linear":"none"}`),Ut(V,"title",r(p)),le($e,r(p)),Ut(D,"title",r(x)),le(de,r(x)),ge=Xe(Ye,1,"btn-icon desktop svelte-1jla3sy",null,ge,{liked:r(E)}),gt(dt,`width: ${a(),m(()=>a().volume)??""}%`),gt(at,`left: ${a(),m(()=>a().volume)??""}%`)}),M("mouseenter",G,()=>g(be,!0)),M("mouseleave",G,()=>g(be,!1)),M("mousedown",G,Gt(W)),M("click",G,Gt(function(De){Xr.call(this,t,De)})),M("click",Z,ye),M("click",Ye,function(...De){r(B)?.apply(this,De)}),M("click",He,function(...De){r(Fe)?.apply(this,De)}),M("click",Qe,function(...De){r(rt)?.apply(this,De)}),M("click",qe,function(...De){r(We)?.apply(this,De)}),M("click",Ve,Ee),M("mousedown",ct,Gt(Q)),M("click",ct,Gt(function(De){Xr.call(this,t,De)})),b(q,ue)};P(Se,q=>{l()||q(A)})}b(e,ke),St(),u()}var hf=k('<div class="drag-zone svelte-1olwzt8"><div class="drag-handle-icon svelte-1olwzt8"><!></div></div>'),pf=k('<div slot="fallback" class="icon-fallback svelte-1olwzt8"><!></div>'),gf=k('<span class="meta-tag quality"> </span>'),_f=k('<span class="dot svelte-1olwzt8"></span>'),mf=k("<button><!> <!></button>"),bf=k('<div style="width: 44px;"></div>'),yf=k('<div><!> <div class="bg-container svelte-1olwzt8"><div class="bg-gradient-fallback svelte-1olwzt8"></div> <img class="bg-img svelte-1olwzt8" alt="" loading="eager"/> <div class="bg-overlay svelte-1olwzt8"></div></div> <div class="player-body svelte-1olwzt8"><div class="art-container svelte-1olwzt8"><div class="artwork svelte-1olwzt8"><!></div></div> <div class="controls-area svelte-1olwzt8"><div class="meta svelte-1olwzt8"><h1 class="title text-ellipsis svelte-1olwzt8"> </h1> <div class="artist-row svelte-1olwzt8"><h2 class="artist text-ellipsis svelte-1olwzt8"> </h2> <!></div></div> <div class="progress-section"><div><div class="common-track svelte-1olwzt8"><div class="common-fill svelte-1olwzt8"><div class="common-knob svelte-1olwzt8"></div></div></div></div> <div class="time-row svelte-1olwzt8"><span> </span> <span> </span></div></div> <div class="buttons-row svelte-1olwzt8"><button><!></button> <button class="btn-icon side-btn svelte-1olwzt8"><!></button> <button class="play-btn-large flex-center svelte-1olwzt8"><!></button> <button class="btn-icon side-btn svelte-1olwzt8"><!></button> <!></div> <div class="volume-row svelte-1olwzt8"><button class="btn-icon small vol-btn svelte-1olwzt8"><!></button> <div class="volume-hit-area svelte-1olwzt8"><div class="common-track svelte-1olwzt8"><div class="common-fill svelte-1olwzt8"></div> <div class="common-knob svelte-1olwzt8"></div></div></div> <div class="vol-icon-static svelte-1olwzt8"><!></div></div></div></div></div>');function _i(e,t){Et(t,!1);const a=()=>Ae(Yt,"$currentSong",l),s=()=>Ae(Ha,"$stations",l),n=()=>Ae(xt,"$status",l),i=()=>Ae(Ia,"$favorites",l),[l,o]=jt(),u=T(),d=T(),f=T(),h=T(),v=T(),p=T(),x=T(),E=T(),w=T(),S=T(),X=T(),he=T();let ae=wt(t,"isDocked",8,!1),re=0,be=T(0),O=T(!1);function U(){xs.set(!1)}function ie(Pe){if(ae())return;const tt=Pe.target;tt.closest(".bar-hit-area")||tt.closest(".volume-hit-area")||(re=Pe.touches[0].clientY,g(O,!0))}function H(Pe){if(!r(O)||ae())return;const tt=Pe.touches[0].clientY-re;tt>0&&(Pe.cancelable&&tt>10&&Pe.preventDefault(),g(be,tt))}function we(){ae()||(g(O,!1),r(be)>150?U():g(be,0))}let z=T(!1),F=T(0),me=T();function W(Pe){const tt=Math.floor(Pe/60)||0,Ct=Math.floor(Pe%60)||0;return`${tt}:${Ct.toString().padStart(2,"0")}`}function L(Pe,tt){const Ct=tt.getBoundingClientRect(),da=Pe.touches?Pe.touches[0].clientX:Pe.clientX;return Math.max(0,Math.min(1,(da-Ct.left)/Ct.width))}function $(Pe){r(h)||(g(z,!0),g(F,L(Pe,r(me))))}function I(Pe){r(z)&&g(F,L(Pe,r(me)))}function Ee(){r(z)&&!r(h)&&Pn(r(F)*r(d)),g(z,!1)}let Q=!1,se=T(),ye=50;function ce(){n().volume>0?(ye=n().volume,Sa(0)):Sa(ye>0?ye:30)}function ke(Pe){Q=!0;const tt=Math.round(L(Pe,r(se))*100);Sa(tt),window.addEventListener("mousemove",Se),window.addEventListener("mouseup",A),window.addEventListener("touchmove",Se,{passive:!1}),window.addEventListener("touchend",A)}function Se(Pe){if(Q){Pe.preventDefault();const tt=Math.round(L(Pe,r(se))*100);Sa(tt)}}function A(){Q=!1,window.removeEventListener("mousemove",Se),window.removeEventListener("mouseup",A),window.removeEventListener("touchmove",Se),window.removeEventListener("touchend",A)}function q(){const Pe=(r(w)+1)%3;Pe===0?(n().random&&ar(),n().repeat&&rr()):Pe===1?(n().random||ar(),n().repeat&&rr()):Pe===2&&(n().random&&ar(),n().repeat||rr())}ne(()=>(a(),s()),()=>{g(u,$r(a(),s(),a().stationName))}),ne(()=>n(),()=>{g(d,n().duration||1)}),ne(()=>n(),()=>{g(f,n().elapsed||0)}),ne(()=>a(),()=>{g(h,a().file?.startsWith("http")&&!a().isYandex)}),ne(()=>n(),()=>{g(v,n().state==="play")}),ne(()=>(r(v),r(z),r(h)),()=>{g(p,r(v)&&!r(z)&&!r(h))}),ne(()=>(r(h),r(z),r(F),r(f),r(d)),()=>{g(x,r(h)?0:r(z)?r(F)*100:r(f)/r(d)*100)}),ne(()=>(n(),y),()=>{g(E,n().volume===0?y.VOLUME_MUTE:n().volume<50?y.VOLUME_MEDIUM:y.VOLUME_FULL)}),ne(()=>n(),()=>{g(w,n().repeat?2:n().random?1:0)}),ne(()=>n(),()=>{g(S,n().bitrate?`${n().bitrate} kbps`:n().format||"")}),ne(()=>(a(),i()),()=>{g(X,a().file&&i().has(a().file))}),ne(()=>j(ae()),()=>{g(he,ae()?"8px":"var(--radius-xl)")}),Ht(),At();var ue=yf();let Y;var G=c(ue);{var _e=Pe=>{var tt=hf(),Ct=c(tt),da=c(Ct);ee(da,()=>(j(y),m(()=>y.CHEVRON_DOWN))),M("touchstart",tt,ie),M("touchmove",tt,H),M("touchend",tt,we),M("click",tt,U),b(Pe,tt)};P(G,Pe=>{ae()||Pe(_e)})}var fe=_(G,2),Ce=_(c(fe),2),N=_(fe,2),pe=c(N),Me=c(pe),te=c(Me);Qt(te,{get src(){return r(u)},alt:"Cover",get radius(){return r(he)},$$slots:{fallback:(Pe,tt)=>{var Ct=pf(),da=c(Ct);ee(da,()=>(r(h),j(y),m(()=>r(h)?y.RADIO:y.ALBUMS))),b(Pe,Ct)}}});var Te=_(pe,2),ze=c(Te),C=c(ze),K=c(C),R=_(C,2),V=c(R),$e=c(V),Z=_(V,2);{var oe=Pe=>{var tt=gf(),Ct=c(tt);ve(()=>le(Ct,r(S))),b(Pe,tt)};P(Z,Pe=>{r(S)&&Pe(oe)})}var xe=_(ze,2),D=c(xe);let de;var J=c(D),Le=c(J);Ua(D,Pe=>g(me,Pe),()=>r(me));var je=_(D,2),Ye=c(je),B=c(Ye),ge=_(Ye,2),Ne=c(ge),He=_(xe,2),Fe=c(He);let Be;var Qe=c(Fe);ee(Qe,()=>(r(X),j(y),m(()=>r(X)?y.HEART_FILLED:y.HEART)));var rt=_(Fe,2),Ke=c(rt);ee(Ke,()=>(j(y),m(()=>y.PREVIOUS)));var qe=_(rt,2),We=c(qe);ee(We,()=>(n(),j(y),m(()=>n().state==="play"?y.PAUSE:y.PLAY)));var Ge=_(qe,2),lt=c(Ge);ee(lt,()=>(j(y),m(()=>y.NEXT)));var Je=_(Ge,2);{var Ze=Pe=>{var tt=mf();let Ct;var da=c(tt);{var Is=va=>{var Va=st(),Ns=Re(Va);ee(Ns,()=>(j(y),m(()=>y.REPEAT))),b(va,Va)},It=va=>{var Va=st(),Ns=Re(Va);ee(Ns,()=>(j(y),m(()=>y.SHUFFLE))),b(va,Va)};P(da,va=>{r(w)===2?va(Is):va(It,!1)})}var ya=_(da,2);{var zr=va=>{var Va=_f();b(va,Va)};P(ya,va=>{r(w)>0&&va(zr)})}ve(()=>Ct=Xe(tt,1,"btn-icon side-btn mode-btn svelte-1olwzt8",null,Ct,{active:r(w)>0})),M("click",tt,q),b(Pe,tt)},Ve=Pe=>{var tt=bf();b(Pe,tt)};P(Je,Pe=>{r(h)?Pe(Ve,!1):Pe(Ze)})}var vt=_(He,2),ct=c(vt),ft=c(ct);ee(ft,()=>r(E));var dt=_(ct,2),at=c(dt),De=c(at),ht=_(De,2);Ua(dt,Pe=>g(se,Pe),()=>r(se));var Lt=_(dt,2),Jt=c(Lt);ee(Jt,()=>(j(y),m(()=>y.VOLUME_FULL))),ve((Pe,tt)=>{Y=Xe(ue,1,"full-player svelte-1olwzt8",null,Y,{"is-docked":ae()}),gt(ue,ae()?"":`transform: translateY(${r(be)}px); transition: ${r(O)?"none":"transform 0.3s cubic-bezier(0.2, 0.8, 0.2, 1)"}`),Ut(Ce,"src",r(u)),gt(Me,`transform: scale(${1-r(be)/3e3})`),gt(Te,`opacity: ${1-r(be)/400}`),le(K,(a(),m(()=>a().title||"Not Playing"))),le($e,(a(),m(()=>a().stationName||a().artist||"Moode Audio"))),de=Xe(D,1,"bar-hit-area svelte-1olwzt8",null,de,{"is-docked-bar":ae()}),gt(Le,`width: ${r(x)??""}%; transition: ${r(p)?"width 0.3s linear":"none"}`),le(B,Pe),le(Ne,tt),Be=Xe(Fe,1,"btn-icon side-btn svelte-1olwzt8",null,Be,{liked:r(X)}),gt(De,`width: ${n(),m(()=>n().volume)??""}%`),gt(ht,`left: ${n(),m(()=>n().volume)??""}%; right: auto;`)},[()=>(r(z),r(F),r(d),r(f),m(()=>r(z)?W(r(F)*r(d)):W(r(f)))),()=>(r(h),r(d),m(()=>r(h)?"LIVE":W(r(d))))]),M("mousedown",D,$),M("touchstart",D,$,void 0,!0),M("mousemove",D,function(...Pe){(r(z)?I:null)?.apply(this,Pe)}),M("touchmove",D,function(...Pe){(r(z)?I:null)?.apply(this,Pe)},void 0,!0),M("mouseup",D,Ee),M("touchend",D,Ee),M("click",Fe,()=>ga.toggleFavorite(a())),M("click",rt,()=>Zr("previous")),M("click",qe,function(...Pe){Rs?.apply(this,Pe)}),M("click",Ge,()=>Zr("next")),M("click",ct,ce),M("mousedown",dt,Gt(ke)),M("touchstart",dt,Gt(ke)),ut(3,ue,()=>uo,()=>({y:ae()?0:800,duration:300,opacity:1})),b(e,ue),St(),o()}const wf=`<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.0//EN" "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd">
<svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="600px" height="331px" viewBox="0 0 600 331" preserveAspectRatio="xMidYMid meet">
 <g fill="#eb1250">
  <path d="M 315.33 288.42 c -1.03 -0.33 -2.60 -1.34 -3.70 -2.39 -1.08 -1.01 -1.73 -2.81 -2.48 -6.68 -0.38 -1.99 -0.84 -4.29 -1.03 -5.13 -0.21 -0.84 -0.47 -2.20 -0.61 -3.05 -0.14 -0.84 -0.42 -2.34 -0.61 -3.33 -0.45 -2.20 -0.42 -2.04 -0.77 -4.17 -0.16 -0.96 -0.40 -2.16 -0.52 -2.65 -0.14 -0.52 -0.33 -1.45 -0.45 -2.11 -0.12 -0.68 -0.38 -2.02 -0.59 -2.98 -0.21 -0.96 -0.52 -2.55 -0.70 -3.52 -0.16 -0.96 -0.52 -2.81 -0.77 -4.10 -0.26 -1.29 -0.82 -4.08 -1.22 -6.21 -0.80 -4.20 -1.57 -8.13 -2.44 -12.54 -0.33 -1.55 -0.63 -3.23 -0.73 -3.75 -0.07 -0.52 -0.28 -1.57 -0.47 -2.34 -0.16 -0.77 -0.54 -2.63 -0.80 -4.10 -0.28 -1.48 -0.61 -3.12 -0.73 -3.63 -0.12 -0.52 -0.42 -2.20 -0.70 -3.75 -0.28 -1.55 -0.91 -4.92 -1.43 -7.50 -0.49 -2.58 -1.34 -7.01 -1.85 -9.84 -0.54 -2.84 -1.17 -6.26 -1.43 -7.62 -0.26 -1.36 -0.56 -3.07 -0.68 -3.80 -0.12 -0.75 -0.26 -1.43 -0.33 -1.55 -0.26 -0.42 -2.60 -12.89 -3.21 -17.16 -0.12 -0.84 -0.38 -2.16 -0.56 -2.93 -0.16 -0.77 -0.49 -2.34 -0.70 -3.52 -0.21 -1.15 -0.63 -3.26 -0.94 -4.69 -0.30 -1.41 -0.68 -3.30 -0.82 -4.22 -0.16 -0.89 -0.47 -2.58 -0.73 -3.75 -0.68 -3.30 -2.74 -14.16 -3.73 -19.80 -0.28 -1.48 -0.63 -3.38 -0.82 -4.22 -0.38 -1.71 -1.31 -6.70 -1.88 -10.08 -0.40 -2.34 -0.87 -4.71 -1.43 -7.27 -0.16 -0.84 -0.59 -3 -0.91 -4.80 -0.35 -1.80 -0.77 -4.01 -0.96 -4.92 -0.19 -0.89 -0.54 -2.98 -0.80 -4.64 -0.49 -3.26 -0.70 -3.91 -1.10 -3.40 -0.14 0.16 -0.30 0.63 -0.38 1.01 -0.07 0.40 -0.54 2.51 -1.01 4.69 -2.67 12.42 -3.16 14.77 -3.38 16.29 -0.28 1.99 -1.48 7.64 -3.77 18.05 -1.17 5.23 -2.37 10.66 -2.67 12.07 -0.33 1.43 -0.84 4.01 -1.17 5.74 -0.30 1.73 -1.05 5.27 -1.64 7.85 -0.59 2.58 -1.59 7.17 -2.25 10.20 -0.63 3.02 -1.38 5.93 -1.62 6.45 -0.66 1.36 -2.60 3.26 -4.05 3.96 -1.24 0.61 -1.24 0.61 -87.30 0.61 -86.04 0 -86.04 0 -87.33 -0.49 -1.59 -0.59 -3.56 -2.32 -4.41 -3.89 -1.97 -3.63 -0.35 -8.32 3.61 -10.43 1.01 -0.54 1.01 -0.54 83.44 -0.61 82.43 -0.05 82.43 -0.05 82.69 -1.41 0.14 -0.73 0.42 -1.85 0.59 -2.51 0.19 -0.63 0.82 -3.59 1.41 -6.56 0.59 -2.95 1.29 -6.23 1.52 -7.27 0.23 -1.03 0.82 -3.66 1.27 -5.86 0.47 -2.18 1.34 -6.30 1.97 -9.14 0.63 -2.84 1.34 -6.16 1.57 -7.38 0.21 -1.22 0.49 -2.39 0.61 -2.60 0.09 -0.21 0.42 -1.64 0.68 -3.16 0.26 -1.55 0.63 -3.26 0.82 -3.82 0.19 -0.59 0.35 -1.34 0.35 -1.69 0 -0.35 0.21 -1.57 0.49 -2.70 0.26 -1.13 0.59 -2.60 0.68 -3.23 0.21 -1.22 2.16 -10.08 3.05 -13.78 0.26 -1.13 1.05 -4.88 1.76 -8.32 0.70 -3.45 1.55 -7.59 1.88 -9.21 0.33 -1.62 1.08 -5.09 1.64 -7.73 1.62 -7.41 1.73 -7.95 2.13 -9.96 0.91 -4.62 1.92 -9.19 2.18 -9.80 0.14 -0.35 0.82 -1.24 1.48 -1.97 2.58 -2.72 5.84 -3.42 8.88 -1.90 1.97 0.98 3.73 2.74 4.27 4.31 0.42 1.20 1.41 6.42 1.80 9.47 0.09 0.84 0.30 1.83 0.45 2.18 0.14 0.38 0.26 1.10 0.26 1.66 0 0.54 0.16 1.45 0.35 2.04 0.19 0.56 0.56 2.25 0.84 3.73 0.82 4.50 1.78 9.28 2.20 11.13 0.19 0.77 0.45 2.04 0.56 2.81 0.47 2.63 1.92 10.08 2.25 11.60 0.19 0.84 0.45 2.16 0.56 2.93 0.28 1.64 0.63 3.56 1.08 5.86 0.19 0.91 0.49 2.60 0.70 3.75 0.21 1.17 0.54 2.79 0.70 3.63 0.19 0.84 0.77 3.75 1.29 6.45 0.54 2.72 1.17 5.88 1.41 7.03 0.23 1.17 0.66 3.38 0.94 4.92 0.26 1.55 0.70 4.03 0.96 5.51 0.26 1.48 0.73 3.91 1.03 5.39 0.30 1.48 0.68 3.45 0.82 4.34 0.16 0.91 0.47 2.48 0.70 3.52 0.70 3.19 2.23 10.73 2.58 12.89 0.09 0.66 0.47 2.48 0.80 4.10 0.63 3.05 0.70 3.35 1.66 8.77 0.33 1.80 0.82 4.29 1.08 5.51 0.26 1.24 0.56 2.79 0.68 3.42 0.19 1.17 0.89 4.76 1.55 8.09 0.21 0.96 0.63 3.23 0.96 5.04 0.84 4.64 1.41 7.55 1.69 8.91 0.14 0.66 0.35 1.76 0.49 2.46 0.12 0.70 0.38 2.04 0.56 2.93 0.19 0.91 0.61 3.16 0.94 5.04 1.05 5.86 2.48 13.41 2.88 15.12 0.19 0.91 0.42 2.02 0.47 2.46 0.07 0.45 0.33 1.78 0.59 2.93 0.26 1.17 0.56 2.70 0.68 3.40 0.12 0.70 0.30 1.62 0.42 1.99 0.12 0.40 0.35 1.48 0.52 2.41 0.26 1.50 0.35 1.69 0.82 1.69 0.45 0 0.54 -0.16 0.68 -0.98 0.23 -1.66 2.23 -11.86 2.84 -14.60 0.30 -1.41 0.66 -3.09 0.80 -3.75 0.89 -4.57 5.46 -26.60 6.47 -31.17 0.33 -1.41 0.77 -3.59 1.03 -4.80 0.52 -2.51 1.13 -5.44 2.13 -10.08 0.38 -1.73 1.01 -4.69 1.36 -6.56 0.38 -1.88 1.05 -5.13 1.50 -7.27 0.47 -2.13 0.94 -4.38 1.05 -5.04 0.45 -2.30 1.95 -9.63 2.18 -10.48 0.26 -1.01 1.64 -7.38 2.44 -11.32 0.30 -1.55 0.77 -3.87 1.05 -5.16 0.47 -2.34 2.91 -13.57 4.22 -19.57 0.38 -1.73 0.82 -3.89 0.96 -4.80 0.54 -3.26 2.16 -5.65 4.64 -6.91 1.73 -0.87 2.53 -1.01 4.36 -0.82 1.22 0.14 1.83 0.35 2.93 1.08 2.20 1.43 3.40 3.45 4.45 7.55 0.26 1.05 0.70 2.72 0.96 3.68 0.26 0.96 0.63 2.34 0.80 3.05 0.54 2.16 1.29 4.95 1.78 6.56 0.23 0.84 0.70 2.48 1.01 3.63 0.30 1.17 0.98 3.63 1.52 5.51 0.54 1.88 1.24 4.41 1.55 5.63 0.33 1.22 0.80 2.86 1.05 3.63 0.26 0.77 0.47 1.59 0.47 1.80 0 0.23 0.30 1.50 0.68 2.81 0.38 1.34 1.01 3.68 1.43 5.23 0.77 2.81 1.52 5.58 3.26 11.72 0.52 1.80 1.31 4.71 1.76 6.47 0.45 1.76 0.96 3.70 1.17 4.34 0.30 0.98 2.39 8.65 4.29 15.68 1.13 4.24 2.25 8.27 3.05 11.13 1.45 5.13 1.62 5.74 3.21 11.79 0.42 1.59 0.54 1.80 0.96 1.80 0.16 0 0.35 0.12 0.40 0.28 0.05 0.14 0.33 -0.52 0.63 -1.48 0.30 -0.96 1.73 -5.37 3.19 -9.82 1.48 -4.45 3.09 -9.52 3.63 -11.25 0.52 -1.73 1.85 -5.86 2.95 -9.14 1.13 -3.28 2.48 -7.45 3.05 -9.26 1.73 -5.44 2.23 -6.19 5.11 -7.69 1.43 -0.75 1.43 -0.75 69.40 -0.82 67.97 -0.07 67.97 -0.07 69.56 0.47 0.87 0.28 1.57 0.61 1.57 0.70 0 0.12 0.42 0.56 0.94 1.03 0.52 0.47 1.27 1.52 1.64 2.32 0.94 1.97 0.98 4.52 0.14 6.33 -0.73 1.57 -3.26 3.98 -4.52 4.31 -0.70 0.19 -19.31 0.28 -65.27 0.33 -64.29 0.05 -64.29 0.05 -66.82 7.66 -1.38 4.20 -4.97 14.95 -7.97 23.91 -5.58 16.71 -8.34 25.17 -9.89 30.12 -1.38 4.43 -2.34 5.98 -4.66 7.43 -1.15 0.75 -1.29 0.77 -3.66 0.77 -2.11 0 -2.63 -0.07 -3.59 -0.56 -1.20 -0.59 -2.65 -1.92 -3.59 -3.30 -0.47 -0.68 -2.44 -7.15 -4.17 -13.59 -0.19 -0.70 -0.61 -2.23 -0.94 -3.40 -0.33 -1.15 -0.77 -2.74 -0.98 -3.52 -0.19 -0.77 -0.45 -1.71 -0.56 -2.11 -0.12 -0.38 -0.49 -1.76 -0.82 -3.05 -0.35 -1.29 -1.03 -3.77 -1.52 -5.51 -1.90 -6.52 -2.79 -9.75 -2.95 -10.66 -0.07 -0.52 -0.23 -1.10 -0.35 -1.31 -0.12 -0.21 -0.63 -2.02 -1.15 -3.98 -0.94 -3.54 -1.66 -6.23 -3.40 -12.63 -0.47 -1.73 -1.10 -4.03 -1.43 -5.09 -0.30 -1.05 -0.94 -3.33 -1.38 -5.04 -0.45 -1.71 -1.03 -3.91 -1.29 -4.88 -0.28 -0.96 -0.59 -2.18 -0.68 -2.70 -0.12 -0.52 -0.75 -2.88 -1.41 -5.27 -0.66 -2.39 -1.45 -5.39 -1.80 -6.68 -0.33 -1.29 -0.70 -2.60 -0.80 -2.93 -0.30 -0.91 -2.04 -7.52 -2.25 -8.55 -0.16 -0.70 -0.33 -0.94 -0.66 -0.94 -0.40 0 -0.56 0.56 -1.45 4.80 -0.54 2.65 -1.36 6.61 -1.85 8.79 -0.47 2.20 -1.15 5.51 -1.50 7.38 -1.22 6.28 -1.92 9.73 -2.25 11.13 -0.19 0.77 -0.52 2.30 -0.70 3.40 -0.21 1.10 -0.54 2.53 -0.70 3.16 -0.19 0.66 -0.61 2.48 -0.91 4.10 -0.73 3.73 -1.69 8.48 -1.99 9.84 -0.49 2.30 -0.94 4.43 -1.29 6.21 -0.21 1.03 -0.75 3.61 -1.20 5.74 -0.45 2.13 -0.84 4.20 -0.91 4.57 -0.07 0.40 -0.23 1.34 -0.35 2.11 -0.14 0.77 -0.73 3.63 -1.31 6.33 -0.59 2.72 -1.17 5.55 -1.31 6.33 -0.30 1.83 -1.57 8.39 -1.85 9.61 -0.12 0.52 -0.54 2.58 -0.94 4.57 -0.40 1.99 -0.87 4.22 -1.05 4.92 -0.16 0.70 -0.45 2.09 -0.61 3.05 -0.16 0.96 -0.49 2.65 -0.73 3.75 -0.54 2.46 -0.59 2.70 -2.32 11.48 -0.77 3.94 -1.55 7.73 -1.73 8.44 -0.19 0.70 -0.56 2.39 -0.82 3.75 -0.28 1.36 -0.70 3.47 -0.96 4.69 -0.23 1.22 -0.61 3.23 -0.82 4.45 -0.63 3.87 -2.23 6.45 -4.83 7.85 -1.01 0.56 -1.57 0.68 -3.12 0.75 -1.13 0.05 -2.25 -0.07 -2.84 -0.26 z "/>
 </g>
</svg>`;var kf=k('<div class="backdrop svelte-ji5owg"></div>'),xf=k('<button><span class="icon svelte-ji5owg"><!></span> <span> </span></button>'),Ef=k('<!> <aside><div class="header svelte-ji5owg"><div class="header-inner svelte-ji5owg"><button class="collapse-btn svelte-ji5owg"><div class="chevron svelte-ji5owg"><!></div></button> <div><div class="logo svelte-ji5owg"><!></div></div></div> <button class="btn-icon mobile-close svelte-ji5owg"><!></button></div> <div class="scroll-area custom-scrollbar svelte-ji5owg"><nav class="svelte-ji5owg"><!> <button title="Search"><span class="icon svelte-ji5owg"><!></span> <span>Search</span></button> <div class="sep svelte-ji5owg"></div> <button class="nav-item sync svelte-ji5owg" title="Update Library"><span><!></span> <span> </span></button> <div class="sep svelte-ji5owg"></div> <button title="Settings"><span class="icon svelte-ji5owg"><!></span> <span>Settings</span></button></nav> <div class="footer svelte-ji5owg"><div>Moode WaveUI</div></div></div></aside>',1);function Sf(e,t){Et(t,!1);const a=()=>Ae(Es,"$isYandexEnabled",l),s=()=>Ae(ia,"$isSyncingLibrary",l),n=()=>Ae(cn,"$isSidebarCollapsed",l),i=()=>Ae(Nt,"$activeMenuTab",l),[l,o]=jt(),u=T(),d=T();let f=wt(t,"isOpen",8,!1);const h=$n();let v=T(0),p=T(0),x=T(!1);const E=[{id:"queue",label:"Queue",icon:y.MENU},{id:"favorites",label:"Favorites",icon:y.HEART},{id:"artists",label:"Artists",icon:y.ARTISTS},{id:"albums",label:"Albums",icon:y.ALBUMS},{id:"playlists",label:"Playlists",icon:y.PLAYLISTS},{id:"radio",label:"Radio",icon:y.RADIO},{id:"yandex",label:"Yandex Music",icon:y.YANDEX}];function w(D){window.location.hash=`/${D}`,h("close")}async function S(){s()||(await Da.syncLibrary(),window.location.hash="/artists")}function X(){cn.update(D=>!D)}function he(D){f()&&(g(v,D.touches[0].clientX),g(p,r(v)),g(x,!0))}function ae(D){r(x)&&g(p,D.touches[0].clientX)}function re(){r(x)&&(r(p)-r(v)<-70&&h("close"),g(x,!1),g(v,0),g(p,0))}ne(()=>a(),()=>{g(u,E.filter(D=>D.id==="yandex"?a():!0))}),ne(()=>(r(x),r(p),r(v)),()=>{g(d,r(x)?Math.min(0,r(p)-r(v)):0)}),Ht(),At();var be=Ef(),O=Re(be);{var U=D=>{var de=kf();M("click",de,()=>h("close")),ut(3,de,()=>yt,()=>({duration:200})),b(D,de)};P(O,D=>{f()&&D(U)})}var ie=_(O,2);let H,we;var z=c(ie),F=c(z),me=c(F),W=c(me),L=c(W);ee(L,()=>(j(y),m(()=>y.BACK)));var $=_(me,2);let I;var Ee=c($),Q=c(Ee);ee(Q,()=>wf);var se=_(F,2),ye=c(se);ee(ye,()=>(j(y),m(()=>y.CLOSE)));var ce=_(z,2),ke=c(ce),Se=c(ke);bt(Se,1,()=>r(u),D=>D.id,(D,de)=>{var J=xf();let Le;var je=c(J),Ye=c(je);ee(Ye,()=>(r(de),m(()=>r(de).icon)));var B=_(je,2);let ge;var Ne=c(B);ve(()=>{Le=Xe(J,1,"nav-item svelte-ji5owg",null,Le,{active:i()===r(de).id}),Ut(J,"title",(r(de),m(()=>r(de).label))),ge=Xe(B,1,"label-text svelte-ji5owg",null,ge,{hidden:n()}),le(Ne,(r(de),m(()=>r(de).label)))}),M("click",J,()=>w(r(de).id)),b(D,J)});var A=_(Se,2);let q;var ue=c(A),Y=c(ue);ee(Y,()=>(j(y),m(()=>y.SEARCH)));var G=_(ue,2);let _e;var fe=_(A,4),Ce=c(fe);let N;var pe=c(Ce);ee(pe,()=>(j(y),m(()=>y.SYNC)));var Me=_(Ce,2);let te;var Te=c(Me),ze=_(fe,4);let C;var K=c(ze),R=c(K);ee(R,()=>(j(y),m(()=>y.SETTINGS)));var V=_(K,2);let $e;var Z=_(ke,2),oe=c(Z);let xe;ve(()=>{H=Xe(ie,1,"side-menu svelte-ji5owg",null,H,{"mobile-open":f(),collapsed:n()}),we=gt(ie,"",we,{transform:f()?`translateX(${r(d)}px)`:"",transition:r(x)?"none":"width 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.3s ease"}),Ut(me,"title",n()?"Expand":"Collapse"),gt(W,`transform: rotate(${n()?"180deg":"0deg"})`),I=Xe($,1,"logo-wrapper svelte-ji5owg",null,I,{hidden:n()}),q=Xe(A,1,"nav-item svelte-ji5owg",null,q,{active:i()==="search"}),_e=Xe(G,1,"label-text svelte-ji5owg",null,_e,{hidden:n()}),fe.disabled=s(),N=Xe(Ce,1,"icon svelte-ji5owg",null,N,{spin:s()}),te=Xe(Me,1,"label-text svelte-ji5owg",null,te,{hidden:n()}),le(Te,s()?"Syncing...":"Update Library"),C=Xe(ze,1,"nav-item svelte-ji5owg",null,C,{active:i()==="settings"}),$e=Xe(V,1,"label-text svelte-ji5owg",null,$e,{hidden:n()}),xe=Xe(oe,1,"footer-text svelte-ji5owg",null,xe,{hidden:n()})}),M("click",me,X),M("click",se,()=>h("close")),M("click",A,()=>w("search")),M("click",fe,S),M("click",ze,()=>w("settings")),M("touchstart",ie,he),M("touchmove",ie,ae),M("touchend",ie,re),b(e,be),St(),o()}var Tf=k('<div class="toast-container svelte-k2bvk7"><div> </div></div>'),$f=k('<button class="back-btn svelte-k2bvk7"><span class="icon-inline svelte-k2bvk7"><!></span> Back</button>'),Mf=k('<div class="view-title svelte-k2bvk7"><!></div>'),Af=k('<div class="full-player-modal svelte-k2bvk7"><!></div>'),Cf=k('<div class="app-container svelte-k2bvk7"><div class="app-layout svelte-k2bvk7"><!> <!> <main class="content-area svelte-k2bvk7"><header class="top-bar svelte-k2bvk7"><button class="hamburger-btn svelte-k2bvk7"><!></button> <!></header> <div class="scroll-container svelte-k2bvk7"><div class="view-wrapper svelte-k2bvk7"><!></div></div></main> <div class="docked-player-container svelte-k2bvk7"><!></div></div> <div class="mini-player-wrapper svelte-k2bvk7"><!></div></div> <!>',1);function Pf(e,t){Et(t,!1);const a=()=>Ae(Wt,"$navigationStack",l),s=()=>Ae(nn,"$toastMessage",l),n=()=>Ae(Nt,"$activeMenuTab",l),i=()=>Ae(xs,"$isFullPlayerOpen",l),[l,o]=jt();let u=T(!1);Ya(()=>{window.history.replaceState({depth:a().length},"","");const $=()=>void 0;return window.addEventListener("popstate",$),()=>window.removeEventListener("popstate",$)}),At();var d=Cf(),f=Re(d),h=c(f),v=c(h);{var p=$=>{var I=Tf(),Ee=c(I),Q=c(Ee);ve(()=>{Xe(Ee,1,`toast-body ${s().type??""}`,"svelte-k2bvk7"),le(Q,s().text)}),ut(3,I,()=>uo,()=>({y:-50,duration:300})),b($,I)};P(v,$=>{s()&&$(p)})}var x=_(v,2);Sf(x,{get isOpen(){return r(u)},$$events:{close:()=>g(u,!1)}});var E=_(x,2),w=c(E),S=c(w),X=c(S);ee(X,()=>y.MENU);var he=_(S,2);{var ae=$=>{var I=$f(),Ee=c(I),Q=c(Ee);ee(Q,()=>y.BACK),M("click",I,function(...se){rd?.apply(this,se)}),b($,I)},re=$=>{var I=Mf(),Ee=c(I);{var Q=ye=>{var ce=La("Radio");b(ye,ce)},se=ye=>{var ce=st(),ke=Re(ce);{var Se=q=>{var ue=La("Playlists");b(q,ue)},A=q=>{var ue=st(),Y=Re(ue);{var G=fe=>{var Ce=La("Search");b(fe,Ce)},_e=fe=>{var Ce=st(),N=Re(Ce);{var pe=te=>{var Te=La("Yandex Music");b(te,Te)},Me=te=>{var Te=st(),ze=Re(Te);{var C=R=>{var V=La("Queue");b(R,V)},K=R=>{var V=st(),$e=Re(V);{var Z=xe=>{var D=La("Favorites");b(xe,D)},oe=xe=>{var D=st(),de=Re(D);{var J=je=>{var Ye=La("Settings");b(je,Ye)},Le=je=>{var Ye=La();ve(B=>le(Ye,B),[()=>(n()||"Library").charAt(0).toUpperCase()+(n()||"library").slice(1)]),b(je,Ye)};P(de,je=>{n()==="settings"?je(J):je(Le,!1)},!0)}b(xe,D)};P($e,xe=>{n()==="favorites"?xe(Z):xe(oe,!1)},!0)}b(R,V)};P(ze,R=>{n()==="queue"?R(C):R(K,!1)},!0)}b(te,Te)};P(N,te=>{n()==="yandex"?te(pe):te(Me,!1)},!0)}b(fe,Ce)};P(Y,fe=>{n()==="search"?fe(G):fe(_e,!1)},!0)}b(q,ue)};P(ke,q=>{n()==="playlists"?q(Se):q(A,!1)},!0)}b(ye,ce)};P(Ee,ye=>{n()==="radio"?ye(Q):ye(se,!1)})}b($,I)};P(he,$=>{a().length>1?$(ae):$(re,!1)})}var be=_(w,2),O=c(be),U=c(O);{var ie=$=>{jv($,{})},H=$=>{var I=st(),Ee=Re(I);{var Q=ye=>{sf(ye,{})},se=ye=>{var ce=st(),ke=Re(ce);{var Se=q=>{Lu(q,{})},A=q=>{var ue=st(),Y=Re(ue);{var G=fe=>{nu(fe,{})},_e=fe=>{var Ce=st(),N=Re(Ce);{var pe=te=>{yu(te,{})},Me=te=>{var Te=st(),ze=Re(Te);{var C=R=>{$u(R,{})},K=R=>{kv(R,{get activeCategory(){return n()}})};P(ze,R=>{n()==="settings"?R(C):R(K,!1)},!0)}b(te,Te)};P(N,te=>{n()==="search"?te(pe):te(Me,!1)},!0)}b(fe,Ce)};P(Y,fe=>{n()==="playlists"||n()==="favorites"?fe(G):fe(_e,!1)},!0)}b(q,ue)};P(ke,q=>{n()==="queue"?q(Se):q(A,!1)},!0)}b(ye,ce)};P(Ee,ye=>{n()==="yandex"?ye(Q):ye(se,!1)},!0)}b($,I)};P(U,$=>{n()==="radio"?$(ie):$(H,!1)})}var we=_(E,2),z=c(we);_i(z,{isDocked:!0});var F=_(h,2),me=c(F);ff(me,{});var W=_(f,2);{var L=$=>{var I=Af(),Ee=c(I);_i(Ee,{}),b($,I)};P(W,$=>{i()&&$(L)})}ve(()=>gt(be,`padding-bottom: ${i()?"0px":"var(--mini-player-height)"};`)),M("click",S,()=>g(u,!0)),b(e,d),St(),o()}var Lf=k('<button class="back-btn-area svelte-l8h85k"><span class="back-icon svelte-l8h85k"><!></span></button> <span class="header-title svelte-l8h85k">Select Playlist</span>',1),zf=k('<div class="track-info svelte-l8h85k"><div class="title text-ellipsis svelte-l8h85k"> </div> <div class="artist text-ellipsis svelte-l8h85k">Playlist</div></div>'),Rf=k('<div class="track-info svelte-l8h85k"><div class="title text-ellipsis svelte-l8h85k"> </div> <div class="artist text-ellipsis svelte-l8h85k"> </div></div>'),jf=k('<button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span> </span></button>'),If=k('<div class="empty-msg svelte-l8h85k">No custom playlists</div>'),Nf=k("<!> <!>",1),Df=k('<button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Play Now</span></button> <div class="sep svelte-l8h85k"></div> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Rename</span></button> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Delete Playlist</span></button>',1),Of=k('<div class="sep svelte-l8h85k"></div> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>My Vibe</span></button> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Radio by Track</span></button>',1),qf=k('<button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Go to Album</span></button> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Go to Artist</span></button>',1),Ff=k('<div class="sep svelte-l8h85k"></div> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Remove from Playlist</span></button>',1),Bf=k('<div class="sep svelte-l8h85k"></div> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Remove from Queue</span></button>',1),Uf=k('<button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Play Next</span></button> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Add to Queue</span></button> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Add to Playlist...</span></button> <!> <!> <button class="menu-row svelte-l8h85k"><span><!></span> <span> </span></button> <!> <!>',1),Yf=k('<div class="backdrop svelte-l8h85k"><div class="menu-card svelte-l8h85k"><div class="menu-header svelte-l8h85k"><!></div> <div class="menu-items scroll-y svelte-l8h85k"><!></div></div></div>');function Hf(e,t){Et(t,!1);const a=()=>Ae(An,"$contextMenu",i),s=()=>Ae(Ia,"$favorites",i),n=()=>Ae(zs,"$playlists",i),[i,l]=jt(),o=T(),u=T(),d=T(),f=T(),h=T(),v=T(),p=T(),x=T();let E=T(),w=T(),S=T(),X=T(0),he=T(0),ae=T("main"),re=T(!1);function be(A){a().isOpen&&(g(re,!1),zt())}function O(){zt()}function U(){a().track&&oa.playNext(a().track.file),zt()}function ie(){a().track&&oa.addToQueue(a().track.file),zt()}function H(){a().track&&ga.toggleFavorite(a().track),zt()}function we(){const A=a().track;A&&A.album&&(A.isYandex&&A.album||Ba("tracks_by_album",{name:A.album,artist:A.artist})),zt()}function z(){const A=a().track;A&&A.artist&&(A.isYandex||Ba("albums_by_artist",{name:A.artist})),zt()}async function F(){const{playlistName:A,index:q}=a().context;A&&q!==null&&(Ur.update(ue=>{const Y=[...ue];return Y.splice(q,1),Y}),await ga.removeFromPlaylist(A,q)),zt()}function me(){const{index:A}=a().context;A!=null&&oa.removeFromQueue(A),zt()}function W(){const A=a().context.playlist;A&&Oe.send("stop").then(()=>Oe.send("clear")).then(()=>Oe.send(`load "${A.name.replace(/"/g,'\\"')}"`)).then(()=>Oe.send("play 0")),zt()}function L(){const A=a().context.playlist;A&&(zt(),pa({title:"Rename Playlist",message:`Enter new name for "${A.name}":`,type:"prompt",placeholder:A.name,inputValue:A.name,confirmLabel:"Rename",onConfirm:q=>{q&&q!==A.name&&ga.renamePlaylist(A.name,q)}}))}function $(){const A=a().context.playlist;A&&(zt(),pa({title:"Delete Playlist",message:`Are you sure you want to delete "${A.name}"? This cannot be undone.`,type:"confirm",confirmLabel:"Delete",onConfirm:()=>{ga.deletePlaylist(A.name)}}))}async function I(){Ie("Starting My Vibe...","info");try{await ta.playRadio()}catch{Ie("Failed to start radio","error")}zt()}async function Ee(){const A=a().track;if(A&&A.isYandex&&A.id){Ie(`Starting radio based on "${A.title}"...`,"info");try{await ta.playRadio(A.id)}catch(q){console.error(q),Ie("Error starting radio","error")}}zt()}function Q(){g(ae,"playlists")}function se(){g(ae,"main")}async function ye(A){const q=a().track;if(q)try{const ue=A.replace(/"/g,'\\"'),Y=q.file.replace(/"/g,'\\"');await Oe.send(`playlistadd "${ue}" "${Y}"`),Ie(`Added to "${A}"`,"success"),zt()}catch(ue){console.error(ue),Ie("Failed to add","error")}}ne(()=>a(),()=>{a().isOpen&&g(ae,"main")}),ne(()=>(a(),r(re)),()=>{a().isOpen?!r(re)&&typeof history<"u"&&(history.pushState({contextMenuOpen:!0},""),g(re,!0)):r(re)&&typeof history<"u"&&(history.back(),g(re,!1))}),ne(()=>(a(),s()),()=>{g(o,a().track&&s().has(a().track.file))}),ne(()=>a(),()=>{g(u,a().track&&(String(a().track.file).includes("http")||String(a().track.file).includes("://")))}),ne(()=>a(),()=>{g(d,a().track&&(a().track.isYandex||a().track.service==="yandex"))}),ne(()=>a(),()=>{g(f,a().context?.type==="playlist")}),ne(()=>a(),()=>{g(h,a().context?.type==="queue")}),ne(()=>a(),()=>{g(v,a().context?.type==="playlist-card")}),ne(()=>a(),()=>{g(p,a().context?.source==="miniplayer")}),ne(()=>(a(),r(he),r(X),r(E),r(p),r(w)),()=>{g(x,(()=>{if(!a().isOpen)return"";const A=a().triggerRect,q=a().x,ue=a().y,Y=r(he)||220,G=r(X)||320;if(r(E)<=768&&r(p)&&A)return`
        position: fixed; 
        bottom: ${r(w)-A.top}px; 
        left: 50%; 
        transform: translateX(-50%); 
        margin: 0; 
        transform-origin: bottom center;
      `;let _e=0,fe=0,Ce="top left";if(A){const pe=A.left+A.width/2,Me=A.top+A.height/2,te=pe>r(E)/2,Te=Me>r(w)/2;te?(_e=A.right-Y,Ce=Te?"bottom right":"top right"):(_e=A.left,Ce=Te?"bottom left":"top left"),Te?fe=A.top-G:fe=A.bottom}else _e=q,fe=ue,_e+Y>r(E)&&(_e=r(E)-Y-10),fe+G>r(w)&&(fe=r(w)-G-10);const N=8;return _e<N&&(_e=N),_e+Y>r(E)-N&&(_e=r(E)-Y-N),fe<N&&(fe=N),fe+G>r(w)-N&&(fe=r(w)-G-N),`position: fixed; top: ${fe}px; left: ${_e}px; margin: 0; transform-origin: ${Ce};`})())}),Ht(),At();var ce=st();M("popstate",Ra,be);var ke=Re(ce);{var Se=A=>{var q=Yf(),ue=c(q),Y=c(ue),G=c(Y);{var _e=te=>{var Te=Lf(),ze=Re(Te),C=c(ze),K=c(C);ee(K,()=>(j(y),m(()=>y.BACK))),M("click",ze,se),b(te,Te)},fe=te=>{var Te=st(),ze=Re(Te);{var C=R=>{var V=zf(),$e=c(V),Z=c($e);ve(()=>le(Z,(a(),m(()=>a().context.playlist.name)))),b(R,V)},K=R=>{var V=Rf(),$e=c(V),Z=c($e),oe=_($e,2),xe=c(oe);ve(()=>{le(Z,(a(),m(()=>a().track.title))),le(xe,(a(),m(()=>a().track.artist)))}),b(R,V)};P(ze,R=>{r(v)?R(C):R(K,!1)},!0)}b(te,Te)};P(G,te=>{r(ae)==="playlists"?te(_e):te(fe,!1)})}var Ce=_(Y,2),N=c(Ce);{var pe=te=>{var Te=Nf(),ze=Re(Te);bt(ze,1,n,Dt,(R,V)=>{var $e=st(),Z=Re($e);{var oe=xe=>{var D=jf(),de=c(D),J=c(de);ee(J,()=>(j(y),m(()=>y.PLAYLISTS)));var Le=_(de,2),je=c(Le);ve(()=>le(je,(r(V),m(()=>r(V).name)))),M("click",D,()=>ye(r(V).name)),b(xe,D)};P(Z,xe=>{r(V),m(()=>r(V).name!=="Favorites")&&xe(oe)})}b(R,$e)});var C=_(ze,2);{var K=R=>{var V=If();b(R,V)};P(C,R=>{n(),m(()=>n().filter(V=>V.name!=="Favorites").length===0)&&R(K)})}b(te,Te)},Me=te=>{var Te=st(),ze=Re(Te);{var C=R=>{var V=Df(),$e=Re(V),Z=c($e),oe=c(Z);ee(oe,()=>(j(y),m(()=>y.PLAY)));var xe=_($e,4),D=c(xe),de=c(D);ee(de,()=>(j(y),m(()=>y.EDIT)));var J=_(xe,2),Le=c(J),je=c(Le);ee(je,()=>(j(y),m(()=>y.REMOVE))),M("click",$e,W),M("click",xe,L),M("click",J,$),b(R,V)},K=R=>{var V=Uf(),$e=Re(V),Z=c($e),oe=c(Z);ee(oe,()=>(j(y),m(()=>y.NEXT)));var xe=_($e,2),D=c(xe),de=c(D);ee(de,()=>(j(y),m(()=>y.MENU)));var J=_(xe,2),Le=c(J),je=c(Le);ee(je,()=>(j(y),m(()=>y.ADD_TO_PLAYLIST||y.ADD)));var Ye=_(J,2);{var B=Je=>{var Ze=Of(),Ve=_(Re(Ze),2),vt=c(Ve),ct=c(vt);ee(ct,()=>(j(y),m(()=>y.RADIO)));var ft=_(Ve,2),dt=c(ft),at=c(dt);ee(at,()=>(j(y),m(()=>y.RADIO))),M("click",Ve,I),M("click",ft,Ee),b(Je,Ze)};P(Ye,Je=>{r(d)&&Je(B)})}var ge=_(Ye,2);{var Ne=Je=>{var Ze=qf(),Ve=Re(Ze),vt=c(Ve),ct=c(vt);ee(ct,()=>(j(y),m(()=>y.ALBUM_LINK||y.ALBUMS)));var ft=_(Ve,2),dt=c(ft),at=c(dt);ee(at,()=>(j(y),m(()=>y.ARTIST_LINK||y.ARTISTS))),M("click",Ve,we),M("click",ft,z),b(Je,Ze)};P(ge,Je=>{!r(u)&&!r(d)&&Je(Ne)})}var He=_(ge,2),Fe=c(He);let Be;var Qe=c(Fe);ee(Qe,()=>(r(o),j(y),m(()=>r(o)?y.HEART_FILLED:y.HEART)));var rt=_(Fe,2),Ke=c(rt),qe=_(He,2);{var We=Je=>{var Ze=Ff(),Ve=_(Re(Ze),2),vt=c(Ve),ct=c(vt);ee(ct,()=>(j(y),m(()=>y.REMOVE))),M("click",Ve,F),b(Je,Ze)};P(qe,Je=>{r(f)&&Je(We)})}var Ge=_(qe,2);{var lt=Je=>{var Ze=Bf(),Ve=_(Re(Ze),2),vt=c(Ve),ct=c(vt);ee(ct,()=>(j(y),m(()=>y.REMOVE))),M("click",Ve,me),b(Je,Ze)};P(Ge,Je=>{r(h)&&Je(lt)})}ve(()=>{Be=Xe(Fe,1,"icon svelte-l8h85k",null,Be,{liked:r(o)}),le(Ke,r(o)?"Unlike":"Like")}),M("click",$e,U),M("click",xe,ie),M("click",J,Q),M("click",He,H),b(R,V)};P(ze,R=>{r(v)?R(C):R(K,!1)},!0)}b(te,Te)};P(N,te=>{r(ae)==="playlists"?te(pe):te(Me,!1)})}Ua(ue,te=>g(S,te),()=>r(S)),ve(()=>gt(ue,r(x))),Gn(ue,"clientHeight",te=>g(X,te)),Gn(ue,"clientWidth",te=>g(he,te)),ut(3,ue,()=>Mn,()=>({start:.95,duration:100})),M("click",ue,Gt(function(te){Xr.call(this,t,te)})),M("click",q,O),ut(3,q,()=>yt,()=>({duration:100})),b(A,q)};P(ke,A=>{a(),m(()=>a().isOpen)&&A(Se)})}Jn("innerWidth",A=>g(E,A)),Jn("innerHeight",A=>g(w,A)),b(e,ce),St(),l()}var Vf=k('<p class="modal-message svelte-1bxxaoh"> </p>'),Wf=k('<div class="input-wrapper svelte-1bxxaoh"><input type="text" autoFocus/></div>'),Qf=k('<span class="check svelte-1bxxaoh">â</span>'),Xf=k("<button> <!></button>"),Kf=k('<div class="select-list svelte-1bxxaoh"></div>'),Gf=k('<button class="btn cancel svelte-1bxxaoh"> </button>'),Zf=k('<div class="modal-actions svelte-1bxxaoh"><!> <button class="btn confirm svelte-1bxxaoh"> </button></div>'),Jf=k('<div class="backdrop svelte-1bxxaoh"><div class="modal-card svelte-1bxxaoh"><div class="modal-header svelte-1bxxaoh"><span class="modal-title svelte-1bxxaoh"> </span></div> <div class="modal-body svelte-1bxxaoh"><!> <!></div> <!></div></div>');function e0(e,t){Et(t,!1);const a=()=>Ae(ws,"$modal",s),[s,n]=jt();let i=T(!1),l=T();function o(){if(a().type==="prompt"){const E=a().inputValue?a().inputValue.trim():"";if(E.length===0){d();return}a().onConfirm&&a().onConfirm(E)}else a().onConfirm&&a().onConfirm();cs()}function u(E){a().onConfirm&&a().onConfirm(E),cs()}function d(){g(i,!0),r(l)&&r(l).focus(),setTimeout(()=>{g(i,!1)},400)}function f(){cs()}function h(E){E.key==="Enter"&&a().type!=="select"&&o(),r(i)&&g(i,!1)}ne(()=>a(),()=>{a().isOpen||g(i,!1)}),Ht(),At();var v=st(),p=Re(v);{var x=E=>{var w=Jf(),S=c(w),X=c(S),he=c(X),ae=c(he),re=_(X,2),be=c(re);{var O=F=>{var me=Vf(),W=c(me);ve(()=>le(W,(a(),m(()=>a().message)))),b(F,me)};P(be,F=>{a(),m(()=>a().message)&&F(O)})}var U=_(be,2);{var ie=F=>{var me=Wf(),W=c(me);let L;Ua(W,$=>g(l,$),()=>r(l)),ve(()=>{L=Xe(W,1,"modal-input svelte-1bxxaoh",null,L,{"shake-error":r(i)}),Ut(W,"placeholder",(a(),m(()=>a().placeholder)))}),tr(W,()=>a().inputValue,$=>sc(ws,m(a).inputValue=$,m(a))),M("keydown",W,h),b(F,me)},H=F=>{var me=st(),W=Re(me);{var L=$=>{var I=Kf();bt(I,5,()=>(a(),m(()=>a().options)),Dt,(Ee,Q)=>{var se=Xf();let ye;var ce=c(se),ke=_(ce);{var Se=A=>{var q=Qf();b(A,q)};P(ke,A=>{r(Q),a(),m(()=>r(Q).value===a().inputValue)&&A(Se)})}ve(()=>{ye=Xe(se,1,"select-item svelte-1bxxaoh",null,ye,{active:r(Q).value===a().inputValue}),le(ce,`${r(Q),m(()=>r(Q).label)??""} `)}),M("click",se,()=>u(r(Q).value)),b(Ee,se)}),b($,I)};P(W,$=>{a(),m(()=>a().type==="select")&&$(L)},!0)}b(F,me)};P(U,F=>{a(),m(()=>a().type==="prompt")?F(ie):F(H,!1)})}var we=_(re,2);{var z=F=>{var me=Zf(),W=c(me);{var L=Ee=>{var Q=Gf(),se=c(Q);ve(()=>le(se,(a(),m(()=>a().cancelLabel)))),M("click",Q,function(...ye){cs?.apply(this,ye)}),b(Ee,Q)};P(W,Ee=>{a(),m(()=>a().type==="confirm"||a().type==="prompt")&&Ee(L)})}var $=_(W,2),I=c($);ve(()=>le(I,(a(),m(()=>a().confirmLabel)))),M("click",$,o),b(F,me)};P(we,F=>{a(),m(()=>a().type!=="select")&&F(z)})}ve(()=>le(ae,(a(),m(()=>a().title)))),ut(3,S,()=>Mn,()=>({start:.95,duration:200})),M("click",S,Gt(function(F){Xr.call(this,t,F)})),M("click",w,f),ut(3,w,()=>yt,()=>({duration:150})),b(E,w)};P(p,E=>{a(),m(()=>a().isOpen)&&E(x)})}b(e,v),St(),n()}const mi={init(){this.handleHashChange(),window.addEventListener("hashchange",()=>this.handleHashChange())},handleHashChange(){let e=window.location.hash.slice(1);for(;e.startsWith("/");)e=e.slice(1);if(!e){(et(Wt).length>1||et(Nt)==="search")&&(this.setRootTab("artists"),window.location.hash="/artists");return}const t=e.split("/").map(decodeURIComponent),a=t[0];let s=ad();switch(s||t.length>1&&(a==="album"&&t.length>=3?s={artist:t[1],name:t[2]}:a==="artist"&&t.length>=2?s={name:t[1]}:s={name:t[1],displayName:t[1]}),console.log(`[Router] Navigating: ${a}`,s),a){case"queue":this.setRootTab("queue");break;case"radio":this.setRootTab("radio");break;case"playlists":this.setRootTab("playlists");break;case"settings":this.setRootTab("settings");break;case"favorites":Nt.set("favorites"),Wt.set([{view:"root"},{view:"details",data:{name:"Favorites"}}]);break;case"artists":this.setRootTab("artists");break;case"albums":this.setRootTab("albums");break;case"search":Nt.set("search"),t[1]&&Yr.set(t[1]),Wt.set([{view:"root"}]);break;case"album":Nt.set("albums"),Wt.set([{view:"root"},{view:"tracks_by_album",data:s}]);break;case"artist":Nt.set("artists"),Wt.set([{view:"root"},{view:"albums_by_artist",data:s}]);break;case"playlist":Nt.set("playlists"),Wt.set([{view:"root"},{view:"details",data:s}]);break;case"yandex":Nt.set("yandex"),Wt.set([{view:"root"}]);break;default:this.setRootTab("artists");break}},setRootTab(e){Nt.set(e),Wt.set([{view:"root"}])},updateUrl(e,t){let a="";if(e==="root"){const s=et(Nt);if(s==="search"){const n=et(Yr);a=n?`search/${encodeURIComponent(n)}`:"search"}else a=s}else if(e==="details"){const s=t.name||t;a=s==="Favorites"?"favorites":`playlist/${encodeURIComponent(s)}`}else if(e==="albums_by_artist"){const s=t.name||t;a=`artist/${encodeURIComponent(s)}`}else if(e==="tracks_by_album"){const s=t.name||t,n=t.artist;n?a=`album/${encodeURIComponent(n)}/${encodeURIComponent(s)}`:a=`album/${encodeURIComponent(s)}`}else e==="queue"&&(a="queue");if(a){const s=`#/${a}`;decodeURIComponent(window.location.hash)!==decodeURIComponent(s)&&(window.location.hash=`/${a}`)}}};var t0=k("<!> <!> <!>",1);function a0(e,t){Et(t,!1),Ya(async()=>{mi.init(),td((l,o)=>{mi.updateUrl(l,o)}),bo(),Da.loadRadioStations();try{const l=await Na.getArtists();l.length>0?console.log(`[App] Database ready. Loaded ${l.length} artists from cache.`):(console.log("[App] Database empty. Starting initial sync..."),Da.syncLibrary())}catch(l){console.error("[App] DB Check failed:",l),Ie("Local DB error. Please update library manually.","error")}}),At();var a=t0(),s=Re(a);Pf(s,{});var n=_(s,2);Hf(n,{});var i=_(n,2);e0(i,{}),b(e,a),St()}Dl(a0,{target:document.getElementById("app")});
