(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function a(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=a(n);fetch(n.href,i)}})();const Xs=!1;var Jr=Array.isArray,To=Array.prototype.indexOf,Ms=Array.from,yi=Object.defineProperty,wr=Object.getOwnPropertyDescriptor,wi=Object.getOwnPropertyDescriptors,$o=Object.prototype,Mo=Array.prototype,_n=Object.getPrototypeOf,Dn=Object.isExtensible;function Ao(e){return typeof e=="function"}const Xt=()=>{};function Co(e){return e()}function _s(e){for(var t=0;t<e.length;t++)e[t]()}function ki(){var e,t,a=new Promise((s,n)=>{e=s,t=n});return{promise:a,resolve:e,reject:t}}const At=2,mn=4,As=8,Po=1<<24,ma=16,Ca=32,cr=64,Cs=128,la=512,$t=1024,Ut=2048,ca=4096,Zt=8192,Ta=16384,Ps=32768,sr=65536,On=1<<17,xi=1<<18,Ar=1<<19,Si=1<<20,xa=1<<25,nr=32768,Ks=1<<21,bn=1<<22,Oa=1<<23,$a=Symbol("$state"),Lo=Symbol("legacy props"),zo=Symbol(""),mr=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function yn(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Ro(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function jo(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Io(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function No(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Do(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Oo(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function Fo(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function qo(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Bo(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Uo(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Yo=1,Ho=2,Ei=4,Vo=8,Wo=16,Qo=1,Xo=2,Ko=4,Go=8,Zo=16,Jo=1,el=2,tl=4,al=1,rl=2,Lt=Symbol(),sl="http://www.w3.org/1999/xhtml";function nl(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function il(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Ti(e){return e===this.v}function wn(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function $i(e){return!wn(e,this.v)}let Cr=!1,ol=!1;function ll(){Cr=!0}let gt=null;function xr(e){gt=e}function Et(e,t=!1,a){gt={p:gt,i:!1,c:null,e:null,s:e,x:null,l:Cr&&!t?{s:null,u:null,$:[]}:null}}function Tt(e){var t=gt,a=t.e;if(a!==null){t.e=null;for(var s of a)Ui(s)}return t.i=!0,gt=t.p,{}}function es(){return!Cr||gt!==null&&gt.l===null}let Xa=[];function Mi(){var e=Xa;Xa=[],_s(e)}function dr(e){if(Xa.length===0&&!Fr){var t=Xa;queueMicrotask(()=>{t===Xa&&Mi()})}Xa.push(e)}function cl(){for(;Xa.length>0;)Mi()}function Ai(e){var t=it;if(t===null)return st.f|=Oa,e;if((t.f&Ps)===0){if((t.f&Cs)===0)throw e;t.b.error(e)}else Sr(e,t)}function Sr(e,t){for(;t!==null;){if((t.f&Cs)!==0)try{t.b.error(e);return}catch(a){e=a}t=t.parent}throw e}const ns=new Set;let nt=null,Or=null,sa=null,aa=[],Ls=null,Gs=!1,Fr=!1;class fa{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#a=0;#r=0;#l=null;#n=new Set;#s=new Set;skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#r>0}process(t){aa=[],Or=null,this.apply();var a={parent:null,effect:null,effects:[],render_effects:[]};for(const s of t)this.#i(s,a);this.is_fork||this.#d(),this.is_deferred()?(this.#o(a.effects),this.#o(a.render_effects)):(Or=this,nt=null,Fn(a.render_effects),Fn(a.effects),Or=null,this.#l?.resolve()),sa=null}#i(t,a){t.f^=$t;for(var s=t.first;s!==null;){var n=s.f,i=(n&(Ca|cr))!==0,l=i&&(n&$t)!==0,o=l||(n&Zt)!==0||this.skipped_effects.has(s);if((s.f&Cs)!==0&&s.b?.is_pending()&&(a={parent:a,effect:s,effects:[],render_effects:[]}),!o&&s.fn!==null){i?s.f^=$t:(n&mn)!==0?a.effects.push(s):Lr(s)&&((s.f&ma)!==0&&this.#n.add(s),Er(s));var v=s.first;if(v!==null){s=v;continue}}var d=s.parent;for(s=s.next;s===null&&d!==null;)d===a.effect&&(this.#o(a.effects),this.#o(a.render_effects),a=a.parent),s=d.next,d=d.parent}}#o(t){for(const a of t)(a.f&Ut)!==0?this.#n.add(a):(a.f&ca)!==0&&this.#s.add(a),this.#c(a.deps),Mt(a,$t)}#c(t){if(t!==null)for(const a of t)(a.f&At)===0||(a.f&nr)===0||(a.f^=nr,this.#c(a.deps))}capture(t,a){this.previous.has(t)||this.previous.set(t,a),(t.f&Oa)===0&&(this.current.set(t,t.v),sa?.set(t,t.v))}activate(){nt=this,this.apply()}deactivate(){nt===this&&(nt=null,sa=null)}flush(){if(this.activate(),aa.length>0){if(Ci(),nt!==null&&nt!==this)return}else this.#a===0&&this.process([]);this.deactivate()}discard(){for(const t of this.#t)t(this);this.#t.clear()}#d(){if(this.#r===0){for(const t of this.#e)t();this.#e.clear()}this.#a===0&&this.#v()}#v(){if(ns.size>1){this.previous.clear();var t=sa,a=!0,s={parent:null,effect:null,effects:[],render_effects:[]};for(const i of ns){if(i===this){a=!1;continue}const l=[];for(const[v,d]of this.current){if(i.current.has(v))if(a&&d!==i.current.get(v))i.current.set(v,d);else continue;l.push(v)}if(l.length===0)continue;const o=[...i.current.keys()].filter(v=>!this.current.has(v));if(o.length>0){var n=aa;aa=[];const v=new Set,d=new Map;for(const u of l)Pi(u,o,v,d);if(aa.length>0){nt=i,i.apply();for(const u of aa)i.#i(u,s);i.deactivate()}aa=n}}nt=null,sa=t}this.committed=!0,ns.delete(this)}increment(t){this.#a+=1,t&&(this.#r+=1)}decrement(t){this.#a-=1,t&&(this.#r-=1),this.revive()}revive(){for(const t of this.#n)this.#s.delete(t),Mt(t,Ut),ir(t);for(const t of this.#s)Mt(t,ca),ir(t);this.flush()}oncommit(t){this.#e.add(t)}ondiscard(t){this.#t.add(t)}settled(){return(this.#l??=ki()).promise}static ensure(){if(nt===null){const t=nt=new fa;ns.add(nt),Fr||fa.enqueue(()=>{nt===t&&t.flush()})}return nt}static enqueue(t){dr(t)}apply(){}}function dl(e){var t=Fr;Fr=!0;try{for(var a;;){if(cl(),aa.length===0&&(nt?.flush(),aa.length===0))return Ls=null,a;Ci()}}finally{Fr=t}}function Ci(){var e=Ja;Gs=!0;var t=null;try{var a=0;for(bs(!0);aa.length>0;){var s=fa.ensure();if(a++>1e3){var n,i;vl()}s.process(aa),Fa.clear()}}finally{Gs=!1,bs(e),Ls=null}}function vl(){try{Do()}catch(e){Sr(e,Ls)}}let wa=null;function Fn(e){var t=e.length;if(t!==0){for(var a=0;a<t;){var s=e[a++];if((s.f&(Ta|Zt))===0&&Lr(s)&&(wa=new Set,Er(s),s.deps===null&&s.first===null&&s.nodes===null&&(s.teardown===null&&s.ac===null?Wi(s):s.fn=null),wa?.size>0)){Fa.clear();for(const n of wa){if((n.f&(Ta|Zt))!==0)continue;const i=[n];let l=n.parent;for(;l!==null;)wa.has(l)&&(wa.delete(l),i.push(l)),l=l.parent;for(let o=i.length-1;o>=0;o--){const v=i[o];(v.f&(Ta|Zt))===0&&Er(v)}}wa.clear()}}wa=null}}function Pi(e,t,a,s){if(!a.has(e)&&(a.add(e),e.reactions!==null))for(const n of e.reactions){const i=n.f;(i&At)!==0?Pi(n,t,a,s):(i&(bn|ma))!==0&&(i&Ut)===0&&Li(n,t,s)&&(Mt(n,Ut),ir(n))}}function Li(e,t,a){const s=a.get(e);if(s!==void 0)return s;if(e.deps!==null)for(const n of e.deps){if(t.includes(n))return!0;if((n.f&At)!==0&&Li(n,t,a))return a.set(n,!0),!0}return a.set(e,!1),!1}function ir(e){for(var t=Ls=e;t.parent!==null;){t=t.parent;var a=t.f;if(Gs&&t===it&&(a&ma)!==0&&(a&xi)===0)return;if((a&(cr|Ca))!==0){if((a&$t)===0)return;t.f^=$t}}aa.push(t)}function ul(e){let t=0,a=or(0),s;return()=>{Vr()&&(r(a),Pr(()=>(t===0&&(s=m(()=>e(()=>qr(a)))),t+=1,()=>{dr(()=>{t-=1,t===0&&(s?.(),s=void 0,qr(a))})})))}}var fl=sr|Ar|Cs;function hl(e,t,a){new pl(e,t,a)}class pl{parent;#e=!1;#t;#a=null;#r;#l;#n;#s=null;#i=null;#o=null;#c=null;#d=null;#v=0;#u=0;#h=!1;#f=null;#b=ul(()=>(this.#f=or(this.#v),()=>{this.#f=null}));constructor(t,a,s){this.#t=t,this.#r=a,this.#l=s,this.parent=it.b,this.#e=!!this.#r.pending,this.#n=xn(()=>{it.b=this;{var n=this.#_();try{this.#s=ra(()=>s(n))}catch(i){this.error(i)}this.#u>0?this.#g():this.#e=!1}return()=>{this.#d?.remove()}},fl)}#y(){try{this.#s=ra(()=>this.#l(this.#t))}catch(t){this.error(t)}this.#e=!1}#w(){const t=this.#r.pending;t&&(this.#i=ra(()=>t(this.#t)),fa.enqueue(()=>{var a=this.#_();this.#s=this.#p(()=>(fa.ensure(),ra(()=>this.#l(a)))),this.#u>0?this.#g():(Za(this.#i,()=>{this.#i=null}),this.#e=!1)}))}#_(){var t=this.#t;return this.#e&&(this.#d=Ma(),this.#t.before(this.#d),t=this.#d),t}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#r.pending}#p(t){var a=it,s=st,n=gt;_a(this.#n),qt(this.#n),xr(this.#n.ctx);try{return t()}catch(i){return Ai(i),null}finally{_a(a),qt(s),xr(n)}}#g(){const t=this.#r.pending;this.#s!==null&&(this.#c=document.createDocumentFragment(),this.#c.append(this.#d),Ki(this.#s,this.#c)),this.#i===null&&(this.#i=ra(()=>t(this.#t)))}#m(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#m(t);return}this.#u+=t,this.#u===0&&(this.#e=!1,this.#i&&Za(this.#i,()=>{this.#i=null}),this.#c&&(this.#t.before(this.#c),this.#c=null))}update_pending_count(t){this.#m(t),this.#v+=t,this.#f&&lr(this.#f,this.#v)}get_effect_pending(){return this.#b(),r(this.#f)}error(t){var a=this.#r.onerror;let s=this.#r.failed;if(this.#h||!a&&!s)throw t;this.#s&&(Bt(this.#s),this.#s=null),this.#i&&(Bt(this.#i),this.#i=null),this.#o&&(Bt(this.#o),this.#o=null);var n=!1,i=!1;const l=()=>{if(n){il();return}n=!0,i&&Uo(),fa.ensure(),this.#v=0,this.#o!==null&&Za(this.#o,()=>{this.#o=null}),this.#e=this.has_pending_snippet(),this.#s=this.#p(()=>(this.#h=!1,ra(()=>this.#l(this.#t)))),this.#u>0?this.#g():this.#e=!1};var o=st;try{qt(null),i=!0,a?.(t,l),i=!1}catch(v){Sr(v,this.#n&&this.#n.parent)}finally{qt(o)}s&&dr(()=>{this.#o=this.#p(()=>{fa.ensure(),this.#h=!0;try{return ra(()=>{s(this.#t,()=>t,()=>l)})}catch(v){return Sr(v,this.#n.parent),null}finally{this.#h=!1}})})}}function gl(e,t,a,s){const n=es()?ts:_t;if(a.length===0&&e.length===0){s(t.map(n));return}var i=nt,l=it,o=_l();function v(){Promise.all(a.map(d=>ml(d))).then(d=>{o();try{s([...t.map(n),...d])}catch(u){(l.f&Ta)===0&&Sr(u,l)}i?.deactivate(),ms()}).catch(d=>{Sr(d,l)})}e.length>0?Promise.all(e).then(()=>{o();try{return v()}finally{i?.deactivate(),ms()}}):v()}function _l(){var e=it,t=st,a=gt,s=nt;return function(i=!0){_a(e),qt(t),xr(a),i&&s?.activate()}}function ms(){_a(null),qt(null),xr(null)}function ts(e){var t=At|Ut,a=st!==null&&(st.f&At)!==0?st:null;return it!==null&&(it.f|=Ar),{ctx:gt,deps:null,effects:null,equals:Ti,f:t,fn:e,reactions:null,rv:0,v:Lt,wv:0,parent:a??it,ac:null}}function ml(e,t){let a=it;a===null&&Ro();var s=a.b,n=void 0,i=or(Lt),l=!st,o=new Map;return Al(()=>{var v=ki();n=v.promise;try{Promise.resolve(e()).then(v.resolve,v.reject).then(()=>{d===nt&&d.committed&&d.deactivate(),ms()})}catch(f){v.reject(f),ms()}var d=nt;if(l){var u=!s.is_pending();s.update_pending_count(1),d.increment(u),o.get(d)?.reject(mr),o.delete(d),o.set(d,v)}const h=(f,p=void 0)=>{if(d.activate(),p)p!==mr&&(i.f|=Oa,lr(i,p));else{(i.f&Oa)!==0&&(i.f^=Oa),lr(i,f);for(const[S,x]of o){if(o.delete(S),S===d)break;x.reject(mr)}}l&&(s.update_pending_count(-1),d.decrement(u))};v.promise.then(h,f=>h(null,f||"unknown"))}),rs(()=>{for(const v of o.values())v.reject(mr)}),new Promise(v=>{function d(u){function h(){u===n?v(i):d(n)}u.then(h,h)}d(n)})}function Rr(e){const t=ts(e);return Gi(t),t}function _t(e){const t=ts(e);return t.equals=$i,t}function zi(e){var t=e.effects;if(t!==null){e.effects=null;for(var a=0;a<t.length;a+=1)Bt(t[a])}}function bl(e){for(var t=e.parent;t!==null;){if((t.f&At)===0)return(t.f&Ta)===0?t:null;t=t.parent}return null}function kn(e){var t,a=it;_a(bl(e));try{e.f&=~nr,zi(e),t=to(e)}finally{_a(a)}return t}function Ri(e){var t=kn(e);if(e.equals(t)||(nt?.is_fork||(e.v=t),e.wv=Ji()),!ur)if(sa!==null)(Vr()||nt?.is_fork)&&sa.set(e,t);else{var a=(e.f&la)===0?ca:$t;Mt(e,a)}}let Zs=new Set;const Fa=new Map;let ji=!1;function or(e,t){var a={f:0,v:e,reactions:null,equals:Ti,rv:0,wv:0};return a}function Pa(e,t){const a=or(e);return Gi(a),a}function T(e,t=!1,a=!0){const s=or(e);return t||(s.equals=$i),Cr&&a&&gt!==null&&gt.l!==null&&(gt.l.s??=[]).push(s),s}function is(e,t){return g(e,m(()=>r(e))),t}function g(e,t,a=!1){st!==null&&(!ha||(st.f&On)!==0)&&es()&&(st.f&(At|ma|bn|On))!==0&&!Aa?.includes(e)&&Bo();let s=a?br(t):t;return lr(e,s)}function lr(e,t){if(!e.equals(t)){var a=e.v;ur?Fa.set(e,t):Fa.set(e,a),e.v=t;var s=fa.ensure();s.capture(e,a),(e.f&At)!==0&&((e.f&Ut)!==0&&kn(e),Mt(e,(e.f&la)!==0?$t:ca)),e.wv=Ji(),Ii(e,Ut),es()&&it!==null&&(it.f&$t)!==0&&(it.f&(Ca|cr))===0&&(ta===null?zl([e]):ta.push(e)),!s.is_fork&&Zs.size>0&&!ji&&yl()}return t}function yl(){ji=!1;var e=Ja;bs(!0);const t=Array.from(Zs);try{for(const a of t)(a.f&$t)!==0&&Mt(a,ca),Lr(a)&&Er(a)}finally{bs(e)}Zs.clear()}function qr(e){g(e,e.v+1)}function Ii(e,t){var a=e.reactions;if(a!==null)for(var s=es(),n=a.length,i=0;i<n;i++){var l=a[i],o=l.f;if(!(!s&&l===it)){var v=(o&Ut)===0;if(v&&Mt(l,t),(o&At)!==0){var d=l;sa?.delete(d),(o&nr)===0&&(o&la&&(l.f|=nr),Ii(d,ca))}else v&&((o&ma)!==0&&wa!==null&&wa.add(l),ir(l))}}}function br(e){if(typeof e!="object"||e===null||$a in e)return e;const t=_n(e);if(t!==$o&&t!==Mo)return e;var a=new Map,s=Jr(e),n=Pa(0),i=er,l=o=>{if(er===i)return o();var v=st,d=er;qt(null),Yn(i);var u=o();return qt(v),Yn(d),u};return s&&a.set("length",Pa(e.length)),new Proxy(e,{defineProperty(o,v,d){(!("value"in d)||d.configurable===!1||d.enumerable===!1||d.writable===!1)&&Fo();var u=a.get(v);return u===void 0?u=l(()=>{var h=Pa(d.value);return a.set(v,h),h}):g(u,d.value,!0),!0},deleteProperty(o,v){var d=a.get(v);if(d===void 0){if(v in o){const u=l(()=>Pa(Lt));a.set(v,u),qr(n)}}else g(d,Lt),qr(n);return!0},get(o,v,d){if(v===$a)return e;var u=a.get(v),h=v in o;if(u===void 0&&(!h||wr(o,v)?.writable)&&(u=l(()=>{var p=br(h?o[v]:Lt),S=Pa(p);return S}),a.set(v,u)),u!==void 0){var f=r(u);return f===Lt?void 0:f}return Reflect.get(o,v,d)},getOwnPropertyDescriptor(o,v){var d=Reflect.getOwnPropertyDescriptor(o,v);if(d&&"value"in d){var u=a.get(v);u&&(d.value=r(u))}else if(d===void 0){var h=a.get(v),f=h?.v;if(h!==void 0&&f!==Lt)return{enumerable:!0,configurable:!0,value:f,writable:!0}}return d},has(o,v){if(v===$a)return!0;var d=a.get(v),u=d!==void 0&&d.v!==Lt||Reflect.has(o,v);if(d!==void 0||it!==null&&(!u||wr(o,v)?.writable)){d===void 0&&(d=l(()=>{var f=u?br(o[v]):Lt,p=Pa(f);return p}),a.set(v,d));var h=r(d);if(h===Lt)return!1}return u},set(o,v,d,u){var h=a.get(v),f=v in o;if(s&&v==="length")for(var p=d;p<h.v;p+=1){var S=a.get(p+"");S!==void 0?g(S,Lt):p in o&&(S=l(()=>Pa(Lt)),a.set(p+"",S))}if(h===void 0)(!f||wr(o,v)?.writable)&&(h=l(()=>Pa(void 0)),g(h,br(d)),a.set(v,h));else{f=h.v!==Lt;var x=l(()=>br(d));g(h,x)}var w=Reflect.getOwnPropertyDescriptor(o,v);if(w?.set&&w.set.call(u,d),!f){if(s&&typeof v=="string"){var E=a.get("length"),B=Number(v);Number.isInteger(B)&&B>=E.v&&g(E,B+1)}qr(n)}return!0},ownKeys(o){r(n);var v=Reflect.ownKeys(o).filter(h=>{var f=a.get(h);return f===void 0||f.v!==Lt});for(var[d,u]of a)u.v!==Lt&&!(d in o)&&v.push(d);return v},setPrototypeOf(){qo()}})}function qn(e){try{if(e!==null&&typeof e=="object"&&$a in e)return e[$a]}catch{}return e}function wl(e,t){return Object.is(qn(e),qn(t))}var Ra,Ni,Di,Oi;function kl(){if(Ra===void 0){Ra=window,Ni=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,a=Text.prototype;Di=wr(t,"firstChild").get,Oi=wr(t,"nextSibling").get,Dn(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Dn(a)&&(a.__t=void 0)}}function Ma(e=""){return document.createTextNode(e)}function ja(e){return Di.call(e)}function as(e){return Oi.call(e)}function c(e,t){return ja(e)}function ze(e,t=!1){{var a=ja(e);return a instanceof Comment&&a.data===""?as(a):a}}function _(e,t=1,a=!1){let s=e;for(;t--;)s=as(s);return s}function xl(e){e.textContent=""}function Fi(){return!1}let Bn=!1;function Sl(){Bn||(Bn=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function El(e,t,a,s=!0){s&&a();for(var n of t)e.addEventListener(n,a);rs(()=>{for(var i of t)e.removeEventListener(i,a)})}function vr(e){var t=st,a=it;qt(null),_a(null);try{return e()}finally{qt(t),_a(a)}}function qi(e,t,a,s=a){e.addEventListener(t,()=>vr(a));const n=e.__on_r;n?e.__on_r=()=>{n(),s(!0)}:e.__on_r=()=>s(!0),Sl()}function Bi(e){it===null&&(st===null&&No(),Io()),ur&&jo()}function Tl(e,t){var a=t.last;a===null?t.last=t.first=e:(a.next=e,e.prev=a,t.last=e)}function ba(e,t,a){var s=it;s!==null&&(s.f&Zt)!==0&&(e|=Zt);var n={ctx:gt,deps:null,nodes:null,f:e|Ut|la,first:null,fn:t,last:null,next:null,parent:s,b:s&&s.b,prev:null,teardown:null,wv:0,ac:null};if(a)try{Er(n),n.f|=Ps}catch(o){throw Bt(n),o}else t!==null&&ir(n);var i=n;if(a&&i.deps===null&&i.teardown===null&&i.nodes===null&&i.first===i.last&&(i.f&Ar)===0&&(i=i.first,(e&ma)!==0&&(e&sr)!==0&&i!==null&&(i.f|=sr)),i!==null&&(i.parent=s,s!==null&&Tl(i,s),st!==null&&(st.f&At)!==0&&(e&cr)===0)){var l=st;(l.effects??=[]).push(i)}return n}function Vr(){return st!==null&&!ha}function rs(e){const t=ba(As,null,!1);return Mt(t,$t),t.teardown=e,t}function Js(e){Bi();var t=it.f,a=!st&&(t&Ca)!==0&&(t&Ps)===0;if(a){var s=gt;(s.e??=[]).push(e)}else return Ui(e)}function Ui(e){return ba(mn|Si,e,!1)}function $l(e){return Bi(),ba(As|Si,e,!0)}function Ml(e){fa.ensure();const t=ba(cr|Ar,e,!0);return(a={})=>new Promise(s=>{a.outro?Za(t,()=>{Bt(t),s(void 0)}):(Bt(t),s(void 0))})}function Ft(e){return ba(mn,e,!1)}function le(e,t){var a=gt,s={effect:null,ran:!1,deps:e};a.l.$.push(s),s.effect=Pr(()=>{e(),!s.ran&&(s.ran=!0,m(t))})}function Vt(){var e=gt;Pr(()=>{for(var t of e.l.$){t.deps();var a=t.effect;(a.f&$t)!==0&&Mt(a,ca),Lr(a)&&Er(a),t.ran=!1}})}function Al(e){return ba(bn|Ar,e,!0)}function Pr(e,t=0){return ba(As|t,e,!0)}function de(e,t=[],a=[],s=[]){gl(s,t,a,n=>{ba(As,()=>e(...n.map(r)),!0)})}function xn(e,t=0){var a=ba(ma|t,e,!0);return a}function ra(e){return ba(Ca|Ar,e,!0)}function Yi(e){var t=e.teardown;if(t!==null){const a=ur,s=st;Un(!0),qt(null);try{t.call(null)}finally{Un(a),qt(s)}}}function Hi(e,t=!1){var a=e.first;for(e.first=e.last=null;a!==null;){const n=a.ac;n!==null&&vr(()=>{n.abort(mr)});var s=a.next;(a.f&cr)!==0?a.parent=null:Bt(a,t),a=s}}function Cl(e){for(var t=e.first;t!==null;){var a=t.next;(t.f&Ca)===0&&Bt(t),t=a}}function Bt(e,t=!0){var a=!1;(t||(e.f&xi)!==0)&&e.nodes!==null&&e.nodes.end!==null&&(Vi(e.nodes.start,e.nodes.end),a=!0),Hi(e,t&&!a),ys(e,0),Mt(e,Ta);var s=e.nodes&&e.nodes.t;if(s!==null)for(const i of s)i.stop();Yi(e);var n=e.parent;n!==null&&n.first!==null&&Wi(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function Vi(e,t){for(;e!==null;){var a=e===t?null:as(e);e.remove(),e=a}}function Wi(e){var t=e.parent,a=e.prev,s=e.next;a!==null&&(a.next=s),s!==null&&(s.prev=a),t!==null&&(t.first===e&&(t.first=s),t.last===e&&(t.last=a))}function Za(e,t,a=!0){var s=[];Qi(e,s,!0);var n=()=>{a&&Bt(e),t&&t()},i=s.length;if(i>0){var l=()=>--i||n();for(var o of s)o.out(l)}else n()}function Qi(e,t,a){if((e.f&Zt)===0){e.f^=Zt;var s=e.nodes&&e.nodes.t;if(s!==null)for(const o of s)(o.is_global||a)&&t.push(o);for(var n=e.first;n!==null;){var i=n.next,l=(n.f&sr)!==0||(n.f&Ca)!==0&&(e.f&ma)!==0;Qi(n,t,l?a:!1),n=i}}}function Sn(e){Xi(e,!0)}function Xi(e,t){if((e.f&Zt)!==0){e.f^=Zt,(e.f&$t)===0&&(Mt(e,Ut),ir(e));for(var a=e.first;a!==null;){var s=a.next,n=(a.f&sr)!==0||(a.f&Ca)!==0;Xi(a,n?t:!1),a=s}var i=e.nodes&&e.nodes.t;if(i!==null)for(const l of i)(l.is_global||t)&&l.in()}}function Ki(e,t){if(e.nodes)for(var a=e.nodes.start,s=e.nodes.end;a!==null;){var n=a===s?null:as(a);t.append(a),a=n}}let _r=null;function Pl(e){var t=_r;try{if(_r=new Set,m(e),t!==null)for(var a of _r)t.add(a);return _r}finally{_r=t}}function Ll(e){for(var t of Pl(e))lr(t,t.v)}let Ja=!1;function bs(e){Ja=e}let ur=!1;function Un(e){ur=e}let st=null,ha=!1;function qt(e){st=e}let it=null;function _a(e){it=e}let Aa=null;function Gi(e){st!==null&&(Aa===null?Aa=[e]:Aa.push(e))}let zt=null,Wt=0,ta=null;function zl(e){ta=e}let Zi=1,Wr=0,er=Wr;function Yn(e){er=e}function Ji(){return++Zi}function Lr(e){var t=e.f;if((t&Ut)!==0)return!0;if(t&At&&(e.f&=~nr),(t&ca)!==0){var a=e.deps;if(a!==null)for(var s=a.length,n=0;n<s;n++){var i=a[n];if(Lr(i)&&Ri(i),i.wv>e.wv)return!0}(t&la)!==0&&sa===null&&Mt(e,$t)}return!1}function eo(e,t,a=!0){var s=e.reactions;if(s!==null&&!Aa?.includes(e))for(var n=0;n<s.length;n++){var i=s[n];(i.f&At)!==0?eo(i,t,!1):t===i&&(a?Mt(i,Ut):(i.f&$t)!==0&&Mt(i,ca),ir(i))}}function to(e){var t=zt,a=Wt,s=ta,n=st,i=Aa,l=gt,o=ha,v=er,d=e.f;zt=null,Wt=0,ta=null,st=(d&(Ca|cr))===0?e:null,Aa=null,xr(e.ctx),ha=!1,er=++Wr,e.ac!==null&&(vr(()=>{e.ac.abort(mr)}),e.ac=null);try{e.f|=Ks;var u=e.fn,h=u(),f=e.deps;if(zt!==null){var p;if(ys(e,Wt),f!==null&&Wt>0)for(f.length=Wt+zt.length,p=0;p<zt.length;p++)f[Wt+p]=zt[p];else e.deps=f=zt;if(Vr()&&(e.f&la)!==0)for(p=Wt;p<f.length;p++)(f[p].reactions??=[]).push(e)}else f!==null&&Wt<f.length&&(ys(e,Wt),f.length=Wt);if(es()&&ta!==null&&!ha&&f!==null&&(e.f&(At|ca|Ut))===0)for(p=0;p<ta.length;p++)eo(ta[p],e);return n!==null&&n!==e&&(Wr++,ta!==null&&(s===null?s=ta:s.push(...ta))),(e.f&Oa)!==0&&(e.f^=Oa),h}catch(S){return Ai(S)}finally{e.f^=Ks,zt=t,Wt=a,ta=s,st=n,Aa=i,xr(l),ha=o,er=v}}function Rl(e,t){let a=t.reactions;if(a!==null){var s=To.call(a,e);if(s!==-1){var n=a.length-1;n===0?a=t.reactions=null:(a[s]=a[n],a.pop())}}a===null&&(t.f&At)!==0&&(zt===null||!zt.includes(t))&&(Mt(t,ca),(t.f&la)!==0&&(t.f^=la,t.f&=~nr),zi(t),ys(t,0))}function ys(e,t){var a=e.deps;if(a!==null)for(var s=t;s<a.length;s++)Rl(e,a[s])}function Er(e){var t=e.f;if((t&Ta)===0){Mt(e,$t);var a=it,s=Ja;it=e,Ja=!0;try{(t&(ma|Po))!==0?Cl(e):Hi(e),Yi(e);var n=to(e);e.teardown=typeof n=="function"?n:null,e.wv=Zi;var i;Xs&&ol&&(e.f&Ut)!==0&&e.deps}finally{Ja=s,it=a}}}async function kr(){await Promise.resolve(),dl()}function r(e){var t=e.f,a=(t&At)!==0;if(_r?.add(e),st!==null&&!ha){var s=it!==null&&(it.f&Ta)!==0;if(!s&&!Aa?.includes(e)){var n=st.deps;if((st.f&Ks)!==0)e.rv<Wr&&(e.rv=Wr,zt===null&&n!==null&&n[Wt]===e?Wt++:zt===null?zt=[e]:zt.includes(e)||zt.push(e));else{(st.deps??=[]).push(e);var i=e.reactions;i===null?e.reactions=[st]:i.includes(st)||i.push(st)}}}if(ur){if(Fa.has(e))return Fa.get(e);if(a){var l=e,o=l.v;return((l.f&$t)===0&&l.reactions!==null||ro(l))&&(o=kn(l)),Fa.set(l,o),o}}else a&&(!sa?.has(e)||nt?.is_fork&&!Vr())&&(l=e,Lr(l)&&Ri(l),Ja&&Vr()&&(l.f&la)===0&&ao(l));if(sa?.has(e))return sa.get(e);if((e.f&Oa)!==0)throw e.v;return e.v}function ao(e){if(e.deps!==null){e.f^=la;for(const t of e.deps)(t.reactions??=[]).push(e),(t.f&At)!==0&&(t.f&la)===0&&ao(t)}}function ro(e){if(e.v===Lt)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(Fa.has(t)||(t.f&At)!==0&&ro(t))return!0;return!1}function m(e){var t=ha;try{return ha=!0,e()}finally{ha=t}}const jl=-7169;function Mt(e,t){e.f=e.f&jl|t}function N(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if($a in e)en(e);else if(!Array.isArray(e))for(let t in e){const a=e[t];typeof a=="object"&&a&&$a in a&&en(a)}}}function en(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let s in e)try{en(e[s],t)}catch{}const a=_n(e);if(a!==Object.prototype&&a!==Array.prototype&&a!==Map.prototype&&a!==Set.prototype&&a!==Date.prototype){const s=wi(a);for(let n in s){const i=s[n].get;if(i)try{i.call(e)}catch{}}}}}const Il=["touchstart","touchmove"];function Nl(e){return Il.includes(e)}const Dl=new Set,Hn=new Set;function Ol(e,t,a,s={}){function n(i){if(s.capture||Ir.call(t,i),!i.cancelBubble)return vr(()=>a?.call(this,i))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?dr(()=>{t.addEventListener(e,n,s)}):t.addEventListener(e,n,s),n}function M(e,t,a,s,n){var i={capture:s,passive:n},l=Ol(e,t,a,i);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&rs(()=>{t.removeEventListener(e,l,i)})}let Vn=null;function Ir(e){var t=this,a=t.ownerDocument,s=e.type,n=e.composedPath?.()||[],i=n[0]||e.target;Vn=e;var l=0,o=Vn===e&&e.__root;if(o){var v=n.indexOf(o);if(v!==-1&&(t===document||t===window)){e.__root=t;return}var d=n.indexOf(t);if(d===-1)return;v<=d&&(l=v)}if(i=n[l]||e.target,i!==t){yi(e,"currentTarget",{configurable:!0,get(){return i||a}});var u=st,h=it;qt(null),_a(null);try{for(var f,p=[];i!==null;){var S=i.assignedSlot||i.parentNode||i.host||null;try{var x=i["__"+s];x!=null&&(!i.disabled||e.target===i)&&x.call(i,e)}catch(w){f?p.push(w):f=w}if(e.cancelBubble||S===t||S===null)break;i=S}if(f){for(let w of p)queueMicrotask(()=>{throw w});throw f}}finally{e.__root=t,delete e.currentTarget,qt(u),_a(h)}}}function so(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function Qr(e,t){var a=it;a.nodes===null&&(a.nodes={start:e,end:t,a:null,t:null})}function k(e,t){var a=(t&al)!==0,s=(t&rl)!==0,n,i=!e.startsWith("<!>");return()=>{n===void 0&&(n=so(i?e:"<!>"+e),a||(n=ja(n)));var l=s||Ni?document.importNode(n,!0):n.cloneNode(!0);if(a){var o=ja(l),v=l.lastChild;Qr(o,v)}else Qr(l,l);return l}}function La(e=""){{var t=Ma(e+"");return Qr(t,t),t}}function rt(){var e=document.createDocumentFragment(),t=document.createComment(""),a=Ma();return e.append(t,a),Qr(t,a),e}function b(e,t){e!==null&&e.before(t)}let tn=!0;function ie(e,t){var a=t==null?"":typeof t=="object"?t+"":t;a!==(e.__t??=e.nodeValue)&&(e.__t=a,e.nodeValue=a+"")}function Fl(e,t){return ql(e,t)}const fr=new Map;function ql(e,{target:t,anchor:a,props:s={},events:n,context:i,intro:l=!0}){kl();var o=new Set,v=h=>{for(var f=0;f<h.length;f++){var p=h[f];if(!o.has(p)){o.add(p);var S=Nl(p);t.addEventListener(p,Ir,{passive:S});var x=fr.get(p);x===void 0?(document.addEventListener(p,Ir,{passive:S}),fr.set(p,1)):fr.set(p,x+1)}}};v(Ms(Dl)),Hn.add(v);var d=void 0,u=Ml(()=>{var h=a??t.appendChild(Ma());return hl(h,{pending:()=>{}},f=>{if(i){Et({});var p=gt;p.c=i}n&&(s.$$events=n),tn=l,d=e(f,s)||{},tn=!0,i&&Tt()}),()=>{for(var f of o){t.removeEventListener(f,Ir);var p=fr.get(f);--p===0?(document.removeEventListener(f,Ir),fr.delete(f)):fr.set(f,p)}Hn.delete(v),h!==a&&h.parentNode?.removeChild(h)}});return Bl.set(d,u),d}let Bl=new WeakMap;class Ul{anchor;#e=new Map;#t=new Map;#a=new Map;#r=new Set;#l=!0;constructor(t,a=!0){this.anchor=t,this.#l=a}#n=()=>{var t=nt;if(this.#e.has(t)){var a=this.#e.get(t),s=this.#t.get(a);if(s)Sn(s),this.#r.delete(a);else{var n=this.#a.get(a);n&&(this.#t.set(a,n.effect),this.#a.delete(a),n.fragment.lastChild.remove(),this.anchor.before(n.fragment),s=n.effect)}for(const[i,l]of this.#e){if(this.#e.delete(i),i===t)break;const o=this.#a.get(l);o&&(Bt(o.effect),this.#a.delete(l))}for(const[i,l]of this.#t){if(i===a||this.#r.has(i))continue;const o=()=>{if(Array.from(this.#e.values()).includes(i)){var d=document.createDocumentFragment();Ki(l,d),d.append(Ma()),this.#a.set(i,{effect:l,fragment:d})}else Bt(l);this.#r.delete(i),this.#t.delete(i)};this.#l||!s?(this.#r.add(i),Za(l,o,!1)):o()}}};#s=t=>{this.#e.delete(t);const a=Array.from(this.#e.values());for(const[s,n]of this.#a)a.includes(s)||(Bt(n.effect),this.#a.delete(s))};ensure(t,a){var s=nt,n=Fi();if(a&&!this.#t.has(t)&&!this.#a.has(t))if(n){var i=document.createDocumentFragment(),l=Ma();i.append(l),this.#a.set(t,{effect:ra(()=>a(l)),fragment:i})}else this.#t.set(t,ra(()=>a(this.anchor)));if(this.#e.set(s,t),n){for(const[o,v]of this.#t)o===t?s.skipped_effects.delete(v):s.skipped_effects.add(v);for(const[o,v]of this.#a)o===t?s.skipped_effects.delete(v.effect):s.skipped_effects.add(v.effect);s.oncommit(this.#n),s.ondiscard(this.#s)}else this.#n()}}function C(e,t,a=!1){var s=new Ul(e),n=a?sr:0;function i(l,o){s.ensure(l,o)}xn(()=>{var l=!1;t((o,v=!0)=>{l=!0,i(v,o)}),l||i(!1,null)},n)}function Rt(e,t){return t}function Yl(e,t,a){for(var s=[],n=t.length,i,l=t.length,o=0;o<n;o++){let h=t[o];Za(h,()=>{if(i){if(i.pending.delete(h),i.done.add(h),i.pending.size===0){var f=e.outrogroups;an(Ms(i.done)),f.delete(i),f.size===0&&(e.outrogroups=null)}}else l-=1},!1)}if(l===0){var v=s.length===0&&a!==null;if(v){var d=a,u=d.parentNode;xl(u),u.append(d),e.items.clear()}an(t,!v)}else i={pending:new Set(t),done:new Set},(e.outrogroups??=new Set).add(i)}function an(e,t=!0){for(var a=0;a<e.length;a++)Bt(e[a],t)}var Wn;function bt(e,t,a,s,n,i=null){var l=e,o=new Map,v=(t&Ei)!==0;if(v){var d=e;l=d.appendChild(Ma())}var u=null,h=_t(()=>{var E=a();return Jr(E)?E:E==null?[]:Ms(E)}),f,p=!0;function S(){w.fallback=u,Hl(w,f,l,t,s),u!==null&&(f.length===0?(u.f&xa)===0?Sn(u):(u.f^=xa,Nr(u,null,l)):Za(u,()=>{u=null}))}var x=xn(()=>{f=r(h);for(var E=f.length,B=new Set,se=nt,K=Fi(),te=0;te<E;te+=1){var _e=f[te],V=s(_e,te),W=p?null:o.get(V);W?(W.v&&lr(W.v,_e),W.i&&lr(W.i,te),K&&se.skipped_effects.delete(W.e)):(W=Vl(o,p?l:Wn??=Ma(),_e,V,te,n,t,a),p||(W.e.f|=xa),o.set(V,W)),B.add(V)}if(E===0&&i&&!u&&(p?u=ra(()=>i(l)):(u=ra(()=>i(Wn??=Ma())),u.f|=xa)),!p)if(K){for(const[ne,je]of o)B.has(ne)||se.skipped_effects.add(je.e);se.oncommit(S),se.ondiscard(()=>{})}else S();r(h)}),w={effect:x,items:o,outrogroups:null,fallback:u};p=!1}function Hl(e,t,a,s,n){var i=(s&Vo)!==0,l=t.length,o=e.items,v=e.effect.first,d,u=null,h,f=[],p=[],S,x,w,E;if(i)for(E=0;E<l;E+=1)S=t[E],x=n(S,E),w=o.get(x).e,(w.f&xa)===0&&(w.nodes?.a?.measure(),(h??=new Set).add(w));for(E=0;E<l;E+=1){if(S=t[E],x=n(S,E),w=o.get(x).e,e.outrogroups!==null)for(const je of e.outrogroups)je.pending.delete(w),je.done.delete(w);if((w.f&xa)!==0)if(w.f^=xa,w===v)Nr(w,null,a);else{var B=u?u.next:v;w===e.effect.last&&(e.effect.last=w.prev),w.prev&&(w.prev.next=w.next),w.next&&(w.next.prev=w.prev),za(e,u,w),za(e,w,B),Nr(w,B,a),u=w,f=[],p=[],v=u.next;continue}if((w.f&Zt)!==0&&(Sn(w),i&&(w.nodes?.a?.unfix(),(h??=new Set).delete(w))),w!==v){if(d!==void 0&&d.has(w)){if(f.length<p.length){var se=p[0],K;u=se.prev;var te=f[0],_e=f[f.length-1];for(K=0;K<f.length;K+=1)Nr(f[K],se,a);for(K=0;K<p.length;K+=1)d.delete(p[K]);za(e,te.prev,_e.next),za(e,u,te),za(e,_e,se),v=se,u=_e,E-=1,f=[],p=[]}else d.delete(w),Nr(w,v,a),za(e,w.prev,w.next),za(e,w,u===null?e.effect.first:u.next),za(e,u,w),u=w;continue}for(f=[],p=[];v!==null&&v!==w;)(d??=new Set).add(v),p.push(v),v=v.next;if(v===null)continue}(w.f&xa)===0&&f.push(w),u=w,v=w.next}if(e.outrogroups!==null){for(const je of e.outrogroups)je.pending.size===0&&(an(Ms(je.done)),e.outrogroups?.delete(je));e.outrogroups.size===0&&(e.outrogroups=null)}if(v!==null||d!==void 0){var V=[];if(d!==void 0)for(w of d)(w.f&Zt)===0&&V.push(w);for(;v!==null;)(v.f&Zt)===0&&v!==e.fallback&&V.push(v),v=v.next;var W=V.length;if(W>0){var ne=(s&Ei)!==0&&l===0?a:null;if(i){for(E=0;E<W;E+=1)V[E].nodes?.a?.measure();for(E=0;E<W;E+=1)V[E].nodes?.a?.fix()}Yl(e,V,ne)}}i&&dr(()=>{if(h!==void 0)for(w of h)w.nodes?.a?.apply()})}function Vl(e,t,a,s,n,i,l,o){var v=(l&Yo)!==0?(l&Wo)===0?T(a,!1,!1):or(a):null,d=(l&Ho)!==0?or(n):null;return{v,i:d,e:ra(()=>(i(t,v??a,d??n,o),()=>{e.delete(s)}))}}function Nr(e,t,a){if(e.nodes)for(var s=e.nodes.start,n=e.nodes.end,i=t&&(t.f&xa)===0?t.nodes.start:a;s!==null;){var l=as(s);if(i.before(s),s===n)return;s=l}}function za(e,t,a){t===null?e.effect.first=a:t.next=a,a===null?e.effect.last=t:a.prev=t}function re(e,t,a=!1,s=!1,n=!1){var i=e,l="";de(()=>{var o=it;if(l!==(l=t()??"")&&(o.nodes!==null&&(Vi(o.nodes.start,o.nodes.end),o.nodes=null),l!=="")){var v=l+"";a?v=`<svg>${v}</svg>`:s&&(v=`<math>${v}</math>`);var d=so(v);if((a||s)&&(d=ja(d)),Qr(ja(d),d.lastChild),a||s)for(;ja(d);)i.before(ja(d));else i.before(d)}})}function Dr(e,t,a,s,n){var i=t.$$slots?.[a],l=!1;i===!0&&(i=t[a==="default"?"children":a],l=!0),i===void 0||i(e,l?()=>s:s)}const Wl=()=>performance.now(),ka={tick:e=>requestAnimationFrame(e),now:()=>Wl(),tasks:new Set};function no(){const e=ka.now();ka.tasks.forEach(t=>{t.c(e)||(ka.tasks.delete(t),t.f())}),ka.tasks.size!==0&&ka.tick(no)}function Ql(e){let t;return ka.tasks.size===0&&ka.tick(no),{promise:new Promise(a=>{ka.tasks.add(t={c:e,f:a})}),abort(){ka.tasks.delete(t)}}}function os(e,t){vr(()=>{e.dispatchEvent(new CustomEvent(t))})}function Xl(e){if(e==="float")return"cssFloat";if(e==="offset")return"cssOffset";if(e.startsWith("--"))return e;const t=e.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(a=>a[0].toUpperCase()+a.slice(1)).join("")}function Qn(e){const t={},a=e.split(";");for(const s of a){const[n,i]=s.split(":");if(!n||i===void 0)break;const l=Xl(n.trim());t[l]=i.trim()}return t}const Kl=e=>e;function vt(e,t,a,s){var n=(e&Jo)!==0,i=(e&el)!==0,l=n&&i,o=(e&tl)!==0,v=l?"both":n?"in":"out",d,u=t.inert,h=t.style.overflow,f,p;function S(){return vr(()=>d??=a()(t,s?.()??{},{direction:v}))}var x={is_global:o,in(){if(t.inert=u,!n){p?.abort(),p?.reset?.();return}i||f?.abort(),os(t,"introstart"),f=rn(t,S(),p,1,()=>{os(t,"introend"),f?.abort(),f=d=void 0,t.style.overflow=h})},out(se){if(!i){se?.(),d=void 0;return}t.inert=!0,os(t,"outrostart"),p=rn(t,S(),f,0,()=>{os(t,"outroend"),se?.()})},stop:()=>{f?.abort(),p?.abort()}},w=it;if((w.nodes.t??=[]).push(x),n&&tn){var E=o;if(!E){for(var B=w.parent;B&&(B.f&sr)!==0;)for(;(B=B.parent)&&(B.f&ma)===0;);E=!B||(B.f&Ps)!==0}E&&Ft(()=>{m(()=>x.in())})}}function rn(e,t,a,s,n){var i=s===1;if(Ao(t)){var l,o=!1;return dr(()=>{if(!o){var w=t({direction:i?"in":"out"});l=rn(e,w,a,s,n)}}),{abort:()=>{o=!0,l?.abort()},deactivate:()=>l.deactivate(),reset:()=>l.reset(),t:()=>l.t()}}if(a?.deactivate(),!t?.duration)return n(),{abort:Xt,deactivate:Xt,reset:Xt,t:()=>s};const{delay:v=0,css:d,tick:u,easing:h=Kl}=t;var f=[];if(i&&a===void 0&&(u&&u(0,1),d)){var p=Qn(d(0,1));f.push(p,p)}var S=()=>1-s,x=e.animate(f,{duration:v,fill:"forwards"});return x.onfinish=()=>{x.cancel();var w=a?.t()??1-s;a?.abort();var E=s-w,B=t.duration*Math.abs(E),se=[];if(B>0){var K=!1;if(d)for(var te=Math.ceil(B/16.666666666666668),_e=0;_e<=te;_e+=1){var V=w+E*h(_e/te),W=Qn(d(V,1-V));se.push(W),K||=W.overflow==="hidden"}K&&(e.style.overflow="hidden"),S=()=>{var ne=x.currentTime;return w+E*h(ne/B)},u&&Ql(()=>{if(x.playState!=="running")return!1;var ne=S();return u(ne,1-ne),!0})}x=e.animate(se,{duration:B,fill:"forwards"}),x.onfinish=()=>{S=()=>s,u?.(s,1-s),n()}},{abort:()=>{x&&(x.cancel(),x.effect=null,x.onfinish=Xt)},deactivate:()=>{n=Xt},reset:()=>{s===0&&u?.(1,0)},t:()=>S()}}function En(e,t,a){Ft(()=>{var s=m(()=>t(e,a?.())||{});if(a&&s?.update){var n=!1,i={};Pr(()=>{var l=a();N(l),n&&wn(i,l)&&(i=l,s.update(l))}),n=!0}if(s?.destroy)return()=>s.destroy()})}const Xn=[...` 	
\r\fÂ \v\uFEFF`];function Gl(e,t,a){var s=e==null?"":""+e;if(t&&(s=s?s+" "+t:t),a){for(var n in a)if(a[n])s=s?s+" "+n:n;else if(s.length)for(var i=n.length,l=0;(l=s.indexOf(n,l))>=0;){var o=l+i;(l===0||Xn.includes(s[l-1]))&&(o===s.length||Xn.includes(s[o]))?s=(l===0?"":s.substring(0,l))+s.substring(o+1):l=o}}return s===""?null:s}function Kn(e,t=!1){var a=t?" !important;":";",s="";for(var n in e){var i=e[n];i!=null&&i!==""&&(s+=" "+n+": "+i+a)}return s}function Os(e){return e[0]!=="-"||e[1]!=="-"?e.toLowerCase():e}function Zl(e,t){if(t){var a="",s,n;if(Array.isArray(t)?(s=t[0],n=t[1]):s=t,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var i=!1,l=0,o=!1,v=[];s&&v.push(...Object.keys(s).map(Os)),n&&v.push(...Object.keys(n).map(Os));var d=0,u=-1;const x=e.length;for(var h=0;h<x;h++){var f=e[h];if(o?f==="/"&&e[h-1]==="*"&&(o=!1):i?i===f&&(i=!1):f==="/"&&e[h+1]==="*"?o=!0:f==='"'||f==="'"?i=f:f==="("?l++:f===")"&&l--,!o&&i===!1&&l===0){if(f===":"&&u===-1)u=h;else if(f===";"||h===x-1){if(u!==-1){var p=Os(e.substring(d,u).trim());if(!v.includes(p)){f!==";"&&h++;var S=e.substring(d,h).trim();a+=" "+S+";"}}d=h+1,u=-1}}}}return s&&(a+=Kn(s)),n&&(a+=Kn(n,!0)),a=a.trim(),a===""?null:a}return e==null?null:String(e)}function Ge(e,t,a,s,n,i){var l=e.__className;if(l!==a||l===void 0){var o=Gl(a,s,i);o==null?e.removeAttribute("class"):e.className=o,e.__className=a}else if(i&&n!==i)for(var v in i){var d=!!i[v];(n==null||d!==!!n[v])&&e.classList.toggle(v,d)}return i}function Fs(e,t={},a,s){for(var n in a){var i=a[n];t[n]!==i&&(a[n]==null?e.style.removeProperty(n):e.style.setProperty(n,i,s))}}function pt(e,t,a,s){var n=e.__style;if(n!==t){var i=Zl(t,s);i==null?e.removeAttribute("style"):e.style.cssText=i,e.__style=t}else s&&(Array.isArray(s)?(Fs(e,a?.[0],s[0]),Fs(e,a?.[1],s[1],"important")):Fs(e,a,s));return s}function io(e,t,a=!1){if(e.multiple){if(t==null)return;if(!Jr(t))return nl();for(var s of e.options)s.selected=t.includes(Br(s));return}for(s of e.options){var n=Br(s);if(wl(n,t)){s.selected=!0;return}}(!a||t!==void 0)&&(e.selectedIndex=-1)}function Jl(e){var t=new MutationObserver(()=>{io(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),rs(()=>{t.disconnect()})}function ec(e,t,a=t){var s=new WeakSet,n=!0;qi(e,"change",i=>{var l=i?"[selected]":":checked",o;if(e.multiple)o=[].map.call(e.querySelectorAll(l),Br);else{var v=e.querySelector(l)??e.querySelector("option:not([disabled])");o=v&&Br(v)}a(o),nt!==null&&s.add(nt)}),Ft(()=>{var i=t();if(e===document.activeElement){var l=Or??nt;if(s.has(l))return}if(io(e,i,n),n&&i===void 0){var o=e.querySelector(":checked");o!==null&&(i=Br(o),a(i))}e.__value=i,n=!1}),Jl(e)}function Br(e){return"__value"in e?e.__value:e.value}const tc=Symbol("is custom element"),ac=Symbol("is html");function oo(e,t){var a=lo(e);a.value===(a.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!=="PROGRESS")||(e.value=t??"")}function Yt(e,t,a,s){var n=lo(e);n[t]!==(n[t]=a)&&(t==="loading"&&(e[zo]=a),a==null?e.removeAttribute(t):typeof a!="string"&&rc(e).includes(t)?e[t]=a:e.setAttribute(t,a))}function lo(e){return e.__attributes??={[tc]:e.nodeName.includes("-"),[ac]:e.namespaceURI===sl}}var Gn=new Map;function rc(e){var t=e.getAttribute("is")||e.nodeName,a=Gn.get(t);if(a)return a;Gn.set(t,a=[]);for(var s,n=e,i=Element.prototype;i!==n;){s=wi(n);for(var l in s)s[l].set&&a.push(l);n=_n(n)}return a}function tr(e,t,a=t){var s=new WeakSet;qi(e,"input",async n=>{var i=n?e.defaultValue:e.value;if(i=qs(e)?Bs(i):i,a(i),nt!==null&&s.add(nt),await kr(),i!==(i=t())){var l=e.selectionStart,o=e.selectionEnd,v=e.value.length;if(e.value=i??"",o!==null){var d=e.value.length;l===o&&o===v&&d>v?(e.selectionStart=d,e.selectionEnd=d):(e.selectionStart=l,e.selectionEnd=Math.min(o,d))}}}),m(t)==null&&e.value&&(a(qs(e)?Bs(e.value):e.value),nt!==null&&s.add(nt)),Pr(()=>{var n=t();if(e===document.activeElement){var i=Or??nt;if(s.has(i))return}qs(e)&&n===Bs(e.value)||e.type==="date"&&!n&&!e.value||n!==e.value&&(e.value=n??"")})}function qs(e){var t=e.type;return t==="number"||t==="range"}function Bs(e){return e===""?null:+e}class Tn{#e=new WeakMap;#t;#a;static entries=new WeakMap;constructor(t){this.#a=t}observe(t,a){var s=this.#e.get(t)||new Set;return s.add(a),this.#e.set(t,s),this.#r().observe(t,this.#a),()=>{var n=this.#e.get(t);n.delete(a),n.size===0&&(this.#e.delete(t),this.#t.unobserve(t))}}#r(){return this.#t??(this.#t=new ResizeObserver(t=>{for(var a of t){Tn.entries.set(a.target,a);for(var s of this.#e.get(a.target)||[])s(a)}}))}}var sc=new Tn({box:"border-box"});function Zn(e,t,a){var s=sc.observe(e,()=>a(e[t]));Ft(()=>(m(()=>a(e[t])),s))}function Jn(e,t){return e===t||e?.[$a]===t}function Ua(e={},t,a,s){return Ft(()=>{var n,i;return Pr(()=>{n=i,i=[],m(()=>{e!==a(...i)&&(t(e,...i),n&&Jn(a(...n),e)&&t(null,...n))})}),()=>{dr(()=>{i&&Jn(a(...i),e)&&t(null,...i)})}}),e}function ei(e,t){El(window,["resize"],()=>vr(()=>t(window[e])))}function Gt(e){return function(...t){var a=t[0];return a.stopPropagation(),e?.apply(this,t)}}function Ct(e=!1){const t=gt,a=t.l.u;if(!a)return;let s=()=>N(t.s);if(e){let n=0,i={};const l=ts(()=>{let o=!1;const v=t.s;for(const d in v)v[d]!==i[d]&&(i[d]=v[d],o=!0);return o&&n++,n});s=()=>r(l)}a.b.length&&$l(()=>{ti(t,s),_s(a.b)}),Js(()=>{const n=m(()=>a.m.map(Co));return()=>{for(const i of n)typeof i=="function"&&i()}}),a.a.length&&Js(()=>{ti(t,s),_s(a.a)})}function ti(e,t){if(e.l.s)for(const a of e.l.s)r(a);t()}function Xr(e,t){var a=e.$$events?.[t.type],s=Jr(a)?a.slice():a==null?[]:[a];for(var n of s)n.call(this,t)}function $n(e,t,a){if(e==null)return t(void 0),a&&a(void 0),Xt;const s=m(()=>e.subscribe(t,a));return s.unsubscribe?()=>s.unsubscribe():s}const hr=[];function nc(e,t){return{subscribe:Xe(e,t).subscribe}}function Xe(e,t=Xt){let a=null;const s=new Set;function n(o){if(wn(e,o)&&(e=o,a)){const v=!hr.length;for(const d of s)d[1](),hr.push(d,e);if(v){for(let d=0;d<hr.length;d+=2)hr[d][0](hr[d+1]);hr.length=0}}}function i(o){n(o(e))}function l(o,v=Xt){const d=[o,v];return s.add(d),s.size===1&&(a=t(n,i)||Xt),o(e),()=>{s.delete(d),s.size===0&&a&&(a(),a=null)}}return{set:n,update:i,subscribe:l}}function co(e,t,a){const s=!Array.isArray(e),n=s?[e]:e;if(!n.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const i=t.length<2;return nc(a,(l,o)=>{let v=!1;const d=[];let u=0,h=Xt;const f=()=>{if(u)return;h();const S=t(s?d[0]:d,l,o);i?l(S):h=typeof S=="function"?S:Xt},p=n.map((S,x)=>$n(S,w=>{d[x]=w,u&=~(1<<x),v&&f()},()=>{u|=1<<x}));return v=!0,f(),function(){_s(p),h(),v=!1}})}function et(e){let t;return $n(e,a=>t=a)(),t}let ls=!1,sn=Symbol();function Ce(e,t,a){const s=a[t]??={store:null,source:T(void 0),unsubscribe:Xt};if(s.store!==e&&!(sn in a))if(s.unsubscribe(),s.store=e??null,e==null)s.source.v=void 0,s.unsubscribe=Xt;else{var n=!0;s.unsubscribe=$n(e,i=>{n?s.source.v=i:g(s.source,i)}),n=!1}return e&&sn in a?et(e):r(s.source)}function ai(e,t){return e.set(t),t}function jt(){const e={};function t(){rs(()=>{for(var a in e)e[a].unsubscribe();yi(e,sn,{enumerable:!1,value:!0})})}return[e,t]}function ic(e,t,a){return e.set(a),t}function oc(e){var t=ls;try{return ls=!1,[e(),ls]}finally{ls=t}}function wt(e,t,a,s){var n=!Cr||(a&Xo)!==0,i=(a&Go)!==0,l=(a&Zo)!==0,o=s,v=!0,d=()=>(v&&(v=!1,o=l?m(s):s),o),u;if(i){var h=$a in e||Lo in e;u=wr(e,t)?.set??(h&&t in e?se=>e[t]=se:void 0)}var f,p=!1;i?[f,p]=oc(()=>e[t]):f=e[t],f===void 0&&s!==void 0&&(f=d(),u&&(n&&Oo(),u(f)));var S;if(n?S=()=>{var se=e[t];return se===void 0?d():(v=!0,se)}:S=()=>{var se=e[t];return se!==void 0&&(o=void 0),se===void 0?o:se},n&&(a&Ko)===0)return S;if(u){var x=e.$$legacy;return(function(se,K){return arguments.length>0?((!n||!K||x||p)&&u(K?S():se),se):S()})}var w=!1,E=((a&Qo)!==0?ts:_t)(()=>(w=!1,S()));i&&r(E);var B=it;return(function(se,K){if(arguments.length>0){const te=K?r(E):n&&i?br(se):se;return g(E,te),w=!0,o!==void 0&&(o=te),se}return ur&&w||(B.f&Ta)!==0?E.v:r(E)})}function Ya(e){gt===null&&yn(),Cr&&gt.l!==null?cc(gt).m.push(e):Js(()=>{const t=m(e);if(typeof t=="function")return t})}function vo(e){gt===null&&yn(),Ya(()=>()=>m(e))}function lc(e,t,{bubbles:a=!1,cancelable:s=!1}={}){return new CustomEvent(e,{detail:t,bubbles:a,cancelable:s})}function Mn(){const e=gt;return e===null&&yn(),(t,a,s)=>{const n=e.s.$$events?.[t];if(n){const i=Jr(n)?n.slice():[n],l=lc(t,a,s);for(const o of i)o.call(e.x,l);return!l.defaultPrevented}return!0}}function cc(e){var t=e.l;return t.u??={a:[],b:[],m:[]}}const dc="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(dc);ll();const vc=e=>e;function uo(e){const t=e-1;return t*t*t+1}function ri(e){const t=typeof e=="string"&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[e,"px"]}function yt(e,{delay:t=0,duration:a=400,easing:s=vc}={}){const n=+getComputedStyle(e).opacity;return{delay:t,duration:a,easing:s,css:i=>`opacity: ${i*n}`}}function fo(e,{delay:t=0,duration:a=400,easing:s=uo,x:n=0,y:i=0,opacity:l=0}={}){const o=getComputedStyle(e),v=+o.opacity,d=o.transform==="none"?"":o.transform,u=v*(1-l),[h,f]=ri(n),[p,S]=ri(i);return{delay:t,duration:a,easing:s,css:(x,w)=>`
			transform: ${d} translate(${(1-x)*h}${f}, ${(1-x)*p}${S});
			opacity: ${v-u*w}`}}function An(e,{delay:t=0,duration:a=400,easing:s=uo,start:n=0,opacity:i=0}={}){const l=getComputedStyle(e),o=+l.opacity,v=l.transform==="none"?"":l.transform,d=1-n,u=o*(1-i);return{delay:t,duration:a,easing:s,css:(h,f)=>`
			transform: ${v} scale(${1-d*f});
			opacity: ${o-u*f}
		`}}const uc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-arrows-shuffle-2"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 4l3 3l-3 3" /><path d="M18 20l3 -3l-3 -3" /><path d="M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5" /><path d="M3 17h3a5 5 0 0 0 5 -5a5 5 0 0 1 5 -5h5" /></svg>',fc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-deezer"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 16.5h2v.5h-2z" /><path d="M8 16.5h2.5v.5h-2.5z" /><path d="M16 17h-2.5v-.5h2.5z" /><path d="M21.5 17h-2.5v-.5h2.5z" /><path d="M21.5 13h-2.5v.5h2.5z" /><path d="M21.5 9.5h-2.5v.5h2.5z" /><path d="M21.5 6h-2.5v.5h2.5z" /><path d="M16 13h-2.5v.5h2.5z" /><path d="M8 13.5h2.5v-.5h-2.5z" /><path d="M8 9.5h2.5v.5h-2.5z" /></svg>',hc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-compact-down"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 11l8 3l8 -3" /></svg>',pc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-compact-left"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M13 20l-3 -8l3 -8" /></svg>',gc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-left"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 6l-6 6l6 6" /></svg>',si='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-disc"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0" /><path d="M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M7 12a5 5 0 0 1 5 -5" /><path d="M12 17a5 5 0 0 0 5 -5" /></svg>',_c='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-grip-horizontal"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M5 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M12 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M12 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M19 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M19 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /></svg>',mc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-heart"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M19.5 12.572l-7.5 7.428l-7.5 -7.428a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572" /></svg>',bc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-heart"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6.979 3.074a6 6 0 0 1 4.988 1.425l.037 .033l.034 -.03a6 6 0 0 1 4.733 -1.44l.246 .036a6 6 0 0 1 3.364 10.008l-.18 .185l-.048 .041l-7.45 7.379a1 1 0 0 1 -1.313 .082l-.094 -.082l-7.493 -7.422a6 6 0 0 1 3.176 -10.215z" /></svg>',yc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-menu-2"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 6l16 0" /><path d="M4 12l16 0" /><path d="M4 18l16 0" /></svg>',Us='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-music"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 17a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /><path d="M13 17a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /><path d="M9 17v-13h10v13" /><path d="M9 8h10" /></svg>',wc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-pause"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z" /><path d="M17 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z" /></svg>',kc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-player-play"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 4v16l13 -8z" /></svg>',xc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-play"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 4v16a1 1 0 0 0 1.524 .852l13 -8a1 1 0 0 0 0 -1.704l-13 -8a1 1 0 0 0 -1.524 .852z" /></svg>',Sc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-skip-back"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M19.496 4.136l-12 7a1 1 0 0 0 0 1.728l12 7a1 1 0 0 0 1.504 -.864v-14a1 1 0 0 0 -1.504 -.864z" /><path d="M4 4a1 1 0 0 1 .993 .883l.007 .117v14a1 1 0 0 1 -1.993 .117l-.007 -.117v-14a1 1 0 0 1 1 -1z" /></svg>',Ec='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-skip-forward"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 5v14a1 1 0 0 0 1.504 .864l12 -7a1 1 0 0 0 0 -1.728l-12 -7a1 1 0 0 0 -1.504 .864z" /><path d="M20 4a1 1 0 0 1 .993 .883l.007 .117v14a1 1 0 0 1 -1.993 .117l-.007 -.117v-14a1 1 0 0 1 1 -1z" /></svg>',Tc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-playlist"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0" /><path d="M17 17v-13h4" /><path d="M13 5h-10" /><path d="M3 9l10 0" /><path d="M9 13h-6" /></svg>',$c='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-radio"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3l-9.371 3.749a1 1 0 0 0 -.629 .928v11.323a1 1 0 0 0 1 1h14a1 1 0 0 0 1 -1v-11a1 1 0 0 0 -1 -1h-14.5" /><path d="M4 12h16" /><path d="M7 12v-2" /><path d="M17 16v.01" /><path d="M13 16v.01" /></svg>',Mc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-refresh"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4" /><path d="M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4" /></svg>',Ac='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-repeat"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 12v-3a3 3 0 0 1 3 -3h13m-3 -3l3 3l-3 3" /><path d="M20 12v3a3 3 0 0 1 -3 3h-13m3 3l-3 -3l3 -3" /></svg>',Cc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-search"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0" /><path d="M21 21l-6 -6" /></svg>',Pc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-settings"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z" /><path d="M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /></svg>',Lc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-trash"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 7l16 0" /><path d="M10 11l0 6" /><path d="M14 11l0 6" /><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12" /><path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3" /></svg>',zc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 8a5 5 0 0 1 0 8" /><path d="M17.7 5a9 9 0 0 1 0 14" /><path d="M6 15h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l3.5 -4.5a.8 .8 0 0 1 1.5 .5v14a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5" /></svg>',Rc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume-2"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 8a5 5 0 0 1 0 8" /><path d="M6 15h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l3.5 -4.5a.8 .8 0 0 1 1.5 .5v14a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5" /></svg>',jc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume-3"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 15h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l3.5 -4.5a.8 .8 0 0 1 1.5 .5v14a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5" /><path d="M16 10l4 4m0 -4l-4 4" /></svg>',Ic='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume-off"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 8a5 5 0 0 1 1.912 4.934m-1.377 2.602a5 5 0 0 1 -.535 .464" /><path d="M17.7 5a9 9 0 0 1 2.362 11.086m-1.676 2.299a9 9 0 0 1 -.686 .615" /><path d="M9.069 5.054l.431 -.554a.8 .8 0 0 1 1.5 .5v2m0 4v8a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l1.294 -1.664" /><path d="M3 3l18 18" /></svg>',Nc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-x"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 6l-12 12" /><path d="M6 6l12 12" /></svg>',Dc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-device-floppy"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2" /><path d="M12 14m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0" /><path d="M14 4l0 4l-6 0l0 -4" /></svg>',Oc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-file-pencil"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3v4a1 1 0 0 0 1 1h4" /><path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z" /><path d="M10 18l5 -5a1.414 1.414 0 0 0 -2 -2l-5 5v2h2z" /></svg>',ni='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-plus"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 5l0 14" /><path d="M5 12l14 0" /></svg>',Fc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-circle-check"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0" /><path d="M9 12l2 2l4 -4" /></svg>',qc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-dots"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /></svg>',Bc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-sort-descending"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 6l9 0" /><path d="M4 12l7 0" /><path d="M4 18l7 0" /><path d="M15 15l3 3l3 -3" /><path d="M18 6l0 12" /></svg>',Uc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-sort-ascending"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 6l7 0" /><path d="M4 12l7 0" /><path d="M4 18l9 0" /><path d="M15 9l3 -3l3 3" /><path d="M18 6l0 12" /></svg>',Yc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-yandex"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 20v-16h-2a4 4 0 0 0 -4 4v1a4 4 0 0 0 4 4h2" /><path d="M9 20l3 -7" /></svg>',y={ARTISTS:Us,ALBUMS:si,GENRES:Us,PLAYLISTS:Tc,RADIO:$c,SEARCH:Cc,PLAY:xc,PLAY_OUTLINE:kc,PAUSE:wc,PREVIOUS:Sc,NEXT:Ec,SHUFFLE:uc,REPEAT:Ac,VOLUME_FULL:zc,VOLUME_MEDIUM:Rc,VOLUME_MUTE:jc,VOLUME_OFF:Ic,HEART:mc,HEART_FILLED:bc,SYNC:Mc,SETTINGS:Pc,CLOSE:Nc,MENU:yc,BACK:gc,BACK_COMPACT:pc,CHEVRON_DOWN:hc,DRAG_HANDLE:_c,REMOVE:Lc,DEEZER:fc,SAVE:Dc,EDIT:Oc,ADD:ni,ACCEPT:Fc,DOTS:qc,ADD_TO_PLAYLIST:ni,ALBUM_LINK:si,ARTIST_LINK:Us,SORT_DESC:Bc,SORT_ASC:Uc,YANDEX:Yc};function Tr(e){if(!e||!e.image)return null;if(e.image.startsWith("http"))return e.image;let t="";return e.image==="local"?t=`${e.name}.jpg`:t=e.image,`/imagesw/radio-logos/thumbs/${encodeURIComponent(t)}`}function ii(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}const nn=[{id:"default",label:"Default (Moode Dark)",colors:{"--c-white-10":"rgba(255, 255, 255, 0.1)","--c-white-20":"rgba(255, 255, 255, 0.2)","--c-white-30":"rgba(255, 255, 255, 0.3)","--c-white-50":"rgba(255, 255, 255, 0.5)","--c-white-60":"rgba(255, 255, 255, 0.6)","--c-white-90":"rgba(255, 255, 255, 0.9)","--c-black-20":"rgba(0, 0, 0, 0.2)","--c-black-50":"rgba(0, 0, 0, 0.5)","--c-black-70":"rgba(0, 0, 0, 0.7)","--c-black-80":"rgba(0, 0, 0, 0.8)","--c-black-90":"rgba(0, 0, 0, 0.9)","--c-accent":"#fa2d48","--c-accent-hover":"#ff4d65","--c-text-primary":"#ffffff","--c-text-secondary":"rgba(255, 255, 255, 0.6)","--c-text-muted":"#888888","--c-text-inverse":"#000000","--c-bg-app":"#000000","--c-bg-main":"#121212","--c-bg-sidebar":"#000000","--c-bg-card":"#1a1a1a","--c-bg-placeholder":"rgba(255, 255, 255, 0.1)","--c-bg-glass":"rgba(18, 18, 18, 0.95)","--c-bg-toast":"#333333","--c-heart":"#ff4444","--c-error":"#ff4444","--c-surface-hover":"rgba(255, 255, 255, 0.1)","--c-surface-active":"rgba(255, 255, 255, 0.2)","--c-surface-input":"#1a1a1a","--c-surface-input-focus":"rgba(255, 255, 255, 0.1)","--c-surface-button":"rgba(255, 255, 255, 0.1)","--c-surface-button-hover":"rgba(255, 255, 255, 0.1)","--c-surface-drag-phantom":"#1a1a1a","--c-surface-drag-land":"rgba(255, 255, 255, 0.1)","--c-rail-bg":"rgba(255, 255, 255, 0.2)","--c-rail-bg-hover":"rgba(255, 255, 255, 0.3)","--c-skeleton-base":"rgba(255, 255, 255, 0.1)","--c-border":"rgba(255, 255, 255, 0.1)","--c-border-dim":"rgba(255, 255, 255, 0.1)","--c-border-bright":"rgba(255, 255, 255, 0.2)","--c-border-dashed":"rgba(255, 255, 255, 0.2)","--c-border-dashed-hover":"rgba(255, 255, 255, 0.5)","--c-overlay-dim":"rgba(0, 0, 0, 0.5)","--c-overlay-backdrop":"rgba(0, 0, 0, 0.8)","--c-shadow-card":"rgba(0, 0, 0, 0.3)","--c-shadow-popover":"rgba(0, 0, 0, 0.5)","--c-shadow-header":"rgba(0, 0, 0, 0.5)","--c-shadow-phantom":"rgba(0, 0, 0, 0.7)","--c-shadow-glow-accent":"rgba(250, 45, 72, 0.5)","--c-icon-idle":"#9ca3af","--c-icon-hover":"#ffffff","--c-icon-faint":"rgba(255, 255, 255, 0.5)","--icon-stroke-width":"1.5px","--header-height":"64px","--mini-player-height":"90px","--sidebar-width":"260px","--radius-sm":"4px","--radius-md":"8px","--radius-lg":"12px","--radius-xl":"20px","--radius-full":"9999px","--z-base":"1","--z-dock":"1000","--z-modal":"2000","--z-toast":"3000","--z-drag-item":"9999","--trans-fast":"0.2s ease","--trans-smooth":"0.3s cubic-bezier(0.2, 0.8, 0.2, 1)","--c-pl-0":"#fa2d48","--c-pl-1":"#2d7afa","--c-pl-2":"#2dfa85","--c-pl-3":"#faac2d","--c-pl-4":"#b82dfa","--c-pl-5":"#2dfaf3"}},{id:"gruvbox",label:"Gruvbox Dark",colors:{"--c-white-10":"rgba(251, 241, 199, 0.1)","--c-white-20":"rgba(251, 241, 199, 0.2)","--c-white-30":"rgba(251, 241, 199, 0.3)","--c-white-50":"rgba(251, 241, 199, 0.5)","--c-white-60":"rgba(251, 241, 199, 0.6)","--c-white-90":"rgba(251, 241, 199, 0.9)","--c-black-20":"rgba(40, 40, 40, 0.2)","--c-black-50":"rgba(40, 40, 40, 0.5)","--c-black-70":"rgba(40, 40, 40, 0.7)","--c-black-80":"rgba(40, 40, 40, 0.8)","--c-black-90":"rgba(40, 40, 40, 0.9)","--c-accent":"#d65d0e","--c-accent-hover":"#fe8019","--c-text-primary":"#fbf1c7","--c-text-secondary":"#ebdbb2","--c-text-muted":"#928374","--c-text-inverse":"#282828","--c-bg-app":"#282828","--c-bg-main":"#282828","--c-bg-sidebar":"#282828","--c-bg-card":"#3c3836","--c-bg-placeholder":"#504945","--c-bg-glass":"rgba(40, 40, 40, 0.98)","--c-bg-toast":"#32302f","--c-heart":"#fb4934","--c-error":"#cc241d","--c-surface-hover":"#3c3836","--c-surface-active":"#504945","--c-surface-input":"#3c3836","--c-surface-input-focus":"#504945","--c-surface-button":"rgba(251, 241, 199, 0.1)","--c-surface-button-hover":"rgba(251, 241, 199, 0.2)","--c-surface-drag-phantom":"#504945","--c-surface-drag-land":"rgba(251, 241, 199, 0.1)","--c-rail-bg":"#504945","--c-rail-bg-hover":"#665c54","--c-skeleton-base":"#3c3836","--c-border":"#504945","--c-border-dim":"#3c3836","--c-border-bright":"#665c54","--c-border-dashed":"rgba(168, 153, 132, 0.2)","--c-border-dashed-hover":"rgba(168, 153, 132, 0.5)","--c-overlay-dim":"rgba(40, 40, 40, 0.6)","--c-overlay-backdrop":"rgba(29, 32, 33, 0.8)","--c-shadow-card":"rgba(0, 0, 0, 0.3)","--c-shadow-popover":"rgba(0, 0, 0, 0.5)","--c-shadow-header":"rgba(0, 0, 0, 0.2)","--c-shadow-phantom":"rgba(0, 0, 0, 0.5)","--c-shadow-glow-accent":"rgba(214, 93, 14, 0.3)","--c-icon-idle":"#a89984","--c-icon-hover":"#fbf1c7","--c-icon-faint":"#504945","--icon-stroke-width":"1.5px","--header-height":"64px","--mini-player-height":"90px","--sidebar-width":"260px","--radius-sm":"4px","--radius-md":"8px","--radius-lg":"12px","--radius-xl":"16px","--radius-full":"9999px","--z-base":"1","--z-dock":"1000","--z-modal":"2000","--z-toast":"3000","--z-drag-item":"9999","--trans-fast":"0.2s ease","--trans-smooth":"0.3s cubic-bezier(0.2, 0.8, 0.2, 1)","--c-pl-0":"#cc241d","--c-pl-1":"#458588","--c-pl-2":"#a6e3a1","--c-pl-3":"#d65d0e","--c-pl-4":"#b16286","--c-pl-5":"#fabd2f"}}];function Hc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ys={exports:{}},Hs={exports:{}},oi;function Vc(){return oi||(oi=1,(function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t={rotl:function(a,s){return a<<s|a>>>32-s},rotr:function(a,s){return a<<32-s|a>>>s},endian:function(a){if(a.constructor==Number)return t.rotl(a,8)&16711935|t.rotl(a,24)&4278255360;for(var s=0;s<a.length;s++)a[s]=t.endian(a[s]);return a},randomBytes:function(a){for(var s=[];a>0;a--)s.push(Math.floor(Math.random()*256));return s},bytesToWords:function(a){for(var s=[],n=0,i=0;n<a.length;n++,i+=8)s[i>>>5]|=a[n]<<24-i%32;return s},wordsToBytes:function(a){for(var s=[],n=0;n<a.length*32;n+=8)s.push(a[n>>>5]>>>24-n%32&255);return s},bytesToHex:function(a){for(var s=[],n=0;n<a.length;n++)s.push((a[n]>>>4).toString(16)),s.push((a[n]&15).toString(16));return s.join("")},hexToBytes:function(a){for(var s=[],n=0;n<a.length;n+=2)s.push(parseInt(a.substr(n,2),16));return s},bytesToBase64:function(a){for(var s=[],n=0;n<a.length;n+=3)for(var i=a[n]<<16|a[n+1]<<8|a[n+2],l=0;l<4;l++)n*8+l*6<=a.length*8?s.push(e.charAt(i>>>6*(3-l)&63)):s.push("=");return s.join("")},base64ToBytes:function(a){a=a.replace(/[^A-Z0-9+\/]/ig,"");for(var s=[],n=0,i=0;n<a.length;i=++n%4)i!=0&&s.push((e.indexOf(a.charAt(n-1))&Math.pow(2,-2*i+8)-1)<<i*2|e.indexOf(a.charAt(n))>>>6-i*2);return s}};Hs.exports=t})()),Hs.exports}var Vs,li;function ci(){if(li)return Vs;li=1;var e={utf8:{stringToBytes:function(t){return e.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(e.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var a=[],s=0;s<t.length;s++)a.push(t.charCodeAt(s)&255);return a},bytesToString:function(t){for(var a=[],s=0;s<t.length;s++)a.push(String.fromCharCode(t[s]));return a.join("")}}};return Vs=e,Vs}var Ws,di;function Wc(){if(di)return Ws;di=1,Ws=function(a){return a!=null&&(e(a)||t(a)||!!a._isBuffer)};function e(a){return!!a.constructor&&typeof a.constructor.isBuffer=="function"&&a.constructor.isBuffer(a)}function t(a){return typeof a.readFloatLE=="function"&&typeof a.slice=="function"&&e(a.slice(0,0))}return Ws}var vi;function Qc(){return vi||(vi=1,(function(){var e=Vc(),t=ci().utf8,a=Wc(),s=ci().bin,n=function(i,l){i.constructor==String?l&&l.encoding==="binary"?i=s.stringToBytes(i):i=t.stringToBytes(i):a(i)?i=Array.prototype.slice.call(i,0):!Array.isArray(i)&&i.constructor!==Uint8Array&&(i=i.toString());for(var o=e.bytesToWords(i),v=i.length*8,d=1732584193,u=-271733879,h=-1732584194,f=271733878,p=0;p<o.length;p++)o[p]=(o[p]<<8|o[p]>>>24)&16711935|(o[p]<<24|o[p]>>>8)&4278255360;o[v>>>5]|=128<<v%32,o[(v+64>>>9<<4)+14]=v;for(var S=n._ff,x=n._gg,w=n._hh,E=n._ii,p=0;p<o.length;p+=16){var B=d,se=u,K=h,te=f;d=S(d,u,h,f,o[p+0],7,-680876936),f=S(f,d,u,h,o[p+1],12,-389564586),h=S(h,f,d,u,o[p+2],17,606105819),u=S(u,h,f,d,o[p+3],22,-1044525330),d=S(d,u,h,f,o[p+4],7,-176418897),f=S(f,d,u,h,o[p+5],12,1200080426),h=S(h,f,d,u,o[p+6],17,-1473231341),u=S(u,h,f,d,o[p+7],22,-45705983),d=S(d,u,h,f,o[p+8],7,1770035416),f=S(f,d,u,h,o[p+9],12,-1958414417),h=S(h,f,d,u,o[p+10],17,-42063),u=S(u,h,f,d,o[p+11],22,-1990404162),d=S(d,u,h,f,o[p+12],7,1804603682),f=S(f,d,u,h,o[p+13],12,-40341101),h=S(h,f,d,u,o[p+14],17,-1502002290),u=S(u,h,f,d,o[p+15],22,1236535329),d=x(d,u,h,f,o[p+1],5,-165796510),f=x(f,d,u,h,o[p+6],9,-1069501632),h=x(h,f,d,u,o[p+11],14,643717713),u=x(u,h,f,d,o[p+0],20,-373897302),d=x(d,u,h,f,o[p+5],5,-701558691),f=x(f,d,u,h,o[p+10],9,38016083),h=x(h,f,d,u,o[p+15],14,-660478335),u=x(u,h,f,d,o[p+4],20,-405537848),d=x(d,u,h,f,o[p+9],5,568446438),f=x(f,d,u,h,o[p+14],9,-1019803690),h=x(h,f,d,u,o[p+3],14,-187363961),u=x(u,h,f,d,o[p+8],20,1163531501),d=x(d,u,h,f,o[p+13],5,-1444681467),f=x(f,d,u,h,o[p+2],9,-51403784),h=x(h,f,d,u,o[p+7],14,1735328473),u=x(u,h,f,d,o[p+12],20,-1926607734),d=w(d,u,h,f,o[p+5],4,-378558),f=w(f,d,u,h,o[p+8],11,-2022574463),h=w(h,f,d,u,o[p+11],16,1839030562),u=w(u,h,f,d,o[p+14],23,-35309556),d=w(d,u,h,f,o[p+1],4,-1530992060),f=w(f,d,u,h,o[p+4],11,1272893353),h=w(h,f,d,u,o[p+7],16,-155497632),u=w(u,h,f,d,o[p+10],23,-1094730640),d=w(d,u,h,f,o[p+13],4,681279174),f=w(f,d,u,h,o[p+0],11,-358537222),h=w(h,f,d,u,o[p+3],16,-722521979),u=w(u,h,f,d,o[p+6],23,76029189),d=w(d,u,h,f,o[p+9],4,-640364487),f=w(f,d,u,h,o[p+12],11,-421815835),h=w(h,f,d,u,o[p+15],16,530742520),u=w(u,h,f,d,o[p+2],23,-995338651),d=E(d,u,h,f,o[p+0],6,-198630844),f=E(f,d,u,h,o[p+7],10,1126891415),h=E(h,f,d,u,o[p+14],15,-1416354905),u=E(u,h,f,d,o[p+5],21,-57434055),d=E(d,u,h,f,o[p+12],6,1700485571),f=E(f,d,u,h,o[p+3],10,-1894986606),h=E(h,f,d,u,o[p+10],15,-1051523),u=E(u,h,f,d,o[p+1],21,-2054922799),d=E(d,u,h,f,o[p+8],6,1873313359),f=E(f,d,u,h,o[p+15],10,-30611744),h=E(h,f,d,u,o[p+6],15,-1560198380),u=E(u,h,f,d,o[p+13],21,1309151649),d=E(d,u,h,f,o[p+4],6,-145523070),f=E(f,d,u,h,o[p+11],10,-1120210379),h=E(h,f,d,u,o[p+2],15,718787259),u=E(u,h,f,d,o[p+9],21,-343485551),d=d+B>>>0,u=u+se>>>0,h=h+K>>>0,f=f+te>>>0}return e.endian([d,u,h,f])};n._ff=function(i,l,o,v,d,u,h){var f=i+(l&o|~l&v)+(d>>>0)+h;return(f<<u|f>>>32-u)+l},n._gg=function(i,l,o,v,d,u,h){var f=i+(l&v|o&~v)+(d>>>0)+h;return(f<<u|f>>>32-u)+l},n._hh=function(i,l,o,v,d,u,h){var f=i+(l^o^v)+(d>>>0)+h;return(f<<u|f>>>32-u)+l},n._ii=function(i,l,o,v,d,u,h){var f=i+(o^(l|~v))+(d>>>0)+h;return(f<<u|f>>>32-u)+l},n._blocksize=16,n._digestsize=16,Ys.exports=function(i,l){if(i==null)throw new Error("Illegal argument "+i);var o=e.wordsToBytes(n(i,l));return l&&l.asBytes?o:l&&l.asString?s.bytesToString(o):e.bytesToHex(o)}})()),Ys.exports}var Xc=Qc();const Kc=Hc(Xc),ui=Xe("Disconnected"),yr=Xe(!1),on=Xe(null);let Qs;function De(e,t="info"){on.set({text:e,type:t}),Qs&&clearTimeout(Qs),Qs=setTimeout(()=>{on.set(null)},3e3)}const Gc=localStorage.getItem("app_theme")||"default",ws=Xe(Gc);ws.subscribe(e=>{if(typeof document>"u")return;localStorage.setItem("app_theme",e);const t=nn.find(s=>s.id===e);if(!t)return;const a=document.documentElement;document.body.setAttribute("data-theme",e),Object.entries(t.colors).forEach(([s,n])=>{a.style.setProperty(s,n)})});const ks=Xe({isOpen:!1,title:"",message:"",confirmLabel:"Confirm",cancelLabel:"Cancel",onConfirm:null,type:"confirm",inputValue:"",placeholder:"",options:[]});function pa({title:e="Confirm Action",message:t="Are you sure?",confirmLabel:a="Confirm",cancelLabel:s="Cancel",type:n="confirm",inputValue:i="",placeholder:l="",options:o=[],onConfirm:v=()=>{}}){ks.set({isOpen:!0,title:e,message:t,confirmLabel:a,cancelLabel:s,type:n,inputValue:i,placeholder:l,options:o,onConfirm:v})}function cs(){ks.set({isOpen:!1,title:"",message:"",confirmLabel:"",cancelLabel:"",onConfirm:null,type:"confirm",inputValue:"",placeholder:"",options:[]})}const St=Xe({state:"stop",volume:50,elapsed:0,duration:0,random:!1,repeat:!1,bitrate:0,format:"",song:0,songid:0}),Ht=Xe({title:"Not Playing",artist:"",album:"",file:"",stationName:null,id:null,pos:null,isYandex:!1}),xs=Xe({active:!1,tracks:[],currentIndex:-1,currentTrackId:null,currentTrackFile:null,streamCache:{}}),Ss=Xe(!1),us=Xe(!1),ln=Xe(!1),cn=Xe(!1),Dt=Xe("library"),zs=Xe(null),ia=Xe(!1),Zc=localStorage.getItem("sidebarCollapsed")==="true",dn=Xe(Zc);dn.subscribe(e=>{typeof localStorage<"u"&&localStorage.setItem("sidebarCollapsed",String(e))});const Ha=Xe([]),Rs=Xe([]),Ur=Xe([]),Jc=Xe(null),Ia=Xe(new Set),xt=Xe(!1),Qt=Xe([{view:"root"}]),qa=Xe([]),ho=Xe(0),Yr=Xe(""),po=Xe({});function ed(e,t){po.update(a=>({...a,[e]:t}))}function td(e){return et(po)[e]||0}const Cn=Xe({isOpen:!1,track:null,context:{type:"general",playlistName:null,index:null},x:0,y:0,triggerRect:null});function ad(){if(typeof navigator<"u"&&navigator.vibrate)try{navigator.vibrate(70)}catch{}}function Kr(e,t,a={}){if(!t&&a.type!=="playlist-card")return;ad();let s=0,n=0,i=null,l=e.currentTarget;!l&&e.target&&e.target.closest&&(l=e.target.closest("button")||e.target),l&&l.getBoundingClientRect&&(i=l.getBoundingClientRect());const o=e.detail?.originalEvent||e;o.touches&&o.touches.length>0?(s=o.touches[0].clientX,n=o.touches[0].clientY):o.clientX&&(s=o.clientX,n=o.clientY);const v={type:"general",playlistName:null,index:null,...a};Cn.set({isOpen:!0,track:t,context:v,x:s,y:n,triggerRect:i})}function Nt(){Cn.set({isOpen:!1,track:null,context:{},x:0,y:0,triggerRect:null})}let vn=null,un=null;function rd(e){un=e}function Ba(e,t=null){t&&(vn=t),un?un(e,t):console.warn("Router callback not set!")}function sd(){const e=vn;return vn=null,e}function nd(){window.history.back()}function $r(e,t=[],a=null){if(!e||!e.file)return"/images/default_cover.png";if(e.image&&e.image.startsWith("http"))return e.image;if(go(e.file)||e.genre==="Radio")return e.image?Tr(e):_o(e,t,a)||"/images/radio_placeholder.png";let s=e.file.startsWith("/")?e.file.slice(1):e.file;return`/coverart.php/${encodeURI(s)}`}function Gr(e,t="sm",a=[],s=null){if(!e||e.file&&(go(e.file)||e.genre==="Radio"||Array.isArray(e)))return e&&e.image?Tr(e):_o(e,a,s)||"/images/radio_icon.png";if(e.image&&e.image.startsWith("http"))return e.image;if(!e.file)return"/images/default_icon.png";if(e.thumbHash){const n=t==="md"?"":"_sm";return`/imagesw/thmcache/${e.thumbHash}${n}.jpg`}try{const n=e.file.lastIndexOf("/"),i=n===-1?".":e.file.substring(0,n);return`/imagesw/thmcache/${Kc(i)}${t==="md"?"":"_sm"}.jpg`}catch{let i=e.file.startsWith("/")?e.file.slice(1):e.file;return`/coverart.php/${encodeURI(i)}`}}function go(e){return!e||e.includes("yandex.net")||e.includes("get-mp3")?!1:e.startsWith("http")||e.includes("://")||e.includes("RADIO")}function _o(e,t,a){const s=v=>(v||"").toString().toLowerCase().replace(/[^a-z0-9]/g,""),n=s(e?.title),i=s(e?.stationName),l=s(a);if(t&&t.length>0){const v=t.find(d=>{const u=s(d.name);return u?u===i||u===l||n&&u===n||n&&n.includes(u)&&u.length>3:!1});if(v)return Tr(v)}const o=e?.stationName||a;return o?Tr({name:o,image:"local"}):null}co([Ht,Ha,zs],([e,t,a])=>$r(e,t,a));co(Ht,e=>!e||!e.file||e.file.startsWith("http")?null:`/coverart.php/${encodeURI(e.file)}`);const id=localStorage.getItem("alarmTime")||"08:00",od=localStorage.getItem("alarmEnabled")==="true",ld=localStorage.getItem("alarmPlaylist")||"Favorites",fn=Xe(id),hn=Xe(od),pn=Xe(ld);fn.subscribe(e=>localStorage.setItem("alarmTime",e));hn.subscribe(e=>localStorage.setItem("alarmEnabled",String(e)));pn.subscribe(e=>localStorage.setItem("alarmPlaylist",e));const cd=localStorage.getItem("yandex_enabled")==="true",Es=Xe(cd);Es.subscribe(e=>{typeof localStorage<"u"&&localStorage.setItem("yandex_enabled",String(e))});const fs=Xe(new Set),ht={NAME:"MoodePlayerDB",STORE_NAME:"music",VERSION:3},Wa={SYNC:"/wave-api.php",YANDEX:"/wave-yandex-api.php",STATIONS:e=>"/wave-api.php?action=stations",COVER_ART:e=>`/coverart.php?u=${encodeURIComponent(e)}`,RADIO_LOGOS:e=>`/imagesw/radio-logos/thumbs/${e}`},Na={open(){return new Promise((e,t)=>{const a=indexedDB.open(ht.NAME,ht.VERSION);a.onupgradeneeded=s=>{const n=s.target.result,i=s.target.transaction;let l;n.objectStoreNames.contains(ht.STORE_NAME)?l=i.objectStore(ht.STORE_NAME):l=n.createObjectStore(ht.STORE_NAME,{keyPath:"file"}),l.indexNames.contains("artist")||l.createIndex("artist","artist",{unique:!1}),l.indexNames.contains("album")||l.createIndex("album","album",{unique:!1}),l.indexNames.contains("genre")||l.createIndex("genre","genre",{unique:!1}),l.indexNames.contains("album_artist")||l.createIndex("album_artist","album_artist",{unique:!1})},a.onsuccess=()=>e(a.result),a.onerror=()=>t(a.error)})},async clear(){const e=await this.open();return new Promise((t,a)=>{const s=e.transaction(ht.STORE_NAME,"readwrite");s.objectStore(ht.STORE_NAME).clear(),s.oncomplete=()=>t(),s.onerror=()=>a(s.error)})},async bulkAdd(e){const t=await this.open();return new Promise((a,s)=>{const n=t.transaction(ht.STORE_NAME,"readwrite"),i=n.objectStore(ht.STORE_NAME);e.forEach(l=>i.put(l)),n.oncomplete=()=>a(),n.onerror=()=>s(n.error)})},async getFilesMap(e){if(!e||e.length===0)return new Map;const t=await this.open();return new Promise(a=>{const n=t.transaction(ht.STORE_NAME,"readonly").objectStore(ht.STORE_NAME),i=new Map;let l=0;e.forEach(o=>{const v=o.normalize("NFC").trim(),d=n.get(v);d.onsuccess=u=>{u.target.result&&i.set(o,u.target.result),l++,l===e.length&&a(i)},d.onerror=()=>{l++,l===e.length&&a(i)}})})},async getArtists(){const e=await this.open();return new Promise((t,a)=>{const n=e.transaction(ht.STORE_NAME,"readonly").objectStore(ht.STORE_NAME),i=new Map,l=n.openCursor();l.onsuccess=o=>{const v=o.target.result;if(v){const d=v.value,u=d.album_artist||d.artist;u&&!i.has(u)&&i.set(u,{name:u,file:d.file,thumbHash:d.thumbHash}),v.continue()}else{const d=Array.from(i.values()).sort((u,h)=>u.name.localeCompare(h.name,void 0,{sensitivity:"base"}));t(d)}},l.onerror=()=>a(l.error)})},async getAlbums(){const e=await this.open();return new Promise((t,a)=>{const n=e.transaction(ht.STORE_NAME,"readonly").objectStore(ht.STORE_NAME).index("album"),i=[],l=n.openCursor(null,"nextunique");l.onsuccess=o=>{const v=o.target.result;if(v){const d=v.value;i.push({name:d.album,artist:d.album_artist||d.artist,file:d.file,thumbHash:d.thumbHash,qualityBadge:d.qualityBadge,year:d.year||0}),v.continue()}else t(i)},l.onerror=()=>a(l.error)})},async getArtistAlbums(e){if(!e)return[];const t=await this.open(),a=e.normalize("NFC").trim();return new Promise((s,n)=>{const l=t.transaction(ht.STORE_NAME,"readonly").objectStore(ht.STORE_NAME),o=new Promise(d=>{l.indexNames.contains("album_artist")?l.index("album_artist").getAll(IDBKeyRange.only(a)).onsuccess=u=>d(u.target.result):d([])}),v=new Promise(d=>{l.index("artist").getAll(IDBKeyRange.only(a)).onsuccess=u=>d(u.target.result)});Promise.all([o,v]).then(([d,u])=>{const h=[...d,...u],f=[],p=new Set;h.forEach(S=>{p.has(S.album)||(p.add(S.album),f.push({name:S.album,artist:S.album_artist||S.artist,file:S.file,thumbHash:S.thumbHash,qualityBadge:S.qualityBadge,year:S.year||0}))}),s(f)}).catch(d=>n(d))})},async getAlbumTracks(e,t=null){const a=await this.open(),s=e.normalize("NFC").trim(),n=t?t.normalize("NFC").trim():null;return console.log(`[DB] getAlbumTracks called. Album: "${s}", FilterArtist: "${n}"`),new Promise((i,l)=>{const v=a.transaction(ht.STORE_NAME,"readonly").objectStore(ht.STORE_NAME).index("album"),d=IDBKeyRange.only(s),u=v.getAll(d);u.onsuccess=()=>{let h=u.result;if(console.log(`[DB] Found ${h.length} raw tracks for album "${s}"`),n){const f=h.length;h=h.filter(p=>{const S=(p.artist||"").normalize("NFC").trim(),x=(p.album_artist||"").normalize("NFC").trim();return S===n||x===n}),console.log(`[DB] After artist filter: ${h.length} tracks (Removed ${f-h.length})`)}else console.log("[DB] No artist filter provided. Returning all tracks.");h.sort((f,p)=>{const S=parseInt(f.disc||1),x=parseInt(p.disc||1);if(S!==x)return S-x;const w=parseInt(f.track||0),E=parseInt(p.track||0);return w-E}),i(h)},u.onerror=()=>l(u.error)})},async getGenres(){const e=await this.open();return new Promise((t,a)=>{const n=e.transaction(ht.STORE_NAME,"readonly").objectStore(ht.STORE_NAME).index("genre"),i=[],l=n.openKeyCursor(null,"nextunique");l.onsuccess=o=>{const v=o.target.result;v?(i.push(v.key),v.continue()):t(i)},l.onerror=()=>a(l.error)})},async getGenreTracks(e){const t=await this.open(),a=e.normalize("NFC").trim();return new Promise((s,n)=>{const o=t.transaction(ht.STORE_NAME,"readonly").objectStore(ht.STORE_NAME).index("genre").getAll(IDBKeyRange.only(a));o.onsuccess=()=>s(o.result),o.onerror=()=>n(o.error)})},async search(e){if(!e)return[];const t=e.toLowerCase().normalize("NFC").trim(),a=await this.open();return new Promise((s,n)=>{const l=a.transaction(ht.STORE_NAME,"readonly").objectStore(ht.STORE_NAME),o=[],v=100,d=l.openCursor();d.onsuccess=u=>{const h=u.target.result;if(h){const f=h.value;if((f.title&&f.title.toLowerCase().includes(t)||f.artist&&f.artist.toLowerCase().includes(t)||f.album&&f.album.toLowerCase().includes(t)||f.album_artist&&f.album_artist.toLowerCase().includes(t))&&o.push(f),o.length>=v){s(o);return}h.continue()}else s(o)},d.onerror=()=>n(d.error)})}};var dd=k('<div class="skeleton svelte-tl058d"></div>');function Kt(e,t){let a=wt(t,"width",8,"100%"),s=wt(t,"height",8,"20px"),n=wt(t,"radius",8,"4px"),i=wt(t,"style",8,"");var l=dd();de(()=>pt(l,`width: ${a()??""}; height: ${s()??""}; border-radius: ${n()??""}; ${i()??""}`)),b(e,l)}var vd=k('<div class="skel svelte-1b8que2"><!></div>'),ud=k('<img loading="lazy"/>'),fd=k('<div class="loader svelte-1b8que2"><!> <!> <!></div>');function Ot(e,t){Et(t,!1);let a=wt(t,"src",8),s=wt(t,"alt",8,""),n=wt(t,"radius",8,"0px");const i=Mn();let l=T("loading");function o(){g(l,"loaded")}function v(w){i("error",w),g(l,"error")}le(()=>N(a()),()=>{a()?g(l,"loading"):g(l,"error")}),Vt(),Ct();var d=fd(),u=c(d);{var h=w=>{var E=vd(),B=c(E);Kt(B,{width:"100%",height:"100%",get radius(){return n()}}),vt(2,E,()=>yt,()=>({duration:200})),b(w,E)};C(u,w=>{r(l)==="loading"&&w(h)})}var f=_(u,2);{var p=w=>{var E=ud();let B;de(()=>{Yt(E,"src",a()),Yt(E,"alt",s()),pt(E,`border-radius: ${n()??""}`),B=Ge(E,1,"svelte-1b8que2",null,B,{vis:r(l)==="loaded"})}),M("load",E,o),M("error",E,v),b(w,E)};C(f,w=>{a()&&r(l)!=="error"&&w(p)})}var S=_(f,2);{var x=w=>{var E=rt(),B=ze(E);Dr(B,t,"fallback",{}),b(w,E)};C(S,w=>{r(l)==="error"&&w(x)})}de(()=>pt(d,`border-radius: ${n()??""}`)),b(e,d),Tt()}const Ka={DEFAULT_IP:typeof window<"u"?window.location.hostname:"localhost",get MOODE_IP(){try{return typeof localStorage<"u"?localStorage.getItem("moode_ip")||this.DEFAULT_IP:this.DEFAULT_IP}catch{return this.DEFAULT_IP}},setMoodeIp(e){if(typeof localStorage<"u"){const t=e?e.trim():"";t&&localStorage.setItem("moode_ip",t)}}};class hd{constructor(){this.socket=null,this.queue=[],this.isProcessing=!1,this.reconnectTimer=null,this.watchdogTimer=null,this._buffer=""}get isConnected(){return this.socket&&this.socket.readyState===WebSocket.OPEN}connect(){if(this.socket&&(this.socket.readyState===WebSocket.CONNECTING||this.socket.readyState===WebSocket.OPEN))return;this.reconnectTimer&&clearTimeout(this.reconnectTimer);let t=Ka.MOODE_IP||window.location.hostname;t=t.replace(/^https?:\/\//,"").split(":")[0].split("/")[0];const a=Ka.WS_PORT||"8080",s=`ws://${t}:${a}`;console.log("[MPD] Connecting to:",s);try{this.socket=new WebSocket(s,["binary"])}catch(n){console.error("[MPD] Connection Error:",n),this.reconnectTimer=setTimeout(()=>this.connect(),5e3);return}this.socket.onopen=()=>{console.log("[MPD] Connected"),ui.set("Connected"),De("Connected to Moode","success"),this._processQueue()},this.socket.onmessage=n=>this._handleMessage(n),this.socket.onclose=n=>{console.warn("[MPD] Socket closed",n.code,n.reason),ui.set("Disconnected"),this._cleanup(),this.reconnectTimer=setTimeout(()=>this.connect(),3e3)},this.socket.onerror=n=>{console.error("[MPD] Socket error",n)}}send(t){return new Promise((a,s)=>{this.queue.push({cmd:t,resolve:a,reject:s}),this._processQueue()})}_cleanup(){for(this.isProcessing=!1,this._buffer="",this.watchdogTimer&&clearTimeout(this.watchdogTimer);this.queue.length>0;){const{reject:t}=this.queue.shift();t(new Error("Connection lost"))}}async _processQueue(){if(this.isProcessing||this.queue.length===0||!this.isConnected)return;this.isProcessing=!0;const{cmd:t}=this.queue[0];this.watchdogTimer&&clearTimeout(this.watchdogTimer),this.watchdogTimer=setTimeout(()=>{console.error("[MPD] Watchdog timeout"),this.socket&&this.socket.close()},2e4);try{const a=t.endsWith(`
`)?t:t+`
`;this.socket.send(new TextEncoder().encode(a))}catch(a){console.error("[MPD] Send error",a),this._cleanup()}}async _handleMessage(t){let a=t.data;a instanceof Blob&&(a=await a.text()),this.watchdogTimer&&(clearTimeout(this.watchdogTimer),this.watchdogTimer=null),this._buffer+=a;const s=this._buffer.endsWith(`
OK
`)||this._buffer===`OK
`,n=this._buffer.startsWith("ACK");if(s||n){const i=this._buffer;this._buffer="";const l=this.queue.shift();if(this.isProcessing=!1,l)if(n)console.error(`[MPD] Error: ${i.trim()}`),l.reject(new Error(i.trim()));else{const o=i.replace(/\nOK\n$/,"").replace(/^OK\n$/,"");l.resolve(o)}this._processQueue()}else{if(!this.queue.length)return;this.watchdogTimer=setTimeout(()=>{console.error("[MPD] Watchdog timeout receiving large data"),this.socket&&this.socket.close()},2e4)}}}const Ye=new hd,na={parseKeyValue(e){const t={};if(!e)return t;const a=e.split(`
`);for(const s of a){const n=s.indexOf(": ");if(n===-1)continue;const i=s.substring(0,n).toLowerCase(),l=s.substring(n+2);t[i]=l}return t},parseStatus(e){const t=this.parseKeyValue(e);let a="";if(t.audio){const s=t.audio.split(":");s[1]&&(a=`${s[1]}-bit`)}return{state:t.state||"stop",volume:parseInt(t.volume)||0,elapsed:parseFloat(t.elapsed)||0,duration:parseFloat(t.duration)||0,random:t.random==="1",repeat:t.repeat==="1",song:parseInt(t.song)||0,songId:parseInt(t.songid)||-1,playlistLength:parseInt(t.playlistlength)||0,bitrate:parseInt(t.bitrate)||0,format:a,playlistVersion:parseInt(t.playlist)||0}},parseCurrentSong(e){const t=this.parseKeyValue(e);return this._normalizeTrack(t)},parsePlaylists(e){const t=e.split(`
`),a=[];let s=null;for(const n of t)n.startsWith("playlist: ")?(s&&a.push(s),s={playlist:n.substring(10)}):n.startsWith("Last-Modified: ")&&s&&(s["last-modified"]=n.substring(15));return s&&a.push(s),a.map(n=>({name:n.playlist,lastModified:n["last-modified"]}))},parseTracks(e){const t=[];let a=null,s=0,n=e.indexOf(`
`,s);for(;n!==-1;){const i=e.substring(s,n),l=i.indexOf(": ");if(l!==-1){const o=i.substring(0,l).toLowerCase(),v=i.substring(l+2);o==="file"?(a&&t.push(this._normalizeTrack(a)),a={file:v}):a&&(a[o]=v)}s=n+1,n=e.indexOf(`
`,s)}return a&&t.push(this._normalizeTrack(a)),t},_normalizeTrack(e){const t=e.file||e.File||"",a=e.Title||e.title||e.Name||e.name||t.split("/").pop()||"Unknown";return{file:t,title:a,artist:e.Artist||e.artist||"Unknown Artist",album:e.Album||e.album||"Unknown Album",genre:e.Genre||e.genre||"Unknown",time:parseFloat(e.Time||e.time||0),track:e.Track||e.track||"",id:e.Id||e.id,pos:e.Pos||e.pos||null,stationName:e.name||e.Name||null}}};function mo(e){return new Worker("/assets/sync.worker-CxDcqL9_.js",{name:e?.name})}const Da={async syncLibrary(){if(et(ia))return;ia.set(!0);const e=new mo,t=window.location.origin+"/wave-api.php";e.postMessage({type:"START_SYNC",payload:{url:t}}),e.onmessage=a=>{const{type:s,status:n,count:i,message:l}=a.data;if(s==="PROGRESS"){const o={connecting:"Requesting library...",downloading:"Downloading data...",parsing:"Processing metadata...",saving:`Saving ${i} tracks...`};o[n]&&De(o[n],"info")}s==="DONE"&&(De(`Library updated: ${i} tracks`,"success"),ia.set(!1),e.terminate()),s==="ERROR"&&(console.error("[API] Sync Error:",l),De(`Sync Failed: ${l}`,"error"),ia.set(!1),e.terminate())},e.onerror=a=>{console.error("[API] Worker crash:",a),De("Sync worker crashed","error"),ia.set(!1),e.terminate()}},async loadRadioStations(){if(!et(us)){us.set(!0);try{const t=await fetch(Wa.STATIONS(!1));if(!t.ok)throw new Error("Network error");const a=await t.json();if(a.error)throw new Error(a.error);if(!Array.isArray(a))throw new Error("Invalid response format");const s=a.map(n=>({id:n.id,name:n.name,file:n.station,station:n.station,image:n.logo,genre:n.genre||"Radio"}));s.sort((n,i)=>n.name.localeCompare(i.name,void 0,{sensitivity:"base"})),Ha.set(s)}catch(e){console.error("[API] Failed to load stations",e),De("Failed to load radio","error")}finally{us.set(!1)}}},async setAlarm(e,t,a){try{const s=new FormData;s.append("action","set_alarm"),s.append("enabled",e?"1":"0"),s.append("time",t),s.append("playlist",a);const n=await fetch(Wa.SYNC,{method:"POST",body:s});if(!n.ok)throw new Error("Server error");const i=await n.json();if(i.error)throw new Error(i.error);return!0}catch(s){throw console.error("[API] Failed to set alarm",s),s}},async getServerTime(){try{const e=await fetch(`${Wa.SYNC}?action=get_time`);if(e.ok)return(await e.json()).time}catch(e){console.error("Failed to get server time",e)}return null},async checkYandexAuth(){try{const t=await(await fetch(Wa.YANDEX+"?action=status")).json();return yr.set(t.authorized),t.authorized}catch(e){return console.error("Yandex Auth Check Failed",e),yr.set(!1),!1}},async saveYandexToken(e){try{const t=await fetch(Wa.YANDEX+"?action=save_token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e})}),a=await t.json();if(!t.ok)throw new Error(a.error||"Failed to save");return De("Yandex connected successfully","success"),yr.set(!0),!0}catch(t){return console.error(t),De("Invalid token or server error","error"),yr.set(!1),!1}},async getYandexMeta(e){try{const t=await fetch(Wa.YANDEX+"?action=get_meta&url="+encodeURIComponent(e));if(t.ok)return await t.json()}catch{}return null}},pd=1e3,gd=250;let hs=null,Hr=null,ps=0,Qa=1,Ts=!0,Sa=!1,Ga=0,pr=null;function gs(e){return e?String(e).normalize("NFC").replace(/\\/g,"\\\\").replace(/"/g,'\\"'):""}function _d(){md(),Ts=!0,Sa=!1,Ga=0,xt.set(!1),ua(),hs=setInterval(()=>{Ye.isConnected&&!Ye.isProcessing&&ua()},pd)}function md(){hs&&(clearInterval(hs),hs=null),Pn()}async function ua(){try{const e=await Ye.send("status"),t=await Ye.send("currentsong"),a=na.parseStatus(e),s=na.parseCurrentSong(t);yd(a,s);const n=et(ho);if(et(xt))return;(a.playlistLength>0&&a.playlistVersion!==n||a.playlistLength>0&&et(qa).length===0)&&bd(a.playlistVersion)}catch{}}async function bd(e){if(!et(xt))try{const t=await Ye.send("playlistinfo");if(et(xt))return;const a=na.parseTracks(t),s=et(xs),n=a.map(o=>o.file).filter(o=>o&&!o.startsWith("http"));let i=new Map;if(n.length>0)try{i=await Na.getFilesMap(n)}catch(o){console.warn("Failed to hydrate queue from DB",o)}const l=a.map(o=>{const v=o.file||"",d=v.includes("yandex.net")||v.includes("get-mp3")||v.startsWith("yandex:");if(d&&s.streamCache&&s.streamCache[v]){const f=s.streamCache[v];return{...o,title:f.title||o.title,artist:f.artist||o.artist,album:f.album||o.album,image:f.image,isYandex:!0,id:f.id,mpdId:o.id,mpdPos:o.pos,_uid:String(o.id||o.pos)+"y"}}d&&bo(v);const u=v.normalize("NFC"),h=i.get(u);return h?{...o,thumbHash:h.thumbHash,qualityBadge:h.qualityBadge,title:o.title||h.title,artist:o.artist||h.artist,album:o.album||h.album,isYandex:d,_uid:String(o.id||o.pos+o.file)}:{...o,isYandex:d,_uid:String(o.id||o.pos+o.file)}});qa.set(l),ho.set(e)}catch(t){console.error("Queue sync error",t)}}async function bo(e){const t=et(xs);if(t.streamCache&&t.streamCache[e])return;const a=await Da.getYandexMeta(e);xs.update(n=>{const i={...n.streamCache};return i[e]={...a,isYandex:!0,file:e},{...n,streamCache:i}}),et(Ht).file===e&&Ht.update(n=>({...n,...a,isYandex:!0})),qa.update(n=>n.map(i=>i.file===e?{...i,...a,isYandex:!0}:i))}function yd(e,t){const a=et(Ht),s=et(Ha),n=et(xs);if(t.file&&n.streamCache&&n.streamCache[t.file]){const l=n.streamCache[t.file];t.title=l.title,t.artist=l.artist,t.album=l.album,t.image=l.image,t.isYandex=!0,t.id=l.id,l.time>0&&(e.duration===0||isNaN(e.duration))&&(e.duration=l.time)}else t.file&&(t.file.includes("yandex.net")||t.file.includes("get-mp3"))&&bo(t.file);const i=t.file&&t.file.startsWith("http");if(i&&!t.isYandex){const l=u=>(u||"").toString().toLowerCase().replace(/[^a-z0-9]/g,""),o=l(t.file),v=l(t.title),d=s.find(u=>{const h=l(u.station||u.file||u.url||(Array.isArray(u)?u[1]:"")),f=l(u.name||(Array.isArray(u)?u[0]:""));return h&&o.includes(h)||f&&v.includes(f)});d?t.stationName=d.name||d[0]:a.stationName&&a.file===t.file&&(t.stationName=a.stationName)}Ht.set(t),St.update(l=>{const o=e.state==="play",v=performance.now();if(e.state==="pause"||l.state==="pause")return ds(!1),v<Ga?l:e;if(t.file!==a.file||Ts)return Ts=!1,Sa=!1,Qa=1,i&&!t.isYandex&&(e.elapsed=0),ds(o&&(!i||t.isYandex)),e;if(v<Ga)return l;if(Sa)return Sa=!1,Qa=1,ds(o&&(!i||t.isYandex)),e;if(o&&(!i||t.isYandex)){const d=e.elapsed-l.elapsed;if(Math.abs(d)>2)return Qa=1,e;if(Math.abs(d)<.05)Qa=1;else{let h=d/1.5;Qa=Math.max(.5,Math.min(1.5,1+h))}return{...e,elapsed:l.elapsed}}return ds(!1),e})}function ds(e){e?gn():Pn()}function gn(){Hr||Ts||(ps=performance.now(),Hr=setInterval(()=>{const e=performance.now();let t=(e-ps)/1e3;t>2&&(t=0),ps=e,St.update(a=>{if(a.state!=="play")return a;let s=a.elapsed+t*Qa;return a.duration>0&&s>a.duration&&(s=a.duration),{...a,elapsed:s}})},gd))}function Pn(){Hr&&(clearInterval(Hr),Hr=null),Qa=1,ps=0}async function fi(e,t=!1){if(!e||e.length===0)return;xt.set(!0),Sa=!0;const a=5;try{for(let s=0;s<e.length;s+=a){const n=e.slice(s,s+a),i=["command_list_begin"];n.forEach(l=>{i.push(`add "${gs(l.file)}"`)}),i.push("command_list_end"),await Ye.send(i.join(`
`))}t?(await Ye.send("play 0"),De(`Playing ${e.length} tracks`,"success")):De(`Added ${e.length} tracks`,"success")}catch(s){console.error("[Player] Bulk Action Failed:",s),De("Error adding tracks","error")}finally{setTimeout(()=>{xt.set(!1),ua()},1500)}}const oa={async togglePlay(){const t=et(St).state==="play";Ga=performance.now()+800,St.update(a=>{const s=t?"pause":"play";return s==="play"?gn():Pn(),{...a,state:s}}),await Ye.send(t?"pause 1":"play"),setTimeout(ua,900)},async next(){Sa=!0,Ga=0,await Ye.send("next"),ua()},async previous(){Sa=!0,Ga=0,St.update(e=>({...e,elapsed:0})),await Ye.send("previous"),ua()},async setVolume(e){St.update(t=>({...t,volume:e})),await Ye.send(`setvol ${e}`)},async seek(e){Sa=!0,Ga=performance.now()+500,St.update(t=>({...t,elapsed:e})),await Ye.send(`seekcur ${e}`),setTimeout(ua,600)},async toggleRandom(){const t=!et(St).random;St.update(a=>({...a,random:t})),await Ye.send(`random ${t?1:0}`)},async toggleRepeat(){const t=!et(St).repeat;St.update(a=>({...a,repeat:t})),await Ye.send(`repeat ${t?1:0}`)},async playUri(e,t={}){xt.set(!0);const a=gs(e);Sa=!0,St.update(s=>({...s,state:"play",elapsed:0})),Ht.set({title:t.title||e.split("/").pop(),artist:t.artist||"",album:t.album||"",file:e}),gn();try{const s=await Ye.send("currentsong"),n=parseInt(na.parseKeyValue(s).pos),i=await Ye.send(`addid "${a}"`),l=parseInt(na.parseKeyValue(i).id);if(isNaN(l))await Ye.send(`add "${a}"`),await Ye.send("play");else{const o=isNaN(n)?0:n+1;await Ye.send(`moveid ${l} ${o}`),await Ye.send(`playid ${l}`)}}catch(s){console.error("Play error",s),De("Failed to play","error")}setTimeout(()=>{xt.set(!1),ua()},1200)},async addToQueue(e){try{await Ye.send(`add "${gs(e)}"`),De("Added to queue","success")}catch(t){console.error("Add queue error",t),De("Failed to add","error")}},async playNext(e){xt.set(!0);const t=gs(e);try{const a=await Ye.send("currentsong"),s=parseInt(na.parseKeyValue(a).pos||-1);if(s===-1)xt.set(!1),await this.playUri(e);else{const n=await Ye.send(`addid "${t}"`),i=parseInt(na.parseKeyValue(n).id);isNaN(i)||(await Ye.send(`moveid ${i} ${s+1}`),De("Will play next","success")),setTimeout(()=>xt.set(!1),1e3)}}catch(a){console.error("Play Next error",a),De("Failed to set next","error"),xt.set(!1)}},async removeFromQueue(e){xt.set(!0),pr&&clearTimeout(pr);try{qa.update(t=>{const a=[...t];return a.splice(e,1),a}),await Ye.send(`delete ${e}`)}catch{De("Failed to remove","error"),xt.set(!1);return}pr=setTimeout(()=>{xt.set(!1)},1e3)},async moveTrack(e,t){if(e!==t){xt.set(!0),pr&&clearTimeout(pr);try{await Ye.send(`move ${e} ${t}`)}catch(a){console.error("Move failed",a),De("Move failed","error"),xt.set(!1),ua();return}pr=setTimeout(()=>{xt.set(!1),ua()},2e3)}},async playAllTracks(e){if(!(!e||e.length===0))try{await Ye.send("stop"),await Ye.send("clear"),await fi(e,!0)}catch(t){console.error(t)}},async addAllToQueue(e){!e||e.length===0||await fi(e,!1)},async saveQueue(e){if(!e)return;const t=e.replace(/"/g,'\\"');try{await Ye.send(`save "${t}"`),De(`Playlist "${e}" saved`,"success")}catch(a){if(a.message.includes("exist")){if(confirm(`Playlist "${e}" exists. Overwrite?`))try{await Ye.send(`rm "${t}"`),await Ye.send(`save "${t}"`),De(`Playlist "${e}" overwritten`,"success")}catch{De("Failed to overwrite","error")}}else console.error(a)}}},jr="Favorites";let hi=Promise.resolve();const gr=e=>e?e.toLowerCase().replace(/^https?:\/\//,"").replace(/^www\./,"").split("?")[0].replace(/\/$/,""):"";function wd(e){if(e==="Favorites")return"linear-gradient(135deg, hsl(348, 95%, 58%), hsl(348, 90%, 40%))";let t=0;for(let s=0;s<e.length;s++)t=e.charCodeAt(s)+((t<<5)-t);const a=Math.abs(t%360);return`linear-gradient(135deg, hsl(${a}, 60%, 40%), hsl(${(a+40)%360}, 60%, 30%))`}function kd(e){if(e==="Favorites")return"var(--c-heart)";let t=0;for(let s=0;s<e.length;s++)t=e.charCodeAt(s)+((t<<5)-t);return`var(--c-pl-${Math.abs(t%6)})`}const ga={async syncLibrary(){if(et(ia))return;ia.set(!0);const e=new mo;e.postMessage({type:"START_SYNC",payload:{url:`http://${Ka.MOODE_IP}/wave-api.php`}}),e.onmessage=t=>{const{type:a,count:s}=t.data;a==="DONE"&&(De(`Library updated: ${s} tracks`,"success"),ia.set(!1),e.terminate()),a==="ERROR"&&(De("Sync Failed","error"),ia.set(!1),e.terminate())},e.onerror=()=>{ia.set(!1),e.terminate()}},async loadPlaylists(){ln.set(!0);try{const e=await Ye.send("listplaylists"),a=na.parsePlaylists(e).map(s=>({...s,color:wd(s.name),colorVar:kd(s.name)}));Rs.set(a)}catch(e){console.error(e)}finally{ln.set(!1)}},async createPlaylistFromQueue(e){if(!e)return;const t=e.replace(/"/g,'\\"');try{await Ye.send(`save "${t}"`),De(`Playlist "${e}" created`,"success"),await this.loadPlaylists()}catch(a){console.error(a),De("Failed to create playlist","error")}},async deletePlaylist(e){if(!e)return;const t=e.replace(/"/g,'\\"');try{await Ye.send(`rm "${t}"`),De("Playlist deleted","info"),await this.loadPlaylists()}catch(a){console.error(a),De("Delete failed","error")}},async renamePlaylist(e,t){if(!e||!t)return;const a=e.replace(/"/g,'\\"'),s=t.replace(/"/g,'\\"');try{await Ye.send(`rename "${a}" "${s}"`),De("Playlist renamed","success"),await this.loadPlaylists()}catch(n){console.error(n),De("Rename failed","error")}},async openPlaylistDetails(e){if(!e)return;cn.set(!0);const t=e.replace(/"/g,'\\"');try{const a=await Ye.send(`listplaylistinfo "${t}"`),s=na.parseTracks(a),n=s.map(o=>o.file).filter(o=>o&&!o.startsWith("http"));let i=new Map;if(n.length>0)try{i=await Na.getFilesMap(n)}catch(o){console.warn("Failed to hydrate playlist from DB",o)}const l=s.map(o=>{const v=i.get(o.file);return v?{...o,thumbHash:v.thumbHash,qualityBadge:v.qualityBadge,title:o.title||v.title,artist:o.artist||v.artist,album:o.album||v.album,_uid:ii()}:{...o,_uid:ii()}});Ur.set(l)}catch(a){console.error(a),De("Could not load playlist","error")}finally{cn.set(!1)}},async movePlaylistTrack(e,t,a){const s=e.replace(/"/g,'\\"');try{await Ye.send(`playlistmove "${s}" ${t} ${a}`)}catch{De("Move failed","error")}},async removeFromPlaylist(e,t){const a=e.replace(/"/g,'\\"');try{await Ye.send(`playlistdelete "${a}" ${t}`),De("Track removed","success")}catch{De("Delete failed","error")}},async loadFavorites(){try{const e=await Ye.send(`listplaylistinfo "${jr}"`),t=na.parseTracks(e),a=new Set;t.forEach(s=>{s.file&&a.add(s.file)}),Ia.set(a)}catch{Ia.set(new Set)}},async toggleFavorite(e){if(!e||!e.file)return;const t=e.file,a=t.replace(/"/g,'\\"'),s=t.startsWith("http"),n=et(Ia);let i=n.has(t);if(!i&&s){const l=gr(t);for(const o of n)if(gr(o)===l){i=!0;break}}Ia.update(l=>{const o=new Set(l);if(i){if(o.delete(t),s){const v=gr(t);for(const d of o)gr(d)===v&&o.delete(d)}}else o.add(t);return o}),hi=hi.then(async()=>{try{const l=await Ye.send(`listplaylistinfo "${jr}"`),o=na.parseTracks(l);let v=[];if(o.forEach((d,u)=>{let h=!1;(d.file===t||s&&gr(d.file)===gr(t)||s&&(d.file.includes(t)||t.includes(d.file)))&&(h=!0),h&&v.push(u)}),i){if(v.length>0){v.sort((d,u)=>u-d);for(const d of v)await Ye.send(`playlistdelete "${jr}" ${d}`);De("Removed from Favorites","info")}}else v.length>0?console.log("[Fav] Track already exists. Skipping."):(await Ye.send(`playlistadd "${jr}" "${a}"`),o.length>0&&await Ye.send(`playlistmove "${jr}" ${o.length} 0`),De("Added to Favorites","success"))}catch(l){console.error("Fav action failed",l),De("Action failed","error")}finally{await this.loadFavorites()}})}};function yo(){Ye.connect(),_d(),ga.loadPlaylists(),ga.loadFavorites()}function $s(e){return Ye.send(e)}const{togglePlay:js,toggleRandom:ar,toggleRepeat:rr,setVolume:Ea,seek:Ln,addToQueue:xd,playNext:wo,removeFromQueue:Sd,moveTrack:Ed,saveQueue:Td,playAllTracks:zn,addAllToQueue:Rn,playUri:$d}=oa,{syncLibrary:Md,loadRadioStations:Ad,loadPlaylists:jn,openPlaylistDetails:ko,toggleFavorite:xo,loadFavorites:Cd,removeFromPlaylist:So,movePlaylistTrack:Eo}=ga;function Zr(e){const t=et(Ht),a=et(Ha),s=et(zs);if(t.file&&t.file.startsWith("http")&&a.length>0&&!t.isYandex&&(e==="next"||e==="previous")){let i=a.findIndex(o=>o.name===s);i===-1&&(i=0);let l;e==="next"?(l=i+1,l>=a.length&&(l=0)):(l=i-1,l<0&&(l=a.length-1)),In(a[l])}else e==="next"&&oa.next(),e==="previous"&&oa.previous()}function In(e){if(!e)return;zs.set(e.name);const t=e[1]||e.station||e.file||e.url;t&&oa.playUri(t,{title:e.name,artist:e.genre||"Radio Stream",stationName:e.name})}function Is(e){e&&(zs.set(null),oa.playUri(e.file,{title:e.title,artist:e.artist,album:e.album,stationName:null}))}const Pd=Object.freeze(Object.defineProperty({__proto__:null,addAllToQueue:Rn,addToQueue:xd,connect:yo,loadFavorites:Cd,loadPlaylists:jn,loadRadioStations:Ad,movePlaylistTrack:Eo,moveTrack:Ed,nav:Zr,openPlaylistDetails:ko,playAllTracks:zn,playNext:wo,playStation:In,playTrackOptimistic:Is,playUri:$d,removeFromPlaylist:So,removeFromQueue:Sd,runMpdRequest:$s,saveQueue:Td,seek:Ln,setVolume:Ea,syncLibrary:Md,toggleFavorite:xo,togglePlay:js,toggleRandom:ar,toggleRepeat:rr},Symbol.toStringTag,{value:"Module"})),ea={async request(e,t={}){const a=new URL(window.location.origin+Wa.YANDEX);a.searchParams.append("action",e);for(const n in t)a.searchParams.append(n,t[n]);const s=await fetch(a);if(!s.ok)throw new Error("API Error");return await s.json()},async search(e){return await this.request("search",{query:e})},async getUserPlaylists(){return await this.request("get_playlists")},async getLanding(){return await this.request("get_landing")},async getArtistDetails(e){return await this.request("get_artist_details",{id:e})},async getAlbumDetails(e){return await this.request("get_album_details",{id:e})},async getPlaylistTracks(e,t){return await this.request("get_playlist_tracks",{uid:e,kind:t})},async getFavoritesIds(){return await this.request("get_favorites_ids")},async playRadio(e){return e?await this.request("play_station",{station:"track:"+e}):await this.request("play_station",{station:"user:onetwo"})},async playStation(e){return await this.request("play_station",{station:e})},async playTrack(e){return await this.request("play_track",{id:e})},async toggleLike(e,t){const a=t?"dislike":"like";return await this.request(a,{track_id:e})}};function Nn(e,t=2e3){let a;const s=i=>{i.type==="mousedown"&&i.button!==0||(a=setTimeout(()=>{e.dispatchEvent(new CustomEvent("longpress",{detail:{originalEvent:i}}))},t))},n=()=>{clearTimeout(a)};return e.addEventListener("mousedown",s),e.addEventListener("touchstart",s,{passive:!0}),e.addEventListener("mouseup",n),e.addEventListener("mouseleave",n),e.addEventListener("touchend",n),e.addEventListener("touchcancel",n),e.addEventListener("touchmove",n),{destroy(){e.removeEventListener("mousedown",s),e.removeEventListener("touchstart",s),e.removeEventListener("mouseup",n),e.removeEventListener("mouseleave",n),e.removeEventListener("touchend",n),e.removeEventListener("touchcancel",n),e.removeEventListener("touchmove",n)}}}var Ld=k('<div class="drag-handle svelte-5cs2hz" title="Drag to reorder"><div class="icon-small svelte-5cs2hz"><!></div></div>'),zd=k('<div class="eq-anim svelte-5cs2hz"><span class="bar b1 svelte-5cs2hz"></span> <span class="bar b2 svelte-5cs2hz"></span> <span class="bar b3 svelte-5cs2hz"></span></div>'),Rd=k('<div class="icon-small svelte-5cs2hz"><!></div>'),jd=k('<div class="icon-small svelte-5cs2hz"><!></div>'),Id=k('<div class="icon-small accent svelte-5cs2hz"><!></div>'),Nd=k('<span class="num svelte-5cs2hz"> </span>'),Dd=k('<button class="num-box svelte-5cs2hz"><!></button>'),Od=k('<div slot="fallback" class="icon-ph svelte-5cs2hz"><!></div>'),Fd=k('<span class="meta-tag quality svelte-5cs2hz"> </span>'),qd=k('<span class="yandex-icon-inline svelte-5cs2hz" title="Yandex Music"><!></span>'),Bd=k('<button class="btn-icon small remove svelte-5cs2hz"><!></button>'),Ud=k('<div class="dur svelte-5cs2hz"> </div>'),Yd=k('<div role="button" tabindex="0"><div class="left svelte-5cs2hz"><!> <div class="thumb svelte-5cs2hz"><!></div></div> <div class="info svelte-5cs2hz"><div class="title-row svelte-5cs2hz"><div class="title text-ellipsis svelte-5cs2hz"> </div> <!></div> <div> </div></div> <div class="right svelte-5cs2hz"><!> <button class="btn-icon small context-menu-btn svelte-5cs2hz"><!></button> <button><!></button> <!></div></div>');function Mr(e,t){Et(t,!1);const a=()=>Ce(fs,"$yandexFavorites",o),s=()=>Ce(Ia,"$favorites",o),n=()=>Ce(Qt,"$navigationStack",o),i=()=>Ce(Dt,"$activeMenuTab",o),l=()=>Ce(Ha,"$stations",o),[o,v]=jt(),d=T(),u=T(),h=T(),f=T(),p=T(),S=T(),x=T(),w=T(),E=T(),B=T(),se=T(),K=T(),te=T(),_e=T(),V=T(),W=T(),ne=T(),je=T();let F=wt(t,"track",8),P=wt(t,"index",8),H=wt(t,"isEditable",8,!1),ve=wt(t,"playingIndex",24,()=>-1),J=wt(t,"playingFile",8,null),pe=wt(t,"isPlaying",8,!1);const U=Mn();let j=T(!1),Ee=T(!1);function G(Y){if(r(w))return"â";const oe=parseFloat(Y);if(!oe||isNaN(oe)||oe===0)return"0:00";const Se=Math.round(oe),Ie=Math.floor(Se/60),Ne=Se%60;return`${Ie}:${Ne.toString().padStart(2,"0")}`}function ce(Y){Y.stopPropagation(),r(S)?js():U("play")}function he(){return r(h)?.view==="details"&&r(h).data?.name?{type:"playlist",playlistName:r(h).data.name,index:P()}:r(f)?{type:"queue",index:P()}:{type:"general"}}function A(Y){Y.stopPropagation(),Kr(Y,F(),he())}function D(Y){H()||Kr(Y.detail.originalEvent,F(),he())}function $(Y){Y.stopPropagation(),r(d)?U("artistclick",F()):!r(w)&&F().artist&&(Dt.set("artists"),Ba("albums_by_artist",{name:F().artist}))}async function ae(Y){if(Y.stopPropagation(),r(d))try{await ea.toggleLike(F().id,r(u)),r(u)?(fs.update(oe=>(oe.delete(String(F().id)),oe)),De("Removed from Yandex Likes","success"),r(S)&&wo()):(fs.update(oe=>(oe.add(String(F().id)),oe)),De("Added to Yandex Likes","success"))}catch{De("Failed to update Yandex like","error")}else xo(F())}le(()=>N(F()),()=>{F()&&g(Ee,!1)}),le(()=>N(F()),()=>{g(d,F().isYandex||F().service==="yandex")}),le(()=>(r(d),a(),N(F()),s()),()=>{g(u,r(d)?a().has(String(F().id)):s().has(F().file))}),le(()=>n(),()=>{g(h,n()[n().length-1])}),le(()=>(r(h),i()),()=>{g(f,r(h)?.view==="queue"||r(h)?.view==="root"&&i()==="queue")}),le(()=>(r(f),N(P()),N(ve())),()=>{g(p,r(f)?Number(P())===ve():!1)}),le(()=>(N(F()),N(J())),()=>{g(S,F().file===J())}),le(()=>(r(S),r(p)),()=>{g(x,r(S)&&!r(p))}),le(()=>(N(F()),r(d)),()=>{g(w,F().file&&(String(F().file).startsWith("http")||String(F().file).includes("RADIO"))&&!r(d))}),le(()=>(r(p),N(pe()),r(j)),()=>{g(E,r(p)&&pe()&&r(j))}),le(()=>(r(p),N(pe()),r(j)),()=>{g(B,r(p)&&pe()&&!r(j))}),le(()=>(r(p),N(pe()),r(j)),()=>{g(se,r(p)&&!pe()&&!r(j))}),le(()=>(r(j),r(E)),()=>{g(K,r(j)&&!r(E))}),le(()=>N(F()),()=>{g(te,F().title||F().file?.split("/").pop())}),le(()=>N(F()),()=>{g(_e,F().artist||"Unknown")}),le(()=>N(F()),()=>{g(V,G(F().time||F().duration))}),le(()=>N(F()),()=>{g(W,F().qualityBadge?F().qualityBadge.split(" ")[0]:null)}),le(()=>{},()=>{g(ne,null)}),le(()=>(r(Ee),N(F()),l(),r(ne),Gr),()=>{g(je,r(Ee)?$r(F(),l(),r(ne)):Gr(F(),"sm",l(),r(ne)))}),Vt(),Ct();var O=Yd();let ue;var ee=c(O),Q=c(ee);{var fe=Y=>{var oe=Ld(),Se=c(oe),Ie=c(Se);re(Ie,()=>(N(y),m(()=>y.DRAG_HANDLE))),M("mousedown",oe,Ne=>U("startdrag",Ne)),M("touchstart",oe,Ne=>U("startdrag",Ne),void 0,!0),M("click",oe,Gt(function(Ne){Xr.call(this,t,Ne)})),b(Y,oe)},be=Y=>{var oe=Dd(),Se=c(oe);{var Ie=Ue=>{var Ve=zd();b(Ue,Ve)},Ne=Ue=>{var Ve=rt(),We=ze(Ve);{var Be=Ke=>{var Qe=Rd(),at=c(Qe);re(at,()=>(N(y),m(()=>y.PAUSE))),b(Ke,Qe)},Ze=Ke=>{var Qe=rt(),at=ze(Qe);{var Je=lt=>{var ut=jd(),mt=c(ut);re(mt,()=>(N(y),m(()=>y.PLAY))),b(lt,ut)},ot=lt=>{var ut=rt(),mt=ze(ut);{var dt=Fe=>{var ct=Id(),kt=c(ct);re(kt,()=>(N(y),m(()=>y.PLAY))),b(Fe,ct)},ft=Fe=>{var ct=Nd(),kt=c(ct);de(()=>ie(kt,P()+1)),b(Fe,ct)};C(mt,Fe=>{r(se)?Fe(dt):Fe(ft,!1)},!0)}b(lt,ut)};C(at,lt=>{r(K)?lt(Je):lt(ot,!1)},!0)}b(Ke,Qe)};C(We,Ke=>{r(E)?Ke(Be):Ke(Ze,!1)},!0)}b(Ue,Ve)};C(Se,Ue=>{r(B)?Ue(Ie):Ue(Ne,!1)})}M("click",oe,ce),b(Y,oe)};C(Q,Y=>{H()?Y(fe):Y(be,!1)})}var ke=_(Q,2),xe=c(ke);Ot(xe,{get src(){return r(je)},get alt(){return r(te)},radius:"4px",$$events:{error:()=>g(Ee,!0)},$$slots:{fallback:(Y,oe)=>{var Se=Od(),Ie=c(Se);re(Ie,()=>(r(w),N(y),m(()=>r(w)?y.RADIO:y.ALBUMS))),vt(1,Se,()=>yt),b(Y,Se)}}});var Oe=_(ee,2),Te=c(Oe),$e=c(Te),qe=c($e),He=_($e,2);{var L=Y=>{var oe=Fd(),Se=c(oe);de(()=>ie(Se,r(W))),b(Y,oe)};C(He,Y=>{r(W)&&!r(w)&&Y(L)})}var z=_(Te,2);let I;var Z=c(z),Pe=_(Oe,2),me=c(Pe);{var Me=Y=>{var oe=qd(),Se=c(oe);re(Se,()=>(N(y),m(()=>y.YANDEX))),b(Y,oe)};C(me,Y=>{r(d)&&Y(Me)})}var Re=_(me,2),q=c(Re);re(q,()=>(N(y),m(()=>y.DOTS)));var R=_(Re,2);let X;var Ae=c(R);re(Ae,()=>(r(u),N(y),m(()=>r(u)?y.HEART_FILLED:y.HEART)));var ye=_(R,2);{var we=Y=>{var oe=Bd(),Se=c(oe);re(Se,()=>(N(y),m(()=>y.REMOVE))),M("click",oe,Gt(()=>U("remove",{index:P()}))),b(Y,oe)},ge=Y=>{var oe=Ud(),Se=c(oe);de(()=>ie(Se,r(V))),b(Y,oe)};C(ye,Y=>{H()?Y(we):Y(ge,!1)})}Ft(()=>M("click",O,()=>!r(p)&&U("play"))),Ft(()=>M("mouseenter",O,()=>g(j,!0))),Ft(()=>M("mouseleave",O,()=>g(j,!1))),En(O,Y=>Nn?.(Y)),Ft(()=>M("longpress",O,D)),de(()=>{ue=Ge(O,1,"row svelte-5cs2hz",null,ue,{active:r(p),striped:r(x),editable:H()}),Yt($e,"title",r(te)),ie(qe,r(te)),I=Ge(z,1,"artist text-ellipsis svelte-5cs2hz",null,I,{link:!r(w)}),ie(Z,r(_e)),X=Ge(R,1,"btn-icon small svelte-5cs2hz",null,X,{liked:r(u)})}),M("click",z,$),M("click",Re,A),M("click",R,Gt(ae)),b(e,O),Tt(),v()}const vs=100,pi=5,gi=25,_i=3;function Hd({tracksStore:e,onMoveTrack:t}){const a=Xe(!1),s=Xe(!1),n=Xe(!1),i=Xe(null),l=Xe(null),o=Xe(null),v=Xe({x:0,y:0,width:0,height:0,grabOffsetX:0,grabOffsetY:0}),d=Xe(null);let u=!1,h=0,f=0,p=0,S=0;const x={scrollContainer:null,listBodyContainer:null};let w=null;function E(P,H,ve){const J=P.detail;if(J.button===2||(window.getSelection&&window.getSelection().removeAllRanges(),!x.scrollContainer))return;const U=x.scrollContainer.querySelectorAll(".row-wrapper")[H];if(!U)return;const j=U.getBoundingClientRect(),Ee=J.touches?J.touches[0].clientX:J.clientX,G=J.touches?J.touches[0].clientY:J.clientY,ce=Ee-j.left,he=G-j.top;u=!0,a.set(!1),s.set(!1),h=Ee,f=G,p=Ee,S=G,i.set(H),l.set(H),d.set(ve),o.set(null),v.set({x:Ee,y:G,width:j.width,height:j.height,grabOffsetX:ce,grabOffsetY:he})}function B(P){if(!u||et(s))return;const H=P.touches?P.touches[0].clientX:P.clientX,ve=P.touches?P.touches[0].clientY:P.clientY;if(!et(a)){const J=Math.abs(H-h),pe=Math.abs(ve-f);if(J<_i&&pe<_i)return;a.set(!0)}P.cancelable&&P.preventDefault(),p=H,S=ve,v.update(J=>({...J,x:p,y:S})),W(S),se()}function se(){if(!x.listBodyContainer)return;const P=x.listBodyContainer.getBoundingClientRect(),H=et(v),J=S-P.top-H.grabOffsetY+H.height/2,pe=et(e).length;if(J<0){l.set(0);return}if(J>P.height){l.set(pe);return}const U=Array.from(x.listBodyContainer.querySelectorAll(".row-wrapper"));let j=-1,Ee=1/0;U.forEach((G,ce)=>{const he=G.offsetTop+G.offsetHeight/2,A=Math.abs(J-he);A<Ee&&(Ee=A,j=ce)}),j!==-1&&l.set(j)}function K(P){if(u){if(u=!1,!et(a)){_e();return}te()}}async function te(){je(),se(),a.set(!1),s.set(!0);const P=et(l);if(x.listBodyContainer&&P!==null){const j=x.listBodyContainer.querySelectorAll(".row-wrapper"),Ee=x.listBodyContainer.getBoundingClientRect(),G=j[P];let ce=0,he=0,A=!1;if(G)ce=Ee.top+G.offsetTop,he=Ee.left+G.offsetLeft,A=!0;else if(P>=j.length&&j.length>0){const D=j[j.length-1];ce=Ee.top+D.offsetTop+D.offsetHeight,he=Ee.left+D.offsetLeft,A=!0}else j.length===0&&(ce=Ee.top,he=Ee.left,A=!0);A&&v.update(D=>({...D,y:ce+D.grabOffsetY,x:he+D.grabOffsetX}))}await new Promise(j=>setTimeout(j,250)),n.set(!0),await kr();const H=et(i),ve=et(e).length;let J=Math.max(0,Math.min(P,ve)),pe=J;if(H!==null&&H!==J){const j=[...et(e)],[Ee]=j.splice(H,1);pe=Math.max(0,Math.min(pe,j.length)),j.splice(pe,0,Ee),e.set(j),t&&t(H,pe),i.set(pe)}await kr(),d.set(null),i.set(null),l.set(null),s.set(!1);const U=H!==J?pe:H;o.set(U),await kr(),requestAnimationFrame(()=>{requestAnimationFrame(()=>{n.set(!1),setTimeout(()=>{o.set(null)},300)})})}function _e(){u=!1,V()}function V(){a.set(!1),s.set(!1),i.set(null),l.set(null),d.set(null),je()}function W(P){if(!x.scrollContainer)return;const{top:H,bottom:ve}=x.scrollContainer.getBoundingClientRect(),J=P-H,pe=ve-P;je();let U=0;if(J<vs&&J>0){const j=1-J/vs;U=-(pi+gi*(j*j))}else if(pe<vs&&pe>0){const j=1-pe/vs;U=pi+gi*(j*j)}U!==0&&ne(U)}function ne(P){w||(w=requestAnimationFrame(function H(){x.scrollContainer&&(x.scrollContainer.scrollTop+=P,et(a)&&(v.update(ve=>({...ve,x:p,y:S})),se(),w=requestAnimationFrame(H)))}))}function je(){w&&(cancelAnimationFrame(w),w=null)}function F(P,H,ve,J,pe,U){return U||!H&&!ve||J===null||pe===null?"":P===J?"opacity: 0; pointer-events: none;":J===pe?"":J<pe&&P>J&&P<=pe?"transform: translateY(-100%);":J>pe&&P>=pe&&P<J?"transform: translateY(100%);":""}return{isDragging:a,isDropping:s,isReordering:n,draggingIndex:i,hoverIndex:l,justDroppedIndex:o,draggedItemData:d,ghostCoords:v,refs:x,onDragInit:E,onPointerMove:B,onPointerUp:K,getRowStyle:F,cancelDrag:_e}}var Vd=k('<div><div style="pointer-events: none; width: 100%; height: 100%;" class="svelte-ym6b2"><!></div></div>'),Wd=k('<div class="skeleton-row svelte-ym6b2"><div class="sk-left svelte-ym6b2"><!> <!></div> <div class="sk-info svelte-ym6b2"><!> <!></div> <div class="sk-right svelte-ym6b2"><!></div></div>'),Qd=k('<div class="skeletons-wrapper svelte-ym6b2"></div>'),Xd=k("<div><!></div>"),Kd=k('<div class="content-padded svelte-ym6b2" style="text-align: center; opacity: 0.5;"> </div>'),Gd=k("<!> <!> <!>",1),Zd=k('<div><!> <div class="list-body svelte-ym6b2"><!> <!></div></div>');function ss(e,t){Et(t,!1);const a=()=>Ce(Qt,"$navigationStack",p),s=()=>Ce(Dt,"$activeMenuTab",p),n=()=>Ce(je,"$isDragging",p),i=()=>Ce(F,"$isDropping",p),l=()=>Ce(pe,"$draggedItemData",p),o=()=>Ce(U,"$ghostCoords",p),v=()=>Ce(H,"$draggingIndex",p),d=()=>Ce(x(),"$itemsStore",p),u=()=>Ce(J,"$justDroppedIndex",p),h=()=>Ce(P,"$isReordering",p),f=()=>Ce(ve,"$hoverIndex",p),[p,S]=jt();let x=wt(t,"itemsStore",8),w=wt(t,"isEditMode",8,!1),E=wt(t,"isLoading",8,!1),B=wt(t,"emptyText",8,"List is empty"),se=wt(t,"onMoveItem",8,(ee,Q)=>{}),K=T(""),te=T(0),_e=T(!1);Ya(async()=>{g(te,td(r(K))),!E()&&r(te)>0&&r(W).refs.scrollContainer&&(await kr(),is(W,r(W).refs.scrollContainer.scrollTop=r(te)),g(_e,!0))});async function V(){await kr(),r(W).refs.scrollContainer&&(is(W,r(W).refs.scrollContainer.scrollTop=r(te)),g(_e,!0))}vo(()=>{r(W).cancelDrag(),r(W).refs.scrollContainer&&ed(r(K),r(W).refs.scrollContainer.scrollTop)});const W=T(Hd({tracksStore:x(),onMoveTrack:(ee,Q)=>{se()(ee,Q)}})),ne=r(W),je=ne.isDragging,F=ne.isDropping,P=ne.isReordering,H=ne.draggingIndex,ve=ne.hoverIndex,J=ne.justDroppedIndex,pe=ne.draggedItemData,U=ne.ghostCoords,j=T(ne.refs);function Ee(ee,Q,fe){w()&&r(W).onDragInit(ee,Q,fe)}le(()=>(a(),s()),()=>{const ee=a(),Q=ee[ee.length-1],fe=s();if(Q&&Q.view==="root")g(K,`root_${fe}`);else if(Q){const be=Q.data?Q.data.name||Q.data:"unknown";g(K,`${Q.view}_${be}`)}}),le(()=>(N(E()),r(_e),r(te),r(W)),()=>{!E()&&!r(_e)&&r(te)>0&&r(W).refs.scrollContainer&&V()}),Vt(),Ct();var G=Zd();M("mousemove",Ra,function(...ee){r(W).onPointerMove?.apply(this,ee)}),M("mouseup",Ra,function(...ee){r(W).onPointerUp?.apply(this,ee)}),M("touchmove",Ra,function(...ee){r(W).onPointerMove?.apply(this,ee)},void 0,!1),M("touchend",Ra,function(...ee){r(W).onPointerUp?.apply(this,ee)}),M("touchcancel",Ra,function(...ee){r(W).onPointerUp?.apply(this,ee)});let ce;var he=c(G);{var A=ee=>{var Q=Vd();let fe;var be=c(Q),ke=c(be);Dr(ke,t,"row",{get item(){return l()},get index(){return v()},isGhost:!0,startDrag:()=>{}}),de(()=>{fe=Ge(Q,1,"floating-item svelte-ym6b2",null,fe,{dropping:i()}),pt(Q,`
            top: ${o(),m(()=>o().y-o().grabOffsetY)??""}px; 
            left: ${o(),m(()=>o().x-o().grabOffsetX)??""}px;
            width: ${o(),m(()=>o().width)??""}px; 
            height: ${o(),m(()=>o().height)??""}px;
        `)}),b(ee,Q)};C(he,ee=>{(n()||i())&&l()&&ee(A)})}var D=_(he,2),$=c(D);Dr($,t,"header",{});var ae=_($,2);{var O=ee=>{var Q=Qd();bt(Q,4,()=>Array(10),Rt,(fe,be)=>{var ke=Wd(),xe=c(ke),Oe=c(xe);Kt(Oe,{width:"24px",height:"24px",radius:"4px",style:"opacity: 0.3"});var Te=_(Oe,2);Kt(Te,{width:"40px",height:"40px",radius:"4px",style:"margin-left: 12px;"});var $e=_(xe,2),qe=c($e);Kt(qe,{width:"40%",height:"14px",radius:"4px",style:"margin-bottom: 6px;"});var He=_(qe,2);Kt(He,{width:"25%",height:"12px",radius:"4px",style:"opacity: 0.6"});var L=_($e,2),z=c(L);Kt(z,{width:"30px",height:"12px",radius:"4px"}),b(fe,ke)}),b(ee,Q)},ue=ee=>{var Q=Gd(),fe=ze(Q);bt(fe,3,d,(Oe,Te)=>Oe._uid||Te,(Oe,Te,$e)=>{var qe=Xd();let He;var L=c(qe);Dr(L,t,"row",{get item(){return r(Te)},get index(){return r($e)},isGhost:!1,startDrag:z=>Ee(z,r($e),r(Te))}),de(z=>{He=Ge(qe,1,"row-wrapper svelte-ym6b2",null,He,{"ghost-placeholder":v()===r($e)&&(n()||i()),"just-dropped":u()===r($e),"no-transition":h()}),pt(qe,z)},[()=>(r(W),N(r($e)),n(),i(),v(),f(),h(),m(()=>r(W).getRowStyle(r($e),n(),i(),v(),f(),h())))]),b(Oe,qe)});var be=_(fe,2);{var ke=Oe=>{var Te=Kd(),$e=c(Te);de(()=>ie($e,B())),b(Oe,Te)};C(be,Oe=>{d(),m(()=>d().length===0)&&Oe(ke)})}var xe=_(be,2);Dr(xe,t,"footer",{}),b(ee,Q)};C(ae,ee=>{E()?ee(O):ee(ue,!1)})}Ua(D,ee=>is(j,r(j).listBodyContainer=ee),()=>r(j)?.listBodyContainer),Ua(G,ee=>is(j,r(j).scrollContainer=ee),()=>r(j)?.scrollContainer),de(()=>ce=Ge(G,1,"base-list-scroll-container svelte-ym6b2",null,ce,{dragging:n()})),vt(1,D,()=>yt,()=>({duration:200})),b(e,G),Tt(),S()}var Jd=k('<div slot="fallback" class="icon-fallback svelte-1eh2rsb"><!></div>'),ev=k('<span class="meta-tag svelte-1eh2rsb"> </span>'),tv=k('<div class="header-subtitle-row svelte-1eh2rsb"><h2 class="header-sub-text svelte-1eh2rsb"> </h2> <!></div>'),av=k('<span class="meta-tag svelte-1eh2rsb"> </span>'),rv=k('<span class="meta-tag svelte-1eh2rsb"> </span>'),sv=k('<span class="meta-tag quality svelte-1eh2rsb"> </span>'),nv=k('<div slot="header" class="content-padded svelte-1eh2rsb"><div class="view-header svelte-1eh2rsb"><div class="header-art svelte-1eh2rsb"><div style="width: 100%; height: 100%;" class="svelte-1eh2rsb"><!></div></div> <div class="header-info svelte-1eh2rsb"><div class="header-text-group svelte-1eh2rsb"><div class="header-label svelte-1eh2rsb"> </div> <h1 class="header-title svelte-1eh2rsb"> </h1> <!> <div class="meta-badges svelte-1eh2rsb"><!> <!> <!></div></div> <div class="header-actions svelte-1eh2rsb"><button class="btn-primary svelte-1eh2rsb"> </button> <button class="btn-secondary svelte-1eh2rsb"> </button></div></div></div></div>'),iv=k('<div slot="row" class="svelte-1eh2rsb"><!></div>'),ov=k("<button> </button>"),lv=k('<div class="sort-backdrop svelte-1eh2rsb"></div> <div class="sort-menu svelte-1eh2rsb"></div>',1),cv=k('<div class="sort-wrapper svelte-1eh2rsb"><button class="sort-trigger svelte-1eh2rsb"><span class="svelte-1eh2rsb"> </span> <span class="sort-trigger-icon svelte-1eh2rsb"><!></span></button> <!></div>'),dv=k('<div class="music-card skeleton-card svelte-1eh2rsb"><div class="card-img-container svelte-1eh2rsb"><!></div> <div class="card-title svelte-1eh2rsb" style="margin-top: 12px;"><!></div> <div class="card-sub-row svelte-1eh2rsb" style="margin-top: 6px;"><!></div></div>'),vv=k('<div class="music-grid svelte-1eh2rsb"></div>'),uv=k('<div class="group-header header-label svelte-1eh2rsb"> </div>'),fv=k('<div slot="fallback" class="icon-fallback svelte-1eh2rsb"><!></div>'),hv=k('<div class="card-sub text-ellipsis svelte-1eh2rsb"> </div>'),pv=k('<div class="card-badge svelte-1eh2rsb"> </div>'),gv=k('<div class="card-badge quality svelte-1eh2rsb"> </div>'),_v=k('<div class="music-card svelte-1eh2rsb" role="button" tabindex="0"><div class="card-img-container svelte-1eh2rsb"><!> <div class="play-overlay svelte-1eh2rsb"><span class="overlay-icon svelte-1eh2rsb"><!></span></div></div> <div class="card-title svelte-1eh2rsb"> </div> <div class="card-sub-row svelte-1eh2rsb"><!> <!> <!></div></div>'),mv=k('<div class="empty-text svelte-1eh2rsb">No results found</div>'),bv=k('<div class="music-grid svelte-1eh2rsb"></div>'),yv=k('<div class="content-padded svelte-1eh2rsb"><div class="search-input-container svelte-1eh2rsb"><span class="search-icon svelte-1eh2rsb"><!></span> <input type="text" class="svelte-1eh2rsb"/> <!></div> <!></div>'),wv=k("<div><!></div>");function kv(e,t){Et(t,!1);const a=()=>Ce(u,"$itemsStore",n),s=()=>Ce(Qt,"$navigationStack",n),[n,i]=jt(),l=T(),o=T(),v=T();let d=wt(t,"activeCategory",8,"artists");const u=Xe([]);let h=T(!0),f=T(""),p=T("name"),S=T(!1);const x=[{id:"name",label:"A-Z"},{id:"artist",label:"Artist"},{id:"year",label:"Oldest"},{id:"year_desc",label:"Newest"}];let w=T(!1),E=T(!1),B=T(null),se=T(""),K=T(""),te=T(""),_e=T(0),V=0;function W(){g(S,!r(S))}function ne(G){g(p,G),g(S,!1)}function je(G,ce){if(!G||G.length===0)return[];const he=[...G].sort((A,D)=>{switch(ce){case"name":return A.displayName.localeCompare(D.displayName,void 0,{sensitivity:"base"});case"artist":const $=A.artist||"",ae=D.artist||"",O=$.localeCompare(ae,void 0,{sensitivity:"base"});return O!==0?O:(parseInt(A.year)||0)-(parseInt(D.year)||0);case"year":return(parseInt(A.year)||0)-(parseInt(D.year)||0);case"year_desc":return(parseInt(D.year)||0)-(parseInt(A.year)||0);default:return 0}});if(ce==="artist"){const A=[];let D=null;return he.forEach($=>{const ae=$.artist||"Unknown Artist";ae!==D&&(A.push({_uid:`header-${ae}`,isHeader:!0,title:ae}),D=ae),A.push($)}),A}return he}async function F(G,ce){if(!ce)return;const he=++V;g(h,!0),u.set([]),g(B,ce.data),g(se,""),g(K,""),g(te,""),g(_e,0),console.log(`[LibraryView #${he}] Start loading:`,ce);try{let A=[];if(ce.view==="root")A=G==="artists"?await Na.getArtists():await Na.getAlbums();else if(ce.view==="albums_by_artist"){const $=ce.data.name||ce.data;A=await Na.getArtistAlbums($),g(p,"year")}else if(ce.view==="tracks_by_album"){const $=ce.data.name||ce.data,ae=ce.data.artist;A=await Na.getAlbumTracks($,ae)}if(he!==V){console.warn(`[LibraryView #${he}] Request cancelled (stale).`);return}const D=A.map(($,ae)=>{const ue=typeof $=="string"?{name:$}:$;let ee=String(ue.year||"");return ee.length>4&&(ee=ee.substring(0,4)),{...ue,displayName:ue.name||ue.title||ue.artist||"Unknown",thumbFile:ue.file||null,year:ee,_uid:(ue.file||ue.name||ae)+G+ce.view}});if(console.log(`[LibraryView #${he}] Setting ${D.length} items.`),u.set(D),ce.view==="tracks_by_album"&&D.length>0){g(B,D[0]),g(_e,D.length),g(te,D[0].year);const $=D.reduce((ae,O)=>ae+(O.time||0),0);if($>0){const ae=Math.floor($/3600),O=Math.floor($%3600/60);g(se,ae>0?`${ae} hr ${O} min`:`${O} min`)}D[0].qualityBadge&&g(K,D[0].qualityBadge)}}catch(A){he===V&&(console.error(A),u.set([]))}finally{he===V&&g(h,!1)}}function P(G){r(v).view==="root"?d()==="artists"?Ba("albums_by_artist",G):Ba("tracks_by_album",G):r(v).view==="albums_by_artist"&&Ba("tracks_by_album",G)}function H(){const G=a();if(G.length>0){const ce=r(v).data.name||r(v).data.displayName||"this selection";pa({title:"Replace Queue?",message:`This will clear your queue and play all tracks from "${ce}".`,confirmLabel:"Play",type:"confirm",onConfirm:()=>{g(w,!0),zn(G)}})}}function ve(){const G=a();G.length>0&&(g(E,!0),Rn(G),setTimeout(()=>{g(E,!1)},2e3))}le(()=>N(d()),()=>{d()&&(g(f,""),d(),g(p,"name"))}),le(()=>(r(p),y),()=>{g(l,r(p)==="year_desc"?y.SORT_ASC:y.SORT_DESC)}),le(()=>(a(),r(f),r(p)),()=>{g(o,je(a().filter(G=>{if(!r(f))return!0;const ce=r(f).toLowerCase();return G.displayName.toLowerCase().includes(ce)||G.artist&&G.artist.toLowerCase().includes(ce)}),r(p)))}),le(()=>s(),()=>{g(v,s()[s().length-1])}),le(()=>(N(d()),r(v)),()=>{F(d(),r(v))}),le(()=>r(v),()=>{r(v)&&(g(w,!1),g(E,!1),g(S,!1))}),Vt(),Ct();var J=wv();let pe;var U=c(J);{var j=G=>{ss(G,{get itemsStore(){return u},get isLoading(){return r(h)},isEditMode:!1,emptyText:"No tracks found",$$slots:{header:(ce,he)=>{var A=nv(),D=c(A),$=c(D),ae=c($),O=c(ae);{let q=_t(()=>(N($r),r(B),m(()=>$r(r(B)))));Ot(O,{get src(){return r(q)},alt:"Art",radius:"8px",$$slots:{fallback:(R,X)=>{var Ae=Jd(),ye=c(Ae);re(ye,()=>(N(y),m(()=>y.ALBUMS))),b(R,Ae)}}})}var ue=_($,2),ee=c(ue),Q=c(ee),fe=c(Q),be=_(Q,2),ke=c(be),xe=_(be,2);{var Oe=q=>{var R=tv(),X=c(R),Ae=c(X),ye=_(X,2);{var we=ge=>{var Y=ev(),oe=c(Y);de(()=>ie(oe,r(te))),b(ge,Y)};C(ye,ge=>{r(te)&&r(te)!=="0"&&ge(we)})}de(()=>ie(Ae,(r(B),m(()=>r(B).artist)))),b(q,R)};C(xe,q=>{r(B),m(()=>r(B)&&r(B).artist)&&q(Oe)})}var Te=_(xe,2),$e=c(Te);{var qe=q=>{var R=av(),X=c(R);de(()=>ie(X,`${r(_e)??""} tracks`)),b(q,R)};C($e,q=>{r(_e)>0&&q(qe)})}var He=_($e,2);{var L=q=>{var R=rv(),X=c(R);de(()=>ie(X,r(se))),b(q,R)};C(He,q=>{r(se)&&q(L)})}var z=_(He,2);{var I=q=>{var R=sv(),X=c(R);de(()=>ie(X,r(K))),b(q,R)};C(z,q=>{r(K)&&q(I)})}var Z=_(ee,2),Pe=c(Z),me=c(Pe),Me=_(Pe,2),Re=c(Me);de(()=>{ie(fe,(r(v),m(()=>r(v).view==="albums_by_artist"?"Artist":"Album"))),Yt(be,"title",(r(v),m(()=>r(v).data.name||r(v).data.displayName))),ie(ke,(r(v),m(()=>r(v).data.name||r(v).data.displayName||"Unknown"))),Pe.disabled=r(w),ie(me,r(w)?"Playing...":"Play All"),Me.disabled=r(E),ie(Re,r(E)?"Added":"To Queue")}),M("click",Pe,H),M("click",Me,ve),b(ce,A)},row:(ce,he)=>{var A=iv();const D=_t(()=>he.item),$=_t(()=>he.index);var ae=c(A);Mr(ae,{get track(){return r(D)},get index(){return r($)},isEditable:!1,$$events:{play:()=>Is(r(D))}}),b(ce,A)}}})},Ee=G=>{var ce=yv(),he=c(ce),A=c(he),D=c(A);re(D,()=>(N(y),m(()=>y.SEARCH)));var $=_(A,2),ae=_($,2);{var O=fe=>{var be=cv(),ke=c(be),xe=c(ke),Oe=c(xe),Te=_(xe,2),$e=c(Te);re($e,()=>r(l));var qe=_(ke,2);{var He=L=>{var z=lv(),I=ze(z),Z=_(I,2);bt(Z,5,()=>x,Rt,(Pe,me)=>{var Me=ov();let Re;var q=c(Me);de(()=>{Re=Ge(Me,1,"sort-item svelte-1eh2rsb",null,Re,{selected:r(p)===r(me).id}),ie(q,(r(me),m(()=>r(me).label)))}),M("click",Me,()=>ne(r(me).id)),b(Pe,Me)}),M("click",I,W),vt(3,I,()=>yt,()=>({duration:100})),vt(3,Z,()=>An,()=>({start:.95,duration:100})),b(L,z)};C(qe,L=>{r(S)&&L(He)})}de(L=>ie(Oe,L),[()=>(r(p),m(()=>x.find(L=>L.id===r(p))?.label))]),M("click",ke,W),b(fe,be)};C(ae,fe=>{N(d()),r(v),m(()=>d()==="albums"||r(v).view==="albums_by_artist")&&fe(O)})}var ue=_(he,2);{var ee=fe=>{var be=vv();bt(be,4,()=>Array(12),Rt,(ke,xe)=>{var Oe=dv(),Te=c(Oe),$e=c(Te);Kt($e,{width:"100%",height:"100%",radius:"8px"});var qe=_(Te,2),He=c(qe);Kt(He,{width:"80%",height:"14px",radius:"4px"});var L=_(qe,2),z=c(L);Kt(z,{width:"50%",height:"12px",radius:"4px",style:"opacity: 0.6"}),b(ke,Oe)}),b(fe,be)},Q=fe=>{var be=bv();bt(be,5,()=>r(o),ke=>ke._uid,(ke,xe)=>{var Oe=rt(),Te=ze(Oe);{var $e=He=>{var L=uv(),z=c(L);de(()=>ie(z,(r(xe),m(()=>r(xe).title)))),b(He,L)},qe=He=>{var L=_v(),z=c(L),I=c(z);{let Y=_t(()=>(N(Gr),r(xe),m(()=>Gr(r(xe),"md"))));Ot(I,{get src(){return r(Y)},get alt(){return r(xe),m(()=>r(xe).displayName)},radius:"8px",$$slots:{fallback:(oe,Se)=>{var Ie=fv(),Ne=c(Ie);{var Ue=We=>{var Be=rt(),Ze=ze(Be);re(Ze,()=>(N(y),m(()=>y.ARTISTS))),b(We,Be)},Ve=We=>{var Be=rt(),Ze=ze(Be);re(Ze,()=>(N(y),m(()=>y.ALBUMS))),b(We,Be)};C(Ne,We=>{d()==="artists"?We(Ue):We(Ve,!1)})}b(oe,Ie)}}})}var Z=_(I,2),Pe=c(Z),me=c(Pe);re(me,()=>(N(y),m(()=>y.PLAY)));var Me=_(z,2),Re=c(Me),q=_(Me,2),R=c(q);{var X=Y=>{var oe=hv(),Se=c(oe);de(()=>ie(Se,(r(xe),m(()=>r(xe).artist)))),b(Y,oe)};C(R,Y=>{r(xe),m(()=>r(xe).artist)&&Y(X)})}var Ae=_(R,2);{var ye=Y=>{var oe=pv(),Se=c(oe);de(()=>ie(Se,(r(xe),m(()=>r(xe).year)))),b(Y,oe)};C(Ae,Y=>{r(xe),m(()=>r(xe).year&&r(xe).year!=="0")&&Y(ye)})}var we=_(Ae,2);{var ge=Y=>{var oe=gv(),Se=c(oe);de(Ie=>ie(Se,Ie),[()=>(r(xe),m(()=>r(xe).qualityBadge.split(" ")[0]))]),b(Y,oe)};C(we,Y=>{r(xe),m(()=>r(xe).qualityBadge)&&Y(ge)})}de(()=>ie(Re,(r(xe),m(()=>r(xe).displayName)))),M("click",L,()=>P(r(xe))),M("keypress",L,Y=>Y.key==="Enter"&&P(r(xe))),b(He,L)};C(Te,He=>{r(xe),m(()=>r(xe).isHeader)?He($e):He(qe,!1)})}b(ke,Oe)},ke=>{var xe=mv();b(ke,xe)}),b(fe,be)};C(ue,fe=>{r(h)?fe(ee):fe(Q,!1)})}de(()=>Yt($,"placeholder",`Filter ${d()??""}...`)),tr($,()=>r(f),fe=>g(f,fe)),b(G,ce)};C(U,G=>{r(v),m(()=>r(v)?.view==="tracks_by_album")?G(j):G(Ee,!1)})}de(()=>pe=Ge(J,1,"view-container svelte-1eh2rsb",null,pe,{scrollable:r(v)?.view!=="tracks_by_album"})),b(e,J),Tt(),i()}var xv=k('<div class="music-card svelte-1otxnt7"><!> <!></div>'),Sv=k('<div class="music-grid svelte-1otxnt7"></div>'),Ev=k('<div slot="fallback" class="icon-fallback svelte-1otxnt7">ð»</div>'),Tv=k('<div class="status-badge playing svelte-1otxnt7">PLAYING</div>'),$v=k('<div class="status-badge paused svelte-1otxnt7">PAUSED</div>'),Mv=k('<span class="overlay-icon svelte-1otxnt7"><!></span>'),Av=k('<div class="card-sub svelte-1otxnt7"> </div>'),Cv=k('<div class="card-badge quality svelte-1otxnt7"> </div>'),Pv=k('<div role="button" tabindex="0"><div class="card-img-container svelte-1otxnt7"><!> <div class="play-overlay svelte-1otxnt7"><!></div></div> <div class="card-title svelte-1otxnt7"> </div> <div class="card-sub-row svelte-1otxnt7"><!> <!></div></div>'),Lv=k('<div class="empty-text svelte-1otxnt7">No stations found</div>'),zv=k('<div class="music-grid svelte-1otxnt7"></div> <!>',1),Rv=k('<div class="view-container scrollable svelte-1otxnt7"><div class="content-padded no-bottom-pad svelte-1otxnt7"><div class="search-input-container svelte-1otxnt7"><span class="search-icon svelte-1otxnt7"><!></span> <input type="text" placeholder="Find station..." class="svelte-1otxnt7"/></div></div> <div class="content-padded svelte-1otxnt7"><!></div></div>');function jv(e,t){Et(t,!1);const a=()=>Ce(Ha,"$stations",l),s=()=>Ce(St,"$status",l),n=()=>Ce(us,"$isLoadingRadio",l),i=()=>Ce(Ht,"$currentSong",l),[l,o]=jt(),v=T(),d=T();let u=T("");le(()=>(a(),r(u)),()=>{g(v,a().filter(te=>{const _e=r(u).toLowerCase();return te.name.toLowerCase().includes(_e)||te.genre&&te.genre.toLowerCase().includes(_e)}))}),le(()=>s(),()=>{g(d,s().bitrate?`${s().bitrate} kbps`:s().format||"")}),Vt(),Ct();var h=Rv(),f=c(h),p=c(f),S=c(p),x=c(S);re(x,()=>(N(y),m(()=>y.SEARCH)));var w=_(S,2),E=_(f,2),B=c(E);{var se=te=>{var _e=Sv();bt(_e,4,()=>Array(12),Rt,(V,W)=>{var ne=xv(),je=c(ne);Kt(je,{width:"100%",style:"aspect-ratio:1; border-radius:12px; margin-bottom:12px;"});var F=_(je,2);Kt(F,{width:"70%",height:"16px"}),b(V,ne)}),b(te,_e)},K=te=>{var _e=zv(),V=ze(_e);bt(V,5,()=>r(v),Rt,(je,F)=>{const P=_t(()=>(r(F),m(()=>r(F).file))),H=_t(()=>(i(),r(F),N(r(P)),m(()=>i().stationName===r(F).name||i().file===r(P)))),ve=_t(()=>(N(Tr),r(F),m(()=>Tr(r(F)))));var J=Pv();let pe;var U=c(J),j=c(U);Ot(j,{get src(){return r(ve)},get alt(){return r(F),m(()=>r(F).name)},radius:"8px",$$slots:{fallback:(Q,fe)=>{var be=Ev();b(Q,be)}}});var Ee=_(j,2),G=c(Ee);{var ce=Q=>{var fe=rt(),be=ze(fe);{var ke=Oe=>{var Te=Tv();b(Oe,Te)},xe=Oe=>{var Te=$v();b(Oe,Te)};C(be,Oe=>{s(),m(()=>s().state==="play")?Oe(ke):Oe(xe,!1)})}b(Q,fe)},he=Q=>{var fe=Mv(),be=c(fe);re(be,()=>(N(y),m(()=>y.PLAY))),b(Q,fe)};C(G,Q=>{r(H)?Q(ce):Q(he,!1)})}var A=_(U,2),D=c(A),$=_(A,2),ae=c($);{var O=Q=>{var fe=Av(),be=c(fe);de(()=>ie(be,(r(F),m(()=>r(F).genre)))),b(Q,fe)};C(ae,Q=>{r(F),m(()=>r(F).genre)&&Q(O)})}var ue=_(ae,2);{var ee=Q=>{var fe=Cv(),be=c(fe);de(()=>ie(be,r(d))),vt(1,fe,()=>yt),b(Q,fe)};C(ue,Q=>{r(H)&&r(d)&&Q(ee)})}de(()=>{pe=Ge(J,1,"music-card svelte-1otxnt7",null,pe,{"is-active":r(H)}),pt(Ee,r(H)?"opacity: 1":""),ie(D,(r(F),m(()=>r(F).name)))}),M("click",J,()=>In(r(F))),b(je,J)});var W=_(V,2);{var ne=je=>{var F=Lv();b(je,F)};C(W,je=>{r(v),a(),m(()=>r(v).length===0&&a().length>0)&&je(ne)})}b(te,_e)};C(B,te=>{n()?te(se):te(K,!1)})}tr(w,()=>r(u),te=>g(u,te)),vt(1,h,()=>yt,()=>({duration:200})),b(e,h),Tt(),o()}var Iv=k('<button class="clear-icon-btn svelte-m7c4tz"><!></button>'),Nv=k('<div class="spinner svelte-m7c4tz"></div>'),Dv=k('<div class="content-padded no-bottom-pad svelte-m7c4tz"><div class="search-input-container svelte-m7c4tz"><span class="search-icon svelte-m7c4tz"><!></span> <input type="text" placeholder="Search playlists &amp; tracks..." class="svelte-m7c4tz"/> <!> <!></div></div>'),Ov=k('<span class="meta-tag svelte-m7c4tz">Loading...</span>'),Fv=k('<span class="meta-tag svelte-m7c4tz"> </span>'),qv=k('<span class="meta-tag quality svelte-m7c4tz"> </span>'),Bv=k('<span class="meta-tag svelte-m7c4tz"> </span> <!> <!>',1),Uv=k('<div slot="header" class="content-padded svelte-m7c4tz"><div class="view-header svelte-m7c4tz"><div class="header-art svelte-m7c4tz"><div class="header-icon-wrap svelte-m7c4tz"><!></div></div> <div class="header-info svelte-m7c4tz"><div class="header-text-group svelte-m7c4tz"><div class="header-label svelte-m7c4tz">Playlist</div> <h1 class="header-title svelte-m7c4tz"> </h1> <div class="meta-badges svelte-m7c4tz"><!></div></div> <div class="header-actions svelte-m7c4tz"><button class="btn-primary svelte-m7c4tz"> </button> <button class="btn-secondary svelte-m7c4tz"> </button> <button title="Edit"><!></button></div></div></div></div>'),Yv=k('<div slot="row" class="svelte-m7c4tz"><!></div>'),Hv=k('<div class="music-card skeleton-card svelte-m7c4tz"><div class="card-img-container svelte-m7c4tz"><!></div> <div style="margin-top: 8px;" class="svelte-m7c4tz"><!></div></div>'),Vv=k('<div class="content-padded svelte-m7c4tz"><div class="music-grid playlists-grid-override svelte-m7c4tz"></div></div>'),Wv=k('<button class="card-menu-btn svelte-m7c4tz"><!></button>'),Qv=k('<div class="music-card svelte-m7c4tz"><div class="card-img-container svelte-m7c4tz"><div class="icon-wrap svelte-m7c4tz"><!></div> <!> <div class="play-overlay svelte-m7c4tz"><span class="overlay-icon svelte-m7c4tz"><!></span></div></div> <div class="card-title svelte-m7c4tz"> </div> <div class="card-sub-row svelte-m7c4tz"><div class="card-sub svelte-m7c4tz"> </div></div></div>'),Xv=k('<div class="music-grid playlists-grid-override svelte-m7c4tz"><div class="music-card svelte-m7c4tz"><div class="card-img-container dashed-cover svelte-m7c4tz"><div class="icon-wrap svelte-m7c4tz"><!></div></div> <div class="card-title svelte-m7c4tz">New Playlist</div></div> <!></div>'),Kv=k('<div class="music-card svelte-m7c4tz"><div class="card-img-container svelte-m7c4tz"><div class="icon-wrap svelte-m7c4tz"><!></div> <div class="play-overlay svelte-m7c4tz"><span class="overlay-icon svelte-m7c4tz"><!></span></div></div> <div class="card-title svelte-m7c4tz"> </div></div>'),Gv=k('<div class="header-label section-spacing svelte-m7c4tz">Matched Playlists</div> <div class="music-grid horizontal section-mb svelte-m7c4tz"></div>',1),Zv=k('<div class="group-container svelte-m7c4tz"><div class="group-header svelte-m7c4tz"><div class="group-icon svelte-m7c4tz"><!></div> <div class="group-title svelte-m7c4tz"> </div> <div class="group-count svelte-m7c4tz"> </div> <div class="group-actions svelte-m7c4tz"><button class="btn-icon small svelte-m7c4tz" title="Play matches"><!></button> <button class="btn-icon small svelte-m7c4tz" title="Add matches to Queue"><!></button></div></div> <div class="group-tracks svelte-m7c4tz"></div></div>'),Jv=k('<div class="header-label section-spacing svelte-m7c4tz">Matched Tracks</div> <div class="grouped-results svelte-m7c4tz"></div>',1),eu=k('<div class="empty-text svelte-m7c4tz"> </div>'),tu=k('<div class="empty-text svelte-m7c4tz" style="opacity: 0.7">Searching tracks in playlists...</div>'),au=k("<!> <!> <!>",1),ru=k('<div class="content-padded svelte-m7c4tz"><!></div>'),su=k("<div><!> <!></div>");function nu(e,t){Et(t,!1);const a=()=>Ce(St,"$status",f),s=()=>Ce(Ht,"$currentSong",f),n=()=>Ce(Qt,"$navigationStack",f),i=()=>Ce(Rs,"$playlists",f),l=()=>Ce(Ur,"$activePlaylistTracks",f),o=()=>Ce(cn,"$isLoadingTracks",f),v=()=>Ce(Jc,"$activePlaylistName",f),d=()=>Ce(qa,"$queue",f),u=()=>Ce(ws,"$currentTheme",f),h=()=>Ce(ln,"$isLoadingPlaylists",f),[f,p]=jt(),S=T(),x=T(),w=T(),E=T(),B=T(),se=T();let K=T(!1),te=T(!1),_e=T(!1),V=T(""),W=T(!1),ne,je=0,F=T([]),P=T([]),H=T(""),ve=T(""),J=T("");function pe(L){g(V,L.target.value),clearTimeout(ne),r(V).length>=2?ne=setTimeout(()=>{U(r(V))},600):(g(W,!1),g(F,[]),g(P,[]))}async function U(L){if(!L)return;je++;const z=je;g(W,!0);const I=L.toLowerCase();g(F,i().filter(me=>me.name.toLowerCase().includes(I)));let Z=[];const Pe=i().filter(me=>me.name!=="Favorites");for(const me of Pe){if(z!==je)break;try{const Me=await Ye.send(`listplaylistinfo "${me.name.replace(/"/g,'\\"')}"`),R=na.parseTracks(Me).map((X,Ae)=>({...X,playlistPos:Ae})).filter(X=>X.title&&X.title.toLowerCase().includes(I)||X.artist&&X.artist.toLowerCase().includes(I));if(R.length>0){const X=R.map(Ae=>({...Ae,_uid:Math.random()}));Z.push({playlist:me,tracks:X}),g(P,[...Z])}}catch(Me){console.warn(`Failed to search in playlist ${me.name}`,Me)}}z===je&&g(W,!1)}function j(L){r(K)||Is(L)}function Ee(L){L.deltaY!==0&&(L.currentTarget.scrollLeft+=L.deltaY)}function G(L,z){pa({title:"Play Search Results?",message:`This will clear your queue and play ${L.length} matching tracks from "${z}".`,confirmLabel:"Play",type:"confirm",onConfirm:()=>{zn(L)}})}function ce(L){!L||L.length===0||Rn(L)}Ya(()=>{!r(B)&&i().length===0&&jn()});function he(L){const z=L.reduce((Z,Pe)=>Z+(parseFloat(Pe.time)||0),0);if(z>0){const Z=Math.floor(z/3600),Pe=Math.floor(z%3600/60);g(H,Z>0?`${Z} hr ${Pe} min`:`${Pe} min`)}else g(H,"");const I=new Set;L.forEach(Z=>{Z.qualityBadge&&I.add(Z.qualityBadge.split(" ")[0])}),g(ve,I.size===1?L[0].qualityBadge:I.size>1?"Mixed":"")}function A(L){Ba("details",L)}function D(){if(d().length===0){pa({title:"Create Playlist",message:"Queue is empty. Add tracks to queue before saving a playlist.",confirmLabel:"OK",type:"alert"});return}pa({title:"New Playlist",message:"Save current queue as a new playlist:",type:"prompt",placeholder:"Playlist Name",confirmLabel:"Create",onConfirm:L=>{L&&ga.createPlaylistFromQueue(L)}})}function $(L,z){z.name!=="Favorites"&&(L.stopPropagation(),L.preventDefault(),Kr(L,null,{type:"playlist-card",playlist:z}))}function ae(){pa({title:"Replace Queue?",message:`This will clear your current queue and play "${r(E).data.name}".`,confirmLabel:"Play",type:"confirm",onConfirm:()=>{g(te,!0),(void 0)(r(E).data.name,0)}})}function O(){if(l().length>0){const L=r(E).data.name.replace(/"/g,'\\"');$s(`load "${L}"`),g(_e,!0),setTimeout(()=>{g(_e,!1)},2e3)}}function ue(){g(K,!r(K))}function ee(L){const z=r(E).data.name,I=l();I.splice(L,1),Ur.set(I),So(z,L),he(I)}function Q(L,z){Eo(r(E).data.name,L,z)}function fe(L){if(L.name==="Favorites"){if(u()==="gruvbox"){const z="var(--c-heart)";return`background: linear-gradient(135deg, ${z}, transparent); background-color: ${z};`}return"background: linear-gradient(135deg, hsl(348, 95%, 58%), hsl(348, 90%, 40%));"}return u()==="gruvbox"?`background: linear-gradient(135deg, ${L.colorVar}, transparent); background-color: ${L.colorVar};`:`background: ${L.color}`}function be(L){if(!L)return"";if(L.name==="Favorites"){if(u()==="gruvbox"){const Z="var(--c-heart)";return`background: linear-gradient(135deg, ${Z}, transparent); background-color: ${Z};`}return"background: linear-gradient(135deg, hsl(348, 95%, 58%), hsl(348, 90%, 40%));"}const z="var(--c-bg-card)";if(u()==="gruvbox"){const Z=L.colorVar||L.color||z;return`background: linear-gradient(135deg, ${Z}, transparent); background-color: ${Z};`}return`background: ${L.color||L.colorVar||z}`}le(()=>a(),()=>{g(S,Number(a().song))}),le(()=>s(),()=>{g(x,s().file)}),le(()=>a(),()=>{g(w,a().state==="play")}),le(()=>n(),()=>{g(E,n()[n().length-1])}),le(()=>r(E),()=>{g(B,r(E).view==="details")}),le(()=>(r(E),r(J)),()=>{const L=JSON.stringify(r(E));L!==r(J)&&(g(V,""),g(te,!1),g(_e,!1),g(K,!1),g(F,[]),g(P,[]),g(W,!1),g(J,L))}),le(()=>(r(B),l(),o()),()=>{r(B)&&l().length>0?he(l()):r(B)&&l().length===0&&!o()&&(g(H,"0 min"),g(ve,""))}),le(()=>(r(B),r(E),v(),Pd),()=>{r(B)&&r(E).data&&v()!==r(E).data.name&&ko(r(E).data.name)}),le(()=>r(E),()=>{g(se,r(E)?.data?.name==="Favorites")}),Vt(),Ct();var ke=su();let xe;var Oe=c(ke);{var Te=L=>{var z=Dv(),I=c(z),Z=c(I),Pe=c(Z);re(Pe,()=>(N(y),m(()=>y.SEARCH)));var me=_(Z,2),Me=_(me,2);{var Re=X=>{var Ae=Iv(),ye=c(Ae);re(ye,()=>(N(y),m(()=>y.CLOSE))),M("click",Ae,()=>{g(V,""),g(F,[]),g(P,[]),g(W,!1)}),b(X,Ae)};C(Me,X=>{r(V)&&X(Re)})}var q=_(Me,2);{var R=X=>{var Ae=Nv();b(X,Ae)};C(q,X=>{r(W)&&X(R)})}de(()=>oo(me,r(V))),M("input",me,pe),b(L,z)};C(Oe,L=>{r(B)||L(Te)})}var $e=_(Oe,2);{var qe=L=>{ss(L,{get itemsStore(){return Ur},get isLoading(){return o()},get isEditMode(){return r(K)},emptyText:"This playlist is empty.",onMoveItem:Q,$$slots:{header:(z,I)=>{var Z=Uv(),Pe=c(Z),me=c(Pe),Me=c(me),Re=c(Me);re(Re,()=>(r(se),N(y),m(()=>r(se)?y.HEART_FILLED:y.PLAYLISTS)));var q=_(me,2),R=c(q),X=_(c(R),2),Ae=c(X),ye=_(X,2),we=c(ye);{var ge=Ze=>{var Ke=Ov();b(Ze,Ke)},Y=Ze=>{var Ke=Bv(),Qe=ze(Ke),at=c(Qe),Je=_(Qe,2);{var ot=mt=>{var dt=Fv(),ft=c(dt);de(()=>ie(ft,r(H))),b(mt,dt)};C(Je,mt=>{r(H)&&mt(ot)})}var lt=_(Je,2);{var ut=mt=>{var dt=qv(),ft=c(dt);de(()=>ie(ft,r(ve))),b(mt,dt)};C(lt,mt=>{r(ve)&&mt(ut)})}de(()=>ie(at,`${l(),m(()=>l().length)??""} tracks`)),b(Ze,Ke)};C(we,Ze=>{o()?Ze(ge):Ze(Y,!1)})}var oe=_(R,2),Se=c(oe),Ie=c(Se),Ne=_(Se,2),Ue=c(Ne),Ve=_(Ne,2);let We;var Be=c(Ve);re(Be,()=>(r(K),N(y),m(()=>r(K)?y.ACCEPT:y.EDIT))),de(Ze=>{pt(me,Ze),Yt(X,"title",(r(E),m(()=>r(E).data.name))),ie(Ae,(r(E),m(()=>r(E).data.name))),Se.disabled=r(te),ie(Ie,r(te)?"Playing...":"Play All"),Ne.disabled=r(_e),ie(Ue,r(_e)?"Added":"To Queue"),We=Ge(Ve,1,"btn-action svelte-m7c4tz",null,We,{active:r(K)})},[()=>(r(E),m(()=>be(r(E).data)))]),M("click",Se,ae),M("click",Ne,O),M("click",Ve,ue),b(z,Z)},row:(z,I)=>{var Z=Yv();const Pe=_t(()=>I.item),me=_t(()=>I.index),Me=_t(()=>I.startDrag);var Re=c(Z);Mr(Re,{get track(){return r(Pe)},get index(){return r(me)},get playingIndex(){return r(S)},get playingFile(){return r(x)},get isPlaying(){return r(w)},get isEditable(){return r(K)},$$events:{play:()=>j(r(Pe)),remove:()=>ee(r(me)),startdrag(...q){r(Me)?.apply(this,q)}}}),b(z,Z)}}})},He=L=>{var z=rt(),I=ze(z);{var Z=me=>{var Me=Vv(),Re=c(Me);bt(Re,4,()=>Array(8),Rt,(q,R)=>{var X=Hv(),Ae=c(X),ye=c(Ae);Kt(ye,{width:"100%",height:"100%",radius:"12px"});var we=_(Ae,2),ge=c(we);Kt(ge,{width:"60%",height:"16px",radius:"4px"}),b(q,X)}),b(me,Me)},Pe=me=>{var Me=ru(),Re=c(Me);{var q=X=>{var Ae=Xv(),ye=c(Ae),we=c(ye),ge=c(we),Y=c(ge);re(Y,()=>(N(y),m(()=>y.ADD)));var oe=_(ye,2);bt(oe,1,i,Se=>Se.name,(Se,Ie)=>{const Ne=_t(()=>(r(Ie),m(()=>r(Ie).name==="Favorites")));var Ue=Qv(),Ve=c(Ue),We=c(Ve),Be=c(We);re(Be,()=>(N(r(Ne)),N(y),m(()=>r(Ne)?y.HEART_FILLED:y.PLAYLISTS)));var Ze=_(We,2);{var Ke=ft=>{var Fe=Wv(),ct=c(Fe);re(ct,()=>(N(y),m(()=>y.DOTS))),M("click",Fe,kt=>$(kt,r(Ie))),b(ft,Fe)};C(Ze,ft=>{r(Ne)||ft(Ke)})}var Qe=_(Ze,2),at=c(Qe),Je=c(at);re(Je,()=>(N(y),m(()=>y.PLAY)));var ot=_(Ve,2),lt=c(ot),ut=_(ot,2),mt=c(ut),dt=c(mt);Ft(()=>M("click",Ue,()=>A(r(Ie)))),En(Ue,ft=>Nn?.(ft)),Ft(()=>M("longpress",Ue,ft=>$(ft.detail.originalEvent,r(Ie)))),Ft(()=>M("contextmenu",Ue,ft=>$(ft,r(Ie)))),de((ft,Fe)=>{pt(Ve,ft),ie(lt,(r(Ie),m(()=>r(Ie).name))),ie(dt,Fe)},[()=>(r(Ie),m(()=>fe(r(Ie)))),()=>(r(Ie),m(()=>r(Ie).lastModified?new Date(r(Ie).lastModified).toLocaleDateString():"Playlist"))]),b(Se,Ue)}),M("click",ye,D),b(X,Ae)},R=X=>{var Ae=au(),ye=ze(Ae);{var we=Ne=>{var Ue=Gv(),Ve=_(ze(Ue),2);bt(Ve,5,()=>r(F),We=>We.name,(We,Be)=>{const Ze=_t(()=>(r(Be),m(()=>r(Be).name==="Favorites")));var Ke=Kv(),Qe=c(Ke),at=c(Qe),Je=c(at);re(Je,()=>(N(r(Ze)),N(y),m(()=>r(Ze)?y.HEART_FILLED:y.PLAYLISTS)));var ot=_(at,2),lt=c(ot),ut=c(lt);re(ut,()=>(N(y),m(()=>y.PLAY)));var mt=_(Qe,2),dt=c(mt);de(ft=>{pt(Qe,ft),ie(dt,(r(Be),m(()=>r(Be).name)))},[()=>(r(Be),m(()=>fe(r(Be))))]),M("click",Ke,()=>A(r(Be))),b(We,Ke)}),M("wheel",Ve,Ee),b(Ne,Ue)};C(ye,Ne=>{r(F),m(()=>r(F).length>0)&&Ne(we)})}var ge=_(ye,2);{var Y=Ne=>{var Ue=Jv(),Ve=_(ze(Ue),2);bt(Ve,5,()=>r(P),We=>We.playlist.name,(We,Be)=>{var Ze=Zv(),Ke=c(Ze),Qe=c(Ke),at=c(Qe);re(at,()=>(N(y),m(()=>y.PLAYLISTS)));var Je=_(Qe,2),ot=c(Je),lt=_(Je,2),ut=c(lt),mt=_(lt,2),dt=c(mt),ft=c(dt);re(ft,()=>(N(y),m(()=>y.PLAY)));var Fe=_(dt,2),ct=c(Fe);re(ct,()=>(N(y),m(()=>y.ADD)));var kt=_(Ke,2);bt(kt,5,()=>(r(Be),m(()=>r(Be).tracks)),Jt=>Jt._uid,(Jt,Le)=>{Mr(Jt,{get track(){return r(Le)},get index(){return r(Le),m(()=>r(Le).playlistPos)},get playingFile(){return r(x)},get isPlaying(){return r(w)},$$events:{play:()=>j(r(Le))}})}),de(()=>{ie(ot,(r(Be),m(()=>r(Be).playlist.name))),ie(ut,(r(Be),m(()=>r(Be).tracks.length)))}),M("click",dt,Gt(()=>G(r(Be).tracks,r(Be).playlist.name))),M("click",Fe,Gt(()=>ce(r(Be).tracks))),M("click",Ke,()=>A(r(Be).playlist)),b(We,Ze)}),b(Ne,Ue)};C(ge,Ne=>{r(P),m(()=>r(P).length>0)&&Ne(Y)})}var oe=_(ge,2);{var Se=Ne=>{var Ue=eu(),Ve=c(Ue);de(()=>ie(Ve,`No matches found for "${r(V)??""}"`)),b(Ne,Ue)},Ie=Ne=>{var Ue=rt(),Ve=ze(Ue);{var We=Be=>{var Ze=tu();b(Be,Ze)};C(Ve,Be=>{r(W),r(P),m(()=>r(W)&&r(P).length===0)&&Be(We)},!0)}b(Ne,Ue)};C(oe,Ne=>{r(W),r(F),r(P),m(()=>!r(W)&&r(F).length===0&&r(P).length===0)?Ne(Se):Ne(Ie,!1)})}b(X,Ae)};C(Re,X=>{r(V)?X(R,!1):X(q)})}b(me,Me)};C(I,me=>{h()?me(Z):me(Pe,!1)},!0)}b(L,z)};C($e,L=>{r(B)?L(qe):L(He,!1)})}de(()=>xe=Ge(ke,1,"view-container svelte-m7c4tz",null,xe,{scrollable:!r(B)})),b(e,ke),Tt(),p()}var iu=k('<button class="clear-icon-btn svelte-1d3z1zm"><!></button>'),ou=k('<div class="spinner svelte-1d3z1zm"></div>'),lu=k('<div class="placeholder-state svelte-1d3z1zm"><div class="placeholder-icon svelte-1d3z1zm">ð</div> <p class="svelte-1d3z1zm">Type to search your library</p></div>'),cu=k('<div class="empty-text svelte-1d3z1zm"> </div>'),du=k('<div slot="fallback" class="icon-fallback svelte-1d3z1zm">ð¿</div>'),vu=k('<div class="meta-tag svelte-1d3z1zm"> </div>'),uu=k('<div class="meta-tag quality svelte-1d3z1zm"> </div>'),fu=k('<div class="music-card svelte-1d3z1zm"><div class="card-img-container svelte-1d3z1zm"><!> <div class="play-overlay svelte-1d3z1zm"><span class="overlay-icon svelte-1d3z1zm"><!></span></div></div> <div class="card-title svelte-1d3z1zm"> </div> <div class="card-sub-row svelte-1d3z1zm"><div class="card-sub text-ellipsis svelte-1d3z1zm"> </div> <!> <!></div></div>'),hu=k('<div class="header-label section-spacing svelte-1d3z1zm">Albums</div> <div class="music-grid horizontal section-mb svelte-1d3z1zm"></div>',1),pu=k('<div class="header-label svelte-1d3z1zm">Tracks</div>'),gu=k("<!> <!>",1),_u=k('<div slot="header" class="content-padded svelte-1d3z1zm"><!></div>'),mu=k('<div slot="row" class="svelte-1d3z1zm"><!></div>'),bu=k('<div class="view-container svelte-1d3z1zm"><div class="content-padded no-bottom-pad svelte-1d3z1zm"><div class="search-input-container svelte-1d3z1zm"><span class="search-icon svelte-1d3z1zm"><!></span> <input type="text" placeholder="Artists, songs, or albums" autoFocus class="svelte-1d3z1zm"/> <!> <!></div></div> <!></div>');function yu(e,t){Et(t,!1);const a=()=>Ce(Yr,"$searchQuery",n),s=()=>Ce(l,"$tracksStore",n),[n,i]=jt(),l=Xe([]);let o=T([]),v=T(!1),d,u=T(!1);Ya(()=>{a().length>=2&&p(a())});function h(P){Yr.set(P.target.value),clearTimeout(d),d=setTimeout(()=>{p(a())},300)}function f(){Yr.set(""),l.set([]),g(o,[]),g(u,!1)}async function p(P){const H=P.trim().toLowerCase();if(H.length<2){l.set([]),g(o,[]),g(u,!1);return}g(v,!0),g(u,!0);try{const ve=await Na.search(H),J=ve.map((U,j)=>({...U,_uid:U.file?`${U.file}-${j}`:`search-${j}`}));l.set(J);const pe=new Map;ve.forEach(U=>{const j=U.album;if(j&&!pe.has(j)){const Ee=j.toLowerCase().includes(H),G=U.artist&&U.artist.toLowerCase().includes(H);if(Ee||G){let ce=String(U.year||"");ce.length>4&&(ce=ce.substring(0,4)),pe.set(j,{name:j,artist:U.artist,file:U.file,thumbHash:U.thumbHash,_uid:`alb-${j}`,year:ce,qualityBadge:U.qualityBadge})}}}),g(o,Array.from(pe.values()))}finally{g(v,!1)}}function S(P){Is(P)}function x(P){Ba("tracks_by_album",{name:P.name,artist:P.artist})}function w(P){P.deltaY!==0&&(P.currentTarget.scrollLeft+=P.deltaY)}Ct();var E=bu(),B=c(E),se=c(B),K=c(se),te=c(K);re(te,()=>y.SEARCH);var _e=_(K,2),V=_(_e,2);{var W=P=>{var H=iu(),ve=c(H);re(ve,()=>y.CLOSE),M("click",H,f),b(P,H)};C(V,P=>{a().length>0&&P(W)})}var ne=_(V,2);{var je=P=>{var H=ou();b(P,H)};C(ne,P=>{r(v)&&P(je)})}var F=_(B,2);ss(F,{get itemsStore(){return l},isEditMode:!1,isLoading:!1,emptyText:"",$$slots:{header:(P,H)=>{var ve=_u(),J=c(ve);{var pe=j=>{var Ee=lu();b(j,Ee)},U=j=>{var Ee=rt(),G=ze(Ee);{var ce=A=>{var D=cu(),$=c(D);de(()=>ie($,`No results found for "${a()??""}"`)),b(A,D)},he=A=>{var D=gu(),$=ze(D);{var ae=ee=>{var Q=hu(),fe=_(ze(Q),2);bt(fe,5,()=>r(o),be=>be._uid,(be,ke)=>{var xe=fu(),Oe=c(xe),Te=c(Oe);{let R=_t(()=>Gr(r(ke),"md"));Ot(Te,{get src(){return r(R)},get alt(){return r(ke).name},radius:"8px",$$slots:{fallback:(X,Ae)=>{var ye=du();b(X,ye)}}})}var $e=_(Te,2),qe=c($e),He=c(qe);re(He,()=>y.PLAY);var L=_(Oe,2),z=c(L),I=_(L,2),Z=c(I),Pe=c(Z),me=_(Z,2);{var Me=R=>{var X=vu(),Ae=c(X);de(()=>ie(Ae,r(ke).year)),b(R,X)};C(me,R=>{r(ke).year&&r(ke).year!=="0"&&r(ke).year!==0&&R(Me)})}var Re=_(me,2);{var q=R=>{var X=uu(),Ae=c(X);de(ye=>ie(Ae,ye),[()=>r(ke).qualityBadge.split(" ")[0]]),b(R,X)};C(Re,R=>{r(ke).qualityBadge&&R(q)})}de(()=>{Yt(L,"title",r(ke).name),ie(z,r(ke).name),ie(Pe,r(ke).artist)}),M("click",xe,()=>x(r(ke))),b(be,xe)}),M("wheel",fe,w),b(ee,Q)};C($,ee=>{r(o).length>0&&ee(ae)})}var O=_($,2);{var ue=ee=>{var Q=pu();b(ee,Q)};C(O,ee=>{s().length>0&&ee(ue)})}b(A,D)};C(G,A=>{!r(v)&&s().length===0&&r(o).length===0&&r(u)?A(ce):A(he,!1)},!0)}b(j,Ee)};C(J,j=>{a().length<2?j(pe):j(U,!1)})}b(P,ve)},row:(P,H)=>{var ve=mu();const J=_t(()=>H.item),pe=_t(()=>H.index);var U=c(ve);Mr(U,{get track(){return r(J)},get index(){return r(pe)},isEditable:!1,$$events:{play:()=>S(r(J))}}),b(P,ve)}}}),de(()=>oo(_e,a())),M("input",_e,h),b(e,E),Tt(),i()}var wu=k('<span class="status-badge connected svelte-1j67jqh">Connected</span>'),ku=k('<span class="status-badge disconnected svelte-1j67jqh">Not Connected</span>'),xu=k('<div class="separator svelte-1j67jqh"></div> <div class="row space-between svelte-1j67jqh"><label class="svelte-1j67jqh">Connection Status</label> <!></div> <div class="separator svelte-1j67jqh"></div> <div class="row svelte-1j67jqh"><label for="yandex-token" class="svelte-1j67jqh">OAuth Token</label> <div class="input-group svelte-1j67jqh"><input id="yandex-token" type="password" placeholder="Paste token here..." class="svelte-1j67jqh"/> <button class="btn-primary small svelte-1j67jqh"> </button></div></div> <p class="hint svelte-1j67jqh">Token is stored securely on the device.</p>',1),Su=k('<option class="svelte-1j67jqh"> </option>'),Eu=k('<div class="separator svelte-1j67jqh"></div> <div class="row space-between svelte-1j67jqh"><label for="alarm-time" class="svelte-1j67jqh">Wake up time</label> <input id="alarm-time" type="time" class="svelte-1j67jqh"/></div> <div class="separator svelte-1j67jqh"></div> <div class="row space-between svelte-1j67jqh"><label for="alarm-pl" class="svelte-1j67jqh">Playlist</label> <div class="select-wrapper svelte-1j67jqh"><select id="alarm-pl" class="svelte-1j67jqh"></select> <div class="select-arrow svelte-1j67jqh"><!></div></div></div>',1),Tu=k('<div class="view-container scrollable svelte-1j67jqh"><div class="content-padded svelte-1j67jqh"><h1 class="header-title big svelte-1j67jqh">Settings</h1> <div class="section svelte-1j67jqh"><div class="section-header svelte-1j67jqh"><span class="svelte-1j67jqh">Services</span></div> <div class="card svelte-1j67jqh"><div class="row space-between svelte-1j67jqh"><label class="svelte-1j67jqh">Enable Yandex Music (Beta)</label> <button><div class="toggle-circle svelte-1j67jqh"></div></button></div> <!></div></div> <div class="section svelte-1j67jqh"><div class="section-header svelte-1j67jqh"><span class="svelte-1j67jqh">Alarm Clock</span></div> <div class="card svelte-1j67jqh"><div class="row space-between svelte-1j67jqh"><span class="label-text svelte-1j67jqh">Current Player Time</span> <span class="mono-badge svelte-1j67jqh"> </span></div> <div class="separator svelte-1j67jqh"></div> <div class="row space-between svelte-1j67jqh"><label class="svelte-1j67jqh">Enable Alarm</label> <button><div class="toggle-circle svelte-1j67jqh"></div></button></div> <!></div></div> <div class="section svelte-1j67jqh"><div class="section-header svelte-1j67jqh"><span class="svelte-1j67jqh">Appearance</span></div> <div class="card clickable svelte-1j67jqh"><div class="row space-between svelte-1j67jqh"><span class="svelte-1j67jqh">Interface Theme</span> <div class="row-gap svelte-1j67jqh"><span class="value svelte-1j67jqh"> </span> <span class="chevron svelte-1j67jqh"><!></span></div></div></div></div> <div class="section svelte-1j67jqh"><div class="section-header svelte-1j67jqh"><span class="svelte-1j67jqh">Connection</span></div> <div class="card svelte-1j67jqh"><div class="row svelte-1j67jqh"><label for="ip" class="svelte-1j67jqh">Moode Device IP</label> <div class="input-group svelte-1j67jqh"><input id="ip" type="text" placeholder="192.168.x.x" class="svelte-1j67jqh"/> <button class="btn-primary small svelte-1j67jqh">Save</button></div></div> <p class="hint svelte-1j67jqh"> </p></div></div> <div class="section svelte-1j67jqh"><div class="section-header svelte-1j67jqh"><span class="svelte-1j67jqh">About</span></div> <div class="card svelte-1j67jqh"><div class="info-row svelte-1j67jqh"><span class="svelte-1j67jqh">Version</span> <span class="mono svelte-1j67jqh"> </span></div> <div class="separator svelte-1j67jqh"></div> <div class="info-row svelte-1j67jqh"><span class="svelte-1j67jqh">Build Date</span> <span class="mono small svelte-1j67jqh"> </span></div></div></div></div></div>');function $u(e,t){Et(t,!1);const a=()=>Ce(ws,"$currentTheme",d),s=()=>Ce(hn,"$isAlarmEnabled",d),n=()=>Ce(fn,"$alarmTime",d),i=()=>Ce(pn,"$alarmPlaylist",d),l=()=>Ce(Es,"$isYandexEnabled",d),o=()=>Ce(yr,"$yandexAuthStatus",d),v=()=>Ce(Rs,"$playlists",d),[d,u]=jt(),h=T();let f=T(Ka.MOODE_IP),p=T("--:--"),S,x=T(""),w=T(!1);function E(){Ka.setMoodeIp(r(f)),De("IP Saved. Reloading...","success"),setTimeout(()=>location.reload(),1e3)}const B="0.0.1",se="2026-01-10T23:50:07.749Z",K=new Date(se).toLocaleString();function te(){const ge=nn.map(Y=>({label:Y.label,value:Y.id}));pa({title:"Select Theme",message:"Choose your preferred interface style:",type:"select",inputValue:a(),options:ge,onConfirm:Y=>{ws.set(Y),De("Theme updated","success")}})}async function _e(){const ge=await Da.getServerTime();ge&&g(p,ge)}Ya(()=>{_e(),S=setInterval(_e,6e4),Da.checkYandexAuth()}),vo(()=>{S&&clearInterval(S)});async function V(){try{await Da.setAlarm(s(),n(),i()),s()&&De(`Alarm set for ${n()}`,"success")}catch{De("Failed to sync alarm settings","error")}}function W(){hn.update(ge=>!ge),V()}function ne(){Es.update(ge=>!ge)}async function je(){if(!r(x))return;g(w,!0);const ge=await Da.saveYandexToken(r(x));g(w,!1),ge&&g(x,"")}le(()=>a(),()=>{g(h,nn.find(ge=>ge.id===a())?.label||"Default")}),Vt(),Ct();var F=Tu(),P=c(F),H=_(c(P),2),ve=_(c(H),2),J=c(ve),pe=_(c(J),2);let U;var j=_(J,2);{var Ee=ge=>{var Y=xu(),oe=ze(Y),Se=_(oe,2),Ie=_(c(Se),2);{var Ne=Je=>{var ot=wu();b(Je,ot)},Ue=Je=>{var ot=ku();b(Je,ot)};C(Ie,Je=>{o()?Je(Ne):Je(Ue,!1)})}var Ve=_(Se,2),We=_(Ve,2),Be=_(c(We),2),Ze=c(Be),Ke=_(Ze,2),Qe=c(Ke),at=_(We,2);de(()=>{Ke.disabled=r(w),ie(Qe,r(w)?"Checking...":"Save")}),vt(1,oe,()=>yt),vt(1,Se,()=>yt),vt(1,Ve,()=>yt),tr(Ze,()=>r(x),Je=>g(x,Je)),M("click",Ke,je),vt(1,We,()=>yt),vt(1,at,()=>yt),b(ge,Y)};C(j,ge=>{l()&&ge(Ee)})}var G=_(H,2),ce=_(c(G),2),he=c(ce),A=_(c(he),2),D=c(A),$=_(he,4),ae=_(c($),2);let O;var ue=_($,2);{var ee=ge=>{var Y=Eu(),oe=ze(Y),Se=_(oe,2),Ie=_(c(Se),2),Ne=_(Se,2),Ue=_(Ne,2),Ve=_(c(Ue),2),We=c(Ve);de(()=>{i(),Ll(()=>{v()})}),bt(We,5,v,Rt,(Ke,Qe)=>{var at=Su(),Je=c(at),ot={};de(()=>{ie(Je,(r(Qe),m(()=>r(Qe).name))),ot!==(ot=(r(Qe),m(()=>r(Qe).name)))&&(at.value=(at.__value=(r(Qe),m(()=>r(Qe).name)))??"")}),b(Ke,at)});var Be=_(We,2),Ze=c(Be);re(Ze,()=>(N(y),m(()=>y.CHEVRON_DOWN))),vt(1,oe,()=>yt),tr(Ie,n,Ke=>ai(fn,Ke)),M("change",Ie,V),vt(1,Se,()=>yt),vt(1,Ne,()=>yt),ec(We,i,Ke=>ai(pn,Ke)),M("change",We,V),vt(1,Ue,()=>yt),b(ge,Y)};C(ue,ge=>{s()&&ge(ee)})}var Q=_(G,2),fe=_(c(Q),2),be=c(fe),ke=_(c(be),2),xe=c(ke),Oe=c(xe),Te=_(xe,2),$e=c(Te);re($e,()=>(N(y),m(()=>y.NEXT)));var qe=_(Q,2),He=_(c(qe),2),L=c(He),z=_(c(L),2),I=c(z),Z=_(I,2),Pe=_(L,2),me=c(Pe),Me=_(qe,2),Re=_(c(Me),2),q=c(Re),R=_(c(q),2),X=c(R),Ae=_(q,4),ye=_(c(Ae),2),we=c(ye);de(()=>{U=Ge(pe,1,"toggle-btn svelte-1j67jqh",null,U,{active:l()}),ie(D,r(p)),O=Ge(ae,1,"toggle-btn svelte-1j67jqh",null,O,{active:s()}),ie(Oe,r(h)),ie(me,`Current: ${N(Ka),m(()=>Ka.MOODE_IP)??""}`),ie(X,B),ie(we,K)}),M("click",pe,ne),M("click",ae,W),M("click",fe,te),tr(I,()=>r(f),ge=>g(f,ge)),M("click",Z,E),vt(1,F,()=>yt,()=>({duration:200})),b(e,F),Tt(),u()}var Mu=k('<span class="meta-tag svelte-185fgrr"> </span>'),Au=k('<div slot="header" class="content-padded svelte-185fgrr"><div class="view-header svelte-185fgrr"><div class="header-art svelte-185fgrr" style="background: var(--c-surface-active);"><div class="header-icon-wrap svelte-185fgrr"><!></div></div> <div class="header-info svelte-185fgrr"><div class="header-text-group svelte-185fgrr"><div class="header-label svelte-185fgrr">Now Playing</div> <h1 class="header-title svelte-185fgrr">Current Queue</h1> <div class="meta-badges svelte-185fgrr"><span class="meta-tag svelte-185fgrr"> </span> <!></div></div> <div class="header-actions svelte-185fgrr"><button class="btn-secondary svelte-185fgrr" title="Clear Queue">Clear</button> <button class="btn-action svelte-185fgrr" title="Save Queue"><!></button> <button><!></button></div></div></div></div>'),Cu=k('<div slot="row" class="svelte-185fgrr"><!></div>'),Pu=k('<div class="view-container svelte-185fgrr"><!></div>');function Lu(e,t){Et(t,!1);const a=()=>Ce(St,"$status",l),s=()=>Ce(xt,"$isQueueLocked",l),n=()=>Ce(Ht,"$currentSong",l),i=()=>Ce(qa,"$queue",l),[l,o]=jt(),v=T(),d=T(),u=T(),h=T();let f=T(!1),p=T(""),S=T(-1);function x(){g(f,!r(f))}function w(V){r(f)||$s(`play ${V}`)}function E(V){V<r(S)&&g(S,r(S)-1),oa.removeFromQueue(V)}async function B(){pa({title:"Save Playlist",message:"Enter a name for this playlist:",type:"prompt",placeholder:"Playlist Name",confirmLabel:"Save",onConfirm:async V=>{V&&V.trim().length>0&&(await oa.saveQueue(V),jn())}})}function se(){i().length!==0&&pa({title:"Clear Queue",message:"Are you sure you want to clear the entire play queue?",confirmLabel:"Clear All",type:"confirm",onConfirm:async()=>{qa.set([]),Ht.set({title:"Not Playing",artist:"",album:"",file:"",stationName:null,id:null,pos:null}),St.update(V=>({...V,state:"stop",song:-1,songid:-1,elapsed:0})),await $s("clear")}})}function K(V,W){let ne=r(S);V===ne?ne=W:V<ne&&W>=ne?ne-=1:V>ne&&W<=ne&&(ne+=1),g(S,ne),oa.moveTrack(V,W)}le(()=>a(),()=>{g(v,Number(a().song))}),le(()=>(s(),r(v)),()=>{s()||g(S,r(v))}),le(()=>r(S),()=>{g(d,r(S))}),le(()=>n(),()=>{g(u,n().file)}),le(()=>a(),()=>{g(h,a().state==="play")}),le(()=>i(),()=>{if(i().length>=0){const V=i().reduce((W,ne)=>W+(parseFloat(ne.time)||0),0);if(V>0){const W=Math.floor(V/3600),ne=Math.floor(V%3600/60);W>0?g(p,`${W} hr ${ne} min`):g(p,`${ne} min`)}else g(p,"")}}),Vt(),Ct();var te=Pu(),_e=c(te);ss(_e,{get itemsStore(){return qa},get isEditMode(){return r(f)},emptyText:"Queue is empty",onMoveItem:K,$$slots:{header:(V,W)=>{var ne=Au(),je=c(ne),F=c(je),P=c(F),H=c(P);re(H,()=>(N(y),m(()=>y.MENU)));var ve=_(F,2),J=c(ve),pe=_(c(J),4),U=c(pe),j=c(U),Ee=_(U,2);{var G=ue=>{var ee=Mu(),Q=c(ee);de(()=>ie(Q,r(p))),b(ue,ee)};C(Ee,ue=>{r(p)&&ue(G)})}var ce=_(J,2),he=c(ce),A=_(he,2),D=c(A);re(D,()=>(N(y),m(()=>y.SAVE)));var $=_(A,2);let ae;var O=c($);re(O,()=>(r(f),N(y),m(()=>r(f)?y.ACCEPT:y.EDIT))),de(()=>{ie(j,`${i(),m(()=>i().length)??""} tracks`),he.disabled=(i(),m(()=>i().length===0)),A.disabled=(i(),m(()=>i().length===0)),ae=Ge($,1,"btn-action svelte-185fgrr",null,ae,{active:r(f)}),Yt($,"title",r(f)?"Finish Editing":"Edit Queue"),$.disabled=(i(),m(()=>i().length===0))}),M("click",he,se),M("click",A,B),M("click",$,x),b(V,ne)},row:(V,W)=>{var ne=Cu();const je=_t(()=>W.item),F=_t(()=>W.index),P=_t(()=>W.startDrag);var H=c(ne);Mr(H,{get track(){return r(je)},get index(){return r(F)},get playingIndex(){return r(d)},get playingFile(){return r(u)},get isPlaying(){return r(h)},get isEditable(){return r(f)},$$events:{play:()=>w(r(F)),remove:()=>E(r(F)),startdrag(...ve){r(P)?.apply(this,ve)}}}),b(V,ne)}}}),b(e,te),Tt(),o()}var zu=k('<div class="token-alert content-padded svelte-4g0hpd"><h3 class="svelte-4g0hpd">Yandex Music Not Connected</h3> <p class="svelte-4g0hpd">Please go to Settings and connect your account.</p></div>'),Ru=k('<button class="back-icon-btn svelte-4g0hpd"><!></button>'),ju=k('<span class="search-icon svelte-4g0hpd"><!></span>'),Iu=k('<button class="clear-btn svelte-4g0hpd"><!></button>'),Nu=k('<div class="filter-tabs svelte-4g0hpd"><button>All</button> <button>Tracks</button></div>'),Du=k('<div class="icon-wrap svelte-4g0hpd"><!></div>'),Ou=k('<div class="music-card svelte-4g0hpd"><div><!> <div class="play-overlay svelte-4g0hpd"><span class="overlay-icon svelte-4g0hpd"><!></span></div></div> <div class="card-title svelte-4g0hpd"> </div></div>'),Fu=k('<div class="music-card svelte-4g0hpd"><div class="card-img-container svelte-4g0hpd"><!> <div class="play-overlay svelte-4g0hpd"><span class="overlay-icon svelte-4g0hpd"><!></span></div></div> <div class="card-title svelte-4g0hpd"> </div></div>'),qu=k('<h2 class="header-label svelte-4g0hpd">Moods & Genres</h2> <div class="music-grid horizontal section-mb svelte-4g0hpd"></div>',1),Bu=k('<div class="music-card svelte-4g0hpd"><div class="card-img-container svelte-4g0hpd"><!></div> <div class="card-title svelte-4g0hpd"> </div></div>'),Uu=k('<h2 class="header-label svelte-4g0hpd">Mixes for You</h2> <div class="music-grid horizontal section-mb svelte-4g0hpd"></div>',1),Yu=k('<div class="content-padded svelte-4g0hpd"><h2 class="header-label svelte-4g0hpd">Library & Vibe</h2> <div class="music-grid horizontal section-mb svelte-4g0hpd"></div> <!> <!></div>'),Hu=k('<div class="spinner svelte-4g0hpd"></div>'),Vu=k('<div class="music-card svelte-4g0hpd"><div class="card-img-container rounded svelte-4g0hpd"><!></div> <div class="card-title center svelte-4g0hpd"> </div></div>'),Wu=k('<h3 class="header-label svelte-4g0hpd">Artists</h3> <div class="music-grid horizontal section-mb svelte-4g0hpd"></div>',1),Qu=k('<div class="music-card svelte-4g0hpd"><div class="card-img-container svelte-4g0hpd"><!></div> <div class="card-title svelte-4g0hpd"> </div> <div class="card-sub svelte-4g0hpd"> </div></div>'),Xu=k('<h3 class="header-label svelte-4g0hpd">Albums</h3> <div class="music-grid horizontal section-mb svelte-4g0hpd"></div>',1),Ku=k('<div class="content-padded svelte-4g0hpd"><!> <!> <!></div>'),Gu=k('<div slot="fallback" class="icon-fallback svelte-4g0hpd"><!></div>'),Zu=k('<p style="font-size:13px; color:var(--c-text-secondary); margin-top:10px; line-clamp:2; overflow:hidden;" class="svelte-4g0hpd"> </p>'),Ju=k('<div class="view-header svelte-4g0hpd" style="display:flex; gap: 20px; align-items:flex-end; margin-bottom:20px;"><div style="width: 140px; height: 140px; flex-shrink:0;" class="svelte-4g0hpd"><!></div> <div style="flex: 1; min-width: 0;" class="svelte-4g0hpd"><div class="card-sub svelte-4g0hpd" style="font-size:14px; text-transform:uppercase; margin-bottom:4px;"> </div> <h1 style="font-size:32px; margin:0; line-height:1.1;" class="svelte-4g0hpd"> </h1> <!> <button class="btn-primary svelte-4g0hpd" style="margin-top:16px;">Play All</button></div></div>'),ef=k('<div class="music-card svelte-4g0hpd"><div class="card-img-container svelte-4g0hpd"><!></div> <div class="card-title svelte-4g0hpd"> </div> <div class="card-sub svelte-4g0hpd"> </div></div>'),tf=k('<h3 class="header-label svelte-4g0hpd" style="margin-top:20px;">Albums</h3> <div class="music-grid horizontal section-mb svelte-4g0hpd"></div> <h3 class="header-label svelte-4g0hpd">Popular Tracks</h3>',1),af=k('<div slot="header" class="content-padded svelte-4g0hpd"><!> <!></div>'),rf=k('<div slot="row" class="svelte-4g0hpd"><!></div>'),sf=k('<button class="btn-secondary svelte-4g0hpd"> </button>'),nf=k('<div slot="footer" style="padding: 20px; text-align: center;" class="svelte-4g0hpd"><!></div>'),of=k('<div class="content-padded no-bottom-pad svelte-4g0hpd"><div class="search-input-container svelte-4g0hpd"><!> <input type="text" placeholder="Search Yandex Music..." class="svelte-4g0hpd"/> <!></div> <!></div> <!> <!> <!>',1),lf=k('<div class="view-container scrollable relative-parent svelte-4g0hpd"><!></div>');function cf(e,t){Et(t,!1);const a=()=>Ce(yr,"$yandexAuthStatus",i),s=()=>Ce(v,"$tracksStore",i),n=()=>Ce(d,"$albumsStore",i),[i,l]=jt(),o=T(),v=Xe([]),d=Xe([]);let u=T([]),h=T([]),f=T([]),p=T(!1),S=T(!1),x=T("dashboard"),w=T({title:"",sub:"",cover:null,description:""}),E={uid:null,kind:null,offset:0},B=T(""),se=T("all"),K=T({tracks:[],albums:[],artists:[]}),te;Ya(()=>{r(o)&&(V(),_e())});async function _e(){try{const A=await ea.getFavoritesIds();A&&A.ids&&fs.set(new Set(A.ids.map(String)))}catch(A){console.error("Sync likes failed",A)}}async function V(){g(p,!0);try{const A=await ea.getUserPlaylists(),D=await ea.getLanding();g(h,D.moods||[]),g(f,D.personal||[]),g(u,[{title:"My Vibe",kind:"my_vibe",cover:null,isStation:!0,description:"Endless flow based on your taste"},...A])}catch(A){console.error(A),De("Failed to load dashboard","error")}finally{g(p,!1)}}async function W(A){if(A.kind==="my_vibe"){De("Starting My Vibe...","info"),ea.playRadio();return}if(A.kind==="station"){De(`Starting ${A.title}...`,"info"),ea.playStation(A.id);return}g(x,"list"),g(w,{title:A.title,sub:"Playlist",cover:A.cover}),v.set([]),d.set([]),g(p,!0);try{let D=A.uid,$=A.kind;!D&&A.id&&A.id.includes(":")&&([D,$]=A.id.split(":")),E={uid:D,kind:$,offset:0},await ne(D,$,0)}catch(D){console.error(D)}finally{g(p,!1)}}async function ne(A,D,$){const ae=await ea.getPlaylistTracks(A,D,$);return ae&&ae.tracks&&($===0?v.set(ae.tracks):v.update(O=>[...O,...ae.tracks])),ae?.tracks?.length||0}async function je(){if(!r(S)){g(S,!0);try{E.offset+=50,await ne(E.uid,E.kind,E.offset)===0&&De("No more tracks","info")}catch{De("Failed to load more","error")}finally{g(S,!1)}}}async function F(A){g(x,"artist_details"),g(w,{title:A.title,sub:"Artist",cover:A.image}),v.set([]),d.set([]),g(p,!0);try{const D=await ea.getArtistDetails(A.id);g(w,{title:D.name,sub:"Popular Tracks",cover:D.cover,description:D.description}),v.set(D.tracks||[]),d.set(D.albums||[])}catch{De("Failed to load artist","error")}finally{g(p,!1)}}async function P(A){g(x,"album_details"),g(w,{title:A.title,sub:A.artist,cover:A.image}),v.set([]),d.set([]),g(p,!0);try{const D=await ea.getAlbumDetails(A.id);g(w,{title:D.title,sub:D.artist+(D.year?` â¢ ${D.year}`:""),cover:D.cover}),v.set(D.tracks||[])}catch{De("Failed to load album","error")}finally{g(p,!1)}}function H(A){g(B,A.target.value),clearTimeout(te),r(B).length>2?te=setTimeout(ve,600):r(B).length===0&&g(x,"dashboard")}async function ve(){g(p,!0),g(x,"search"),g(K,{tracks:[],albums:[],artists:[]});try{const A=await ea.search(r(B));A&&(g(K,A),(r(se)==="track"||r(se)==="all")&&v.set(A.tracks||[]))}catch(A){console.error("Search error",A),De("Search failed","error")}finally{g(p,!1)}}function J(A){g(se,A),r(K).tracks&&A==="track"&&v.set(r(K).tracks)}function pe(){r(x)==="search"?(g(x,"dashboard"),g(B,"")):["list","artist_details","album_details"].includes(r(x))&&(r(B).length>0?g(x,"search"):g(x,"dashboard"))}async function U(){const A=s();if(!A.length)return;(await fetch("/wave-yandex-api.php?action=play_playlist",{method:"POST",body:JSON.stringify({tracks:A})})).ok&&De("Playing...","success")}function j(A){const D=A.detail;D.artistId?F({id:D.artistId,title:D.artist,image:null}):(g(B,D.artist),ve())}le(()=>a(),()=>{g(o,a())}),Vt(),Ct();var Ee=lf(),G=c(Ee);{var ce=A=>{var D=zu();b(A,D)},he=A=>{var D=of(),$=ze(D),ae=c($),O=c(ae);{var ue=z=>{var I=Ru(),Z=c(I);re(Z,()=>(N(y),m(()=>y.BACK))),M("click",I,pe),b(z,I)},ee=z=>{var I=ju(),Z=c(I);re(Z,()=>(N(y),m(()=>y.SEARCH))),b(z,I)};C(O,z=>{r(x)!=="dashboard"?z(ue):z(ee,!1)})}var Q=_(O,2),fe=_(Q,2);{var be=z=>{var I=Iu(),Z=c(I);re(Z,()=>(N(y),m(()=>y.CLOSE))),M("click",I,()=>{g(B,""),g(x,"dashboard")}),b(z,I)};C(fe,z=>{r(B)&&z(be)})}var ke=_(ae,2);{var xe=z=>{var I=Nu(),Z=c(I);let Pe;var me=_(Z,2);let Me;de(()=>{Pe=Ge(Z,1,"svelte-4g0hpd",null,Pe,{active:r(se)==="all"}),Me=Ge(me,1,"svelte-4g0hpd",null,Me,{active:r(se)==="track"})}),M("click",Z,()=>J("all")),M("click",me,()=>J("track")),b(z,I)};C(ke,z=>{r(x)==="search"&&z(xe)})}var Oe=_($,2);{var Te=z=>{var I=Yu(),Z=_(c(I),2);bt(Z,5,()=>r(u),Rt,(q,R)=>{var X=Ou(),Ae=c(X);let ye;var we=c(Ae);{var ge=Ve=>{var We=Du(),Be=c(We);re(Be,()=>(N(y),m(()=>y.RADIO))),b(Ve,We)},Y=Ve=>{Ot(Ve,{get src(){return r(R),m(()=>r(R).cover)},get alt(){return r(R),m(()=>r(R).title)},radius:"8px"})};C(we,Ve=>{r(R),m(()=>r(R).kind==="my_vibe")?Ve(ge):Ve(Y,!1)})}var oe=_(we,2),Se=c(oe),Ie=c(Se);re(Ie,()=>(N(y),m(()=>y.PLAY)));var Ne=_(Ae,2),Ue=c(Ne);de(()=>{ye=Ge(Ae,1,"card-img-container svelte-4g0hpd",null,ye,{"is-vibe":r(R).kind==="my_vibe"}),ie(Ue,(r(R),m(()=>r(R).title)))}),M("click",X,()=>W(r(R))),b(q,X)});var Pe=_(Z,2);{var me=q=>{var R=qu(),X=_(ze(R),2);bt(X,5,()=>r(h),Rt,(Ae,ye)=>{var we=Fu(),ge=c(we),Y=c(ge);Ot(Y,{get src(){return r(ye),m(()=>r(ye).cover)},get alt(){return r(ye),m(()=>r(ye).title)},radius:"8px"});var oe=_(Y,2),Se=c(oe),Ie=c(Se);re(Ie,()=>(N(y),m(()=>y.RADIO)));var Ne=_(ge,2),Ue=c(Ne);de(()=>{pt(ge,`background-color: ${r(ye),m(()=>r(ye).bgColor||"#333")??""}`),ie(Ue,(r(ye),m(()=>r(ye).title)))}),M("click",we,()=>W(r(ye))),b(Ae,we)}),b(q,R)};C(Pe,q=>{r(h),m(()=>r(h).length>0)&&q(me)})}var Me=_(Pe,2);{var Re=q=>{var R=Uu(),X=_(ze(R),2);bt(X,5,()=>r(f),Rt,(Ae,ye)=>{var we=Bu(),ge=c(we),Y=c(ge);Ot(Y,{get src(){return r(ye),m(()=>r(ye).cover)},get alt(){return r(ye),m(()=>r(ye).title)},radius:"8px"});var oe=_(ge,2),Se=c(oe);de(()=>ie(Se,(r(ye),m(()=>r(ye).title)))),M("click",we,()=>W(r(ye))),b(Ae,we)}),b(q,R)};C(Me,q=>{r(f),m(()=>r(f).length>0)&&q(Re)})}vt(1,I,()=>yt),b(z,I)};C(Oe,z=>{r(x)==="dashboard"&&z(Te)})}var $e=_(Oe,2);{var qe=z=>{var I=Ku(),Z=c(I);{var Pe=R=>{var X=Hu();b(R,X)};C(Z,R=>{r(p)&&R(Pe)})}var me=_(Z,2);{var Me=R=>{var X=Wu(),Ae=_(ze(X),2);bt(Ae,5,()=>(r(K),m(()=>r(K).artists)),Rt,(ye,we)=>{var ge=Vu(),Y=c(ge),oe=c(Y);Ot(oe,{get src(){return r(we),m(()=>r(we).image)},get alt(){return r(we),m(()=>r(we).title)},radius:"50%"});var Se=_(Y,2),Ie=c(Se);de(()=>ie(Ie,(r(we),m(()=>r(we).title)))),M("click",ge,()=>F(r(we))),b(ye,ge)}),b(R,X)};C(me,R=>{r(K),r(se),m(()=>r(K).artists.length>0&&r(se)==="all")&&R(Me)})}var Re=_(me,2);{var q=R=>{var X=Xu(),Ae=_(ze(X),2);bt(Ae,5,()=>(r(K),m(()=>r(K).albums)),Rt,(ye,we)=>{var ge=Qu(),Y=c(ge),oe=c(Y);Ot(oe,{get src(){return r(we),m(()=>r(we).image)},get alt(){return r(we),m(()=>r(we).title)},radius:"8px"});var Se=_(Y,2),Ie=c(Se),Ne=_(Se,2),Ue=c(Ne);de(()=>{ie(Ie,(r(we),m(()=>r(we).title))),ie(Ue,(r(we),m(()=>r(we).artist)))}),M("click",ge,()=>P(r(we))),b(ye,ge)}),b(R,X)};C(Re,R=>{r(K),r(se),m(()=>r(K).albums.length>0&&r(se)==="all")&&R(q)})}vt(1,I,()=>yt),b(z,I)};C($e,z=>{r(x)==="search"&&z(qe)})}var He=_($e,2);{var L=z=>{ss(z,{get itemsStore(){return v},get isLoading(){return r(p)},emptyText:"No tracks found",$$slots:{header:(I,Z)=>{var Pe=af(),me=c(Pe);{var Me=R=>{var X=Ju(),Ae=c(X),ye=c(Ae);{let Ve=_t(()=>r(x)==="artist_details"?"50%":"8px");Ot(ye,{get src(){return r(w),m(()=>r(w).cover)},get radius(){return r(Ve)},$$slots:{fallback:(We,Be)=>{var Ze=Gu(),Ke=c(Ze);re(Ke,()=>(N(y),m(()=>y.ALBUMS))),b(We,Ze)}}})}var we=_(Ae,2),ge=c(we),Y=c(ge),oe=_(ge,2),Se=c(oe),Ie=_(oe,2);{var Ne=Ve=>{var We=Zu(),Be=c(We);de(()=>ie(Be,(r(w),m(()=>r(w).description)))),b(Ve,We)};C(Ie,Ve=>{r(w),m(()=>r(w).description)&&Ve(Ne)})}var Ue=_(Ie,2);de(()=>{ie(Y,(r(w),m(()=>r(w).sub))),ie(Se,(r(w),m(()=>r(w).title)))}),M("click",Ue,U),b(R,X)};C(me,R=>{r(x),r(w),m(()=>r(x)!=="search"&&r(w).title)&&R(Me)})}var Re=_(me,2);{var q=R=>{var X=tf(),Ae=_(ze(X),2);bt(Ae,5,n,Rt,(ye,we)=>{var ge=ef(),Y=c(ge),oe=c(Y);Ot(oe,{get src(){return r(we),m(()=>r(we).image)},get alt(){return r(we),m(()=>r(we).title)},radius:"8px"});var Se=_(Y,2),Ie=c(Se),Ne=_(Se,2),Ue=c(Ne);de(()=>{ie(Ie,(r(we),m(()=>r(we).title))),ie(Ue,(r(we),m(()=>r(we).year)))}),M("click",ge,()=>P(r(we))),b(ye,ge)}),b(R,X)};C(Re,R=>{r(x),n(),m(()=>r(x)==="artist_details"&&n().length>0)&&R(q)})}b(I,Pe)},row:(I,Z)=>{var Pe=rf();const me=_t(()=>Z.item),Me=_t(()=>Z.index);var Re=c(Pe);Mr(Re,{get track(){return r(me)},get index(){return r(Me)},$$events:{play:()=>ea.playTrack(r(me).id),artistclick:j}}),b(I,Pe)},footer:(I,Z)=>{var Pe=nf(),me=c(Pe);{var Me=Re=>{var q=sf(),R=c(q);de(()=>{q.disabled=r(S),ie(R,r(S)?"Loading...":"Load More")}),M("click",q,je),b(Re,q)};C(me,Re=>{r(x),s(),r(p),m(()=>r(x)==="list"&&s().length>=50&&!r(p))&&Re(Me)})}b(I,Pe)}}})};C(He,z=>{r(x),m(()=>["list","search","artist_details","album_details"].includes(r(x)))&&z(L)})}tr(Q,()=>r(B),z=>g(B,z)),M("input",Q,H),b(A,D)};C(G,A=>{r(o)?A(he,!1):A(ce)})}b(e,Ee),Tt(),l()}var df=k('<div class="knob svelte-1jla3sy"></div>'),vf=k('<div class="tooltip current svelte-1jla3sy"> </div> <span></span>',1),uf=k('<div slot="fallback" class="icon-fallback svelte-1jla3sy"><!></div>'),ff=k('<span class="meta-tag quality"> </span>'),hf=k('<div class="dot svelte-1jla3sy"></div>'),pf=k("<button><!> <!></button>"),gf=k('<div class="dock svelte-1jla3sy"><div class="progress-shadow svelte-1jla3sy"></div> <div><div class="rail svelte-1jla3sy"></div> <div class="fill svelte-1jla3sy"><!></div> <!></div> <div class="grid svelte-1jla3sy"><div class="info svelte-1jla3sy"><div class="art svelte-1jla3sy"><!></div> <div class="meta svelte-1jla3sy"><div class="title-row svelte-1jla3sy"><div class="title text-ellipsis svelte-1jla3sy"> </div> <button class="btn-icon tiny-dots svelte-1jla3sy"><!></button></div> <div class="artist-row svelte-1jla3sy"><div class="artist text-ellipsis svelte-1jla3sy"> </div> <!></div></div></div> <div class="controls svelte-1jla3sy"><button><!></button> <button class="btn-icon"><!></button> <button class="play-btn flex-center svelte-1jla3sy"><!></button> <button class="btn-icon"><!></button> <!></div> <div class="volume desktop svelte-1jla3sy"><button class="vol-btn-mini svelte-1jla3sy" title="Mute/Unmute"><!></button> <div class="custom-slider svelte-1jla3sy"><div class="slider-bg svelte-1jla3sy"><div class="slider-fill svelte-1jla3sy"></div> <div class="slider-knob svelte-1jla3sy"></div></div></div></div></div></div>');function _f(e,t){Et(t,!1);const a=()=>Ce(St,"$status",o),s=()=>Ce(Ht,"$currentSong",o),n=()=>Ce(Ia,"$favorites",o),i=()=>Ce(Ha,"$stations",o),l=()=>Ce(Ss,"$isFullPlayerOpen",o),[o,v]=jt(),d=T(),u=T(),h=T(),f=T(),p=T(),S=T(),x=T(),w=T(),E=T(),B=T(),se=T(),K=T(),te=T();let _e=T(!1),V=T(!1),W=!1,ne=T(0),je=T(),F=T();const P=O=>ue=>{ue.stopPropagation(),O()};function H(O){if(isNaN(O)||O===null)return"0:00";const ue=Math.floor(O/60),ee=Math.floor(O%60);return`${ue}:${ee<10?"0":""}${ee}`}function ve(O,ue){const ee=ue.getBoundingClientRect();return Math.max(0,Math.min(1,(O.clientX-ee.left)/ee.width))}function J(O){r(f)||(g(V,!0),g(ne,ve(O,r(je))),window.addEventListener("mousemove",pe),window.addEventListener("mouseup",U))}function pe(O){if(r(V)&&g(ne,ve(O,r(je))),W){const ue=Math.round(ve(O,r(F))*100);Ea(ue)}}function U(){r(V)&&!r(f)&&Ln(r(ne)*r(d)),g(V,!1),W=!1,window.removeEventListener("mousemove",pe),window.removeEventListener("mouseup",U)}let j=50;function Ee(O){O.stopPropagation(),a().volume>0?(j=a().volume,Ea(0)):Ea(j>0?j:30)}function G(O){W=!0;const ue=Math.round(ve(O,r(F))*100);Ea(ue),window.addEventListener("mousemove",pe),window.addEventListener("mouseup",U)}function ce(){const O=(r(te)+1)%3;O===0?(a().random&&ar(),a().repeat&&rr()):O===1?(a().random||ar(),a().repeat&&rr()):O===2&&(a().random&&ar(),a().repeat||rr())}function he(O){O.stopPropagation(),Kr(O,s(),{type:"general",source:"miniplayer"})}function A(O){Kr(O.detail.originalEvent,s(),{type:"general",source:"miniplayer"})}le(()=>a(),()=>{g(d,a().duration>0?a().duration:1)}),le(()=>a(),()=>{g(u,a().elapsed||0)}),le(()=>a(),()=>{g(h,a().state==="play")}),le(()=>s(),()=>{g(f,s().file?.startsWith("http")&&!s().isYandex)}),le(()=>s(),()=>{g(p,s().title||"Not Playing")}),le(()=>s(),()=>{g(S,s().stationName||s().artist||"Moode")}),le(()=>(s(),n()),()=>{g(x,s().file&&n().has(s().file))}),le(()=>(s(),i()),()=>{g(w,$r(s(),i(),s().stationName))}),le(()=>(r(f),r(V),r(ne),r(u),r(d)),()=>{g(E,r(f)?0:r(V)?r(ne)*100:r(u)/r(d)*100)}),le(()=>(r(h),r(V),r(f)),()=>{g(B,r(h)&&!r(V)&&!r(f))}),le(()=>a(),()=>{g(se,a().bitrate?`${a().bitrate} kbps`:a().format||"")}),le(()=>(a(),y),()=>{g(K,a().volume===0?y.VOLUME_MUTE:a().volume<50?y.VOLUME_MEDIUM:y.VOLUME_FULL)}),le(()=>a(),()=>{g(te,a().repeat?2:a().random?1:0)}),Vt(),Ct();var D=rt(),$=ze(D);{var ae=O=>{var ue=gf(),ee=c(ue),Q=_(ee,2);let fe;var be=_(c(Q),2),ke=c(be);{var xe=Fe=>{var ct=df();b(Fe,ct)};C(ke,Fe=>{r(f)||Fe(xe)})}var Oe=_(be,2);{var Te=Fe=>{var ct=vf(),kt=ze(ct),Jt=c(kt);de(Le=>{pt(kt,`left: ${r(E)??""}%`),ie(Jt,Le)},[()=>(r(V),r(ne),r(d),r(u),m(()=>r(V)?H(r(ne)*r(d)):H(r(u))))]),b(Fe,ct)};C(Oe,Fe=>{(r(_e)||r(V))&&!r(f)&&Fe(Te)})}Ua(Q,Fe=>g(je,Fe),()=>r(je));var $e=_(Q,2),qe=c($e),He=c(qe),L=c(He);Ot(L,{get src(){return r(w)},alt:"art",radius:"4px",$$slots:{fallback:(Fe,ct)=>{var kt=uf(),Jt=c(kt);re(Jt,()=>(r(f),N(y),m(()=>r(f)?y.RADIO:y.ALBUMS))),b(Fe,kt)}}});var z=_(He,2),I=c(z),Z=c(I),Pe=c(Z),me=_(Z,2),Me=c(me);re(Me,()=>(N(y),m(()=>y.DOTS)));var Re=_(I,2),q=c(Re),R=c(q),X=_(q,2);{var Ae=Fe=>{var ct=ff(),kt=c(ct);de(()=>ie(kt,r(se))),b(Fe,ct)};C(X,Fe=>{r(se)&&Fe(Ae)})}var ye=_(qe,2),we=c(ye),ge=Rr(()=>P(()=>ga.toggleFavorite(s())));let Y;var oe=c(we);re(oe,()=>(r(x),N(y),m(()=>r(x)?y.HEART_FILLED:y.HEART)));var Se=_(we,2),Ie=Rr(()=>P(()=>Zr("previous"))),Ne=c(Se);re(Ne,()=>(N(y),m(()=>y.PREVIOUS)));var Ue=_(Se,2),Ve=Rr(()=>P(js)),We=c(Ue);re(We,()=>(a(),N(y),m(()=>a().state==="play"?y.PAUSE:y.PLAY)));var Be=_(Ue,2),Ze=Rr(()=>P(()=>Zr("next"))),Ke=c(Be);re(Ke,()=>(N(y),m(()=>y.NEXT)));var Qe=_(Be,2);{var at=Fe=>{var ct=pf(),kt=Rr(()=>P(ce));let Jt;var Le=c(ct);{var tt=It=>{var ya=rt(),zr=ze(ya);re(zr,()=>(N(y),m(()=>y.REPEAT))),b(It,ya)},Pt=It=>{var ya=rt(),zr=ze(ya);re(zr,()=>(N(y),m(()=>y.SHUFFLE))),b(It,ya)};C(Le,It=>{r(te)===2?It(tt):It(Pt,!1)})}var da=_(Le,2);{var Ns=It=>{var ya=hf();b(It,ya)};C(da,It=>{r(te)>0&&It(Ns)})}de(()=>Jt=Ge(ct,1,"btn-icon desktop mode-btn svelte-1jla3sy",null,Jt,{active:r(te)>0})),M("click",ct,function(...It){r(kt)?.apply(this,It)}),b(Fe,ct)};C(Qe,Fe=>{r(f)||Fe(at)})}var Je=_(ye,2),ot=c(Je),lt=c(ot);re(lt,()=>r(K));var ut=_(ot,2),mt=c(ut),dt=c(mt),ft=_(dt,2);Ua(ut,Fe=>g(F,Fe),()=>r(F)),Ft(()=>M("click",ue,()=>Ss.set(!0))),En(ue,(Fe,ct)=>Nn?.(Fe,ct),()=>500),Ft(()=>M("longpress",ue,A)),de(()=>{pt(ee,`width: ${r(E)??""}%; transition: ${r(B)?"width 0.25s linear":"none"}`),fe=Ge(Q,1,"progress-bar svelte-1jla3sy",null,fe,{radio:r(f)}),pt(be,`width: ${r(E)??""}%; transition: ${r(B)?"width 0.25s linear":"none"}`),Yt(Z,"title",r(p)),ie(Pe,r(p)),Yt(q,"title",r(S)),ie(R,r(S)),Y=Ge(we,1,"btn-icon desktop svelte-1jla3sy",null,Y,{liked:r(x)}),pt(dt,`width: ${a(),m(()=>a().volume)??""}%`),pt(ft,`left: ${a(),m(()=>a().volume)??""}%`)}),M("mouseenter",Q,()=>g(_e,!0)),M("mouseleave",Q,()=>g(_e,!1)),M("mousedown",Q,Gt(J)),M("click",Q,Gt(function(Fe){Xr.call(this,t,Fe)})),M("click",me,he),M("click",we,function(...Fe){r(ge)?.apply(this,Fe)}),M("click",Se,function(...Fe){r(Ie)?.apply(this,Fe)}),M("click",Ue,function(...Fe){r(Ve)?.apply(this,Fe)}),M("click",Be,function(...Fe){r(Ze)?.apply(this,Fe)}),M("click",ot,Ee),M("mousedown",ut,Gt(G)),M("click",ut,Gt(function(Fe){Xr.call(this,t,Fe)})),b(O,ue)};C($,O=>{l()||O(ae)})}b(e,D),Tt(),v()}var mf=k('<div class="drag-zone svelte-1olwzt8"><div class="drag-handle-icon svelte-1olwzt8"><!></div></div>'),bf=k('<div slot="fallback" class="icon-fallback svelte-1olwzt8"><!></div>'),yf=k('<span class="meta-tag quality"> </span>'),wf=k('<span class="dot svelte-1olwzt8"></span>'),kf=k("<button><!> <!></button>"),xf=k('<div style="width: 44px;"></div>'),Sf=k('<div><!> <div class="bg-container svelte-1olwzt8"><div class="bg-gradient-fallback svelte-1olwzt8"></div> <img class="bg-img svelte-1olwzt8" alt="" loading="eager"/> <div class="bg-overlay svelte-1olwzt8"></div></div> <div class="player-body svelte-1olwzt8"><div class="art-container svelte-1olwzt8"><div class="artwork svelte-1olwzt8"><!></div></div> <div class="controls-area svelte-1olwzt8"><div class="meta svelte-1olwzt8"><h1 class="title text-ellipsis svelte-1olwzt8"> </h1> <div class="artist-row svelte-1olwzt8"><h2 class="artist text-ellipsis svelte-1olwzt8"> </h2> <!></div></div> <div class="progress-section"><div><div class="common-track svelte-1olwzt8"><div class="common-fill svelte-1olwzt8"><div class="common-knob svelte-1olwzt8"></div></div></div></div> <div class="time-row svelte-1olwzt8"><span> </span> <span> </span></div></div> <div class="buttons-row svelte-1olwzt8"><button><!></button> <button class="btn-icon side-btn svelte-1olwzt8"><!></button> <button class="play-btn-large flex-center svelte-1olwzt8"><!></button> <button class="btn-icon side-btn svelte-1olwzt8"><!></button> <!></div> <div class="volume-row svelte-1olwzt8"><button class="btn-icon small vol-btn svelte-1olwzt8"><!></button> <div class="volume-hit-area svelte-1olwzt8"><div class="common-track svelte-1olwzt8"><div class="common-fill svelte-1olwzt8"></div> <div class="common-knob svelte-1olwzt8"></div></div></div> <div class="vol-icon-static svelte-1olwzt8"><!></div></div></div></div></div>');function mi(e,t){Et(t,!1);const a=()=>Ce(Ht,"$currentSong",l),s=()=>Ce(Ha,"$stations",l),n=()=>Ce(St,"$status",l),i=()=>Ce(Ia,"$favorites",l),[l,o]=jt(),v=T(),d=T(),u=T(),h=T(),f=T(),p=T(),S=T(),x=T(),w=T(),E=T(),B=T(),se=T();let K=wt(t,"isDocked",8,!1),te=0,_e=T(0),V=T(!1);function W(){Ss.set(!1)}function ne(Le){if(K())return;const tt=Le.target;tt.closest(".bar-hit-area")||tt.closest(".volume-hit-area")||(te=Le.touches[0].clientY,g(V,!0))}function je(Le){if(!r(V)||K())return;const tt=Le.touches[0].clientY-te;tt>0&&(Le.cancelable&&tt>10&&Le.preventDefault(),g(_e,tt))}function F(){K()||(g(V,!1),r(_e)>150?W():g(_e,0))}let P=T(!1),H=T(0),ve=T();function J(Le){const tt=Math.floor(Le/60)||0,Pt=Math.floor(Le%60)||0;return`${tt}:${Pt.toString().padStart(2,"0")}`}function pe(Le,tt){const Pt=tt.getBoundingClientRect(),da=Le.touches?Le.touches[0].clientX:Le.clientX;return Math.max(0,Math.min(1,(da-Pt.left)/Pt.width))}function U(Le){r(h)||(g(P,!0),g(H,pe(Le,r(ve))))}function j(Le){r(P)&&g(H,pe(Le,r(ve)))}function Ee(){r(P)&&!r(h)&&Ln(r(H)*r(d)),g(P,!1)}let G=!1,ce=T(),he=50;function A(){n().volume>0?(he=n().volume,Ea(0)):Ea(he>0?he:30)}function D(Le){G=!0;const tt=Math.round(pe(Le,r(ce))*100);Ea(tt),window.addEventListener("mousemove",$),window.addEventListener("mouseup",ae),window.addEventListener("touchmove",$,{passive:!1}),window.addEventListener("touchend",ae)}function $(Le){if(G){Le.preventDefault();const tt=Math.round(pe(Le,r(ce))*100);Ea(tt)}}function ae(){G=!1,window.removeEventListener("mousemove",$),window.removeEventListener("mouseup",ae),window.removeEventListener("touchmove",$),window.removeEventListener("touchend",ae)}function O(){const Le=(r(w)+1)%3;Le===0?(n().random&&ar(),n().repeat&&rr()):Le===1?(n().random||ar(),n().repeat&&rr()):Le===2&&(n().random&&ar(),n().repeat||rr())}le(()=>(a(),s()),()=>{g(v,$r(a(),s(),a().stationName))}),le(()=>n(),()=>{g(d,n().duration||1)}),le(()=>n(),()=>{g(u,n().elapsed||0)}),le(()=>a(),()=>{g(h,a().file?.startsWith("http")&&!a().isYandex)}),le(()=>n(),()=>{g(f,n().state==="play")}),le(()=>(r(f),r(P),r(h)),()=>{g(p,r(f)&&!r(P)&&!r(h))}),le(()=>(r(h),r(P),r(H),r(u),r(d)),()=>{g(S,r(h)?0:r(P)?r(H)*100:r(u)/r(d)*100)}),le(()=>(n(),y),()=>{g(x,n().volume===0?y.VOLUME_MUTE:n().volume<50?y.VOLUME_MEDIUM:y.VOLUME_FULL)}),le(()=>n(),()=>{g(w,n().repeat?2:n().random?1:0)}),le(()=>n(),()=>{g(E,n().bitrate?`${n().bitrate} kbps`:n().format||"")}),le(()=>(a(),i()),()=>{g(B,a().file&&i().has(a().file))}),le(()=>N(K()),()=>{g(se,K()?"8px":"var(--radius-xl)")}),Vt(),Ct();var ue=Sf();let ee;var Q=c(ue);{var fe=Le=>{var tt=mf(),Pt=c(tt),da=c(Pt);re(da,()=>(N(y),m(()=>y.CHEVRON_DOWN))),M("touchstart",tt,ne),M("touchmove",tt,je),M("touchend",tt,F),M("click",tt,W),b(Le,tt)};C(Q,Le=>{K()||Le(fe)})}var be=_(Q,2),ke=_(c(be),2),xe=_(be,2),Oe=c(xe),Te=c(Oe),$e=c(Te);Ot($e,{get src(){return r(v)},alt:"Cover",get radius(){return r(se)},$$slots:{fallback:(Le,tt)=>{var Pt=bf(),da=c(Pt);re(da,()=>(r(h),N(y),m(()=>r(h)?y.RADIO:y.ALBUMS))),b(Le,Pt)}}});var qe=_(Oe,2),He=c(qe),L=c(He),z=c(L),I=_(L,2),Z=c(I),Pe=c(Z),me=_(Z,2);{var Me=Le=>{var tt=yf(),Pt=c(tt);de(()=>ie(Pt,r(E))),b(Le,tt)};C(me,Le=>{r(E)&&Le(Me)})}var Re=_(He,2),q=c(Re);let R;var X=c(q),Ae=c(X);Ua(q,Le=>g(ve,Le),()=>r(ve));var ye=_(q,2),we=c(ye),ge=c(we),Y=_(we,2),oe=c(Y),Se=_(Re,2),Ie=c(Se);let Ne;var Ue=c(Ie);re(Ue,()=>(r(B),N(y),m(()=>r(B)?y.HEART_FILLED:y.HEART)));var Ve=_(Ie,2),We=c(Ve);re(We,()=>(N(y),m(()=>y.PREVIOUS)));var Be=_(Ve,2),Ze=c(Be);re(Ze,()=>(n(),N(y),m(()=>n().state==="play"?y.PAUSE:y.PLAY)));var Ke=_(Be,2),Qe=c(Ke);re(Qe,()=>(N(y),m(()=>y.NEXT)));var at=_(Ke,2);{var Je=Le=>{var tt=kf();let Pt;var da=c(tt);{var Ns=va=>{var Va=rt(),Ds=ze(Va);re(Ds,()=>(N(y),m(()=>y.REPEAT))),b(va,Va)},It=va=>{var Va=rt(),Ds=ze(Va);re(Ds,()=>(N(y),m(()=>y.SHUFFLE))),b(va,Va)};C(da,va=>{r(w)===2?va(Ns):va(It,!1)})}var ya=_(da,2);{var zr=va=>{var Va=wf();b(va,Va)};C(ya,va=>{r(w)>0&&va(zr)})}de(()=>Pt=Ge(tt,1,"btn-icon side-btn mode-btn svelte-1olwzt8",null,Pt,{active:r(w)>0})),M("click",tt,O),b(Le,tt)},ot=Le=>{var tt=xf();b(Le,tt)};C(at,Le=>{r(h)?Le(ot,!1):Le(Je)})}var lt=_(Se,2),ut=c(lt),mt=c(ut);re(mt,()=>r(x));var dt=_(ut,2),ft=c(dt),Fe=c(ft),ct=_(Fe,2);Ua(dt,Le=>g(ce,Le),()=>r(ce));var kt=_(dt,2),Jt=c(kt);re(Jt,()=>(N(y),m(()=>y.VOLUME_FULL))),de((Le,tt)=>{ee=Ge(ue,1,"full-player svelte-1olwzt8",null,ee,{"is-docked":K()}),pt(ue,K()?"":`transform: translateY(${r(_e)}px); transition: ${r(V)?"none":"transform 0.3s cubic-bezier(0.2, 0.8, 0.2, 1)"}`),Yt(ke,"src",r(v)),pt(Te,`transform: scale(${1-r(_e)/3e3})`),pt(qe,`opacity: ${1-r(_e)/400}`),ie(z,(a(),m(()=>a().title||"Not Playing"))),ie(Pe,(a(),m(()=>a().stationName||a().artist||"Moode Audio"))),R=Ge(q,1,"bar-hit-area svelte-1olwzt8",null,R,{"is-docked-bar":K()}),pt(Ae,`width: ${r(S)??""}%; transition: ${r(p)?"width 0.3s linear":"none"}`),ie(ge,Le),ie(oe,tt),Ne=Ge(Ie,1,"btn-icon side-btn svelte-1olwzt8",null,Ne,{liked:r(B)}),pt(Fe,`width: ${n(),m(()=>n().volume)??""}%`),pt(ct,`left: ${n(),m(()=>n().volume)??""}%; right: auto;`)},[()=>(r(P),r(H),r(d),r(u),m(()=>r(P)?J(r(H)*r(d)):J(r(u)))),()=>(r(h),r(d),m(()=>r(h)?"LIVE":J(r(d))))]),M("mousedown",q,U),M("touchstart",q,U,void 0,!0),M("mousemove",q,function(...Le){(r(P)?j:null)?.apply(this,Le)}),M("touchmove",q,function(...Le){(r(P)?j:null)?.apply(this,Le)},void 0,!0),M("mouseup",q,Ee),M("touchend",q,Ee),M("click",Ie,()=>ga.toggleFavorite(a())),M("click",Ve,()=>Zr("previous")),M("click",Be,function(...Le){js?.apply(this,Le)}),M("click",Ke,()=>Zr("next")),M("click",ut,A),M("mousedown",dt,Gt(D)),M("touchstart",dt,Gt(D)),vt(3,ue,()=>fo,()=>({y:K()?0:800,duration:300,opacity:1})),b(e,ue),Tt(),o()}const Ef=`<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.0//EN" "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd">
<svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="600px" height="331px" viewBox="0 0 600 331" preserveAspectRatio="xMidYMid meet">
 <g fill="#eb1250">
  <path d="M 315.33 288.42 c -1.03 -0.33 -2.60 -1.34 -3.70 -2.39 -1.08 -1.01 -1.73 -2.81 -2.48 -6.68 -0.38 -1.99 -0.84 -4.29 -1.03 -5.13 -0.21 -0.84 -0.47 -2.20 -0.61 -3.05 -0.14 -0.84 -0.42 -2.34 -0.61 -3.33 -0.45 -2.20 -0.42 -2.04 -0.77 -4.17 -0.16 -0.96 -0.40 -2.16 -0.52 -2.65 -0.14 -0.52 -0.33 -1.45 -0.45 -2.11 -0.12 -0.68 -0.38 -2.02 -0.59 -2.98 -0.21 -0.96 -0.52 -2.55 -0.70 -3.52 -0.16 -0.96 -0.52 -2.81 -0.77 -4.10 -0.26 -1.29 -0.82 -4.08 -1.22 -6.21 -0.80 -4.20 -1.57 -8.13 -2.44 -12.54 -0.33 -1.55 -0.63 -3.23 -0.73 -3.75 -0.07 -0.52 -0.28 -1.57 -0.47 -2.34 -0.16 -0.77 -0.54 -2.63 -0.80 -4.10 -0.28 -1.48 -0.61 -3.12 -0.73 -3.63 -0.12 -0.52 -0.42 -2.20 -0.70 -3.75 -0.28 -1.55 -0.91 -4.92 -1.43 -7.50 -0.49 -2.58 -1.34 -7.01 -1.85 -9.84 -0.54 -2.84 -1.17 -6.26 -1.43 -7.62 -0.26 -1.36 -0.56 -3.07 -0.68 -3.80 -0.12 -0.75 -0.26 -1.43 -0.33 -1.55 -0.26 -0.42 -2.60 -12.89 -3.21 -17.16 -0.12 -0.84 -0.38 -2.16 -0.56 -2.93 -0.16 -0.77 -0.49 -2.34 -0.70 -3.52 -0.21 -1.15 -0.63 -3.26 -0.94 -4.69 -0.30 -1.41 -0.68 -3.30 -0.82 -4.22 -0.16 -0.89 -0.47 -2.58 -0.73 -3.75 -0.68 -3.30 -2.74 -14.16 -3.73 -19.80 -0.28 -1.48 -0.63 -3.38 -0.82 -4.22 -0.38 -1.71 -1.31 -6.70 -1.88 -10.08 -0.40 -2.34 -0.87 -4.71 -1.43 -7.27 -0.16 -0.84 -0.59 -3 -0.91 -4.80 -0.35 -1.80 -0.77 -4.01 -0.96 -4.92 -0.19 -0.89 -0.54 -2.98 -0.80 -4.64 -0.49 -3.26 -0.70 -3.91 -1.10 -3.40 -0.14 0.16 -0.30 0.63 -0.38 1.01 -0.07 0.40 -0.54 2.51 -1.01 4.69 -2.67 12.42 -3.16 14.77 -3.38 16.29 -0.28 1.99 -1.48 7.64 -3.77 18.05 -1.17 5.23 -2.37 10.66 -2.67 12.07 -0.33 1.43 -0.84 4.01 -1.17 5.74 -0.30 1.73 -1.05 5.27 -1.64 7.85 -0.59 2.58 -1.59 7.17 -2.25 10.20 -0.63 3.02 -1.38 5.93 -1.62 6.45 -0.66 1.36 -2.60 3.26 -4.05 3.96 -1.24 0.61 -1.24 0.61 -87.30 0.61 -86.04 0 -86.04 0 -87.33 -0.49 -1.59 -0.59 -3.56 -2.32 -4.41 -3.89 -1.97 -3.63 -0.35 -8.32 3.61 -10.43 1.01 -0.54 1.01 -0.54 83.44 -0.61 82.43 -0.05 82.43 -0.05 82.69 -1.41 0.14 -0.73 0.42 -1.85 0.59 -2.51 0.19 -0.63 0.82 -3.59 1.41 -6.56 0.59 -2.95 1.29 -6.23 1.52 -7.27 0.23 -1.03 0.82 -3.66 1.27 -5.86 0.47 -2.18 1.34 -6.30 1.97 -9.14 0.63 -2.84 1.34 -6.16 1.57 -7.38 0.21 -1.22 0.49 -2.39 0.61 -2.60 0.09 -0.21 0.42 -1.64 0.68 -3.16 0.26 -1.55 0.63 -3.26 0.82 -3.82 0.19 -0.59 0.35 -1.34 0.35 -1.69 0 -0.35 0.21 -1.57 0.49 -2.70 0.26 -1.13 0.59 -2.60 0.68 -3.23 0.21 -1.22 2.16 -10.08 3.05 -13.78 0.26 -1.13 1.05 -4.88 1.76 -8.32 0.70 -3.45 1.55 -7.59 1.88 -9.21 0.33 -1.62 1.08 -5.09 1.64 -7.73 1.62 -7.41 1.73 -7.95 2.13 -9.96 0.91 -4.62 1.92 -9.19 2.18 -9.80 0.14 -0.35 0.82 -1.24 1.48 -1.97 2.58 -2.72 5.84 -3.42 8.88 -1.90 1.97 0.98 3.73 2.74 4.27 4.31 0.42 1.20 1.41 6.42 1.80 9.47 0.09 0.84 0.30 1.83 0.45 2.18 0.14 0.38 0.26 1.10 0.26 1.66 0 0.54 0.16 1.45 0.35 2.04 0.19 0.56 0.56 2.25 0.84 3.73 0.82 4.50 1.78 9.28 2.20 11.13 0.19 0.77 0.45 2.04 0.56 2.81 0.47 2.63 1.92 10.08 2.25 11.60 0.19 0.84 0.45 2.16 0.56 2.93 0.28 1.64 0.63 3.56 1.08 5.86 0.19 0.91 0.49 2.60 0.70 3.75 0.21 1.17 0.54 2.79 0.70 3.63 0.19 0.84 0.77 3.75 1.29 6.45 0.54 2.72 1.17 5.88 1.41 7.03 0.23 1.17 0.66 3.38 0.94 4.92 0.26 1.55 0.70 4.03 0.96 5.51 0.26 1.48 0.73 3.91 1.03 5.39 0.30 1.48 0.68 3.45 0.82 4.34 0.16 0.91 0.47 2.48 0.70 3.52 0.70 3.19 2.23 10.73 2.58 12.89 0.09 0.66 0.47 2.48 0.80 4.10 0.63 3.05 0.70 3.35 1.66 8.77 0.33 1.80 0.82 4.29 1.08 5.51 0.26 1.24 0.56 2.79 0.68 3.42 0.19 1.17 0.89 4.76 1.55 8.09 0.21 0.96 0.63 3.23 0.96 5.04 0.84 4.64 1.41 7.55 1.69 8.91 0.14 0.66 0.35 1.76 0.49 2.46 0.12 0.70 0.38 2.04 0.56 2.93 0.19 0.91 0.61 3.16 0.94 5.04 1.05 5.86 2.48 13.41 2.88 15.12 0.19 0.91 0.42 2.02 0.47 2.46 0.07 0.45 0.33 1.78 0.59 2.93 0.26 1.17 0.56 2.70 0.68 3.40 0.12 0.70 0.30 1.62 0.42 1.99 0.12 0.40 0.35 1.48 0.52 2.41 0.26 1.50 0.35 1.69 0.82 1.69 0.45 0 0.54 -0.16 0.68 -0.98 0.23 -1.66 2.23 -11.86 2.84 -14.60 0.30 -1.41 0.66 -3.09 0.80 -3.75 0.89 -4.57 5.46 -26.60 6.47 -31.17 0.33 -1.41 0.77 -3.59 1.03 -4.80 0.52 -2.51 1.13 -5.44 2.13 -10.08 0.38 -1.73 1.01 -4.69 1.36 -6.56 0.38 -1.88 1.05 -5.13 1.50 -7.27 0.47 -2.13 0.94 -4.38 1.05 -5.04 0.45 -2.30 1.95 -9.63 2.18 -10.48 0.26 -1.01 1.64 -7.38 2.44 -11.32 0.30 -1.55 0.77 -3.87 1.05 -5.16 0.47 -2.34 2.91 -13.57 4.22 -19.57 0.38 -1.73 0.82 -3.89 0.96 -4.80 0.54 -3.26 2.16 -5.65 4.64 -6.91 1.73 -0.87 2.53 -1.01 4.36 -0.82 1.22 0.14 1.83 0.35 2.93 1.08 2.20 1.43 3.40 3.45 4.45 7.55 0.26 1.05 0.70 2.72 0.96 3.68 0.26 0.96 0.63 2.34 0.80 3.05 0.54 2.16 1.29 4.95 1.78 6.56 0.23 0.84 0.70 2.48 1.01 3.63 0.30 1.17 0.98 3.63 1.52 5.51 0.54 1.88 1.24 4.41 1.55 5.63 0.33 1.22 0.80 2.86 1.05 3.63 0.26 0.77 0.47 1.59 0.47 1.80 0 0.23 0.30 1.50 0.68 2.81 0.38 1.34 1.01 3.68 1.43 5.23 0.77 2.81 1.52 5.58 3.26 11.72 0.52 1.80 1.31 4.71 1.76 6.47 0.45 1.76 0.96 3.70 1.17 4.34 0.30 0.98 2.39 8.65 4.29 15.68 1.13 4.24 2.25 8.27 3.05 11.13 1.45 5.13 1.62 5.74 3.21 11.79 0.42 1.59 0.54 1.80 0.96 1.80 0.16 0 0.35 0.12 0.40 0.28 0.05 0.14 0.33 -0.52 0.63 -1.48 0.30 -0.96 1.73 -5.37 3.19 -9.82 1.48 -4.45 3.09 -9.52 3.63 -11.25 0.52 -1.73 1.85 -5.86 2.95 -9.14 1.13 -3.28 2.48 -7.45 3.05 -9.26 1.73 -5.44 2.23 -6.19 5.11 -7.69 1.43 -0.75 1.43 -0.75 69.40 -0.82 67.97 -0.07 67.97 -0.07 69.56 0.47 0.87 0.28 1.57 0.61 1.57 0.70 0 0.12 0.42 0.56 0.94 1.03 0.52 0.47 1.27 1.52 1.64 2.32 0.94 1.97 0.98 4.52 0.14 6.33 -0.73 1.57 -3.26 3.98 -4.52 4.31 -0.70 0.19 -19.31 0.28 -65.27 0.33 -64.29 0.05 -64.29 0.05 -66.82 7.66 -1.38 4.20 -4.97 14.95 -7.97 23.91 -5.58 16.71 -8.34 25.17 -9.89 30.12 -1.38 4.43 -2.34 5.98 -4.66 7.43 -1.15 0.75 -1.29 0.77 -3.66 0.77 -2.11 0 -2.63 -0.07 -3.59 -0.56 -1.20 -0.59 -2.65 -1.92 -3.59 -3.30 -0.47 -0.68 -2.44 -7.15 -4.17 -13.59 -0.19 -0.70 -0.61 -2.23 -0.94 -3.40 -0.33 -1.15 -0.77 -2.74 -0.98 -3.52 -0.19 -0.77 -0.45 -1.71 -0.56 -2.11 -0.12 -0.38 -0.49 -1.76 -0.82 -3.05 -0.35 -1.29 -1.03 -3.77 -1.52 -5.51 -1.90 -6.52 -2.79 -9.75 -2.95 -10.66 -0.07 -0.52 -0.23 -1.10 -0.35 -1.31 -0.12 -0.21 -0.63 -2.02 -1.15 -3.98 -0.94 -3.54 -1.66 -6.23 -3.40 -12.63 -0.47 -1.73 -1.10 -4.03 -1.43 -5.09 -0.30 -1.05 -0.94 -3.33 -1.38 -5.04 -0.45 -1.71 -1.03 -3.91 -1.29 -4.88 -0.28 -0.96 -0.59 -2.18 -0.68 -2.70 -0.12 -0.52 -0.75 -2.88 -1.41 -5.27 -0.66 -2.39 -1.45 -5.39 -1.80 -6.68 -0.33 -1.29 -0.70 -2.60 -0.80 -2.93 -0.30 -0.91 -2.04 -7.52 -2.25 -8.55 -0.16 -0.70 -0.33 -0.94 -0.66 -0.94 -0.40 0 -0.56 0.56 -1.45 4.80 -0.54 2.65 -1.36 6.61 -1.85 8.79 -0.47 2.20 -1.15 5.51 -1.50 7.38 -1.22 6.28 -1.92 9.73 -2.25 11.13 -0.19 0.77 -0.52 2.30 -0.70 3.40 -0.21 1.10 -0.54 2.53 -0.70 3.16 -0.19 0.66 -0.61 2.48 -0.91 4.10 -0.73 3.73 -1.69 8.48 -1.99 9.84 -0.49 2.30 -0.94 4.43 -1.29 6.21 -0.21 1.03 -0.75 3.61 -1.20 5.74 -0.45 2.13 -0.84 4.20 -0.91 4.57 -0.07 0.40 -0.23 1.34 -0.35 2.11 -0.14 0.77 -0.73 3.63 -1.31 6.33 -0.59 2.72 -1.17 5.55 -1.31 6.33 -0.30 1.83 -1.57 8.39 -1.85 9.61 -0.12 0.52 -0.54 2.58 -0.94 4.57 -0.40 1.99 -0.87 4.22 -1.05 4.92 -0.16 0.70 -0.45 2.09 -0.61 3.05 -0.16 0.96 -0.49 2.65 -0.73 3.75 -0.54 2.46 -0.59 2.70 -2.32 11.48 -0.77 3.94 -1.55 7.73 -1.73 8.44 -0.19 0.70 -0.56 2.39 -0.82 3.75 -0.28 1.36 -0.70 3.47 -0.96 4.69 -0.23 1.22 -0.61 3.23 -0.82 4.45 -0.63 3.87 -2.23 6.45 -4.83 7.85 -1.01 0.56 -1.57 0.68 -3.12 0.75 -1.13 0.05 -2.25 -0.07 -2.84 -0.26 z "/>
 </g>
</svg>`;var Tf=k('<div class="backdrop svelte-ji5owg"></div>'),$f=k('<button><span class="icon svelte-ji5owg"><!></span> <span> </span></button>'),Mf=k('<!> <aside><div class="header svelte-ji5owg"><div class="header-inner svelte-ji5owg"><button class="collapse-btn svelte-ji5owg"><div class="chevron svelte-ji5owg"><!></div></button> <div><div class="logo svelte-ji5owg"><!></div></div></div> <button class="btn-icon mobile-close svelte-ji5owg"><!></button></div> <div class="scroll-area custom-scrollbar svelte-ji5owg"><nav class="svelte-ji5owg"><!> <button title="Search"><span class="icon svelte-ji5owg"><!></span> <span>Search</span></button> <div class="sep svelte-ji5owg"></div> <button class="nav-item sync svelte-ji5owg" title="Update Library"><span><!></span> <span> </span></button> <div class="sep svelte-ji5owg"></div> <button title="Settings"><span class="icon svelte-ji5owg"><!></span> <span>Settings</span></button></nav> <div class="footer svelte-ji5owg"><div>Moode WaveUI</div></div></div></aside>',1);function Af(e,t){Et(t,!1);const a=()=>Ce(Es,"$isYandexEnabled",l),s=()=>Ce(ia,"$isSyncingLibrary",l),n=()=>Ce(dn,"$isSidebarCollapsed",l),i=()=>Ce(Dt,"$activeMenuTab",l),[l,o]=jt(),v=T(),d=T();let u=wt(t,"isOpen",8,!1);const h=Mn();let f=T(0),p=T(0),S=T(!1);const x=[{id:"queue",label:"Queue",icon:y.MENU},{id:"favorites",label:"Favorites",icon:y.HEART},{id:"artists",label:"Artists",icon:y.ARTISTS},{id:"albums",label:"Albums",icon:y.ALBUMS},{id:"playlists",label:"Playlists",icon:y.PLAYLISTS},{id:"radio",label:"Radio",icon:y.RADIO},{id:"yandex",label:"Yandex Music",icon:y.YANDEX}];function w(q){window.location.hash=`/${q}`,h("close")}async function E(){s()||(await Da.syncLibrary(),window.location.hash="/artists")}function B(){dn.update(q=>!q)}function se(q){u()&&(g(f,q.touches[0].clientX),g(p,r(f)),g(S,!0))}function K(q){r(S)&&g(p,q.touches[0].clientX)}function te(){r(S)&&(r(p)-r(f)<-70&&h("close"),g(S,!1),g(f,0),g(p,0))}le(()=>a(),()=>{g(v,x.filter(q=>q.id==="yandex"?a():!0))}),le(()=>(r(S),r(p),r(f)),()=>{g(d,r(S)?Math.min(0,r(p)-r(f)):0)}),Vt(),Ct();var _e=Mf(),V=ze(_e);{var W=q=>{var R=Tf();M("click",R,()=>h("close")),vt(3,R,()=>yt,()=>({duration:200})),b(q,R)};C(V,q=>{u()&&q(W)})}var ne=_(V,2);let je,F;var P=c(ne),H=c(P),ve=c(H),J=c(ve),pe=c(J);re(pe,()=>(N(y),m(()=>y.BACK)));var U=_(ve,2);let j;var Ee=c(U),G=c(Ee);re(G,()=>Ef);var ce=_(H,2),he=c(ce);re(he,()=>(N(y),m(()=>y.CLOSE)));var A=_(P,2),D=c(A),$=c(D);bt($,1,()=>r(v),q=>q.id,(q,R)=>{var X=$f();let Ae;var ye=c(X),we=c(ye);re(we,()=>(r(R),m(()=>r(R).icon)));var ge=_(ye,2);let Y;var oe=c(ge);de(()=>{Ae=Ge(X,1,"nav-item svelte-ji5owg",null,Ae,{active:i()===r(R).id}),Yt(X,"title",(r(R),m(()=>r(R).label))),Y=Ge(ge,1,"label-text svelte-ji5owg",null,Y,{hidden:n()}),ie(oe,(r(R),m(()=>r(R).label)))}),M("click",X,()=>w(r(R).id)),b(q,X)});var ae=_($,2);let O;var ue=c(ae),ee=c(ue);re(ee,()=>(N(y),m(()=>y.SEARCH)));var Q=_(ue,2);let fe;var be=_(ae,4),ke=c(be);let xe;var Oe=c(ke);re(Oe,()=>(N(y),m(()=>y.SYNC)));var Te=_(ke,2);let $e;var qe=c(Te),He=_(be,4);let L;var z=c(He),I=c(z);re(I,()=>(N(y),m(()=>y.SETTINGS)));var Z=_(z,2);let Pe;var me=_(D,2),Me=c(me);let Re;de(()=>{je=Ge(ne,1,"side-menu svelte-ji5owg",null,je,{"mobile-open":u(),collapsed:n()}),F=pt(ne,"",F,{transform:u()?`translateX(${r(d)}px)`:"",transition:r(S)?"none":"width 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.3s ease"}),Yt(ve,"title",n()?"Expand":"Collapse"),pt(J,`transform: rotate(${n()?"180deg":"0deg"})`),j=Ge(U,1,"logo-wrapper svelte-ji5owg",null,j,{hidden:n()}),O=Ge(ae,1,"nav-item svelte-ji5owg",null,O,{active:i()==="search"}),fe=Ge(Q,1,"label-text svelte-ji5owg",null,fe,{hidden:n()}),be.disabled=s(),xe=Ge(ke,1,"icon svelte-ji5owg",null,xe,{spin:s()}),$e=Ge(Te,1,"label-text svelte-ji5owg",null,$e,{hidden:n()}),ie(qe,s()?"Syncing...":"Update Library"),L=Ge(He,1,"nav-item svelte-ji5owg",null,L,{active:i()==="settings"}),Pe=Ge(Z,1,"label-text svelte-ji5owg",null,Pe,{hidden:n()}),Re=Ge(Me,1,"footer-text svelte-ji5owg",null,Re,{hidden:n()})}),M("click",ve,B),M("click",ce,()=>h("close")),M("click",ae,()=>w("search")),M("click",be,E),M("click",He,()=>w("settings")),M("touchstart",ne,se),M("touchmove",ne,K),M("touchend",ne,te),b(e,_e),Tt(),o()}var Cf=k('<div class="toast-container svelte-k2bvk7"><div> </div></div>'),Pf=k('<button class="back-btn svelte-k2bvk7"><span class="icon-inline svelte-k2bvk7"><!></span> Back</button>'),Lf=k('<div class="view-title svelte-k2bvk7"><!></div>'),zf=k('<div class="full-player-modal svelte-k2bvk7"><!></div>'),Rf=k('<div class="app-container svelte-k2bvk7"><div class="app-layout svelte-k2bvk7"><!> <!> <main class="content-area svelte-k2bvk7"><header class="top-bar svelte-k2bvk7"><button class="hamburger-btn svelte-k2bvk7"><!></button> <!></header> <div class="scroll-container svelte-k2bvk7"><div class="view-wrapper svelte-k2bvk7"><!></div></div></main> <div class="docked-player-container svelte-k2bvk7"><!></div></div> <div class="mini-player-wrapper svelte-k2bvk7"><!></div></div> <!>',1);function jf(e,t){Et(t,!1);const a=()=>Ce(Qt,"$navigationStack",l),s=()=>Ce(on,"$toastMessage",l),n=()=>Ce(Dt,"$activeMenuTab",l),i=()=>Ce(Ss,"$isFullPlayerOpen",l),[l,o]=jt();let v=T(!1);Ya(()=>{window.history.replaceState({depth:a().length},"","");const U=()=>void 0;return window.addEventListener("popstate",U),()=>window.removeEventListener("popstate",U)}),Ct();var d=Rf(),u=ze(d),h=c(u),f=c(h);{var p=U=>{var j=Cf(),Ee=c(j),G=c(Ee);de(()=>{Ge(Ee,1,`toast-body ${s().type??""}`,"svelte-k2bvk7"),ie(G,s().text)}),vt(3,j,()=>fo,()=>({y:-50,duration:300})),b(U,j)};C(f,U=>{s()&&U(p)})}var S=_(f,2);Af(S,{get isOpen(){return r(v)},$$events:{close:()=>g(v,!1)}});var x=_(S,2),w=c(x),E=c(w),B=c(E);re(B,()=>y.MENU);var se=_(E,2);{var K=U=>{var j=Pf(),Ee=c(j),G=c(Ee);re(G,()=>y.BACK),M("click",j,function(...ce){nd?.apply(this,ce)}),b(U,j)},te=U=>{var j=Lf(),Ee=c(j);{var G=he=>{var A=La("Radio");b(he,A)},ce=he=>{var A=rt(),D=ze(A);{var $=O=>{var ue=La("Playlists");b(O,ue)},ae=O=>{var ue=rt(),ee=ze(ue);{var Q=be=>{var ke=La("Search");b(be,ke)},fe=be=>{var ke=rt(),xe=ze(ke);{var Oe=$e=>{var qe=La("Yandex Music");b($e,qe)},Te=$e=>{var qe=rt(),He=ze(qe);{var L=I=>{var Z=La("Queue");b(I,Z)},z=I=>{var Z=rt(),Pe=ze(Z);{var me=Re=>{var q=La("Favorites");b(Re,q)},Me=Re=>{var q=rt(),R=ze(q);{var X=ye=>{var we=La("Settings");b(ye,we)},Ae=ye=>{var we=La();de(ge=>ie(we,ge),[()=>(n()||"Library").charAt(0).toUpperCase()+(n()||"library").slice(1)]),b(ye,we)};C(R,ye=>{n()==="settings"?ye(X):ye(Ae,!1)},!0)}b(Re,q)};C(Pe,Re=>{n()==="favorites"?Re(me):Re(Me,!1)},!0)}b(I,Z)};C(He,I=>{n()==="queue"?I(L):I(z,!1)},!0)}b($e,qe)};C(xe,$e=>{n()==="yandex"?$e(Oe):$e(Te,!1)},!0)}b(be,ke)};C(ee,be=>{n()==="search"?be(Q):be(fe,!1)},!0)}b(O,ue)};C(D,O=>{n()==="playlists"?O($):O(ae,!1)},!0)}b(he,A)};C(Ee,he=>{n()==="radio"?he(G):he(ce,!1)})}b(U,j)};C(se,U=>{a().length>1?U(K):U(te,!1)})}var _e=_(w,2),V=c(_e),W=c(V);{var ne=U=>{jv(U,{})},je=U=>{var j=rt(),Ee=ze(j);{var G=he=>{cf(he,{})},ce=he=>{var A=rt(),D=ze(A);{var $=O=>{Lu(O,{})},ae=O=>{var ue=rt(),ee=ze(ue);{var Q=be=>{nu(be,{})},fe=be=>{var ke=rt(),xe=ze(ke);{var Oe=$e=>{yu($e,{})},Te=$e=>{var qe=rt(),He=ze(qe);{var L=I=>{$u(I,{})},z=I=>{kv(I,{get activeCategory(){return n()}})};C(He,I=>{n()==="settings"?I(L):I(z,!1)},!0)}b($e,qe)};C(xe,$e=>{n()==="search"?$e(Oe):$e(Te,!1)},!0)}b(be,ke)};C(ee,be=>{n()==="playlists"||n()==="favorites"?be(Q):be(fe,!1)},!0)}b(O,ue)};C(D,O=>{n()==="queue"?O($):O(ae,!1)},!0)}b(he,A)};C(Ee,he=>{n()==="yandex"?he(G):he(ce,!1)},!0)}b(U,j)};C(W,U=>{n()==="radio"?U(ne):U(je,!1)})}var F=_(x,2),P=c(F);mi(P,{isDocked:!0});var H=_(h,2),ve=c(H);_f(ve,{});var J=_(u,2);{var pe=U=>{var j=zf(),Ee=c(j);mi(Ee,{}),b(U,j)};C(J,U=>{i()&&U(pe)})}de(()=>pt(_e,`padding-bottom: ${i()?"0px":"var(--mini-player-height)"};`)),M("click",E,()=>g(v,!0)),b(e,d),Tt(),o()}var If=k('<button class="back-btn-area svelte-l8h85k"><span class="back-icon svelte-l8h85k"><!></span></button> <span class="header-title svelte-l8h85k">Select Playlist</span>',1),Nf=k('<div class="track-info svelte-l8h85k"><div class="title text-ellipsis svelte-l8h85k"> </div> <div class="artist text-ellipsis svelte-l8h85k">Playlist</div></div>'),Df=k('<div class="track-info svelte-l8h85k"><div class="title text-ellipsis svelte-l8h85k"> </div> <div class="artist text-ellipsis svelte-l8h85k"> </div></div>'),Of=k('<button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span> </span></button>'),Ff=k('<div class="empty-msg svelte-l8h85k">No custom playlists</div>'),qf=k("<!> <!>",1),Bf=k('<button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Play Now</span></button> <div class="sep svelte-l8h85k"></div> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Rename</span></button> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Delete Playlist</span></button>',1),Uf=k('<div class="sep svelte-l8h85k"></div> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Vibe by Track</span></button>',1),Yf=k('<button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Go to Album</span></button> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Go to Artist</span></button>',1),Hf=k('<div class="sep svelte-l8h85k"></div> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Remove from Playlist</span></button>',1),Vf=k('<div class="sep svelte-l8h85k"></div> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Remove from Queue</span></button>',1),Wf=k('<button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Play Next</span></button> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Add to Queue</span></button> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Add to Playlist...</span></button> <!> <!> <button class="menu-row svelte-l8h85k"><span><!></span> <span> </span></button> <!> <!>',1),Qf=k('<div class="backdrop svelte-l8h85k"><div class="menu-card svelte-l8h85k"><div class="menu-header svelte-l8h85k"><!></div> <div class="menu-items scroll-y svelte-l8h85k"><!></div></div></div>');function Xf(e,t){Et(t,!1);const a=()=>Ce(Cn,"$contextMenu",i),s=()=>Ce(Ia,"$favorites",i),n=()=>Ce(Rs,"$playlists",i),[i,l]=jt(),o=T(),v=T(),d=T(),u=T(),h=T(),f=T(),p=T(),S=T();let x=T(),w=T(),E=T(),B=T(0),se=T(0),K=T("main"),te=T(!1);function _e($){a().isOpen&&(g(te,!1),Nt())}function V(){Nt()}function W(){a().track&&oa.playNext(a().track.file),Nt()}function ne(){a().track&&oa.addToQueue(a().track.file),Nt()}function je(){a().track&&ga.toggleFavorite(a().track),Nt()}function F(){const $=a().track;$&&$.album&&($.isYandex||Ba("tracks_by_album",{name:$.album,artist:$.artist})),Nt()}function P(){const $=a().track;$&&$.artist&&($.isYandex||Ba("albums_by_artist",{name:$.artist})),Nt()}async function H(){const{playlistName:$,index:ae}=a().context;$&&ae!==null&&(Ur.update(O=>{const ue=[...O];return ue.splice(ae,1),ue}),await ga.removeFromPlaylist($,ae)),Nt()}function ve(){const{index:$}=a().context;$!=null&&oa.removeFromQueue($),Nt()}function J(){const $=a().context.playlist;$&&Ye.send("stop").then(()=>Ye.send("clear")).then(()=>Ye.send(`load "${$.name.replace(/"/g,'\\"')}"`)).then(()=>Ye.send("play 0")),Nt()}function pe(){const $=a().context.playlist;$&&(Nt(),pa({title:"Rename Playlist",message:`Enter new name for "${$.name}":`,type:"prompt",placeholder:$.name,inputValue:$.name,confirmLabel:"Rename",onConfirm:ae=>{ae&&ae!==$.name&&ga.renamePlaylist($.name,ae)}}))}function U(){const $=a().context.playlist;$&&(Nt(),pa({title:"Delete Playlist",message:`Are you sure you want to delete "${$.name}"? This cannot be undone.`,type:"confirm",confirmLabel:"Delete",onConfirm:()=>{ga.deletePlaylist($.name)}}))}async function j(){const $=a().track;if($&&$.isYandex&&$.id){De(`Starting radio based on "${$.title}"...`,"info");try{await ea.playRadio($.id)}catch(ae){console.error(ae),De("Error starting radio","error")}}Nt()}function Ee(){g(K,"playlists")}function G(){g(K,"main")}async function ce($){const ae=a().track;if(ae)try{const O=$.replace(/"/g,'\\"'),ue=ae.file.replace(/"/g,'\\"');await Ye.send(`playlistadd "${O}" "${ue}"`),De(`Added to "${$}"`,"success"),Nt()}catch(O){console.error(O),De("Failed to add","error")}}le(()=>a(),()=>{a().isOpen&&g(K,"main")}),le(()=>(a(),r(te)),()=>{a().isOpen?!r(te)&&typeof history<"u"&&(history.pushState({contextMenuOpen:!0},""),g(te,!0)):r(te)&&typeof history<"u"&&(history.back(),g(te,!1))}),le(()=>(a(),s()),()=>{g(o,a().track&&s().has(a().track.file))}),le(()=>a(),()=>{g(v,a().track&&(String(a().track.file).includes("http")||String(a().track.file).includes("://")))}),le(()=>a(),()=>{g(d,a().track&&(a().track.isYandex||a().track.service==="yandex"))}),le(()=>a(),()=>{g(u,a().context?.type==="playlist")}),le(()=>a(),()=>{g(h,a().context?.type==="queue")}),le(()=>a(),()=>{g(f,a().context?.type==="playlist-card")}),le(()=>a(),()=>{g(p,a().context?.source==="miniplayer")}),le(()=>(a(),r(se),r(B),r(x),r(p),r(w)),()=>{g(S,(()=>{if(!a().isOpen)return"";const $=a().triggerRect,ae=a().x,O=a().y,ue=r(se)||220,ee=r(B)||320;if(r(x)<=768&&r(p)&&$)return`
        position: fixed; 
        bottom: ${r(w)-$.top}px; 
        left: 50%; 
        transform: translateX(-50%); 
        margin: 0; 
        transform-origin: bottom center;
      `;let Q=0,fe=0,be="top left";if($){const xe=$.left+$.width/2,Oe=$.top+$.height/2,Te=xe>r(x)/2,$e=Oe>r(w)/2;Te?(Q=$.right-ue,be=$e?"bottom right":"top right"):(Q=$.left,be=$e?"bottom left":"top left"),$e?fe=$.top-ee:fe=$.bottom}else Q=ae,fe=O,Q+ue>r(x)&&(Q=r(x)-ue-10),fe+ee>r(w)&&(fe=r(w)-ee-10);const ke=8;return Q<ke&&(Q=ke),Q+ue>r(x)-ke&&(Q=r(x)-ue-ke),fe<ke&&(fe=ke),fe+ee>r(w)-ke&&(fe=r(w)-ee-ke),`position: fixed; top: ${fe}px; left: ${Q}px; margin: 0; transform-origin: ${be};`})())}),Vt(),Ct();var he=rt();M("popstate",Ra,_e);var A=ze(he);{var D=$=>{var ae=Qf(),O=c(ae),ue=c(O),ee=c(ue);{var Q=Te=>{var $e=If(),qe=ze($e),He=c(qe),L=c(He);re(L,()=>(N(y),m(()=>y.BACK))),M("click",qe,G),b(Te,$e)},fe=Te=>{var $e=rt(),qe=ze($e);{var He=z=>{var I=Nf(),Z=c(I),Pe=c(Z);de(()=>ie(Pe,(a(),m(()=>a().context.playlist.name)))),b(z,I)},L=z=>{var I=Df(),Z=c(I),Pe=c(Z),me=_(Z,2),Me=c(me);de(()=>{ie(Pe,(a(),m(()=>a().track.title))),ie(Me,(a(),m(()=>a().track.artist)))}),b(z,I)};C(qe,z=>{r(f)?z(He):z(L,!1)},!0)}b(Te,$e)};C(ee,Te=>{r(K)==="playlists"?Te(Q):Te(fe,!1)})}var be=_(ue,2),ke=c(be);{var xe=Te=>{var $e=qf(),qe=ze($e);bt(qe,1,n,Rt,(z,I)=>{var Z=rt(),Pe=ze(Z);{var me=Me=>{var Re=Of(),q=c(Re),R=c(q);re(R,()=>(N(y),m(()=>y.PLAYLISTS)));var X=_(q,2),Ae=c(X);de(()=>ie(Ae,(r(I),m(()=>r(I).name)))),M("click",Re,()=>ce(r(I).name)),b(Me,Re)};C(Pe,Me=>{r(I),m(()=>r(I).name!=="Favorites")&&Me(me)})}b(z,Z)});var He=_(qe,2);{var L=z=>{var I=Ff();b(z,I)};C(He,z=>{n(),m(()=>n().filter(I=>I.name!=="Favorites").length===0)&&z(L)})}b(Te,$e)},Oe=Te=>{var $e=rt(),qe=ze($e);{var He=z=>{var I=Bf(),Z=ze(I),Pe=c(Z),me=c(Pe);re(me,()=>(N(y),m(()=>y.PLAY)));var Me=_(Z,4),Re=c(Me),q=c(Re);re(q,()=>(N(y),m(()=>y.EDIT)));var R=_(Me,2),X=c(R),Ae=c(X);re(Ae,()=>(N(y),m(()=>y.REMOVE))),M("click",Z,J),M("click",Me,pe),M("click",R,U),b(z,I)},L=z=>{var I=Wf(),Z=ze(I),Pe=c(Z),me=c(Pe);re(me,()=>(N(y),m(()=>y.NEXT)));var Me=_(Z,2),Re=c(Me),q=c(Re);re(q,()=>(N(y),m(()=>y.MENU)));var R=_(Me,2),X=c(R),Ae=c(X);re(Ae,()=>(N(y),m(()=>y.ADD_TO_PLAYLIST||y.ADD)));var ye=_(R,2);{var we=Qe=>{var at=Uf(),Je=_(ze(at),2),ot=c(Je),lt=c(ot);re(lt,()=>(N(y),m(()=>y.RADIO))),M("click",Je,j),b(Qe,at)};C(ye,Qe=>{r(d)&&Qe(we)})}var ge=_(ye,2);{var Y=Qe=>{var at=Yf(),Je=ze(at),ot=c(Je),lt=c(ot);re(lt,()=>(N(y),m(()=>y.ALBUM_LINK||y.ALBUMS)));var ut=_(Je,2),mt=c(ut),dt=c(mt);re(dt,()=>(N(y),m(()=>y.ARTIST_LINK||y.ARTISTS))),M("click",Je,F),M("click",ut,P),b(Qe,at)};C(ge,Qe=>{!r(v)&&!r(d)&&Qe(Y)})}var oe=_(ge,2),Se=c(oe);let Ie;var Ne=c(Se);re(Ne,()=>(r(o),N(y),m(()=>r(o)?y.HEART_FILLED:y.HEART)));var Ue=_(Se,2),Ve=c(Ue),We=_(oe,2);{var Be=Qe=>{var at=Hf(),Je=_(ze(at),2),ot=c(Je),lt=c(ot);re(lt,()=>(N(y),m(()=>y.REMOVE))),M("click",Je,H),b(Qe,at)};C(We,Qe=>{r(u)&&Qe(Be)})}var Ze=_(We,2);{var Ke=Qe=>{var at=Vf(),Je=_(ze(at),2),ot=c(Je),lt=c(ot);re(lt,()=>(N(y),m(()=>y.REMOVE))),M("click",Je,ve),b(Qe,at)};C(Ze,Qe=>{r(h)&&Qe(Ke)})}de(()=>{Ie=Ge(Se,1,"icon svelte-l8h85k",null,Ie,{liked:r(o)}),ie(Ve,r(o)?"Unlike":"Like")}),M("click",Z,W),M("click",Me,ne),M("click",R,Ee),M("click",oe,je),b(z,I)};C(qe,z=>{r(f)?z(He):z(L,!1)},!0)}b(Te,$e)};C(ke,Te=>{r(K)==="playlists"?Te(xe):Te(Oe,!1)})}Ua(O,Te=>g(E,Te),()=>r(E)),de(()=>pt(O,r(S))),Zn(O,"clientHeight",Te=>g(B,Te)),Zn(O,"clientWidth",Te=>g(se,Te)),vt(3,O,()=>An,()=>({start:.95,duration:100})),M("click",O,Gt(function(Te){Xr.call(this,t,Te)})),M("click",ae,V),vt(3,ae,()=>yt,()=>({duration:100})),b($,ae)};C(A,$=>{a(),m(()=>a().isOpen)&&$(D)})}ei("innerWidth",$=>g(x,$)),ei("innerHeight",$=>g(w,$)),b(e,he),Tt(),l()}var Kf=k('<p class="modal-message svelte-1bxxaoh"> </p>'),Gf=k('<div class="input-wrapper svelte-1bxxaoh"><input type="text" autoFocus/></div>'),Zf=k('<span class="check svelte-1bxxaoh">â</span>'),Jf=k("<button> <!></button>"),e0=k('<div class="select-list svelte-1bxxaoh"></div>'),t0=k('<button class="btn cancel svelte-1bxxaoh"> </button>'),a0=k('<div class="modal-actions svelte-1bxxaoh"><!> <button class="btn confirm svelte-1bxxaoh"> </button></div>'),r0=k('<div class="backdrop svelte-1bxxaoh"><div class="modal-card svelte-1bxxaoh"><div class="modal-header svelte-1bxxaoh"><span class="modal-title svelte-1bxxaoh"> </span></div> <div class="modal-body svelte-1bxxaoh"><!> <!></div> <!></div></div>');function s0(e,t){Et(t,!1);const a=()=>Ce(ks,"$modal",s),[s,n]=jt();let i=T(!1),l=T();function o(){if(a().type==="prompt"){const x=a().inputValue?a().inputValue.trim():"";if(x.length===0){d();return}a().onConfirm&&a().onConfirm(x)}else a().onConfirm&&a().onConfirm();cs()}function v(x){a().onConfirm&&a().onConfirm(x),cs()}function d(){g(i,!0),r(l)&&r(l).focus(),setTimeout(()=>{g(i,!1)},400)}function u(){cs()}function h(x){x.key==="Enter"&&a().type!=="select"&&o(),r(i)&&g(i,!1)}le(()=>a(),()=>{a().isOpen||g(i,!1)}),Vt(),Ct();var f=rt(),p=ze(f);{var S=x=>{var w=r0(),E=c(w),B=c(E),se=c(B),K=c(se),te=_(B,2),_e=c(te);{var V=H=>{var ve=Kf(),J=c(ve);de(()=>ie(J,(a(),m(()=>a().message)))),b(H,ve)};C(_e,H=>{a(),m(()=>a().message)&&H(V)})}var W=_(_e,2);{var ne=H=>{var ve=Gf(),J=c(ve);let pe;Ua(J,U=>g(l,U),()=>r(l)),de(()=>{pe=Ge(J,1,"modal-input svelte-1bxxaoh",null,pe,{"shake-error":r(i)}),Yt(J,"placeholder",(a(),m(()=>a().placeholder)))}),tr(J,()=>a().inputValue,U=>ic(ks,m(a).inputValue=U,m(a))),M("keydown",J,h),b(H,ve)},je=H=>{var ve=rt(),J=ze(ve);{var pe=U=>{var j=e0();bt(j,5,()=>(a(),m(()=>a().options)),Rt,(Ee,G)=>{var ce=Jf();let he;var A=c(ce),D=_(A);{var $=ae=>{var O=Zf();b(ae,O)};C(D,ae=>{r(G),a(),m(()=>r(G).value===a().inputValue)&&ae($)})}de(()=>{he=Ge(ce,1,"select-item svelte-1bxxaoh",null,he,{active:r(G).value===a().inputValue}),ie(A,`${r(G),m(()=>r(G).label)??""} `)}),M("click",ce,()=>v(r(G).value)),b(Ee,ce)}),b(U,j)};C(J,U=>{a(),m(()=>a().type==="select")&&U(pe)},!0)}b(H,ve)};C(W,H=>{a(),m(()=>a().type==="prompt")?H(ne):H(je,!1)})}var F=_(te,2);{var P=H=>{var ve=a0(),J=c(ve);{var pe=Ee=>{var G=t0(),ce=c(G);de(()=>ie(ce,(a(),m(()=>a().cancelLabel)))),M("click",G,function(...he){cs?.apply(this,he)}),b(Ee,G)};C(J,Ee=>{a(),m(()=>a().type==="confirm"||a().type==="prompt")&&Ee(pe)})}var U=_(J,2),j=c(U);de(()=>ie(j,(a(),m(()=>a().confirmLabel)))),M("click",U,o),b(H,ve)};C(F,H=>{a(),m(()=>a().type!=="select")&&H(P)})}de(()=>ie(K,(a(),m(()=>a().title)))),vt(3,E,()=>An,()=>({start:.95,duration:200})),M("click",E,Gt(function(H){Xr.call(this,t,H)})),M("click",w,u),vt(3,w,()=>yt,()=>({duration:150})),b(x,w)};C(p,x=>{a(),m(()=>a().isOpen)&&x(S)})}b(e,f),Tt(),n()}const bi={init(){this.handleHashChange(),window.addEventListener("hashchange",()=>this.handleHashChange())},handleHashChange(){let e=window.location.hash.slice(1);for(;e.startsWith("/");)e=e.slice(1);if(!e){(et(Qt).length>1||et(Dt)==="search")&&(this.setRootTab("artists"),window.location.hash="/artists");return}const t=e.split("/").map(decodeURIComponent),a=t[0];let s=sd();switch(s||t.length>1&&(a==="album"&&t.length>=3?s={artist:t[1],name:t[2]}:a==="artist"&&t.length>=2?s={name:t[1]}:s={name:t[1],displayName:t[1]}),console.log(`[Router] Navigating: ${a}`,s),a){case"queue":this.setRootTab("queue");break;case"radio":this.setRootTab("radio");break;case"playlists":this.setRootTab("playlists");break;case"settings":this.setRootTab("settings");break;case"favorites":Dt.set("favorites"),Qt.set([{view:"root"},{view:"details",data:{name:"Favorites"}}]);break;case"artists":this.setRootTab("artists");break;case"albums":this.setRootTab("albums");break;case"search":Dt.set("search"),t[1]&&Yr.set(t[1]),Qt.set([{view:"root"}]);break;case"album":Dt.set("albums"),Qt.set([{view:"root"},{view:"tracks_by_album",data:s}]);break;case"artist":Dt.set("artists"),Qt.set([{view:"root"},{view:"albums_by_artist",data:s}]);break;case"playlist":Dt.set("playlists"),Qt.set([{view:"root"},{view:"details",data:s}]);break;case"yandex":Dt.set("yandex"),Qt.set([{view:"root"}]);break;default:this.setRootTab("artists");break}},setRootTab(e){Dt.set(e),Qt.set([{view:"root"}])},updateUrl(e,t){let a="";if(e==="root"){const s=et(Dt);if(s==="search"){const n=et(Yr);a=n?`search/${encodeURIComponent(n)}`:"search"}else a=s}else if(e==="details"){const s=t.name||t;a=s==="Favorites"?"favorites":`playlist/${encodeURIComponent(s)}`}else if(e==="albums_by_artist"){const s=t.name||t;a=`artist/${encodeURIComponent(s)}`}else if(e==="tracks_by_album"){const s=t.name||t,n=t.artist;n?a=`album/${encodeURIComponent(n)}/${encodeURIComponent(s)}`:a=`album/${encodeURIComponent(s)}`}else e==="queue"&&(a="queue");if(a){const s=`#/${a}`;decodeURIComponent(window.location.hash)!==decodeURIComponent(s)&&(window.location.hash=`/${a}`)}}};var n0=k("<!> <!> <!>",1);function i0(e,t){Et(t,!1),Ya(async()=>{bi.init(),rd((l,o)=>{bi.updateUrl(l,o)}),yo(),Da.loadRadioStations();try{const l=await Na.getArtists();l.length>0?console.log(`[App] Database ready. Loaded ${l.length} artists from cache.`):(console.log("[App] Database empty. Starting initial sync..."),Da.syncLibrary())}catch(l){console.error("[App] DB Check failed:",l),De("Local DB error. Please update library manually.","error")}}),Ct();var a=n0(),s=ze(a);jf(s,{});var n=_(s,2);Xf(n,{});var i=_(n,2);s0(i,{}),b(e,a),Tt()}Fl(i0,{target:document.getElementById("app")});
