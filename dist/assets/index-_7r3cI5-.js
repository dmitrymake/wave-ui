(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();const zs=!1;var is=Array.isArray,eo=Array.prototype.indexOf,os=Array.from,Xa=Object.defineProperty,rr=Object.getOwnPropertyDescriptor,Ga=Object.getOwnPropertyDescriptors,to=Object.prototype,no=Array.prototype,Zs=Object.getPrototypeOf,_a=Object.isExtensible;function ro(e){return typeof e=="function"}const St=()=>{};function so(e){return e()}function Xr(e){for(var t=0;t<e.length;t++)e[t]()}function Za(){var e,t,n=new Promise((r,a)=>{e=r,t=a});return{promise:n,resolve:e,reject:t}}const ct=2,Js=4,ls=8,ao=1<<24,tn=16,gn=32,Vn=64,cs=128,Ut=512,ot=1024,wt=2048,Ht=4096,Tt=8192,vn=16384,us=32768,Dn=65536,ga=1<<17,Ja=1<<18,dr=1<<19,ei=1<<20,un=1<<25,Fn=32768,Ns=1<<21,ea=1<<22,En=1<<23,Rn=Symbol("$state"),io=Symbol("legacy props"),oo=Symbol(""),er=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function ta(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function lo(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function co(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function uo(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function vo(e){throw new Error("https://svelte.dev/e/effect_orphan")}function fo(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function ho(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function po(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function _o(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function go(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function mo(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const bo=1,wo=2,ti=4,yo=8,ko=16,xo=2,Eo=4,Mo=8,So=1,To=2,$o=4,Ao=1,Co=2,ut=Symbol(),Po="http://www.w3.org/1999/xhtml";function Ro(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function ni(e){return e===this.v}function na(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function ri(e){return!na(e,this.v)}let vr=!1,Lo=!1;function zo(){vr=!0}let Ke=null;function ar(e){Ke=e}function dt(e,t=!1,n){Ke={p:Ke,i:!1,c:null,e:null,s:e,x:null,l:vr&&!t?{s:null,u:null,$:[]}:null}}function vt(e){var t=Ke,n=t.e;if(n!==null){t.e=null;for(var r of n)mi(r)}return t.i=!0,Ke=t.p,{}}function Nr(){return!vr||Ke!==null&&Ke.l===null}let Cn=[];function si(){var e=Cn;Cn=[],Xr(e)}function Yn(e){if(Cn.length===0&&!kr){var t=Cn;queueMicrotask(()=>{t===Cn&&si()})}Cn.push(e)}function No(){for(;Cn.length>0;)si()}function ai(e){var t=qe;if(t===null)return Fe.f|=En,e;if((t.f&us)===0){if((t.f&cs)===0)throw e;t.b.error(e)}else ir(e,t)}function ir(e,t){for(;t!==null;){if((t.f&cs)!==0)try{t.b.error(e);return}catch(n){e=n}t=t.parent}throw e}const Dr=new Set;let We=null,Hr=null,zt=null,Pt=[],ds=null,Is=!1,kr=!1;class Gt{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#n=0;#r=0;#l=null;#a=new Set;#s=new Set;skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#r>0}process(t){Pt=[],Hr=null,this.apply();var n={parent:null,effect:null,effects:[],render_effects:[]};for(const r of t)this.#i(r,n);this.is_fork||this.#u(),this.is_deferred()?(this.#o(n.effects),this.#o(n.render_effects)):(Hr=this,We=null,ma(n.render_effects),ma(n.effects),Hr=null,this.#l?.resolve()),zt=null}#i(t,n){t.f^=ot;for(var r=t.first;r!==null;){var a=r.f,i=(a&(gn|Vn))!==0,o=i&&(a&ot)!==0,c=o||(a&Tt)!==0||this.skipped_effects.has(r);if((r.f&cs)!==0&&r.b?.is_pending()&&(n={parent:n,effect:r,effects:[],render_effects:[]}),!c&&r.fn!==null){i?r.f^=ot:(a&Js)!==0?n.effects.push(r):hr(r)&&((r.f&tn)!==0&&this.#a.add(r),lr(r));var u=r.first;if(u!==null){r=u;continue}}var l=r.parent;for(r=r.next;r===null&&l!==null;)l===n.effect&&(this.#o(n.effects),this.#o(n.render_effects),n=n.parent),r=l.next,l=l.parent}}#o(t){for(const n of t)(n.f&wt)!==0?this.#a.add(n):(n.f&Ht)!==0&&this.#s.add(n),this.#c(n.deps),lt(n,ot)}#c(t){if(t!==null)for(const n of t)(n.f&ct)===0||(n.f&Fn)===0||(n.f^=Fn,this.#c(n.deps))}capture(t,n){this.previous.has(t)||this.previous.set(t,n),(t.f&En)===0&&(this.current.set(t,t.v),zt?.set(t,t.v))}activate(){We=this,this.apply()}deactivate(){We===this&&(We=null,zt=null)}flush(){if(this.activate(),Pt.length>0){if(ii(),We!==null&&We!==this)return}else this.#n===0&&this.process([]);this.deactivate()}discard(){for(const t of this.#t)t(this);this.#t.clear()}#u(){if(this.#r===0){for(const t of this.#e)t();this.#e.clear()}this.#n===0&&this.#d()}#d(){if(Dr.size>1){this.previous.clear();var t=zt,n=!0,r={parent:null,effect:null,effects:[],render_effects:[]};for(const i of Dr){if(i===this){n=!1;continue}const o=[];for(const[u,l]of this.current){if(i.current.has(u))if(n&&l!==i.current.get(u))i.current.set(u,l);else continue;o.push(u)}if(o.length===0)continue;const c=[...i.current.keys()].filter(u=>!this.current.has(u));if(c.length>0){var a=Pt;Pt=[];const u=new Set,l=new Map;for(const d of o)oi(d,c,u,l);if(Pt.length>0){We=i,i.apply();for(const d of Pt)i.#i(d,r);i.deactivate()}Pt=a}}We=null,zt=t}this.committed=!0,Dr.delete(this)}increment(t){this.#n+=1,t&&(this.#r+=1)}decrement(t){this.#n-=1,t&&(this.#r-=1),this.revive()}revive(){for(const t of this.#a)this.#s.delete(t),lt(t,wt),Bn(t);for(const t of this.#s)lt(t,Ht),Bn(t);this.flush()}oncommit(t){this.#e.add(t)}ondiscard(t){this.#t.add(t)}settled(){return(this.#l??=Za()).promise}static ensure(){if(We===null){const t=We=new Gt;Dr.add(We),kr||Gt.enqueue(()=>{We===t&&t.flush()})}return We}static enqueue(t){Yn(t)}apply(){}}function Io(e){var t=kr;kr=!0;try{for(var n;;){if(No(),Pt.length===0&&(We?.flush(),Pt.length===0))return ds=null,n;ii()}}finally{kr=t}}function ii(){var e=zn;Is=!0;var t=null;try{var n=0;for(Zr(!0);Pt.length>0;){var r=Gt.ensure();if(n++>1e3){var a,i;Oo()}r.process(Pt),Mn.clear()}}finally{Is=!1,Zr(e),ds=null}}function Oo(){try{fo()}catch(e){ir(e,ds)}}let ln=null;function ma(e){var t=e.length;if(t!==0){for(var n=0;n<t;){var r=e[n++];if((r.f&(vn|Tt))===0&&hr(r)&&(ln=new Set,lr(r),r.deps===null&&r.first===null&&r.nodes===null&&(r.teardown===null&&r.ac===null?ki(r):r.fn=null),ln?.size>0)){Mn.clear();for(const a of ln){if((a.f&(vn|Tt))!==0)continue;const i=[a];let o=a.parent;for(;o!==null;)ln.has(o)&&(ln.delete(o),i.push(o)),o=o.parent;for(let c=i.length-1;c>=0;c--){const u=i[c];(u.f&(vn|Tt))===0&&lr(u)}}ln.clear()}}ln=null}}function oi(e,t,n,r){if(!n.has(e)&&(n.add(e),e.reactions!==null))for(const a of e.reactions){const i=a.f;(i&ct)!==0?oi(a,t,n,r):(i&(ea|tn))!==0&&(i&wt)===0&&li(a,t,r)&&(lt(a,wt),Bn(a))}}function li(e,t,n){const r=n.get(e);if(r!==void 0)return r;if(e.deps!==null)for(const a of e.deps){if(t.includes(a))return!0;if((a.f&ct)!==0&&li(a,t,n))return n.set(a,!0),!0}return n.set(e,!1),!1}function Bn(e){for(var t=ds=e;t.parent!==null;){t=t.parent;var n=t.f;if(Is&&t===qe&&(n&tn)!==0&&(n&Ja)===0)return;if((n&(Vn|gn))!==0){if((n&ot)===0)return;t.f^=ot}}Pt.push(t)}function Do(e){let t=0,n=jn(0),r;return()=>{Sr()&&(s(n),fr(()=>(t===0&&(r=x(()=>e(()=>xr(n)))),t+=1,()=>{Yn(()=>{t-=1,t===0&&(r?.(),r=void 0,xr(n))})})))}}var Fo=Dn|dr|cs;function Bo(e,t,n){new jo(e,t,n)}class jo{parent;#e=!1;#t;#n=null;#r;#l;#a;#s=null;#i=null;#o=null;#c=null;#u=null;#d=0;#v=0;#h=!1;#f=null;#b=Do(()=>(this.#f=jn(this.#d),()=>{this.#f=null}));constructor(t,n,r){this.#t=t,this.#r=n,this.#l=r,this.parent=qe.b,this.#e=!!this.#r.pending,this.#a=sa(()=>{qe.b=this;{var a=this.#g();try{this.#s=Rt(()=>r(a))}catch(i){this.error(i)}this.#v>0?this.#_():this.#e=!1}return()=>{this.#u?.remove()}},Fo)}#w(){try{this.#s=Rt(()=>this.#l(this.#t))}catch(t){this.error(t)}this.#e=!1}#y(){const t=this.#r.pending;t&&(this.#i=Rt(()=>t(this.#t)),Gt.enqueue(()=>{var n=this.#g();this.#s=this.#p(()=>(Gt.ensure(),Rt(()=>this.#l(n)))),this.#v>0?this.#_():(Ln(this.#i,()=>{this.#i=null}),this.#e=!1)}))}#g(){var t=this.#t;return this.#e&&(this.#u=fn(),this.#t.before(this.#u),t=this.#u),t}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#r.pending}#p(t){var n=qe,r=Fe,a=Ke;en(this.#a),mt(this.#a),ar(this.#a.ctx);try{return t()}catch(i){return ai(i),null}finally{en(n),mt(r),ar(a)}}#_(){const t=this.#r.pending;this.#s!==null&&(this.#c=document.createDocumentFragment(),this.#c.append(this.#u),Mi(this.#s,this.#c)),this.#i===null&&(this.#i=Rt(()=>t(this.#t)))}#m(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#m(t);return}this.#v+=t,this.#v===0&&(this.#e=!1,this.#i&&Ln(this.#i,()=>{this.#i=null}),this.#c&&(this.#t.before(this.#c),this.#c=null))}update_pending_count(t){this.#m(t),this.#d+=t,this.#f&&or(this.#f,this.#d)}get_effect_pending(){return this.#b(),s(this.#f)}error(t){var n=this.#r.onerror;let r=this.#r.failed;if(this.#h||!n&&!r)throw t;this.#s&&(bt(this.#s),this.#s=null),this.#i&&(bt(this.#i),this.#i=null),this.#o&&(bt(this.#o),this.#o=null);var a=!1,i=!1;const o=()=>{if(a){Ro();return}a=!0,i&&mo(),Gt.ensure(),this.#d=0,this.#o!==null&&Ln(this.#o,()=>{this.#o=null}),this.#e=this.has_pending_snippet(),this.#s=this.#p(()=>(this.#h=!1,Rt(()=>this.#l(this.#t)))),this.#v>0?this.#_():this.#e=!1};var c=Fe;try{mt(null),i=!0,n?.(t,o),i=!1}catch(u){ir(u,this.#a&&this.#a.parent)}finally{mt(c)}r&&Yn(()=>{this.#o=this.#p(()=>{Gt.ensure(),this.#h=!0;try{return Rt(()=>{r(this.#t,()=>t,()=>o)})}catch(u){return ir(u,this.#a.parent),null}finally{this.#h=!1}})})}}function qo(e,t,n,r){const a=Nr()?vs:et;if(n.length===0&&e.length===0){r(t.map(a));return}var i=We,o=qe,c=Uo();function u(){Promise.all(n.map(l=>Ho(l))).then(l=>{c();try{r([...t.map(a),...l])}catch(d){(o.f&vn)===0&&ir(d,o)}i?.deactivate(),Gr()}).catch(l=>{ir(l,o)})}e.length>0?Promise.all(e).then(()=>{c();try{return u()}finally{i?.deactivate(),Gr()}}):u()}function Uo(){var e=qe,t=Fe,n=Ke,r=We;return function(i=!0){en(e),mt(t),ar(n),i&&r?.activate()}}function Gr(){en(null),mt(null),ar(null)}function vs(e){var t=ct|wt,n=Fe!==null&&(Fe.f&ct)!==0?Fe:null;return qe!==null&&(qe.f|=dr),{ctx:Ke,deps:null,effects:null,equals:ni,f:t,fn:e,reactions:null,rv:0,v:ut,wv:0,parent:n??qe,ac:null}}function Ho(e,t){let n=qe;n===null&&lo();var r=n.b,a=void 0,i=jn(ut),o=!Fe,c=new Map;return tl(()=>{var u=Za();a=u.promise;try{Promise.resolve(e()).then(u.resolve,u.reject).then(()=>{l===We&&l.committed&&l.deactivate(),Gr()})}catch(v){u.reject(v),Gr()}var l=We;if(o){var d=!r.is_pending();r.update_pending_count(1),l.increment(d),c.get(l)?.reject(er),c.delete(l),c.set(l,u)}const h=(v,p=void 0)=>{if(l.activate(),p)p!==er&&(i.f|=En,or(i,p));else{(i.f&En)!==0&&(i.f^=En),or(i,v);for(const[k,m]of c){if(c.delete(k),k===l)break;m.reject(er)}}o&&(r.update_pending_count(-1),l.decrement(d))};u.promise.then(h,v=>h(null,v||"unknown"))}),fs(()=>{for(const u of c.values())u.reject(er)}),new Promise(u=>{function l(d){function h(){d===a?u(i):l(a)}d.then(h,h)}l(a)})}function mr(e){const t=vs(e);return Si(t),t}function et(e){const t=vs(e);return t.equals=ri,t}function ci(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)bt(t[n])}}function Vo(e){for(var t=e.parent;t!==null;){if((t.f&ct)===0)return(t.f&vn)===0?t:null;t=t.parent}return null}function ra(e){var t,n=qe;en(Vo(e));try{e.f&=~Fn,ci(e),t=Ci(e)}finally{en(n)}return t}function ui(e){var t=ra(e);if(e.equals(t)||(We?.is_fork||(e.v=t),e.wv=$i()),!Qn)if(zt!==null)(Sr()||We?.is_fork)&&zt.set(e,t);else{var n=(e.f&Ut)===0?Ht:ot;lt(e,n)}}let Os=new Set;const Mn=new Map;let di=!1;function jn(e,t){var n={f:0,v:e,reactions:null,equals:ni,rv:0,wv:0};return n}function mn(e,t){const n=jn(e);return Si(n),n}function S(e,t=!1,n=!0){const r=jn(e);return t||(r.equals=ri),vr&&n&&Ke!==null&&Ke.l!==null&&(Ke.l.s??=[]).push(r),r}function Fr(e,t){return g(e,x(()=>s(e))),t}function g(e,t,n=!1){Fe!==null&&(!Jt||(Fe.f&ga)!==0)&&Nr()&&(Fe.f&(ct|tn|ea|ga))!==0&&!hn?.includes(e)&&go();let r=n?tr(t):t;return or(e,r)}function or(e,t){if(!e.equals(t)){var n=e.v;Qn?Mn.set(e,t):Mn.set(e,n),e.v=t;var r=Gt.ensure();r.capture(e,n),(e.f&ct)!==0&&((e.f&wt)!==0&&ra(e),lt(e,(e.f&Ut)!==0?ot:Ht)),e.wv=$i(),vi(e,wt),Nr()&&qe!==null&&(qe.f&ot)!==0&&(qe.f&(gn|Vn))===0&&(Ct===null?rl([e]):Ct.push(e)),!r.is_fork&&Os.size>0&&!di&&Yo()}return t}function Yo(){di=!1;var e=zn;Zr(!0);const t=Array.from(Os);try{for(const n of t)(n.f&ot)!==0&&lt(n,Ht),hr(n)&&lr(n)}finally{Zr(e)}Os.clear()}function xr(e){g(e,e.v+1)}function vi(e,t){var n=e.reactions;if(n!==null)for(var r=Nr(),a=n.length,i=0;i<a;i++){var o=n[i],c=o.f;if(!(!r&&o===qe)){var u=(c&wt)===0;if(u&&lt(o,t),(c&ct)!==0){var l=o;zt?.delete(l),(c&Fn)===0&&(c&Ut&&(o.f|=Fn),vi(l,Ht))}else u&&((c&tn)!==0&&ln!==null&&ln.add(o),Bn(o))}}}function tr(e){if(typeof e!="object"||e===null||Rn in e)return e;const t=Zs(e);if(t!==to&&t!==no)return e;var n=new Map,r=is(e),a=mn(0),i=Nn,o=c=>{if(Nn===i)return c();var u=Fe,l=Nn;mt(null),ya(i);var d=c();return mt(u),ya(l),d};return r&&n.set("length",mn(e.length)),new Proxy(e,{defineProperty(c,u,l){(!("value"in l)||l.configurable===!1||l.enumerable===!1||l.writable===!1)&&po();var d=n.get(u);return d===void 0?d=o(()=>{var h=mn(l.value);return n.set(u,h),h}):g(d,l.value,!0),!0},deleteProperty(c,u){var l=n.get(u);if(l===void 0){if(u in c){const d=o(()=>mn(ut));n.set(u,d),xr(a)}}else g(l,ut),xr(a);return!0},get(c,u,l){if(u===Rn)return e;var d=n.get(u),h=u in c;if(d===void 0&&(!h||rr(c,u)?.writable)&&(d=o(()=>{var p=tr(h?c[u]:ut),k=mn(p);return k}),n.set(u,d)),d!==void 0){var v=s(d);return v===ut?void 0:v}return Reflect.get(c,u,l)},getOwnPropertyDescriptor(c,u){var l=Reflect.getOwnPropertyDescriptor(c,u);if(l&&"value"in l){var d=n.get(u);d&&(l.value=s(d))}else if(l===void 0){var h=n.get(u),v=h?.v;if(h!==void 0&&v!==ut)return{enumerable:!0,configurable:!0,value:v,writable:!0}}return l},has(c,u){if(u===Rn)return!0;var l=n.get(u),d=l!==void 0&&l.v!==ut||Reflect.has(c,u);if(l!==void 0||qe!==null&&(!d||rr(c,u)?.writable)){l===void 0&&(l=o(()=>{var v=d?tr(c[u]):ut,p=mn(v);return p}),n.set(u,l));var h=s(l);if(h===ut)return!1}return d},set(c,u,l,d){var h=n.get(u),v=u in c;if(r&&u==="length")for(var p=l;p<h.v;p+=1){var k=n.get(p+"");k!==void 0?g(k,ut):p in c&&(k=o(()=>mn(ut)),n.set(p+"",k))}if(h===void 0)(!v||rr(c,u)?.writable)&&(h=o(()=>mn(void 0)),g(h,tr(l)),n.set(u,h));else{v=h.v!==ut;var m=o(()=>tr(l));g(h,m)}var _=Reflect.getOwnPropertyDescriptor(c,u);if(_?.set&&_.set.call(d,l),!v){if(r&&typeof u=="string"){var E=n.get("length"),P=Number(u);Number.isInteger(P)&&P>=E.v&&g(E,P+1)}xr(a)}return!0},ownKeys(c){s(a);var u=Reflect.ownKeys(c).filter(h=>{var v=n.get(h);return v===void 0||v.v!==ut});for(var[l,d]of n)d.v!==ut&&!(l in c)&&u.push(l);return u},setPrototypeOf(){_o()}})}var wn,fi,hi,pi;function Wo(){if(wn===void 0){wn=window,fi=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;hi=rr(t,"firstChild").get,pi=rr(t,"nextSibling").get,_a(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),_a(n)&&(n.__t=void 0)}}function fn(e=""){return document.createTextNode(e)}function yn(e){return hi.call(e)}function Ir(e){return pi.call(e)}function f(e,t){return yn(e)}function $e(e,t=!1){{var n=yn(e);return n instanceof Comment&&n.data===""?Ir(n):n}}function w(e,t=1,n=!1){let r=e;for(;t--;)r=Ir(r);return r}function Qo(e){e.textContent=""}function _i(){return!1}let ba=!1;function Ko(){ba||(ba=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function Xo(e,t,n,r=!0){r&&n();for(var a of t)e.addEventListener(a,n);fs(()=>{for(var i of t)e.removeEventListener(i,n)})}function Wn(e){var t=Fe,n=qe;mt(null),en(null);try{return e()}finally{mt(t),en(n)}}function Go(e,t,n,r=n){e.addEventListener(t,()=>Wn(n));const a=e.__on_r;a?e.__on_r=()=>{a(),r(!0)}:e.__on_r=()=>r(!0),Ko()}function gi(e){qe===null&&(Fe===null&&vo(),uo()),Qn&&co()}function Zo(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function nn(e,t,n){var r=qe;r!==null&&(r.f&Tt)!==0&&(e|=Tt);var a={ctx:Ke,deps:null,nodes:null,f:e|wt|Ut,first:null,fn:t,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,wv:0,ac:null};if(n)try{lr(a),a.f|=us}catch(c){throw bt(a),c}else t!==null&&Bn(a);var i=a;if(n&&i.deps===null&&i.teardown===null&&i.nodes===null&&i.first===i.last&&(i.f&dr)===0&&(i=i.first,(e&tn)!==0&&(e&Dn)!==0&&i!==null&&(i.f|=Dn)),i!==null&&(i.parent=r,r!==null&&Zo(i,r),Fe!==null&&(Fe.f&ct)!==0&&(e&Vn)===0)){var o=Fe;(o.effects??=[]).push(i)}return a}function Sr(){return Fe!==null&&!Jt}function fs(e){const t=nn(ls,null,!1);return lt(t,ot),t.teardown=e,t}function Ds(e){gi();var t=qe.f,n=!Fe&&(t&gn)!==0&&(t&us)===0;if(n){var r=Ke;(r.e??=[]).push(e)}else return mi(e)}function mi(e){return nn(Js|ei,e,!1)}function Jo(e){return gi(),nn(ls|ei,e,!0)}function el(e){Gt.ensure();const t=nn(Vn|dr,e,!0);return(n={})=>new Promise(r=>{n.outro?Ln(t,()=>{bt(t),r(void 0)}):(bt(t),r(void 0))})}function Zt(e){return nn(Js,e,!1)}function te(e,t){var n=Ke,r={effect:null,ran:!1,deps:e};n.l.$.push(r),r.effect=fr(()=>{e(),!r.ran&&(r.ran=!0,x(t))})}function Yt(){var e=Ke;fr(()=>{for(var t of e.l.$){t.deps();var n=t.effect;(n.f&ot)!==0&&lt(n,Ht),hr(n)&&lr(n),t.ran=!1}})}function tl(e){return nn(ea|dr,e,!0)}function fr(e,t=0){return nn(ls|t,e,!0)}function oe(e,t=[],n=[],r=[]){qo(r,t,n,a=>{nn(ls,()=>e(...a.map(s)),!0)})}function sa(e,t=0){var n=nn(tn|t,e,!0);return n}function Rt(e){return nn(gn|dr,e,!0)}function bi(e){var t=e.teardown;if(t!==null){const n=Qn,r=Fe;wa(!0),mt(null);try{t.call(null)}finally{wa(n),mt(r)}}}function wi(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){const a=n.ac;a!==null&&Wn(()=>{a.abort(er)});var r=n.next;(n.f&Vn)!==0?n.parent=null:bt(n,t),n=r}}function nl(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&gn)===0&&bt(t),t=n}}function bt(e,t=!0){var n=!1;(t||(e.f&Ja)!==0)&&e.nodes!==null&&e.nodes.end!==null&&(yi(e.nodes.start,e.nodes.end),n=!0),wi(e,t&&!n),Jr(e,0),lt(e,vn);var r=e.nodes&&e.nodes.t;if(r!==null)for(const i of r)i.stop();bi(e);var a=e.parent;a!==null&&a.first!==null&&ki(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function yi(e,t){for(;e!==null;){var n=e===t?null:Ir(e);e.remove(),e=n}}function ki(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function Ln(e,t,n=!0){var r=[];xi(e,r,!0);var a=()=>{n&&bt(e),t&&t()},i=r.length;if(i>0){var o=()=>--i||a();for(var c of r)c.out(o)}else a()}function xi(e,t,n){if((e.f&Tt)===0){e.f^=Tt;var r=e.nodes&&e.nodes.t;if(r!==null)for(const c of r)(c.is_global||n)&&t.push(c);for(var a=e.first;a!==null;){var i=a.next,o=(a.f&Dn)!==0||(a.f&gn)!==0&&(e.f&tn)!==0;xi(a,t,o?n:!1),a=i}}}function aa(e){Ei(e,!0)}function Ei(e,t){if((e.f&Tt)!==0){e.f^=Tt,(e.f&ot)===0&&(lt(e,wt),Bn(e));for(var n=e.first;n!==null;){var r=n.next,a=(n.f&Dn)!==0||(n.f&gn)!==0;Ei(n,a?t:!1),n=r}var i=e.nodes&&e.nodes.t;if(i!==null)for(const o of i)(o.is_global||t)&&o.in()}}function Mi(e,t){if(e.nodes)for(var n=e.nodes.start,r=e.nodes.end;n!==null;){var a=n===r?null:Ir(n);t.append(n),n=a}}let zn=!1;function Zr(e){zn=e}let Qn=!1;function wa(e){Qn=e}let Fe=null,Jt=!1;function mt(e){Fe=e}let qe=null;function en(e){qe=e}let hn=null;function Si(e){Fe!==null&&(hn===null?hn=[e]:hn.push(e))}let ht=null,Et=0,Ct=null;function rl(e){Ct=e}let Ti=1,Tr=0,Nn=Tr;function ya(e){Nn=e}function $i(){return++Ti}function hr(e){var t=e.f;if((t&wt)!==0)return!0;if(t&ct&&(e.f&=~Fn),(t&Ht)!==0){var n=e.deps;if(n!==null)for(var r=n.length,a=0;a<r;a++){var i=n[a];if(hr(i)&&ui(i),i.wv>e.wv)return!0}(t&Ut)!==0&&zt===null&&lt(e,ot)}return!1}function Ai(e,t,n=!0){var r=e.reactions;if(r!==null&&!hn?.includes(e))for(var a=0;a<r.length;a++){var i=r[a];(i.f&ct)!==0?Ai(i,t,!1):t===i&&(n?lt(i,wt):(i.f&ot)!==0&&lt(i,Ht),Bn(i))}}function Ci(e){var t=ht,n=Et,r=Ct,a=Fe,i=hn,o=Ke,c=Jt,u=Nn,l=e.f;ht=null,Et=0,Ct=null,Fe=(l&(gn|Vn))===0?e:null,hn=null,ar(e.ctx),Jt=!1,Nn=++Tr,e.ac!==null&&(Wn(()=>{e.ac.abort(er)}),e.ac=null);try{e.f|=Ns;var d=e.fn,h=d(),v=e.deps;if(ht!==null){var p;if(Jr(e,Et),v!==null&&Et>0)for(v.length=Et+ht.length,p=0;p<ht.length;p++)v[Et+p]=ht[p];else e.deps=v=ht;if(Sr()&&(e.f&Ut)!==0)for(p=Et;p<v.length;p++)(v[p].reactions??=[]).push(e)}else v!==null&&Et<v.length&&(Jr(e,Et),v.length=Et);if(Nr()&&Ct!==null&&!Jt&&v!==null&&(e.f&(ct|Ht|wt))===0)for(p=0;p<Ct.length;p++)Ai(Ct[p],e);return a!==null&&a!==e&&(Tr++,Ct!==null&&(r===null?r=Ct:r.push(...Ct))),(e.f&En)!==0&&(e.f^=En),h}catch(k){return ai(k)}finally{e.f^=Ns,ht=t,Et=n,Ct=r,Fe=a,hn=i,ar(o),Jt=c,Nn=u}}function sl(e,t){let n=t.reactions;if(n!==null){var r=eo.call(n,e);if(r!==-1){var a=n.length-1;a===0?n=t.reactions=null:(n[r]=n[a],n.pop())}}n===null&&(t.f&ct)!==0&&(ht===null||!ht.includes(t))&&(lt(t,Ht),(t.f&Ut)!==0&&(t.f^=Ut,t.f&=~Fn),ci(t),Jr(t,0))}function Jr(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)sl(e,n[r])}function lr(e){var t=e.f;if((t&vn)===0){lt(e,ot);var n=qe,r=zn;qe=e,zn=!0;try{(t&(tn|ao))!==0?nl(e):wi(e),bi(e);var a=Ci(e);e.teardown=typeof a=="function"?a:null,e.wv=Ti;var i;zs&&Lo&&(e.f&wt)!==0&&e.deps}finally{zn=r,qe=n}}}async function $r(){await Promise.resolve(),Io()}function s(e){var t=e.f,n=(t&ct)!==0;if(Fe!==null&&!Jt){var r=qe!==null&&(qe.f&vn)!==0;if(!r&&!hn?.includes(e)){var a=Fe.deps;if((Fe.f&Ns)!==0)e.rv<Tr&&(e.rv=Tr,ht===null&&a!==null&&a[Et]===e?Et++:ht===null?ht=[e]:ht.includes(e)||ht.push(e));else{(Fe.deps??=[]).push(e);var i=e.reactions;i===null?e.reactions=[Fe]:i.includes(Fe)||i.push(Fe)}}}if(Qn){if(Mn.has(e))return Mn.get(e);if(n){var o=e,c=o.v;return((o.f&ot)===0&&o.reactions!==null||Ri(o))&&(c=ra(o)),Mn.set(o,c),c}}else n&&(!zt?.has(e)||We?.is_fork&&!Sr())&&(o=e,hr(o)&&ui(o),zn&&Sr()&&(o.f&Ut)===0&&Pi(o));if(zt?.has(e))return zt.get(e);if((e.f&En)!==0)throw e.v;return e.v}function Pi(e){if(e.deps!==null){e.f^=Ut;for(const t of e.deps)(t.reactions??=[]).push(e),(t.f&ct)!==0&&(t.f&Ut)===0&&Pi(t)}}function Ri(e){if(e.v===ut)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(Mn.has(t)||(t.f&ct)!==0&&Ri(t))return!0;return!1}function x(e){var t=Jt;try{return Jt=!0,e()}finally{Jt=t}}const al=-7169;function lt(e,t){e.f=e.f&al|t}function H(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Rn in e)Fs(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&Rn in n&&Fs(n)}}}function Fs(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let r in e)try{Fs(e[r],t)}catch{}const n=Zs(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=Ga(n);for(let a in r){const i=r[a].get;if(i)try{i.call(e)}catch{}}}}}const il=["touchstart","touchmove"];function ol(e){return il.includes(e)}const ll=new Set,ka=new Set;function cl(e,t,n,r={}){function a(i){if(r.capture||wr.call(t,i),!i.cancelBubble)return Wn(()=>n?.call(this,i))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Yn(()=>{t.addEventListener(e,a,r)}):t.addEventListener(e,a,r),a}function R(e,t,n,r,a){var i={capture:r,passive:a},o=cl(e,t,n,i);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&fs(()=>{t.removeEventListener(e,o,i)})}let xa=null;function wr(e){var t=this,n=t.ownerDocument,r=e.type,a=e.composedPath?.()||[],i=a[0]||e.target;xa=e;var o=0,c=xa===e&&e.__root;if(c){var u=a.indexOf(c);if(u!==-1&&(t===document||t===window)){e.__root=t;return}var l=a.indexOf(t);if(l===-1)return;u<=l&&(o=u)}if(i=a[o]||e.target,i!==t){Xa(e,"currentTarget",{configurable:!0,get(){return i||n}});var d=Fe,h=qe;mt(null),en(null);try{for(var v,p=[];i!==null;){var k=i.assignedSlot||i.parentNode||i.host||null;try{var m=i["__"+r];m!=null&&(!i.disabled||e.target===i)&&m.call(i,e)}catch(_){v?p.push(_):v=_}if(e.cancelBubble||k===t||k===null)break;i=k}if(v){for(let _ of p)queueMicrotask(()=>{throw _});throw v}}finally{e.__root=t,delete e.currentTarget,mt(d),en(h)}}}function Li(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function Ar(e,t){var n=qe;n.nodes===null&&(n.nodes={start:e,end:t,a:null,t:null})}function M(e,t){var n=(t&Ao)!==0,r=(t&Co)!==0,a,i=!e.startsWith("<!>");return()=>{a===void 0&&(a=Li(i?e:"<!>"+e),n||(a=yn(a)));var o=r||fi?document.importNode(a,!0):a.cloneNode(!0);if(n){var c=yn(o),u=o.lastChild;Ar(c,u)}else Ar(o,o);return o}}function Kn(e=""){{var t=fn(e+"");return Ar(t,t),t}}function Xe(){var e=document.createDocumentFragment(),t=document.createComment(""),n=fn();return e.append(t,n),Ar(t,n),e}function b(e,t){e!==null&&e.before(t)}let Bs=!0;function ce(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??=e.nodeValue)&&(e.__t=n,e.nodeValue=n+"")}function ul(e,t){return dl(e,t)}const Xn=new Map;function dl(e,{target:t,anchor:n,props:r={},events:a,context:i,intro:o=!0}){Wo();var c=new Set,u=h=>{for(var v=0;v<h.length;v++){var p=h[v];if(!c.has(p)){c.add(p);var k=ol(p);t.addEventListener(p,wr,{passive:k});var m=Xn.get(p);m===void 0?(document.addEventListener(p,wr,{passive:k}),Xn.set(p,1)):Xn.set(p,m+1)}}};u(os(ll)),ka.add(u);var l=void 0,d=el(()=>{var h=n??t.appendChild(fn());return Bo(h,{pending:()=>{}},v=>{if(i){dt({});var p=Ke;p.c=i}a&&(r.$$events=a),Bs=o,l=e(v,r)||{},Bs=!0,i&&vt()}),()=>{for(var v of c){t.removeEventListener(v,wr);var p=Xn.get(v);--p===0?(document.removeEventListener(v,wr),Xn.delete(v)):Xn.set(v,p)}ka.delete(u),h!==n&&h.parentNode?.removeChild(h)}});return vl.set(l,d),l}let vl=new WeakMap;class fl{anchor;#e=new Map;#t=new Map;#n=new Map;#r=new Set;#l=!0;constructor(t,n=!0){this.anchor=t,this.#l=n}#a=()=>{var t=We;if(this.#e.has(t)){var n=this.#e.get(t),r=this.#t.get(n);if(r)aa(r),this.#r.delete(n);else{var a=this.#n.get(n);a&&(this.#t.set(n,a.effect),this.#n.delete(n),a.fragment.lastChild.remove(),this.anchor.before(a.fragment),r=a.effect)}for(const[i,o]of this.#e){if(this.#e.delete(i),i===t)break;const c=this.#n.get(o);c&&(bt(c.effect),this.#n.delete(o))}for(const[i,o]of this.#t){if(i===n||this.#r.has(i))continue;const c=()=>{if(Array.from(this.#e.values()).includes(i)){var l=document.createDocumentFragment();Mi(o,l),l.append(fn()),this.#n.set(i,{effect:o,fragment:l})}else bt(o);this.#r.delete(i),this.#t.delete(i)};this.#l||!r?(this.#r.add(i),Ln(o,c,!1)):c()}}};#s=t=>{this.#e.delete(t);const n=Array.from(this.#e.values());for(const[r,a]of this.#n)n.includes(r)||(bt(a.effect),this.#n.delete(r))};ensure(t,n){var r=We,a=_i();if(n&&!this.#t.has(t)&&!this.#n.has(t))if(a){var i=document.createDocumentFragment(),o=fn();i.append(o),this.#n.set(t,{effect:Rt(()=>n(o)),fragment:i})}else this.#t.set(t,Rt(()=>n(this.anchor)));if(this.#e.set(r,t),a){for(const[c,u]of this.#t)c===t?r.skipped_effects.delete(u):r.skipped_effects.add(u);for(const[c,u]of this.#n)c===t?r.skipped_effects.delete(u.effect):r.skipped_effects.add(u.effect);r.oncommit(this.#a),r.ondiscard(this.#s)}else this.#a()}}function j(e,t,n=!1){var r=new fl(e),a=n?Dn:0;function i(o,c){r.ensure(o,c)}sa(()=>{var o=!1;t((c,u=!0)=>{o=!0,i(u,c)}),o||i(!1,null)},a)}function pn(e,t){return t}function hl(e,t,n){for(var r=[],a=t.length,i,o=t.length,c=0;c<a;c++){let h=t[c];Ln(h,()=>{if(i){if(i.pending.delete(h),i.done.add(h),i.pending.size===0){var v=e.outrogroups;js(os(i.done)),v.delete(i),v.size===0&&(e.outrogroups=null)}}else o-=1},!1)}if(o===0){var u=r.length===0&&n!==null;if(u){var l=n,d=l.parentNode;Qo(d),d.append(l),e.items.clear()}js(t,!u)}else i={pending:new Set(t),done:new Set},(e.outrogroups??=new Set).add(i)}function js(e,t=!0){for(var n=0;n<e.length;n++)bt(e[n],t)}var Ea;function Nt(e,t,n,r,a,i=null){var o=e,c=new Map,u=(t&ti)!==0;if(u){var l=e;o=l.appendChild(fn())}var d=null,h=et(()=>{var E=n();return is(E)?E:E==null?[]:os(E)}),v,p=!0;function k(){_.fallback=d,pl(_,v,o,t,r),d!==null&&(v.length===0?(d.f&un)===0?aa(d):(d.f^=un,yr(d,null,o)):Ln(d,()=>{d=null}))}var m=sa(()=>{v=s(h);for(var E=v.length,P=new Set,K=We,ae=_i(),Z=0;Z<E;Z+=1){var J=v[Z],de=r(J,Z),Y=p?null:c.get(de);Y?(Y.v&&or(Y.v,J),Y.i&&or(Y.i,Z),ae&&K.skipped_effects.delete(Y.e)):(Y=_l(c,p?o:Ea??=fn(),J,de,Z,a,t,n),p||(Y.e.f|=un),c.set(de,Y)),P.add(de)}if(E===0&&i&&!d&&(p?d=Rt(()=>i(o)):(d=Rt(()=>i(Ea??=fn())),d.f|=un)),!p)if(ae){for(const[ve,_e]of c)P.has(ve)||K.skipped_effects.add(_e.e);K.oncommit(k),K.ondiscard(()=>{})}else k();s(h)}),_={effect:m,items:c,outrogroups:null,fallback:d};p=!1}function pl(e,t,n,r,a){var i=(r&yo)!==0,o=t.length,c=e.items,u=e.effect.first,l,d=null,h,v=[],p=[],k,m,_,E;if(i)for(E=0;E<o;E+=1)k=t[E],m=a(k,E),_=c.get(m).e,(_.f&un)===0&&(_.nodes?.a?.measure(),(h??=new Set).add(_));for(E=0;E<o;E+=1){if(k=t[E],m=a(k,E),_=c.get(m).e,e.outrogroups!==null)for(const _e of e.outrogroups)_e.pending.delete(_),_e.done.delete(_);if((_.f&un)!==0)if(_.f^=un,_===u)yr(_,null,n);else{var P=d?d.next:u;_===e.effect.last&&(e.effect.last=_.prev),_.prev&&(_.prev.next=_.next),_.next&&(_.next.prev=_.prev),bn(e,d,_),bn(e,_,P),yr(_,P,n),d=_,v=[],p=[],u=d.next;continue}if((_.f&Tt)!==0&&(aa(_),i&&(_.nodes?.a?.unfix(),(h??=new Set).delete(_))),_!==u){if(l!==void 0&&l.has(_)){if(v.length<p.length){var K=p[0],ae;d=K.prev;var Z=v[0],J=v[v.length-1];for(ae=0;ae<v.length;ae+=1)yr(v[ae],K,n);for(ae=0;ae<p.length;ae+=1)l.delete(p[ae]);bn(e,Z.prev,J.next),bn(e,d,Z),bn(e,J,K),u=K,d=J,E-=1,v=[],p=[]}else l.delete(_),yr(_,u,n),bn(e,_.prev,_.next),bn(e,_,d===null?e.effect.first:d.next),bn(e,d,_),d=_;continue}for(v=[],p=[];u!==null&&u!==_;)(l??=new Set).add(u),p.push(u),u=u.next;if(u===null)continue}(_.f&un)===0&&v.push(_),d=_,u=_.next}if(e.outrogroups!==null){for(const _e of e.outrogroups)_e.pending.size===0&&(js(os(_e.done)),e.outrogroups?.delete(_e));e.outrogroups.size===0&&(e.outrogroups=null)}if(u!==null||l!==void 0){var de=[];if(l!==void 0)for(_ of l)(_.f&Tt)===0&&de.push(_);for(;u!==null;)(u.f&Tt)===0&&u!==e.fallback&&de.push(u),u=u.next;var Y=de.length;if(Y>0){var ve=(r&ti)!==0&&o===0?n:null;if(i){for(E=0;E<Y;E+=1)de[E].nodes?.a?.measure();for(E=0;E<Y;E+=1)de[E].nodes?.a?.fix()}hl(e,de,ve)}}i&&Yn(()=>{if(h!==void 0)for(_ of h)_.nodes?.a?.apply()})}function _l(e,t,n,r,a,i,o,c){var u=(o&bo)!==0?(o&ko)===0?S(n,!1,!1):jn(n):null,l=(o&wo)!==0?jn(a):null;return{v:u,i:l,e:Rt(()=>(i(t,u??n,l??a,c),()=>{e.delete(r)}))}}function yr(e,t,n){if(e.nodes)for(var r=e.nodes.start,a=e.nodes.end,i=t&&(t.f&un)===0?t.nodes.start:n;r!==null;){var o=Ir(r);if(i.before(r),r===a)return;r=o}}function bn(e,t,n){t===null?e.effect.first=n:t.next=n,n===null?e.effect.last=t:n.prev=t}function le(e,t,n=!1,r=!1,a=!1){var i=e,o="";oe(()=>{var c=qe;if(o!==(o=t()??"")&&(c.nodes!==null&&(yi(c.nodes.start,c.nodes.end),c.nodes=null),o!=="")){var u=o+"";n?u=`<svg>${u}</svg>`:r&&(u=`<math>${u}</math>`);var l=Li(u);if((n||r)&&(l=yn(l)),Ar(yn(l),l.lastChild),n||r)for(;yn(l);)i.before(yn(l));else i.before(l)}})}function Vr(e,t,n,r,a){var i=t.$$slots?.[n],o=!1;i===!0&&(i=t[n==="default"?"children":n],o=!0),i===void 0||i(e,o?()=>r:r)}const gl=()=>performance.now(),cn={tick:e=>requestAnimationFrame(e),now:()=>gl(),tasks:new Set};function zi(){const e=cn.now();cn.tasks.forEach(t=>{t.c(e)||(cn.tasks.delete(t),t.f())}),cn.tasks.size!==0&&cn.tick(zi)}function ml(e){let t;return cn.tasks.size===0&&cn.tick(zi),{promise:new Promise(n=>{cn.tasks.add(t={c:e,f:n})}),abort(){cn.tasks.delete(t)}}}function Br(e,t){Wn(()=>{e.dispatchEvent(new CustomEvent(t))})}function bl(e){if(e==="float")return"cssFloat";if(e==="offset")return"cssOffset";if(e.startsWith("--"))return e;const t=e.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(n=>n[0].toUpperCase()+n.slice(1)).join("")}function Ma(e){const t={},n=e.split(";");for(const r of n){const[a,i]=r.split(":");if(!a||i===void 0)break;const o=bl(a.trim());t[o]=i.trim()}return t}const wl=e=>e;function yt(e,t,n,r){var a=(e&So)!==0,i=(e&To)!==0,o=a&&i,c=(e&$o)!==0,u=o?"both":a?"in":"out",l,d=t.inert,h=t.style.overflow,v,p;function k(){return Wn(()=>l??=n()(t,r?.()??{},{direction:u}))}var m={is_global:c,in(){if(t.inert=d,!a){p?.abort(),p?.reset?.();return}i||v?.abort(),Br(t,"introstart"),v=qs(t,k(),p,1,()=>{Br(t,"introend"),v?.abort(),v=l=void 0,t.style.overflow=h})},out(K){if(!i){K?.(),l=void 0;return}t.inert=!0,Br(t,"outrostart"),p=qs(t,k(),v,0,()=>{Br(t,"outroend"),K?.()})},stop:()=>{v?.abort(),p?.abort()}},_=qe;if((_.nodes.t??=[]).push(m),a&&Bs){var E=c;if(!E){for(var P=_.parent;P&&(P.f&Dn)!==0;)for(;(P=P.parent)&&(P.f&tn)===0;);E=!P||(P.f&us)!==0}E&&Zt(()=>{x(()=>m.in())})}}function qs(e,t,n,r,a){var i=r===1;if(ro(t)){var o,c=!1;return Yn(()=>{if(!c){var _=t({direction:i?"in":"out"});o=qs(e,_,n,r,a)}}),{abort:()=>{c=!0,o?.abort()},deactivate:()=>o.deactivate(),reset:()=>o.reset(),t:()=>o.t()}}if(n?.deactivate(),!t?.duration)return a(),{abort:St,deactivate:St,reset:St,t:()=>r};const{delay:u=0,css:l,tick:d,easing:h=wl}=t;var v=[];if(i&&n===void 0&&(d&&d(0,1),l)){var p=Ma(l(0,1));v.push(p,p)}var k=()=>1-r,m=e.animate(v,{duration:u,fill:"forwards"});return m.onfinish=()=>{m.cancel();var _=n?.t()??1-r;n?.abort();var E=r-_,P=t.duration*Math.abs(E),K=[];if(P>0){var ae=!1;if(l)for(var Z=Math.ceil(P/16.666666666666668),J=0;J<=Z;J+=1){var de=_+E*h(J/Z),Y=Ma(l(de,1-de));K.push(Y),ae||=Y.overflow==="hidden"}ae&&(e.style.overflow="hidden"),k=()=>{var ve=m.currentTime;return _+E*h(ve/P)},d&&ml(()=>{if(m.playState!=="running")return!1;var ve=k();return d(ve,1-ve),!0})}m=e.animate(K,{duration:P,fill:"forwards"}),m.onfinish=()=>{k=()=>r,d?.(r,1-r),a()}},{abort:()=>{m&&(m.cancel(),m.effect=null,m.onfinish=St)},deactivate:()=>{a=St},reset:()=>{r===0&&d?.(1,0)},t:()=>k()}}function Ni(e,t,n){Zt(()=>{var r=x(()=>t(e,n?.())||{});if(n&&r?.update){var a=!1,i={};fr(()=>{var o=n();H(o),a&&na(i,o)&&(i=o,r.update(o))}),a=!0}if(r?.destroy)return()=>r.destroy()})}const Sa=[...` 	
\r\fÂ \v\uFEFF`];function yl(e,t,n){var r=e==null?"":""+e;if(t&&(r=r?r+" "+t:t),n){for(var a in n)if(n[a])r=r?r+" "+a:a;else if(r.length)for(var i=a.length,o=0;(o=r.indexOf(a,o))>=0;){var c=o+i;(o===0||Sa.includes(r[o-1]))&&(c===r.length||Sa.includes(r[c]))?r=(o===0?"":r.substring(0,o))+r.substring(c+1):o=c}}return r===""?null:r}function Ta(e,t=!1){var n=t?" !important;":";",r="";for(var a in e){var i=e[a];i!=null&&i!==""&&(r+=" "+a+": "+i+n)}return r}function xs(e){return e[0]!=="-"||e[1]!=="-"?e.toLowerCase():e}function kl(e,t){if(t){var n="",r,a;if(Array.isArray(t)?(r=t[0],a=t[1]):r=t,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var i=!1,o=0,c=!1,u=[];r&&u.push(...Object.keys(r).map(xs)),a&&u.push(...Object.keys(a).map(xs));var l=0,d=-1;const m=e.length;for(var h=0;h<m;h++){var v=e[h];if(c?v==="/"&&e[h-1]==="*"&&(c=!1):i?i===v&&(i=!1):v==="/"&&e[h+1]==="*"?c=!0:v==='"'||v==="'"?i=v:v==="("?o++:v===")"&&o--,!c&&i===!1&&o===0){if(v===":"&&d===-1)d=h;else if(v===";"||h===m-1){if(d!==-1){var p=xs(e.substring(l,d).trim());if(!u.includes(p)){v!==";"&&h++;var k=e.substring(l,h).trim();n+=" "+k+";"}}l=h+1,d=-1}}}}return r&&(n+=Ta(r)),a&&(n+=Ta(a,!0)),n=n.trim(),n===""?null:n}return e==null?null:String(e)}function je(e,t,n,r,a,i){var o=e.__className;if(o!==n||o===void 0){var c=yl(n,r,i);c==null?e.removeAttribute("class"):e.className=c,e.__className=n}else if(i&&a!==i)for(var u in i){var l=!!i[u];(a==null||l!==!!a[u])&&e.classList.toggle(u,l)}return i}function Es(e,t={},n,r){for(var a in n){var i=n[a];t[a]!==i&&(n[a]==null?e.style.removeProperty(a):e.style.setProperty(a,i,r))}}function Ze(e,t,n,r){var a=e.__style;if(a!==t){var i=kl(t,r);i==null?e.removeAttribute("style"):e.style.cssText=i,e.__style=t}else r&&(Array.isArray(r)?(Es(e,n?.[0],r[0]),Es(e,n?.[1],r[1],"important")):Es(e,n,r));return r}const xl=Symbol("is custom element"),El=Symbol("is html");function Ml(e,t){var n=Ii(e);n.value===(n.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!=="PROGRESS")||(e.value=t??"")}function pt(e,t,n,r){var a=Ii(e);a[t]!==(a[t]=n)&&(t==="loading"&&(e[oo]=n),n==null?e.removeAttribute(t):typeof n!="string"&&Sl(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function Ii(e){return e.__attributes??={[xl]:e.nodeName.includes("-"),[El]:e.namespaceURI===Po}}var $a=new Map;function Sl(e){var t=e.getAttribute("is")||e.nodeName,n=$a.get(t);if(n)return n;$a.set(t,n=[]);for(var r,a=e,i=Element.prototype;i!==a;){r=Ga(a);for(var o in r)r[o].set&&n.push(o);a=Zs(a)}return n}function hs(e,t,n=t){var r=new WeakSet;Go(e,"input",async a=>{var i=a?e.defaultValue:e.value;if(i=Ms(e)?Ss(i):i,n(i),We!==null&&r.add(We),await $r(),i!==(i=t())){var o=e.selectionStart,c=e.selectionEnd,u=e.value.length;if(e.value=i??"",c!==null){var l=e.value.length;o===c&&c===u&&l>u?(e.selectionStart=l,e.selectionEnd=l):(e.selectionStart=o,e.selectionEnd=Math.min(c,l))}}}),x(t)==null&&e.value&&(n(Ms(e)?Ss(e.value):e.value),We!==null&&r.add(We)),fr(()=>{var a=t();if(e===document.activeElement){var i=Hr??We;if(r.has(i))return}Ms(e)&&a===Ss(e.value)||e.type==="date"&&!a&&!e.value||a!==e.value&&(e.value=a??"")})}function Ms(e){var t=e.type;return t==="number"||t==="range"}function Ss(e){return e===""?null:+e}class ia{#e=new WeakMap;#t;#n;static entries=new WeakMap;constructor(t){this.#n=t}observe(t,n){var r=this.#e.get(t)||new Set;return r.add(n),this.#e.set(t,r),this.#r().observe(t,this.#n),()=>{var a=this.#e.get(t);a.delete(n),a.size===0&&(this.#e.delete(t),this.#t.unobserve(t))}}#r(){return this.#t??(this.#t=new ResizeObserver(t=>{for(var n of t){ia.entries.set(n.target,n);for(var r of this.#e.get(n.target)||[])r(n)}}))}}var Tl=new ia({box:"border-box"});function Aa(e,t,n){var r=Tl.observe(e,()=>n(e[t]));Zt(()=>(x(()=>n(e[t])),r))}function Ca(e,t){return e===t||e?.[Rn]===t}function qn(e={},t,n,r){return Zt(()=>{var a,i;return fr(()=>{a=i,i=[],x(()=>{e!==n(...i)&&(t(e,...i),a&&Ca(n(...a),e)&&t(null,...a))})}),()=>{Yn(()=>{i&&Ca(n(...i),e)&&t(null,...i)})}}),e}function Pa(e,t){Xo(window,["resize"],()=>Wn(()=>t(window[e])))}function Bt(e){return function(...t){var n=t[0];return n.stopPropagation(),e?.apply(this,t)}}function _t(e=!1){const t=Ke,n=t.l.u;if(!n)return;let r=()=>H(t.s);if(e){let a=0,i={};const o=vs(()=>{let c=!1;const u=t.s;for(const l in u)u[l]!==i[l]&&(i[l]=u[l],c=!0);return c&&a++,a});r=()=>s(o)}n.b.length&&Jo(()=>{Ra(t,r),Xr(n.b)}),Ds(()=>{const a=x(()=>n.m.map(so));return()=>{for(const i of a)typeof i=="function"&&i()}}),n.a.length&&Ds(()=>{Ra(t,r),Xr(n.a)})}function Ra(e,t){if(e.l.s)for(const n of e.l.s)s(n);t()}function Cr(e,t){var n=e.$$events?.[t.type],r=is(n)?n.slice():n==null?[]:[n];for(var a of r)a.call(this,t)}function oa(e,t,n){if(e==null)return t(void 0),n&&n(void 0),St;const r=x(()=>e.subscribe(t,n));return r.unsubscribe?()=>r.unsubscribe():r}const Gn=[];function $l(e,t){return{subscribe:Ne(e,t).subscribe}}function Ne(e,t=St){let n=null;const r=new Set;function a(c){if(na(e,c)&&(e=c,n)){const u=!Gn.length;for(const l of r)l[1](),Gn.push(l,e);if(u){for(let l=0;l<Gn.length;l+=2)Gn[l][0](Gn[l+1]);Gn.length=0}}}function i(c){a(c(e))}function o(c,u=St){const l=[c,u];return r.add(l),r.size===1&&(n=t(a,i)||St),c(e),()=>{r.delete(l),r.size===0&&n&&(n(),n=null)}}return{set:a,update:i,subscribe:o}}function Oi(e,t,n){const r=!Array.isArray(e),a=r?[e]:e;if(!a.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const i=t.length<2;return $l(n,(o,c)=>{let u=!1;const l=[];let d=0,h=St;const v=()=>{if(d)return;h();const k=t(r?l[0]:l,o,c);i?o(k):h=typeof k=="function"?k:St},p=a.map((k,m)=>oa(k,_=>{l[m]=_,d&=~(1<<m),u&&v()},()=>{d|=1<<m}));return u=!0,v(),function(){Xr(p),h(),u=!1}})}function Oe(e){let t;return oa(e,n=>t=n)(),t}let jr=!1,Us=Symbol();function ge(e,t,n){const r=n[t]??={store:null,source:S(void 0),unsubscribe:St};if(r.store!==e&&!(Us in n))if(r.unsubscribe(),r.store=e??null,e==null)r.source.v=void 0,r.unsubscribe=St;else{var a=!0;r.unsubscribe=oa(e,i=>{a?r.source.v=i:g(r.source,i)}),a=!1}return e&&Us in n?Oe(e):s(r.source)}function $t(){const e={};function t(){fs(()=>{for(var n in e)e[n].unsubscribe();Xa(e,Us,{enumerable:!1,value:!0})})}return[e,t]}function Al(e,t,n){return e.set(n),t}function Cl(e){var t=jr;try{return jr=!1,[e(),jr]}finally{jr=t}}function at(e,t,n,r){var a=!vr||(n&xo)!==0,i=(n&Mo)!==0,o=r,c=!0,u=()=>(c&&(c=!1,o=r),o),l;{var d=Rn in e||io in e;l=rr(e,t)?.set??(d&&t in e?P=>e[t]=P:void 0)}var h,v=!1;[h,v]=Cl(()=>e[t]),h===void 0&&r!==void 0&&(h=u(),l&&(a&&ho(),l(h)));var p;if(a?p=()=>{var P=e[t];return P===void 0?u():(c=!0,P)}:p=()=>{var P=e[t];return P!==void 0&&(o=void 0),P===void 0?o:P},a&&(n&Eo)===0)return p;if(l){var k=e.$$legacy;return(function(P,K){return arguments.length>0?((!a||!K||k||v)&&l(K?p():P),P):p()})}var m=!1,_=et(()=>(m=!1,p()));s(_);var E=qe;return(function(P,K){if(arguments.length>0){const ae=K?s(_):a&&i?tr(P):P;return g(_,ae),m=!0,o!==void 0&&(o=ae),P}return Qn&&m||(E.f&vn)!==0?_.v:s(_)})}function pr(e){Ke===null&&ta(),vr&&Ke.l!==null?Ll(Ke).m.push(e):Ds(()=>{const t=x(e);if(typeof t=="function")return t})}function Pl(e){Ke===null&&ta(),pr(()=>()=>x(e))}function Rl(e,t,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:r})}function la(){const e=Ke;return e===null&&ta(),(t,n,r)=>{const a=e.s.$$events?.[t];if(a){const i=is(a)?a.slice():[a],o=Rl(t,n,r);for(const c of i)c.call(e.x,o);return!o.defaultPrevented}return!0}}function Ll(e){var t=e.l;return t.u??={a:[],b:[],m:[]}}const zl="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(zl);zo();const Nl=e=>e;function Di(e){const t=e-1;return t*t*t+1}function La(e){const t=typeof e=="string"&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[e,"px"]}function _n(e,{delay:t=0,duration:n=400,easing:r=Nl}={}){const a=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:r,css:i=>`opacity: ${i*a}`}}function Fi(e,{delay:t=0,duration:n=400,easing:r=Di,x:a=0,y:i=0,opacity:o=0}={}){const c=getComputedStyle(e),u=+c.opacity,l=c.transform==="none"?"":c.transform,d=u*(1-o),[h,v]=La(a),[p,k]=La(i);return{delay:t,duration:n,easing:r,css:(m,_)=>`
			transform: ${l} translate(${(1-m)*h}${v}, ${(1-m)*p}${k});
			opacity: ${u-d*_}`}}function ca(e,{delay:t=0,duration:n=400,easing:r=Di,start:a=0,opacity:i=0}={}){const o=getComputedStyle(e),c=+o.opacity,u=o.transform==="none"?"":o.transform,l=1-a,d=c*(1-i);return{delay:t,duration:n,easing:r,css:(h,v)=>`
			transform: ${u} scale(${1-l*v});
			opacity: ${c-d*v}
		`}}const Il='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-arrows-shuffle-2"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 4l3 3l-3 3" /><path d="M18 20l3 -3l-3 -3" /><path d="M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5" /><path d="M3 17h3a5 5 0 0 0 5 -5a5 5 0 0 1 5 -5h5" /></svg>',Ol='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-deezer"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 16.5h2v.5h-2z" /><path d="M8 16.5h2.5v.5h-2.5z" /><path d="M16 17h-2.5v-.5h2.5z" /><path d="M21.5 17h-2.5v-.5h2.5z" /><path d="M21.5 13h-2.5v.5h2.5z" /><path d="M21.5 9.5h-2.5v.5h2.5z" /><path d="M21.5 6h-2.5v.5h2.5z" /><path d="M16 13h-2.5v.5h2.5z" /><path d="M8 13.5h2.5v-.5h-2.5z" /><path d="M8 9.5h2.5v.5h-2.5z" /></svg>',Dl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-compact-down"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 11l8 3l8 -3" /></svg>',Fl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-compact-left"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M13 20l-3 -8l3 -8" /></svg>',Bl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-left"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 6l-6 6l6 6" /></svg>',za='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-disc"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0" /><path d="M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M7 12a5 5 0 0 1 5 -5" /><path d="M12 17a5 5 0 0 0 5 -5" /></svg>',jl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-grip-horizontal"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M5 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M12 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M12 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M19 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M19 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /></svg>',ql='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-heart"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M19.5 12.572l-7.5 7.428l-7.5 -7.428a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572" /></svg>',Ul='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-heart"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6.979 3.074a6 6 0 0 1 4.988 1.425l.037 .033l.034 -.03a6 6 0 0 1 4.733 -1.44l.246 .036a6 6 0 0 1 3.364 10.008l-.18 .185l-.048 .041l-7.45 7.379a1 1 0 0 1 -1.313 .082l-.094 -.082l-7.493 -7.422a6 6 0 0 1 3.176 -10.215z" /></svg>',Hl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-menu-2"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 6l16 0" /><path d="M4 12l16 0" /><path d="M4 18l16 0" /></svg>',Ts='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-music"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 17a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /><path d="M13 17a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /><path d="M9 17v-13h10v13" /><path d="M9 8h10" /></svg>',Vl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-pause"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z" /><path d="M17 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z" /></svg>',Yl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-player-play"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 4v16l13 -8z" /></svg>',Wl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-play"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 4v16a1 1 0 0 0 1.524 .852l13 -8a1 1 0 0 0 0 -1.704l-13 -8a1 1 0 0 0 -1.524 .852z" /></svg>',Ql='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-skip-back"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M19.496 4.136l-12 7a1 1 0 0 0 0 1.728l12 7a1 1 0 0 0 1.504 -.864v-14a1 1 0 0 0 -1.504 -.864z" /><path d="M4 4a1 1 0 0 1 .993 .883l.007 .117v14a1 1 0 0 1 -1.993 .117l-.007 -.117v-14a1 1 0 0 1 1 -1z" /></svg>',Kl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-skip-forward"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 5v14a1 1 0 0 0 1.504 .864l12 -7a1 1 0 0 0 0 -1.728l-12 -7a1 1 0 0 0 -1.504 .864z" /><path d="M20 4a1 1 0 0 1 .993 .883l.007 .117v14a1 1 0 0 1 -1.993 .117l-.007 -.117v-14a1 1 0 0 1 1 -1z" /></svg>',Xl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-playlist"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0" /><path d="M17 17v-13h4" /><path d="M13 5h-10" /><path d="M3 9l10 0" /><path d="M9 13h-6" /></svg>',Gl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-radio"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3l-9.371 3.749a1 1 0 0 0 -.629 .928v11.323a1 1 0 0 0 1 1h14a1 1 0 0 0 1 -1v-11a1 1 0 0 0 -1 -1h-14.5" /><path d="M4 12h16" /><path d="M7 12v-2" /><path d="M17 16v.01" /><path d="M13 16v.01" /></svg>',Zl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-refresh"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4" /><path d="M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4" /></svg>',Jl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-repeat"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 12v-3a3 3 0 0 1 3 -3h13m-3 -3l3 3l-3 3" /><path d="M20 12v3a3 3 0 0 1 -3 3h-13m3 3l-3 -3l3 -3" /></svg>',ec='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-search"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0" /><path d="M21 21l-6 -6" /></svg>',tc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-settings"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z" /><path d="M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /></svg>',nc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-trash"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 7l16 0" /><path d="M10 11l0 6" /><path d="M14 11l0 6" /><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12" /><path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3" /></svg>',rc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 8a5 5 0 0 1 0 8" /><path d="M17.7 5a9 9 0 0 1 0 14" /><path d="M6 15h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l3.5 -4.5a.8 .8 0 0 1 1.5 .5v14a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5" /></svg>',sc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume-2"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 8a5 5 0 0 1 0 8" /><path d="M6 15h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l3.5 -4.5a.8 .8 0 0 1 1.5 .5v14a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5" /></svg>',ac='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume-3"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 15h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l3.5 -4.5a.8 .8 0 0 1 1.5 .5v14a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5" /><path d="M16 10l4 4m0 -4l-4 4" /></svg>',ic='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume-off"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 8a5 5 0 0 1 1.912 4.934m-1.377 2.602a5 5 0 0 1 -.535 .464" /><path d="M17.7 5a9 9 0 0 1 2.362 11.086m-1.676 2.299a9 9 0 0 1 -.686 .615" /><path d="M9.069 5.054l.431 -.554a.8 .8 0 0 1 1.5 .5v2m0 4v8a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l1.294 -1.664" /><path d="M3 3l18 18" /></svg>',oc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-x"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 6l-12 12" /><path d="M6 6l12 12" /></svg>',lc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-device-floppy"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2" /><path d="M12 14m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0" /><path d="M14 4l0 4l-6 0l0 -4" /></svg>',cc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-file-pencil"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3v4a1 1 0 0 0 1 1h4" /><path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z" /><path d="M10 18l5 -5a1.414 1.414 0 0 0 -2 -2l-5 5v2h2z" /></svg>',Na='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-plus"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 5l0 14" /><path d="M5 12l14 0" /></svg>',uc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-circle-check"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0" /><path d="M9 12l2 2l4 -4" /></svg>',dc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-dots"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /></svg>',vc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-sort-descending"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 6l9 0" /><path d="M4 12l7 0" /><path d="M4 18l7 0" /><path d="M15 15l3 3l3 -3" /><path d="M18 6l0 12" /></svg>',fc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-sort-ascending"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 6l7 0" /><path d="M4 12l7 0" /><path d="M4 18l9 0" /><path d="M15 9l3 -3l3 3" /><path d="M18 6l0 12" /></svg>',y={ARTISTS:Ts,ALBUMS:za,GENRES:Ts,PLAYLISTS:Xl,RADIO:Gl,SEARCH:ec,PLAY:Wl,PLAY_OUTLINE:Yl,PAUSE:Vl,PREVIOUS:Ql,NEXT:Kl,SHUFFLE:Il,REPEAT:Jl,VOLUME_FULL:rc,VOLUME_MEDIUM:sc,VOLUME_MUTE:ac,VOLUME_OFF:ic,HEART:ql,HEART_FILLED:Ul,SYNC:Zl,SETTINGS:tc,CLOSE:oc,MENU:Hl,BACK:Bl,BACK_COMPACT:Fl,CHEVRON_DOWN:Dl,DRAG_HANDLE:jl,REMOVE:nc,DEEZER:Ol,SAVE:lc,EDIT:cc,ADD:Na,ACCEPT:uc,DOTS:dc,ADD_TO_PLAYLIST:Na,ALBUM_LINK:za,ARTIST_LINK:Ts,SORT_DESC:vc,SORT_ASC:fc},Pr={DEFAULT_IP:typeof window<"u"?window.location.hostname:"localhost",get MOODE_IP(){try{return typeof localStorage<"u"?localStorage.getItem("moode_ip")||this.DEFAULT_IP:this.DEFAULT_IP}catch{return this.DEFAULT_IP}}};function cr(e){if(!e||!e.image)return null;if(e.image.startsWith("http"))return e.image;let t="";return e.image==="local"?t=`${e.name}.jpg`:t=e.image,`/imagesw/radio-logos/thumbs/${encodeURIComponent(t)}`}function Ia(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}function hc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var $s={exports:{}},As={exports:{}},Oa;function pc(){return Oa||(Oa=1,(function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t={rotl:function(n,r){return n<<r|n>>>32-r},rotr:function(n,r){return n<<32-r|n>>>r},endian:function(n){if(n.constructor==Number)return t.rotl(n,8)&16711935|t.rotl(n,24)&4278255360;for(var r=0;r<n.length;r++)n[r]=t.endian(n[r]);return n},randomBytes:function(n){for(var r=[];n>0;n--)r.push(Math.floor(Math.random()*256));return r},bytesToWords:function(n){for(var r=[],a=0,i=0;a<n.length;a++,i+=8)r[i>>>5]|=n[a]<<24-i%32;return r},wordsToBytes:function(n){for(var r=[],a=0;a<n.length*32;a+=8)r.push(n[a>>>5]>>>24-a%32&255);return r},bytesToHex:function(n){for(var r=[],a=0;a<n.length;a++)r.push((n[a]>>>4).toString(16)),r.push((n[a]&15).toString(16));return r.join("")},hexToBytes:function(n){for(var r=[],a=0;a<n.length;a+=2)r.push(parseInt(n.substr(a,2),16));return r},bytesToBase64:function(n){for(var r=[],a=0;a<n.length;a+=3)for(var i=n[a]<<16|n[a+1]<<8|n[a+2],o=0;o<4;o++)a*8+o*6<=n.length*8?r.push(e.charAt(i>>>6*(3-o)&63)):r.push("=");return r.join("")},base64ToBytes:function(n){n=n.replace(/[^A-Z0-9+\/]/ig,"");for(var r=[],a=0,i=0;a<n.length;i=++a%4)i!=0&&r.push((e.indexOf(n.charAt(a-1))&Math.pow(2,-2*i+8)-1)<<i*2|e.indexOf(n.charAt(a))>>>6-i*2);return r}};As.exports=t})()),As.exports}var Cs,Da;function Fa(){if(Da)return Cs;Da=1;var e={utf8:{stringToBytes:function(t){return e.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(e.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var n=[],r=0;r<t.length;r++)n.push(t.charCodeAt(r)&255);return n},bytesToString:function(t){for(var n=[],r=0;r<t.length;r++)n.push(String.fromCharCode(t[r]));return n.join("")}}};return Cs=e,Cs}var Ps,Ba;function _c(){if(Ba)return Ps;Ba=1,Ps=function(n){return n!=null&&(e(n)||t(n)||!!n._isBuffer)};function e(n){return!!n.constructor&&typeof n.constructor.isBuffer=="function"&&n.constructor.isBuffer(n)}function t(n){return typeof n.readFloatLE=="function"&&typeof n.slice=="function"&&e(n.slice(0,0))}return Ps}var ja;function gc(){return ja||(ja=1,(function(){var e=pc(),t=Fa().utf8,n=_c(),r=Fa().bin,a=function(i,o){i.constructor==String?o&&o.encoding==="binary"?i=r.stringToBytes(i):i=t.stringToBytes(i):n(i)?i=Array.prototype.slice.call(i,0):!Array.isArray(i)&&i.constructor!==Uint8Array&&(i=i.toString());for(var c=e.bytesToWords(i),u=i.length*8,l=1732584193,d=-271733879,h=-1732584194,v=271733878,p=0;p<c.length;p++)c[p]=(c[p]<<8|c[p]>>>24)&16711935|(c[p]<<24|c[p]>>>8)&4278255360;c[u>>>5]|=128<<u%32,c[(u+64>>>9<<4)+14]=u;for(var k=a._ff,m=a._gg,_=a._hh,E=a._ii,p=0;p<c.length;p+=16){var P=l,K=d,ae=h,Z=v;l=k(l,d,h,v,c[p+0],7,-680876936),v=k(v,l,d,h,c[p+1],12,-389564586),h=k(h,v,l,d,c[p+2],17,606105819),d=k(d,h,v,l,c[p+3],22,-1044525330),l=k(l,d,h,v,c[p+4],7,-176418897),v=k(v,l,d,h,c[p+5],12,1200080426),h=k(h,v,l,d,c[p+6],17,-1473231341),d=k(d,h,v,l,c[p+7],22,-45705983),l=k(l,d,h,v,c[p+8],7,1770035416),v=k(v,l,d,h,c[p+9],12,-1958414417),h=k(h,v,l,d,c[p+10],17,-42063),d=k(d,h,v,l,c[p+11],22,-1990404162),l=k(l,d,h,v,c[p+12],7,1804603682),v=k(v,l,d,h,c[p+13],12,-40341101),h=k(h,v,l,d,c[p+14],17,-1502002290),d=k(d,h,v,l,c[p+15],22,1236535329),l=m(l,d,h,v,c[p+1],5,-165796510),v=m(v,l,d,h,c[p+6],9,-1069501632),h=m(h,v,l,d,c[p+11],14,643717713),d=m(d,h,v,l,c[p+0],20,-373897302),l=m(l,d,h,v,c[p+5],5,-701558691),v=m(v,l,d,h,c[p+10],9,38016083),h=m(h,v,l,d,c[p+15],14,-660478335),d=m(d,h,v,l,c[p+4],20,-405537848),l=m(l,d,h,v,c[p+9],5,568446438),v=m(v,l,d,h,c[p+14],9,-1019803690),h=m(h,v,l,d,c[p+3],14,-187363961),d=m(d,h,v,l,c[p+8],20,1163531501),l=m(l,d,h,v,c[p+13],5,-1444681467),v=m(v,l,d,h,c[p+2],9,-51403784),h=m(h,v,l,d,c[p+7],14,1735328473),d=m(d,h,v,l,c[p+12],20,-1926607734),l=_(l,d,h,v,c[p+5],4,-378558),v=_(v,l,d,h,c[p+8],11,-2022574463),h=_(h,v,l,d,c[p+11],16,1839030562),d=_(d,h,v,l,c[p+14],23,-35309556),l=_(l,d,h,v,c[p+1],4,-1530992060),v=_(v,l,d,h,c[p+4],11,1272893353),h=_(h,v,l,d,c[p+7],16,-155497632),d=_(d,h,v,l,c[p+10],23,-1094730640),l=_(l,d,h,v,c[p+13],4,681279174),v=_(v,l,d,h,c[p+0],11,-358537222),h=_(h,v,l,d,c[p+3],16,-722521979),d=_(d,h,v,l,c[p+6],23,76029189),l=_(l,d,h,v,c[p+9],4,-640364487),v=_(v,l,d,h,c[p+12],11,-421815835),h=_(h,v,l,d,c[p+15],16,530742520),d=_(d,h,v,l,c[p+2],23,-995338651),l=E(l,d,h,v,c[p+0],6,-198630844),v=E(v,l,d,h,c[p+7],10,1126891415),h=E(h,v,l,d,c[p+14],15,-1416354905),d=E(d,h,v,l,c[p+5],21,-57434055),l=E(l,d,h,v,c[p+12],6,1700485571),v=E(v,l,d,h,c[p+3],10,-1894986606),h=E(h,v,l,d,c[p+10],15,-1051523),d=E(d,h,v,l,c[p+1],21,-2054922799),l=E(l,d,h,v,c[p+8],6,1873313359),v=E(v,l,d,h,c[p+15],10,-30611744),h=E(h,v,l,d,c[p+6],15,-1560198380),d=E(d,h,v,l,c[p+13],21,1309151649),l=E(l,d,h,v,c[p+4],6,-145523070),v=E(v,l,d,h,c[p+11],10,-1120210379),h=E(h,v,l,d,c[p+2],15,718787259),d=E(d,h,v,l,c[p+9],21,-343485551),l=l+P>>>0,d=d+K>>>0,h=h+ae>>>0,v=v+Z>>>0}return e.endian([l,d,h,v])};a._ff=function(i,o,c,u,l,d,h){var v=i+(o&c|~o&u)+(l>>>0)+h;return(v<<d|v>>>32-d)+o},a._gg=function(i,o,c,u,l,d,h){var v=i+(o&u|c&~u)+(l>>>0)+h;return(v<<d|v>>>32-d)+o},a._hh=function(i,o,c,u,l,d,h){var v=i+(o^c^u)+(l>>>0)+h;return(v<<d|v>>>32-d)+o},a._ii=function(i,o,c,u,l,d,h){var v=i+(c^(o|~u))+(l>>>0)+h;return(v<<d|v>>>32-d)+o},a._blocksize=16,a._digestsize=16,$s.exports=function(i,o){if(i==null)throw new Error("Illegal argument "+i);var c=e.wordsToBytes(a(i,o));return o&&o.asBytes?c:o&&o.asString?r.bytesToString(c):e.bytesToHex(c)}})()),$s.exports}var mc=gc();const bc=hc(mc),qa=Ne("Disconnected"),Hs=Ne(null);let Rs;function He(e,t="info"){Hs.set({text:e,type:t}),Rs&&clearTimeout(Rs),Rs=setTimeout(()=>{Hs.set(null)},3e3)}const es=Ne({isOpen:!1,title:"",message:"",confirmLabel:"Confirm",cancelLabel:"Cancel",onConfirm:null,type:"confirm",inputValue:"",placeholder:""});function ts({title:e="Confirm Action",message:t="Are you sure?",confirmLabel:n="Confirm",cancelLabel:r="Cancel",type:a="confirm",inputValue:i="",placeholder:o="",onConfirm:c=()=>{}}){es.set({isOpen:!0,title:e,message:t,confirmLabel:n,cancelLabel:r,type:a,inputValue:i,placeholder:o,onConfirm:c})}function Ls(){es.set({isOpen:!1,title:"",message:"",confirmLabel:"",cancelLabel:"",onConfirm:null,type:"confirm",inputValue:"",placeholder:""})}const it=Ne({state:"stop",volume:50,elapsed:0,duration:0,random:!1,repeat:!1,bitrate:0,format:"",song:0,songid:0}),Vt=Ne({title:"Not Playing",artist:"",album:"",file:"",stationName:null,id:null,pos:null}),ns=Ne(!1),Yr=Ne(!1),Vs=Ne(!1),Ys=Ne(!1),Mt=Ne("library"),Or=Ne(null),Ft=Ne(!1),wc=localStorage.getItem("sidebarCollapsed")==="true",Ws=Ne(wc);Ws.subscribe(e=>{typeof localStorage<"u"&&localStorage.setItem("sidebarCollapsed",String(e))});const $n=Ne([]),ua=Ne([]),nr=Ne([]),kn=Ne(new Set),st=Ne(!1),Lt=Ne([{view:"root"}]),sr=Ne([]),Bi=Ne(0),Er=Ne(""),ji=Ne({});function yc(e,t){ji.update(n=>({...n,[e]:t}))}function kc(e){return Oe(ji)[e]||0}const da=Ne({isOpen:!1,track:null,context:{type:"general",playlistName:null,index:null},x:0,y:0,triggerRect:null});function xc(){if(typeof navigator<"u"&&navigator.vibrate)try{navigator.vibrate(70)}catch{}}function rs(e,t,n={}){if(!t)return;xc();let r=0,a=0,i=null,o=e.currentTarget;!o&&e.target&&e.target.closest&&(o=e.target.closest("button")||e.target),o&&o.getBoundingClientRect&&(i=o.getBoundingClientRect());const c=e.detail?.originalEvent||e;c.touches&&c.touches.length>0?(r=c.touches[0].clientX,a=c.touches[0].clientY):c.clientX&&(r=c.clientX,a=c.clientY);const u={type:"general",playlistName:null,index:null,...n};da.set({isOpen:!0,track:t,context:u,x:r,y:a,triggerRect:i})}function Kt(){da.set({isOpen:!1,track:null,context:{},x:0,y:0,triggerRect:null})}let Qs=null,Ks=null;function Ec(e){Ks=e}function Sn(e,t=null){t&&(Qs=t),Ks?Ks(e,t):console.warn("Router callback not set!")}function Mc(){const e=Qs;return Qs=null,e}function Sc(){window.history.back()}function ur(e,t=[],n=null){if(!e||!e.file)return"/images/default_cover.png";if(qi(e.file)||e.genre==="Radio")return e.image?cr(e):Ui(e,t,n)||"/images/radio_placeholder.png";let r=e.file.startsWith("/")?e.file.slice(1):e.file;return`/coverart.php/${encodeURI(r)}`}function Rr(e,t="sm",n=[],r=null){if(!e||e.file&&(qi(e.file)||e.genre==="Radio"||Array.isArray(e)))return e&&e.image?cr(e):Ui(e,n,r)||"/images/radio_icon.png";if(!e.file)return"/images/default_icon.png";if(e.thumbHash){const a=t==="md"?"":"_sm";return`/imagesw/thmcache/${e.thumbHash}${a}.jpg`}try{const a=e.file.lastIndexOf("/"),i=a===-1?".":e.file.substring(0,a);return`/imagesw/thmcache/${bc(i)}${t==="md"?"":"_sm"}.jpg`}catch{let i=e.file.startsWith("/")?e.file.slice(1):e.file;return`/coverart.php/${encodeURI(i)}`}}function qi(e){return e?e.startsWith("http")||e.includes("://")||e.includes("RADIO"):!1}function Ui(e,t,n){const r=u=>(u||"").toString().toLowerCase().replace(/[^a-z0-9]/g,""),a=r(e?.title),i=r(e?.stationName),o=r(n);if(t&&t.length>0){const u=t.find(l=>{const d=r(l.name);return d?d===i||d===o||a&&d===a||a&&a.includes(d)&&d.length>3:!1});if(u)return cr(u)}const c=e?.stationName||n;return c?cr({name:c,image:"local"}):null}Oi([Vt,$n,Or],([e,t,n])=>ur(e,t,n));Oi(Vt,e=>!e||!e.file||e.file.startsWith("http")?null:`/coverart.php/${encodeURI(e.file)}`);const Qe={NAME:"MoodePlayerDB",STORE_NAME:"music",VERSION:3},Tc={SYNC:"/wave-api.php",STATIONS:e=>"/wave-api.php?action=stations",COVER_ART:e=>`/coverart.php?u=${encodeURIComponent(e)}`,RADIO_LOGOS:e=>`/imagesw/radio-logos/thumbs/${e}`},xn={open(){return new Promise((e,t)=>{const n=indexedDB.open(Qe.NAME,Qe.VERSION);n.onupgradeneeded=r=>{const a=r.target.result,i=r.target.transaction;let o;a.objectStoreNames.contains(Qe.STORE_NAME)?o=i.objectStore(Qe.STORE_NAME):o=a.createObjectStore(Qe.STORE_NAME,{keyPath:"file"}),o.indexNames.contains("artist")||o.createIndex("artist","artist",{unique:!1}),o.indexNames.contains("album")||o.createIndex("album","album",{unique:!1}),o.indexNames.contains("genre")||o.createIndex("genre","genre",{unique:!1}),o.indexNames.contains("album_artist")||o.createIndex("album_artist","album_artist",{unique:!1})},n.onsuccess=()=>e(n.result),n.onerror=()=>t(n.error)})},async clear(){const e=await this.open();return new Promise((t,n)=>{const r=e.transaction(Qe.STORE_NAME,"readwrite");r.objectStore(Qe.STORE_NAME).clear(),r.oncomplete=()=>t(),r.onerror=()=>n(r.error)})},async bulkAdd(e){const t=await this.open();return new Promise((n,r)=>{const a=t.transaction(Qe.STORE_NAME,"readwrite"),i=a.objectStore(Qe.STORE_NAME);e.forEach(o=>i.put(o)),a.oncomplete=()=>n(),a.onerror=()=>r(a.error)})},async getFilesMap(e){if(!e||e.length===0)return new Map;const t=await this.open();return new Promise(n=>{const a=t.transaction(Qe.STORE_NAME,"readonly").objectStore(Qe.STORE_NAME),i=new Map;let o=0;e.forEach(c=>{const u=c.normalize("NFC").trim(),l=a.get(u);l.onsuccess=d=>{d.target.result&&i.set(c,d.target.result),o++,o===e.length&&n(i)},l.onerror=()=>{o++,o===e.length&&n(i)}})})},async getArtists(){const e=await this.open();return new Promise((t,n)=>{const a=e.transaction(Qe.STORE_NAME,"readonly").objectStore(Qe.STORE_NAME),i=new Map,o=a.openCursor();o.onsuccess=c=>{const u=c.target.result;if(u){const l=u.value,d=l.album_artist||l.artist;d&&!i.has(d)&&i.set(d,{name:d,file:l.file,thumbHash:l.thumbHash}),u.continue()}else{const l=Array.from(i.values()).sort((d,h)=>d.name.localeCompare(h.name,void 0,{sensitivity:"base"}));t(l)}},o.onerror=()=>n(o.error)})},async getAlbums(){const e=await this.open();return new Promise((t,n)=>{const a=e.transaction(Qe.STORE_NAME,"readonly").objectStore(Qe.STORE_NAME).index("album"),i=[],o=a.openCursor(null,"nextunique");o.onsuccess=c=>{const u=c.target.result;if(u){const l=u.value;i.push({name:l.album,artist:l.album_artist||l.artist,file:l.file,thumbHash:l.thumbHash,qualityBadge:l.qualityBadge,year:l.year||0}),u.continue()}else t(i)},o.onerror=()=>n(o.error)})},async getArtistAlbums(e){if(!e)return[];const t=await this.open(),n=e.normalize("NFC").trim();return new Promise((r,a)=>{const o=t.transaction(Qe.STORE_NAME,"readonly").objectStore(Qe.STORE_NAME),c=new Promise(l=>{o.indexNames.contains("album_artist")?o.index("album_artist").getAll(IDBKeyRange.only(n)).onsuccess=d=>l(d.target.result):l([])}),u=new Promise(l=>{o.index("artist").getAll(IDBKeyRange.only(n)).onsuccess=d=>l(d.target.result)});Promise.all([c,u]).then(([l,d])=>{const h=[...l,...d],v=[],p=new Set;h.forEach(k=>{p.has(k.album)||(p.add(k.album),v.push({name:k.album,artist:k.album_artist||k.artist,file:k.file,thumbHash:k.thumbHash,qualityBadge:k.qualityBadge,year:k.year||0}))}),r(v)}).catch(l=>a(l))})},async getAlbumTracks(e,t=null){const n=await this.open(),r=e.normalize("NFC").trim(),a=t?t.normalize("NFC").trim():null;return console.log(`[DB] getAlbumTracks called. Album: "${r}", FilterArtist: "${a}"`),new Promise((i,o)=>{const u=n.transaction(Qe.STORE_NAME,"readonly").objectStore(Qe.STORE_NAME).index("album"),l=IDBKeyRange.only(r),d=u.getAll(l);d.onsuccess=()=>{let h=d.result;if(console.log(`[DB] Found ${h.length} raw tracks for album "${r}"`),a){const v=h.length;h=h.filter(p=>{const k=(p.artist||"").normalize("NFC").trim(),m=(p.album_artist||"").normalize("NFC").trim();return k===a||m===a}),console.log(`[DB] After artist filter: ${h.length} tracks (Removed ${v-h.length})`)}else console.log("[DB] No artist filter provided. Returning all tracks.");h.sort((v,p)=>{const k=parseInt(v.disc||1),m=parseInt(p.disc||1);if(k!==m)return k-m;const _=parseInt(v.track||0),E=parseInt(p.track||0);return _-E}),i(h)},d.onerror=()=>o(d.error)})},async getGenres(){const e=await this.open();return new Promise((t,n)=>{const a=e.transaction(Qe.STORE_NAME,"readonly").objectStore(Qe.STORE_NAME).index("genre"),i=[],o=a.openKeyCursor(null,"nextunique");o.onsuccess=c=>{const u=c.target.result;u?(i.push(u.key),u.continue()):t(i)},o.onerror=()=>n(o.error)})},async getGenreTracks(e){const t=await this.open(),n=e.normalize("NFC").trim();return new Promise((r,a)=>{const c=t.transaction(Qe.STORE_NAME,"readonly").objectStore(Qe.STORE_NAME).index("genre").getAll(IDBKeyRange.only(n));c.onsuccess=()=>r(c.result),c.onerror=()=>a(c.error)})},async search(e){if(!e)return[];const t=e.toLowerCase().normalize("NFC").trim(),n=await this.open();return new Promise((r,a)=>{const o=n.transaction(Qe.STORE_NAME,"readonly").objectStore(Qe.STORE_NAME),c=[],u=100,l=o.openCursor();l.onsuccess=d=>{const h=d.target.result;if(h){const v=h.value;if((v.title&&v.title.toLowerCase().includes(t)||v.artist&&v.artist.toLowerCase().includes(t)||v.album&&v.album.toLowerCase().includes(t)||v.album_artist&&v.album_artist.toLowerCase().includes(t))&&c.push(v),c.length>=u){r(c);return}h.continue()}else r(c)},l.onerror=()=>a(l.error)})}};var $c=M('<div class="skeleton svelte-tl058d"></div>');function Tn(e,t){let n=at(t,"width",8,"100%"),r=at(t,"height",8,"20px"),a=at(t,"radius",8,"4px"),i=at(t,"style",8,"");var o=$c();oe(()=>Ze(o,`width: ${n()??""}; height: ${r()??""}; border-radius: ${a()??""}; ${i()??""}`)),b(e,o)}var Ac=M('<div class="skel svelte-1b8que2"><!></div>'),Cc=M('<img loading="lazy"/>'),Pc=M('<div class="loader svelte-1b8que2"><!> <!> <!></div>');function Un(e,t){dt(t,!1);let n=at(t,"src",8),r=at(t,"alt",8,""),a=at(t,"radius",8,"0px");const i=la();let o=S("loading");function c(){g(o,"loaded")}function u(_){i("error",_),g(o,"error")}te(()=>H(n()),()=>{n()?g(o,"loading"):g(o,"error")}),Yt(),_t();var l=Pc(),d=f(l);{var h=_=>{var E=Ac(),P=f(E);Tn(P,{width:"100%",height:"100%",get radius(){return a()}}),yt(2,E,()=>_n,()=>({duration:200})),b(_,E)};j(d,_=>{s(o)==="loading"&&_(h)})}var v=w(d,2);{var p=_=>{var E=Cc();let P;oe(()=>{pt(E,"src",n()),pt(E,"alt",r()),Ze(E,`border-radius: ${a()??""}`),P=je(E,1,"svelte-1b8que2",null,P,{vis:s(o)==="loaded"})}),R("load",E,c),R("error",E,u),b(_,E)};j(v,_=>{n()&&s(o)!=="error"&&_(p)})}var k=w(v,2);{var m=_=>{var E=Xe(),P=$e(E);Vr(P,t,"fallback",{}),b(_,E)};j(k,_=>{s(o)==="error"&&_(m)})}oe(()=>Ze(l,`border-radius: ${a()??""}`)),b(e,l),vt()}class Rc{constructor(){this.socket=null,this.queue=[],this.isProcessing=!1,this.reconnectTimer=null,this.watchdogTimer=null,this._buffer=""}get isConnected(){return this.socket&&this.socket.readyState===WebSocket.OPEN}connect(){if(this.socket&&(this.socket.readyState===WebSocket.CONNECTING||this.socket.readyState===WebSocket.OPEN))return;this.reconnectTimer&&clearTimeout(this.reconnectTimer);let t=Pr.MOODE_IP||window.location.hostname;t=t.replace(/^https?:\/\//,"").split(":")[0].split("/")[0];const n=Pr.WS_PORT||"8080",r=`ws://${t}:${n}`;console.log("[MPD] Connecting to:",r);try{this.socket=new WebSocket(r,["binary"])}catch(a){console.error("[MPD] Connection Error:",a),this.reconnectTimer=setTimeout(()=>this.connect(),5e3);return}this.socket.onopen=()=>{console.log("[MPD] Connected"),qa.set("Connected"),He("Connected to Moode","success"),this._processQueue()},this.socket.onmessage=a=>this._handleMessage(a),this.socket.onclose=a=>{console.warn("[MPD] Socket closed",a.code,a.reason),qa.set("Disconnected"),this._cleanup(),this.reconnectTimer=setTimeout(()=>this.connect(),3e3)},this.socket.onerror=a=>{console.error("[MPD] Socket error",a)}}send(t){return new Promise((n,r)=>{this.queue.push({cmd:t,resolve:n,reject:r}),this._processQueue()})}_cleanup(){for(this.isProcessing=!1,this._buffer="",this.watchdogTimer&&clearTimeout(this.watchdogTimer);this.queue.length>0;){const{reject:t}=this.queue.shift();t(new Error("Connection lost"))}}async _processQueue(){if(this.isProcessing||this.queue.length===0||!this.isConnected)return;this.isProcessing=!0;const{cmd:t}=this.queue[0];this.watchdogTimer&&clearTimeout(this.watchdogTimer),this.watchdogTimer=setTimeout(()=>{console.error("[MPD] Watchdog timeout"),this.socket&&this.socket.close()},2e4);try{const n=t.endsWith(`
`)?t:t+`
`;this.socket.send(new TextEncoder().encode(n))}catch(n){console.error("[MPD] Send error",n),this._cleanup()}}async _handleMessage(t){let n=t.data;n instanceof Blob&&(n=await n.text()),this.watchdogTimer&&(clearTimeout(this.watchdogTimer),this.watchdogTimer=null),this._buffer+=n;const r=this._buffer.endsWith(`
OK
`)||this._buffer===`OK
`,a=this._buffer.startsWith("ACK");if(r||a){const i=this._buffer;this._buffer="";const o=this.queue.shift();if(this.isProcessing=!1,o)if(a)console.error(`[MPD] Error: ${i.trim()}`),o.reject(new Error(i.trim()));else{const c=i.replace(/\nOK\n$/,"").replace(/^OK\n$/,"");o.resolve(c)}this._processQueue()}else{if(!this.queue.length)return;this.watchdogTimer=setTimeout(()=>{console.error("[MPD] Watchdog timeout receiving large data"),this.socket&&this.socket.close()},2e4)}}}const we=new Rc,jt={parseKeyValue(e){const t={};if(!e)return t;const n=e.split(`
`);for(const r of n){const a=r.indexOf(": ");if(a===-1)continue;const i=r.substring(0,a).toLowerCase(),o=r.substring(a+2);t[i]=o}return t},parseStatus(e){const t=this.parseKeyValue(e);let n="";if(t.audio){const r=t.audio.split(":");r[1]&&(n=`${r[1]}-bit`)}return{state:t.state||"stop",volume:parseInt(t.volume)||0,elapsed:parseFloat(t.elapsed)||0,duration:parseFloat(t.duration)||0,random:t.random==="1",repeat:t.repeat==="1",song:parseInt(t.song)||0,songId:parseInt(t.songid)||-1,playlistLength:parseInt(t.playlistlength)||0,bitrate:parseInt(t.bitrate)||0,format:n,playlistVersion:parseInt(t.playlist)||0}},parseCurrentSong(e){const t=this.parseKeyValue(e);return this._normalizeTrack(t)},parsePlaylists(e){const t=e.split(`
`),n=[];let r=null;for(const a of t)a.startsWith("playlist: ")?(r&&n.push(r),r={playlist:a.substring(10)}):a.startsWith("Last-Modified: ")&&r&&(r["last-modified"]=a.substring(15));return r&&n.push(r),n.map(a=>({name:a.playlist,lastModified:a["last-modified"]}))},parseTracks(e){const t=[];let n=null,r=0,a=e.indexOf(`
`,r);for(;a!==-1;){const i=e.substring(r,a),o=i.indexOf(": ");if(o!==-1){const c=i.substring(0,o).toLowerCase(),u=i.substring(o+2);c==="file"?(n&&t.push(this._normalizeTrack(n)),n={file:u}):n&&(n[c]=u)}r=a+1,a=e.indexOf(`
`,r)}return n&&t.push(this._normalizeTrack(n)),t},_normalizeTrack(e){const t=e.file||e.File||"",n=e.Title||e.title||e.Name||e.name||t.split("/").pop()||"Unknown";return{file:t,title:n,artist:e.Artist||e.artist||"Unknown Artist",album:e.Album||e.album||"Unknown Album",genre:e.Genre||e.genre||"Unknown",time:parseFloat(e.Time||e.time||0),track:e.Track||e.track||"",id:e.Id||e.id,pos:e.Pos||e.pos||null,stationName:e.name||e.Name||null}}},Lc=1e3,zc=250;let Wr=null,Mr=null,Qr=0,An=1,ss=!0,dn=!1,Pn=0,Zn=null;function Kr(e){return e?String(e).normalize("NFC").replace(/\\/g,"\\\\").replace(/"/g,'\\"'):""}function Nc(){Ic(),ss=!0,dn=!1,Pn=0,st.set(!1),Xt(),Wr=setInterval(()=>{we.isConnected&&!we.isProcessing&&Xt()},Lc)}function Ic(){Wr&&(clearInterval(Wr),Wr=null),va()}async function Xt(){try{const e=await we.send("status"),t=await we.send("currentsong"),n=jt.parseStatus(e),r=jt.parseCurrentSong(t);Dc(n,r);const a=Oe(Bi);if(Oe(st))return;(n.playlistLength>0&&n.playlistVersion!==a||n.playlistLength>0&&Oe(sr).length===0)&&Oc(n.playlistVersion)}catch{}}async function Oc(e){if(!Oe(st))try{const t=await we.send("playlistinfo");if(Oe(st))return;const n=jt.parseTracks(t),r=n.map(o=>o.file).filter(o=>o&&!o.startsWith("http"));let a=new Map;if(r.length>0)try{a=await xn.getFilesMap(r)}catch(o){console.warn("Failed to hydrate queue from DB",o)}const i=n.map(o=>{const c=(o.file||"").normalize("NFC"),u=a.get(c);return u?{...o,thumbHash:u.thumbHash,qualityBadge:u.qualityBadge,title:o.title||u.title,artist:o.artist||u.artist,album:o.album||u.album,_uid:String(o.id||o.pos+o.file)}:{...o,_uid:String(o.id||o.pos+o.file)}});sr.set(i),Bi.set(e)}catch(t){console.error("Queue sync error",t)}}function Dc(e,t){const n=Oe(Vt),r=Oe($n),a=t.file&&t.file.startsWith("http");if(a){const i=l=>(l||"").toString().toLowerCase().replace(/[^a-z0-9]/g,""),o=i(t.file),c=i(t.title),u=r.find(l=>{const d=i(l.station||l.file||l.url||(Array.isArray(l)?l[1]:"")),h=i(l.name||(Array.isArray(l)?l[0]:""));return d&&o.includes(d)||h&&c.includes(h)});u?t.stationName=u.name||u[0]:n.stationName&&n.file===t.file&&(t.stationName=n.stationName)}Vt.set(t),it.update(i=>{const o=e.state==="play",c=performance.now();if(e.state==="pause"||i.state==="pause")return qr(!1),c<Pn?i:e;if(t.file!==n.file||ss)return ss=!1,dn=!1,An=1,a&&(e.elapsed=0),qr(o&&!a),e;if(c<Pn)return i;if(dn)return dn=!1,An=1,qr(o&&!a),e;if(o&&!a){const u=e.elapsed-i.elapsed;if(Math.abs(u)>2)return An=1,e;if(Math.abs(u)<.05)An=1;else{let d=u/1.5;An=Math.max(.5,Math.min(1.5,1+d))}return{...e,elapsed:i.elapsed}}return qr(!1),e})}function qr(e){e?Xs():va()}function Xs(){Mr||ss||(Qr=performance.now(),Mr=setInterval(()=>{const e=performance.now();let t=(e-Qr)/1e3;t>2&&(t=0),Qr=e,it.update(n=>{if(n.state!=="play")return n;let r=n.elapsed+t*An;return n.duration>0&&r>n.duration&&(r=n.duration),{...n,elapsed:r}})},zc))}function va(){Mr&&(clearInterval(Mr),Mr=null),An=1,Qr=0}async function Ua(e,t=!1){if(!e||e.length===0)return;st.set(!0),dn=!0;const n=5;try{for(let r=0;r<e.length;r+=n){const a=e.slice(r,r+n),i=["command_list_begin"];a.forEach(o=>{i.push(`add "${Kr(o.file)}"`)}),i.push("command_list_end"),await we.send(i.join(`
`))}t?(await we.send("play 0"),He(`Playing ${e.length} tracks`,"success")):He(`Added ${e.length} tracks`,"success")}catch(r){console.error("[Player] Bulk Action Failed:",r),He("Error adding tracks","error")}finally{setTimeout(()=>{st.set(!1),Xt()},1500)}}const qt={async togglePlay(){const t=Oe(it).state==="play";Pn=performance.now()+800,it.update(n=>{const r=t?"pause":"play";return r==="play"?Xs():va(),{...n,state:r}}),await we.send(t?"pause 1":"play"),setTimeout(Xt,900)},async next(){dn=!0,Pn=0,await we.send("next"),Xt()},async previous(){dn=!0,Pn=0,it.update(e=>({...e,elapsed:0})),await we.send("previous"),Xt()},async setVolume(e){it.update(t=>({...t,volume:e})),await we.send(`setvol ${e}`)},async seek(e){dn=!0,Pn=performance.now()+500,it.update(t=>({...t,elapsed:e})),await we.send(`seekcur ${e}`),setTimeout(Xt,600)},async toggleRandom(){const t=!Oe(it).random;it.update(n=>({...n,random:t})),await we.send(`random ${t?1:0}`)},async toggleRepeat(){const t=!Oe(it).repeat;it.update(n=>({...n,repeat:t})),await we.send(`repeat ${t?1:0}`)},async playUri(e,t={}){st.set(!0);const n=Kr(e);dn=!0,it.update(r=>({...r,state:"play",elapsed:0})),Vt.set({title:t.title||e.split("/").pop(),artist:t.artist||"",file:e}),Xs();try{const r=await we.send("currentsong"),a=parseInt(jt.parseKeyValue(r).pos),i=await we.send(`addid "${n}"`),o=parseInt(jt.parseKeyValue(i).id);if(isNaN(o))await we.send(`add "${n}"`),await we.send("play");else{const c=isNaN(a)?0:a+1;await we.send(`moveid ${o} ${c}`),await we.send(`playid ${o}`)}}catch(r){console.error("Play error",r),He("Failed to play","error")}setTimeout(()=>{st.set(!1),Xt()},1200)},async addToQueue(e){try{await we.send(`add "${Kr(e)}"`),He("Added to queue","success")}catch(t){console.error("Add queue error",t),He("Failed to add","error")}},async playNext(e){st.set(!0);const t=Kr(e);try{const n=await we.send("currentsong"),r=parseInt(jt.parseKeyValue(n).pos||-1);if(r===-1)st.set(!1),await this.playUri(e);else{const a=await we.send(`addid "${t}"`),i=parseInt(jt.parseKeyValue(a).id);isNaN(i)||(await we.send(`moveid ${i} ${r+1}`),He("Will play next","success")),setTimeout(()=>st.set(!1),1e3)}}catch(n){console.error("Play Next error",n),He("Failed to set next","error"),st.set(!1)}},async removeFromQueue(e){st.set(!0),Zn&&clearTimeout(Zn);try{sr.update(t=>{const n=[...t];return n.splice(e,1),n}),await we.send(`delete ${e}`)}catch{He("Failed to remove","error"),st.set(!1);return}Zn=setTimeout(()=>{st.set(!1)},1e3)},async moveTrack(e,t){if(e!==t){st.set(!0),Zn&&clearTimeout(Zn);try{await we.send(`move ${e} ${t}`)}catch(n){console.error("Move failed",n),He("Move failed","error"),st.set(!1),Xt();return}Zn=setTimeout(()=>{st.set(!1),Xt()},2e3)}},async playAllTracks(e){if(!(!e||e.length===0))try{await we.send("stop"),await we.send("clear"),await Ua(e,!0)}catch(t){console.error(t)}},async addAllToQueue(e){!e||e.length===0||await Ua(e,!1)},async saveQueue(e){if(!e)return;const t=e.replace(/"/g,'\\"');try{await we.send(`save "${t}"`),He(`Playlist "${e}" saved`,"success")}catch(n){if(n.message.includes("exist")){if(confirm(`Playlist "${e}" exists. Overwrite?`))try{await we.send(`rm "${t}"`),await we.send(`save "${t}"`),He(`Playlist "${e}" overwritten`,"success")}catch{He("Failed to overwrite","error")}}else console.error(n)}}};function Hi(e){return new Worker("/assets/sync.worker-CxDcqL9_.js",{name:e?.name})}const br="Favorites";let Ha=Promise.resolve();const Jn=e=>e?e.toLowerCase().replace(/^https?:\/\//,"").replace(/^www\./,"").split("?")[0].replace(/\/$/,""):"";function Fc(e){if(e==="Favorites")return"linear-gradient(135deg, hsl(348, 95%, 58%), hsl(348, 90%, 40%))";let t=0;for(let r=0;r<e.length;r++)t=e.charCodeAt(r)+((t<<5)-t);const n=Math.abs(t%360);return`linear-gradient(135deg, hsl(${n}, 60%, 40%), hsl(${(n+40)%360}, 60%, 30%))`}const Hn={async syncLibrary(){if(Oe(Ft))return;Ft.set(!0);const e=new Hi;e.postMessage({type:"START_SYNC",payload:{url:`http://${Pr.MOODE_IP}/wave-api.php`}}),e.onmessage=t=>{const{type:n,count:r}=t.data;n==="DONE"&&(He(`Library updated: ${r} tracks`,"success"),Ft.set(!1),e.terminate()),n==="ERROR"&&(He("Sync Failed","error"),Ft.set(!1),e.terminate())},e.onerror=()=>{Ft.set(!1),e.terminate()}},async loadPlaylists(){Vs.set(!0);try{const e=await we.send("listplaylists"),n=jt.parsePlaylists(e).map(r=>({...r,color:Fc(r.name)}));ua.set(n)}catch(e){console.error(e)}finally{Vs.set(!1)}},async openPlaylistDetails(e){if(!e)return;Ys.set(!0);const t=e.replace(/"/g,'\\"');try{const n=await we.send(`listplaylistinfo "${t}"`),r=jt.parseTracks(n),a=r.map(c=>c.file).filter(c=>c&&!c.startsWith("http"));let i=new Map;if(a.length>0)try{i=await xn.getFilesMap(a)}catch(c){console.warn("Failed to hydrate playlist from DB",c)}const o=r.map(c=>{const u=i.get(c.file);return u?{...c,thumbHash:u.thumbHash,qualityBadge:u.qualityBadge,title:c.title||u.title,artist:c.artist||u.artist,album:c.album||u.album,_uid:Ia()}:{...c,_uid:Ia()}});nr.set(o)}catch(n){console.error(n),He("Could not load playlist","error")}finally{Ys.set(!1)}},async movePlaylistTrack(e,t,n){const r=e.replace(/"/g,'\\"');try{await we.send(`playlistmove "${r}" ${t} ${n}`)}catch{He("Move failed","error")}},async removeFromPlaylist(e,t){const n=e.replace(/"/g,'\\"');try{await we.send(`playlistdelete "${n}" ${t}`),He("Track removed","success")}catch{He("Delete failed","error")}},async loadFavorites(){try{const e=await we.send(`listplaylistinfo "${br}"`),t=jt.parseTracks(e),n=new Set;t.forEach(r=>{r.file&&n.add(r.file)}),kn.set(n)}catch{kn.set(new Set)}},async toggleFavorite(e){if(!e||!e.file)return;const t=e.file,n=t.replace(/"/g,'\\"'),r=t.startsWith("http"),a=Oe(kn);let i=a.has(t);if(!i&&r){const o=Jn(t);for(const c of a)if(Jn(c)===o){i=!0;break}}kn.update(o=>{const c=new Set(o);if(i){if(c.delete(t),r){const u=Jn(t);for(const l of c)Jn(l)===u&&c.delete(l)}}else c.add(t);return c}),Ha=Ha.then(async()=>{try{const o=await we.send(`listplaylistinfo "${br}"`),c=jt.parseTracks(o);let u=[];if(c.forEach((l,d)=>{let h=!1;(l.file===t||r&&Jn(l.file)===Jn(t)||r&&(l.file.includes(t)||t.includes(l.file)))&&(h=!0),h&&u.push(d)}),i){if(u.length>0){u.sort((l,d)=>d-l);for(const l of u)await we.send(`playlistdelete "${br}" ${l}`);He("Removed from Favorites","info")}}else u.length>0?console.log("[Fav] Track already exists. Skipping."):(await we.send(`playlistadd "${br}" "${n}"`),c.length>0&&await we.send(`playlistmove "${br}" ${c.length} 0`),He("Added to Favorites","success"))}catch(o){console.error("Fav action failed",o),He("Action failed","error")}finally{await this.loadFavorites()}})}};function Vi(){we.connect(),Nc(),Hn.loadPlaylists(),Hn.loadFavorites()}function as(e){return we.send(e)}const{togglePlay:ps,toggleRandom:In,toggleRepeat:On,setVolume:Lr,seek:fa,addToQueue:Bc,playNext:jc,removeFromQueue:qc,moveTrack:Uc,saveQueue:Hc,playAllTracks:Yi,addAllToQueue:Wi}=qt,{syncLibrary:Vc,loadRadioStations:Yc,loadPlaylists:ha,openPlaylistDetails:Qi,toggleFavorite:Ki,loadFavorites:Wc,removeFromPlaylist:Xi,movePlaylistTrack:Gi}=Hn;function zr(e){const t=Oe(Vt),n=Oe($n),r=Oe(Or);if(t.file&&t.file.startsWith("http")&&n.length>0&&(e==="next"||e==="previous")){let i=n.findIndex(c=>c.name===r);i===-1&&(i=0);let o;e==="next"?(o=i+1,o>=n.length&&(o=0)):(o=i-1,o<0&&(o=n.length-1)),pa(n[o])}else e==="next"&&qt.next(),e==="previous"&&qt.previous()}function pa(e){if(!e)return;Or.set(e.name);const t=e[1]||e.station||e.file||e.url;t&&qt.playUri(t,{title:e.name,artist:e.genre||"Radio Stream",stationName:e.name})}function _s(e){e&&(Or.set(null),qt.playUri(e.file,{title:e.title,artist:e.artist,album:e.album,stationName:null}))}async function Zi(e,t=0){if(!e)return;Or.set(null);const n=e.replace(/"/g,'\\"');try{await we.send("stop"),await we.send("clear"),await we.send(`load "${n}"`),await we.send(`play ${t}`)}catch(r){console.error("Failed to play playlist context",r)}}const Qc=Object.freeze(Object.defineProperty({__proto__:null,addAllToQueue:Wi,addToQueue:Bc,connect:Vi,loadFavorites:Wc,loadPlaylists:ha,loadRadioStations:Yc,movePlaylistTrack:Gi,moveTrack:Uc,nav:zr,openPlaylistDetails:Qi,playAllTracks:Yi,playNext:jc,playPlaylistContext:Zi,playStation:pa,playTrackOptimistic:_s,removeFromPlaylist:Xi,removeFromQueue:qc,runMpdRequest:as,saveQueue:Hc,seek:fa,setVolume:Lr,syncLibrary:Vc,toggleFavorite:Ki,togglePlay:ps,toggleRandom:In,toggleRepeat:On},Symbol.toStringTag,{value:"Module"}));function Ji(e,t=2e3){let n;const r=i=>{i.type==="mousedown"&&i.button!==0||(n=setTimeout(()=>{e.dispatchEvent(new CustomEvent("longpress",{detail:{originalEvent:i}}))},t))},a=()=>{clearTimeout(n)};return e.addEventListener("mousedown",r),e.addEventListener("touchstart",r,{passive:!0}),e.addEventListener("mouseup",a),e.addEventListener("mouseleave",a),e.addEventListener("touchend",a),e.addEventListener("touchcancel",a),e.addEventListener("touchmove",a),{destroy(){e.removeEventListener("mousedown",r),e.removeEventListener("touchstart",r),e.removeEventListener("mouseup",a),e.removeEventListener("mouseleave",a),e.removeEventListener("touchend",a),e.removeEventListener("touchcancel",a),e.removeEventListener("touchmove",a)}}}var Kc=M('<div class="drag-handle svelte-5cs2hz" title="Drag to reorder"><div class="icon-small svelte-5cs2hz"><!></div></div>'),Xc=M('<div class="eq-anim svelte-5cs2hz"><span class="bar b1 svelte-5cs2hz"></span> <span class="bar b2 svelte-5cs2hz"></span> <span class="bar b3 svelte-5cs2hz"></span></div>'),Gc=M('<div class="icon-small svelte-5cs2hz"><!></div>'),Zc=M('<div class="icon-small svelte-5cs2hz"><!></div>'),Jc=M('<div class="icon-small accent svelte-5cs2hz"><!></div>'),eu=M('<span class="num svelte-5cs2hz"> </span>'),tu=M('<button class="num-box svelte-5cs2hz"><!></button>'),nu=M('<div slot="fallback" class="icon-ph svelte-5cs2hz"><!></div>'),ru=M('<span class="meta-tag quality svelte-5cs2hz"> </span>'),su=M('<button class="btn-icon small remove svelte-5cs2hz"><!></button>'),au=M('<div class="dur svelte-5cs2hz"> </div>'),iu=M('<div role="button" tabindex="0"><div class="left svelte-5cs2hz"><!> <div class="thumb svelte-5cs2hz"><!></div></div> <div class="info svelte-5cs2hz"><div class="title-row svelte-5cs2hz"><div class="title text-ellipsis svelte-5cs2hz"> </div> <!></div> <div> </div></div> <div class="right svelte-5cs2hz"><button class="btn-icon small context-menu-btn svelte-5cs2hz" title="Options"><!></button> <button><!></button> <!></div></div>');function gs(e,t){dt(t,!1);const n=()=>ge(kn,"$favorites",u),r=()=>ge(Lt,"$navigationStack",u),a=()=>ge(Mt,"$activeMenuTab",u),i=()=>ge(it,"$status",u),o=()=>ge(Vt,"$currentSong",u),c=()=>ge($n,"$stations",u),[u,l]=$t(),d=S(),h=S(),v=S(),p=S(),k=S(),m=S(),_=S(),E=S(),P=S(),K=S(),ae=S(),Z=S(),J=S(),de=S(),Y=S(),ve=S(),_e=S(),ee=S(),I=S();let A=at(t,"track",8),B=at(t,"index",8),D=at(t,"isEditable",8,!1);const W=la();let T=S(!1),z=S(!1);function $(he){if(s(P))return"â";if(!he)return"0:00";const ke=parseInt(he,10),Re=Math.floor(ke/60),Ue=ke%60;return`${Re}:${Ue.toString().padStart(2,"0")}`}function L(he){he.stopPropagation(),s(_)?ps():W("play")}function F(){return s(h)?.view==="details"&&s(h).data?.name?{type:"playlist",playlistName:s(h).data.name,index:B()}:s(v)?{type:"queue",index:B()}:{type:"general"}}function U(he){he.stopPropagation(),rs(he,A(),F())}function V(he){D()||rs(he.detail.originalEvent,A(),F())}function C(he){he.stopPropagation(),!s(P)&&A().artist&&(Mt.set("artists"),Sn("albums_by_artist",{name:A().artist}))}te(()=>H(A()),()=>{A()&&g(z,!1)}),te(()=>(n(),H(A())),()=>{g(d,n().has(A().file))}),te(()=>r(),()=>{g(h,r()[r().length-1])}),te(()=>(s(h),a()),()=>{g(v,s(h)?.view==="queue"||s(h)?.view==="root"&&a()==="queue")}),te(()=>i(),()=>{g(p,i().song)}),te(()=>o(),()=>{g(k,o().file)}),te(()=>i(),()=>{g(m,i().state==="play")}),te(()=>(s(v),H(B()),s(p)),()=>{g(_,s(v)&&Number(B())===Number(s(p)))}),te(()=>(s(m),H(A()),s(k),s(_)),()=>{g(E,s(m)&&A().file===s(k)&&!s(_))}),te(()=>H(A()),()=>{g(P,A().file&&(A().file.startsWith("http")||A().file.includes("RADIO")))}),te(()=>(s(_),s(m),s(T)),()=>{g(K,s(_)&&s(m)&&s(T))}),te(()=>(s(_),s(m),s(T)),()=>{g(ae,s(_)&&!s(m)&&s(T)||!s(_)&&s(T))}),te(()=>(s(_),s(m),s(T)),()=>{g(Z,s(_)&&s(m)&&!s(T))}),te(()=>(s(_),s(m),s(T)),()=>{g(J,s(_)&&!s(m)&&!s(T))}),te(()=>H(A()),()=>{g(de,A().title||A().file?.split("/").pop())}),te(()=>H(A()),()=>{g(Y,A().artist||"Unknown")}),te(()=>H(A()),()=>{g(ve,$(A().time))}),te(()=>H(A()),()=>{g(_e,A().qualityBadge?A().qualityBadge.split(" ")[0]:null)}),te(()=>(s(_),o()),()=>{g(ee,s(_)?o().stationName:null)}),te(()=>(s(z),H(A()),c(),s(ee),Rr),()=>{g(I,s(z)?ur(A(),c(),s(ee)):Rr(A(),"sm",c(),s(ee)))}),Yt(),_t();var O=iu();let ie;var se=f(O),fe=f(se);{var Q=he=>{var ke=Kc(),Re=f(ke),Ue=f(Re);le(Ue,()=>(H(y),x(()=>y.DRAG_HANDLE))),R("mousedown",ke,xe=>W("startdrag",xe)),R("touchstart",ke,xe=>W("startdrag",xe),void 0,!0),R("click",ke,Bt(function(xe){Cr.call(this,t,xe)})),b(he,ke)},N=he=>{var ke=tu(),Re=f(ke);{var Ue=Ve=>{var Ge=Xc();b(Ve,Ge)},xe=Ve=>{var Ge=Xe(),ft=$e(Ge);{var rn=At=>{var nt=Gc(),xt=f(nt);le(xt,()=>(H(y),x(()=>y.PAUSE))),b(At,nt)},kt=At=>{var nt=Xe(),xt=$e(nt);{var sn=It=>{var an=Zc(),Ot=f(an);le(Ot,()=>(H(y),x(()=>y.PLAY))),b(It,an)},_r=It=>{var an=Xe(),Ot=$e(an);{var gr=Wt=>{var ye=Jc(),Je=f(ye);le(Je,()=>(H(y),x(()=>y.PLAY))),b(Wt,ye)},on=Wt=>{var ye=eu(),Je=f(ye);oe(()=>ce(Je,B()+1)),b(Wt,ye)};j(Ot,Wt=>{s(J)?Wt(gr):Wt(on,!1)},!0)}b(It,an)};j(xt,It=>{s(ae)?It(sn):It(_r,!1)},!0)}b(At,nt)};j(ft,At=>{s(K)?At(rn):At(kt,!1)},!0)}b(Ve,Ge)};j(Re,Ve=>{s(Z)?Ve(Ue):Ve(xe,!1)})}R("click",ke,L),b(he,ke)};j(fe,he=>{D()?he(Q):he(N,!1)})}var q=w(fe,2),X=f(q);Un(X,{get src(){return s(I)},get alt(){return s(de)},radius:"4px",$$events:{error:()=>g(z,!0)},$$slots:{fallback:(he,ke)=>{var Re=nu(),Ue=f(Re);le(Ue,()=>(s(P),H(y),x(()=>s(P)?y.RADIO:y.ALBUMS))),yt(1,Re,()=>_n),b(he,Re)}}});var ne=w(se,2),G=f(ne),ue=f(G),pe=f(ue),Ee=w(ue,2);{var Ae=he=>{var ke=ru(),Re=f(ke);oe(()=>ce(Re,s(_e))),b(he,ke)};j(Ee,he=>{s(_e)&&!s(P)&&he(Ae)})}var Ce=w(G,2);let me;var De=f(Ce),Le=w(ne,2),Be=f(Le),Ye=f(Be);le(Ye,()=>(H(y),x(()=>y.DOTS)));var Me=w(Be,2);let be;var ze=f(Me);le(ze,()=>(s(d),H(y),x(()=>s(d)?y.HEART_FILLED:y.HEART)));var Se=w(Me,2);{var Pe=he=>{var ke=su(),Re=f(ke);le(Re,()=>(H(y),x(()=>y.REMOVE))),R("click",ke,Bt(()=>W("remove",{index:B()}))),b(he,ke)},Ie=he=>{var ke=au(),Re=f(ke);oe(()=>ce(Re,s(ve))),b(he,ke)};j(Se,he=>{D()?he(Pe):he(Ie,!1)})}Zt(()=>R("click",O,()=>!s(_)&&W("play"))),Zt(()=>R("mouseenter",O,()=>g(T,!0))),Zt(()=>R("mouseleave",O,()=>g(T,!1))),Ni(O,he=>Ji?.(he)),Zt(()=>R("longpress",O,V)),oe(()=>{ie=je(O,1,"row svelte-5cs2hz",null,ie,{active:s(_),duplicate:s(E),editable:D()}),pt(ue,"title",s(de)),ce(pe,s(de)),me=je(Ce,1,"artist text-ellipsis svelte-5cs2hz",null,me,{link:!s(P)}),ce(De,s(Y)),be=je(Me,1,"btn-icon small svelte-5cs2hz",null,be,{liked:s(d)})}),R("click",Ce,C),R("click",Be,U),R("click",Me,Bt(()=>Ki(A()))),b(e,O),vt(),l()}const Ur=100,Va=5,Ya=25,Wa=3;function ou({tracksStore:e,onMoveTrack:t}){const n=Ne(!1),r=Ne(!1),a=Ne(!1),i=Ne(null),o=Ne(null),c=Ne(null),u=Ne({x:0,y:0,width:0,height:0,grabOffsetX:0,grabOffsetY:0}),l=Ne(null);let d=!1,h=0,v=0,p=0,k=0;const m={scrollContainer:null,listBodyContainer:null};let _=null;function E(I,A,B){const D=I.detail;if(D.button===2||(window.getSelection&&window.getSelection().removeAllRanges(),!m.scrollContainer))return;const T=m.scrollContainer.querySelectorAll(".row-wrapper")[A];if(!T)return;const z=T.getBoundingClientRect(),$=D.touches?D.touches[0].clientX:D.clientX,L=D.touches?D.touches[0].clientY:D.clientY,F=$-z.left,U=L-z.top;d=!0,n.set(!1),r.set(!1),h=$,v=L,p=$,k=L,i.set(A),o.set(A),l.set(B),c.set(null),u.set({x:$,y:L,width:z.width,height:z.height,grabOffsetX:F,grabOffsetY:U})}function P(I){if(!d||Oe(r))return;const A=I.touches?I.touches[0].clientX:I.clientX,B=I.touches?I.touches[0].clientY:I.clientY;if(!Oe(n)){const D=Math.abs(A-h),W=Math.abs(B-v);if(D<Wa&&W<Wa)return;n.set(!0)}I.cancelable&&I.preventDefault(),p=A,k=B,u.update(D=>({...D,x:p,y:k})),Y(k),K()}function K(){if(!m.listBodyContainer)return;const I=m.listBodyContainer.getBoundingClientRect(),A=Oe(u),D=k-I.top-A.grabOffsetY+A.height/2,W=Oe(e).length;if(D<0){o.set(0);return}if(D>I.height){o.set(W);return}const T=Array.from(m.listBodyContainer.querySelectorAll(".row-wrapper"));let z=-1,$=1/0;T.forEach((L,F)=>{const U=L.offsetTop+L.offsetHeight/2,V=Math.abs(D-U);V<$&&($=V,z=F)}),z!==-1&&o.set(z)}function ae(I){if(d){if(d=!1,!Oe(n)){J();return}Z()}}async function Z(){_e(),n.set(!1),r.set(!0);const I=Oe(o);if(Oe(u),m.listBodyContainer&&I!==null){const $=m.listBodyContainer.querySelectorAll(".row-wrapper")[I];if($){const L=m.listBodyContainer.getBoundingClientRect(),F=L.top+$.offsetTop,U=L.left+$.offsetLeft;u.update(V=>({...V,y:F+V.grabOffsetY,x:U+V.grabOffsetX}))}}await new Promise(z=>setTimeout(z,200)),a.set(!0),await $r(),m.listBodyContainer&&m.listBodyContainer.offsetHeight;const A=Oe(i),B=Oe(e).length;let D=Math.max(0,Math.min(I,B)),W=D;if(A!==null&&A!==D){const z=[...Oe(e)],[$]=z.splice(A,1);W=Math.max(0,Math.min(W,z.length)),z.splice(W,0,$),e.set(z),t&&t(A,W)}i.set(null),o.set(null),l.set(null),r.set(!1);const T=A!==D?W:A;c.set(T),await $r(),requestAnimationFrame(()=>{a.set(!1),setTimeout(()=>{c.set(null)},300)})}function J(){d=!1,de()}function de(){n.set(!1),r.set(!1),i.set(null),o.set(null),l.set(null),_e()}function Y(I){if(!m.scrollContainer)return;const{top:A,bottom:B}=m.scrollContainer.getBoundingClientRect(),D=I-A,W=B-I;_e();let T=0;if(D<Ur&&D>0){const z=1-D/Ur;T=-(Va+Ya*(z*z))}else if(W<Ur&&W>0){const z=1-W/Ur;T=Va+Ya*(z*z)}T!==0&&ve(T)}function ve(I){_||(_=requestAnimationFrame(function A(){m.scrollContainer&&(m.scrollContainer.scrollTop+=I,Oe(n)&&(u.update(B=>({...B,x:p,y:k})),K(),_=requestAnimationFrame(A)))}))}function _e(){_&&(cancelAnimationFrame(_),_=null)}function ee(I,A,B,D,W,T){return T||!A&&!B||D===null||W===null?"":I===D?"opacity: 0; pointer-events: none;":D===W?"":D<W&&I>D&&I<=W?"transform: translateY(-100%);":D>W&&I>=W&&I<D?"transform: translateY(100%);":""}return{isDragging:n,isDropping:r,isReordering:a,draggingIndex:i,hoverIndex:o,justDroppedIndex:c,draggedItemData:l,ghostCoords:u,refs:m,onDragInit:E,onPointerMove:P,onPointerUp:ae,getRowStyle:ee,cancelDrag:J}}var lu=M('<div><div style="pointer-events: none; width: 100%; height: 100%;"><!></div></div>'),cu=M('<div style="padding: 10px 0;"><!></div>'),uu=M('<div class="skeletons-wrapper svelte-ym6b2"></div>'),du=M("<div><!></div>"),vu=M('<div class="content-padded svelte-ym6b2" style="text-align: center; opacity: 0.5;"> </div>'),fu=M("<!> <!>",1),hu=M('<div><!> <div class="list-body"><!> <!></div></div>');function ms(e,t){dt(t,!1);const n=()=>ge(Lt,"$navigationStack",p),r=()=>ge(Mt,"$activeMenuTab",p),a=()=>ge(_e,"$isDragging",p),i=()=>ge(ee,"$isDropping",p),o=()=>ge(W,"$draggedItemData",p),c=()=>ge(T,"$ghostCoords",p),u=()=>ge(A,"$draggingIndex",p),l=()=>ge(m(),"$itemsStore",p),d=()=>ge(D,"$justDroppedIndex",p),h=()=>ge(I,"$isReordering",p),v=()=>ge(B,"$hoverIndex",p),[p,k]=$t();let m=at(t,"itemsStore",8),_=at(t,"isEditMode",8,!1),E=at(t,"isLoading",8,!1),P=at(t,"emptyText",8,"List is empty"),K=at(t,"onMoveItem",8,(Q,N)=>{}),ae=S(""),Z=S(0),J=S(!1);pr(async()=>{g(Z,kc(s(ae))),!E()&&s(Z)>0&&s(Y).refs.scrollContainer&&(await $r(),Fr(Y,s(Y).refs.scrollContainer.scrollTop=s(Z)),g(J,!0))});async function de(){await $r(),s(Y).refs.scrollContainer&&(Fr(Y,s(Y).refs.scrollContainer.scrollTop=s(Z)),g(J,!0))}Pl(()=>{s(Y).cancelDrag(),s(Y).refs.scrollContainer&&yc(s(ae),s(Y).refs.scrollContainer.scrollTop)});const Y=S(ou({tracksStore:m(),onMoveTrack:(Q,N)=>{K()(Q,N)}})),ve=s(Y),_e=ve.isDragging,ee=ve.isDropping,I=ve.isReordering,A=ve.draggingIndex,B=ve.hoverIndex,D=ve.justDroppedIndex,W=ve.draggedItemData,T=ve.ghostCoords,z=S(ve.refs);function $(Q,N,q){_()&&s(Y).onDragInit(Q,N,q)}te(()=>(n(),r()),()=>{const Q=n(),N=Q[Q.length-1],q=r();if(N&&N.view==="root")g(ae,`root_${q}`);else if(N){const X=N.data?N.data.name||N.data:"unknown";g(ae,`${N.view}_${X}`)}}),te(()=>(H(E()),s(J),s(Z),s(Y)),()=>{!E()&&!s(J)&&s(Z)>0&&s(Y).refs.scrollContainer&&de()}),Yt(),_t();var L=hu();R("mousemove",wn,function(...Q){s(Y).onPointerMove?.apply(this,Q)}),R("mouseup",wn,function(...Q){s(Y).onPointerUp?.apply(this,Q)}),R("touchmove",wn,function(...Q){s(Y).onPointerMove?.apply(this,Q)},void 0,!1),R("touchend",wn,function(...Q){s(Y).onPointerUp?.apply(this,Q)}),R("touchcancel",wn,function(...Q){s(Y).onPointerUp?.apply(this,Q)});let F;var U=f(L);{var V=Q=>{var N=lu();let q;var X=f(N),ne=f(X);Vr(ne,t,"row",{get item(){return o()},get index(){return u()},isGhost:!0,startDrag:()=>{}}),oe(()=>{q=je(N,1,"floating-item svelte-ym6b2",null,q,{dropping:i()}),Ze(N,`
            top: ${c(),x(()=>c().y-c().grabOffsetY)??""}px; 
            left: ${c(),x(()=>c().x-c().grabOffsetX)??""}px;
            width: ${c(),x(()=>c().width)??""}px; 
            height: ${c(),x(()=>c().height)??""}px;
        `)}),b(Q,N)};j(U,Q=>{(a()||i())&&o()&&Q(V)})}var C=w(U,2),O=f(C);Vr(O,t,"header",{});var ie=w(O,2);{var se=Q=>{var N=uu();Nt(N,4,()=>Array(6),pn,(q,X)=>{var ne=cu(),G=f(ne);Tn(G,{width:"100%",height:"50px"}),b(q,ne)}),b(Q,N)},fe=Q=>{var N=fu(),q=$e(N);Nt(q,3,l,(G,ue)=>G._uid||ue,(G,ue,pe)=>{var Ee=du();let Ae;var Ce=f(Ee);Vr(Ce,t,"row",{get item(){return s(ue)},get index(){return s(pe)},isGhost:!1,startDrag:me=>$(me,s(pe),s(ue))}),oe(me=>{Ae=je(Ee,1,"row-wrapper svelte-ym6b2",null,Ae,{"ghost-placeholder":u()===s(pe)&&(a()||i()),"just-dropped":d()===s(pe),"no-transition":h()}),Ze(Ee,me)},[()=>(s(Y),H(s(pe)),a(),i(),u(),v(),h(),x(()=>s(Y).getRowStyle(s(pe),a(),i(),u(),v(),h())))]),b(G,Ee)});var X=w(q,2);{var ne=G=>{var ue=vu(),pe=f(ue);oe(()=>ce(pe,P())),b(G,ue)};j(X,G=>{l(),x(()=>l().length===0)&&G(ne)})}b(Q,N)};j(ie,Q=>{E()?Q(se):Q(fe,!1)})}qn(C,Q=>Fr(z,s(z).listBodyContainer=Q),()=>s(z)?.listBodyContainer),qn(L,Q=>Fr(z,s(z).scrollContainer=Q),()=>s(z)?.scrollContainer),oe(()=>F=je(L,1,"base-list-scroll-container svelte-ym6b2",null,F,{dragging:a()})),yt(1,C,()=>_n,()=>({duration:200})),b(e,L),vt(),k()}var pu=M('<div slot="fallback" class="icon-fallback svelte-1eh2rsb"><!></div>'),_u=M('<span class="meta-tag"> </span>'),gu=M('<div class="header-subtitle-row svelte-1eh2rsb"><h2 class="header-sub-text svelte-1eh2rsb"> </h2> <!></div>'),mu=M('<span class="meta-tag"> </span>'),bu=M('<span class="meta-tag"> </span>'),wu=M('<span class="meta-tag quality"> </span>'),yu=M('<div slot="header" class="content-padded svelte-1eh2rsb"><div class="view-header svelte-1eh2rsb"><div class="header-art svelte-1eh2rsb"><div style="width: 100%; height: 100%;"><!></div></div> <div class="header-info svelte-1eh2rsb"><div class="header-text-group svelte-1eh2rsb"><div class="header-label svelte-1eh2rsb"> </div> <h1 class="header-title svelte-1eh2rsb"> </h1> <!> <div class="meta-badges"><!> <!> <!></div></div> <div class="header-actions svelte-1eh2rsb"><button class="btn-primary svelte-1eh2rsb"> </button> <button class="btn-secondary svelte-1eh2rsb"> </button></div></div></div></div>'),ku=M('<div slot="row"><!></div>'),xu=M("<button> </button>"),Eu=M('<div class="sort-backdrop svelte-1eh2rsb"></div> <div class="sort-menu svelte-1eh2rsb"></div>',1),Mu=M('<div class="sort-wrapper svelte-1eh2rsb"><button class="sort-trigger svelte-1eh2rsb"><span> </span> <span class="sort-trigger-icon svelte-1eh2rsb"><!></span></button> <!></div>'),Su=M('<div class="music-card svelte-1eh2rsb"><!> <!></div>'),Tu=M('<div class="music-grid svelte-1eh2rsb"></div>'),$u=M('<div class="group-header header-label svelte-1eh2rsb"> </div>'),Au=M('<div slot="fallback" class="icon-fallback svelte-1eh2rsb"><!></div>'),Cu=M('<div class="card-sub text-ellipsis svelte-1eh2rsb"> </div>'),Pu=M('<div class="card-badge svelte-1eh2rsb"> </div>'),Ru=M('<div class="card-badge quality svelte-1eh2rsb"> </div>'),Lu=M('<div class="music-card svelte-1eh2rsb" role="button" tabindex="0"><div class="card-img-container svelte-1eh2rsb"><!> <div class="play-overlay svelte-1eh2rsb"><span class="overlay-icon svelte-1eh2rsb"><!></span></div></div> <div class="card-title svelte-1eh2rsb"> </div> <div class="card-sub-row svelte-1eh2rsb"><!> <!> <!></div></div>'),zu=M('<div class="empty-text svelte-1eh2rsb">No results found</div>'),Nu=M('<div class="music-grid svelte-1eh2rsb"></div>'),Iu=M('<div class="content-padded svelte-1eh2rsb"><div class="search-input-container svelte-1eh2rsb"><span class="search-icon svelte-1eh2rsb"><!></span> <input type="text" class="svelte-1eh2rsb"/> <!></div> <!></div>'),Ou=M("<div><!></div>");function Du(e,t){dt(t,!1);const n=()=>ge(d,"$itemsStore",a),r=()=>ge(Lt,"$navigationStack",a),[a,i]=$t(),o=S(),c=S(),u=S();let l=at(t,"activeCategory",8,"artists");const d=Ne([]);let h=S(!0),v=S(""),p=S("name"),k=S(!1);const m=[{id:"name",label:"A-Z"},{id:"artist",label:"Artist"},{id:"year",label:"Oldest"},{id:"year_desc",label:"Newest"}];let _=S(!1),E=S(!1),P=S(null),K=S(""),ae=S(""),Z=S(""),J=S(0),de=0;function Y(){g(k,!s(k))}function ve(L){g(p,L),g(k,!1)}function _e(L,F){if(!L||L.length===0)return[];const U=[...L].sort((V,C)=>{switch(F){case"name":return V.displayName.localeCompare(C.displayName,void 0,{sensitivity:"base"});case"artist":const O=V.artist||"",ie=C.artist||"",se=O.localeCompare(ie,void 0,{sensitivity:"base"});return se!==0?se:(parseInt(V.year)||0)-(parseInt(C.year)||0);case"year":return(parseInt(V.year)||0)-(parseInt(C.year)||0);case"year_desc":return(parseInt(C.year)||0)-(parseInt(V.year)||0);default:return 0}});if(F==="artist"){const V=[];let C=null;return U.forEach(O=>{const ie=O.artist||"Unknown Artist";ie!==C&&(V.push({_uid:`header-${ie}`,isHeader:!0,title:ie}),C=ie),V.push(O)}),V}return U}async function ee(L,F){if(!F)return;const U=++de;g(h,!0),d.set([]),g(P,F.data),g(K,""),g(ae,""),g(Z,""),g(J,0),console.log(`[LibraryView #${U}] Start loading:`,F);try{let V=[];if(F.view==="root")V=L==="artists"?await xn.getArtists():await xn.getAlbums();else if(F.view==="albums_by_artist"){const O=F.data.name||F.data;V=await xn.getArtistAlbums(O),g(p,"year")}else if(F.view==="tracks_by_album"){const O=F.data.name||F.data,ie=F.data.artist;V=await xn.getAlbumTracks(O,ie)}if(U!==de){console.warn(`[LibraryView #${U}] Request cancelled (stale).`);return}const C=V.map((O,ie)=>{const fe=typeof O=="string"?{name:O}:O;let Q=String(fe.year||"");return Q.length>4&&(Q=Q.substring(0,4)),{...fe,displayName:fe.name||fe.title||fe.artist||"Unknown",thumbFile:fe.file||null,year:Q,_uid:(fe.file||fe.name||ie)+L+F.view}});if(console.log(`[LibraryView #${U}] Setting ${C.length} items.`),d.set(C),F.view==="tracks_by_album"&&C.length>0){g(P,C[0]),g(J,C.length),g(Z,C[0].year);const O=C.reduce((ie,se)=>ie+(se.time||0),0);if(O>0){const ie=Math.floor(O/3600),se=Math.floor(O%3600/60);g(K,ie>0?`${ie} hr ${se} min`:`${se} min`)}C[0].qualityBadge&&g(ae,C[0].qualityBadge)}}catch(V){U===de&&(console.error(V),d.set([]))}finally{U===de&&g(h,!1)}}function I(L){s(u).view==="root"?l()==="artists"?Sn("albums_by_artist",L):Sn("tracks_by_album",L):s(u).view==="albums_by_artist"&&Sn("tracks_by_album",L)}function A(){const L=n();if(L.length>0){const F=s(u).data.name||s(u).data.displayName||"this selection";ts({title:"Replace Queue?",message:`This will clear your queue and play all tracks from "${F}".`,confirmLabel:"Play",type:"confirm",onConfirm:()=>{g(_,!0),Yi(L)}})}}function B(){const L=n();L.length>0&&(g(E,!0),Wi(L),setTimeout(()=>{g(E,!1)},2e3))}te(()=>H(l()),()=>{l()&&(g(v,""),l(),g(p,"name"))}),te(()=>(s(p),y),()=>{g(o,s(p)==="year_desc"?y.SORT_ASC:y.SORT_DESC)}),te(()=>(n(),s(v),s(p)),()=>{g(c,_e(n().filter(L=>{if(!s(v))return!0;const F=s(v).toLowerCase();return L.displayName.toLowerCase().includes(F)||L.artist&&L.artist.toLowerCase().includes(F)}),s(p)))}),te(()=>r(),()=>{g(u,r()[r().length-1])}),te(()=>(H(l()),s(u)),()=>{ee(l(),s(u))}),te(()=>s(u),()=>{s(u)&&(g(_,!1),g(E,!1),g(k,!1))}),Yt(),_t();var D=Ou();let W;var T=f(D);{var z=L=>{ms(L,{get itemsStore(){return d},get isLoading(){return s(h)},isEditMode:!1,emptyText:"No tracks found",$$slots:{header:(F,U)=>{var V=yu(),C=f(V),O=f(C),ie=f(O),se=f(ie);{let Se=et(()=>(H(ur),s(P),x(()=>ur(s(P)))));Un(se,{get src(){return s(Se)},alt:"Art",radius:"8px",$$slots:{fallback:(Pe,Ie)=>{var he=pu(),ke=f(he);le(ke,()=>(H(y),x(()=>y.ALBUMS))),b(Pe,he)}}})}var fe=w(O,2),Q=f(fe),N=f(Q),q=f(N),X=w(N,2),ne=f(X),G=w(X,2);{var ue=Se=>{var Pe=gu(),Ie=f(Pe),he=f(Ie),ke=w(Ie,2);{var Re=Ue=>{var xe=_u(),Ve=f(xe);oe(()=>ce(Ve,s(Z))),b(Ue,xe)};j(ke,Ue=>{s(Z)&&s(Z)!=="0"&&Ue(Re)})}oe(()=>ce(he,(s(P),x(()=>s(P).artist)))),b(Se,Pe)};j(G,Se=>{s(P),x(()=>s(P)&&s(P).artist)&&Se(ue)})}var pe=w(G,2),Ee=f(pe);{var Ae=Se=>{var Pe=mu(),Ie=f(Pe);oe(()=>ce(Ie,`${s(J)??""} tracks`)),b(Se,Pe)};j(Ee,Se=>{s(J)>0&&Se(Ae)})}var Ce=w(Ee,2);{var me=Se=>{var Pe=bu(),Ie=f(Pe);oe(()=>ce(Ie,s(K))),b(Se,Pe)};j(Ce,Se=>{s(K)&&Se(me)})}var De=w(Ce,2);{var Le=Se=>{var Pe=wu(),Ie=f(Pe);oe(()=>ce(Ie,s(ae))),b(Se,Pe)};j(De,Se=>{s(ae)&&Se(Le)})}var Be=w(Q,2),Ye=f(Be),Me=f(Ye),be=w(Ye,2),ze=f(be);oe(()=>{ce(q,(s(u),x(()=>s(u).view==="albums_by_artist"?"Artist":"Album"))),pt(X,"title",(s(u),x(()=>s(u).data.name||s(u).data.displayName))),ce(ne,(s(u),x(()=>s(u).data.name||s(u).data.displayName||"Unknown"))),Ye.disabled=s(_),ce(Me,s(_)?"Playing...":"Play All"),be.disabled=s(E),ce(ze,s(E)?"Added":"To Queue")}),R("click",Ye,A),R("click",be,B),b(F,V)},row:(F,U)=>{var V=ku();const C=et(()=>U.item),O=et(()=>U.index);var ie=f(V);gs(ie,{get track(){return s(C)},get index(){return s(O)},isEditable:!1,$$events:{play:()=>_s(s(C))}}),b(F,V)}}})},$=L=>{var F=Iu(),U=f(F),V=f(U),C=f(V);le(C,()=>(H(y),x(()=>y.SEARCH)));var O=w(V,2),ie=w(O,2);{var se=q=>{var X=Mu(),ne=f(X),G=f(ne),ue=f(G),pe=w(G,2),Ee=f(pe);le(Ee,()=>s(o));var Ae=w(ne,2);{var Ce=me=>{var De=Eu(),Le=$e(De),Be=w(Le,2);Nt(Be,5,()=>m,pn,(Ye,Me)=>{var be=xu();let ze;var Se=f(be);oe(()=>{ze=je(be,1,"sort-item svelte-1eh2rsb",null,ze,{selected:s(p)===s(Me).id}),ce(Se,(s(Me),x(()=>s(Me).label)))}),R("click",be,()=>ve(s(Me).id)),b(Ye,be)}),R("click",Le,Y),yt(3,Le,()=>_n,()=>({duration:100})),yt(3,Be,()=>ca,()=>({start:.95,duration:100})),b(me,De)};j(Ae,me=>{s(k)&&me(Ce)})}oe(me=>ce(ue,me),[()=>(s(p),x(()=>m.find(me=>me.id===s(p))?.label))]),R("click",ne,Y),b(q,X)};j(ie,q=>{H(l()),s(u),x(()=>l()==="albums"||s(u).view==="albums_by_artist")&&q(se)})}var fe=w(U,2);{var Q=q=>{var X=Tu();Nt(X,4,()=>Array(12),pn,(ne,G)=>{var ue=Su(),pe=f(ue);Tn(pe,{width:"100%",style:"aspect-ratio:1; border-radius:12px; margin-bottom:12px;"});var Ee=w(pe,2);Tn(Ee,{width:"80%",height:"16px"}),b(ne,ue)}),b(q,X)},N=q=>{var X=Nu();Nt(X,5,()=>s(c),ne=>ne._uid,(ne,G)=>{var ue=Xe(),pe=$e(ue);{var Ee=Ce=>{var me=$u(),De=f(me);oe(()=>ce(De,(s(G),x(()=>s(G).title)))),b(Ce,me)},Ae=Ce=>{var me=Lu(),De=f(me),Le=f(De);{let xe=et(()=>(H(Rr),s(G),x(()=>Rr(s(G),"md"))));Un(Le,{get src(){return s(xe)},get alt(){return s(G),x(()=>s(G).displayName)},radius:"8px",$$slots:{fallback:(Ve,Ge)=>{var ft=Au(),rn=f(ft);{var kt=nt=>{var xt=Xe(),sn=$e(xt);le(sn,()=>(H(y),x(()=>y.ARTISTS))),b(nt,xt)},At=nt=>{var xt=Xe(),sn=$e(xt);le(sn,()=>(H(y),x(()=>y.ALBUMS))),b(nt,xt)};j(rn,nt=>{l()==="artists"?nt(kt):nt(At,!1)})}b(Ve,ft)}}})}var Be=w(Le,2),Ye=f(Be),Me=f(Ye);le(Me,()=>(H(y),x(()=>y.PLAY)));var be=w(De,2),ze=f(be),Se=w(be,2),Pe=f(Se);{var Ie=xe=>{var Ve=Cu(),Ge=f(Ve);oe(()=>ce(Ge,(s(G),x(()=>s(G).artist)))),b(xe,Ve)};j(Pe,xe=>{s(G),x(()=>s(G).artist)&&xe(Ie)})}var he=w(Pe,2);{var ke=xe=>{var Ve=Pu(),Ge=f(Ve);oe(()=>ce(Ge,(s(G),x(()=>s(G).year)))),b(xe,Ve)};j(he,xe=>{s(G),x(()=>s(G).year&&s(G).year!=="0")&&xe(ke)})}var Re=w(he,2);{var Ue=xe=>{var Ve=Ru(),Ge=f(Ve);oe(ft=>ce(Ge,ft),[()=>(s(G),x(()=>s(G).qualityBadge.split(" ")[0]))]),b(xe,Ve)};j(Re,xe=>{s(G),x(()=>s(G).qualityBadge)&&xe(Ue)})}oe(()=>ce(ze,(s(G),x(()=>s(G).displayName)))),R("click",me,()=>I(s(G))),R("keypress",me,xe=>xe.key==="Enter"&&I(s(G))),b(Ce,me)};j(pe,Ce=>{s(G),x(()=>s(G).isHeader)?Ce(Ee):Ce(Ae,!1)})}b(ne,ue)},ne=>{var G=zu();b(ne,G)}),b(q,X)};j(fe,q=>{s(h)?q(Q):q(N,!1)})}oe(()=>pt(O,"placeholder",`Filter ${l()??""}...`)),hs(O,()=>s(v),q=>g(v,q)),b(L,F)};j(T,L=>{s(u),x(()=>s(u)?.view==="tracks_by_album")?L(z):L($,!1)})}oe(()=>W=je(D,1,"view-container svelte-1eh2rsb",null,W,{scrollable:s(u)?.view!=="tracks_by_album"})),b(e,D),vt(),i()}var Fu=M('<div class="music-card svelte-1otxnt7"><!> <!></div>'),Bu=M('<div class="music-grid svelte-1otxnt7"></div>'),ju=M('<div slot="fallback" class="icon-fallback svelte-1otxnt7">ð»</div>'),qu=M('<div class="status-badge playing svelte-1otxnt7">PLAYING</div>'),Uu=M('<div class="status-badge paused svelte-1otxnt7">PAUSED</div>'),Hu=M('<span class="overlay-icon svelte-1otxnt7"><!></span>'),Vu=M('<div class="card-sub svelte-1otxnt7"> </div>'),Yu=M('<div class="card-badge quality svelte-1otxnt7"> </div>'),Wu=M('<div role="button" tabindex="0"><div class="card-img-container svelte-1otxnt7"><!> <div class="play-overlay svelte-1otxnt7"><!></div></div> <div class="card-title svelte-1otxnt7"> </div> <div class="card-sub-row svelte-1otxnt7"><!> <!></div></div>'),Qu=M('<div class="empty-text svelte-1otxnt7">No stations found</div>'),Ku=M('<div class="music-grid svelte-1otxnt7"></div> <!>',1),Xu=M('<div class="view-container scrollable svelte-1otxnt7"><div class="content-padded no-bottom-pad svelte-1otxnt7"><div class="search-input-container svelte-1otxnt7"><span class="search-icon svelte-1otxnt7"><!></span> <input type="text" placeholder="Find station..." class="svelte-1otxnt7"/></div></div> <div class="content-padded svelte-1otxnt7"><!></div></div>');function Gu(e,t){dt(t,!1);const n=()=>ge($n,"$stations",o),r=()=>ge(it,"$status",o),a=()=>ge(Yr,"$isLoadingRadio",o),i=()=>ge(Vt,"$currentSong",o),[o,c]=$t(),u=S(),l=S();let d=S("");te(()=>(n(),s(d)),()=>{g(u,n().filter(Z=>{const J=s(d).toLowerCase();return Z.name.toLowerCase().includes(J)||Z.genre&&Z.genre.toLowerCase().includes(J)}))}),te(()=>r(),()=>{g(l,r().bitrate?`${r().bitrate} kbps`:r().format||"")}),Yt(),_t();var h=Xu(),v=f(h),p=f(v),k=f(p),m=f(k);le(m,()=>(H(y),x(()=>y.SEARCH)));var _=w(k,2),E=w(v,2),P=f(E);{var K=Z=>{var J=Bu();Nt(J,4,()=>Array(12),pn,(de,Y)=>{var ve=Fu(),_e=f(ve);Tn(_e,{width:"100%",style:"aspect-ratio:1; border-radius:12px; margin-bottom:12px;"});var ee=w(_e,2);Tn(ee,{width:"70%",height:"16px"}),b(de,ve)}),b(Z,J)},ae=Z=>{var J=Ku(),de=$e(J);Nt(de,5,()=>s(u),pn,(_e,ee)=>{const I=et(()=>(s(ee),x(()=>s(ee).file))),A=et(()=>(i(),s(ee),H(s(I)),x(()=>i().stationName===s(ee).name||i().file===s(I)))),B=et(()=>(H(cr),s(ee),x(()=>cr(s(ee)))));var D=Wu();let W;var T=f(D),z=f(T);Un(z,{get src(){return s(B)},get alt(){return s(ee),x(()=>s(ee).name)},radius:"8px",$$slots:{fallback:(N,q)=>{var X=ju();b(N,X)}}});var $=w(z,2),L=f($);{var F=N=>{var q=Xe(),X=$e(q);{var ne=ue=>{var pe=qu();b(ue,pe)},G=ue=>{var pe=Uu();b(ue,pe)};j(X,ue=>{r(),x(()=>r().state==="play")?ue(ne):ue(G,!1)})}b(N,q)},U=N=>{var q=Hu(),X=f(q);le(X,()=>(H(y),x(()=>y.PLAY))),b(N,q)};j(L,N=>{s(A)?N(F):N(U,!1)})}var V=w(T,2),C=f(V),O=w(V,2),ie=f(O);{var se=N=>{var q=Vu(),X=f(q);oe(()=>ce(X,(s(ee),x(()=>s(ee).genre)))),b(N,q)};j(ie,N=>{s(ee),x(()=>s(ee).genre)&&N(se)})}var fe=w(ie,2);{var Q=N=>{var q=Yu(),X=f(q);oe(()=>ce(X,s(l))),yt(1,q,()=>_n),b(N,q)};j(fe,N=>{s(A)&&s(l)&&N(Q)})}oe(()=>{W=je(D,1,"music-card svelte-1otxnt7",null,W,{"is-active":s(A)}),Ze($,s(A)?"opacity: 1":""),ce(C,(s(ee),x(()=>s(ee).name)))}),R("click",D,()=>pa(s(ee))),b(_e,D)});var Y=w(de,2);{var ve=_e=>{var ee=Qu();b(_e,ee)};j(Y,_e=>{s(u),n(),x(()=>s(u).length===0&&n().length>0)&&_e(ve)})}b(Z,J)};j(P,Z=>{a()?Z(K):Z(ae,!1)})}hs(_,()=>s(d),Z=>g(d,Z)),yt(1,h,()=>_n,()=>({duration:200})),b(e,h),vt(),c()}var Zu=M('<span class="meta-tag">Loading...</span>'),Ju=M('<span class="meta-tag"> </span>'),ed=M('<span class="meta-tag quality"> </span>'),td=M('<span class="meta-tag"> </span> <!> <!>',1),nd=M('<div slot="header" class="content-padded svelte-m7c4tz"><div class="view-header svelte-m7c4tz"><div class="header-art svelte-m7c4tz"><div class="header-icon-wrap svelte-m7c4tz"><!></div></div> <div class="header-info svelte-m7c4tz"><div class="header-text-group svelte-m7c4tz"><div class="header-label svelte-m7c4tz">Playlist</div> <h1 class="header-title svelte-m7c4tz"> </h1> <div class="meta-badges"><!></div></div> <div class="header-actions svelte-m7c4tz"><button class="btn-primary svelte-m7c4tz"> </button> <button class="btn-secondary svelte-m7c4tz"> </button> <button title="Edit"><!></button></div></div></div></div>'),rd=M('<div slot="row"><!></div>'),sd=M('<div class="music-card svelte-m7c4tz"><!> <!></div>'),ad=M('<div class="content-padded svelte-m7c4tz"><div class="music-grid playlists-grid-override svelte-m7c4tz"></div></div>'),id=M('<div class="music-card svelte-m7c4tz"><div class="card-img-container svelte-m7c4tz"><div class="icon-wrap svelte-m7c4tz"><!></div> <div class="play-overlay svelte-m7c4tz"><span class="overlay-icon svelte-m7c4tz"><!></span></div></div> <div class="card-title svelte-m7c4tz"> </div> <div class="card-sub-row svelte-m7c4tz"><div class="card-sub svelte-m7c4tz"> </div></div></div>'),od=M('<div class="content-padded svelte-m7c4tz"><div class="music-grid playlists-grid-override svelte-m7c4tz"><div class="music-card svelte-m7c4tz"><div class="card-img-container dashed-cover svelte-m7c4tz"><div class="icon-wrap svelte-m7c4tz"><!></div></div> <div class="card-title svelte-m7c4tz">New Playlist</div></div> <!></div></div>'),ld=M("<div><!></div>");function cd(e,t){dt(t,!1);const n=()=>ge(Lt,"$navigationStack",c),r=()=>ge(nr,"$activePlaylistTracks",c),a=()=>ge(Ys,"$isLoadingTracks",c),i=()=>ge(ua,"$playlists",c),o=()=>ge(Vs,"$isLoadingPlaylists",c),[c,u]=$t(),l=S(),d=S(),h=S();let v=S(!1),p=S(!1),k=S(!1),m=S(""),_=S("");pr(()=>{!s(d)&&i().length===0&&ha()});function E(B){const D=B.reduce((T,z)=>T+(parseFloat(z.time)||0),0);if(D>0){const T=Math.floor(D/3600),z=Math.floor(D%3600/60);g(m,T>0?`${T} hr ${z} min`:`${z} min`)}else g(m,"");const W=new Set;B.forEach(T=>{T.qualityBadge&&W.add(T.qualityBadge.split(" ")[0])}),g(_,W.size===1?B[0].qualityBadge:W.size>1?"Mixed":"")}function P(B){Sn("details",B)}function K(){ts({title:"Replace Queue?",message:`This will clear your current queue and play "${s(l).data.name}".`,confirmLabel:"Play",type:"confirm",onConfirm:()=>{g(p,!0),Zi(s(l).data.name,0)}})}function ae(B){s(v)||_s(B)}function Z(){if(r().length>0){const B=s(l).data.name.replace(/"/g,'\\"');as(`load "${B}"`),g(k,!0),setTimeout(()=>{g(k,!1)},2e3)}}function J(){g(v,!s(v))}function de(B){const D=s(l).data.name,W=r();W.splice(B,1),nr.set(W),Xi(D,B),E(W)}function Y(B,D){Gi(s(l).data.name,B,D)}te(()=>n(),()=>{g(l,n()[n().length-1])}),te(()=>s(l),()=>{g(d,s(l).view==="details")}),te(()=>s(l),()=>{s(l)&&(g(p,!1),g(k,!1))}),te(()=>(s(d),r(),a()),()=>{if(s(d)&&r().length>0){const B=r();if(!B[0]._uid){const D=B.map(W=>({...W,_uid:Math.random()}));nr.set(D)}E(B)}else s(d)&&r().length===0&&!a()&&(g(m,"0 min"),g(_,""))}),te(()=>(s(d),s(l),Qc),()=>{s(d)&&s(l).data&&(g(v,!1),Qi(s(l).data.name))}),te(()=>s(l),()=>{g(h,s(l)?.data?.name==="Favorites")}),Yt(),_t();var ve=ld();let _e;var ee=f(ve);{var I=B=>{ms(B,{get itemsStore(){return nr},get isLoading(){return a()},get isEditMode(){return s(v)},emptyText:"This playlist is empty.",onMoveItem:Y,$$slots:{header:(D,W)=>{var T=nd(),z=f(T),$=f(z),L=f($),F=f(L);le(F,()=>(s(h),H(y),x(()=>s(h)?y.HEART_FILLED:y.PLAYLISTS)));var U=w($,2),V=f(U),C=w(f(V),2),O=f(C),ie=w(C,2),se=f(ie);{var fe=Ae=>{var Ce=Zu();b(Ae,Ce)},Q=Ae=>{var Ce=td(),me=$e(Ce),De=f(me),Le=w(me,2);{var Be=be=>{var ze=Ju(),Se=f(ze);oe(()=>ce(Se,s(m))),b(be,ze)};j(Le,be=>{s(m)&&be(Be)})}var Ye=w(Le,2);{var Me=be=>{var ze=ed(),Se=f(ze);oe(()=>ce(Se,s(_))),b(be,ze)};j(Ye,be=>{s(_)&&be(Me)})}oe(()=>ce(De,`${r(),x(()=>r().length)??""} tracks`)),b(Ae,Ce)};j(se,Ae=>{a()?Ae(fe):Ae(Q,!1)})}var N=w(V,2),q=f(N),X=f(q),ne=w(q,2),G=f(ne),ue=w(ne,2);let pe;var Ee=f(ue);le(Ee,()=>(s(v),H(y),x(()=>s(v)?y.ACCEPT:y.EDIT))),oe(()=>{Ze($,`background: ${s(h),s(l),x(()=>s(h)?"linear-gradient(135deg, hsl(348, 95%, 58%), hsl(348, 90%, 40%))":s(l).data.color||"#333")??""};`),pt(C,"title",(s(l),x(()=>s(l).data.name))),ce(O,(s(l),x(()=>s(l).data.name))),q.disabled=s(p),ce(X,s(p)?"Playing...":"Play All"),ne.disabled=s(k),ce(G,s(k)?"Added":"To Queue"),pe=je(ue,1,"btn-action svelte-m7c4tz",null,pe,{active:s(v)})}),R("click",q,K),R("click",ne,Z),R("click",ue,J),b(D,T)},row:(D,W)=>{var T=rd();const z=et(()=>W.item),$=et(()=>W.index),L=et(()=>W.startDrag);var F=f(T);gs(F,{get track(){return s(z)},get index(){return s($)},get isEditable(){return s(v)},$$events:{play:()=>ae(s(z)),remove:()=>de(s($)),startdrag(...U){s(L)?.apply(this,U)}}}),b(D,T)}}})},A=B=>{var D=Xe(),W=$e(D);{var T=$=>{var L=ad(),F=f(L);Nt(F,4,()=>Array(8),pn,(U,V)=>{var C=sd(),O=f(C);Tn(O,{width:"100%",style:"aspect-ratio: 1; border-radius: 12px; margin-bottom: 12px;"});var ie=w(O,2);Tn(ie,{width:"60%",height:"16px"}),b(U,C)}),b($,L)},z=$=>{var L=od(),F=f(L),U=f(F),V=f(U),C=f(V),O=f(C);le(O,()=>(H(y),x(()=>y.ADD)));var ie=w(U,2);Nt(ie,1,i,pn,(se,fe)=>{const Q=et(()=>(s(fe),x(()=>s(fe).name==="Favorites")));var N=id(),q=f(N),X=f(q),ne=f(X);le(ne,()=>(H(s(Q)),H(y),x(()=>s(Q)?y.HEART_FILLED:y.PLAYLISTS)));var G=w(X,2),ue=f(G),pe=f(ue);le(pe,()=>(H(y),x(()=>y.PLAY)));var Ee=w(q,2),Ae=f(Ee),Ce=w(Ee,2),me=f(Ce),De=f(me);oe(Le=>{Ze(q,`background: ${s(fe),x(()=>s(fe).color)??""};`),ce(Ae,(s(fe),x(()=>s(fe).name))),ce(De,Le)},[()=>(s(fe),x(()=>s(fe).lastModified?new Date(s(fe).lastModified).toLocaleDateString():"Playlist"))]),R("click",N,()=>P(s(fe))),b(se,N)}),b($,L)};j(W,$=>{o()?$(T):$(z,!1)},!0)}b(B,D)};j(ee,B=>{s(d)?B(I):B(A,!1)})}oe(()=>_e=je(ve,1,"view-container svelte-m7c4tz",null,_e,{scrollable:!s(d)})),b(e,ve),vt(),u()}var ud=M('<button class="clear-icon-btn svelte-1d3z1zm"><!></button>'),dd=M('<div class="spinner svelte-1d3z1zm"></div>'),vd=M('<div class="placeholder-state svelte-1d3z1zm"><div class="placeholder-icon svelte-1d3z1zm">ð</div> <p>Type to search your library</p></div>'),fd=M('<div class="empty-text svelte-1d3z1zm"> </div>'),hd=M('<div slot="fallback" class="icon-fallback svelte-1d3z1zm">ð¿</div>'),pd=M('<div class="meta-tag"> </div>'),_d=M('<div class="meta-tag quality"> </div>'),gd=M('<div class="music-card svelte-1d3z1zm"><div class="card-img-container svelte-1d3z1zm"><!> <div class="play-overlay svelte-1d3z1zm"><span class="overlay-icon svelte-1d3z1zm"><!></span></div></div> <div class="card-title svelte-1d3z1zm"> </div> <div class="card-sub-row svelte-1d3z1zm"><div class="card-sub text-ellipsis svelte-1d3z1zm"> </div> <!> <!></div></div>'),md=M('<div class="header-label section-spacing svelte-1d3z1zm">Albums</div> <div class="music-grid horizontal section-mb svelte-1d3z1zm"></div>',1),bd=M('<div class="header-label svelte-1d3z1zm">Tracks</div>'),wd=M("<!> <!>",1),yd=M('<div slot="header" class="content-padded svelte-1d3z1zm"><!></div>'),kd=M('<div slot="row"><!></div>'),xd=M('<div class="view-container svelte-1d3z1zm"><div class="content-padded no-bottom-pad svelte-1d3z1zm"><div class="search-input-container svelte-1d3z1zm"><span class="search-icon svelte-1d3z1zm"><!></span> <input type="text" placeholder="Artists, songs, or albums" autoFocus class="svelte-1d3z1zm"/> <!> <!></div></div> <!></div>');function Ed(e,t){dt(t,!1);const n=()=>ge(Er,"$searchQuery",a),r=()=>ge(o,"$tracksStore",a),[a,i]=$t(),o=Ne([]);let c=S([]),u=S(!1),l,d=S(!1);pr(()=>{n().length>=2&&p(n())});function h(I){Er.set(I.target.value),clearTimeout(l),l=setTimeout(()=>{p(n())},300)}function v(){Er.set(""),o.set([]),g(c,[]),g(d,!1)}async function p(I){const A=I.trim().toLowerCase();if(A.length<2){o.set([]),g(c,[]),g(d,!1);return}g(u,!0),g(d,!0);try{const B=await xn.search(A),D=B.map((T,z)=>({...T,_uid:T.file?`${T.file}-${z}`:`search-${z}`}));o.set(D);const W=new Map;B.forEach(T=>{const z=T.album;if(z&&!W.has(z)){const $=z.toLowerCase().includes(A),L=T.artist&&T.artist.toLowerCase().includes(A);if($||L){let F=String(T.year||"");F.length>4&&(F=F.substring(0,4)),W.set(z,{name:z,artist:T.artist,file:T.file,thumbHash:T.thumbHash,_uid:`alb-${z}`,year:F,qualityBadge:T.qualityBadge})}}}),g(c,Array.from(W.values()))}finally{g(u,!1)}}function k(I){_s(I)}function m(I){Sn("tracks_by_album",{name:I.name,artist:I.artist})}function _(I){I.deltaY!==0&&(I.currentTarget.scrollLeft+=I.deltaY)}_t();var E=xd(),P=f(E),K=f(P),ae=f(K),Z=f(ae);le(Z,()=>y.SEARCH);var J=w(ae,2),de=w(J,2);{var Y=I=>{var A=ud(),B=f(A);le(B,()=>y.CLOSE),R("click",A,v),b(I,A)};j(de,I=>{n().length>0&&I(Y)})}var ve=w(de,2);{var _e=I=>{var A=dd();b(I,A)};j(ve,I=>{s(u)&&I(_e)})}var ee=w(P,2);ms(ee,{get itemsStore(){return o},isEditMode:!1,isLoading:!1,emptyText:"",$$slots:{header:(I,A)=>{var B=yd(),D=f(B);{var W=z=>{var $=vd();b(z,$)},T=z=>{var $=Xe(),L=$e($);{var F=V=>{var C=fd(),O=f(C);oe(()=>ce(O,`No results found for "${n()??""}"`)),b(V,C)},U=V=>{var C=wd(),O=$e(C);{var ie=Q=>{var N=md(),q=w($e(N),2);Nt(q,5,()=>s(c),X=>X._uid,(X,ne)=>{var G=gd(),ue=f(G),pe=f(ue);{let Pe=et(()=>Rr(s(ne),"md"));Un(pe,{get src(){return s(Pe)},get alt(){return s(ne).name},radius:"8px",$$slots:{fallback:(Ie,he)=>{var ke=hd();b(Ie,ke)}}})}var Ee=w(pe,2),Ae=f(Ee),Ce=f(Ae);le(Ce,()=>y.PLAY);var me=w(ue,2),De=f(me),Le=w(me,2),Be=f(Le),Ye=f(Be),Me=w(Be,2);{var be=Pe=>{var Ie=pd(),he=f(Ie);oe(()=>ce(he,s(ne).year)),b(Pe,Ie)};j(Me,Pe=>{s(ne).year&&s(ne).year!=="0"&&s(ne).year!==0&&Pe(be)})}var ze=w(Me,2);{var Se=Pe=>{var Ie=_d(),he=f(Ie);oe(ke=>ce(he,ke),[()=>s(ne).qualityBadge.split(" ")[0]]),b(Pe,Ie)};j(ze,Pe=>{s(ne).qualityBadge&&Pe(Se)})}oe(()=>{pt(me,"title",s(ne).name),ce(De,s(ne).name),ce(Ye,s(ne).artist)}),R("click",G,()=>m(s(ne))),b(X,G)}),R("wheel",q,_),b(Q,N)};j(O,Q=>{s(c).length>0&&Q(ie)})}var se=w(O,2);{var fe=Q=>{var N=bd();b(Q,N)};j(se,Q=>{r().length>0&&Q(fe)})}b(V,C)};j(L,V=>{!s(u)&&r().length===0&&s(c).length===0&&s(d)?V(F):V(U,!1)},!0)}b(z,$)};j(D,z=>{n().length<2?z(W):z(T,!1)})}b(I,B)},row:(I,A)=>{var B=kd();const D=et(()=>A.item),W=et(()=>A.index);var T=f(B);gs(T,{get track(){return s(D)},get index(){return s(W)},isEditable:!1,$$events:{play:()=>k(s(D))}}),b(I,B)}}}),oe(()=>Ml(J,n())),R("input",J,h),b(e,E),vt(),i()}var Md=M('<div class="knob svelte-1jla3sy"></div>'),Sd=M('<div class="tooltip current svelte-1jla3sy"> </div> <span></span>',1),Td=M('<div slot="fallback" class="icon-fallback svelte-1jla3sy"><!></div>'),$d=M('<span class="meta-tag quality"> </span>'),Ad=M('<div class="dot svelte-1jla3sy"></div>'),Cd=M("<button><!> <!></button>"),Pd=M('<div class="dock svelte-1jla3sy"><div class="progress-shadow svelte-1jla3sy"></div> <div><div class="rail svelte-1jla3sy"></div> <div class="fill svelte-1jla3sy"><!></div> <!></div> <div class="grid svelte-1jla3sy"><div class="info svelte-1jla3sy"><div class="art svelte-1jla3sy"><!></div> <div class="meta svelte-1jla3sy"><div class="title-row svelte-1jla3sy"><div class="title text-ellipsis svelte-1jla3sy"> </div> <button class="btn-icon tiny-dots svelte-1jla3sy"><!></button></div> <div class="artist-row svelte-1jla3sy"><div class="artist text-ellipsis svelte-1jla3sy"> </div> <!></div></div></div> <div class="controls svelte-1jla3sy"><button><!></button> <button class="btn-icon"><!></button> <button class="play-btn flex-center svelte-1jla3sy"><!></button> <button class="btn-icon"><!></button> <!></div> <div class="volume desktop svelte-1jla3sy"><div class="vol-icon svelte-1jla3sy"><!></div> <div class="custom-slider svelte-1jla3sy"><div class="slider-bg svelte-1jla3sy"><div class="slider-fill svelte-1jla3sy"></div> <div class="slider-knob svelte-1jla3sy"></div></div></div></div></div></div>'),Rd=M("=== ./components/MiniPlayer.svelte === <!>",1);function Ld(e,t){dt(t,!1);const n=()=>ge(it,"$status",c),r=()=>ge(Vt,"$currentSong",c),a=()=>ge(kn,"$favorites",c),i=()=>ge($n,"$stations",c),o=()=>ge(ns,"$isFullPlayerOpen",c),[c,u]=$t(),l=S(),d=S(),h=S(),v=S(),p=S(),k=S(),m=S(),_=S(),E=S(),P=S(),K=S(),ae=S();let Z=S(!1),J=S(!1),de=!1,Y=S(0),ve=S(),_e=S();const ee=C=>O=>{O.stopPropagation(),C()};function I(C){if(isNaN(C)||C===null)return"0:00";const O=Math.floor(C/60),ie=Math.floor(C%60);return`${O}:${ie<10?"0":""}${ie}`}function A(C,O){const ie=O.getBoundingClientRect();return Math.max(0,Math.min(1,(C.clientX-ie.left)/ie.width))}function B(C){s(v)||(g(J,!0),g(Y,A(C,s(ve))),window.addEventListener("mousemove",D),window.addEventListener("mouseup",W))}function D(C){if(s(J)&&g(Y,A(C,s(ve))),de){const O=Math.round(A(C,s(_e))*100);Lr(O)}}function W(){s(J)&&!s(v)&&fa(s(Y)*s(l)),g(J,!1),de=!1,window.removeEventListener("mousemove",D),window.removeEventListener("mouseup",W)}function T(C){de=!0;const O=Math.round(A(C,s(_e))*100);Lr(O),window.addEventListener("mousemove",D),window.addEventListener("mouseup",W)}function z(){const C=(s(ae)+1)%3;C===0?(n().random&&In(),n().repeat&&On()):C===1?(n().random||In(),n().repeat&&On()):C===2&&(n().random&&In(),n().repeat||On())}function $(C){C.stopPropagation(),rs(C,r(),{type:"general",source:"miniplayer"})}function L(C){rs(C.detail.originalEvent,r(),{type:"general",source:"miniplayer"})}te(()=>n(),()=>{g(l,n().duration>0?n().duration:1)}),te(()=>n(),()=>{g(d,n().elapsed||0)}),te(()=>n(),()=>{g(h,n().state==="play")}),te(()=>r(),()=>{g(v,r().file?.startsWith("http"))}),te(()=>r(),()=>{g(p,r().title||"Not Playing")}),te(()=>r(),()=>{g(k,r().stationName||r().artist||"Moode")}),te(()=>(r(),a()),()=>{g(m,r().file&&a().has(r().file))}),te(()=>(r(),i()),()=>{g(_,ur(r(),i(),r().stationName))}),te(()=>(s(v),s(J),s(Y),s(d),s(l)),()=>{g(E,s(v)?0:s(J)?s(Y)*100:s(d)/s(l)*100)}),te(()=>(s(h),s(J),s(v)),()=>{g(P,s(h)&&!s(J)&&!s(v))}),te(()=>n(),()=>{g(K,n().bitrate?`${n().bitrate} kbps`:n().format||"")}),te(()=>n(),()=>{g(ae,n().repeat?2:n().random?1:0)}),Yt(),_t();var F=Rd(),U=w($e(F));{var V=C=>{var O=Pd(),ie=f(O),se=w(ie,2);let fe;var Q=w(f(se),2),N=f(Q);{var q=ye=>{var Je=Md();b(ye,Je)};j(N,ye=>{s(v)||ye(q)})}var X=w(Q,2);{var ne=ye=>{var Je=Sd(),re=$e(Je),Te=f(re);oe(tt=>{Ze(re,`left: ${s(E)??""}%`),ce(Te,tt)},[()=>(s(J),s(Y),s(l),s(d),x(()=>s(J)?I(s(Y)*s(l)):I(s(d))))]),b(ye,Je)};j(X,ye=>{(s(Z)||s(J))&&!s(v)&&ye(ne)})}qn(se,ye=>g(ve,ye),()=>s(ve));var G=w(se,2),ue=f(G),pe=f(ue),Ee=f(pe);Un(Ee,{get src(){return s(_)},alt:"art",radius:"4px",$$slots:{fallback:(ye,Je)=>{var re=Td(),Te=f(re);le(Te,()=>(s(v),H(y),x(()=>s(v)?y.RADIO:y.ALBUMS))),b(ye,re)}}});var Ae=w(pe,2),Ce=f(Ae),me=f(Ce),De=f(me),Le=w(me,2),Be=f(Le);le(Be,()=>(H(y),x(()=>y.DOTS)));var Ye=w(Ce,2),Me=f(Ye),be=f(Me),ze=w(Me,2);{var Se=ye=>{var Je=$d(),re=f(Je);oe(()=>ce(re,s(K))),b(ye,Je)};j(ze,ye=>{s(K)&&ye(Se)})}var Pe=w(ue,2),Ie=f(Pe),he=mr(()=>ee(()=>Hn.toggleFavorite(r())));let ke;var Re=f(Ie);le(Re,()=>(s(m),H(y),x(()=>s(m)?y.HEART_FILLED:y.HEART)));var Ue=w(Ie,2),xe=mr(()=>ee(()=>zr("previous"))),Ve=f(Ue);le(Ve,()=>(H(y),x(()=>y.PREVIOUS)));var Ge=w(Ue,2),ft=mr(()=>ee(ps)),rn=f(Ge);le(rn,()=>(n(),H(y),x(()=>n().state==="play"?y.PAUSE:y.PLAY)));var kt=w(Ge,2),At=mr(()=>ee(()=>zr("next"))),nt=f(kt);le(nt,()=>(H(y),x(()=>y.NEXT)));var xt=w(kt,2);{var sn=ye=>{var Je=Cd(),re=mr(()=>ee(z));let Te;var tt=f(Je);{var Qt=gt=>{var rt=Xe(),Dt=$e(rt);le(Dt,()=>(H(y),x(()=>y.REPEAT))),b(gt,rt)},bs=gt=>{var rt=Xe(),Dt=$e(rt);le(Dt,()=>(H(y),x(()=>y.SHUFFLE))),b(gt,rt)};j(tt,gt=>{s(ae)===2?gt(Qt):gt(bs,!1)})}var ws=w(tt,2);{var ys=gt=>{var rt=Ad();b(gt,rt)};j(ws,gt=>{s(ae)>0&&gt(ys)})}oe(()=>Te=je(Je,1,"btn-icon desktop mode-btn svelte-1jla3sy",null,Te,{active:s(ae)>0})),R("click",Je,function(...gt){s(re)?.apply(this,gt)}),b(ye,Je)};j(xt,ye=>{s(v)||ye(sn)})}var _r=w(Pe,2),It=f(_r),an=f(It);le(an,()=>(H(y),x(()=>y.VOLUME)));var Ot=w(It,2),gr=f(Ot),on=f(gr),Wt=w(on,2);qn(Ot,ye=>g(_e,ye),()=>s(_e)),Zt(()=>R("click",O,()=>ns.set(!0))),Ni(O,(ye,Je)=>Ji?.(ye,Je),()=>500),Zt(()=>R("longpress",O,L)),oe(()=>{Ze(ie,`width: ${s(E)??""}%; transition: ${s(P)?"width 0.25s linear":"none"}`),fe=je(se,1,"progress-bar svelte-1jla3sy",null,fe,{radio:s(v)}),Ze(Q,`width: ${s(E)??""}%; transition: ${s(P)?"width 0.25s linear":"none"}`),pt(me,"title",s(p)),ce(De,s(p)),pt(Me,"title",s(k)),ce(be,s(k)),ke=je(Ie,1,"btn-icon desktop svelte-1jla3sy",null,ke,{liked:s(m)}),Ze(on,`width: ${n(),x(()=>n().volume)??""}%`),Ze(Wt,`left: ${n(),x(()=>n().volume)??""}%`)}),R("mouseenter",se,()=>g(Z,!0)),R("mouseleave",se,()=>g(Z,!1)),R("mousedown",se,Bt(B)),R("click",se,Bt(function(ye){Cr.call(this,t,ye)})),R("click",Le,$),R("click",Ie,function(...ye){s(he)?.apply(this,ye)}),R("click",Ue,function(...ye){s(xe)?.apply(this,ye)}),R("click",Ge,function(...ye){s(ft)?.apply(this,ye)}),R("click",kt,function(...ye){s(At)?.apply(this,ye)}),R("mousedown",Ot,Bt(T)),R("click",Ot,Bt(function(ye){Cr.call(this,t,ye)})),b(C,O)};j(U,C=>{o()||C(V)})}b(e,F),vt(),u()}var zd=M('<div class="drag-zone svelte-1olwzt8"><div class="drag-handle-icon svelte-1olwzt8"><!></div></div>'),Nd=M('<div slot="fallback" class="icon-fallback svelte-1olwzt8"><!></div>'),Id=M('<span class="meta-tag quality"> </span>'),Od=M('<span class="dot svelte-1olwzt8"></span>'),Dd=M("<button><!> <!></button>"),Fd=M('<div style="width: 44px;"></div>'),Bd=M('<div><!> <div class="bg-container svelte-1olwzt8"><div class="bg-gradient-fallback svelte-1olwzt8"></div> <img class="bg-img svelte-1olwzt8" alt="" loading="eager"/> <div class="bg-overlay svelte-1olwzt8"></div></div> <div class="player-body svelte-1olwzt8"><div class="art-container svelte-1olwzt8"><div class="artwork svelte-1olwzt8"><!></div></div> <div class="controls-area svelte-1olwzt8"><div class="meta svelte-1olwzt8"><h1 class="title text-ellipsis svelte-1olwzt8"> </h1> <div class="artist-row svelte-1olwzt8"><h2 class="artist text-ellipsis svelte-1olwzt8"> </h2> <!></div></div> <div class="progress-section"><div><div class="common-track svelte-1olwzt8"><div class="common-fill svelte-1olwzt8"><div class="common-knob svelte-1olwzt8"></div></div></div></div> <div class="time-row svelte-1olwzt8"><span> </span> <span> </span></div></div> <div class="buttons-row svelte-1olwzt8"><button><!></button> <button class="btn-icon side-btn svelte-1olwzt8"><!></button> <button class="play-btn-large flex-center svelte-1olwzt8"><!></button> <button class="btn-icon side-btn svelte-1olwzt8"><!></button> <!></div> <div class="volume-row svelte-1olwzt8"><div class="vol-icon svelte-1olwzt8"><!></div> <div class="volume-hit-area svelte-1olwzt8"><div class="common-track svelte-1olwzt8"><div class="common-fill svelte-1olwzt8"></div> <div class="common-knob svelte-1olwzt8"></div></div></div></div></div></div></div>');function Qa(e,t){dt(t,!1);const n=()=>ge(Vt,"$currentSong",o),r=()=>ge($n,"$stations",o),a=()=>ge(it,"$status",o),i=()=>ge(kn,"$favorites",o),[o,c]=$t(),u=S(),l=S(),d=S(),h=S(),v=S(),p=S(),k=S(),m=S(),_=S(),E=S(),P=S();let K=at(t,"isDocked",8,!1),ae=0,Z=S(0),J=S(!1);function de(){ns.set(!1)}function Y(re){if(K())return;const Te=re.target;Te.closest(".bar-hit-area")||Te.closest(".volume-hit-area")||(ae=re.touches[0].clientY,g(J,!0))}function ve(re){if(!s(J)||K())return;const Te=re.touches[0].clientY-ae;Te>0&&(re.cancelable&&Te>10&&re.preventDefault(),g(Z,Te))}function _e(){K()||(g(J,!1),s(Z)>150?de():g(Z,0))}let ee=S(!1),I=S(0),A=S();function B(re){const Te=Math.floor(re/60)||0,tt=Math.floor(re%60)||0;return`${Te}:${tt.toString().padStart(2,"0")}`}function D(re,Te){const tt=Te.getBoundingClientRect(),Qt=re.touches?re.touches[0].clientX:re.clientX;return Math.max(0,Math.min(1,(Qt-tt.left)/tt.width))}function W(re){s(h)||(g(ee,!0),g(I,D(re,s(A))))}function T(re){s(ee)&&g(I,D(re,s(A)))}function z(){s(ee)&&!s(h)&&fa(s(I)*s(l)),g(ee,!1)}let $=!1,L=S();function F(re){$=!0;const Te=Math.round(D(re,s(L))*100);Lr(Te),window.addEventListener("mousemove",U),window.addEventListener("mouseup",V),window.addEventListener("touchmove",U,{passive:!1}),window.addEventListener("touchend",V)}function U(re){if($){re.preventDefault();const Te=Math.round(D(re,s(L))*100);Lr(Te)}}function V(){$=!1,window.removeEventListener("mousemove",U),window.removeEventListener("mouseup",V),window.removeEventListener("touchmove",U),window.removeEventListener("touchend",V)}function C(){const re=(s(m)+1)%3;re===0?(a().random&&In(),a().repeat&&On()):re===1?(a().random||In(),a().repeat&&On()):re===2&&(a().random&&In(),a().repeat||On())}te(()=>(n(),r()),()=>{g(u,ur(n(),r(),n().stationName))}),te(()=>a(),()=>{g(l,a().duration||1)}),te(()=>a(),()=>{g(d,a().elapsed||0)}),te(()=>n(),()=>{g(h,n().file?.startsWith("http"))}),te(()=>a(),()=>{g(v,a().state==="play")}),te(()=>(s(v),s(ee),s(h)),()=>{g(p,s(v)&&!s(ee)&&!s(h))}),te(()=>(s(h),s(ee),s(I),s(d),s(l)),()=>{g(k,s(h)?0:s(ee)?s(I)*100:s(d)/s(l)*100)}),te(()=>a(),()=>{g(m,a().repeat?2:a().random?1:0)}),te(()=>a(),()=>{g(_,a().bitrate?`${a().bitrate} kbps`:a().format||"")}),te(()=>(n(),i()),()=>{g(E,n().file&&i().has(n().file))}),te(()=>H(K()),()=>{g(P,K()?"8px":"var(--radius-xl)")}),Yt(),_t();var O=Bd();let ie;var se=f(O);{var fe=re=>{var Te=zd(),tt=f(Te),Qt=f(tt);le(Qt,()=>(H(y),x(()=>y.CHEVRON_DOWN))),R("touchstart",Te,Y),R("touchmove",Te,ve),R("touchend",Te,_e),R("click",Te,de),b(re,Te)};j(se,re=>{K()||re(fe)})}var Q=w(se,2),N=w(f(Q),2),q=w(Q,2),X=f(q),ne=f(X),G=f(ne);Un(G,{get src(){return s(u)},alt:"Cover",get radius(){return s(P)},$$slots:{fallback:(re,Te)=>{var tt=Nd(),Qt=f(tt);le(Qt,()=>(s(h),H(y),x(()=>s(h)?y.RADIO:y.ALBUMS))),b(re,tt)}}});var ue=w(X,2),pe=f(ue),Ee=f(pe),Ae=f(Ee),Ce=w(Ee,2),me=f(Ce),De=f(me),Le=w(me,2);{var Be=re=>{var Te=Id(),tt=f(Te);oe(()=>ce(tt,s(_))),b(re,Te)};j(Le,re=>{s(_)&&re(Be)})}var Ye=w(pe,2),Me=f(Ye);let be;var ze=f(Me),Se=f(ze);qn(Me,re=>g(A,re),()=>s(A));var Pe=w(Me,2),Ie=f(Pe),he=f(Ie),ke=w(Ie,2),Re=f(ke),Ue=w(Ye,2),xe=f(Ue);let Ve;var Ge=f(xe);le(Ge,()=>(s(E),H(y),x(()=>s(E)?y.HEART_FILLED:y.HEART)));var ft=w(xe,2),rn=f(ft);le(rn,()=>(H(y),x(()=>y.PREVIOUS)));var kt=w(ft,2),At=f(kt);le(At,()=>(a(),H(y),x(()=>a().state==="play"?y.PAUSE:y.PLAY)));var nt=w(kt,2),xt=f(nt);le(xt,()=>(H(y),x(()=>y.NEXT)));var sn=w(nt,2);{var _r=re=>{var Te=Dd();let tt;var Qt=f(Te);{var bs=rt=>{var Dt=Xe(),ks=$e(Dt);le(ks,()=>(H(y),x(()=>y.REPEAT))),b(rt,Dt)},ws=rt=>{var Dt=Xe(),ks=$e(Dt);le(ks,()=>(H(y),x(()=>y.SHUFFLE))),b(rt,Dt)};j(Qt,rt=>{s(m)===2?rt(bs):rt(ws,!1)})}var ys=w(Qt,2);{var gt=rt=>{var Dt=Od();b(rt,Dt)};j(ys,rt=>{s(m)>0&&rt(gt)})}oe(()=>tt=je(Te,1,"btn-icon side-btn mode-btn svelte-1olwzt8",null,tt,{active:s(m)>0})),R("click",Te,C),b(re,Te)},It=re=>{var Te=Fd();b(re,Te)};j(sn,re=>{s(h)?re(It,!1):re(_r)})}var an=w(Ue,2),Ot=f(an),gr=f(Ot);le(gr,()=>(H(y),x(()=>y.VOLUME)));var on=w(Ot,2),Wt=f(on),ye=f(Wt),Je=w(ye,2);qn(on,re=>g(L,re),()=>s(L)),oe((re,Te)=>{ie=je(O,1,"full-player svelte-1olwzt8",null,ie,{"is-docked":K()}),Ze(O,K()?"":`transform: translateY(${s(Z)}px); transition: ${s(J)?"none":"transform 0.3s cubic-bezier(0.2, 0.8, 0.2, 1)"}`),pt(N,"src",s(u)),Ze(ne,`transform: scale(${1-s(Z)/3e3})`),Ze(ue,`opacity: ${1-s(Z)/400}`),ce(Ae,(n(),x(()=>n().title||"Not Playing"))),ce(De,(n(),x(()=>n().stationName||n().artist||"Moode Audio"))),be=je(Me,1,"bar-hit-area svelte-1olwzt8",null,be,{"is-docked-bar":K()}),Ze(Se,`width: ${s(k)??""}%; transition: ${s(p)?"width 0.3s linear":"none"}`),ce(he,re),ce(Re,Te),Ve=je(xe,1,"btn-icon side-btn svelte-1olwzt8",null,Ve,{liked:s(E)}),Ze(ye,`width: ${a(),x(()=>a().volume)??""}%`),Ze(Je,`left: ${a(),x(()=>a().volume)??""}%; right: auto;`)},[()=>(s(ee),s(I),s(l),s(d),x(()=>s(ee)?B(s(I)*s(l)):B(s(d)))),()=>(s(h),s(l),x(()=>s(h)?"LIVE":B(s(l))))]),R("mousedown",Me,W),R("touchstart",Me,W,void 0,!0),R("mousemove",Me,function(...re){(s(ee)?T:null)?.apply(this,re)}),R("touchmove",Me,function(...re){(s(ee)?T:null)?.apply(this,re)},void 0,!0),R("mouseup",Me,z),R("touchend",Me,z),R("click",xe,()=>Hn.toggleFavorite(n())),R("click",ft,()=>zr("previous")),R("click",kt,function(...re){ps?.apply(this,re)}),R("click",nt,()=>zr("next")),R("mousedown",on,Bt(F)),R("touchstart",on,Bt(F)),yt(3,O,()=>Fi,()=>({y:K()?0:800,duration:300,opacity:1})),b(e,O),vt(),c()}const jd="/assets/wave-logo-C1390byt.svg",Gs={async syncLibrary(){if(Oe(Ft))return;Ft.set(!0);const e=new Hi,t=window.location.origin+"/wave-api.php";e.postMessage({type:"START_SYNC",payload:{url:t}}),e.onmessage=n=>{const{type:r,status:a,count:i,message:o}=n.data;if(r==="PROGRESS"){const c={connecting:"Requesting library...",downloading:"Downloading data...",parsing:"Processing metadata...",saving:`Saving ${i} tracks...`};c[a]&&He(c[a],"info")}r==="DONE"&&(He(`Library updated: ${i} tracks`,"success"),Ft.set(!1),e.terminate()),r==="ERROR"&&(console.error("[API] Sync Error:",o),He(`Sync Failed: ${o}`,"error"),Ft.set(!1),e.terminate())},e.onerror=n=>{console.error("[API] Worker crash:",n),He("Sync worker crashed","error"),Ft.set(!1),e.terminate()}},async loadRadioStations(){if(!Oe(Yr)){Yr.set(!0);try{const t=await fetch(Tc.STATIONS(!1));if(!t.ok)throw new Error("Network error");const n=await t.json();if(n.error)throw new Error(n.error);if(!Array.isArray(n))throw new Error("Invalid response format");const r=n.map(a=>({id:a.id,name:a.name,file:a.station,station:a.station,image:a.logo,genre:a.genre||"Radio"}));r.sort((a,i)=>a.name.localeCompare(i.name,void 0,{sensitivity:"base"})),$n.set(r)}catch(e){console.error("[API] Failed to load stations",e),He("Failed to load radio","error")}finally{Yr.set(!1)}}}};var qd=M('<div class="backdrop svelte-ji5owg"></div>'),Ud=M('<button><span class="icon svelte-ji5owg"><!></span> <span> </span></button>'),Hd=M('<!> <aside><div class="header svelte-ji5owg"><div class="header-inner svelte-ji5owg"><button class="collapse-btn svelte-ji5owg"><div class="chevron svelte-ji5owg"><!></div></button> <div><img alt="Logo" class="logo svelte-ji5owg"/></div></div> <button class="btn-icon mobile-close svelte-ji5owg"><!></button></div> <div class="scroll-area custom-scrollbar svelte-ji5owg"><nav class="svelte-ji5owg"><!> <button title="Search"><span class="icon svelte-ji5owg"><!></span> <span>Search</span></button> <div class="sep svelte-ji5owg"></div> <button class="nav-item sync svelte-ji5owg" title="Update Library"><span><!></span> <span> </span></button> <div><div class="settings svelte-ji5owg"><div class="row svelte-ji5owg"><input type="text" placeholder="192.168..." class="svelte-ji5owg"/> <button class="save svelte-ji5owg">OK</button></div></div></div></nav> <div class="footer svelte-ji5owg"><div>Moode WaveUI</div></div></div></aside>',1);function Vd(e,t){dt(t,!1);const n=()=>ge(Ft,"$isSyncingLibrary",i),r=()=>ge(Ws,"$isSidebarCollapsed",i),a=()=>ge(Mt,"$activeMenuTab",i),[i,o]=$t(),c=S();let u=at(t,"isOpen",8,!1);const l=la();let d=S(0),h=S(0),v=S(!1);const p=[{id:"queue",label:"Queue",icon:y.MENU},{id:"favorites",label:"Favorites",icon:y.HEART},{id:"artists",label:"Artists",icon:y.ARTISTS},{id:"albums",label:"Albums",icon:y.ALBUMS},{id:"playlists",label:"Playlists",icon:y.PLAYLISTS},{id:"radio",label:"Radio",icon:y.RADIO}];let k=S(Pr.MOODE_IP);function m(be){window.location.hash=`/${be}`,l("close")}async function _(){n()||(await Gs.syncLibrary(),window.location.hash="/artists")}function E(){Ws.update(be=>!be)}function P(be){u()&&(g(d,be.touches[0].clientX),g(h,s(d)),g(v,!0))}function K(be){s(v)&&g(h,be.touches[0].clientX)}function ae(){s(v)&&(s(h)-s(d)<-70&&l("close"),g(v,!1),g(d,0),g(h,0))}te(()=>(s(v),s(h),s(d)),()=>{g(c,s(v)?Math.min(0,s(h)-s(d)):0)}),Yt(),_t();var Z=Hd(),J=$e(Z);{var de=be=>{var ze=qd();R("click",ze,()=>l("close")),yt(3,ze,()=>_n,()=>({duration:200})),b(be,ze)};j(J,be=>{u()&&be(de)})}var Y=w(J,2);let ve,_e;var ee=f(Y),I=f(ee),A=f(I),B=f(A),D=f(B);le(D,()=>(H(y),x(()=>y.BACK)));var W=w(A,2);let T;var z=f(W),$=w(I,2),L=f($);le(L,()=>(H(y),x(()=>y.CLOSE)));var F=w(ee,2),U=f(F),V=f(U);Nt(V,1,()=>p,pn,(be,ze)=>{var Se=Ud();let Pe;var Ie=f(Se),he=f(Ie);le(he,()=>(s(ze),x(()=>s(ze).icon)));var ke=w(Ie,2);let Re;var Ue=f(ke);oe(()=>{Pe=je(Se,1,"nav-item svelte-ji5owg",null,Pe,{active:a()===s(ze).id}),pt(Se,"title",(s(ze),x(()=>s(ze).label))),Re=je(ke,1,"label-text svelte-ji5owg",null,Re,{hidden:r()}),ce(Ue,(s(ze),x(()=>s(ze).label)))}),R("click",Se,()=>m(s(ze).id)),b(be,Se)});var C=w(V,2);let O;var ie=f(C),se=f(ie);le(se,()=>(H(y),x(()=>y.SEARCH)));var fe=w(ie,2);let Q;var N=w(C,4),q=f(N);let X;var ne=f(q);le(ne,()=>(H(y),x(()=>y.SYNC)));var G=w(q,2);let ue;var pe=f(G),Ee=w(N,2);let Ae;var Ce=f(Ee),me=f(Ce),De=f(me),Le=w(De,2),Be=w(U,2),Ye=f(Be);let Me;oe(()=>{ve=je(Y,1,"side-menu svelte-ji5owg",null,ve,{"mobile-open":u(),collapsed:r()}),_e=Ze(Y,"",_e,{transform:u()?`translateX(${s(c)}px)`:"",transition:s(v)?"none":"width 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.3s ease"}),pt(A,"title",r()?"Expand":"Collapse"),Ze(B,`transform: rotate(${r()?"180deg":"0deg"})`),T=je(W,1,"logo-wrapper svelte-ji5owg",null,T,{hidden:r()}),pt(z,"src",jd),O=je(C,1,"nav-item svelte-ji5owg",null,O,{active:a()==="search"}),Q=je(fe,1,"label-text svelte-ji5owg",null,Q,{hidden:r()}),N.disabled=n(),X=je(q,1,"icon svelte-ji5owg",null,X,{spin:n()}),ue=je(G,1,"label-text svelte-ji5owg",null,ue,{hidden:r()}),ce(pe,n()?"Syncing...":"Update Library"),Ae=je(Ee,1,"settings-wrapper svelte-ji5owg",null,Ae,{hidden:r()}),Me=je(Ye,1,"footer-text svelte-ji5owg",null,Me,{hidden:r()})}),R("click",A,E),R("click",$,()=>l("close")),R("click",C,()=>m("search")),R("click",N,_),hs(De,()=>s(k),be=>g(k,be)),R("click",Le,()=>{Pr.setMoodeIp(s(k)),location.reload()}),R("touchstart",Y,P),R("touchmove",Y,K),R("touchend",Y,ae),b(e,Z),vt(),o()}var Yd=M('<span class="meta-tag"> </span>'),Wd=M('<div slot="header" class="content-padded svelte-185fgrr"><div class="view-header svelte-185fgrr"><div class="header-art svelte-185fgrr" style="background: var(--c-surface-active);"><div class="header-icon-wrap svelte-185fgrr"><!></div></div> <div class="header-info svelte-185fgrr"><div class="header-text-group svelte-185fgrr"><div class="header-label svelte-185fgrr">Now Playing</div> <h1 class="header-title svelte-185fgrr">Current Queue</h1> <div class="meta-badges"><span class="meta-tag"> </span> <!></div></div> <div class="header-actions svelte-185fgrr"><button class="btn-secondary svelte-185fgrr" title="Clear Queue">Clear</button> <button class="btn-action svelte-185fgrr" title="Save Queue"><!></button> <button><!></button></div></div></div></div>'),Qd=M('<div slot="row"><!></div>'),Kd=M('<div class="view-container svelte-185fgrr"><!></div>');function Xd(e,t){dt(t,!1);const n=()=>ge(sr,"$queue",r),[r,a]=$t();let i=S(!1),o=S("");function c(){g(i,!s(i))}function u(m){s(i)||as(`play ${m}`)}function l(m){qt.removeFromQueue(m)}async function d(){ts({title:"Save Playlist",message:"Enter a name for this playlist:",type:"prompt",placeholder:"Playlist Name",confirmLabel:"Save",onConfirm:async m=>{m&&m.trim().length>0&&(await qt.saveQueue(m),ha())}})}function h(){n().length!==0&&ts({title:"Clear Queue",message:"Are you sure you want to clear the entire play queue?",confirmLabel:"Clear All",type:"confirm",onConfirm:async()=>{sr.set([]),Vt.set({title:"Not Playing",artist:"",album:"",file:"",stationName:null,id:null,pos:null}),it.update(m=>({...m,state:"stop",song:-1,songid:-1,elapsed:0})),await as("clear")}})}function v(m,_){qt.moveTrack(m,_)}te(()=>n(),()=>{if(n().length>=0){const m=n().reduce((_,E)=>_+(parseFloat(E.time)||0),0);if(m>0){const _=Math.floor(m/3600),E=Math.floor(m%3600/60);_>0?g(o,`${_} hr ${E} min`):g(o,`${E} min`)}else g(o,"")}}),Yt(),_t();var p=Kd(),k=f(p);ms(k,{get itemsStore(){return sr},get isEditMode(){return s(i)},emptyText:"Queue is empty",onMoveItem:v,$$slots:{header:(m,_)=>{var E=Wd(),P=f(E),K=f(P),ae=f(K),Z=f(ae);le(Z,()=>(H(y),x(()=>y.MENU)));var J=w(K,2),de=f(J),Y=w(f(de),4),ve=f(Y),_e=f(ve),ee=w(ve,2);{var I=L=>{var F=Yd(),U=f(F);oe(()=>ce(U,s(o))),b(L,F)};j(ee,L=>{s(o)&&L(I)})}var A=w(de,2),B=f(A),D=w(B,2),W=f(D);le(W,()=>(H(y),x(()=>y.SAVE)));var T=w(D,2);let z;var $=f(T);le($,()=>(s(i),H(y),x(()=>s(i)?y.ACCEPT:y.EDIT))),oe(()=>{ce(_e,`${n(),x(()=>n().length)??""} tracks`),B.disabled=(n(),x(()=>n().length===0)),D.disabled=(n(),x(()=>n().length===0)),z=je(T,1,"btn-action svelte-185fgrr",null,z,{active:s(i)}),pt(T,"title",s(i)?"Finish Editing":"Edit Queue"),T.disabled=(n(),x(()=>n().length===0))}),R("click",B,h),R("click",D,d),R("click",T,c),b(m,E)},row:(m,_)=>{var E=Qd();const P=et(()=>_.item),K=et(()=>_.index),ae=et(()=>_.startDrag);var Z=f(E);gs(Z,{get track(){return s(P)},get index(){return s(K)},get isEditable(){return s(i)},$$events:{play:()=>u(s(K)),remove:()=>l(s(K)),startdrag(...J){s(ae)?.apply(this,J)}}}),b(m,E)}}}),b(e,p),vt(),a()}var Gd=M('<div class="toast-container svelte-k2bvk7"><div> </div></div>'),Zd=M('<button class="back-btn svelte-k2bvk7"><span class="icon-inline svelte-k2bvk7"><!></span> Back</button>'),Jd=M('<div class="view-title svelte-k2bvk7"><!></div>'),ev=M('<div class="full-player-modal svelte-k2bvk7"><!></div>'),tv=M('<div class="app-container svelte-k2bvk7"><div class="app-layout svelte-k2bvk7"><!> <!> <main class="content-area svelte-k2bvk7"><header class="top-bar svelte-k2bvk7"><button class="hamburger-btn svelte-k2bvk7"><!></button> <!></header> <div class="scroll-container svelte-k2bvk7"><div class="view-wrapper svelte-k2bvk7"><!></div></div></main> <div class="docked-player-container svelte-k2bvk7"><!></div></div> <div class="mini-player-wrapper svelte-k2bvk7"><!></div></div> <!>',1);function nv(e,t){dt(t,!1);const n=()=>ge(Lt,"$navigationStack",o),r=()=>ge(Hs,"$toastMessage",o),a=()=>ge(Mt,"$activeMenuTab",o),i=()=>ge(ns,"$isFullPlayerOpen",o),[o,c]=$t();let u=S(!1);pr(()=>{window.history.replaceState({depth:n().length},"","");const T=()=>void 0;return window.addEventListener("popstate",T),()=>window.removeEventListener("popstate",T)}),_t();var l=tv(),d=$e(l),h=f(d),v=f(h);{var p=T=>{var z=Gd(),$=f(z),L=f($);oe(()=>{je($,1,`toast-body ${r().type??""}`,"svelte-k2bvk7"),ce(L,r().text)}),yt(3,z,()=>Fi,()=>({y:-50,duration:300})),b(T,z)};j(v,T=>{r()&&T(p)})}var k=w(v,2);Vd(k,{get isOpen(){return s(u)},$$events:{close:()=>g(u,!1)}});var m=w(k,2),_=f(m),E=f(_),P=f(E);le(P,()=>y.MENU);var K=w(E,2);{var ae=T=>{var z=Zd(),$=f(z),L=f($);le(L,()=>y.BACK),R("click",z,function(...F){Sc?.apply(this,F)}),b(T,z)},Z=T=>{var z=Jd(),$=f(z);{var L=U=>{var V=Kn("Radio");b(U,V)},F=U=>{var V=Xe(),C=$e(V);{var O=se=>{var fe=Kn("Playlists");b(se,fe)},ie=se=>{var fe=Xe(),Q=$e(fe);{var N=X=>{var ne=Kn("Search");b(X,ne)},q=X=>{var ne=Xe(),G=$e(ne);{var ue=Ee=>{var Ae=Kn("Queue");b(Ee,Ae)},pe=Ee=>{var Ae=Xe(),Ce=$e(Ae);{var me=Le=>{var Be=Kn("Favorites");b(Le,Be)},De=Le=>{var Be=Kn();oe(Ye=>ce(Be,Ye),[()=>(a()||"Library").charAt(0).toUpperCase()+(a()||"library").slice(1)]),b(Le,Be)};j(Ce,Le=>{a()==="favorites"?Le(me):Le(De,!1)},!0)}b(Ee,Ae)};j(G,Ee=>{a()==="queue"?Ee(ue):Ee(pe,!1)},!0)}b(X,ne)};j(Q,X=>{a()==="search"?X(N):X(q,!1)},!0)}b(se,fe)};j(C,se=>{a()==="playlists"?se(O):se(ie,!1)},!0)}b(U,V)};j($,U=>{a()==="radio"?U(L):U(F,!1)})}b(T,z)};j(K,T=>{n().length>1?T(ae):T(Z,!1)})}var J=w(_,2),de=f(J),Y=f(de);{var ve=T=>{Gu(T,{})},_e=T=>{var z=Xe(),$=$e(z);{var L=U=>{Xd(U,{})},F=U=>{var V=Xe(),C=$e(V);{var O=se=>{cd(se,{})},ie=se=>{var fe=Xe(),Q=$e(fe);{var N=X=>{Ed(X,{})},q=X=>{Du(X,{get activeCategory(){return a()}})};j(Q,X=>{a()==="search"?X(N):X(q,!1)},!0)}b(se,fe)};j(C,se=>{a()==="playlists"||a()==="favorites"?se(O):se(ie,!1)},!0)}b(U,V)};j($,U=>{a()==="queue"?U(L):U(F,!1)},!0)}b(T,z)};j(Y,T=>{a()==="radio"?T(ve):T(_e,!1)})}var ee=w(m,2),I=f(ee);Qa(I,{isDocked:!0});var A=w(h,2),B=f(A);Ld(B,{});var D=w(d,2);{var W=T=>{var z=ev(),$=f(z);Qa($,{}),b(T,z)};j(D,T=>{i()&&T(W)})}oe(()=>Ze(J,`padding-bottom: ${i()?"0px":"var(--mini-player-height)"};`)),R("click",E,()=>g(u,!0)),b(e,l),vt(),c()}var rv=M('<button class="back-btn-area svelte-l8h85k"><span class="back-icon svelte-l8h85k"><!></span></button> <span class="header-title svelte-l8h85k">Select Playlist</span>',1),sv=M('<div class="track-info svelte-l8h85k"><div class="title text-ellipsis svelte-l8h85k"> </div> <div class="artist text-ellipsis svelte-l8h85k"> </div></div>'),av=M('<button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span> </span></button>'),iv=M('<div class="empty-msg svelte-l8h85k">No custom playlists</div>'),ov=M("<!> <!>",1),lv=M('<button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Go to Album</span></button> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Go to Artist</span></button>',1),cv=M('<div class="sep svelte-l8h85k"></div> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Remove from Playlist</span></button>',1),uv=M('<div class="sep svelte-l8h85k"></div> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Remove from Queue</span></button>',1),dv=M('<button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Play Next</span></button> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Add to Queue</span></button> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Add to Playlist...</span></button> <!> <button class="menu-row svelte-l8h85k"><span><!></span> <span> </span></button> <!> <!>',1),vv=M('<div class="backdrop svelte-l8h85k"><div class="menu-card svelte-l8h85k"><div class="menu-header svelte-l8h85k"><!></div> <div class="menu-items scroll-y svelte-l8h85k"><!></div></div></div>');function fv(e,t){dt(t,!1);const n=()=>ge(da,"$contextMenu",i),r=()=>ge(kn,"$favorites",i),a=()=>ge(ua,"$playlists",i),[i,o]=$t(),c=S(),u=S(),l=S(),d=S(),h=S(),v=S();let p=S(),k=S(),m=S(),_=S(0),E=S(0),P=S("main"),K=S(!1);function ae($){n().isOpen&&(g(K,!1),Kt())}function Z(){Kt()}function J(){n().track&&qt.playNext(n().track.file),Kt()}function de(){n().track&&qt.addToQueue(n().track.file),Kt()}function Y(){n().track&&Hn.toggleFavorite(n().track),Kt()}function ve(){const $=n().track;$&&$.album&&Sn("tracks_by_album",{name:$.album,artist:$.artist}),Kt()}function _e(){const $=n().track;$&&$.artist&&Sn("albums_by_artist",{name:$.artist}),Kt()}async function ee(){const{playlistName:$,index:L}=n().context;$&&L!==null&&(nr.update(F=>{const U=[...F];return U.splice(L,1),U}),await Hn.removeFromPlaylist($,L)),Kt()}function I(){const{index:$}=n().context;$!=null&&qt.removeFromQueue($),Kt()}function A(){g(P,"playlists")}function B(){g(P,"main")}async function D($){const L=n().track;if(L)try{const F=$.replace(/"/g,'\\"'),U=L.file.replace(/"/g,'\\"');await we.send(`playlistadd "${F}" "${U}"`),He(`Added to "${$}"`,"success"),Kt()}catch(F){console.error(F),He("Failed to add","error")}}te(()=>n(),()=>{n().isOpen&&g(P,"main")}),te(()=>(n(),s(K)),()=>{n().isOpen?!s(K)&&typeof history<"u"&&(history.pushState({contextMenuOpen:!0},""),g(K,!0)):s(K)&&typeof history<"u"&&(history.back(),g(K,!1))}),te(()=>(n(),r()),()=>{g(c,n().track&&r().has(n().track.file))}),te(()=>n(),()=>{g(u,n().track&&(n().track.file.includes("http")||n().track.file.includes("://")))}),te(()=>n(),()=>{g(l,n().context?.type==="playlist")}),te(()=>n(),()=>{g(d,n().context?.type==="queue")}),te(()=>n(),()=>{g(h,n().context?.source==="miniplayer")}),te(()=>(n(),s(E),s(_),s(p),s(h),s(k)),()=>{g(v,(()=>{if(!n().isOpen)return"";const $=n().triggerRect,L=n().x,F=n().y,U=s(E)||220,V=s(_)||320;if(s(p)<=768&&s(h)&&$)return`
        position: fixed; 
        bottom: ${s(k)-$.top}px; 
        left: 50%; 
        transform: translateX(-50%); 
        margin: 0; 
        transform-origin: bottom center;
      `;let C=0,O=0,ie="top left";if($){const fe=$.left+$.width/2,Q=$.top+$.height/2,N=fe>s(p)/2,q=Q>s(k)/2;N?(C=$.right-U,ie=q?"bottom right":"top right"):(C=$.left,ie=q?"bottom left":"top left"),q?O=$.top-V:O=$.bottom}else C=L,O=F,C+U>s(p)&&(C=s(p)-U-10),O+V>s(k)&&(O=s(k)-V-10);const se=8;return C<se&&(C=se),C+U>s(p)-se&&(C=s(p)-U-se),O<se&&(O=se),O+V>s(k)-se&&(O=s(k)-V-se),`position: fixed; top: ${O}px; left: ${C}px; margin: 0; transform-origin: ${ie};`})())}),Yt(),_t();var W=Xe();R("popstate",wn,ae);var T=$e(W);{var z=$=>{var L=vv(),F=f(L),U=f(F),V=f(U);{var C=N=>{var q=rv(),X=$e(q),ne=f(X),G=f(ne);le(G,()=>(H(y),x(()=>y.BACK))),R("click",X,B),b(N,q)},O=N=>{var q=sv(),X=f(q),ne=f(X),G=w(X,2),ue=f(G);oe(()=>{ce(ne,(n(),x(()=>n().track.title))),ce(ue,(n(),x(()=>n().track.artist)))}),b(N,q)};j(V,N=>{s(P)==="playlists"?N(C):N(O,!1)})}var ie=w(U,2),se=f(ie);{var fe=N=>{var q=ov(),X=$e(q);Nt(X,1,a,pn,(ue,pe)=>{var Ee=Xe(),Ae=$e(Ee);{var Ce=me=>{var De=av(),Le=f(De),Be=f(Le);le(Be,()=>(H(y),x(()=>y.PLAYLISTS)));var Ye=w(Le,2),Me=f(Ye);oe(()=>ce(Me,(s(pe),x(()=>s(pe).name)))),R("click",De,()=>D(s(pe).name)),b(me,De)};j(Ae,me=>{s(pe),x(()=>s(pe).name!=="Favorites")&&me(Ce)})}b(ue,Ee)});var ne=w(X,2);{var G=ue=>{var pe=iv();b(ue,pe)};j(ne,ue=>{a(),x(()=>a().filter(pe=>pe.name!=="Favorites").length===0)&&ue(G)})}b(N,q)},Q=N=>{var q=dv(),X=$e(q),ne=f(X),G=f(ne);le(G,()=>(H(y),x(()=>y.NEXT)));var ue=w(X,2),pe=f(ue),Ee=f(pe);le(Ee,()=>(H(y),x(()=>y.MENU)));var Ae=w(ue,2),Ce=f(Ae),me=f(Ce);le(me,()=>(H(y),x(()=>y.ADD_TO_PLAYLIST||y.ADD)));var De=w(Ae,2);{var Le=Re=>{var Ue=lv(),xe=$e(Ue),Ve=f(xe),Ge=f(Ve);le(Ge,()=>(H(y),x(()=>y.ALBUM_LINK||y.ALBUMS)));var ft=w(xe,2),rn=f(ft),kt=f(rn);le(kt,()=>(H(y),x(()=>y.ARTIST_LINK||y.ARTISTS))),R("click",xe,ve),R("click",ft,_e),b(Re,Ue)};j(De,Re=>{s(u)||Re(Le)})}var Be=w(De,2),Ye=f(Be);let Me;var be=f(Ye);le(be,()=>(s(c),H(y),x(()=>s(c)?y.HEART_FILLED:y.HEART)));var ze=w(Ye,2),Se=f(ze),Pe=w(Be,2);{var Ie=Re=>{var Ue=cv(),xe=w($e(Ue),2),Ve=f(xe),Ge=f(Ve);le(Ge,()=>(H(y),x(()=>y.REMOVE))),R("click",xe,ee),b(Re,Ue)};j(Pe,Re=>{s(l)&&Re(Ie)})}var he=w(Pe,2);{var ke=Re=>{var Ue=uv(),xe=w($e(Ue),2),Ve=f(xe),Ge=f(Ve);le(Ge,()=>(H(y),x(()=>y.REMOVE))),R("click",xe,I),b(Re,Ue)};j(he,Re=>{s(d)&&Re(ke)})}oe(()=>{Me=je(Ye,1,"icon svelte-l8h85k",null,Me,{liked:s(c)}),ce(Se,s(c)?"Unlike":"Like")}),R("click",X,J),R("click",ue,de),R("click",Ae,A),R("click",Be,Y),b(N,q)};j(se,N=>{s(P)==="playlists"?N(fe):N(Q,!1)})}qn(F,N=>g(m,N),()=>s(m)),oe(()=>Ze(F,s(v))),Aa(F,"clientHeight",N=>g(_,N)),Aa(F,"clientWidth",N=>g(E,N)),yt(3,F,()=>ca,()=>({start:.95,duration:100})),R("click",F,Bt(function(N){Cr.call(this,t,N)})),R("click",L,Z),yt(3,L,()=>_n,()=>({duration:100})),b($,L)};j(T,$=>{n(),x(()=>n().isOpen)&&$(z)})}Pa("innerWidth",$=>g(p,$)),Pa("innerHeight",$=>g(k,$)),b(e,W),vt(),o()}var hv=M('<div class="input-wrapper svelte-1bxxaoh"><input type="text" class="modal-input svelte-1bxxaoh" autoFocus/></div>'),pv=M('<button class="btn cancel svelte-1bxxaoh"> </button>'),_v=M('<div class="backdrop svelte-1bxxaoh"><div class="modal-card svelte-1bxxaoh"><div class="modal-header svelte-1bxxaoh"><span class="modal-title svelte-1bxxaoh"> </span></div> <div class="modal-body svelte-1bxxaoh"><p class="modal-message svelte-1bxxaoh"> </p> <!></div> <div class="modal-actions svelte-1bxxaoh"><!> <button class="btn confirm svelte-1bxxaoh"> </button></div></div></div>');function gv(e,t){dt(t,!1);const n=()=>ge(es,"$modal",r),[r,a]=$t();function i(){n().onConfirm&&(n().type==="prompt"?n().onConfirm(n().inputValue):n().onConfirm()),Ls()}function o(){Ls()}function c(h){h.key==="Enter"&&i()}_t();var u=Xe(),l=$e(u);{var d=h=>{var v=_v(),p=f(v),k=f(p),m=f(k),_=f(m),E=w(k,2),P=f(E),K=f(P),ae=w(P,2);{var Z=ee=>{var I=hv(),A=f(I);oe(()=>pt(A,"placeholder",n().placeholder)),hs(A,()=>n().inputValue,B=>Al(es,x(n).inputValue=B,x(n))),R("keydown",A,c),b(ee,I)};j(ae,ee=>{n().type==="prompt"&&ee(Z)})}var J=w(E,2),de=f(J);{var Y=ee=>{var I=pv(),A=f(I);oe(()=>ce(A,n().cancelLabel)),R("click",I,function(...B){Ls?.apply(this,B)}),b(ee,I)};j(de,ee=>{(n().type==="confirm"||n().type==="prompt")&&ee(Y)})}var ve=w(de,2),_e=f(ve);oe(()=>{ce(_,n().title),ce(K,n().message),ce(_e,n().confirmLabel)}),R("click",ve,i),yt(3,p,()=>ca,()=>({start:.95,duration:200})),R("click",p,Bt(function(ee){Cr.call(this,t,ee)})),R("click",v,o),yt(3,v,()=>_n,()=>({duration:150})),b(h,v)};j(l,h=>{n().isOpen&&h(d)})}b(e,u),vt(),a()}const Ka={init(){this.handleHashChange(),window.addEventListener("hashchange",()=>this.handleHashChange())},handleHashChange(){let e=window.location.hash.slice(1);for(;e.startsWith("/");)e=e.slice(1);if(!e){(Oe(Lt).length>1||Oe(Mt)==="search")&&(this.setRootTab("artists"),window.location.hash="/artists");return}const t=e.split("/").map(decodeURIComponent),n=t[0];let r=Mc();switch(r||t.length>1&&(n==="album"&&t.length>=3?r={artist:t[1],name:t[2]}:n==="artist"&&t.length>=2?r={name:t[1]}:r={name:t[1],displayName:t[1]}),console.log(`[Router] Navigating: ${n}`,r),n){case"queue":this.setRootTab("queue");break;case"radio":this.setRootTab("radio");break;case"playlists":this.setRootTab("playlists");break;case"favorites":Mt.set("favorites"),Lt.set([{view:"root"},{view:"details",data:{name:"Favorites"}}]);break;case"artists":this.setRootTab("artists");break;case"albums":this.setRootTab("albums");break;case"search":Mt.set("search"),t[1]&&Er.set(t[1]),Lt.set([{view:"root"}]);break;case"album":Mt.set("albums"),Lt.set([{view:"root"},{view:"tracks_by_album",data:r}]);break;case"artist":Mt.set("artists"),Lt.set([{view:"root"},{view:"albums_by_artist",data:r}]);break;case"playlist":Mt.set("playlists"),Lt.set([{view:"root"},{view:"details",data:r}]);break;default:this.setRootTab("artists");break}},setRootTab(e){Mt.set(e),Lt.set([{view:"root"}])},updateUrl(e,t){let n="";if(e==="root"){const r=Oe(Mt);if(r==="search"){const a=Oe(Er);n=a?`search/${encodeURIComponent(a)}`:"search"}else n=r}else if(e==="details"){const r=t.name||t;n=r==="Favorites"?"favorites":`playlist/${encodeURIComponent(r)}`}else if(e==="albums_by_artist"){const r=t.name||t;n=`artist/${encodeURIComponent(r)}`}else if(e==="tracks_by_album"){const r=t.name||t,a=t.artist;a?n=`album/${encodeURIComponent(a)}/${encodeURIComponent(r)}`:n=`album/${encodeURIComponent(r)}`}else e==="queue"&&(n="queue");if(n){const r=`#/${n}`;decodeURIComponent(window.location.hash)!==decodeURIComponent(r)&&(window.location.hash=`/${n}`)}}};var mv=M("<!> <!> <!>",1);function bv(e,t){dt(t,!1),pr(async()=>{Ka.init(),Ec((o,c)=>{Ka.updateUrl(o,c)}),Vi(),Gs.loadRadioStations();try{const o=await xn.getArtists();o.length>0?console.log(`[App] Database ready. Loaded ${o.length} artists from cache.`):(console.log("[App] Database empty. Starting initial sync..."),Gs.syncLibrary())}catch(o){console.error("[App] DB Check failed:",o),He("Local DB error. Please update library manually.","error")}}),_t();var n=mv(),r=$e(n);nv(r,{});var a=w(r,2);fv(a,{});var i=w(a,2);gv(i,{}),b(e,n),vt()}ul(bv,{target:document.getElementById("app")});
