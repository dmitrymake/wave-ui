(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function a(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=a(n);fetch(n.href,i)}})();const Xs=!1;var Zr=Array.isArray,To=Array.prototype.indexOf,$s=Array.from,yi=Object.defineProperty,mr=Object.getOwnPropertyDescriptor,wi=Object.getOwnPropertyDescriptors,$o=Object.prototype,Mo=Array.prototype,_n=Object.getPrototypeOf,Dn=Object.isExtensible;function Ao(e){return typeof e=="function"}const Wt=()=>{};function Po(e){return e()}function _s(e){for(var t=0;t<e.length;t++)e[t]()}function ki(){var e,t,a=new Promise((r,n)=>{e=r,t=n});return{promise:a,resolve:e,reject:t}}const Mt=2,mn=4,Ms=8,Co=1<<24,ga=16,Ma=32,ir=64,As=128,na=512,Tt=1024,Bt=2048,ia=4096,Xt=8192,Ea=16384,Ps=32768,er=65536,Fn=1<<17,xi=1<<18,Tr=1<<19,Ei=1<<20,wa=1<<25,tr=32768,Ks=1<<21,bn=1<<22,ja=1<<23,Sa=Symbol("$state"),Lo=Symbol("legacy props"),zo=Symbol(""),gr=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function yn(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Io(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Ro(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function jo(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function No(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Oo(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Do(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function Fo(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function qo(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Bo(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Uo(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Ho=1,Yo=2,Si=4,Vo=8,Wo=16,Qo=1,Xo=2,Ko=4,Go=8,Zo=16,Jo=1,el=2,tl=4,al=1,rl=2,Ct=Symbol(),sl="http://www.w3.org/1999/xhtml";function nl(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function il(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Ti(e){return e===this.v}function wn(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function $i(e){return!wn(e,this.v)}let $r=!1,ol=!1;function ll(){$r=!0}let it=null;function yr(e){it=e}function xt(e,t=!1,a){it={p:it,i:!1,c:null,e:null,s:e,x:null,l:$r&&!t?{s:null,u:null,$:[]}:null}}function Et(e){var t=it,a=t.e;if(a!==null){t.e=null;for(var r of a)Ui(r)}return t.i=!0,it=t.p,{}}function Jr(){return!$r||it!==null&&it.l===null}let Ha=[];function Mi(){var e=Ha;Ha=[],_s(e)}function or(e){if(Ha.length===0&&!Nr){var t=Ha;queueMicrotask(()=>{t===Ha&&Mi()})}Ha.push(e)}function cl(){for(;Ha.length>0;)Mi()}function Ai(e){var t=rt;if(t===null)return tt.f|=ja,e;if((t.f&Ps)===0){if((t.f&As)===0)throw e;t.b.error(e)}else wr(e,t)}function wr(e,t){for(;t!==null;){if((t.f&As)!==0)try{t.b.error(e);return}catch(a){e=a}t=t.parent}throw e}const ns=new Set;let at=null,jr=null,ea=null,Zt=[],Cs=null,Gs=!1,Nr=!1;class va{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#a=0;#r=0;#l=null;#n=new Set;#s=new Set;skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#r>0}process(t){Zt=[],jr=null,this.apply();var a={parent:null,effect:null,effects:[],render_effects:[]};for(const r of t)this.#i(r,a);this.is_fork||this.#d(),this.is_deferred()?(this.#o(a.effects),this.#o(a.render_effects)):(jr=this,at=null,qn(a.render_effects),qn(a.effects),jr=null,this.#l?.resolve()),ea=null}#i(t,a){t.f^=Tt;for(var r=t.first;r!==null;){var n=r.f,i=(n&(Ma|ir))!==0,o=i&&(n&Tt)!==0,l=o||(n&Xt)!==0||this.skipped_effects.has(r);if((r.f&As)!==0&&r.b?.is_pending()&&(a={parent:a,effect:r,effects:[],render_effects:[]}),!l&&r.fn!==null){i?r.f^=Tt:(n&mn)!==0?a.effects.push(r):Ar(r)&&((r.f&ga)!==0&&this.#n.add(r),kr(r));var v=r.first;if(v!==null){r=v;continue}}var c=r.parent;for(r=r.next;r===null&&c!==null;)c===a.effect&&(this.#o(a.effects),this.#o(a.render_effects),a=a.parent),r=c.next,c=c.parent}}#o(t){for(const a of t)(a.f&Bt)!==0?this.#n.add(a):(a.f&ia)!==0&&this.#s.add(a),this.#c(a.deps),$t(a,Tt)}#c(t){if(t!==null)for(const a of t)(a.f&Mt)===0||(a.f&tr)===0||(a.f^=tr,this.#c(a.deps))}capture(t,a){this.previous.has(t)||this.previous.set(t,a),(t.f&ja)===0&&(this.current.set(t,t.v),ea?.set(t,t.v))}activate(){at=this,this.apply()}deactivate(){at===this&&(at=null,ea=null)}flush(){if(this.activate(),Zt.length>0){if(Pi(),at!==null&&at!==this)return}else this.#a===0&&this.process([]);this.deactivate()}discard(){for(const t of this.#t)t(this);this.#t.clear()}#d(){if(this.#r===0){for(const t of this.#e)t();this.#e.clear()}this.#a===0&&this.#v()}#v(){if(ns.size>1){this.previous.clear();var t=ea,a=!0,r={parent:null,effect:null,effects:[],render_effects:[]};for(const i of ns){if(i===this){a=!1;continue}const o=[];for(const[v,c]of this.current){if(i.current.has(v))if(a&&c!==i.current.get(v))i.current.set(v,c);else continue;o.push(v)}if(o.length===0)continue;const l=[...i.current.keys()].filter(v=>!this.current.has(v));if(l.length>0){var n=Zt;Zt=[];const v=new Set,c=new Map;for(const u of o)Ci(u,l,v,c);if(Zt.length>0){at=i,i.apply();for(const u of Zt)i.#i(u,r);i.deactivate()}Zt=n}}at=null,ea=t}this.committed=!0,ns.delete(this)}increment(t){this.#a+=1,t&&(this.#r+=1)}decrement(t){this.#a-=1,t&&(this.#r-=1),this.revive()}revive(){for(const t of this.#n)this.#s.delete(t),$t(t,Bt),ar(t);for(const t of this.#s)$t(t,ia),ar(t);this.flush()}oncommit(t){this.#e.add(t)}ondiscard(t){this.#t.add(t)}settled(){return(this.#l??=ki()).promise}static ensure(){if(at===null){const t=at=new va;ns.add(at),Nr||va.enqueue(()=>{at===t&&t.flush()})}return at}static enqueue(t){or(t)}apply(){}}function dl(e){var t=Nr;Nr=!0;try{for(var a;;){if(cl(),Zt.length===0&&(at?.flush(),Zt.length===0))return Cs=null,a;Pi()}}finally{Nr=t}}function Pi(){var e=Qa;Gs=!0;var t=null;try{var a=0;for(bs(!0);Zt.length>0;){var r=va.ensure();if(a++>1e3){var n,i;vl()}r.process(Zt),Na.clear()}}finally{Gs=!1,bs(e),Cs=null}}function vl(){try{Oo()}catch(e){wr(e,Cs)}}let ba=null;function qn(e){var t=e.length;if(t!==0){for(var a=0;a<t;){var r=e[a++];if((r.f&(Ea|Xt))===0&&Ar(r)&&(ba=new Set,kr(r),r.deps===null&&r.first===null&&r.nodes===null&&(r.teardown===null&&r.ac===null?Wi(r):r.fn=null),ba?.size>0)){Na.clear();for(const n of ba){if((n.f&(Ea|Xt))!==0)continue;const i=[n];let o=n.parent;for(;o!==null;)ba.has(o)&&(ba.delete(o),i.push(o)),o=o.parent;for(let l=i.length-1;l>=0;l--){const v=i[l];(v.f&(Ea|Xt))===0&&kr(v)}}ba.clear()}}ba=null}}function Ci(e,t,a,r){if(!a.has(e)&&(a.add(e),e.reactions!==null))for(const n of e.reactions){const i=n.f;(i&Mt)!==0?Ci(n,t,a,r):(i&(bn|ga))!==0&&(i&Bt)===0&&Li(n,t,r)&&($t(n,Bt),ar(n))}}function Li(e,t,a){const r=a.get(e);if(r!==void 0)return r;if(e.deps!==null)for(const n of e.deps){if(t.includes(n))return!0;if((n.f&Mt)!==0&&Li(n,t,a))return a.set(n,!0),!0}return a.set(e,!1),!1}function ar(e){for(var t=Cs=e;t.parent!==null;){t=t.parent;var a=t.f;if(Gs&&t===rt&&(a&ga)!==0&&(a&xi)===0)return;if((a&(ir|Ma))!==0){if((a&Tt)===0)return;t.f^=Tt}}Zt.push(t)}function ul(e){let t=0,a=rr(0),r;return()=>{Ur()&&(s(a),Mr(()=>(t===0&&(r=b(()=>e(()=>Or(a)))),t+=1,()=>{or(()=>{t-=1,t===0&&(r?.(),r=void 0,Or(a))})})))}}var fl=er|Tr|As;function hl(e,t,a){new pl(e,t,a)}class pl{parent;#e=!1;#t;#a=null;#r;#l;#n;#s=null;#i=null;#o=null;#c=null;#d=null;#v=0;#u=0;#h=!1;#f=null;#b=ul(()=>(this.#f=rr(this.#v),()=>{this.#f=null}));constructor(t,a,r){this.#t=t,this.#r=a,this.#l=r,this.parent=rt.b,this.#e=!!this.#r.pending,this.#n=xn(()=>{rt.b=this;{var n=this.#_();try{this.#s=Jt(()=>r(n))}catch(i){this.error(i)}this.#u>0?this.#g():this.#e=!1}return()=>{this.#d?.remove()}},fl)}#y(){try{this.#s=Jt(()=>this.#l(this.#t))}catch(t){this.error(t)}this.#e=!1}#w(){const t=this.#r.pending;t&&(this.#i=Jt(()=>t(this.#t)),va.enqueue(()=>{var a=this.#_();this.#s=this.#p(()=>(va.ensure(),Jt(()=>this.#l(a)))),this.#u>0?this.#g():(Wa(this.#i,()=>{this.#i=null}),this.#e=!1)}))}#_(){var t=this.#t;return this.#e&&(this.#d=Ta(),this.#t.before(this.#d),t=this.#d),t}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#r.pending}#p(t){var a=rt,r=tt,n=it;pa(this.#n),Ft(this.#n),yr(this.#n.ctx);try{return t()}catch(i){return Ai(i),null}finally{pa(a),Ft(r),yr(n)}}#g(){const t=this.#r.pending;this.#s!==null&&(this.#c=document.createDocumentFragment(),this.#c.append(this.#d),Ki(this.#s,this.#c)),this.#i===null&&(this.#i=Jt(()=>t(this.#t)))}#m(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#m(t);return}this.#u+=t,this.#u===0&&(this.#e=!1,this.#i&&Wa(this.#i,()=>{this.#i=null}),this.#c&&(this.#t.before(this.#c),this.#c=null))}update_pending_count(t){this.#m(t),this.#v+=t,this.#f&&sr(this.#f,this.#v)}get_effect_pending(){return this.#b(),s(this.#f)}error(t){var a=this.#r.onerror;let r=this.#r.failed;if(this.#h||!a&&!r)throw t;this.#s&&(qt(this.#s),this.#s=null),this.#i&&(qt(this.#i),this.#i=null),this.#o&&(qt(this.#o),this.#o=null);var n=!1,i=!1;const o=()=>{if(n){il();return}n=!0,i&&Uo(),va.ensure(),this.#v=0,this.#o!==null&&Wa(this.#o,()=>{this.#o=null}),this.#e=this.has_pending_snippet(),this.#s=this.#p(()=>(this.#h=!1,Jt(()=>this.#l(this.#t)))),this.#u>0?this.#g():this.#e=!1};var l=tt;try{Ft(null),i=!0,a?.(t,o),i=!1}catch(v){wr(v,this.#n&&this.#n.parent)}finally{Ft(l)}r&&or(()=>{this.#o=this.#p(()=>{va.ensure(),this.#h=!0;try{return Jt(()=>{r(this.#t,()=>t,()=>o)})}catch(v){return wr(v,this.#n.parent),null}finally{this.#h=!1}})})}}function gl(e,t,a,r){const n=Jr()?es:ct;if(a.length===0&&e.length===0){r(t.map(n));return}var i=at,o=rt,l=_l();function v(){Promise.all(a.map(c=>ml(c))).then(c=>{l();try{r([...t.map(n),...c])}catch(u){(o.f&Ea)===0&&wr(u,o)}i?.deactivate(),ms()}).catch(c=>{wr(c,o)})}e.length>0?Promise.all(e).then(()=>{l();try{return v()}finally{i?.deactivate(),ms()}}):v()}function _l(){var e=rt,t=tt,a=it,r=at;return function(i=!0){pa(e),Ft(t),yr(a),i&&r?.activate()}}function ms(){pa(null),Ft(null),yr(null)}function es(e){var t=Mt|Bt,a=tt!==null&&(tt.f&Mt)!==0?tt:null;return rt!==null&&(rt.f|=Tr),{ctx:it,deps:null,effects:null,equals:Ti,f:t,fn:e,reactions:null,rv:0,v:Ct,wv:0,parent:a??rt,ac:null}}function ml(e,t){let a=rt;a===null&&Io();var r=a.b,n=void 0,i=rr(Ct),o=!tt,l=new Map;return Al(()=>{var v=ki();n=v.promise;try{Promise.resolve(e()).then(v.resolve,v.reject).then(()=>{c===at&&c.committed&&c.deactivate(),ms()})}catch(f){v.reject(f),ms()}var c=at;if(o){var u=!r.is_pending();r.update_pending_count(1),c.increment(u),l.get(c)?.reject(gr),l.delete(c),l.set(c,v)}const h=(f,p=void 0)=>{if(c.activate(),p)p!==gr&&(i.f|=ja,sr(i,p));else{(i.f&ja)!==0&&(i.f^=ja),sr(i,f);for(const[w,T]of l){if(l.delete(w),w===c)break;T.reject(gr)}}o&&(r.update_pending_count(-1),c.decrement(u))};v.promise.then(h,f=>h(null,f||"unknown"))}),as(()=>{for(const v of l.values())v.reject(gr)}),new Promise(v=>{function c(u){function h(){u===n?v(i):c(n)}u.then(h,h)}c(n)})}function Cr(e){const t=es(e);return Gi(t),t}function ct(e){const t=es(e);return t.equals=$i,t}function zi(e){var t=e.effects;if(t!==null){e.effects=null;for(var a=0;a<t.length;a+=1)qt(t[a])}}function bl(e){for(var t=e.parent;t!==null;){if((t.f&Mt)===0)return(t.f&Ea)===0?t:null;t=t.parent}return null}function kn(e){var t,a=rt;pa(bl(e));try{e.f&=~tr,zi(e),t=to(e)}finally{pa(a)}return t}function Ii(e){var t=kn(e);if(e.equals(t)||(at?.is_fork||(e.v=t),e.wv=Ji()),!cr)if(ea!==null)(Ur()||at?.is_fork)&&ea.set(e,t);else{var a=(e.f&na)===0?ia:Tt;$t(e,a)}}let Zs=new Set;const Na=new Map;let Ri=!1;function rr(e,t){var a={f:0,v:e,reactions:null,equals:Ti,rv:0,wv:0};return a}function Aa(e,t){const a=rr(e);return Gi(a),a}function $(e,t=!1,a=!0){const r=rr(e);return t||(r.equals=$i),$r&&a&&it!==null&&it.l!==null&&(it.l.s??=[]).push(r),r}function is(e,t){return g(e,b(()=>s(e))),t}function g(e,t,a=!1){tt!==null&&(!ua||(tt.f&Fn)!==0)&&Jr()&&(tt.f&(Mt|ga|bn|Fn))!==0&&!$a?.includes(e)&&Bo();let r=a?_r(t):t;return sr(e,r)}function sr(e,t){if(!e.equals(t)){var a=e.v;cr?Na.set(e,t):Na.set(e,a),e.v=t;var r=va.ensure();r.capture(e,a),(e.f&Mt)!==0&&((e.f&Bt)!==0&&kn(e),$t(e,(e.f&na)!==0?Tt:ia)),e.wv=Ji(),ji(e,Bt),Jr()&&rt!==null&&(rt.f&Tt)!==0&&(rt.f&(Ma|ir))===0&&(Gt===null?zl([e]):Gt.push(e)),!r.is_fork&&Zs.size>0&&!Ri&&yl()}return t}function yl(){Ri=!1;var e=Qa;bs(!0);const t=Array.from(Zs);try{for(const a of t)(a.f&Tt)!==0&&$t(a,ia),Ar(a)&&kr(a)}finally{bs(e)}Zs.clear()}function Or(e){g(e,e.v+1)}function ji(e,t){var a=e.reactions;if(a!==null)for(var r=Jr(),n=a.length,i=0;i<n;i++){var o=a[i],l=o.f;if(!(!r&&o===rt)){var v=(l&Bt)===0;if(v&&$t(o,t),(l&Mt)!==0){var c=o;ea?.delete(c),(l&tr)===0&&(l&na&&(o.f|=tr),ji(c,ia))}else v&&((l&ga)!==0&&ba!==null&&ba.add(o),ar(o))}}}function _r(e){if(typeof e!="object"||e===null||Sa in e)return e;const t=_n(e);if(t!==$o&&t!==Mo)return e;var a=new Map,r=Zr(e),n=Aa(0),i=Xa,o=l=>{if(Xa===i)return l();var v=tt,c=Xa;Ft(null),Yn(i);var u=l();return Ft(v),Yn(c),u};return r&&a.set("length",Aa(e.length)),new Proxy(e,{defineProperty(l,v,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&Fo();var u=a.get(v);return u===void 0?u=o(()=>{var h=Aa(c.value);return a.set(v,h),h}):g(u,c.value,!0),!0},deleteProperty(l,v){var c=a.get(v);if(c===void 0){if(v in l){const u=o(()=>Aa(Ct));a.set(v,u),Or(n)}}else g(c,Ct),Or(n);return!0},get(l,v,c){if(v===Sa)return e;var u=a.get(v),h=v in l;if(u===void 0&&(!h||mr(l,v)?.writable)&&(u=o(()=>{var p=_r(h?l[v]:Ct),w=Aa(p);return w}),a.set(v,u)),u!==void 0){var f=s(u);return f===Ct?void 0:f}return Reflect.get(l,v,c)},getOwnPropertyDescriptor(l,v){var c=Reflect.getOwnPropertyDescriptor(l,v);if(c&&"value"in c){var u=a.get(v);u&&(c.value=s(u))}else if(c===void 0){var h=a.get(v),f=h?.v;if(h!==void 0&&f!==Ct)return{enumerable:!0,configurable:!0,value:f,writable:!0}}return c},has(l,v){if(v===Sa)return!0;var c=a.get(v),u=c!==void 0&&c.v!==Ct||Reflect.has(l,v);if(c!==void 0||rt!==null&&(!u||mr(l,v)?.writable)){c===void 0&&(c=o(()=>{var f=u?_r(l[v]):Ct,p=Aa(f);return p}),a.set(v,c));var h=s(c);if(h===Ct)return!1}return u},set(l,v,c,u){var h=a.get(v),f=v in l;if(r&&v==="length")for(var p=c;p<h.v;p+=1){var w=a.get(p+"");w!==void 0?g(w,Ct):p in l&&(w=o(()=>Aa(Ct)),a.set(p+"",w))}if(h===void 0)(!f||mr(l,v)?.writable)&&(h=o(()=>Aa(void 0)),g(h,_r(c)),a.set(v,h));else{f=h.v!==Ct;var T=o(()=>_r(c));g(h,T)}var k=Reflect.getOwnPropertyDescriptor(l,v);if(k?.set&&k.set.call(u,c),!f){if(r&&typeof v=="string"){var E=a.get("length"),W=Number(v);Number.isInteger(W)&&W>=E.v&&g(E,W+1)}Or(n)}return!0},ownKeys(l){s(n);var v=Reflect.ownKeys(l).filter(h=>{var f=a.get(h);return f===void 0||f.v!==Ct});for(var[c,u]of a)u.v!==Ct&&!(c in l)&&v.push(c);return v},setPrototypeOf(){qo()}})}function Bn(e){try{if(e!==null&&typeof e=="object"&&Sa in e)return e[Sa]}catch{}return e}function wl(e,t){return Object.is(Bn(e),Bn(t))}var La,Ni,Oi,Di;function kl(){if(La===void 0){La=window,Ni=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,a=Text.prototype;Oi=mr(t,"firstChild").get,Di=mr(t,"nextSibling").get,Dn(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Dn(a)&&(a.__t=void 0)}}function Ta(e=""){return document.createTextNode(e)}function za(e){return Oi.call(e)}function ts(e){return Di.call(e)}function d(e,t){return za(e)}function Ae(e,t=!1){{var a=za(e);return a instanceof Comment&&a.data===""?ts(a):a}}function _(e,t=1,a=!1){let r=e;for(;t--;)r=ts(r);return r}function xl(e){e.textContent=""}function Fi(){return!1}let Un=!1;function El(){Un||(Un=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function Sl(e,t,a,r=!0){r&&a();for(var n of t)e.addEventListener(n,a);as(()=>{for(var i of t)e.removeEventListener(i,a)})}function lr(e){var t=tt,a=rt;Ft(null),pa(null);try{return e()}finally{Ft(t),pa(a)}}function qi(e,t,a,r=a){e.addEventListener(t,()=>lr(a));const n=e.__on_r;n?e.__on_r=()=>{n(),r(!0)}:e.__on_r=()=>r(!0),El()}function Bi(e){rt===null&&(tt===null&&No(),jo()),cr&&Ro()}function Tl(e,t){var a=t.last;a===null?t.last=t.first=e:(a.next=e,e.prev=a,t.last=e)}function _a(e,t,a){var r=rt;r!==null&&(r.f&Xt)!==0&&(e|=Xt);var n={ctx:it,deps:null,nodes:null,f:e|Bt|na,first:null,fn:t,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,wv:0,ac:null};if(a)try{kr(n),n.f|=Ps}catch(l){throw qt(n),l}else t!==null&&ar(n);var i=n;if(a&&i.deps===null&&i.teardown===null&&i.nodes===null&&i.first===i.last&&(i.f&Tr)===0&&(i=i.first,(e&ga)!==0&&(e&er)!==0&&i!==null&&(i.f|=er)),i!==null&&(i.parent=r,r!==null&&Tl(i,r),tt!==null&&(tt.f&Mt)!==0&&(e&ir)===0)){var o=tt;(o.effects??=[]).push(i)}return n}function Ur(){return tt!==null&&!ua}function as(e){const t=_a(Ms,null,!1);return $t(t,Tt),t.teardown=e,t}function Js(e){Bi();var t=rt.f,a=!tt&&(t&Ma)!==0&&(t&Ps)===0;if(a){var r=it;(r.e??=[]).push(e)}else return Ui(e)}function Ui(e){return _a(mn|Ei,e,!1)}function $l(e){return Bi(),_a(Ms|Ei,e,!0)}function Ml(e){va.ensure();const t=_a(ir|Tr,e,!0);return(a={})=>new Promise(r=>{a.outro?Wa(t,()=>{qt(t),r(void 0)}):(qt(t),r(void 0))})}function Dt(e){return _a(mn,e,!1)}function re(e,t){var a=it,r={effect:null,ran:!1,deps:e};a.l.$.push(r),r.effect=Mr(()=>{e(),!r.ran&&(r.ran=!0,b(t))})}function Ut(){var e=it;Mr(()=>{for(var t of e.l.$){t.deps();var a=t.effect;(a.f&Tt)!==0&&$t(a,ia),Ar(a)&&kr(a),t.ran=!1}})}function Al(e){return _a(bn|Tr,e,!0)}function Mr(e,t=0){return _a(Ms|t,e,!0)}function ve(e,t=[],a=[],r=[]){gl(r,t,a,n=>{_a(Ms,()=>e(...n.map(s)),!0)})}function xn(e,t=0){var a=_a(ga|t,e,!0);return a}function Jt(e){return _a(Ma|Tr,e,!0)}function Hi(e){var t=e.teardown;if(t!==null){const a=cr,r=tt;Hn(!0),Ft(null);try{t.call(null)}finally{Hn(a),Ft(r)}}}function Yi(e,t=!1){var a=e.first;for(e.first=e.last=null;a!==null;){const n=a.ac;n!==null&&lr(()=>{n.abort(gr)});var r=a.next;(a.f&ir)!==0?a.parent=null:qt(a,t),a=r}}function Pl(e){for(var t=e.first;t!==null;){var a=t.next;(t.f&Ma)===0&&qt(t),t=a}}function qt(e,t=!0){var a=!1;(t||(e.f&xi)!==0)&&e.nodes!==null&&e.nodes.end!==null&&(Vi(e.nodes.start,e.nodes.end),a=!0),Yi(e,t&&!a),ys(e,0),$t(e,Ea);var r=e.nodes&&e.nodes.t;if(r!==null)for(const i of r)i.stop();Hi(e);var n=e.parent;n!==null&&n.first!==null&&Wi(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function Vi(e,t){for(;e!==null;){var a=e===t?null:ts(e);e.remove(),e=a}}function Wi(e){var t=e.parent,a=e.prev,r=e.next;a!==null&&(a.next=r),r!==null&&(r.prev=a),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=a))}function Wa(e,t,a=!0){var r=[];Qi(e,r,!0);var n=()=>{a&&qt(e),t&&t()},i=r.length;if(i>0){var o=()=>--i||n();for(var l of r)l.out(o)}else n()}function Qi(e,t,a){if((e.f&Xt)===0){e.f^=Xt;var r=e.nodes&&e.nodes.t;if(r!==null)for(const l of r)(l.is_global||a)&&t.push(l);for(var n=e.first;n!==null;){var i=n.next,o=(n.f&er)!==0||(n.f&Ma)!==0&&(e.f&ga)!==0;Qi(n,t,o?a:!1),n=i}}}function En(e){Xi(e,!0)}function Xi(e,t){if((e.f&Xt)!==0){e.f^=Xt,(e.f&Tt)===0&&($t(e,Bt),ar(e));for(var a=e.first;a!==null;){var r=a.next,n=(a.f&er)!==0||(a.f&Ma)!==0;Xi(a,n?t:!1),a=r}var i=e.nodes&&e.nodes.t;if(i!==null)for(const o of i)(o.is_global||t)&&o.in()}}function Ki(e,t){if(e.nodes)for(var a=e.nodes.start,r=e.nodes.end;a!==null;){var n=a===r?null:ts(a);t.append(a),a=n}}let pr=null;function Cl(e){var t=pr;try{if(pr=new Set,b(e),t!==null)for(var a of pr)t.add(a);return pr}finally{pr=t}}function Ll(e){for(var t of Cl(e))sr(t,t.v)}let Qa=!1;function bs(e){Qa=e}let cr=!1;function Hn(e){cr=e}let tt=null,ua=!1;function Ft(e){tt=e}let rt=null;function pa(e){rt=e}let $a=null;function Gi(e){tt!==null&&($a===null?$a=[e]:$a.push(e))}let It=null,Yt=0,Gt=null;function zl(e){Gt=e}let Zi=1,Hr=0,Xa=Hr;function Yn(e){Xa=e}function Ji(){return++Zi}function Ar(e){var t=e.f;if((t&Bt)!==0)return!0;if(t&Mt&&(e.f&=~tr),(t&ia)!==0){var a=e.deps;if(a!==null)for(var r=a.length,n=0;n<r;n++){var i=a[n];if(Ar(i)&&Ii(i),i.wv>e.wv)return!0}(t&na)!==0&&ea===null&&$t(e,Tt)}return!1}function eo(e,t,a=!0){var r=e.reactions;if(r!==null&&!$a?.includes(e))for(var n=0;n<r.length;n++){var i=r[n];(i.f&Mt)!==0?eo(i,t,!1):t===i&&(a?$t(i,Bt):(i.f&Tt)!==0&&$t(i,ia),ar(i))}}function to(e){var t=It,a=Yt,r=Gt,n=tt,i=$a,o=it,l=ua,v=Xa,c=e.f;It=null,Yt=0,Gt=null,tt=(c&(Ma|ir))===0?e:null,$a=null,yr(e.ctx),ua=!1,Xa=++Hr,e.ac!==null&&(lr(()=>{e.ac.abort(gr)}),e.ac=null);try{e.f|=Ks;var u=e.fn,h=u(),f=e.deps;if(It!==null){var p;if(ys(e,Yt),f!==null&&Yt>0)for(f.length=Yt+It.length,p=0;p<It.length;p++)f[Yt+p]=It[p];else e.deps=f=It;if(Ur()&&(e.f&na)!==0)for(p=Yt;p<f.length;p++)(f[p].reactions??=[]).push(e)}else f!==null&&Yt<f.length&&(ys(e,Yt),f.length=Yt);if(Jr()&&Gt!==null&&!ua&&f!==null&&(e.f&(Mt|ia|Bt))===0)for(p=0;p<Gt.length;p++)eo(Gt[p],e);return n!==null&&n!==e&&(Hr++,Gt!==null&&(r===null?r=Gt:r.push(...Gt))),(e.f&ja)!==0&&(e.f^=ja),h}catch(w){return Ai(w)}finally{e.f^=Ks,It=t,Yt=a,Gt=r,tt=n,$a=i,yr(o),ua=l,Xa=v}}function Il(e,t){let a=t.reactions;if(a!==null){var r=To.call(a,e);if(r!==-1){var n=a.length-1;n===0?a=t.reactions=null:(a[r]=a[n],a.pop())}}a===null&&(t.f&Mt)!==0&&(It===null||!It.includes(t))&&($t(t,ia),(t.f&na)!==0&&(t.f^=na,t.f&=~tr),zi(t),ys(t,0))}function ys(e,t){var a=e.deps;if(a!==null)for(var r=t;r<a.length;r++)Il(e,a[r])}function kr(e){var t=e.f;if((t&Ea)===0){$t(e,Tt);var a=rt,r=Qa;rt=e,Qa=!0;try{(t&(ga|Co))!==0?Pl(e):Yi(e),Hi(e);var n=to(e);e.teardown=typeof n=="function"?n:null,e.wv=Zi;var i;Xs&&ol&&(e.f&Bt)!==0&&e.deps}finally{Qa=r,rt=a}}}async function br(){await Promise.resolve(),dl()}function s(e){var t=e.f,a=(t&Mt)!==0;if(pr?.add(e),tt!==null&&!ua){var r=rt!==null&&(rt.f&Ea)!==0;if(!r&&!$a?.includes(e)){var n=tt.deps;if((tt.f&Ks)!==0)e.rv<Hr&&(e.rv=Hr,It===null&&n!==null&&n[Yt]===e?Yt++:It===null?It=[e]:It.includes(e)||It.push(e));else{(tt.deps??=[]).push(e);var i=e.reactions;i===null?e.reactions=[tt]:i.includes(tt)||i.push(tt)}}}if(cr){if(Na.has(e))return Na.get(e);if(a){var o=e,l=o.v;return((o.f&Tt)===0&&o.reactions!==null||ro(o))&&(l=kn(o)),Na.set(o,l),l}}else a&&(!ea?.has(e)||at?.is_fork&&!Ur())&&(o=e,Ar(o)&&Ii(o),Qa&&Ur()&&(o.f&na)===0&&ao(o));if(ea?.has(e))return ea.get(e);if((e.f&ja)!==0)throw e.v;return e.v}function ao(e){if(e.deps!==null){e.f^=na;for(const t of e.deps)(t.reactions??=[]).push(e),(t.f&Mt)!==0&&(t.f&na)===0&&ao(t)}}function ro(e){if(e.v===Ct)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(Na.has(t)||(t.f&Mt)!==0&&ro(t))return!0;return!1}function b(e){var t=ua;try{return ua=!0,e()}finally{ua=t}}const Rl=-7169;function $t(e,t){e.f=e.f&Rl|t}function R(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Sa in e)en(e);else if(!Array.isArray(e))for(let t in e){const a=e[t];typeof a=="object"&&a&&Sa in a&&en(a)}}}function en(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let r in e)try{en(e[r],t)}catch{}const a=_n(e);if(a!==Object.prototype&&a!==Array.prototype&&a!==Map.prototype&&a!==Set.prototype&&a!==Date.prototype){const r=wi(a);for(let n in r){const i=r[n].get;if(i)try{i.call(e)}catch{}}}}}const jl=["touchstart","touchmove"];function Nl(e){return jl.includes(e)}const Ol=new Set,Vn=new Set;function Dl(e,t,a,r={}){function n(i){if(r.capture||zr.call(t,i),!i.cancelBubble)return lr(()=>a?.call(this,i))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?or(()=>{t.addEventListener(e,n,r)}):t.addEventListener(e,n,r),n}function P(e,t,a,r,n){var i={capture:r,passive:n},o=Dl(e,t,a,i);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&as(()=>{t.removeEventListener(e,o,i)})}let Wn=null;function zr(e){var t=this,a=t.ownerDocument,r=e.type,n=e.composedPath?.()||[],i=n[0]||e.target;Wn=e;var o=0,l=Wn===e&&e.__root;if(l){var v=n.indexOf(l);if(v!==-1&&(t===document||t===window)){e.__root=t;return}var c=n.indexOf(t);if(c===-1)return;v<=c&&(o=v)}if(i=n[o]||e.target,i!==t){yi(e,"currentTarget",{configurable:!0,get(){return i||a}});var u=tt,h=rt;Ft(null),pa(null);try{for(var f,p=[];i!==null;){var w=i.assignedSlot||i.parentNode||i.host||null;try{var T=i["__"+r];T!=null&&(!i.disabled||e.target===i)&&T.call(i,e)}catch(k){f?p.push(k):f=k}if(e.cancelBubble||w===t||w===null)break;i=w}if(f){for(let k of p)queueMicrotask(()=>{throw k});throw f}}finally{e.__root=t,delete e.currentTarget,Ft(u),pa(h)}}}function so(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function Yr(e,t){var a=rt;a.nodes===null&&(a.nodes={start:e,end:t,a:null,t:null})}function x(e,t){var a=(t&al)!==0,r=(t&rl)!==0,n,i=!e.startsWith("<!>");return()=>{n===void 0&&(n=so(i?e:"<!>"+e),a||(n=za(n)));var o=r||Ni?document.importNode(n,!0):n.cloneNode(!0);if(a){var l=za(o),v=o.lastChild;Yr(l,v)}else Yr(o,o);return o}}function Pa(e=""){{var t=Ta(e+"");return Yr(t,t),t}}function et(){var e=document.createDocumentFragment(),t=document.createComment(""),a=Ta();return e.append(t,a),Yr(t,a),e}function m(e,t){e!==null&&e.before(t)}let tn=!0;function de(e,t){var a=t==null?"":typeof t=="object"?t+"":t;a!==(e.__t??=e.nodeValue)&&(e.__t=a,e.nodeValue=a+"")}function Fl(e,t){return ql(e,t)}const vr=new Map;function ql(e,{target:t,anchor:a,props:r={},events:n,context:i,intro:o=!0}){kl();var l=new Set,v=h=>{for(var f=0;f<h.length;f++){var p=h[f];if(!l.has(p)){l.add(p);var w=Nl(p);t.addEventListener(p,zr,{passive:w});var T=vr.get(p);T===void 0?(document.addEventListener(p,zr,{passive:w}),vr.set(p,1)):vr.set(p,T+1)}}};v($s(Ol)),Vn.add(v);var c=void 0,u=Ml(()=>{var h=a??t.appendChild(Ta());return hl(h,{pending:()=>{}},f=>{if(i){xt({});var p=it;p.c=i}n&&(r.$$events=n),tn=o,c=e(f,r)||{},tn=!0,i&&Et()}),()=>{for(var f of l){t.removeEventListener(f,zr);var p=vr.get(f);--p===0?(document.removeEventListener(f,zr),vr.delete(f)):vr.set(f,p)}Vn.delete(v),h!==a&&h.parentNode?.removeChild(h)}});return Bl.set(c,u),c}let Bl=new WeakMap;class Ul{anchor;#e=new Map;#t=new Map;#a=new Map;#r=new Set;#l=!0;constructor(t,a=!0){this.anchor=t,this.#l=a}#n=()=>{var t=at;if(this.#e.has(t)){var a=this.#e.get(t),r=this.#t.get(a);if(r)En(r),this.#r.delete(a);else{var n=this.#a.get(a);n&&(this.#t.set(a,n.effect),this.#a.delete(a),n.fragment.lastChild.remove(),this.anchor.before(n.fragment),r=n.effect)}for(const[i,o]of this.#e){if(this.#e.delete(i),i===t)break;const l=this.#a.get(o);l&&(qt(l.effect),this.#a.delete(o))}for(const[i,o]of this.#t){if(i===a||this.#r.has(i))continue;const l=()=>{if(Array.from(this.#e.values()).includes(i)){var c=document.createDocumentFragment();Ki(o,c),c.append(Ta()),this.#a.set(i,{effect:o,fragment:c})}else qt(o);this.#r.delete(i),this.#t.delete(i)};this.#l||!r?(this.#r.add(i),Wa(o,l,!1)):l()}}};#s=t=>{this.#e.delete(t);const a=Array.from(this.#e.values());for(const[r,n]of this.#a)a.includes(r)||(qt(n.effect),this.#a.delete(r))};ensure(t,a){var r=at,n=Fi();if(a&&!this.#t.has(t)&&!this.#a.has(t))if(n){var i=document.createDocumentFragment(),o=Ta();i.append(o),this.#a.set(t,{effect:Jt(()=>a(o)),fragment:i})}else this.#t.set(t,Jt(()=>a(this.anchor)));if(this.#e.set(r,t),n){for(const[l,v]of this.#t)l===t?r.skipped_effects.delete(v):r.skipped_effects.add(v);for(const[l,v]of this.#a)l===t?r.skipped_effects.delete(v.effect):r.skipped_effects.add(v.effect);r.oncommit(this.#n),r.ondiscard(this.#s)}else this.#n()}}function L(e,t,a=!1){var r=new Ul(e),n=a?er:0;function i(o,l){r.ensure(o,l)}xn(()=>{var o=!1;t((l,v=!0)=>{o=!0,i(v,l)}),o||i(!1,null)},n)}function oa(e,t){return t}function Hl(e,t,a){for(var r=[],n=t.length,i,o=t.length,l=0;l<n;l++){let h=t[l];Wa(h,()=>{if(i){if(i.pending.delete(h),i.done.add(h),i.pending.size===0){var f=e.outrogroups;an($s(i.done)),f.delete(i),f.size===0&&(e.outrogroups=null)}}else o-=1},!1)}if(o===0){var v=r.length===0&&a!==null;if(v){var c=a,u=c.parentNode;xl(u),u.append(c),e.items.clear()}an(t,!v)}else i={pending:new Set(t),done:new Set},(e.outrogroups??=new Set).add(i)}function an(e,t=!0){for(var a=0;a<e.length;a++)qt(e[a],t)}var Qn;function yt(e,t,a,r,n,i=null){var o=e,l=new Map,v=(t&Si)!==0;if(v){var c=e;o=c.appendChild(Ta())}var u=null,h=ct(()=>{var E=a();return Zr(E)?E:E==null?[]:$s(E)}),f,p=!0;function w(){k.fallback=u,Yl(k,f,o,t,r),u!==null&&(f.length===0?(u.f&wa)===0?En(u):(u.f^=wa,Ir(u,null,o)):Wa(u,()=>{u=null}))}var T=xn(()=>{f=s(h);for(var E=f.length,W=new Set,se=at,Z=Fi(),ae=0;ae<E;ae+=1){var ue=f[ae],O=r(ue,ae),B=p?null:l.get(O);B?(B.v&&sr(B.v,ue),B.i&&sr(B.i,ae),Z&&se.skipped_effects.delete(B.e)):(B=Vl(l,p?o:Qn??=Ta(),ue,O,ae,n,t,a),p||(B.e.f|=wa),l.set(O,B)),W.add(O)}if(E===0&&i&&!u&&(p?u=Jt(()=>i(o)):(u=Jt(()=>i(Qn??=Ta())),u.f|=wa)),!p)if(Z){for(const[M,fe]of l)W.has(M)||se.skipped_effects.add(fe.e);se.oncommit(w),se.ondiscard(()=>{})}else w();s(h)}),k={effect:T,items:l,outrogroups:null,fallback:u};p=!1}function Yl(e,t,a,r,n){var i=(r&Vo)!==0,o=t.length,l=e.items,v=e.effect.first,c,u=null,h,f=[],p=[],w,T,k,E;if(i)for(E=0;E<o;E+=1)w=t[E],T=n(w,E),k=l.get(T).e,(k.f&wa)===0&&(k.nodes?.a?.measure(),(h??=new Set).add(k));for(E=0;E<o;E+=1){if(w=t[E],T=n(w,E),k=l.get(T).e,e.outrogroups!==null)for(const fe of e.outrogroups)fe.pending.delete(k),fe.done.delete(k);if((k.f&wa)!==0)if(k.f^=wa,k===v)Ir(k,null,a);else{var W=u?u.next:v;k===e.effect.last&&(e.effect.last=k.prev),k.prev&&(k.prev.next=k.next),k.next&&(k.next.prev=k.prev),Ca(e,u,k),Ca(e,k,W),Ir(k,W,a),u=k,f=[],p=[],v=u.next;continue}if((k.f&Xt)!==0&&(En(k),i&&(k.nodes?.a?.unfix(),(h??=new Set).delete(k))),k!==v){if(c!==void 0&&c.has(k)){if(f.length<p.length){var se=p[0],Z;u=se.prev;var ae=f[0],ue=f[f.length-1];for(Z=0;Z<f.length;Z+=1)Ir(f[Z],se,a);for(Z=0;Z<p.length;Z+=1)c.delete(p[Z]);Ca(e,ae.prev,ue.next),Ca(e,u,ae),Ca(e,ue,se),v=se,u=ue,E-=1,f=[],p=[]}else c.delete(k),Ir(k,v,a),Ca(e,k.prev,k.next),Ca(e,k,u===null?e.effect.first:u.next),Ca(e,u,k),u=k;continue}for(f=[],p=[];v!==null&&v!==k;)(c??=new Set).add(v),p.push(v),v=v.next;if(v===null)continue}(k.f&wa)===0&&f.push(k),u=k,v=k.next}if(e.outrogroups!==null){for(const fe of e.outrogroups)fe.pending.size===0&&(an($s(fe.done)),e.outrogroups?.delete(fe));e.outrogroups.size===0&&(e.outrogroups=null)}if(v!==null||c!==void 0){var O=[];if(c!==void 0)for(k of c)(k.f&Xt)===0&&O.push(k);for(;v!==null;)(v.f&Xt)===0&&v!==e.fallback&&O.push(v),v=v.next;var B=O.length;if(B>0){var M=(r&Si)!==0&&o===0?a:null;if(i){for(E=0;E<B;E+=1)O[E].nodes?.a?.measure();for(E=0;E<B;E+=1)O[E].nodes?.a?.fix()}Hl(e,O,M)}}i&&or(()=>{if(h!==void 0)for(k of h)k.nodes?.a?.apply()})}function Vl(e,t,a,r,n,i,o,l){var v=(o&Ho)!==0?(o&Wo)===0?$(a,!1,!1):rr(a):null,c=(o&Yo)!==0?rr(n):null;return{v,i:c,e:Jt(()=>(i(t,v??a,c??n,l),()=>{e.delete(r)}))}}function Ir(e,t,a){if(e.nodes)for(var r=e.nodes.start,n=e.nodes.end,i=t&&(t.f&wa)===0?t.nodes.start:a;r!==null;){var o=ts(r);if(i.before(r),r===n)return;r=o}}function Ca(e,t,a){t===null?e.effect.first=a:t.next=a,a===null?e.effect.last=t:a.prev=t}function te(e,t,a=!1,r=!1,n=!1){var i=e,o="";ve(()=>{var l=rt;if(o!==(o=t()??"")&&(l.nodes!==null&&(Vi(l.nodes.start,l.nodes.end),l.nodes=null),o!=="")){var v=o+"";a?v=`<svg>${v}</svg>`:r&&(v=`<math>${v}</math>`);var c=so(v);if((a||r)&&(c=za(c)),Yr(za(c),c.lastChild),a||r)for(;za(c);)i.before(za(c));else i.before(c)}})}function us(e,t,a,r,n){var i=t.$$slots?.[a],o=!1;i===!0&&(i=t[a==="default"?"children":a],o=!0),i===void 0||i(e,o?()=>r:r)}const Wl=()=>performance.now(),ya={tick:e=>requestAnimationFrame(e),now:()=>Wl(),tasks:new Set};function no(){const e=ya.now();ya.tasks.forEach(t=>{t.c(e)||(ya.tasks.delete(t),t.f())}),ya.tasks.size!==0&&ya.tick(no)}function Ql(e){let t;return ya.tasks.size===0&&ya.tick(no),{promise:new Promise(a=>{ya.tasks.add(t={c:e,f:a})}),abort(){ya.tasks.delete(t)}}}function os(e,t){lr(()=>{e.dispatchEvent(new CustomEvent(t))})}function Xl(e){if(e==="float")return"cssFloat";if(e==="offset")return"cssOffset";if(e.startsWith("--"))return e;const t=e.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(a=>a[0].toUpperCase()+a.slice(1)).join("")}function Xn(e){const t={},a=e.split(";");for(const r of a){const[n,i]=r.split(":");if(!n||i===void 0)break;const o=Xl(n.trim());t[o]=i.trim()}return t}const Kl=e=>e;function ot(e,t,a,r){var n=(e&Jo)!==0,i=(e&el)!==0,o=n&&i,l=(e&tl)!==0,v=o?"both":n?"in":"out",c,u=t.inert,h=t.style.overflow,f,p;function w(){return lr(()=>c??=a()(t,r?.()??{},{direction:v}))}var T={is_global:l,in(){if(t.inert=u,!n){p?.abort(),p?.reset?.();return}i||f?.abort(),os(t,"introstart"),f=rn(t,w(),p,1,()=>{os(t,"introend"),f?.abort(),f=c=void 0,t.style.overflow=h})},out(se){if(!i){se?.(),c=void 0;return}t.inert=!0,os(t,"outrostart"),p=rn(t,w(),f,0,()=>{os(t,"outroend"),se?.()})},stop:()=>{f?.abort(),p?.abort()}},k=rt;if((k.nodes.t??=[]).push(T),n&&tn){var E=l;if(!E){for(var W=k.parent;W&&(W.f&er)!==0;)for(;(W=W.parent)&&(W.f&ga)===0;);E=!W||(W.f&Ps)!==0}E&&Dt(()=>{b(()=>T.in())})}}function rn(e,t,a,r,n){var i=r===1;if(Ao(t)){var o,l=!1;return or(()=>{if(!l){var k=t({direction:i?"in":"out"});o=rn(e,k,a,r,n)}}),{abort:()=>{l=!0,o?.abort()},deactivate:()=>o.deactivate(),reset:()=>o.reset(),t:()=>o.t()}}if(a?.deactivate(),!t?.duration)return n(),{abort:Wt,deactivate:Wt,reset:Wt,t:()=>r};const{delay:v=0,css:c,tick:u,easing:h=Kl}=t;var f=[];if(i&&a===void 0&&(u&&u(0,1),c)){var p=Xn(c(0,1));f.push(p,p)}var w=()=>1-r,T=e.animate(f,{duration:v,fill:"forwards"});return T.onfinish=()=>{T.cancel();var k=a?.t()??1-r;a?.abort();var E=r-k,W=t.duration*Math.abs(E),se=[];if(W>0){var Z=!1;if(c)for(var ae=Math.ceil(W/16.666666666666668),ue=0;ue<=ae;ue+=1){var O=k+E*h(ue/ae),B=Xn(c(O,1-O));se.push(B),Z||=B.overflow==="hidden"}Z&&(e.style.overflow="hidden"),w=()=>{var M=T.currentTime;return k+E*h(M/W)},u&&Ql(()=>{if(T.playState!=="running")return!1;var M=w();return u(M,1-M),!0})}T=e.animate(se,{duration:W,fill:"forwards"}),T.onfinish=()=>{w=()=>r,u?.(r,1-r),n()}},{abort:()=>{T&&(T.cancel(),T.effect=null,T.onfinish=Wt)},deactivate:()=>{n=Wt},reset:()=>{r===0&&u?.(1,0)},t:()=>w()}}function Sn(e,t,a){Dt(()=>{var r=b(()=>t(e,a?.())||{});if(a&&r?.update){var n=!1,i={};Mr(()=>{var o=a();R(o),n&&wn(i,o)&&(i=o,r.update(o))}),n=!0}if(r?.destroy)return()=>r.destroy()})}const Kn=[...` 	
\r\fÂ \v\uFEFF`];function Gl(e,t,a){var r=e==null?"":""+e;if(t&&(r=r?r+" "+t:t),a){for(var n in a)if(a[n])r=r?r+" "+n:n;else if(r.length)for(var i=n.length,o=0;(o=r.indexOf(n,o))>=0;){var l=o+i;(o===0||Kn.includes(r[o-1]))&&(l===r.length||Kn.includes(r[l]))?r=(o===0?"":r.substring(0,o))+r.substring(l+1):o=l}}return r===""?null:r}function Gn(e,t=!1){var a=t?" !important;":";",r="";for(var n in e){var i=e[n];i!=null&&i!==""&&(r+=" "+n+": "+i+a)}return r}function Ns(e){return e[0]!=="-"||e[1]!=="-"?e.toLowerCase():e}function Zl(e,t){if(t){var a="",r,n;if(Array.isArray(t)?(r=t[0],n=t[1]):r=t,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var i=!1,o=0,l=!1,v=[];r&&v.push(...Object.keys(r).map(Ns)),n&&v.push(...Object.keys(n).map(Ns));var c=0,u=-1;const T=e.length;for(var h=0;h<T;h++){var f=e[h];if(l?f==="/"&&e[h-1]==="*"&&(l=!1):i?i===f&&(i=!1):f==="/"&&e[h+1]==="*"?l=!0:f==='"'||f==="'"?i=f:f==="("?o++:f===")"&&o--,!l&&i===!1&&o===0){if(f===":"&&u===-1)u=h;else if(f===";"||h===T-1){if(u!==-1){var p=Ns(e.substring(c,u).trim());if(!v.includes(p)){f!==";"&&h++;var w=e.substring(c,h).trim();a+=" "+w+";"}}c=h+1,u=-1}}}}return r&&(a+=Gn(r)),n&&(a+=Gn(n,!0)),a=a.trim(),a===""?null:a}return e==null?null:String(e)}function Qe(e,t,a,r,n,i){var o=e.__className;if(o!==a||o===void 0){var l=Gl(a,r,i);l==null?e.removeAttribute("class"):e.className=l,e.__className=a}else if(i&&n!==i)for(var v in i){var c=!!i[v];(n==null||c!==!!n[v])&&e.classList.toggle(v,c)}return i}function Os(e,t={},a,r){for(var n in a){var i=a[n];t[n]!==i&&(a[n]==null?e.style.removeProperty(n):e.style.setProperty(n,i,r))}}function lt(e,t,a,r){var n=e.__style;if(n!==t){var i=Zl(t,r);i==null?e.removeAttribute("style"):e.style.cssText=i,e.__style=t}else r&&(Array.isArray(r)?(Os(e,a?.[0],r[0]),Os(e,a?.[1],r[1],"important")):Os(e,a,r));return r}function io(e,t,a=!1){if(e.multiple){if(t==null)return;if(!Zr(t))return nl();for(var r of e.options)r.selected=t.includes(Dr(r));return}for(r of e.options){var n=Dr(r);if(wl(n,t)){r.selected=!0;return}}(!a||t!==void 0)&&(e.selectedIndex=-1)}function Jl(e){var t=new MutationObserver(()=>{io(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),as(()=>{t.disconnect()})}function ec(e,t,a=t){var r=new WeakSet,n=!0;qi(e,"change",i=>{var o=i?"[selected]":":checked",l;if(e.multiple)l=[].map.call(e.querySelectorAll(o),Dr);else{var v=e.querySelector(o)??e.querySelector("option:not([disabled])");l=v&&Dr(v)}a(l),at!==null&&r.add(at)}),Dt(()=>{var i=t();if(e===document.activeElement){var o=jr??at;if(r.has(o))return}if(io(e,i,n),n&&i===void 0){var l=e.querySelector(":checked");l!==null&&(i=Dr(l),a(i))}e.__value=i,n=!1}),Jl(e)}function Dr(e){return"__value"in e?e.__value:e.value}const tc=Symbol("is custom element"),ac=Symbol("is html");function oo(e,t){var a=lo(e);a.value===(a.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!=="PROGRESS")||(e.value=t??"")}function Lt(e,t,a,r){var n=lo(e);n[t]!==(n[t]=a)&&(t==="loading"&&(e[zo]=a),a==null?e.removeAttribute(t):typeof a!="string"&&rc(e).includes(t)?e[t]=a:e.setAttribute(t,a))}function lo(e){return e.__attributes??={[tc]:e.nodeName.includes("-"),[ac]:e.namespaceURI===sl}}var Zn=new Map;function rc(e){var t=e.getAttribute("is")||e.nodeName,a=Zn.get(t);if(a)return a;Zn.set(t,a=[]);for(var r,n=e,i=Element.prototype;i!==n;){r=wi(n);for(var o in r)r[o].set&&a.push(o);n=_n(n)}return a}function Ka(e,t,a=t){var r=new WeakSet;qi(e,"input",async n=>{var i=n?e.defaultValue:e.value;if(i=Ds(e)?Fs(i):i,a(i),at!==null&&r.add(at),await br(),i!==(i=t())){var o=e.selectionStart,l=e.selectionEnd,v=e.value.length;if(e.value=i??"",l!==null){var c=e.value.length;o===l&&l===v&&c>v?(e.selectionStart=c,e.selectionEnd=c):(e.selectionStart=o,e.selectionEnd=Math.min(l,c))}}}),b(t)==null&&e.value&&(a(Ds(e)?Fs(e.value):e.value),at!==null&&r.add(at)),Mr(()=>{var n=t();if(e===document.activeElement){var i=jr??at;if(r.has(i))return}Ds(e)&&n===Fs(e.value)||e.type==="date"&&!n&&!e.value||n!==e.value&&(e.value=n??"")})}function Ds(e){var t=e.type;return t==="number"||t==="range"}function Fs(e){return e===""?null:+e}class Tn{#e=new WeakMap;#t;#a;static entries=new WeakMap;constructor(t){this.#a=t}observe(t,a){var r=this.#e.get(t)||new Set;return r.add(a),this.#e.set(t,r),this.#r().observe(t,this.#a),()=>{var n=this.#e.get(t);n.delete(a),n.size===0&&(this.#e.delete(t),this.#t.unobserve(t))}}#r(){return this.#t??(this.#t=new ResizeObserver(t=>{for(var a of t){Tn.entries.set(a.target,a);for(var r of this.#e.get(a.target)||[])r(a)}}))}}var sc=new Tn({box:"border-box"});function Jn(e,t,a){var r=sc.observe(e,()=>a(e[t]));Dt(()=>(b(()=>a(e[t])),r))}function ei(e,t){return e===t||e?.[Sa]===t}function Da(e={},t,a,r){return Dt(()=>{var n,i;return Mr(()=>{n=i,i=[],b(()=>{e!==a(...i)&&(t(e,...i),n&&ei(a(...n),e)&&t(null,...n))})}),()=>{or(()=>{i&&ei(a(...i),e)&&t(null,...i)})}}),e}function ti(e,t){Sl(window,["resize"],()=>lr(()=>t(window[e])))}function Qt(e){return function(...t){var a=t[0];return a.stopPropagation(),e?.apply(this,t)}}function At(e=!1){const t=it,a=t.l.u;if(!a)return;let r=()=>R(t.s);if(e){let n=0,i={};const o=es(()=>{let l=!1;const v=t.s;for(const c in v)v[c]!==i[c]&&(i[c]=v[c],l=!0);return l&&n++,n});r=()=>s(o)}a.b.length&&$l(()=>{ai(t,r),_s(a.b)}),Js(()=>{const n=b(()=>a.m.map(Po));return()=>{for(const i of n)typeof i=="function"&&i()}}),a.a.length&&Js(()=>{ai(t,r),_s(a.a)})}function ai(e,t){if(e.l.s)for(const a of e.l.s)s(a);t()}function Vr(e,t){var a=e.$$events?.[t.type],r=Zr(a)?a.slice():a==null?[]:[a];for(var n of r)n.call(this,t)}function $n(e,t,a){if(e==null)return t(void 0),a&&a(void 0),Wt;const r=b(()=>e.subscribe(t,a));return r.unsubscribe?()=>r.unsubscribe():r}const ur=[];function nc(e,t){return{subscribe:Be(e,t).subscribe}}function Be(e,t=Wt){let a=null;const r=new Set;function n(l){if(wn(e,l)&&(e=l,a)){const v=!ur.length;for(const c of r)c[1](),ur.push(c,e);if(v){for(let c=0;c<ur.length;c+=2)ur[c][0](ur[c+1]);ur.length=0}}}function i(l){n(l(e))}function o(l,v=Wt){const c=[l,v];return r.add(c),r.size===1&&(a=t(n,i)||Wt),l(e),()=>{r.delete(c),r.size===0&&a&&(a(),a=null)}}return{set:n,update:i,subscribe:o}}function co(e,t,a){const r=!Array.isArray(e),n=r?[e]:e;if(!n.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const i=t.length<2;return nc(a,(o,l)=>{let v=!1;const c=[];let u=0,h=Wt;const f=()=>{if(u)return;h();const w=t(r?c[0]:c,o,l);i?o(w):h=typeof w=="function"?w:Wt},p=n.map((w,T)=>$n(w,k=>{c[T]=k,u&=~(1<<T),v&&f()},()=>{u|=1<<T}));return v=!0,f(),function(){_s(p),h(),v=!1}})}function Ge(e){let t;return $n(e,a=>t=a)(),t}let ls=!1,sn=Symbol();function xe(e,t,a){const r=a[t]??={store:null,source:$(void 0),unsubscribe:Wt};if(r.store!==e&&!(sn in a))if(r.unsubscribe(),r.store=e??null,e==null)r.source.v=void 0,r.unsubscribe=Wt;else{var n=!0;r.unsubscribe=$n(e,i=>{n?r.source.v=i:g(r.source,i)}),n=!1}return e&&sn in a?Ge(e):s(r.source)}function qs(e,t){return e.set(t),t}function jt(){const e={};function t(){as(()=>{for(var a in e)e[a].unsubscribe();yi(e,sn,{enumerable:!1,value:!0})})}return[e,t]}function ic(e,t,a){return e.set(a),t}function oc(e){var t=ls;try{return ls=!1,[e(),ls]}finally{ls=t}}function gt(e,t,a,r){var n=!$r||(a&Xo)!==0,i=(a&Go)!==0,o=(a&Zo)!==0,l=r,v=!0,c=()=>(v&&(v=!1,l=o?b(r):r),l),u;if(i){var h=Sa in e||Lo in e;u=mr(e,t)?.set??(h&&t in e?se=>e[t]=se:void 0)}var f,p=!1;i?[f,p]=oc(()=>e[t]):f=e[t],f===void 0&&r!==void 0&&(f=c(),u&&(n&&Do(),u(f)));var w;if(n?w=()=>{var se=e[t];return se===void 0?c():(v=!0,se)}:w=()=>{var se=e[t];return se!==void 0&&(l=void 0),se===void 0?l:se},n&&(a&Ko)===0)return w;if(u){var T=e.$$legacy;return(function(se,Z){return arguments.length>0?((!n||!Z||T||p)&&u(Z?w():se),se):w()})}var k=!1,E=((a&Qo)!==0?es:ct)(()=>(k=!1,w()));i&&s(E);var W=rt;return(function(se,Z){if(arguments.length>0){const ae=Z?s(E):n&&i?_r(se):se;return g(E,ae),k=!0,l!==void 0&&(l=ae),se}return cr&&k||(W.f&Ea)!==0?E.v:s(E)})}function Fa(e){it===null&&yn(),$r&&it.l!==null?cc(it).m.push(e):Js(()=>{const t=b(e);if(typeof t=="function")return t})}function vo(e){it===null&&yn(),Fa(()=>()=>b(e))}function lc(e,t,{bubbles:a=!1,cancelable:r=!1}={}){return new CustomEvent(e,{detail:t,bubbles:a,cancelable:r})}function Mn(){const e=it;return e===null&&yn(),(t,a,r)=>{const n=e.s.$$events?.[t];if(n){const i=Zr(n)?n.slice():[n],o=lc(t,a,r);for(const l of i)l.call(e.x,o);return!o.defaultPrevented}return!0}}function cc(e){var t=e.l;return t.u??={a:[],b:[],m:[]}}const dc="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(dc);ll();const vc=e=>e;function uo(e){const t=e-1;return t*t*t+1}function ri(e){const t=typeof e=="string"&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[e,"px"]}function bt(e,{delay:t=0,duration:a=400,easing:r=vc}={}){const n=+getComputedStyle(e).opacity;return{delay:t,duration:a,easing:r,css:i=>`opacity: ${i*n}`}}function fo(e,{delay:t=0,duration:a=400,easing:r=uo,x:n=0,y:i=0,opacity:o=0}={}){const l=getComputedStyle(e),v=+l.opacity,c=l.transform==="none"?"":l.transform,u=v*(1-o),[h,f]=ri(n),[p,w]=ri(i);return{delay:t,duration:a,easing:r,css:(T,k)=>`
			transform: ${c} translate(${(1-T)*h}${f}, ${(1-T)*p}${w});
			opacity: ${v-u*k}`}}function An(e,{delay:t=0,duration:a=400,easing:r=uo,start:n=0,opacity:i=0}={}){const o=getComputedStyle(e),l=+o.opacity,v=o.transform==="none"?"":o.transform,c=1-n,u=l*(1-i);return{delay:t,duration:a,easing:r,css:(h,f)=>`
			transform: ${v} scale(${1-c*f});
			opacity: ${l-u*f}
		`}}const uc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-arrows-shuffle-2"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 4l3 3l-3 3" /><path d="M18 20l3 -3l-3 -3" /><path d="M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5" /><path d="M3 17h3a5 5 0 0 0 5 -5a5 5 0 0 1 5 -5h5" /></svg>',fc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-deezer"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 16.5h2v.5h-2z" /><path d="M8 16.5h2.5v.5h-2.5z" /><path d="M16 17h-2.5v-.5h2.5z" /><path d="M21.5 17h-2.5v-.5h2.5z" /><path d="M21.5 13h-2.5v.5h2.5z" /><path d="M21.5 9.5h-2.5v.5h2.5z" /><path d="M21.5 6h-2.5v.5h2.5z" /><path d="M16 13h-2.5v.5h2.5z" /><path d="M8 13.5h2.5v-.5h-2.5z" /><path d="M8 9.5h2.5v.5h-2.5z" /></svg>',hc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-compact-down"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 11l8 3l8 -3" /></svg>',pc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-compact-left"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M13 20l-3 -8l3 -8" /></svg>',gc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-left"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 6l-6 6l6 6" /></svg>',si='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-disc"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0" /><path d="M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M7 12a5 5 0 0 1 5 -5" /><path d="M12 17a5 5 0 0 0 5 -5" /></svg>',_c='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-grip-horizontal"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M5 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M12 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M12 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M19 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M19 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /></svg>',mc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-heart"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M19.5 12.572l-7.5 7.428l-7.5 -7.428a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572" /></svg>',bc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-heart"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6.979 3.074a6 6 0 0 1 4.988 1.425l.037 .033l.034 -.03a6 6 0 0 1 4.733 -1.44l.246 .036a6 6 0 0 1 3.364 10.008l-.18 .185l-.048 .041l-7.45 7.379a1 1 0 0 1 -1.313 .082l-.094 -.082l-7.493 -7.422a6 6 0 0 1 3.176 -10.215z" /></svg>',yc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-menu-2"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 6l16 0" /><path d="M4 12l16 0" /><path d="M4 18l16 0" /></svg>',Bs='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-music"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 17a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /><path d="M13 17a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /><path d="M9 17v-13h10v13" /><path d="M9 8h10" /></svg>',wc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-pause"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z" /><path d="M17 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z" /></svg>',kc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-player-play"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 4v16l13 -8z" /></svg>',xc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-play"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 4v16a1 1 0 0 0 1.524 .852l13 -8a1 1 0 0 0 0 -1.704l-13 -8a1 1 0 0 0 -1.524 .852z" /></svg>',Ec='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-skip-back"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M19.496 4.136l-12 7a1 1 0 0 0 0 1.728l12 7a1 1 0 0 0 1.504 -.864v-14a1 1 0 0 0 -1.504 -.864z" /><path d="M4 4a1 1 0 0 1 .993 .883l.007 .117v14a1 1 0 0 1 -1.993 .117l-.007 -.117v-14a1 1 0 0 1 1 -1z" /></svg>',Sc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-skip-forward"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 5v14a1 1 0 0 0 1.504 .864l12 -7a1 1 0 0 0 0 -1.728l-12 -7a1 1 0 0 0 -1.504 .864z" /><path d="M20 4a1 1 0 0 1 .993 .883l.007 .117v14a1 1 0 0 1 -1.993 .117l-.007 -.117v-14a1 1 0 0 1 1 -1z" /></svg>',Tc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-playlist"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0" /><path d="M17 17v-13h4" /><path d="M13 5h-10" /><path d="M3 9l10 0" /><path d="M9 13h-6" /></svg>',$c='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-radio"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3l-9.371 3.749a1 1 0 0 0 -.629 .928v11.323a1 1 0 0 0 1 1h14a1 1 0 0 0 1 -1v-11a1 1 0 0 0 -1 -1h-14.5" /><path d="M4 12h16" /><path d="M7 12v-2" /><path d="M17 16v.01" /><path d="M13 16v.01" /></svg>',Mc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-refresh"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4" /><path d="M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4" /></svg>',Ac='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-repeat"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 12v-3a3 3 0 0 1 3 -3h13m-3 -3l3 3l-3 3" /><path d="M20 12v3a3 3 0 0 1 -3 3h-13m3 3l-3 -3l3 -3" /></svg>',Pc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-search"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0" /><path d="M21 21l-6 -6" /></svg>',Cc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-settings"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z" /><path d="M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /></svg>',Lc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-trash"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 7l16 0" /><path d="M10 11l0 6" /><path d="M14 11l0 6" /><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12" /><path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3" /></svg>',zc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 8a5 5 0 0 1 0 8" /><path d="M17.7 5a9 9 0 0 1 0 14" /><path d="M6 15h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l3.5 -4.5a.8 .8 0 0 1 1.5 .5v14a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5" /></svg>',Ic='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume-2"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 8a5 5 0 0 1 0 8" /><path d="M6 15h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l3.5 -4.5a.8 .8 0 0 1 1.5 .5v14a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5" /></svg>',Rc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume-3"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 15h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l3.5 -4.5a.8 .8 0 0 1 1.5 .5v14a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5" /><path d="M16 10l4 4m0 -4l-4 4" /></svg>',jc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume-off"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 8a5 5 0 0 1 1.912 4.934m-1.377 2.602a5 5 0 0 1 -.535 .464" /><path d="M17.7 5a9 9 0 0 1 2.362 11.086m-1.676 2.299a9 9 0 0 1 -.686 .615" /><path d="M9.069 5.054l.431 -.554a.8 .8 0 0 1 1.5 .5v2m0 4v8a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l1.294 -1.664" /><path d="M3 3l18 18" /></svg>',Nc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-x"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 6l-12 12" /><path d="M6 6l12 12" /></svg>',Oc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-device-floppy"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2" /><path d="M12 14m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0" /><path d="M14 4l0 4l-6 0l0 -4" /></svg>',Dc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-file-pencil"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3v4a1 1 0 0 0 1 1h4" /><path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z" /><path d="M10 18l5 -5a1.414 1.414 0 0 0 -2 -2l-5 5v2h2z" /></svg>',ni='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-plus"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 5l0 14" /><path d="M5 12l14 0" /></svg>',Fc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-circle-check"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0" /><path d="M9 12l2 2l4 -4" /></svg>',qc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-dots"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /></svg>',Bc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-sort-descending"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 6l9 0" /><path d="M4 12l7 0" /><path d="M4 18l7 0" /><path d="M15 15l3 3l3 -3" /><path d="M18 6l0 12" /></svg>',Uc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-sort-ascending"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 6l7 0" /><path d="M4 12l7 0" /><path d="M4 18l9 0" /><path d="M15 9l3 -3l3 3" /><path d="M18 6l0 12" /></svg>',Hc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-yandex"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 20v-16h-2a4 4 0 0 0 -4 4v1a4 4 0 0 0 4 4h2" /><path d="M9 20l3 -7" /></svg>',y={ARTISTS:Bs,ALBUMS:si,GENRES:Bs,PLAYLISTS:Tc,RADIO:$c,SEARCH:Pc,PLAY:xc,PLAY_OUTLINE:kc,PAUSE:wc,PREVIOUS:Ec,NEXT:Sc,SHUFFLE:uc,REPEAT:Ac,VOLUME_FULL:zc,VOLUME_MEDIUM:Ic,VOLUME_MUTE:Rc,VOLUME_OFF:jc,HEART:mc,HEART_FILLED:bc,SYNC:Mc,SETTINGS:Cc,CLOSE:Nc,MENU:yc,BACK:gc,BACK_COMPACT:pc,CHEVRON_DOWN:hc,DRAG_HANDLE:_c,REMOVE:Lc,DEEZER:fc,SAVE:Oc,EDIT:Dc,ADD:ni,ACCEPT:Fc,DOTS:qc,ADD_TO_PLAYLIST:ni,ALBUM_LINK:si,ARTIST_LINK:Bs,SORT_DESC:Bc,SORT_ASC:Uc,YANDEX:Hc};function xr(e){if(!e||!e.image)return null;if(e.image.startsWith("http"))return e.image;let t="";return e.image==="local"?t=`${e.name}.jpg`:t=e.image,`/imagesw/radio-logos/thumbs/${encodeURIComponent(t)}`}function ii(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}const nn=[{id:"default",label:"Default (Moode Dark)",colors:{"--c-white-10":"rgba(255, 255, 255, 0.1)","--c-white-20":"rgba(255, 255, 255, 0.2)","--c-white-30":"rgba(255, 255, 255, 0.3)","--c-white-50":"rgba(255, 255, 255, 0.5)","--c-white-60":"rgba(255, 255, 255, 0.6)","--c-white-90":"rgba(255, 255, 255, 0.9)","--c-black-20":"rgba(0, 0, 0, 0.2)","--c-black-50":"rgba(0, 0, 0, 0.5)","--c-black-70":"rgba(0, 0, 0, 0.7)","--c-black-80":"rgba(0, 0, 0, 0.8)","--c-black-90":"rgba(0, 0, 0, 0.9)","--c-accent":"#fa2d48","--c-accent-hover":"#ff4d65","--c-text-primary":"#ffffff","--c-text-secondary":"rgba(255, 255, 255, 0.6)","--c-text-muted":"#888888","--c-text-inverse":"#000000","--c-bg-app":"#000000","--c-bg-main":"#121212","--c-bg-sidebar":"#000000","--c-bg-card":"#1a1a1a","--c-bg-placeholder":"rgba(255, 255, 255, 0.1)","--c-bg-glass":"rgba(18, 18, 18, 0.95)","--c-bg-toast":"#333333","--c-heart":"#ff4444","--c-error":"#ff4444","--c-surface-hover":"rgba(255, 255, 255, 0.1)","--c-surface-active":"rgba(255, 255, 255, 0.2)","--c-surface-input":"#1a1a1a","--c-surface-input-focus":"rgba(255, 255, 255, 0.1)","--c-surface-button":"rgba(255, 255, 255, 0.1)","--c-surface-button-hover":"rgba(255, 255, 255, 0.1)","--c-surface-drag-phantom":"#1a1a1a","--c-surface-drag-land":"rgba(255, 255, 255, 0.1)","--c-rail-bg":"rgba(255, 255, 255, 0.2)","--c-rail-bg-hover":"rgba(255, 255, 255, 0.3)","--c-skeleton-base":"rgba(255, 255, 255, 0.1)","--c-border":"rgba(255, 255, 255, 0.1)","--c-border-dim":"rgba(255, 255, 255, 0.1)","--c-border-bright":"rgba(255, 255, 255, 0.2)","--c-border-dashed":"rgba(255, 255, 255, 0.2)","--c-border-dashed-hover":"rgba(255, 255, 255, 0.5)","--c-overlay-dim":"rgba(0, 0, 0, 0.5)","--c-overlay-backdrop":"rgba(0, 0, 0, 0.8)","--c-shadow-card":"rgba(0, 0, 0, 0.3)","--c-shadow-popover":"rgba(0, 0, 0, 0.5)","--c-shadow-header":"rgba(0, 0, 0, 0.5)","--c-shadow-phantom":"rgba(0, 0, 0, 0.7)","--c-shadow-glow-accent":"rgba(250, 45, 72, 0.5)","--c-icon-idle":"#9ca3af","--c-icon-hover":"#ffffff","--c-icon-faint":"rgba(255, 255, 255, 0.5)","--icon-stroke-width":"1.5px","--header-height":"64px","--mini-player-height":"90px","--sidebar-width":"260px","--radius-sm":"4px","--radius-md":"8px","--radius-lg":"12px","--radius-xl":"20px","--radius-full":"9999px","--z-base":"1","--z-dock":"1000","--z-modal":"2000","--z-toast":"3000","--z-drag-item":"9999","--trans-fast":"0.2s ease","--trans-smooth":"0.3s cubic-bezier(0.2, 0.8, 0.2, 1)","--c-pl-0":"#fa2d48","--c-pl-1":"#2d7afa","--c-pl-2":"#2dfa85","--c-pl-3":"#faac2d","--c-pl-4":"#b82dfa","--c-pl-5":"#2dfaf3"}},{id:"gruvbox",label:"Gruvbox Dark",colors:{"--c-white-10":"rgba(251, 241, 199, 0.1)","--c-white-20":"rgba(251, 241, 199, 0.2)","--c-white-30":"rgba(251, 241, 199, 0.3)","--c-white-50":"rgba(251, 241, 199, 0.5)","--c-white-60":"rgba(251, 241, 199, 0.6)","--c-white-90":"rgba(251, 241, 199, 0.9)","--c-black-20":"rgba(40, 40, 40, 0.2)","--c-black-50":"rgba(40, 40, 40, 0.5)","--c-black-70":"rgba(40, 40, 40, 0.7)","--c-black-80":"rgba(40, 40, 40, 0.8)","--c-black-90":"rgba(40, 40, 40, 0.9)","--c-accent":"#d65d0e","--c-accent-hover":"#fe8019","--c-text-primary":"#fbf1c7","--c-text-secondary":"#ebdbb2","--c-text-muted":"#928374","--c-text-inverse":"#282828","--c-bg-app":"#282828","--c-bg-main":"#282828","--c-bg-sidebar":"#282828","--c-bg-card":"#3c3836","--c-bg-placeholder":"#504945","--c-bg-glass":"rgba(40, 40, 40, 0.98)","--c-bg-toast":"#32302f","--c-heart":"#fb4934","--c-error":"#cc241d","--c-surface-hover":"#3c3836","--c-surface-active":"#504945","--c-surface-input":"#3c3836","--c-surface-input-focus":"#504945","--c-surface-button":"rgba(251, 241, 199, 0.1)","--c-surface-button-hover":"rgba(251, 241, 199, 0.2)","--c-surface-drag-phantom":"#504945","--c-surface-drag-land":"rgba(251, 241, 199, 0.1)","--c-rail-bg":"#504945","--c-rail-bg-hover":"#665c54","--c-skeleton-base":"#3c3836","--c-border":"#504945","--c-border-dim":"#3c3836","--c-border-bright":"#665c54","--c-border-dashed":"rgba(168, 153, 132, 0.2)","--c-border-dashed-hover":"rgba(168, 153, 132, 0.5)","--c-overlay-dim":"rgba(40, 40, 40, 0.6)","--c-overlay-backdrop":"rgba(29, 32, 33, 0.8)","--c-shadow-card":"rgba(0, 0, 0, 0.3)","--c-shadow-popover":"rgba(0, 0, 0, 0.5)","--c-shadow-header":"rgba(0, 0, 0, 0.2)","--c-shadow-phantom":"rgba(0, 0, 0, 0.5)","--c-shadow-glow-accent":"rgba(214, 93, 14, 0.3)","--c-icon-idle":"#a89984","--c-icon-hover":"#fbf1c7","--c-icon-faint":"#504945","--icon-stroke-width":"1.5px","--header-height":"64px","--mini-player-height":"90px","--sidebar-width":"260px","--radius-sm":"4px","--radius-md":"8px","--radius-lg":"12px","--radius-xl":"16px","--radius-full":"9999px","--z-base":"1","--z-dock":"1000","--z-modal":"2000","--z-toast":"3000","--z-drag-item":"9999","--trans-fast":"0.2s ease","--trans-smooth":"0.3s cubic-bezier(0.2, 0.8, 0.2, 1)","--c-pl-0":"#cc241d","--c-pl-1":"#458588","--c-pl-2":"#a6e3a1","--c-pl-3":"#d65d0e","--c-pl-4":"#b16286","--c-pl-5":"#fabd2f"}}];function Yc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Us={exports:{}},Hs={exports:{}},oi;function Vc(){return oi||(oi=1,(function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t={rotl:function(a,r){return a<<r|a>>>32-r},rotr:function(a,r){return a<<32-r|a>>>r},endian:function(a){if(a.constructor==Number)return t.rotl(a,8)&16711935|t.rotl(a,24)&4278255360;for(var r=0;r<a.length;r++)a[r]=t.endian(a[r]);return a},randomBytes:function(a){for(var r=[];a>0;a--)r.push(Math.floor(Math.random()*256));return r},bytesToWords:function(a){for(var r=[],n=0,i=0;n<a.length;n++,i+=8)r[i>>>5]|=a[n]<<24-i%32;return r},wordsToBytes:function(a){for(var r=[],n=0;n<a.length*32;n+=8)r.push(a[n>>>5]>>>24-n%32&255);return r},bytesToHex:function(a){for(var r=[],n=0;n<a.length;n++)r.push((a[n]>>>4).toString(16)),r.push((a[n]&15).toString(16));return r.join("")},hexToBytes:function(a){for(var r=[],n=0;n<a.length;n+=2)r.push(parseInt(a.substr(n,2),16));return r},bytesToBase64:function(a){for(var r=[],n=0;n<a.length;n+=3)for(var i=a[n]<<16|a[n+1]<<8|a[n+2],o=0;o<4;o++)n*8+o*6<=a.length*8?r.push(e.charAt(i>>>6*(3-o)&63)):r.push("=");return r.join("")},base64ToBytes:function(a){a=a.replace(/[^A-Z0-9+\/]/ig,"");for(var r=[],n=0,i=0;n<a.length;i=++n%4)i!=0&&r.push((e.indexOf(a.charAt(n-1))&Math.pow(2,-2*i+8)-1)<<i*2|e.indexOf(a.charAt(n))>>>6-i*2);return r}};Hs.exports=t})()),Hs.exports}var Ys,li;function ci(){if(li)return Ys;li=1;var e={utf8:{stringToBytes:function(t){return e.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(e.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var a=[],r=0;r<t.length;r++)a.push(t.charCodeAt(r)&255);return a},bytesToString:function(t){for(var a=[],r=0;r<t.length;r++)a.push(String.fromCharCode(t[r]));return a.join("")}}};return Ys=e,Ys}var Vs,di;function Wc(){if(di)return Vs;di=1,Vs=function(a){return a!=null&&(e(a)||t(a)||!!a._isBuffer)};function e(a){return!!a.constructor&&typeof a.constructor.isBuffer=="function"&&a.constructor.isBuffer(a)}function t(a){return typeof a.readFloatLE=="function"&&typeof a.slice=="function"&&e(a.slice(0,0))}return Vs}var vi;function Qc(){return vi||(vi=1,(function(){var e=Vc(),t=ci().utf8,a=Wc(),r=ci().bin,n=function(i,o){i.constructor==String?o&&o.encoding==="binary"?i=r.stringToBytes(i):i=t.stringToBytes(i):a(i)?i=Array.prototype.slice.call(i,0):!Array.isArray(i)&&i.constructor!==Uint8Array&&(i=i.toString());for(var l=e.bytesToWords(i),v=i.length*8,c=1732584193,u=-271733879,h=-1732584194,f=271733878,p=0;p<l.length;p++)l[p]=(l[p]<<8|l[p]>>>24)&16711935|(l[p]<<24|l[p]>>>8)&4278255360;l[v>>>5]|=128<<v%32,l[(v+64>>>9<<4)+14]=v;for(var w=n._ff,T=n._gg,k=n._hh,E=n._ii,p=0;p<l.length;p+=16){var W=c,se=u,Z=h,ae=f;c=w(c,u,h,f,l[p+0],7,-680876936),f=w(f,c,u,h,l[p+1],12,-389564586),h=w(h,f,c,u,l[p+2],17,606105819),u=w(u,h,f,c,l[p+3],22,-1044525330),c=w(c,u,h,f,l[p+4],7,-176418897),f=w(f,c,u,h,l[p+5],12,1200080426),h=w(h,f,c,u,l[p+6],17,-1473231341),u=w(u,h,f,c,l[p+7],22,-45705983),c=w(c,u,h,f,l[p+8],7,1770035416),f=w(f,c,u,h,l[p+9],12,-1958414417),h=w(h,f,c,u,l[p+10],17,-42063),u=w(u,h,f,c,l[p+11],22,-1990404162),c=w(c,u,h,f,l[p+12],7,1804603682),f=w(f,c,u,h,l[p+13],12,-40341101),h=w(h,f,c,u,l[p+14],17,-1502002290),u=w(u,h,f,c,l[p+15],22,1236535329),c=T(c,u,h,f,l[p+1],5,-165796510),f=T(f,c,u,h,l[p+6],9,-1069501632),h=T(h,f,c,u,l[p+11],14,643717713),u=T(u,h,f,c,l[p+0],20,-373897302),c=T(c,u,h,f,l[p+5],5,-701558691),f=T(f,c,u,h,l[p+10],9,38016083),h=T(h,f,c,u,l[p+15],14,-660478335),u=T(u,h,f,c,l[p+4],20,-405537848),c=T(c,u,h,f,l[p+9],5,568446438),f=T(f,c,u,h,l[p+14],9,-1019803690),h=T(h,f,c,u,l[p+3],14,-187363961),u=T(u,h,f,c,l[p+8],20,1163531501),c=T(c,u,h,f,l[p+13],5,-1444681467),f=T(f,c,u,h,l[p+2],9,-51403784),h=T(h,f,c,u,l[p+7],14,1735328473),u=T(u,h,f,c,l[p+12],20,-1926607734),c=k(c,u,h,f,l[p+5],4,-378558),f=k(f,c,u,h,l[p+8],11,-2022574463),h=k(h,f,c,u,l[p+11],16,1839030562),u=k(u,h,f,c,l[p+14],23,-35309556),c=k(c,u,h,f,l[p+1],4,-1530992060),f=k(f,c,u,h,l[p+4],11,1272893353),h=k(h,f,c,u,l[p+7],16,-155497632),u=k(u,h,f,c,l[p+10],23,-1094730640),c=k(c,u,h,f,l[p+13],4,681279174),f=k(f,c,u,h,l[p+0],11,-358537222),h=k(h,f,c,u,l[p+3],16,-722521979),u=k(u,h,f,c,l[p+6],23,76029189),c=k(c,u,h,f,l[p+9],4,-640364487),f=k(f,c,u,h,l[p+12],11,-421815835),h=k(h,f,c,u,l[p+15],16,530742520),u=k(u,h,f,c,l[p+2],23,-995338651),c=E(c,u,h,f,l[p+0],6,-198630844),f=E(f,c,u,h,l[p+7],10,1126891415),h=E(h,f,c,u,l[p+14],15,-1416354905),u=E(u,h,f,c,l[p+5],21,-57434055),c=E(c,u,h,f,l[p+12],6,1700485571),f=E(f,c,u,h,l[p+3],10,-1894986606),h=E(h,f,c,u,l[p+10],15,-1051523),u=E(u,h,f,c,l[p+1],21,-2054922799),c=E(c,u,h,f,l[p+8],6,1873313359),f=E(f,c,u,h,l[p+15],10,-30611744),h=E(h,f,c,u,l[p+6],15,-1560198380),u=E(u,h,f,c,l[p+13],21,1309151649),c=E(c,u,h,f,l[p+4],6,-145523070),f=E(f,c,u,h,l[p+11],10,-1120210379),h=E(h,f,c,u,l[p+2],15,718787259),u=E(u,h,f,c,l[p+9],21,-343485551),c=c+W>>>0,u=u+se>>>0,h=h+Z>>>0,f=f+ae>>>0}return e.endian([c,u,h,f])};n._ff=function(i,o,l,v,c,u,h){var f=i+(o&l|~o&v)+(c>>>0)+h;return(f<<u|f>>>32-u)+o},n._gg=function(i,o,l,v,c,u,h){var f=i+(o&v|l&~v)+(c>>>0)+h;return(f<<u|f>>>32-u)+o},n._hh=function(i,o,l,v,c,u,h){var f=i+(o^l^v)+(c>>>0)+h;return(f<<u|f>>>32-u)+o},n._ii=function(i,o,l,v,c,u,h){var f=i+(l^(o|~v))+(c>>>0)+h;return(f<<u|f>>>32-u)+o},n._blocksize=16,n._digestsize=16,Us.exports=function(i,o){if(i==null)throw new Error("Illegal argument "+i);var l=e.wordsToBytes(n(i,o));return o&&o.asBytes?l:o&&o.asString?r.bytesToString(l):e.bytesToHex(l)}})()),Us.exports}var Xc=Qc();const ho=Yc(Xc),ui=Be("Disconnected"),on=Be(null);let Ws;function De(e,t="info"){on.set({text:e,type:t}),Ws&&clearTimeout(Ws),Ws=setTimeout(()=>{on.set(null)},3e3)}const Kc=localStorage.getItem("app_theme")||"default",ws=Be(Kc);ws.subscribe(e=>{if(typeof document>"u")return;localStorage.setItem("app_theme",e);const t=nn.find(r=>r.id===e);if(!t)return;const a=document.documentElement;document.body.setAttribute("data-theme",e),Object.entries(t.colors).forEach(([r,n])=>{a.style.setProperty(r,n)})});const ks=Be({isOpen:!1,title:"",message:"",confirmLabel:"Confirm",cancelLabel:"Cancel",onConfirm:null,type:"confirm",inputValue:"",placeholder:"",options:[]});function fa({title:e="Confirm Action",message:t="Are you sure?",confirmLabel:a="Confirm",cancelLabel:r="Cancel",type:n="confirm",inputValue:i="",placeholder:o="",options:l=[],onConfirm:v=()=>{}}){ks.set({isOpen:!0,title:e,message:t,confirmLabel:a,cancelLabel:r,type:n,inputValue:i,placeholder:o,options:l,onConfirm:v})}function cs(){ks.set({isOpen:!1,title:"",message:"",confirmLabel:"",cancelLabel:"",onConfirm:null,type:"confirm",inputValue:"",placeholder:"",options:[]})}const kt=Be({state:"stop",volume:50,elapsed:0,duration:0,random:!1,repeat:!1,bitrate:0,format:"",song:0,songid:0}),ra=Be({title:"Not Playing",artist:"",album:"",file:"",stationName:null,id:null,pos:null}),dr=Be({active:!1,tracks:[],currentIndex:-1,currentTrackFile:null}),xs=Be(!1),fs=Be(!1),ln=Be(!1),cn=Be(!1),Ot=Be("library"),rs=Be(null),sa=Be(!1),Gc=localStorage.getItem("sidebarCollapsed")==="true",dn=Be(Gc);dn.subscribe(e=>{typeof localStorage<"u"&&localStorage.setItem("sidebarCollapsed",String(e))});const qa=Be([]),Ls=Be([]),Fr=Be([]),Zc=Be(null),Ia=Be(new Set),mt=Be(!1),Vt=Be([{view:"root"}]),Ga=Be([]),po=Be(0),qr=Be(""),go=Be({});function Jc(e,t){go.update(a=>({...a,[e]:t}))}function ed(e){return Ge(go)[e]||0}const Pn=Be({isOpen:!1,track:null,context:{type:"general",playlistName:null,index:null},x:0,y:0,triggerRect:null});function td(){if(typeof navigator<"u"&&navigator.vibrate)try{navigator.vibrate(70)}catch{}}function Wr(e,t,a={}){if(!t&&a.type!=="playlist-card")return;td();let r=0,n=0,i=null,o=e.currentTarget;!o&&e.target&&e.target.closest&&(o=e.target.closest("button")||e.target),o&&o.getBoundingClientRect&&(i=o.getBoundingClientRect());const l=e.detail?.originalEvent||e;l.touches&&l.touches.length>0?(r=l.touches[0].clientX,n=l.touches[0].clientY):l.clientX&&(r=l.clientX,n=l.clientY);const v={type:"general",playlistName:null,index:null,...a};Pn.set({isOpen:!0,track:t,context:v,x:r,y:n,triggerRect:i})}function Ht(){Pn.set({isOpen:!1,track:null,context:{},x:0,y:0,triggerRect:null})}let vn=null,un=null;function ad(e){un=e}function Oa(e,t=null){t&&(vn=t),un?un(e,t):console.warn("Router callback not set!")}function rd(){const e=vn;return vn=null,e}function sd(){window.history.back()}function Er(e,t=[],a=null){if(!e||!e.file)return"/images/default_cover.png";if(e.image&&e.image.startsWith("http"))return e.image;if(_o(e.file)||e.genre==="Radio")return e.image?xr(e):mo(e,t,a)||"/images/radio_placeholder.png";let r=e.file.startsWith("/")?e.file.slice(1):e.file;return`/coverart.php/${encodeURI(r)}`}function Qr(e,t="sm",a=[],r=null){if(!e||e.file&&(_o(e.file)||e.genre==="Radio"||Array.isArray(e)))return e&&e.image?xr(e):mo(e,a,r)||"/images/radio_icon.png";if(e.image&&e.image.startsWith("http"))return e.image;if(!e.file)return"/images/default_icon.png";if(e.thumbHash){const n=t==="md"?"":"_sm";return`/imagesw/thmcache/${e.thumbHash}${n}.jpg`}try{const n=e.file.lastIndexOf("/"),i=n===-1?".":e.file.substring(0,n);return`/imagesw/thmcache/${ho(i)}${t==="md"?"":"_sm"}.jpg`}catch{let i=e.file.startsWith("/")?e.file.slice(1):e.file;return`/coverart.php/${encodeURI(i)}`}}function _o(e){return e?e.startsWith("http")||e.includes("://")||e.includes("RADIO"):!1}function mo(e,t,a){const r=v=>(v||"").toString().toLowerCase().replace(/[^a-z0-9]/g,""),n=r(e?.title),i=r(e?.stationName),o=r(a);if(t&&t.length>0){const v=t.find(c=>{const u=r(c.name);return u?u===i||u===o||n&&u===n||n&&n.includes(u)&&u.length>3:!1});if(v)return xr(v)}const l=e?.stationName||a;return l?xr({name:l,image:"local"}):null}co([ra,qa,rs],([e,t,a])=>Er(e,t,a));co(ra,e=>!e||!e.file||e.file.startsWith("http")?null:`/coverart.php/${encodeURI(e.file)}`);const nd=localStorage.getItem("alarmTime")||"08:00",id=localStorage.getItem("alarmEnabled")==="true",od=localStorage.getItem("alarmPlaylist")||"Favorites",fn=Be(nd),hn=Be(id),pn=Be(od);fn.subscribe(e=>localStorage.setItem("alarmTime",e));hn.subscribe(e=>localStorage.setItem("alarmEnabled",String(e)));pn.subscribe(e=>localStorage.setItem("alarmPlaylist",e));const ld=localStorage.getItem("yandex_token")||"",Xr=Be(ld);Xr.subscribe(e=>{typeof localStorage<"u"&&localStorage.setItem("yandex_token",e)});const cd=localStorage.getItem("yandex_enabled")==="true",Es=Be(cd);Es.subscribe(e=>{typeof localStorage<"u"&&localStorage.setItem("yandex_enabled",String(e))});const nt={NAME:"MoodePlayerDB",STORE_NAME:"music",VERSION:3},Qs={SYNC:"/wave-api.php",STATIONS:e=>"/wave-api.php?action=stations",COVER_ART:e=>`/coverart.php?u=${encodeURIComponent(e)}`,RADIO_LOGOS:e=>`/imagesw/radio-logos/thumbs/${e}`},Ra={open(){return new Promise((e,t)=>{const a=indexedDB.open(nt.NAME,nt.VERSION);a.onupgradeneeded=r=>{const n=r.target.result,i=r.target.transaction;let o;n.objectStoreNames.contains(nt.STORE_NAME)?o=i.objectStore(nt.STORE_NAME):o=n.createObjectStore(nt.STORE_NAME,{keyPath:"file"}),o.indexNames.contains("artist")||o.createIndex("artist","artist",{unique:!1}),o.indexNames.contains("album")||o.createIndex("album","album",{unique:!1}),o.indexNames.contains("genre")||o.createIndex("genre","genre",{unique:!1}),o.indexNames.contains("album_artist")||o.createIndex("album_artist","album_artist",{unique:!1})},a.onsuccess=()=>e(a.result),a.onerror=()=>t(a.error)})},async clear(){const e=await this.open();return new Promise((t,a)=>{const r=e.transaction(nt.STORE_NAME,"readwrite");r.objectStore(nt.STORE_NAME).clear(),r.oncomplete=()=>t(),r.onerror=()=>a(r.error)})},async bulkAdd(e){const t=await this.open();return new Promise((a,r)=>{const n=t.transaction(nt.STORE_NAME,"readwrite"),i=n.objectStore(nt.STORE_NAME);e.forEach(o=>i.put(o)),n.oncomplete=()=>a(),n.onerror=()=>r(n.error)})},async getFilesMap(e){if(!e||e.length===0)return new Map;const t=await this.open();return new Promise(a=>{const n=t.transaction(nt.STORE_NAME,"readonly").objectStore(nt.STORE_NAME),i=new Map;let o=0;e.forEach(l=>{const v=l.normalize("NFC").trim(),c=n.get(v);c.onsuccess=u=>{u.target.result&&i.set(l,u.target.result),o++,o===e.length&&a(i)},c.onerror=()=>{o++,o===e.length&&a(i)}})})},async getArtists(){const e=await this.open();return new Promise((t,a)=>{const n=e.transaction(nt.STORE_NAME,"readonly").objectStore(nt.STORE_NAME),i=new Map,o=n.openCursor();o.onsuccess=l=>{const v=l.target.result;if(v){const c=v.value,u=c.album_artist||c.artist;u&&!i.has(u)&&i.set(u,{name:u,file:c.file,thumbHash:c.thumbHash}),v.continue()}else{const c=Array.from(i.values()).sort((u,h)=>u.name.localeCompare(h.name,void 0,{sensitivity:"base"}));t(c)}},o.onerror=()=>a(o.error)})},async getAlbums(){const e=await this.open();return new Promise((t,a)=>{const n=e.transaction(nt.STORE_NAME,"readonly").objectStore(nt.STORE_NAME).index("album"),i=[],o=n.openCursor(null,"nextunique");o.onsuccess=l=>{const v=l.target.result;if(v){const c=v.value;i.push({name:c.album,artist:c.album_artist||c.artist,file:c.file,thumbHash:c.thumbHash,qualityBadge:c.qualityBadge,year:c.year||0}),v.continue()}else t(i)},o.onerror=()=>a(o.error)})},async getArtistAlbums(e){if(!e)return[];const t=await this.open(),a=e.normalize("NFC").trim();return new Promise((r,n)=>{const o=t.transaction(nt.STORE_NAME,"readonly").objectStore(nt.STORE_NAME),l=new Promise(c=>{o.indexNames.contains("album_artist")?o.index("album_artist").getAll(IDBKeyRange.only(a)).onsuccess=u=>c(u.target.result):c([])}),v=new Promise(c=>{o.index("artist").getAll(IDBKeyRange.only(a)).onsuccess=u=>c(u.target.result)});Promise.all([l,v]).then(([c,u])=>{const h=[...c,...u],f=[],p=new Set;h.forEach(w=>{p.has(w.album)||(p.add(w.album),f.push({name:w.album,artist:w.album_artist||w.artist,file:w.file,thumbHash:w.thumbHash,qualityBadge:w.qualityBadge,year:w.year||0}))}),r(f)}).catch(c=>n(c))})},async getAlbumTracks(e,t=null){const a=await this.open(),r=e.normalize("NFC").trim(),n=t?t.normalize("NFC").trim():null;return console.log(`[DB] getAlbumTracks called. Album: "${r}", FilterArtist: "${n}"`),new Promise((i,o)=>{const v=a.transaction(nt.STORE_NAME,"readonly").objectStore(nt.STORE_NAME).index("album"),c=IDBKeyRange.only(r),u=v.getAll(c);u.onsuccess=()=>{let h=u.result;if(console.log(`[DB] Found ${h.length} raw tracks for album "${r}"`),n){const f=h.length;h=h.filter(p=>{const w=(p.artist||"").normalize("NFC").trim(),T=(p.album_artist||"").normalize("NFC").trim();return w===n||T===n}),console.log(`[DB] After artist filter: ${h.length} tracks (Removed ${f-h.length})`)}else console.log("[DB] No artist filter provided. Returning all tracks.");h.sort((f,p)=>{const w=parseInt(f.disc||1),T=parseInt(p.disc||1);if(w!==T)return w-T;const k=parseInt(f.track||0),E=parseInt(p.track||0);return k-E}),i(h)},u.onerror=()=>o(u.error)})},async getGenres(){const e=await this.open();return new Promise((t,a)=>{const n=e.transaction(nt.STORE_NAME,"readonly").objectStore(nt.STORE_NAME).index("genre"),i=[],o=n.openKeyCursor(null,"nextunique");o.onsuccess=l=>{const v=l.target.result;v?(i.push(v.key),v.continue()):t(i)},o.onerror=()=>a(o.error)})},async getGenreTracks(e){const t=await this.open(),a=e.normalize("NFC").trim();return new Promise((r,n)=>{const l=t.transaction(nt.STORE_NAME,"readonly").objectStore(nt.STORE_NAME).index("genre").getAll(IDBKeyRange.only(a));l.onsuccess=()=>r(l.result),l.onerror=()=>n(l.error)})},async search(e){if(!e)return[];const t=e.toLowerCase().normalize("NFC").trim(),a=await this.open();return new Promise((r,n)=>{const o=a.transaction(nt.STORE_NAME,"readonly").objectStore(nt.STORE_NAME),l=[],v=100,c=o.openCursor();c.onsuccess=u=>{const h=u.target.result;if(h){const f=h.value;if((f.title&&f.title.toLowerCase().includes(t)||f.artist&&f.artist.toLowerCase().includes(t)||f.album&&f.album.toLowerCase().includes(t)||f.album_artist&&f.album_artist.toLowerCase().includes(t))&&l.push(f),l.length>=v){r(l);return}h.continue()}else r(l)},c.onerror=()=>n(c.error)})}};var dd=x('<div class="skeleton svelte-tl058d"></div>');function Rt(e,t){let a=gt(t,"width",8,"100%"),r=gt(t,"height",8,"20px"),n=gt(t,"radius",8,"4px"),i=gt(t,"style",8,"");var o=dd();ve(()=>lt(o,`width: ${a()??""}; height: ${r()??""}; border-radius: ${n()??""}; ${i()??""}`)),m(e,o)}var vd=x('<div class="skel svelte-1b8que2"><!></div>'),ud=x('<img loading="lazy"/>'),fd=x('<div class="loader svelte-1b8que2"><!> <!> <!></div>');function nr(e,t){xt(t,!1);let a=gt(t,"src",8),r=gt(t,"alt",8,""),n=gt(t,"radius",8,"0px");const i=Mn();let o=$("loading");function l(){g(o,"loaded")}function v(k){i("error",k),g(o,"error")}re(()=>R(a()),()=>{a()?g(o,"loading"):g(o,"error")}),Ut(),At();var c=fd(),u=d(c);{var h=k=>{var E=vd(),W=d(E);Rt(W,{width:"100%",height:"100%",get radius(){return n()}}),ot(2,E,()=>bt,()=>({duration:200})),m(k,E)};L(u,k=>{s(o)==="loading"&&k(h)})}var f=_(u,2);{var p=k=>{var E=ud();let W;ve(()=>{Lt(E,"src",a()),Lt(E,"alt",r()),lt(E,`border-radius: ${n()??""}`),W=Qe(E,1,"svelte-1b8que2",null,W,{vis:s(o)==="loaded"})}),P("load",E,l),P("error",E,v),m(k,E)};L(f,k=>{a()&&s(o)!=="error"&&k(p)})}var w=_(f,2);{var T=k=>{var E=et(),W=Ae(E);us(W,t,"fallback",{}),m(k,E)};L(w,k=>{s(o)==="error"&&k(T)})}ve(()=>lt(c,`border-radius: ${n()??""}`)),m(e,c),Et()}const Ya={DEFAULT_IP:typeof window<"u"?window.location.hostname:"localhost",get MOODE_IP(){try{return typeof localStorage<"u"?localStorage.getItem("moode_ip")||this.DEFAULT_IP:this.DEFAULT_IP}catch{return this.DEFAULT_IP}},setMoodeIp(e){if(typeof localStorage<"u"){const t=e?e.trim():"";t&&localStorage.setItem("moode_ip",t)}}};class hd{constructor(){this.socket=null,this.queue=[],this.isProcessing=!1,this.reconnectTimer=null,this.watchdogTimer=null,this._buffer=""}get isConnected(){return this.socket&&this.socket.readyState===WebSocket.OPEN}connect(){if(this.socket&&(this.socket.readyState===WebSocket.CONNECTING||this.socket.readyState===WebSocket.OPEN))return;this.reconnectTimer&&clearTimeout(this.reconnectTimer);let t=Ya.MOODE_IP||window.location.hostname;t=t.replace(/^https?:\/\//,"").split(":")[0].split("/")[0];const a=Ya.WS_PORT||"8080",r=`ws://${t}:${a}`;console.log("[MPD] Connecting to:",r);try{this.socket=new WebSocket(r,["binary"])}catch(n){console.error("[MPD] Connection Error:",n),this.reconnectTimer=setTimeout(()=>this.connect(),5e3);return}this.socket.onopen=()=>{console.log("[MPD] Connected"),ui.set("Connected"),De("Connected to Moode","success"),this._processQueue()},this.socket.onmessage=n=>this._handleMessage(n),this.socket.onclose=n=>{console.warn("[MPD] Socket closed",n.code,n.reason),ui.set("Disconnected"),this._cleanup(),this.reconnectTimer=setTimeout(()=>this.connect(),3e3)},this.socket.onerror=n=>{console.error("[MPD] Socket error",n)}}send(t){return new Promise((a,r)=>{this.queue.push({cmd:t,resolve:a,reject:r}),this._processQueue()})}_cleanup(){for(this.isProcessing=!1,this._buffer="",this.watchdogTimer&&clearTimeout(this.watchdogTimer);this.queue.length>0;){const{reject:t}=this.queue.shift();t(new Error("Connection lost"))}}async _processQueue(){if(this.isProcessing||this.queue.length===0||!this.isConnected)return;this.isProcessing=!0;const{cmd:t}=this.queue[0];this.watchdogTimer&&clearTimeout(this.watchdogTimer),this.watchdogTimer=setTimeout(()=>{console.error("[MPD] Watchdog timeout"),this.socket&&this.socket.close()},2e4);try{const a=t.endsWith(`
`)?t:t+`
`;this.socket.send(new TextEncoder().encode(a))}catch(a){console.error("[MPD] Send error",a),this._cleanup()}}async _handleMessage(t){let a=t.data;a instanceof Blob&&(a=await a.text()),this.watchdogTimer&&(clearTimeout(this.watchdogTimer),this.watchdogTimer=null),this._buffer+=a;const r=this._buffer.endsWith(`
OK
`)||this._buffer===`OK
`,n=this._buffer.startsWith("ACK");if(r||n){const i=this._buffer;this._buffer="";const o=this.queue.shift();if(this.isProcessing=!1,o)if(n)console.error(`[MPD] Error: ${i.trim()}`),o.reject(new Error(i.trim()));else{const l=i.replace(/\nOK\n$/,"").replace(/^OK\n$/,"");o.resolve(l)}this._processQueue()}else{if(!this.queue.length)return;this.watchdogTimer=setTimeout(()=>{console.error("[MPD] Watchdog timeout receiving large data"),this.socket&&this.socket.close()},2e4)}}}const ze=new hd,ta={parseKeyValue(e){const t={};if(!e)return t;const a=e.split(`
`);for(const r of a){const n=r.indexOf(": ");if(n===-1)continue;const i=r.substring(0,n).toLowerCase(),o=r.substring(n+2);t[i]=o}return t},parseStatus(e){const t=this.parseKeyValue(e);let a="";if(t.audio){const r=t.audio.split(":");r[1]&&(a=`${r[1]}-bit`)}return{state:t.state||"stop",volume:parseInt(t.volume)||0,elapsed:parseFloat(t.elapsed)||0,duration:parseFloat(t.duration)||0,random:t.random==="1",repeat:t.repeat==="1",song:parseInt(t.song)||0,songId:parseInt(t.songid)||-1,playlistLength:parseInt(t.playlistlength)||0,bitrate:parseInt(t.bitrate)||0,format:a,playlistVersion:parseInt(t.playlist)||0}},parseCurrentSong(e){const t=this.parseKeyValue(e);return this._normalizeTrack(t)},parsePlaylists(e){const t=e.split(`
`),a=[];let r=null;for(const n of t)n.startsWith("playlist: ")?(r&&a.push(r),r={playlist:n.substring(10)}):n.startsWith("Last-Modified: ")&&r&&(r["last-modified"]=n.substring(15));return r&&a.push(r),a.map(n=>({name:n.playlist,lastModified:n["last-modified"]}))},parseTracks(e){const t=[];let a=null,r=0,n=e.indexOf(`
`,r);for(;n!==-1;){const i=e.substring(r,n),o=i.indexOf(": ");if(o!==-1){const l=i.substring(0,o).toLowerCase(),v=i.substring(o+2);l==="file"?(a&&t.push(this._normalizeTrack(a)),a={file:v}):a&&(a[l]=v)}r=n+1,n=e.indexOf(`
`,r)}return a&&t.push(this._normalizeTrack(a)),t},_normalizeTrack(e){const t=e.file||e.File||"",a=e.Title||e.title||e.Name||e.name||t.split("/").pop()||"Unknown";return{file:t,title:a,artist:e.Artist||e.artist||"Unknown Artist",album:e.Album||e.album||"Unknown Album",genre:e.Genre||e.genre||"Unknown",time:parseFloat(e.Time||e.time||0),track:e.Track||e.track||"",id:e.Id||e.id,pos:e.Pos||e.pos||null,stationName:e.name||e.Name||null}}},pd=1e3,gd=250;let hs=null,Br=null,ps=0,Ua=1,Ss=!0,ka=!1,Va=0,fr=null;function gs(e){return e?String(e).normalize("NFC").replace(/\\/g,"\\\\").replace(/"/g,'\\"'):""}function _d(){md(),Ss=!0,ka=!1,Va=0,mt.set(!1),da(),hs=setInterval(()=>{ze.isConnected&&!ze.isProcessing&&da()},pd)}function md(){hs&&(clearInterval(hs),hs=null),Cn()}async function da(){try{const e=await ze.send("status"),t=await ze.send("currentsong"),a=ta.parseStatus(e),r=ta.parseCurrentSong(t);yd(a,r);const n=Ge(po);if(Ge(mt))return;(a.playlistLength>0&&a.playlistVersion!==n||a.playlistLength>0&&Ge(Ga).length===0)&&bd(a.playlistVersion)}catch{}}async function bd(e){if(!Ge(mt))try{const t=await ze.send("playlistinfo");if(Ge(mt))return;const a=ta.parseTracks(t),r=a.map(o=>o.file).filter(o=>o&&!o.startsWith("http"));let n=new Map;if(r.length>0)try{n=await Ra.getFilesMap(r)}catch(o){console.warn("Failed to hydrate queue from DB",o)}const i=a.map(o=>{const l=(o.file||"").normalize("NFC"),v=n.get(l);return v?{...o,thumbHash:v.thumbHash,qualityBadge:v.qualityBadge,title:o.title||v.title,artist:o.artist||v.artist,album:o.album||v.album,_uid:String(o.id||o.pos+o.file)}:{...o,_uid:String(o.id||o.pos+o.file)}});Ga.set(i),po.set(e)}catch(t){console.error("Queue sync error",t)}}function yd(e,t){const a=Ge(ra),r=Ge(qa),n=Ge(dr);if(n.active&&n.tracks.length>0&&n.currentIndex>=0&&n.currentTrackFile&&t.file===n.currentTrackFile){const o=n.tracks[n.currentIndex];o&&(t.title=o.title,t.artist=o.artist,t.album=o.album,t.image=o.image,t.isYandex=!0,o.time>0&&(e.duration=o.time))}const i=t.file&&t.file.startsWith("http");if(i&&!t.isYandex){const o=u=>(u||"").toString().toLowerCase().replace(/[^a-z0-9]/g,""),l=o(t.file),v=o(t.title),c=r.find(u=>{const h=o(u.station||u.file||u.url||(Array.isArray(u)?u[1]:"")),f=o(u.name||(Array.isArray(u)?u[0]:""));return h&&l.includes(h)||f&&v.includes(f)});c?t.stationName=c.name||c[0]:a.stationName&&a.file===t.file&&(t.stationName=a.stationName)}ra.set(t),kt.update(o=>{const l=e.state==="play",v=performance.now();if(e.state==="pause"||o.state==="pause")return ds(!1),v<Va?o:e;if(t.file!==a.file||Ss)return Ss=!1,ka=!1,Ua=1,i&&!t.isYandex&&(e.elapsed=0),ds(l&&!i),e;if(v<Va)return o;if(ka)return ka=!1,Ua=1,ds(l&&!i),e;if(l&&!i){const c=e.elapsed-o.elapsed;if(Math.abs(c)>2)return Ua=1,e;if(Math.abs(c)<.05)Ua=1;else{let h=c/1.5;Ua=Math.max(.5,Math.min(1.5,1+h))}return{...e,elapsed:o.elapsed}}return ds(!1),e})}function ds(e){e?gn():Cn()}function gn(){Br||Ss||(ps=performance.now(),Br=setInterval(()=>{const e=performance.now();let t=(e-ps)/1e3;t>2&&(t=0),ps=e,kt.update(a=>{if(a.state!=="play")return a;let r=a.elapsed+t*Ua;return a.duration>0&&r>a.duration&&(r=a.duration),{...a,elapsed:r}})},gd))}function Cn(){Br&&(clearInterval(Br),Br=null),Ua=1,ps=0}async function fi(e,t=!1){if(!e||e.length===0)return;mt.set(!0),ka=!0;const a=5;try{for(let r=0;r<e.length;r+=a){const n=e.slice(r,r+a),i=["command_list_begin"];n.forEach(o=>{i.push(`add "${gs(o.file)}"`)}),i.push("command_list_end"),await ze.send(i.join(`
`))}t?(await ze.send("play 0"),De(`Playing ${e.length} tracks`,"success")):De(`Added ${e.length} tracks`,"success")}catch(r){console.error("[Player] Bulk Action Failed:",r),De("Error adding tracks","error")}finally{setTimeout(()=>{mt.set(!1),da()},1500)}}const aa={async togglePlay(){const t=Ge(kt).state==="play";Va=performance.now()+800,kt.update(a=>{const r=t?"pause":"play";return r==="play"?gn():Cn(),{...a,state:r}}),await ze.send(t?"pause 1":"play"),setTimeout(da,900)},async next(){ka=!0,Va=0,await ze.send("next"),da()},async previous(){ka=!0,Va=0,kt.update(e=>({...e,elapsed:0})),await ze.send("previous"),da()},async setVolume(e){kt.update(t=>({...t,volume:e})),await ze.send(`setvol ${e}`)},async seek(e){ka=!0,Va=performance.now()+500,kt.update(t=>({...t,elapsed:e})),await ze.send(`seekcur ${e}`),setTimeout(da,600)},async toggleRandom(){const t=!Ge(kt).random;kt.update(a=>({...a,random:t})),await ze.send(`random ${t?1:0}`)},async toggleRepeat(){const t=!Ge(kt).repeat;kt.update(a=>({...a,repeat:t})),await ze.send(`repeat ${t?1:0}`)},async playUri(e,t={}){mt.set(!0);const a=gs(e);ka=!0,kt.update(r=>({...r,state:"play",elapsed:0})),ra.set({title:t.title||e.split("/").pop(),artist:t.artist||"",album:t.album||"",file:e}),gn();try{const r=await ze.send("currentsong"),n=parseInt(ta.parseKeyValue(r).pos),i=await ze.send(`addid "${a}"`),o=parseInt(ta.parseKeyValue(i).id);if(isNaN(o))await ze.send(`add "${a}"`),await ze.send("play");else{const l=isNaN(n)?0:n+1;await ze.send(`moveid ${o} ${l}`),await ze.send(`playid ${o}`)}}catch(r){console.error("Play error",r),De("Failed to play","error")}setTimeout(()=>{mt.set(!1),da()},1200)},async addToQueue(e){try{await ze.send(`add "${gs(e)}"`),De("Added to queue","success")}catch(t){console.error("Add queue error",t),De("Failed to add","error")}},async playNext(e){mt.set(!0);const t=gs(e);try{const a=await ze.send("currentsong"),r=parseInt(ta.parseKeyValue(a).pos||-1);if(r===-1)mt.set(!1),await this.playUri(e);else{const n=await ze.send(`addid "${t}"`),i=parseInt(ta.parseKeyValue(n).id);isNaN(i)||(await ze.send(`moveid ${i} ${r+1}`),De("Will play next","success")),setTimeout(()=>mt.set(!1),1e3)}}catch(a){console.error("Play Next error",a),De("Failed to set next","error"),mt.set(!1)}},async removeFromQueue(e){mt.set(!0),fr&&clearTimeout(fr);try{Ga.update(t=>{const a=[...t];return a.splice(e,1),a}),await ze.send(`delete ${e}`)}catch{De("Failed to remove","error"),mt.set(!1);return}fr=setTimeout(()=>{mt.set(!1)},1e3)},async moveTrack(e,t){if(e!==t){mt.set(!0),fr&&clearTimeout(fr);try{await ze.send(`move ${e} ${t}`)}catch(a){console.error("Move failed",a),De("Move failed","error"),mt.set(!1),da();return}fr=setTimeout(()=>{mt.set(!1),da()},2e3)}},async playAllTracks(e){if(!(!e||e.length===0))try{await ze.send("stop"),await ze.send("clear"),await fi(e,!0)}catch(t){console.error(t)}},async addAllToQueue(e){!e||e.length===0||await fi(e,!1)},async saveQueue(e){if(!e)return;const t=e.replace(/"/g,'\\"');try{await ze.send(`save "${t}"`),De(`Playlist "${e}" saved`,"success")}catch(a){if(a.message.includes("exist")){if(confirm(`Playlist "${e}" exists. Overwrite?`))try{await ze.send(`rm "${t}"`),await ze.send(`save "${t}"`),De(`Playlist "${e}" overwritten`,"success")}catch{De("Failed to overwrite","error")}}else console.error(a)}}};function bo(e){return new Worker("/assets/sync.worker-CxDcqL9_.js",{name:e?.name})}const Lr="Favorites";let hi=Promise.resolve();const hr=e=>e?e.toLowerCase().replace(/^https?:\/\//,"").replace(/^www\./,"").split("?")[0].replace(/\/$/,""):"";function wd(e){if(e==="Favorites")return"linear-gradient(135deg, hsl(348, 95%, 58%), hsl(348, 90%, 40%))";let t=0;for(let r=0;r<e.length;r++)t=e.charCodeAt(r)+((t<<5)-t);const a=Math.abs(t%360);return`linear-gradient(135deg, hsl(${a}, 60%, 40%), hsl(${(a+40)%360}, 60%, 30%))`}function kd(e){if(e==="Favorites")return"var(--c-heart)";let t=0;for(let r=0;r<e.length;r++)t=e.charCodeAt(r)+((t<<5)-t);return`var(--c-pl-${Math.abs(t%6)})`}const ha={async syncLibrary(){if(Ge(sa))return;sa.set(!0);const e=new bo;e.postMessage({type:"START_SYNC",payload:{url:`http://${Ya.MOODE_IP}/wave-api.php`}}),e.onmessage=t=>{const{type:a,count:r}=t.data;a==="DONE"&&(De(`Library updated: ${r} tracks`,"success"),sa.set(!1),e.terminate()),a==="ERROR"&&(De("Sync Failed","error"),sa.set(!1),e.terminate())},e.onerror=()=>{sa.set(!1),e.terminate()}},async loadPlaylists(){ln.set(!0);try{const e=await ze.send("listplaylists"),a=ta.parsePlaylists(e).map(r=>({...r,color:wd(r.name),colorVar:kd(r.name)}));Ls.set(a)}catch(e){console.error(e)}finally{ln.set(!1)}},async createPlaylistFromQueue(e){if(!e)return;const t=e.replace(/"/g,'\\"');try{await ze.send(`save "${t}"`),De(`Playlist "${e}" created`,"success"),await this.loadPlaylists()}catch(a){console.error(a),De("Failed to create playlist","error")}},async deletePlaylist(e){if(!e)return;const t=e.replace(/"/g,'\\"');try{await ze.send(`rm "${t}"`),De("Playlist deleted","info"),await this.loadPlaylists()}catch(a){console.error(a),De("Delete failed","error")}},async renamePlaylist(e,t){if(!e||!t)return;const a=e.replace(/"/g,'\\"'),r=t.replace(/"/g,'\\"');try{await ze.send(`rename "${a}" "${r}"`),De("Playlist renamed","success"),await this.loadPlaylists()}catch(n){console.error(n),De("Rename failed","error")}},async openPlaylistDetails(e){if(!e)return;cn.set(!0);const t=e.replace(/"/g,'\\"');try{const a=await ze.send(`listplaylistinfo "${t}"`),r=ta.parseTracks(a),n=r.map(l=>l.file).filter(l=>l&&!l.startsWith("http"));let i=new Map;if(n.length>0)try{i=await Ra.getFilesMap(n)}catch(l){console.warn("Failed to hydrate playlist from DB",l)}const o=r.map(l=>{const v=i.get(l.file);return v?{...l,thumbHash:v.thumbHash,qualityBadge:v.qualityBadge,title:l.title||v.title,artist:l.artist||v.artist,album:l.album||v.album,_uid:ii()}:{...l,_uid:ii()}});Fr.set(o)}catch(a){console.error(a),De("Could not load playlist","error")}finally{cn.set(!1)}},async movePlaylistTrack(e,t,a){const r=e.replace(/"/g,'\\"');try{await ze.send(`playlistmove "${r}" ${t} ${a}`)}catch{De("Move failed","error")}},async removeFromPlaylist(e,t){const a=e.replace(/"/g,'\\"');try{await ze.send(`playlistdelete "${a}" ${t}`),De("Track removed","success")}catch{De("Delete failed","error")}},async loadFavorites(){try{const e=await ze.send(`listplaylistinfo "${Lr}"`),t=ta.parseTracks(e),a=new Set;t.forEach(r=>{r.file&&a.add(r.file)}),Ia.set(a)}catch{Ia.set(new Set)}},async toggleFavorite(e){if(!e||!e.file)return;const t=e.file,a=t.replace(/"/g,'\\"'),r=t.startsWith("http"),n=Ge(Ia);let i=n.has(t);if(!i&&r){const o=hr(t);for(const l of n)if(hr(l)===o){i=!0;break}}Ia.update(o=>{const l=new Set(o);if(i){if(l.delete(t),r){const v=hr(t);for(const c of l)hr(c)===v&&l.delete(c)}}else l.add(t);return l}),hi=hi.then(async()=>{try{const o=await ze.send(`listplaylistinfo "${Lr}"`),l=ta.parseTracks(o);let v=[];if(l.forEach((c,u)=>{let h=!1;(c.file===t||r&&hr(c.file)===hr(t)||r&&(c.file.includes(t)||t.includes(c.file)))&&(h=!0),h&&v.push(u)}),i){if(v.length>0){v.sort((c,u)=>u-c);for(const c of v)await ze.send(`playlistdelete "${Lr}" ${c}`);De("Removed from Favorites","info")}}else v.length>0?console.log("[Fav] Track already exists. Skipping."):(await ze.send(`playlistadd "${Lr}" "${a}"`),l.length>0&&await ze.send(`playlistmove "${Lr}" ${l.length} 0`),De("Added to Favorites","success"))}catch(o){console.error("Fav action failed",o),De("Action failed","error")}finally{await this.loadFavorites()}})}},Rr={async request(e,t={}){const a=Ge(Xr);if(!a)throw new Error("No token provided");const r=`/wave-api.php?action=yandex_proxy&path=${encodeURIComponent(e)}&token=${encodeURIComponent(a)}`,n={Authorization:`OAuth ${a}`,"Accept-Language":"ru",...t.headers||{}},i=await fetch(r,{method:t.method||"GET",headers:n,body:t.body});if(!i.ok){let o=`Yandex API Error: ${i.status}`;try{const l=await i.json();l.error&&(o=l.error)}catch{}throw new Error(o)}return t.isXml?await i.text():await i.json()},async getUserId(){const e=await this.request("/account/status");if(!e.result||!e.result.account)throw new Error("Invalid response from Yandex: "+JSON.stringify(e));return e.result.account.uid},async getUserPlaylists(){try{const e=await this.getUserId();return(await this.request(`/users/${e}/playlists/list`)).result||[]}catch(e){return console.error("Yandex Playlists Error:",e),[]}},async getPlaylistTracks(e,t=null){try{t||(t=await this.getUserId());const r=(await this.request(`/users/${t}/playlists/${e}`)).result;if(!r||!r.tracks)return[];const i=r.tracks.map(o=>o.id).slice(0,100);return await this.getTracksByIds(i)}catch(a){return console.error("Yandex Playlist Tracks Error:",a),[]}},async getFavorites(){try{const e=await this.getUserId(),t=await this.request(`/users/${e}/likes/tracks`);let a=[];const r=t.result;if(!r)return[];if(r.ids&&Array.isArray(r.ids)?a=r.ids:r.library&&Array.isArray(r.library)?a=r.library.map(i=>i.id):r.library&&r.library.tracks&&Array.isArray(r.library.tracks)?a=r.library.tracks.map(i=>i.id):Array.isArray(r)&&(a=r.map(i=>i.id)),a=a.filter(i=>i),a.length===0)return[];const n=a.slice(0,100);return await this.getTracksByIds(n)}catch(e){return console.error("Yandex Favorites Error:",e),[]}},async search(e){if(!e)return[];try{const t=await this.request(`/search?text=${encodeURIComponent(e)}&type=track&page=0`),a=t.result&&t.result.tracks?t.result.tracks.results:[];return this.normalizeTracks(a)}catch(t){return console.error("Yandex Search Error:",t),[]}},async getTracksByIds(e){if(!e.length)return[];const t=await this.request("/tracks",{method:"POST",body:`track-ids=${e.join(",")}`});return this.normalizeTracks(t.result)},async getStreamUrl(e){try{const t=await this.request(`/tracks/${e}/download-info`);if(!t.result||!t.result[0])throw new Error("No download info");const n=t.result.sort((w,T)=>T.bitrate_in_kbps-w.bitrate_in_kbps)[0].downloadInfoUrl,i=await this.request(n,{isXml:!0}),l=new DOMParser().parseFromString(i,"text/xml"),v=l.getElementsByTagName("host")[0]?.textContent,c=l.getElementsByTagName("path")[0]?.textContent,u=l.getElementsByTagName("ts")[0]?.textContent,h=l.getElementsByTagName("s")[0]?.textContent;if(!v||!c||!u||!h)throw new Error("Invalid XML format");const p=ho("XGRlBW9FXlekgbPrRHuSiA"+c.substring(1)+h);return`https://${v}/get-mp3/${p}/${u}${c}`}catch(t){return console.error("Failed to get Yandex Stream URL",t),null}},normalizeTracks(e){return Array.isArray(e)?e.map(t=>({title:t.title,artist:t.artists?t.artists.map(a=>a.name).join(", "):"Unknown",album:t.albums&&t.albums.length>0?t.albums[0].title:"Single",file:`https://music.yandex.ru/album/${t.albums&&t.albums[0]?t.albums[0].id:0}/track/${t.id}`,id:t.id,image:t.coverUri?`https://${t.coverUri.replace("%%","200x200")}`:null,time:t.durationMs?t.durationMs/1e3:0,genre:"Yandex Music",isYandex:!0,stationName:null})):[]}};function yo(){ze.connect(),_d(),ha.loadPlaylists(),ha.loadFavorites()}function Ts(e){return ze.send(e)}const{togglePlay:zs,toggleRandom:Za,toggleRepeat:Ja,setVolume:xa,seek:Ln,addToQueue:xd,playNext:Ed,removeFromQueue:Sd,moveTrack:Td,saveQueue:$d,playAllTracks:zn,addAllToQueue:In,playUri:Md}=aa,{syncLibrary:Ad,loadRadioStations:Pd,loadPlaylists:Rn,openPlaylistDetails:wo,toggleFavorite:ko,loadFavorites:Cd,removeFromPlaylist:xo,movePlaylistTrack:Eo}=ha;function Kr(e){const t=Ge(ra),a=Ge(qa),r=Ge(rs),n=t.file&&t.file.startsWith("http"),i=Ge(dr);if(i.active&&i.tracks.length>0&&(t.isYandex||t.file&&t.file===i.currentTrackFile)){let o;e==="next"?(o=i.currentIndex+1,o>=i.tracks.length&&(o=0)):(o=i.currentIndex-1,o<0&&(o=i.tracks.length-1));const l=i.tracks[o];if(l){Nn(l,o);return}}if(n&&a.length>0&&!t.isYandex&&(e==="next"||e==="previous")){let o=a.findIndex(v=>v.name===r);o===-1&&(o=0);let l;e==="next"?(l=o+1,l>=a.length&&(l=0)):(l=o-1,l<0&&(l=a.length-1)),jn(a[l])}else e==="next"&&aa.next(),e==="previous"&&aa.previous()}function jn(e){if(!e)return;dr.update(a=>({...a,active:!1})),rs.set(e.name);const t=e[1]||e.station||e.file||e.url;t&&aa.playUri(t,{title:e.name,artist:e.genre||"Radio Stream",stationName:e.name})}function Is(e){e&&(dr.update(t=>({...t,active:!1})),rs.set(null),aa.playUri(e.file,{title:e.title,artist:e.artist,album:e.album,stationName:null}))}async function Nn(e,t){if(e.id){De(`Resolving ${e.title}...`,"info");try{const a=await Rr.getStreamUrl(e.id);if(!a)throw new Error("No Stream");dr.update(r=>({...r,active:!0,currentIndex:t,currentTrackFile:a})),aa.playUri(a,{title:e.title,artist:e.artist,album:e.album})}catch{De("Failed to play Yandex track","error")}}}async function So(e,t=0){if(!e)return;dr.update(r=>({...r,active:!1})),rs.set(null);const a=e.replace(/"/g,'\\"');try{await ze.send("stop"),await ze.send("clear"),await ze.send(`load "${a}"`),await ze.send(`play ${t}`)}catch(r){console.error("Failed to play playlist context",r)}}const Ld=Object.freeze(Object.defineProperty({__proto__:null,addAllToQueue:In,addToQueue:xd,connect:yo,loadFavorites:Cd,loadPlaylists:Rn,loadRadioStations:Pd,movePlaylistTrack:Eo,moveTrack:Td,nav:Kr,openPlaylistDetails:wo,playAllTracks:zn,playNext:Ed,playPlaylistContext:So,playStation:jn,playTrackOptimistic:Is,playUri:Md,playYandexTrack:Nn,removeFromPlaylist:xo,removeFromQueue:Sd,runMpdRequest:Ts,saveQueue:$d,seek:Ln,setVolume:xa,syncLibrary:Ad,toggleFavorite:ko,togglePlay:zs,toggleRandom:Za,toggleRepeat:Ja},Symbol.toStringTag,{value:"Module"}));function On(e,t=2e3){let a;const r=i=>{i.type==="mousedown"&&i.button!==0||(a=setTimeout(()=>{e.dispatchEvent(new CustomEvent("longpress",{detail:{originalEvent:i}}))},t))},n=()=>{clearTimeout(a)};return e.addEventListener("mousedown",r),e.addEventListener("touchstart",r,{passive:!0}),e.addEventListener("mouseup",n),e.addEventListener("mouseleave",n),e.addEventListener("touchend",n),e.addEventListener("touchcancel",n),e.addEventListener("touchmove",n),{destroy(){e.removeEventListener("mousedown",r),e.removeEventListener("touchstart",r),e.removeEventListener("mouseup",n),e.removeEventListener("mouseleave",n),e.removeEventListener("touchend",n),e.removeEventListener("touchcancel",n),e.removeEventListener("touchmove",n)}}}var zd=x('<div class="drag-handle svelte-5cs2hz" title="Drag to reorder"><div class="icon-small svelte-5cs2hz"><!></div></div>'),Id=x('<div class="eq-anim svelte-5cs2hz"><span class="bar b1 svelte-5cs2hz"></span> <span class="bar b2 svelte-5cs2hz"></span> <span class="bar b3 svelte-5cs2hz"></span></div>'),Rd=x('<div class="icon-small svelte-5cs2hz"><!></div>'),jd=x('<div class="icon-small svelte-5cs2hz"><!></div>'),Nd=x('<div class="icon-small accent svelte-5cs2hz"><!></div>'),Od=x('<span class="num svelte-5cs2hz"> </span>'),Dd=x('<button class="num-box svelte-5cs2hz"><!></button>'),Fd=x('<div slot="fallback" class="icon-ph svelte-5cs2hz"><!></div>'),qd=x('<span class="meta-tag quality svelte-5cs2hz"> </span>'),Bd=x('<button class="btn-icon small remove svelte-5cs2hz"><!></button>'),Ud=x('<div class="dur svelte-5cs2hz"> </div>'),Hd=x('<div role="button" tabindex="0"><div class="left svelte-5cs2hz"><!> <div class="thumb svelte-5cs2hz"><!></div></div> <div class="info svelte-5cs2hz"><div class="title-row svelte-5cs2hz"><div class="title text-ellipsis svelte-5cs2hz"> </div> <!></div> <div> </div></div> <div class="right svelte-5cs2hz"><button class="btn-icon small context-menu-btn svelte-5cs2hz" title="Options"><!></button> <button><!></button> <!></div></div>');function Sr(e,t){xt(t,!1);const a=()=>xe(Ia,"$favorites",o),r=()=>xe(Vt,"$navigationStack",o),n=()=>xe(Ot,"$activeMenuTab",o),i=()=>xe(qa,"$stations",o),[o,l]=jt(),v=$(),c=$(),u=$(),h=$(),f=$(),p=$(),w=$(),T=$(),k=$(),E=$(),W=$(),se=$(),Z=$(),ae=$(),ue=$(),O=$(),B=$();let M=gt(t,"track",8),fe=gt(t,"index",8),me=gt(t,"isEditable",8,!1),C=gt(t,"playingIndex",24,()=>-1),q=gt(t,"playingFile",8,null),ie=gt(t,"isPlaying",8,!1);const Q=Mn();let ne=$(!1),D=$(!1);function N(I){if(s(w))return"â";if(!I)return"0:00";const U=parseInt(I,10),pe=Math.floor(U/60),Fe=U%60;return`${pe}:${Fe.toString().padStart(2,"0")}`}function we(I){I.stopPropagation(),s(f)?zs():Q("play")}function Y(){return s(c)?.view==="details"&&s(c).data?.name?{type:"playlist",playlistName:s(c).data.name,index:fe()}:s(u)?{type:"queue",index:fe()}:{type:"general"}}function J(I){I.stopPropagation(),Wr(I,M(),Y())}function he(I){me()||Wr(I.detail.originalEvent,M(),Y())}function S(I){I.stopPropagation(),!s(w)&&M().artist&&(Ot.set("artists"),Oa("albums_by_artist",{name:M().artist}))}re(()=>R(M()),()=>{M()&&g(D,!1)}),re(()=>(a(),R(M())),()=>{g(v,a().has(M().file))}),re(()=>r(),()=>{g(c,r()[r().length-1])}),re(()=>(s(c),n()),()=>{g(u,s(c)?.view==="queue"||s(c)?.view==="root"&&n()==="queue")}),re(()=>(s(u),R(fe()),R(C())),()=>{g(h,s(u)?Number(fe())===C():!1)}),re(()=>(R(M()),R(q())),()=>{g(f,M().file===q())}),re(()=>(s(f),s(h)),()=>{g(p,s(f)&&!s(h))}),re(()=>R(M()),()=>{g(w,M().file&&(M().file.startsWith("http")||M().file.includes("RADIO")))}),re(()=>(s(h),R(ie()),s(ne)),()=>{g(T,s(h)&&ie()&&s(ne))}),re(()=>(s(h),R(ie()),s(ne)),()=>{g(k,s(h)&&ie()&&!s(ne))}),re(()=>(s(h),R(ie()),s(ne)),()=>{g(E,s(h)&&!ie()&&!s(ne))}),re(()=>(s(ne),s(T)),()=>{g(W,s(ne)&&!s(T))}),re(()=>R(M()),()=>{g(se,M().title||M().file?.split("/").pop())}),re(()=>R(M()),()=>{g(Z,M().artist||"Unknown")}),re(()=>R(M()),()=>{g(ae,N(M().time))}),re(()=>R(M()),()=>{g(ue,M().qualityBadge?M().qualityBadge.split(" ")[0]:null)}),re(()=>{},()=>{g(O,null)}),re(()=>(s(D),R(M()),i(),s(O),Qr),()=>{g(B,s(D)?Er(M(),i(),s(O)):Qr(M(),"sm",i(),s(O)))}),Ut(),At();var z=Hd();let V;var ce=d(z),H=d(ce);{var G=I=>{var U=zd(),pe=d(U),Fe=d(pe);te(Fe,()=>(R(y),b(()=>y.DRAG_HANDLE))),P("mousedown",U,Ue=>Q("startdrag",Ue)),P("touchstart",U,Ue=>Q("startdrag",Ue),void 0,!0),P("click",U,Qt(function(Ue){Vr.call(this,t,Ue)})),m(I,U)},j=I=>{var U=Dd(),pe=d(U);{var Fe=Ne=>{var Xe=Id();m(Ne,Xe)},Ue=Ne=>{var Xe=et(),Ze=Ae(Xe);{var Ve=Ye=>{var Je=Rd(),qe=d(Je);te(qe,()=>(R(y),b(()=>y.PAUSE))),m(Ye,Je)},He=Ye=>{var Je=et(),qe=Ae(Je);{var Me=We=>{var st=jd(),vt=d(st);te(vt,()=>(R(y),b(()=>y.PLAY))),m(We,st)},Oe=We=>{var st=et(),vt=Ae(st);{var St=_t=>{var ut=Nd(),ht=d(ut);te(ht,()=>(R(y),b(()=>y.PLAY))),m(_t,ut)},wt=_t=>{var ut=Od(),ht=d(ut);ve(()=>de(ht,fe()+1)),m(_t,ut)};L(vt,_t=>{s(E)?_t(St):_t(wt,!1)},!0)}m(We,st)};L(qe,We=>{s(W)?We(Me):We(Oe,!1)},!0)}m(Ye,Je)};L(Ze,Ye=>{s(T)?Ye(Ve):Ye(He,!1)},!0)}m(Ne,Xe)};L(pe,Ne=>{s(k)?Ne(Fe):Ne(Ue,!1)})}P("click",U,we),m(I,U)};L(H,I=>{me()?I(G):I(j,!1)})}var K=_(H,2),X=d(K);nr(X,{get src(){return s(B)},get alt(){return s(se)},radius:"4px",$$events:{error:()=>g(D,!0)},$$slots:{fallback:(I,U)=>{var pe=Fd(),Fe=d(pe);te(Fe,()=>(s(w),R(y),b(()=>s(w)?y.RADIO:y.ALBUMS))),ot(1,pe,()=>bt),m(I,pe)}}});var oe=_(ce,2),ge=d(oe),F=d(ge),ye=d(F),Pe=_(F,2);{var Ce=I=>{var U=qd(),pe=d(U);ve(()=>de(pe,s(ue))),m(I,U)};L(Pe,I=>{s(ue)&&!s(w)&&I(Ce)})}var Re=_(ge,2);let Te;var A=d(Re),le=_(oe,2),_e=d(le),Ee=d(_e);te(Ee,()=>(R(y),b(()=>y.DOTS)));var $e=_(_e,2);let ke;var Le=d($e);te(Le,()=>(s(v),R(y),b(()=>s(v)?y.HEART_FILLED:y.HEART)));var Ie=_($e,2);{var ee=I=>{var U=Bd(),pe=d(U);te(pe,()=>(R(y),b(()=>y.REMOVE))),P("click",U,Qt(()=>Q("remove",{index:fe()}))),m(I,U)},be=I=>{var U=Ud(),pe=d(U);ve(()=>de(pe,s(ae))),m(I,U)};L(Ie,I=>{me()?I(ee):I(be,!1)})}Dt(()=>P("click",z,()=>!s(h)&&Q("play"))),Dt(()=>P("mouseenter",z,()=>g(ne,!0))),Dt(()=>P("mouseleave",z,()=>g(ne,!1))),Sn(z,I=>On?.(I)),Dt(()=>P("longpress",z,he)),ve(()=>{V=Qe(z,1,"row svelte-5cs2hz",null,V,{active:s(h),striped:s(p),editable:me()}),Lt(F,"title",s(se)),de(ye,s(se)),Te=Qe(Re,1,"artist text-ellipsis svelte-5cs2hz",null,Te,{link:!s(w)}),de(A,s(Z)),ke=Qe($e,1,"btn-icon small svelte-5cs2hz",null,ke,{liked:s(v)})}),P("click",Re,S),P("click",_e,J),P("click",$e,Qt(()=>ko(M()))),m(e,z),Et(),l()}const vs=100,pi=5,gi=25,_i=3;function Yd({tracksStore:e,onMoveTrack:t}){const a=Be(!1),r=Be(!1),n=Be(!1),i=Be(null),o=Be(null),l=Be(null),v=Be({x:0,y:0,width:0,height:0,grabOffsetX:0,grabOffsetY:0}),c=Be(null);let u=!1,h=0,f=0,p=0,w=0;const T={scrollContainer:null,listBodyContainer:null};let k=null;function E(C,q,ie){const Q=C.detail;if(Q.button===2||(window.getSelection&&window.getSelection().removeAllRanges(),!T.scrollContainer))return;const D=T.scrollContainer.querySelectorAll(".row-wrapper")[q];if(!D)return;const N=D.getBoundingClientRect(),we=Q.touches?Q.touches[0].clientX:Q.clientX,Y=Q.touches?Q.touches[0].clientY:Q.clientY,J=we-N.left,he=Y-N.top;u=!0,a.set(!1),r.set(!1),h=we,f=Y,p=we,w=Y,i.set(q),o.set(q),c.set(ie),l.set(null),v.set({x:we,y:Y,width:N.width,height:N.height,grabOffsetX:J,grabOffsetY:he})}function W(C){if(!u||Ge(r))return;const q=C.touches?C.touches[0].clientX:C.clientX,ie=C.touches?C.touches[0].clientY:C.clientY;if(!Ge(a)){const Q=Math.abs(q-h),ne=Math.abs(ie-f);if(Q<_i&&ne<_i)return;a.set(!0)}C.cancelable&&C.preventDefault(),p=q,w=ie,v.update(Q=>({...Q,x:p,y:w})),B(w),se()}function se(){if(!T.listBodyContainer)return;const C=T.listBodyContainer.getBoundingClientRect(),q=Ge(v),Q=w-C.top-q.grabOffsetY+q.height/2,ne=Ge(e).length;if(Q<0){o.set(0);return}if(Q>C.height){o.set(ne);return}const D=Array.from(T.listBodyContainer.querySelectorAll(".row-wrapper"));let N=-1,we=1/0;D.forEach((Y,J)=>{const he=Y.offsetTop+Y.offsetHeight/2,S=Math.abs(Q-he);S<we&&(we=S,N=J)}),N!==-1&&o.set(N)}function Z(C){if(u){if(u=!1,!Ge(a)){ue();return}ae()}}async function ae(){fe(),se(),a.set(!1),r.set(!0);const C=Ge(o);if(T.listBodyContainer&&C!==null){const N=T.listBodyContainer.querySelectorAll(".row-wrapper"),we=T.listBodyContainer.getBoundingClientRect(),Y=N[C];let J=0,he=0,S=!1;if(Y)J=we.top+Y.offsetTop,he=we.left+Y.offsetLeft,S=!0;else if(C>=N.length&&N.length>0){const z=N[N.length-1];J=we.top+z.offsetTop+z.offsetHeight,he=we.left+z.offsetLeft,S=!0}else N.length===0&&(J=we.top,he=we.left,S=!0);S&&v.update(z=>({...z,y:J+z.grabOffsetY,x:he+z.grabOffsetX}))}await new Promise(N=>setTimeout(N,250)),n.set(!0),await br();const q=Ge(i),ie=Ge(e).length;let Q=Math.max(0,Math.min(C,ie)),ne=Q;if(q!==null&&q!==Q){const N=[...Ge(e)],[we]=N.splice(q,1);ne=Math.max(0,Math.min(ne,N.length)),N.splice(ne,0,we),e.set(N),t&&t(q,ne),i.set(ne)}await br(),c.set(null),i.set(null),o.set(null),r.set(!1);const D=q!==Q?ne:q;l.set(D),await br(),requestAnimationFrame(()=>{requestAnimationFrame(()=>{n.set(!1),setTimeout(()=>{l.set(null)},300)})})}function ue(){u=!1,O()}function O(){a.set(!1),r.set(!1),i.set(null),o.set(null),c.set(null),fe()}function B(C){if(!T.scrollContainer)return;const{top:q,bottom:ie}=T.scrollContainer.getBoundingClientRect(),Q=C-q,ne=ie-C;fe();let D=0;if(Q<vs&&Q>0){const N=1-Q/vs;D=-(pi+gi*(N*N))}else if(ne<vs&&ne>0){const N=1-ne/vs;D=pi+gi*(N*N)}D!==0&&M(D)}function M(C){k||(k=requestAnimationFrame(function q(){T.scrollContainer&&(T.scrollContainer.scrollTop+=C,Ge(a)&&(v.update(ie=>({...ie,x:p,y:w})),se(),k=requestAnimationFrame(q)))}))}function fe(){k&&(cancelAnimationFrame(k),k=null)}function me(C,q,ie,Q,ne,D){return D||!q&&!ie||Q===null||ne===null?"":C===Q?"opacity: 0; pointer-events: none;":Q===ne?"":Q<ne&&C>Q&&C<=ne?"transform: translateY(-100%);":Q>ne&&C>=ne&&C<Q?"transform: translateY(100%);":""}return{isDragging:a,isDropping:r,isReordering:n,draggingIndex:i,hoverIndex:o,justDroppedIndex:l,draggedItemData:c,ghostCoords:v,refs:T,onDragInit:E,onPointerMove:W,onPointerUp:Z,getRowStyle:me,cancelDrag:ue}}var Vd=x('<div><div style="pointer-events: none; width: 100%; height: 100%;" class="svelte-ym6b2"><!></div></div>'),Wd=x('<div class="skeleton-row svelte-ym6b2"><div class="sk-left svelte-ym6b2"><!> <!></div> <div class="sk-info svelte-ym6b2"><!> <!></div> <div class="sk-right svelte-ym6b2"><!></div></div>'),Qd=x('<div class="skeletons-wrapper svelte-ym6b2"></div>'),Xd=x("<div><!></div>"),Kd=x('<div class="content-padded svelte-ym6b2" style="text-align: center; opacity: 0.5;"> </div>'),Gd=x("<!> <!>",1),Zd=x('<div><!> <div class="list-body svelte-ym6b2"><!> <!></div></div>');function ss(e,t){xt(t,!1);const a=()=>xe(Vt,"$navigationStack",p),r=()=>xe(Ot,"$activeMenuTab",p),n=()=>xe(fe,"$isDragging",p),i=()=>xe(me,"$isDropping",p),o=()=>xe(ne,"$draggedItemData",p),l=()=>xe(D,"$ghostCoords",p),v=()=>xe(q,"$draggingIndex",p),c=()=>xe(T(),"$itemsStore",p),u=()=>xe(Q,"$justDroppedIndex",p),h=()=>xe(C,"$isReordering",p),f=()=>xe(ie,"$hoverIndex",p),[p,w]=jt();let T=gt(t,"itemsStore",8),k=gt(t,"isEditMode",8,!1),E=gt(t,"isLoading",8,!1),W=gt(t,"emptyText",8,"List is empty"),se=gt(t,"onMoveItem",8,(j,K)=>{}),Z=$(""),ae=$(0),ue=$(!1);Fa(async()=>{g(ae,ed(s(Z))),!E()&&s(ae)>0&&s(B).refs.scrollContainer&&(await br(),is(B,s(B).refs.scrollContainer.scrollTop=s(ae)),g(ue,!0))});async function O(){await br(),s(B).refs.scrollContainer&&(is(B,s(B).refs.scrollContainer.scrollTop=s(ae)),g(ue,!0))}vo(()=>{s(B).cancelDrag(),s(B).refs.scrollContainer&&Jc(s(Z),s(B).refs.scrollContainer.scrollTop)});const B=$(Yd({tracksStore:T(),onMoveTrack:(j,K)=>{se()(j,K)}})),M=s(B),fe=M.isDragging,me=M.isDropping,C=M.isReordering,q=M.draggingIndex,ie=M.hoverIndex,Q=M.justDroppedIndex,ne=M.draggedItemData,D=M.ghostCoords,N=$(M.refs);function we(j,K,X){k()&&s(B).onDragInit(j,K,X)}re(()=>(a(),r()),()=>{const j=a(),K=j[j.length-1],X=r();if(K&&K.view==="root")g(Z,`root_${X}`);else if(K){const oe=K.data?K.data.name||K.data:"unknown";g(Z,`${K.view}_${oe}`)}}),re(()=>(R(E()),s(ue),s(ae),s(B)),()=>{!E()&&!s(ue)&&s(ae)>0&&s(B).refs.scrollContainer&&O()}),Ut(),At();var Y=Zd();P("mousemove",La,function(...j){s(B).onPointerMove?.apply(this,j)}),P("mouseup",La,function(...j){s(B).onPointerUp?.apply(this,j)}),P("touchmove",La,function(...j){s(B).onPointerMove?.apply(this,j)},void 0,!1),P("touchend",La,function(...j){s(B).onPointerUp?.apply(this,j)}),P("touchcancel",La,function(...j){s(B).onPointerUp?.apply(this,j)});let J;var he=d(Y);{var S=j=>{var K=Vd();let X;var oe=d(K),ge=d(oe);us(ge,t,"row",{get item(){return o()},get index(){return v()},isGhost:!0,startDrag:()=>{}}),ve(()=>{X=Qe(K,1,"floating-item svelte-ym6b2",null,X,{dropping:i()}),lt(K,`
            top: ${l(),b(()=>l().y-l().grabOffsetY)??""}px; 
            left: ${l(),b(()=>l().x-l().grabOffsetX)??""}px;
            width: ${l(),b(()=>l().width)??""}px; 
            height: ${l(),b(()=>l().height)??""}px;
        `)}),m(j,K)};L(he,j=>{(n()||i())&&o()&&j(S)})}var z=_(he,2),V=d(z);us(V,t,"header",{});var ce=_(V,2);{var H=j=>{var K=Qd();yt(K,4,()=>Array(10),oa,(X,oe)=>{var ge=Wd(),F=d(ge),ye=d(F);Rt(ye,{width:"24px",height:"24px",radius:"4px",style:"opacity: 0.3"});var Pe=_(ye,2);Rt(Pe,{width:"40px",height:"40px",radius:"4px",style:"margin-left: 12px;"});var Ce=_(F,2),Re=d(Ce);Rt(Re,{width:"40%",height:"14px",radius:"4px",style:"margin-bottom: 6px;"});var Te=_(Re,2);Rt(Te,{width:"25%",height:"12px",radius:"4px",style:"opacity: 0.6"});var A=_(Ce,2),le=d(A);Rt(le,{width:"30px",height:"12px",radius:"4px"}),m(X,ge)}),m(j,K)},G=j=>{var K=Gd(),X=Ae(K);yt(X,3,c,(F,ye)=>F._uid||ye,(F,ye,Pe)=>{var Ce=Xd();let Re;var Te=d(Ce);us(Te,t,"row",{get item(){return s(ye)},get index(){return s(Pe)},isGhost:!1,startDrag:A=>we(A,s(Pe),s(ye))}),ve(A=>{Re=Qe(Ce,1,"row-wrapper svelte-ym6b2",null,Re,{"ghost-placeholder":v()===s(Pe)&&(n()||i()),"just-dropped":u()===s(Pe),"no-transition":h()}),lt(Ce,A)},[()=>(s(B),R(s(Pe)),n(),i(),v(),f(),h(),b(()=>s(B).getRowStyle(s(Pe),n(),i(),v(),f(),h())))]),m(F,Ce)});var oe=_(X,2);{var ge=F=>{var ye=Kd(),Pe=d(ye);ve(()=>de(Pe,W())),m(F,ye)};L(oe,F=>{c(),b(()=>c().length===0)&&F(ge)})}m(j,K)};L(ce,j=>{E()?j(H):j(G,!1)})}Da(z,j=>is(N,s(N).listBodyContainer=j),()=>s(N)?.listBodyContainer),Da(Y,j=>is(N,s(N).scrollContainer=j),()=>s(N)?.scrollContainer),ve(()=>J=Qe(Y,1,"base-list-scroll-container svelte-ym6b2",null,J,{dragging:n()})),ot(1,z,()=>bt,()=>({duration:200})),m(e,Y),Et(),w()}var Jd=x('<div slot="fallback" class="icon-fallback svelte-1eh2rsb"><!></div>'),ev=x('<span class="meta-tag svelte-1eh2rsb"> </span>'),tv=x('<div class="header-subtitle-row svelte-1eh2rsb"><h2 class="header-sub-text svelte-1eh2rsb"> </h2> <!></div>'),av=x('<span class="meta-tag svelte-1eh2rsb"> </span>'),rv=x('<span class="meta-tag svelte-1eh2rsb"> </span>'),sv=x('<span class="meta-tag quality svelte-1eh2rsb"> </span>'),nv=x('<div slot="header" class="content-padded svelte-1eh2rsb"><div class="view-header svelte-1eh2rsb"><div class="header-art svelte-1eh2rsb"><div style="width: 100%; height: 100%;" class="svelte-1eh2rsb"><!></div></div> <div class="header-info svelte-1eh2rsb"><div class="header-text-group svelte-1eh2rsb"><div class="header-label svelte-1eh2rsb"> </div> <h1 class="header-title svelte-1eh2rsb"> </h1> <!> <div class="meta-badges svelte-1eh2rsb"><!> <!> <!></div></div> <div class="header-actions svelte-1eh2rsb"><button class="btn-primary svelte-1eh2rsb"> </button> <button class="btn-secondary svelte-1eh2rsb"> </button></div></div></div></div>'),iv=x('<div slot="row" class="svelte-1eh2rsb"><!></div>'),ov=x("<button> </button>"),lv=x('<div class="sort-backdrop svelte-1eh2rsb"></div> <div class="sort-menu svelte-1eh2rsb"></div>',1),cv=x('<div class="sort-wrapper svelte-1eh2rsb"><button class="sort-trigger svelte-1eh2rsb"><span class="svelte-1eh2rsb"> </span> <span class="sort-trigger-icon svelte-1eh2rsb"><!></span></button> <!></div>'),dv=x('<div class="music-card skeleton-card svelte-1eh2rsb"><div class="card-img-container svelte-1eh2rsb"><!></div> <div class="card-title svelte-1eh2rsb" style="margin-top: 12px;"><!></div> <div class="card-sub-row svelte-1eh2rsb" style="margin-top: 6px;"><!></div></div>'),vv=x('<div class="music-grid svelte-1eh2rsb"></div>'),uv=x('<div class="group-header header-label svelte-1eh2rsb"> </div>'),fv=x('<div slot="fallback" class="icon-fallback svelte-1eh2rsb"><!></div>'),hv=x('<div class="card-sub text-ellipsis svelte-1eh2rsb"> </div>'),pv=x('<div class="card-badge svelte-1eh2rsb"> </div>'),gv=x('<div class="card-badge quality svelte-1eh2rsb"> </div>'),_v=x('<div class="music-card svelte-1eh2rsb" role="button" tabindex="0"><div class="card-img-container svelte-1eh2rsb"><!> <div class="play-overlay svelte-1eh2rsb"><span class="overlay-icon svelte-1eh2rsb"><!></span></div></div> <div class="card-title svelte-1eh2rsb"> </div> <div class="card-sub-row svelte-1eh2rsb"><!> <!> <!></div></div>'),mv=x('<div class="empty-text svelte-1eh2rsb">No results found</div>'),bv=x('<div class="music-grid svelte-1eh2rsb"></div>'),yv=x('<div class="content-padded svelte-1eh2rsb"><div class="search-input-container svelte-1eh2rsb"><span class="search-icon svelte-1eh2rsb"><!></span> <input type="text" class="svelte-1eh2rsb"/> <!></div> <!></div>'),wv=x("<div><!></div>");function kv(e,t){xt(t,!1);const a=()=>xe(u,"$itemsStore",n),r=()=>xe(Vt,"$navigationStack",n),[n,i]=jt(),o=$(),l=$(),v=$();let c=gt(t,"activeCategory",8,"artists");const u=Be([]);let h=$(!0),f=$(""),p=$("name"),w=$(!1);const T=[{id:"name",label:"A-Z"},{id:"artist",label:"Artist"},{id:"year",label:"Oldest"},{id:"year_desc",label:"Newest"}];let k=$(!1),E=$(!1),W=$(null),se=$(""),Z=$(""),ae=$(""),ue=$(0),O=0;function B(){g(w,!s(w))}function M(Y){g(p,Y),g(w,!1)}function fe(Y,J){if(!Y||Y.length===0)return[];const he=[...Y].sort((S,z)=>{switch(J){case"name":return S.displayName.localeCompare(z.displayName,void 0,{sensitivity:"base"});case"artist":const V=S.artist||"",ce=z.artist||"",H=V.localeCompare(ce,void 0,{sensitivity:"base"});return H!==0?H:(parseInt(S.year)||0)-(parseInt(z.year)||0);case"year":return(parseInt(S.year)||0)-(parseInt(z.year)||0);case"year_desc":return(parseInt(z.year)||0)-(parseInt(S.year)||0);default:return 0}});if(J==="artist"){const S=[];let z=null;return he.forEach(V=>{const ce=V.artist||"Unknown Artist";ce!==z&&(S.push({_uid:`header-${ce}`,isHeader:!0,title:ce}),z=ce),S.push(V)}),S}return he}async function me(Y,J){if(!J)return;const he=++O;g(h,!0),u.set([]),g(W,J.data),g(se,""),g(Z,""),g(ae,""),g(ue,0),console.log(`[LibraryView #${he}] Start loading:`,J);try{let S=[];if(J.view==="root")S=Y==="artists"?await Ra.getArtists():await Ra.getAlbums();else if(J.view==="albums_by_artist"){const V=J.data.name||J.data;S=await Ra.getArtistAlbums(V),g(p,"year")}else if(J.view==="tracks_by_album"){const V=J.data.name||J.data,ce=J.data.artist;S=await Ra.getAlbumTracks(V,ce)}if(he!==O){console.warn(`[LibraryView #${he}] Request cancelled (stale).`);return}const z=S.map((V,ce)=>{const G=typeof V=="string"?{name:V}:V;let j=String(G.year||"");return j.length>4&&(j=j.substring(0,4)),{...G,displayName:G.name||G.title||G.artist||"Unknown",thumbFile:G.file||null,year:j,_uid:(G.file||G.name||ce)+Y+J.view}});if(console.log(`[LibraryView #${he}] Setting ${z.length} items.`),u.set(z),J.view==="tracks_by_album"&&z.length>0){g(W,z[0]),g(ue,z.length),g(ae,z[0].year);const V=z.reduce((ce,H)=>ce+(H.time||0),0);if(V>0){const ce=Math.floor(V/3600),H=Math.floor(V%3600/60);g(se,ce>0?`${ce} hr ${H} min`:`${H} min`)}z[0].qualityBadge&&g(Z,z[0].qualityBadge)}}catch(S){he===O&&(console.error(S),u.set([]))}finally{he===O&&g(h,!1)}}function C(Y){s(v).view==="root"?c()==="artists"?Oa("albums_by_artist",Y):Oa("tracks_by_album",Y):s(v).view==="albums_by_artist"&&Oa("tracks_by_album",Y)}function q(){const Y=a();if(Y.length>0){const J=s(v).data.name||s(v).data.displayName||"this selection";fa({title:"Replace Queue?",message:`This will clear your queue and play all tracks from "${J}".`,confirmLabel:"Play",type:"confirm",onConfirm:()=>{g(k,!0),zn(Y)}})}}function ie(){const Y=a();Y.length>0&&(g(E,!0),In(Y),setTimeout(()=>{g(E,!1)},2e3))}re(()=>R(c()),()=>{c()&&(g(f,""),c(),g(p,"name"))}),re(()=>(s(p),y),()=>{g(o,s(p)==="year_desc"?y.SORT_ASC:y.SORT_DESC)}),re(()=>(a(),s(f),s(p)),()=>{g(l,fe(a().filter(Y=>{if(!s(f))return!0;const J=s(f).toLowerCase();return Y.displayName.toLowerCase().includes(J)||Y.artist&&Y.artist.toLowerCase().includes(J)}),s(p)))}),re(()=>r(),()=>{g(v,r()[r().length-1])}),re(()=>(R(c()),s(v)),()=>{me(c(),s(v))}),re(()=>s(v),()=>{s(v)&&(g(k,!1),g(E,!1),g(w,!1))}),Ut(),At();var Q=wv();let ne;var D=d(Q);{var N=Y=>{ss(Y,{get itemsStore(){return u},get isLoading(){return s(h)},isEditMode:!1,emptyText:"No tracks found",$$slots:{header:(J,he)=>{var S=nv(),z=d(S),V=d(z),ce=d(V),H=d(ce);{let ee=ct(()=>(R(Er),s(W),b(()=>Er(s(W)))));nr(H,{get src(){return s(ee)},alt:"Art",radius:"8px",$$slots:{fallback:(be,I)=>{var U=Jd(),pe=d(U);te(pe,()=>(R(y),b(()=>y.ALBUMS))),m(be,U)}}})}var G=_(V,2),j=d(G),K=d(j),X=d(K),oe=_(K,2),ge=d(oe),F=_(oe,2);{var ye=ee=>{var be=tv(),I=d(be),U=d(I),pe=_(I,2);{var Fe=Ue=>{var Ne=ev(),Xe=d(Ne);ve(()=>de(Xe,s(ae))),m(Ue,Ne)};L(pe,Ue=>{s(ae)&&s(ae)!=="0"&&Ue(Fe)})}ve(()=>de(U,(s(W),b(()=>s(W).artist)))),m(ee,be)};L(F,ee=>{s(W),b(()=>s(W)&&s(W).artist)&&ee(ye)})}var Pe=_(F,2),Ce=d(Pe);{var Re=ee=>{var be=av(),I=d(be);ve(()=>de(I,`${s(ue)??""} tracks`)),m(ee,be)};L(Ce,ee=>{s(ue)>0&&ee(Re)})}var Te=_(Ce,2);{var A=ee=>{var be=rv(),I=d(be);ve(()=>de(I,s(se))),m(ee,be)};L(Te,ee=>{s(se)&&ee(A)})}var le=_(Te,2);{var _e=ee=>{var be=sv(),I=d(be);ve(()=>de(I,s(Z))),m(ee,be)};L(le,ee=>{s(Z)&&ee(_e)})}var Ee=_(j,2),$e=d(Ee),ke=d($e),Le=_($e,2),Ie=d(Le);ve(()=>{de(X,(s(v),b(()=>s(v).view==="albums_by_artist"?"Artist":"Album"))),Lt(oe,"title",(s(v),b(()=>s(v).data.name||s(v).data.displayName))),de(ge,(s(v),b(()=>s(v).data.name||s(v).data.displayName||"Unknown"))),$e.disabled=s(k),de(ke,s(k)?"Playing...":"Play All"),Le.disabled=s(E),de(Ie,s(E)?"Added":"To Queue")}),P("click",$e,q),P("click",Le,ie),m(J,S)},row:(J,he)=>{var S=iv();const z=ct(()=>he.item),V=ct(()=>he.index);var ce=d(S);Sr(ce,{get track(){return s(z)},get index(){return s(V)},isEditable:!1,$$events:{play:()=>Is(s(z))}}),m(J,S)}}})},we=Y=>{var J=yv(),he=d(J),S=d(he),z=d(S);te(z,()=>(R(y),b(()=>y.SEARCH)));var V=_(S,2),ce=_(V,2);{var H=X=>{var oe=cv(),ge=d(oe),F=d(ge),ye=d(F),Pe=_(F,2),Ce=d(Pe);te(Ce,()=>s(o));var Re=_(ge,2);{var Te=A=>{var le=lv(),_e=Ae(le),Ee=_(_e,2);yt(Ee,5,()=>T,oa,($e,ke)=>{var Le=ov();let Ie;var ee=d(Le);ve(()=>{Ie=Qe(Le,1,"sort-item svelte-1eh2rsb",null,Ie,{selected:s(p)===s(ke).id}),de(ee,(s(ke),b(()=>s(ke).label)))}),P("click",Le,()=>M(s(ke).id)),m($e,Le)}),P("click",_e,B),ot(3,_e,()=>bt,()=>({duration:100})),ot(3,Ee,()=>An,()=>({start:.95,duration:100})),m(A,le)};L(Re,A=>{s(w)&&A(Te)})}ve(A=>de(ye,A),[()=>(s(p),b(()=>T.find(A=>A.id===s(p))?.label))]),P("click",ge,B),m(X,oe)};L(ce,X=>{R(c()),s(v),b(()=>c()==="albums"||s(v).view==="albums_by_artist")&&X(H)})}var G=_(he,2);{var j=X=>{var oe=vv();yt(oe,4,()=>Array(12),oa,(ge,F)=>{var ye=dv(),Pe=d(ye),Ce=d(Pe);Rt(Ce,{width:"100%",height:"100%",radius:"8px"});var Re=_(Pe,2),Te=d(Re);Rt(Te,{width:"80%",height:"14px",radius:"4px"});var A=_(Re,2),le=d(A);Rt(le,{width:"50%",height:"12px",radius:"4px",style:"opacity: 0.6"}),m(ge,ye)}),m(X,oe)},K=X=>{var oe=bv();yt(oe,5,()=>s(l),ge=>ge._uid,(ge,F)=>{var ye=et(),Pe=Ae(ye);{var Ce=Te=>{var A=uv(),le=d(A);ve(()=>de(le,(s(F),b(()=>s(F).title)))),m(Te,A)},Re=Te=>{var A=_v(),le=d(A),_e=d(le);{let Ne=ct(()=>(R(Qr),s(F),b(()=>Qr(s(F),"md"))));nr(_e,{get src(){return s(Ne)},get alt(){return s(F),b(()=>s(F).displayName)},radius:"8px",$$slots:{fallback:(Xe,Ze)=>{var Ve=fv(),He=d(Ve);{var Ye=qe=>{var Me=et(),Oe=Ae(Me);te(Oe,()=>(R(y),b(()=>y.ARTISTS))),m(qe,Me)},Je=qe=>{var Me=et(),Oe=Ae(Me);te(Oe,()=>(R(y),b(()=>y.ALBUMS))),m(qe,Me)};L(He,qe=>{c()==="artists"?qe(Ye):qe(Je,!1)})}m(Xe,Ve)}}})}var Ee=_(_e,2),$e=d(Ee),ke=d($e);te(ke,()=>(R(y),b(()=>y.PLAY)));var Le=_(le,2),Ie=d(Le),ee=_(Le,2),be=d(ee);{var I=Ne=>{var Xe=hv(),Ze=d(Xe);ve(()=>de(Ze,(s(F),b(()=>s(F).artist)))),m(Ne,Xe)};L(be,Ne=>{s(F),b(()=>s(F).artist)&&Ne(I)})}var U=_(be,2);{var pe=Ne=>{var Xe=pv(),Ze=d(Xe);ve(()=>de(Ze,(s(F),b(()=>s(F).year)))),m(Ne,Xe)};L(U,Ne=>{s(F),b(()=>s(F).year&&s(F).year!=="0")&&Ne(pe)})}var Fe=_(U,2);{var Ue=Ne=>{var Xe=gv(),Ze=d(Xe);ve(Ve=>de(Ze,Ve),[()=>(s(F),b(()=>s(F).qualityBadge.split(" ")[0]))]),m(Ne,Xe)};L(Fe,Ne=>{s(F),b(()=>s(F).qualityBadge)&&Ne(Ue)})}ve(()=>de(Ie,(s(F),b(()=>s(F).displayName)))),P("click",A,()=>C(s(F))),P("keypress",A,Ne=>Ne.key==="Enter"&&C(s(F))),m(Te,A)};L(Pe,Te=>{s(F),b(()=>s(F).isHeader)?Te(Ce):Te(Re,!1)})}m(ge,ye)},ge=>{var F=mv();m(ge,F)}),m(X,oe)};L(G,X=>{s(h)?X(j):X(K,!1)})}ve(()=>Lt(V,"placeholder",`Filter ${c()??""}...`)),Ka(V,()=>s(f),X=>g(f,X)),m(Y,J)};L(D,Y=>{s(v),b(()=>s(v)?.view==="tracks_by_album")?Y(N):Y(we,!1)})}ve(()=>ne=Qe(Q,1,"view-container svelte-1eh2rsb",null,ne,{scrollable:s(v)?.view!=="tracks_by_album"})),m(e,Q),Et(),i()}var xv=x('<div class="music-card svelte-1otxnt7"><!> <!></div>'),Ev=x('<div class="music-grid svelte-1otxnt7"></div>'),Sv=x('<div slot="fallback" class="icon-fallback svelte-1otxnt7">ð»</div>'),Tv=x('<div class="status-badge playing svelte-1otxnt7">PLAYING</div>'),$v=x('<div class="status-badge paused svelte-1otxnt7">PAUSED</div>'),Mv=x('<span class="overlay-icon svelte-1otxnt7"><!></span>'),Av=x('<div class="card-sub svelte-1otxnt7"> </div>'),Pv=x('<div class="card-badge quality svelte-1otxnt7"> </div>'),Cv=x('<div role="button" tabindex="0"><div class="card-img-container svelte-1otxnt7"><!> <div class="play-overlay svelte-1otxnt7"><!></div></div> <div class="card-title svelte-1otxnt7"> </div> <div class="card-sub-row svelte-1otxnt7"><!> <!></div></div>'),Lv=x('<div class="empty-text svelte-1otxnt7">No stations found</div>'),zv=x('<div class="music-grid svelte-1otxnt7"></div> <!>',1),Iv=x('<div class="view-container scrollable svelte-1otxnt7"><div class="content-padded no-bottom-pad svelte-1otxnt7"><div class="search-input-container svelte-1otxnt7"><span class="search-icon svelte-1otxnt7"><!></span> <input type="text" placeholder="Find station..." class="svelte-1otxnt7"/></div></div> <div class="content-padded svelte-1otxnt7"><!></div></div>');function Rv(e,t){xt(t,!1);const a=()=>xe(qa,"$stations",o),r=()=>xe(kt,"$status",o),n=()=>xe(fs,"$isLoadingRadio",o),i=()=>xe(ra,"$currentSong",o),[o,l]=jt(),v=$(),c=$();let u=$("");re(()=>(a(),s(u)),()=>{g(v,a().filter(ae=>{const ue=s(u).toLowerCase();return ae.name.toLowerCase().includes(ue)||ae.genre&&ae.genre.toLowerCase().includes(ue)}))}),re(()=>r(),()=>{g(c,r().bitrate?`${r().bitrate} kbps`:r().format||"")}),Ut(),At();var h=Iv(),f=d(h),p=d(f),w=d(p),T=d(w);te(T,()=>(R(y),b(()=>y.SEARCH)));var k=_(w,2),E=_(f,2),W=d(E);{var se=ae=>{var ue=Ev();yt(ue,4,()=>Array(12),oa,(O,B)=>{var M=xv(),fe=d(M);Rt(fe,{width:"100%",style:"aspect-ratio:1; border-radius:12px; margin-bottom:12px;"});var me=_(fe,2);Rt(me,{width:"70%",height:"16px"}),m(O,M)}),m(ae,ue)},Z=ae=>{var ue=zv(),O=Ae(ue);yt(O,5,()=>s(v),oa,(fe,me)=>{const C=ct(()=>(s(me),b(()=>s(me).file))),q=ct(()=>(i(),s(me),R(s(C)),b(()=>i().stationName===s(me).name||i().file===s(C)))),ie=ct(()=>(R(xr),s(me),b(()=>xr(s(me)))));var Q=Cv();let ne;var D=d(Q),N=d(D);nr(N,{get src(){return s(ie)},get alt(){return s(me),b(()=>s(me).name)},radius:"8px",$$slots:{fallback:(K,X)=>{var oe=Sv();m(K,oe)}}});var we=_(N,2),Y=d(we);{var J=K=>{var X=et(),oe=Ae(X);{var ge=ye=>{var Pe=Tv();m(ye,Pe)},F=ye=>{var Pe=$v();m(ye,Pe)};L(oe,ye=>{r(),b(()=>r().state==="play")?ye(ge):ye(F,!1)})}m(K,X)},he=K=>{var X=Mv(),oe=d(X);te(oe,()=>(R(y),b(()=>y.PLAY))),m(K,X)};L(Y,K=>{s(q)?K(J):K(he,!1)})}var S=_(D,2),z=d(S),V=_(S,2),ce=d(V);{var H=K=>{var X=Av(),oe=d(X);ve(()=>de(oe,(s(me),b(()=>s(me).genre)))),m(K,X)};L(ce,K=>{s(me),b(()=>s(me).genre)&&K(H)})}var G=_(ce,2);{var j=K=>{var X=Pv(),oe=d(X);ve(()=>de(oe,s(c))),ot(1,X,()=>bt),m(K,X)};L(G,K=>{s(q)&&s(c)&&K(j)})}ve(()=>{ne=Qe(Q,1,"music-card svelte-1otxnt7",null,ne,{"is-active":s(q)}),lt(we,s(q)?"opacity: 1":""),de(z,(s(me),b(()=>s(me).name)))}),P("click",Q,()=>jn(s(me))),m(fe,Q)});var B=_(O,2);{var M=fe=>{var me=Lv();m(fe,me)};L(B,fe=>{s(v),a(),b(()=>s(v).length===0&&a().length>0)&&fe(M)})}m(ae,ue)};L(W,ae=>{n()?ae(se):ae(Z,!1)})}Ka(k,()=>s(u),ae=>g(u,ae)),ot(1,h,()=>bt,()=>({duration:200})),m(e,h),Et(),l()}var jv=x('<button class="clear-icon-btn svelte-m7c4tz"><!></button>'),Nv=x('<div class="spinner svelte-m7c4tz"></div>'),Ov=x('<div class="content-padded no-bottom-pad svelte-m7c4tz"><div class="search-input-container svelte-m7c4tz"><span class="search-icon svelte-m7c4tz"><!></span> <input type="text" placeholder="Search playlists &amp; tracks..." class="svelte-m7c4tz"/> <!> <!></div></div>'),Dv=x('<span class="meta-tag svelte-m7c4tz">Loading...</span>'),Fv=x('<span class="meta-tag svelte-m7c4tz"> </span>'),qv=x('<span class="meta-tag quality svelte-m7c4tz"> </span>'),Bv=x('<span class="meta-tag svelte-m7c4tz"> </span> <!> <!>',1),Uv=x('<div slot="header" class="content-padded svelte-m7c4tz"><div class="view-header svelte-m7c4tz"><div class="header-art svelte-m7c4tz"><div class="header-icon-wrap svelte-m7c4tz"><!></div></div> <div class="header-info svelte-m7c4tz"><div class="header-text-group svelte-m7c4tz"><div class="header-label svelte-m7c4tz">Playlist</div> <h1 class="header-title svelte-m7c4tz"> </h1> <div class="meta-badges svelte-m7c4tz"><!></div></div> <div class="header-actions svelte-m7c4tz"><button class="btn-primary svelte-m7c4tz"> </button> <button class="btn-secondary svelte-m7c4tz"> </button> <button title="Edit"><!></button></div></div></div></div>'),Hv=x('<div slot="row" class="svelte-m7c4tz"><!></div>'),Yv=x('<div class="music-card skeleton-card svelte-m7c4tz"><div class="card-img-container svelte-m7c4tz"><!></div> <div style="margin-top: 8px;" class="svelte-m7c4tz"><!></div></div>'),Vv=x('<div class="content-padded svelte-m7c4tz"><div class="music-grid playlists-grid-override svelte-m7c4tz"></div></div>'),Wv=x('<button class="card-menu-btn svelte-m7c4tz"><!></button>'),Qv=x('<div class="music-card svelte-m7c4tz"><div class="card-img-container svelte-m7c4tz"><div class="icon-wrap svelte-m7c4tz"><!></div> <!> <div class="play-overlay svelte-m7c4tz"><span class="overlay-icon svelte-m7c4tz"><!></span></div></div> <div class="card-title svelte-m7c4tz"> </div> <div class="card-sub-row svelte-m7c4tz"><div class="card-sub svelte-m7c4tz"> </div></div></div>'),Xv=x('<div class="music-grid playlists-grid-override svelte-m7c4tz"><div class="music-card svelte-m7c4tz"><div class="card-img-container dashed-cover svelte-m7c4tz"><div class="icon-wrap svelte-m7c4tz"><!></div></div> <div class="card-title svelte-m7c4tz">New Playlist</div></div> <!></div>'),Kv=x('<div class="music-card svelte-m7c4tz"><div class="card-img-container svelte-m7c4tz"><div class="icon-wrap svelte-m7c4tz"><!></div> <div class="play-overlay svelte-m7c4tz"><span class="overlay-icon svelte-m7c4tz"><!></span></div></div> <div class="card-title svelte-m7c4tz"> </div></div>'),Gv=x('<div class="header-label section-spacing svelte-m7c4tz">Matched Playlists</div> <div class="music-grid horizontal section-mb svelte-m7c4tz"></div>',1),Zv=x('<div class="group-container svelte-m7c4tz"><div class="group-header svelte-m7c4tz"><div class="group-icon svelte-m7c4tz"><!></div> <div class="group-title svelte-m7c4tz"> </div> <div class="group-count svelte-m7c4tz"> </div> <div class="group-actions svelte-m7c4tz"><button class="btn-icon small svelte-m7c4tz" title="Play matches"><!></button> <button class="btn-icon small svelte-m7c4tz" title="Add matches to Queue"><!></button></div></div> <div class="group-tracks svelte-m7c4tz"></div></div>'),Jv=x('<div class="header-label section-spacing svelte-m7c4tz">Matched Tracks</div> <div class="grouped-results svelte-m7c4tz"></div>',1),eu=x('<div class="empty-text svelte-m7c4tz"> </div>'),tu=x('<div class="empty-text svelte-m7c4tz" style="opacity: 0.7">Searching tracks in playlists...</div>'),au=x("<!> <!> <!>",1),ru=x('<div class="content-padded svelte-m7c4tz"><!></div>'),su=x("<div><!> <!></div>");function nu(e,t){xt(t,!1);const a=()=>xe(kt,"$status",f),r=()=>xe(ra,"$currentSong",f),n=()=>xe(Vt,"$navigationStack",f),i=()=>xe(Ls,"$playlists",f),o=()=>xe(Fr,"$activePlaylistTracks",f),l=()=>xe(cn,"$isLoadingTracks",f),v=()=>xe(Zc,"$activePlaylistName",f),c=()=>xe(Ga,"$queue",f),u=()=>xe(ws,"$currentTheme",f),h=()=>xe(ln,"$isLoadingPlaylists",f),[f,p]=jt(),w=$(),T=$(),k=$(),E=$(),W=$(),se=$();let Z=$(!1),ae=$(!1),ue=$(!1),O=$(""),B=$(!1),M,fe=0,me=$([]),C=$([]),q=$(""),ie=$(""),Q=$("");function ne(A){g(O,A.target.value),clearTimeout(M),s(O).length>=2?M=setTimeout(()=>{D(s(O))},600):(g(B,!1),g(me,[]),g(C,[]))}async function D(A){if(!A)return;fe++;const le=fe;g(B,!0);const _e=A.toLowerCase();g(me,i().filter(ke=>ke.name.toLowerCase().includes(_e)));let Ee=[];const $e=i().filter(ke=>ke.name!=="Favorites");for(const ke of $e){if(le!==fe)break;try{const Le=await ze.send(`listplaylistinfo "${ke.name.replace(/"/g,'\\"')}"`),be=ta.parseTracks(Le).map((I,U)=>({...I,playlistPos:U})).filter(I=>I.title&&I.title.toLowerCase().includes(_e)||I.artist&&I.artist.toLowerCase().includes(_e));if(be.length>0){const I=be.map(U=>({...U,_uid:Math.random()}));Ee.push({playlist:ke,tracks:I}),g(C,[...Ee])}}catch(Le){console.warn(`Failed to search in playlist ${ke.name}`,Le)}}le===fe&&g(B,!1)}function N(A){s(Z)||Is(A)}function we(A){A.deltaY!==0&&(A.currentTarget.scrollLeft+=A.deltaY)}function Y(A,le){fa({title:"Play Search Results?",message:`This will clear your queue and play ${A.length} matching tracks from "${le}".`,confirmLabel:"Play",type:"confirm",onConfirm:()=>{zn(A)}})}function J(A){!A||A.length===0||In(A)}Fa(()=>{!s(W)&&i().length===0&&Rn()});function he(A){const le=A.reduce((Ee,$e)=>Ee+(parseFloat($e.time)||0),0);if(le>0){const Ee=Math.floor(le/3600),$e=Math.floor(le%3600/60);g(q,Ee>0?`${Ee} hr ${$e} min`:`${$e} min`)}else g(q,"");const _e=new Set;A.forEach(Ee=>{Ee.qualityBadge&&_e.add(Ee.qualityBadge.split(" ")[0])}),g(ie,_e.size===1?A[0].qualityBadge:_e.size>1?"Mixed":"")}function S(A){Oa("details",A)}function z(){if(c().length===0){fa({title:"Create Playlist",message:"Queue is empty. Add tracks to queue before saving a playlist.",confirmLabel:"OK",type:"alert"});return}fa({title:"New Playlist",message:"Save current queue as a new playlist:",type:"prompt",placeholder:"Playlist Name",confirmLabel:"Create",onConfirm:A=>{A&&ha.createPlaylistFromQueue(A)}})}function V(A,le){le.name!=="Favorites"&&(A.stopPropagation(),A.preventDefault(),Wr(A,null,{type:"playlist-card",playlist:le}))}function ce(){fa({title:"Replace Queue?",message:`This will clear your current queue and play "${s(E).data.name}".`,confirmLabel:"Play",type:"confirm",onConfirm:()=>{g(ae,!0),So(s(E).data.name,0)}})}function H(){if(o().length>0){const A=s(E).data.name.replace(/"/g,'\\"');Ts(`load "${A}"`),g(ue,!0),setTimeout(()=>{g(ue,!1)},2e3)}}function G(){g(Z,!s(Z))}function j(A){const le=s(E).data.name,_e=o();_e.splice(A,1),Fr.set(_e),xo(le,A),he(_e)}function K(A,le){Eo(s(E).data.name,A,le)}function X(A){if(A.name==="Favorites"){if(u()==="gruvbox"){const le="var(--c-heart)";return`background: linear-gradient(135deg, ${le}, transparent); background-color: ${le};`}return"background: linear-gradient(135deg, hsl(348, 95%, 58%), hsl(348, 90%, 40%));"}return u()==="gruvbox"?`background: linear-gradient(135deg, ${A.colorVar}, transparent); background-color: ${A.colorVar};`:`background: ${A.color}`}function oe(A){if(!A)return"";if(A.name==="Favorites"){if(u()==="gruvbox"){const Ee="var(--c-heart)";return`background: linear-gradient(135deg, ${Ee}, transparent); background-color: ${Ee};`}return"background: linear-gradient(135deg, hsl(348, 95%, 58%), hsl(348, 90%, 40%));"}const le="var(--c-bg-card)";if(u()==="gruvbox"){const Ee=A.colorVar||A.color||le;return`background: linear-gradient(135deg, ${Ee}, transparent); background-color: ${Ee};`}return`background: ${A.color||A.colorVar||le}`}re(()=>a(),()=>{g(w,Number(a().song))}),re(()=>r(),()=>{g(T,r().file)}),re(()=>a(),()=>{g(k,a().state==="play")}),re(()=>n(),()=>{g(E,n()[n().length-1])}),re(()=>s(E),()=>{g(W,s(E).view==="details")}),re(()=>(s(E),s(Q)),()=>{const A=JSON.stringify(s(E));A!==s(Q)&&(g(O,""),g(ae,!1),g(ue,!1),g(Z,!1),g(me,[]),g(C,[]),g(B,!1),g(Q,A))}),re(()=>(s(W),o(),l()),()=>{s(W)&&o().length>0?he(o()):s(W)&&o().length===0&&!l()&&(g(q,"0 min"),g(ie,""))}),re(()=>(s(W),s(E),v(),Ld),()=>{s(W)&&s(E).data&&v()!==s(E).data.name&&wo(s(E).data.name)}),re(()=>s(E),()=>{g(se,s(E)?.data?.name==="Favorites")}),Ut(),At();var ge=su();let F;var ye=d(ge);{var Pe=A=>{var le=Ov(),_e=d(le),Ee=d(_e),$e=d(Ee);te($e,()=>(R(y),b(()=>y.SEARCH)));var ke=_(Ee,2),Le=_(ke,2);{var Ie=I=>{var U=jv(),pe=d(U);te(pe,()=>(R(y),b(()=>y.CLOSE))),P("click",U,()=>{g(O,""),g(me,[]),g(C,[]),g(B,!1)}),m(I,U)};L(Le,I=>{s(O)&&I(Ie)})}var ee=_(Le,2);{var be=I=>{var U=Nv();m(I,U)};L(ee,I=>{s(B)&&I(be)})}ve(()=>oo(ke,s(O))),P("input",ke,ne),m(A,le)};L(ye,A=>{s(W)||A(Pe)})}var Ce=_(ye,2);{var Re=A=>{ss(A,{get itemsStore(){return Fr},get isLoading(){return l()},get isEditMode(){return s(Z)},emptyText:"This playlist is empty.",onMoveItem:K,$$slots:{header:(le,_e)=>{var Ee=Uv(),$e=d(Ee),ke=d($e),Le=d(ke),Ie=d(Le);te(Ie,()=>(s(se),R(y),b(()=>s(se)?y.HEART_FILLED:y.PLAYLISTS)));var ee=_(ke,2),be=d(ee),I=_(d(be),2),U=d(I),pe=_(I,2),Fe=d(pe);{var Ue=Oe=>{var We=Dv();m(Oe,We)},Ne=Oe=>{var We=Bv(),st=Ae(We),vt=d(st),St=_(st,2);{var wt=ht=>{var ft=Fv(),dt=d(ft);ve(()=>de(dt,s(q))),m(ht,ft)};L(St,ht=>{s(q)&&ht(wt)})}var _t=_(St,2);{var ut=ht=>{var ft=qv(),dt=d(ft);ve(()=>de(dt,s(ie))),m(ht,ft)};L(_t,ht=>{s(ie)&&ht(ut)})}ve(()=>de(vt,`${o(),b(()=>o().length)??""} tracks`)),m(Oe,We)};L(Fe,Oe=>{l()?Oe(Ue):Oe(Ne,!1)})}var Xe=_(be,2),Ze=d(Xe),Ve=d(Ze),He=_(Ze,2),Ye=d(He),Je=_(He,2);let qe;var Me=d(Je);te(Me,()=>(s(Z),R(y),b(()=>s(Z)?y.ACCEPT:y.EDIT))),ve(Oe=>{lt(ke,Oe),Lt(I,"title",(s(E),b(()=>s(E).data.name))),de(U,(s(E),b(()=>s(E).data.name))),Ze.disabled=s(ae),de(Ve,s(ae)?"Playing...":"Play All"),He.disabled=s(ue),de(Ye,s(ue)?"Added":"To Queue"),qe=Qe(Je,1,"btn-action svelte-m7c4tz",null,qe,{active:s(Z)})},[()=>(s(E),b(()=>oe(s(E).data)))]),P("click",Ze,ce),P("click",He,H),P("click",Je,G),m(le,Ee)},row:(le,_e)=>{var Ee=Hv();const $e=ct(()=>_e.item),ke=ct(()=>_e.index),Le=ct(()=>_e.startDrag);var Ie=d(Ee);Sr(Ie,{get track(){return s($e)},get index(){return s(ke)},get playingIndex(){return s(w)},get playingFile(){return s(T)},get isPlaying(){return s(k)},get isEditable(){return s(Z)},$$events:{play:()=>N(s($e)),remove:()=>j(s(ke)),startdrag(...ee){s(Le)?.apply(this,ee)}}}),m(le,Ee)}}})},Te=A=>{var le=et(),_e=Ae(le);{var Ee=ke=>{var Le=Vv(),Ie=d(Le);yt(Ie,4,()=>Array(8),oa,(ee,be)=>{var I=Yv(),U=d(I),pe=d(U);Rt(pe,{width:"100%",height:"100%",radius:"12px"});var Fe=_(U,2),Ue=d(Fe);Rt(Ue,{width:"60%",height:"16px",radius:"4px"}),m(ee,I)}),m(ke,Le)},$e=ke=>{var Le=ru(),Ie=d(Le);{var ee=I=>{var U=Xv(),pe=d(U),Fe=d(pe),Ue=d(Fe),Ne=d(Ue);te(Ne,()=>(R(y),b(()=>y.ADD)));var Xe=_(pe,2);yt(Xe,1,i,Ze=>Ze.name,(Ze,Ve)=>{const He=ct(()=>(s(Ve),b(()=>s(Ve).name==="Favorites")));var Ye=Qv(),Je=d(Ye),qe=d(Je),Me=d(qe);te(Me,()=>(R(s(He)),R(y),b(()=>s(He)?y.HEART_FILLED:y.PLAYLISTS)));var Oe=_(qe,2);{var We=dt=>{var je=Wv(),pt=d(je);te(pt,()=>(R(y),b(()=>y.DOTS))),P("click",je,zt=>V(zt,s(Ve))),m(dt,je)};L(Oe,dt=>{s(He)||dt(We)})}var st=_(Oe,2),vt=d(st),St=d(vt);te(St,()=>(R(y),b(()=>y.PLAY)));var wt=_(Je,2),_t=d(wt),ut=_(wt,2),ht=d(ut),ft=d(ht);Dt(()=>P("click",Ye,()=>S(s(Ve)))),Sn(Ye,dt=>On?.(dt)),Dt(()=>P("longpress",Ye,dt=>V(dt.detail.originalEvent,s(Ve)))),Dt(()=>P("contextmenu",Ye,dt=>V(dt,s(Ve)))),ve((dt,je)=>{lt(Je,dt),de(_t,(s(Ve),b(()=>s(Ve).name))),de(ft,je)},[()=>(s(Ve),b(()=>X(s(Ve)))),()=>(s(Ve),b(()=>s(Ve).lastModified?new Date(s(Ve).lastModified).toLocaleDateString():"Playlist"))]),m(Ze,Ye)}),P("click",pe,z),m(I,U)},be=I=>{var U=au(),pe=Ae(U);{var Fe=He=>{var Ye=Gv(),Je=_(Ae(Ye),2);yt(Je,5,()=>s(me),qe=>qe.name,(qe,Me)=>{const Oe=ct(()=>(s(Me),b(()=>s(Me).name==="Favorites")));var We=Kv(),st=d(We),vt=d(st),St=d(vt);te(St,()=>(R(s(Oe)),R(y),b(()=>s(Oe)?y.HEART_FILLED:y.PLAYLISTS)));var wt=_(vt,2),_t=d(wt),ut=d(_t);te(ut,()=>(R(y),b(()=>y.PLAY)));var ht=_(st,2),ft=d(ht);ve(dt=>{lt(st,dt),de(ft,(s(Me),b(()=>s(Me).name)))},[()=>(s(Me),b(()=>X(s(Me))))]),P("click",We,()=>S(s(Me))),m(qe,We)}),P("wheel",Je,we),m(He,Ye)};L(pe,He=>{s(me),b(()=>s(me).length>0)&&He(Fe)})}var Ue=_(pe,2);{var Ne=He=>{var Ye=Jv(),Je=_(Ae(Ye),2);yt(Je,5,()=>s(C),qe=>qe.playlist.name,(qe,Me)=>{var Oe=Zv(),We=d(Oe),st=d(We),vt=d(st);te(vt,()=>(R(y),b(()=>y.PLAYLISTS)));var St=_(st,2),wt=d(St),_t=_(St,2),ut=d(_t),ht=_(_t,2),ft=d(ht),dt=d(ft);te(dt,()=>(R(y),b(()=>y.PLAY)));var je=_(ft,2),pt=d(je);te(pt,()=>(R(y),b(()=>y.ADD)));var zt=_(We,2);yt(zt,5,()=>(s(Me),b(()=>s(Me).tracks)),Kt=>Kt._uid,(Kt,Se)=>{Sr(Kt,{get track(){return s(Se)},get index(){return s(Se),b(()=>s(Se).playlistPos)},get playingFile(){return s(T)},get isPlaying(){return s(k)},$$events:{play:()=>N(s(Se))}})}),ve(()=>{de(wt,(s(Me),b(()=>s(Me).playlist.name))),de(ut,(s(Me),b(()=>s(Me).tracks.length)))}),P("click",ft,Qt(()=>Y(s(Me).tracks,s(Me).playlist.name))),P("click",je,Qt(()=>J(s(Me).tracks))),P("click",We,()=>S(s(Me).playlist)),m(qe,Oe)}),m(He,Ye)};L(Ue,He=>{s(C),b(()=>s(C).length>0)&&He(Ne)})}var Xe=_(Ue,2);{var Ze=He=>{var Ye=eu(),Je=d(Ye);ve(()=>de(Je,`No matches found for "${s(O)??""}"`)),m(He,Ye)},Ve=He=>{var Ye=et(),Je=Ae(Ye);{var qe=Me=>{var Oe=tu();m(Me,Oe)};L(Je,Me=>{s(B),s(C),b(()=>s(B)&&s(C).length===0)&&Me(qe)},!0)}m(He,Ye)};L(Xe,He=>{s(B),s(me),s(C),b(()=>!s(B)&&s(me).length===0&&s(C).length===0)?He(Ze):He(Ve,!1)})}m(I,U)};L(Ie,I=>{s(O)?I(be,!1):I(ee)})}m(ke,Le)};L(_e,ke=>{h()?ke(Ee):ke($e,!1)},!0)}m(A,le)};L(Ce,A=>{s(W)?A(Re):A(Te,!1)})}ve(()=>F=Qe(ge,1,"view-container svelte-m7c4tz",null,F,{scrollable:!s(W)})),m(e,ge),Et(),p()}var iu=x('<button class="clear-icon-btn svelte-1d3z1zm"><!></button>'),ou=x('<div class="spinner svelte-1d3z1zm"></div>'),lu=x('<div class="placeholder-state svelte-1d3z1zm"><div class="placeholder-icon svelte-1d3z1zm">ð</div> <p class="svelte-1d3z1zm">Type to search your library</p></div>'),cu=x('<div class="empty-text svelte-1d3z1zm"> </div>'),du=x('<div slot="fallback" class="icon-fallback svelte-1d3z1zm">ð¿</div>'),vu=x('<div class="meta-tag svelte-1d3z1zm"> </div>'),uu=x('<div class="meta-tag quality svelte-1d3z1zm"> </div>'),fu=x('<div class="music-card svelte-1d3z1zm"><div class="card-img-container svelte-1d3z1zm"><!> <div class="play-overlay svelte-1d3z1zm"><span class="overlay-icon svelte-1d3z1zm"><!></span></div></div> <div class="card-title svelte-1d3z1zm"> </div> <div class="card-sub-row svelte-1d3z1zm"><div class="card-sub text-ellipsis svelte-1d3z1zm"> </div> <!> <!></div></div>'),hu=x('<div class="header-label section-spacing svelte-1d3z1zm">Albums</div> <div class="music-grid horizontal section-mb svelte-1d3z1zm"></div>',1),pu=x('<div class="header-label svelte-1d3z1zm">Tracks</div>'),gu=x("<!> <!>",1),_u=x('<div slot="header" class="content-padded svelte-1d3z1zm"><!></div>'),mu=x('<div slot="row" class="svelte-1d3z1zm"><!></div>'),bu=x('<div class="view-container svelte-1d3z1zm"><div class="content-padded no-bottom-pad svelte-1d3z1zm"><div class="search-input-container svelte-1d3z1zm"><span class="search-icon svelte-1d3z1zm"><!></span> <input type="text" placeholder="Artists, songs, or albums" autoFocus class="svelte-1d3z1zm"/> <!> <!></div></div> <!></div>');function yu(e,t){xt(t,!1);const a=()=>xe(qr,"$searchQuery",n),r=()=>xe(o,"$tracksStore",n),[n,i]=jt(),o=Be([]);let l=$([]),v=$(!1),c,u=$(!1);Fa(()=>{a().length>=2&&p(a())});function h(C){qr.set(C.target.value),clearTimeout(c),c=setTimeout(()=>{p(a())},300)}function f(){qr.set(""),o.set([]),g(l,[]),g(u,!1)}async function p(C){const q=C.trim().toLowerCase();if(q.length<2){o.set([]),g(l,[]),g(u,!1);return}g(v,!0),g(u,!0);try{const ie=await Ra.search(q),Q=ie.map((D,N)=>({...D,_uid:D.file?`${D.file}-${N}`:`search-${N}`}));o.set(Q);const ne=new Map;ie.forEach(D=>{const N=D.album;if(N&&!ne.has(N)){const we=N.toLowerCase().includes(q),Y=D.artist&&D.artist.toLowerCase().includes(q);if(we||Y){let J=String(D.year||"");J.length>4&&(J=J.substring(0,4)),ne.set(N,{name:N,artist:D.artist,file:D.file,thumbHash:D.thumbHash,_uid:`alb-${N}`,year:J,qualityBadge:D.qualityBadge})}}}),g(l,Array.from(ne.values()))}finally{g(v,!1)}}function w(C){Is(C)}function T(C){Oa("tracks_by_album",{name:C.name,artist:C.artist})}function k(C){C.deltaY!==0&&(C.currentTarget.scrollLeft+=C.deltaY)}At();var E=bu(),W=d(E),se=d(W),Z=d(se),ae=d(Z);te(ae,()=>y.SEARCH);var ue=_(Z,2),O=_(ue,2);{var B=C=>{var q=iu(),ie=d(q);te(ie,()=>y.CLOSE),P("click",q,f),m(C,q)};L(O,C=>{a().length>0&&C(B)})}var M=_(O,2);{var fe=C=>{var q=ou();m(C,q)};L(M,C=>{s(v)&&C(fe)})}var me=_(W,2);ss(me,{get itemsStore(){return o},isEditMode:!1,isLoading:!1,emptyText:"",$$slots:{header:(C,q)=>{var ie=_u(),Q=d(ie);{var ne=N=>{var we=lu();m(N,we)},D=N=>{var we=et(),Y=Ae(we);{var J=S=>{var z=cu(),V=d(z);ve(()=>de(V,`No results found for "${a()??""}"`)),m(S,z)},he=S=>{var z=gu(),V=Ae(z);{var ce=j=>{var K=hu(),X=_(Ae(K),2);yt(X,5,()=>s(l),oe=>oe._uid,(oe,ge)=>{var F=fu(),ye=d(F),Pe=d(ye);{let be=ct(()=>Qr(s(ge),"md"));nr(Pe,{get src(){return s(be)},get alt(){return s(ge).name},radius:"8px",$$slots:{fallback:(I,U)=>{var pe=du();m(I,pe)}}})}var Ce=_(Pe,2),Re=d(Ce),Te=d(Re);te(Te,()=>y.PLAY);var A=_(ye,2),le=d(A),_e=_(A,2),Ee=d(_e),$e=d(Ee),ke=_(Ee,2);{var Le=be=>{var I=vu(),U=d(I);ve(()=>de(U,s(ge).year)),m(be,I)};L(ke,be=>{s(ge).year&&s(ge).year!=="0"&&s(ge).year!==0&&be(Le)})}var Ie=_(ke,2);{var ee=be=>{var I=uu(),U=d(I);ve(pe=>de(U,pe),[()=>s(ge).qualityBadge.split(" ")[0]]),m(be,I)};L(Ie,be=>{s(ge).qualityBadge&&be(ee)})}ve(()=>{Lt(A,"title",s(ge).name),de(le,s(ge).name),de($e,s(ge).artist)}),P("click",F,()=>T(s(ge))),m(oe,F)}),P("wheel",X,k),m(j,K)};L(V,j=>{s(l).length>0&&j(ce)})}var H=_(V,2);{var G=j=>{var K=pu();m(j,K)};L(H,j=>{r().length>0&&j(G)})}m(S,z)};L(Y,S=>{!s(v)&&r().length===0&&s(l).length===0&&s(u)?S(J):S(he,!1)},!0)}m(N,we)};L(Q,N=>{a().length<2?N(ne):N(D,!1)})}m(C,ie)},row:(C,q)=>{var ie=mu();const Q=ct(()=>q.item),ne=ct(()=>q.index);var D=d(ie);Sr(D,{get track(){return s(Q)},get index(){return s(ne)},isEditable:!1,$$events:{play:()=>w(s(Q))}}),m(C,ie)}}}),ve(()=>oo(ue,a())),P("input",ue,h),m(e,E),Et(),i()}const Gr={async syncLibrary(){if(Ge(sa))return;sa.set(!0);const e=new bo,t=window.location.origin+"/wave-api.php";e.postMessage({type:"START_SYNC",payload:{url:t}}),e.onmessage=a=>{const{type:r,status:n,count:i,message:o}=a.data;if(r==="PROGRESS"){const l={connecting:"Requesting library...",downloading:"Downloading data...",parsing:"Processing metadata...",saving:`Saving ${i} tracks...`};l[n]&&De(l[n],"info")}r==="DONE"&&(De(`Library updated: ${i} tracks`,"success"),sa.set(!1),e.terminate()),r==="ERROR"&&(console.error("[API] Sync Error:",o),De(`Sync Failed: ${o}`,"error"),sa.set(!1),e.terminate())},e.onerror=a=>{console.error("[API] Worker crash:",a),De("Sync worker crashed","error"),sa.set(!1),e.terminate()}},async loadRadioStations(){if(!Ge(fs)){fs.set(!0);try{const t=await fetch(Qs.STATIONS(!1));if(!t.ok)throw new Error("Network error");const a=await t.json();if(a.error)throw new Error(a.error);if(!Array.isArray(a))throw new Error("Invalid response format");const r=a.map(n=>({id:n.id,name:n.name,file:n.station,station:n.station,image:n.logo,genre:n.genre||"Radio"}));r.sort((n,i)=>n.name.localeCompare(i.name,void 0,{sensitivity:"base"})),qa.set(r)}catch(e){console.error("[API] Failed to load stations",e),De("Failed to load radio","error")}finally{fs.set(!1)}}},async setAlarm(e,t,a){try{const r=new FormData;r.append("action","set_alarm"),r.append("enabled",e?"1":"0"),r.append("time",t),r.append("playlist",a);const n=await fetch(Qs.SYNC,{method:"POST",body:r});if(!n.ok)throw new Error("Server error");const i=await n.json();if(i.error)throw new Error(i.error);return!0}catch(r){throw console.error("[API] Failed to set alarm",r),r}},async getServerTime(){try{const e=await fetch(`${Qs.SYNC}?action=get_time`);if(e.ok)return(await e.json()).time}catch(e){console.error("Failed to get server time",e)}return null}};var wu=x('<option class="svelte-1j67jqh"> </option>'),ku=x('<div class="separator svelte-1j67jqh"></div> <div class="row space-between svelte-1j67jqh"><label for="alarm-time" class="svelte-1j67jqh">Wake up time</label> <input id="alarm-time" type="time" class="svelte-1j67jqh"/></div> <div class="separator svelte-1j67jqh"></div> <div class="row space-between svelte-1j67jqh"><label for="alarm-pl" class="svelte-1j67jqh">Playlist</label> <div class="select-wrapper svelte-1j67jqh"><select id="alarm-pl" class="svelte-1j67jqh"></select> <div class="select-arrow svelte-1j67jqh"><!></div></div></div> <p class="hint svelte-1j67jqh">Player will clear queue, load this playlist and play at set time.</p>',1),xu=x('<div class="separator svelte-1j67jqh"></div> <div class="row svelte-1j67jqh"><label for="yandex-token" class="svelte-1j67jqh">OAuth Token</label> <div class="input-group svelte-1j67jqh"><input id="yandex-token" type="password" placeholder="Enter token..." class="svelte-1j67jqh"/></div></div> <p class="hint svelte-1j67jqh">Required to access your library and stream music. <a href="https://github.com/MarshalX/yandex-music-api/discussions/513" target="_blank" style="color: var(--c-accent);" class="svelte-1j67jqh">How to get token</a></p>',1),Eu=x('<div class="view-container scrollable svelte-1j67jqh"><div class="content-padded svelte-1j67jqh"><h1 class="header-title big svelte-1j67jqh">Settings</h1> <div class="section svelte-1j67jqh"><div class="section-header svelte-1j67jqh"><span class="svelte-1j67jqh">Alarm Clock</span></div> <div class="card svelte-1j67jqh"><div class="row space-between svelte-1j67jqh"><span class="label-text svelte-1j67jqh">Current Player Time</span> <span class="mono-badge svelte-1j67jqh"> </span></div> <div class="separator svelte-1j67jqh"></div> <div class="row space-between svelte-1j67jqh"><label class="svelte-1j67jqh">Enable Alarm</label> <button><div class="toggle-circle svelte-1j67jqh"></div></button></div> <!></div></div> <div class="section svelte-1j67jqh"><div class="section-header svelte-1j67jqh"><span class="svelte-1j67jqh">Appearance</span></div> <div class="card clickable svelte-1j67jqh"><div class="row space-between svelte-1j67jqh"><span class="svelte-1j67jqh">Interface Theme</span> <div class="row-gap svelte-1j67jqh"><span class="value svelte-1j67jqh"> </span> <span class="chevron svelte-1j67jqh"><!></span></div></div></div></div> <div class="section svelte-1j67jqh"><div class="section-header svelte-1j67jqh"><span class="svelte-1j67jqh">Services</span></div> <div class="card svelte-1j67jqh"><div class="row space-between svelte-1j67jqh"><label class="svelte-1j67jqh">Enable Yandex Music (Beta)</label> <button><div class="toggle-circle svelte-1j67jqh"></div></button></div> <!></div></div> <div class="section svelte-1j67jqh"><div class="section-header svelte-1j67jqh"><span class="svelte-1j67jqh">Connection</span></div> <div class="card svelte-1j67jqh"><div class="row svelte-1j67jqh"><label for="ip" class="svelte-1j67jqh">Moode Device IP</label> <div class="input-group svelte-1j67jqh"><input id="ip" type="text" placeholder="192.168.x.x" class="svelte-1j67jqh"/> <button class="btn-primary small svelte-1j67jqh">Save</button></div></div> <p class="hint svelte-1j67jqh"> </p></div></div> <div class="section svelte-1j67jqh"><div class="section-header svelte-1j67jqh"><span class="svelte-1j67jqh">About</span></div> <div class="card svelte-1j67jqh"><div class="info-row svelte-1j67jqh"><span class="svelte-1j67jqh">Version</span> <span class="mono svelte-1j67jqh"> </span></div> <div class="separator svelte-1j67jqh"></div> <div class="info-row svelte-1j67jqh"><span class="svelte-1j67jqh">Build Date</span> <span class="mono small svelte-1j67jqh"> </span></div> <div class="separator svelte-1j67jqh"></div> <div class="info-row svelte-1j67jqh"><span class="svelte-1j67jqh">Developer</span> <span class="svelte-1j67jqh">Moode WaveUI</span></div></div></div></div></div>');function Su(e,t){xt(t,!1);const a=()=>xe(ws,"$currentTheme",c),r=()=>xe(hn,"$isAlarmEnabled",c),n=()=>xe(fn,"$alarmTime",c),i=()=>xe(pn,"$alarmPlaylist",c),o=()=>xe(Ls,"$playlists",c),l=()=>xe(Es,"$isYandexEnabled",c),v=()=>xe(Xr,"$yandexToken",c),[c,u]=jt(),h=$();let f=$(Ya.MOODE_IP),p=$("--:--"),w;function T(){Ya.setMoodeIp(s(f)),De("IP Saved. Reloading...","success"),setTimeout(()=>location.reload(),1e3)}const k="0.0.1",E="2026-01-09T11:14:17.059Z",W=new Date(E).toLocaleString();function se(){const U=nn.map(pe=>({label:pe.label,value:pe.id}));fa({title:"Select Theme",message:"Choose your preferred interface style:",type:"select",inputValue:a(),options:U,onConfirm:pe=>{ws.set(pe),De("Theme updated","success")}})}async function Z(){const U=await Gr.getServerTime();U&&g(p,U)}Fa(()=>{Z(),w=setInterval(Z,6e4)}),vo(()=>{w&&clearInterval(w)});async function ae(){try{await Gr.setAlarm(r(),n(),i()),r()&&De(`Alarm set for ${n()}`,"success")}catch{De("Failed to sync alarm settings","error")}}function ue(){hn.update(U=>!U),ae()}function O(){Es.update(U=>!U)}re(()=>a(),()=>{g(h,nn.find(U=>U.id===a())?.label||"Default")}),Ut(),At();var B=Eu(),M=d(B),fe=_(d(M),2),me=_(d(fe),2),C=d(me),q=_(d(C),2),ie=d(q),Q=_(C,4),ne=_(d(Q),2);let D;var N=_(Q,2);{var we=U=>{var pe=ku(),Fe=Ae(pe),Ue=_(Fe,2),Ne=_(d(Ue),2),Xe=_(Ue,2),Ze=_(Xe,2),Ve=_(d(Ze),2),He=d(Ve);ve(()=>{i(),Ll(()=>{o()})}),yt(He,5,o,oa,(Me,Oe)=>{var We=wu(),st=d(We),vt={};ve(()=>{de(st,(s(Oe),b(()=>s(Oe).name))),vt!==(vt=(s(Oe),b(()=>s(Oe).name)))&&(We.value=(We.__value=(s(Oe),b(()=>s(Oe).name)))??"")}),m(Me,We)});var Ye=_(He,2),Je=d(Ye);te(Je,()=>(R(y),b(()=>y.CHEVRON_DOWN)));var qe=_(Ze,2);ot(1,Fe,()=>bt),Ka(Ne,n,Me=>qs(fn,Me)),P("change",Ne,ae),ot(1,Ue,()=>bt),ot(1,Xe,()=>bt),ec(He,i,Me=>qs(pn,Me)),P("change",He,ae),ot(1,Ze,()=>bt),ot(1,qe,()=>bt),m(U,pe)};L(N,U=>{r()&&U(we)})}var Y=_(fe,2),J=_(d(Y),2),he=d(J),S=_(d(he),2),z=d(S),V=d(z),ce=_(z,2),H=d(ce);te(H,()=>(R(y),b(()=>y.NEXT)));var G=_(Y,2),j=_(d(G),2),K=d(j),X=_(d(K),2);let oe;var ge=_(K,2);{var F=U=>{var pe=xu(),Fe=Ae(pe),Ue=_(Fe,2),Ne=_(d(Ue),2),Xe=d(Ne),Ze=_(Ue,2);ot(1,Fe,()=>bt),Ka(Xe,v,Ve=>qs(Xr,Ve)),ot(1,Ue,()=>bt),ot(1,Ze,()=>bt),m(U,pe)};L(ge,U=>{l()&&U(F)})}var ye=_(G,2),Pe=_(d(ye),2),Ce=d(Pe),Re=_(d(Ce),2),Te=d(Re),A=_(Te,2),le=_(Ce,2),_e=d(le),Ee=_(ye,2),$e=_(d(Ee),2),ke=d($e),Le=_(d(ke),2),Ie=d(Le),ee=_(ke,4),be=_(d(ee),2),I=d(be);ve(()=>{de(ie,s(p)),D=Qe(ne,1,"toggle-btn svelte-1j67jqh",null,D,{active:r()}),de(V,s(h)),oe=Qe(X,1,"toggle-btn svelte-1j67jqh",null,oe,{active:l()}),de(_e,`Current: ${R(Ya),b(()=>Ya.MOODE_IP)??""}`),de(Ie,k),de(I,W)}),P("click",ne,ue),P("click",J,se),P("click",X,O),Ka(Te,()=>s(f),U=>g(f,U)),P("click",A,T),ot(1,B,()=>bt,()=>({duration:200})),m(e,B),Et(),u()}var Tu=x('<span class="meta-tag svelte-185fgrr"> </span>'),$u=x('<div slot="header" class="content-padded svelte-185fgrr"><div class="view-header svelte-185fgrr"><div class="header-art svelte-185fgrr" style="background: var(--c-surface-active);"><div class="header-icon-wrap svelte-185fgrr"><!></div></div> <div class="header-info svelte-185fgrr"><div class="header-text-group svelte-185fgrr"><div class="header-label svelte-185fgrr">Now Playing</div> <h1 class="header-title svelte-185fgrr">Current Queue</h1> <div class="meta-badges svelte-185fgrr"><span class="meta-tag svelte-185fgrr"> </span> <!></div></div> <div class="header-actions svelte-185fgrr"><button class="btn-secondary svelte-185fgrr" title="Clear Queue">Clear</button> <button class="btn-action svelte-185fgrr" title="Save Queue"><!></button> <button><!></button></div></div></div></div>'),Mu=x('<div slot="row" class="svelte-185fgrr"><!></div>'),Au=x('<div class="view-container svelte-185fgrr"><!></div>');function Pu(e,t){xt(t,!1);const a=()=>xe(kt,"$status",o),r=()=>xe(mt,"$isQueueLocked",o),n=()=>xe(ra,"$currentSong",o),i=()=>xe(Ga,"$queue",o),[o,l]=jt(),v=$(),c=$(),u=$(),h=$();let f=$(!1),p=$(""),w=$(-1);function T(){g(f,!s(f))}function k(O){s(f)||Ts(`play ${O}`)}function E(O){O<s(w)&&g(w,s(w)-1),aa.removeFromQueue(O)}async function W(){fa({title:"Save Playlist",message:"Enter a name for this playlist:",type:"prompt",placeholder:"Playlist Name",confirmLabel:"Save",onConfirm:async O=>{O&&O.trim().length>0&&(await aa.saveQueue(O),Rn())}})}function se(){i().length!==0&&fa({title:"Clear Queue",message:"Are you sure you want to clear the entire play queue?",confirmLabel:"Clear All",type:"confirm",onConfirm:async()=>{Ga.set([]),ra.set({title:"Not Playing",artist:"",album:"",file:"",stationName:null,id:null,pos:null}),kt.update(O=>({...O,state:"stop",song:-1,songid:-1,elapsed:0})),await Ts("clear")}})}function Z(O,B){let M=s(w);O===M?M=B:O<M&&B>=M?M-=1:O>M&&B<=M&&(M+=1),g(w,M),aa.moveTrack(O,B)}re(()=>a(),()=>{g(v,Number(a().song))}),re(()=>(r(),s(v)),()=>{r()||g(w,s(v))}),re(()=>s(w),()=>{g(c,s(w))}),re(()=>n(),()=>{g(u,n().file)}),re(()=>a(),()=>{g(h,a().state==="play")}),re(()=>i(),()=>{if(i().length>=0){const O=i().reduce((B,M)=>B+(parseFloat(M.time)||0),0);if(O>0){const B=Math.floor(O/3600),M=Math.floor(O%3600/60);B>0?g(p,`${B} hr ${M} min`):g(p,`${M} min`)}else g(p,"")}}),Ut(),At();var ae=Au(),ue=d(ae);ss(ue,{get itemsStore(){return Ga},get isEditMode(){return s(f)},emptyText:"Queue is empty",onMoveItem:Z,$$slots:{header:(O,B)=>{var M=$u(),fe=d(M),me=d(fe),C=d(me),q=d(C);te(q,()=>(R(y),b(()=>y.MENU)));var ie=_(me,2),Q=d(ie),ne=_(d(Q),4),D=d(ne),N=d(D),we=_(D,2);{var Y=G=>{var j=Tu(),K=d(j);ve(()=>de(K,s(p))),m(G,j)};L(we,G=>{s(p)&&G(Y)})}var J=_(Q,2),he=d(J),S=_(he,2),z=d(S);te(z,()=>(R(y),b(()=>y.SAVE)));var V=_(S,2);let ce;var H=d(V);te(H,()=>(s(f),R(y),b(()=>s(f)?y.ACCEPT:y.EDIT))),ve(()=>{de(N,`${i(),b(()=>i().length)??""} tracks`),he.disabled=(i(),b(()=>i().length===0)),S.disabled=(i(),b(()=>i().length===0)),ce=Qe(V,1,"btn-action svelte-185fgrr",null,ce,{active:s(f)}),Lt(V,"title",s(f)?"Finish Editing":"Edit Queue"),V.disabled=(i(),b(()=>i().length===0))}),P("click",he,se),P("click",S,W),P("click",V,T),m(O,M)},row:(O,B)=>{var M=Mu();const fe=ct(()=>B.item),me=ct(()=>B.index),C=ct(()=>B.startDrag);var q=d(M);Sr(q,{get track(){return s(fe)},get index(){return s(me)},get playingIndex(){return s(c)},get playingFile(){return s(u)},get isPlaying(){return s(h)},get isEditable(){return s(f)},$$events:{play:()=>k(s(me)),remove:()=>E(s(me)),startdrag(...ie){s(C)?.apply(this,ie)}}}),m(O,M)}}}),m(e,ae),Et(),l()}var Cu=x('<div class="token-alert content-padded svelte-4g0hpd"><h3 class="svelte-4g0hpd">Yandex Music Token Required</h3> <p class="svelte-4g0hpd">Please go to Settings and enter your OAuth token.</p></div>'),Lu=x('<button class="back-icon-btn svelte-4g0hpd"><!></button>'),zu=x('<span class="search-icon svelte-4g0hpd"><!></span>'),Iu=x('<button class="clear-btn svelte-4g0hpd"><!></button>'),Ru=x('<div class="music-card skeleton-card svelte-4g0hpd"><!> <!></div>'),ju=x('<div class="music-grid svelte-4g0hpd"></div>'),Nu=x('<div class="icon-wrap svelte-4g0hpd"><!></div>'),Ou=x('<img loading="lazy" class="svelte-4g0hpd"/>'),Du=x('<div class="icon-wrap svelte-4g0hpd"><!></div>'),Fu=x('<div class="music-card svelte-4g0hpd"><div><!> <div class="play-overlay svelte-4g0hpd"><span class="overlay-icon svelte-4g0hpd"><!></span></div></div> <div class="card-title svelte-4g0hpd"> </div> <div class="card-sub svelte-4g0hpd"> </div></div>'),qu=x('<div class="music-grid svelte-4g0hpd"></div>'),Bu=x('<div class="content-padded svelte-4g0hpd"><h2 class="header-label svelte-4g0hpd">My Music</h2> <!></div>'),Uu=x('<div slot="header" class="content-padded svelte-4g0hpd"><div class="playlist-header svelte-4g0hpd"><h1 class="header-title svelte-4g0hpd"> </h1> <div class="meta-tag svelte-4g0hpd"> </div></div></div>'),Hu=x('<div slot="row" class="svelte-4g0hpd"><!></div>'),Yu=x('<div class="content-padded no-bottom-pad svelte-4g0hpd"><div class="search-input-container svelte-4g0hpd"><!> <input type="text" placeholder="Search Yandex Music..." class="svelte-4g0hpd"/> <!></div></div> <!> <!>',1),Vu=x('<div class="view-container scrollable svelte-4g0hpd"><!></div>');function Wu(e,t){xt(t,!1);const a=()=>xe(Xr,"$yandexToken",n),r=()=>xe(l,"$tracksStore",n),[n,i]=jt(),o=$(),l=Be([]);let v=$([]),c=$(!1),u=$("dashboard"),h=$(""),f=$(""),p;Fa(()=>{s(o)&&w()});async function w(){g(c,!0);try{const M=await Rr.getUserPlaylists();g(v,[{kind:"favorites",title:"Favorites",cover:{uri:null},trackCount:"â¥"},...M])}catch(M){console.error(M)}finally{g(c,!1)}}async function T(M){g(c,!0),g(u,"playlist"),g(h,M.title),l.set([]);try{let fe;M.kind==="favorites"?fe=await Rr.getFavorites():fe=await Rr.getPlaylistTracks(M.kind,M.uid),l.set(fe)}catch{De("Failed to load tracks","error")}finally{g(c,!1)}}function k(M){g(f,M.target.value),clearTimeout(p),s(f).length>2?p=setTimeout(()=>{E()},600):s(f).length===0&&g(u,"dashboard")}async function E(){g(c,!0),g(u,"search"),g(h,`Search: ${s(f)}`),l.set([]);try{const M=await Rr.search(s(f));l.set(M)}catch{De("Search failed","error")}finally{g(c,!1)}}function W(){g(u,"dashboard"),g(f,""),l.set([])}async function se(M,fe){dr.set({active:!0,tracks:r(),currentIndex:fe,currentTrackFile:null}),Nn(M,fe)}function Z(M){return M.kind==="favorites"?null:M.cover&&M.cover.uri?`https://${M.cover.uri.replace("%%","200x200")}`:null}re(()=>a(),()=>{g(o,!!a())}),Ut(),At();var ae=Vu(),ue=d(ae);{var O=M=>{var fe=Cu();m(M,fe)},B=M=>{var fe=Yu(),me=Ae(fe),C=d(me),q=d(C);{var ie=S=>{var z=Lu(),V=d(z);te(V,()=>(R(y),b(()=>y.BACK))),P("click",z,W),m(S,z)},Q=S=>{var z=zu(),V=d(z);te(V,()=>(R(y),b(()=>y.SEARCH))),m(S,z)};L(q,S=>{s(u)!=="dashboard"?S(ie):S(Q,!1)})}var ne=_(q,2),D=_(ne,2);{var N=S=>{var z=Iu(),V=d(z);te(V,()=>(R(y),b(()=>y.CLOSE))),P("click",z,W),m(S,z)};L(D,S=>{s(f)&&S(N)})}var we=_(me,2);{var Y=S=>{var z=Bu(),V=_(d(z),2);{var ce=G=>{var j=ju();yt(j,4,()=>Array(6),oa,(K,X)=>{var oe=Ru(),ge=d(oe);Rt(ge,{width:"100%",style:"aspect-ratio:1; border-radius:12px; margin-bottom: 8px;"});var F=_(ge,2);Rt(F,{width:"70%",height:"14px"}),m(K,oe)}),m(G,j)},H=G=>{var j=qu();yt(j,5,()=>s(v),oa,(K,X)=>{var oe=Fu(),ge=d(oe);let F;var ye=d(ge);{var Pe=ke=>{var Le=Nu(),Ie=d(Le);te(Ie,()=>(R(y),b(()=>y.HEART_FILLED))),m(ke,Le)},Ce=ke=>{var Le=et(),Ie=Ae(Le);{var ee=I=>{var U=Ou();ve(pe=>{Lt(U,"src",pe),Lt(U,"alt",(s(X),b(()=>s(X).title)))},[()=>(s(X),b(()=>Z(s(X))))]),m(I,U)},be=I=>{var U=Du(),pe=d(U);te(pe,()=>(R(y),b(()=>y.PLAYLISTS))),m(I,U)};L(Ie,I=>{s(X),b(()=>Z(s(X)))?I(ee):I(be,!1)},!0)}m(ke,Le)};L(ye,ke=>{s(X),b(()=>s(X).kind==="favorites")?ke(Pe):ke(Ce,!1)})}var Re=_(ye,2),Te=d(Re),A=d(Te);te(A,()=>(R(y),b(()=>y.PLAY)));var le=_(ge,2),_e=d(le),Ee=_(le,2),$e=d(Ee);ve(()=>{F=Qe(ge,1,"card-img-container svelte-4g0hpd",null,F,{"is-fav":s(X).kind==="favorites"}),de(_e,(s(X),b(()=>s(X).title))),de($e,`${s(X),b(()=>s(X).trackCount)??""} tracks`)}),P("click",oe,()=>T(s(X))),m(K,oe)}),m(G,j)};L(V,G=>{s(c)?G(ce):G(H,!1)})}ot(1,z,()=>bt),m(S,z)};L(we,S=>{s(u)==="dashboard"&&S(Y)})}var J=_(we,2);{var he=S=>{{let z=ct(()=>s(u)==="search"?"No results found":"Playlist is empty");ss(S,{get itemsStore(){return l},get isLoading(){return s(c)},get emptyText(){return s(z)},$$slots:{header:(V,ce)=>{var H=Uu(),G=d(H),j=d(G),K=d(j),X=_(j,2),oe=d(X);ve(()=>{de(K,s(h)),de(oe,`${r(),b(()=>r().length)??""} tracks`)}),m(V,H)},row:(V,ce)=>{var H=Hu();const G=ct(()=>ce.item),j=ct(()=>ce.index);var K=d(H);Sr(K,{get track(){return s(G)},get index(){return s(j)},isEditable:!1,$$events:{play:()=>se(s(G),s(j))}}),m(V,H)}}})}};L(J,S=>{(s(u)==="playlist"||s(u)==="search")&&S(he)})}Ka(ne,()=>s(f),S=>g(f,S)),P("input",ne,k),m(M,fe)};L(ue,M=>{s(o)?M(B,!1):M(O)})}m(e,ae),Et(),i()}var Qu=x('<div class="knob svelte-1jla3sy"></div>'),Xu=x('<div class="tooltip current svelte-1jla3sy"> </div> <span></span>',1),Ku=x('<div slot="fallback" class="icon-fallback svelte-1jla3sy"><!></div>'),Gu=x('<span class="meta-tag quality"> </span>'),Zu=x('<div class="dot svelte-1jla3sy"></div>'),Ju=x("<button><!> <!></button>"),ef=x('<div class="dock svelte-1jla3sy"><div class="progress-shadow svelte-1jla3sy"></div> <div><div class="rail svelte-1jla3sy"></div> <div class="fill svelte-1jla3sy"><!></div> <!></div> <div class="grid svelte-1jla3sy"><div class="info svelte-1jla3sy"><div class="art svelte-1jla3sy"><!></div> <div class="meta svelte-1jla3sy"><div class="title-row svelte-1jla3sy"><div class="title text-ellipsis svelte-1jla3sy"> </div> <button class="btn-icon tiny-dots svelte-1jla3sy"><!></button></div> <div class="artist-row svelte-1jla3sy"><div class="artist text-ellipsis svelte-1jla3sy"> </div> <!></div></div></div> <div class="controls svelte-1jla3sy"><button><!></button> <button class="btn-icon"><!></button> <button class="play-btn flex-center svelte-1jla3sy"><!></button> <button class="btn-icon"><!></button> <!></div> <div class="volume desktop svelte-1jla3sy"><button class="vol-btn-mini svelte-1jla3sy" title="Mute/Unmute"><!></button> <div class="custom-slider svelte-1jla3sy"><div class="slider-bg svelte-1jla3sy"><div class="slider-fill svelte-1jla3sy"></div> <div class="slider-knob svelte-1jla3sy"></div></div></div></div></div></div>');function tf(e,t){xt(t,!1);const a=()=>xe(kt,"$status",l),r=()=>xe(ra,"$currentSong",l),n=()=>xe(Ia,"$favorites",l),i=()=>xe(qa,"$stations",l),o=()=>xe(xs,"$isFullPlayerOpen",l),[l,v]=jt(),c=$(),u=$(),h=$(),f=$(),p=$(),w=$(),T=$(),k=$(),E=$(),W=$(),se=$(),Z=$(),ae=$();let ue=$(!1),O=$(!1),B=!1,M=$(0),fe=$(),me=$();const C=H=>G=>{G.stopPropagation(),H()};function q(H){if(isNaN(H)||H===null)return"0:00";const G=Math.floor(H/60),j=Math.floor(H%60);return`${G}:${j<10?"0":""}${j}`}function ie(H,G){const j=G.getBoundingClientRect();return Math.max(0,Math.min(1,(H.clientX-j.left)/j.width))}function Q(H){s(f)||(g(O,!0),g(M,ie(H,s(fe))),window.addEventListener("mousemove",ne),window.addEventListener("mouseup",D))}function ne(H){if(s(O)&&g(M,ie(H,s(fe))),B){const G=Math.round(ie(H,s(me))*100);xa(G)}}function D(){s(O)&&!s(f)&&Ln(s(M)*s(c)),g(O,!1),B=!1,window.removeEventListener("mousemove",ne),window.removeEventListener("mouseup",D)}let N=50;function we(H){H.stopPropagation(),a().volume>0?(N=a().volume,xa(0)):xa(N>0?N:30)}function Y(H){B=!0;const G=Math.round(ie(H,s(me))*100);xa(G),window.addEventListener("mousemove",ne),window.addEventListener("mouseup",D)}function J(){const H=(s(ae)+1)%3;H===0?(a().random&&Za(),a().repeat&&Ja()):H===1?(a().random||Za(),a().repeat&&Ja()):H===2&&(a().random&&Za(),a().repeat||Ja())}function he(H){H.stopPropagation(),Wr(H,r(),{type:"general",source:"miniplayer"})}function S(H){Wr(H.detail.originalEvent,r(),{type:"general",source:"miniplayer"})}re(()=>a(),()=>{g(c,a().duration>0?a().duration:1)}),re(()=>a(),()=>{g(u,a().elapsed||0)}),re(()=>a(),()=>{g(h,a().state==="play")}),re(()=>r(),()=>{g(f,r().file?.startsWith("http"))}),re(()=>r(),()=>{g(p,r().title||"Not Playing")}),re(()=>r(),()=>{g(w,r().stationName||r().artist||"Moode")}),re(()=>(r(),n()),()=>{g(T,r().file&&n().has(r().file))}),re(()=>(r(),i()),()=>{g(k,Er(r(),i(),r().stationName))}),re(()=>(s(f),s(O),s(M),s(u),s(c)),()=>{g(E,s(f)?0:s(O)?s(M)*100:s(u)/s(c)*100)}),re(()=>(s(h),s(O),s(f)),()=>{g(W,s(h)&&!s(O)&&!s(f))}),re(()=>a(),()=>{g(se,a().bitrate?`${a().bitrate} kbps`:a().format||"")}),re(()=>(a(),y),()=>{g(Z,a().volume===0?y.VOLUME_MUTE:a().volume<50?y.VOLUME_MEDIUM:y.VOLUME_FULL)}),re(()=>a(),()=>{g(ae,a().repeat?2:a().random?1:0)}),Ut(),At();var z=et(),V=Ae(z);{var ce=H=>{var G=ef(),j=d(G),K=_(j,2);let X;var oe=_(d(K),2),ge=d(oe);{var F=je=>{var pt=Qu();m(je,pt)};L(ge,je=>{s(f)||je(F)})}var ye=_(oe,2);{var Pe=je=>{var pt=Xu(),zt=Ae(pt),Kt=d(zt);ve(Se=>{lt(zt,`left: ${s(E)??""}%`),de(Kt,Se)},[()=>(s(O),s(M),s(c),s(u),b(()=>s(O)?q(s(M)*s(c)):q(s(u))))]),m(je,pt)};L(ye,je=>{(s(ue)||s(O))&&!s(f)&&je(Pe)})}Da(K,je=>g(fe,je),()=>s(fe));var Ce=_(K,2),Re=d(Ce),Te=d(Re),A=d(Te);nr(A,{get src(){return s(k)},alt:"art",radius:"4px",$$slots:{fallback:(je,pt)=>{var zt=Ku(),Kt=d(zt);te(Kt,()=>(s(f),R(y),b(()=>s(f)?y.RADIO:y.ALBUMS))),m(je,zt)}}});var le=_(Te,2),_e=d(le),Ee=d(_e),$e=d(Ee),ke=_(Ee,2),Le=d(ke);te(Le,()=>(R(y),b(()=>y.DOTS)));var Ie=_(_e,2),ee=d(Ie),be=d(ee),I=_(ee,2);{var U=je=>{var pt=Gu(),zt=d(pt);ve(()=>de(zt,s(se))),m(je,pt)};L(I,je=>{s(se)&&je(U)})}var pe=_(Re,2),Fe=d(pe),Ue=Cr(()=>C(()=>ha.toggleFavorite(r())));let Ne;var Xe=d(Fe);te(Xe,()=>(s(T),R(y),b(()=>s(T)?y.HEART_FILLED:y.HEART)));var Ze=_(Fe,2),Ve=Cr(()=>C(()=>Kr("previous"))),He=d(Ze);te(He,()=>(R(y),b(()=>y.PREVIOUS)));var Ye=_(Ze,2),Je=Cr(()=>C(zs)),qe=d(Ye);te(qe,()=>(a(),R(y),b(()=>a().state==="play"?y.PAUSE:y.PLAY)));var Me=_(Ye,2),Oe=Cr(()=>C(()=>Kr("next"))),We=d(Me);te(We,()=>(R(y),b(()=>y.NEXT)));var st=_(Me,2);{var vt=je=>{var pt=Ju(),zt=Cr(()=>C(J));let Kt;var Se=d(pt);{var Ke=Nt=>{var ma=et(),Pr=Ae(ma);te(Pr,()=>(R(y),b(()=>y.REPEAT))),m(Nt,ma)},Pt=Nt=>{var ma=et(),Pr=Ae(ma);te(Pr,()=>(R(y),b(()=>y.SHUFFLE))),m(Nt,ma)};L(Se,Nt=>{s(ae)===2?Nt(Ke):Nt(Pt,!1)})}var la=_(Se,2);{var Rs=Nt=>{var ma=Zu();m(Nt,ma)};L(la,Nt=>{s(ae)>0&&Nt(Rs)})}ve(()=>Kt=Qe(pt,1,"btn-icon desktop mode-btn svelte-1jla3sy",null,Kt,{active:s(ae)>0})),P("click",pt,function(...Nt){s(zt)?.apply(this,Nt)}),m(je,pt)};L(st,je=>{s(f)||je(vt)})}var St=_(pe,2),wt=d(St),_t=d(wt);te(_t,()=>s(Z));var ut=_(wt,2),ht=d(ut),ft=d(ht),dt=_(ft,2);Da(ut,je=>g(me,je),()=>s(me)),Dt(()=>P("click",G,()=>xs.set(!0))),Sn(G,(je,pt)=>On?.(je,pt),()=>500),Dt(()=>P("longpress",G,S)),ve(()=>{lt(j,`width: ${s(E)??""}%; transition: ${s(W)?"width 0.25s linear":"none"}`),X=Qe(K,1,"progress-bar svelte-1jla3sy",null,X,{radio:s(f)}),lt(oe,`width: ${s(E)??""}%; transition: ${s(W)?"width 0.25s linear":"none"}`),Lt(Ee,"title",s(p)),de($e,s(p)),Lt(ee,"title",s(w)),de(be,s(w)),Ne=Qe(Fe,1,"btn-icon desktop svelte-1jla3sy",null,Ne,{liked:s(T)}),lt(ft,`width: ${a(),b(()=>a().volume)??""}%`),lt(dt,`left: ${a(),b(()=>a().volume)??""}%`)}),P("mouseenter",K,()=>g(ue,!0)),P("mouseleave",K,()=>g(ue,!1)),P("mousedown",K,Qt(Q)),P("click",K,Qt(function(je){Vr.call(this,t,je)})),P("click",ke,he),P("click",Fe,function(...je){s(Ue)?.apply(this,je)}),P("click",Ze,function(...je){s(Ve)?.apply(this,je)}),P("click",Ye,function(...je){s(Je)?.apply(this,je)}),P("click",Me,function(...je){s(Oe)?.apply(this,je)}),P("click",wt,we),P("mousedown",ut,Qt(Y)),P("click",ut,Qt(function(je){Vr.call(this,t,je)})),m(H,G)};L(V,H=>{o()||H(ce)})}m(e,z),Et(),v()}var af=x('<div class="drag-zone svelte-1olwzt8"><div class="drag-handle-icon svelte-1olwzt8"><!></div></div>'),rf=x('<div slot="fallback" class="icon-fallback svelte-1olwzt8"><!></div>'),sf=x('<span class="meta-tag quality"> </span>'),nf=x('<span class="dot svelte-1olwzt8"></span>'),of=x("<button><!> <!></button>"),lf=x('<div style="width: 44px;"></div>'),cf=x('<div><!> <div class="bg-container svelte-1olwzt8"><div class="bg-gradient-fallback svelte-1olwzt8"></div> <img class="bg-img svelte-1olwzt8" alt="" loading="eager"/> <div class="bg-overlay svelte-1olwzt8"></div></div> <div class="player-body svelte-1olwzt8"><div class="art-container svelte-1olwzt8"><div class="artwork svelte-1olwzt8"><!></div></div> <div class="controls-area svelte-1olwzt8"><div class="meta svelte-1olwzt8"><h1 class="title text-ellipsis svelte-1olwzt8"> </h1> <div class="artist-row svelte-1olwzt8"><h2 class="artist text-ellipsis svelte-1olwzt8"> </h2> <!></div></div> <div class="progress-section"><div><div class="common-track svelte-1olwzt8"><div class="common-fill svelte-1olwzt8"><div class="common-knob svelte-1olwzt8"></div></div></div></div> <div class="time-row svelte-1olwzt8"><span> </span> <span> </span></div></div> <div class="buttons-row svelte-1olwzt8"><button><!></button> <button class="btn-icon side-btn svelte-1olwzt8"><!></button> <button class="play-btn-large flex-center svelte-1olwzt8"><!></button> <button class="btn-icon side-btn svelte-1olwzt8"><!></button> <!></div> <div class="volume-row svelte-1olwzt8"><button class="btn-icon small vol-btn svelte-1olwzt8"><!></button> <div class="volume-hit-area svelte-1olwzt8"><div class="common-track svelte-1olwzt8"><div class="common-fill svelte-1olwzt8"></div> <div class="common-knob svelte-1olwzt8"></div></div></div> <div class="vol-icon-static svelte-1olwzt8"><!></div></div></div></div></div>');function mi(e,t){xt(t,!1);const a=()=>xe(ra,"$currentSong",o),r=()=>xe(qa,"$stations",o),n=()=>xe(kt,"$status",o),i=()=>xe(Ia,"$favorites",o),[o,l]=jt(),v=$(),c=$(),u=$(),h=$(),f=$(),p=$(),w=$(),T=$(),k=$(),E=$(),W=$(),se=$();let Z=gt(t,"isDocked",8,!1),ae=0,ue=$(0),O=$(!1);function B(){xs.set(!1)}function M(Se){if(Z())return;const Ke=Se.target;Ke.closest(".bar-hit-area")||Ke.closest(".volume-hit-area")||(ae=Se.touches[0].clientY,g(O,!0))}function fe(Se){if(!s(O)||Z())return;const Ke=Se.touches[0].clientY-ae;Ke>0&&(Se.cancelable&&Ke>10&&Se.preventDefault(),g(ue,Ke))}function me(){Z()||(g(O,!1),s(ue)>150?B():g(ue,0))}let C=$(!1),q=$(0),ie=$();function Q(Se){const Ke=Math.floor(Se/60)||0,Pt=Math.floor(Se%60)||0;return`${Ke}:${Pt.toString().padStart(2,"0")}`}function ne(Se,Ke){const Pt=Ke.getBoundingClientRect(),la=Se.touches?Se.touches[0].clientX:Se.clientX;return Math.max(0,Math.min(1,(la-Pt.left)/Pt.width))}function D(Se){s(h)||(g(C,!0),g(q,ne(Se,s(ie))))}function N(Se){s(C)&&g(q,ne(Se,s(ie)))}function we(){s(C)&&!s(h)&&Ln(s(q)*s(c)),g(C,!1)}let Y=!1,J=$(),he=50;function S(){n().volume>0?(he=n().volume,xa(0)):xa(he>0?he:30)}function z(Se){Y=!0;const Ke=Math.round(ne(Se,s(J))*100);xa(Ke),window.addEventListener("mousemove",V),window.addEventListener("mouseup",ce),window.addEventListener("touchmove",V,{passive:!1}),window.addEventListener("touchend",ce)}function V(Se){if(Y){Se.preventDefault();const Ke=Math.round(ne(Se,s(J))*100);xa(Ke)}}function ce(){Y=!1,window.removeEventListener("mousemove",V),window.removeEventListener("mouseup",ce),window.removeEventListener("touchmove",V),window.removeEventListener("touchend",ce)}function H(){const Se=(s(k)+1)%3;Se===0?(n().random&&Za(),n().repeat&&Ja()):Se===1?(n().random||Za(),n().repeat&&Ja()):Se===2&&(n().random&&Za(),n().repeat||Ja())}re(()=>(a(),r()),()=>{g(v,Er(a(),r(),a().stationName))}),re(()=>n(),()=>{g(c,n().duration||1)}),re(()=>n(),()=>{g(u,n().elapsed||0)}),re(()=>a(),()=>{g(h,a().file?.startsWith("http"))}),re(()=>n(),()=>{g(f,n().state==="play")}),re(()=>(s(f),s(C),s(h)),()=>{g(p,s(f)&&!s(C)&&!s(h))}),re(()=>(s(h),s(C),s(q),s(u),s(c)),()=>{g(w,s(h)?0:s(C)?s(q)*100:s(u)/s(c)*100)}),re(()=>(n(),y),()=>{g(T,n().volume===0?y.VOLUME_MUTE:n().volume<50?y.VOLUME_MEDIUM:y.VOLUME_FULL)}),re(()=>n(),()=>{g(k,n().repeat?2:n().random?1:0)}),re(()=>n(),()=>{g(E,n().bitrate?`${n().bitrate} kbps`:n().format||"")}),re(()=>(a(),i()),()=>{g(W,a().file&&i().has(a().file))}),re(()=>R(Z()),()=>{g(se,Z()?"8px":"var(--radius-xl)")}),Ut(),At();var G=cf();let j;var K=d(G);{var X=Se=>{var Ke=af(),Pt=d(Ke),la=d(Pt);te(la,()=>(R(y),b(()=>y.CHEVRON_DOWN))),P("touchstart",Ke,M),P("touchmove",Ke,fe),P("touchend",Ke,me),P("click",Ke,B),m(Se,Ke)};L(K,Se=>{Z()||Se(X)})}var oe=_(K,2),ge=_(d(oe),2),F=_(oe,2),ye=d(F),Pe=d(ye),Ce=d(Pe);nr(Ce,{get src(){return s(v)},alt:"Cover",get radius(){return s(se)},$$slots:{fallback:(Se,Ke)=>{var Pt=rf(),la=d(Pt);te(la,()=>(s(h),R(y),b(()=>s(h)?y.RADIO:y.ALBUMS))),m(Se,Pt)}}});var Re=_(ye,2),Te=d(Re),A=d(Te),le=d(A),_e=_(A,2),Ee=d(_e),$e=d(Ee),ke=_(Ee,2);{var Le=Se=>{var Ke=sf(),Pt=d(Ke);ve(()=>de(Pt,s(E))),m(Se,Ke)};L(ke,Se=>{s(E)&&Se(Le)})}var Ie=_(Te,2),ee=d(Ie);let be;var I=d(ee),U=d(I);Da(ee,Se=>g(ie,Se),()=>s(ie));var pe=_(ee,2),Fe=d(pe),Ue=d(Fe),Ne=_(Fe,2),Xe=d(Ne),Ze=_(Ie,2),Ve=d(Ze);let He;var Ye=d(Ve);te(Ye,()=>(s(W),R(y),b(()=>s(W)?y.HEART_FILLED:y.HEART)));var Je=_(Ve,2),qe=d(Je);te(qe,()=>(R(y),b(()=>y.PREVIOUS)));var Me=_(Je,2),Oe=d(Me);te(Oe,()=>(n(),R(y),b(()=>n().state==="play"?y.PAUSE:y.PLAY)));var We=_(Me,2),st=d(We);te(st,()=>(R(y),b(()=>y.NEXT)));var vt=_(We,2);{var St=Se=>{var Ke=of();let Pt;var la=d(Ke);{var Rs=ca=>{var Ba=et(),js=Ae(Ba);te(js,()=>(R(y),b(()=>y.REPEAT))),m(ca,Ba)},Nt=ca=>{var Ba=et(),js=Ae(Ba);te(js,()=>(R(y),b(()=>y.SHUFFLE))),m(ca,Ba)};L(la,ca=>{s(k)===2?ca(Rs):ca(Nt,!1)})}var ma=_(la,2);{var Pr=ca=>{var Ba=nf();m(ca,Ba)};L(ma,ca=>{s(k)>0&&ca(Pr)})}ve(()=>Pt=Qe(Ke,1,"btn-icon side-btn mode-btn svelte-1olwzt8",null,Pt,{active:s(k)>0})),P("click",Ke,H),m(Se,Ke)},wt=Se=>{var Ke=lf();m(Se,Ke)};L(vt,Se=>{s(h)?Se(wt,!1):Se(St)})}var _t=_(Ze,2),ut=d(_t),ht=d(ut);te(ht,()=>s(T));var ft=_(ut,2),dt=d(ft),je=d(dt),pt=_(je,2);Da(ft,Se=>g(J,Se),()=>s(J));var zt=_(ft,2),Kt=d(zt);te(Kt,()=>(R(y),b(()=>y.VOLUME_FULL))),ve((Se,Ke)=>{j=Qe(G,1,"full-player svelte-1olwzt8",null,j,{"is-docked":Z()}),lt(G,Z()?"":`transform: translateY(${s(ue)}px); transition: ${s(O)?"none":"transform 0.3s cubic-bezier(0.2, 0.8, 0.2, 1)"}`),Lt(ge,"src",s(v)),lt(Pe,`transform: scale(${1-s(ue)/3e3})`),lt(Re,`opacity: ${1-s(ue)/400}`),de(le,(a(),b(()=>a().title||"Not Playing"))),de($e,(a(),b(()=>a().stationName||a().artist||"Moode Audio"))),be=Qe(ee,1,"bar-hit-area svelte-1olwzt8",null,be,{"is-docked-bar":Z()}),lt(U,`width: ${s(w)??""}%; transition: ${s(p)?"width 0.3s linear":"none"}`),de(Ue,Se),de(Xe,Ke),He=Qe(Ve,1,"btn-icon side-btn svelte-1olwzt8",null,He,{liked:s(W)}),lt(je,`width: ${n(),b(()=>n().volume)??""}%`),lt(pt,`left: ${n(),b(()=>n().volume)??""}%; right: auto;`)},[()=>(s(C),s(q),s(c),s(u),b(()=>s(C)?Q(s(q)*s(c)):Q(s(u)))),()=>(s(h),s(c),b(()=>s(h)?"LIVE":Q(s(c))))]),P("mousedown",ee,D),P("touchstart",ee,D,void 0,!0),P("mousemove",ee,function(...Se){(s(C)?N:null)?.apply(this,Se)}),P("touchmove",ee,function(...Se){(s(C)?N:null)?.apply(this,Se)},void 0,!0),P("mouseup",ee,we),P("touchend",ee,we),P("click",Ve,()=>ha.toggleFavorite(a())),P("click",Je,()=>Kr("previous")),P("click",Me,function(...Se){zs?.apply(this,Se)}),P("click",We,()=>Kr("next")),P("click",ut,S),P("mousedown",ft,Qt(z)),P("touchstart",ft,Qt(z)),ot(3,G,()=>fo,()=>({y:Z()?0:800,duration:300,opacity:1})),m(e,G),Et(),l()}const df=`<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.0//EN" "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd">
<svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="600px" height="331px" viewBox="0 0 600 331" preserveAspectRatio="xMidYMid meet">
 <g fill="#eb1250">
  <path d="M 315.33 288.42 c -1.03 -0.33 -2.60 -1.34 -3.70 -2.39 -1.08 -1.01 -1.73 -2.81 -2.48 -6.68 -0.38 -1.99 -0.84 -4.29 -1.03 -5.13 -0.21 -0.84 -0.47 -2.20 -0.61 -3.05 -0.14 -0.84 -0.42 -2.34 -0.61 -3.33 -0.45 -2.20 -0.42 -2.04 -0.77 -4.17 -0.16 -0.96 -0.40 -2.16 -0.52 -2.65 -0.14 -0.52 -0.33 -1.45 -0.45 -2.11 -0.12 -0.68 -0.38 -2.02 -0.59 -2.98 -0.21 -0.96 -0.52 -2.55 -0.70 -3.52 -0.16 -0.96 -0.52 -2.81 -0.77 -4.10 -0.26 -1.29 -0.82 -4.08 -1.22 -6.21 -0.80 -4.20 -1.57 -8.13 -2.44 -12.54 -0.33 -1.55 -0.63 -3.23 -0.73 -3.75 -0.07 -0.52 -0.28 -1.57 -0.47 -2.34 -0.16 -0.77 -0.54 -2.63 -0.80 -4.10 -0.28 -1.48 -0.61 -3.12 -0.73 -3.63 -0.12 -0.52 -0.42 -2.20 -0.70 -3.75 -0.28 -1.55 -0.91 -4.92 -1.43 -7.50 -0.49 -2.58 -1.34 -7.01 -1.85 -9.84 -0.54 -2.84 -1.17 -6.26 -1.43 -7.62 -0.26 -1.36 -0.56 -3.07 -0.68 -3.80 -0.12 -0.75 -0.26 -1.43 -0.33 -1.55 -0.26 -0.42 -2.60 -12.89 -3.21 -17.16 -0.12 -0.84 -0.38 -2.16 -0.56 -2.93 -0.16 -0.77 -0.49 -2.34 -0.70 -3.52 -0.21 -1.15 -0.63 -3.26 -0.94 -4.69 -0.30 -1.41 -0.68 -3.30 -0.82 -4.22 -0.16 -0.89 -0.47 -2.58 -0.73 -3.75 -0.68 -3.30 -2.74 -14.16 -3.73 -19.80 -0.28 -1.48 -0.63 -3.38 -0.82 -4.22 -0.38 -1.71 -1.31 -6.70 -1.88 -10.08 -0.40 -2.34 -0.87 -4.71 -1.43 -7.27 -0.16 -0.84 -0.59 -3 -0.91 -4.80 -0.35 -1.80 -0.77 -4.01 -0.96 -4.92 -0.19 -0.89 -0.54 -2.98 -0.80 -4.64 -0.49 -3.26 -0.70 -3.91 -1.10 -3.40 -0.14 0.16 -0.30 0.63 -0.38 1.01 -0.07 0.40 -0.54 2.51 -1.01 4.69 -2.67 12.42 -3.16 14.77 -3.38 16.29 -0.28 1.99 -1.48 7.64 -3.77 18.05 -1.17 5.23 -2.37 10.66 -2.67 12.07 -0.33 1.43 -0.84 4.01 -1.17 5.74 -0.30 1.73 -1.05 5.27 -1.64 7.85 -0.59 2.58 -1.59 7.17 -2.25 10.20 -0.63 3.02 -1.38 5.93 -1.62 6.45 -0.66 1.36 -2.60 3.26 -4.05 3.96 -1.24 0.61 -1.24 0.61 -87.30 0.61 -86.04 0 -86.04 0 -87.33 -0.49 -1.59 -0.59 -3.56 -2.32 -4.41 -3.89 -1.97 -3.63 -0.35 -8.32 3.61 -10.43 1.01 -0.54 1.01 -0.54 83.44 -0.61 82.43 -0.05 82.43 -0.05 82.69 -1.41 0.14 -0.73 0.42 -1.85 0.59 -2.51 0.19 -0.63 0.82 -3.59 1.41 -6.56 0.59 -2.95 1.29 -6.23 1.52 -7.27 0.23 -1.03 0.82 -3.66 1.27 -5.86 0.47 -2.18 1.34 -6.30 1.97 -9.14 0.63 -2.84 1.34 -6.16 1.57 -7.38 0.21 -1.22 0.49 -2.39 0.61 -2.60 0.09 -0.21 0.42 -1.64 0.68 -3.16 0.26 -1.55 0.63 -3.26 0.82 -3.82 0.19 -0.59 0.35 -1.34 0.35 -1.69 0 -0.35 0.21 -1.57 0.49 -2.70 0.26 -1.13 0.59 -2.60 0.68 -3.23 0.21 -1.22 2.16 -10.08 3.05 -13.78 0.26 -1.13 1.05 -4.88 1.76 -8.32 0.70 -3.45 1.55 -7.59 1.88 -9.21 0.33 -1.62 1.08 -5.09 1.64 -7.73 1.62 -7.41 1.73 -7.95 2.13 -9.96 0.91 -4.62 1.92 -9.19 2.18 -9.80 0.14 -0.35 0.82 -1.24 1.48 -1.97 2.58 -2.72 5.84 -3.42 8.88 -1.90 1.97 0.98 3.73 2.74 4.27 4.31 0.42 1.20 1.41 6.42 1.80 9.47 0.09 0.84 0.30 1.83 0.45 2.18 0.14 0.38 0.26 1.10 0.26 1.66 0 0.54 0.16 1.45 0.35 2.04 0.19 0.56 0.56 2.25 0.84 3.73 0.82 4.50 1.78 9.28 2.20 11.13 0.19 0.77 0.45 2.04 0.56 2.81 0.47 2.63 1.92 10.08 2.25 11.60 0.19 0.84 0.45 2.16 0.56 2.93 0.28 1.64 0.63 3.56 1.08 5.86 0.19 0.91 0.49 2.60 0.70 3.75 0.21 1.17 0.54 2.79 0.70 3.63 0.19 0.84 0.77 3.75 1.29 6.45 0.54 2.72 1.17 5.88 1.41 7.03 0.23 1.17 0.66 3.38 0.94 4.92 0.26 1.55 0.70 4.03 0.96 5.51 0.26 1.48 0.73 3.91 1.03 5.39 0.30 1.48 0.68 3.45 0.82 4.34 0.16 0.91 0.47 2.48 0.70 3.52 0.70 3.19 2.23 10.73 2.58 12.89 0.09 0.66 0.47 2.48 0.80 4.10 0.63 3.05 0.70 3.35 1.66 8.77 0.33 1.80 0.82 4.29 1.08 5.51 0.26 1.24 0.56 2.79 0.68 3.42 0.19 1.17 0.89 4.76 1.55 8.09 0.21 0.96 0.63 3.23 0.96 5.04 0.84 4.64 1.41 7.55 1.69 8.91 0.14 0.66 0.35 1.76 0.49 2.46 0.12 0.70 0.38 2.04 0.56 2.93 0.19 0.91 0.61 3.16 0.94 5.04 1.05 5.86 2.48 13.41 2.88 15.12 0.19 0.91 0.42 2.02 0.47 2.46 0.07 0.45 0.33 1.78 0.59 2.93 0.26 1.17 0.56 2.70 0.68 3.40 0.12 0.70 0.30 1.62 0.42 1.99 0.12 0.40 0.35 1.48 0.52 2.41 0.26 1.50 0.35 1.69 0.82 1.69 0.45 0 0.54 -0.16 0.68 -0.98 0.23 -1.66 2.23 -11.86 2.84 -14.60 0.30 -1.41 0.66 -3.09 0.80 -3.75 0.89 -4.57 5.46 -26.60 6.47 -31.17 0.33 -1.41 0.77 -3.59 1.03 -4.80 0.52 -2.51 1.13 -5.44 2.13 -10.08 0.38 -1.73 1.01 -4.69 1.36 -6.56 0.38 -1.88 1.05 -5.13 1.50 -7.27 0.47 -2.13 0.94 -4.38 1.05 -5.04 0.45 -2.30 1.95 -9.63 2.18 -10.48 0.26 -1.01 1.64 -7.38 2.44 -11.32 0.30 -1.55 0.77 -3.87 1.05 -5.16 0.47 -2.34 2.91 -13.57 4.22 -19.57 0.38 -1.73 0.82 -3.89 0.96 -4.80 0.54 -3.26 2.16 -5.65 4.64 -6.91 1.73 -0.87 2.53 -1.01 4.36 -0.82 1.22 0.14 1.83 0.35 2.93 1.08 2.20 1.43 3.40 3.45 4.45 7.55 0.26 1.05 0.70 2.72 0.96 3.68 0.26 0.96 0.63 2.34 0.80 3.05 0.54 2.16 1.29 4.95 1.78 6.56 0.23 0.84 0.70 2.48 1.01 3.63 0.30 1.17 0.98 3.63 1.52 5.51 0.54 1.88 1.24 4.41 1.55 5.63 0.33 1.22 0.80 2.86 1.05 3.63 0.26 0.77 0.47 1.59 0.47 1.80 0 0.23 0.30 1.50 0.68 2.81 0.38 1.34 1.01 3.68 1.43 5.23 0.77 2.81 1.52 5.58 3.26 11.72 0.52 1.80 1.31 4.71 1.76 6.47 0.45 1.76 0.96 3.70 1.17 4.34 0.30 0.98 2.39 8.65 4.29 15.68 1.13 4.24 2.25 8.27 3.05 11.13 1.45 5.13 1.62 5.74 3.21 11.79 0.42 1.59 0.54 1.80 0.96 1.80 0.16 0 0.35 0.12 0.40 0.28 0.05 0.14 0.33 -0.52 0.63 -1.48 0.30 -0.96 1.73 -5.37 3.19 -9.82 1.48 -4.45 3.09 -9.52 3.63 -11.25 0.52 -1.73 1.85 -5.86 2.95 -9.14 1.13 -3.28 2.48 -7.45 3.05 -9.26 1.73 -5.44 2.23 -6.19 5.11 -7.69 1.43 -0.75 1.43 -0.75 69.40 -0.82 67.97 -0.07 67.97 -0.07 69.56 0.47 0.87 0.28 1.57 0.61 1.57 0.70 0 0.12 0.42 0.56 0.94 1.03 0.52 0.47 1.27 1.52 1.64 2.32 0.94 1.97 0.98 4.52 0.14 6.33 -0.73 1.57 -3.26 3.98 -4.52 4.31 -0.70 0.19 -19.31 0.28 -65.27 0.33 -64.29 0.05 -64.29 0.05 -66.82 7.66 -1.38 4.20 -4.97 14.95 -7.97 23.91 -5.58 16.71 -8.34 25.17 -9.89 30.12 -1.38 4.43 -2.34 5.98 -4.66 7.43 -1.15 0.75 -1.29 0.77 -3.66 0.77 -2.11 0 -2.63 -0.07 -3.59 -0.56 -1.20 -0.59 -2.65 -1.92 -3.59 -3.30 -0.47 -0.68 -2.44 -7.15 -4.17 -13.59 -0.19 -0.70 -0.61 -2.23 -0.94 -3.40 -0.33 -1.15 -0.77 -2.74 -0.98 -3.52 -0.19 -0.77 -0.45 -1.71 -0.56 -2.11 -0.12 -0.38 -0.49 -1.76 -0.82 -3.05 -0.35 -1.29 -1.03 -3.77 -1.52 -5.51 -1.90 -6.52 -2.79 -9.75 -2.95 -10.66 -0.07 -0.52 -0.23 -1.10 -0.35 -1.31 -0.12 -0.21 -0.63 -2.02 -1.15 -3.98 -0.94 -3.54 -1.66 -6.23 -3.40 -12.63 -0.47 -1.73 -1.10 -4.03 -1.43 -5.09 -0.30 -1.05 -0.94 -3.33 -1.38 -5.04 -0.45 -1.71 -1.03 -3.91 -1.29 -4.88 -0.28 -0.96 -0.59 -2.18 -0.68 -2.70 -0.12 -0.52 -0.75 -2.88 -1.41 -5.27 -0.66 -2.39 -1.45 -5.39 -1.80 -6.68 -0.33 -1.29 -0.70 -2.60 -0.80 -2.93 -0.30 -0.91 -2.04 -7.52 -2.25 -8.55 -0.16 -0.70 -0.33 -0.94 -0.66 -0.94 -0.40 0 -0.56 0.56 -1.45 4.80 -0.54 2.65 -1.36 6.61 -1.85 8.79 -0.47 2.20 -1.15 5.51 -1.50 7.38 -1.22 6.28 -1.92 9.73 -2.25 11.13 -0.19 0.77 -0.52 2.30 -0.70 3.40 -0.21 1.10 -0.54 2.53 -0.70 3.16 -0.19 0.66 -0.61 2.48 -0.91 4.10 -0.73 3.73 -1.69 8.48 -1.99 9.84 -0.49 2.30 -0.94 4.43 -1.29 6.21 -0.21 1.03 -0.75 3.61 -1.20 5.74 -0.45 2.13 -0.84 4.20 -0.91 4.57 -0.07 0.40 -0.23 1.34 -0.35 2.11 -0.14 0.77 -0.73 3.63 -1.31 6.33 -0.59 2.72 -1.17 5.55 -1.31 6.33 -0.30 1.83 -1.57 8.39 -1.85 9.61 -0.12 0.52 -0.54 2.58 -0.94 4.57 -0.40 1.99 -0.87 4.22 -1.05 4.92 -0.16 0.70 -0.45 2.09 -0.61 3.05 -0.16 0.96 -0.49 2.65 -0.73 3.75 -0.54 2.46 -0.59 2.70 -2.32 11.48 -0.77 3.94 -1.55 7.73 -1.73 8.44 -0.19 0.70 -0.56 2.39 -0.82 3.75 -0.28 1.36 -0.70 3.47 -0.96 4.69 -0.23 1.22 -0.61 3.23 -0.82 4.45 -0.63 3.87 -2.23 6.45 -4.83 7.85 -1.01 0.56 -1.57 0.68 -3.12 0.75 -1.13 0.05 -2.25 -0.07 -2.84 -0.26 z "/>
 </g>
</svg>`;var vf=x('<div class="backdrop svelte-ji5owg"></div>'),uf=x('<button><span class="icon svelte-ji5owg"><!></span> <span> </span></button>'),ff=x('<!> <aside><div class="header svelte-ji5owg"><div class="header-inner svelte-ji5owg"><button class="collapse-btn svelte-ji5owg"><div class="chevron svelte-ji5owg"><!></div></button> <div><div class="logo svelte-ji5owg"><!></div></div></div> <button class="btn-icon mobile-close svelte-ji5owg"><!></button></div> <div class="scroll-area custom-scrollbar svelte-ji5owg"><nav class="svelte-ji5owg"><!> <button title="Search"><span class="icon svelte-ji5owg"><!></span> <span>Search</span></button> <div class="sep svelte-ji5owg"></div> <button class="nav-item sync svelte-ji5owg" title="Update Library"><span><!></span> <span> </span></button> <div class="sep svelte-ji5owg"></div> <button title="Settings"><span class="icon svelte-ji5owg"><!></span> <span>Settings</span></button></nav> <div class="footer svelte-ji5owg"><div>Moode WaveUI</div></div></div></aside>',1);function hf(e,t){xt(t,!1);const a=()=>xe(Es,"$isYandexEnabled",o),r=()=>xe(sa,"$isSyncingLibrary",o),n=()=>xe(dn,"$isSidebarCollapsed",o),i=()=>xe(Ot,"$activeMenuTab",o),[o,l]=jt(),v=$(),c=$();let u=gt(t,"isOpen",8,!1);const h=Mn();let f=$(0),p=$(0),w=$(!1);const T=[{id:"queue",label:"Queue",icon:y.MENU},{id:"favorites",label:"Favorites",icon:y.HEART},{id:"artists",label:"Artists",icon:y.ARTISTS},{id:"albums",label:"Albums",icon:y.ALBUMS},{id:"playlists",label:"Playlists",icon:y.PLAYLISTS},{id:"radio",label:"Radio",icon:y.RADIO},{id:"yandex",label:"Yandex Music",icon:y.YANDEX}];function k(ee){window.location.hash=`/${ee}`,h("close")}async function E(){r()||(await Gr.syncLibrary(),window.location.hash="/artists")}function W(){dn.update(ee=>!ee)}function se(ee){u()&&(g(f,ee.touches[0].clientX),g(p,s(f)),g(w,!0))}function Z(ee){s(w)&&g(p,ee.touches[0].clientX)}function ae(){s(w)&&(s(p)-s(f)<-70&&h("close"),g(w,!1),g(f,0),g(p,0))}re(()=>a(),()=>{g(v,T.filter(ee=>ee.id==="yandex"?a():!0))}),re(()=>(s(w),s(p),s(f)),()=>{g(c,s(w)?Math.min(0,s(p)-s(f)):0)}),Ut(),At();var ue=ff(),O=Ae(ue);{var B=ee=>{var be=vf();P("click",be,()=>h("close")),ot(3,be,()=>bt,()=>({duration:200})),m(ee,be)};L(O,ee=>{u()&&ee(B)})}var M=_(O,2);let fe,me;var C=d(M),q=d(C),ie=d(q),Q=d(ie),ne=d(Q);te(ne,()=>(R(y),b(()=>y.BACK)));var D=_(ie,2);let N;var we=d(D),Y=d(we);te(Y,()=>df);var J=_(q,2),he=d(J);te(he,()=>(R(y),b(()=>y.CLOSE)));var S=_(C,2),z=d(S),V=d(z);yt(V,1,()=>s(v),ee=>ee.id,(ee,be)=>{var I=uf();let U;var pe=d(I),Fe=d(pe);te(Fe,()=>(s(be),b(()=>s(be).icon)));var Ue=_(pe,2);let Ne;var Xe=d(Ue);ve(()=>{U=Qe(I,1,"nav-item svelte-ji5owg",null,U,{active:i()===s(be).id}),Lt(I,"title",(s(be),b(()=>s(be).label))),Ne=Qe(Ue,1,"label-text svelte-ji5owg",null,Ne,{hidden:n()}),de(Xe,(s(be),b(()=>s(be).label)))}),P("click",I,()=>k(s(be).id)),m(ee,I)});var ce=_(V,2);let H;var G=d(ce),j=d(G);te(j,()=>(R(y),b(()=>y.SEARCH)));var K=_(G,2);let X;var oe=_(ce,4),ge=d(oe);let F;var ye=d(ge);te(ye,()=>(R(y),b(()=>y.SYNC)));var Pe=_(ge,2);let Ce;var Re=d(Pe),Te=_(oe,4);let A;var le=d(Te),_e=d(le);te(_e,()=>(R(y),b(()=>y.SETTINGS)));var Ee=_(le,2);let $e;var ke=_(z,2),Le=d(ke);let Ie;ve(()=>{fe=Qe(M,1,"side-menu svelte-ji5owg",null,fe,{"mobile-open":u(),collapsed:n()}),me=lt(M,"",me,{transform:u()?`translateX(${s(c)}px)`:"",transition:s(w)?"none":"width 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.3s ease"}),Lt(ie,"title",n()?"Expand":"Collapse"),lt(Q,`transform: rotate(${n()?"180deg":"0deg"})`),N=Qe(D,1,"logo-wrapper svelte-ji5owg",null,N,{hidden:n()}),H=Qe(ce,1,"nav-item svelte-ji5owg",null,H,{active:i()==="search"}),X=Qe(K,1,"label-text svelte-ji5owg",null,X,{hidden:n()}),oe.disabled=r(),F=Qe(ge,1,"icon svelte-ji5owg",null,F,{spin:r()}),Ce=Qe(Pe,1,"label-text svelte-ji5owg",null,Ce,{hidden:n()}),de(Re,r()?"Syncing...":"Update Library"),A=Qe(Te,1,"nav-item svelte-ji5owg",null,A,{active:i()==="settings"}),$e=Qe(Ee,1,"label-text svelte-ji5owg",null,$e,{hidden:n()}),Ie=Qe(Le,1,"footer-text svelte-ji5owg",null,Ie,{hidden:n()})}),P("click",ie,W),P("click",J,()=>h("close")),P("click",ce,()=>k("search")),P("click",oe,E),P("click",Te,()=>k("settings")),P("touchstart",M,se),P("touchmove",M,Z),P("touchend",M,ae),m(e,ue),Et(),l()}var pf=x('<div class="toast-container svelte-k2bvk7"><div> </div></div>'),gf=x('<button class="back-btn svelte-k2bvk7"><span class="icon-inline svelte-k2bvk7"><!></span> Back</button>'),_f=x('<div class="view-title svelte-k2bvk7"><!></div>'),mf=x('<div class="full-player-modal svelte-k2bvk7"><!></div>'),bf=x('<div class="app-container svelte-k2bvk7"><div class="app-layout svelte-k2bvk7"><!> <!> <main class="content-area svelte-k2bvk7"><header class="top-bar svelte-k2bvk7"><button class="hamburger-btn svelte-k2bvk7"><!></button> <!></header> <div class="scroll-container svelte-k2bvk7"><div class="view-wrapper svelte-k2bvk7"><!></div></div></main> <div class="docked-player-container svelte-k2bvk7"><!></div></div> <div class="mini-player-wrapper svelte-k2bvk7"><!></div></div> <!>',1);function yf(e,t){xt(t,!1);const a=()=>xe(Vt,"$navigationStack",o),r=()=>xe(on,"$toastMessage",o),n=()=>xe(Ot,"$activeMenuTab",o),i=()=>xe(xs,"$isFullPlayerOpen",o),[o,l]=jt();let v=$(!1);Fa(()=>{window.history.replaceState({depth:a().length},"","");const D=()=>void 0;return window.addEventListener("popstate",D),()=>window.removeEventListener("popstate",D)}),At();var c=bf(),u=Ae(c),h=d(u),f=d(h);{var p=D=>{var N=pf(),we=d(N),Y=d(we);ve(()=>{Qe(we,1,`toast-body ${r().type??""}`,"svelte-k2bvk7"),de(Y,r().text)}),ot(3,N,()=>fo,()=>({y:-50,duration:300})),m(D,N)};L(f,D=>{r()&&D(p)})}var w=_(f,2);hf(w,{get isOpen(){return s(v)},$$events:{close:()=>g(v,!1)}});var T=_(w,2),k=d(T),E=d(k),W=d(E);te(W,()=>y.MENU);var se=_(E,2);{var Z=D=>{var N=gf(),we=d(N),Y=d(we);te(Y,()=>y.BACK),P("click",N,function(...J){sd?.apply(this,J)}),m(D,N)},ae=D=>{var N=_f(),we=d(N);{var Y=he=>{var S=Pa("Radio");m(he,S)},J=he=>{var S=et(),z=Ae(S);{var V=H=>{var G=Pa("Playlists");m(H,G)},ce=H=>{var G=et(),j=Ae(G);{var K=oe=>{var ge=Pa("Search");m(oe,ge)},X=oe=>{var ge=et(),F=Ae(ge);{var ye=Ce=>{var Re=Pa("Yandex Music");m(Ce,Re)},Pe=Ce=>{var Re=et(),Te=Ae(Re);{var A=_e=>{var Ee=Pa("Queue");m(_e,Ee)},le=_e=>{var Ee=et(),$e=Ae(Ee);{var ke=Ie=>{var ee=Pa("Favorites");m(Ie,ee)},Le=Ie=>{var ee=et(),be=Ae(ee);{var I=pe=>{var Fe=Pa("Settings");m(pe,Fe)},U=pe=>{var Fe=Pa();ve(Ue=>de(Fe,Ue),[()=>(n()||"Library").charAt(0).toUpperCase()+(n()||"library").slice(1)]),m(pe,Fe)};L(be,pe=>{n()==="settings"?pe(I):pe(U,!1)},!0)}m(Ie,ee)};L($e,Ie=>{n()==="favorites"?Ie(ke):Ie(Le,!1)},!0)}m(_e,Ee)};L(Te,_e=>{n()==="queue"?_e(A):_e(le,!1)},!0)}m(Ce,Re)};L(F,Ce=>{n()==="yandex"?Ce(ye):Ce(Pe,!1)},!0)}m(oe,ge)};L(j,oe=>{n()==="search"?oe(K):oe(X,!1)},!0)}m(H,G)};L(z,H=>{n()==="playlists"?H(V):H(ce,!1)},!0)}m(he,S)};L(we,he=>{n()==="radio"?he(Y):he(J,!1)})}m(D,N)};L(se,D=>{a().length>1?D(Z):D(ae,!1)})}var ue=_(k,2),O=d(ue),B=d(O);{var M=D=>{Rv(D,{})},fe=D=>{var N=et(),we=Ae(N);{var Y=he=>{Wu(he,{})},J=he=>{var S=et(),z=Ae(S);{var V=H=>{Pu(H,{})},ce=H=>{var G=et(),j=Ae(G);{var K=oe=>{nu(oe,{})},X=oe=>{var ge=et(),F=Ae(ge);{var ye=Ce=>{yu(Ce,{})},Pe=Ce=>{var Re=et(),Te=Ae(Re);{var A=_e=>{Su(_e,{})},le=_e=>{kv(_e,{get activeCategory(){return n()}})};L(Te,_e=>{n()==="settings"?_e(A):_e(le,!1)},!0)}m(Ce,Re)};L(F,Ce=>{n()==="search"?Ce(ye):Ce(Pe,!1)},!0)}m(oe,ge)};L(j,oe=>{n()==="playlists"||n()==="favorites"?oe(K):oe(X,!1)},!0)}m(H,G)};L(z,H=>{n()==="queue"?H(V):H(ce,!1)},!0)}m(he,S)};L(we,he=>{n()==="yandex"?he(Y):he(J,!1)},!0)}m(D,N)};L(B,D=>{n()==="radio"?D(M):D(fe,!1)})}var me=_(T,2),C=d(me);mi(C,{isDocked:!0});var q=_(h,2),ie=d(q);tf(ie,{});var Q=_(u,2);{var ne=D=>{var N=mf(),we=d(N);mi(we,{}),m(D,N)};L(Q,D=>{i()&&D(ne)})}ve(()=>lt(ue,`padding-bottom: ${i()?"0px":"var(--mini-player-height)"};`)),P("click",E,()=>g(v,!0)),m(e,c),Et(),l()}var wf=x('<button class="back-btn-area svelte-l8h85k"><span class="back-icon svelte-l8h85k"><!></span></button> <span class="header-title svelte-l8h85k">Select Playlist</span>',1),kf=x('<div class="track-info svelte-l8h85k"><div class="title text-ellipsis svelte-l8h85k"> </div> <div class="artist text-ellipsis svelte-l8h85k">Playlist</div></div>'),xf=x('<div class="track-info svelte-l8h85k"><div class="title text-ellipsis svelte-l8h85k"> </div> <div class="artist text-ellipsis svelte-l8h85k"> </div></div>'),Ef=x('<button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span> </span></button>'),Sf=x('<div class="empty-msg svelte-l8h85k">No custom playlists</div>'),Tf=x("<!> <!>",1),$f=x('<button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Play Now</span></button> <div class="sep svelte-l8h85k"></div> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Rename</span></button> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Delete Playlist</span></button>',1),Mf=x('<button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Go to Album</span></button> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Go to Artist</span></button>',1),Af=x('<div class="sep svelte-l8h85k"></div> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Remove from Playlist</span></button>',1),Pf=x('<div class="sep svelte-l8h85k"></div> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Remove from Queue</span></button>',1),Cf=x('<button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Play Next</span></button> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Add to Queue</span></button> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Add to Playlist...</span></button> <!> <button class="menu-row svelte-l8h85k"><span><!></span> <span> </span></button> <!> <!>',1),Lf=x('<div class="backdrop svelte-l8h85k"><div class="menu-card svelte-l8h85k"><div class="menu-header svelte-l8h85k"><!></div> <div class="menu-items scroll-y svelte-l8h85k"><!></div></div></div>');function zf(e,t){xt(t,!1);const a=()=>xe(Pn,"$contextMenu",i),r=()=>xe(Ia,"$favorites",i),n=()=>xe(Ls,"$playlists",i),[i,o]=jt(),l=$(),v=$(),c=$(),u=$(),h=$(),f=$(),p=$();let w=$(),T=$(),k=$(),E=$(0),W=$(0),se=$("main"),Z=$(!1);function ae(S){a().isOpen&&(g(Z,!1),Ht())}function ue(){Ht()}function O(){a().track&&aa.playNext(a().track.file),Ht()}function B(){a().track&&aa.addToQueue(a().track.file),Ht()}function M(){a().track&&ha.toggleFavorite(a().track),Ht()}function fe(){const S=a().track;S&&S.album&&Oa("tracks_by_album",{name:S.album,artist:S.artist}),Ht()}function me(){const S=a().track;S&&S.artist&&Oa("albums_by_artist",{name:S.artist}),Ht()}async function C(){const{playlistName:S,index:z}=a().context;S&&z!==null&&(Fr.update(V=>{const ce=[...V];return ce.splice(z,1),ce}),await ha.removeFromPlaylist(S,z)),Ht()}function q(){const{index:S}=a().context;S!=null&&aa.removeFromQueue(S),Ht()}function ie(){const S=a().context.playlist;S&&ze.send("stop").then(()=>ze.send("clear")).then(()=>ze.send(`load "${S.name.replace(/"/g,'\\"')}"`)).then(()=>ze.send("play 0")),Ht()}function Q(){const S=a().context.playlist;S&&(Ht(),fa({title:"Rename Playlist",message:`Enter new name for "${S.name}":`,type:"prompt",placeholder:S.name,inputValue:S.name,confirmLabel:"Rename",onConfirm:z=>{z&&z!==S.name&&ha.renamePlaylist(S.name,z)}}))}function ne(){const S=a().context.playlist;S&&(Ht(),fa({title:"Delete Playlist",message:`Are you sure you want to delete "${S.name}"? This cannot be undone.`,type:"confirm",confirmLabel:"Delete",onConfirm:()=>{ha.deletePlaylist(S.name)}}))}function D(){g(se,"playlists")}function N(){g(se,"main")}async function we(S){const z=a().track;if(z)try{const V=S.replace(/"/g,'\\"'),ce=z.file.replace(/"/g,'\\"');await ze.send(`playlistadd "${V}" "${ce}"`),De(`Added to "${S}"`,"success"),Ht()}catch(V){console.error(V),De("Failed to add","error")}}re(()=>a(),()=>{a().isOpen&&g(se,"main")}),re(()=>(a(),s(Z)),()=>{a().isOpen?!s(Z)&&typeof history<"u"&&(history.pushState({contextMenuOpen:!0},""),g(Z,!0)):s(Z)&&typeof history<"u"&&(history.back(),g(Z,!1))}),re(()=>(a(),r()),()=>{g(l,a().track&&r().has(a().track.file))}),re(()=>a(),()=>{g(v,a().track&&(a().track.file.includes("http")||a().track.file.includes("://")))}),re(()=>a(),()=>{g(c,a().context?.type==="playlist")}),re(()=>a(),()=>{g(u,a().context?.type==="queue")}),re(()=>a(),()=>{g(h,a().context?.type==="playlist-card")}),re(()=>a(),()=>{g(f,a().context?.source==="miniplayer")}),re(()=>(a(),s(W),s(E),s(w),s(f),s(T)),()=>{g(p,(()=>{if(!a().isOpen)return"";const S=a().triggerRect,z=a().x,V=a().y,ce=s(W)||220,H=s(E)||320;if(s(w)<=768&&s(f)&&S)return`
        position: fixed; 
        bottom: ${s(T)-S.top}px; 
        left: 50%; 
        transform: translateX(-50%); 
        margin: 0; 
        transform-origin: bottom center;
      `;let G=0,j=0,K="top left";if(S){const oe=S.left+S.width/2,ge=S.top+S.height/2,F=oe>s(w)/2,ye=ge>s(T)/2;F?(G=S.right-ce,K=ye?"bottom right":"top right"):(G=S.left,K=ye?"bottom left":"top left"),ye?j=S.top-H:j=S.bottom}else G=z,j=V,G+ce>s(w)&&(G=s(w)-ce-10),j+H>s(T)&&(j=s(T)-H-10);const X=8;return G<X&&(G=X),G+ce>s(w)-X&&(G=s(w)-ce-X),j<X&&(j=X),j+H>s(T)-X&&(j=s(T)-H-X),`position: fixed; top: ${j}px; left: ${G}px; margin: 0; transform-origin: ${K};`})())}),Ut(),At();var Y=et();P("popstate",La,ae);var J=Ae(Y);{var he=S=>{var z=Lf(),V=d(z),ce=d(V),H=d(ce);{var G=F=>{var ye=wf(),Pe=Ae(ye),Ce=d(Pe),Re=d(Ce);te(Re,()=>(R(y),b(()=>y.BACK))),P("click",Pe,N),m(F,ye)},j=F=>{var ye=et(),Pe=Ae(ye);{var Ce=Te=>{var A=kf(),le=d(A),_e=d(le);ve(()=>de(_e,(a(),b(()=>a().context.playlist.name)))),m(Te,A)},Re=Te=>{var A=xf(),le=d(A),_e=d(le),Ee=_(le,2),$e=d(Ee);ve(()=>{de(_e,(a(),b(()=>a().track.title))),de($e,(a(),b(()=>a().track.artist)))}),m(Te,A)};L(Pe,Te=>{s(h)?Te(Ce):Te(Re,!1)},!0)}m(F,ye)};L(H,F=>{s(se)==="playlists"?F(G):F(j,!1)})}var K=_(ce,2),X=d(K);{var oe=F=>{var ye=Tf(),Pe=Ae(ye);yt(Pe,1,n,oa,(Te,A)=>{var le=et(),_e=Ae(le);{var Ee=$e=>{var ke=Ef(),Le=d(ke),Ie=d(Le);te(Ie,()=>(R(y),b(()=>y.PLAYLISTS)));var ee=_(Le,2),be=d(ee);ve(()=>de(be,(s(A),b(()=>s(A).name)))),P("click",ke,()=>we(s(A).name)),m($e,ke)};L(_e,$e=>{s(A),b(()=>s(A).name!=="Favorites")&&$e(Ee)})}m(Te,le)});var Ce=_(Pe,2);{var Re=Te=>{var A=Sf();m(Te,A)};L(Ce,Te=>{n(),b(()=>n().filter(A=>A.name!=="Favorites").length===0)&&Te(Re)})}m(F,ye)},ge=F=>{var ye=et(),Pe=Ae(ye);{var Ce=Te=>{var A=$f(),le=Ae(A),_e=d(le),Ee=d(_e);te(Ee,()=>(R(y),b(()=>y.PLAY)));var $e=_(le,4),ke=d($e),Le=d(ke);te(Le,()=>(R(y),b(()=>y.EDIT)));var Ie=_($e,2),ee=d(Ie),be=d(ee);te(be,()=>(R(y),b(()=>y.REMOVE))),P("click",le,ie),P("click",$e,Q),P("click",Ie,ne),m(Te,A)},Re=Te=>{var A=Cf(),le=Ae(A),_e=d(le),Ee=d(_e);te(Ee,()=>(R(y),b(()=>y.NEXT)));var $e=_(le,2),ke=d($e),Le=d(ke);te(Le,()=>(R(y),b(()=>y.MENU)));var Ie=_($e,2),ee=d(Ie),be=d(ee);te(be,()=>(R(y),b(()=>y.ADD_TO_PLAYLIST||y.ADD)));var I=_(Ie,2);{var U=qe=>{var Me=Mf(),Oe=Ae(Me),We=d(Oe),st=d(We);te(st,()=>(R(y),b(()=>y.ALBUM_LINK||y.ALBUMS)));var vt=_(Oe,2),St=d(vt),wt=d(St);te(wt,()=>(R(y),b(()=>y.ARTIST_LINK||y.ARTISTS))),P("click",Oe,fe),P("click",vt,me),m(qe,Me)};L(I,qe=>{s(v)||qe(U)})}var pe=_(I,2),Fe=d(pe);let Ue;var Ne=d(Fe);te(Ne,()=>(s(l),R(y),b(()=>s(l)?y.HEART_FILLED:y.HEART)));var Xe=_(Fe,2),Ze=d(Xe),Ve=_(pe,2);{var He=qe=>{var Me=Af(),Oe=_(Ae(Me),2),We=d(Oe),st=d(We);te(st,()=>(R(y),b(()=>y.REMOVE))),P("click",Oe,C),m(qe,Me)};L(Ve,qe=>{s(c)&&qe(He)})}var Ye=_(Ve,2);{var Je=qe=>{var Me=Pf(),Oe=_(Ae(Me),2),We=d(Oe),st=d(We);te(st,()=>(R(y),b(()=>y.REMOVE))),P("click",Oe,q),m(qe,Me)};L(Ye,qe=>{s(u)&&qe(Je)})}ve(()=>{Ue=Qe(Fe,1,"icon svelte-l8h85k",null,Ue,{liked:s(l)}),de(Ze,s(l)?"Unlike":"Like")}),P("click",le,O),P("click",$e,B),P("click",Ie,D),P("click",pe,M),m(Te,A)};L(Pe,Te=>{s(h)?Te(Ce):Te(Re,!1)},!0)}m(F,ye)};L(X,F=>{s(se)==="playlists"?F(oe):F(ge,!1)})}Da(V,F=>g(k,F),()=>s(k)),ve(()=>lt(V,s(p))),Jn(V,"clientHeight",F=>g(E,F)),Jn(V,"clientWidth",F=>g(W,F)),ot(3,V,()=>An,()=>({start:.95,duration:100})),P("click",V,Qt(function(F){Vr.call(this,t,F)})),P("click",z,ue),ot(3,z,()=>bt,()=>({duration:100})),m(S,z)};L(J,S=>{a(),b(()=>a().isOpen)&&S(he)})}ti("innerWidth",S=>g(w,S)),ti("innerHeight",S=>g(T,S)),m(e,Y),Et(),o()}var If=x('<p class="modal-message svelte-1bxxaoh"> </p>'),Rf=x('<div class="input-wrapper svelte-1bxxaoh"><input type="text" autoFocus/></div>'),jf=x('<span class="check svelte-1bxxaoh">â</span>'),Nf=x("<button> <!></button>"),Of=x('<div class="select-list svelte-1bxxaoh"></div>'),Df=x('<button class="btn cancel svelte-1bxxaoh"> </button>'),Ff=x('<div class="modal-actions svelte-1bxxaoh"><!> <button class="btn confirm svelte-1bxxaoh"> </button></div>'),qf=x('<div class="backdrop svelte-1bxxaoh"><div class="modal-card svelte-1bxxaoh"><div class="modal-header svelte-1bxxaoh"><span class="modal-title svelte-1bxxaoh"> </span></div> <div class="modal-body svelte-1bxxaoh"><!> <!></div> <!></div></div>');function Bf(e,t){xt(t,!1);const a=()=>xe(ks,"$modal",r),[r,n]=jt();let i=$(!1),o=$();function l(){if(a().type==="prompt"){const T=a().inputValue?a().inputValue.trim():"";if(T.length===0){c();return}a().onConfirm&&a().onConfirm(T)}else a().onConfirm&&a().onConfirm();cs()}function v(T){a().onConfirm&&a().onConfirm(T),cs()}function c(){g(i,!0),s(o)&&s(o).focus(),setTimeout(()=>{g(i,!1)},400)}function u(){cs()}function h(T){T.key==="Enter"&&a().type!=="select"&&l(),s(i)&&g(i,!1)}re(()=>a(),()=>{a().isOpen||g(i,!1)}),Ut(),At();var f=et(),p=Ae(f);{var w=T=>{var k=qf(),E=d(k),W=d(E),se=d(W),Z=d(se),ae=_(W,2),ue=d(ae);{var O=q=>{var ie=If(),Q=d(ie);ve(()=>de(Q,(a(),b(()=>a().message)))),m(q,ie)};L(ue,q=>{a(),b(()=>a().message)&&q(O)})}var B=_(ue,2);{var M=q=>{var ie=Rf(),Q=d(ie);let ne;Da(Q,D=>g(o,D),()=>s(o)),ve(()=>{ne=Qe(Q,1,"modal-input svelte-1bxxaoh",null,ne,{"shake-error":s(i)}),Lt(Q,"placeholder",(a(),b(()=>a().placeholder)))}),Ka(Q,()=>a().inputValue,D=>ic(ks,b(a).inputValue=D,b(a))),P("keydown",Q,h),m(q,ie)},fe=q=>{var ie=et(),Q=Ae(ie);{var ne=D=>{var N=Of();yt(N,5,()=>(a(),b(()=>a().options)),oa,(we,Y)=>{var J=Nf();let he;var S=d(J),z=_(S);{var V=ce=>{var H=jf();m(ce,H)};L(z,ce=>{s(Y),a(),b(()=>s(Y).value===a().inputValue)&&ce(V)})}ve(()=>{he=Qe(J,1,"select-item svelte-1bxxaoh",null,he,{active:s(Y).value===a().inputValue}),de(S,`${s(Y),b(()=>s(Y).label)??""} `)}),P("click",J,()=>v(s(Y).value)),m(we,J)}),m(D,N)};L(Q,D=>{a(),b(()=>a().type==="select")&&D(ne)},!0)}m(q,ie)};L(B,q=>{a(),b(()=>a().type==="prompt")?q(M):q(fe,!1)})}var me=_(ae,2);{var C=q=>{var ie=Ff(),Q=d(ie);{var ne=we=>{var Y=Df(),J=d(Y);ve(()=>de(J,(a(),b(()=>a().cancelLabel)))),P("click",Y,function(...he){cs?.apply(this,he)}),m(we,Y)};L(Q,we=>{a(),b(()=>a().type==="confirm"||a().type==="prompt")&&we(ne)})}var D=_(Q,2),N=d(D);ve(()=>de(N,(a(),b(()=>a().confirmLabel)))),P("click",D,l),m(q,ie)};L(me,q=>{a(),b(()=>a().type!=="select")&&q(C)})}ve(()=>de(Z,(a(),b(()=>a().title)))),ot(3,E,()=>An,()=>({start:.95,duration:200})),P("click",E,Qt(function(q){Vr.call(this,t,q)})),P("click",k,u),ot(3,k,()=>bt,()=>({duration:150})),m(T,k)};L(p,T=>{a(),b(()=>a().isOpen)&&T(w)})}m(e,f),Et(),n()}const bi={init(){this.handleHashChange(),window.addEventListener("hashchange",()=>this.handleHashChange())},handleHashChange(){let e=window.location.hash.slice(1);for(;e.startsWith("/");)e=e.slice(1);if(!e){(Ge(Vt).length>1||Ge(Ot)==="search")&&(this.setRootTab("artists"),window.location.hash="/artists");return}const t=e.split("/").map(decodeURIComponent),a=t[0];let r=rd();switch(r||t.length>1&&(a==="album"&&t.length>=3?r={artist:t[1],name:t[2]}:a==="artist"&&t.length>=2?r={name:t[1]}:r={name:t[1],displayName:t[1]}),console.log(`[Router] Navigating: ${a}`,r),a){case"queue":this.setRootTab("queue");break;case"radio":this.setRootTab("radio");break;case"playlists":this.setRootTab("playlists");break;case"settings":this.setRootTab("settings");break;case"favorites":Ot.set("favorites"),Vt.set([{view:"root"},{view:"details",data:{name:"Favorites"}}]);break;case"artists":this.setRootTab("artists");break;case"albums":this.setRootTab("albums");break;case"search":Ot.set("search"),t[1]&&qr.set(t[1]),Vt.set([{view:"root"}]);break;case"album":Ot.set("albums"),Vt.set([{view:"root"},{view:"tracks_by_album",data:r}]);break;case"artist":Ot.set("artists"),Vt.set([{view:"root"},{view:"albums_by_artist",data:r}]);break;case"playlist":Ot.set("playlists"),Vt.set([{view:"root"},{view:"details",data:r}]);break;case"yandex":Ot.set("yandex"),Vt.set([{view:"root"}]);break;default:this.setRootTab("artists");break}},setRootTab(e){Ot.set(e),Vt.set([{view:"root"}])},updateUrl(e,t){let a="";if(e==="root"){const r=Ge(Ot);if(r==="search"){const n=Ge(qr);a=n?`search/${encodeURIComponent(n)}`:"search"}else a=r}else if(e==="details"){const r=t.name||t;a=r==="Favorites"?"favorites":`playlist/${encodeURIComponent(r)}`}else if(e==="albums_by_artist"){const r=t.name||t;a=`artist/${encodeURIComponent(r)}`}else if(e==="tracks_by_album"){const r=t.name||t,n=t.artist;n?a=`album/${encodeURIComponent(n)}/${encodeURIComponent(r)}`:a=`album/${encodeURIComponent(r)}`}else e==="queue"&&(a="queue");if(a){const r=`#/${a}`;decodeURIComponent(window.location.hash)!==decodeURIComponent(r)&&(window.location.hash=`/${a}`)}}};var Uf=x("<!> <!> <!>",1);function Hf(e,t){xt(t,!1),Fa(async()=>{bi.init(),ad((o,l)=>{bi.updateUrl(o,l)}),yo(),Gr.loadRadioStations();try{const o=await Ra.getArtists();o.length>0?console.log(`[App] Database ready. Loaded ${o.length} artists from cache.`):(console.log("[App] Database empty. Starting initial sync..."),Gr.syncLibrary())}catch(o){console.error("[App] DB Check failed:",o),De("Local DB error. Please update library manually.","error")}}),At();var a=Uf(),r=Ae(a);yf(r,{});var n=_(r,2);zf(n,{});var i=_(n,2);Bf(i,{}),m(e,a),Et()}Fl(Hf,{target:document.getElementById("app")});
