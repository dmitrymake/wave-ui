(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();const ms=!1;var Wr=Array.isArray,Ri=Array.prototype.indexOf,Qr=Array.from,Aa=Object.defineProperty,Hn=Object.getOwnPropertyDescriptor,$a=Object.getOwnPropertyDescriptors,zi=Object.prototype,Li=Array.prototype,Os=Object.getPrototypeOf,ea=Object.isExtensible;function Ii(e){return typeof e=="function"}const st=()=>{};function Ni(e){return e()}function Fr(e){for(var t=0;t<e.length;t++)e[t]()}function Pa(){var e,t,n=new Promise((r,s)=>{e=r,t=s});return{promise:n,resolve:e,reject:t}}const je=2,Ds=4,Kr=8,Oi=1<<24,Pt=16,qt=32,An=64,Xr=128,bt=512,Ue=1024,Je=2048,yt=4096,at=8192,Ut=16384,Gr=32768,yn=65536,ta=1<<17,Ca=1<<18,Jn=1<<19,Ra=1<<20,Dt=1<<25,kn=32768,ws=1<<21,Fs=1<<22,Gt=1<<23,pn=Symbol("$state"),Di=Symbol("legacy props"),Fi=Symbol(""),Bn=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Us(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Ui(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Bi(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function ji(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function qi(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Hi(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Yi(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function Vi(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Wi(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Qi(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Ki(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Xi=1,Gi=2,za=4,Zi=8,Ji=16,eo=2,to=4,no=8,ro=1,so=2,ao=4,io=1,oo=2,He=Symbol(),lo="http://www.w3.org/1999/xhtml";function co(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function La(e){return e===this.v}function Ia(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function Na(e){return!Ia(e,this.v)}let er=!1,uo=!1;function fo(){er=!0}let Ce=null;function Vn(e){Ce=e}function et(e,t=!1,n){Ce={p:Ce,i:!1,c:null,e:null,s:e,x:null,l:er&&!t?{s:null,u:null,$:[]}:null}}function tt(e){var t=Ce,n=t.e;if(n!==null){t.e=null;for(var r of n)Ga(r)}return t.i=!0,Ce=t.p,{}}function yr(){return!er||Ce!==null&&Ce.l===null}let dn=[];function Oa(){var e=dn;dn=[],Fr(e)}function $n(e){if(dn.length===0&&!cr){var t=dn;queueMicrotask(()=>{t===dn&&Oa()})}dn.push(e)}function vo(){for(;dn.length>0;)Oa()}function Da(e){var t=Ee;if(t===null)return be.f|=Gt,e;if((t.f&Gr)===0){if((t.f&Xr)===0)throw e;t.b.error(e)}else Wn(e,t)}function Wn(e,t){for(;t!==null;){if((t.f&Xr)!==0)try{t.b.error(e);return}catch(n){e=n}t=t.parent}throw e}const Ar=new Set;let Te=null,Lr=null,vt=null,ft=[],Zr=null,bs=!1,cr=!1;class xt{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#r=0;#n=0;#l=null;#a=new Set;#s=new Set;skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#n>0}process(t){ft=[],Lr=null,this.apply();var n={parent:null,effect:null,effects:[],render_effects:[]};for(const r of t)this.#i(r,n);this.is_fork||this.#u(),this.is_deferred()?(this.#o(n.effects),this.#o(n.render_effects)):(Lr=this,Te=null,na(n.render_effects),na(n.effects),Lr=null,this.#l?.resolve()),vt=null}#i(t,n){t.f^=Ue;for(var r=t.first;r!==null;){var s=r.f,i=(s&(qt|An))!==0,c=i&&(s&Ue)!==0,l=c||(s&at)!==0||this.skipped_effects.has(r);if((r.f&Xr)!==0&&r.b?.is_pending()&&(n={parent:n,effect:r,effects:[],render_effects:[]}),!l&&r.fn!==null){i?r.f^=Ue:(s&Ds)!==0?n.effects.push(r):nr(r)&&((r.f&Pt)!==0&&this.#a.add(r),Kn(r));var f=r.first;if(f!==null){r=f;continue}}var o=r.parent;for(r=r.next;r===null&&o!==null;)o===n.effect&&(this.#o(n.effects),this.#o(n.render_effects),n=n.parent),r=o.next,o=o.parent}}#o(t){for(const n of t)(n.f&Je)!==0?this.#a.add(n):(n.f&yt)!==0&&this.#s.add(n),this.#c(n.deps),Be(n,Ue)}#c(t){if(t!==null)for(const n of t)(n.f&je)===0||(n.f&kn)===0||(n.f^=kn,this.#c(n.deps))}capture(t,n){this.previous.has(t)||this.previous.set(t,n),(t.f&Gt)===0&&(this.current.set(t,t.v),vt?.set(t,t.v))}activate(){Te=this,this.apply()}deactivate(){Te===this&&(Te=null,vt=null)}flush(){if(this.activate(),ft.length>0){if(Fa(),Te!==null&&Te!==this)return}else this.#r===0&&this.process([]);this.deactivate()}discard(){for(const t of this.#t)t(this);this.#t.clear()}#u(){if(this.#n===0){for(const t of this.#e)t();this.#e.clear()}this.#r===0&&this.#f()}#f(){if(Ar.size>1){this.previous.clear();var t=vt,n=!0,r={parent:null,effect:null,effects:[],render_effects:[]};for(const i of Ar){if(i===this){n=!1;continue}const c=[];for(const[f,o]of this.current){if(i.current.has(f))if(n&&o!==i.current.get(f))i.current.set(f,o);else continue;c.push(f)}if(c.length===0)continue;const l=[...i.current.keys()].filter(f=>!this.current.has(f));if(l.length>0){var s=ft;ft=[];const f=new Set,o=new Map;for(const u of c)Ua(u,l,f,o);if(ft.length>0){Te=i,i.apply();for(const u of ft)i.#i(u,r);i.deactivate()}ft=s}}Te=null,vt=t}this.committed=!0,Ar.delete(this)}increment(t){this.#r+=1,t&&(this.#n+=1)}decrement(t){this.#r-=1,t&&(this.#n-=1),this.revive()}revive(){for(const t of this.#a)this.#s.delete(t),Be(t,Je),En(t);for(const t of this.#s)Be(t,yt),En(t);this.flush()}oncommit(t){this.#e.add(t)}ondiscard(t){this.#t.add(t)}settled(){return(this.#l??=Pa()).promise}static ensure(){if(Te===null){const t=Te=new xt;Ar.add(Te),cr||xt.enqueue(()=>{Te===t&&t.flush()})}return Te}static enqueue(t){$n(t)}apply(){}}function ho(e){var t=cr;cr=!0;try{for(var n;;){if(vo(),ft.length===0&&(Te?.flush(),ft.length===0))return Zr=null,n;Fa()}}finally{cr=t}}function Fa(){var e=gn;bs=!0;var t=null;try{var n=0;for(Br(!0);ft.length>0;){var r=xt.ensure();if(n++>1e3){var s,i;po()}r.process(ft),Zt.clear()}}finally{bs=!1,Br(e),Zr=null}}function po(){try{Hi()}catch(e){Wn(e,Zr)}}let It=null;function na(e){var t=e.length;if(t!==0){for(var n=0;n<t;){var r=e[n++];if((r.f&(Ut|at))===0&&nr(r)&&(It=new Set,Kn(r),r.deps===null&&r.first===null&&r.nodes===null&&(r.teardown===null&&r.ac===null?ni(r):r.fn=null),It?.size>0)){Zt.clear();for(const s of It){if((s.f&(Ut|at))!==0)continue;const i=[s];let c=s.parent;for(;c!==null;)It.has(c)&&(It.delete(c),i.push(c)),c=c.parent;for(let l=i.length-1;l>=0;l--){const f=i[l];(f.f&(Ut|at))===0&&Kn(f)}}It.clear()}}It=null}}function Ua(e,t,n,r){if(!n.has(e)&&(n.add(e),e.reactions!==null))for(const s of e.reactions){const i=s.f;(i&je)!==0?Ua(s,t,n,r):(i&(Fs|Pt))!==0&&(i&Je)===0&&Ba(s,t,r)&&(Be(s,Je),En(s))}}function Ba(e,t,n){const r=n.get(e);if(r!==void 0)return r;if(e.deps!==null)for(const s of e.deps){if(t.includes(s))return!0;if((s.f&je)!==0&&Ba(s,t,n))return n.set(s,!0),!0}return n.set(e,!1),!1}function En(e){for(var t=Zr=e;t.parent!==null;){t=t.parent;var n=t.f;if(bs&&t===Ee&&(n&Pt)!==0&&(n&Ca)===0)return;if((n&(An|qt))!==0){if((n&Ue)===0)return;t.f^=Ue}}ft.push(t)}function _o(e){let t=0,n=xn(0),r;return()=>{dr()&&(a(n),Er(()=>(t===0&&(r=S(()=>e(()=>ur(n)))),t+=1,()=>{$n(()=>{t-=1,t===0&&(r?.(),r=void 0,ur(n))})})))}}var go=yn|Jn|Xr;function mo(e,t,n){new wo(e,t,n)}class wo{parent;#e=!1;#t;#r=null;#n;#l;#a;#s=null;#i=null;#o=null;#c=null;#u=null;#f=0;#d=0;#h=!1;#v=null;#w=_o(()=>(this.#v=xn(this.#f),()=>{this.#v=null}));constructor(t,n,r){this.#t=t,this.#n=n,this.#l=r,this.parent=Ee.b,this.#e=!!this.#n.pending,this.#a=qs(()=>{Ee.b=this;{var s=this.#g();try{this.#s=dt(()=>r(s))}catch(i){this.error(i)}this.#d>0?this.#_():this.#e=!1}return()=>{this.#u?.remove()}},go)}#b(){try{this.#s=dt(()=>this.#l(this.#t))}catch(t){this.error(t)}this.#e=!1}#y(){const t=this.#n.pending;t&&(this.#i=dt(()=>t(this.#t)),xt.enqueue(()=>{var n=this.#g();this.#s=this.#p(()=>(xt.ensure(),dt(()=>this.#l(n)))),this.#d>0?this.#_():(_n(this.#i,()=>{this.#i=null}),this.#e=!1)}))}#g(){var t=this.#t;return this.#e&&(this.#u=Bt(),this.#t.before(this.#u),t=this.#u),t}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#n.pending}#p(t){var n=Ee,r=be,s=Ce;Tt(this.#a),Ge(this.#a),Vn(this.#a.ctx);try{return t()}catch(i){return Da(i),null}finally{Tt(n),Ge(r),Vn(s)}}#_(){const t=this.#n.pending;this.#s!==null&&(this.#c=document.createDocumentFragment(),this.#c.append(this.#u),ai(this.#s,this.#c)),this.#i===null&&(this.#i=dt(()=>t(this.#t)))}#m(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#m(t);return}this.#d+=t,this.#d===0&&(this.#e=!1,this.#i&&_n(this.#i,()=>{this.#i=null}),this.#c&&(this.#t.before(this.#c),this.#c=null))}update_pending_count(t){this.#m(t),this.#f+=t,this.#v&&Qn(this.#v,this.#f)}get_effect_pending(){return this.#w(),a(this.#v)}error(t){var n=this.#n.onerror;let r=this.#n.failed;if(this.#h||!n&&!r)throw t;this.#s&&(Ze(this.#s),this.#s=null),this.#i&&(Ze(this.#i),this.#i=null),this.#o&&(Ze(this.#o),this.#o=null);var s=!1,i=!1;const c=()=>{if(s){co();return}s=!0,i&&Ki(),xt.ensure(),this.#f=0,this.#o!==null&&_n(this.#o,()=>{this.#o=null}),this.#e=this.has_pending_snippet(),this.#s=this.#p(()=>(this.#h=!1,dt(()=>this.#l(this.#t)))),this.#d>0?this.#_():this.#e=!1};var l=be;try{Ge(null),i=!0,n?.(t,c),i=!1}catch(f){Wn(f,this.#a&&this.#a.parent)}finally{Ge(l)}r&&$n(()=>{this.#o=this.#p(()=>{xt.ensure(),this.#h=!0;try{return dt(()=>{r(this.#t,()=>t,()=>c)})}catch(f){return Wn(f,this.#a.parent),null}finally{this.#h=!1}})})}}function bo(e,t,n,r){const s=yr()?Jr:Oe;if(n.length===0&&e.length===0){r(t.map(s));return}var i=Te,c=Ee,l=yo();function f(){Promise.all(n.map(o=>ko(o))).then(o=>{l();try{r([...t.map(s),...o])}catch(u){(c.f&Ut)===0&&Wn(u,c)}i?.deactivate(),Ur()}).catch(o=>{Wn(o,c)})}e.length>0?Promise.all(e).then(()=>{l();try{return f()}finally{i?.deactivate(),Ur()}}):f()}function yo(){var e=Ee,t=be,n=Ce,r=Te;return function(i=!0){Tt(e),Ge(t),Vn(n),i&&r?.activate()}}function Ur(){Tt(null),Ge(null),Vn(null)}function Jr(e){var t=je|Je,n=be!==null&&(be.f&je)!==0?be:null;return Ee!==null&&(Ee.f|=Jn),{ctx:Ce,deps:null,effects:null,equals:La,f:t,fn:e,reactions:null,rv:0,v:He,wv:0,parent:n??Ee,ac:null}}function ko(e,t){let n=Ee;n===null&&Ui();var r=n.b,s=void 0,i=xn(He),c=!be,l=new Map;return Ro(()=>{var f=Pa();s=f.promise;try{Promise.resolve(e()).then(f.resolve,f.reject).then(()=>{o===Te&&o.committed&&o.deactivate(),Ur()})}catch(d){f.reject(d),Ur()}var o=Te;if(c){var u=!r.is_pending();r.update_pending_count(1),o.increment(u),l.get(o)?.reject(Bn),l.delete(o),l.set(o,f)}const v=(d,h=void 0)=>{if(o.activate(),h)h!==Bn&&(i.f|=Gt,Qn(i,h));else{(i.f&Gt)!==0&&(i.f^=Gt),Qn(i,d);for(const[w,y]of l){if(l.delete(w),w===o)break;y.reject(Bn)}}c&&(r.update_pending_count(-1),o.decrement(u))};f.promise.then(v,d=>v(null,d||"unknown"))}),js(()=>{for(const f of l.values())f.reject(Bn)}),new Promise(f=>{function o(u){function v(){u===s?f(i):o(s)}u.then(v,v)}o(s)})}function sr(e){const t=Jr(e);return ii(t),t}function Oe(e){const t=Jr(e);return t.equals=Na,t}function ja(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)Ze(t[n])}}function Eo(e){for(var t=e.parent;t!==null;){if((t.f&je)===0)return(t.f&Ut)===0?t:null;t=t.parent}return null}function Bs(e){var t,n=Ee;Tt(Eo(e));try{e.f&=~kn,ja(e),t=ui(e)}finally{Tt(n)}return t}function qa(e){var t=Bs(e);if(e.equals(t)||(Te?.is_fork||(e.v=t),e.wv=li()),!Pn)if(vt!==null)(dr()||Te?.is_fork)&&vt.set(e,t);else{var n=(e.f&bt)===0?yt:Ue;Be(e,n)}}let ys=new Set;const Zt=new Map;let Ha=!1;function xn(e,t){var n={f:0,v:e,reactions:null,equals:La,rv:0,wv:0};return n}function Qt(e,t){const n=xn(e);return ii(n),n}function R(e,t=!1,n=!0){const r=xn(e);return t||(r.equals=Na),er&&n&&Ce!==null&&Ce.l!==null&&(Ce.l.s??=[]).push(r),r}function $r(e,t){return g(e,S(()=>a(e))),t}function g(e,t,n=!1){be!==null&&(!Mt||(be.f&ta)!==0)&&yr()&&(be.f&(je|Pt|Fs|ta))!==0&&!jt?.includes(e)&&Qi();let r=n?jn(t):t;return Qn(e,r)}function Qn(e,t){if(!e.equals(t)){var n=e.v;Pn?Zt.set(e,t):Zt.set(e,n),e.v=t;var r=xt.ensure();r.capture(e,n),(e.f&je)!==0&&((e.f&Je)!==0&&Bs(e),Be(e,(e.f&bt)!==0?Ue:yt)),e.wv=li(),Ya(e,Je),yr()&&Ee!==null&&(Ee.f&Ue)!==0&&(Ee.f&(qt|An))===0&&(ct===null?Lo([e]):ct.push(e)),!r.is_fork&&ys.size>0&&!Ha&&xo()}return t}function xo(){Ha=!1;var e=gn;Br(!0);const t=Array.from(ys);try{for(const n of t)(n.f&Ue)!==0&&Be(n,yt),nr(n)&&Kn(n)}finally{Br(e)}ys.clear()}function ur(e){g(e,e.v+1)}function Ya(e,t){var n=e.reactions;if(n!==null)for(var r=yr(),s=n.length,i=0;i<s;i++){var c=n[i],l=c.f;if(!(!r&&c===Ee)){var f=(l&Je)===0;if(f&&Be(c,t),(l&je)!==0){var o=c;vt?.delete(o),(l&kn)===0&&(l&bt&&(c.f|=kn),Ya(o,yt))}else f&&((l&Pt)!==0&&It!==null&&It.add(c),En(c))}}}function jn(e){if(typeof e!="object"||e===null||pn in e)return e;const t=Os(e);if(t!==zi&&t!==Li)return e;var n=new Map,r=Wr(e),s=Qt(0),i=mn,c=l=>{if(mn===i)return l();var f=be,o=mn;Ge(null),aa(i);var u=l();return Ge(f),aa(o),u};return r&&n.set("length",Qt(e.length)),new Proxy(e,{defineProperty(l,f,o){(!("value"in o)||o.configurable===!1||o.enumerable===!1||o.writable===!1)&&Vi();var u=n.get(f);return u===void 0?u=c(()=>{var v=Qt(o.value);return n.set(f,v),v}):g(u,o.value,!0),!0},deleteProperty(l,f){var o=n.get(f);if(o===void 0){if(f in l){const u=c(()=>Qt(He));n.set(f,u),ur(s)}}else g(o,He),ur(s);return!0},get(l,f,o){if(f===pn)return e;var u=n.get(f),v=f in l;if(u===void 0&&(!v||Hn(l,f)?.writable)&&(u=c(()=>{var h=jn(v?l[f]:He),w=Qt(h);return w}),n.set(f,u)),u!==void 0){var d=a(u);return d===He?void 0:d}return Reflect.get(l,f,o)},getOwnPropertyDescriptor(l,f){var o=Reflect.getOwnPropertyDescriptor(l,f);if(o&&"value"in o){var u=n.get(f);u&&(o.value=a(u))}else if(o===void 0){var v=n.get(f),d=v?.v;if(v!==void 0&&d!==He)return{enumerable:!0,configurable:!0,value:d,writable:!0}}return o},has(l,f){if(f===pn)return!0;var o=n.get(f),u=o!==void 0&&o.v!==He||Reflect.has(l,f);if(o!==void 0||Ee!==null&&(!u||Hn(l,f)?.writable)){o===void 0&&(o=c(()=>{var d=u?jn(l[f]):He,h=Qt(d);return h}),n.set(f,o));var v=a(o);if(v===He)return!1}return u},set(l,f,o,u){var v=n.get(f),d=f in l;if(r&&f==="length")for(var h=o;h<v.v;h+=1){var w=n.get(h+"");w!==void 0?g(w,He):h in l&&(w=c(()=>Qt(He)),n.set(h+"",w))}if(v===void 0)(!d||Hn(l,f)?.writable)&&(v=c(()=>Qt(void 0)),g(v,jn(o)),n.set(f,v));else{d=v.v!==He;var y=c(()=>jn(o));g(v,y)}var _=Reflect.getOwnPropertyDescriptor(l,f);if(_?.set&&_.set.call(u,o),!d){if(r&&typeof f=="string"){var k=n.get("length"),L=Number(f);Number.isInteger(L)&&L>=k.v&&g(k,L+1)}ur(s)}return!0},ownKeys(l){a(s);var f=Reflect.ownKeys(l).filter(v=>{var d=n.get(v);return d===void 0||d.v!==He});for(var[o,u]of n)u.v!==He&&!(o in l)&&f.push(o);return f},setPrototypeOf(){Wi()}})}var un,Va,Wa,Qa;function Mo(){if(un===void 0){un=window,Va=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;Wa=Hn(t,"firstChild").get,Qa=Hn(t,"nextSibling").get,ea(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),ea(n)&&(n.__t=void 0)}}function Bt(e=""){return document.createTextNode(e)}function Xt(e){return Wa.call(e)}function kr(e){return Qa.call(e)}function p(e,t){return Xt(e)}function $e(e,t=!1){{var n=Xt(e);return n instanceof Comment&&n.data===""?kr(n):n}}function x(e,t=1,n=!1){let r=e;for(;t--;)r=kr(r);return r}function To(e){e.textContent=""}function Ka(){return!1}let ra=!1;function So(){ra||(ra=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function tr(e){var t=be,n=Ee;Ge(null),Tt(null);try{return e()}finally{Ge(t),Tt(n)}}function Ao(e,t,n,r=n){e.addEventListener(t,()=>tr(n));const s=e.__on_r;s?e.__on_r=()=>{s(),r(!0)}:e.__on_r=()=>r(!0),So()}function Xa(e){Ee===null&&(be===null&&qi(),ji()),Pn&&Bi()}function $o(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function Ct(e,t,n){var r=Ee;r!==null&&(r.f&at)!==0&&(e|=at);var s={ctx:Ce,deps:null,nodes:null,f:e|Je|bt,first:null,fn:t,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,wv:0,ac:null};if(n)try{Kn(s),s.f|=Gr}catch(l){throw Ze(s),l}else t!==null&&En(s);var i=s;if(n&&i.deps===null&&i.teardown===null&&i.nodes===null&&i.first===i.last&&(i.f&Jn)===0&&(i=i.first,(e&Pt)!==0&&(e&yn)!==0&&i!==null&&(i.f|=yn)),i!==null&&(i.parent=r,r!==null&&$o(i,r),be!==null&&(be.f&je)!==0&&(e&An)===0)){var c=be;(c.effects??=[]).push(i)}return s}function dr(){return be!==null&&!Mt}function js(e){const t=Ct(Kr,null,!1);return Be(t,Ue),t.teardown=e,t}function ks(e){Xa();var t=Ee.f,n=!be&&(t&qt)!==0&&(t&Gr)===0;if(n){var r=Ce;(r.e??=[]).push(e)}else return Ga(e)}function Ga(e){return Ct(Ds|Ra,e,!1)}function Po(e){return Xa(),Ct(Kr|Ra,e,!0)}function Co(e){xt.ensure();const t=Ct(An|Jn,e,!0);return(n={})=>new Promise(r=>{n.outro?_n(t,()=>{Ze(t),r(void 0)}):(Ze(t),r(void 0))})}function Za(e){return Ct(Ds,e,!1)}function ee(e,t){var n=Ce,r={effect:null,ran:!1,deps:e};n.l.$.push(r),r.effect=Er(()=>{e(),!r.ran&&(r.ran=!0,S(t))})}function Ht(){var e=Ce;Er(()=>{for(var t of e.l.$){t.deps();var n=t.effect;(n.f&Ue)!==0&&Be(n,yt),nr(n)&&Kn(n),t.ran=!1}})}function Ro(e){return Ct(Fs|Jn,e,!0)}function Er(e,t=0){return Ct(Kr|t,e,!0)}function ve(e,t=[],n=[],r=[]){bo(r,t,n,s=>{Ct(Kr,()=>e(...s.map(a)),!0)})}function qs(e,t=0){var n=Ct(Pt|t,e,!0);return n}function dt(e){return Ct(qt|Jn,e,!0)}function Ja(e){var t=e.teardown;if(t!==null){const n=Pn,r=be;sa(!0),Ge(null);try{t.call(null)}finally{sa(n),Ge(r)}}}function ei(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){const s=n.ac;s!==null&&tr(()=>{s.abort(Bn)});var r=n.next;(n.f&An)!==0?n.parent=null:Ze(n,t),n=r}}function zo(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&qt)===0&&Ze(t),t=n}}function Ze(e,t=!0){var n=!1;(t||(e.f&Ca)!==0)&&e.nodes!==null&&e.nodes.end!==null&&(ti(e.nodes.start,e.nodes.end),n=!0),ei(e,t&&!n),jr(e,0),Be(e,Ut);var r=e.nodes&&e.nodes.t;if(r!==null)for(const i of r)i.stop();Ja(e);var s=e.parent;s!==null&&s.first!==null&&ni(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function ti(e,t){for(;e!==null;){var n=e===t?null:kr(e);e.remove(),e=n}}function ni(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function _n(e,t,n=!0){var r=[];ri(e,r,!0);var s=()=>{n&&Ze(e),t&&t()},i=r.length;if(i>0){var c=()=>--i||s();for(var l of r)l.out(c)}else s()}function ri(e,t,n){if((e.f&at)===0){e.f^=at;var r=e.nodes&&e.nodes.t;if(r!==null)for(const l of r)(l.is_global||n)&&t.push(l);for(var s=e.first;s!==null;){var i=s.next,c=(s.f&yn)!==0||(s.f&qt)!==0&&(e.f&Pt)!==0;ri(s,t,c?n:!1),s=i}}}function Hs(e){si(e,!0)}function si(e,t){if((e.f&at)!==0){e.f^=at,(e.f&Ue)===0&&(Be(e,Je),En(e));for(var n=e.first;n!==null;){var r=n.next,s=(n.f&yn)!==0||(n.f&qt)!==0;si(n,s?t:!1),n=r}var i=e.nodes&&e.nodes.t;if(i!==null)for(const c of i)(c.is_global||t)&&c.in()}}function ai(e,t){if(e.nodes)for(var n=e.nodes.start,r=e.nodes.end;n!==null;){var s=n===r?null:kr(n);t.append(n),n=s}}let gn=!1;function Br(e){gn=e}let Pn=!1;function sa(e){Pn=e}let be=null,Mt=!1;function Ge(e){be=e}let Ee=null;function Tt(e){Ee=e}let jt=null;function ii(e){be!==null&&(jt===null?jt=[e]:jt.push(e))}let We=null,rt=0,ct=null;function Lo(e){ct=e}let oi=1,vr=0,mn=vr;function aa(e){mn=e}function li(){return++oi}function nr(e){var t=e.f;if((t&Je)!==0)return!0;if(t&je&&(e.f&=~kn),(t&yt)!==0){var n=e.deps;if(n!==null)for(var r=n.length,s=0;s<r;s++){var i=n[s];if(nr(i)&&qa(i),i.wv>e.wv)return!0}(t&bt)!==0&&vt===null&&Be(e,Ue)}return!1}function ci(e,t,n=!0){var r=e.reactions;if(r!==null&&!jt?.includes(e))for(var s=0;s<r.length;s++){var i=r[s];(i.f&je)!==0?ci(i,t,!1):t===i&&(n?Be(i,Je):(i.f&Ue)!==0&&Be(i,yt),En(i))}}function ui(e){var t=We,n=rt,r=ct,s=be,i=jt,c=Ce,l=Mt,f=mn,o=e.f;We=null,rt=0,ct=null,be=(o&(qt|An))===0?e:null,jt=null,Vn(e.ctx),Mt=!1,mn=++vr,e.ac!==null&&(tr(()=>{e.ac.abort(Bn)}),e.ac=null);try{e.f|=ws;var u=e.fn,v=u(),d=e.deps;if(We!==null){var h;if(jr(e,rt),d!==null&&rt>0)for(d.length=rt+We.length,h=0;h<We.length;h++)d[rt+h]=We[h];else e.deps=d=We;if(dr()&&(e.f&bt)!==0)for(h=rt;h<d.length;h++)(d[h].reactions??=[]).push(e)}else d!==null&&rt<d.length&&(jr(e,rt),d.length=rt);if(yr()&&ct!==null&&!Mt&&d!==null&&(e.f&(je|yt|Je))===0)for(h=0;h<ct.length;h++)ci(ct[h],e);return s!==null&&s!==e&&(vr++,ct!==null&&(r===null?r=ct:r.push(...ct))),(e.f&Gt)!==0&&(e.f^=Gt),v}catch(w){return Da(w)}finally{e.f^=ws,We=t,rt=n,ct=r,be=s,jt=i,Vn(c),Mt=l,mn=f}}function Io(e,t){let n=t.reactions;if(n!==null){var r=Ri.call(n,e);if(r!==-1){var s=n.length-1;s===0?n=t.reactions=null:(n[r]=n[s],n.pop())}}n===null&&(t.f&je)!==0&&(We===null||!We.includes(t))&&(Be(t,yt),(t.f&bt)!==0&&(t.f^=bt,t.f&=~kn),ja(t),jr(t,0))}function jr(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)Io(e,n[r])}function Kn(e){var t=e.f;if((t&Ut)===0){Be(e,Ue);var n=Ee,r=gn;Ee=e,gn=!0;try{(t&(Pt|Oi))!==0?zo(e):ei(e),Ja(e);var s=ui(e);e.teardown=typeof s=="function"?s:null,e.wv=oi;var i;ms&&uo&&(e.f&Je)!==0&&e.deps}finally{gn=r,Ee=n}}}async function hr(){await Promise.resolve(),ho()}function a(e){var t=e.f,n=(t&je)!==0;if(be!==null&&!Mt){var r=Ee!==null&&(Ee.f&Ut)!==0;if(!r&&!jt?.includes(e)){var s=be.deps;if((be.f&ws)!==0)e.rv<vr&&(e.rv=vr,We===null&&s!==null&&s[rt]===e?rt++:We===null?We=[e]:We.includes(e)||We.push(e));else{(be.deps??=[]).push(e);var i=e.reactions;i===null?e.reactions=[be]:i.includes(be)||i.push(be)}}}if(Pn){if(Zt.has(e))return Zt.get(e);if(n){var c=e,l=c.v;return((c.f&Ue)===0&&c.reactions!==null||di(c))&&(l=Bs(c)),Zt.set(c,l),l}}else n&&(!vt?.has(e)||Te?.is_fork&&!dr())&&(c=e,nr(c)&&qa(c),gn&&dr()&&(c.f&bt)===0&&fi(c));if(vt?.has(e))return vt.get(e);if((e.f&Gt)!==0)throw e.v;return e.v}function fi(e){if(e.deps!==null){e.f^=bt;for(const t of e.deps)(t.reactions??=[]).push(e),(t.f&je)!==0&&(t.f&bt)===0&&fi(t)}}function di(e){if(e.v===He)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(Zt.has(t)||(t.f&je)!==0&&di(t))return!0;return!1}function S(e){var t=Mt;try{return Mt=!0,e()}finally{Mt=t}}const No=-7169;function Be(e,t){e.f=e.f&No|t}function K(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(pn in e)Es(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&pn in n&&Es(n)}}}function Es(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let r in e)try{Es(e[r],t)}catch{}const n=Os(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=$a(n);for(let s in r){const i=r[s].get;if(i)try{i.call(e)}catch{}}}}}const Oo=["touchstart","touchmove"];function Do(e){return Oo.includes(e)}const Fo=new Set,ia=new Set;function Uo(e,t,n,r={}){function s(i){if(r.capture||or.call(t,i),!i.cancelBubble)return tr(()=>n?.call(this,i))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?$n(()=>{t.addEventListener(e,s,r)}):t.addEventListener(e,s,r),s}function D(e,t,n,r,s){var i={capture:r,passive:s},c=Uo(e,t,n,i);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&js(()=>{t.removeEventListener(e,c,i)})}let oa=null;function or(e){var t=this,n=t.ownerDocument,r=e.type,s=e.composedPath?.()||[],i=s[0]||e.target;oa=e;var c=0,l=oa===e&&e.__root;if(l){var f=s.indexOf(l);if(f!==-1&&(t===document||t===window)){e.__root=t;return}var o=s.indexOf(t);if(o===-1)return;f<=o&&(c=f)}if(i=s[c]||e.target,i!==t){Aa(e,"currentTarget",{configurable:!0,get(){return i||n}});var u=be,v=Ee;Ge(null),Tt(null);try{for(var d,h=[];i!==null;){var w=i.assignedSlot||i.parentNode||i.host||null;try{var y=i["__"+r];y!=null&&(!i.disabled||e.target===i)&&y.call(i,e)}catch(_){d?h.push(_):d=_}if(e.cancelBubble||w===t||w===null)break;i=w}if(d){for(let _ of h)queueMicrotask(()=>{throw _});throw d}}finally{e.__root=t,delete e.currentTarget,Ge(u),Tt(v)}}}function vi(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function pr(e,t){var n=Ee;n.nodes===null&&(n.nodes={start:e,end:t,a:null,t:null})}function A(e,t){var n=(t&io)!==0,r=(t&oo)!==0,s,i=!e.startsWith("<!>");return()=>{s===void 0&&(s=vi(i?e:"<!>"+e),n||(s=Xt(s)));var c=r||Va?document.importNode(s,!0):s.cloneNode(!0);if(n){var l=Xt(c),f=c.lastChild;pr(l,f)}else pr(c,c);return c}}function In(e=""){{var t=Bt(e+"");return pr(t,t),t}}function Le(){var e=document.createDocumentFragment(),t=document.createComment(""),n=Bt();return e.append(t,n),pr(t,n),e}function b(e,t){e!==null&&e.before(t)}let xs=!0;function de(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??=e.nodeValue)&&(e.__t=n,e.nodeValue=n+"")}function Bo(e,t){return jo(e,t)}const Nn=new Map;function jo(e,{target:t,anchor:n,props:r={},events:s,context:i,intro:c=!0}){Mo();var l=new Set,f=v=>{for(var d=0;d<v.length;d++){var h=v[d];if(!l.has(h)){l.add(h);var w=Do(h);t.addEventListener(h,or,{passive:w});var y=Nn.get(h);y===void 0?(document.addEventListener(h,or,{passive:w}),Nn.set(h,1)):Nn.set(h,y+1)}}};f(Qr(Fo)),ia.add(f);var o=void 0,u=Co(()=>{var v=n??t.appendChild(Bt());return mo(v,{pending:()=>{}},d=>{if(i){et({});var h=Ce;h.c=i}s&&(r.$$events=s),xs=c,o=e(d,r)||{},xs=!0,i&&tt()}),()=>{for(var d of l){t.removeEventListener(d,or);var h=Nn.get(d);--h===0?(document.removeEventListener(d,or),Nn.delete(d)):Nn.set(d,h)}ia.delete(f),v!==n&&v.parentNode?.removeChild(v)}});return qo.set(o,u),o}let qo=new WeakMap;class Ho{anchor;#e=new Map;#t=new Map;#r=new Map;#n=new Set;#l=!0;constructor(t,n=!0){this.anchor=t,this.#l=n}#a=()=>{var t=Te;if(this.#e.has(t)){var n=this.#e.get(t),r=this.#t.get(n);if(r)Hs(r),this.#n.delete(n);else{var s=this.#r.get(n);s&&(this.#t.set(n,s.effect),this.#r.delete(n),s.fragment.lastChild.remove(),this.anchor.before(s.fragment),r=s.effect)}for(const[i,c]of this.#e){if(this.#e.delete(i),i===t)break;const l=this.#r.get(c);l&&(Ze(l.effect),this.#r.delete(c))}for(const[i,c]of this.#t){if(i===n||this.#n.has(i))continue;const l=()=>{if(Array.from(this.#e.values()).includes(i)){var o=document.createDocumentFragment();ai(c,o),o.append(Bt()),this.#r.set(i,{effect:c,fragment:o})}else Ze(c);this.#n.delete(i),this.#t.delete(i)};this.#l||!r?(this.#n.add(i),_n(c,l,!1)):l()}}};#s=t=>{this.#e.delete(t);const n=Array.from(this.#e.values());for(const[r,s]of this.#r)n.includes(r)||(Ze(s.effect),this.#r.delete(r))};ensure(t,n){var r=Te,s=Ka();if(n&&!this.#t.has(t)&&!this.#r.has(t))if(s){var i=document.createDocumentFragment(),c=Bt();i.append(c),this.#r.set(t,{effect:dt(()=>n(c)),fragment:i})}else this.#t.set(t,dt(()=>n(this.anchor)));if(this.#e.set(r,t),s){for(const[l,f]of this.#t)l===t?r.skipped_effects.delete(f):r.skipped_effects.add(f);for(const[l,f]of this.#r)l===t?r.skipped_effects.delete(f.effect):r.skipped_effects.add(f.effect);r.oncommit(this.#a),r.ondiscard(this.#s)}else this.#a()}}function J(e,t,n=!1){var r=new Ho(e),s=n?yn:0;function i(c,l){r.ensure(c,l)}qs(()=>{var c=!1;t((l,f=!0)=>{c=!0,i(f,l)}),c||i(!1,null)},s)}function Mn(e,t){return t}function Yo(e,t,n){for(var r=[],s=t.length,i,c=t.length,l=0;l<s;l++){let v=t[l];_n(v,()=>{if(i){if(i.pending.delete(v),i.done.add(v),i.pending.size===0){var d=e.outrogroups;Ms(Qr(i.done)),d.delete(i),d.size===0&&(e.outrogroups=null)}}else c-=1},!1)}if(c===0){var f=r.length===0&&n!==null;if(f){var o=n,u=o.parentNode;To(u),u.append(o),e.items.clear()}Ms(t,!f)}else i={pending:new Set(t),done:new Set},(e.outrogroups??=new Set).add(i)}function Ms(e,t=!0){for(var n=0;n<e.length;n++)Ze(e[n],t)}var la;function St(e,t,n,r,s,i=null){var c=e,l=new Map,f=(t&za)!==0;if(f){var o=e;c=o.appendChild(Bt())}var u=null,v=Oe(()=>{var k=n();return Wr(k)?k:k==null?[]:Qr(k)}),d,h=!0;function w(){_.fallback=u,Vo(_,d,c,t,r),u!==null&&(d.length===0?(u.f&Dt)===0?Hs(u):(u.f^=Dt,lr(u,null,c)):_n(u,()=>{u=null}))}var y=qs(()=>{d=a(v);for(var k=d.length,L=new Set,N=Te,H=Ka(),O=0;O<k;O+=1){var Q=d[O],ae=r(Q,O),M=h?null:l.get(ae);M?(M.v&&Qn(M.v,Q),M.i&&Qn(M.i,O),H&&N.skipped_effects.delete(M.e)):(M=Wo(l,h?c:la??=Bt(),Q,ae,O,s,t,n),h||(M.e.f|=Dt),l.set(ae,M)),L.add(ae)}if(k===0&&i&&!u&&(h?u=dt(()=>i(c)):(u=dt(()=>i(la??=Bt())),u.f|=Dt)),!h)if(H){for(const[m,B]of l)L.has(m)||N.skipped_effects.add(B.e);N.oncommit(w),N.ondiscard(()=>{})}else w();a(v)}),_={effect:y,items:l,outrogroups:null,fallback:u};h=!1}function Vo(e,t,n,r,s){var i=(r&Zi)!==0,c=t.length,l=e.items,f=e.effect.first,o,u=null,v,d=[],h=[],w,y,_,k;if(i)for(k=0;k<c;k+=1)w=t[k],y=s(w,k),_=l.get(y).e,(_.f&Dt)===0&&(_.nodes?.a?.measure(),(v??=new Set).add(_));for(k=0;k<c;k+=1){if(w=t[k],y=s(w,k),_=l.get(y).e,e.outrogroups!==null)for(const B of e.outrogroups)B.pending.delete(_),B.done.delete(_);if((_.f&Dt)!==0)if(_.f^=Dt,_===f)lr(_,null,n);else{var L=u?u.next:f;_===e.effect.last&&(e.effect.last=_.prev),_.prev&&(_.prev.next=_.next),_.next&&(_.next.prev=_.prev),Kt(e,u,_),Kt(e,_,L),lr(_,L,n),u=_,d=[],h=[],f=u.next;continue}if((_.f&at)!==0&&(Hs(_),i&&(_.nodes?.a?.unfix(),(v??=new Set).delete(_))),_!==f){if(o!==void 0&&o.has(_)){if(d.length<h.length){var N=h[0],H;u=N.prev;var O=d[0],Q=d[d.length-1];for(H=0;H<d.length;H+=1)lr(d[H],N,n);for(H=0;H<h.length;H+=1)o.delete(h[H]);Kt(e,O.prev,Q.next),Kt(e,u,O),Kt(e,Q,N),f=N,u=Q,k-=1,d=[],h=[]}else o.delete(_),lr(_,f,n),Kt(e,_.prev,_.next),Kt(e,_,u===null?e.effect.first:u.next),Kt(e,u,_),u=_;continue}for(d=[],h=[];f!==null&&f!==_;)(o??=new Set).add(f),h.push(f),f=f.next;if(f===null)continue}(_.f&Dt)===0&&d.push(_),u=_,f=_.next}if(e.outrogroups!==null){for(const B of e.outrogroups)B.pending.size===0&&(Ms(Qr(B.done)),e.outrogroups?.delete(B));e.outrogroups.size===0&&(e.outrogroups=null)}if(f!==null||o!==void 0){var ae=[];if(o!==void 0)for(_ of o)(_.f&at)===0&&ae.push(_);for(;f!==null;)(f.f&at)===0&&f!==e.fallback&&ae.push(f),f=f.next;var M=ae.length;if(M>0){var m=(r&za)!==0&&c===0?n:null;if(i){for(k=0;k<M;k+=1)ae[k].nodes?.a?.measure();for(k=0;k<M;k+=1)ae[k].nodes?.a?.fix()}Yo(e,ae,m)}}i&&$n(()=>{if(v!==void 0)for(_ of v)_.nodes?.a?.apply()})}function Wo(e,t,n,r,s,i,c,l){var f=(c&Xi)!==0?(c&Ji)===0?R(n,!1,!1):xn(n):null,o=(c&Gi)!==0?xn(s):null;return{v:f,i:o,e:dt(()=>(i(t,f??n,o??s,l),()=>{e.delete(r)}))}}function lr(e,t,n){if(e.nodes)for(var r=e.nodes.start,s=e.nodes.end,i=t&&(t.f&Dt)===0?t.nodes.start:n;r!==null;){var c=kr(r);if(i.before(r),r===s)return;r=c}}function Kt(e,t,n){t===null?e.effect.first=n:t.next=n,n===null?e.effect.last=t:n.prev=t}function ie(e,t,n=!1,r=!1,s=!1){var i=e,c="";ve(()=>{var l=Ee;if(c!==(c=t()??"")&&(l.nodes!==null&&(ti(l.nodes.start,l.nodes.end),l.nodes=null),c!=="")){var f=c+"";n?f=`<svg>${f}</svg>`:r&&(f=`<math>${f}</math>`);var o=vi(f);if((n||r)&&(o=Xt(o)),pr(Xt(o),o.lastChild),n||r)for(;Xt(o);)i.before(Xt(o));else i.before(o)}})}function Ir(e,t,n,r,s){var i=t.$$slots?.[n],c=!1;i===!0&&(i=t[n==="default"?"children":n],c=!0),i===void 0||i(e,c?()=>r:r)}const Qo=()=>performance.now(),Nt={tick:e=>requestAnimationFrame(e),now:()=>Qo(),tasks:new Set};function hi(){const e=Nt.now();Nt.tasks.forEach(t=>{t.c(e)||(Nt.tasks.delete(t),t.f())}),Nt.tasks.size!==0&&Nt.tick(hi)}function Ko(e){let t;return Nt.tasks.size===0&&Nt.tick(hi),{promise:new Promise(n=>{Nt.tasks.add(t={c:e,f:n})}),abort(){Nt.tasks.delete(t)}}}function Pr(e,t){tr(()=>{e.dispatchEvent(new CustomEvent(t))})}function Xo(e){if(e==="float")return"cssFloat";if(e==="offset")return"cssOffset";if(e.startsWith("--"))return e;const t=e.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(n=>n[0].toUpperCase()+n.slice(1)).join("")}function ca(e){const t={},n=e.split(";");for(const r of n){const[s,i]=r.split(":");if(!s||i===void 0)break;const c=Xo(s.trim());t[c]=i.trim()}return t}const Go=e=>e;function en(e,t,n,r){var s=(e&ro)!==0,i=(e&so)!==0,c=s&&i,l=(e&ao)!==0,f=c?"both":s?"in":"out",o,u=t.inert,v=t.style.overflow,d,h;function w(){return tr(()=>o??=n()(t,r?.()??{},{direction:f}))}var y={is_global:l,in(){if(t.inert=u,!s){h?.abort(),h?.reset?.();return}i||d?.abort(),Pr(t,"introstart"),d=Ts(t,w(),h,1,()=>{Pr(t,"introend"),d?.abort(),d=o=void 0,t.style.overflow=v})},out(N){if(!i){N?.(),o=void 0;return}t.inert=!0,Pr(t,"outrostart"),h=Ts(t,w(),d,0,()=>{Pr(t,"outroend"),N?.()})},stop:()=>{d?.abort(),h?.abort()}},_=Ee;if((_.nodes.t??=[]).push(y),s&&xs){var k=l;if(!k){for(var L=_.parent;L&&(L.f&yn)!==0;)for(;(L=L.parent)&&(L.f&Pt)===0;);k=!L||(L.f&Gr)!==0}k&&Za(()=>{S(()=>y.in())})}}function Ts(e,t,n,r,s){var i=r===1;if(Ii(t)){var c,l=!1;return $n(()=>{if(!l){var _=t({direction:i?"in":"out"});c=Ts(e,_,n,r,s)}}),{abort:()=>{l=!0,c?.abort()},deactivate:()=>c.deactivate(),reset:()=>c.reset(),t:()=>c.t()}}if(n?.deactivate(),!t?.duration)return s(),{abort:st,deactivate:st,reset:st,t:()=>r};const{delay:f=0,css:o,tick:u,easing:v=Go}=t;var d=[];if(i&&n===void 0&&(u&&u(0,1),o)){var h=ca(o(0,1));d.push(h,h)}var w=()=>1-r,y=e.animate(d,{duration:f,fill:"forwards"});return y.onfinish=()=>{y.cancel();var _=n?.t()??1-r;n?.abort();var k=r-_,L=t.duration*Math.abs(k),N=[];if(L>0){var H=!1;if(o)for(var O=Math.ceil(L/16.666666666666668),Q=0;Q<=O;Q+=1){var ae=_+k*v(Q/O),M=ca(o(ae,1-ae));N.push(M),H||=M.overflow==="hidden"}H&&(e.style.overflow="hidden"),w=()=>{var m=y.currentTime;return _+k*v(m/L)},u&&Ko(()=>{if(y.playState!=="running")return!1;var m=w();return u(m,1-m),!0})}y=e.animate(N,{duration:L,fill:"forwards"}),y.onfinish=()=>{w=()=>r,u?.(r,1-r),s()}},{abort:()=>{y&&(y.cancel(),y.effect=null,y.onfinish=st)},deactivate:()=>{s=st},reset:()=>{r===0&&u?.(1,0)},t:()=>w()}}const ua=[...` 	
\r\fÂ \v\uFEFF`];function Zo(e,t,n){var r=e==null?"":""+e;if(t&&(r=r?r+" "+t:t),n){for(var s in n)if(n[s])r=r?r+" "+s:s;else if(r.length)for(var i=s.length,c=0;(c=r.indexOf(s,c))>=0;){var l=c+i;(c===0||ua.includes(r[c-1]))&&(l===r.length||ua.includes(r[l]))?r=(c===0?"":r.substring(0,c))+r.substring(l+1):c=l}}return r===""?null:r}function fa(e,t=!1){var n=t?" !important;":";",r="";for(var s in e){var i=e[s];i!=null&&i!==""&&(r+=" "+s+": "+i+n)}return r}function cs(e){return e[0]!=="-"||e[1]!=="-"?e.toLowerCase():e}function Jo(e,t){if(t){var n="",r,s;if(Array.isArray(t)?(r=t[0],s=t[1]):r=t,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var i=!1,c=0,l=!1,f=[];r&&f.push(...Object.keys(r).map(cs)),s&&f.push(...Object.keys(s).map(cs));var o=0,u=-1;const y=e.length;for(var v=0;v<y;v++){var d=e[v];if(l?d==="/"&&e[v-1]==="*"&&(l=!1):i?i===d&&(i=!1):d==="/"&&e[v+1]==="*"?l=!0:d==='"'||d==="'"?i=d:d==="("?c++:d===")"&&c--,!l&&i===!1&&c===0){if(d===":"&&u===-1)u=v;else if(d===";"||v===y-1){if(u!==-1){var h=cs(e.substring(o,u).trim());if(!f.includes(h)){d!==";"&&v++;var w=e.substring(o,v).trim();n+=" "+w+";"}}o=v+1,u=-1}}}}return r&&(n+=fa(r)),s&&(n+=fa(s,!0)),n=n.trim(),n===""?null:n}return e==null?null:String(e)}function ze(e,t,n,r,s,i){var c=e.__className;if(c!==n||c===void 0){var l=Zo(n,r,i);l==null?e.removeAttribute("class"):e.className=l,e.__className=n}else if(i&&s!==i)for(var f in i){var o=!!i[f];(s==null||o!==!!s[f])&&e.classList.toggle(f,o)}return i}function us(e,t={},n,r){for(var s in n){var i=n[s];t[s]!==i&&(n[s]==null?e.style.removeProperty(s):e.style.setProperty(s,i,r))}}function Ne(e,t,n,r){var s=e.__style;if(s!==t){var i=Jo(t,r);i==null?e.removeAttribute("style"):e.style.cssText=i,e.__style=t}else r&&(Array.isArray(r)?(us(e,n?.[0],r[0]),us(e,n?.[1],r[1],"important")):us(e,n,r));return r}const el=Symbol("is custom element"),tl=Symbol("is html");function nl(e,t){var n=pi(e);n.value===(n.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!=="PROGRESS")||(e.value=t??"")}function At(e,t,n,r){var s=pi(e);s[t]!==(s[t]=n)&&(t==="loading"&&(e[Fi]=n),n==null?e.removeAttribute(t):typeof n!="string"&&rl(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function pi(e){return e.__attributes??={[el]:e.nodeName.includes("-"),[tl]:e.namespaceURI===lo}}var da=new Map;function rl(e){var t=e.getAttribute("is")||e.nodeName,n=da.get(t);if(n)return n;da.set(t,n=[]);for(var r,s=e,i=Element.prototype;i!==s;){r=$a(s);for(var c in r)r[c].set&&n.push(c);s=Os(s)}return n}function Ys(e,t,n=t){var r=new WeakSet;Ao(e,"input",async s=>{var i=s?e.defaultValue:e.value;if(i=fs(e)?ds(i):i,n(i),Te!==null&&r.add(Te),await hr(),i!==(i=t())){var c=e.selectionStart,l=e.selectionEnd,f=e.value.length;if(e.value=i??"",l!==null){var o=e.value.length;c===l&&l===f&&o>f?(e.selectionStart=o,e.selectionEnd=o):(e.selectionStart=c,e.selectionEnd=Math.min(l,o))}}}),S(t)==null&&e.value&&(n(fs(e)?ds(e.value):e.value),Te!==null&&r.add(Te)),Er(()=>{var s=t();if(e===document.activeElement){var i=Lr??Te;if(r.has(i))return}fs(e)&&s===ds(e.value)||e.type==="date"&&!s&&!e.value||s!==e.value&&(e.value=s??"")})}function fs(e){var t=e.type;return t==="number"||t==="range"}function ds(e){return e===""?null:+e}function va(e,t){return e===t||e?.[pn]===t}function Xn(e={},t,n,r){return Za(()=>{var s,i;return Er(()=>{s=i,i=[],S(()=>{e!==n(...i)&&(t(e,...i),s&&va(n(...s),e)&&t(null,...s))})}),()=>{$n(()=>{i&&va(n(...i),e)&&t(null,...i)})}}),e}function mt(e){return function(...t){var n=t[0];return n.stopPropagation(),e?.apply(this,t)}}function it(e=!1){const t=Ce,n=t.l.u;if(!n)return;let r=()=>K(t.s);if(e){let s=0,i={};const c=Jr(()=>{let l=!1;const f=t.s;for(const o in f)f[o]!==i[o]&&(i[o]=f[o],l=!0);return l&&s++,s});r=()=>a(c)}n.b.length&&Po(()=>{ha(t,r),Fr(n.b)}),ks(()=>{const s=S(()=>n.m.map(Ni));return()=>{for(const i of s)typeof i=="function"&&i()}}),n.a.length&&ks(()=>{ha(t,r),Fr(n.a)})}function ha(e,t){if(e.l.s)for(const n of e.l.s)a(n);t()}function Ss(e,t){var n=e.$$events?.[t.type],r=Wr(n)?n.slice():n==null?[]:[n];for(var s of r)s.call(this,t)}function Vs(e,t,n){if(e==null)return t(void 0),n&&n(void 0),st;const r=S(()=>e.subscribe(t,n));return r.unsubscribe?()=>r.unsubscribe():r}const On=[];function sl(e,t){return{subscribe:ke(e,t).subscribe}}function ke(e,t=st){let n=null;const r=new Set;function s(l){if(Ia(e,l)&&(e=l,n)){const f=!On.length;for(const o of r)o[1](),On.push(o,e);if(f){for(let o=0;o<On.length;o+=2)On[o][0](On[o+1]);On.length=0}}}function i(l){s(l(e))}function c(l,f=st){const o=[l,f];return r.add(o),r.size===1&&(n=t(s,i)||st),l(e),()=>{r.delete(o),r.size===0&&n&&(n(),n=null)}}return{set:s,update:i,subscribe:c}}function _i(e,t,n){const r=!Array.isArray(e),s=r?[e]:e;if(!s.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const i=t.length<2;return sl(n,(c,l)=>{let f=!1;const o=[];let u=0,v=st;const d=()=>{if(u)return;v();const w=t(r?o[0]:o,c,l);i?c(w):v=typeof w=="function"?w:st},h=s.map((w,y)=>Vs(w,_=>{o[y]=_,u&=~(1<<y),f&&d()},()=>{u|=1<<y}));return f=!0,d(),function(){Fr(h),v(),f=!1}})}function ge(e){let t;return Vs(e,n=>t=n)(),t}let Cr=!1,As=Symbol();function ue(e,t,n){const r=n[t]??={store:null,source:R(void 0),unsubscribe:st};if(r.store!==e&&!(As in n))if(r.unsubscribe(),r.store=e??null,e==null)r.source.v=void 0,r.unsubscribe=st;else{var s=!0;r.unsubscribe=Vs(e,i=>{s?r.source.v=i:g(r.source,i)}),s=!1}return e&&As in n?ge(e):a(r.source)}function kt(){const e={};function t(){js(()=>{for(var n in e)e[n].unsubscribe();Aa(e,As,{enumerable:!1,value:!0})})}return[e,t]}function al(e){var t=Cr;try{return Cr=!1,[e(),Cr]}finally{Cr=t}}function Fe(e,t,n,r){var s=!er||(n&eo)!==0,i=(n&no)!==0,c=r,l=!0,f=()=>(l&&(l=!1,c=r),c),o;{var u=pn in e||Di in e;o=Hn(e,t)?.set??(u&&t in e?L=>e[t]=L:void 0)}var v,d=!1;[v,d]=al(()=>e[t]),v===void 0&&r!==void 0&&(v=f(),o&&(s&&Yi(),o(v)));var h;if(s?h=()=>{var L=e[t];return L===void 0?f():(l=!0,L)}:h=()=>{var L=e[t];return L!==void 0&&(c=void 0),L===void 0?c:L},s&&(n&to)===0)return h;if(o){var w=e.$$legacy;return(function(L,N){return arguments.length>0?((!s||!N||w||d)&&o(N?h():L),L):h()})}var y=!1,_=Oe(()=>(y=!1,h()));a(_);var k=Ee;return(function(L,N){if(arguments.length>0){const H=N?a(_):s&&i?jn(L):L;return g(_,H),y=!0,c!==void 0&&(c=H),L}return Pn&&y||(k.f&Ut)!==0?_.v:a(_)})}function rr(e){Ce===null&&Us(),er&&Ce.l!==null?ll(Ce).m.push(e):ks(()=>{const t=S(e);if(typeof t=="function")return t})}function il(e){Ce===null&&Us(),rr(()=>()=>S(e))}function ol(e,t,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:r})}function Ws(){const e=Ce;return e===null&&Us(),(t,n,r)=>{const s=e.s.$$events?.[t];if(s){const i=Wr(s)?s.slice():[s],c=ol(t,n,r);for(const l of i)l.call(e.x,c);return!c.defaultPrevented}return!0}}function ll(e){var t=e.l;return t.u??={a:[],b:[],m:[]}}const cl="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(cl);fo();const ul=e=>e;function fl(e){const t=e-1;return t*t*t+1}function pa(e){const t=typeof e=="string"&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[e,"px"]}function Gn(e,{delay:t=0,duration:n=400,easing:r=ul}={}){const s=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:r,css:i=>`opacity: ${i*s}`}}function gi(e,{delay:t=0,duration:n=400,easing:r=fl,x:s=0,y:i=0,opacity:c=0}={}){const l=getComputedStyle(e),f=+l.opacity,o=l.transform==="none"?"":l.transform,u=f*(1-c),[v,d]=pa(s),[h,w]=pa(i);return{delay:t,duration:n,easing:r,css:(y,_)=>`
			transform: ${o} translate(${(1-y)*v}${d}, ${(1-y)*h}${w});
			opacity: ${f-u*_}`}}const dl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-arrows-shuffle-2"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 4l3 3l-3 3" /><path d="M18 20l3 -3l-3 -3" /><path d="M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5" /><path d="M3 17h3a5 5 0 0 0 5 -5a5 5 0 0 1 5 -5h5" /></svg>',vl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-deezer"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 16.5h2v.5h-2z" /><path d="M8 16.5h2.5v.5h-2.5z" /><path d="M16 17h-2.5v-.5h2.5z" /><path d="M21.5 17h-2.5v-.5h2.5z" /><path d="M21.5 13h-2.5v.5h2.5z" /><path d="M21.5 9.5h-2.5v.5h2.5z" /><path d="M21.5 6h-2.5v.5h2.5z" /><path d="M16 13h-2.5v.5h2.5z" /><path d="M8 13.5h2.5v-.5h-2.5z" /><path d="M8 9.5h2.5v.5h-2.5z" /></svg>',hl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-compact-down"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 11l8 3l8 -3" /></svg>',pl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-compact-left"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M13 20l-3 -8l3 -8" /></svg>',_l='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-left"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 6l-6 6l6 6" /></svg>',gl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-disc"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0" /><path d="M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M7 12a5 5 0 0 1 5 -5" /><path d="M12 17a5 5 0 0 0 5 -5" /></svg>',ml='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-grip-horizontal"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M5 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M12 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M12 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M19 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M19 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /></svg>',wl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-heart"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M19.5 12.572l-7.5 7.428l-7.5 -7.428a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572" /></svg>',bl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-heart"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6.979 3.074a6 6 0 0 1 4.988 1.425l.037 .033l.034 -.03a6 6 0 0 1 4.733 -1.44l.246 .036a6 6 0 0 1 3.364 10.008l-.18 .185l-.048 .041l-7.45 7.379a1 1 0 0 1 -1.313 .082l-.094 -.082l-7.493 -7.422a6 6 0 0 1 3.176 -10.215z" /></svg>',yl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-menu-2"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 6l16 0" /><path d="M4 12l16 0" /><path d="M4 18l16 0" /></svg>',_a='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-music"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 17a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /><path d="M13 17a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /><path d="M9 17v-13h10v13" /><path d="M9 8h10" /></svg>',kl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-pause"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z" /><path d="M17 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z" /></svg>',El='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-player-play"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 4v16l13 -8z" /></svg>',xl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-play"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 4v16a1 1 0 0 0 1.524 .852l13 -8a1 1 0 0 0 0 -1.704l-13 -8a1 1 0 0 0 -1.524 .852z" /></svg>',Ml='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-skip-back"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M19.496 4.136l-12 7a1 1 0 0 0 0 1.728l12 7a1 1 0 0 0 1.504 -.864v-14a1 1 0 0 0 -1.504 -.864z" /><path d="M4 4a1 1 0 0 1 .993 .883l.007 .117v14a1 1 0 0 1 -1.993 .117l-.007 -.117v-14a1 1 0 0 1 1 -1z" /></svg>',Tl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-skip-forward"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 5v14a1 1 0 0 0 1.504 .864l12 -7a1 1 0 0 0 0 -1.728l-12 -7a1 1 0 0 0 -1.504 .864z" /><path d="M20 4a1 1 0 0 1 .993 .883l.007 .117v14a1 1 0 0 1 -1.993 .117l-.007 -.117v-14a1 1 0 0 1 1 -1z" /></svg>',Sl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-playlist"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0" /><path d="M17 17v-13h4" /><path d="M13 5h-10" /><path d="M3 9l10 0" /><path d="M9 13h-6" /></svg>',Al='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-radio"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3l-9.371 3.749a1 1 0 0 0 -.629 .928v11.323a1 1 0 0 0 1 1h14a1 1 0 0 0 1 -1v-11a1 1 0 0 0 -1 -1h-14.5" /><path d="M4 12h16" /><path d="M7 12v-2" /><path d="M17 16v.01" /><path d="M13 16v.01" /></svg>',$l='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-refresh"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4" /><path d="M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4" /></svg>',Pl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-repeat"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 12v-3a3 3 0 0 1 3 -3h13m-3 -3l3 3l-3 3" /><path d="M20 12v3a3 3 0 0 1 -3 3h-13m3 3l-3 -3l3 -3" /></svg>',Cl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-search"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0" /><path d="M21 21l-6 -6" /></svg>',Rl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-settings"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z" /><path d="M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /></svg>',zl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-trash"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 7l16 0" /><path d="M10 11l0 6" /><path d="M14 11l0 6" /><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12" /><path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3" /></svg>',Ll='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 8a5 5 0 0 1 0 8" /><path d="M17.7 5a9 9 0 0 1 0 14" /><path d="M6 15h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l3.5 -4.5a.8 .8 0 0 1 1.5 .5v14a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5" /></svg>',Il='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume-2"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 8a5 5 0 0 1 0 8" /><path d="M6 15h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l3.5 -4.5a.8 .8 0 0 1 1.5 .5v14a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5" /></svg>',Nl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume-3"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 15h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l3.5 -4.5a.8 .8 0 0 1 1.5 .5v14a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5" /><path d="M16 10l4 4m0 -4l-4 4" /></svg>',Ol='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume-off"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 8a5 5 0 0 1 1.912 4.934m-1.377 2.602a5 5 0 0 1 -.535 .464" /><path d="M17.7 5a9 9 0 0 1 2.362 11.086m-1.676 2.299a9 9 0 0 1 -.686 .615" /><path d="M9.069 5.054l.431 -.554a.8 .8 0 0 1 1.5 .5v2m0 4v8a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l1.294 -1.664" /><path d="M3 3l18 18" /></svg>',Dl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-x"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 6l-12 12" /><path d="M6 6l12 12" /></svg>',Fl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-device-floppy"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2" /><path d="M12 14m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0" /><path d="M14 4l0 4l-6 0l0 -4" /></svg>',Ul='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-file-pencil"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3v4a1 1 0 0 0 1 1h4" /><path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z" /><path d="M10 18l5 -5a1.414 1.414 0 0 0 -2 -2l-5 5v2h2z" /></svg>',Bl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-plus"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 5l0 14" /><path d="M5 12l14 0" /></svg>',jl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-circle-check"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0" /><path d="M9 12l2 2l4 -4" /></svg>',E={ARTISTS:_a,ALBUMS:gl,GENRES:_a,PLAYLISTS:Sl,RADIO:Al,SEARCH:Cl,PLAY:xl,PLAY_OUTLINE:El,PAUSE:kl,PREVIOUS:Ml,NEXT:Tl,SHUFFLE:dl,REPEAT:Pl,VOLUME_FULL:Ll,VOLUME_MEDIUM:Il,VOLUME_MUTE:Nl,VOLUME_OFF:Ol,HEART:wl,HEART_FILLED:bl,SYNC:$l,SETTINGS:Rl,CLOSE:Dl,MENU:yl,BACK:_l,BACK_COMPACT:pl,CHEVRON_DOWN:hl,DRAG_HANDLE:ml,REMOVE:zl,DEEZER:vl,SAVE:Fl,EDIT:Ul,ADD:Bl,ACCEPT:jl},_r={DEFAULT_IP:typeof window<"u"?window.location.hostname:"localhost",get MOODE_IP(){try{return typeof localStorage<"u"?localStorage.getItem("moode_ip")||this.DEFAULT_IP:this.DEFAULT_IP}catch{return this.DEFAULT_IP}}};function Zn(e){if(!e||!e.image)return null;if(e.image.startsWith("http"))return e.image;let t="";return e.image==="local"?t=`${e.name}.jpg`:t=e.image,`/imagesw/radio-logos/thumbs/${encodeURIComponent(t)}`}function ql(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}function Hl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var vs={exports:{}},hs={exports:{}},ga;function Yl(){return ga||(ga=1,(function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t={rotl:function(n,r){return n<<r|n>>>32-r},rotr:function(n,r){return n<<32-r|n>>>r},endian:function(n){if(n.constructor==Number)return t.rotl(n,8)&16711935|t.rotl(n,24)&4278255360;for(var r=0;r<n.length;r++)n[r]=t.endian(n[r]);return n},randomBytes:function(n){for(var r=[];n>0;n--)r.push(Math.floor(Math.random()*256));return r},bytesToWords:function(n){for(var r=[],s=0,i=0;s<n.length;s++,i+=8)r[i>>>5]|=n[s]<<24-i%32;return r},wordsToBytes:function(n){for(var r=[],s=0;s<n.length*32;s+=8)r.push(n[s>>>5]>>>24-s%32&255);return r},bytesToHex:function(n){for(var r=[],s=0;s<n.length;s++)r.push((n[s]>>>4).toString(16)),r.push((n[s]&15).toString(16));return r.join("")},hexToBytes:function(n){for(var r=[],s=0;s<n.length;s+=2)r.push(parseInt(n.substr(s,2),16));return r},bytesToBase64:function(n){for(var r=[],s=0;s<n.length;s+=3)for(var i=n[s]<<16|n[s+1]<<8|n[s+2],c=0;c<4;c++)s*8+c*6<=n.length*8?r.push(e.charAt(i>>>6*(3-c)&63)):r.push("=");return r.join("")},base64ToBytes:function(n){n=n.replace(/[^A-Z0-9+\/]/ig,"");for(var r=[],s=0,i=0;s<n.length;i=++s%4)i!=0&&r.push((e.indexOf(n.charAt(s-1))&Math.pow(2,-2*i+8)-1)<<i*2|e.indexOf(n.charAt(s))>>>6-i*2);return r}};hs.exports=t})()),hs.exports}var ps,ma;function wa(){if(ma)return ps;ma=1;var e={utf8:{stringToBytes:function(t){return e.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(e.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var n=[],r=0;r<t.length;r++)n.push(t.charCodeAt(r)&255);return n},bytesToString:function(t){for(var n=[],r=0;r<t.length;r++)n.push(String.fromCharCode(t[r]));return n.join("")}}};return ps=e,ps}var _s,ba;function Vl(){if(ba)return _s;ba=1,_s=function(n){return n!=null&&(e(n)||t(n)||!!n._isBuffer)};function e(n){return!!n.constructor&&typeof n.constructor.isBuffer=="function"&&n.constructor.isBuffer(n)}function t(n){return typeof n.readFloatLE=="function"&&typeof n.slice=="function"&&e(n.slice(0,0))}return _s}var ya;function Wl(){return ya||(ya=1,(function(){var e=Yl(),t=wa().utf8,n=Vl(),r=wa().bin,s=function(i,c){i.constructor==String?c&&c.encoding==="binary"?i=r.stringToBytes(i):i=t.stringToBytes(i):n(i)?i=Array.prototype.slice.call(i,0):!Array.isArray(i)&&i.constructor!==Uint8Array&&(i=i.toString());for(var l=e.bytesToWords(i),f=i.length*8,o=1732584193,u=-271733879,v=-1732584194,d=271733878,h=0;h<l.length;h++)l[h]=(l[h]<<8|l[h]>>>24)&16711935|(l[h]<<24|l[h]>>>8)&4278255360;l[f>>>5]|=128<<f%32,l[(f+64>>>9<<4)+14]=f;for(var w=s._ff,y=s._gg,_=s._hh,k=s._ii,h=0;h<l.length;h+=16){var L=o,N=u,H=v,O=d;o=w(o,u,v,d,l[h+0],7,-680876936),d=w(d,o,u,v,l[h+1],12,-389564586),v=w(v,d,o,u,l[h+2],17,606105819),u=w(u,v,d,o,l[h+3],22,-1044525330),o=w(o,u,v,d,l[h+4],7,-176418897),d=w(d,o,u,v,l[h+5],12,1200080426),v=w(v,d,o,u,l[h+6],17,-1473231341),u=w(u,v,d,o,l[h+7],22,-45705983),o=w(o,u,v,d,l[h+8],7,1770035416),d=w(d,o,u,v,l[h+9],12,-1958414417),v=w(v,d,o,u,l[h+10],17,-42063),u=w(u,v,d,o,l[h+11],22,-1990404162),o=w(o,u,v,d,l[h+12],7,1804603682),d=w(d,o,u,v,l[h+13],12,-40341101),v=w(v,d,o,u,l[h+14],17,-1502002290),u=w(u,v,d,o,l[h+15],22,1236535329),o=y(o,u,v,d,l[h+1],5,-165796510),d=y(d,o,u,v,l[h+6],9,-1069501632),v=y(v,d,o,u,l[h+11],14,643717713),u=y(u,v,d,o,l[h+0],20,-373897302),o=y(o,u,v,d,l[h+5],5,-701558691),d=y(d,o,u,v,l[h+10],9,38016083),v=y(v,d,o,u,l[h+15],14,-660478335),u=y(u,v,d,o,l[h+4],20,-405537848),o=y(o,u,v,d,l[h+9],5,568446438),d=y(d,o,u,v,l[h+14],9,-1019803690),v=y(v,d,o,u,l[h+3],14,-187363961),u=y(u,v,d,o,l[h+8],20,1163531501),o=y(o,u,v,d,l[h+13],5,-1444681467),d=y(d,o,u,v,l[h+2],9,-51403784),v=y(v,d,o,u,l[h+7],14,1735328473),u=y(u,v,d,o,l[h+12],20,-1926607734),o=_(o,u,v,d,l[h+5],4,-378558),d=_(d,o,u,v,l[h+8],11,-2022574463),v=_(v,d,o,u,l[h+11],16,1839030562),u=_(u,v,d,o,l[h+14],23,-35309556),o=_(o,u,v,d,l[h+1],4,-1530992060),d=_(d,o,u,v,l[h+4],11,1272893353),v=_(v,d,o,u,l[h+7],16,-155497632),u=_(u,v,d,o,l[h+10],23,-1094730640),o=_(o,u,v,d,l[h+13],4,681279174),d=_(d,o,u,v,l[h+0],11,-358537222),v=_(v,d,o,u,l[h+3],16,-722521979),u=_(u,v,d,o,l[h+6],23,76029189),o=_(o,u,v,d,l[h+9],4,-640364487),d=_(d,o,u,v,l[h+12],11,-421815835),v=_(v,d,o,u,l[h+15],16,530742520),u=_(u,v,d,o,l[h+2],23,-995338651),o=k(o,u,v,d,l[h+0],6,-198630844),d=k(d,o,u,v,l[h+7],10,1126891415),v=k(v,d,o,u,l[h+14],15,-1416354905),u=k(u,v,d,o,l[h+5],21,-57434055),o=k(o,u,v,d,l[h+12],6,1700485571),d=k(d,o,u,v,l[h+3],10,-1894986606),v=k(v,d,o,u,l[h+10],15,-1051523),u=k(u,v,d,o,l[h+1],21,-2054922799),o=k(o,u,v,d,l[h+8],6,1873313359),d=k(d,o,u,v,l[h+15],10,-30611744),v=k(v,d,o,u,l[h+6],15,-1560198380),u=k(u,v,d,o,l[h+13],21,1309151649),o=k(o,u,v,d,l[h+4],6,-145523070),d=k(d,o,u,v,l[h+11],10,-1120210379),v=k(v,d,o,u,l[h+2],15,718787259),u=k(u,v,d,o,l[h+9],21,-343485551),o=o+L>>>0,u=u+N>>>0,v=v+H>>>0,d=d+O>>>0}return e.endian([o,u,v,d])};s._ff=function(i,c,l,f,o,u,v){var d=i+(c&l|~c&f)+(o>>>0)+v;return(d<<u|d>>>32-u)+c},s._gg=function(i,c,l,f,o,u,v){var d=i+(c&f|l&~f)+(o>>>0)+v;return(d<<u|d>>>32-u)+c},s._hh=function(i,c,l,f,o,u,v){var d=i+(c^l^f)+(o>>>0)+v;return(d<<u|d>>>32-u)+c},s._ii=function(i,c,l,f,o,u,v){var d=i+(l^(c|~f))+(o>>>0)+v;return(d<<u|d>>>32-u)+c},s._blocksize=16,s._digestsize=16,vs.exports=function(i,c){if(i==null)throw new Error("Illegal argument "+i);var l=e.wordsToBytes(s(i,c));return c&&c.asBytes?l:c&&c.asString?r.bytesToString(l):e.bytesToHex(l)}})()),vs.exports}var Ql=Wl();const Kl=Hl(Ql),ka=ke("Disconnected"),$s=ke(null);let gs;function Me(e,t="info"){$s.set({text:e,type:t}),gs&&clearTimeout(gs),gs=setTimeout(()=>{$s.set(null)},3e3)}const Ye=ke({state:"stop",volume:50,elapsed:0,duration:0,random:!1,repeat:!1,bitrate:0,format:""}),$t=ke({title:"Not Playing",artist:"",album:"",file:"",stationName:null}),qr=ke(!1),Nr=ke(!1),Ps=ke(!1),Cs=ke(!1),ut=ke("library"),xr=ke(null),wt=ke(!1),nn=ke([]),mi=ke([]),Un=ke([]),vn=ke(new Set),Ie=ke(!1),gt=ke([{view:"root"}]),gr=ke([]),wi=ke(0),Hr=ke(""),bi=ke({});function Xl(e,t){bi.update(n=>({...n,[e]:t}))}function Gl(e){return ge(bi)[e]||0}let Rs=null,zs=null;function Zl(e){zs=e}function Yn(e,t=null){t&&(Rs=t),zs?zs(e,t):console.warn("Router callback not set!")}function Jl(){const e=Rs;return Rs=null,e}function ec(){window.history.back()}function Tn(e,t=[],n=null){if(!e||!e.file)return"/images/default_cover.png";if(yi(e.file)||e.genre==="Radio")return e.image?Zn(e):ki(e,t,n)||"/images/radio_placeholder.png";let r=e.file.startsWith("/")?e.file.slice(1):e.file;return`/coverart.php/${encodeURI(r)}`}function Yr(e,t=[],n=null){if(!e||!e.file)return"/images/default_icon.png";if(yi(e.file)||e.genre==="Radio")return e.image?Zn(e):ki(e,t,n)||"/images/radio_icon.png";if(e.cachedThumbUrl)return e.cachedThumbUrl;try{const r=e.file.lastIndexOf("/"),s=r===-1?".":e.file.substring(0,r);return`/imagesw/thmcache/${Kl(s)}_sm.jpg`}catch{let s=e.file.startsWith("/")?e.file.slice(1):e.file;return`/coverart.php/${encodeURI(s)}`}}function yi(e){return e?e.startsWith("http")||e.includes("://")||e.includes("RADIO"):!1}function ki(e,t,n){const r=f=>(f||"").toString().toLowerCase().replace(/[^a-z0-9]/g,""),s=r(e.title),i=r(e.stationName),c=r(n);if(t&&t.length>0){const f=t.find(o=>{const u=r(o.name);return u?u===i||u===c||s&&u===s||s&&s.includes(u)&&u.length>3:!1});if(f)return Zn(f)}const l=e.stationName||n;return l?Zn({name:l,image:"local"}):null}_i([$t,nn,xr],([e,t,n])=>Tn(e,t,n));_i($t,e=>!e||!e.file||e.file.startsWith("http")?null:`/coverart.php/${encodeURI(e.file)}`);const Re={NAME:"MoodePlayerDB",STORE_NAME:"music",VERSION:2},tc={SYNC:"/wave-api.php",STATIONS:e=>"/wave-api.php?action=stations",COVER_ART:e=>`/coverart.php?u=${encodeURIComponent(e)}`,RADIO_LOGOS:e=>`/imagesw/radio-logos/thumbs/${e}`},qn={open(){return new Promise((e,t)=>{const n=indexedDB.open(Re.NAME,Re.VERSION);n.onupgradeneeded=r=>{const s=r.target.result,i=r.target.transaction;let c;s.objectStoreNames.contains(Re.STORE_NAME)?c=i.objectStore(Re.STORE_NAME):c=s.createObjectStore(Re.STORE_NAME,{keyPath:"file"}),c.indexNames.contains("artist")||c.createIndex("artist","artist",{unique:!1}),c.indexNames.contains("album")||c.createIndex("album","album",{unique:!1}),c.indexNames.contains("genre")||c.createIndex("genre","genre",{unique:!1}),c.indexNames.contains("album_artist")||c.createIndex("album_artist","album_artist",{unique:!1})},n.onsuccess=()=>e(n.result),n.onerror=()=>t(n.error)})},async clear(){const e=await this.open();return new Promise((t,n)=>{const r=e.transaction(Re.STORE_NAME,"readwrite");r.objectStore(Re.STORE_NAME).clear(),r.oncomplete=()=>t(),r.onerror=()=>n(r.error)})},async bulkAdd(e){const t=await this.open();return new Promise((n,r)=>{const s=t.transaction(Re.STORE_NAME,"readwrite"),i=s.objectStore(Re.STORE_NAME);e.forEach(c=>{i.put(c)}),s.oncomplete=()=>n(),s.onerror=()=>r(s.error)})},async getArtists(){const e=await this.open();return new Promise((t,n)=>{const s=e.transaction(Re.STORE_NAME,"readonly").objectStore(Re.STORE_NAME),i=new Map,c=s.openCursor();c.onsuccess=l=>{const f=l.target.result;if(f){const o=f.value,u=o.album_artist||o.artist;u&&!i.has(u)&&i.set(u,{name:u,file:o.file,cachedThumbUrl:o.cachedThumbUrl}),f.continue()}else{const o=Array.from(i.values()).sort((u,v)=>u.name.localeCompare(v.name,void 0,{sensitivity:"base"}));t(o)}},c.onerror=()=>n(c.error)})},async getAlbums(){const e=await this.open();return new Promise((t,n)=>{const s=e.transaction(Re.STORE_NAME,"readonly").objectStore(Re.STORE_NAME).index("album"),i=[],c=s.openCursor(null,"nextunique");c.onsuccess=l=>{const f=l.target.result;if(f){const o=f.value;i.push({name:o.album,artist:o.album_artist||o.artist,file:o.file,cachedThumbUrl:o.cachedThumbUrl}),f.continue()}else t(i)},c.onerror=()=>n(c.error)})},async getArtistAlbums(e){if(!e)return[];const t=await this.open();return new Promise((n,r)=>{const i=t.transaction(Re.STORE_NAME,"readonly").objectStore(Re.STORE_NAME),c=new Promise(f=>{i.indexNames.contains("album_artist")?i.index("album_artist").getAll(IDBKeyRange.only(e)).onsuccess=o=>f(o.target.result):f([])}),l=new Promise(f=>{i.index("artist").getAll(IDBKeyRange.only(e)).onsuccess=o=>f(o.target.result)});Promise.all([c,l]).then(([f,o])=>{const u=[...f,...o],v=[],d=new Set;u.forEach(h=>{d.has(h.album)||(d.add(h.album),v.push({name:h.album,artist:h.album_artist||h.artist,file:h.file,cachedThumbUrl:h.cachedThumbUrl}))}),n(v)}).catch(f=>r(f))})},async getAlbumTracks(e){const t=await this.open();return new Promise((n,r)=>{const i=t.transaction(Re.STORE_NAME,"readonly").objectStore(Re.STORE_NAME).index("album"),c=IDBKeyRange.only(e),l=i.getAll(c);l.onsuccess=()=>{const f=l.result;f.sort((o,u)=>{const v=parseInt(o.disc||1),d=parseInt(u.disc||1);if(v!==d)return v-d;const h=parseInt(o.track||0),w=parseInt(u.track||0);return h-w}),n(f)},l.onerror=()=>r(l.error)})},async getGenres(){const e=await this.open();return new Promise((t,n)=>{const s=e.transaction(Re.STORE_NAME,"readonly").objectStore(Re.STORE_NAME).index("genre"),i=[],c=s.openKeyCursor(null,"nextunique");c.onsuccess=l=>{const f=l.target.result;f?(i.push(f.key),f.continue()):t(i)},c.onerror=()=>n(c.error)})},async getGenreTracks(e){const t=await this.open();return new Promise((n,r)=>{const c=t.transaction(Re.STORE_NAME,"readonly").objectStore(Re.STORE_NAME).index("genre").getAll(IDBKeyRange.only(e));c.onsuccess=()=>n(c.result),c.onerror=()=>r(c.error)})},async search(e){if(!e)return[];const t=e.toLowerCase(),n=await this.open();return new Promise((r,s)=>{const c=n.transaction(Re.STORE_NAME,"readonly").objectStore(Re.STORE_NAME),l=[],f=100,o=c.openCursor();o.onsuccess=u=>{const v=u.target.result;if(v){const d=v.value;if((d.title&&d.title.toLowerCase().includes(t)||d.artist&&d.artist.toLowerCase().includes(t)||d.album&&d.album.toLowerCase().includes(t)||d.album_artist&&d.album_artist.toLowerCase().includes(t))&&l.push(d),l.length>=f){r(l);return}v.continue()}else r(l)},o.onerror=()=>s(o.error)})}};var nc=A('<div class="skeleton svelte-tl058d"></div>');function tn(e,t){let n=Fe(t,"width",8,"100%"),r=Fe(t,"height",8,"20px"),s=Fe(t,"radius",8,"4px"),i=Fe(t,"style",8,"");var c=nc();ve(()=>Ne(c,`width: ${n()??""}; height: ${r()??""}; border-radius: ${s()??""}; ${i()??""}`)),b(e,c)}var rc=A('<div class="skel svelte-1b8que2"><!></div>'),sc=A('<img loading="lazy"/>'),ac=A('<div class="loader svelte-1b8que2"><!> <!> <!></div>');function Sn(e,t){et(t,!1);let n=Fe(t,"src",8),r=Fe(t,"alt",8,""),s=Fe(t,"radius",8,"0px");const i=Ws();let c=R("loading");function l(){g(c,"loaded")}function f(_){i("error",_),g(c,"error")}ee(()=>K(n()),()=>{n()?g(c,"loading"):g(c,"error")}),Ht(),it();var o=ac(),u=p(o);{var v=_=>{var k=rc(),L=p(k);tn(L,{width:"100%",height:"100%",get radius(){return s()}}),en(2,k,()=>Gn,()=>({duration:200})),b(_,k)};J(u,_=>{a(c)==="loading"&&_(v)})}var d=x(u,2);{var h=_=>{var k=sc();let L;ve(()=>{At(k,"src",n()),At(k,"alt",r()),Ne(k,`border-radius: ${s()??""}`),L=ze(k,1,"svelte-1b8que2",null,L,{vis:a(c)==="loaded"})}),D("load",k,l),D("error",k,f),b(_,k)};J(d,_=>{n()&&a(c)!=="error"&&_(h)})}var w=x(d,2);{var y=_=>{var k=Le(),L=$e(k);Ir(L,t,"fallback",{}),b(_,k)};J(w,_=>{a(c)==="error"&&_(y)})}ve(()=>Ne(o,`border-radius: ${s()??""}`)),b(e,o),tt()}class ic{constructor(){this.socket=null,this.queue=[],this.isProcessing=!1,this.reconnectTimer=null,this.watchdogTimer=null}get isConnected(){return this.socket&&this.socket.readyState===WebSocket.OPEN}connect(){if(this.socket&&(this.socket.readyState===WebSocket.CONNECTING||this.socket.readyState===WebSocket.OPEN))return;this.reconnectTimer&&clearTimeout(this.reconnectTimer);let t=_r.MOODE_IP||window.location.hostname;t=t.replace(/^https?:\/\//,"").split(":")[0].split("/")[0];const n=_r.WS_PORT||"8080",r=`ws://${t}:${n}`;console.log("[MPD] Attempting connection to:",r);try{this.socket=new WebSocket(r,["binary"])}catch(s){console.error("[MPD] WebSocket URL is still invalid:",r,s),this.reconnectTimer=setTimeout(()=>this.connect(),5e3);return}this.socket.onopen=()=>{console.log("[MPD] Connected"),ka.set("Connected"),Me("Connected to Moode","success"),this._processQueue()},this.socket.onmessage=s=>this._handleMessage(s),this.socket.onclose=s=>{console.warn("[MPD] Socket closed",s.code,s.reason),ka.set("Disconnected"),this._cleanup(),this.reconnectTimer=setTimeout(()=>this.connect(),3e3)},this.socket.onerror=s=>{console.error("[MPD] Socket error",s)}}send(t){return new Promise((n,r)=>{this.queue.push({cmd:t,resolve:n,reject:r}),this._processQueue()})}_cleanup(){for(this.isProcessing=!1,this.watchdogTimer&&clearTimeout(this.watchdogTimer);this.queue.length>0;){const{reject:t,cmd:n}=this.queue.shift();console.warn(`[MPD] Dropping cmd due to disconnect: ${n}`),t(new Error("Connection lost"))}}async _processQueue(){if(this.isProcessing||this.queue.length===0||!this.isConnected)return;this.isProcessing=!0;const{cmd:t}=this.queue[0];this.watchdogTimer&&clearTimeout(this.watchdogTimer),this.watchdogTimer=setTimeout(()=>{console.error("[MPD] Watchdog timeout for cmd:",t),this.socket&&this.socket.close()},5e3);try{const n=t.endsWith(`
`)?t:t+`
`;this.socket.send(new TextEncoder().encode(n))}catch(n){console.error("[MPD] Send error",n),this._cleanup()}}async _handleMessage(t){let n=t.data;n instanceof Blob&&(n=await n.text()),this.watchdogTimer&&(clearTimeout(this.watchdogTimer),this.watchdogTimer=null);const r=this.queue[0],s=n===`OK
`||n.endsWith(`
OK
`),i=n.startsWith("ACK");if(s||i){if(this.queue.shift(),this.isProcessing=!1,r)if(i)console.error(`[MPD] CMD: ${r.cmd} -> ERROR: ${n.trim()}`),r.reject(new Error(n.trim()));else{const c=n.replace(/\nOK\n$/,"").replace(/^OK\n$/,"");r.resolve(c)}this._processQueue()}else if(this._buffer||(this._buffer=""),this._buffer+=n,this._buffer.endsWith(`
OK
`)||this._buffer===`OK
`||this._buffer.startsWith("ACK")){const c=new MessageEvent("message",{data:this._buffer});this._buffer="",this._handleMessage(c)}}}const le=new ic,Ft={parseKeyValue(e){const t={};if(!e)return t;const n=e.split(`
`);for(const r of n){const s=r.indexOf(": ");if(s===-1)continue;const i=r.substring(0,s).toLowerCase(),c=r.substring(s+2);t[i]=c}return t},parseStatus(e){const t=this.parseKeyValue(e);let n="";if(t.audio){const r=t.audio.split(":");r[1]&&(n=`${r[1]}-bit`)}return{state:t.state||"stop",volume:parseInt(t.volume)||0,elapsed:parseFloat(t.elapsed)||0,duration:parseFloat(t.duration)||0,random:t.random==="1",repeat:t.repeat==="1",songId:parseInt(t.songid)||-1,playlistLength:parseInt(t.playlistlength)||0,bitrate:parseInt(t.bitrate)||0,format:n,playlistVersion:parseInt(t.playlist)||0}},parseCurrentSong(e){const t=this.parseKeyValue(e);return this._normalizeTrack(t)},parsePlaylists(e){const t=e.split(`
`),n=[];let r=null;for(const s of t)s.startsWith("playlist: ")?(r&&n.push(r),r={playlist:s.substring(10)}):s.startsWith("Last-Modified: ")&&r&&(r["last-modified"]=s.substring(15));return r&&n.push(r),n.map(s=>({name:s.playlist,lastModified:s["last-modified"]}))},parseTracks(e){const t=[];let n=null,r=0,s=e.indexOf(`
`,r);for(;s!==-1;){const i=e.substring(r,s),c=i.indexOf(": ");if(c!==-1){const l=i.substring(0,c).toLowerCase(),f=i.substring(c+2);l==="file"?(n&&t.push(this._normalizeTrack(n)),n={file:f}):n&&(n[l]=f)}r=s+1,s=e.indexOf(`
`,r)}return n&&t.push(this._normalizeTrack(n)),t},_normalizeTrack(e){const t=e.file||e.File||"",n=e.Title||e.title||e.Name||e.name||t.split("/").pop()||"Unknown";return{file:t,title:n,artist:e.Artist||e.artist||"Unknown Artist",album:e.Album||e.album||"Unknown Album",genre:e.Genre||e.genre||"Unknown",time:parseFloat(e.Time||e.time||0),track:e.Track||e.track||"",id:e.Id||e.id,stationName:e.name||e.Name||null}}},oc=1e3,lc=250;let Or=null,fr=null,Dr=0,fn=1,Vr=!0,Ot=!1,hn=0,Dn=null;function ar(e){return e?String(e).replace(/\\/g,"\\\\").replace(/"/g,'\\"'):""}function cc(){uc(),Vr=!0,Ot=!1,hn=0,Ie.set(!1),_t(),Or=setInterval(()=>{le.isConnected&&!le.isProcessing&&_t()},oc)}function uc(){Or&&(clearInterval(Or),Or=null),Qs()}async function _t(){try{const e=await le.send("status"),t=await le.send("currentsong"),n=Ft.parseStatus(e),r=Ft.parseCurrentSong(t);dc(n,r);const s=ge(wi);if(ge(Ie))return;(n.playlistLength>0&&n.playlistVersion!==s||n.playlistLength>0&&ge(gr).length===0)&&fc(n.playlistVersion)}catch(e){e.message!=="Connection lost"&&console.warn("[Player] Sync skip:",e.message)}}async function fc(e){if(!ge(Ie))try{const t=await le.send("playlistinfo");if(ge(Ie))return;const r=Ft.parseTracks(t).map(s=>({...s,_uid:String(s.id||s.pos+s.file)}));gr.set(r),wi.set(e)}catch(t){console.error("Queue sync error",t)}}function dc(e,t){const n=ge($t),r=ge(nn),s=t.file&&t.file.startsWith("http");if(s){const i=o=>(o||"").toString().toLowerCase().replace(/[^a-z0-9]/g,""),c=i(t.file),l=i(t.title),f=r.find(o=>{const u=i(o.station||o.file||o.url||(Array.isArray(o)?o[1]:"")),v=i(o.name||(Array.isArray(o)?o[0]:""));return u&&c.includes(u)||v&&l.includes(v)});f?t.stationName=f.name||f[0]:n.stationName&&n.file===t.file&&(t.stationName=n.stationName)}$t.set(t),Ye.update(i=>{const c=e.state==="play",l=performance.now();if(e.state==="pause"||i.state==="pause")return Rr(!1),l<hn?i:e;if(t.file!==n.file||Vr)return Vr=!1,Ot=!1,fn=1,s&&(e.elapsed=0),Rr(c&&!s),e;if(l<hn)return i;if(Ot)return Ot=!1,fn=1,Rr(c&&!s),e;if(c&&!s){const f=e.elapsed-i.elapsed;if(Math.abs(f)>2)return fn=1,e;if(Math.abs(f)<.05)fn=1;else{let u=f/1.5;fn=Math.max(.5,Math.min(1.5,1+u))}return{...e,elapsed:i.elapsed}}return Rr(!1),e})}function Rr(e){e?Ls():Qs()}function Ls(){fr||Vr||(Dr=performance.now(),fr=setInterval(()=>{const e=performance.now();let t=(e-Dr)/1e3;t>2&&(t=0),Dr=e,Ye.update(n=>{if(n.state!=="play")return n;let r=n.elapsed+t*fn;return n.duration>0&&r>n.duration&&(r=n.duration),{...n,elapsed:r}})},lc))}function Qs(){fr&&(clearInterval(fr),fr=null),fn=1,Dr=0}const Jt={async togglePlay(){const t=ge(Ye).state==="play";hn=performance.now()+800,Ye.update(n=>{const r=t?"pause":"play";return r==="play"?Ls():Qs(),{...n,state:r}}),await le.send(t?"pause 1":"play"),setTimeout(_t,900)},async next(){Ot=!0,hn=0,await le.send("next"),_t()},async previous(){Ot=!0,hn=0,Ye.update(e=>({...e,elapsed:0})),await le.send("previous"),_t()},async setVolume(e){Ye.update(t=>({...t,volume:e})),await le.send(`setvol ${e}`)},async seek(e){Ot=!0,hn=performance.now()+500,Ye.update(t=>({...t,elapsed:e})),await le.send(`seekcur ${e}`),setTimeout(_t,600)},async toggleRandom(){const t=!ge(Ye).random;Ye.update(n=>({...n,random:t})),await le.send(`random ${t?1:0}`)},async toggleRepeat(){const t=!ge(Ye).repeat;Ye.update(n=>({...n,repeat:t})),await le.send(`repeat ${t?1:0}`)},async playUri(e,t={}){Ie.set(!0);const n=ar(e);Ot=!0,Ye.update(r=>({...r,state:"play",elapsed:0})),$t.set({title:t.title||e.split("/").pop(),artist:t.artist||"",file:e}),Ls();try{await le.send("stop"),await le.send("clear"),await le.send(`add "${n}"`),await le.send("play")}catch(r){console.error("Play error",r),Me("Failed to play","error")}setTimeout(()=>{Ie.set(!1),_t()},1200)},async addToQueue(e){const t=ar(e);try{await le.send(`add "${t}"`),Me("Added to queue","success")}catch(n){console.error("Add queue error",n),Me("Failed to add","error")}},async playNext(e){Ie.set(!0);const t=ar(e);try{const n=await le.send("currentsong"),r=parseInt(Ft.parseKeyValue(n).pos||-1);if(r===-1)Ie.set(!1),await this.playUri(e);else{const s=await le.send(`addid "${t}"`),i=parseInt(Ft.parseKeyValue(s).id);isNaN(i)||(await le.send(`moveid ${i} ${r+1}`),Me("Will play next","success")),setTimeout(()=>Ie.set(!1),1e3)}}catch(n){console.error("Play Next error",n),Me("Failed to set next","error"),Ie.set(!1)}},async removeFromQueue(e){Ie.set(!0),Dn&&clearTimeout(Dn);try{gr.update(t=>{const n=[...t];return n.splice(e,1),n}),await le.send(`delete ${e}`)}catch{Me("Failed to remove","error"),Ie.set(!1);return}Dn=setTimeout(()=>{Ie.set(!1)},1e3)},async moveTrack(e,t){if(e!==t){Ie.set(!0),Dn&&clearTimeout(Dn);try{await le.send(`move ${e} ${t}`)}catch(n){console.error("Move failed",n),Me("Move failed","error"),Ie.set(!1),_t();return}Dn=setTimeout(()=>{Ie.set(!1),_t()},2e3)}},async playAllTracks(e){if(!(!e||e.length===0)){Ie.set(!0),Ot=!0;try{await le.send("stop"),await le.send("clear");for(const t of e){const n=ar(t.file);await le.send(`add "${n}"`)}await le.send("play 0"),Me(`Playing ${e.length} tracks`,"success")}catch(t){console.error("Play All error",t),Me("Failed to play all tracks","error")}setTimeout(()=>{Ie.set(!1),_t()},1500)}},async addAllToQueue(e){if(!(!e||e.length===0)){Ie.set(!0);try{for(const t of e){const n=ar(t.file);await le.send(`add "${n}"`)}Me(`Added ${e.length} tracks to queue`,"success")}catch(t){console.error("Add All error",t),Me("Failed to add tracks","error")}setTimeout(()=>{Ie.set(!1),_t()},1e3)}},async saveQueue(e){if(!e)return;const t=e.replace(/"/g,'\\"');try{await le.send(`save "${t}"`),Me(`Playlist "${e}" saved`,"success")}catch(n){if(n.message.includes("exist")){if(confirm(`Playlist "${e}" exists. Overwrite?`))try{await le.send(`rm "${t}"`),await le.send(`save "${t}"`),Me(`Playlist "${e}" overwritten`,"success")}catch{Me("Failed to overwrite","error")}}else console.error(n)}}};function Ei(e){return new Worker("/assets/sync.worker-Bw0aGZUp.js",{name:e?.name})}const ir="Favorites";let Ea=Promise.resolve();const Fn=e=>e?e.toLowerCase().replace(/^https?:\/\//,"").replace(/^www\./,"").split("?")[0].replace(/\/$/,""):"";function vc(e){if(e==="Favorites")return"linear-gradient(135deg, hsl(348, 95%, 58%), hsl(348, 90%, 40%))";let t=0;for(let r=0;r<e.length;r++)t=e.charCodeAt(r)+((t<<5)-t);const n=Math.abs(t%360);return`linear-gradient(135deg, hsl(${n}, 60%, 40%), hsl(${(n+40)%360}, 60%, 30%))`}const mr={async syncLibrary(){if(ge(wt))return;wt.set(!0);const e=new Ei;e.postMessage({type:"START_SYNC",payload:{url:`http://${_r.MOODE_IP}/wave-api.php`}}),e.onmessage=t=>{const{type:n,count:r}=t.data;n==="DONE"&&(Me(`Library updated: ${r} tracks`,"success"),wt.set(!1),e.terminate()),n==="ERROR"&&(Me("Sync Failed","error"),wt.set(!1),e.terminate())},e.onerror=()=>{wt.set(!1),e.terminate()}},async loadPlaylists(){Ps.set(!0);try{const e=await le.send("listplaylists"),n=Ft.parsePlaylists(e).map(r=>({...r,color:vc(r.name)}));mi.set(n)}catch(e){console.error(e)}finally{Ps.set(!1)}},async openPlaylistDetails(e){if(!e)return;Cs.set(!0);const t=e.replace(/"/g,'\\"');try{const n=await le.send(`listplaylistinfo "${t}"`),s=Ft.parseTracks(n).map(i=>({...i,_uid:ql()}));Un.set(s)}catch{Me("Could not load playlist","error")}finally{Cs.set(!1)}},async movePlaylistTrack(e,t,n){const r=e.replace(/"/g,'\\"');try{await le.send(`playlistmove "${r}" ${t} ${n}`)}catch{Me("Move failed","error")}},async removeFromPlaylist(e,t){const n=e.replace(/"/g,'\\"');try{await le.send(`playlistdelete "${n}" ${t}`),Me("Track removed","success")}catch{Me("Delete failed","error")}},async loadFavorites(){try{const e=await le.send(`listplaylistinfo "${ir}"`),t=Ft.parseTracks(e),n=new Set;t.forEach(r=>{r.file&&n.add(r.file)}),vn.set(n)}catch{vn.set(new Set)}},async toggleFavorite(e){if(!e||!e.file)return;const t=e.file,n=t.replace(/"/g,'\\"'),r=t.startsWith("http"),s=ge(vn);let i=s.has(t);if(!i&&r){const c=Fn(t);for(const l of s)if(Fn(l)===c){i=!0;break}}vn.update(c=>{const l=new Set(c);if(i){if(l.delete(t),r){const f=Fn(t);for(const o of l)Fn(o)===f&&l.delete(o)}}else l.add(t);return l}),Ea=Ea.then(async()=>{try{const c=await le.send(`listplaylistinfo "${ir}"`),l=Ft.parseTracks(c);let f=[];if(l.forEach((o,u)=>{let v=!1;(o.file===t||r&&Fn(o.file)===Fn(t)||r&&(o.file.includes(t)||t.includes(o.file)))&&(v=!0),v&&f.push(u)}),i){if(f.length>0){f.sort((o,u)=>u-o);for(const o of f)await le.send(`playlistdelete "${ir}" ${o}`);Me("Removed from Favorites","info")}}else f.length>0?console.log("[Fav] Track already exists. Skipping."):(await le.send(`playlistadd "${ir}" "${n}"`),l.length>0&&await le.send(`playlistmove "${ir}" ${l.length} 0`),Me("Added to Favorites","success"))}catch(c){console.error("Fav action failed",c),Me("Action failed","error")}finally{await this.loadFavorites()}})}};function xi(){le.connect(),cc(),mr.loadPlaylists(),mr.loadFavorites()}function Ks(e){return le.send(e)}const{togglePlay:es,toggleRandom:wn,toggleRepeat:bn,setVolume:wr,seek:Xs,addToQueue:Mi,playNext:hc,removeFromQueue:pc,moveTrack:_c,saveQueue:gc,playAllTracks:Ti,addAllToQueue:Si}=Jt,{syncLibrary:mc,loadRadioStations:wc,loadPlaylists:Gs,openPlaylistDetails:Ai,toggleFavorite:$i,loadFavorites:bc,removeFromPlaylist:Pi,movePlaylistTrack:Ci}=mr;function br(e){const t=ge($t),n=ge(nn),r=ge(xr);if(t.file&&t.file.startsWith("http")&&n.length>0&&(e==="next"||e==="previous")){let i=n.findIndex(l=>l.name===r);i===-1&&(i=0);let c;e==="next"?(c=i+1,c>=n.length&&(c=0)):(c=i-1,c<0&&(c=n.length-1)),Zs(n[c])}else e==="next"&&Jt.next(),e==="previous"&&Jt.previous()}function Zs(e){if(!e)return;xr.set(e.name);const t=e[1]||e.station||e.file||e.url;t&&Jt.playUri(t,{title:e.name,artist:e.genre||"Radio Stream",stationName:e.name})}function Js(e){e&&(xr.set(null),Jt.playUri(e.file,{title:e.title,artist:e.artist,album:e.album,stationName:null}))}async function Is(e,t=0){if(!e)return;xr.set(null);const n=e.replace(/"/g,'\\"');try{await le.send("stop"),await le.send("clear"),await le.send(`load "${n}"`),await le.send(`play ${t}`)}catch(r){console.error("Failed to play playlist context",r)}}const yc=Object.freeze(Object.defineProperty({__proto__:null,addAllToQueue:Si,addToQueue:Mi,connect:xi,loadFavorites:bc,loadPlaylists:Gs,loadRadioStations:wc,movePlaylistTrack:Ci,moveTrack:_c,nav:br,openPlaylistDetails:Ai,playAllTracks:Ti,playNext:hc,playPlaylistContext:Is,playStation:Zs,playTrackOptimistic:Js,removeFromPlaylist:Pi,removeFromQueue:pc,runMpdRequest:Ks,saveQueue:gc,seek:Xs,setVolume:wr,syncLibrary:mc,toggleFavorite:$i,togglePlay:es,toggleRandom:wn,toggleRepeat:bn},Symbol.toStringTag,{value:"Module"}));var kc=A('<div class="drag-handle svelte-5cs2hz" title="Drag to reorder"><div class="icon-small svelte-5cs2hz"><!></div></div>'),Ec=A('<div class="eq-anim svelte-5cs2hz"><span class="bar b1 svelte-5cs2hz"></span> <span class="bar b2 svelte-5cs2hz"></span> <span class="bar b3 svelte-5cs2hz"></span></div>'),xc=A('<div class="icon-small svelte-5cs2hz"><!></div>'),Mc=A('<div class="icon-small svelte-5cs2hz"><!></div>'),Tc=A('<div class="icon-small accent svelte-5cs2hz"><!></div>'),Sc=A('<span class="num svelte-5cs2hz"> </span>'),Ac=A('<button class="num-box svelte-5cs2hz"><!></button>'),$c=A('<div slot="fallback" class="icon-ph svelte-5cs2hz"><!></div>'),Pc=A('<button class="btn-icon small remove svelte-5cs2hz"><!></button>'),Cc=A('<div class="dur svelte-5cs2hz"> </div>'),Rc=A('<div role="button" tabindex="0"><div class="left svelte-5cs2hz"><!> <div class="thumb svelte-5cs2hz"><!></div></div> <div class="info svelte-5cs2hz"><div class="title text-ellipsis svelte-5cs2hz"> </div> <div> </div></div> <div class="right svelte-5cs2hz"><button class="btn-icon small add-queue svelte-5cs2hz" title="Add to queue"><!></button> <button><!></button> <!></div></div>');function ts(e,t){et(t,!1);const n=()=>ue(vn,"$favorites",c),r=()=>ue($t,"$currentSong",c),s=()=>ue(Ye,"$status",c),i=()=>ue(nn,"$stations",c),[c,l]=kt(),f=R(),o=R(),u=R(),v=R(),d=R(),h=R(),w=R(),y=R(),_=R(),k=R(),L=R(),N=R(),H=R();let O=Fe(t,"track",8),Q=Fe(t,"index",8),ae=Fe(t,"isEditable",8,!1);const M=Ws();let m=R(!1),B=R(!1);function j(fe){if(a(v))return"â";if(!fe)return"0:00";const ce=parseInt(fe,10),we=Math.floor(ce/60),Se=ce%60;return`${we}:${Se.toString().padStart(2,"0")}`}function z(fe){fe.stopPropagation(),a(o)?es():M("play")}ee(()=>K(O()),()=>{O()&&g(B,!1)}),ee(()=>(n(),K(O())),()=>{g(f,n().has(O().file))}),ee(()=>(K(O()),r()),()=>{g(o,O().file===r().file)}),ee(()=>s(),()=>{g(u,s().state==="play")}),ee(()=>K(O()),()=>{g(v,O().file&&(O().file.startsWith("http")||O().file.includes("RADIO")))}),ee(()=>(a(o),a(u),a(m)),()=>{g(d,a(o)&&a(u)&&a(m))}),ee(()=>(a(o),a(u),a(m)),()=>{g(h,a(o)&&!a(u)&&a(m)||!a(o)&&a(m))}),ee(()=>(a(o),a(u),a(m)),()=>{g(w,a(o)&&a(u)&&!a(m))}),ee(()=>(a(o),a(u),a(m)),()=>{g(y,a(o)&&!a(u)&&!a(m))}),ee(()=>K(O()),()=>{g(_,O().title||O().file?.split("/").pop())}),ee(()=>K(O()),()=>{g(k,O().artist||"Unknown")}),ee(()=>K(O()),()=>{g(L,j(O().time))}),ee(()=>(a(o),r()),()=>{g(N,a(o)?r().stationName:null)}),ee(()=>(a(B),K(O()),i(),a(N),Yr),()=>{g(H,a(B)?Tn(O(),i(),a(N)):Yr(O(),i(),a(N)))}),Ht(),it();var P=Rc();let $;var T=p(P),I=p(T);{var V=fe=>{var ce=kc(),we=p(ce),Se=p(we);ie(Se,()=>(K(E),S(()=>E.DRAG_HANDLE))),D("mousedown",ce,Ae=>M("startdrag",Ae)),D("touchstart",ce,Ae=>M("startdrag",Ae),void 0,!0),D("click",ce,mt(function(Ae){Ss.call(this,t,Ae)})),b(fe,ce)},Y=fe=>{var ce=Ac(),we=p(ce);{var Se=Ve=>{var De=Ec();b(Ve,De)},Ae=Ve=>{var De=Le(),Cn=$e(De);{var Yt=ht=>{var Et=xc(),rn=p(Et);ie(rn,()=>(K(E),S(()=>E.PAUSE))),b(ht,Et)},Vt=ht=>{var Et=Le(),rn=$e(Et);{var sn=nt=>{var ot=Mc(),an=p(ot);ie(an,()=>(K(E),S(()=>E.PLAY))),b(nt,ot)},Rn=nt=>{var ot=Le(),an=$e(ot);{var on=lt=>{var Rt=Tc(),zt=p(Rt);ie(zt,()=>(K(E),S(()=>E.PLAY))),b(lt,Rt)},ln=lt=>{var Rt=Sc(),zt=p(Rt);ve(()=>de(zt,Q()+1)),b(lt,Rt)};J(an,lt=>{a(y)?lt(on):lt(ln,!1)},!0)}b(nt,ot)};J(rn,nt=>{a(h)?nt(sn):nt(Rn,!1)},!0)}b(ht,Et)};J(Cn,ht=>{a(d)?ht(Yt):ht(Vt,!1)},!0)}b(Ve,De)};J(we,Ve=>{a(w)?Ve(Se):Ve(Ae,!1)})}D("click",ce,z),b(fe,ce)};J(I,fe=>{ae()?fe(V):fe(Y,!1)})}var W=x(I,2),U=p(W);Sn(U,{get src(){return a(H)},get alt(){return a(_)},radius:"4px",$$events:{error:()=>g(B,!0)},$$slots:{fallback:(fe,ce)=>{var we=$c(),Se=p(we);ie(Se,()=>(a(v),K(E),S(()=>a(v)?E.RADIO:E.ALBUMS))),en(1,we,()=>Gn),b(fe,we)}}});var ne=x(T,2),q=p(ne),G=p(q),re=x(q,2);let te;var me=p(re),Z=x(ne,2),oe=p(Z),C=p(oe);ie(C,()=>(K(E),S(()=>E.MENU)));var F=x(oe,2);let se;var he=p(F);ie(he,()=>(a(f),K(E),S(()=>a(f)?E.HEART_FILLED:E.HEART)));var xe=x(F,2);{var pe=fe=>{var ce=Pc(),we=p(ce);ie(we,()=>(K(E),S(()=>E.REMOVE))),D("click",ce,mt(()=>M("remove",{index:Q()}))),b(fe,ce)},Pe=fe=>{var ce=Cc(),we=p(ce);ve(()=>de(we,a(L))),b(fe,ce)};J(xe,fe=>{ae()?fe(pe):fe(Pe,!1)})}ve(()=>{$=ze(P,1,"row svelte-5cs2hz",null,$,{active:a(o),editable:ae()}),At(q,"title",a(_)),de(G,a(_)),te=ze(re,1,"artist text-ellipsis svelte-5cs2hz",null,te,{link:!a(v)}),de(me,a(k)),se=ze(F,1,"btn-icon small svelte-5cs2hz",null,se,{liked:a(f)})}),D("click",re,mt(()=>{!a(v)&&O().artist&&(ut.set("artists"),Yn("albums_by_artist",O().artist))})),D("click",oe,mt(()=>Mi(O().file))),D("click",F,mt(()=>$i(O()))),D("click",P,()=>!a(o)&&M("play")),D("mouseenter",P,()=>g(m,!0)),D("mouseleave",P,()=>g(m,!1)),b(e,P),tt(),l()}const zr=100,xa=5,Ma=25,Ta=3;function zc({tracksStore:e,onMoveTrack:t}){const n=ke(!1),r=ke(!1),s=ke(!1),i=ke(null),c=ke(null),l=ke(null),f=ke({x:0,y:0,width:0,height:0,grabOffsetX:0,grabOffsetY:0}),o=ke(null);let u=!1,v=0,d=0,h=0,w=0;const y={scrollContainer:null,listBodyContainer:null};let _=null;function k(z,P,$){const T=z.detail;if(T.button===2||(window.getSelection&&window.getSelection().removeAllRanges(),!y.scrollContainer))return;const V=y.scrollContainer.querySelectorAll(".row-wrapper")[P];if(!V)return;const Y=V.getBoundingClientRect(),W=T.touches?T.touches[0].clientX:T.clientX,U=T.touches?T.touches[0].clientY:T.clientY,ne=W-Y.left,q=U-Y.top;u=!0,n.set(!1),r.set(!1),v=W,d=U,h=W,w=U,i.set(P),c.set(P),o.set($),l.set(null),f.set({x:W,y:U,width:Y.width,height:Y.height,grabOffsetX:ne,grabOffsetY:q})}function L(z){if(!u||ge(r))return;const P=z.touches?z.touches[0].clientX:z.clientX,$=z.touches?z.touches[0].clientY:z.clientY;if(!ge(n)){const T=Math.abs(P-v),I=Math.abs($-d);if(T<Ta&&I<Ta)return;n.set(!0)}z.cancelable&&z.preventDefault(),h=P,w=$,f.update(T=>({...T,x:h,y:w})),M(w),N()}function N(){if(!y.listBodyContainer)return;const z=y.listBodyContainer.getBoundingClientRect(),P=ge(f),T=w-z.top-P.grabOffsetY+P.height/2,I=ge(e).length;if(T<0){c.set(0);return}if(T>z.height){c.set(I);return}const V=Array.from(y.listBodyContainer.querySelectorAll(".row-wrapper"));let Y=-1,W=1/0;V.forEach((U,ne)=>{const q=U.offsetTop+U.offsetHeight/2,G=Math.abs(T-q);G<W&&(W=G,Y=ne)}),Y!==-1&&c.set(Y)}function H(z){if(u){if(u=!1,!ge(n)){Q();return}O()}}async function O(){B(),n.set(!1),r.set(!0);const z=ge(c);if(ge(f),y.listBodyContainer&&z!==null){const W=y.listBodyContainer.querySelectorAll(".row-wrapper")[z];if(W){const U=y.listBodyContainer.getBoundingClientRect(),ne=U.top+W.offsetTop,q=U.left+W.offsetLeft;f.update(G=>({...G,y:ne+G.grabOffsetY,x:q+G.grabOffsetX}))}}await new Promise(Y=>setTimeout(Y,200)),s.set(!0),await hr(),y.listBodyContainer&&y.listBodyContainer.offsetHeight;const P=ge(i),$=ge(e).length;let T=Math.max(0,Math.min(z,$)),I=T;if(P!==null&&P!==T){const Y=[...ge(e)],[W]=Y.splice(P,1);I=Math.max(0,Math.min(I,Y.length)),Y.splice(I,0,W),e.set(Y),t&&t(P,I)}i.set(null),c.set(null),o.set(null),r.set(!1);const V=P!==T?I:P;l.set(V),await hr(),requestAnimationFrame(()=>{s.set(!1),setTimeout(()=>{l.set(null)},300)})}function Q(){u=!1,ae()}function ae(){n.set(!1),r.set(!1),i.set(null),c.set(null),o.set(null),B()}function M(z){if(!y.scrollContainer)return;const{top:P,bottom:$}=y.scrollContainer.getBoundingClientRect(),T=z-P,I=$-z;B();let V=0;if(T<zr&&T>0){const Y=1-T/zr;V=-(xa+Ma*(Y*Y))}else if(I<zr&&I>0){const Y=1-I/zr;V=xa+Ma*(Y*Y)}V!==0&&m(V)}function m(z){_||(_=requestAnimationFrame(function P(){y.scrollContainer&&(y.scrollContainer.scrollTop+=z,ge(n)&&(f.update($=>({...$,x:h,y:w})),N(),_=requestAnimationFrame(P)))}))}function B(){_&&(cancelAnimationFrame(_),_=null)}function j(z,P,$,T,I,V){return V||!P&&!$||T===null||I===null?"":z===T?"opacity: 0; pointer-events: none;":T===I?"":T<I&&z>T&&z<=I?"transform: translateY(-100%);":T>I&&z>=I&&z<T?"transform: translateY(100%);":""}return{isDragging:n,isDropping:r,isReordering:s,draggingIndex:i,hoverIndex:c,justDroppedIndex:l,draggedItemData:o,ghostCoords:f,refs:y,onDragInit:k,onPointerMove:L,onPointerUp:H,getRowStyle:j,cancelDrag:Q}}var Lc=A('<div><div style="pointer-events: none; width: 100%; height: 100%;" class="svelte-ym6b2"><!></div></div>'),Ic=A('<div style="padding: 10px 0;" class="svelte-ym6b2"><!></div>'),Nc=A('<div class="skeletons-wrapper svelte-ym6b2"></div>'),Oc=A("<div><!></div>"),Dc=A('<div class="content-padded svelte-ym6b2" style="text-align: center; opacity: 0.5;"> </div>'),Fc=A("<!> <!>",1),Uc=A('<div><!> <div class="list-body svelte-ym6b2"><!> <!></div></div>');function ns(e,t){et(t,!1);const n=()=>ue(gt,"$navigationStack",h),r=()=>ue(ut,"$activeMenuTab",h),s=()=>ue(B,"$isDragging",h),i=()=>ue(j,"$isDropping",h),c=()=>ue(I,"$draggedItemData",h),l=()=>ue(V,"$ghostCoords",h),f=()=>ue(P,"$draggingIndex",h),o=()=>ue(y(),"$itemsStore",h),u=()=>ue(T,"$justDroppedIndex",h),v=()=>ue(z,"$isReordering",h),d=()=>ue($,"$hoverIndex",h),[h,w]=kt();let y=Fe(t,"itemsStore",8),_=Fe(t,"isEditMode",8,!1),k=Fe(t,"isLoading",8,!1),L=Fe(t,"emptyText",8,"List is empty"),N=Fe(t,"onMoveItem",8,(C,F)=>{}),H=R(""),O=R(0),Q=R(!1);rr(async()=>{g(O,Gl(a(H))),!k()&&a(O)>0&&a(M).refs.scrollContainer&&(await hr(),$r(M,a(M).refs.scrollContainer.scrollTop=a(O)),g(Q,!0))});async function ae(){await hr(),a(M).refs.scrollContainer&&($r(M,a(M).refs.scrollContainer.scrollTop=a(O)),g(Q,!0))}il(()=>{a(M).cancelDrag(),a(M).refs.scrollContainer&&Xl(a(H),a(M).refs.scrollContainer.scrollTop)});const M=R(zc({tracksStore:y(),onMoveTrack:(C,F)=>{N()(C,F)}})),m=a(M),B=m.isDragging,j=m.isDropping,z=m.isReordering,P=m.draggingIndex,$=m.hoverIndex,T=m.justDroppedIndex,I=m.draggedItemData,V=m.ghostCoords,Y=R(m.refs);function W(C,F,se){_()&&a(M).onDragInit(C,F,se)}ee(()=>(n(),r()),()=>{const C=n(),F=C[C.length-1],se=r();if(F&&F.view==="root")g(H,`root_${se}`);else if(F){const he=F.data?F.data.name||F.data:"unknown";g(H,`${F.view}_${he}`)}}),ee(()=>(K(k()),a(Q),a(O),a(M)),()=>{!k()&&!a(Q)&&a(O)>0&&a(M).refs.scrollContainer&&ae()}),Ht(),it();var U=Uc();D("mousemove",un,function(...C){a(M).onPointerMove?.apply(this,C)}),D("mouseup",un,function(...C){a(M).onPointerUp?.apply(this,C)}),D("touchmove",un,function(...C){a(M).onPointerMove?.apply(this,C)},void 0,!1),D("touchend",un,function(...C){a(M).onPointerUp?.apply(this,C)}),D("touchcancel",un,function(...C){a(M).onPointerUp?.apply(this,C)});let ne;var q=p(U);{var G=C=>{var F=Lc();let se;var he=p(F),xe=p(he);Ir(xe,t,"row",{get item(){return c()},get index(){return f()},isGhost:!0,startDrag:()=>{}}),ve(()=>{se=ze(F,1,"floating-item svelte-ym6b2",null,se,{dropping:i()}),Ne(F,`
            top: ${l(),S(()=>l().y-l().grabOffsetY)??""}px; 
            left: ${l(),S(()=>l().x-l().grabOffsetX)??""}px;
            width: ${l(),S(()=>l().width)??""}px; 
            height: ${l(),S(()=>l().height)??""}px;
        `)}),b(C,F)};J(q,C=>{(s()||i())&&c()&&C(G)})}var re=x(q,2),te=p(re);Ir(te,t,"header",{});var me=x(te,2);{var Z=C=>{var F=Nc();St(F,4,()=>Array(6),Mn,(se,he)=>{var xe=Ic(),pe=p(xe);tn(pe,{width:"100%",height:"50px"}),b(se,xe)}),b(C,F)},oe=C=>{var F=Fc(),se=$e(F);St(se,3,o,(pe,Pe)=>pe._uid||Pe,(pe,Pe,fe)=>{var ce=Oc();let we;var Se=p(ce);Ir(Se,t,"row",{get item(){return a(Pe)},get index(){return a(fe)},isGhost:!1,startDrag:Ae=>W(Ae,a(fe),a(Pe))}),ve(Ae=>{we=ze(ce,1,"row-wrapper svelte-ym6b2",null,we,{"ghost-placeholder":f()===a(fe)&&(s()||i()),"just-dropped":u()===a(fe),"no-transition":v()}),Ne(ce,Ae)},[()=>(a(M),K(a(fe)),s(),i(),f(),d(),v(),S(()=>a(M).getRowStyle(a(fe),s(),i(),f(),d(),v())))]),b(pe,ce)});var he=x(se,2);{var xe=pe=>{var Pe=Dc(),fe=p(Pe);ve(()=>de(fe,L())),b(pe,Pe)};J(he,pe=>{o(),S(()=>o().length===0)&&pe(xe)})}b(C,F)};J(me,C=>{k()?C(Z):C(oe,!1)})}Xn(re,C=>$r(Y,a(Y).listBodyContainer=C),()=>a(Y)?.listBodyContainer),Xn(U,C=>$r(Y,a(Y).scrollContainer=C),()=>a(Y)?.scrollContainer),ve(()=>ne=ze(U,1,"base-list-scroll-container svelte-ym6b2",null,ne,{dragging:s()})),en(1,re,()=>Gn,()=>({duration:200})),b(e,U),tt(),w()}var Bc=A('<div slot="fallback" class="icon-fallback svelte-1eh2rsb"><!></div>'),jc=A('<h2 class="header-sub svelte-1eh2rsb"> </h2>'),qc=A('<div slot="header" class="content-padded svelte-1eh2rsb"><div class="view-header svelte-1eh2rsb"><div class="header-art svelte-1eh2rsb"><!></div> <div class="header-info svelte-1eh2rsb"><div class="header-label svelte-1eh2rsb"> </div> <h1 class="header-title svelte-1eh2rsb"> </h1> <!> <div class="header-actions svelte-1eh2rsb"><button class="btn-primary svelte-1eh2rsb"> </button> <button class="btn-secondary svelte-1eh2rsb"> </button></div></div></div></div>'),Hc=A('<div slot="row" class="svelte-1eh2rsb"><!></div>'),Yc=A('<div class="music-card svelte-1eh2rsb"><!> <!></div>'),Vc=A('<div class="music-grid svelte-1eh2rsb"></div>'),Wc=A('<div slot="fallback" class="icon-fallback svelte-1eh2rsb"><!></div>'),Qc=A('<div class="card-sub svelte-1eh2rsb"> </div>'),Kc=A('<div class="music-card svelte-1eh2rsb" role="button" tabindex="0"><div class="card-img-container svelte-1eh2rsb"><!> <div class="play-overlay svelte-1eh2rsb"><span style="width:48px; color:#fff" class="svelte-1eh2rsb"><!></span></div></div> <div class="card-title svelte-1eh2rsb"> </div> <!></div>'),Xc=A('<div class="empty-text svelte-1eh2rsb">No results found</div>'),Gc=A('<div class="music-grid svelte-1eh2rsb"></div>'),Zc=A('<div class="content-padded svelte-1eh2rsb"><div class="search-input-container svelte-1eh2rsb"><span class="search-icon svelte-1eh2rsb"><!></span> <input type="text" class="svelte-1eh2rsb"/></div> <!></div>'),Jc=A("<div><!></div>");function eu(e,t){et(t,!1);const n=()=>ue(o,"$itemsStore",s),r=()=>ue(gt,"$navigationStack",s),[s,i]=kt(),c=R(),l=R();let f=Fe(t,"activeCategory",8,"artists");const o=ke([]);let u=R(!0),v=R(""),d=R(!1),h=R(!1),w=R(null);async function y(M,m){if(m){g(u,!0),g(w,m.data);try{let B=[];if(m.view==="root")B=M==="artists"?await qn.getArtists():await qn.getAlbums();else if(m.view==="albums_by_artist"){const z=m.data.name||m.data;B=await qn.getArtistAlbums(z)}else if(m.view==="tracks_by_album"){const z=m.data.name||m.data;B=await qn.getAlbumTracks(z)}const j=B.map((z,P)=>{const T=typeof z=="string"?{name:z}:z;return{...T,displayName:T.name||T.title||T.artist||"Unknown",thumbFile:T.file||null,_uid:(T.file||T.name||P)+M+m.view}});o.set(j),m.view==="tracks_by_album"&&j.length>0&&g(w,j[0])}catch(B){console.error(B),o.set([])}finally{g(u,!1)}}}function _(M){a(l).view==="root"?f()==="artists"?Yn("albums_by_artist",M):Yn("tracks_by_album",M):a(l).view==="albums_by_artist"&&Yn("tracks_by_album",M)}function k(){const M=n();M.length>0&&(g(d,!0),Ti(M))}function L(){const M=n();M.length>0&&(g(h,!0),Si(M),setTimeout(()=>{g(h,!1)},2e3))}ee(()=>K(f()),()=>{f()&&g(v,"")}),ee(()=>(n(),a(v)),()=>{g(c,n().filter(M=>{if(!a(v))return!0;const m=a(v).toLowerCase();return M.displayName.toLowerCase().includes(m)||M.artist&&M.artist.toLowerCase().includes(m)}))}),ee(()=>r(),()=>{g(l,r()[r().length-1])}),ee(()=>(K(f()),a(l)),()=>{y(f(),a(l))}),ee(()=>a(l),()=>{a(l)&&(g(d,!1),g(h,!1))}),Ht(),it();var N=Jc();let H;var O=p(N);{var Q=M=>{ns(M,{get itemsStore(){return o},get isLoading(){return a(u)},isEditMode:!1,emptyText:"No tracks found",$$slots:{header:(m,B)=>{var j=qc(),z=p(j),P=p(z),$=p(P);{let Z=Oe(()=>(K(Tn),a(w),S(()=>Tn(a(w)))));Sn($,{get src(){return a(Z)},alt:"Art",radius:"12px",$$slots:{fallback:(oe,C)=>{var F=Bc(),se=p(F);ie(se,()=>(K(E),S(()=>E.ALBUMS))),b(oe,F)}}})}var T=x(P,2),I=p(T),V=p(I),Y=x(I,2),W=p(Y),U=x(Y,2);{var ne=Z=>{var oe=jc(),C=p(oe);ve(()=>de(C,(a(l),S(()=>a(l).data.artist)))),b(Z,oe)};J(U,Z=>{a(l),S(()=>a(l).data.artist)&&Z(ne)})}var q=x(U,2),G=p(q),re=p(G),te=x(G,2),me=p(te);ve(()=>{de(V,(a(l),S(()=>a(l).view==="albums_by_artist"?"Artist":"Album"))),de(W,(a(l),S(()=>a(l).data.name||a(l).data.displayName||"Unknown"))),G.disabled=a(d),de(re,a(d)?"Playing...":"Play All"),te.disabled=a(h),de(me,a(h)?"Added":"To Queue")}),D("click",G,k),D("click",te,L),b(m,j)},row:(m,B)=>{var j=Hc();const z=Oe(()=>B.item),P=Oe(()=>B.index);var $=p(j);ts($,{get track(){return a(z)},get index(){return a(P)},isEditable:!1,$$events:{play:()=>Js(a(z))}}),b(m,j)}}})},ae=M=>{var m=Zc(),B=p(m),j=p(B),z=p(j);ie(z,()=>(K(E),S(()=>E.SEARCH)));var P=x(j,2),$=x(B,2);{var T=V=>{var Y=Vc();St(Y,4,()=>Array(12),Mn,(W,U)=>{var ne=Yc(),q=p(ne);tn(q,{width:"100%",style:"aspect-ratio:1; border-radius:12px; margin-bottom:12px;"});var G=x(q,2);tn(G,{width:"80%",height:"16px"}),b(W,ne)}),b(V,Y)},I=V=>{var Y=Gc();St(Y,5,()=>a(c),W=>W._uid,(W,U)=>{var ne=Kc(),q=p(ne),G=p(q);{let se=Oe(()=>(K(Yr),a(U),S(()=>Yr(a(U)))));Sn(G,{get src(){return a(se)},get alt(){return a(U),S(()=>a(U).displayName)},radius:"8px",$$slots:{fallback:(he,xe)=>{var pe=Wc(),Pe=p(pe);{var fe=we=>{var Se=Le(),Ae=$e(Se);ie(Ae,()=>(K(E),S(()=>E.ARTISTS))),b(we,Se)},ce=we=>{var Se=Le(),Ae=$e(Se);ie(Ae,()=>(K(E),S(()=>E.ALBUMS))),b(we,Se)};J(Pe,we=>{f()==="artists"?we(fe):we(ce,!1)})}b(he,pe)}}})}var re=x(G,2),te=p(re),me=p(te);ie(me,()=>(K(E),S(()=>E.PLAY)));var Z=x(q,2),oe=p(Z),C=x(Z,2);{var F=se=>{var he=Qc(),xe=p(he);ve(()=>de(xe,(a(U),S(()=>a(U).artist)))),b(se,he)};J(C,se=>{K(f()),a(U),S(()=>f()==="albums"&&a(U).artist)&&se(F)})}ve(()=>de(oe,(a(U),S(()=>a(U).displayName)))),D("click",ne,()=>_(a(U))),D("keypress",ne,se=>se.key==="Enter"&&_(a(U))),b(W,ne)},W=>{var U=Xc();b(W,U)}),b(V,Y)};J($,V=>{a(u)?V(T):V(I,!1)})}ve(()=>At(P,"placeholder",`Filter ${f()??""}...`)),Ys(P,()=>a(v),V=>g(v,V)),b(M,m)};J(O,M=>{a(l),S(()=>a(l)?.view==="tracks_by_album")?M(Q):M(ae,!1)})}ve(()=>H=ze(N,1,"view-container svelte-1eh2rsb",null,H,{scrollable:a(l)?.view!=="tracks_by_album"})),b(e,N),tt(),i()}var tu=A('<div class="music-card svelte-1otxnt7"><div class="skeleton-img svelte-1otxnt7"><!></div> <!></div>'),nu=A('<div class="music-grid svelte-1otxnt7"></div>'),ru=A('<div slot="fallback" class="icon-fallback svelte-1otxnt7">ð»</div>'),su=A('<div class="quality-tag svelte-1otxnt7"> </div>'),au=A('<div class="status-badge playing svelte-1otxnt7">PLAYING</div>'),iu=A('<div class="status-badge paused svelte-1otxnt7">PAUSED</div>'),ou=A('<span class="play-icon-wrap svelte-1otxnt7"><!></span>'),lu=A('<div class="card-sub svelte-1otxnt7"> </div>'),cu=A('<div role="button" tabindex="0"><div class="card-img-container svelte-1otxnt7"><!> <!> <div class="play-overlay svelte-1otxnt7"><!></div></div> <div class="card-title svelte-1otxnt7"> </div> <!></div>'),uu=A('<div class="empty-state-container svelte-1otxnt7"><div class="empty-state-icon svelte-1otxnt7">ð</div> <div class="svelte-1otxnt7">No stations found</div></div>'),fu=A('<div class="music-grid svelte-1otxnt7"></div> <!>',1),du=A('<div class="view-container scrollable content-padded svelte-1otxnt7"><div class="search-input-container svelte-1otxnt7"><span class="search-icon svelte-1otxnt7"><!></span> <input type="text" placeholder="Find station..." class="svelte-1otxnt7"/></div> <!></div>');function vu(e,t){et(t,!1);const n=()=>ue(nn,"$stations",c),r=()=>ue(Ye,"$status",c),s=()=>ue(Nr,"$isLoadingRadio",c),i=()=>ue($t,"$currentSong",c),[c,l]=kt(),f=R(),o=R();let u=R("");ee(()=>(n(),a(u)),()=>{g(f,n().filter(N=>{const H=a(u).toLowerCase();return N.name.toLowerCase().includes(H)||N.genre&&N.genre.toLowerCase().includes(H)}))}),ee(()=>r(),()=>{g(o,r().bitrate?`${r().bitrate} kbps`:r().format||"")}),Ht(),it();var v=du(),d=p(v),h=p(d),w=p(h);ie(w,()=>(K(E),S(()=>E.SEARCH)));var y=x(h,2),_=x(d,2);{var k=N=>{var H=nu();St(H,4,()=>Array(12),Mn,(O,Q)=>{var ae=tu(),M=p(ae),m=p(M);tn(m,{width:"100%",height:"100%"});var B=x(M,2);tn(B,{width:"70%",height:"16px"}),b(O,ae)}),b(N,H)},L=N=>{var H=fu(),O=$e(H);St(O,5,()=>a(f),Mn,(M,m)=>{const B=Oe(()=>(a(m),S(()=>a(m).file))),j=Oe(()=>(i(),a(m),K(a(B)),S(()=>i().stationName===a(m).name||i().file===a(B)))),z=Oe(()=>(K(Zn),a(m),S(()=>Zn(a(m)))));var P=cu();let $;var T=p(P),I=p(T);Sn(I,{get src(){return a(z)},get alt(){return a(m),S(()=>a(m).name)},radius:"var(--radius-md)",$$slots:{fallback:(Z,oe)=>{var C=ru();b(Z,C)}}});var V=x(I,2);{var Y=Z=>{var oe=su(),C=p(oe);ve(()=>de(C,a(o))),en(1,oe,()=>Gn),b(Z,oe)};J(V,Z=>{a(j)&&a(o)&&Z(Y)})}var W=x(V,2),U=p(W);{var ne=Z=>{var oe=Le(),C=$e(oe);{var F=he=>{var xe=au();b(he,xe)},se=he=>{var xe=iu();b(he,xe)};J(C,he=>{r(),S(()=>r().state==="play")?he(F):he(se,!1)})}b(Z,oe)},q=Z=>{var oe=ou(),C=p(oe);ie(C,()=>(K(E),S(()=>E.PLAY))),b(Z,oe)};J(U,Z=>{a(j)?Z(ne):Z(q,!1)})}var G=x(T,2),re=p(G),te=x(G,2);{var me=Z=>{var oe=lu(),C=p(oe);ve(()=>de(C,(a(m),S(()=>a(m).genre)))),b(Z,oe)};J(te,Z=>{a(m),S(()=>a(m).genre)&&Z(me)})}ve(()=>{$=ze(P,1,"music-card svelte-1otxnt7",null,$,{"is-active":a(j)}),de(re,(a(m),S(()=>a(m).name)))}),D("click",P,()=>Zs(a(m))),b(M,P)});var Q=x(O,2);{var ae=M=>{var m=uu();b(M,m)};J(Q,M=>{a(f),n(),S(()=>a(f).length===0&&n().length>0)&&M(ae)})}b(N,H)};J(_,N=>{s()?N(k):N(L,!1)})}Ys(y,()=>a(u),N=>g(u,N)),en(1,v,()=>Gn,()=>({duration:200})),b(e,v),tt(),l()}var hu=A('<div slot="header" class="content-padded svelte-m7c4tz"><div class="view-header svelte-m7c4tz"><div class="header-art svelte-m7c4tz"><div class="header-icon-wrap svelte-m7c4tz"><!></div></div> <div class="header-info svelte-m7c4tz"><div class="header-label svelte-m7c4tz">Playlist</div> <h1 class="header-title svelte-m7c4tz"> </h1> <div class="track-count-sub svelte-m7c4tz"> </div> <div class="header-actions svelte-m7c4tz"><button class="btn-primary svelte-m7c4tz"> </button> <button class="btn-secondary svelte-m7c4tz"> </button> <button><!></button></div></div></div></div>'),pu=A('<div slot="row" class="svelte-m7c4tz"><!></div>'),_u=A('<div class="music-card svelte-m7c4tz"><!> <!></div>'),gu=A('<div class="content-padded svelte-m7c4tz"><div class="music-grid svelte-m7c4tz"></div></div>'),mu=A('<div class="music-card svelte-m7c4tz"><div class="card-img-container svelte-m7c4tz"><div class="icon-wrap svelte-m7c4tz"><!></div> <div class="play-overlay svelte-m7c4tz"><span class="overlay-icon svelte-m7c4tz"><!></span></div></div> <div class="card-title svelte-m7c4tz"> </div> <div class="card-sub svelte-m7c4tz"> </div></div>'),wu=A('<div class="content-padded svelte-m7c4tz"><div class="music-grid svelte-m7c4tz"><div class="music-card svelte-m7c4tz"><div class="card-img-container dashed-cover svelte-m7c4tz"><div class="icon-wrap svelte-m7c4tz"><!></div></div> <div class="card-title svelte-m7c4tz">New Playlist</div></div> <!></div></div>'),bu=A("<div><!></div>");function yu(e,t){et(t,!1);const n=()=>ue(gt,"$navigationStack",l),r=()=>ue(Un,"$activePlaylistTracks",l),s=()=>ue(mi,"$playlists",l),i=()=>ue(Cs,"$isLoadingTracks",l),c=()=>ue(Ps,"$isLoadingPlaylists",l),[l,f]=kt(),o=R(),u=R(),v=R();let d=R(!1),h=R(!1),w=R(!1);rr(()=>{!a(u)&&s().length===0&&Gs()});function y(j){Yn("details",j)}function _(){g(h,!0),Is(a(o).data.name,0)}function k(j){a(d)||Is(a(o).data.name,j)}function L(){if(r().length>0){const j=a(o).data.name.replace(/"/g,'\\"');Ks(`load "${j}"`),g(w,!0),setTimeout(()=>{g(w,!1)},2e3)}}function N(){g(d,!a(d))}function H(j){const z=a(o).data.name,P=r();P.splice(j,1),Un.set(P),Pi(z,j)}function O(j,z){const P=a(o).data.name;Ci(P,j,z)}ee(()=>n(),()=>{g(o,n()[n().length-1])}),ee(()=>a(o),()=>{g(u,a(o).view==="details")}),ee(()=>a(o),()=>{a(o)&&(g(h,!1),g(w,!1))}),ee(()=>(a(u),r(),Un),()=>{if(a(u)&&r().length>0){const j=r();if(!j[0]._uid){const z=j.map(P=>({...P,_uid:Math.random()}));Un.set(z)}}}),ee(()=>(a(u),a(o),yc),()=>{a(u)&&a(o).data&&(g(d,!1),Ai(a(o).data.name))}),ee(()=>a(o),()=>{g(v,a(o)?.data?.name==="Favorites")}),Ht(),it();var Q=bu();let ae;var M=p(Q);{var m=j=>{ns(j,{get itemsStore(){return Un},get isLoading(){return i()},get isEditMode(){return a(d)},emptyText:"This playlist is empty.",onMoveItem:O,$$slots:{header:(z,P)=>{var $=hu(),T=p($),I=p(T),V=p(I),Y=p(V);ie(Y,()=>(a(v),K(E),S(()=>a(v)?E.HEART_FILLED:E.PLAYLISTS)));var W=x(I,2),U=x(p(W),2),ne=p(U),q=x(U,2),G=p(q),re=x(q,2),te=p(re),me=p(te),Z=x(te,2),oe=p(Z),C=x(Z,2);let F;var se=p(C);ie(se,()=>(a(d),K(E),S(()=>a(d)?E.ACCEPT:E.EDIT))),ve(()=>{Ne(I,`background: ${a(v),a(o),S(()=>a(v)?"linear-gradient(135deg, hsl(348, 95%, 58%), hsl(348, 90%, 40%))":a(o).data.color||"#333")??""};`),de(ne,(a(o),S(()=>a(o).data.name))),de(G,(i(),r(),S(()=>i()?"Loading...":`${r().length} tracks`))),te.disabled=a(h),de(me,a(h)?"Playing...":"Play All"),Z.disabled=a(w),de(oe,a(w)?"Added":"To Queue"),F=ze(C,1,"btn-action svelte-m7c4tz",null,F,{active:a(d)}),At(C,"title",a(d)?"Finish Editing":"Edit Playlist")}),D("click",te,_),D("click",Z,L),D("click",C,N),b(z,$)},row:(z,P)=>{var $=pu();const T=Oe(()=>P.item),I=Oe(()=>P.index),V=Oe(()=>P.startDrag);var Y=p($);ts(Y,{get track(){return a(T)},get index(){return a(I)},get isEditable(){return a(d)},$$events:{play:()=>k(a(I)),remove:()=>H(a(I)),startdrag(...W){a(V)?.apply(this,W)}}}),b(z,$)}}})},B=j=>{var z=Le(),P=$e(z);{var $=I=>{var V=gu(),Y=p(V);St(Y,4,()=>Array(8),Mn,(W,U)=>{var ne=_u(),q=p(ne);tn(q,{width:"100%",style:"aspect-ratio: 1; border-radius: 12px; margin-bottom: 12px;"});var G=x(q,2);tn(G,{width:"60%",height:"16px"}),b(W,ne)}),b(I,V)},T=I=>{var V=wu(),Y=p(V),W=p(Y),U=p(W),ne=p(U),q=p(ne);ie(q,()=>(K(E),S(()=>E.ADD)));var G=x(W,2);St(G,1,s,Mn,(re,te)=>{const me=Oe(()=>(a(te),S(()=>a(te).name==="Favorites")));var Z=mu(),oe=p(Z),C=p(oe),F=p(C);ie(F,()=>(K(a(me)),K(E),S(()=>a(me)?E.HEART_FILLED:E.PLAYLISTS)));var se=x(C,2),he=p(se),xe=p(he);ie(xe,()=>(K(E),S(()=>E.PLAY)));var pe=x(oe,2),Pe=p(pe),fe=x(pe,2),ce=p(fe);ve(we=>{Ne(oe,`background: ${a(te),S(()=>a(te).color)??""};`),de(Pe,(a(te),S(()=>a(te).name))),de(ce,we)},[()=>(a(te),S(()=>a(te).lastModified?new Date(a(te).lastModified).toLocaleDateString():"Playlist"))]),D("click",Z,()=>y(a(te))),b(re,Z)}),b(I,V)};J(P,I=>{c()?I($):I(T,!1)},!0)}b(j,z)};J(M,j=>{a(u)?j(m):j(B,!1)})}ve(()=>ae=ze(Q,1,"view-container svelte-m7c4tz",null,ae,{scrollable:!a(u)})),b(e,Q),tt(),f()}var ku=A('<div class="spinner svelte-1d3z1zm"></div>'),Eu=A('<div class="placeholder-state svelte-1d3z1zm"><div class="placeholder-icon svelte-1d3z1zm">ð</div> <p class="svelte-1d3z1zm">Type to search your library</p></div>'),xu=A('<div class="empty-text svelte-1d3z1zm"> </div>'),Mu=A('<div slot="fallback" class="icon-fallback svelte-1d3z1zm">ð¿</div>'),Tu=A('<div class="music-card svelte-1d3z1zm"><div class="card-img-container svelte-1d3z1zm"><!> <div class="play-overlay svelte-1d3z1zm"><span class="play-icon-wrap svelte-1d3z1zm"><!></span></div></div> <div class="card-title svelte-1d3z1zm"> </div> <div class="card-sub svelte-1d3z1zm"> </div></div>'),Su=A('<div class="header-label section-spacing svelte-1d3z1zm">Albums</div> <div class="albums-scroller section-mb svelte-1d3z1zm"></div>',1),Au=A('<div class="header-label svelte-1d3z1zm">Tracks</div>'),$u=A("<!> <!>",1),Pu=A('<div slot="header" class="content-padded svelte-1d3z1zm"><!></div>'),Cu=A('<div slot="row" class="svelte-1d3z1zm"><!></div>'),Ru=A('<div class="view-container svelte-1d3z1zm"><div class="content-padded no-bottom-pad svelte-1d3z1zm"><div class="search-input-container svelte-1d3z1zm"><span class="search-icon svelte-1d3z1zm"><!></span> <input type="text" placeholder="Artists, songs, or albums" autoFocus class="svelte-1d3z1zm"/> <!></div></div> <!></div>');function zu(e,t){et(t,!1);const n=()=>ue(Hr,"$searchQuery",s),r=()=>ue(c,"$tracksStore",s),[s,i]=kt(),c=ke([]);let l=R([]),f=R(!1),o,u=R(!1);rr(()=>{n().length>=2&&d(n())});function v(m){Hr.set(m.target.value),clearTimeout(o),o=setTimeout(()=>{d(n())},300)}async function d(m){const B=m.trim().toLowerCase();if(B.length<2){c.set([]),g(l,[]),g(u,!1);return}g(f,!0),g(u,!0);try{const j=await qn.search(B),z=j.map(($,T)=>({...$,_uid:$.file?`${$.file}-${T}`:`search-${T}`}));c.set(z);const P=new Map;j.forEach($=>{const T=$.album;if(T&&!P.has(T)){const I=T.toLowerCase().includes(B),V=$.artist&&$.artist.toLowerCase().includes(B);(I||V)&&P.set(T,{name:T,artist:$.artist,file:$.file,_uid:`alb-${T}`})}}),g(l,Array.from(P.values()))}finally{g(f,!1)}}function h(m){Js(m)}function w(m){Yn("tracks_by_album",m)}function y(m){m.deltaY!==0&&(m.currentTarget.scrollLeft+=m.deltaY)}it();var _=Ru(),k=p(_),L=p(k),N=p(L),H=p(N);ie(H,()=>E.SEARCH);var O=x(N,2),Q=x(O,2);{var ae=m=>{var B=ku();b(m,B)};J(Q,m=>{a(f)&&m(ae)})}var M=x(k,2);ns(M,{get itemsStore(){return c},isEditMode:!1,isLoading:!1,emptyText:"",$$slots:{header:(m,B)=>{var j=Pu(),z=p(j);{var P=T=>{var I=Eu();b(T,I)},$=T=>{var I=Le(),V=$e(I);{var Y=U=>{var ne=xu(),q=p(ne);ve(()=>de(q,`No results found for "${n()??""}"`)),b(U,ne)},W=U=>{var ne=$u(),q=$e(ne);{var G=me=>{var Z=Su(),oe=x($e(Z),2);St(oe,5,()=>a(l),C=>C._uid,(C,F)=>{var se=Tu(),he=p(se),xe=p(he);{let Ve=Oe(()=>Tn(a(F)));Sn(xe,{get src(){return a(Ve)},get alt(){return a(F).name},radius:"var(--radius-md)",$$slots:{fallback:(De,Cn)=>{var Yt=Mu();b(De,Yt)}}})}var pe=x(xe,2),Pe=p(pe),fe=p(Pe);ie(fe,()=>E.PLAY);var ce=x(he,2),we=p(ce),Se=x(ce,2),Ae=p(Se);ve(()=>{At(ce,"title",a(F).name),de(we,a(F).name),de(Ae,a(F).artist)}),D("click",se,()=>w(a(F))),b(C,se)}),D("wheel",oe,y),b(me,Z)};J(q,me=>{a(l).length>0&&me(G)})}var re=x(q,2);{var te=me=>{var Z=Au();b(me,Z)};J(re,me=>{r().length>0&&me(te)})}b(U,ne)};J(V,U=>{!a(f)&&r().length===0&&a(l).length===0&&a(u)?U(Y):U(W,!1)},!0)}b(T,I)};J(z,T=>{n().length<2?T(P):T($,!1)})}b(m,j)},row:(m,B)=>{var j=Cu();const z=Oe(()=>B.item),P=Oe(()=>B.index);var $=p(j);ts($,{get track(){return a(z)},get index(){return a(P)},isEditable:!1,$$events:{play:()=>h(a(z))}}),b(m,j)}}}),ve(()=>nl(O,n())),D("input",O,v),b(e,_),tt(),i()}var Lu=A('<div class="knob svelte-1jla3sy"></div>'),Iu=A('<div class="tooltip current svelte-1jla3sy"> </div> <span></span>',1),Nu=A('<div slot="fallback" class="icon-fallback svelte-1jla3sy"><!></div>'),Ou=A('<span class="badge svelte-1jla3sy"> </span>'),Du=A('<div class="dot svelte-1jla3sy"></div>'),Fu=A("<button><!> <!></button>"),Uu=A('<div class="dock svelte-1jla3sy"><div class="progress-shadow svelte-1jla3sy"></div> <div><div class="rail svelte-1jla3sy"></div> <div class="fill svelte-1jla3sy"><!></div> <!></div> <div class="grid svelte-1jla3sy"><div class="info svelte-1jla3sy"><div class="art svelte-1jla3sy"><!></div> <div class="meta svelte-1jla3sy"><div class="title text-ellipsis svelte-1jla3sy"> </div> <div class="artist-row svelte-1jla3sy"><div class="artist text-ellipsis svelte-1jla3sy"> </div> <!></div></div></div> <div class="controls svelte-1jla3sy"><button><!></button> <button class="btn-icon"><!></button> <button class="play-btn flex-center svelte-1jla3sy"><!></button> <button class="btn-icon"><!></button> <!></div> <div class="volume desktop svelte-1jla3sy"><div class="vol-icon svelte-1jla3sy"><!></div> <div class="custom-slider svelte-1jla3sy"><div class="slider-bg svelte-1jla3sy"><div class="slider-fill svelte-1jla3sy"></div> <div class="slider-knob svelte-1jla3sy"></div></div></div></div></div></div>');function Bu(e,t){et(t,!1);const n=()=>ue(Ye,"$status",l),r=()=>ue($t,"$currentSong",l),s=()=>ue(vn,"$favorites",l),i=()=>ue(nn,"$stations",l),c=()=>ue(qr,"$isFullPlayerOpen",l),[l,f]=kt(),o=R(),u=R(),v=R(),d=R(),h=R(),w=R(),y=R(),_=R(),k=R(),L=R(),N=R(),H=R();let O=R(!1),Q=R(!1),ae=!1,M=R(0),m=R(),B=R();const j=q=>G=>{G.stopPropagation(),q()};function z(q){if(isNaN(q)||q===null)return"0:00";const G=Math.floor(q/60),re=Math.floor(q%60);return`${G}:${re<10?"0":""}${re}`}function P(q,G){const re=G.getBoundingClientRect();return Math.max(0,Math.min(1,(q.clientX-re.left)/re.width))}function $(q){a(d)||(g(Q,!0),g(M,P(q,a(m))),window.addEventListener("mousemove",T),window.addEventListener("mouseup",I))}function T(q){if(a(Q)&&g(M,P(q,a(m))),ae){const G=Math.round(P(q,a(B))*100);wr(G)}}function I(){a(Q)&&!a(d)&&Xs(a(M)*a(o)),g(Q,!1),ae=!1,window.removeEventListener("mousemove",T),window.removeEventListener("mouseup",I)}function V(q){ae=!0;const G=Math.round(P(q,a(B))*100);wr(G),window.addEventListener("mousemove",T),window.addEventListener("mouseup",I)}function Y(){const q=(a(H)+1)%3;q===0?(n().random&&wn(),n().repeat&&bn()):q===1?(n().random||wn(),n().repeat&&bn()):q===2&&(n().random&&wn(),n().repeat||bn())}ee(()=>n(),()=>{g(o,n().duration>0?n().duration:1)}),ee(()=>n(),()=>{g(u,n().elapsed||0)}),ee(()=>n(),()=>{g(v,n().state==="play")}),ee(()=>r(),()=>{g(d,r().file?.startsWith("http"))}),ee(()=>r(),()=>{g(h,r().title||"Not Playing")}),ee(()=>r(),()=>{g(w,r().stationName||r().artist||"Moode")}),ee(()=>(r(),s()),()=>{g(y,r().file&&s().has(r().file))}),ee(()=>(r(),i()),()=>{g(_,Tn(r(),i(),r().stationName))}),ee(()=>(a(d),a(Q),a(M),a(u),a(o)),()=>{g(k,a(d)?0:a(Q)?a(M)*100:a(u)/a(o)*100)}),ee(()=>(a(v),a(Q),a(d)),()=>{g(L,a(v)&&!a(Q)&&!a(d))}),ee(()=>n(),()=>{g(N,n().bitrate?`${n().bitrate} kbps`:n().format||"")}),ee(()=>n(),()=>{g(H,n().repeat?2:n().random?1:0)}),Ht(),it();var W=Le(),U=$e(W);{var ne=q=>{var G=Uu(),re=p(G),te=x(re,2);let me;var Z=x(p(te),2),oe=p(Z);{var C=_e=>{var qe=Lu();b(_e,qe)};J(oe,_e=>{a(d)||_e(C)})}var F=x(Z,2);{var se=_e=>{var qe=Iu(),pt=$e(qe),X=p(pt);ve(ye=>{Ne(pt,`left: ${a(k)??""}%`),de(X,ye)},[()=>(a(Q),a(M),a(o),a(u),S(()=>a(Q)?z(a(M)*a(o)):z(a(u))))]),b(_e,qe)};J(F,_e=>{(a(O)||a(Q))&&!a(d)&&_e(se)})}Xn(te,_e=>g(m,_e),()=>a(m));var he=x(te,2),xe=p(he),pe=p(xe),Pe=p(pe);Sn(Pe,{get src(){return a(_)},alt:"art",radius:"4px",$$slots:{fallback:(_e,qe)=>{var pt=Nu(),X=p(pt);ie(X,()=>(a(d),K(E),S(()=>a(d)?E.RADIO:E.ALBUMS))),b(_e,pt)}}});var fe=x(pe,2),ce=p(fe),we=p(ce),Se=x(ce,2),Ae=p(Se),Ve=p(Ae),De=x(Ae,2);{var Cn=_e=>{var qe=Ou(),pt=p(qe);ve(()=>de(pt,a(N))),b(_e,qe)};J(De,_e=>{a(N)&&_e(Cn)})}var Yt=x(xe,2),Vt=p(Yt),ht=sr(()=>j(()=>mr.toggleFavorite(r())));let Et;var rn=p(Vt);ie(rn,()=>(a(y),K(E),S(()=>a(y)?E.HEART_FILLED:E.HEART)));var sn=x(Vt,2),Rn=sr(()=>j(()=>br("previous"))),nt=p(sn);ie(nt,()=>(K(E),S(()=>E.PREVIOUS)));var ot=x(sn,2),an=sr(()=>j(es)),on=p(ot);ie(on,()=>(n(),K(E),S(()=>n().state==="play"?E.PAUSE:E.PLAY)));var ln=x(ot,2),lt=sr(()=>j(()=>br("next"))),Rt=p(ln);ie(Rt,()=>(K(E),S(()=>E.NEXT)));var zt=x(ln,2);{var rs=_e=>{var qe=Fu(),pt=sr(()=>j(Y));let X;var ye=p(qe);{var Qe=Ke=>{var Lt=Le(),Xe=$e(Lt);ie(Xe,()=>(K(E),S(()=>E.REPEAT))),b(Ke,Lt)},Wt=Ke=>{var Lt=Le(),Xe=$e(Lt);ie(Xe,()=>(K(E),S(()=>E.SHUFFLE))),b(Ke,Lt)};J(ye,Ke=>{a(H)===2?Ke(Qe):Ke(Wt,!1)})}var is=x(ye,2);{var os=Ke=>{var Lt=Du();b(Ke,Lt)};J(is,Ke=>{a(H)>0&&Ke(os)})}ve(()=>X=ze(qe,1,"btn-icon desktop mode-btn svelte-1jla3sy",null,X,{active:a(H)>0})),D("click",qe,function(...Ke){a(pt)?.apply(this,Ke)}),b(_e,qe)};J(zt,_e=>{a(d)||_e(rs)})}var ss=x(Yt,2),Mr=p(ss),as=p(Mr);ie(as,()=>(K(E),S(()=>E.VOLUME)));var zn=x(Mr,2),Tr=p(zn),Sr=p(Tr),Ln=x(Sr,2);Xn(zn,_e=>g(B,_e),()=>a(B)),ve(()=>{Ne(re,`width: ${a(k)??""}%; transition: ${a(L)?"width 0.25s linear":"none"}`),me=ze(te,1,"progress-bar svelte-1jla3sy",null,me,{radio:a(d)}),Ne(Z,`width: ${a(k)??""}%; transition: ${a(L)?"width 0.25s linear":"none"}`),At(ce,"title",a(h)),de(we,a(h)),At(Ae,"title",a(w)),de(Ve,a(w)),Et=ze(Vt,1,"btn-icon desktop svelte-1jla3sy",null,Et,{liked:a(y)}),Ne(Sr,`width: ${n(),S(()=>n().volume)??""}%`),Ne(Ln,`left: ${n(),S(()=>n().volume)??""}%`)}),D("mouseenter",te,()=>g(O,!0)),D("mouseleave",te,()=>g(O,!1)),D("mousedown",te,mt($)),D("click",te,mt(function(_e){Ss.call(this,t,_e)})),D("click",Vt,function(..._e){a(ht)?.apply(this,_e)}),D("click",sn,function(..._e){a(Rn)?.apply(this,_e)}),D("click",ot,function(..._e){a(an)?.apply(this,_e)}),D("click",ln,function(..._e){a(lt)?.apply(this,_e)}),D("mousedown",zn,mt(V)),D("click",zn,mt(function(_e){Ss.call(this,t,_e)})),D("click",G,()=>qr.set(!0)),b(q,G)};J(U,q=>{c()||q(ne)})}b(e,W),tt(),f()}var ju=A('<div slot="fallback" class="icon-fallback svelte-1olwzt8"><!></div>'),qu=A('<span class="badge svelte-1olwzt8"> </span>'),Hu=A('<span class="dot svelte-1olwzt8"></span>'),Yu=A("<button><!> <!></button>"),Vu=A('<div style="width: 44px;"></div>'),Wu=A('<div class="full-player svelte-1olwzt8"><div class="drag-zone svelte-1olwzt8"><div class="drag-handle-icon svelte-1olwzt8"><!></div></div> <div class="bg-blur svelte-1olwzt8"></div> <div class="bg-overlay svelte-1olwzt8"></div> <div class="player-body svelte-1olwzt8"><div class="art-container svelte-1olwzt8"><div class="artwork svelte-1olwzt8"><!></div></div> <div class="controls-area svelte-1olwzt8"><div class="meta svelte-1olwzt8"><h1 class="title text-ellipsis svelte-1olwzt8"> </h1> <div class="artist-row svelte-1olwzt8"><h2 class="artist text-ellipsis svelte-1olwzt8"> </h2> <!></div></div> <div class="progress-section"><div class="bar-hit-area svelte-1olwzt8"><div class="common-track svelte-1olwzt8"><div class="common-fill svelte-1olwzt8"><div class="common-knob svelte-1olwzt8"></div></div></div></div> <div class="time-row svelte-1olwzt8"><span> </span> <span> </span></div></div> <div class="buttons-row svelte-1olwzt8"><button><!></button> <button class="btn-icon side-btn svelte-1olwzt8"><!></button> <button class="play-btn-large flex-center svelte-1olwzt8"><!></button> <button class="btn-icon side-btn svelte-1olwzt8"><!></button> <!></div> <div class="volume-row svelte-1olwzt8"><div class="vol-icon svelte-1olwzt8"><!></div> <div class="volume-hit-area svelte-1olwzt8"><div class="common-track svelte-1olwzt8"><div class="common-fill svelte-1olwzt8"></div> <div class="common-knob svelte-1olwzt8"></div></div></div></div></div></div></div>');function Qu(e,t){et(t,!1);const n=()=>ue($t,"$currentSong",c),r=()=>ue(nn,"$stations",c),s=()=>ue(Ye,"$status",c),i=()=>ue(vn,"$favorites",c),[c,l]=kt(),f=R(),o=R(),u=R(),v=R(),d=R(),h=R(),w=R(),y=R(),_=R(),k=R();let L=0,N=R(0),H=R(!1);function O(){qr.set(!1)}function Q(X){const ye=X.target;ye.closest(".bar-hit-area")||ye.closest(".volume-hit-area")||(L=X.touches[0].clientY,g(H,!0))}function ae(X){if(!a(H))return;const ye=X.touches[0].clientY-L;ye>0&&(X.cancelable&&ye>10&&X.preventDefault(),g(N,ye))}function M(){g(H,!1),a(N)>150?O():g(N,0)}let m=R(!1),B=R(0),j=R();function z(X){const ye=Math.floor(X/60)||0,Qe=Math.floor(X%60)||0;return`${ye}:${Qe.toString().padStart(2,"0")}`}function P(X,ye){const Qe=ye.getBoundingClientRect(),Wt=X.touches?X.touches[0].clientX:X.clientX;return Math.max(0,Math.min(1,(Wt-Qe.left)/Qe.width))}function $(X){a(v)||(g(m,!0),g(B,P(X,a(j))))}function T(X){a(m)&&g(B,P(X,a(j)))}function I(){a(m)&&!a(v)&&Xs(a(B)*a(o)),g(m,!1)}let V=!1,Y=R();function W(X){V=!0;const ye=Math.round(P(X,a(Y))*100);wr(ye),window.addEventListener("mousemove",U),window.addEventListener("mouseup",ne),window.addEventListener("touchmove",U,{passive:!1}),window.addEventListener("touchend",ne)}function U(X){if(V){X.preventDefault();const ye=Math.round(P(X,a(Y))*100);wr(ye)}}function ne(){V=!1,window.removeEventListener("mousemove",U),window.removeEventListener("mouseup",ne),window.removeEventListener("touchmove",U),window.removeEventListener("touchend",ne)}function q(){const X=(a(y)+1)%3;X===0?(s().random&&wn(),s().repeat&&bn()):X===1?(s().random||wn(),s().repeat&&bn()):X===2&&(s().random&&wn(),s().repeat||bn())}ee(()=>(n(),r()),()=>{g(f,Tn(n(),r(),n().stationName))}),ee(()=>s(),()=>{g(o,s().duration||1)}),ee(()=>s(),()=>{g(u,s().elapsed||0)}),ee(()=>n(),()=>{g(v,n().file?.startsWith("http"))}),ee(()=>s(),()=>{g(d,s().state==="play")}),ee(()=>(a(d),a(m),a(v)),()=>{g(h,a(d)&&!a(m)&&!a(v))}),ee(()=>(a(v),a(m),a(B),a(u),a(o)),()=>{g(w,a(v)?0:a(m)?a(B)*100:a(u)/a(o)*100)}),ee(()=>s(),()=>{g(y,s().repeat?2:s().random?1:0)}),ee(()=>s(),()=>{g(_,s().bitrate?`${s().bitrate} kbps`:s().format||"")}),ee(()=>(n(),i()),()=>{g(k,n().file&&i().has(n().file))}),Ht(),it();var G=Wu(),re=p(G),te=p(re),me=p(te);ie(me,()=>(K(E),S(()=>E.CHEVRON_DOWN)));var Z=x(re,2),oe=x(Z,4),C=p(oe),F=p(C),se=p(F);Sn(se,{get src(){return a(f)},alt:"Cover",radius:"var(--radius-xl)",$$slots:{fallback:(X,ye)=>{var Qe=ju(),Wt=p(Qe);ie(Wt,()=>(a(v),K(E),S(()=>a(v)?E.RADIO:E.ALBUMS))),b(X,Qe)}}});var he=x(C,2),xe=p(he),pe=p(xe),Pe=p(pe),fe=x(pe,2),ce=p(fe),we=p(ce),Se=x(ce,2);{var Ae=X=>{var ye=qu(),Qe=p(ye);ve(()=>de(Qe,a(_))),b(X,ye)};J(Se,X=>{a(_)&&X(Ae)})}var Ve=x(xe,2),De=p(Ve),Cn=p(De),Yt=p(Cn);Xn(De,X=>g(j,X),()=>a(j));var Vt=x(De,2),ht=p(Vt),Et=p(ht),rn=x(ht,2),sn=p(rn),Rn=x(Ve,2),nt=p(Rn);let ot;var an=p(nt);ie(an,()=>(a(k),K(E),S(()=>a(k)?E.HEART_FILLED:E.HEART)));var on=x(nt,2),ln=p(on);ie(ln,()=>(K(E),S(()=>E.PREVIOUS)));var lt=x(on,2),Rt=p(lt);ie(Rt,()=>(s(),K(E),S(()=>s().state==="play"?E.PAUSE:E.PLAY)));var zt=x(lt,2),rs=p(zt);ie(rs,()=>(K(E),S(()=>E.NEXT)));var ss=x(zt,2);{var Mr=X=>{var ye=Yu();let Qe;var Wt=p(ye);{var is=Xe=>{var cn=Le(),ls=$e(cn);ie(ls,()=>(K(E),S(()=>E.REPEAT))),b(Xe,cn)},os=Xe=>{var cn=Le(),ls=$e(cn);ie(ls,()=>(K(E),S(()=>E.SHUFFLE))),b(Xe,cn)};J(Wt,Xe=>{a(y)===2?Xe(is):Xe(os,!1)})}var Ke=x(Wt,2);{var Lt=Xe=>{var cn=Hu();b(Xe,cn)};J(Ke,Xe=>{a(y)>0&&Xe(Lt)})}ve(()=>Qe=ze(ye,1,"btn-icon side-btn mode-btn svelte-1olwzt8",null,Qe,{active:a(y)>0})),D("click",ye,q),b(X,ye)},as=X=>{var ye=Vu();b(X,ye)};J(ss,X=>{a(v)?X(as,!1):X(Mr)})}var zn=x(Rn,2),Tr=p(zn),Sr=p(Tr);ie(Sr,()=>(K(E),S(()=>E.VOLUME)));var Ln=x(Tr,2),_e=p(Ln),qe=p(_e),pt=x(qe,2);Xn(Ln,X=>g(Y,X),()=>a(Y)),ve((X,ye)=>{Ne(G,`transform: translateY(${a(N)??""}px); transition: ${a(H)?"none":"transform 0.3s cubic-bezier(0.2, 0.8, 0.2, 1)"}`),Ne(Z,`background-image: url(${a(f)??""})`),Ne(F,`transform: scale(${1-a(N)/3e3})`),Ne(he,`opacity: ${1-a(N)/400}`),de(Pe,(n(),S(()=>n().title||"Not Playing"))),de(we,(n(),S(()=>n().stationName||n().artist||"Moode Audio"))),Ne(Yt,`width: ${a(w)??""}%; transition: ${a(h)?"width 0.3s linear":"none"}`),de(Et,X),de(sn,ye),ot=ze(nt,1,"btn-icon side-btn svelte-1olwzt8",null,ot,{liked:a(k)}),Ne(qe,`width: ${s(),S(()=>s().volume)??""}%`),Ne(pt,`left: ${s(),S(()=>s().volume)??""}%; right: auto;`)},[()=>(a(m),a(B),a(o),a(u),S(()=>a(m)?z(a(B)*a(o)):z(a(u)))),()=>(a(v),a(o),S(()=>a(v)?"LIVE":z(a(o))))]),D("touchstart",re,Q),D("touchmove",re,ae),D("touchend",re,M),D("click",re,O),D("mousedown",De,$),D("touchstart",De,$,void 0,!0),D("mousemove",De,function(...X){(a(m)?T:null)?.apply(this,X)}),D("touchmove",De,function(...X){(a(m)?T:null)?.apply(this,X)},void 0,!0),D("mouseup",De,I),D("touchend",De,I),D("click",nt,()=>mr.toggleFavorite(n())),D("click",on,()=>br("previous")),D("click",lt,function(...X){es?.apply(this,X)}),D("click",zt,()=>br("next")),D("mousedown",Ln,mt(W)),D("touchstart",Ln,mt(W)),en(3,G,()=>gi,()=>({y:800,duration:300,opacity:1})),b(e,G),tt(),l()}const Ku="/assets/wave-logo-C1390byt.svg",Ns={async syncLibrary(){if(ge(wt))return;wt.set(!0);const e=new Ei,t=window.location.origin+"/wave-api.php";e.postMessage({type:"START_SYNC",payload:{url:t}}),e.onmessage=n=>{const{type:r,status:s,count:i,message:c}=n.data;if(r==="PROGRESS"){const l={connecting:"Requesting library...",downloading:"Downloading data...",parsing:"Processing metadata...",saving:`Saving ${i} tracks...`};l[s]&&Me(l[s],"info")}r==="DONE"&&(Me(`Library updated: ${i} tracks`,"success"),wt.set(!1),e.terminate()),r==="ERROR"&&(console.error("[API] Sync Error:",c),Me(`Sync Failed: ${c}`,"error"),wt.set(!1),e.terminate())},e.onerror=n=>{console.error("[API] Worker crash:",n),Me("Sync worker crashed","error"),wt.set(!1),e.terminate()}},async loadRadioStations(){if(!ge(Nr)){Nr.set(!0);try{const t=await fetch(tc.STATIONS(!1));if(!t.ok)throw new Error("Network error");const n=await t.json();if(n.error)throw new Error(n.error);if(!Array.isArray(n))throw new Error("Invalid response format");const r=n.map(s=>({id:s.id,name:s.name,file:s.station,station:s.station,image:s.logo,genre:s.genre||"Radio"}));r.sort((s,i)=>s.name.localeCompare(i.name,void 0,{sensitivity:"base"})),nn.set(r)}catch(e){console.error("[API] Failed to load stations",e),Me("Failed to load radio","error")}finally{Nr.set(!1)}}}};var Xu=A('<div class="backdrop svelte-ji5owg"></div>'),Gu=A('<button><span class="icon svelte-ji5owg"><!></span> <span> </span></button>'),Zu=A('<!> <aside><div class="header svelte-ji5owg"><img alt="Logo" class="logo svelte-ji5owg"/> <button class="btn-icon mobile-close svelte-ji5owg"><!></button></div> <div class="scroll-area scroll-y svelte-ji5owg"><nav class="svelte-ji5owg"><!> <button><span class="icon svelte-ji5owg"><!></span> <span>Search</span></button> <div class="sep svelte-ji5owg"></div> <button class="nav-item sync svelte-ji5owg"><span><!></span> <span> </span></button></nav> <div class="settings svelte-ji5owg"><div class="sep svelte-ji5owg"></div> <div class="label svelte-ji5owg">MPD Server IP</div> <div class="row svelte-ji5owg"><input type="text" placeholder="192.168..." class="svelte-ji5owg"/> <button class="save svelte-ji5owg">Save</button></div> <div class="footer svelte-ji5owg">Moode WaveUI</div></div></div></aside>',1);function Ju(e,t){et(t,!1);const n=()=>ue(wt,"$isSyncingLibrary",s),r=()=>ue(ut,"$activeMenuTab",s),[s,i]=kt(),c=R();let l=Fe(t,"isOpen",8,!1);const f=Ws();let o=R(0),u=R(0),v=R(!1);const d=[{id:"queue",label:"Queue",icon:E.MENU},{id:"favorites",label:"Favorites",icon:E.HEART},{id:"artists",label:"Artists",icon:E.ARTISTS},{id:"albums",label:"Albums",icon:E.ALBUMS},{id:"playlists",label:"Playlists",icon:E.PLAYLISTS},{id:"radio",label:"Radio",icon:E.RADIO}];let h=R(_r.MOODE_IP);function w(F){window.location.hash=`/${F}`,f("close")}async function y(){n()||(await Ns.syncLibrary(),window.location.hash="/artists")}function _(F){l()&&(g(o,F.touches[0].clientX),g(u,a(o)),g(v,!0))}function k(F){a(v)&&g(u,F.touches[0].clientX)}function L(){a(v)&&(a(u)-a(o)<-70&&f("close"),g(v,!1),g(o,0),g(u,0))}ee(()=>(a(v),a(u),a(o)),()=>{g(c,a(v)?Math.min(0,a(u)-a(o)):0)}),Ht(),it();var N=Zu(),H=$e(N);{var O=F=>{var se=Xu();D("click",se,()=>f("close")),en(3,se,()=>Gn,()=>({duration:200})),b(F,se)};J(H,F=>{l()&&F(O)})}var Q=x(H,2);let ae,M;var m=p(Q),B=p(m),j=x(B,2),z=p(j);ie(z,()=>(K(E),S(()=>E.CLOSE)));var P=x(m,2),$=p(P),T=p($);St(T,1,()=>d,Mn,(F,se)=>{var he=Gu();let xe;var pe=p(he),Pe=p(pe);ie(Pe,()=>(a(se),S(()=>a(se).icon)));var fe=x(pe,2),ce=p(fe);ve(()=>{xe=ze(he,1,"nav-item svelte-ji5owg",null,xe,{active:r()===a(se).id}),de(ce,(a(se),S(()=>a(se).label)))}),D("click",he,()=>w(a(se).id)),b(F,he)});var I=x(T,2);let V;var Y=p(I),W=p(Y);ie(W,()=>(K(E),S(()=>E.SEARCH)));var U=x(I,4),ne=p(U);let q;var G=p(ne);ie(G,()=>(K(E),S(()=>E.SYNC)));var re=x(ne,2),te=p(re),me=x($,2),Z=x(p(me),4),oe=p(Z),C=x(oe,2);ve(()=>{ae=ze(Q,1,"side-menu svelte-ji5owg",null,ae,{"mobile-open":l()}),M=Ne(Q,"",M,{transform:l()?`translateX(${a(c)}px)`:"",transition:a(v)?"none":"transform 0.3s ease"}),At(B,"src",Ku),V=ze(I,1,"nav-item svelte-ji5owg",null,V,{active:r()==="search"}),U.disabled=n(),q=ze(ne,1,"icon svelte-ji5owg",null,q,{spin:n()}),de(te,n()?"Syncing...":"Update Library")}),D("click",j,()=>f("close")),D("click",I,()=>w("search")),D("click",U,y),Ys(oe,()=>a(h),F=>g(h,F)),D("click",C,()=>{_r.setMoodeIp(a(h)),location.reload()}),D("touchstart",Q,_),D("touchmove",Q,k),D("touchend",Q,L),b(e,N),tt(),i()}var ef=A('<div slot="header" class="view-header-simple svelte-185fgrr"><div class="header-info svelte-185fgrr"><h1 class="header-title svelte-185fgrr">Current Queue</h1> <span class="header-subtitle svelte-185fgrr"> </span></div> <div class="header-actions svelte-185fgrr"><button class="btn-action svelte-185fgrr" title="Save Queue"><!></button> <button><!></button></div></div>'),tf=A('<div slot="row" class="svelte-185fgrr"><!></div>'),nf=A('<div class="view-container svelte-185fgrr"><!></div>');function rf(e,t){et(t,!1);const n=()=>ue(gr,"$queue",r),[r,s]=kt();let i=R(!1);function c(){g(i,!a(i))}function l(h){a(i)||Ks(`play ${h}`)}function f(h){Jt.removeFromQueue(h)}async function o(){const h=prompt("Enter playlist name:");h&&(await Jt.saveQueue(h),Gs())}function u(h,w){Jt.moveTrack(h,w)}it();var v=nf(),d=p(v);ns(d,{get itemsStore(){return gr},get isEditMode(){return a(i)},emptyText:"Queue is empty",onMoveItem:u,$$slots:{header:(h,w)=>{var y=ef(),_=p(y),k=x(p(_),2),L=p(k),N=x(_,2),H=p(N),O=p(H);ie(O,()=>E.SAVE);var Q=x(H,2);let ae;var M=p(Q);ie(M,()=>a(i)?E.ACCEPT:E.EDIT),ve(()=>{de(L,`${n().length??""} track${n().length===1?"":"s"}`),ae=ze(Q,1,"btn-action svelte-185fgrr",null,ae,{active:a(i)}),At(Q,"title",a(i)?"Finish Editing":"Edit Queue")}),D("click",H,o),D("click",Q,c),b(h,y)},row:(h,w)=>{var y=tf();const _=Oe(()=>w.item),k=Oe(()=>w.index),L=Oe(()=>w.startDrag);var N=p(y);ts(N,{get track(){return a(_)},get index(){return a(k)},get isEditable(){return a(i)},$$events:{play:()=>l(a(k)),remove:()=>f(a(k)),startdrag(...H){a(L)?.apply(this,H)}}}),b(h,y)}}}),b(e,v),tt(),s()}var sf=A('<div class="toast-container svelte-k2bvk7"><div> </div></div>'),af=A('<button class="back-btn svelte-k2bvk7"><span class="icon-inline"><!></span> Back</button>'),of=A('<div class="view-title svelte-k2bvk7"><!></div>'),lf=A('<div class="app-container svelte-k2bvk7"><div class="app-layout svelte-k2bvk7"><!> <!> <main class="content-area svelte-k2bvk7"><header class="top-bar svelte-k2bvk7"><button class="hamburger-btn svelte-k2bvk7"><!></button> <!></header> <div class="scroll-container svelte-k2bvk7"><div class="view-wrapper svelte-k2bvk7"><!></div></div></main></div> <!></div> <!>',1);function cf(e,t){et(t,!1);const n=()=>ue(gt,"$navigationStack",c),r=()=>ue($s,"$toastMessage",c),s=()=>ue(ut,"$activeMenuTab",c),i=()=>ue(qr,"$isFullPlayerOpen",c),[c,l]=kt();let f=R(!1);rr(()=>{window.history.replaceState({depth:n().length},"","");const $=()=>void 0;return window.addEventListener("popstate",$),()=>window.removeEventListener("popstate",$)}),it();var o=lf(),u=$e(o),v=p(u),d=p(v);{var h=$=>{var T=sf(),I=p(T),V=p(I);ve(()=>{ze(I,1,`toast-body ${r().type??""}`,"svelte-k2bvk7"),de(V,r().text)}),en(3,T,()=>gi,()=>({y:-50,duration:300})),b($,T)};J(d,$=>{r()&&$(h)})}var w=x(d,2);Ju(w,{get isOpen(){return a(f)},$$events:{close:()=>g(f,!1)}});var y=x(w,2),_=p(y),k=p(_),L=p(k);ie(L,()=>E.MENU);var N=x(k,2);{var H=$=>{var T=af(),I=p(T),V=p(I);ie(V,()=>E.BACK),D("click",T,function(...Y){ec?.apply(this,Y)}),b($,T)},O=$=>{var T=of(),I=p(T);{var V=W=>{var U=In("Radio");b(W,U)},Y=W=>{var U=Le(),ne=$e(U);{var q=re=>{var te=In("Playlists");b(re,te)},G=re=>{var te=Le(),me=$e(te);{var Z=C=>{var F=In("Search");b(C,F)},oe=C=>{var F=Le(),se=$e(F);{var he=pe=>{var Pe=In("Queue");b(pe,Pe)},xe=pe=>{var Pe=Le(),fe=$e(Pe);{var ce=Se=>{var Ae=In("Favorites");b(Se,Ae)},we=Se=>{var Ae=In();ve(Ve=>de(Ae,Ve),[()=>(s()||"Library").charAt(0).toUpperCase()+(s()||"library").slice(1)]),b(Se,Ae)};J(fe,Se=>{s()==="favorites"?Se(ce):Se(we,!1)},!0)}b(pe,Pe)};J(se,pe=>{s()==="queue"?pe(he):pe(xe,!1)},!0)}b(C,F)};J(me,C=>{s()==="search"?C(Z):C(oe,!1)},!0)}b(re,te)};J(ne,re=>{s()==="playlists"?re(q):re(G,!1)},!0)}b(W,U)};J(I,W=>{s()==="radio"?W(V):W(Y,!1)})}b($,T)};J(N,$=>{n().length>1?$(H):$(O,!1)})}var Q=x(_,2),ae=p(Q),M=p(ae);{var m=$=>{vu($,{})},B=$=>{var T=Le(),I=$e(T);{var V=W=>{rf(W,{})},Y=W=>{var U=Le(),ne=$e(U);{var q=re=>{yu(re,{})},G=re=>{var te=Le(),me=$e(te);{var Z=C=>{zu(C,{})},oe=C=>{eu(C,{get activeCategory(){return s()}})};J(me,C=>{s()==="search"?C(Z):C(oe,!1)},!0)}b(re,te)};J(ne,re=>{s()==="playlists"||s()==="favorites"?re(q):re(G,!1)},!0)}b(W,U)};J(I,W=>{s()==="queue"?W(V):W(Y,!1)},!0)}b($,T)};J(M,$=>{s()==="radio"?$(m):$(B,!1)})}var j=x(v,2);Bu(j,{});var z=x(u,2);{var P=$=>{Qu($,{})};J(z,$=>{i()&&$(P)})}D("click",k,()=>g(f,!0)),b(e,o),tt(),l()}const Sa={init(){this.handleHashChange(),window.addEventListener("hashchange",()=>this.handleHashChange())},handleHashChange(){let e=window.location.hash.slice(1);for(;e.startsWith("/");)e=e.slice(1);if(!e){(ge(gt).length>1||ge(ut)==="search")&&(this.setRootTab("artists"),window.location.hash="/artists");return}let t,n;const r=e.indexOf("/");r===-1?(t=e,n=null):(t=e.slice(0,r),n=e.slice(r+1));const s=n?decodeURIComponent(n):null,c=Jl()||(s?{name:s,displayName:s}:null);switch(console.log(`[Router] Match: ${t}, Param: ${s}`),t){case"queue":this.setRootTab("queue");break;case"radio":this.setRootTab("radio");break;case"playlists":this.setRootTab("playlists");break;case"favorites":ut.set("favorites"),gt.set([{view:"root"},{view:"details",data:{name:"Favorites",displayName:"Favorites"}}]);break;case"artists":this.setRootTab("artists");break;case"albums":this.setRootTab("albums");break;case"search":ut.set("search"),s&&Hr.set(s),gt.set([{view:"root"}]);break;case"album":ut.set("albums"),gt.set([{view:"root"},{view:"tracks_by_album",data:c}]);break;case"artist":ut.set("artists"),gt.set([{view:"root"},{view:"albums_by_artist",data:c}]);break;case"playlist":ut.set("playlists"),gt.set([{view:"root"},{view:"details",data:c}]);break;default:console.warn(`[Router] Unknown route: ${t}`),this.setRootTab("artists");break}},setRootTab(e){ut.set(e),gt.set([{view:"root"}])},updateUrl(e,t){let n="";if(e==="root"){const r=ge(ut);if(r==="search"){const s=ge(Hr);n=s?`search/${encodeURIComponent(s)}`:"search"}else n=r}else if(e==="details"){const r=t.name||t;r==="Favorites"?n="favorites":n=`playlist/${encodeURIComponent(r)}`}else if(e==="albums_by_artist"){const r=t.name||t;n=`artist/${encodeURIComponent(r)}`}else if(e==="tracks_by_album"){const r=t.name||t;n=`album/${encodeURIComponent(r)}`}else e==="queue"&&(n="queue");if(n){const r=`#/${n}`;decodeURIComponent(window.location.hash)!==decodeURIComponent(r)&&(window.location.hash=`/${n}`)}}};function uf(e,t){et(t,!1),rr(async()=>{Sa.init(),Zl((n,r)=>{Sa.updateUrl(n,r)}),xi(),Ns.loadRadioStations();try{const n=await qn.getArtists();n.length>0?console.log(`[App] Database ready. Loaded ${n.length} artists from cache.`):(console.log("[App] Database empty. Starting initial sync..."),Ns.syncLibrary())}catch(n){console.error("[App] DB Check failed:",n),Me("Local DB error. Please update library manually.","error")}}),it(),cf(e,{}),tt()}Bo(uf,{target:document.getElementById("app")});
