(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function a(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=a(n);fetch(n.href,i)}})();const Js=!1;var ns=Array.isArray,Po=Array.prototype.indexOf,Ls=Array.from,$i=Object.defineProperty,Sr=Object.getOwnPropertyDescriptor,Mi=Object.getOwnPropertyDescriptors,Lo=Object.prototype,zo=Array.prototype,wn=Object.getPrototypeOf,Yn=Object.isExtensible;function Ro(e){return typeof e=="function"}const Jt=()=>{};function Io(e){return e()}function ks(e){for(var t=0;t<e.length;t++)e[t]()}function Ai(){var e,t,a=new Promise((s,n)=>{e=s,t=n});return{promise:a,resolve:e,reject:t}}const Rt=2,kn=4,zs=8,jo=1<<24,ka=16,Na=32,ur=64,Rs=128,va=512,Lt=1024,Xt=2048,ua=4096,aa=8192,La=16384,Is=32768,or=65536,Un=1<<17,Ci=1<<18,Lr=1<<19,Pi=1<<20,Ma=1<<25,lr=32768,en=1<<21,xn=1<<22,Ha=1<<23,za=Symbol("$state"),No=Symbol("legacy props"),Do=Symbol(""),wr=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Sn(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Oo(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Fo(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function qo(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Bo(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Yo(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Uo(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function Ho(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Vo(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Wo(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Qo(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Xo=1,Ko=2,Li=4,Go=8,Zo=16,Jo=1,el=2,tl=4,al=8,rl=16,sl=1,nl=2,il=4,ol=1,ll=2,jt=Symbol(),cl="http://www.w3.org/1999/xhtml";function dl(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function vl(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function zi(e){return e===this.v}function En(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function Ri(e){return!En(e,this.v)}let zr=!1,ul=!1;function fl(){zr=!0}let bt=null;function Tr(e){bt=e}function At(e,t=!1,a){bt={p:bt,i:!1,c:null,e:null,s:e,x:null,l:zr&&!t?{s:null,u:null,$:[]}:null}}function Ct(e){var t=bt,a=t.e;if(a!==null){t.e=null;for(var s of a)Ki(s)}return t.i=!0,bt=t.p,{}}function is(){return!zr||bt!==null&&bt.l===null}let Za=[];function Ii(){var e=Za;Za=[],ks(e)}function fr(e){if(Za.length===0&&!Yr){var t=Za;queueMicrotask(()=>{t===Za&&Ii()})}Za.push(e)}function hl(){for(;Za.length>0;)Ii()}function ji(e){var t=dt;if(t===null)return lt.f|=Ha,e;if((t.f&Is)===0){if((t.f&Rs)===0)throw e;t.b.error(e)}else $r(e,t)}function $r(e,t){for(;t!==null;){if((t.f&Rs)!==0)try{t.b.error(e);return}catch(a){e=a}t=t.parent}throw e}const vs=new Set;let ct=null,Br=null,ia=null,sa=[],js=null,tn=!1,Yr=!1;class _a{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#a=0;#r=0;#l=null;#n=new Set;#s=new Set;skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#r>0}process(t){sa=[],Br=null,this.apply();var a={parent:null,effect:null,effects:[],render_effects:[]};for(const s of t)this.#i(s,a);this.is_fork||this.#d(),this.is_deferred()?(this.#o(a.effects),this.#o(a.render_effects)):(Br=this,ct=null,Hn(a.render_effects),Hn(a.effects),Br=null,this.#l?.resolve()),ia=null}#i(t,a){t.f^=Lt;for(var s=t.first;s!==null;){var n=s.f,i=(n&(Na|ur))!==0,l=i&&(n&Lt)!==0,o=l||(n&aa)!==0||this.skipped_effects.has(s);if((s.f&Rs)!==0&&s.b?.is_pending()&&(a={parent:a,effect:s,effects:[],render_effects:[]}),!o&&s.fn!==null){i?s.f^=Lt:(n&kn)!==0?a.effects.push(s):Ir(s)&&((s.f&ka)!==0&&this.#n.add(s),Mr(s));var u=s.first;if(u!==null){s=u;continue}}var d=s.parent;for(s=s.next;s===null&&d!==null;)d===a.effect&&(this.#o(a.effects),this.#o(a.render_effects),a=a.parent),s=d.next,d=d.parent}}#o(t){for(const a of t)(a.f&Xt)!==0?this.#n.add(a):(a.f&ua)!==0&&this.#s.add(a),this.#c(a.deps),zt(a,Lt)}#c(t){if(t!==null)for(const a of t)(a.f&Rt)===0||(a.f&lr)===0||(a.f^=lr,this.#c(a.deps))}capture(t,a){this.previous.has(t)||this.previous.set(t,a),(t.f&Ha)===0&&(this.current.set(t,t.v),ia?.set(t,t.v))}activate(){ct=this,this.apply()}deactivate(){ct===this&&(ct=null,ia=null)}flush(){if(this.activate(),sa.length>0){if(Ni(),ct!==null&&ct!==this)return}else this.#a===0&&this.process([]);this.deactivate()}discard(){for(const t of this.#t)t(this);this.#t.clear()}#d(){if(this.#r===0){for(const t of this.#e)t();this.#e.clear()}this.#a===0&&this.#v()}#v(){if(vs.size>1){this.previous.clear();var t=ia,a=!0,s={parent:null,effect:null,effects:[],render_effects:[]};for(const i of vs){if(i===this){a=!1;continue}const l=[];for(const[u,d]of this.current){if(i.current.has(u))if(a&&d!==i.current.get(u))i.current.set(u,d);else continue;l.push(u)}if(l.length===0)continue;const o=[...i.current.keys()].filter(u=>!this.current.has(u));if(o.length>0){var n=sa;sa=[];const u=new Set,d=new Map;for(const v of l)Di(v,o,u,d);if(sa.length>0){ct=i,i.apply();for(const v of sa)i.#i(v,s);i.deactivate()}sa=n}}ct=null,ia=t}this.committed=!0,vs.delete(this)}increment(t){this.#a+=1,t&&(this.#r+=1)}decrement(t){this.#a-=1,t&&(this.#r-=1),this.revive()}revive(){for(const t of this.#n)this.#s.delete(t),zt(t,Xt),cr(t);for(const t of this.#s)zt(t,ua),cr(t);this.flush()}oncommit(t){this.#e.add(t)}ondiscard(t){this.#t.add(t)}settled(){return(this.#l??=Ai()).promise}static ensure(){if(ct===null){const t=ct=new _a;vs.add(ct),Yr||_a.enqueue(()=>{ct===t&&t.flush()})}return ct}static enqueue(t){fr(t)}apply(){}}function pl(e){var t=Yr;Yr=!0;try{for(var a;;){if(hl(),sa.length===0&&(ct?.flush(),sa.length===0))return js=null,a;Ni()}}finally{Yr=t}}function Ni(){var e=ar;tn=!0;var t=null;try{var a=0;for(Ss(!0);sa.length>0;){var s=_a.ensure();if(a++>1e3){var n,i;gl()}s.process(sa),Va.clear()}}finally{tn=!1,Ss(e),js=null}}function gl(){try{Yo()}catch(e){$r(e,js)}}let Ta=null;function Hn(e){var t=e.length;if(t!==0){for(var a=0;a<t;){var s=e[a++];if((s.f&(La|aa))===0&&Ir(s)&&(Ta=new Set,Mr(s),s.deps===null&&s.first===null&&s.nodes===null&&(s.teardown===null&&s.ac===null?eo(s):s.fn=null),Ta?.size>0)){Va.clear();for(const n of Ta){if((n.f&(La|aa))!==0)continue;const i=[n];let l=n.parent;for(;l!==null;)Ta.has(l)&&(Ta.delete(l),i.push(l)),l=l.parent;for(let o=i.length-1;o>=0;o--){const u=i[o];(u.f&(La|aa))===0&&Mr(u)}}Ta.clear()}}Ta=null}}function Di(e,t,a,s){if(!a.has(e)&&(a.add(e),e.reactions!==null))for(const n of e.reactions){const i=n.f;(i&Rt)!==0?Di(n,t,a,s):(i&(xn|ka))!==0&&(i&Xt)===0&&Oi(n,t,s)&&(zt(n,Xt),cr(n))}}function Oi(e,t,a){const s=a.get(e);if(s!==void 0)return s;if(e.deps!==null)for(const n of e.deps){if(t.includes(n))return!0;if((n.f&Rt)!==0&&Oi(n,t,a))return a.set(n,!0),!0}return a.set(e,!1),!1}function cr(e){for(var t=js=e;t.parent!==null;){t=t.parent;var a=t.f;if(tn&&t===dt&&(a&ka)!==0&&(a&Ci)===0)return;if((a&(ur|Na))!==0){if((a&Lt)===0)return;t.f^=Lt}}sa.push(t)}function _l(e){let t=0,a=dr(0),s;return()=>{Xr()&&(r(a),Rr(()=>(t===0&&(s=_(()=>e(()=>Ur(a)))),t+=1,()=>{fr(()=>{t-=1,t===0&&(s?.(),s=void 0,Ur(a))})})))}}var ml=or|Lr|Rs;function bl(e,t,a){new yl(e,t,a)}class yl{parent;#e=!1;#t;#a=null;#r;#l;#n;#s=null;#i=null;#o=null;#c=null;#d=null;#v=0;#u=0;#h=!1;#f=null;#b=_l(()=>(this.#f=dr(this.#v),()=>{this.#f=null}));constructor(t,a,s){this.#t=t,this.#r=a,this.#l=s,this.parent=dt.b,this.#e=!!this.#r.pending,this.#n=$n(()=>{dt.b=this;{var n=this.#_();try{this.#s=na(()=>s(n))}catch(i){this.error(i)}this.#u>0?this.#g():this.#e=!1}return()=>{this.#d?.remove()}},ml)}#y(){try{this.#s=na(()=>this.#l(this.#t))}catch(t){this.error(t)}this.#e=!1}#w(){const t=this.#r.pending;t&&(this.#i=na(()=>t(this.#t)),_a.enqueue(()=>{var a=this.#_();this.#s=this.#p(()=>(_a.ensure(),na(()=>this.#l(a)))),this.#u>0?this.#g():(tr(this.#i,()=>{this.#i=null}),this.#e=!1)}))}#_(){var t=this.#t;return this.#e&&(this.#d=Ra(),this.#t.before(this.#d),t=this.#d),t}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#r.pending}#p(t){var a=dt,s=lt,n=bt;wa(this.#n),Wt(this.#n),Tr(this.#n.ctx);try{return t()}catch(i){return ji(i),null}finally{wa(a),Wt(s),Tr(n)}}#g(){const t=this.#r.pending;this.#s!==null&&(this.#c=document.createDocumentFragment(),this.#c.append(this.#d),ro(this.#s,this.#c)),this.#i===null&&(this.#i=na(()=>t(this.#t)))}#m(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#m(t);return}this.#u+=t,this.#u===0&&(this.#e=!1,this.#i&&tr(this.#i,()=>{this.#i=null}),this.#c&&(this.#t.before(this.#c),this.#c=null))}update_pending_count(t){this.#m(t),this.#v+=t,this.#f&&vr(this.#f,this.#v)}get_effect_pending(){return this.#b(),r(this.#f)}error(t){var a=this.#r.onerror;let s=this.#r.failed;if(this.#h||!a&&!s)throw t;this.#s&&(Qt(this.#s),this.#s=null),this.#i&&(Qt(this.#i),this.#i=null),this.#o&&(Qt(this.#o),this.#o=null);var n=!1,i=!1;const l=()=>{if(n){vl();return}n=!0,i&&Qo(),_a.ensure(),this.#v=0,this.#o!==null&&tr(this.#o,()=>{this.#o=null}),this.#e=this.has_pending_snippet(),this.#s=this.#p(()=>(this.#h=!1,na(()=>this.#l(this.#t)))),this.#u>0?this.#g():this.#e=!1};var o=lt;try{Wt(null),i=!0,a?.(t,l),i=!1}catch(u){$r(u,this.#n&&this.#n.parent)}finally{Wt(o)}s&&fr(()=>{this.#o=this.#p(()=>{_a.ensure(),this.#h=!0;try{return na(()=>{s(this.#t,()=>t,()=>l)})}catch(u){return $r(u,this.#n.parent),null}finally{this.#h=!1}})})}}function wl(e,t,a,s){const n=is()?os:gt;if(a.length===0&&e.length===0){s(t.map(n));return}var i=ct,l=dt,o=kl();function u(){Promise.all(a.map(d=>xl(d))).then(d=>{o();try{s([...t.map(n),...d])}catch(v){(l.f&La)===0&&$r(v,l)}i?.deactivate(),xs()}).catch(d=>{$r(d,l)})}e.length>0?Promise.all(e).then(()=>{o();try{return u()}finally{i?.deactivate(),xs()}}):u()}function kl(){var e=dt,t=lt,a=bt,s=ct;return function(i=!0){wa(e),Wt(t),Tr(a),i&&s?.activate()}}function xs(){wa(null),Wt(null),Tr(null)}function os(e){var t=Rt|Xt,a=lt!==null&&(lt.f&Rt)!==0?lt:null;return dt!==null&&(dt.f|=Lr),{ctx:bt,deps:null,effects:null,equals:zi,f:t,fn:e,reactions:null,rv:0,v:jt,wv:0,parent:a??dt,ac:null}}function xl(e,t){let a=dt;a===null&&Oo();var s=a.b,n=void 0,i=dr(jt),l=!lt,o=new Map;return Rl(()=>{var u=Ai();n=u.promise;try{Promise.resolve(e()).then(u.resolve,u.reject).then(()=>{d===ct&&d.committed&&d.deactivate(),xs()})}catch(f){u.reject(f),xs()}var d=ct;if(l){var v=!s.is_pending();s.update_pending_count(1),d.increment(v),o.get(d)?.reject(wr),o.delete(d),o.set(d,u)}const p=(f,h=void 0)=>{if(d.activate(),h)h!==wr&&(i.f|=Ha,vr(i,h));else{(i.f&Ha)!==0&&(i.f^=Ha),vr(i,f);for(const[E,M]of o){if(o.delete(E),E===d)break;M.reject(wr)}}l&&(s.update_pending_count(-1),d.decrement(v))};u.promise.then(p,f=>p(null,f||"unknown"))}),cs(()=>{for(const u of o.values())u.reject(wr)}),new Promise(u=>{function d(v){function p(){v===n?u(i):d(n)}v.then(p,p)}d(n)})}function Nr(e){const t=os(e);return so(t),t}function gt(e){const t=os(e);return t.equals=Ri,t}function Fi(e){var t=e.effects;if(t!==null){e.effects=null;for(var a=0;a<t.length;a+=1)Qt(t[a])}}function Sl(e){for(var t=e.parent;t!==null;){if((t.f&Rt)===0)return(t.f&La)===0?t:null;t=t.parent}return null}function Tn(e){var t,a=dt;wa(Sl(e));try{e.f&=~lr,Fi(e),t=lo(e)}finally{wa(a)}return t}function qi(e){var t=Tn(e);if(e.equals(t)||(ct?.is_fork||(e.v=t),e.wv=io()),!pr)if(ia!==null)(Xr()||ct?.is_fork)&&ia.set(e,t);else{var a=(e.f&va)===0?ua:Lt;zt(e,a)}}let an=new Set;const Va=new Map;let Bi=!1;function dr(e,t){var a={f:0,v:e,reactions:null,equals:zi,rv:0,wv:0};return a}function Oa(e,t){const a=dr(e);return so(a),a}function $(e,t=!1,a=!0){const s=dr(e);return t||(s.equals=Ri),zr&&a&&bt!==null&&bt.l!==null&&(bt.l.s??=[]).push(s),s}function us(e,t){return m(e,_(()=>r(e))),t}function m(e,t,a=!1){lt!==null&&(!ma||(lt.f&Un)!==0)&&is()&&(lt.f&(Rt|ka|xn|Un))!==0&&!Ia?.includes(e)&&Wo();let s=a?kr(t):t;return vr(e,s)}function vr(e,t){if(!e.equals(t)){var a=e.v;pr?Va.set(e,t):Va.set(e,a),e.v=t;var s=_a.ensure();s.capture(e,a),(e.f&Rt)!==0&&((e.f&Xt)!==0&&Tn(e),zt(e,(e.f&va)!==0?Lt:ua)),e.wv=io(),Yi(e,Xt),is()&&dt!==null&&(dt.f&Lt)!==0&&(dt.f&(Na|ur))===0&&(ra===null?Dl([e]):ra.push(e)),!s.is_fork&&an.size>0&&!Bi&&El()}return t}function El(){Bi=!1;var e=ar;Ss(!0);const t=Array.from(an);try{for(const a of t)(a.f&Lt)!==0&&zt(a,ua),Ir(a)&&Mr(a)}finally{Ss(e)}an.clear()}function Ur(e){m(e,e.v+1)}function Yi(e,t){var a=e.reactions;if(a!==null)for(var s=is(),n=a.length,i=0;i<n;i++){var l=a[i],o=l.f;if(!(!s&&l===dt)){var u=(o&Xt)===0;if(u&&zt(l,t),(o&Rt)!==0){var d=l;ia?.delete(d),(o&lr)===0&&(o&va&&(l.f|=lr),Yi(d,ua))}else u&&((o&ka)!==0&&Ta!==null&&Ta.add(l),cr(l))}}}function kr(e){if(typeof e!="object"||e===null||za in e)return e;const t=wn(e);if(t!==Lo&&t!==zo)return e;var a=new Map,s=ns(e),n=Oa(0),i=rr,l=o=>{if(rr===i)return o();var u=lt,d=rr;Wt(null),Xn(i);var v=o();return Wt(u),Xn(d),v};return s&&a.set("length",Oa(e.length)),new Proxy(e,{defineProperty(o,u,d){(!("value"in d)||d.configurable===!1||d.enumerable===!1||d.writable===!1)&&Ho();var v=a.get(u);return v===void 0?v=l(()=>{var p=Oa(d.value);return a.set(u,p),p}):m(v,d.value,!0),!0},deleteProperty(o,u){var d=a.get(u);if(d===void 0){if(u in o){const v=l(()=>Oa(jt));a.set(u,v),Ur(n)}}else m(d,jt),Ur(n);return!0},get(o,u,d){if(u===za)return e;var v=a.get(u),p=u in o;if(v===void 0&&(!p||Sr(o,u)?.writable)&&(v=l(()=>{var h=kr(p?o[u]:jt),E=Oa(h);return E}),a.set(u,v)),v!==void 0){var f=r(v);return f===jt?void 0:f}return Reflect.get(o,u,d)},getOwnPropertyDescriptor(o,u){var d=Reflect.getOwnPropertyDescriptor(o,u);if(d&&"value"in d){var v=a.get(u);v&&(d.value=r(v))}else if(d===void 0){var p=a.get(u),f=p?.v;if(p!==void 0&&f!==jt)return{enumerable:!0,configurable:!0,value:f,writable:!0}}return d},has(o,u){if(u===za)return!0;var d=a.get(u),v=d!==void 0&&d.v!==jt||Reflect.has(o,u);if(d!==void 0||dt!==null&&(!v||Sr(o,u)?.writable)){d===void 0&&(d=l(()=>{var f=v?kr(o[u]):jt,h=Oa(f);return h}),a.set(u,d));var p=r(d);if(p===jt)return!1}return v},set(o,u,d,v){var p=a.get(u),f=u in o;if(s&&u==="length")for(var h=d;h<p.v;h+=1){var E=a.get(h+"");E!==void 0?m(E,jt):h in o&&(E=l(()=>Oa(jt)),a.set(h+"",E))}if(p===void 0)(!f||Sr(o,u)?.writable)&&(p=l(()=>Oa(void 0)),m(p,kr(d)),a.set(u,p));else{f=p.v!==jt;var M=l(()=>kr(d));m(p,M)}var w=Reflect.getOwnPropertyDescriptor(o,u);if(w?.set&&w.set.call(v,d),!f){if(s&&typeof u=="string"){var x=a.get("length"),U=Number(u);Number.isInteger(U)&&U>=x.v&&m(x,U+1)}Ur(n)}return!0},ownKeys(o){r(n);var u=Reflect.ownKeys(o).filter(p=>{var f=a.get(p);return f===void 0||f.v!==jt});for(var[d,v]of a)v.v!==jt&&!(d in o)&&u.push(d);return u},setPrototypeOf(){Vo()}})}function Vn(e){try{if(e!==null&&typeof e=="object"&&za in e)return e[za]}catch{}return e}function Tl(e,t){return Object.is(Vn(e),Vn(t))}var qa,Ui,Hi,Vi;function $l(){if(qa===void 0){qa=window,Ui=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,a=Text.prototype;Hi=Sr(t,"firstChild").get,Vi=Sr(t,"nextSibling").get,Yn(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Yn(a)&&(a.__t=void 0)}}function Ra(e=""){return document.createTextNode(e)}function Ba(e){return Hi.call(e)}function ls(e){return Vi.call(e)}function c(e,t){return Ba(e)}function Oe(e,t=!1){{var a=Ba(e);return a instanceof Comment&&a.data===""?ls(a):a}}function g(e,t=1,a=!1){let s=e;for(;t--;)s=ls(s);return s}function Ml(e){e.textContent=""}function Wi(){return!1}let Wn=!1;function Al(){Wn||(Wn=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function Cl(e,t,a,s=!0){s&&a();for(var n of t)e.addEventListener(n,a);cs(()=>{for(var i of t)e.removeEventListener(i,a)})}function hr(e){var t=lt,a=dt;Wt(null),wa(null);try{return e()}finally{Wt(t),wa(a)}}function Qi(e,t,a,s=a){e.addEventListener(t,()=>hr(a));const n=e.__on_r;n?e.__on_r=()=>{n(),s(!0)}:e.__on_r=()=>s(!0),Al()}function Xi(e){dt===null&&(lt===null&&Bo(),qo()),pr&&Fo()}function Pl(e,t){var a=t.last;a===null?t.last=t.first=e:(a.next=e,e.prev=a,t.last=e)}function xa(e,t,a){var s=dt;s!==null&&(s.f&aa)!==0&&(e|=aa);var n={ctx:bt,deps:null,nodes:null,f:e|Xt|va,first:null,fn:t,last:null,next:null,parent:s,b:s&&s.b,prev:null,teardown:null,wv:0,ac:null};if(a)try{Mr(n),n.f|=Is}catch(o){throw Qt(n),o}else t!==null&&cr(n);var i=n;if(a&&i.deps===null&&i.teardown===null&&i.nodes===null&&i.first===i.last&&(i.f&Lr)===0&&(i=i.first,(e&ka)!==0&&(e&or)!==0&&i!==null&&(i.f|=or)),i!==null&&(i.parent=s,s!==null&&Pl(i,s),lt!==null&&(lt.f&Rt)!==0&&(e&ur)===0)){var l=lt;(l.effects??=[]).push(i)}return n}function Xr(){return lt!==null&&!ma}function cs(e){const t=xa(zs,null,!1);return zt(t,Lt),t.teardown=e,t}function rn(e){Xi();var t=dt.f,a=!lt&&(t&Na)!==0&&(t&Is)===0;if(a){var s=bt;(s.e??=[]).push(e)}else return Ki(e)}function Ki(e){return xa(kn|Pi,e,!1)}function Ll(e){return Xi(),xa(zs|Pi,e,!0)}function zl(e){_a.ensure();const t=xa(ur|Lr,e,!0);return(a={})=>new Promise(s=>{a.outro?tr(t,()=>{Qt(t),s(void 0)}):(Qt(t),s(void 0))})}function Vt(e){return xa(kn,e,!1)}function ee(e,t){var a=bt,s={effect:null,ran:!1,deps:e};a.l.$.push(s),s.effect=Rr(()=>{e(),!s.ran&&(s.ran=!0,_(t))})}function Gt(){var e=bt;Rr(()=>{for(var t of e.l.$){t.deps();var a=t.effect;(a.f&Lt)!==0&&zt(a,ua),Ir(a)&&Mr(a),t.ran=!1}})}function Rl(e){return xa(xn|Lr,e,!0)}function Rr(e,t=0){return xa(zs|t,e,!0)}function oe(e,t=[],a=[],s=[]){wl(s,t,a,n=>{xa(zs,()=>e(...n.map(r)),!0)})}function $n(e,t=0){var a=xa(ka|t,e,!0);return a}function na(e){return xa(Na|Lr,e,!0)}function Gi(e){var t=e.teardown;if(t!==null){const a=pr,s=lt;Qn(!0),Wt(null);try{t.call(null)}finally{Qn(a),Wt(s)}}}function Zi(e,t=!1){var a=e.first;for(e.first=e.last=null;a!==null;){const n=a.ac;n!==null&&hr(()=>{n.abort(wr)});var s=a.next;(a.f&ur)!==0?a.parent=null:Qt(a,t),a=s}}function Il(e){for(var t=e.first;t!==null;){var a=t.next;(t.f&Na)===0&&Qt(t),t=a}}function Qt(e,t=!0){var a=!1;(t||(e.f&Ci)!==0)&&e.nodes!==null&&e.nodes.end!==null&&(Ji(e.nodes.start,e.nodes.end),a=!0),Zi(e,t&&!a),Es(e,0),zt(e,La);var s=e.nodes&&e.nodes.t;if(s!==null)for(const i of s)i.stop();Gi(e);var n=e.parent;n!==null&&n.first!==null&&eo(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function Ji(e,t){for(;e!==null;){var a=e===t?null:ls(e);e.remove(),e=a}}function eo(e){var t=e.parent,a=e.prev,s=e.next;a!==null&&(a.next=s),s!==null&&(s.prev=a),t!==null&&(t.first===e&&(t.first=s),t.last===e&&(t.last=a))}function tr(e,t,a=!0){var s=[];to(e,s,!0);var n=()=>{a&&Qt(e),t&&t()},i=s.length;if(i>0){var l=()=>--i||n();for(var o of s)o.out(l)}else n()}function to(e,t,a){if((e.f&aa)===0){e.f^=aa;var s=e.nodes&&e.nodes.t;if(s!==null)for(const o of s)(o.is_global||a)&&t.push(o);for(var n=e.first;n!==null;){var i=n.next,l=(n.f&or)!==0||(n.f&Na)!==0&&(e.f&ka)!==0;to(n,t,l?a:!1),n=i}}}function Mn(e){ao(e,!0)}function ao(e,t){if((e.f&aa)!==0){e.f^=aa,(e.f&Lt)===0&&(zt(e,Xt),cr(e));for(var a=e.first;a!==null;){var s=a.next,n=(a.f&or)!==0||(a.f&Na)!==0;ao(a,n?t:!1),a=s}var i=e.nodes&&e.nodes.t;if(i!==null)for(const l of i)(l.is_global||t)&&l.in()}}function ro(e,t){if(e.nodes)for(var a=e.nodes.start,s=e.nodes.end;a!==null;){var n=a===s?null:ls(a);t.append(a),a=n}}let yr=null;function jl(e){var t=yr;try{if(yr=new Set,_(e),t!==null)for(var a of yr)t.add(a);return yr}finally{yr=t}}function Nl(e){for(var t of jl(e))vr(t,t.v)}let ar=!1;function Ss(e){ar=e}let pr=!1;function Qn(e){pr=e}let lt=null,ma=!1;function Wt(e){lt=e}let dt=null;function wa(e){dt=e}let Ia=null;function so(e){lt!==null&&(Ia===null?Ia=[e]:Ia.push(e))}let Dt=null,Zt=0,ra=null;function Dl(e){ra=e}let no=1,Kr=0,rr=Kr;function Xn(e){rr=e}function io(){return++no}function Ir(e){var t=e.f;if((t&Xt)!==0)return!0;if(t&Rt&&(e.f&=~lr),(t&ua)!==0){var a=e.deps;if(a!==null)for(var s=a.length,n=0;n<s;n++){var i=a[n];if(Ir(i)&&qi(i),i.wv>e.wv)return!0}(t&va)!==0&&ia===null&&zt(e,Lt)}return!1}function oo(e,t,a=!0){var s=e.reactions;if(s!==null&&!Ia?.includes(e))for(var n=0;n<s.length;n++){var i=s[n];(i.f&Rt)!==0?oo(i,t,!1):t===i&&(a?zt(i,Xt):(i.f&Lt)!==0&&zt(i,ua),cr(i))}}function lo(e){var t=Dt,a=Zt,s=ra,n=lt,i=Ia,l=bt,o=ma,u=rr,d=e.f;Dt=null,Zt=0,ra=null,lt=(d&(Na|ur))===0?e:null,Ia=null,Tr(e.ctx),ma=!1,rr=++Kr,e.ac!==null&&(hr(()=>{e.ac.abort(wr)}),e.ac=null);try{e.f|=en;var v=e.fn,p=v(),f=e.deps;if(Dt!==null){var h;if(Es(e,Zt),f!==null&&Zt>0)for(f.length=Zt+Dt.length,h=0;h<Dt.length;h++)f[Zt+h]=Dt[h];else e.deps=f=Dt;if(Xr()&&(e.f&va)!==0)for(h=Zt;h<f.length;h++)(f[h].reactions??=[]).push(e)}else f!==null&&Zt<f.length&&(Es(e,Zt),f.length=Zt);if(is()&&ra!==null&&!ma&&f!==null&&(e.f&(Rt|ua|Xt))===0)for(h=0;h<ra.length;h++)oo(ra[h],e);return n!==null&&n!==e&&(Kr++,ra!==null&&(s===null?s=ra:s.push(...ra))),(e.f&Ha)!==0&&(e.f^=Ha),p}catch(E){return ji(E)}finally{e.f^=en,Dt=t,Zt=a,ra=s,lt=n,Ia=i,Tr(l),ma=o,rr=u}}function Ol(e,t){let a=t.reactions;if(a!==null){var s=Po.call(a,e);if(s!==-1){var n=a.length-1;n===0?a=t.reactions=null:(a[s]=a[n],a.pop())}}a===null&&(t.f&Rt)!==0&&(Dt===null||!Dt.includes(t))&&(zt(t,ua),(t.f&va)!==0&&(t.f^=va,t.f&=~lr),Fi(t),Es(t,0))}function Es(e,t){var a=e.deps;if(a!==null)for(var s=t;s<a.length;s++)Ol(e,a[s])}function Mr(e){var t=e.f;if((t&La)===0){zt(e,Lt);var a=dt,s=ar;dt=e,ar=!0;try{(t&(ka|jo))!==0?Il(e):Zi(e),Gi(e);var n=lo(e);e.teardown=typeof n=="function"?n:null,e.wv=no;var i;Js&&ul&&(e.f&Xt)!==0&&e.deps}finally{ar=s,dt=a}}}async function Er(){await Promise.resolve(),pl()}function r(e){var t=e.f,a=(t&Rt)!==0;if(yr?.add(e),lt!==null&&!ma){var s=dt!==null&&(dt.f&La)!==0;if(!s&&!Ia?.includes(e)){var n=lt.deps;if((lt.f&en)!==0)e.rv<Kr&&(e.rv=Kr,Dt===null&&n!==null&&n[Zt]===e?Zt++:Dt===null?Dt=[e]:Dt.includes(e)||Dt.push(e));else{(lt.deps??=[]).push(e);var i=e.reactions;i===null?e.reactions=[lt]:i.includes(lt)||i.push(lt)}}}if(pr){if(Va.has(e))return Va.get(e);if(a){var l=e,o=l.v;return((l.f&Lt)===0&&l.reactions!==null||vo(l))&&(o=Tn(l)),Va.set(l,o),o}}else a&&(!ia?.has(e)||ct?.is_fork&&!Xr())&&(l=e,Ir(l)&&qi(l),ar&&Xr()&&(l.f&va)===0&&co(l));if(ia?.has(e))return ia.get(e);if((e.f&Ha)!==0)throw e.v;return e.v}function co(e){if(e.deps!==null){e.f^=va;for(const t of e.deps)(t.reactions??=[]).push(e),(t.f&Rt)!==0&&(t.f&va)===0&&co(t)}}function vo(e){if(e.v===jt)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(Va.has(t)||(t.f&Rt)!==0&&vo(t))return!0;return!1}function _(e){var t=ma;try{return ma=!0,e()}finally{ma=t}}const Fl=-7169;function zt(e,t){e.f=e.f&Fl|t}function R(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(za in e)sn(e);else if(!Array.isArray(e))for(let t in e){const a=e[t];typeof a=="object"&&a&&za in a&&sn(a)}}}function sn(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let s in e)try{sn(e[s],t)}catch{}const a=wn(e);if(a!==Object.prototype&&a!==Array.prototype&&a!==Map.prototype&&a!==Set.prototype&&a!==Date.prototype){const s=Mi(a);for(let n in s){const i=s[n].get;if(i)try{i.call(e)}catch{}}}}}const ql=["touchstart","touchmove"];function Bl(e){return ql.includes(e)}const Yl=new Set,Kn=new Set;function Ul(e,t,a,s={}){function n(i){if(s.capture||Or.call(t,i),!i.cancelBubble)return hr(()=>a?.call(this,i))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?fr(()=>{t.addEventListener(e,n,s)}):t.addEventListener(e,n,s),n}function A(e,t,a,s,n){var i={capture:s,passive:n},l=Ul(e,t,a,i);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&cs(()=>{t.removeEventListener(e,l,i)})}let Gn=null;function Or(e){var t=this,a=t.ownerDocument,s=e.type,n=e.composedPath?.()||[],i=n[0]||e.target;Gn=e;var l=0,o=Gn===e&&e.__root;if(o){var u=n.indexOf(o);if(u!==-1&&(t===document||t===window)){e.__root=t;return}var d=n.indexOf(t);if(d===-1)return;u<=d&&(l=u)}if(i=n[l]||e.target,i!==t){$i(e,"currentTarget",{configurable:!0,get(){return i||a}});var v=lt,p=dt;Wt(null),wa(null);try{for(var f,h=[];i!==null;){var E=i.assignedSlot||i.parentNode||i.host||null;try{var M=i["__"+s];M!=null&&(!i.disabled||e.target===i)&&M.call(i,e)}catch(w){f?h.push(w):f=w}if(e.cancelBubble||E===t||E===null)break;i=E}if(f){for(let w of h)queueMicrotask(()=>{throw w});throw f}}finally{e.__root=t,delete e.currentTarget,Wt(v),wa(p)}}}function uo(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function Gr(e,t){var a=dt;a.nodes===null&&(a.nodes={start:e,end:t,a:null,t:null})}function k(e,t){var a=(t&ol)!==0,s=(t&ll)!==0,n,i=!e.startsWith("<!>");return()=>{n===void 0&&(n=uo(i?e:"<!>"+e),a||(n=Ba(n)));var l=s||Ui?document.importNode(n,!0):n.cloneNode(!0);if(a){var o=Ba(l),u=l.lastChild;Gr(o,u)}else Gr(l,l);return l}}function Ea(e=""){{var t=Ra(e+"");return Gr(t,t),t}}function it(){var e=document.createDocumentFragment(),t=document.createComment(""),a=Ra();return e.append(t,a),Gr(t,a),e}function b(e,t){e!==null&&e.before(t)}let nn=!0;function ae(e,t){var a=t==null?"":typeof t=="object"?t+"":t;a!==(e.__t??=e.nodeValue)&&(e.__t=a,e.nodeValue=a+"")}function Hl(e,t){return Vl(e,t)}const gr=new Map;function Vl(e,{target:t,anchor:a,props:s={},events:n,context:i,intro:l=!0}){$l();var o=new Set,u=p=>{for(var f=0;f<p.length;f++){var h=p[f];if(!o.has(h)){o.add(h);var E=Bl(h);t.addEventListener(h,Or,{passive:E});var M=gr.get(h);M===void 0?(document.addEventListener(h,Or,{passive:E}),gr.set(h,1)):gr.set(h,M+1)}}};u(Ls(Yl)),Kn.add(u);var d=void 0,v=zl(()=>{var p=a??t.appendChild(Ra());return bl(p,{pending:()=>{}},f=>{if(i){At({});var h=bt;h.c=i}n&&(s.$$events=n),nn=l,d=e(f,s)||{},nn=!0,i&&Ct()}),()=>{for(var f of o){t.removeEventListener(f,Or);var h=gr.get(f);--h===0?(document.removeEventListener(f,Or),gr.delete(f)):gr.set(f,h)}Kn.delete(u),p!==a&&p.parentNode?.removeChild(p)}});return Wl.set(d,v),d}let Wl=new WeakMap;class Ql{anchor;#e=new Map;#t=new Map;#a=new Map;#r=new Set;#l=!0;constructor(t,a=!0){this.anchor=t,this.#l=a}#n=()=>{var t=ct;if(this.#e.has(t)){var a=this.#e.get(t),s=this.#t.get(a);if(s)Mn(s),this.#r.delete(a);else{var n=this.#a.get(a);n&&(this.#t.set(a,n.effect),this.#a.delete(a),n.fragment.lastChild.remove(),this.anchor.before(n.fragment),s=n.effect)}for(const[i,l]of this.#e){if(this.#e.delete(i),i===t)break;const o=this.#a.get(l);o&&(Qt(o.effect),this.#a.delete(l))}for(const[i,l]of this.#t){if(i===a||this.#r.has(i))continue;const o=()=>{if(Array.from(this.#e.values()).includes(i)){var d=document.createDocumentFragment();ro(l,d),d.append(Ra()),this.#a.set(i,{effect:l,fragment:d})}else Qt(l);this.#r.delete(i),this.#t.delete(i)};this.#l||!s?(this.#r.add(i),tr(l,o,!1)):o()}}};#s=t=>{this.#e.delete(t);const a=Array.from(this.#e.values());for(const[s,n]of this.#a)a.includes(s)||(Qt(n.effect),this.#a.delete(s))};ensure(t,a){var s=ct,n=Wi();if(a&&!this.#t.has(t)&&!this.#a.has(t))if(n){var i=document.createDocumentFragment(),l=Ra();i.append(l),this.#a.set(t,{effect:na(()=>a(l)),fragment:i})}else this.#t.set(t,na(()=>a(this.anchor)));if(this.#e.set(s,t),n){for(const[o,u]of this.#t)o===t?s.skipped_effects.delete(u):s.skipped_effects.add(u);for(const[o,u]of this.#a)o===t?s.skipped_effects.delete(u.effect):s.skipped_effects.add(u.effect);s.oncommit(this.#n),s.ondiscard(this.#s)}else this.#n()}}function P(e,t,a=!1){var s=new Ql(e),n=a?or:0;function i(l,o){s.ensure(l,o)}$n(()=>{var l=!1;t((o,u=!0)=>{l=!0,i(u,o)}),l||i(!1,null)},n)}function Ot(e,t){return t}function Xl(e,t,a){for(var s=[],n=t.length,i,l=t.length,o=0;o<n;o++){let p=t[o];tr(p,()=>{if(i){if(i.pending.delete(p),i.done.add(p),i.pending.size===0){var f=e.outrogroups;on(Ls(i.done)),f.delete(i),f.size===0&&(e.outrogroups=null)}}else l-=1},!1)}if(l===0){var u=s.length===0&&a!==null;if(u){var d=a,v=d.parentNode;Ml(v),v.append(d),e.items.clear()}on(t,!u)}else i={pending:new Set(t),done:new Set},(e.outrogroups??=new Set).add(i)}function on(e,t=!0){for(var a=0;a<e.length;a++)Qt(e[a],t)}var Zn;function kt(e,t,a,s,n,i=null){var l=e,o=new Map,u=(t&Li)!==0;if(u){var d=e;l=d.appendChild(Ra())}var v=null,p=gt(()=>{var x=a();return ns(x)?x:x==null?[]:Ls(x)}),f,h=!0;function E(){w.fallback=v,Kl(w,f,l,t,s),v!==null&&(f.length===0?(v.f&Ma)===0?Mn(v):(v.f^=Ma,Fr(v,null,l)):tr(v,()=>{v=null}))}var M=$n(()=>{f=r(p);for(var x=f.length,U=new Set,ne=ct,ce=Wi(),H=0;H<x;H+=1){var _e=f[H],he=s(_e,H),B=h?null:o.get(he);B?(B.v&&vr(B.v,_e),B.i&&vr(B.i,H),ce&&ne.skipped_effects.delete(B.e)):(B=Gl(o,h?l:Zn??=Ra(),_e,he,H,n,t,a),h||(B.e.f|=Ma),o.set(he,B)),U.add(he)}if(x===0&&i&&!v&&(h?v=na(()=>i(l)):(v=na(()=>i(Zn??=Ra())),v.f|=Ma)),!h)if(ce){for(const[xe,re]of o)U.has(xe)||ne.skipped_effects.add(re.e);ne.oncommit(E),ne.ondiscard(()=>{})}else E();r(p)}),w={effect:M,items:o,outrogroups:null,fallback:v};h=!1}function Kl(e,t,a,s,n){var i=(s&Go)!==0,l=t.length,o=e.items,u=e.effect.first,d,v=null,p,f=[],h=[],E,M,w,x;if(i)for(x=0;x<l;x+=1)E=t[x],M=n(E,x),w=o.get(M).e,(w.f&Ma)===0&&(w.nodes?.a?.measure(),(p??=new Set).add(w));for(x=0;x<l;x+=1){if(E=t[x],M=n(E,x),w=o.get(M).e,e.outrogroups!==null)for(const re of e.outrogroups)re.pending.delete(w),re.done.delete(w);if((w.f&Ma)!==0)if(w.f^=Ma,w===u)Fr(w,null,a);else{var U=v?v.next:u;w===e.effect.last&&(e.effect.last=w.prev),w.prev&&(w.prev.next=w.next),w.next&&(w.next.prev=w.prev),Fa(e,v,w),Fa(e,w,U),Fr(w,U,a),v=w,f=[],h=[],u=v.next;continue}if((w.f&aa)!==0&&(Mn(w),i&&(w.nodes?.a?.unfix(),(p??=new Set).delete(w))),w!==u){if(d!==void 0&&d.has(w)){if(f.length<h.length){var ne=h[0],ce;v=ne.prev;var H=f[0],_e=f[f.length-1];for(ce=0;ce<f.length;ce+=1)Fr(f[ce],ne,a);for(ce=0;ce<h.length;ce+=1)d.delete(h[ce]);Fa(e,H.prev,_e.next),Fa(e,v,H),Fa(e,_e,ne),u=ne,v=_e,x-=1,f=[],h=[]}else d.delete(w),Fr(w,u,a),Fa(e,w.prev,w.next),Fa(e,w,v===null?e.effect.first:v.next),Fa(e,v,w),v=w;continue}for(f=[],h=[];u!==null&&u!==w;)(d??=new Set).add(u),h.push(u),u=u.next;if(u===null)continue}(w.f&Ma)===0&&f.push(w),v=w,u=w.next}if(e.outrogroups!==null){for(const re of e.outrogroups)re.pending.size===0&&(on(Ls(re.done)),e.outrogroups?.delete(re));e.outrogroups.size===0&&(e.outrogroups=null)}if(u!==null||d!==void 0){var he=[];if(d!==void 0)for(w of d)(w.f&aa)===0&&he.push(w);for(;u!==null;)(u.f&aa)===0&&u!==e.fallback&&he.push(u),u=u.next;var B=he.length;if(B>0){var xe=(s&Li)!==0&&l===0?a:null;if(i){for(x=0;x<B;x+=1)he[x].nodes?.a?.measure();for(x=0;x<B;x+=1)he[x].nodes?.a?.fix()}Xl(e,he,xe)}}i&&fr(()=>{if(p!==void 0)for(w of p)w.nodes?.a?.apply()})}function Gl(e,t,a,s,n,i,l,o){var u=(l&Xo)!==0?(l&Zo)===0?$(a,!1,!1):dr(a):null,d=(l&Ko)!==0?dr(n):null;return{v:u,i:d,e:na(()=>(i(t,u??a,d??n,o),()=>{e.delete(s)}))}}function Fr(e,t,a){if(e.nodes)for(var s=e.nodes.start,n=e.nodes.end,i=t&&(t.f&Ma)===0?t.nodes.start:a;s!==null;){var l=ls(s);if(i.before(s),s===n)return;s=l}}function Fa(e,t,a){t===null?e.effect.first=a:t.next=a,a===null?e.effect.last=t:a.prev=t}function G(e,t,a=!1,s=!1,n=!1){var i=e,l="";oe(()=>{var o=dt;if(l!==(l=t()??"")&&(o.nodes!==null&&(Ji(o.nodes.start,o.nodes.end),o.nodes=null),l!=="")){var u=l+"";a?u=`<svg>${u}</svg>`:s&&(u=`<math>${u}</math>`);var d=uo(u);if((a||s)&&(d=Ba(d)),Gr(Ba(d),d.lastChild),a||s)for(;Ba(d);)i.before(Ba(d));else i.before(d)}})}function qr(e,t,a,s,n){var i=t.$$slots?.[a],l=!1;i===!0&&(i=t[a==="default"?"children":a],l=!0),i===void 0||i(e,l?()=>s:s)}const Zl=()=>performance.now(),$a={tick:e=>requestAnimationFrame(e),now:()=>Zl(),tasks:new Set};function fo(){const e=$a.now();$a.tasks.forEach(t=>{t.c(e)||($a.tasks.delete(t),t.f())}),$a.tasks.size!==0&&$a.tick(fo)}function Jl(e){let t;return $a.tasks.size===0&&$a.tick(fo),{promise:new Promise(a=>{$a.tasks.add(t={c:e,f:a})}),abort(){$a.tasks.delete(t)}}}function fs(e,t){hr(()=>{e.dispatchEvent(new CustomEvent(t))})}function ec(e){if(e==="float")return"cssFloat";if(e==="offset")return"cssOffset";if(e.startsWith("--"))return e;const t=e.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(a=>a[0].toUpperCase()+a.slice(1)).join("")}function Jn(e){const t={},a=e.split(";");for(const s of a){const[n,i]=s.split(":");if(!n||i===void 0)break;const l=ec(n.trim());t[l]=i.trim()}return t}const tc=e=>e;function mt(e,t,a,s){var n=(e&sl)!==0,i=(e&nl)!==0,l=n&&i,o=(e&il)!==0,u=l?"both":n?"in":"out",d,v=t.inert,p=t.style.overflow,f,h;function E(){return hr(()=>d??=a()(t,s?.()??{},{direction:u}))}var M={is_global:o,in(){if(t.inert=v,!n){h?.abort(),h?.reset?.();return}i||f?.abort(),fs(t,"introstart"),f=ln(t,E(),h,1,()=>{fs(t,"introend"),f?.abort(),f=d=void 0,t.style.overflow=p})},out(ne){if(!i){ne?.(),d=void 0;return}t.inert=!0,fs(t,"outrostart"),h=ln(t,E(),f,0,()=>{fs(t,"outroend"),ne?.()})},stop:()=>{f?.abort(),h?.abort()}},w=dt;if((w.nodes.t??=[]).push(M),n&&nn){var x=o;if(!x){for(var U=w.parent;U&&(U.f&or)!==0;)for(;(U=U.parent)&&(U.f&ka)===0;);x=!U||(U.f&Is)!==0}x&&Vt(()=>{_(()=>M.in())})}}function ln(e,t,a,s,n){var i=s===1;if(Ro(t)){var l,o=!1;return fr(()=>{if(!o){var w=t({direction:i?"in":"out"});l=ln(e,w,a,s,n)}}),{abort:()=>{o=!0,l?.abort()},deactivate:()=>l.deactivate(),reset:()=>l.reset(),t:()=>l.t()}}if(a?.deactivate(),!t?.duration)return n(),{abort:Jt,deactivate:Jt,reset:Jt,t:()=>s};const{delay:u=0,css:d,tick:v,easing:p=tc}=t;var f=[];if(i&&a===void 0&&(v&&v(0,1),d)){var h=Jn(d(0,1));f.push(h,h)}var E=()=>1-s,M=e.animate(f,{duration:u,fill:"forwards"});return M.onfinish=()=>{M.cancel();var w=a?.t()??1-s;a?.abort();var x=s-w,U=t.duration*Math.abs(x),ne=[];if(U>0){var ce=!1;if(d)for(var H=Math.ceil(U/16.666666666666668),_e=0;_e<=H;_e+=1){var he=w+x*p(_e/H),B=Jn(d(he,1-he));ne.push(B),ce||=B.overflow==="hidden"}ce&&(e.style.overflow="hidden"),E=()=>{var xe=M.currentTime;return w+x*p(xe/U)},v&&Jl(()=>{if(M.playState!=="running")return!1;var xe=E();return v(xe,1-xe),!0})}M=e.animate(ne,{duration:U,fill:"forwards"}),M.onfinish=()=>{E=()=>s,v?.(s,1-s),n()}},{abort:()=>{M&&(M.cancel(),M.effect=null,M.onfinish=Jt)},deactivate:()=>{n=Jt},reset:()=>{s===0&&v?.(1,0)},t:()=>E()}}function An(e,t,a){Vt(()=>{var s=_(()=>t(e,a?.())||{});if(a&&s?.update){var n=!1,i={};Rr(()=>{var l=a();R(l),n&&En(i,l)&&(i=l,s.update(l))}),n=!0}if(s?.destroy)return()=>s.destroy()})}const ei=[...` 	
\r\fÂ \v\uFEFF`];function ac(e,t,a){var s=e==null?"":""+e;if(t&&(s=s?s+" "+t:t),a){for(var n in a)if(a[n])s=s?s+" "+n:n;else if(s.length)for(var i=n.length,l=0;(l=s.indexOf(n,l))>=0;){var o=l+i;(l===0||ei.includes(s[l-1]))&&(o===s.length||ei.includes(s[o]))?s=(l===0?"":s.substring(0,l))+s.substring(o+1):l=o}}return s===""?null:s}function ti(e,t=!1){var a=t?" !important;":";",s="";for(var n in e){var i=e[n];i!=null&&i!==""&&(s+=" "+n+": "+i+a)}return s}function Ys(e){return e[0]!=="-"||e[1]!=="-"?e.toLowerCase():e}function rc(e,t){if(t){var a="",s,n;if(Array.isArray(t)?(s=t[0],n=t[1]):s=t,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var i=!1,l=0,o=!1,u=[];s&&u.push(...Object.keys(s).map(Ys)),n&&u.push(...Object.keys(n).map(Ys));var d=0,v=-1;const M=e.length;for(var p=0;p<M;p++){var f=e[p];if(o?f==="/"&&e[p-1]==="*"&&(o=!1):i?i===f&&(i=!1):f==="/"&&e[p+1]==="*"?o=!0:f==='"'||f==="'"?i=f:f==="("?l++:f===")"&&l--,!o&&i===!1&&l===0){if(f===":"&&v===-1)v=p;else if(f===";"||p===M-1){if(v!==-1){var h=Ys(e.substring(d,v).trim());if(!u.includes(h)){f!==";"&&p++;var E=e.substring(d,p).trim();a+=" "+E+";"}}d=p+1,v=-1}}}}return s&&(a+=ti(s)),n&&(a+=ti(n,!0)),a=a.trim(),a===""?null:a}return e==null?null:String(e)}function rt(e,t,a,s,n,i){var l=e.__className;if(l!==a||l===void 0){var o=ac(a,s,i);o==null?e.removeAttribute("class"):e.className=o,e.__className=a}else if(i&&n!==i)for(var u in i){var d=!!i[u];(n==null||d!==!!n[u])&&e.classList.toggle(u,d)}return i}function Us(e,t={},a,s){for(var n in a){var i=a[n];t[n]!==i&&(a[n]==null?e.style.removeProperty(n):e.style.setProperty(n,i,s))}}function ft(e,t,a,s){var n=e.__style;if(n!==t){var i=rc(t,s);i==null?e.removeAttribute("style"):e.style.cssText=i,e.__style=t}else s&&(Array.isArray(s)?(Us(e,a?.[0],s[0]),Us(e,a?.[1],s[1],"important")):Us(e,a,s));return s}function ho(e,t,a=!1){if(e.multiple){if(t==null)return;if(!ns(t))return dl();for(var s of e.options)s.selected=t.includes(Hr(s));return}for(s of e.options){var n=Hr(s);if(Tl(n,t)){s.selected=!0;return}}(!a||t!==void 0)&&(e.selectedIndex=-1)}function sc(e){var t=new MutationObserver(()=>{ho(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),cs(()=>{t.disconnect()})}function nc(e,t,a=t){var s=new WeakSet,n=!0;Qi(e,"change",i=>{var l=i?"[selected]":":checked",o;if(e.multiple)o=[].map.call(e.querySelectorAll(l),Hr);else{var u=e.querySelector(l)??e.querySelector("option:not([disabled])");o=u&&Hr(u)}a(o),ct!==null&&s.add(ct)}),Vt(()=>{var i=t();if(e===document.activeElement){var l=Br??ct;if(s.has(l))return}if(ho(e,i,n),n&&i===void 0){var o=e.querySelector(":checked");o!==null&&(i=Hr(o),a(i))}e.__value=i,n=!1}),sc(e)}function Hr(e){return"__value"in e?e.__value:e.value}const ic=Symbol("is custom element"),oc=Symbol("is html");function po(e,t){var a=go(e);a.value===(a.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!=="PROGRESS")||(e.value=t??"")}function Ft(e,t,a,s){var n=go(e);n[t]!==(n[t]=a)&&(t==="loading"&&(e[Do]=a),a==null?e.removeAttribute(t):typeof a!="string"&&lc(e).includes(t)?e[t]=a:e.setAttribute(t,a))}function go(e){return e.__attributes??={[ic]:e.nodeName.includes("-"),[oc]:e.namespaceURI===cl}}var ai=new Map;function lc(e){var t=e.getAttribute("is")||e.nodeName,a=ai.get(t);if(a)return a;ai.set(t,a=[]);for(var s,n=e,i=Element.prototype;i!==n;){s=Mi(n);for(var l in s)s[l].set&&a.push(l);n=wn(n)}return a}function sr(e,t,a=t){var s=new WeakSet;Qi(e,"input",async n=>{var i=n?e.defaultValue:e.value;if(i=Hs(e)?Vs(i):i,a(i),ct!==null&&s.add(ct),await Er(),i!==(i=t())){var l=e.selectionStart,o=e.selectionEnd,u=e.value.length;if(e.value=i??"",o!==null){var d=e.value.length;l===o&&o===u&&d>u?(e.selectionStart=d,e.selectionEnd=d):(e.selectionStart=l,e.selectionEnd=Math.min(o,d))}}}),_(t)==null&&e.value&&(a(Hs(e)?Vs(e.value):e.value),ct!==null&&s.add(ct)),Rr(()=>{var n=t();if(e===document.activeElement){var i=Br??ct;if(s.has(i))return}Hs(e)&&n===Vs(e.value)||e.type==="date"&&!n&&!e.value||n!==e.value&&(e.value=n??"")})}function Hs(e){var t=e.type;return t==="number"||t==="range"}function Vs(e){return e===""?null:+e}class Cn{#e=new WeakMap;#t;#a;static entries=new WeakMap;constructor(t){this.#a=t}observe(t,a){var s=this.#e.get(t)||new Set;return s.add(a),this.#e.set(t,s),this.#r().observe(t,this.#a),()=>{var n=this.#e.get(t);n.delete(a),n.size===0&&(this.#e.delete(t),this.#t.unobserve(t))}}#r(){return this.#t??(this.#t=new ResizeObserver(t=>{for(var a of t){Cn.entries.set(a.target,a);for(var s of this.#e.get(a.target)||[])s(a)}}))}}var cc=new Cn({box:"border-box"});function ri(e,t,a){var s=cc.observe(e,()=>a(e[t]));Vt(()=>(_(()=>a(e[t])),s))}function si(e,t){return e===t||e?.[za]===t}function ja(e={},t,a,s){return Vt(()=>{var n,i;return Rr(()=>{n=i,i=[],_(()=>{e!==a(...i)&&(t(e,...i),n&&si(a(...n),e)&&t(null,...n))})}),()=>{fr(()=>{i&&si(a(...i),e)&&t(null,...i)})}}),e}function ni(e,t){Cl(window,["resize"],()=>hr(()=>t(window[e])))}function ta(e){return function(...t){var a=t[0];return a.stopPropagation(),e?.apply(this,t)}}function It(e=!1){const t=bt,a=t.l.u;if(!a)return;let s=()=>R(t.s);if(e){let n=0,i={};const l=os(()=>{let o=!1;const u=t.s;for(const d in u)u[d]!==i[d]&&(i[d]=u[d],o=!0);return o&&n++,n});s=()=>r(l)}a.b.length&&Ll(()=>{ii(t,s),ks(a.b)}),rn(()=>{const n=_(()=>a.m.map(Io));return()=>{for(const i of n)typeof i=="function"&&i()}}),a.a.length&&rn(()=>{ii(t,s),ks(a.a)})}function ii(e,t){if(e.l.s)for(const a of e.l.s)r(a);t()}function Zr(e,t){var a=e.$$events?.[t.type],s=ns(a)?a.slice():a==null?[]:[a];for(var n of s)n.call(this,t)}function Pn(e,t,a){if(e==null)return t(void 0),a&&a(void 0),Jt;const s=_(()=>e.subscribe(t,a));return s.unsubscribe?()=>s.unsubscribe():s}const _r=[];function dc(e,t){return{subscribe:Je(e,t).subscribe}}function Je(e,t=Jt){let a=null;const s=new Set;function n(o){if(En(e,o)&&(e=o,a)){const u=!_r.length;for(const d of s)d[1](),_r.push(d,e);if(u){for(let d=0;d<_r.length;d+=2)_r[d][0](_r[d+1]);_r.length=0}}}function i(o){n(o(e))}function l(o,u=Jt){const d=[o,u];return s.add(d),s.size===1&&(a=t(n,i)||Jt),o(e),()=>{s.delete(d),s.size===0&&a&&(a(),a=null)}}return{set:n,update:i,subscribe:l}}function _o(e,t,a){const s=!Array.isArray(e),n=s?[e]:e;if(!n.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const i=t.length<2;return dc(a,(l,o)=>{let u=!1;const d=[];let v=0,p=Jt;const f=()=>{if(v)return;p();const E=t(s?d[0]:d,l,o);i?l(E):p=typeof E=="function"?E:Jt},h=n.map((E,M)=>Pn(E,w=>{d[M]=w,v&=~(1<<M),u&&f()},()=>{v|=1<<M}));return u=!0,f(),function(){ks(h),p(),u=!1}})}function et(e){let t;return Pn(e,a=>t=a)(),t}let hs=!1,cn=Symbol();function Ee(e,t,a){const s=a[t]??={store:null,source:$(void 0),unsubscribe:Jt};if(s.store!==e&&!(cn in a))if(s.unsubscribe(),s.store=e??null,e==null)s.source.v=void 0,s.unsubscribe=Jt;else{var n=!0;s.unsubscribe=Pn(e,i=>{n?s.source.v=i:m(s.source,i)}),n=!1}return e&&cn in a?et(e):r(s.source)}function oi(e,t){return e.set(t),t}function qt(){const e={};function t(){cs(()=>{for(var a in e)e[a].unsubscribe();$i(e,cn,{enumerable:!1,value:!0})})}return[e,t]}function vc(e,t,a){return e.set(a),t}function uc(e){var t=hs;try{return hs=!1,[e(),hs]}finally{hs=t}}function St(e,t,a,s){var n=!zr||(a&el)!==0,i=(a&al)!==0,l=(a&rl)!==0,o=s,u=!0,d=()=>(u&&(u=!1,o=l?_(s):s),o),v;if(i){var p=za in e||No in e;v=Sr(e,t)?.set??(p&&t in e?ne=>e[t]=ne:void 0)}var f,h=!1;i?[f,h]=uc(()=>e[t]):f=e[t],f===void 0&&s!==void 0&&(f=d(),v&&(n&&Uo(),v(f)));var E;if(n?E=()=>{var ne=e[t];return ne===void 0?d():(u=!0,ne)}:E=()=>{var ne=e[t];return ne!==void 0&&(o=void 0),ne===void 0?o:ne},n&&(a&tl)===0)return E;if(v){var M=e.$$legacy;return(function(ne,ce){return arguments.length>0?((!n||!ce||M||h)&&v(ce?E():ne),ne):E()})}var w=!1,x=((a&Jo)!==0?os:gt)(()=>(w=!1,E()));i&&r(x);var U=dt;return(function(ne,ce){if(arguments.length>0){const H=ce?r(x):n&&i?kr(ne):ne;return m(x,H),w=!0,o!==void 0&&(o=H),ne}return pr&&w||(U.f&La)!==0?x.v:r(x)})}function Da(e){bt===null&&Sn(),zr&&bt.l!==null?hc(bt).m.push(e):rn(()=>{const t=_(e);if(typeof t=="function")return t})}function Ln(e){bt===null&&Sn(),Da(()=>()=>_(e))}function fc(e,t,{bubbles:a=!1,cancelable:s=!1}={}){return new CustomEvent(e,{detail:t,bubbles:a,cancelable:s})}function zn(){const e=bt;return e===null&&Sn(),(t,a,s)=>{const n=e.s.$$events?.[t];if(n){const i=ns(n)?n.slice():[n],l=fc(t,a,s);for(const o of i)o.call(e.x,l);return!l.defaultPrevented}return!0}}function hc(e){var t=e.l;return t.u??={a:[],b:[],m:[]}}const pc="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(pc);fl();const gc=e=>e;function mo(e){const t=e-1;return t*t*t+1}function li(e){const t=typeof e=="string"&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[e,"px"]}function Et(e,{delay:t=0,duration:a=400,easing:s=gc}={}){const n=+getComputedStyle(e).opacity;return{delay:t,duration:a,easing:s,css:i=>`opacity: ${i*n}`}}function bo(e,{delay:t=0,duration:a=400,easing:s=mo,x:n=0,y:i=0,opacity:l=0}={}){const o=getComputedStyle(e),u=+o.opacity,d=o.transform==="none"?"":o.transform,v=u*(1-l),[p,f]=li(n),[h,E]=li(i);return{delay:t,duration:a,easing:s,css:(M,w)=>`
			transform: ${d} translate(${(1-M)*p}${f}, ${(1-M)*h}${E});
			opacity: ${u-v*w}`}}function Rn(e,{delay:t=0,duration:a=400,easing:s=mo,start:n=0,opacity:i=0}={}){const l=getComputedStyle(e),o=+l.opacity,u=l.transform==="none"?"":l.transform,d=1-n,v=o*(1-i);return{delay:t,duration:a,easing:s,css:(p,f)=>`
			transform: ${u} scale(${1-d*f});
			opacity: ${o-v*f}
		`}}const _c='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-arrows-shuffle-2"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 4l3 3l-3 3" /><path d="M18 20l3 -3l-3 -3" /><path d="M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5" /><path d="M3 17h3a5 5 0 0 0 5 -5a5 5 0 0 1 5 -5h5" /></svg>',mc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-deezer"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 16.5h2v.5h-2z" /><path d="M8 16.5h2.5v.5h-2.5z" /><path d="M16 17h-2.5v-.5h2.5z" /><path d="M21.5 17h-2.5v-.5h2.5z" /><path d="M21.5 13h-2.5v.5h2.5z" /><path d="M21.5 9.5h-2.5v.5h2.5z" /><path d="M21.5 6h-2.5v.5h2.5z" /><path d="M16 13h-2.5v.5h2.5z" /><path d="M8 13.5h2.5v-.5h-2.5z" /><path d="M8 9.5h2.5v.5h-2.5z" /></svg>',bc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-compact-down"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 11l8 3l8 -3" /></svg>',yc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-compact-left"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M13 20l-3 -8l3 -8" /></svg>',wc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-left"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 6l-6 6l6 6" /></svg>',ci='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-disc"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0" /><path d="M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M7 12a5 5 0 0 1 5 -5" /><path d="M12 17a5 5 0 0 0 5 -5" /></svg>',kc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-grip-horizontal"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M5 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M12 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M12 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M19 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M19 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /></svg>',xc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-heart"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M19.5 12.572l-7.5 7.428l-7.5 -7.428a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572" /></svg>',Sc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-heart"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6.979 3.074a6 6 0 0 1 4.988 1.425l.037 .033l.034 -.03a6 6 0 0 1 4.733 -1.44l.246 .036a6 6 0 0 1 3.364 10.008l-.18 .185l-.048 .041l-7.45 7.379a1 1 0 0 1 -1.313 .082l-.094 -.082l-7.493 -7.422a6 6 0 0 1 3.176 -10.215z" /></svg>',Ec='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-menu-2"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 6l16 0" /><path d="M4 12l16 0" /><path d="M4 18l16 0" /></svg>',Ws='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-music"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 17a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /><path d="M13 17a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /><path d="M9 17v-13h10v13" /><path d="M9 8h10" /></svg>',Tc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-pause"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z" /><path d="M17 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z" /></svg>',$c='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-player-play"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 4v16l13 -8z" /></svg>',Mc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-play"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 4v16a1 1 0 0 0 1.524 .852l13 -8a1 1 0 0 0 0 -1.704l-13 -8a1 1 0 0 0 -1.524 .852z" /></svg>',Ac='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-skip-back"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M19.496 4.136l-12 7a1 1 0 0 0 0 1.728l12 7a1 1 0 0 0 1.504 -.864v-14a1 1 0 0 0 -1.504 -.864z" /><path d="M4 4a1 1 0 0 1 .993 .883l.007 .117v14a1 1 0 0 1 -1.993 .117l-.007 -.117v-14a1 1 0 0 1 1 -1z" /></svg>',Cc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-skip-forward"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 5v14a1 1 0 0 0 1.504 .864l12 -7a1 1 0 0 0 0 -1.728l-12 -7a1 1 0 0 0 -1.504 .864z" /><path d="M20 4a1 1 0 0 1 .993 .883l.007 .117v14a1 1 0 0 1 -1.993 .117l-.007 -.117v-14a1 1 0 0 1 1 -1z" /></svg>',Pc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-playlist"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0" /><path d="M17 17v-13h4" /><path d="M13 5h-10" /><path d="M3 9l10 0" /><path d="M9 13h-6" /></svg>',Lc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-radio"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3l-9.371 3.749a1 1 0 0 0 -.629 .928v11.323a1 1 0 0 0 1 1h14a1 1 0 0 0 1 -1v-11a1 1 0 0 0 -1 -1h-14.5" /><path d="M4 12h16" /><path d="M7 12v-2" /><path d="M17 16v.01" /><path d="M13 16v.01" /></svg>',zc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-refresh"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4" /><path d="M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4" /></svg>',Rc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-repeat"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 12v-3a3 3 0 0 1 3 -3h13m-3 -3l3 3l-3 3" /><path d="M20 12v3a3 3 0 0 1 -3 3h-13m3 3l-3 -3l3 -3" /></svg>',Ic='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-search"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0" /><path d="M21 21l-6 -6" /></svg>',jc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-settings"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z" /><path d="M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /></svg>',Nc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-trash"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 7l16 0" /><path d="M10 11l0 6" /><path d="M14 11l0 6" /><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12" /><path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3" /></svg>',Dc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 8a5 5 0 0 1 0 8" /><path d="M17.7 5a9 9 0 0 1 0 14" /><path d="M6 15h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l3.5 -4.5a.8 .8 0 0 1 1.5 .5v14a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5" /></svg>',Oc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume-2"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 8a5 5 0 0 1 0 8" /><path d="M6 15h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l3.5 -4.5a.8 .8 0 0 1 1.5 .5v14a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5" /></svg>',Fc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume-3"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 15h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l3.5 -4.5a.8 .8 0 0 1 1.5 .5v14a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5" /><path d="M16 10l4 4m0 -4l-4 4" /></svg>',qc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume-off"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 8a5 5 0 0 1 1.912 4.934m-1.377 2.602a5 5 0 0 1 -.535 .464" /><path d="M17.7 5a9 9 0 0 1 2.362 11.086m-1.676 2.299a9 9 0 0 1 -.686 .615" /><path d="M9.069 5.054l.431 -.554a.8 .8 0 0 1 1.5 .5v2m0 4v8a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l1.294 -1.664" /><path d="M3 3l18 18" /></svg>',Bc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-x"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 6l-12 12" /><path d="M6 6l12 12" /></svg>',Yc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-device-floppy"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2" /><path d="M12 14m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0" /><path d="M14 4l0 4l-6 0l0 -4" /></svg>',Uc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-file-pencil"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3v4a1 1 0 0 0 1 1h4" /><path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z" /><path d="M10 18l5 -5a1.414 1.414 0 0 0 -2 -2l-5 5v2h2z" /></svg>',di='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-plus"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 5l0 14" /><path d="M5 12l14 0" /></svg>',Hc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-circle-check"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0" /><path d="M9 12l2 2l4 -4" /></svg>',Vc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-dots"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /></svg>',Wc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-sort-descending"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 6l9 0" /><path d="M4 12l7 0" /><path d="M4 18l7 0" /><path d="M15 15l3 3l3 -3" /><path d="M18 6l0 12" /></svg>',Qc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-sort-ascending"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 6l7 0" /><path d="M4 12l7 0" /><path d="M4 18l9 0" /><path d="M15 9l3 -3l3 3" /><path d="M18 6l0 12" /></svg>',Xc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-yandex"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 20v-16h-2a4 4 0 0 0 -4 4v1a4 4 0 0 0 4 4h2" /><path d="M9 20l3 -7" /></svg>',y={ARTISTS:Ws,ALBUMS:ci,GENRES:Ws,PLAYLISTS:Pc,RADIO:Lc,SEARCH:Ic,PLAY:Mc,PLAY_OUTLINE:$c,PAUSE:Tc,PREVIOUS:Ac,NEXT:Cc,SHUFFLE:_c,REPEAT:Rc,VOLUME_FULL:Dc,VOLUME_MEDIUM:Oc,VOLUME_MUTE:Fc,VOLUME_OFF:qc,HEART:xc,HEART_FILLED:Sc,SYNC:zc,SETTINGS:jc,CLOSE:Bc,MENU:Ec,BACK:wc,BACK_COMPACT:yc,CHEVRON_DOWN:bc,DRAG_HANDLE:kc,REMOVE:Nc,DEEZER:mc,SAVE:Yc,EDIT:Uc,ADD:di,ACCEPT:Hc,DOTS:Vc,ADD_TO_PLAYLIST:di,ALBUM_LINK:ci,ARTIST_LINK:Ws,SORT_DESC:Wc,SORT_ASC:Qc,YANDEX:Xc};function Ar(e){if(!e||!e.image)return null;if(e.image.startsWith("http"))return e.image;let t="";return e.image==="local"?t=`${e.name}.jpg`:t=e.image,`/imagesw/radio-logos/thumbs/${encodeURIComponent(t)}`}function vi(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}const dn=[{id:"default",label:"Default (Moode Dark)",colors:{"--c-white-10":"rgba(255, 255, 255, 0.1)","--c-white-20":"rgba(255, 255, 255, 0.2)","--c-white-30":"rgba(255, 255, 255, 0.3)","--c-white-50":"rgba(255, 255, 255, 0.5)","--c-white-60":"rgba(255, 255, 255, 0.6)","--c-white-90":"rgba(255, 255, 255, 0.9)","--c-black-20":"rgba(0, 0, 0, 0.2)","--c-black-50":"rgba(0, 0, 0, 0.5)","--c-black-70":"rgba(0, 0, 0, 0.7)","--c-black-80":"rgba(0, 0, 0, 0.8)","--c-black-90":"rgba(0, 0, 0, 0.9)","--c-accent":"#fa2d48","--c-accent-hover":"#ff4d65","--c-text-primary":"#ffffff","--c-text-secondary":"rgba(255, 255, 255, 0.6)","--c-text-muted":"#888888","--c-text-inverse":"#000000","--c-bg-app":"#000000","--c-bg-main":"#121212","--c-bg-sidebar":"#000000","--c-bg-card":"#1a1a1a","--c-bg-placeholder":"rgba(255, 255, 255, 0.1)","--c-bg-glass":"rgba(18, 18, 18, 0.95)","--c-bg-toast":"#333333","--c-heart":"#ff4444","--c-error":"#ff4444","--c-surface-hover":"rgba(255, 255, 255, 0.1)","--c-surface-active":"rgba(255, 255, 255, 0.2)","--c-surface-input":"#1a1a1a","--c-surface-input-focus":"rgba(255, 255, 255, 0.1)","--c-surface-button":"rgba(255, 255, 255, 0.1)","--c-surface-button-hover":"rgba(255, 255, 255, 0.1)","--c-surface-drag-phantom":"#1a1a1a","--c-surface-drag-land":"rgba(255, 255, 255, 0.1)","--c-rail-bg":"rgba(255, 255, 255, 0.2)","--c-rail-bg-hover":"rgba(255, 255, 255, 0.3)","--c-skeleton-base":"rgba(255, 255, 255, 0.1)","--c-border":"rgba(255, 255, 255, 0.1)","--c-border-dim":"rgba(255, 255, 255, 0.1)","--c-border-bright":"rgba(255, 255, 255, 0.2)","--c-border-dashed":"rgba(255, 255, 255, 0.2)","--c-border-dashed-hover":"rgba(255, 255, 255, 0.5)","--c-overlay-dim":"rgba(0, 0, 0, 0.5)","--c-overlay-backdrop":"rgba(0, 0, 0, 0.8)","--c-shadow-card":"rgba(0, 0, 0, 0.3)","--c-shadow-popover":"rgba(0, 0, 0, 0.5)","--c-shadow-header":"rgba(0, 0, 0, 0.5)","--c-shadow-phantom":"rgba(0, 0, 0, 0.7)","--c-shadow-glow-accent":"rgba(250, 45, 72, 0.5)","--c-icon-idle":"#9ca3af","--c-icon-hover":"#ffffff","--c-icon-faint":"rgba(255, 255, 255, 0.5)","--icon-stroke-width":"1.5px","--header-height":"64px","--mini-player-height":"90px","--sidebar-width":"260px","--radius-sm":"4px","--radius-md":"8px","--radius-lg":"12px","--radius-xl":"20px","--radius-full":"9999px","--z-base":"1","--z-dock":"1000","--z-modal":"2000","--z-toast":"3000","--z-drag-item":"9999","--trans-fast":"0.2s ease","--trans-smooth":"0.3s cubic-bezier(0.2, 0.8, 0.2, 1)","--c-pl-0":"#fa2d48","--c-pl-1":"#2d7afa","--c-pl-2":"#2dfa85","--c-pl-3":"#faac2d","--c-pl-4":"#b82dfa","--c-pl-5":"#2dfaf3"}},{id:"gruvbox",label:"Gruvbox Dark",colors:{"--c-white-10":"rgba(251, 241, 199, 0.1)","--c-white-20":"rgba(251, 241, 199, 0.2)","--c-white-30":"rgba(251, 241, 199, 0.3)","--c-white-50":"rgba(251, 241, 199, 0.5)","--c-white-60":"rgba(251, 241, 199, 0.6)","--c-white-90":"rgba(251, 241, 199, 0.9)","--c-black-20":"rgba(40, 40, 40, 0.2)","--c-black-50":"rgba(40, 40, 40, 0.5)","--c-black-70":"rgba(40, 40, 40, 0.7)","--c-black-80":"rgba(40, 40, 40, 0.8)","--c-black-90":"rgba(40, 40, 40, 0.9)","--c-accent":"#d65d0e","--c-accent-hover":"#fe8019","--c-text-primary":"#fbf1c7","--c-text-secondary":"#ebdbb2","--c-text-muted":"#928374","--c-text-inverse":"#282828","--c-bg-app":"#282828","--c-bg-main":"#282828","--c-bg-sidebar":"#282828","--c-bg-card":"#3c3836","--c-bg-placeholder":"#504945","--c-bg-glass":"rgba(40, 40, 40, 0.98)","--c-bg-toast":"#32302f","--c-heart":"#fb4934","--c-error":"#cc241d","--c-surface-hover":"#3c3836","--c-surface-active":"#504945","--c-surface-input":"#3c3836","--c-surface-input-focus":"#504945","--c-surface-button":"rgba(251, 241, 199, 0.1)","--c-surface-button-hover":"rgba(251, 241, 199, 0.2)","--c-surface-drag-phantom":"#504945","--c-surface-drag-land":"rgba(251, 241, 199, 0.1)","--c-rail-bg":"#504945","--c-rail-bg-hover":"#665c54","--c-skeleton-base":"#3c3836","--c-border":"#504945","--c-border-dim":"#3c3836","--c-border-bright":"#665c54","--c-border-dashed":"rgba(168, 153, 132, 0.2)","--c-border-dashed-hover":"rgba(168, 153, 132, 0.5)","--c-overlay-dim":"rgba(40, 40, 40, 0.6)","--c-overlay-backdrop":"rgba(29, 32, 33, 0.8)","--c-shadow-card":"rgba(0, 0, 0, 0.3)","--c-shadow-popover":"rgba(0, 0, 0, 0.5)","--c-shadow-header":"rgba(0, 0, 0, 0.2)","--c-shadow-phantom":"rgba(0, 0, 0, 0.5)","--c-shadow-glow-accent":"rgba(214, 93, 14, 0.3)","--c-icon-idle":"#a89984","--c-icon-hover":"#fbf1c7","--c-icon-faint":"#504945","--icon-stroke-width":"1.5px","--header-height":"64px","--mini-player-height":"90px","--sidebar-width":"260px","--radius-sm":"4px","--radius-md":"8px","--radius-lg":"12px","--radius-xl":"16px","--radius-full":"9999px","--z-base":"1","--z-dock":"1000","--z-modal":"2000","--z-toast":"3000","--z-drag-item":"9999","--trans-fast":"0.2s ease","--trans-smooth":"0.3s cubic-bezier(0.2, 0.8, 0.2, 1)","--c-pl-0":"#cc241d","--c-pl-1":"#458588","--c-pl-2":"#a6e3a1","--c-pl-3":"#d65d0e","--c-pl-4":"#b16286","--c-pl-5":"#fabd2f"}}];function Kc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Qs={exports:{}},Xs={exports:{}},ui;function Gc(){return ui||(ui=1,(function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t={rotl:function(a,s){return a<<s|a>>>32-s},rotr:function(a,s){return a<<32-s|a>>>s},endian:function(a){if(a.constructor==Number)return t.rotl(a,8)&16711935|t.rotl(a,24)&4278255360;for(var s=0;s<a.length;s++)a[s]=t.endian(a[s]);return a},randomBytes:function(a){for(var s=[];a>0;a--)s.push(Math.floor(Math.random()*256));return s},bytesToWords:function(a){for(var s=[],n=0,i=0;n<a.length;n++,i+=8)s[i>>>5]|=a[n]<<24-i%32;return s},wordsToBytes:function(a){for(var s=[],n=0;n<a.length*32;n+=8)s.push(a[n>>>5]>>>24-n%32&255);return s},bytesToHex:function(a){for(var s=[],n=0;n<a.length;n++)s.push((a[n]>>>4).toString(16)),s.push((a[n]&15).toString(16));return s.join("")},hexToBytes:function(a){for(var s=[],n=0;n<a.length;n+=2)s.push(parseInt(a.substr(n,2),16));return s},bytesToBase64:function(a){for(var s=[],n=0;n<a.length;n+=3)for(var i=a[n]<<16|a[n+1]<<8|a[n+2],l=0;l<4;l++)n*8+l*6<=a.length*8?s.push(e.charAt(i>>>6*(3-l)&63)):s.push("=");return s.join("")},base64ToBytes:function(a){a=a.replace(/[^A-Z0-9+\/]/ig,"");for(var s=[],n=0,i=0;n<a.length;i=++n%4)i!=0&&s.push((e.indexOf(a.charAt(n-1))&Math.pow(2,-2*i+8)-1)<<i*2|e.indexOf(a.charAt(n))>>>6-i*2);return s}};Xs.exports=t})()),Xs.exports}var Ks,fi;function hi(){if(fi)return Ks;fi=1;var e={utf8:{stringToBytes:function(t){return e.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(e.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var a=[],s=0;s<t.length;s++)a.push(t.charCodeAt(s)&255);return a},bytesToString:function(t){for(var a=[],s=0;s<t.length;s++)a.push(String.fromCharCode(t[s]));return a.join("")}}};return Ks=e,Ks}var Gs,pi;function Zc(){if(pi)return Gs;pi=1,Gs=function(a){return a!=null&&(e(a)||t(a)||!!a._isBuffer)};function e(a){return!!a.constructor&&typeof a.constructor.isBuffer=="function"&&a.constructor.isBuffer(a)}function t(a){return typeof a.readFloatLE=="function"&&typeof a.slice=="function"&&e(a.slice(0,0))}return Gs}var gi;function Jc(){return gi||(gi=1,(function(){var e=Gc(),t=hi().utf8,a=Zc(),s=hi().bin,n=function(i,l){i.constructor==String?l&&l.encoding==="binary"?i=s.stringToBytes(i):i=t.stringToBytes(i):a(i)?i=Array.prototype.slice.call(i,0):!Array.isArray(i)&&i.constructor!==Uint8Array&&(i=i.toString());for(var o=e.bytesToWords(i),u=i.length*8,d=1732584193,v=-271733879,p=-1732584194,f=271733878,h=0;h<o.length;h++)o[h]=(o[h]<<8|o[h]>>>24)&16711935|(o[h]<<24|o[h]>>>8)&4278255360;o[u>>>5]|=128<<u%32,o[(u+64>>>9<<4)+14]=u;for(var E=n._ff,M=n._gg,w=n._hh,x=n._ii,h=0;h<o.length;h+=16){var U=d,ne=v,ce=p,H=f;d=E(d,v,p,f,o[h+0],7,-680876936),f=E(f,d,v,p,o[h+1],12,-389564586),p=E(p,f,d,v,o[h+2],17,606105819),v=E(v,p,f,d,o[h+3],22,-1044525330),d=E(d,v,p,f,o[h+4],7,-176418897),f=E(f,d,v,p,o[h+5],12,1200080426),p=E(p,f,d,v,o[h+6],17,-1473231341),v=E(v,p,f,d,o[h+7],22,-45705983),d=E(d,v,p,f,o[h+8],7,1770035416),f=E(f,d,v,p,o[h+9],12,-1958414417),p=E(p,f,d,v,o[h+10],17,-42063),v=E(v,p,f,d,o[h+11],22,-1990404162),d=E(d,v,p,f,o[h+12],7,1804603682),f=E(f,d,v,p,o[h+13],12,-40341101),p=E(p,f,d,v,o[h+14],17,-1502002290),v=E(v,p,f,d,o[h+15],22,1236535329),d=M(d,v,p,f,o[h+1],5,-165796510),f=M(f,d,v,p,o[h+6],9,-1069501632),p=M(p,f,d,v,o[h+11],14,643717713),v=M(v,p,f,d,o[h+0],20,-373897302),d=M(d,v,p,f,o[h+5],5,-701558691),f=M(f,d,v,p,o[h+10],9,38016083),p=M(p,f,d,v,o[h+15],14,-660478335),v=M(v,p,f,d,o[h+4],20,-405537848),d=M(d,v,p,f,o[h+9],5,568446438),f=M(f,d,v,p,o[h+14],9,-1019803690),p=M(p,f,d,v,o[h+3],14,-187363961),v=M(v,p,f,d,o[h+8],20,1163531501),d=M(d,v,p,f,o[h+13],5,-1444681467),f=M(f,d,v,p,o[h+2],9,-51403784),p=M(p,f,d,v,o[h+7],14,1735328473),v=M(v,p,f,d,o[h+12],20,-1926607734),d=w(d,v,p,f,o[h+5],4,-378558),f=w(f,d,v,p,o[h+8],11,-2022574463),p=w(p,f,d,v,o[h+11],16,1839030562),v=w(v,p,f,d,o[h+14],23,-35309556),d=w(d,v,p,f,o[h+1],4,-1530992060),f=w(f,d,v,p,o[h+4],11,1272893353),p=w(p,f,d,v,o[h+7],16,-155497632),v=w(v,p,f,d,o[h+10],23,-1094730640),d=w(d,v,p,f,o[h+13],4,681279174),f=w(f,d,v,p,o[h+0],11,-358537222),p=w(p,f,d,v,o[h+3],16,-722521979),v=w(v,p,f,d,o[h+6],23,76029189),d=w(d,v,p,f,o[h+9],4,-640364487),f=w(f,d,v,p,o[h+12],11,-421815835),p=w(p,f,d,v,o[h+15],16,530742520),v=w(v,p,f,d,o[h+2],23,-995338651),d=x(d,v,p,f,o[h+0],6,-198630844),f=x(f,d,v,p,o[h+7],10,1126891415),p=x(p,f,d,v,o[h+14],15,-1416354905),v=x(v,p,f,d,o[h+5],21,-57434055),d=x(d,v,p,f,o[h+12],6,1700485571),f=x(f,d,v,p,o[h+3],10,-1894986606),p=x(p,f,d,v,o[h+10],15,-1051523),v=x(v,p,f,d,o[h+1],21,-2054922799),d=x(d,v,p,f,o[h+8],6,1873313359),f=x(f,d,v,p,o[h+15],10,-30611744),p=x(p,f,d,v,o[h+6],15,-1560198380),v=x(v,p,f,d,o[h+13],21,1309151649),d=x(d,v,p,f,o[h+4],6,-145523070),f=x(f,d,v,p,o[h+11],10,-1120210379),p=x(p,f,d,v,o[h+2],15,718787259),v=x(v,p,f,d,o[h+9],21,-343485551),d=d+U>>>0,v=v+ne>>>0,p=p+ce>>>0,f=f+H>>>0}return e.endian([d,v,p,f])};n._ff=function(i,l,o,u,d,v,p){var f=i+(l&o|~l&u)+(d>>>0)+p;return(f<<v|f>>>32-v)+l},n._gg=function(i,l,o,u,d,v,p){var f=i+(l&u|o&~u)+(d>>>0)+p;return(f<<v|f>>>32-v)+l},n._hh=function(i,l,o,u,d,v,p){var f=i+(l^o^u)+(d>>>0)+p;return(f<<v|f>>>32-v)+l},n._ii=function(i,l,o,u,d,v,p){var f=i+(o^(l|~u))+(d>>>0)+p;return(f<<v|f>>>32-v)+l},n._blocksize=16,n._digestsize=16,Qs.exports=function(i,l){if(i==null)throw new Error("Illegal argument "+i);var o=e.wordsToBytes(n(i,l));return l&&l.asBytes?o:l&&l.asString?s.bytesToString(o):e.bytesToHex(o)}})()),Qs.exports}var ed=Jc();const td=Kc(ed),_i=Je("Disconnected"),xr=Je(!1),Ts=Je(!1),vn=Je(null);let Zs;function Ue(e,t="info"){vn.set({text:e,type:t}),Zs&&clearTimeout(Zs),Zs=setTimeout(()=>{vn.set(null)},3e3)}const ad=localStorage.getItem("app_theme")||"default",$s=Je(ad);$s.subscribe(e=>{if(typeof document>"u")return;localStorage.setItem("app_theme",e);const t=dn.find(s=>s.id===e);if(!t)return;const a=document.documentElement;document.body.setAttribute("data-theme",e),Object.entries(t.colors).forEach(([s,n])=>{a.style.setProperty(s,n)})});const Ms=Je({isOpen:!1,title:"",message:"",confirmLabel:"Confirm",cancelLabel:"Cancel",onConfirm:null,type:"confirm",inputValue:"",placeholder:"",options:[]});function ba({title:e="Confirm Action",message:t="Are you sure?",confirmLabel:a="Confirm",cancelLabel:s="Cancel",type:n="confirm",inputValue:i="",placeholder:l="",options:o=[],onConfirm:u=()=>{}}){Ms.set({isOpen:!0,title:e,message:t,confirmLabel:a,cancelLabel:s,type:n,inputValue:i,placeholder:l,options:o,onConfirm:u})}function ps(){Ms.set({isOpen:!1,title:"",message:"",confirmLabel:"",cancelLabel:"",onConfirm:null,type:"confirm",inputValue:"",placeholder:"",options:[]})}const Mt=Je({state:"stop",volume:50,elapsed:0,duration:0,random:!1,repeat:!1,bitrate:0,format:"",song:0,songid:0}),Kt=Je({title:"Not Playing",artist:"",album:"",file:"",stationName:null,id:null,pos:null,isYandex:!1}),Jr=Je({active:!1,tracks:[],currentIndex:-1,currentTrackId:null,currentTrackFile:null,streamCache:{}}),As=Je(!1),ms=Je(!1),un=Je(!1),fn=Je(!1),Pt=Je("library"),Ns=Je(null),la=Je(!1),rd=localStorage.getItem("sidebarCollapsed")==="true",hn=Je(rd);hn.subscribe(e=>{typeof localStorage<"u"&&localStorage.setItem("sidebarCollapsed",String(e))});const Qa=Je([]),Ds=Je([]),Vr=Je([]),sd=Je(null),Ya=Je(new Set),$t=Je(!1),pt=Je([{view:"root"}]),Wa=Je([]),yo=Je(0),Wr=Je(""),mi=Je(null),wo=Je({});function nd(e,t){wo.update(a=>({...a,[e]:t}))}function id(e){return et(wo)[e]||0}const In=Je({isOpen:!1,track:null,context:{type:"general",playlistName:null,index:null},x:0,y:0,triggerRect:null});function od(){if(typeof navigator<"u"&&navigator.vibrate)try{navigator.vibrate(70)}catch{}}function es(e,t,a={}){if(!t&&a.type!=="playlist-card")return;od();let s=0,n=0,i=null,l=e.currentTarget;!l&&e.target&&e.target.closest&&(l=e.target.closest("button")||e.target),l&&l.getBoundingClientRect&&(i=l.getBoundingClientRect());const o=e.detail?.originalEvent||e;o.touches&&o.touches.length>0?(s=o.touches[0].clientX,n=o.touches[0].clientY):o.clientX&&(s=o.clientX,n=o.clientY);const u={type:"general",playlistName:null,index:null,...a};In.set({isOpen:!0,track:t,context:u,x:s,y:n,triggerRect:i})}function Yt(){In.set({isOpen:!1,track:null,context:{},x:0,y:0,triggerRect:null})}let pn=null,gn=null;function ld(e){gn=e}function Ht(e,t=null){t&&(pn=t),pt.update(a=>[...a,{view:e,data:t}]),gn&&gn(e,t)}function cd(){const e=pn;return pn=null,e}function dd(){et(pt).length>1?pt.update(t=>t.slice(0,-1)):window.history.back()}function vd(){et(pt).length>1&&pt.update(t=>t.slice(0,-1))}function Cr(e,t=[],a=null){if(e&&e.image&&e.image.startsWith("http"))return e.image;if(e&&e.cover&&e.cover.startsWith("http"))return e.cover;if(!e||!e.file)return"/images/default_cover.png";if(ko(e.file)||e.genre==="Radio")return e.image?Ar(e):xo(e,t,a)||"/images/radio_placeholder.png";let s=e.file.startsWith("/")?e.file.slice(1):e.file;return`/coverart.php/${encodeURI(s)}`}function ts(e,t="sm",a=[],s=null){if(!e)return"/images/default_icon.png";if(e.image&&e.image.startsWith("http"))return e.image;if(e.cover&&e.cover.startsWith("http"))return e.cover;if(e.file&&(ko(e.file)||e.genre==="Radio"||Array.isArray(e)))return e.image?Ar(e):xo(e,a,s)||"/images/radio_icon.png";if(!e.file)return"/images/default_icon.png";if(e.thumbHash){const n=t==="md"?"":"_sm";return`/imagesw/thmcache/${e.thumbHash}${n}.jpg`}try{const n=e.file.lastIndexOf("/"),i=n===-1?".":e.file.substring(0,n);return`/imagesw/thmcache/${td(i)}${t==="md"?"":"_sm"}.jpg`}catch{let i=e.file.startsWith("/")?e.file.slice(1):e.file;return`/coverart.php/${encodeURI(i)}`}}function ko(e){return!e||e.includes("yandex.net")||e.includes("get-mp3")?!1:e.startsWith("http")||e.includes("://")||e.includes("RADIO")}function xo(e,t,a){const s=u=>(u||"").toString().toLowerCase().replace(/[^a-z0-9]/g,""),n=s(e?.title),i=s(e?.stationName),l=s(a);if(t&&t.length>0){const u=t.find(d=>{const v=s(d.name);return v?v===i||v===l||n&&v===n||n&&n.includes(v)&&v.length>3:!1});if(u)return Ar(u)}const o=e?.stationName||a;return o?Ar({name:o,image:"local"}):null}_o([Kt,Qa,Ns],([e,t,a])=>Cr(e,t,a));_o(Kt,e=>!e||!e.file||e.file.startsWith("http")?null:`/coverart.php/${encodeURI(e.file)}`);const ud=localStorage.getItem("alarmTime")||"08:00",fd=localStorage.getItem("alarmEnabled")==="true",hd=localStorage.getItem("alarmPlaylist")||"Favorites",_n=Je(ud),mn=Je(fd),bn=Je(hd);_n.subscribe(e=>localStorage.setItem("alarmTime",e));mn.subscribe(e=>localStorage.setItem("alarmEnabled",String(e)));bn.subscribe(e=>localStorage.setItem("alarmPlaylist",e));const pd=localStorage.getItem("yandex_enabled")==="true",as=Je(pd);as.subscribe(e=>{typeof localStorage<"u"&&localStorage.setItem("yandex_enabled",String(e))});const ca=Je(new Set),bi=Je({active:!1,context_name:"Yandex Music"}),_t={NAME:"MoodePlayerDB",STORE_NAME:"music",VERSION:3},Ka={SYNC:"/wave-api.php",YANDEX:"/wave-yandex-api.php",STATIONS:e=>"/wave-api.php?action=stations",COVER_ART:e=>`/coverart.php?u=${encodeURIComponent(e)}`,RADIO_LOGOS:e=>`/imagesw/radio-logos/thumbs/${e}`},Ua={open(){return new Promise((e,t)=>{const a=indexedDB.open(_t.NAME,_t.VERSION);a.onupgradeneeded=s=>{const n=s.target.result,i=s.target.transaction;let l;n.objectStoreNames.contains(_t.STORE_NAME)?l=i.objectStore(_t.STORE_NAME):l=n.createObjectStore(_t.STORE_NAME,{keyPath:"file"}),l.indexNames.contains("artist")||l.createIndex("artist","artist",{unique:!1}),l.indexNames.contains("album")||l.createIndex("album","album",{unique:!1}),l.indexNames.contains("genre")||l.createIndex("genre","genre",{unique:!1}),l.indexNames.contains("album_artist")||l.createIndex("album_artist","album_artist",{unique:!1})},a.onsuccess=()=>e(a.result),a.onerror=()=>t(a.error)})},async clear(){const e=await this.open();return new Promise((t,a)=>{const s=e.transaction(_t.STORE_NAME,"readwrite");s.objectStore(_t.STORE_NAME).clear(),s.oncomplete=()=>t(),s.onerror=()=>a(s.error)})},async bulkAdd(e){const t=await this.open();return new Promise((a,s)=>{const n=t.transaction(_t.STORE_NAME,"readwrite"),i=n.objectStore(_t.STORE_NAME);e.forEach(l=>i.put(l)),n.oncomplete=()=>a(),n.onerror=()=>s(n.error)})},async getFilesMap(e){if(!e||e.length===0)return new Map;const t=await this.open();return new Promise(a=>{const n=t.transaction(_t.STORE_NAME,"readonly").objectStore(_t.STORE_NAME),i=new Map;let l=0;e.forEach(o=>{const u=o.normalize("NFC").trim(),d=n.get(u);d.onsuccess=v=>{v.target.result&&i.set(o,v.target.result),l++,l===e.length&&a(i)},d.onerror=()=>{l++,l===e.length&&a(i)}})})},async getArtists(){const e=await this.open();return new Promise((t,a)=>{const n=e.transaction(_t.STORE_NAME,"readonly").objectStore(_t.STORE_NAME),i=new Map,l=n.openCursor();l.onsuccess=o=>{const u=o.target.result;if(u){const d=u.value,v=d.album_artist||d.artist;v&&!i.has(v)&&i.set(v,{name:v,file:d.file,thumbHash:d.thumbHash}),u.continue()}else{const d=Array.from(i.values()).sort((v,p)=>v.name.localeCompare(p.name,void 0,{sensitivity:"base"}));t(d)}},l.onerror=()=>a(l.error)})},async getAlbums(){const e=await this.open();return new Promise((t,a)=>{const n=e.transaction(_t.STORE_NAME,"readonly").objectStore(_t.STORE_NAME).index("album"),i=[],l=n.openCursor(null,"nextunique");l.onsuccess=o=>{const u=o.target.result;if(u){const d=u.value;i.push({name:d.album,artist:d.album_artist||d.artist,file:d.file,thumbHash:d.thumbHash,qualityBadge:d.qualityBadge,year:d.year||0}),u.continue()}else t(i)},l.onerror=()=>a(l.error)})},async getArtistAlbums(e){if(!e)return[];const t=await this.open(),a=e.normalize("NFC").trim();return new Promise((s,n)=>{const l=t.transaction(_t.STORE_NAME,"readonly").objectStore(_t.STORE_NAME),o=new Promise(d=>{l.indexNames.contains("album_artist")?l.index("album_artist").getAll(IDBKeyRange.only(a)).onsuccess=v=>d(v.target.result):d([])}),u=new Promise(d=>{l.index("artist").getAll(IDBKeyRange.only(a)).onsuccess=v=>d(v.target.result)});Promise.all([o,u]).then(([d,v])=>{const p=[...d,...v],f=[],h=new Set;p.forEach(E=>{h.has(E.album)||(h.add(E.album),f.push({name:E.album,artist:E.album_artist||E.artist,file:E.file,thumbHash:E.thumbHash,qualityBadge:E.qualityBadge,year:E.year||0}))}),s(f)}).catch(d=>n(d))})},async getAlbumTracks(e,t=null){const a=await this.open(),s=e.normalize("NFC").trim(),n=t?t.normalize("NFC").trim():null;return console.log(`[DB] getAlbumTracks called. Album: "${s}", FilterArtist: "${n}"`),new Promise((i,l)=>{const u=a.transaction(_t.STORE_NAME,"readonly").objectStore(_t.STORE_NAME).index("album"),d=IDBKeyRange.only(s),v=u.getAll(d);v.onsuccess=()=>{let p=v.result;if(console.log(`[DB] Found ${p.length} raw tracks for album "${s}"`),n){const f=p.length;p=p.filter(h=>{const E=(h.artist||"").normalize("NFC").trim(),M=(h.album_artist||"").normalize("NFC").trim();return E===n||M===n}),console.log(`[DB] After artist filter: ${p.length} tracks (Removed ${f-p.length})`)}else console.log("[DB] No artist filter provided. Returning all tracks.");p.sort((f,h)=>{const E=parseInt(f.disc||1),M=parseInt(h.disc||1);if(E!==M)return E-M;const w=parseInt(f.track||0),x=parseInt(h.track||0);return w-x}),i(p)},v.onerror=()=>l(v.error)})},async getGenres(){const e=await this.open();return new Promise((t,a)=>{const n=e.transaction(_t.STORE_NAME,"readonly").objectStore(_t.STORE_NAME).index("genre"),i=[],l=n.openKeyCursor(null,"nextunique");l.onsuccess=o=>{const u=o.target.result;u?(i.push(u.key),u.continue()):t(i)},l.onerror=()=>a(l.error)})},async getGenreTracks(e){const t=await this.open(),a=e.normalize("NFC").trim();return new Promise((s,n)=>{const o=t.transaction(_t.STORE_NAME,"readonly").objectStore(_t.STORE_NAME).index("genre").getAll(IDBKeyRange.only(a));o.onsuccess=()=>s(o.result),o.onerror=()=>n(o.error)})},async search(e){if(!e)return[];const t=e.toLowerCase().normalize("NFC").trim(),a=await this.open();return new Promise((s,n)=>{const l=a.transaction(_t.STORE_NAME,"readonly").objectStore(_t.STORE_NAME),o=[],u=100,d=l.openCursor();d.onsuccess=v=>{const p=v.target.result;if(p){const f=p.value;if((f.title&&f.title.toLowerCase().includes(t)||f.artist&&f.artist.toLowerCase().includes(t)||f.album&&f.album.toLowerCase().includes(t)||f.album_artist&&f.album_artist.toLowerCase().includes(t))&&o.push(f),o.length>=u){s(o);return}p.continue()}else s(o)},d.onerror=()=>n(d.error)})}};var gd=k('<div class="skeleton svelte-tl058d"></div>');function ea(e,t){let a=St(t,"width",8,"100%"),s=St(t,"height",8,"20px"),n=St(t,"radius",8,"4px"),i=St(t,"style",8,"");var l=gd();oe(()=>ft(l,`width: ${a()??""}; height: ${s()??""}; border-radius: ${n()??""}; ${i()??""}`)),b(e,l)}var _d=k('<div class="skel svelte-1b8que2"><!></div>'),md=k('<img loading="lazy"/>'),bd=k('<div class="loader svelte-1b8que2"><!> <!> <!></div>');function Ut(e,t){At(t,!1);let a=St(t,"src",8),s=St(t,"alt",8,""),n=St(t,"radius",8,"0px");const i=zn();let l=$("loading");function o(){m(l,"loaded")}function u(w){i("error",w),m(l,"error")}ee(()=>R(a()),()=>{a()?m(l,"loading"):m(l,"error")}),Gt(),It();var d=bd(),v=c(d);{var p=w=>{var x=_d(),U=c(x);ea(U,{width:"100%",height:"100%",get radius(){return n()}}),mt(2,x,()=>Et,()=>({duration:200})),b(w,x)};P(v,w=>{r(l)==="loading"&&w(p)})}var f=g(v,2);{var h=w=>{var x=md();let U;oe(()=>{Ft(x,"src",a()),Ft(x,"alt",s()),ft(x,`border-radius: ${n()??""}`),U=rt(x,1,"svelte-1b8que2",null,U,{vis:r(l)==="loaded"})}),A("load",x,o),A("error",x,u),b(w,x)};P(f,w=>{a()&&r(l)!=="error"&&w(h)})}var E=g(f,2);{var M=w=>{var x=it(),U=Oe(x);qr(U,t,"fallback",{}),b(w,x)};P(E,w=>{r(l)==="error"&&w(M)})}oe(()=>ft(d,`border-radius: ${n()??""}`)),b(e,d),Ct()}const Ja={DEFAULT_IP:typeof window<"u"?window.location.hostname:"localhost",get MOODE_IP(){try{return typeof localStorage<"u"?localStorage.getItem("moode_ip")||this.DEFAULT_IP:this.DEFAULT_IP}catch{return this.DEFAULT_IP}},setMoodeIp(e){if(typeof localStorage<"u"){const t=e?e.trim():"";t&&localStorage.setItem("moode_ip",t)}}};class yd{constructor(){this.socket=null,this.queue=[],this.isProcessing=!1,this.reconnectTimer=null,this.watchdogTimer=null,this._buffer=""}get isConnected(){return this.socket&&this.socket.readyState===WebSocket.OPEN}connect(){if(this.socket&&(this.socket.readyState===WebSocket.CONNECTING||this.socket.readyState===WebSocket.OPEN))return;this.reconnectTimer&&clearTimeout(this.reconnectTimer);let t=Ja.MOODE_IP||window.location.hostname;t=t.replace(/^https?:\/\//,"").split(":")[0].split("/")[0];const a=Ja.WS_PORT||"8080",s=`ws://${t}:${a}`;console.log("[MPD] Connecting to:",s);try{this.socket=new WebSocket(s,["binary"])}catch(n){console.error("[MPD] Connection Error:",n),this.reconnectTimer=setTimeout(()=>this.connect(),5e3);return}this.socket.onopen=()=>{console.log("[MPD] Connected"),_i.set("Connected"),Ue("Connected to Moode","success"),this._processQueue()},this.socket.onmessage=n=>this._handleMessage(n),this.socket.onclose=n=>{console.warn("[MPD] Socket closed",n.code,n.reason),_i.set("Disconnected"),this._cleanup(),this.reconnectTimer=setTimeout(()=>this.connect(),3e3)},this.socket.onerror=n=>{console.error("[MPD] Socket error",n)}}send(t){return new Promise((a,s)=>{this.queue.push({cmd:t,resolve:a,reject:s}),this._processQueue()})}_cleanup(){for(this.isProcessing=!1,this._buffer="",this.watchdogTimer&&clearTimeout(this.watchdogTimer);this.queue.length>0;){const{reject:t}=this.queue.shift();t(new Error("Connection lost"))}}async _processQueue(){if(this.isProcessing||this.queue.length===0||!this.isConnected)return;this.isProcessing=!0;const{cmd:t}=this.queue[0];this.watchdogTimer&&clearTimeout(this.watchdogTimer),this.watchdogTimer=setTimeout(()=>{console.error("[MPD] Watchdog timeout"),this.socket&&this.socket.close()},2e4);try{const a=t.endsWith(`
`)?t:t+`
`;this.socket.send(new TextEncoder().encode(a))}catch(a){console.error("[MPD] Send error",a),this._cleanup()}}async _handleMessage(t){let a=t.data;a instanceof Blob&&(a=await a.text()),this.watchdogTimer&&(clearTimeout(this.watchdogTimer),this.watchdogTimer=null),this._buffer+=a;const s=this._buffer.endsWith(`
OK
`)||this._buffer===`OK
`,n=this._buffer.startsWith("ACK");if(s||n){const i=this._buffer;this._buffer="";const l=this.queue.shift();if(this.isProcessing=!1,l)if(n)console.error(`[MPD] Error: ${i.trim()}`),l.reject(new Error(i.trim()));else{const o=i.replace(/\nOK\n$/,"").replace(/^OK\n$/,"");l.resolve(o)}this._processQueue()}else{if(!this.queue.length)return;this.watchdogTimer=setTimeout(()=>{console.error("[MPD] Watchdog timeout receiving large data"),this.socket&&this.socket.close()},2e4)}}}const Ze=new yd,oa={parseKeyValue(e){const t={};if(!e)return t;const a=e.split(`
`);for(const s of a){const n=s.indexOf(": ");if(n===-1)continue;const i=s.substring(0,n).toLowerCase(),l=s.substring(n+2);t[i]=l}return t},parseStatus(e){const t=this.parseKeyValue(e);let a="";if(t.audio){const s=t.audio.split(":");s[1]&&(a=`${s[1]}-bit`)}return{state:t.state||"stop",volume:parseInt(t.volume)||0,elapsed:parseFloat(t.elapsed)||0,duration:parseFloat(t.duration)||0,random:t.random==="1",repeat:t.repeat==="1",song:parseInt(t.song)||0,songId:parseInt(t.songid)||-1,playlistLength:parseInt(t.playlistlength)||0,bitrate:parseInt(t.bitrate)||0,format:a,playlistVersion:parseInt(t.playlist)||0}},parseCurrentSong(e){const t=this.parseKeyValue(e);return this._normalizeTrack(t)},parsePlaylists(e){const t=e.split(`
`),a=[];let s=null;for(const n of t)n.startsWith("playlist: ")?(s&&a.push(s),s={playlist:n.substring(10)}):n.startsWith("Last-Modified: ")&&s&&(s["last-modified"]=n.substring(15));return s&&a.push(s),a.map(n=>({name:n.playlist,lastModified:n["last-modified"]}))},parseTracks(e){const t=[];let a=null,s=0,n=e.indexOf(`
`,s);for(;n!==-1;){const i=e.substring(s,n),l=i.indexOf(": ");if(l!==-1){const o=i.substring(0,l).toLowerCase(),u=i.substring(l+2);o==="file"?(a&&t.push(this._normalizeTrack(a)),a={file:u}):a&&(a[o]=u)}s=n+1,n=e.indexOf(`
`,s)}return a&&t.push(this._normalizeTrack(a)),t},_normalizeTrack(e){const t=e.file||e.File||"",a=e.Title||e.title||e.Name||e.name||t.split("/").pop()||"Unknown";return{file:t,title:a,artist:e.Artist||e.artist||"Unknown Artist",album:e.Album||e.album||"Unknown Album",genre:e.Genre||e.genre||"Unknown",time:parseFloat(e.Time||e.time||0),track:e.Track||e.track||"",id:e.Id||e.id,pos:e.Pos||e.pos||null,stationName:e.name||e.Name||null}}};function So(e){return new Worker("/assets/sync.worker-CxDcqL9_.js",{name:e?.name})}const Aa={async syncLibrary(){if(et(la))return;la.set(!0);const e=new So,t=window.location.origin+"/wave-api.php";e.postMessage({type:"START_SYNC",payload:{url:t}}),e.onmessage=a=>{const{type:s,status:n,count:i,message:l}=a.data;if(s==="PROGRESS"){const o={connecting:"Requesting library...",downloading:"Downloading data...",parsing:"Processing metadata...",saving:`Saving ${i} tracks...`};o[n]&&Ue(o[n],"info")}s==="DONE"&&(Ue(`Library updated: ${i} tracks`,"success"),la.set(!1),e.terminate()),s==="ERROR"&&(console.error("[API] Sync Error:",l),Ue(`Sync Failed: ${l}`,"error"),la.set(!1),e.terminate())},e.onerror=a=>{console.error("[API] Worker crash:",a),Ue("Sync worker crashed","error"),la.set(!1),e.terminate()}},async loadRadioStations(){if(!et(ms)){ms.set(!0);try{const t=await fetch(Ka.STATIONS(!1));if(!t.ok)throw new Error("Network error");const a=await t.json();if(a.error)throw new Error(a.error);if(!Array.isArray(a))throw new Error("Invalid response format");const s=a.map(n=>({id:n.id,name:n.name,file:n.station,station:n.station,image:n.logo,genre:n.genre||"Radio"}));s.sort((n,i)=>n.name.localeCompare(i.name,void 0,{sensitivity:"base"})),Qa.set(s)}catch(e){console.error("[API] Failed to load stations",e),Ue("Failed to load radio","error")}finally{ms.set(!1)}}},async setAlarm(e,t,a){try{const s=new FormData;s.append("action","set_alarm"),s.append("enabled",e?"1":"0"),s.append("time",t),s.append("playlist",a);const n=await fetch(Ka.SYNC,{method:"POST",body:s});if(!n.ok)throw new Error("Server error");const i=await n.json();if(i.error)throw new Error(i.error);return!0}catch(s){throw console.error("[API] Failed to set alarm",s),s}},async getServerTime(){try{const e=await fetch(`${Ka.SYNC}?action=get_time`);if(e.ok)return(await e.json()).time}catch(e){console.error("Failed to get server time",e)}return null},async checkYandexAuth(){try{const t=await(await fetch(Ka.YANDEX+"?action=status")).json();return xr.set(t.authorized),t.authorized}catch(e){return console.error("Yandex Auth Check Failed",e),xr.set(!1),!1}},async saveYandexToken(e){try{const t=await fetch(Ka.YANDEX+"?action=save_token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e})}),a=await t.json();if(!t.ok)throw new Error(a.error||"Failed to save");return Ue("Yandex connected successfully","success"),xr.set(!0),!0}catch(t){return console.error(t),Ue("Invalid token or server error","error"),xr.set(!1),!1}},async getYandexMeta(e){try{const t=await fetch(Ka.YANDEX+"?action=get_meta&url="+encodeURIComponent(e));if(t.ok)return await t.json()}catch{}return null}},wd=1e3,kd=250;let bs=null,Qr=null,ys=0,Ga=1,Cs=!0,Ca=!1,er=0,mr=null;function ws(e){return e?String(e).normalize("NFC").replace(/\\/g,"\\\\").replace(/"/g,'\\"'):""}function xd(){Sd(),Cs=!0,Ca=!1,er=0,$t.set(!1),ga(),bs=setInterval(()=>{Ze.isConnected&&!Ze.isProcessing&&ga()},wd)}function Sd(){bs&&(clearInterval(bs),bs=null),Nn()}async function ga(){try{const e=await Ze.send("status"),t=await Ze.send("currentsong"),a=oa.parseStatus(e),s=oa.parseCurrentSong(t);Td(a,s);const n=et(yo);if(et($t))return;(a.playlistLength>0&&a.playlistVersion!==n||a.playlistLength>0&&et(Wa).length===0)&&Ed(a.playlistVersion)}catch{}}function jn(e){if(!e)return null;let t=e.match(/[?&]track-id=([^&]+)/);return t||(t=e.match(/[?&]id=([^&]+)/),t)||(t=e.match(/\/track\/(\d+)/),t)?t[1]:null}async function Ed(e){if(!et($t))try{const t=await Ze.send("playlistinfo");if(et($t))return;const a=oa.parseTracks(t),s=et(Jr),n=a.map(o=>o.file).filter(o=>o&&!o.startsWith("http"));let i=new Map;if(n.length>0)try{i=await Ua.getFilesMap(n)}catch(o){console.warn("Failed to hydrate queue from DB",o)}const l=a.map(o=>{const u=o.file||"",d=u.includes("yandex.net")||u.includes("get-mp3")||u.startsWith("yandex:")||u.includes("storage.yandex.net");if(d&&s.streamCache){let f=s.streamCache[u];if(!f){const h=jn(u);h&&(f=s.streamCache[String(h)])}if(f){const h=parseFloat(f.time||0),E=parseFloat(o.time||0);return{...o,title:f.title||o.title,artist:f.artist||o.artist,album:f.album||o.album,image:f.image,isYandex:!0,id:f.id,time:E>0?E:h,mpdId:o.id,mpdPos:o.pos,_uid:String(o.id||o.pos)+"y"}}}d&&Eo(u);const v=u.normalize("NFC"),p=i.get(v);return p?{...o,thumbHash:p.thumbHash,qualityBadge:p.qualityBadge,title:o.title||p.title,artist:o.artist||p.artist,album:o.album||p.album,isYandex:d,_uid:String(o.id||o.pos+o.file)}:{...o,isYandex:d,_uid:String(o.id||o.pos+o.file)}});Wa.set(l),yo.set(e)}catch(t){console.error("Queue sync error",t)}}async function Eo(e){const t=et(Jr);if(t.streamCache&&t.streamCache[e])return;const a=jn(e);if(a&&t.streamCache&&t.streamCache[a])return;const s=await Aa.getYandexMeta(e);s&&(Jr.update(i=>{const l={...i.streamCache};return l[e]={...s,isYandex:!0,file:e},s.id&&(l[String(s.id)]={...s,isYandex:!0,file:e}),{...i,streamCache:l}}),et(Kt).file===e&&(Kt.update(i=>({...i,...s,isYandex:!0})),Mt.update(i=>s.time&&(i.duration===0||isNaN(i.duration))?{...i,duration:parseFloat(s.time)}:i)),Wa.update(i=>i.map(l=>l.file===e?{...l,...s,isYandex:!0,time:s.time||l.time}:l)))}function Td(e,t){const a=et(Kt),s=et(Qa),n=et(Jr);if(t.file){let l=null;if(n.streamCache&&(l=n.streamCache[t.file],!l)){const o=jn(t.file);o&&(l=n.streamCache[String(o)])}l?(t.title=l.title,t.artist=l.artist,t.album=l.album,t.image=l.image,t.isYandex=!0,t.id=l.id,(e.duration===0||isNaN(e.duration))&&l.time&&(e.duration=parseFloat(l.time))):(t.file.includes("yandex.net")||t.file.includes("get-mp3"))&&Eo(t.file)}const i=t.file&&t.file.startsWith("http");if(i&&!t.isYandex){const l=v=>(v||"").toString().toLowerCase().replace(/[^a-z0-9]/g,""),o=l(t.file),u=l(t.title),d=s.find(v=>{const p=l(v.station||v.file||v.url||(Array.isArray(v)?v[1]:"")),f=l(v.name||(Array.isArray(v)?v[0]:""));return p&&o.includes(p)||f&&u.includes(f)});d?t.stationName=d.name||d[0]:a.stationName&&a.file===t.file&&(t.stationName=a.stationName)}Kt.set(t),Mt.update(l=>{const o=e.state==="play",u=performance.now();if(e.state==="pause"||l.state==="pause")return gs(!1),u<er?l:e;if(t.file!==a.file||Cs)return Cs=!1,Ca=!1,Ga=1,i&&!t.isYandex&&(e.elapsed=0),gs(o&&(!i||t.isYandex)),e;if(u<er)return l;if(Ca)return Ca=!1,Ga=1,gs(o&&(!i||t.isYandex)),e;if(o&&(!i||t.isYandex)){const d=e.elapsed-l.elapsed;if(Math.abs(d)>2)return Ga=1,e;if(Math.abs(d)<.05)Ga=1;else{let p=d/1.5;Ga=Math.max(.5,Math.min(1.5,1+p))}return{...e,elapsed:l.elapsed}}return gs(!1),e})}function gs(e){e?yn():Nn()}function yn(){Qr||Cs||(ys=performance.now(),Qr=setInterval(()=>{const e=performance.now();let t=(e-ys)/1e3;t>2&&(t=0),ys=e,Mt.update(a=>{if(a.state!=="play")return a;let s=a.elapsed+t*Ga;return a.duration>0&&s>a.duration&&(s=a.duration),{...a,elapsed:s}})},kd))}function Nn(){Qr&&(clearInterval(Qr),Qr=null),Ga=1,ys=0}async function yi(e,t=!1){if(!e||e.length===0)return;$t.set(!0),Ca=!0;const a=5;try{for(let s=0;s<e.length;s+=a){const n=e.slice(s,s+a),i=["command_list_begin"];n.forEach(l=>{i.push(`add "${ws(l.file)}"`)}),i.push("command_list_end"),await Ze.send(i.join(`
`))}t?(await Ze.send("play 0"),Ue(`Playing ${e.length} tracks`,"success")):Ue(`Added ${e.length} tracks`,"success")}catch(s){console.error("[Player] Bulk Action Failed:",s),Ue("Error adding tracks","error")}finally{setTimeout(()=>{$t.set(!1),ga()},1500)}}const da={async togglePlay(){const t=et(Mt).state==="play";er=performance.now()+800,Mt.update(a=>{const s=t?"pause":"play";return s==="play"?yn():Nn(),{...a,state:s}}),await Ze.send(t?"pause 1":"play"),setTimeout(ga,900)},async next(){Ca=!0,er=0,await Ze.send("next"),ga()},async previous(){Ca=!0,er=0,Mt.update(e=>({...e,elapsed:0})),await Ze.send("previous"),ga()},async setVolume(e){Mt.update(t=>({...t,volume:e})),await Ze.send(`setvol ${e}`)},async seek(e){Ca=!0,er=performance.now()+500,Mt.update(t=>({...t,elapsed:e})),await Ze.send(`seekcur ${e}`),setTimeout(ga,600)},async toggleRandom(){const t=!et(Mt).random;Mt.update(a=>({...a,random:t})),await Ze.send(`random ${t?1:0}`)},async toggleRepeat(){const t=!et(Mt).repeat;Mt.update(a=>({...a,repeat:t})),await Ze.send(`repeat ${t?1:0}`)},async playUri(e,t={}){$t.set(!0);const a=ws(e);Ca=!0,Mt.update(s=>({...s,state:"play",elapsed:0})),Kt.set({title:t.title||e.split("/").pop(),artist:t.artist||"",album:t.album||"",file:e}),yn();try{const s=await Ze.send("currentsong"),n=parseInt(oa.parseKeyValue(s).pos),i=await Ze.send(`addid "${a}"`),l=parseInt(oa.parseKeyValue(i).id);if(isNaN(l))await Ze.send(`add "${a}"`),await Ze.send("play");else{const o=isNaN(n)?0:n+1;await Ze.send(`moveid ${l} ${o}`),await Ze.send(`playid ${l}`)}}catch(s){console.error("Play error",s),Ue("Failed to play","error")}setTimeout(()=>{$t.set(!1),ga()},1200)},async addToQueue(e){try{await Ze.send(`add "${ws(e)}"`),Ue("Added to queue","success")}catch(t){console.error("Add queue error",t),Ue("Failed to add","error")}},async playNext(e){$t.set(!0);const t=ws(e);try{const a=await Ze.send("currentsong"),s=parseInt(oa.parseKeyValue(a).pos||-1);if(s===-1)$t.set(!1),await this.playUri(e);else{const n=await Ze.send(`addid "${t}"`),i=parseInt(oa.parseKeyValue(n).id);isNaN(i)||(await Ze.send(`moveid ${i} ${s+1}`),Ue("Will play next","success")),setTimeout(()=>$t.set(!1),1e3)}}catch(a){console.error("Play Next error",a),Ue("Failed to set next","error"),$t.set(!1)}},async removeFromQueue(e){$t.set(!0),mr&&clearTimeout(mr);try{Wa.update(t=>{const a=[...t];return a.splice(e,1),a}),await Ze.send(`delete ${e}`)}catch{Ue("Failed to remove","error"),$t.set(!1);return}mr=setTimeout(()=>{$t.set(!1)},1e3)},async moveTrack(e,t){if(e!==t){$t.set(!0),mr&&clearTimeout(mr);try{await Ze.send(`move ${e} ${t}`)}catch(a){console.error("Move failed",a),Ue("Move failed","error"),$t.set(!1),ga();return}mr=setTimeout(()=>{$t.set(!1),ga()},2e3)}},async playAllTracks(e){if(!(!e||e.length===0))try{await Ze.send("stop"),await Ze.send("clear"),await yi(e,!0)}catch(t){console.error(t)}},async addAllToQueue(e){!e||e.length===0||await yi(e,!1)},async saveQueue(e){if(!e)return;const t=e.replace(/"/g,'\\"');try{await Ze.send(`save "${t}"`),Ue(`Playlist "${e}" saved`,"success")}catch(a){if(a.message.includes("exist")){if(confirm(`Playlist "${e}" exists. Overwrite?`))try{await Ze.send(`rm "${t}"`),await Ze.send(`save "${t}"`),Ue(`Playlist "${e}" overwritten`,"success")}catch{Ue("Failed to overwrite","error")}}else console.error(a)}}},Dr="Favorites";let wi=Promise.resolve();const br=e=>e?e.toLowerCase().replace(/^https?:\/\//,"").replace(/^www\./,"").split("?")[0].replace(/\/$/,""):"";function $d(e){if(e==="Favorites")return"linear-gradient(135deg, hsl(348, 95%, 58%), hsl(348, 90%, 40%))";let t=0;for(let s=0;s<e.length;s++)t=e.charCodeAt(s)+((t<<5)-t);const a=Math.abs(t%360);return`linear-gradient(135deg, hsl(${a}, 60%, 40%), hsl(${(a+40)%360}, 60%, 30%))`}function Md(e){if(e==="Favorites")return"var(--c-heart)";let t=0;for(let s=0;s<e.length;s++)t=e.charCodeAt(s)+((t<<5)-t);return`var(--c-pl-${Math.abs(t%6)})`}const ya={async syncLibrary(){if(et(la))return;la.set(!0);const e=new So;e.postMessage({type:"START_SYNC",payload:{url:`http://${Ja.MOODE_IP}/wave-api.php`}}),e.onmessage=t=>{const{type:a,count:s}=t.data;a==="DONE"&&(Ue(`Library updated: ${s} tracks`,"success"),la.set(!1),e.terminate()),a==="ERROR"&&(Ue("Sync Failed","error"),la.set(!1),e.terminate())},e.onerror=()=>{la.set(!1),e.terminate()}},async loadPlaylists(){un.set(!0);try{const e=await Ze.send("listplaylists"),a=oa.parsePlaylists(e).map(s=>({...s,color:$d(s.name),colorVar:Md(s.name)}));Ds.set(a)}catch(e){console.error(e)}finally{un.set(!1)}},async createPlaylistFromQueue(e){if(!e)return;const t=e.replace(/"/g,'\\"');try{await Ze.send(`save "${t}"`),Ue(`Playlist "${e}" created`,"success"),await this.loadPlaylists()}catch(a){console.error(a),Ue("Failed to create playlist","error")}},async deletePlaylist(e){if(!e)return;const t=e.replace(/"/g,'\\"');try{await Ze.send(`rm "${t}"`),Ue("Playlist deleted","info"),await this.loadPlaylists()}catch(a){console.error(a),Ue("Delete failed","error")}},async renamePlaylist(e,t){if(!e||!t)return;const a=e.replace(/"/g,'\\"'),s=t.replace(/"/g,'\\"');try{await Ze.send(`rename "${a}" "${s}"`),Ue("Playlist renamed","success"),await this.loadPlaylists()}catch(n){console.error(n),Ue("Rename failed","error")}},async openPlaylistDetails(e){if(!e)return;fn.set(!0);const t=e.replace(/"/g,'\\"');try{const a=await Ze.send(`listplaylistinfo "${t}"`),s=oa.parseTracks(a),n=s.map(o=>o.file).filter(o=>o&&!o.startsWith("http"));let i=new Map;if(n.length>0)try{i=await Ua.getFilesMap(n)}catch(o){console.warn("Failed to hydrate playlist from DB",o)}const l=s.map(o=>{const u=i.get(o.file);return u?{...o,thumbHash:u.thumbHash,qualityBadge:u.qualityBadge,title:o.title||u.title,artist:o.artist||u.artist,album:o.album||u.album,_uid:vi()}:{...o,_uid:vi()}});Vr.set(l)}catch(a){console.error(a),Ue("Could not load playlist","error")}finally{fn.set(!1)}},async movePlaylistTrack(e,t,a){const s=e.replace(/"/g,'\\"');try{await Ze.send(`playlistmove "${s}" ${t} ${a}`)}catch{Ue("Move failed","error")}},async removeFromPlaylist(e,t){const a=e.replace(/"/g,'\\"');try{await Ze.send(`playlistdelete "${a}" ${t}`),Ue("Track removed","success")}catch{Ue("Delete failed","error")}},async loadFavorites(){try{const e=await Ze.send(`listplaylistinfo "${Dr}"`),t=oa.parseTracks(e),a=new Set;t.forEach(s=>{s.file&&a.add(s.file)}),Ya.set(a)}catch{Ya.set(new Set)}},async toggleFavorite(e){if(!e||!e.file)return;const t=e.file,a=t.replace(/"/g,'\\"'),s=t.startsWith("http"),n=et(Ya);let i=n.has(t);if(!i&&s){const l=br(t);for(const o of n)if(br(o)===l){i=!0;break}}Ya.update(l=>{const o=new Set(l);if(i){if(o.delete(t),s){const u=br(t);for(const d of o)br(d)===u&&o.delete(d)}}else o.add(t);return o}),wi=wi.then(async()=>{try{const l=await Ze.send(`listplaylistinfo "${Dr}"`),o=oa.parseTracks(l);let u=[];if(o.forEach((d,v)=>{let p=!1;(d.file===t||s&&br(d.file)===br(t)||s&&(d.file.includes(t)||t.includes(d.file)))&&(p=!0),p&&u.push(v)}),i){if(u.length>0){u.sort((d,v)=>v-d);for(const d of u)await Ze.send(`playlistdelete "${Dr}" ${d}`);Ue("Removed from Favorites","info")}}else u.length>0?console.log("[Fav] Track already exists. Skipping."):(await Ze.send(`playlistadd "${Dr}" "${a}"`),o.length>0&&await Ze.send(`playlistmove "${Dr}" ${o.length} 0`),Ue("Added to Favorites","success"))}catch(l){console.error("Fav action failed",l),Ue("Action failed","error")}finally{await this.loadFavorites()}})}};function To(){Ze.connect(),xd(),ya.loadPlaylists(),ya.loadFavorites()}function rs(e){return Ze.send(e)}const{togglePlay:Os,toggleRandom:nr,toggleRepeat:ir,setVolume:Pa,seek:Dn,addToQueue:Ad,playNext:Cd,removeFromQueue:Pd,moveTrack:Ld,saveQueue:zd,playAllTracks:Ps,addAllToQueue:On,playUri:Rd}=da,{syncLibrary:Id,loadRadioStations:jd,loadPlaylists:Fn,openPlaylistDetails:$o,toggleFavorite:Mo,loadFavorites:Nd,removeFromPlaylist:Ao,movePlaylistTrack:Co}=ya;function ss(e){const t=et(Kt),a=et(Qa),s=et(Ns);if(t.file&&t.file.startsWith("http")&&a.length>0&&!t.isYandex&&(e==="next"||e==="previous")){let i=a.findIndex(o=>o.name===s);i===-1&&(i=0);let l;e==="next"?(l=i+1,l>=a.length&&(l=0)):(l=i-1,l<0&&(l=a.length-1)),qn(a[l])}else e==="next"&&da.next(),e==="previous"&&da.previous()}function qn(e){if(!e)return;Ns.set(e.name);const t=e[1]||e.station||e.file||e.url;t&&da.playUri(t,{title:e.name,artist:e.genre||"Radio Stream",stationName:e.name})}function Fs(e){e&&(Ns.set(null),da.playUri(e.file,{title:e.title,artist:e.artist,album:e.album,stationName:null}))}const Dd=Object.freeze(Object.defineProperty({__proto__:null,addAllToQueue:On,addToQueue:Ad,connect:To,loadFavorites:Nd,loadPlaylists:Fn,loadRadioStations:jd,movePlaylistTrack:Co,moveTrack:Ld,nav:ss,openPlaylistDetails:$o,playAllTracks:Ps,playNext:Cd,playStation:qn,playTrackOptimistic:Fs,playUri:Rd,removeFromPlaylist:Ao,removeFromQueue:Pd,runMpdRequest:rs,saveQueue:zd,seek:Dn,setVolume:Pa,syncLibrary:Id,toggleFavorite:Mo,togglePlay:Os,toggleRandom:nr,toggleRepeat:ir},Symbol.toStringTag,{value:"Module"})),Nt={async request(e,t={}){const a=new URL(window.location.origin+Ka.YANDEX);a.searchParams.append("action",e);for(const n in t)t[n]!==void 0&&t[n]!==null&&a.searchParams.append(n,t[n]);const s=await fetch(a);if(!s.ok)throw new Error("API Error");return await s.json()},async search(e){return await this.request("search",{query:e})},async getUserPlaylists(){return await this.request("get_playlists")},async getLanding(){return await this.request("get_landing")},async getStationsDashboard(){return await this.request("get_stations_dashboard")},async getArtistDetails(e){return await this.request("get_artist_details",{id:e})},async getAlbumDetails(e){return await this.request("get_album_details",{id:e})},async getPlaylistTracks(e,t,a=0){return await this.request("get_playlist_tracks",{uid:e,kind:t,offset:a})},async getFavoritesIds(){return await this.request("get_favorites_ids")},async playRadio(e){return e?await this.request("play_station",{station:"track:"+e}):await this.request("play_station",{station:"user:onetwo"})},async playStation(e){return await this.request("play_station",{station:e})},async playTrack(e){return await this.request("play_track",{id:e})},async toggleLike(e,t){const a=t?"dislike":"like";return await this.request(a,{track_id:e})}};function Bn(e,t=2e3){let a;const s=i=>{i.type==="mousedown"&&i.button!==0||(a=setTimeout(()=>{e.dispatchEvent(new CustomEvent("longpress",{detail:{originalEvent:i}}))},t))},n=()=>{clearTimeout(a)};return e.addEventListener("mousedown",s),e.addEventListener("touchstart",s,{passive:!0}),e.addEventListener("mouseup",n),e.addEventListener("mouseleave",n),e.addEventListener("touchend",n),e.addEventListener("touchcancel",n),e.addEventListener("touchmove",n),{destroy(){e.removeEventListener("mousedown",s),e.removeEventListener("touchstart",s),e.removeEventListener("mouseup",n),e.removeEventListener("mouseleave",n),e.removeEventListener("touchend",n),e.removeEventListener("touchcancel",n),e.removeEventListener("touchmove",n)}}}var Od=k('<div class="drag-handle svelte-5cs2hz" title="Drag to reorder"><div class="icon-small svelte-5cs2hz"><!></div></div>'),Fd=k('<div class="eq-anim svelte-5cs2hz"><span class="bar b1 svelte-5cs2hz"></span> <span class="bar b2 svelte-5cs2hz"></span> <span class="bar b3 svelte-5cs2hz"></span></div>'),qd=k('<div class="icon-small svelte-5cs2hz"><!></div>'),Bd=k('<div class="icon-small svelte-5cs2hz"><!></div>'),Yd=k('<div class="icon-small accent svelte-5cs2hz"><!></div>'),Ud=k('<span class="num svelte-5cs2hz"> </span>'),Hd=k('<button class="num-box svelte-5cs2hz"><!></button>'),Vd=k('<div slot="fallback" class="icon-ph svelte-5cs2hz"><!></div>'),Wd=k('<span class="meta-tag quality svelte-5cs2hz"> </span>'),Qd=k('<span class="yandex-icon-inline svelte-5cs2hz" title="Yandex Music"><!></span>'),Xd=k('<button class="btn-icon small remove svelte-5cs2hz"><!></button>'),Kd=k('<div class="dur svelte-5cs2hz"> </div>'),Gd=k('<div role="button" tabindex="0"><div class="left svelte-5cs2hz"><!> <div class="thumb svelte-5cs2hz"><!></div></div> <div class="info svelte-5cs2hz"><div class="title-row svelte-5cs2hz"><div class="title text-ellipsis svelte-5cs2hz"> </div> <!></div> <div> </div></div> <div class="right svelte-5cs2hz"><!> <button class="btn-icon small context-menu-btn svelte-5cs2hz"><!></button> <button><!></button> <!></div></div>');function Pr(e,t){At(t,!1);const a=()=>Ee(ca,"$yandexFavorites",o),s=()=>Ee(Ya,"$favorites",o),n=()=>Ee(pt,"$navigationStack",o),i=()=>Ee(Pt,"$activeMenuTab",o),l=()=>Ee(Qa,"$stations",o),[o,u]=qt(),d=$(),v=$(),p=$(),f=$(),h=$(),E=$(),M=$(),w=$(),x=$(),U=$(),ne=$(),ce=$(),H=$(),_e=$(),he=$(),B=$(),xe=$(),re=$();let j=St(t,"track",8),L=St(t,"index",8),F=St(t,"isEditable",8,!1),ue=St(t,"playingIndex",24,()=>-1),V=St(t,"playingFile",8,null),be=St(t,"isPlaying",8,!1);const q=zn();let O=$(!1),Me=$(!1);function X(T){if(r(w))return"â";const J=parseFloat(T);if(!J||isNaN(J)||J===0)return"0:00";const ie=Math.round(J),Ie=Math.floor(ie/60),je=ie%60;return`${Ie}:${je.toString().padStart(2,"0")}`}function de(T){T.stopPropagation(),r(E)?Os():q("play")}function me(){return r(p)?.view==="details"&&r(p).data?.name?{type:"playlist",playlistName:r(p).data.name,index:L()}:r(f)?{type:"queue",index:L()}:{type:"general"}}function pe(T){T.stopPropagation(),es(T,j(),me())}function Ae(T){F()||es(T.detail.originalEvent,j(),me())}function z(T){T.stopPropagation(),r(d)&&j().artist?(Pt.set("yandex"),window.location.hash!=="#/yandex"&&history.pushState(null,"","#/yandex"),pt.set([{view:"root"},{view:"yandex_search",data:{query:j().artist}}])):!r(w)&&j().artist&&(Pt.set("artists"),window.location.hash!=="#/artists"&&history.pushState(null,"","#/artists"),pt.set([{view:"root"}]),Ht("albums_by_artist",{name:j().artist})),q("artistclick",j())}async function fe(T){if(T.stopPropagation(),r(d))try{const J=r(v);J?(ca.update(ie=>(ie.delete(String(j().id)),ie)),Ue("Removed from Yandex Likes","info")):(ca.update(ie=>(ie.add(String(j().id)),ie)),Ue("Added to Yandex Likes","success")),await Nt.toggleLike(j().id,J)}catch{Ue("Failed to update Yandex like","error");try{const ie=await Nt.getFavoritesIds();ie&&ie.ids&&ca.set(new Set(ie.ids.map(String)))}catch{}}else Mo(j())}ee(()=>R(j()),()=>{j()&&m(Me,!1)}),ee(()=>R(j()),()=>{m(d,j().isYandex||j().service==="yandex")}),ee(()=>(r(d),a(),R(j()),s()),()=>{m(v,r(d)?a().has(String(j().id)):s().has(j().file))}),ee(()=>n(),()=>{m(p,n()[n().length-1])}),ee(()=>(r(p),i()),()=>{m(f,r(p)?.view==="queue"||r(p)?.view==="root"&&i()==="queue")}),ee(()=>(r(f),R(L()),R(ue())),()=>{m(h,r(f)?Number(L())===ue():!1)}),ee(()=>(R(j()),R(V())),()=>{m(E,j().file===V())}),ee(()=>(r(E),r(h)),()=>{m(M,r(E)&&!r(h))}),ee(()=>(R(j()),r(d)),()=>{m(w,j().file&&(String(j().file).startsWith("http")||String(j().file).includes("RADIO"))&&!r(d))}),ee(()=>(r(h),R(be()),r(O)),()=>{m(x,r(h)&&be()&&r(O))}),ee(()=>(r(h),R(be()),r(O)),()=>{m(U,r(h)&&be()&&!r(O))}),ee(()=>(r(h),R(be()),r(O)),()=>{m(ne,r(h)&&!be()&&!r(O))}),ee(()=>(r(O),r(x)),()=>{m(ce,r(O)&&!r(x))}),ee(()=>R(j()),()=>{m(H,j().title||j().file?.split("/").pop())}),ee(()=>R(j()),()=>{m(_e,j().artist||"Unknown")}),ee(()=>R(j()),()=>{m(he,X(j().time||j().duration))}),ee(()=>R(j()),()=>{m(B,j().qualityBadge?j().qualityBadge.split(" ")[0]:null)}),ee(()=>{},()=>{m(xe,null)}),ee(()=>(r(Me),R(j()),l(),r(xe),ts),()=>{m(re,r(Me)?Cr(j(),l(),r(xe)):ts(j(),"sm",l(),r(xe)))}),Gt(),It();var ge=Gd();let He;var D=c(ge),N=c(D);{var W=T=>{var J=Od(),ie=c(J),Ie=c(ie);G(Ie,()=>(R(y),_(()=>y.DRAG_HANDLE))),A("mousedown",J,je=>q("startdrag",je)),A("touchstart",J,je=>q("startdrag",je),void 0,!0),A("click",J,ta(function(je){Zr.call(this,t,je)})),b(T,J)},K=T=>{var J=Hd(),ie=c(J);{var Ie=Be=>{var Ke=Fd();b(Be,Ke)},je=Be=>{var Ke=it(),Ve=Oe(Ke);{var Ye=Ne=>{var ze=qd(),Qe=c(ze);G(Qe,()=>(R(y),_(()=>y.PAUSE))),b(Ne,ze)},Le=Ne=>{var ze=it(),Qe=Oe(ze);{var We=at=>{var ot=Bd(),ut=c(ot);G(ut,()=>(R(y),_(()=>y.PLAY))),b(at,ot)},Xe=at=>{var ot=it(),ut=Oe(ot);{var vt=nt=>{var xt=Yd(),Ge=c(xt);G(Ge,()=>(R(y),_(()=>y.PLAY))),b(nt,xt)},ht=nt=>{var xt=Ud(),Ge=c(xt);oe(()=>ae(Ge,L()+1)),b(nt,xt)};P(ut,nt=>{r(ne)?nt(vt):nt(ht,!1)},!0)}b(at,ot)};P(Qe,at=>{r(ce)?at(We):at(Xe,!1)},!0)}b(Ne,ze)};P(Ve,Ne=>{r(x)?Ne(Ye):Ne(Le,!1)},!0)}b(Be,Ke)};P(ie,Be=>{r(U)?Be(Ie):Be(je,!1)})}A("click",J,de),b(T,J)};P(N,T=>{F()?T(W):T(K,!1)})}var ye=g(N,2),we=c(ye);Ut(we,{get src(){return r(re)},get alt(){return r(H)},radius:"4px",$$events:{error:()=>m(Me,!0)},$$slots:{fallback:(T,J)=>{var ie=Vd(),Ie=c(ie);G(Ie,()=>(r(w),R(y),_(()=>r(w)?y.RADIO:y.ALBUMS))),mt(1,ie,()=>Et),b(T,ie)}}});var De=g(D,2),S=c(De),I=c(S),Z=c(I),Te=g(I,2);{var C=T=>{var J=Wd(),ie=c(J);oe(()=>ae(ie,r(B))),b(T,J)};P(Te,T=>{r(B)&&!r(w)&&T(C)})}var Y=g(S,2);let ve;var Ce=c(Y),qe=g(De,2),Se=c(qe);{var Re=T=>{var J=Qd(),ie=c(J);G(ie,()=>(R(y),_(()=>y.YANDEX))),b(T,J)};P(Se,T=>{r(d)&&T(Re)})}var Fe=g(Se,2),se=c(Fe);G(se,()=>(R(y),_(()=>y.DOTS)));var te=g(Fe,2);let Q;var $e=c(te);G($e,()=>(r(v),R(y),_(()=>r(v)?y.HEART_FILLED:y.HEART)));var ke=g(te,2);{var tt=T=>{var J=Xd(),ie=c(J);G(ie,()=>(R(y),_(()=>y.REMOVE))),A("click",J,ta(()=>q("remove",{index:L()}))),b(T,J)},le=T=>{var J=Kd(),ie=c(J);oe(()=>ae(ie,r(he))),b(T,J)};P(ke,T=>{F()?T(tt):T(le,!1)})}Vt(()=>A("click",ge,()=>!r(h)&&q("play"))),Vt(()=>A("mouseenter",ge,()=>m(O,!0))),Vt(()=>A("mouseleave",ge,()=>m(O,!1))),An(ge,T=>Bn?.(T)),Vt(()=>A("longpress",ge,Ae)),oe(()=>{He=rt(ge,1,"row svelte-5cs2hz",null,He,{active:r(h),striped:r(M),editable:F()}),Ft(I,"title",r(H)),ae(Z,r(H)),ve=rt(Y,1,"artist text-ellipsis svelte-5cs2hz",null,ve,{link:!r(w)||r(d)}),ae(Ce,r(_e)),Q=rt(te,1,"btn-icon small svelte-5cs2hz",null,Q,{liked:r(v)})}),A("click",Y,z),A("click",Fe,pe),A("click",te,ta(fe)),b(e,ge),Ct(),u()}const _s=100,ki=5,xi=25,Si=3;function Zd({tracksStore:e,onMoveTrack:t}){const a=Je(!1),s=Je(!1),n=Je(!1),i=Je(null),l=Je(null),o=Je(null),u=Je({x:0,y:0,width:0,height:0,grabOffsetX:0,grabOffsetY:0}),d=Je(null);let v=!1,p=0,f=0,h=0,E=0;const M={scrollContainer:null,listBodyContainer:null};let w=null;function x(L,F,ue){const V=L.detail;if(V.button===2||(window.getSelection&&window.getSelection().removeAllRanges(),!M.scrollContainer))return;const q=M.scrollContainer.querySelectorAll(".row-wrapper")[F];if(!q)return;const O=q.getBoundingClientRect(),Me=V.touches?V.touches[0].clientX:V.clientX,X=V.touches?V.touches[0].clientY:V.clientY,de=Me-O.left,me=X-O.top;v=!0,a.set(!1),s.set(!1),p=Me,f=X,h=Me,E=X,i.set(F),l.set(F),d.set(ue),o.set(null),u.set({x:Me,y:X,width:O.width,height:O.height,grabOffsetX:de,grabOffsetY:me})}function U(L){if(!v||et(s))return;const F=L.touches?L.touches[0].clientX:L.clientX,ue=L.touches?L.touches[0].clientY:L.clientY;if(!et(a)){const V=Math.abs(F-p),be=Math.abs(ue-f);if(V<Si&&be<Si)return;a.set(!0)}L.cancelable&&L.preventDefault(),h=F,E=ue,u.update(V=>({...V,x:h,y:E})),B(E),ne()}function ne(){if(!M.listBodyContainer)return;const L=M.listBodyContainer.getBoundingClientRect(),F=et(u),V=E-L.top-F.grabOffsetY+F.height/2,be=et(e).length;if(V<0){l.set(0);return}if(V>L.height){l.set(be);return}const q=Array.from(M.listBodyContainer.querySelectorAll(".row-wrapper"));let O=-1,Me=1/0;q.forEach((X,de)=>{const me=X.offsetTop+X.offsetHeight/2,pe=Math.abs(V-me);pe<Me&&(Me=pe,O=de)}),O!==-1&&l.set(O)}function ce(L){if(v){if(v=!1,!et(a)){_e();return}H()}}async function H(){re(),ne(),a.set(!1),s.set(!0);const L=et(l);if(M.listBodyContainer&&L!==null){const O=M.listBodyContainer.querySelectorAll(".row-wrapper"),Me=M.listBodyContainer.getBoundingClientRect(),X=O[L];let de=0,me=0,pe=!1;if(X)de=Me.top+X.offsetTop,me=Me.left+X.offsetLeft,pe=!0;else if(L>=O.length&&O.length>0){const Ae=O[O.length-1];de=Me.top+Ae.offsetTop+Ae.offsetHeight,me=Me.left+Ae.offsetLeft,pe=!0}else O.length===0&&(de=Me.top,me=Me.left,pe=!0);pe&&u.update(Ae=>({...Ae,y:de+Ae.grabOffsetY,x:me+Ae.grabOffsetX}))}await new Promise(O=>setTimeout(O,250)),n.set(!0),await Er();const F=et(i),ue=et(e).length;let V=Math.max(0,Math.min(L,ue)),be=V;if(F!==null&&F!==V){const O=[...et(e)],[Me]=O.splice(F,1);be=Math.max(0,Math.min(be,O.length)),O.splice(be,0,Me),e.set(O),t&&t(F,be),i.set(be)}await Er(),d.set(null),i.set(null),l.set(null),s.set(!1);const q=F!==V?be:F;o.set(q),await Er(),requestAnimationFrame(()=>{requestAnimationFrame(()=>{n.set(!1),setTimeout(()=>{o.set(null)},300)})})}function _e(){v=!1,he()}function he(){a.set(!1),s.set(!1),i.set(null),l.set(null),d.set(null),re()}function B(L){if(!M.scrollContainer)return;const{top:F,bottom:ue}=M.scrollContainer.getBoundingClientRect(),V=L-F,be=ue-L;re();let q=0;if(V<_s&&V>0){const O=1-V/_s;q=-(ki+xi*(O*O))}else if(be<_s&&be>0){const O=1-be/_s;q=ki+xi*(O*O)}q!==0&&xe(q)}function xe(L){w||(w=requestAnimationFrame(function F(){M.scrollContainer&&(M.scrollContainer.scrollTop+=L,et(a)&&(u.update(ue=>({...ue,x:h,y:E})),ne(),w=requestAnimationFrame(F)))}))}function re(){w&&(cancelAnimationFrame(w),w=null)}function j(L,F,ue,V,be,q){return q||!F&&!ue||V===null||be===null?"":L===V?"opacity: 0; pointer-events: none;":V===be?"":V<be&&L>V&&L<=be?"transform: translateY(-100%);":V>be&&L>=be&&L<V?"transform: translateY(100%);":""}return{isDragging:a,isDropping:s,isReordering:n,draggingIndex:i,hoverIndex:l,justDroppedIndex:o,draggedItemData:d,ghostCoords:u,refs:M,onDragInit:x,onPointerMove:U,onPointerUp:ce,getRowStyle:j,cancelDrag:_e}}var Jd=k('<div><div style="pointer-events: none; width: 100%; height: 100%;" class="svelte-ym6b2"><!></div></div>'),ev=k('<div class="skeleton-row svelte-ym6b2"><div class="sk-left svelte-ym6b2"><!> <!></div> <div class="sk-info svelte-ym6b2"><!> <!></div> <div class="sk-right svelte-ym6b2"><!></div></div>'),tv=k('<div class="skeletons-wrapper svelte-ym6b2"></div>'),av=k("<div><!></div>"),rv=k('<div class="content-padded svelte-ym6b2" style="text-align: center; opacity: 0.5;"> </div>'),sv=k("<!> <!> <!>",1),nv=k('<div><!> <div class="list-body svelte-ym6b2"><!> <!></div></div>');function ds(e,t){At(t,!1);const a=()=>Ee(pt,"$navigationStack",h),s=()=>Ee(Pt,"$activeMenuTab",h),n=()=>Ee(re,"$isDragging",h),i=()=>Ee(j,"$isDropping",h),l=()=>Ee(be,"$draggedItemData",h),o=()=>Ee(q,"$ghostCoords",h),u=()=>Ee(F,"$draggingIndex",h),d=()=>Ee(M(),"$itemsStore",h),v=()=>Ee(V,"$justDroppedIndex",h),p=()=>Ee(L,"$isReordering",h),f=()=>Ee(ue,"$hoverIndex",h),[h,E]=qt();let M=St(t,"itemsStore",8),w=St(t,"isEditMode",8,!1),x=St(t,"isLoading",8,!1),U=St(t,"emptyText",8,"List is empty"),ne=St(t,"onMoveItem",8,(D,N)=>{}),ce=$(""),H=$(0),_e=$(!1);Da(async()=>{m(H,id(r(ce))),!x()&&r(H)>0&&r(B).refs.scrollContainer&&(await Er(),us(B,r(B).refs.scrollContainer.scrollTop=r(H)),m(_e,!0))});async function he(){await Er(),r(B).refs.scrollContainer&&(us(B,r(B).refs.scrollContainer.scrollTop=r(H)),m(_e,!0))}Ln(()=>{r(B).cancelDrag(),r(B).refs.scrollContainer&&nd(r(ce),r(B).refs.scrollContainer.scrollTop)});const B=$(Zd({tracksStore:M(),onMoveTrack:(D,N)=>{ne()(D,N)}})),xe=r(B),re=xe.isDragging,j=xe.isDropping,L=xe.isReordering,F=xe.draggingIndex,ue=xe.hoverIndex,V=xe.justDroppedIndex,be=xe.draggedItemData,q=xe.ghostCoords,O=$(xe.refs);function Me(D,N,W){w()&&r(B).onDragInit(D,N,W)}ee(()=>(a(),s()),()=>{const D=a(),N=D[D.length-1],W=s();if(N&&N.view==="root")m(ce,`root_${W}`);else if(N){const K=N.data?N.data.name||N.data:"unknown";m(ce,`${N.view}_${K}`)}}),ee(()=>(R(x()),r(_e),r(H),r(B)),()=>{!x()&&!r(_e)&&r(H)>0&&r(B).refs.scrollContainer&&he()}),Gt(),It();var X=nv();A("mousemove",qa,function(...D){r(B).onPointerMove?.apply(this,D)}),A("mouseup",qa,function(...D){r(B).onPointerUp?.apply(this,D)}),A("touchmove",qa,function(...D){r(B).onPointerMove?.apply(this,D)},void 0,!1),A("touchend",qa,function(...D){r(B).onPointerUp?.apply(this,D)}),A("touchcancel",qa,function(...D){r(B).onPointerUp?.apply(this,D)});let de;var me=c(X);{var pe=D=>{var N=Jd();let W;var K=c(N),ye=c(K);qr(ye,t,"row",{get item(){return l()},get index(){return u()},isGhost:!0,startDrag:()=>{}}),oe(()=>{W=rt(N,1,"floating-item svelte-ym6b2",null,W,{dropping:i()}),ft(N,`
            top: ${o(),_(()=>o().y-o().grabOffsetY)??""}px; 
            left: ${o(),_(()=>o().x-o().grabOffsetX)??""}px;
            width: ${o(),_(()=>o().width)??""}px; 
            height: ${o(),_(()=>o().height)??""}px;
        `)}),b(D,N)};P(me,D=>{(n()||i())&&l()&&D(pe)})}var Ae=g(me,2),z=c(Ae);qr(z,t,"header",{});var fe=g(z,2);{var ge=D=>{var N=tv();kt(N,4,()=>Array(10),Ot,(W,K)=>{var ye=ev(),we=c(ye),De=c(we);ea(De,{width:"24px",height:"24px",radius:"4px",style:"opacity: 0.3"});var S=g(De,2);ea(S,{width:"40px",height:"40px",radius:"4px",style:"margin-left: 12px;"});var I=g(we,2),Z=c(I);ea(Z,{width:"40%",height:"14px",radius:"4px",style:"margin-bottom: 6px;"});var Te=g(Z,2);ea(Te,{width:"25%",height:"12px",radius:"4px",style:"opacity: 0.6"});var C=g(I,2),Y=c(C);ea(Y,{width:"30px",height:"12px",radius:"4px"}),b(W,ye)}),b(D,N)},He=D=>{var N=sv(),W=Oe(N);kt(W,3,d,(De,S)=>De._uid||S,(De,S,I)=>{var Z=av();let Te;var C=c(Z);qr(C,t,"row",{get item(){return r(S)},get index(){return r(I)},isGhost:!1,startDrag:Y=>Me(Y,r(I),r(S))}),oe(Y=>{Te=rt(Z,1,"row-wrapper svelte-ym6b2",null,Te,{"ghost-placeholder":u()===r(I)&&(n()||i()),"just-dropped":v()===r(I),"no-transition":p()}),ft(Z,Y)},[()=>(r(B),R(r(I)),n(),i(),u(),f(),p(),_(()=>r(B).getRowStyle(r(I),n(),i(),u(),f(),p())))]),b(De,Z)});var K=g(W,2);{var ye=De=>{var S=rv(),I=c(S);oe(()=>ae(I,U())),b(De,S)};P(K,De=>{d(),_(()=>d().length===0)&&De(ye)})}var we=g(K,2);qr(we,t,"footer",{}),b(D,N)};P(fe,D=>{x()?D(ge):D(He,!1)})}ja(Ae,D=>us(O,r(O).listBodyContainer=D),()=>r(O)?.listBodyContainer),ja(X,D=>us(O,r(O).scrollContainer=D),()=>r(O)?.scrollContainer),oe(()=>de=rt(X,1,"base-list-scroll-container svelte-ym6b2",null,de,{dragging:n()})),mt(1,Ae,()=>Et,()=>({duration:200})),b(e,X),Ct(),E()}var iv=k('<div slot="fallback" class="icon-fallback svelte-1eh2rsb"><!></div>'),ov=k('<span class="meta-tag svelte-1eh2rsb"> </span>'),lv=k('<div class="header-subtitle-row svelte-1eh2rsb"><h2 class="header-sub-text svelte-1eh2rsb"> </h2> <!></div>'),cv=k('<span class="meta-tag svelte-1eh2rsb"> </span>'),dv=k('<span class="meta-tag svelte-1eh2rsb"> </span>'),vv=k('<span class="meta-tag quality svelte-1eh2rsb"> </span>'),uv=k('<div slot="header" class="content-padded svelte-1eh2rsb"><div class="view-header svelte-1eh2rsb"><div class="header-art svelte-1eh2rsb"><div style="width: 100%; height: 100%;" class="svelte-1eh2rsb"><!></div></div> <div class="header-info svelte-1eh2rsb"><div class="header-text-group svelte-1eh2rsb"><div class="header-label svelte-1eh2rsb"> </div> <h1 class="header-title svelte-1eh2rsb"> </h1> <!> <div class="meta-badges svelte-1eh2rsb"><!> <!> <!></div></div> <div class="header-actions svelte-1eh2rsb"><button class="btn-primary svelte-1eh2rsb"> </button> <button class="btn-secondary svelte-1eh2rsb"> </button></div></div></div></div>'),fv=k('<div slot="row" class="svelte-1eh2rsb"><!></div>'),hv=k("<button> </button>"),pv=k('<div class="sort-backdrop svelte-1eh2rsb"></div> <div class="sort-menu svelte-1eh2rsb"></div>',1),gv=k('<div class="sort-wrapper svelte-1eh2rsb"><button class="sort-trigger svelte-1eh2rsb"><span class="svelte-1eh2rsb"> </span> <span class="sort-trigger-icon svelte-1eh2rsb"><!></span></button> <!></div>'),_v=k('<div class="music-card skeleton-card svelte-1eh2rsb"><div class="card-img-container svelte-1eh2rsb"><!></div> <div class="card-title svelte-1eh2rsb" style="margin-top: 12px;"><!></div> <div class="card-sub-row svelte-1eh2rsb" style="margin-top: 6px;"><!></div></div>'),mv=k('<div class="music-grid svelte-1eh2rsb"></div>'),bv=k('<div class="group-header header-label svelte-1eh2rsb"> </div>'),yv=k('<div slot="fallback" class="icon-fallback svelte-1eh2rsb"><!></div>'),wv=k('<div class="card-sub text-ellipsis svelte-1eh2rsb"> </div>'),kv=k('<div class="card-badge svelte-1eh2rsb"> </div>'),xv=k('<div class="card-badge quality svelte-1eh2rsb"> </div>'),Sv=k('<div class="music-card svelte-1eh2rsb" role="button" tabindex="0"><div class="card-img-container svelte-1eh2rsb"><!> <div class="play-overlay svelte-1eh2rsb"><span class="overlay-icon svelte-1eh2rsb"><!></span></div></div> <div class="card-title svelte-1eh2rsb"> </div> <div class="card-sub-row svelte-1eh2rsb"><!> <!> <!></div></div>'),Ev=k('<div class="empty-text svelte-1eh2rsb">No results found</div>'),Tv=k('<div class="music-grid svelte-1eh2rsb"></div>'),$v=k('<div class="content-padded svelte-1eh2rsb"><div class="search-input-container svelte-1eh2rsb"><span class="search-icon svelte-1eh2rsb"><!></span> <input type="text" class="svelte-1eh2rsb"/> <!></div> <!></div>'),Mv=k("<div><!></div>");function Av(e,t){At(t,!1);const a=()=>Ee(v,"$itemsStore",n),s=()=>Ee(pt,"$navigationStack",n),[n,i]=qt(),l=$(),o=$(),u=$();let d=St(t,"activeCategory",8,"artists");const v=Je([]);let p=$(!0),f=$(""),h=$("name"),E=$(!1);const M=[{id:"name",label:"A-Z"},{id:"artist",label:"Artist"},{id:"year",label:"Oldest"},{id:"year_desc",label:"Newest"}];let w=$(!1),x=$(!1),U=$(null),ne=$(""),ce=$(""),H=$(""),_e=$(0),he=0;function B(){m(E,!r(E))}function xe(X){m(h,X),m(E,!1)}function re(X,de){if(!X||X.length===0)return[];const me=[...X].sort((pe,Ae)=>{switch(de){case"name":return pe.displayName.localeCompare(Ae.displayName,void 0,{sensitivity:"base"});case"artist":const z=pe.artist||"",fe=Ae.artist||"",ge=z.localeCompare(fe,void 0,{sensitivity:"base"});return ge!==0?ge:(parseInt(pe.year)||0)-(parseInt(Ae.year)||0);case"year":return(parseInt(pe.year)||0)-(parseInt(Ae.year)||0);case"year_desc":return(parseInt(Ae.year)||0)-(parseInt(pe.year)||0);default:return 0}});if(de==="artist"){const pe=[];let Ae=null;return me.forEach(z=>{const fe=z.artist||"Unknown Artist";fe!==Ae&&(pe.push({_uid:`header-${fe}`,isHeader:!0,title:fe}),Ae=fe),pe.push(z)}),pe}return me}async function j(X,de){if(!de)return;const me=++he;m(p,!0),v.set([]),m(U,de.data),m(ne,""),m(ce,""),m(H,""),m(_e,0),console.log(`[LibraryView #${me}] Start loading:`,de);try{let pe=[];if(de.view==="root")pe=X==="artists"?await Ua.getArtists():await Ua.getAlbums();else if(de.view==="albums_by_artist"){const z=de.data.name||de.data;pe=await Ua.getArtistAlbums(z),m(h,"year")}else if(de.view==="tracks_by_album"){const z=de.data.name||de.data,fe=de.data.artist;pe=await Ua.getAlbumTracks(z,fe)}if(me!==he){console.warn(`[LibraryView #${me}] Request cancelled (stale).`);return}const Ae=pe.map((z,fe)=>{const He=typeof z=="string"?{name:z}:z;let D=String(He.year||"");return D.length>4&&(D=D.substring(0,4)),{...He,displayName:He.name||He.title||He.artist||"Unknown",thumbFile:He.file||null,year:D,_uid:(He.file||He.name||fe)+X+de.view}});if(console.log(`[LibraryView #${me}] Setting ${Ae.length} items.`),v.set(Ae),de.view==="tracks_by_album"&&Ae.length>0){m(U,Ae[0]),m(_e,Ae.length),m(H,Ae[0].year);const z=Ae.reduce((fe,ge)=>fe+(ge.time||0),0);if(z>0){const fe=Math.floor(z/3600),ge=Math.floor(z%3600/60);m(ne,fe>0?`${fe} hr ${ge} min`:`${ge} min`)}Ae[0].qualityBadge&&m(ce,Ae[0].qualityBadge)}}catch(pe){me===he&&(console.error(pe),v.set([]))}finally{me===he&&m(p,!1)}}function L(X){r(u).view==="root"?d()==="artists"?Ht("albums_by_artist",X):Ht("tracks_by_album",X):r(u).view==="albums_by_artist"&&Ht("tracks_by_album",X)}function F(){const X=a();if(X.length>0){const de=r(u).data.name||r(u).data.displayName||"this selection";ba({title:"Replace Queue?",message:`This will clear your queue and play all tracks from "${de}".`,confirmLabel:"Play",type:"confirm",onConfirm:()=>{m(w,!0),Ps(X)}})}}function ue(){const X=a();X.length>0&&(m(x,!0),On(X),setTimeout(()=>{m(x,!1)},2e3))}ee(()=>R(d()),()=>{d()&&(m(f,""),d(),m(h,"name"))}),ee(()=>(r(h),y),()=>{m(l,r(h)==="year_desc"?y.SORT_ASC:y.SORT_DESC)}),ee(()=>(a(),r(f),r(h)),()=>{m(o,re(a().filter(X=>{if(!r(f))return!0;const de=r(f).toLowerCase();return X.displayName.toLowerCase().includes(de)||X.artist&&X.artist.toLowerCase().includes(de)}),r(h)))}),ee(()=>s(),()=>{m(u,s()[s().length-1])}),ee(()=>(R(d()),r(u)),()=>{j(d(),r(u))}),ee(()=>r(u),()=>{r(u)&&(m(w,!1),m(x,!1),m(E,!1))}),Gt(),It();var V=Mv();let be;var q=c(V);{var O=X=>{ds(X,{get itemsStore(){return v},get isLoading(){return r(p)},isEditMode:!1,emptyText:"No tracks found",$$slots:{header:(de,me)=>{var pe=uv(),Ae=c(pe),z=c(Ae),fe=c(z),ge=c(fe);{let se=gt(()=>(R(Cr),r(U),_(()=>Cr(r(U)))));Ut(ge,{get src(){return r(se)},alt:"Art",radius:"8px",$$slots:{fallback:(te,Q)=>{var $e=iv(),ke=c($e);G(ke,()=>(R(y),_(()=>y.ALBUMS))),b(te,$e)}}})}var He=g(z,2),D=c(He),N=c(D),W=c(N),K=g(N,2),ye=c(K),we=g(K,2);{var De=se=>{var te=lv(),Q=c(te),$e=c(Q),ke=g(Q,2);{var tt=le=>{var T=ov(),J=c(T);oe(()=>ae(J,r(H))),b(le,T)};P(ke,le=>{r(H)&&r(H)!=="0"&&le(tt)})}oe(()=>ae($e,(r(U),_(()=>r(U).artist)))),b(se,te)};P(we,se=>{r(U),_(()=>r(U)&&r(U).artist)&&se(De)})}var S=g(we,2),I=c(S);{var Z=se=>{var te=cv(),Q=c(te);oe(()=>ae(Q,`${r(_e)??""} tracks`)),b(se,te)};P(I,se=>{r(_e)>0&&se(Z)})}var Te=g(I,2);{var C=se=>{var te=dv(),Q=c(te);oe(()=>ae(Q,r(ne))),b(se,te)};P(Te,se=>{r(ne)&&se(C)})}var Y=g(Te,2);{var ve=se=>{var te=vv(),Q=c(te);oe(()=>ae(Q,r(ce))),b(se,te)};P(Y,se=>{r(ce)&&se(ve)})}var Ce=g(D,2),qe=c(Ce),Se=c(qe),Re=g(qe,2),Fe=c(Re);oe(()=>{ae(W,(r(u),_(()=>r(u).view==="albums_by_artist"?"Artist":"Album"))),Ft(K,"title",(r(u),_(()=>r(u).data.name||r(u).data.displayName))),ae(ye,(r(u),_(()=>r(u).data.name||r(u).data.displayName||"Unknown"))),qe.disabled=r(w),ae(Se,r(w)?"Playing...":"Play All"),Re.disabled=r(x),ae(Fe,r(x)?"Added":"To Queue")}),A("click",qe,F),A("click",Re,ue),b(de,pe)},row:(de,me)=>{var pe=fv();const Ae=gt(()=>me.item),z=gt(()=>me.index);var fe=c(pe);Pr(fe,{get track(){return r(Ae)},get index(){return r(z)},isEditable:!1,$$events:{play:()=>Fs(r(Ae))}}),b(de,pe)}}})},Me=X=>{var de=$v(),me=c(de),pe=c(me),Ae=c(pe);G(Ae,()=>(R(y),_(()=>y.SEARCH)));var z=g(pe,2),fe=g(z,2);{var ge=W=>{var K=gv(),ye=c(K),we=c(ye),De=c(we),S=g(we,2),I=c(S);G(I,()=>r(l));var Z=g(ye,2);{var Te=C=>{var Y=pv(),ve=Oe(Y),Ce=g(ve,2);kt(Ce,5,()=>M,Ot,(qe,Se)=>{var Re=hv();let Fe;var se=c(Re);oe(()=>{Fe=rt(Re,1,"sort-item svelte-1eh2rsb",null,Fe,{selected:r(h)===r(Se).id}),ae(se,(r(Se),_(()=>r(Se).label)))}),A("click",Re,()=>xe(r(Se).id)),b(qe,Re)}),A("click",ve,B),mt(3,ve,()=>Et,()=>({duration:100})),mt(3,Ce,()=>Rn,()=>({start:.95,duration:100})),b(C,Y)};P(Z,C=>{r(E)&&C(Te)})}oe(C=>ae(De,C),[()=>(r(h),_(()=>M.find(C=>C.id===r(h))?.label))]),A("click",ye,B),b(W,K)};P(fe,W=>{R(d()),r(u),_(()=>d()==="albums"||r(u).view==="albums_by_artist")&&W(ge)})}var He=g(me,2);{var D=W=>{var K=mv();kt(K,4,()=>Array(12),Ot,(ye,we)=>{var De=_v(),S=c(De),I=c(S);ea(I,{width:"100%",height:"100%",radius:"8px"});var Z=g(S,2),Te=c(Z);ea(Te,{width:"80%",height:"14px",radius:"4px"});var C=g(Z,2),Y=c(C);ea(Y,{width:"50%",height:"12px",radius:"4px",style:"opacity: 0.6"}),b(ye,De)}),b(W,K)},N=W=>{var K=Tv();kt(K,5,()=>r(o),ye=>ye._uid,(ye,we)=>{var De=it(),S=Oe(De);{var I=Te=>{var C=bv(),Y=c(C);oe(()=>ae(Y,(r(we),_(()=>r(we).title)))),b(Te,C)},Z=Te=>{var C=Sv(),Y=c(C),ve=c(Y);{let T=gt(()=>(R(ts),r(we),_(()=>ts(r(we),"md"))));Ut(ve,{get src(){return r(T)},get alt(){return r(we),_(()=>r(we).displayName)},radius:"8px",$$slots:{fallback:(J,ie)=>{var Ie=yv(),je=c(Ie);{var Be=Ve=>{var Ye=it(),Le=Oe(Ye);G(Le,()=>(R(y),_(()=>y.ARTISTS))),b(Ve,Ye)},Ke=Ve=>{var Ye=it(),Le=Oe(Ye);G(Le,()=>(R(y),_(()=>y.ALBUMS))),b(Ve,Ye)};P(je,Ve=>{d()==="artists"?Ve(Be):Ve(Ke,!1)})}b(J,Ie)}}})}var Ce=g(ve,2),qe=c(Ce),Se=c(qe);G(Se,()=>(R(y),_(()=>y.PLAY)));var Re=g(Y,2),Fe=c(Re),se=g(Re,2),te=c(se);{var Q=T=>{var J=wv(),ie=c(J);oe(()=>ae(ie,(r(we),_(()=>r(we).artist)))),b(T,J)};P(te,T=>{r(we),_(()=>r(we).artist)&&T(Q)})}var $e=g(te,2);{var ke=T=>{var J=kv(),ie=c(J);oe(()=>ae(ie,(r(we),_(()=>r(we).year)))),b(T,J)};P($e,T=>{r(we),_(()=>r(we).year&&r(we).year!=="0")&&T(ke)})}var tt=g($e,2);{var le=T=>{var J=xv(),ie=c(J);oe(Ie=>ae(ie,Ie),[()=>(r(we),_(()=>r(we).qualityBadge.split(" ")[0]))]),b(T,J)};P(tt,T=>{r(we),_(()=>r(we).qualityBadge)&&T(le)})}oe(()=>ae(Fe,(r(we),_(()=>r(we).displayName)))),A("click",C,()=>L(r(we))),A("keypress",C,T=>T.key==="Enter"&&L(r(we))),b(Te,C)};P(S,Te=>{r(we),_(()=>r(we).isHeader)?Te(I):Te(Z,!1)})}b(ye,De)},ye=>{var we=Ev();b(ye,we)}),b(W,K)};P(He,W=>{r(p)?W(D):W(N,!1)})}oe(()=>Ft(z,"placeholder",`Filter ${d()??""}...`)),sr(z,()=>r(f),W=>m(f,W)),b(X,de)};P(q,X=>{r(u),_(()=>r(u)?.view==="tracks_by_album")?X(O):X(Me,!1)})}oe(()=>be=rt(V,1,"view-container svelte-1eh2rsb",null,be,{scrollable:r(u)?.view!=="tracks_by_album"})),b(e,V),Ct(),i()}var Cv=k('<div class="music-card svelte-1otxnt7"><!> <!></div>'),Pv=k('<div class="music-grid svelte-1otxnt7"></div>'),Lv=k('<div slot="fallback" class="icon-fallback svelte-1otxnt7">ð»</div>'),zv=k('<div class="status-badge playing svelte-1otxnt7">PLAYING</div>'),Rv=k('<div class="status-badge paused svelte-1otxnt7">PAUSED</div>'),Iv=k('<span class="overlay-icon svelte-1otxnt7"><!></span>'),jv=k('<div class="card-sub svelte-1otxnt7"> </div>'),Nv=k('<div class="card-badge quality svelte-1otxnt7"> </div>'),Dv=k('<div role="button" tabindex="0"><div class="card-img-container svelte-1otxnt7"><!> <div class="play-overlay svelte-1otxnt7"><!></div></div> <div class="card-title svelte-1otxnt7"> </div> <div class="card-sub-row svelte-1otxnt7"><!> <!></div></div>'),Ov=k('<div class="empty-text svelte-1otxnt7">No stations found</div>'),Fv=k('<div class="music-grid svelte-1otxnt7"></div> <!>',1),qv=k('<div class="view-container scrollable svelte-1otxnt7"><div class="content-padded no-bottom-pad svelte-1otxnt7"><div class="search-input-container svelte-1otxnt7"><span class="search-icon svelte-1otxnt7"><!></span> <input type="text" placeholder="Find station..." class="svelte-1otxnt7"/></div></div> <div class="content-padded svelte-1otxnt7"><!></div></div>');function Bv(e,t){At(t,!1);const a=()=>Ee(Qa,"$stations",l),s=()=>Ee(Mt,"$status",l),n=()=>Ee(ms,"$isLoadingRadio",l),i=()=>Ee(Kt,"$currentSong",l),[l,o]=qt(),u=$(),d=$();let v=$("");ee(()=>(a(),r(v)),()=>{m(u,a().filter(H=>{const _e=r(v).toLowerCase();return H.name.toLowerCase().includes(_e)||H.genre&&H.genre.toLowerCase().includes(_e)}))}),ee(()=>s(),()=>{m(d,s().bitrate?`${s().bitrate} kbps`:s().format||"")}),Gt(),It();var p=qv(),f=c(p),h=c(f),E=c(h),M=c(E);G(M,()=>(R(y),_(()=>y.SEARCH)));var w=g(E,2),x=g(f,2),U=c(x);{var ne=H=>{var _e=Pv();kt(_e,4,()=>Array(12),Ot,(he,B)=>{var xe=Cv(),re=c(xe);ea(re,{width:"100%",style:"aspect-ratio:1; border-radius:12px; margin-bottom:12px;"});var j=g(re,2);ea(j,{width:"70%",height:"16px"}),b(he,xe)}),b(H,_e)},ce=H=>{var _e=Fv(),he=Oe(_e);kt(he,5,()=>r(u),Ot,(re,j)=>{const L=gt(()=>(r(j),_(()=>r(j).file))),F=gt(()=>(i(),r(j),R(r(L)),_(()=>i().stationName===r(j).name||i().file===r(L)))),ue=gt(()=>(R(Ar),r(j),_(()=>Ar(r(j)))));var V=Dv();let be;var q=c(V),O=c(q);Ut(O,{get src(){return r(ue)},get alt(){return r(j),_(()=>r(j).name)},radius:"8px",$$slots:{fallback:(N,W)=>{var K=Lv();b(N,K)}}});var Me=g(O,2),X=c(Me);{var de=N=>{var W=it(),K=Oe(W);{var ye=De=>{var S=zv();b(De,S)},we=De=>{var S=Rv();b(De,S)};P(K,De=>{s(),_(()=>s().state==="play")?De(ye):De(we,!1)})}b(N,W)},me=N=>{var W=Iv(),K=c(W);G(K,()=>(R(y),_(()=>y.PLAY))),b(N,W)};P(X,N=>{r(F)?N(de):N(me,!1)})}var pe=g(q,2),Ae=c(pe),z=g(pe,2),fe=c(z);{var ge=N=>{var W=jv(),K=c(W);oe(()=>ae(K,(r(j),_(()=>r(j).genre)))),b(N,W)};P(fe,N=>{r(j),_(()=>r(j).genre)&&N(ge)})}var He=g(fe,2);{var D=N=>{var W=Nv(),K=c(W);oe(()=>ae(K,r(d))),mt(1,W,()=>Et),b(N,W)};P(He,N=>{r(F)&&r(d)&&N(D)})}oe(()=>{be=rt(V,1,"music-card svelte-1otxnt7",null,be,{"is-active":r(F)}),ft(Me,r(F)?"opacity: 1":""),ae(Ae,(r(j),_(()=>r(j).name)))}),A("click",V,()=>qn(r(j))),b(re,V)});var B=g(he,2);{var xe=re=>{var j=Ov();b(re,j)};P(B,re=>{r(u),a(),_(()=>r(u).length===0&&a().length>0)&&re(xe)})}b(H,_e)};P(U,H=>{n()?H(ne):H(ce,!1)})}sr(w,()=>r(v),H=>m(v,H)),mt(1,p,()=>Et,()=>({duration:200})),b(e,p),Ct(),o()}var Yv=k('<button class="clear-icon-btn svelte-m7c4tz"><!></button>'),Uv=k('<div class="spinner svelte-m7c4tz"></div>'),Hv=k('<div class="content-padded no-bottom-pad svelte-m7c4tz"><div class="search-input-container svelte-m7c4tz"><span class="search-icon svelte-m7c4tz"><!></span> <input type="text" placeholder="Search playlists &amp; tracks..." class="svelte-m7c4tz"/> <!> <!></div></div>'),Vv=k('<span class="meta-tag svelte-m7c4tz">Loading...</span>'),Wv=k('<span class="meta-tag svelte-m7c4tz"> </span>'),Qv=k('<span class="meta-tag quality svelte-m7c4tz"> </span>'),Xv=k('<span class="meta-tag svelte-m7c4tz"> </span> <!> <!>',1),Kv=k('<div slot="header" class="content-padded svelte-m7c4tz"><div class="view-header svelte-m7c4tz"><div class="header-art svelte-m7c4tz"><div class="header-icon-wrap svelte-m7c4tz"><!></div></div> <div class="header-info svelte-m7c4tz"><div class="header-text-group svelte-m7c4tz"><div class="header-label svelte-m7c4tz">Playlist</div> <h1 class="header-title svelte-m7c4tz"> </h1> <div class="meta-badges svelte-m7c4tz"><!></div></div> <div class="header-actions svelte-m7c4tz"><button class="btn-primary svelte-m7c4tz"> </button> <button class="btn-secondary svelte-m7c4tz"> </button> <button title="Edit"><!></button></div></div></div></div>'),Gv=k('<div slot="row" class="svelte-m7c4tz"><!></div>'),Zv=k('<div class="music-card skeleton-card svelte-m7c4tz"><div class="card-img-container svelte-m7c4tz"><!></div> <div style="margin-top: 8px;" class="svelte-m7c4tz"><!></div></div>'),Jv=k('<div class="content-padded svelte-m7c4tz"><div class="music-grid playlists-grid-override svelte-m7c4tz"></div></div>'),eu=k('<button class="card-menu-btn svelte-m7c4tz"><!></button>'),tu=k('<div class="music-card svelte-m7c4tz"><div class="card-img-container svelte-m7c4tz"><div class="icon-wrap svelte-m7c4tz"><!></div> <!> <div class="play-overlay svelte-m7c4tz"><span class="overlay-icon svelte-m7c4tz"><!></span></div></div> <div class="card-title svelte-m7c4tz"> </div> <div class="card-sub-row svelte-m7c4tz"><div class="card-sub svelte-m7c4tz"> </div></div></div>'),au=k('<div class="music-grid playlists-grid-override svelte-m7c4tz"><div class="music-card svelte-m7c4tz"><div class="card-img-container dashed-cover svelte-m7c4tz"><div class="icon-wrap svelte-m7c4tz"><!></div></div> <div class="card-title svelte-m7c4tz">New Playlist</div></div> <!></div>'),ru=k('<div class="music-card svelte-m7c4tz"><div class="card-img-container svelte-m7c4tz"><div class="icon-wrap svelte-m7c4tz"><!></div> <div class="play-overlay svelte-m7c4tz"><span class="overlay-icon svelte-m7c4tz"><!></span></div></div> <div class="card-title svelte-m7c4tz"> </div></div>'),su=k('<div class="header-label section-spacing svelte-m7c4tz">Matched Playlists</div> <div class="music-grid horizontal section-mb svelte-m7c4tz"></div>',1),nu=k('<div class="group-container svelte-m7c4tz"><div class="group-header svelte-m7c4tz"><div class="group-icon svelte-m7c4tz"><!></div> <div class="group-title svelte-m7c4tz"> </div> <div class="group-count svelte-m7c4tz"> </div> <div class="group-actions svelte-m7c4tz"><button class="btn-icon small svelte-m7c4tz" title="Play matches"><!></button> <button class="btn-icon small svelte-m7c4tz" title="Add matches to Queue"><!></button></div></div> <div class="group-tracks svelte-m7c4tz"></div></div>'),iu=k('<div class="header-label section-spacing svelte-m7c4tz">Matched Tracks</div> <div class="grouped-results svelte-m7c4tz"></div>',1),ou=k('<div class="empty-text svelte-m7c4tz"> </div>'),lu=k('<div class="empty-text svelte-m7c4tz" style="opacity: 0.7">Searching tracks in playlists...</div>'),cu=k("<!> <!> <!>",1),du=k('<div class="content-padded svelte-m7c4tz"><!></div>'),vu=k("<div><!> <!></div>");function uu(e,t){At(t,!1);const a=()=>Ee(Mt,"$status",f),s=()=>Ee(Kt,"$currentSong",f),n=()=>Ee(pt,"$navigationStack",f),i=()=>Ee(Ds,"$playlists",f),l=()=>Ee(Vr,"$activePlaylistTracks",f),o=()=>Ee(fn,"$isLoadingTracks",f),u=()=>Ee(sd,"$activePlaylistName",f),d=()=>Ee(Wa,"$queue",f),v=()=>Ee($s,"$currentTheme",f),p=()=>Ee(un,"$isLoadingPlaylists",f),[f,h]=qt(),E=$(),M=$(),w=$(),x=$(),U=$(),ne=$();let ce=$(!1),H=$(!1),_e=$(!1),he=$(""),B=$(!1),xe,re=0,j=$([]),L=$([]),F=$(""),ue=$(""),V=$("");function be(C){m(he,C.target.value),clearTimeout(xe),r(he).length>=2?xe=setTimeout(()=>{q(r(he))},600):(m(B,!1),m(j,[]),m(L,[]))}async function q(C){if(!C)return;re++;const Y=re;m(B,!0);const ve=C.toLowerCase();m(j,i().filter(Se=>Se.name.toLowerCase().includes(ve)));let Ce=[];const qe=i().filter(Se=>Se.name!=="Favorites");for(const Se of qe){if(Y!==re)break;try{const Re=await Ze.send(`listplaylistinfo "${Se.name.replace(/"/g,'\\"')}"`),te=oa.parseTracks(Re).map((Q,$e)=>({...Q,playlistPos:$e})).filter(Q=>Q.title&&Q.title.toLowerCase().includes(ve)||Q.artist&&Q.artist.toLowerCase().includes(ve));if(te.length>0){const Q=te.map($e=>({...$e,_uid:Math.random()}));Ce.push({playlist:Se,tracks:Q}),m(L,[...Ce])}}catch(Re){console.warn(`Failed to search in playlist ${Se.name}`,Re)}}Y===re&&m(B,!1)}function O(C){r(ce)||Fs(C)}function Me(C){C.deltaY!==0&&(C.currentTarget.scrollLeft+=C.deltaY)}function X(C,Y){ba({title:"Play Search Results?",message:`This will clear your queue and play ${C.length} matching tracks from "${Y}".`,confirmLabel:"Play",type:"confirm",onConfirm:()=>{Ps(C)}})}function de(C){!C||C.length===0||On(C)}Da(()=>{!r(U)&&i().length===0&&Fn()});function me(C){const Y=C.reduce((Ce,qe)=>Ce+(parseFloat(qe.time)||0),0);if(Y>0){const Ce=Math.floor(Y/3600),qe=Math.floor(Y%3600/60);m(F,Ce>0?`${Ce} hr ${qe} min`:`${qe} min`)}else m(F,"");const ve=new Set;C.forEach(Ce=>{Ce.qualityBadge&&ve.add(Ce.qualityBadge.split(" ")[0])}),m(ue,ve.size===1?C[0].qualityBadge:ve.size>1?"Mixed":"")}function pe(C){Ht("details",C)}function Ae(){if(d().length===0){ba({title:"Create Playlist",message:"Queue is empty. Add tracks to queue before saving a playlist.",confirmLabel:"OK",type:"alert"});return}ba({title:"New Playlist",message:"Save current queue as a new playlist:",type:"prompt",placeholder:"Playlist Name",confirmLabel:"Create",onConfirm:C=>{C&&ya.createPlaylistFromQueue(C)}})}function z(C,Y){Y.name!=="Favorites"&&(C.stopPropagation(),C.preventDefault(),es(C,null,{type:"playlist-card",playlist:Y}))}function fe(){ba({title:"Replace Queue?",message:`This will clear your current queue and play "${r(x).data.name}".`,confirmLabel:"Play",type:"confirm",onConfirm:()=>{m(H,!0),l()&&l().length>0?Ps(l()):m(H,!1)}})}function ge(){if(l().length>0){const C=r(x).data.name.replace(/"/g,'\\"');rs(`load "${C}"`),m(_e,!0),setTimeout(()=>{m(_e,!1)},2e3)}}function He(){m(ce,!r(ce))}function D(C){const Y=r(x).data.name,ve=l();ve.splice(C,1),Vr.set(ve),Ao(Y,C),me(ve)}function N(C,Y){Co(r(x).data.name,C,Y)}function W(C){if(C.name==="Favorites"){if(v()==="gruvbox"){const Y="var(--c-heart)";return`background: linear-gradient(135deg, ${Y}, transparent); background-color: ${Y};`}return"background: linear-gradient(135deg, hsl(348, 95%, 58%), hsl(348, 90%, 40%));"}return v()==="gruvbox"?`background: linear-gradient(135deg, ${C.colorVar}, transparent); background-color: ${C.colorVar};`:`background: ${C.color}`}function K(C){if(!C)return"";if(C.name==="Favorites"){if(v()==="gruvbox"){const Ce="var(--c-heart)";return`background: linear-gradient(135deg, ${Ce}, transparent); background-color: ${Ce};`}return"background: linear-gradient(135deg, hsl(348, 95%, 58%), hsl(348, 90%, 40%));"}const Y="var(--c-bg-card)";if(v()==="gruvbox"){const Ce=C.colorVar||C.color||Y;return`background: linear-gradient(135deg, ${Ce}, transparent); background-color: ${Ce};`}return`background: ${C.color||C.colorVar||Y}`}ee(()=>a(),()=>{m(E,Number(a().song))}),ee(()=>s(),()=>{m(M,s().file)}),ee(()=>a(),()=>{m(w,a().state==="play")}),ee(()=>n(),()=>{m(x,n()[n().length-1])}),ee(()=>r(x),()=>{m(U,r(x).view==="details")}),ee(()=>(r(x),r(V)),()=>{const C=JSON.stringify(r(x));C!==r(V)&&(m(he,""),m(H,!1),m(_e,!1),m(ce,!1),m(j,[]),m(L,[]),m(B,!1),m(V,C))}),ee(()=>(r(U),l(),o()),()=>{r(U)&&l().length>0?me(l()):r(U)&&l().length===0&&!o()&&(m(F,"0 min"),m(ue,""))}),ee(()=>(r(U),r(x),u(),Dd),()=>{r(U)&&r(x).data&&u()!==r(x).data.name&&$o(r(x).data.name)}),ee(()=>r(x),()=>{m(ne,r(x)?.data?.name==="Favorites")}),Gt(),It();var ye=vu();let we;var De=c(ye);{var S=C=>{var Y=Hv(),ve=c(Y),Ce=c(ve),qe=c(Ce);G(qe,()=>(R(y),_(()=>y.SEARCH)));var Se=g(Ce,2),Re=g(Se,2);{var Fe=Q=>{var $e=Yv(),ke=c($e);G(ke,()=>(R(y),_(()=>y.CLOSE))),A("click",$e,()=>{m(he,""),m(j,[]),m(L,[]),m(B,!1)}),b(Q,$e)};P(Re,Q=>{r(he)&&Q(Fe)})}var se=g(Re,2);{var te=Q=>{var $e=Uv();b(Q,$e)};P(se,Q=>{r(B)&&Q(te)})}oe(()=>po(Se,r(he))),A("input",Se,be),b(C,Y)};P(De,C=>{r(U)||C(S)})}var I=g(De,2);{var Z=C=>{ds(C,{get itemsStore(){return Vr},get isLoading(){return o()},get isEditMode(){return r(ce)},emptyText:"This playlist is empty.",onMoveItem:N,$$slots:{header:(Y,ve)=>{var Ce=Kv(),qe=c(Ce),Se=c(qe),Re=c(Se),Fe=c(Re);G(Fe,()=>(r(ne),R(y),_(()=>r(ne)?y.HEART_FILLED:y.PLAYLISTS)));var se=g(Se,2),te=c(se),Q=g(c(te),2),$e=c(Q),ke=g(Q,2),tt=c(ke);{var le=Le=>{var Ne=Vv();b(Le,Ne)},T=Le=>{var Ne=Xv(),ze=Oe(Ne),Qe=c(ze),We=g(ze,2);{var Xe=ut=>{var vt=Wv(),ht=c(vt);oe(()=>ae(ht,r(F))),b(ut,vt)};P(We,ut=>{r(F)&&ut(Xe)})}var at=g(We,2);{var ot=ut=>{var vt=Qv(),ht=c(vt);oe(()=>ae(ht,r(ue))),b(ut,vt)};P(at,ut=>{r(ue)&&ut(ot)})}oe(()=>ae(Qe,`${l(),_(()=>l().length)??""} tracks`)),b(Le,Ne)};P(tt,Le=>{o()?Le(le):Le(T,!1)})}var J=g(te,2),ie=c(J),Ie=c(ie),je=g(ie,2),Be=c(je),Ke=g(je,2);let Ve;var Ye=c(Ke);G(Ye,()=>(r(ce),R(y),_(()=>r(ce)?y.ACCEPT:y.EDIT))),oe(Le=>{ft(Se,Le),Ft(Q,"title",(r(x),_(()=>r(x).data.name))),ae($e,(r(x),_(()=>r(x).data.name))),ie.disabled=r(H),ae(Ie,r(H)?"Playing...":"Play All"),je.disabled=r(_e),ae(Be,r(_e)?"Added":"To Queue"),Ve=rt(Ke,1,"btn-action svelte-m7c4tz",null,Ve,{active:r(ce)})},[()=>(r(x),_(()=>K(r(x).data)))]),A("click",ie,fe),A("click",je,ge),A("click",Ke,He),b(Y,Ce)},row:(Y,ve)=>{var Ce=Gv();const qe=gt(()=>ve.item),Se=gt(()=>ve.index),Re=gt(()=>ve.startDrag);var Fe=c(Ce);Pr(Fe,{get track(){return r(qe)},get index(){return r(Se)},get playingIndex(){return r(E)},get playingFile(){return r(M)},get isPlaying(){return r(w)},get isEditable(){return r(ce)},$$events:{play:()=>O(r(qe)),remove:()=>D(r(Se)),startdrag(...se){r(Re)?.apply(this,se)}}}),b(Y,Ce)}}})},Te=C=>{var Y=it(),ve=Oe(Y);{var Ce=Se=>{var Re=Jv(),Fe=c(Re);kt(Fe,4,()=>Array(8),Ot,(se,te)=>{var Q=Zv(),$e=c(Q),ke=c($e);ea(ke,{width:"100%",height:"100%",radius:"12px"});var tt=g($e,2),le=c(tt);ea(le,{width:"60%",height:"16px",radius:"4px"}),b(se,Q)}),b(Se,Re)},qe=Se=>{var Re=du(),Fe=c(Re);{var se=Q=>{var $e=au(),ke=c($e),tt=c(ke),le=c(tt),T=c(le);G(T,()=>(R(y),_(()=>y.ADD)));var J=g(ke,2);kt(J,1,i,ie=>ie.name,(ie,Ie)=>{const je=gt(()=>(r(Ie),_(()=>r(Ie).name==="Favorites")));var Be=tu(),Ke=c(Be),Ve=c(Ke),Ye=c(Ve);G(Ye,()=>(R(r(je)),R(y),_(()=>r(je)?y.HEART_FILLED:y.PLAYLISTS)));var Le=g(Ve,2);{var Ne=ht=>{var nt=eu(),xt=c(nt);G(xt,()=>(R(y),_(()=>y.DOTS))),A("click",nt,Ge=>z(Ge,r(Ie))),b(ht,nt)};P(Le,ht=>{r(je)||ht(Ne)})}var ze=g(Le,2),Qe=c(ze),We=c(Qe);G(We,()=>(R(y),_(()=>y.PLAY)));var Xe=g(Ke,2),at=c(Xe),ot=g(Xe,2),ut=c(ot),vt=c(ut);Vt(()=>A("click",Be,()=>pe(r(Ie)))),An(Be,ht=>Bn?.(ht)),Vt(()=>A("longpress",Be,ht=>z(ht.detail.originalEvent,r(Ie)))),Vt(()=>A("contextmenu",Be,ht=>z(ht,r(Ie)))),oe((ht,nt)=>{ft(Ke,ht),ae(at,(r(Ie),_(()=>r(Ie).name))),ae(vt,nt)},[()=>(r(Ie),_(()=>W(r(Ie)))),()=>(r(Ie),_(()=>r(Ie).lastModified?new Date(r(Ie).lastModified).toLocaleDateString():"Playlist"))]),b(ie,Be)}),A("click",ke,Ae),b(Q,$e)},te=Q=>{var $e=cu(),ke=Oe($e);{var tt=je=>{var Be=su(),Ke=g(Oe(Be),2);kt(Ke,5,()=>r(j),Ve=>Ve.name,(Ve,Ye)=>{const Le=gt(()=>(r(Ye),_(()=>r(Ye).name==="Favorites")));var Ne=ru(),ze=c(Ne),Qe=c(ze),We=c(Qe);G(We,()=>(R(r(Le)),R(y),_(()=>r(Le)?y.HEART_FILLED:y.PLAYLISTS)));var Xe=g(Qe,2),at=c(Xe),ot=c(at);G(ot,()=>(R(y),_(()=>y.PLAY)));var ut=g(ze,2),vt=c(ut);oe(ht=>{ft(ze,ht),ae(vt,(r(Ye),_(()=>r(Ye).name)))},[()=>(r(Ye),_(()=>W(r(Ye))))]),A("click",Ne,()=>pe(r(Ye))),b(Ve,Ne)}),A("wheel",Ke,Me),b(je,Be)};P(ke,je=>{r(j),_(()=>r(j).length>0)&&je(tt)})}var le=g(ke,2);{var T=je=>{var Be=iu(),Ke=g(Oe(Be),2);kt(Ke,5,()=>r(L),Ve=>Ve.playlist.name,(Ve,Ye)=>{var Le=nu(),Ne=c(Le),ze=c(Ne),Qe=c(ze);G(Qe,()=>(R(y),_(()=>y.PLAYLISTS)));var We=g(ze,2),Xe=c(We),at=g(We,2),ot=c(at),ut=g(at,2),vt=c(ut),ht=c(vt);G(ht,()=>(R(y),_(()=>y.PLAY)));var nt=g(vt,2),xt=c(nt);G(xt,()=>(R(y),_(()=>y.ADD)));var Ge=g(Ne,2);kt(Ge,5,()=>(r(Ye),_(()=>r(Ye).tracks)),yt=>yt._uid,(yt,Tt)=>{Pr(yt,{get track(){return r(Tt)},get index(){return r(Tt),_(()=>r(Tt).playlistPos)},get playingFile(){return r(M)},get isPlaying(){return r(w)},$$events:{play:()=>O(r(Tt))}})}),oe(()=>{ae(Xe,(r(Ye),_(()=>r(Ye).playlist.name))),ae(ot,(r(Ye),_(()=>r(Ye).tracks.length)))}),A("click",vt,ta(()=>X(r(Ye).tracks,r(Ye).playlist.name))),A("click",nt,ta(()=>de(r(Ye).tracks))),A("click",Ne,()=>pe(r(Ye).playlist)),b(Ve,Le)}),b(je,Be)};P(le,je=>{r(L),_(()=>r(L).length>0)&&je(T)})}var J=g(le,2);{var ie=je=>{var Be=ou(),Ke=c(Be);oe(()=>ae(Ke,`No matches found for "${r(he)??""}"`)),b(je,Be)},Ie=je=>{var Be=it(),Ke=Oe(Be);{var Ve=Ye=>{var Le=lu();b(Ye,Le)};P(Ke,Ye=>{r(B),r(L),_(()=>r(B)&&r(L).length===0)&&Ye(Ve)},!0)}b(je,Be)};P(J,je=>{r(B),r(j),r(L),_(()=>!r(B)&&r(j).length===0&&r(L).length===0)?je(ie):je(Ie,!1)})}b(Q,$e)};P(Fe,Q=>{r(he)?Q(te,!1):Q(se)})}b(Se,Re)};P(ve,Se=>{p()?Se(Ce):Se(qe,!1)},!0)}b(C,Y)};P(I,C=>{r(U)?C(Z):C(Te,!1)})}oe(()=>we=rt(ye,1,"view-container svelte-m7c4tz",null,we,{scrollable:!r(U)})),b(e,ye),Ct(),h()}var fu=k('<button class="clear-icon-btn svelte-1d3z1zm"><!></button>'),hu=k('<div class="spinner svelte-1d3z1zm"></div>'),pu=k('<div class="placeholder-state svelte-1d3z1zm"><div class="placeholder-icon svelte-1d3z1zm">ð</div> <p class="svelte-1d3z1zm">Type to search your library</p></div>'),gu=k('<div class="empty-text svelte-1d3z1zm"> </div>'),_u=k('<div slot="fallback" class="icon-fallback svelte-1d3z1zm">ð¿</div>'),mu=k('<div class="meta-tag svelte-1d3z1zm"> </div>'),bu=k('<div class="meta-tag quality svelte-1d3z1zm"> </div>'),yu=k('<div class="music-card svelte-1d3z1zm"><div class="card-img-container svelte-1d3z1zm"><!> <div class="play-overlay svelte-1d3z1zm"><span class="overlay-icon svelte-1d3z1zm"><!></span></div></div> <div class="card-title svelte-1d3z1zm"> </div> <div class="card-sub-row svelte-1d3z1zm"><div class="card-sub text-ellipsis svelte-1d3z1zm"> </div> <!> <!></div></div>'),wu=k('<div class="header-label section-spacing svelte-1d3z1zm">Albums</div> <div class="music-grid horizontal section-mb svelte-1d3z1zm"></div>',1),ku=k('<div class="header-label svelte-1d3z1zm">Tracks</div>'),xu=k("<!> <!>",1),Su=k('<div slot="header" class="content-padded svelte-1d3z1zm"><!></div>'),Eu=k('<div slot="row" class="svelte-1d3z1zm"><!></div>'),Tu=k('<div class="view-container svelte-1d3z1zm"><div class="content-padded no-bottom-pad svelte-1d3z1zm"><div class="search-input-container svelte-1d3z1zm"><span class="search-icon svelte-1d3z1zm"><!></span> <input type="text" placeholder="Artists, songs, or albums" autoFocus class="svelte-1d3z1zm"/> <!> <!></div></div> <!></div>');function $u(e,t){At(t,!1);const a=()=>Ee(Wr,"$searchQuery",n),s=()=>Ee(l,"$tracksStore",n),[n,i]=qt(),l=Je([]);let o=$([]),u=$(!1),d,v=$(!1);Da(()=>{a().length>=2&&h(a())});function p(L){Wr.set(L.target.value),clearTimeout(d),d=setTimeout(()=>{h(a())},300)}function f(){Wr.set(""),l.set([]),m(o,[]),m(v,!1)}async function h(L){const F=L.trim().toLowerCase();if(F.length<2){l.set([]),m(o,[]),m(v,!1);return}m(u,!0),m(v,!0);try{const ue=await Ua.search(F),V=ue.map((q,O)=>({...q,_uid:q.file?`${q.file}-${O}`:`search-${O}`}));l.set(V);const be=new Map;ue.forEach(q=>{const O=q.album;if(O&&!be.has(O)){const Me=O.toLowerCase().includes(F),X=q.artist&&q.artist.toLowerCase().includes(F);if(Me||X){let de=String(q.year||"");de.length>4&&(de=de.substring(0,4)),be.set(O,{name:O,artist:q.artist,file:q.file,thumbHash:q.thumbHash,_uid:`alb-${O}`,year:de,qualityBadge:q.qualityBadge})}}}),m(o,Array.from(be.values()))}finally{m(u,!1)}}function E(L){Fs(L)}function M(L){Ht("tracks_by_album",{name:L.name,artist:L.artist})}function w(L){L.deltaY!==0&&(L.currentTarget.scrollLeft+=L.deltaY)}It();var x=Tu(),U=c(x),ne=c(U),ce=c(ne),H=c(ce);G(H,()=>y.SEARCH);var _e=g(ce,2),he=g(_e,2);{var B=L=>{var F=fu(),ue=c(F);G(ue,()=>y.CLOSE),A("click",F,f),b(L,F)};P(he,L=>{a().length>0&&L(B)})}var xe=g(he,2);{var re=L=>{var F=hu();b(L,F)};P(xe,L=>{r(u)&&L(re)})}var j=g(U,2);ds(j,{get itemsStore(){return l},isEditMode:!1,isLoading:!1,emptyText:"",$$slots:{header:(L,F)=>{var ue=Su(),V=c(ue);{var be=O=>{var Me=pu();b(O,Me)},q=O=>{var Me=it(),X=Oe(Me);{var de=pe=>{var Ae=gu(),z=c(Ae);oe(()=>ae(z,`No results found for "${a()??""}"`)),b(pe,Ae)},me=pe=>{var Ae=xu(),z=Oe(Ae);{var fe=D=>{var N=wu(),W=g(Oe(N),2);kt(W,5,()=>r(o),K=>K._uid,(K,ye)=>{var we=yu(),De=c(we),S=c(De);{let te=gt(()=>ts(r(ye),"md"));Ut(S,{get src(){return r(te)},get alt(){return r(ye).name},radius:"8px",$$slots:{fallback:(Q,$e)=>{var ke=_u();b(Q,ke)}}})}var I=g(S,2),Z=c(I),Te=c(Z);G(Te,()=>y.PLAY);var C=g(De,2),Y=c(C),ve=g(C,2),Ce=c(ve),qe=c(Ce),Se=g(Ce,2);{var Re=te=>{var Q=mu(),$e=c(Q);oe(()=>ae($e,r(ye).year)),b(te,Q)};P(Se,te=>{r(ye).year&&r(ye).year!=="0"&&r(ye).year!==0&&te(Re)})}var Fe=g(Se,2);{var se=te=>{var Q=bu(),$e=c(Q);oe(ke=>ae($e,ke),[()=>r(ye).qualityBadge.split(" ")[0]]),b(te,Q)};P(Fe,te=>{r(ye).qualityBadge&&te(se)})}oe(()=>{Ft(C,"title",r(ye).name),ae(Y,r(ye).name),ae(qe,r(ye).artist)}),A("click",we,()=>M(r(ye))),b(K,we)}),A("wheel",W,w),b(D,N)};P(z,D=>{r(o).length>0&&D(fe)})}var ge=g(z,2);{var He=D=>{var N=ku();b(D,N)};P(ge,D=>{s().length>0&&D(He)})}b(pe,Ae)};P(X,pe=>{!r(u)&&s().length===0&&r(o).length===0&&r(v)?pe(de):pe(me,!1)},!0)}b(O,Me)};P(V,O=>{a().length<2?O(be):O(q,!1)})}b(L,ue)},row:(L,F)=>{var ue=Eu();const V=gt(()=>F.item),be=gt(()=>F.index);var q=c(ue);Pr(q,{get track(){return r(V)},get index(){return r(be)},isEditable:!1,$$events:{play:()=>E(r(V))}}),b(L,ue)}}}),oe(()=>po(_e,a())),A("input",_e,p),b(e,x),Ct(),i()}var Mu=k('<span class="status-badge connected svelte-1j67jqh">Connected</span>'),Au=k('<span class="status-badge disconnected svelte-1j67jqh">Not Connected</span>'),Cu=k('<div class="separator svelte-1j67jqh"></div> <div class="row space-between svelte-1j67jqh"><label class="svelte-1j67jqh">Connection Status</label> <!></div> <div class="separator svelte-1j67jqh"></div> <div class="row svelte-1j67jqh"><label for="yandex-token" class="svelte-1j67jqh">OAuth Token</label> <div class="input-group svelte-1j67jqh"><input id="yandex-token" type="password" placeholder="Paste token here..." class="svelte-1j67jqh"/> <button class="btn-primary small svelte-1j67jqh"> </button></div></div> <p class="hint svelte-1j67jqh">Token is stored securely on the device.</p>',1),Pu=k('<option class="svelte-1j67jqh"> </option>'),Lu=k('<div class="separator svelte-1j67jqh"></div> <div class="row space-between svelte-1j67jqh"><label for="alarm-time" class="svelte-1j67jqh">Wake up time</label> <input id="alarm-time" type="time" class="svelte-1j67jqh"/></div> <div class="separator svelte-1j67jqh"></div> <div class="row space-between svelte-1j67jqh"><label for="alarm-pl" class="svelte-1j67jqh">Playlist</label> <div class="select-wrapper svelte-1j67jqh"><select id="alarm-pl" class="svelte-1j67jqh"></select> <div class="select-arrow svelte-1j67jqh"><!></div></div></div>',1),zu=k('<div class="view-container scrollable svelte-1j67jqh"><div class="content-padded svelte-1j67jqh"><h1 class="header-title big svelte-1j67jqh">Settings</h1> <div class="section svelte-1j67jqh"><div class="section-header svelte-1j67jqh"><span class="svelte-1j67jqh">Services</span></div> <div class="card svelte-1j67jqh"><div class="row space-between svelte-1j67jqh"><label class="svelte-1j67jqh">Enable Yandex Music (Beta)</label> <button><div class="toggle-circle svelte-1j67jqh"></div></button></div> <!></div></div> <div class="section svelte-1j67jqh"><div class="section-header svelte-1j67jqh"><span class="svelte-1j67jqh">Alarm Clock</span></div> <div class="card svelte-1j67jqh"><div class="row space-between svelte-1j67jqh"><span class="label-text svelte-1j67jqh">Current Player Time</span> <span class="mono-badge svelte-1j67jqh"> </span></div> <div class="separator svelte-1j67jqh"></div> <div class="row space-between svelte-1j67jqh"><label class="svelte-1j67jqh">Enable Alarm</label> <button><div class="toggle-circle svelte-1j67jqh"></div></button></div> <!></div></div> <div class="section svelte-1j67jqh"><div class="section-header svelte-1j67jqh"><span class="svelte-1j67jqh">Appearance</span></div> <div class="card clickable svelte-1j67jqh"><div class="row space-between svelte-1j67jqh"><span class="svelte-1j67jqh">Interface Theme</span> <div class="row-gap svelte-1j67jqh"><span class="value svelte-1j67jqh"> </span> <span class="chevron svelte-1j67jqh"><!></span></div></div></div></div> <div class="section svelte-1j67jqh"><div class="section-header svelte-1j67jqh"><span class="svelte-1j67jqh">Connection</span></div> <div class="card svelte-1j67jqh"><div class="row svelte-1j67jqh"><label for="ip" class="svelte-1j67jqh">Moode Device IP</label> <div class="input-group svelte-1j67jqh"><input id="ip" type="text" placeholder="192.168.x.x" class="svelte-1j67jqh"/> <button class="btn-primary small svelte-1j67jqh">Save</button></div></div> <p class="hint svelte-1j67jqh"> </p></div></div> <div class="section svelte-1j67jqh"><div class="section-header svelte-1j67jqh"><span class="svelte-1j67jqh">About</span></div> <div class="card svelte-1j67jqh"><div class="info-row svelte-1j67jqh"><span class="svelte-1j67jqh">Version</span> <span class="mono svelte-1j67jqh"> </span></div> <div class="separator svelte-1j67jqh"></div> <div class="info-row svelte-1j67jqh"><span class="svelte-1j67jqh">Build Date</span> <span class="mono small svelte-1j67jqh"> </span></div></div></div></div></div>');function Ru(e,t){At(t,!1);const a=()=>Ee($s,"$currentTheme",d),s=()=>Ee(mn,"$isAlarmEnabled",d),n=()=>Ee(_n,"$alarmTime",d),i=()=>Ee(bn,"$alarmPlaylist",d),l=()=>Ee(as,"$isYandexEnabled",d),o=()=>Ee(xr,"$yandexAuthStatus",d),u=()=>Ee(Ds,"$playlists",d),[d,v]=qt(),p=$();let f=$(Ja.MOODE_IP),h=$("--:--"),E,M=$(""),w=$(!1);function x(){Ja.setMoodeIp(r(f)),Ue("IP Saved. Reloading...","success"),setTimeout(()=>location.reload(),1e3)}const U="0.1.0",ne="2026-01-13T10:35:57.222Z",ce=new Date(ne).toLocaleString();function H(){const le=dn.map(T=>({label:T.label,value:T.id}));ba({title:"Select Theme",message:"Choose your preferred interface style:",type:"select",inputValue:a(),options:le,onConfirm:T=>{$s.set(T),Ue("Theme updated","success")}})}async function _e(){const le=await Aa.getServerTime();le&&m(h,le)}Da(()=>{_e(),E=setInterval(_e,6e4),Aa.checkYandexAuth()}),Ln(()=>{E&&clearInterval(E)});async function he(){try{await Aa.setAlarm(s(),n(),i()),s()&&Ue(`Alarm set for ${n()}`,"success")}catch{Ue("Failed to sync alarm settings","error")}}function B(){mn.update(le=>!le),he()}function xe(){as.update(le=>!le)}async function re(){if(!r(M))return;m(w,!0);const le=await Aa.saveYandexToken(r(M));m(w,!1),le&&m(M,"")}ee(()=>a(),()=>{m(p,dn.find(le=>le.id===a())?.label||"Default")}),Gt(),It();var j=zu(),L=c(j),F=g(c(L),2),ue=g(c(F),2),V=c(ue),be=g(c(V),2);let q;var O=g(V,2);{var Me=le=>{var T=Cu(),J=Oe(T),ie=g(J,2),Ie=g(c(ie),2);{var je=We=>{var Xe=Mu();b(We,Xe)},Be=We=>{var Xe=Au();b(We,Xe)};P(Ie,We=>{o()?We(je):We(Be,!1)})}var Ke=g(ie,2),Ve=g(Ke,2),Ye=g(c(Ve),2),Le=c(Ye),Ne=g(Le,2),ze=c(Ne),Qe=g(Ve,2);oe(()=>{Ne.disabled=r(w),ae(ze,r(w)?"Checking...":"Save")}),mt(1,J,()=>Et),mt(1,ie,()=>Et),mt(1,Ke,()=>Et),sr(Le,()=>r(M),We=>m(M,We)),A("click",Ne,re),mt(1,Ve,()=>Et),mt(1,Qe,()=>Et),b(le,T)};P(O,le=>{l()&&le(Me)})}var X=g(F,2),de=g(c(X),2),me=c(de),pe=g(c(me),2),Ae=c(pe),z=g(me,4),fe=g(c(z),2);let ge;var He=g(z,2);{var D=le=>{var T=Lu(),J=Oe(T),ie=g(J,2),Ie=g(c(ie),2),je=g(ie,2),Be=g(je,2),Ke=g(c(Be),2),Ve=c(Ke);oe(()=>{i(),Nl(()=>{u()})}),kt(Ve,5,u,Ot,(Ne,ze)=>{var Qe=Pu(),We=c(Qe),Xe={};oe(()=>{ae(We,(r(ze),_(()=>r(ze).name))),Xe!==(Xe=(r(ze),_(()=>r(ze).name)))&&(Qe.value=(Qe.__value=(r(ze),_(()=>r(ze).name)))??"")}),b(Ne,Qe)});var Ye=g(Ve,2),Le=c(Ye);G(Le,()=>(R(y),_(()=>y.CHEVRON_DOWN))),mt(1,J,()=>Et),sr(Ie,n,Ne=>oi(_n,Ne)),A("change",Ie,he),mt(1,ie,()=>Et),mt(1,je,()=>Et),nc(Ve,i,Ne=>oi(bn,Ne)),A("change",Ve,he),mt(1,Be,()=>Et),b(le,T)};P(He,le=>{s()&&le(D)})}var N=g(X,2),W=g(c(N),2),K=c(W),ye=g(c(K),2),we=c(ye),De=c(we),S=g(we,2),I=c(S);G(I,()=>(R(y),_(()=>y.NEXT)));var Z=g(N,2),Te=g(c(Z),2),C=c(Te),Y=g(c(C),2),ve=c(Y),Ce=g(ve,2),qe=g(C,2),Se=c(qe),Re=g(Z,2),Fe=g(c(Re),2),se=c(Fe),te=g(c(se),2),Q=c(te),$e=g(se,4),ke=g(c($e),2),tt=c(ke);oe(()=>{q=rt(be,1,"toggle-btn svelte-1j67jqh",null,q,{active:l()}),ae(Ae,r(h)),ge=rt(fe,1,"toggle-btn svelte-1j67jqh",null,ge,{active:s()}),ae(De,r(p)),ae(Se,`Current: ${R(Ja),_(()=>Ja.MOODE_IP)??""}`),ae(Q,U),ae(tt,ce)}),A("click",be,xe),A("click",fe,B),A("click",W,H),sr(ve,()=>r(f),le=>m(f,le)),A("click",Ce,x),mt(1,j,()=>Et,()=>({duration:200})),b(e,j),Ct(),v()}var Iu=k('<span style="color: var(--c-accent)" class="svelte-185fgrr"> </span>'),ju=k('<span class="meta-tag svelte-185fgrr"> </span>'),Nu=k('<div slot="header" class="content-padded svelte-185fgrr"><div class="view-header svelte-185fgrr"><div class="header-art svelte-185fgrr" style="background: var(--c-surface-active);"><div class="header-icon-wrap svelte-185fgrr"><!></div></div> <div class="header-info svelte-185fgrr"><div class="header-text-group svelte-185fgrr"><div class="header-label svelte-185fgrr">Now Playing</div> <h1 class="header-title svelte-185fgrr"><!></h1> <div class="meta-badges svelte-185fgrr"><span class="meta-tag svelte-185fgrr"> </span> <!></div></div> <div class="header-actions svelte-185fgrr"><button class="btn-secondary svelte-185fgrr" title="Clear Queue">Clear</button> <button class="btn-action svelte-185fgrr" title="Save Queue"><!></button> <button><!></button></div></div></div></div>'),Du=k('<div slot="row" class="svelte-185fgrr"><!></div>'),Ou=k('<div class="view-container svelte-185fgrr"><!></div>');function Fu(e,t){At(t,!1);const a=()=>Ee(Mt,"$status",o),s=()=>Ee($t,"$isQueueLocked",o),n=()=>Ee(Kt,"$currentSong",o),i=()=>Ee(Wa,"$queue",o),l=()=>Ee(bi,"$yandexState",o),[o,u]=qt(),d=$(),v=$(),p=$(),f=$();let h=$(!1),E=$(""),M,w=$(-1);async function x(){try{const re=await fetch("/wave-yandex-api.php?action=get_state");if(re.ok){const j=await re.json();bi.set(j)}}catch{}}Da(()=>{x(),M=setInterval(x,5e3)}),Ln(()=>{M&&clearInterval(M)});function U(){m(h,!r(h))}function ne(re){r(h)||rs(`play ${re}`)}function ce(re){re<r(w)&&m(w,r(w)-1),da.removeFromQueue(re)}async function H(){ba({title:"Save Playlist",message:"Enter a name for this playlist:",type:"prompt",placeholder:"Playlist Name",confirmLabel:"Save",onConfirm:async re=>{re&&re.trim().length>0&&(await da.saveQueue(re),Fn())}})}function _e(){i().length!==0&&ba({title:"Clear Queue",message:"Are you sure you want to clear the entire play queue?",confirmLabel:"Clear All",type:"confirm",onConfirm:async()=>{Wa.set([]),Kt.set({title:"Not Playing",artist:"",album:"",file:"",stationName:null,id:null,pos:null}),Mt.update(re=>({...re,state:"stop",song:-1,songid:-1,elapsed:0})),await rs("clear")}})}function he(re,j){let L=r(w);re===L?L=j:re<L&&j>=L?L-=1:re>L&&j<=L&&(L+=1),m(w,L),da.moveTrack(re,j)}ee(()=>a(),()=>{m(d,Number(a().song))}),ee(()=>(s(),r(d)),()=>{s()||m(w,r(d))}),ee(()=>r(w),()=>{m(v,r(w))}),ee(()=>n(),()=>{m(p,n().file)}),ee(()=>a(),()=>{m(f,a().state==="play")}),ee(()=>i(),()=>{if(i().length>=0){const re=i().reduce((j,L)=>j+(parseFloat(L.time)||0),0);if(re>0){const j=Math.floor(re/3600),L=Math.floor(re%3600/60);j>0?m(E,`${j} hr ${L} min`):m(E,`${L} min`)}else m(E,"")}}),Gt(),It();var B=Ou(),xe=c(B);ds(xe,{get itemsStore(){return Wa},get isEditMode(){return r(h)},emptyText:"Queue is empty",onMoveItem:he,$$slots:{header:(re,j)=>{var L=Nu(),F=c(L),ue=c(F),V=c(ue),be=c(V);G(be,()=>(R(y),_(()=>y.MENU)));var q=g(ue,2),O=c(q),Me=g(c(O),2),X=c(Me);{var de=De=>{var S=Iu(),I=c(S);oe(()=>ae(I,(l(),_(()=>l().context_name||"My Vibe")))),b(De,S)},me=De=>{var S=Ea("Current Queue");b(De,S)};P(X,De=>{l(),_(()=>l()&&l().active)?De(de):De(me,!1)})}var pe=g(Me,2),Ae=c(pe),z=c(Ae),fe=g(Ae,2);{var ge=De=>{var S=ju(),I=c(S);oe(()=>ae(I,r(E))),b(De,S)};P(fe,De=>{r(E)&&De(ge)})}var He=g(O,2),D=c(He),N=g(D,2),W=c(N);G(W,()=>(R(y),_(()=>y.SAVE)));var K=g(N,2);let ye;var we=c(K);G(we,()=>(r(h),R(y),_(()=>r(h)?y.ACCEPT:y.EDIT))),oe(()=>{ae(z,`${i(),_(()=>i().length)??""} tracks`),D.disabled=(i(),_(()=>i().length===0)),N.disabled=(i(),_(()=>i().length===0)),ye=rt(K,1,"btn-action svelte-185fgrr",null,ye,{active:r(h)}),Ft(K,"title",r(h)?"Finish Editing":"Edit Queue"),K.disabled=(i(),_(()=>i().length===0))}),A("click",D,_e),A("click",N,H),A("click",K,U),b(re,L)},row:(re,j)=>{var L=Du();const F=gt(()=>j.item),ue=gt(()=>j.index),V=gt(()=>j.startDrag);var be=c(L);Pr(be,{get track(){return r(F)},get index(){return r(ue)},get playingIndex(){return r(v)},get playingFile(){return r(p)},get isPlaying(){return r(f)},get isEditable(){return r(h)},$$events:{play:()=>ne(r(ue)),remove:()=>ce(r(ue)),startdrag(...q){r(V)?.apply(this,q)}}}),b(re,L)}}}),b(e,B),Ct(),u()}var qu=k('<div class="token-alert content-padded svelte-4g0hpd"><h3 class="svelte-4g0hpd">Yandex Music Not Connected</h3> <p class="svelte-4g0hpd">Please go to Settings and connect your account.</p></div>'),Bu=k('<button class="clear-btn svelte-4g0hpd"><!></button>'),Yu=k('<div class="filter-tabs svelte-4g0hpd"><button>All</button> <button>Tracks</button></div>'),Uu=k('<div class="content-padded no-bottom-pad svelte-4g0hpd"><div class="search-input-container svelte-4g0hpd"><span class="search-icon svelte-4g0hpd"><!></span> <input type="text" placeholder="Search Yandex Music..." class="svelte-4g0hpd"/> <!></div> <!></div>'),Hu=k('<div class="icon-wrap svelte-4g0hpd"><!></div>'),Vu=k('<div class="icon-fallback svelte-4g0hpd"><!></div>'),Wu=k('<div class="music-card svelte-4g0hpd"><div><!> <div class="play-overlay svelte-4g0hpd"><span class="overlay-icon svelte-4g0hpd"><!></span></div></div> <div class="card-title svelte-4g0hpd"> </div></div>'),Qu=k('<div class="icon-wrap svelte-4g0hpd"><!></div>'),Xu=k('<div class="music-card svelte-4g0hpd"><div class="card-img-container svelte-4g0hpd"><!> <div class="play-overlay svelte-4g0hpd"><span class="overlay-icon svelte-4g0hpd"><!></span></div></div> <div class="card-title svelte-4g0hpd"> </div></div>'),Ku=k('<h2 class="header-label svelte-4g0hpd">Vibe by Mood</h2> <div class="music-grid horizontal section-mb svelte-4g0hpd"></div>',1),Gu=k('<div class="icon-wrap svelte-4g0hpd"><!></div>'),Zu=k('<div slot="fallback" class="icon-fallback svelte-4g0hpd"><!></div>'),Ju=k('<div class="card-sub svelte-4g0hpd"> </div>'),ef=k('<div class="music-card svelte-4g0hpd"><div class="card-img-container svelte-4g0hpd"><!> <div class="play-overlay svelte-4g0hpd"><span class="overlay-icon svelte-4g0hpd"><!></span></div></div> <div class="card-title svelte-4g0hpd"> </div> <!></div>'),tf=k('<h2 class="header-label svelte-4g0hpd">My Collection</h2> <div class="music-grid horizontal section-mb svelte-4g0hpd"></div>',1),af=k('<div class="content-padded svelte-4g0hpd"><h2 class="header-label svelte-4g0hpd">For You</h2> <div class="music-grid horizontal section-mb svelte-4g0hpd"></div> <!> <!></div>'),rf=k('<div class="icon-wrap svelte-4g0hpd" style="width:100%;height:100%;display:flex;align-items:center;justify-content:center;"><!></div>'),sf=k('<div slot="fallback" class="icon-fallback svelte-4g0hpd"><!></div>'),nf=k('<div class="header-subtitle-row svelte-4g0hpd"><h2 class="header-sub-text svelte-4g0hpd"> </h2></div>'),of=k('<div class="view-header svelte-4g0hpd"><div class="header-art svelte-4g0hpd"><!></div> <div class="header-info svelte-4g0hpd"><div class="header-text-group svelte-4g0hpd"><div class="header-label svelte-4g0hpd"> </div> <h1 class="header-title svelte-4g0hpd"> </h1> <!> <div class="meta-badges svelte-4g0hpd"><span class="meta-tag svelte-4g0hpd"> </span> <span class="meta-tag svelte-4g0hpd">Yandex</span></div></div> <div class="header-actions svelte-4g0hpd"><button class="btn-primary svelte-4g0hpd">Play All</button> <button class="btn-secondary svelte-4g0hpd">To Queue</button></div></div></div>'),lf=k('<div class="music-card svelte-4g0hpd"><div class="card-img-container svelte-4g0hpd"><!></div> <div class="card-title center svelte-4g0hpd"> </div></div>'),cf=k('<h3 class="header-label svelte-4g0hpd">Artists</h3> <div class="music-grid horizontal section-mb svelte-4g0hpd"></div>',1),df=k('<div class="music-card svelte-4g0hpd"><div class="card-img-container svelte-4g0hpd"><!></div> <div class="card-title svelte-4g0hpd"> </div> <div class="card-sub svelte-4g0hpd"> </div></div>'),vf=k('<h3 class="header-label svelte-4g0hpd">Albums</h3> <div class="music-grid horizontal section-mb svelte-4g0hpd"></div>',1),uf=k("<!> <!>",1),ff=k('<div class="music-card svelte-4g0hpd"><div class="card-img-container svelte-4g0hpd"><!> <div class="play-overlay svelte-4g0hpd"><span class="overlay-icon svelte-4g0hpd"><!></span></div></div> <div class="card-title svelte-4g0hpd"> </div> <div class="card-sub svelte-4g0hpd"> </div></div>'),hf=k('<div class="header-label section-spacing svelte-4g0hpd" style="margin-top: 24px;">Albums</div> <div class="music-grid horizontal section-mb svelte-4g0hpd"></div> <div class="header-label section-spacing svelte-4g0hpd">Popular Tracks</div>',1),pf=k('<div slot="header" class="content-padded svelte-4g0hpd"><!> <!> <!></div>'),gf=k('<div slot="row" class="svelte-4g0hpd"><!></div>'),_f=k('<div class="spinner svelte-4g0hpd"></div>'),mf=k('<div slot="footer" class="loading-footer svelte-4g0hpd"><!> <div style="height: 20px; width: 100%;" class="svelte-4g0hpd"></div></div>'),bf=k("<!> <!> <!>",1),yf=k('<div class="view-container scrollable relative-parent svelte-4g0hpd"><!></div>');function wf(e,t){At(t,!1);const a=()=>Ee(pt,"$navigationStack",o),s=()=>Ee(xr,"$yandexAuthStatus",o),n=()=>Ee(mi,"$yandexSearchTrigger",o),i=()=>Ee(f,"$tracksStore",o),l=()=>Ee(h,"$albumsStore",o),[o,u]=qt(),d=$(),v=$(),p=$(),f=Je([]),h=Je([]);let E=$([]),M=$([]),w=$([]),x=$(!1),U=$(!1),ne={uid:null,kind:null,offset:0,type:"playlist"},ce=!0,H=$(),_e=$(),he=$(""),B=$("all"),xe=$({tracks:[],albums:[],artists:[]}),re,j=$("");function L(S){return!S||S.view==="root"?"dashboard":S.view.startsWith("yandex_")?S.view.replace("yandex_",""):"dashboard"}async function F(S,I){if(S!=="dashboard"&&(S!=="search"&&f.set([]),h.set([])),S==="dashboard")m(he,""),r(E).length===0&&await be();else if(S==="search"){const Z=I?.query||"";m(he,Z),Z&&await fe()}else S==="playlist"?await q(I):S==="artist_details"?await O(I):S==="album_details"&&await Me(I)}Da(()=>{r(p)&&r(E).length===0&&(be(),V()),ue()});function ue(){r(_e)&&r(_e).disconnect(),m(_e,new IntersectionObserver(S=>{S[0].isIntersecting&&!r(x)&&!r(U)&&ce&&["playlist","album_details","artist_details"].includes(r(v))&&Ae()},{rootMargin:"200px"}))}async function V(){try{const S=await Nt.getFavoritesIds();S&&S.ids&&ca.set(new Set(S.ids.map(String)))}catch(S){console.error("Sync likes failed",S)}}async function be(){m(x,!0);try{const S=await Nt.getUserPlaylists(),I=await Nt.getLanding(),Z=await Nt.getStationsDashboard();m(E,[{title:"My Vibe",kind:"my_vibe",cover:null,isStation:!0,description:"Endless flow based on your taste",bgColor:"linear-gradient(135deg, #a4508b, #5f0a87)"},...I.moods||[],...I.personal||[]]),Z&&Z.stations&&m(M,Z.stations),m(w,S)}catch{Ue("Failed to load dashboard","error")}finally{m(x,!1)}}async function q(S){m(x,!0),ce=!0;let I=S.uid,Z=S.kind;if(!I&&S.id&&typeof S.id=="string"&&S.id.includes(":")){const Te=S.id.split(":");I=Te[0],Z=Te[1]}else S.kind==="favorites"&&(Z="favorites");ne={uid:I,kind:Z,offset:0,type:"playlist"};try{await pe(I,Z,0)}finally{m(x,!1)}}async function O(S){m(x,!0),ce=!1;try{const I=await Nt.getArtistDetails(S.id),Z=et(pt),Te=Z[Z.length-1];Te.view==="yandex_artist_details"&&(Te.data={...Te.data,name:I.name,title:I.name,description:I.description,cover:I.cover},pt.set(Z)),f.set(I.tracks||[]),h.set(I.albums||[])}finally{m(x,!1)}}async function Me(S){m(x,!0),ce=!1;try{const I=await Nt.getAlbumDetails(S.id),Z=et(pt),Te=Z[Z.length-1];Te.view==="yandex_album_details"&&(Te.data={...Te.data,name:I.title,title:I.title,artist:I.artist,cover:I.cover},pt.set(Z)),f.set(I.tracks||[])}finally{m(x,!1)}}function X(S){if(S.kind==="my_vibe"){Ue("Starting My Vibe...","info"),Nt.playRadio();return}if(S.kind==="station"){Ue(`Starting ${S.title}...`,"info"),Nt.playStation(S.id);return}Ht("yandex_playlist",S)}function de(S){Ht("yandex_artist_details",S)}function me(S){Ht("yandex_album_details",S)}async function pe(S,I,Z){const Te=await Nt.getPlaylistTracks(S,I,Z);return Te&&Te.tracks?(Z===0?f.set(Te.tracks):f.update(C=>[...C,...Te.tracks]),Te.tracks.length===0&&(ce=!1),Te.tracks.length):(ce=!1,0)}async function Ae(){if(!(r(U)||!ce)){m(U,!0);try{ne.offset+=50,ne.type==="playlist"&&await pe(ne.uid,ne.kind,ne.offset)===0&&(ce=!1)}finally{m(U,!1)}}}function z(S){const I=S.target.value;m(he,I),clearTimeout(re),I.length>=2&&(re=setTimeout(()=>{r(v)!=="search"?Ht("yandex_search",{query:I}):fe()},600))}async function fe(){if(r(he)){m(x,!0),m(xe,{tracks:[],albums:[],artists:[]});try{const S=await Nt.search(r(he));S&&(m(xe,S),(r(B)==="track"||r(B)==="all")&&f.set(S.tracks||[]))}finally{m(x,!1)}}}function ge(S){m(B,S),r(xe).tracks&&S==="track"&&f.set(r(xe).tracks)}function He(S){const I=S.map(Z=>{let Te=Z.artist||Z.artists&&Z.artists.map(Y=>Y.name).join(", ")||"Unknown",C=Z.image;if(!C&&(Z.coverUri||Z.cover)){let Y=(Z.coverUri||Z.cover).replace("%%","400x400");C=Y.startsWith("http")?Y:"https://"+Y.replace(/^\/\//,"")}return{...Z,artist:Te,title:Z.title||"Unknown Title",image:C}});return Jr.update(Z=>{const Te={...Z.streamCache};return I.forEach(C=>{C.file&&(Te[C.file]=C),C.id&&(Te[String(C.id)]=C)}),{...Z,streamCache:Te}}),I}async function D(){const S=et(f);if(!S.length)return;const I=He(S);Ue("Adding tracks to queue...","info"),(await fetch("/wave-yandex-api.php?action=play_playlist",{method:"POST",body:JSON.stringify({tracks:I})})).ok&&(Ue("Playing...","success"),setTimeout(()=>rs("play 0"),800))}async function N(){const S=et(f);if(!S.length)return;const I=He(S);Ue(`Adding ${I.length} tracks...`,"info"),(await fetch("/wave-yandex-api.php?action=add_tracks",{method:"POST",body:JSON.stringify({tracks:I})})).ok&&Ue("Added to queue","success")}function W(S){S.deltaY!==0&&(S.currentTarget.scrollLeft+=S.deltaY)}ee(()=>a(),()=>{m(d,a()[a().length-1])}),ee(()=>r(d),()=>{m(v,L(r(d)))}),ee(()=>s(),()=>{m(p,s())}),ee(()=>(r(d),r(j)),()=>{const S=L(r(d)),I=S+JSON.stringify(r(d)?.data||{});I!==r(j)&&(m(j,I),F(S,r(d)?.data))}),ee(()=>(n(),Ht),()=>{if(n()){const S=n();mi.set(null),Ht("yandex_search",{query:S})}}),ee(()=>(r(H),r(_e)),()=>{r(H)&&r(_e)&&r(_e).observe(r(H))}),Gt(),It();var K=yf(),ye=c(K);{var we=S=>{var I=qu();b(S,I)},De=S=>{var I=bf(),Z=Oe(I);{var Te=qe=>{var Se=Uu(),Re=c(Se),Fe=c(Re),se=c(Fe);G(se,()=>(R(y),_(()=>y.SEARCH)));var te=g(Fe,2),Q=g(te,2);{var $e=le=>{var T=Bu(),J=c(T);G(J,()=>(R(y),_(()=>y.CLOSE))),A("click",T,()=>{m(he,""),r(v)==="search"&&window.history.back()}),b(le,T)};P(Q,le=>{r(he)&&le($e)})}var ke=g(Re,2);{var tt=le=>{var T=Yu(),J=c(T);let ie;var Ie=g(J,2);let je;oe(()=>{ie=rt(J,1,"svelte-4g0hpd",null,ie,{active:r(B)==="all"}),je=rt(Ie,1,"svelte-4g0hpd",null,je,{active:r(B)==="track"})}),A("click",J,()=>ge("all")),A("click",Ie,()=>ge("track")),b(le,T)};P(ke,le=>{r(v)==="search"&&le(tt)})}sr(te,()=>r(he),le=>m(he,le)),A("input",te,z),b(qe,Se)};P(Z,qe=>{(r(v)==="dashboard"||r(v)==="search")&&qe(Te)})}var C=g(Z,2);{var Y=qe=>{var Se=af(),Re=g(c(Se),2);kt(Re,5,()=>r(E),Ot,($e,ke)=>{var tt=Wu(),le=c(tt);let T;var J=c(le);{var ie=Le=>{var Ne=Hu(),ze=c(Ne);G(ze,()=>(R(y),_(()=>y.RADIO))),b(Le,Ne)},Ie=Le=>{var Ne=it(),ze=Oe(Ne);{var Qe=Xe=>{Ut(Xe,{get src(){return r(ke),_(()=>r(ke).cover)},get alt(){return r(ke),_(()=>r(ke).title)},radius:"8px"})},We=Xe=>{var at=Vu(),ot=c(at);G(ot,()=>(R(y),_(()=>y.RADIO))),b(Xe,at)};P(ze,Xe=>{r(ke),_(()=>r(ke).cover)?Xe(Qe):Xe(We,!1)},!0)}b(Le,Ne)};P(J,Le=>{r(ke),_(()=>r(ke).kind==="my_vibe")?Le(ie):Le(Ie,!1)})}var je=g(J,2),Be=c(je),Ke=c(Be);G(Ke,()=>(r(ke),R(y),_(()=>r(ke).kind==="my_vibe"||r(ke).kind==="station"?y.RADIO:y.PLAY)));var Ve=g(le,2),Ye=c(Ve);oe(()=>{T=rt(le,1,"card-img-container svelte-4g0hpd",null,T,{"is-vibe":r(ke).kind==="my_vibe"}),ft(le,(r(ke),_(()=>r(ke).bgColor&&!r(ke).is_vibe?`background: ${r(ke).bgColor}`:""))),ae(Ye,(r(ke),_(()=>r(ke).title)))}),A("click",tt,()=>X(r(ke))),b($e,tt)});var Fe=g(Re,2);{var se=$e=>{var ke=Ku(),tt=g(Oe(ke),2);kt(tt,5,()=>r(M),Ot,(le,T)=>{var J=Xu(),ie=c(J),Ie=c(ie);{var je=ze=>{Ut(ze,{get src(){return r(T),_(()=>r(T).cover)},get alt(){return r(T),_(()=>r(T).title)},radius:"8px"})},Be=ze=>{var Qe=Qu(),We=c(Qe);G(We,()=>(R(y),_(()=>y.RADIO))),b(ze,Qe)};P(Ie,ze=>{r(T),_(()=>r(T).cover)?ze(je):ze(Be,!1)})}var Ke=g(Ie,2),Ve=c(Ke),Ye=c(Ve);G(Ye,()=>(R(y),_(()=>y.RADIO)));var Le=g(ie,2),Ne=c(Le);oe(()=>{ft(ie,(r(T),_(()=>`background-color: ${r(T).bgColor||"#333"}`))),ae(Ne,(r(T),_(()=>r(T).title)))}),A("click",J,()=>X(r(T))),b(le,J)}),A("wheel",tt,W),b($e,ke)};P(Fe,$e=>{r(M),_(()=>r(M).length>0)&&$e(se)})}var te=g(Fe,2);{var Q=$e=>{var ke=tf(),tt=g(Oe(ke),2);kt(tt,5,()=>r(w),Ot,(le,T)=>{const J=gt(()=>(r(T),_(()=>r(T).kind==="favorites")));var ie=ef(),Ie=c(ie),je=c(Ie);{var Be=Xe=>{var at=Gu(),ot=c(at);G(ot,()=>(R(y),_(()=>y.HEART_FILLED))),b(Xe,at)},Ke=Xe=>{Ut(Xe,{get src(){return r(T),_(()=>r(T).cover)},get alt(){return r(T),_(()=>r(T).title)},radius:"8px",$$slots:{fallback:(at,ot)=>{var ut=Zu(),vt=c(ut);G(vt,()=>(R(y),_(()=>y.PLAYLISTS))),b(at,ut)}}})};P(je,Xe=>{r(J)?Xe(Be):Xe(Ke,!1)})}var Ve=g(je,2),Ye=c(Ve),Le=c(Ye);G(Le,()=>(R(y),_(()=>y.PLAY)));var Ne=g(Ie,2),ze=c(Ne),Qe=g(Ne,2);{var We=Xe=>{var at=Ju(),ot=c(at);oe(()=>ae(ot,`${r(T),_(()=>r(T).trackCount)??""} tracks`)),b(Xe,at)};P(Qe,Xe=>{r(T),_(()=>r(T).trackCount)&&Xe(We)})}oe(()=>{ft(Ie,r(J)?"background: linear-gradient(135deg, hsl(348, 95%, 58%), hsl(348, 90%, 40%));":""),ae(ze,(r(T),_(()=>r(T).title)))}),A("click",ie,()=>X(r(T))),b(le,ie)}),A("wheel",tt,W),b($e,ke)};P(te,$e=>{r(w),_(()=>r(w).length>0)&&$e(Q)})}A("wheel",Re,W),mt(1,Se,()=>Et),b(qe,Se)};P(C,qe=>{r(v)==="dashboard"&&qe(Y)})}var ve=g(C,2);{var Ce=qe=>{ds(qe,{get itemsStore(){return f},get isLoading(){return r(x)},isEditMode:!1,emptyText:"No tracks found",$$slots:{header:(Se,Re)=>{var Fe=pf(),se=c(Fe);{var te=le=>{const T=gt(()=>(r(d),_(()=>r(d).data)));var J=of(),ie=c(J),Ie=c(ie);{var je=nt=>{var xt=rf(),Ge=c(xt);G(Ge,()=>(R(y),_(()=>y.HEART_FILLED))),b(nt,xt)},Be=nt=>{{let xt=gt(()=>(R(r(T)),_(()=>r(T).cover||r(T).image)));Ut(nt,{get src(){return r(xt)},get alt(){return R(r(T)),_(()=>r(T).title)},radius:"8px",$$slots:{fallback:(Ge,yt)=>{var Tt=sf(),fa=c(Tt);G(fa,()=>(R(y),_(()=>y.ALBUMS))),b(Ge,Tt)}}})}};P(Ie,nt=>{R(r(T)),_(()=>r(T).kind==="favorites")?nt(je):nt(Be,!1)})}var Ke=g(ie,2),Ve=c(Ke),Ye=c(Ve),Le=c(Ye),Ne=g(Ye,2),ze=c(Ne),Qe=g(Ne,2);{var We=nt=>{var xt=nf(),Ge=c(xt),yt=c(Ge);oe(()=>ae(yt,(R(r(T)),_(()=>r(T).artist||r(T).description)))),b(nt,xt)};P(Qe,nt=>{R(r(T)),_(()=>r(T).description||r(T).artist)&&nt(We)})}var Xe=g(Qe,2),at=c(Xe),ot=c(at),ut=g(Ve,2),vt=c(ut),ht=g(vt,2);oe(nt=>{ft(ie,(R(r(T)),_(()=>r(T).kind==="favorites"?"background: linear-gradient(135deg, hsl(348, 95%, 58%), hsl(348, 90%, 40%));":""))),ae(Le,nt),Ft(Ne,"title",(R(r(T)),_(()=>r(T).title))),ae(ze,(R(r(T)),_(()=>r(T).title||r(T).name||"Loading..."))),ae(ot,`${i(),_(()=>i().length)??""} tracks`)},[()=>(r(v),_(()=>r(v).includes("artist")?"Artist":r(v).includes("album")?"Album":"Playlist"))]),A("click",vt,D),A("click",ht,N),b(le,J)};P(se,le=>{r(v),r(d),_(()=>r(v)!=="search"&&r(d).data)&&le(te)})}var Q=g(se,2);{var $e=le=>{var T=uf(),J=Oe(T);{var ie=Be=>{var Ke=cf(),Ve=g(Oe(Ke),2);kt(Ve,5,()=>(r(xe),_(()=>r(xe).artists)),Ot,(Ye,Le)=>{var Ne=lf(),ze=c(Ne),Qe=c(ze);Ut(Qe,{get src(){return r(Le),_(()=>r(Le).image)},get alt(){return r(Le),_(()=>r(Le).title)},radius:"8px"});var We=g(ze,2),Xe=c(We);oe(()=>ae(Xe,(r(Le),_(()=>r(Le).title)))),A("click",Ne,()=>de(r(Le))),b(Ye,Ne)}),A("wheel",Ve,W),b(Be,Ke)};P(J,Be=>{r(xe),r(B),_(()=>r(xe).artists.length>0&&r(B)==="all")&&Be(ie)})}var Ie=g(J,2);{var je=Be=>{var Ke=vf(),Ve=g(Oe(Ke),2);kt(Ve,5,()=>(r(xe),_(()=>r(xe).albums)),Ot,(Ye,Le)=>{var Ne=df(),ze=c(Ne),Qe=c(ze);Ut(Qe,{get src(){return r(Le),_(()=>r(Le).image)},get alt(){return r(Le),_(()=>r(Le).title)},radius:"8px"});var We=g(ze,2),Xe=c(We),at=g(We,2),ot=c(at);oe(()=>{ae(Xe,(r(Le),_(()=>r(Le).title))),ae(ot,(r(Le),_(()=>r(Le).artist)))}),A("click",Ne,()=>me(r(Le))),b(Ye,Ne)}),A("wheel",Ve,W),b(Be,Ke)};P(Ie,Be=>{r(xe),r(B),_(()=>r(xe).albums.length>0&&r(B)==="all")&&Be(je)})}b(le,T)};P(Q,le=>{r(v)==="search"&&!r(x)&&le($e)})}var ke=g(Q,2);{var tt=le=>{var T=hf(),J=g(Oe(T),2);kt(J,5,l,Ot,(ie,Ie)=>{var je=ff(),Be=c(je),Ke=c(Be);Ut(Ke,{get src(){return r(Ie),_(()=>r(Ie).image)},get alt(){return r(Ie),_(()=>r(Ie).title)},radius:"8px"});var Ve=g(Ke,2),Ye=c(Ve),Le=c(Ye);G(Le,()=>(R(y),_(()=>y.PLAY)));var Ne=g(Be,2),ze=c(Ne),Qe=g(Ne,2),We=c(Qe);oe(()=>{ae(ze,(r(Ie),_(()=>r(Ie).title))),ae(We,(r(Ie),_(()=>r(Ie).year)))}),A("click",je,()=>me(r(Ie))),b(ie,je)}),A("wheel",J,W),b(le,T)};P(ke,le=>{r(v),l(),_(()=>r(v).includes("artist")&&l().length>0)&&le(tt)})}b(Se,Fe)},row:(Se,Re)=>{var Fe=gf();const se=gt(()=>Re.item),te=gt(()=>Re.index);var Q=c(Fe);Pr(Q,{get track(){return r(se)},get index(){return r(te)},$$events:{play:()=>Nt.playTrack(r(se).id),artistclick:()=>{}}}),b(Se,Fe)},footer:(Se,Re)=>{var Fe=mf(),se=c(Fe);{var te=$e=>{var ke=_f();b($e,ke)};P(se,$e=>{r(U)&&$e(te)})}var Q=g(se,2);ja(Q,$e=>m(H,$e),()=>r(H)),b(Se,Fe)}}})};P(ve,qe=>{r(v),_(()=>["playlist","search","artist_details","album_details"].includes(r(v)))&&qe(Ce)})}b(S,I)};P(ye,S=>{r(p)?S(De,!1):S(we)})}b(e,K),Ct(),u()}var kf=k('<div class="knob svelte-1jla3sy"></div>'),xf=k('<div class="tooltip current svelte-1jla3sy"> </div> <span></span>',1),Sf=k('<div slot="fallback" class="icon-fallback svelte-1jla3sy"><!></div>'),Ef=k('<span class="meta-tag quality"> </span>'),Tf=k('<div class="dot svelte-1jla3sy"></div>'),$f=k("<button><!> <!></button>"),Mf=k('<div class="dock svelte-1jla3sy"><div class="progress-shadow svelte-1jla3sy"></div> <div><div class="rail svelte-1jla3sy"></div> <div class="fill svelte-1jla3sy"><!></div> <!></div> <div class="grid svelte-1jla3sy"><div class="info svelte-1jla3sy"><div class="art svelte-1jla3sy"><!></div> <div class="meta svelte-1jla3sy"><div class="title-row svelte-1jla3sy"><div class="title text-ellipsis svelte-1jla3sy"> </div> <button class="btn-icon tiny-dots svelte-1jla3sy"><!></button></div> <div class="artist-row svelte-1jla3sy"><div class="artist text-ellipsis svelte-1jla3sy"> </div> <!></div></div></div> <div class="controls svelte-1jla3sy"><button><!></button> <button class="btn-icon"><!></button> <button class="play-btn flex-center svelte-1jla3sy"><!></button> <button class="btn-icon"><!></button> <!></div> <div class="volume desktop svelte-1jla3sy"><button class="vol-btn-mini svelte-1jla3sy" title="Mute/Unmute"><!></button> <div class="custom-slider svelte-1jla3sy"><div class="slider-bg svelte-1jla3sy"><div class="slider-fill svelte-1jla3sy"></div> <div class="slider-knob svelte-1jla3sy"></div></div></div></div></div></div>');function Af(e,t){At(t,!1);const a=()=>Ee(Mt,"$status",u),s=()=>Ee(Kt,"$currentSong",u),n=()=>Ee(ca,"$yandexFavorites",u),i=()=>Ee(Ya,"$favorites",u),l=()=>Ee(Qa,"$stations",u),o=()=>Ee(As,"$isFullPlayerOpen",u),[u,d]=qt(),v=$(),p=$(),f=$(),h=$(),E=$(),M=$(),w=$(),x=$(),U=$(),ne=$(),ce=$(),H=$(),_e=$();let he=$(!1),B=$(!1),xe=!1,re=$(0),j=$(),L=$();const F=D=>N=>{N.stopPropagation(),D(N)};function ue(D){if(isNaN(D)||D===null)return"0:00";const N=Math.floor(D/60),W=Math.floor(D%60);return`${N}:${W<10?"0":""}${W}`}function V(D,N){const W=N.getBoundingClientRect();return Math.max(0,Math.min(1,(D.clientX-W.left)/W.width))}function be(D){r(h)||(m(B,!0),m(re,V(D,r(j))),window.addEventListener("mousemove",q),window.addEventListener("mouseup",O))}function q(D){if(r(B)&&m(re,V(D,r(j))),xe){const N=Math.round(V(D,r(L))*100);Pa(N)}}function O(){r(B)&&!r(h)&&Dn(r(re)*r(v)),m(B,!1),xe=!1,window.removeEventListener("mousemove",q),window.removeEventListener("mouseup",O)}let Me=50;function X(D){D.stopPropagation(),a().volume>0?(Me=a().volume,Pa(0)):Pa(Me>0?Me:30)}function de(D){xe=!0;const N=Math.round(V(D,r(L))*100);Pa(N),window.addEventListener("mousemove",q),window.addEventListener("mouseup",O)}function me(){const D=(r(_e)+1)%3;D===0?(a().random&&nr(),a().repeat&&ir()):D===1?(a().random||nr(),a().repeat&&ir()):D===2&&(a().random&&nr(),a().repeat||ir())}function pe(D){D.stopPropagation(),es(D,s(),{type:"general",source:"miniplayer"})}function Ae(D){es(D.detail.originalEvent,s(),{type:"general",source:"miniplayer"})}async function z(D){D&&D.stopPropagation&&D.stopPropagation();const N=s();if(!(!N.file&&!N.id))if(N.isYandex||N.service==="yandex"){const W=n().has(String(N.id));try{W?(ca.update(K=>(K.delete(String(N.id)),K)),Ue("Removed from Yandex Likes","info")):(ca.update(K=>(K.add(String(N.id)),K)),Ue("Added to Yandex Likes","success")),await Nt.toggleLike(N.id,W)}catch{Ue("Error updating like","error")}}else ya.toggleFavorite(N)}ee(()=>a(),()=>{m(v,a().duration>0?a().duration:1)}),ee(()=>a(),()=>{m(p,a().elapsed||0)}),ee(()=>a(),()=>{m(f,a().state==="play")}),ee(()=>s(),()=>{m(h,s().file?.startsWith("http")&&!s().isYandex)}),ee(()=>s(),()=>{m(E,s().title||"Not Playing")}),ee(()=>s(),()=>{m(M,s().stationName||s().artist||"Moode")}),ee(()=>(s(),n(),i()),()=>{m(w,s().isYandex||s().service==="yandex"?n().has(String(s().id)):s().file&&i().has(s().file))}),ee(()=>(s(),l()),()=>{m(x,Cr(s(),l(),s().stationName))}),ee(()=>(r(h),r(B),r(re),r(p),r(v)),()=>{m(U,r(h)?0:r(B)?r(re)*100:r(p)/r(v)*100)}),ee(()=>(r(f),r(B),r(h)),()=>{m(ne,r(f)&&!r(B)&&!r(h))}),ee(()=>a(),()=>{m(ce,a().bitrate?`${a().bitrate} kbps`:a().format||"")}),ee(()=>(a(),y),()=>{m(H,a().volume===0?y.VOLUME_MUTE:a().volume<50?y.VOLUME_MEDIUM:y.VOLUME_FULL)}),ee(()=>a(),()=>{m(_e,a().repeat?2:a().random?1:0)}),Gt(),It();var fe=it(),ge=Oe(fe);{var He=D=>{var N=Mf(),W=c(N),K=g(W,2);let ye;var we=g(c(K),2),De=c(we);{var S=Ge=>{var yt=kf();b(Ge,yt)};P(De,Ge=>{r(h)||Ge(S)})}var I=g(we,2);{var Z=Ge=>{var yt=xf(),Tt=Oe(yt),fa=c(Tt);oe(Pe=>{ft(Tt,`left: ${r(U)??""}%`),ae(fa,Pe)},[()=>(r(B),r(re),r(v),r(p),_(()=>r(B)?ue(r(re)*r(v)):ue(r(p))))]),b(Ge,yt)};P(I,Ge=>{(r(he)||r(B))&&!r(h)&&Ge(Z)})}ja(K,Ge=>m(j,Ge),()=>r(j));var Te=g(K,2),C=c(Te),Y=c(C),ve=c(Y);Ut(ve,{get src(){return r(x)},alt:"art",radius:"4px",$$slots:{fallback:(Ge,yt)=>{var Tt=Sf(),fa=c(Tt);G(fa,()=>(r(h),R(y),_(()=>r(h)?y.RADIO:y.ALBUMS))),b(Ge,Tt)}}});var Ce=g(Y,2),qe=c(Ce),Se=c(qe),Re=c(Se),Fe=g(Se,2),se=c(Fe);G(se,()=>(R(y),_(()=>y.DOTS)));var te=g(qe,2),Q=c(te),$e=c(Q),ke=g(Q,2);{var tt=Ge=>{var yt=Ef(),Tt=c(yt);oe(()=>ae(Tt,r(ce))),b(Ge,yt)};P(ke,Ge=>{r(ce)&&Ge(tt)})}var le=g(C,2),T=c(le),J=Nr(()=>F(z));let ie;var Ie=c(T);G(Ie,()=>(r(w),R(y),_(()=>r(w)?y.HEART_FILLED:y.HEART)));var je=g(T,2),Be=Nr(()=>F(()=>ss("previous"))),Ke=c(je);G(Ke,()=>(R(y),_(()=>y.PREVIOUS)));var Ve=g(je,2),Ye=Nr(()=>F(Os)),Le=c(Ve);G(Le,()=>(a(),R(y),_(()=>a().state==="play"?y.PAUSE:y.PLAY)));var Ne=g(Ve,2),ze=Nr(()=>F(()=>ss("next"))),Qe=c(Ne);G(Qe,()=>(R(y),_(()=>y.NEXT)));var We=g(Ne,2);{var Xe=Ge=>{var yt=$f(),Tt=Nr(()=>F(me));let fa;var Pe=c(yt);{var st=Bt=>{var Sa=it(),jr=Oe(Sa);G(jr,()=>(R(y),_(()=>y.REPEAT))),b(Bt,Sa)},wt=Bt=>{var Sa=it(),jr=Oe(Sa);G(jr,()=>(R(y),_(()=>y.SHUFFLE))),b(Bt,Sa)};P(Pe,Bt=>{r(_e)===2?Bt(st):Bt(wt,!1)})}var ha=g(Pe,2);{var qs=Bt=>{var Sa=Tf();b(Bt,Sa)};P(ha,Bt=>{r(_e)>0&&Bt(qs)})}oe(()=>fa=rt(yt,1,"btn-icon desktop mode-btn svelte-1jla3sy",null,fa,{active:r(_e)>0})),A("click",yt,function(...Bt){r(Tt)?.apply(this,Bt)}),b(Ge,yt)};P(We,Ge=>{r(h)||Ge(Xe)})}var at=g(le,2),ot=c(at),ut=c(ot);G(ut,()=>r(H));var vt=g(ot,2),ht=c(vt),nt=c(ht),xt=g(nt,2);ja(vt,Ge=>m(L,Ge),()=>r(L)),Vt(()=>A("click",N,()=>As.set(!0))),An(N,(Ge,yt)=>Bn?.(Ge,yt),()=>500),Vt(()=>A("longpress",N,Ae)),oe(()=>{ft(W,`width: ${r(U)??""}%; transition: ${r(ne)?"width 0.25s linear":"none"}`),ye=rt(K,1,"progress-bar svelte-1jla3sy",null,ye,{radio:r(h)}),ft(we,`width: ${r(U)??""}%; transition: ${r(ne)?"width 0.25s linear":"none"}`),Ft(Se,"title",r(E)),ae(Re,r(E)),Ft(Q,"title",r(M)),ae($e,r(M)),ie=rt(T,1,"btn-icon desktop svelte-1jla3sy",null,ie,{liked:r(w)}),ft(nt,`width: ${a(),_(()=>a().volume)??""}%`),ft(xt,`left: ${a(),_(()=>a().volume)??""}%`)}),A("mouseenter",K,()=>m(he,!0)),A("mouseleave",K,()=>m(he,!1)),A("mousedown",K,ta(be)),A("click",K,ta(function(Ge){Zr.call(this,t,Ge)})),A("click",Fe,pe),A("click",T,function(...Ge){r(J)?.apply(this,Ge)}),A("click",je,function(...Ge){r(Be)?.apply(this,Ge)}),A("click",Ve,function(...Ge){r(Ye)?.apply(this,Ge)}),A("click",Ne,function(...Ge){r(ze)?.apply(this,Ge)}),A("click",ot,X),A("mousedown",vt,ta(de)),A("click",vt,ta(function(Ge){Zr.call(this,t,Ge)})),b(D,N)};P(ge,D=>{o()||D(He)})}b(e,fe),Ct(),d()}var Cf=k('<div class="drag-zone svelte-1olwzt8"><div class="drag-handle-icon svelte-1olwzt8"><!></div></div>'),Pf=k('<div slot="fallback" class="icon-fallback svelte-1olwzt8"><!></div>'),Lf=k('<span class="meta-tag quality"> </span>'),zf=k('<span class="dot svelte-1olwzt8"></span>'),Rf=k("<button><!> <!></button>"),If=k('<div style="width: 44px;"></div>'),jf=k('<div><!> <div class="bg-container svelte-1olwzt8"><div class="bg-gradient-fallback svelte-1olwzt8"></div> <img class="bg-img svelte-1olwzt8" alt="" loading="eager"/> <div class="bg-overlay svelte-1olwzt8"></div></div> <div class="player-body svelte-1olwzt8"><div class="art-container svelte-1olwzt8"><div class="artwork svelte-1olwzt8"><!></div></div> <div class="controls-area svelte-1olwzt8"><div class="meta svelte-1olwzt8"><h1 class="title text-ellipsis svelte-1olwzt8"> </h1> <div class="artist-row svelte-1olwzt8"><h2 class="artist text-ellipsis svelte-1olwzt8"> </h2> <!></div></div> <div class="progress-section"><div><div class="common-track svelte-1olwzt8"><div class="common-fill svelte-1olwzt8"><div class="common-knob svelte-1olwzt8"></div></div></div></div> <div class="time-row svelte-1olwzt8"><span> </span> <span> </span></div></div> <div class="buttons-row svelte-1olwzt8"><button><!></button> <button class="btn-icon side-btn svelte-1olwzt8"><!></button> <button class="play-btn-large flex-center svelte-1olwzt8"><!></button> <button class="btn-icon side-btn svelte-1olwzt8"><!></button> <!></div> <div class="volume-row svelte-1olwzt8"><button class="btn-icon small vol-btn svelte-1olwzt8"><!></button> <div class="volume-hit-area svelte-1olwzt8"><div class="common-track svelte-1olwzt8"><div class="common-fill svelte-1olwzt8"></div> <div class="common-knob svelte-1olwzt8"></div></div></div> <div class="vol-icon-static svelte-1olwzt8"><!></div></div></div></div></div>');function Ei(e,t){At(t,!1);const a=()=>Ee(Kt,"$currentSong",o),s=()=>Ee(Qa,"$stations",o),n=()=>Ee(Mt,"$status",o),i=()=>Ee(ca,"$yandexFavorites",o),l=()=>Ee(Ya,"$favorites",o),[o,u]=qt(),d=$(),v=$(),p=$(),f=$(),h=$(),E=$(),M=$(),w=$(),x=$(),U=$(),ne=$(),ce=$();let H=St(t,"isDocked",8,!1),_e=0,he=$(0),B=$(!1);function xe(){As.set(!1)}function re(Pe){if(H())return;const st=Pe.target;st.closest(".bar-hit-area")||st.closest(".volume-hit-area")||(_e=Pe.touches[0].clientY,m(B,!0))}function j(Pe){if(!r(B)||H())return;const st=Pe.touches[0].clientY-_e;st>0&&(Pe.cancelable&&st>10&&Pe.preventDefault(),m(he,st))}function L(){H()||(m(B,!1),r(he)>150?xe():m(he,0))}let F=$(!1),ue=$(0),V=$();function be(Pe){const st=Math.floor(Pe/60)||0,wt=Math.floor(Pe%60)||0;return`${st}:${wt.toString().padStart(2,"0")}`}function q(Pe,st){const wt=st.getBoundingClientRect(),ha=Pe.touches?Pe.touches[0].clientX:Pe.clientX;return Math.max(0,Math.min(1,(ha-wt.left)/wt.width))}function O(Pe){r(f)||(m(F,!0),m(ue,q(Pe,r(V))))}function Me(Pe){r(F)&&m(ue,q(Pe,r(V)))}function X(){r(F)&&!r(f)&&Dn(r(ue)*r(v)),m(F,!1)}let de=!1,me=$(),pe=50;function Ae(){n().volume>0?(pe=n().volume,Pa(0)):Pa(pe>0?pe:30)}function z(Pe){de=!0;const st=Math.round(q(Pe,r(me))*100);Pa(st),window.addEventListener("mousemove",fe),window.addEventListener("mouseup",ge),window.addEventListener("touchmove",fe,{passive:!1}),window.addEventListener("touchend",ge)}function fe(Pe){if(de){Pe.preventDefault();const st=Math.round(q(Pe,r(me))*100);Pa(st)}}function ge(){de=!1,window.removeEventListener("mousemove",fe),window.removeEventListener("mouseup",ge),window.removeEventListener("touchmove",fe),window.removeEventListener("touchend",ge)}function He(){const Pe=(r(x)+1)%3;Pe===0?(n().random&&nr(),n().repeat&&ir()):Pe===1?(n().random||nr(),n().repeat&&ir()):Pe===2&&(n().random&&nr(),n().repeat||ir())}async function D(){const Pe=a();if(!(!Pe.file&&!Pe.id))if(Pe.isYandex||Pe.service==="yandex"){const st=i().has(String(Pe.id));try{st?(ca.update(wt=>(wt.delete(String(Pe.id)),wt)),Ue("Removed from Yandex Likes","info")):(ca.update(wt=>(wt.add(String(Pe.id)),wt)),Ue("Added to Yandex Likes","success")),await Nt.toggleLike(Pe.id,st)}catch{Ue("Error updating like","error")}}else ya.toggleFavorite(Pe)}ee(()=>(a(),s()),()=>{m(d,Cr(a(),s(),a().stationName))}),ee(()=>n(),()=>{m(v,n().duration||1)}),ee(()=>n(),()=>{m(p,n().elapsed||0)}),ee(()=>a(),()=>{m(f,a().file?.startsWith("http")&&!a().isYandex)}),ee(()=>n(),()=>{m(h,n().state==="play")}),ee(()=>(r(h),r(F),r(f)),()=>{m(E,r(h)&&!r(F)&&!r(f))}),ee(()=>(r(f),r(F),r(ue),r(p),r(v)),()=>{m(M,r(f)?0:r(F)?r(ue)*100:r(p)/r(v)*100)}),ee(()=>(n(),y),()=>{m(w,n().volume===0?y.VOLUME_MUTE:n().volume<50?y.VOLUME_MEDIUM:y.VOLUME_FULL)}),ee(()=>n(),()=>{m(x,n().repeat?2:n().random?1:0)}),ee(()=>n(),()=>{m(U,n().bitrate?`${n().bitrate} kbps`:n().format||"")}),ee(()=>(a(),i(),l()),()=>{m(ne,a().isYandex||a().service==="yandex"?i().has(String(a().id)):a().file&&l().has(a().file))}),ee(()=>R(H()),()=>{m(ce,H()?"8px":"var(--radius-xl)")}),Gt(),It();var N=jf();let W;var K=c(N);{var ye=Pe=>{var st=Cf(),wt=c(st),ha=c(wt);G(ha,()=>(R(y),_(()=>y.CHEVRON_DOWN))),A("touchstart",st,re),A("touchmove",st,j),A("touchend",st,L),A("click",st,xe),b(Pe,st)};P(K,Pe=>{H()||Pe(ye)})}var we=g(K,2),De=g(c(we),2),S=g(we,2),I=c(S),Z=c(I),Te=c(Z);Ut(Te,{get src(){return r(d)},alt:"Cover",get radius(){return r(ce)},$$slots:{fallback:(Pe,st)=>{var wt=Pf(),ha=c(wt);G(ha,()=>(r(f),R(y),_(()=>r(f)?y.RADIO:y.ALBUMS))),b(Pe,wt)}}});var C=g(I,2),Y=c(C),ve=c(Y),Ce=c(ve),qe=g(ve,2),Se=c(qe),Re=c(Se),Fe=g(Se,2);{var se=Pe=>{var st=Lf(),wt=c(st);oe(()=>ae(wt,r(U))),b(Pe,st)};P(Fe,Pe=>{r(U)&&Pe(se)})}var te=g(Y,2),Q=c(te);let $e;var ke=c(Q),tt=c(ke);ja(Q,Pe=>m(V,Pe),()=>r(V));var le=g(Q,2),T=c(le),J=c(T),ie=g(T,2),Ie=c(ie),je=g(te,2),Be=c(je);let Ke;var Ve=c(Be);G(Ve,()=>(r(ne),R(y),_(()=>r(ne)?y.HEART_FILLED:y.HEART)));var Ye=g(Be,2),Le=c(Ye);G(Le,()=>(R(y),_(()=>y.PREVIOUS)));var Ne=g(Ye,2),ze=c(Ne);G(ze,()=>(n(),R(y),_(()=>n().state==="play"?y.PAUSE:y.PLAY)));var Qe=g(Ne,2),We=c(Qe);G(We,()=>(R(y),_(()=>y.NEXT)));var Xe=g(Qe,2);{var at=Pe=>{var st=Rf();let wt;var ha=c(st);{var qs=pa=>{var Xa=it(),Bs=Oe(Xa);G(Bs,()=>(R(y),_(()=>y.REPEAT))),b(pa,Xa)},Bt=pa=>{var Xa=it(),Bs=Oe(Xa);G(Bs,()=>(R(y),_(()=>y.SHUFFLE))),b(pa,Xa)};P(ha,pa=>{r(x)===2?pa(qs):pa(Bt,!1)})}var Sa=g(ha,2);{var jr=pa=>{var Xa=zf();b(pa,Xa)};P(Sa,pa=>{r(x)>0&&pa(jr)})}oe(()=>wt=rt(st,1,"btn-icon side-btn mode-btn svelte-1olwzt8",null,wt,{active:r(x)>0})),A("click",st,He),b(Pe,st)},ot=Pe=>{var st=If();b(Pe,st)};P(Xe,Pe=>{r(f)?Pe(ot,!1):Pe(at)})}var ut=g(je,2),vt=c(ut),ht=c(vt);G(ht,()=>r(w));var nt=g(vt,2),xt=c(nt),Ge=c(xt),yt=g(Ge,2);ja(nt,Pe=>m(me,Pe),()=>r(me));var Tt=g(nt,2),fa=c(Tt);G(fa,()=>(R(y),_(()=>y.VOLUME_FULL))),oe((Pe,st)=>{W=rt(N,1,"full-player svelte-1olwzt8",null,W,{"is-docked":H()}),ft(N,H()?"":`transform: translateY(${r(he)}px); transition: ${r(B)?"none":"transform 0.3s cubic-bezier(0.2, 0.8, 0.2, 1)"}`),Ft(De,"src",r(d)),ft(Z,`transform: scale(${1-r(he)/3e3})`),ft(C,`opacity: ${1-r(he)/400}`),ae(Ce,(a(),_(()=>a().title||"Not Playing"))),ae(Re,(a(),_(()=>a().stationName||a().artist||"Moode Audio"))),$e=rt(Q,1,"bar-hit-area svelte-1olwzt8",null,$e,{"is-docked-bar":H()}),ft(tt,`width: ${r(M)??""}%; transition: ${r(E)?"width 0.3s linear":"none"}`),ae(J,Pe),ae(Ie,st),Ke=rt(Be,1,"btn-icon side-btn svelte-1olwzt8",null,Ke,{liked:r(ne)}),ft(Ge,`width: ${n(),_(()=>n().volume)??""}%`),ft(yt,`left: ${n(),_(()=>n().volume)??""}%; right: auto;`)},[()=>(r(F),r(ue),r(v),r(p),_(()=>r(F)?be(r(ue)*r(v)):be(r(p)))),()=>(r(f),r(v),_(()=>r(f)?"LIVE":be(r(v))))]),A("mousedown",Q,O),A("touchstart",Q,O,void 0,!0),A("mousemove",Q,function(...Pe){(r(F)?Me:null)?.apply(this,Pe)}),A("touchmove",Q,function(...Pe){(r(F)?Me:null)?.apply(this,Pe)},void 0,!0),A("mouseup",Q,X),A("touchend",Q,X),A("click",Be,D),A("click",Ye,()=>ss("previous")),A("click",Ne,function(...Pe){Os?.apply(this,Pe)}),A("click",Qe,()=>ss("next")),A("click",vt,Ae),A("mousedown",nt,ta(z)),A("touchstart",nt,ta(z)),mt(3,N,()=>bo,()=>({y:H()?0:800,duration:300,opacity:1})),b(e,N),Ct(),u()}const Nf=`<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.0//EN" "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd">
<svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="600px" height="331px" viewBox="0 0 600 331" preserveAspectRatio="xMidYMid meet">
 <g fill="#eb1250">
  <path d="M 315.33 288.42 c -1.03 -0.33 -2.60 -1.34 -3.70 -2.39 -1.08 -1.01 -1.73 -2.81 -2.48 -6.68 -0.38 -1.99 -0.84 -4.29 -1.03 -5.13 -0.21 -0.84 -0.47 -2.20 -0.61 -3.05 -0.14 -0.84 -0.42 -2.34 -0.61 -3.33 -0.45 -2.20 -0.42 -2.04 -0.77 -4.17 -0.16 -0.96 -0.40 -2.16 -0.52 -2.65 -0.14 -0.52 -0.33 -1.45 -0.45 -2.11 -0.12 -0.68 -0.38 -2.02 -0.59 -2.98 -0.21 -0.96 -0.52 -2.55 -0.70 -3.52 -0.16 -0.96 -0.52 -2.81 -0.77 -4.10 -0.26 -1.29 -0.82 -4.08 -1.22 -6.21 -0.80 -4.20 -1.57 -8.13 -2.44 -12.54 -0.33 -1.55 -0.63 -3.23 -0.73 -3.75 -0.07 -0.52 -0.28 -1.57 -0.47 -2.34 -0.16 -0.77 -0.54 -2.63 -0.80 -4.10 -0.28 -1.48 -0.61 -3.12 -0.73 -3.63 -0.12 -0.52 -0.42 -2.20 -0.70 -3.75 -0.28 -1.55 -0.91 -4.92 -1.43 -7.50 -0.49 -2.58 -1.34 -7.01 -1.85 -9.84 -0.54 -2.84 -1.17 -6.26 -1.43 -7.62 -0.26 -1.36 -0.56 -3.07 -0.68 -3.80 -0.12 -0.75 -0.26 -1.43 -0.33 -1.55 -0.26 -0.42 -2.60 -12.89 -3.21 -17.16 -0.12 -0.84 -0.38 -2.16 -0.56 -2.93 -0.16 -0.77 -0.49 -2.34 -0.70 -3.52 -0.21 -1.15 -0.63 -3.26 -0.94 -4.69 -0.30 -1.41 -0.68 -3.30 -0.82 -4.22 -0.16 -0.89 -0.47 -2.58 -0.73 -3.75 -0.68 -3.30 -2.74 -14.16 -3.73 -19.80 -0.28 -1.48 -0.63 -3.38 -0.82 -4.22 -0.38 -1.71 -1.31 -6.70 -1.88 -10.08 -0.40 -2.34 -0.87 -4.71 -1.43 -7.27 -0.16 -0.84 -0.59 -3 -0.91 -4.80 -0.35 -1.80 -0.77 -4.01 -0.96 -4.92 -0.19 -0.89 -0.54 -2.98 -0.80 -4.64 -0.49 -3.26 -0.70 -3.91 -1.10 -3.40 -0.14 0.16 -0.30 0.63 -0.38 1.01 -0.07 0.40 -0.54 2.51 -1.01 4.69 -2.67 12.42 -3.16 14.77 -3.38 16.29 -0.28 1.99 -1.48 7.64 -3.77 18.05 -1.17 5.23 -2.37 10.66 -2.67 12.07 -0.33 1.43 -0.84 4.01 -1.17 5.74 -0.30 1.73 -1.05 5.27 -1.64 7.85 -0.59 2.58 -1.59 7.17 -2.25 10.20 -0.63 3.02 -1.38 5.93 -1.62 6.45 -0.66 1.36 -2.60 3.26 -4.05 3.96 -1.24 0.61 -1.24 0.61 -87.30 0.61 -86.04 0 -86.04 0 -87.33 -0.49 -1.59 -0.59 -3.56 -2.32 -4.41 -3.89 -1.97 -3.63 -0.35 -8.32 3.61 -10.43 1.01 -0.54 1.01 -0.54 83.44 -0.61 82.43 -0.05 82.43 -0.05 82.69 -1.41 0.14 -0.73 0.42 -1.85 0.59 -2.51 0.19 -0.63 0.82 -3.59 1.41 -6.56 0.59 -2.95 1.29 -6.23 1.52 -7.27 0.23 -1.03 0.82 -3.66 1.27 -5.86 0.47 -2.18 1.34 -6.30 1.97 -9.14 0.63 -2.84 1.34 -6.16 1.57 -7.38 0.21 -1.22 0.49 -2.39 0.61 -2.60 0.09 -0.21 0.42 -1.64 0.68 -3.16 0.26 -1.55 0.63 -3.26 0.82 -3.82 0.19 -0.59 0.35 -1.34 0.35 -1.69 0 -0.35 0.21 -1.57 0.49 -2.70 0.26 -1.13 0.59 -2.60 0.68 -3.23 0.21 -1.22 2.16 -10.08 3.05 -13.78 0.26 -1.13 1.05 -4.88 1.76 -8.32 0.70 -3.45 1.55 -7.59 1.88 -9.21 0.33 -1.62 1.08 -5.09 1.64 -7.73 1.62 -7.41 1.73 -7.95 2.13 -9.96 0.91 -4.62 1.92 -9.19 2.18 -9.80 0.14 -0.35 0.82 -1.24 1.48 -1.97 2.58 -2.72 5.84 -3.42 8.88 -1.90 1.97 0.98 3.73 2.74 4.27 4.31 0.42 1.20 1.41 6.42 1.80 9.47 0.09 0.84 0.30 1.83 0.45 2.18 0.14 0.38 0.26 1.10 0.26 1.66 0 0.54 0.16 1.45 0.35 2.04 0.19 0.56 0.56 2.25 0.84 3.73 0.82 4.50 1.78 9.28 2.20 11.13 0.19 0.77 0.45 2.04 0.56 2.81 0.47 2.63 1.92 10.08 2.25 11.60 0.19 0.84 0.45 2.16 0.56 2.93 0.28 1.64 0.63 3.56 1.08 5.86 0.19 0.91 0.49 2.60 0.70 3.75 0.21 1.17 0.54 2.79 0.70 3.63 0.19 0.84 0.77 3.75 1.29 6.45 0.54 2.72 1.17 5.88 1.41 7.03 0.23 1.17 0.66 3.38 0.94 4.92 0.26 1.55 0.70 4.03 0.96 5.51 0.26 1.48 0.73 3.91 1.03 5.39 0.30 1.48 0.68 3.45 0.82 4.34 0.16 0.91 0.47 2.48 0.70 3.52 0.70 3.19 2.23 10.73 2.58 12.89 0.09 0.66 0.47 2.48 0.80 4.10 0.63 3.05 0.70 3.35 1.66 8.77 0.33 1.80 0.82 4.29 1.08 5.51 0.26 1.24 0.56 2.79 0.68 3.42 0.19 1.17 0.89 4.76 1.55 8.09 0.21 0.96 0.63 3.23 0.96 5.04 0.84 4.64 1.41 7.55 1.69 8.91 0.14 0.66 0.35 1.76 0.49 2.46 0.12 0.70 0.38 2.04 0.56 2.93 0.19 0.91 0.61 3.16 0.94 5.04 1.05 5.86 2.48 13.41 2.88 15.12 0.19 0.91 0.42 2.02 0.47 2.46 0.07 0.45 0.33 1.78 0.59 2.93 0.26 1.17 0.56 2.70 0.68 3.40 0.12 0.70 0.30 1.62 0.42 1.99 0.12 0.40 0.35 1.48 0.52 2.41 0.26 1.50 0.35 1.69 0.82 1.69 0.45 0 0.54 -0.16 0.68 -0.98 0.23 -1.66 2.23 -11.86 2.84 -14.60 0.30 -1.41 0.66 -3.09 0.80 -3.75 0.89 -4.57 5.46 -26.60 6.47 -31.17 0.33 -1.41 0.77 -3.59 1.03 -4.80 0.52 -2.51 1.13 -5.44 2.13 -10.08 0.38 -1.73 1.01 -4.69 1.36 -6.56 0.38 -1.88 1.05 -5.13 1.50 -7.27 0.47 -2.13 0.94 -4.38 1.05 -5.04 0.45 -2.30 1.95 -9.63 2.18 -10.48 0.26 -1.01 1.64 -7.38 2.44 -11.32 0.30 -1.55 0.77 -3.87 1.05 -5.16 0.47 -2.34 2.91 -13.57 4.22 -19.57 0.38 -1.73 0.82 -3.89 0.96 -4.80 0.54 -3.26 2.16 -5.65 4.64 -6.91 1.73 -0.87 2.53 -1.01 4.36 -0.82 1.22 0.14 1.83 0.35 2.93 1.08 2.20 1.43 3.40 3.45 4.45 7.55 0.26 1.05 0.70 2.72 0.96 3.68 0.26 0.96 0.63 2.34 0.80 3.05 0.54 2.16 1.29 4.95 1.78 6.56 0.23 0.84 0.70 2.48 1.01 3.63 0.30 1.17 0.98 3.63 1.52 5.51 0.54 1.88 1.24 4.41 1.55 5.63 0.33 1.22 0.80 2.86 1.05 3.63 0.26 0.77 0.47 1.59 0.47 1.80 0 0.23 0.30 1.50 0.68 2.81 0.38 1.34 1.01 3.68 1.43 5.23 0.77 2.81 1.52 5.58 3.26 11.72 0.52 1.80 1.31 4.71 1.76 6.47 0.45 1.76 0.96 3.70 1.17 4.34 0.30 0.98 2.39 8.65 4.29 15.68 1.13 4.24 2.25 8.27 3.05 11.13 1.45 5.13 1.62 5.74 3.21 11.79 0.42 1.59 0.54 1.80 0.96 1.80 0.16 0 0.35 0.12 0.40 0.28 0.05 0.14 0.33 -0.52 0.63 -1.48 0.30 -0.96 1.73 -5.37 3.19 -9.82 1.48 -4.45 3.09 -9.52 3.63 -11.25 0.52 -1.73 1.85 -5.86 2.95 -9.14 1.13 -3.28 2.48 -7.45 3.05 -9.26 1.73 -5.44 2.23 -6.19 5.11 -7.69 1.43 -0.75 1.43 -0.75 69.40 -0.82 67.97 -0.07 67.97 -0.07 69.56 0.47 0.87 0.28 1.57 0.61 1.57 0.70 0 0.12 0.42 0.56 0.94 1.03 0.52 0.47 1.27 1.52 1.64 2.32 0.94 1.97 0.98 4.52 0.14 6.33 -0.73 1.57 -3.26 3.98 -4.52 4.31 -0.70 0.19 -19.31 0.28 -65.27 0.33 -64.29 0.05 -64.29 0.05 -66.82 7.66 -1.38 4.20 -4.97 14.95 -7.97 23.91 -5.58 16.71 -8.34 25.17 -9.89 30.12 -1.38 4.43 -2.34 5.98 -4.66 7.43 -1.15 0.75 -1.29 0.77 -3.66 0.77 -2.11 0 -2.63 -0.07 -3.59 -0.56 -1.20 -0.59 -2.65 -1.92 -3.59 -3.30 -0.47 -0.68 -2.44 -7.15 -4.17 -13.59 -0.19 -0.70 -0.61 -2.23 -0.94 -3.40 -0.33 -1.15 -0.77 -2.74 -0.98 -3.52 -0.19 -0.77 -0.45 -1.71 -0.56 -2.11 -0.12 -0.38 -0.49 -1.76 -0.82 -3.05 -0.35 -1.29 -1.03 -3.77 -1.52 -5.51 -1.90 -6.52 -2.79 -9.75 -2.95 -10.66 -0.07 -0.52 -0.23 -1.10 -0.35 -1.31 -0.12 -0.21 -0.63 -2.02 -1.15 -3.98 -0.94 -3.54 -1.66 -6.23 -3.40 -12.63 -0.47 -1.73 -1.10 -4.03 -1.43 -5.09 -0.30 -1.05 -0.94 -3.33 -1.38 -5.04 -0.45 -1.71 -1.03 -3.91 -1.29 -4.88 -0.28 -0.96 -0.59 -2.18 -0.68 -2.70 -0.12 -0.52 -0.75 -2.88 -1.41 -5.27 -0.66 -2.39 -1.45 -5.39 -1.80 -6.68 -0.33 -1.29 -0.70 -2.60 -0.80 -2.93 -0.30 -0.91 -2.04 -7.52 -2.25 -8.55 -0.16 -0.70 -0.33 -0.94 -0.66 -0.94 -0.40 0 -0.56 0.56 -1.45 4.80 -0.54 2.65 -1.36 6.61 -1.85 8.79 -0.47 2.20 -1.15 5.51 -1.50 7.38 -1.22 6.28 -1.92 9.73 -2.25 11.13 -0.19 0.77 -0.52 2.30 -0.70 3.40 -0.21 1.10 -0.54 2.53 -0.70 3.16 -0.19 0.66 -0.61 2.48 -0.91 4.10 -0.73 3.73 -1.69 8.48 -1.99 9.84 -0.49 2.30 -0.94 4.43 -1.29 6.21 -0.21 1.03 -0.75 3.61 -1.20 5.74 -0.45 2.13 -0.84 4.20 -0.91 4.57 -0.07 0.40 -0.23 1.34 -0.35 2.11 -0.14 0.77 -0.73 3.63 -1.31 6.33 -0.59 2.72 -1.17 5.55 -1.31 6.33 -0.30 1.83 -1.57 8.39 -1.85 9.61 -0.12 0.52 -0.54 2.58 -0.94 4.57 -0.40 1.99 -0.87 4.22 -1.05 4.92 -0.16 0.70 -0.45 2.09 -0.61 3.05 -0.16 0.96 -0.49 2.65 -0.73 3.75 -0.54 2.46 -0.59 2.70 -2.32 11.48 -0.77 3.94 -1.55 7.73 -1.73 8.44 -0.19 0.70 -0.56 2.39 -0.82 3.75 -0.28 1.36 -0.70 3.47 -0.96 4.69 -0.23 1.22 -0.61 3.23 -0.82 4.45 -0.63 3.87 -2.23 6.45 -4.83 7.85 -1.01 0.56 -1.57 0.68 -3.12 0.75 -1.13 0.05 -2.25 -0.07 -2.84 -0.26 z "/>
 </g>
</svg>`;var Df=k('<div class="backdrop svelte-ji5owg"></div>'),Of=k('<button><span class="icon svelte-ji5owg"><!></span> <span> </span></button>'),Ff=k('<!> <aside><div class="header svelte-ji5owg"><div class="header-inner svelte-ji5owg"><button class="collapse-btn svelte-ji5owg"><div class="chevron svelte-ji5owg"><!></div></button> <div><div class="logo svelte-ji5owg"><!></div></div></div> <button class="btn-icon mobile-close svelte-ji5owg"><!></button></div> <div class="scroll-area custom-scrollbar svelte-ji5owg"><nav class="svelte-ji5owg"><!> <button title="Search"><span class="icon svelte-ji5owg"><!></span> <span>Search</span></button> <div class="sep svelte-ji5owg"></div> <button class="nav-item sync svelte-ji5owg" title="Update Library"><span><!></span> <span> </span></button> <div class="sep svelte-ji5owg"></div> <button title="Settings"><span class="icon svelte-ji5owg"><!></span> <span>Settings</span></button></nav> <div class="footer svelte-ji5owg"><div>Moode WaveUI</div></div></div></aside>',1);function qf(e,t){At(t,!1);const a=()=>Ee(as,"$isYandexEnabled",l),s=()=>Ee(la,"$isSyncingLibrary",l),n=()=>Ee(hn,"$isSidebarCollapsed",l),i=()=>Ee(Pt,"$activeMenuTab",l),[l,o]=qt(),u=$(),d=$();let v=St(t,"isOpen",8,!1);const p=zn();let f=$(0),h=$(0),E=$(!1);const M=[{id:"queue",label:"Queue",icon:y.MENU},{id:"favorites",label:"Favorites",icon:y.HEART},{id:"artists",label:"Artists",icon:y.ARTISTS},{id:"albums",label:"Albums",icon:y.ALBUMS},{id:"playlists",label:"Playlists",icon:y.PLAYLISTS},{id:"radio",label:"Radio",icon:y.RADIO},{id:"yandex",label:"Yandex Music",icon:y.YANDEX}];function w(se){const te=`/${se}`;window.location.hash===`#${te}`||window.location.hash===te?(Pt.set(se),pt.set([{view:"root"}])):window.location.hash=te,p("close")}async function x(){s()||(await Aa.syncLibrary(),window.location.hash="/artists")}function U(){hn.update(se=>!se)}function ne(se){v()&&(m(f,se.touches[0].clientX),m(h,r(f)),m(E,!0))}function ce(se){r(E)&&m(h,se.touches[0].clientX)}function H(){r(E)&&(r(h)-r(f)<-70&&p("close"),m(E,!1),m(f,0),m(h,0))}ee(()=>a(),()=>{m(u,M.filter(se=>se.id==="yandex"?a():!0))}),ee(()=>(r(E),r(h),r(f)),()=>{m(d,r(E)?Math.min(0,r(h)-r(f)):0)}),Gt(),It();var _e=Ff(),he=Oe(_e);{var B=se=>{var te=Df();A("click",te,()=>p("close")),mt(3,te,()=>Et,()=>({duration:200})),b(se,te)};P(he,se=>{v()&&se(B)})}var xe=g(he,2);let re,j;var L=c(xe),F=c(L),ue=c(F),V=c(ue),be=c(V);G(be,()=>(R(y),_(()=>y.BACK)));var q=g(ue,2);let O;var Me=c(q),X=c(Me);G(X,()=>Nf);var de=g(F,2),me=c(de);G(me,()=>(R(y),_(()=>y.CLOSE)));var pe=g(L,2),Ae=c(pe),z=c(Ae);kt(z,1,()=>r(u),se=>se.id,(se,te)=>{var Q=Of();let $e;var ke=c(Q),tt=c(ke);G(tt,()=>(r(te),_(()=>r(te).icon)));var le=g(ke,2);let T;var J=c(le);oe(()=>{$e=rt(Q,1,"nav-item svelte-ji5owg",null,$e,{active:i()===r(te).id}),Ft(Q,"title",(r(te),_(()=>r(te).label))),T=rt(le,1,"label-text svelte-ji5owg",null,T,{hidden:n()}),ae(J,(r(te),_(()=>r(te).label)))}),A("click",Q,()=>w(r(te).id)),b(se,Q)});var fe=g(z,2);let ge;var He=c(fe),D=c(He);G(D,()=>(R(y),_(()=>y.SEARCH)));var N=g(He,2);let W;var K=g(fe,4),ye=c(K);let we;var De=c(ye);G(De,()=>(R(y),_(()=>y.SYNC)));var S=g(ye,2);let I;var Z=c(S),Te=g(K,4);let C;var Y=c(Te),ve=c(Y);G(ve,()=>(R(y),_(()=>y.SETTINGS)));var Ce=g(Y,2);let qe;var Se=g(Ae,2),Re=c(Se);let Fe;oe(()=>{re=rt(xe,1,"side-menu svelte-ji5owg",null,re,{"mobile-open":v(),collapsed:n()}),j=ft(xe,"",j,{transform:v()?`translateX(${r(d)}px)`:"",transition:r(E)?"none":"width 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.3s ease"}),Ft(ue,"title",n()?"Expand":"Collapse"),ft(V,`transform: rotate(${n()?"180deg":"0deg"})`),O=rt(q,1,"logo-wrapper svelte-ji5owg",null,O,{hidden:n()}),ge=rt(fe,1,"nav-item svelte-ji5owg",null,ge,{active:i()==="search"}),W=rt(N,1,"label-text svelte-ji5owg",null,W,{hidden:n()}),K.disabled=s(),we=rt(ye,1,"icon svelte-ji5owg",null,we,{spin:s()}),I=rt(S,1,"label-text svelte-ji5owg",null,I,{hidden:n()}),ae(Z,s()?"Syncing...":"Update Library"),C=rt(Te,1,"nav-item svelte-ji5owg",null,C,{active:i()==="settings"}),qe=rt(Ce,1,"label-text svelte-ji5owg",null,qe,{hidden:n()}),Fe=rt(Re,1,"footer-text svelte-ji5owg",null,Fe,{hidden:n()})}),A("click",ue,U),A("click",de,()=>p("close")),A("click",fe,()=>w("search")),A("click",K,x),A("click",Te,()=>w("settings")),A("touchstart",xe,ne),A("touchmove",xe,ce),A("touchend",xe,H),b(e,_e),Ct(),o()}var Bf=k('<div class="toast-container svelte-k2bvk7"><div> </div></div>'),Yf=k('<button class="back-btn svelte-k2bvk7"><span class="icon-inline svelte-k2bvk7"><!></span> Back</button>'),Uf=k('<div class="view-title svelte-k2bvk7"><!></div>'),Hf=k('<div class="full-player-modal svelte-k2bvk7"><!></div>'),Vf=k('<div class="app-container svelte-k2bvk7"><div class="app-layout svelte-k2bvk7"><!> <!> <main class="content-area svelte-k2bvk7"><header class="top-bar svelte-k2bvk7"><button class="hamburger-btn svelte-k2bvk7"><!></button> <!></header> <div class="scroll-container svelte-k2bvk7"><div class="view-wrapper svelte-k2bvk7"><!></div></div></main> <div class="docked-player-container svelte-k2bvk7"><!></div></div> <div class="mini-player-wrapper svelte-k2bvk7"><!></div></div> <!>',1);function Wf(e,t){At(t,!1);const a=()=>Ee(pt,"$navigationStack",l),s=()=>Ee(vn,"$toastMessage",l),n=()=>Ee(Pt,"$activeMenuTab",l),i=()=>Ee(As,"$isFullPlayerOpen",l),[l,o]=qt();let u=$(!1);Da(()=>{window.history.replaceState({depth:a().length},"","");const q=()=>{if(et(Ts)){Ts.set(!1);return}vd()};return window.addEventListener("popstate",q),()=>window.removeEventListener("popstate",q)}),It();var d=Vf(),v=Oe(d),p=c(v),f=c(p);{var h=q=>{var O=Bf(),Me=c(O),X=c(Me);oe(()=>{rt(Me,1,`toast-body ${s().type??""}`,"svelte-k2bvk7"),ae(X,s().text)}),mt(3,O,()=>bo,()=>({y:-50,duration:300})),b(q,O)};P(f,q=>{s()&&q(h)})}var E=g(f,2);qf(E,{get isOpen(){return r(u)},$$events:{close:()=>m(u,!1)}});var M=g(E,2),w=c(M),x=c(w),U=c(x);G(U,()=>y.MENU);var ne=g(x,2);{var ce=q=>{var O=Yf(),Me=c(O),X=c(Me);G(X,()=>y.BACK),A("click",O,function(...de){dd?.apply(this,de)}),b(q,O)},H=q=>{var O=Uf(),Me=c(O);{var X=me=>{var pe=Ea("Radio");b(me,pe)},de=me=>{var pe=it(),Ae=Oe(pe);{var z=ge=>{var He=Ea("Playlists");b(ge,He)},fe=ge=>{var He=it(),D=Oe(He);{var N=K=>{var ye=Ea("Search");b(K,ye)},W=K=>{var ye=it(),we=Oe(ye);{var De=I=>{var Z=Ea("Yandex Music");b(I,Z)},S=I=>{var Z=it(),Te=Oe(Z);{var C=ve=>{var Ce=Ea("Queue");b(ve,Ce)},Y=ve=>{var Ce=it(),qe=Oe(Ce);{var Se=Fe=>{var se=Ea("Favorites");b(Fe,se)},Re=Fe=>{var se=it(),te=Oe(se);{var Q=ke=>{var tt=Ea("Settings");b(ke,tt)},$e=ke=>{var tt=Ea();oe(le=>ae(tt,le),[()=>(n()||"Library").charAt(0).toUpperCase()+(n()||"library").slice(1)]),b(ke,tt)};P(te,ke=>{n()==="settings"?ke(Q):ke($e,!1)},!0)}b(Fe,se)};P(qe,Fe=>{n()==="favorites"?Fe(Se):Fe(Re,!1)},!0)}b(ve,Ce)};P(Te,ve=>{n()==="queue"?ve(C):ve(Y,!1)},!0)}b(I,Z)};P(we,I=>{n()==="yandex"?I(De):I(S,!1)},!0)}b(K,ye)};P(D,K=>{n()==="search"?K(N):K(W,!1)},!0)}b(ge,He)};P(Ae,ge=>{n()==="playlists"?ge(z):ge(fe,!1)},!0)}b(me,pe)};P(Me,me=>{n()==="radio"?me(X):me(de,!1)})}b(q,O)};P(ne,q=>{a().length>1?q(ce):q(H,!1)})}var _e=g(w,2),he=c(_e),B=c(he);{var xe=q=>{Bv(q,{})},re=q=>{var O=it(),Me=Oe(O);{var X=me=>{wf(me,{})},de=me=>{var pe=it(),Ae=Oe(pe);{var z=ge=>{Fu(ge,{})},fe=ge=>{var He=it(),D=Oe(He);{var N=K=>{uu(K,{})},W=K=>{var ye=it(),we=Oe(ye);{var De=I=>{$u(I,{})},S=I=>{var Z=it(),Te=Oe(Z);{var C=ve=>{Ru(ve,{})},Y=ve=>{Av(ve,{get activeCategory(){return n()}})};P(Te,ve=>{n()==="settings"?ve(C):ve(Y,!1)},!0)}b(I,Z)};P(we,I=>{n()==="search"?I(De):I(S,!1)},!0)}b(K,ye)};P(D,K=>{n()==="playlists"||n()==="favorites"?K(N):K(W,!1)},!0)}b(ge,He)};P(Ae,ge=>{n()==="queue"?ge(z):ge(fe,!1)},!0)}b(me,pe)};P(Me,me=>{n()==="yandex"?me(X):me(de,!1)},!0)}b(q,O)};P(B,q=>{n()==="radio"?q(xe):q(re,!1)})}var j=g(M,2),L=c(j);Ei(L,{isDocked:!0});var F=g(p,2),ue=c(F);Af(ue,{});var V=g(v,2);{var be=q=>{var O=Hf(),Me=c(O);Ei(Me,{}),b(q,O)};P(V,q=>{i()&&q(be)})}oe(()=>ft(_e,`padding-bottom: ${i()?"0px":"var(--mini-player-height)"};`)),A("click",x,()=>m(u,!0)),b(e,d),Ct(),o()}var Qf=k('<button class="back-btn-area svelte-l8h85k"><span class="back-icon svelte-l8h85k"><!></span></button> <span class="header-title svelte-l8h85k">Select Playlist</span>',1),Xf=k('<div class="track-info svelte-l8h85k"><div class="title text-ellipsis svelte-l8h85k"> </div> <div class="artist text-ellipsis svelte-l8h85k">Playlist</div></div>'),Kf=k('<div class="track-info svelte-l8h85k"><div class="title text-ellipsis svelte-l8h85k"> </div> <div class="artist text-ellipsis svelte-l8h85k"> </div></div>'),Gf=k('<button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span> </span></button>'),Zf=k('<div class="empty-msg svelte-l8h85k">No custom playlists</div>'),Jf=k("<!> <!>",1),e0=k('<button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Play Now</span></button> <div class="sep svelte-l8h85k"></div> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Rename</span></button> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Delete Playlist</span></button>',1),t0=k('<div class="sep svelte-l8h85k"></div> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Vibe by Track</span></button>',1),a0=k('<button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Go to Album</span></button> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Go to Artist</span></button>',1),r0=k('<div class="sep svelte-l8h85k"></div> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Remove from Playlist</span></button>',1),s0=k('<div class="sep svelte-l8h85k"></div> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Remove from Queue</span></button>',1),n0=k('<button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Play Next</span></button> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Add to Queue</span></button> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Add to Playlist...</span></button> <!> <!> <button class="menu-row svelte-l8h85k"><span><!></span> <span> </span></button> <!> <!>',1),i0=k('<div class="backdrop svelte-l8h85k"><div class="menu-card svelte-l8h85k"><div class="menu-header svelte-l8h85k"><!></div> <div class="menu-items scroll-y svelte-l8h85k"><!></div></div></div>');function o0(e,t){At(t,!1);const a=()=>Ee(In,"$contextMenu",i),s=()=>Ee(Ya,"$favorites",i),n=()=>Ee(Ds,"$playlists",i),[i,l]=qt(),o=$(),u=$(),d=$(),v=$(),p=$(),f=$(),h=$(),E=$();let M=$(),w=$(),x=$(),U=$(0),ne=$(0),ce=$("main"),H=$(!1);function _e(z){a().isOpen&&(m(H,!1),Yt())}function he(){Yt()}function B(){a().track&&da.playNext(a().track.file),Yt()}function xe(){a().track&&da.addToQueue(a().track.file),Yt()}function re(){a().track&&ya.toggleFavorite(a().track),Yt()}function j(){const z=a().track;z&&z.album&&(z.isYandex||Ht("tracks_by_album",{name:z.album,artist:z.artist})),Yt()}function L(){const z=a().track;z&&z.artist&&(z.isYandex||Ht("albums_by_artist",{name:z.artist})),Yt()}async function F(){const{playlistName:z,index:fe}=a().context;z&&fe!==null&&(Vr.update(ge=>{const He=[...ge];return He.splice(fe,1),He}),await ya.removeFromPlaylist(z,fe)),Yt()}function ue(){const{index:z}=a().context;z!=null&&da.removeFromQueue(z),Yt()}function V(){const z=a().context.playlist;z&&Ze.send("stop").then(()=>Ze.send("clear")).then(()=>Ze.send(`load "${z.name.replace(/"/g,'\\"')}"`)).then(()=>Ze.send("play 0")),Yt()}function be(){const z=a().context.playlist;z&&(Yt(),ba({title:"Rename Playlist",message:`Enter new name for "${z.name}":`,type:"prompt",placeholder:z.name,inputValue:z.name,confirmLabel:"Rename",onConfirm:fe=>{fe&&fe!==z.name&&ya.renamePlaylist(z.name,fe)}}))}function q(){const z=a().context.playlist;z&&(Yt(),ba({title:"Delete Playlist",message:`Are you sure you want to delete "${z.name}"? This cannot be undone.`,type:"confirm",confirmLabel:"Delete",onConfirm:()=>{ya.deletePlaylist(z.name)}}))}async function O(){const z=a().track;if(z&&z.isYandex&&z.id){Ue(`Starting radio based on "${z.title}"...`,"info");try{await Nt.playRadio(z.id)}catch(fe){console.error(fe),Ue("Error starting radio","error")}}Yt()}function Me(){m(ce,"playlists")}function X(){m(ce,"main")}async function de(z){const fe=a().track;if(fe)try{const ge=z.replace(/"/g,'\\"'),He=fe.file.replace(/"/g,'\\"');await Ze.send(`playlistadd "${ge}" "${He}"`),Ue(`Added to "${z}"`,"success"),Yt()}catch(ge){console.error(ge),Ue("Failed to add","error")}}ee(()=>a(),()=>{a().isOpen&&m(ce,"main")}),ee(()=>(a(),r(H),Ts),()=>{a().isOpen?!r(H)&&typeof history<"u"&&(history.pushState({contextMenuOpen:!0},""),m(H,!0)):r(H)&&typeof history<"u"&&(Ts.set(!0),history.back(),m(H,!1))}),ee(()=>(a(),s()),()=>{m(o,a().track&&s().has(a().track.file))}),ee(()=>a(),()=>{m(u,a().track&&(String(a().track.file).includes("http")||String(a().track.file).includes("://")))}),ee(()=>a(),()=>{m(d,a().track&&(a().track.isYandex||a().track.service==="yandex"))}),ee(()=>a(),()=>{m(v,a().context?.type==="playlist")}),ee(()=>a(),()=>{m(p,a().context?.type==="queue")}),ee(()=>a(),()=>{m(f,a().context?.type==="playlist-card")}),ee(()=>a(),()=>{m(h,a().context?.source==="miniplayer")}),ee(()=>(a(),r(ne),r(U),r(M),r(h),r(w)),()=>{m(E,(()=>{if(!a().isOpen)return"";const z=a().triggerRect,fe=a().x,ge=a().y,He=r(ne)||220,D=r(U)||320;if(r(M)<=768&&r(h)&&z)return`
        position: fixed;Â 
        bottom: ${r(w)-z.top}px;Â 
        left: 50%;Â 
        transform: translateX(-50%);Â 
        margin: 0;Â 
        transform-origin: bottom center;
      `;let N=0,W=0,K="top left";if(z){const we=z.left+z.width/2,De=z.top+z.height/2,S=we>r(M)/2,I=De>r(w)/2;S?(N=z.right-He,K=I?"bottom right":"top right"):(N=z.left,K=I?"bottom left":"top left"),I?W=z.top-D:W=z.bottom}else N=fe,W=ge,N+He>r(M)&&(N=r(M)-He-10),W+D>r(w)&&(W=r(w)-D-10);const ye=8;return N<ye&&(N=ye),N+He>r(M)-ye&&(N=r(M)-He-ye),W<ye&&(W=ye),W+D>r(w)-ye&&(W=r(w)-D-ye),`position: fixed; top: ${W}px; left: ${N}px; margin: 0; transform-origin: ${K};`})())}),Gt(),It();var me=it();A("popstate",qa,_e);var pe=Oe(me);{var Ae=z=>{var fe=i0(),ge=c(fe),He=c(ge),D=c(He);{var N=S=>{var I=Qf(),Z=Oe(I),Te=c(Z),C=c(Te);G(C,()=>(R(y),_(()=>y.BACK))),A("click",Z,X),b(S,I)},W=S=>{var I=it(),Z=Oe(I);{var Te=Y=>{var ve=Xf(),Ce=c(ve),qe=c(Ce);oe(()=>ae(qe,(a(),_(()=>a().context.playlist.name)))),b(Y,ve)},C=Y=>{var ve=Kf(),Ce=c(ve),qe=c(Ce),Se=g(Ce,2),Re=c(Se);oe(()=>{ae(qe,(a(),_(()=>a().track.title))),ae(Re,(a(),_(()=>a().track.artist)))}),b(Y,ve)};P(Z,Y=>{r(f)?Y(Te):Y(C,!1)},!0)}b(S,I)};P(D,S=>{r(ce)==="playlists"?S(N):S(W,!1)})}var K=g(He,2),ye=c(K);{var we=S=>{var I=Jf(),Z=Oe(I);kt(Z,1,n,Ot,(Y,ve)=>{var Ce=it(),qe=Oe(Ce);{var Se=Re=>{var Fe=Gf(),se=c(Fe),te=c(se);G(te,()=>(R(y),_(()=>y.PLAYLISTS)));var Q=g(se,2),$e=c(Q);oe(()=>ae($e,(r(ve),_(()=>r(ve).name)))),A("click",Fe,()=>de(r(ve).name)),b(Re,Fe)};P(qe,Re=>{r(ve),_(()=>r(ve).name!=="Favorites")&&Re(Se)})}b(Y,Ce)});var Te=g(Z,2);{var C=Y=>{var ve=Zf();b(Y,ve)};P(Te,Y=>{n(),_(()=>n().filter(ve=>ve.name!=="Favorites").length===0)&&Y(C)})}b(S,I)},De=S=>{var I=it(),Z=Oe(I);{var Te=Y=>{var ve=e0(),Ce=Oe(ve),qe=c(Ce),Se=c(qe);G(Se,()=>(R(y),_(()=>y.PLAY)));var Re=g(Ce,4),Fe=c(Re),se=c(Fe);G(se,()=>(R(y),_(()=>y.EDIT)));var te=g(Re,2),Q=c(te),$e=c(Q);G($e,()=>(R(y),_(()=>y.REMOVE))),A("click",Ce,V),A("click",Re,be),A("click",te,q),b(Y,ve)},C=Y=>{var ve=n0(),Ce=Oe(ve),qe=c(Ce),Se=c(qe);G(Se,()=>(R(y),_(()=>y.NEXT)));var Re=g(Ce,2),Fe=c(Re),se=c(Fe);G(se,()=>(R(y),_(()=>y.MENU)));var te=g(Re,2),Q=c(te),$e=c(Q);G($e,()=>(R(y),_(()=>y.ADD_TO_PLAYLIST||y.ADD)));var ke=g(te,2);{var tt=ze=>{var Qe=t0(),We=g(Oe(Qe),2),Xe=c(We),at=c(Xe);G(at,()=>(R(y),_(()=>y.RADIO))),A("click",We,O),b(ze,Qe)};P(ke,ze=>{r(d)&&ze(tt)})}var le=g(ke,2);{var T=ze=>{var Qe=a0(),We=Oe(Qe),Xe=c(We),at=c(Xe);G(at,()=>(R(y),_(()=>y.ALBUM_LINK||y.ALBUMS)));var ot=g(We,2),ut=c(ot),vt=c(ut);G(vt,()=>(R(y),_(()=>y.ARTIST_LINK||y.ARTISTS))),A("click",We,j),A("click",ot,L),b(ze,Qe)};P(le,ze=>{!r(u)&&!r(d)&&ze(T)})}var J=g(le,2),ie=c(J);let Ie;var je=c(ie);G(je,()=>(r(o),R(y),_(()=>r(o)?y.HEART_FILLED:y.HEART)));var Be=g(ie,2),Ke=c(Be),Ve=g(J,2);{var Ye=ze=>{var Qe=r0(),We=g(Oe(Qe),2),Xe=c(We),at=c(Xe);G(at,()=>(R(y),_(()=>y.REMOVE))),A("click",We,F),b(ze,Qe)};P(Ve,ze=>{r(v)&&ze(Ye)})}var Le=g(Ve,2);{var Ne=ze=>{var Qe=s0(),We=g(Oe(Qe),2),Xe=c(We),at=c(Xe);G(at,()=>(R(y),_(()=>y.REMOVE))),A("click",We,ue),b(ze,Qe)};P(Le,ze=>{r(p)&&ze(Ne)})}oe(()=>{Ie=rt(ie,1,"icon svelte-l8h85k",null,Ie,{liked:r(o)}),ae(Ke,r(o)?"Unlike":"Like")}),A("click",Ce,B),A("click",Re,xe),A("click",te,Me),A("click",J,re),b(Y,ve)};P(Z,Y=>{r(f)?Y(Te):Y(C,!1)},!0)}b(S,I)};P(ye,S=>{r(ce)==="playlists"?S(we):S(De,!1)})}ja(ge,S=>m(x,S),()=>r(x)),oe(()=>ft(ge,r(E))),ri(ge,"clientHeight",S=>m(U,S)),ri(ge,"clientWidth",S=>m(ne,S)),mt(3,ge,()=>Rn,()=>({start:.95,duration:100})),A("click",ge,ta(function(S){Zr.call(this,t,S)})),A("click",fe,he),mt(3,fe,()=>Et,()=>({duration:100})),b(z,fe)};P(pe,z=>{a(),_(()=>a().isOpen)&&z(Ae)})}ni("innerWidth",z=>m(M,z)),ni("innerHeight",z=>m(w,z)),b(e,me),Ct(),l()}var l0=k('<p class="modal-message svelte-1bxxaoh"> </p>'),c0=k('<div class="input-wrapper svelte-1bxxaoh"><input type="text" autoFocus/></div>'),d0=k('<span class="check svelte-1bxxaoh">â</span>'),v0=k("<button> <!></button>"),u0=k('<div class="select-list svelte-1bxxaoh"></div>'),f0=k('<button class="btn cancel svelte-1bxxaoh"> </button>'),h0=k('<div class="modal-actions svelte-1bxxaoh"><!> <button class="btn confirm svelte-1bxxaoh"> </button></div>'),p0=k('<div class="backdrop svelte-1bxxaoh"><div class="modal-card svelte-1bxxaoh"><div class="modal-header svelte-1bxxaoh"><span class="modal-title svelte-1bxxaoh"> </span></div> <div class="modal-body svelte-1bxxaoh"><!> <!></div> <!></div></div>');function g0(e,t){At(t,!1);const a=()=>Ee(Ms,"$modal",s),[s,n]=qt();let i=$(!1),l=$();function o(){if(a().type==="prompt"){const M=a().inputValue?a().inputValue.trim():"";if(M.length===0){d();return}a().onConfirm&&a().onConfirm(M)}else a().onConfirm&&a().onConfirm();ps()}function u(M){a().onConfirm&&a().onConfirm(M),ps()}function d(){m(i,!0),r(l)&&r(l).focus(),setTimeout(()=>{m(i,!1)},400)}function v(){ps()}function p(M){M.key==="Enter"&&a().type!=="select"&&o(),r(i)&&m(i,!1)}ee(()=>a(),()=>{a().isOpen||m(i,!1)}),Gt(),It();var f=it(),h=Oe(f);{var E=M=>{var w=p0(),x=c(w),U=c(x),ne=c(U),ce=c(ne),H=g(U,2),_e=c(H);{var he=F=>{var ue=l0(),V=c(ue);oe(()=>ae(V,(a(),_(()=>a().message)))),b(F,ue)};P(_e,F=>{a(),_(()=>a().message)&&F(he)})}var B=g(_e,2);{var xe=F=>{var ue=c0(),V=c(ue);let be;ja(V,q=>m(l,q),()=>r(l)),oe(()=>{be=rt(V,1,"modal-input svelte-1bxxaoh",null,be,{"shake-error":r(i)}),Ft(V,"placeholder",(a(),_(()=>a().placeholder)))}),sr(V,()=>a().inputValue,q=>vc(Ms,_(a).inputValue=q,_(a))),A("keydown",V,p),b(F,ue)},re=F=>{var ue=it(),V=Oe(ue);{var be=q=>{var O=u0();kt(O,5,()=>(a(),_(()=>a().options)),Ot,(Me,X)=>{var de=v0();let me;var pe=c(de),Ae=g(pe);{var z=fe=>{var ge=d0();b(fe,ge)};P(Ae,fe=>{r(X),a(),_(()=>r(X).value===a().inputValue)&&fe(z)})}oe(()=>{me=rt(de,1,"select-item svelte-1bxxaoh",null,me,{active:r(X).value===a().inputValue}),ae(pe,`${r(X),_(()=>r(X).label)??""} `)}),A("click",de,()=>u(r(X).value)),b(Me,de)}),b(q,O)};P(V,q=>{a(),_(()=>a().type==="select")&&q(be)},!0)}b(F,ue)};P(B,F=>{a(),_(()=>a().type==="prompt")?F(xe):F(re,!1)})}var j=g(H,2);{var L=F=>{var ue=h0(),V=c(ue);{var be=Me=>{var X=f0(),de=c(X);oe(()=>ae(de,(a(),_(()=>a().cancelLabel)))),A("click",X,function(...me){ps?.apply(this,me)}),b(Me,X)};P(V,Me=>{a(),_(()=>a().type==="confirm"||a().type==="prompt")&&Me(be)})}var q=g(V,2),O=c(q);oe(()=>ae(O,(a(),_(()=>a().confirmLabel)))),A("click",q,o),b(F,ue)};P(j,F=>{a(),_(()=>a().type!=="select")&&F(L)})}oe(()=>ae(ce,(a(),_(()=>a().title)))),mt(3,x,()=>Rn,()=>({start:.95,duration:200})),A("click",x,ta(function(F){Zr.call(this,t,F)})),A("click",w,v),mt(3,w,()=>Et,()=>({duration:150})),b(M,w)};P(h,M=>{a(),_(()=>a().isOpen)&&M(E)})}b(e,f),Ct(),n()}const Ti={init(){this.handleHashChange(),window.addEventListener("hashchange",()=>this.handleHashChange())},handleHashChange(){let e=window.location.hash.slice(1);for(;e.startsWith("/");)e=e.slice(1);if(!e){(et(pt).length>1||et(Pt)==="search")&&(this.setRootTab("artists"),window.location.hash="/artists");return}const t=e.split("/").map(decodeURIComponent),a=t[0];let s=cd(),n=a;switch(a==="artist"&&(n="albums_by_artist"),a==="album"&&(n="tracks_by_album"),a==="playlist"&&(n="details"),a==="favorites"&&(n="details"),s||(a==="album"&&t.length>=2?s=t.length>=3?{artist:t[1],name:t[2]}:{name:t[1]}:a==="artist"&&t.length>=2?s={name:t[1]}:a==="playlist"&&t.length>=2?s={name:t[1],displayName:t[1]}:a==="favorites"?s={name:"Favorites"}:a==="yandex_playlist"&&t.length>=3?s={uid:t[1],kind:t[2],title:"Playlist"}:a==="yandex_album_details"&&t.length>=2?s={id:t[1],title:"Album"}:a==="yandex_artist_details"&&t.length>=2?s={id:t[1],title:"Artist"}:a==="yandex_search"&&t.length>=2?s={query:t[1]}:t.length>=2&&(s={name:t[1],displayName:t[1]})),console.log(`[Router] Navigating: ${a} -> ${n}`,s),!0){case a.startsWith("yandex"):Pt.set("yandex");break;case a==="queue":this.setRootTab("queue");return;case a==="radio":this.setRootTab("radio");return;case a==="playlists":case a==="playlist":case n==="details":if(s&&s.name==="Favorites"?Pt.set("favorites"):Pt.set("playlists"),a==="playlists"){this.setRootTab("playlists");return}break;case a==="settings":this.setRootTab("settings");return;case a==="favorites":Pt.set("favorites");break;case a==="search":Pt.set("search"),t[1]&&Wr.set(t[1]),pt.set([{view:"root"}]);return;case a==="artists":case a==="artist":if(Pt.set("artists"),a==="artists"){this.setRootTab("artists");return}break;case a==="albums":case a==="album":if(Pt.set("albums"),a==="albums"){this.setRootTab("albums");return}break}if(a==="yandex")et(pt).length>1?et(pt)[0].view!=="root"&&pt.set([{view:"root"}]):pt.set([{view:"root"}]);else{const i=et(pt),l=i[i.length-1],o=l.view===n;let u=!1;if(s&&l.data?s.name===l.data.name&&s.uid===l.data.uid&&(u=!0):!s&&!l.data&&(u=!0),o&&u)return;s&&pt.set([{view:"root"},{view:n,data:s}])}},setRootTab(e){Pt.set(e),pt.set([{view:"root"}])},updateUrl(e,t){let a="";if(e==="root"){const s=et(Pt);if(s==="search"){const n=et(Wr);a=n?`search/${encodeURIComponent(n)}`:"search"}else a=s}else if(e==="details"){const s=t.name||t;a=s==="Favorites"?"favorites":`playlist/${encodeURIComponent(s)}`}else if(e==="albums_by_artist"){const s=t.name||t;a=`artist/${encodeURIComponent(s)}`}else if(e==="tracks_by_album"){const s=t.name||t,n=t.artist;n?a=`album/${encodeURIComponent(n)}/${encodeURIComponent(s)}`:a=`album/${encodeURIComponent(s)}`}else e==="queue"?a="queue":e==="yandex_playlist"?a=`yandex_playlist/${t.uid}/${t.kind}`:e==="yandex_album_details"?a=`yandex_album_details/${t.id}`:e==="yandex_artist_details"?a=`yandex_artist_details/${t.id}`:e==="yandex_search"&&(a=`yandex_search/${encodeURIComponent(t.query)}`);if(a){const s=`#/${a}`;(e==="yandex_search"||e==="search")&&decodeURIComponent(window.location.hash)!==decodeURIComponent(s)?window.history.replaceState(null,"",s):decodeURIComponent(window.location.hash)!==decodeURIComponent(s)&&(window.location.hash=`/${a}`)}}};var _0=k("<!> <!> <!>",1);function m0(e,t){At(t,!1),Da(async()=>{Ti.init(),ld((l,o)=>{Ti.updateUrl(l,o)}),To(),Aa.loadRadioStations(),et(as)&&Aa.checkYandexAuth();try{const l=await Ua.getArtists();l.length>0?console.log(`[App] Database ready. Loaded ${l.length} artists from cache.`):(console.log("[App] Database empty. Starting initial sync..."),Aa.syncLibrary())}catch(l){console.error("[App] DB Check failed:",l),Ue("Local DB error. Please update library manually.","error")}}),It();var a=_0(),s=Oe(a);Wf(s,{});var n=g(s,2);o0(n,{});var i=g(n,2);g0(i,{}),b(e,a),Ct()}Hl(m0,{target:document.getElementById("app")});
