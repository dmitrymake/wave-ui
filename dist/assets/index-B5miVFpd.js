(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();const Xn=!1;var Ga=Array.isArray,So=Array.prototype.indexOf,Tn=Array.from,mi=Object.defineProperty,_a=Object.getOwnPropertyDescriptor,bi=Object.getOwnPropertyDescriptors,Eo=Object.prototype,To=Array.prototype,gs=Object.getPrototypeOf,Ns=Object.isExtensible;function $o(e){return typeof e=="function"}const Vt=()=>{};function Mo(e){return e()}function gn(e){for(var t=0;t<e.length;t++)e[t]()}function yi(){var e,t,r=new Promise((a,s)=>{e=a,t=s});return{promise:r,resolve:e,reject:t}}const Mt=2,_s=4,$n=8,Ao=1<<24,pr=16,Mr=32,ia=64,Mn=128,sr=512,Tt=1024,Ft=2048,ir=4096,Xt=8192,xr=16384,An=32768,ea=65536,Os=1<<17,wi=1<<18,Ea=1<<19,ki=1<<20,yr=1<<25,ta=32768,Gn=1<<21,ms=1<<22,jr=1<<23,Sr=Symbol("$state"),Po=Symbol("legacy props"),Co=Symbol(""),pa=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function bs(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Lo(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function zo(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Ro(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function jo(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Io(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function No(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function Oo(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Do(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Fo(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function qo(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Bo=1,Uo=2,xi=4,Ho=8,Yo=16,Vo=1,Wo=2,Qo=4,Xo=8,Go=16,Ko=1,Zo=2,Jo=4,el=1,tl=2,Ct=Symbol(),rl="http://www.w3.org/1999/xhtml";function al(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function nl(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Si(e){return e===this.v}function ys(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function Ei(e){return!ys(e,this.v)}let Ta=!1,sl=!1;function il(){Ta=!0}let it=null;function ba(e){it=e}function kt(e,t=!1,r){it={p:it,i:!1,c:null,e:null,s:e,x:null,l:Ta&&!t?{s:null,u:null,$:[]}:null}}function xt(e){var t=it,r=t.e;if(r!==null){t.e=null;for(var a of r)qi(a)}return t.i=!0,it=t.p,{}}function Ka(){return!Ta||it!==null&&it.l===null}let Hr=[];function Ti(){var e=Hr;Hr=[],gn(e)}function oa(e){if(Hr.length===0&&!ja){var t=Hr;queueMicrotask(()=>{t===Hr&&Ti()})}Hr.push(e)}function ol(){for(;Hr.length>0;)Ti()}function $i(e){var t=at;if(t===null)return et.f|=jr,e;if((t.f&An)===0){if((t.f&Mn)===0)throw e;t.b.error(e)}else ya(e,t)}function ya(e,t){for(;t!==null;){if((t.f&Mn)!==0)try{t.b.error(e);return}catch(r){e=r}t=t.parent}throw e}const an=new Set;let tt=null,Ra=null,er=null,Zt=[],Pn=null,Kn=!1,ja=!1;class vr{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#r=0;#a=0;#l=null;#s=new Set;#n=new Set;skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#a>0}process(t){Zt=[],Ra=null,this.apply();var r={parent:null,effect:null,effects:[],render_effects:[]};for(const a of t)this.#i(a,r);this.is_fork||this.#v(),this.is_deferred()?(this.#o(r.effects),this.#o(r.render_effects)):(Ra=this,tt=null,Ds(r.render_effects),Ds(r.effects),Ra=null,this.#l?.resolve()),er=null}#i(t,r){t.f^=Tt;for(var a=t.first;a!==null;){var s=a.f,i=(s&(Mr|ia))!==0,o=i&&(s&Tt)!==0,l=o||(s&Xt)!==0||this.skipped_effects.has(a);if((a.f&Mn)!==0&&a.b?.is_pending()&&(r={parent:r,effect:a,effects:[],render_effects:[]}),!l&&a.fn!==null){i?a.f^=Tt:(s&_s)!==0?r.effects.push(a):Ma(a)&&((a.f&pr)!==0&&this.#s.add(a),wa(a));var d=a.first;if(d!==null){a=d;continue}}var c=a.parent;for(a=a.next;a===null&&c!==null;)c===r.effect&&(this.#o(r.effects),this.#o(r.render_effects),r=r.parent),a=c.next,c=c.parent}}#o(t){for(const r of t)(r.f&Ft)!==0?this.#s.add(r):(r.f&ir)!==0&&this.#n.add(r),this.#c(r.deps),$t(r,Tt)}#c(t){if(t!==null)for(const r of t)(r.f&Mt)===0||(r.f&ta)===0||(r.f^=ta,this.#c(r.deps))}capture(t,r){this.previous.has(t)||this.previous.set(t,r),(t.f&jr)===0&&(this.current.set(t,t.v),er?.set(t,t.v))}activate(){tt=this,this.apply()}deactivate(){tt===this&&(tt=null,er=null)}flush(){if(this.activate(),Zt.length>0){if(Mi(),tt!==null&&tt!==this)return}else this.#r===0&&this.process([]);this.deactivate()}discard(){for(const t of this.#t)t(this);this.#t.clear()}#v(){if(this.#a===0){for(const t of this.#e)t();this.#e.clear()}this.#r===0&&this.#d()}#d(){if(an.size>1){this.previous.clear();var t=er,r=!0,a={parent:null,effect:null,effects:[],render_effects:[]};for(const i of an){if(i===this){r=!1;continue}const o=[];for(const[d,c]of this.current){if(i.current.has(d))if(r&&c!==i.current.get(d))i.current.set(d,c);else continue;o.push(d)}if(o.length===0)continue;const l=[...i.current.keys()].filter(d=>!this.current.has(d));if(l.length>0){var s=Zt;Zt=[];const d=new Set,c=new Map;for(const u of o)Ai(u,l,d,c);if(Zt.length>0){tt=i,i.apply();for(const u of Zt)i.#i(u,a);i.deactivate()}Zt=s}}tt=null,er=t}this.committed=!0,an.delete(this)}increment(t){this.#r+=1,t&&(this.#a+=1)}decrement(t){this.#r-=1,t&&(this.#a-=1),this.revive()}revive(){for(const t of this.#s)this.#n.delete(t),$t(t,Ft),ra(t);for(const t of this.#n)$t(t,ir),ra(t);this.flush()}oncommit(t){this.#e.add(t)}ondiscard(t){this.#t.add(t)}settled(){return(this.#l??=yi()).promise}static ensure(){if(tt===null){const t=tt=new vr;an.add(tt),ja||vr.enqueue(()=>{tt===t&&t.flush()})}return tt}static enqueue(t){oa(t)}apply(){}}function ll(e){var t=ja;ja=!0;try{for(var r;;){if(ol(),Zt.length===0&&(tt?.flush(),Zt.length===0))return Pn=null,r;Mi()}}finally{ja=t}}function Mi(){var e=Qr;Kn=!0;var t=null;try{var r=0;for(mn(!0);Zt.length>0;){var a=vr.ensure();if(r++>1e3){var s,i;cl()}a.process(Zt),Ir.clear()}}finally{Kn=!1,mn(e),Pn=null}}function cl(){try{Io()}catch(e){ya(e,Pn)}}let mr=null;function Ds(e){var t=e.length;if(t!==0){for(var r=0;r<t;){var a=e[r++];if((a.f&(xr|Xt))===0&&Ma(a)&&(mr=new Set,wa(a),a.deps===null&&a.first===null&&a.nodes===null&&(a.teardown===null&&a.ac===null?Yi(a):a.fn=null),mr?.size>0)){Ir.clear();for(const s of mr){if((s.f&(xr|Xt))!==0)continue;const i=[s];let o=s.parent;for(;o!==null;)mr.has(o)&&(mr.delete(o),i.push(o)),o=o.parent;for(let l=i.length-1;l>=0;l--){const d=i[l];(d.f&(xr|Xt))===0&&wa(d)}}mr.clear()}}mr=null}}function Ai(e,t,r,a){if(!r.has(e)&&(r.add(e),e.reactions!==null))for(const s of e.reactions){const i=s.f;(i&Mt)!==0?Ai(s,t,r,a):(i&(ms|pr))!==0&&(i&Ft)===0&&Pi(s,t,a)&&($t(s,Ft),ra(s))}}function Pi(e,t,r){const a=r.get(e);if(a!==void 0)return a;if(e.deps!==null)for(const s of e.deps){if(t.includes(s))return!0;if((s.f&Mt)!==0&&Pi(s,t,r))return r.set(s,!0),!0}return r.set(e,!1),!1}function ra(e){for(var t=Pn=e;t.parent!==null;){t=t.parent;var r=t.f;if(Kn&&t===at&&(r&pr)!==0&&(r&wi)===0)return;if((r&(ia|Mr))!==0){if((r&Tt)===0)return;t.f^=Tt}}Zt.push(t)}function vl(e){let t=0,r=aa(0),a;return()=>{qa()&&(n(r),$a(()=>(t===0&&(a=b(()=>e(()=>Ia(r)))),t+=1,()=>{oa(()=>{t-=1,t===0&&(a?.(),a=void 0,Ia(r))})})))}}var dl=ea|Ea|Mn;function ul(e,t,r){new fl(e,t,r)}class fl{parent;#e=!1;#t;#r=null;#a;#l;#s;#n=null;#i=null;#o=null;#c=null;#v=null;#d=0;#u=0;#h=!1;#f=null;#b=vl(()=>(this.#f=aa(this.#d),()=>{this.#f=null}));constructor(t,r,a){this.#t=t,this.#a=r,this.#l=a,this.parent=at.b,this.#e=!!this.#a.pending,this.#s=ks(()=>{at.b=this;{var s=this.#_();try{this.#n=Jt(()=>a(s))}catch(i){this.error(i)}this.#u>0?this.#g():this.#e=!1}return()=>{this.#v?.remove()}},dl)}#y(){try{this.#n=Jt(()=>this.#l(this.#t))}catch(t){this.error(t)}this.#e=!1}#w(){const t=this.#a.pending;t&&(this.#i=Jt(()=>t(this.#t)),vr.enqueue(()=>{var r=this.#_();this.#n=this.#p(()=>(vr.ensure(),Jt(()=>this.#l(r)))),this.#u>0?this.#g():(Wr(this.#i,()=>{this.#i=null}),this.#e=!1)}))}#_(){var t=this.#t;return this.#e&&(this.#v=Er(),this.#t.before(this.#v),t=this.#v),t}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#a.pending}#p(t){var r=at,a=et,s=it;hr(this.#s),Ot(this.#s),ba(this.#s.ctx);try{return t()}catch(i){return $i(i),null}finally{hr(r),Ot(a),ba(s)}}#g(){const t=this.#a.pending;this.#n!==null&&(this.#c=document.createDocumentFragment(),this.#c.append(this.#v),Qi(this.#n,this.#c)),this.#i===null&&(this.#i=Jt(()=>t(this.#t)))}#m(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#m(t);return}this.#u+=t,this.#u===0&&(this.#e=!1,this.#i&&Wr(this.#i,()=>{this.#i=null}),this.#c&&(this.#t.before(this.#c),this.#c=null))}update_pending_count(t){this.#m(t),this.#d+=t,this.#f&&na(this.#f,this.#d)}get_effect_pending(){return this.#b(),n(this.#f)}error(t){var r=this.#a.onerror;let a=this.#a.failed;if(this.#h||!r&&!a)throw t;this.#n&&(Dt(this.#n),this.#n=null),this.#i&&(Dt(this.#i),this.#i=null),this.#o&&(Dt(this.#o),this.#o=null);var s=!1,i=!1;const o=()=>{if(s){nl();return}s=!0,i&&qo(),vr.ensure(),this.#d=0,this.#o!==null&&Wr(this.#o,()=>{this.#o=null}),this.#e=this.has_pending_snippet(),this.#n=this.#p(()=>(this.#h=!1,Jt(()=>this.#l(this.#t)))),this.#u>0?this.#g():this.#e=!1};var l=et;try{Ot(null),i=!0,r?.(t,o),i=!1}catch(d){ya(d,this.#s&&this.#s.parent)}finally{Ot(l)}a&&oa(()=>{this.#o=this.#p(()=>{vr.ensure(),this.#h=!0;try{return Jt(()=>{a(this.#t,()=>t,()=>o)})}catch(d){return ya(d,this.#s.parent),null}finally{this.#h=!1}})})}}function hl(e,t,r,a){const s=Ka()?Za:ct;if(r.length===0&&e.length===0){a(t.map(s));return}var i=tt,o=at,l=pl();function d(){Promise.all(r.map(c=>gl(c))).then(c=>{l();try{a([...t.map(s),...c])}catch(u){(o.f&xr)===0&&ya(u,o)}i?.deactivate(),_n()}).catch(c=>{ya(c,o)})}e.length>0?Promise.all(e).then(()=>{l();try{return d()}finally{i?.deactivate(),_n()}}):d()}function pl(){var e=at,t=et,r=it,a=tt;return function(i=!0){hr(e),Ot(t),ba(r),i&&a?.activate()}}function _n(){hr(null),Ot(null),ba(null)}function Za(e){var t=Mt|Ft,r=et!==null&&(et.f&Mt)!==0?et:null;return at!==null&&(at.f|=Ea),{ctx:it,deps:null,effects:null,equals:Si,f:t,fn:e,reactions:null,rv:0,v:Ct,wv:0,parent:r??at,ac:null}}function gl(e,t){let r=at;r===null&&Lo();var a=r.b,s=void 0,i=aa(Ct),o=!et,l=new Map;return $l(()=>{var d=yi();s=d.promise;try{Promise.resolve(e()).then(d.resolve,d.reject).then(()=>{c===tt&&c.committed&&c.deactivate(),_n()})}catch(f){d.reject(f),_n()}var c=tt;if(o){var u=!a.is_pending();a.update_pending_count(1),c.increment(u),l.get(c)?.reject(pa),l.delete(c),l.set(c,d)}const h=(f,p=void 0)=>{if(c.activate(),p)p!==pa&&(i.f|=jr,na(i,p));else{(i.f&jr)!==0&&(i.f^=jr),na(i,f);for(const[x,E]of l){if(l.delete(x),x===c)break;E.reject(pa)}}o&&(a.update_pending_count(-1),c.decrement(u))};d.promise.then(h,f=>h(null,f||"unknown"))}),en(()=>{for(const d of l.values())d.reject(pa)}),new Promise(d=>{function c(u){function h(){u===s?d(i):c(s)}u.then(h,h)}c(s)})}function Pa(e){const t=Za(e);return Xi(t),t}function ct(e){const t=Za(e);return t.equals=Ei,t}function Ci(e){var t=e.effects;if(t!==null){e.effects=null;for(var r=0;r<t.length;r+=1)Dt(t[r])}}function _l(e){for(var t=e.parent;t!==null;){if((t.f&Mt)===0)return(t.f&xr)===0?t:null;t=t.parent}return null}function ws(e){var t,r=at;hr(_l(e));try{e.f&=~ta,Ci(e),t=Ji(e)}finally{hr(r)}return t}function Li(e){var t=ws(e);if(e.equals(t)||(tt?.is_fork||(e.v=t),e.wv=Ki()),!ca)if(er!==null)(qa()||tt?.is_fork)&&er.set(e,t);else{var r=(e.f&sr)===0?ir:Tt;$t(e,r)}}let Zn=new Set;const Ir=new Map;let zi=!1;function aa(e,t){var r={f:0,v:e,reactions:null,equals:Si,rv:0,wv:0};return r}function Ar(e,t){const r=aa(e);return Xi(r),r}function T(e,t=!1,r=!0){const a=aa(e);return t||(a.equals=Ei),Ta&&r&&it!==null&&it.l!==null&&(it.l.s??=[]).push(a),a}function nn(e,t){return g(e,b(()=>n(e))),t}function g(e,t,r=!1){et!==null&&(!dr||(et.f&Os)!==0)&&Ka()&&(et.f&(Mt|pr|ms|Os))!==0&&!Tr?.includes(e)&&Fo();let a=r?ga(t):t;return na(e,a)}function na(e,t){if(!e.equals(t)){var r=e.v;ca?Ir.set(e,t):Ir.set(e,r),e.v=t;var a=vr.ensure();a.capture(e,r),(e.f&Mt)!==0&&((e.f&Ft)!==0&&ws(e),$t(e,(e.f&sr)!==0?Tt:ir)),e.wv=Ki(),Ri(e,Ft),Ka()&&at!==null&&(at.f&Tt)!==0&&(at.f&(Mr|ia))===0&&(Kt===null?Cl([e]):Kt.push(e)),!a.is_fork&&Zn.size>0&&!zi&&ml()}return t}function ml(){zi=!1;var e=Qr;mn(!0);const t=Array.from(Zn);try{for(const r of t)(r.f&Tt)!==0&&$t(r,ir),Ma(r)&&wa(r)}finally{mn(e)}Zn.clear()}function Ia(e){g(e,e.v+1)}function Ri(e,t){var r=e.reactions;if(r!==null)for(var a=Ka(),s=r.length,i=0;i<s;i++){var o=r[i],l=o.f;if(!(!a&&o===at)){var d=(l&Ft)===0;if(d&&$t(o,t),(l&Mt)!==0){var c=o;er?.delete(c),(l&ta)===0&&(l&sr&&(o.f|=ta),Ri(c,ir))}else d&&((l&pr)!==0&&mr!==null&&mr.add(o),ra(o))}}}function ga(e){if(typeof e!="object"||e===null||Sr in e)return e;const t=gs(e);if(t!==Eo&&t!==To)return e;var r=new Map,a=Ga(e),s=Ar(0),i=Xr,o=l=>{if(Xr===i)return l();var d=et,c=Xr;Ot(null),Us(i);var u=l();return Ot(d),Us(c),u};return a&&r.set("length",Ar(e.length)),new Proxy(e,{defineProperty(l,d,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&Oo();var u=r.get(d);return u===void 0?u=o(()=>{var h=Ar(c.value);return r.set(d,h),h}):g(u,c.value,!0),!0},deleteProperty(l,d){var c=r.get(d);if(c===void 0){if(d in l){const u=o(()=>Ar(Ct));r.set(d,u),Ia(s)}}else g(c,Ct),Ia(s);return!0},get(l,d,c){if(d===Sr)return e;var u=r.get(d),h=d in l;if(u===void 0&&(!h||_a(l,d)?.writable)&&(u=o(()=>{var p=ga(h?l[d]:Ct),x=Ar(p);return x}),r.set(d,u)),u!==void 0){var f=n(u);return f===Ct?void 0:f}return Reflect.get(l,d,c)},getOwnPropertyDescriptor(l,d){var c=Reflect.getOwnPropertyDescriptor(l,d);if(c&&"value"in c){var u=r.get(d);u&&(c.value=n(u))}else if(c===void 0){var h=r.get(d),f=h?.v;if(h!==void 0&&f!==Ct)return{enumerable:!0,configurable:!0,value:f,writable:!0}}return c},has(l,d){if(d===Sr)return!0;var c=r.get(d),u=c!==void 0&&c.v!==Ct||Reflect.has(l,d);if(c!==void 0||at!==null&&(!u||_a(l,d)?.writable)){c===void 0&&(c=o(()=>{var f=u?ga(l[d]):Ct,p=Ar(f);return p}),r.set(d,c));var h=n(c);if(h===Ct)return!1}return u},set(l,d,c,u){var h=r.get(d),f=d in l;if(a&&d==="length")for(var p=c;p<h.v;p+=1){var x=r.get(p+"");x!==void 0?g(x,Ct):p in l&&(x=o(()=>Ar(Ct)),r.set(p+"",x))}if(h===void 0)(!f||_a(l,d)?.writable)&&(h=o(()=>Ar(void 0)),g(h,ga(c)),r.set(d,h));else{f=h.v!==Ct;var E=o(()=>ga(c));g(h,E)}var k=Reflect.getOwnPropertyDescriptor(l,d);if(k?.set&&k.set.call(u,c),!f){if(a&&typeof d=="string"){var w=r.get("length"),F=Number(d);Number.isInteger(F)&&F>=w.v&&g(w,F+1)}Ia(s)}return!0},ownKeys(l){n(s);var d=Reflect.ownKeys(l).filter(h=>{var f=r.get(h);return f===void 0||f.v!==Ct});for(var[c,u]of r)u.v!==Ct&&!(c in l)&&d.push(c);return d},setPrototypeOf(){Do()}})}function Fs(e){try{if(e!==null&&typeof e=="object"&&Sr in e)return e[Sr]}catch{}return e}function bl(e,t){return Object.is(Fs(e),Fs(t))}var Cr,ji,Ii,Ni;function yl(){if(Cr===void 0){Cr=window,ji=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,r=Text.prototype;Ii=_a(t,"firstChild").get,Ni=_a(t,"nextSibling").get,Ns(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Ns(r)&&(r.__t=void 0)}}function Er(e=""){return document.createTextNode(e)}function Lr(e){return Ii.call(e)}function Ja(e){return Ni.call(e)}function v(e,t){return Lr(e)}function Pe(e,t=!1){{var r=Lr(e);return r instanceof Comment&&r.data===""?Ja(r):r}}function _(e,t=1,r=!1){let a=e;for(;t--;)a=Ja(a);return a}function wl(e){e.textContent=""}function Oi(){return!1}let qs=!1;function kl(){qs||(qs=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function xl(e,t,r,a=!0){a&&r();for(var s of t)e.addEventListener(s,r);en(()=>{for(var i of t)e.removeEventListener(i,r)})}function la(e){var t=et,r=at;Ot(null),hr(null);try{return e()}finally{Ot(t),hr(r)}}function Di(e,t,r,a=r){e.addEventListener(t,()=>la(r));const s=e.__on_r;s?e.__on_r=()=>{s(),a(!0)}:e.__on_r=()=>a(!0),kl()}function Fi(e){at===null&&(et===null&&jo(),Ro()),ca&&zo()}function Sl(e,t){var r=t.last;r===null?t.last=t.first=e:(r.next=e,e.prev=r,t.last=e)}function gr(e,t,r){var a=at;a!==null&&(a.f&Xt)!==0&&(e|=Xt);var s={ctx:it,deps:null,nodes:null,f:e|Ft|sr,first:null,fn:t,last:null,next:null,parent:a,b:a&&a.b,prev:null,teardown:null,wv:0,ac:null};if(r)try{wa(s),s.f|=An}catch(l){throw Dt(s),l}else t!==null&&ra(s);var i=s;if(r&&i.deps===null&&i.teardown===null&&i.nodes===null&&i.first===i.last&&(i.f&Ea)===0&&(i=i.first,(e&pr)!==0&&(e&ea)!==0&&i!==null&&(i.f|=ea)),i!==null&&(i.parent=a,a!==null&&Sl(i,a),et!==null&&(et.f&Mt)!==0&&(e&ia)===0)){var o=et;(o.effects??=[]).push(i)}return s}function qa(){return et!==null&&!dr}function en(e){const t=gr($n,null,!1);return $t(t,Tt),t.teardown=e,t}function Jn(e){Fi();var t=at.f,r=!et&&(t&Mr)!==0&&(t&An)===0;if(r){var a=it;(a.e??=[]).push(e)}else return qi(e)}function qi(e){return gr(_s|ki,e,!1)}function El(e){return Fi(),gr($n|ki,e,!0)}function Tl(e){vr.ensure();const t=gr(ia|Ea,e,!0);return(r={})=>new Promise(a=>{r.outro?Wr(t,()=>{Dt(t),a(void 0)}):(Dt(t),a(void 0))})}function Nt(e){return gr(_s,e,!1)}function te(e,t){var r=it,a={effect:null,ran:!1,deps:e};r.l.$.push(a),a.effect=$a(()=>{e(),!a.ran&&(a.ran=!0,b(t))})}function Bt(){var e=it;$a(()=>{for(var t of e.l.$){t.deps();var r=t.effect;(r.f&Tt)!==0&&$t(r,ir),Ma(r)&&wa(r),t.ran=!1}})}function $l(e){return gr(ms|Ea,e,!0)}function $a(e,t=0){return gr($n|t,e,!0)}function le(e,t=[],r=[],a=[]){hl(a,t,r,s=>{gr($n,()=>e(...s.map(n)),!0)})}function ks(e,t=0){var r=gr(pr|t,e,!0);return r}function Jt(e){return gr(Mr|Ea,e,!0)}function Bi(e){var t=e.teardown;if(t!==null){const r=ca,a=et;Bs(!0),Ot(null);try{t.call(null)}finally{Bs(r),Ot(a)}}}function Ui(e,t=!1){var r=e.first;for(e.first=e.last=null;r!==null;){const s=r.ac;s!==null&&la(()=>{s.abort(pa)});var a=r.next;(r.f&ia)!==0?r.parent=null:Dt(r,t),r=a}}function Ml(e){for(var t=e.first;t!==null;){var r=t.next;(t.f&Mr)===0&&Dt(t),t=r}}function Dt(e,t=!0){var r=!1;(t||(e.f&wi)!==0)&&e.nodes!==null&&e.nodes.end!==null&&(Hi(e.nodes.start,e.nodes.end),r=!0),Ui(e,t&&!r),bn(e,0),$t(e,xr);var a=e.nodes&&e.nodes.t;if(a!==null)for(const i of a)i.stop();Bi(e);var s=e.parent;s!==null&&s.first!==null&&Yi(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function Hi(e,t){for(;e!==null;){var r=e===t?null:Ja(e);e.remove(),e=r}}function Yi(e){var t=e.parent,r=e.prev,a=e.next;r!==null&&(r.next=a),a!==null&&(a.prev=r),t!==null&&(t.first===e&&(t.first=a),t.last===e&&(t.last=r))}function Wr(e,t,r=!0){var a=[];Vi(e,a,!0);var s=()=>{r&&Dt(e),t&&t()},i=a.length;if(i>0){var o=()=>--i||s();for(var l of a)l.out(o)}else s()}function Vi(e,t,r){if((e.f&Xt)===0){e.f^=Xt;var a=e.nodes&&e.nodes.t;if(a!==null)for(const l of a)(l.is_global||r)&&t.push(l);for(var s=e.first;s!==null;){var i=s.next,o=(s.f&ea)!==0||(s.f&Mr)!==0&&(e.f&pr)!==0;Vi(s,t,o?r:!1),s=i}}}function xs(e){Wi(e,!0)}function Wi(e,t){if((e.f&Xt)!==0){e.f^=Xt,(e.f&Tt)===0&&($t(e,Ft),ra(e));for(var r=e.first;r!==null;){var a=r.next,s=(r.f&ea)!==0||(r.f&Mr)!==0;Wi(r,s?t:!1),r=a}var i=e.nodes&&e.nodes.t;if(i!==null)for(const o of i)(o.is_global||t)&&o.in()}}function Qi(e,t){if(e.nodes)for(var r=e.nodes.start,a=e.nodes.end;r!==null;){var s=r===a?null:Ja(r);t.append(r),r=s}}let ha=null;function Al(e){var t=ha;try{if(ha=new Set,b(e),t!==null)for(var r of ha)t.add(r);return ha}finally{ha=t}}function Pl(e){for(var t of Al(e))na(t,t.v)}let Qr=!1;function mn(e){Qr=e}let ca=!1;function Bs(e){ca=e}let et=null,dr=!1;function Ot(e){et=e}let at=null;function hr(e){at=e}let Tr=null;function Xi(e){et!==null&&(Tr===null?Tr=[e]:Tr.push(e))}let zt=null,Ht=0,Kt=null;function Cl(e){Kt=e}let Gi=1,Ba=0,Xr=Ba;function Us(e){Xr=e}function Ki(){return++Gi}function Ma(e){var t=e.f;if((t&Ft)!==0)return!0;if(t&Mt&&(e.f&=~ta),(t&ir)!==0){var r=e.deps;if(r!==null)for(var a=r.length,s=0;s<a;s++){var i=r[s];if(Ma(i)&&Li(i),i.wv>e.wv)return!0}(t&sr)!==0&&er===null&&$t(e,Tt)}return!1}function Zi(e,t,r=!0){var a=e.reactions;if(a!==null&&!Tr?.includes(e))for(var s=0;s<a.length;s++){var i=a[s];(i.f&Mt)!==0?Zi(i,t,!1):t===i&&(r?$t(i,Ft):(i.f&Tt)!==0&&$t(i,ir),ra(i))}}function Ji(e){var t=zt,r=Ht,a=Kt,s=et,i=Tr,o=it,l=dr,d=Xr,c=e.f;zt=null,Ht=0,Kt=null,et=(c&(Mr|ia))===0?e:null,Tr=null,ba(e.ctx),dr=!1,Xr=++Ba,e.ac!==null&&(la(()=>{e.ac.abort(pa)}),e.ac=null);try{e.f|=Gn;var u=e.fn,h=u(),f=e.deps;if(zt!==null){var p;if(bn(e,Ht),f!==null&&Ht>0)for(f.length=Ht+zt.length,p=0;p<zt.length;p++)f[Ht+p]=zt[p];else e.deps=f=zt;if(qa()&&(e.f&sr)!==0)for(p=Ht;p<f.length;p++)(f[p].reactions??=[]).push(e)}else f!==null&&Ht<f.length&&(bn(e,Ht),f.length=Ht);if(Ka()&&Kt!==null&&!dr&&f!==null&&(e.f&(Mt|ir|Ft))===0)for(p=0;p<Kt.length;p++)Zi(Kt[p],e);return s!==null&&s!==e&&(Ba++,Kt!==null&&(a===null?a=Kt:a.push(...Kt))),(e.f&jr)!==0&&(e.f^=jr),h}catch(x){return $i(x)}finally{e.f^=Gn,zt=t,Ht=r,Kt=a,et=s,Tr=i,ba(o),dr=l,Xr=d}}function Ll(e,t){let r=t.reactions;if(r!==null){var a=So.call(r,e);if(a!==-1){var s=r.length-1;s===0?r=t.reactions=null:(r[a]=r[s],r.pop())}}r===null&&(t.f&Mt)!==0&&(zt===null||!zt.includes(t))&&($t(t,ir),(t.f&sr)!==0&&(t.f^=sr,t.f&=~ta),Ci(t),bn(t,0))}function bn(e,t){var r=e.deps;if(r!==null)for(var a=t;a<r.length;a++)Ll(e,r[a])}function wa(e){var t=e.f;if((t&xr)===0){$t(e,Tt);var r=at,a=Qr;at=e,Qr=!0;try{(t&(pr|Ao))!==0?Ml(e):Ui(e),Bi(e);var s=Ji(e);e.teardown=typeof s=="function"?s:null,e.wv=Gi;var i;Xn&&sl&&(e.f&Ft)!==0&&e.deps}finally{Qr=a,at=r}}}async function ma(){await Promise.resolve(),ll()}function n(e){var t=e.f,r=(t&Mt)!==0;if(ha?.add(e),et!==null&&!dr){var a=at!==null&&(at.f&xr)!==0;if(!a&&!Tr?.includes(e)){var s=et.deps;if((et.f&Gn)!==0)e.rv<Ba&&(e.rv=Ba,zt===null&&s!==null&&s[Ht]===e?Ht++:zt===null?zt=[e]:zt.includes(e)||zt.push(e));else{(et.deps??=[]).push(e);var i=e.reactions;i===null?e.reactions=[et]:i.includes(et)||i.push(et)}}}if(ca){if(Ir.has(e))return Ir.get(e);if(r){var o=e,l=o.v;return((o.f&Tt)===0&&o.reactions!==null||to(o))&&(l=ws(o)),Ir.set(o,l),l}}else r&&(!er?.has(e)||tt?.is_fork&&!qa())&&(o=e,Ma(o)&&Li(o),Qr&&qa()&&(o.f&sr)===0&&eo(o));if(er?.has(e))return er.get(e);if((e.f&jr)!==0)throw e.v;return e.v}function eo(e){if(e.deps!==null){e.f^=sr;for(const t of e.deps)(t.reactions??=[]).push(e),(t.f&Mt)!==0&&(t.f&sr)===0&&eo(t)}}function to(e){if(e.v===Ct)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(Ir.has(t)||(t.f&Mt)!==0&&to(t))return!0;return!1}function b(e){var t=dr;try{return dr=!0,e()}finally{dr=t}}const zl=-7169;function $t(e,t){e.f=e.f&zl|t}function O(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Sr in e)es(e);else if(!Array.isArray(e))for(let t in e){const r=e[t];typeof r=="object"&&r&&Sr in r&&es(r)}}}function es(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let a in e)try{es(e[a],t)}catch{}const r=gs(e);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const a=bi(r);for(let s in a){const i=a[s].get;if(i)try{i.call(e)}catch{}}}}}const Rl=["touchstart","touchmove"];function jl(e){return Rl.includes(e)}const Il=new Set,Hs=new Set;function Nl(e,t,r,a={}){function s(i){if(a.capture||La.call(t,i),!i.cancelBubble)return la(()=>r?.call(this,i))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?oa(()=>{t.addEventListener(e,s,a)}):t.addEventListener(e,s,a),s}function A(e,t,r,a,s){var i={capture:a,passive:s},o=Nl(e,t,r,i);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&en(()=>{t.removeEventListener(e,o,i)})}let Ys=null;function La(e){var t=this,r=t.ownerDocument,a=e.type,s=e.composedPath?.()||[],i=s[0]||e.target;Ys=e;var o=0,l=Ys===e&&e.__root;if(l){var d=s.indexOf(l);if(d!==-1&&(t===document||t===window)){e.__root=t;return}var c=s.indexOf(t);if(c===-1)return;d<=c&&(o=d)}if(i=s[o]||e.target,i!==t){mi(e,"currentTarget",{configurable:!0,get(){return i||r}});var u=et,h=at;Ot(null),hr(null);try{for(var f,p=[];i!==null;){var x=i.assignedSlot||i.parentNode||i.host||null;try{var E=i["__"+a];E!=null&&(!i.disabled||e.target===i)&&E.call(i,e)}catch(k){f?p.push(k):f=k}if(e.cancelBubble||x===t||x===null)break;i=x}if(f){for(let k of p)queueMicrotask(()=>{throw k});throw f}}finally{e.__root=t,delete e.currentTarget,Ot(u),hr(h)}}}function ro(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function Ua(e,t){var r=at;r.nodes===null&&(r.nodes={start:e,end:t,a:null,t:null})}function S(e,t){var r=(t&el)!==0,a=(t&tl)!==0,s,i=!e.startsWith("<!>");return()=>{s===void 0&&(s=ro(i?e:"<!>"+e),r||(s=Lr(s)));var o=a||ji?document.importNode(s,!0):s.cloneNode(!0);if(r){var l=Lr(o),d=o.lastChild;Ua(l,d)}else Ua(o,o);return o}}function Br(e=""){{var t=Er(e+"");return Ua(t,t),t}}function rt(){var e=document.createDocumentFragment(),t=document.createComment(""),r=Er();return e.append(t,r),Ua(t,r),e}function m(e,t){e!==null&&e.before(t)}let ts=!0;function ve(e,t){var r=t==null?"":typeof t=="object"?t+"":t;r!==(e.__t??=e.nodeValue)&&(e.__t=r,e.nodeValue=r+"")}function Ol(e,t){return Dl(e,t)}const va=new Map;function Dl(e,{target:t,anchor:r,props:a={},events:s,context:i,intro:o=!0}){yl();var l=new Set,d=h=>{for(var f=0;f<h.length;f++){var p=h[f];if(!l.has(p)){l.add(p);var x=jl(p);t.addEventListener(p,La,{passive:x});var E=va.get(p);E===void 0?(document.addEventListener(p,La,{passive:x}),va.set(p,1)):va.set(p,E+1)}}};d(Tn(Il)),Hs.add(d);var c=void 0,u=Tl(()=>{var h=r??t.appendChild(Er());return ul(h,{pending:()=>{}},f=>{if(i){kt({});var p=it;p.c=i}s&&(a.$$events=s),ts=o,c=e(f,a)||{},ts=!0,i&&xt()}),()=>{for(var f of l){t.removeEventListener(f,La);var p=va.get(f);--p===0?(document.removeEventListener(f,La),va.delete(f)):va.set(f,p)}Hs.delete(d),h!==r&&h.parentNode?.removeChild(h)}});return Fl.set(c,u),c}let Fl=new WeakMap;class ql{anchor;#e=new Map;#t=new Map;#r=new Map;#a=new Set;#l=!0;constructor(t,r=!0){this.anchor=t,this.#l=r}#s=()=>{var t=tt;if(this.#e.has(t)){var r=this.#e.get(t),a=this.#t.get(r);if(a)xs(a),this.#a.delete(r);else{var s=this.#r.get(r);s&&(this.#t.set(r,s.effect),this.#r.delete(r),s.fragment.lastChild.remove(),this.anchor.before(s.fragment),a=s.effect)}for(const[i,o]of this.#e){if(this.#e.delete(i),i===t)break;const l=this.#r.get(o);l&&(Dt(l.effect),this.#r.delete(o))}for(const[i,o]of this.#t){if(i===r||this.#a.has(i))continue;const l=()=>{if(Array.from(this.#e.values()).includes(i)){var c=document.createDocumentFragment();Qi(o,c),c.append(Er()),this.#r.set(i,{effect:o,fragment:c})}else Dt(o);this.#a.delete(i),this.#t.delete(i)};this.#l||!a?(this.#a.add(i),Wr(o,l,!1)):l()}}};#n=t=>{this.#e.delete(t);const r=Array.from(this.#e.values());for(const[a,s]of this.#r)r.includes(a)||(Dt(s.effect),this.#r.delete(a))};ensure(t,r){var a=tt,s=Oi();if(r&&!this.#t.has(t)&&!this.#r.has(t))if(s){var i=document.createDocumentFragment(),o=Er();i.append(o),this.#r.set(t,{effect:Jt(()=>r(o)),fragment:i})}else this.#t.set(t,Jt(()=>r(this.anchor)));if(this.#e.set(a,t),s){for(const[l,d]of this.#t)l===t?a.skipped_effects.delete(d):a.skipped_effects.add(d);for(const[l,d]of this.#r)l===t?a.skipped_effects.delete(d.effect):a.skipped_effects.add(d.effect);a.oncommit(this.#s),a.ondiscard(this.#n)}else this.#s()}}function z(e,t,r=!1){var a=new ql(e),s=r?ea:0;function i(o,l){a.ensure(o,l)}ks(()=>{var o=!1;t((l,d=!0)=>{o=!0,i(d,l)}),o||i(!1,null)},s)}function $r(e,t){return t}function Bl(e,t,r){for(var a=[],s=t.length,i,o=t.length,l=0;l<s;l++){let h=t[l];Wr(h,()=>{if(i){if(i.pending.delete(h),i.done.add(h),i.pending.size===0){var f=e.outrogroups;rs(Tn(i.done)),f.delete(i),f.size===0&&(e.outrogroups=null)}}else o-=1},!1)}if(o===0){var d=a.length===0&&r!==null;if(d){var c=r,u=c.parentNode;wl(u),u.append(c),e.items.clear()}rs(t,!d)}else i={pending:new Set(t),done:new Set},(e.outrogroups??=new Set).add(i)}function rs(e,t=!0){for(var r=0;r<e.length;r++)Dt(e[r],t)}var Vs;function Et(e,t,r,a,s,i=null){var o=e,l=new Map,d=(t&xi)!==0;if(d){var c=e;o=c.appendChild(Er())}var u=null,h=ct(()=>{var w=r();return Ga(w)?w:w==null?[]:Tn(w)}),f,p=!0;function x(){k.fallback=u,Ul(k,f,o,t,a),u!==null&&(f.length===0?(u.f&yr)===0?xs(u):(u.f^=yr,za(u,null,o)):Wr(u,()=>{u=null}))}var E=ks(()=>{f=n(h);for(var w=f.length,F=new Set,Z=tt,X=Oi(),K=0;K<w;K+=1){var se=f[K],I=a(se,K),q=p?null:l.get(I);q?(q.v&&na(q.v,se),q.i&&na(q.i,K),X&&Z.skipped_effects.delete(q.e)):(q=Hl(l,p?o:Vs??=Er(),se,I,K,s,t,r),p||(q.e.f|=yr),l.set(I,q)),F.add(I)}if(w===0&&i&&!u&&(p?u=Jt(()=>i(o)):(u=Jt(()=>i(Vs??=Er())),u.f|=yr)),!p)if(X){for(const[C,ye]of l)F.has(C)||Z.skipped_effects.add(ye.e);Z.oncommit(x),Z.ondiscard(()=>{})}else x();n(h)}),k={effect:E,items:l,outrogroups:null,fallback:u};p=!1}function Ul(e,t,r,a,s){var i=(a&Ho)!==0,o=t.length,l=e.items,d=e.effect.first,c,u=null,h,f=[],p=[],x,E,k,w;if(i)for(w=0;w<o;w+=1)x=t[w],E=s(x,w),k=l.get(E).e,(k.f&yr)===0&&(k.nodes?.a?.measure(),(h??=new Set).add(k));for(w=0;w<o;w+=1){if(x=t[w],E=s(x,w),k=l.get(E).e,e.outrogroups!==null)for(const ye of e.outrogroups)ye.pending.delete(k),ye.done.delete(k);if((k.f&yr)!==0)if(k.f^=yr,k===d)za(k,null,r);else{var F=u?u.next:d;k===e.effect.last&&(e.effect.last=k.prev),k.prev&&(k.prev.next=k.next),k.next&&(k.next.prev=k.prev),Pr(e,u,k),Pr(e,k,F),za(k,F,r),u=k,f=[],p=[],d=u.next;continue}if((k.f&Xt)!==0&&(xs(k),i&&(k.nodes?.a?.unfix(),(h??=new Set).delete(k))),k!==d){if(c!==void 0&&c.has(k)){if(f.length<p.length){var Z=p[0],X;u=Z.prev;var K=f[0],se=f[f.length-1];for(X=0;X<f.length;X+=1)za(f[X],Z,r);for(X=0;X<p.length;X+=1)c.delete(p[X]);Pr(e,K.prev,se.next),Pr(e,u,K),Pr(e,se,Z),d=Z,u=se,w-=1,f=[],p=[]}else c.delete(k),za(k,d,r),Pr(e,k.prev,k.next),Pr(e,k,u===null?e.effect.first:u.next),Pr(e,u,k),u=k;continue}for(f=[],p=[];d!==null&&d!==k;)(c??=new Set).add(d),p.push(d),d=d.next;if(d===null)continue}(k.f&yr)===0&&f.push(k),u=k,d=k.next}if(e.outrogroups!==null){for(const ye of e.outrogroups)ye.pending.size===0&&(rs(Tn(ye.done)),e.outrogroups?.delete(ye));e.outrogroups.size===0&&(e.outrogroups=null)}if(d!==null||c!==void 0){var I=[];if(c!==void 0)for(k of c)(k.f&Xt)===0&&I.push(k);for(;d!==null;)(d.f&Xt)===0&&d!==e.fallback&&I.push(d),d=d.next;var q=I.length;if(q>0){var C=(a&xi)!==0&&o===0?r:null;if(i){for(w=0;w<q;w+=1)I[w].nodes?.a?.measure();for(w=0;w<q;w+=1)I[w].nodes?.a?.fix()}Bl(e,I,C)}}i&&oa(()=>{if(h!==void 0)for(k of h)k.nodes?.a?.apply()})}function Hl(e,t,r,a,s,i,o,l){var d=(o&Bo)!==0?(o&Yo)===0?T(r,!1,!1):aa(r):null,c=(o&Uo)!==0?aa(s):null;return{v:d,i:c,e:Jt(()=>(i(t,d??r,c??s,l),()=>{e.delete(a)}))}}function za(e,t,r){if(e.nodes)for(var a=e.nodes.start,s=e.nodes.end,i=t&&(t.f&yr)===0?t.nodes.start:r;a!==null;){var o=Ja(a);if(i.before(a),a===s)return;a=o}}function Pr(e,t,r){t===null?e.effect.first=r:t.next=r,r===null?e.effect.last=t:r.prev=t}function ne(e,t,r=!1,a=!1,s=!1){var i=e,o="";le(()=>{var l=at;if(o!==(o=t()??"")&&(l.nodes!==null&&(Hi(l.nodes.start,l.nodes.end),l.nodes=null),o!=="")){var d=o+"";r?d=`<svg>${d}</svg>`:a&&(d=`<math>${d}</math>`);var c=ro(d);if((r||a)&&(c=Lr(c)),Ua(Lr(c),c.lastChild),r||a)for(;Lr(c);)i.before(Lr(c));else i.before(c)}})}function dn(e,t,r,a,s){var i=t.$$slots?.[r],o=!1;i===!0&&(i=t[r==="default"?"children":r],o=!0),i===void 0||i(e,o?()=>a:a)}const Yl=()=>performance.now(),br={tick:e=>requestAnimationFrame(e),now:()=>Yl(),tasks:new Set};function ao(){const e=br.now();br.tasks.forEach(t=>{t.c(e)||(br.tasks.delete(t),t.f())}),br.tasks.size!==0&&br.tick(ao)}function Vl(e){let t;return br.tasks.size===0&&br.tick(ao),{promise:new Promise(r=>{br.tasks.add(t={c:e,f:r})}),abort(){br.tasks.delete(t)}}}function sn(e,t){la(()=>{e.dispatchEvent(new CustomEvent(t))})}function Wl(e){if(e==="float")return"cssFloat";if(e==="offset")return"cssOffset";if(e.startsWith("--"))return e;const t=e.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function Ws(e){const t={},r=e.split(";");for(const a of r){const[s,i]=a.split(":");if(!s||i===void 0)break;const o=Wl(s.trim());t[o]=i.trim()}return t}const Ql=e=>e;function ot(e,t,r,a){var s=(e&Ko)!==0,i=(e&Zo)!==0,o=s&&i,l=(e&Jo)!==0,d=o?"both":s?"in":"out",c,u=t.inert,h=t.style.overflow,f,p;function x(){return la(()=>c??=r()(t,a?.()??{},{direction:d}))}var E={is_global:l,in(){if(t.inert=u,!s){p?.abort(),p?.reset?.();return}i||f?.abort(),sn(t,"introstart"),f=as(t,x(),p,1,()=>{sn(t,"introend"),f?.abort(),f=c=void 0,t.style.overflow=h})},out(Z){if(!i){Z?.(),c=void 0;return}t.inert=!0,sn(t,"outrostart"),p=as(t,x(),f,0,()=>{sn(t,"outroend"),Z?.()})},stop:()=>{f?.abort(),p?.abort()}},k=at;if((k.nodes.t??=[]).push(E),s&&ts){var w=l;if(!w){for(var F=k.parent;F&&(F.f&ea)!==0;)for(;(F=F.parent)&&(F.f&pr)===0;);w=!F||(F.f&An)!==0}w&&Nt(()=>{b(()=>E.in())})}}function as(e,t,r,a,s){var i=a===1;if($o(t)){var o,l=!1;return oa(()=>{if(!l){var k=t({direction:i?"in":"out"});o=as(e,k,r,a,s)}}),{abort:()=>{l=!0,o?.abort()},deactivate:()=>o.deactivate(),reset:()=>o.reset(),t:()=>o.t()}}if(r?.deactivate(),!t?.duration)return s(),{abort:Vt,deactivate:Vt,reset:Vt,t:()=>a};const{delay:d=0,css:c,tick:u,easing:h=Ql}=t;var f=[];if(i&&r===void 0&&(u&&u(0,1),c)){var p=Ws(c(0,1));f.push(p,p)}var x=()=>1-a,E=e.animate(f,{duration:d,fill:"forwards"});return E.onfinish=()=>{E.cancel();var k=r?.t()??1-a;r?.abort();var w=a-k,F=t.duration*Math.abs(w),Z=[];if(F>0){var X=!1;if(c)for(var K=Math.ceil(F/16.666666666666668),se=0;se<=K;se+=1){var I=k+w*h(se/K),q=Ws(c(I,1-I));Z.push(q),X||=q.overflow==="hidden"}X&&(e.style.overflow="hidden"),x=()=>{var C=E.currentTime;return k+w*h(C/F)},u&&Vl(()=>{if(E.playState!=="running")return!1;var C=x();return u(C,1-C),!0})}E=e.animate(Z,{duration:F,fill:"forwards"}),E.onfinish=()=>{x=()=>a,u?.(a,1-a),s()}},{abort:()=>{E&&(E.cancel(),E.effect=null,E.onfinish=Vt)},deactivate:()=>{s=Vt},reset:()=>{a===0&&u?.(1,0)},t:()=>x()}}function Ss(e,t,r){Nt(()=>{var a=b(()=>t(e,r?.())||{});if(r&&a?.update){var s=!1,i={};$a(()=>{var o=r();O(o),s&&ys(i,o)&&(i=o,a.update(o))}),s=!0}if(a?.destroy)return()=>a.destroy()})}const Qs=[...` 	
\r\fÂ \v\uFEFF`];function Xl(e,t,r){var a=e==null?"":""+e;if(t&&(a=a?a+" "+t:t),r){for(var s in r)if(r[s])a=a?a+" "+s:s;else if(a.length)for(var i=s.length,o=0;(o=a.indexOf(s,o))>=0;){var l=o+i;(o===0||Qs.includes(a[o-1]))&&(l===a.length||Qs.includes(a[l]))?a=(o===0?"":a.substring(0,o))+a.substring(l+1):o=l}}return a===""?null:a}function Xs(e,t=!1){var r=t?" !important;":";",a="";for(var s in e){var i=e[s];i!=null&&i!==""&&(a+=" "+s+": "+i+r)}return a}function In(e){return e[0]!=="-"||e[1]!=="-"?e.toLowerCase():e}function Gl(e,t){if(t){var r="",a,s;if(Array.isArray(t)?(a=t[0],s=t[1]):a=t,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var i=!1,o=0,l=!1,d=[];a&&d.push(...Object.keys(a).map(In)),s&&d.push(...Object.keys(s).map(In));var c=0,u=-1;const E=e.length;for(var h=0;h<E;h++){var f=e[h];if(l?f==="/"&&e[h-1]==="*"&&(l=!1):i?i===f&&(i=!1):f==="/"&&e[h+1]==="*"?l=!0:f==='"'||f==="'"?i=f:f==="("?o++:f===")"&&o--,!l&&i===!1&&o===0){if(f===":"&&u===-1)u=h;else if(f===";"||h===E-1){if(u!==-1){var p=In(e.substring(c,u).trim());if(!d.includes(p)){f!==";"&&h++;var x=e.substring(c,h).trim();r+=" "+x+";"}}c=h+1,u=-1}}}}return a&&(r+=Xs(a)),s&&(r+=Xs(s,!0)),r=r.trim(),r===""?null:r}return e==null?null:String(e)}function Ve(e,t,r,a,s,i){var o=e.__className;if(o!==r||o===void 0){var l=Xl(r,a,i);l==null?e.removeAttribute("class"):e.className=l,e.__className=r}else if(i&&s!==i)for(var d in i){var c=!!i[d];(s==null||c!==!!s[d])&&e.classList.toggle(d,c)}return i}function Nn(e,t={},r,a){for(var s in r){var i=r[s];t[s]!==i&&(r[s]==null?e.style.removeProperty(s):e.style.setProperty(s,i,a))}}function lt(e,t,r,a){var s=e.__style;if(s!==t){var i=Gl(t,a);i==null?e.removeAttribute("style"):e.style.cssText=i,e.__style=t}else a&&(Array.isArray(a)?(Nn(e,r?.[0],a[0]),Nn(e,r?.[1],a[1],"important")):Nn(e,r,a));return a}function no(e,t,r=!1){if(e.multiple){if(t==null)return;if(!Ga(t))return al();for(var a of e.options)a.selected=t.includes(Na(a));return}for(a of e.options){var s=Na(a);if(bl(s,t)){a.selected=!0;return}}(!r||t!==void 0)&&(e.selectedIndex=-1)}function Kl(e){var t=new MutationObserver(()=>{no(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),en(()=>{t.disconnect()})}function Zl(e,t,r=t){var a=new WeakSet,s=!0;Di(e,"change",i=>{var o=i?"[selected]":":checked",l;if(e.multiple)l=[].map.call(e.querySelectorAll(o),Na);else{var d=e.querySelector(o)??e.querySelector("option:not([disabled])");l=d&&Na(d)}r(l),tt!==null&&a.add(tt)}),Nt(()=>{var i=t();if(e===document.activeElement){var o=Ra??tt;if(a.has(o))return}if(no(e,i,s),s&&i===void 0){var l=e.querySelector(":checked");l!==null&&(i=Na(l),r(i))}e.__value=i,s=!1}),Kl(e)}function Na(e){return"__value"in e?e.__value:e.value}const Jl=Symbol("is custom element"),ec=Symbol("is html");function so(e,t){var r=io(e);r.value===(r.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!=="PROGRESS")||(e.value=t??"")}function qt(e,t,r,a){var s=io(e);s[t]!==(s[t]=r)&&(t==="loading"&&(e[Co]=r),r==null?e.removeAttribute(t):typeof r!="string"&&tc(e).includes(t)?e[t]=r:e.setAttribute(t,r))}function io(e){return e.__attributes??={[Jl]:e.nodeName.includes("-"),[ec]:e.namespaceURI===rl}}var Gs=new Map;function tc(e){var t=e.getAttribute("is")||e.nodeName,r=Gs.get(t);if(r)return r;Gs.set(t,r=[]);for(var a,s=e,i=Element.prototype;i!==s;){a=bi(s);for(var o in a)a[o].set&&r.push(o);s=gs(s)}return r}function Gr(e,t,r=t){var a=new WeakSet;Di(e,"input",async s=>{var i=s?e.defaultValue:e.value;if(i=On(e)?Dn(i):i,r(i),tt!==null&&a.add(tt),await ma(),i!==(i=t())){var o=e.selectionStart,l=e.selectionEnd,d=e.value.length;if(e.value=i??"",l!==null){var c=e.value.length;o===l&&l===d&&c>d?(e.selectionStart=c,e.selectionEnd=c):(e.selectionStart=o,e.selectionEnd=Math.min(l,c))}}}),b(t)==null&&e.value&&(r(On(e)?Dn(e.value):e.value),tt!==null&&a.add(tt)),$a(()=>{var s=t();if(e===document.activeElement){var i=Ra??tt;if(a.has(i))return}On(e)&&s===Dn(e.value)||e.type==="date"&&!s&&!e.value||s!==e.value&&(e.value=s??"")})}function On(e){var t=e.type;return t==="number"||t==="range"}function Dn(e){return e===""?null:+e}class Es{#e=new WeakMap;#t;#r;static entries=new WeakMap;constructor(t){this.#r=t}observe(t,r){var a=this.#e.get(t)||new Set;return a.add(r),this.#e.set(t,a),this.#a().observe(t,this.#r),()=>{var s=this.#e.get(t);s.delete(r),s.size===0&&(this.#e.delete(t),this.#t.unobserve(t))}}#a(){return this.#t??(this.#t=new ResizeObserver(t=>{for(var r of t){Es.entries.set(r.target,r);for(var a of this.#e.get(r.target)||[])a(r)}}))}}var rc=new Es({box:"border-box"});function Ks(e,t,r){var a=rc.observe(e,()=>r(e[t]));Nt(()=>(b(()=>r(e[t])),a))}function Zs(e,t){return e===t||e?.[Sr]===t}function Or(e={},t,r,a){return Nt(()=>{var s,i;return $a(()=>{s=i,i=[],b(()=>{e!==r(...i)&&(t(e,...i),s&&Zs(r(...s),e)&&t(null,...s))})}),()=>{oa(()=>{i&&Zs(r(...i),e)&&t(null,...i)})}}),e}function Js(e,t){xl(window,["resize"],()=>la(()=>t(window[e])))}function Qt(e){return function(...t){var r=t[0];return r.stopPropagation(),e?.apply(this,t)}}function At(e=!1){const t=it,r=t.l.u;if(!r)return;let a=()=>O(t.s);if(e){let s=0,i={};const o=Za(()=>{let l=!1;const d=t.s;for(const c in d)d[c]!==i[c]&&(i[c]=d[c],l=!0);return l&&s++,s});a=()=>n(o)}r.b.length&&El(()=>{ei(t,a),gn(r.b)}),Jn(()=>{const s=b(()=>r.m.map(Mo));return()=>{for(const i of s)typeof i=="function"&&i()}}),r.a.length&&Jn(()=>{ei(t,a),gn(r.a)})}function ei(e,t){if(e.l.s)for(const r of e.l.s)n(r);t()}function Ha(e,t){var r=e.$$events?.[t.type],a=Ga(r)?r.slice():r==null?[]:[r];for(var s of a)s.call(this,t)}function Ts(e,t,r){if(e==null)return t(void 0),r&&r(void 0),Vt;const a=b(()=>e.subscribe(t,r));return a.unsubscribe?()=>a.unsubscribe():a}const da=[];function ac(e,t){return{subscribe:Be(e,t).subscribe}}function Be(e,t=Vt){let r=null;const a=new Set;function s(l){if(ys(e,l)&&(e=l,r)){const d=!da.length;for(const c of a)c[1](),da.push(c,e);if(d){for(let c=0;c<da.length;c+=2)da[c][0](da[c+1]);da.length=0}}}function i(l){s(l(e))}function o(l,d=Vt){const c=[l,d];return a.add(c),a.size===1&&(r=t(s,i)||Vt),l(e),()=>{a.delete(c),a.size===0&&r&&(r(),r=null)}}return{set:s,update:i,subscribe:o}}function oo(e,t,r){const a=!Array.isArray(e),s=a?[e]:e;if(!s.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const i=t.length<2;return ac(r,(o,l)=>{let d=!1;const c=[];let u=0,h=Vt;const f=()=>{if(u)return;h();const x=t(a?c[0]:c,o,l);i?o(x):h=typeof x=="function"?x:Vt},p=s.map((x,E)=>Ts(x,k=>{c[E]=k,u&=~(1<<E),d&&f()},()=>{u|=1<<E}));return d=!0,f(),function(){gn(p),h(),d=!1}})}function Je(e){let t;return Ts(e,r=>t=r)(),t}let on=!1,ns=Symbol();function _e(e,t,r){const a=r[t]??={store:null,source:T(void 0),unsubscribe:Vt};if(a.store!==e&&!(ns in r))if(a.unsubscribe(),a.store=e??null,e==null)a.source.v=void 0,a.unsubscribe=Vt;else{var s=!0;a.unsubscribe=Ts(e,i=>{s?a.source.v=i:g(a.source,i)}),s=!1}return e&&ns in r?Je(e):n(a.source)}function Fn(e,t){return e.set(t),t}function Rt(){const e={};function t(){en(()=>{for(var r in e)e[r].unsubscribe();mi(e,ns,{enumerable:!1,value:!0})})}return[e,t]}function nc(e,t,r){return e.set(r),t}function sc(e){var t=on;try{return on=!1,[e(),on]}finally{on=t}}function gt(e,t,r,a){var s=!Ta||(r&Wo)!==0,i=(r&Xo)!==0,o=(r&Go)!==0,l=a,d=!0,c=()=>(d&&(d=!1,l=o?b(a):a),l),u;if(i){var h=Sr in e||Po in e;u=_a(e,t)?.set??(h&&t in e?Z=>e[t]=Z:void 0)}var f,p=!1;i?[f,p]=sc(()=>e[t]):f=e[t],f===void 0&&a!==void 0&&(f=c(),u&&(s&&No(),u(f)));var x;if(s?x=()=>{var Z=e[t];return Z===void 0?c():(d=!0,Z)}:x=()=>{var Z=e[t];return Z!==void 0&&(l=void 0),Z===void 0?l:Z},s&&(r&Qo)===0)return x;if(u){var E=e.$$legacy;return(function(Z,X){return arguments.length>0?((!s||!X||E||p)&&u(X?x():Z),Z):x()})}var k=!1,w=((r&Vo)!==0?Za:ct)(()=>(k=!1,x()));i&&n(w);var F=at;return(function(Z,X){if(arguments.length>0){const K=X?n(w):s&&i?ga(Z):Z;return g(w,K),k=!0,l!==void 0&&(l=K),Z}return ca&&k||(F.f&xr)!==0?w.v:n(w)})}function Dr(e){it===null&&bs(),Ta&&it.l!==null?oc(it).m.push(e):Jn(()=>{const t=b(e);if(typeof t=="function")return t})}function lo(e){it===null&&bs(),Dr(()=>()=>b(e))}function ic(e,t,{bubbles:r=!1,cancelable:a=!1}={}){return new CustomEvent(e,{detail:t,bubbles:r,cancelable:a})}function $s(){const e=it;return e===null&&bs(),(t,r,a)=>{const s=e.s.$$events?.[t];if(s){const i=Ga(s)?s.slice():[s],o=ic(t,r,a);for(const l of i)l.call(e.x,o);return!o.defaultPrevented}return!0}}function oc(e){var t=e.l;return t.u??={a:[],b:[],m:[]}}const lc="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(lc);il();const cc=e=>e;function co(e){const t=e-1;return t*t*t+1}function ti(e){const t=typeof e=="string"&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[e,"px"]}function bt(e,{delay:t=0,duration:r=400,easing:a=cc}={}){const s=+getComputedStyle(e).opacity;return{delay:t,duration:r,easing:a,css:i=>`opacity: ${i*s}`}}function vo(e,{delay:t=0,duration:r=400,easing:a=co,x:s=0,y:i=0,opacity:o=0}={}){const l=getComputedStyle(e),d=+l.opacity,c=l.transform==="none"?"":l.transform,u=d*(1-o),[h,f]=ti(s),[p,x]=ti(i);return{delay:t,duration:r,easing:a,css:(E,k)=>`
			transform: ${c} translate(${(1-E)*h}${f}, ${(1-E)*p}${x});
			opacity: ${d-u*k}`}}function Ms(e,{delay:t=0,duration:r=400,easing:a=co,start:s=0,opacity:i=0}={}){const o=getComputedStyle(e),l=+o.opacity,d=o.transform==="none"?"":o.transform,c=1-s,u=l*(1-i);return{delay:t,duration:r,easing:a,css:(h,f)=>`
			transform: ${d} scale(${1-c*f});
			opacity: ${l-u*f}
		`}}const vc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-arrows-shuffle-2"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 4l3 3l-3 3" /><path d="M18 20l3 -3l-3 -3" /><path d="M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5" /><path d="M3 17h3a5 5 0 0 0 5 -5a5 5 0 0 1 5 -5h5" /></svg>',dc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-deezer"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 16.5h2v.5h-2z" /><path d="M8 16.5h2.5v.5h-2.5z" /><path d="M16 17h-2.5v-.5h2.5z" /><path d="M21.5 17h-2.5v-.5h2.5z" /><path d="M21.5 13h-2.5v.5h2.5z" /><path d="M21.5 9.5h-2.5v.5h2.5z" /><path d="M21.5 6h-2.5v.5h2.5z" /><path d="M16 13h-2.5v.5h2.5z" /><path d="M8 13.5h2.5v-.5h-2.5z" /><path d="M8 9.5h2.5v.5h-2.5z" /></svg>',uc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-compact-down"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 11l8 3l8 -3" /></svg>',fc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-compact-left"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M13 20l-3 -8l3 -8" /></svg>',hc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-left"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 6l-6 6l6 6" /></svg>',ri='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-disc"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0" /><path d="M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M7 12a5 5 0 0 1 5 -5" /><path d="M12 17a5 5 0 0 0 5 -5" /></svg>',pc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-grip-horizontal"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M5 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M12 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M12 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M19 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M19 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /></svg>',gc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-heart"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M19.5 12.572l-7.5 7.428l-7.5 -7.428a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572" /></svg>',_c='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-heart"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6.979 3.074a6 6 0 0 1 4.988 1.425l.037 .033l.034 -.03a6 6 0 0 1 4.733 -1.44l.246 .036a6 6 0 0 1 3.364 10.008l-.18 .185l-.048 .041l-7.45 7.379a1 1 0 0 1 -1.313 .082l-.094 -.082l-7.493 -7.422a6 6 0 0 1 3.176 -10.215z" /></svg>',mc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-menu-2"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 6l16 0" /><path d="M4 12l16 0" /><path d="M4 18l16 0" /></svg>',qn='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-music"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 17a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /><path d="M13 17a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /><path d="M9 17v-13h10v13" /><path d="M9 8h10" /></svg>',bc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-pause"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z" /><path d="M17 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z" /></svg>',yc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-player-play"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 4v16l13 -8z" /></svg>',wc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-play"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 4v16a1 1 0 0 0 1.524 .852l13 -8a1 1 0 0 0 0 -1.704l-13 -8a1 1 0 0 0 -1.524 .852z" /></svg>',kc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-skip-back"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M19.496 4.136l-12 7a1 1 0 0 0 0 1.728l12 7a1 1 0 0 0 1.504 -.864v-14a1 1 0 0 0 -1.504 -.864z" /><path d="M4 4a1 1 0 0 1 .993 .883l.007 .117v14a1 1 0 0 1 -1.993 .117l-.007 -.117v-14a1 1 0 0 1 1 -1z" /></svg>',xc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-skip-forward"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 5v14a1 1 0 0 0 1.504 .864l12 -7a1 1 0 0 0 0 -1.728l-12 -7a1 1 0 0 0 -1.504 .864z" /><path d="M20 4a1 1 0 0 1 .993 .883l.007 .117v14a1 1 0 0 1 -1.993 .117l-.007 -.117v-14a1 1 0 0 1 1 -1z" /></svg>',Sc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-playlist"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0" /><path d="M17 17v-13h4" /><path d="M13 5h-10" /><path d="M3 9l10 0" /><path d="M9 13h-6" /></svg>',Ec='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-radio"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3l-9.371 3.749a1 1 0 0 0 -.629 .928v11.323a1 1 0 0 0 1 1h14a1 1 0 0 0 1 -1v-11a1 1 0 0 0 -1 -1h-14.5" /><path d="M4 12h16" /><path d="M7 12v-2" /><path d="M17 16v.01" /><path d="M13 16v.01" /></svg>',Tc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-refresh"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4" /><path d="M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4" /></svg>',$c='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-repeat"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 12v-3a3 3 0 0 1 3 -3h13m-3 -3l3 3l-3 3" /><path d="M20 12v3a3 3 0 0 1 -3 3h-13m3 3l-3 -3l3 -3" /></svg>',Mc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-search"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0" /><path d="M21 21l-6 -6" /></svg>',Ac='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-settings"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z" /><path d="M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /></svg>',Pc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-trash"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 7l16 0" /><path d="M10 11l0 6" /><path d="M14 11l0 6" /><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12" /><path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3" /></svg>',Cc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 8a5 5 0 0 1 0 8" /><path d="M17.7 5a9 9 0 0 1 0 14" /><path d="M6 15h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l3.5 -4.5a.8 .8 0 0 1 1.5 .5v14a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5" /></svg>',Lc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume-2"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 8a5 5 0 0 1 0 8" /><path d="M6 15h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l3.5 -4.5a.8 .8 0 0 1 1.5 .5v14a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5" /></svg>',zc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume-3"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 15h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l3.5 -4.5a.8 .8 0 0 1 1.5 .5v14a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5" /><path d="M16 10l4 4m0 -4l-4 4" /></svg>',Rc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume-off"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 8a5 5 0 0 1 1.912 4.934m-1.377 2.602a5 5 0 0 1 -.535 .464" /><path d="M17.7 5a9 9 0 0 1 2.362 11.086m-1.676 2.299a9 9 0 0 1 -.686 .615" /><path d="M9.069 5.054l.431 -.554a.8 .8 0 0 1 1.5 .5v2m0 4v8a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l1.294 -1.664" /><path d="M3 3l18 18" /></svg>',jc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-x"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 6l-12 12" /><path d="M6 6l12 12" /></svg>',Ic='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-device-floppy"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2" /><path d="M12 14m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0" /><path d="M14 4l0 4l-6 0l0 -4" /></svg>',Nc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-file-pencil"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3v4a1 1 0 0 0 1 1h4" /><path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z" /><path d="M10 18l5 -5a1.414 1.414 0 0 0 -2 -2l-5 5v2h2z" /></svg>',ai='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-plus"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 5l0 14" /><path d="M5 12l14 0" /></svg>',Oc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-circle-check"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0" /><path d="M9 12l2 2l4 -4" /></svg>',Dc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-dots"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /></svg>',Fc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-sort-descending"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 6l9 0" /><path d="M4 12l7 0" /><path d="M4 18l7 0" /><path d="M15 15l3 3l3 -3" /><path d="M18 6l0 12" /></svg>',qc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-sort-ascending"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 6l7 0" /><path d="M4 12l7 0" /><path d="M4 18l9 0" /><path d="M15 9l3 -3l3 3" /><path d="M18 6l0 12" /></svg>',Bc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-yandex"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 20v-16h-2a4 4 0 0 0 -4 4v1a4 4 0 0 0 4 4h2" /><path d="M9 20l3 -7" /></svg>',y={ARTISTS:qn,ALBUMS:ri,GENRES:qn,PLAYLISTS:Sc,RADIO:Ec,SEARCH:Mc,PLAY:wc,PLAY_OUTLINE:yc,PAUSE:bc,PREVIOUS:kc,NEXT:xc,SHUFFLE:vc,REPEAT:$c,VOLUME_FULL:Cc,VOLUME_MEDIUM:Lc,VOLUME_MUTE:zc,VOLUME_OFF:Rc,HEART:gc,HEART_FILLED:_c,SYNC:Tc,SETTINGS:Ac,CLOSE:jc,MENU:mc,BACK:hc,BACK_COMPACT:fc,CHEVRON_DOWN:uc,DRAG_HANDLE:pc,REMOVE:Pc,DEEZER:dc,SAVE:Ic,EDIT:Nc,ADD:ai,ACCEPT:Oc,DOTS:Dc,ADD_TO_PLAYLIST:ai,ALBUM_LINK:ri,ARTIST_LINK:qn,SORT_DESC:Fc,SORT_ASC:qc,YANDEX:Bc};function ka(e){if(!e||!e.image)return null;if(e.image.startsWith("http"))return e.image;let t="";return e.image==="local"?t=`${e.name}.jpg`:t=e.image,`/imagesw/radio-logos/thumbs/${encodeURIComponent(t)}`}function ni(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}const ss=[{id:"default",label:"Default (Moode Dark)",colors:{"--c-white-10":"rgba(255, 255, 255, 0.1)","--c-white-20":"rgba(255, 255, 255, 0.2)","--c-white-30":"rgba(255, 255, 255, 0.3)","--c-white-50":"rgba(255, 255, 255, 0.5)","--c-white-60":"rgba(255, 255, 255, 0.6)","--c-white-90":"rgba(255, 255, 255, 0.9)","--c-black-20":"rgba(0, 0, 0, 0.2)","--c-black-50":"rgba(0, 0, 0, 0.5)","--c-black-70":"rgba(0, 0, 0, 0.7)","--c-black-80":"rgba(0, 0, 0, 0.8)","--c-black-90":"rgba(0, 0, 0, 0.9)","--c-accent":"#fa2d48","--c-accent-hover":"#ff4d65","--c-text-primary":"#ffffff","--c-text-secondary":"rgba(255, 255, 255, 0.6)","--c-text-muted":"#888888","--c-text-inverse":"#000000","--c-bg-app":"#000000","--c-bg-main":"#121212","--c-bg-sidebar":"#000000","--c-bg-card":"#1a1a1a","--c-bg-placeholder":"rgba(255, 255, 255, 0.1)","--c-bg-glass":"rgba(18, 18, 18, 0.95)","--c-bg-toast":"#333333","--c-heart":"#ff4444","--c-error":"#ff4444","--c-surface-hover":"rgba(255, 255, 255, 0.1)","--c-surface-active":"rgba(255, 255, 255, 0.2)","--c-surface-input":"#1a1a1a","--c-surface-input-focus":"rgba(255, 255, 255, 0.1)","--c-surface-button":"rgba(255, 255, 255, 0.1)","--c-surface-button-hover":"rgba(255, 255, 255, 0.1)","--c-surface-drag-phantom":"#1a1a1a","--c-surface-drag-land":"rgba(255, 255, 255, 0.1)","--c-rail-bg":"rgba(255, 255, 255, 0.2)","--c-rail-bg-hover":"rgba(255, 255, 255, 0.3)","--c-skeleton-base":"rgba(255, 255, 255, 0.1)","--c-border":"rgba(255, 255, 255, 0.1)","--c-border-dim":"rgba(255, 255, 255, 0.1)","--c-border-bright":"rgba(255, 255, 255, 0.2)","--c-border-dashed":"rgba(255, 255, 255, 0.2)","--c-border-dashed-hover":"rgba(255, 255, 255, 0.5)","--c-overlay-dim":"rgba(0, 0, 0, 0.5)","--c-overlay-backdrop":"rgba(0, 0, 0, 0.8)","--c-shadow-card":"rgba(0, 0, 0, 0.3)","--c-shadow-popover":"rgba(0, 0, 0, 0.5)","--c-shadow-header":"rgba(0, 0, 0, 0.5)","--c-shadow-phantom":"rgba(0, 0, 0, 0.7)","--c-shadow-glow-accent":"rgba(250, 45, 72, 0.5)","--c-icon-idle":"#9ca3af","--c-icon-hover":"#ffffff","--c-icon-faint":"rgba(255, 255, 255, 0.5)","--icon-stroke-width":"1.5px","--header-height":"64px","--mini-player-height":"90px","--sidebar-width":"260px","--radius-sm":"4px","--radius-md":"8px","--radius-lg":"12px","--radius-xl":"20px","--radius-full":"9999px","--z-base":"1","--z-dock":"1000","--z-modal":"2000","--z-toast":"3000","--z-drag-item":"9999","--trans-fast":"0.2s ease","--trans-smooth":"0.3s cubic-bezier(0.2, 0.8, 0.2, 1)","--c-pl-0":"#fa2d48","--c-pl-1":"#2d7afa","--c-pl-2":"#2dfa85","--c-pl-3":"#faac2d","--c-pl-4":"#b82dfa","--c-pl-5":"#2dfaf3"}},{id:"gruvbox",label:"Gruvbox Dark",colors:{"--c-white-10":"rgba(251, 241, 199, 0.1)","--c-white-20":"rgba(251, 241, 199, 0.2)","--c-white-30":"rgba(251, 241, 199, 0.3)","--c-white-50":"rgba(251, 241, 199, 0.5)","--c-white-60":"rgba(251, 241, 199, 0.6)","--c-white-90":"rgba(251, 241, 199, 0.9)","--c-black-20":"rgba(40, 40, 40, 0.2)","--c-black-50":"rgba(40, 40, 40, 0.5)","--c-black-70":"rgba(40, 40, 40, 0.7)","--c-black-80":"rgba(40, 40, 40, 0.8)","--c-black-90":"rgba(40, 40, 40, 0.9)","--c-accent":"#d65d0e","--c-accent-hover":"#fe8019","--c-text-primary":"#fbf1c7","--c-text-secondary":"#ebdbb2","--c-text-muted":"#928374","--c-text-inverse":"#282828","--c-bg-app":"#282828","--c-bg-main":"#282828","--c-bg-sidebar":"#282828","--c-bg-card":"#3c3836","--c-bg-placeholder":"#504945","--c-bg-glass":"rgba(40, 40, 40, 0.98)","--c-bg-toast":"#32302f","--c-heart":"#fb4934","--c-error":"#cc241d","--c-surface-hover":"#3c3836","--c-surface-active":"#504945","--c-surface-input":"#3c3836","--c-surface-input-focus":"#504945","--c-surface-button":"rgba(251, 241, 199, 0.1)","--c-surface-button-hover":"rgba(251, 241, 199, 0.2)","--c-surface-drag-phantom":"#504945","--c-surface-drag-land":"rgba(251, 241, 199, 0.1)","--c-rail-bg":"#504945","--c-rail-bg-hover":"#665c54","--c-skeleton-base":"#3c3836","--c-border":"#504945","--c-border-dim":"#3c3836","--c-border-bright":"#665c54","--c-border-dashed":"rgba(168, 153, 132, 0.2)","--c-border-dashed-hover":"rgba(168, 153, 132, 0.5)","--c-overlay-dim":"rgba(40, 40, 40, 0.6)","--c-overlay-backdrop":"rgba(29, 32, 33, 0.8)","--c-shadow-card":"rgba(0, 0, 0, 0.3)","--c-shadow-popover":"rgba(0, 0, 0, 0.5)","--c-shadow-header":"rgba(0, 0, 0, 0.2)","--c-shadow-phantom":"rgba(0, 0, 0, 0.5)","--c-shadow-glow-accent":"rgba(214, 93, 14, 0.3)","--c-icon-idle":"#a89984","--c-icon-hover":"#fbf1c7","--c-icon-faint":"#504945","--icon-stroke-width":"1.5px","--header-height":"64px","--mini-player-height":"90px","--sidebar-width":"260px","--radius-sm":"4px","--radius-md":"8px","--radius-lg":"12px","--radius-xl":"16px","--radius-full":"9999px","--z-base":"1","--z-dock":"1000","--z-modal":"2000","--z-toast":"3000","--z-drag-item":"9999","--trans-fast":"0.2s ease","--trans-smooth":"0.3s cubic-bezier(0.2, 0.8, 0.2, 1)","--c-pl-0":"#cc241d","--c-pl-1":"#458588","--c-pl-2":"#a6e3a1","--c-pl-3":"#d65d0e","--c-pl-4":"#b16286","--c-pl-5":"#fabd2f"}}];function Uc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Bn={exports:{}},Un={exports:{}},si;function Hc(){return si||(si=1,(function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t={rotl:function(r,a){return r<<a|r>>>32-a},rotr:function(r,a){return r<<32-a|r>>>a},endian:function(r){if(r.constructor==Number)return t.rotl(r,8)&16711935|t.rotl(r,24)&4278255360;for(var a=0;a<r.length;a++)r[a]=t.endian(r[a]);return r},randomBytes:function(r){for(var a=[];r>0;r--)a.push(Math.floor(Math.random()*256));return a},bytesToWords:function(r){for(var a=[],s=0,i=0;s<r.length;s++,i+=8)a[i>>>5]|=r[s]<<24-i%32;return a},wordsToBytes:function(r){for(var a=[],s=0;s<r.length*32;s+=8)a.push(r[s>>>5]>>>24-s%32&255);return a},bytesToHex:function(r){for(var a=[],s=0;s<r.length;s++)a.push((r[s]>>>4).toString(16)),a.push((r[s]&15).toString(16));return a.join("")},hexToBytes:function(r){for(var a=[],s=0;s<r.length;s+=2)a.push(parseInt(r.substr(s,2),16));return a},bytesToBase64:function(r){for(var a=[],s=0;s<r.length;s+=3)for(var i=r[s]<<16|r[s+1]<<8|r[s+2],o=0;o<4;o++)s*8+o*6<=r.length*8?a.push(e.charAt(i>>>6*(3-o)&63)):a.push("=");return a.join("")},base64ToBytes:function(r){r=r.replace(/[^A-Z0-9+\/]/ig,"");for(var a=[],s=0,i=0;s<r.length;i=++s%4)i!=0&&a.push((e.indexOf(r.charAt(s-1))&Math.pow(2,-2*i+8)-1)<<i*2|e.indexOf(r.charAt(s))>>>6-i*2);return a}};Un.exports=t})()),Un.exports}var Hn,ii;function oi(){if(ii)return Hn;ii=1;var e={utf8:{stringToBytes:function(t){return e.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(e.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var r=[],a=0;a<t.length;a++)r.push(t.charCodeAt(a)&255);return r},bytesToString:function(t){for(var r=[],a=0;a<t.length;a++)r.push(String.fromCharCode(t[a]));return r.join("")}}};return Hn=e,Hn}var Yn,li;function Yc(){if(li)return Yn;li=1,Yn=function(r){return r!=null&&(e(r)||t(r)||!!r._isBuffer)};function e(r){return!!r.constructor&&typeof r.constructor.isBuffer=="function"&&r.constructor.isBuffer(r)}function t(r){return typeof r.readFloatLE=="function"&&typeof r.slice=="function"&&e(r.slice(0,0))}return Yn}var ci;function Vc(){return ci||(ci=1,(function(){var e=Hc(),t=oi().utf8,r=Yc(),a=oi().bin,s=function(i,o){i.constructor==String?o&&o.encoding==="binary"?i=a.stringToBytes(i):i=t.stringToBytes(i):r(i)?i=Array.prototype.slice.call(i,0):!Array.isArray(i)&&i.constructor!==Uint8Array&&(i=i.toString());for(var l=e.bytesToWords(i),d=i.length*8,c=1732584193,u=-271733879,h=-1732584194,f=271733878,p=0;p<l.length;p++)l[p]=(l[p]<<8|l[p]>>>24)&16711935|(l[p]<<24|l[p]>>>8)&4278255360;l[d>>>5]|=128<<d%32,l[(d+64>>>9<<4)+14]=d;for(var x=s._ff,E=s._gg,k=s._hh,w=s._ii,p=0;p<l.length;p+=16){var F=c,Z=u,X=h,K=f;c=x(c,u,h,f,l[p+0],7,-680876936),f=x(f,c,u,h,l[p+1],12,-389564586),h=x(h,f,c,u,l[p+2],17,606105819),u=x(u,h,f,c,l[p+3],22,-1044525330),c=x(c,u,h,f,l[p+4],7,-176418897),f=x(f,c,u,h,l[p+5],12,1200080426),h=x(h,f,c,u,l[p+6],17,-1473231341),u=x(u,h,f,c,l[p+7],22,-45705983),c=x(c,u,h,f,l[p+8],7,1770035416),f=x(f,c,u,h,l[p+9],12,-1958414417),h=x(h,f,c,u,l[p+10],17,-42063),u=x(u,h,f,c,l[p+11],22,-1990404162),c=x(c,u,h,f,l[p+12],7,1804603682),f=x(f,c,u,h,l[p+13],12,-40341101),h=x(h,f,c,u,l[p+14],17,-1502002290),u=x(u,h,f,c,l[p+15],22,1236535329),c=E(c,u,h,f,l[p+1],5,-165796510),f=E(f,c,u,h,l[p+6],9,-1069501632),h=E(h,f,c,u,l[p+11],14,643717713),u=E(u,h,f,c,l[p+0],20,-373897302),c=E(c,u,h,f,l[p+5],5,-701558691),f=E(f,c,u,h,l[p+10],9,38016083),h=E(h,f,c,u,l[p+15],14,-660478335),u=E(u,h,f,c,l[p+4],20,-405537848),c=E(c,u,h,f,l[p+9],5,568446438),f=E(f,c,u,h,l[p+14],9,-1019803690),h=E(h,f,c,u,l[p+3],14,-187363961),u=E(u,h,f,c,l[p+8],20,1163531501),c=E(c,u,h,f,l[p+13],5,-1444681467),f=E(f,c,u,h,l[p+2],9,-51403784),h=E(h,f,c,u,l[p+7],14,1735328473),u=E(u,h,f,c,l[p+12],20,-1926607734),c=k(c,u,h,f,l[p+5],4,-378558),f=k(f,c,u,h,l[p+8],11,-2022574463),h=k(h,f,c,u,l[p+11],16,1839030562),u=k(u,h,f,c,l[p+14],23,-35309556),c=k(c,u,h,f,l[p+1],4,-1530992060),f=k(f,c,u,h,l[p+4],11,1272893353),h=k(h,f,c,u,l[p+7],16,-155497632),u=k(u,h,f,c,l[p+10],23,-1094730640),c=k(c,u,h,f,l[p+13],4,681279174),f=k(f,c,u,h,l[p+0],11,-358537222),h=k(h,f,c,u,l[p+3],16,-722521979),u=k(u,h,f,c,l[p+6],23,76029189),c=k(c,u,h,f,l[p+9],4,-640364487),f=k(f,c,u,h,l[p+12],11,-421815835),h=k(h,f,c,u,l[p+15],16,530742520),u=k(u,h,f,c,l[p+2],23,-995338651),c=w(c,u,h,f,l[p+0],6,-198630844),f=w(f,c,u,h,l[p+7],10,1126891415),h=w(h,f,c,u,l[p+14],15,-1416354905),u=w(u,h,f,c,l[p+5],21,-57434055),c=w(c,u,h,f,l[p+12],6,1700485571),f=w(f,c,u,h,l[p+3],10,-1894986606),h=w(h,f,c,u,l[p+10],15,-1051523),u=w(u,h,f,c,l[p+1],21,-2054922799),c=w(c,u,h,f,l[p+8],6,1873313359),f=w(f,c,u,h,l[p+15],10,-30611744),h=w(h,f,c,u,l[p+6],15,-1560198380),u=w(u,h,f,c,l[p+13],21,1309151649),c=w(c,u,h,f,l[p+4],6,-145523070),f=w(f,c,u,h,l[p+11],10,-1120210379),h=w(h,f,c,u,l[p+2],15,718787259),u=w(u,h,f,c,l[p+9],21,-343485551),c=c+F>>>0,u=u+Z>>>0,h=h+X>>>0,f=f+K>>>0}return e.endian([c,u,h,f])};s._ff=function(i,o,l,d,c,u,h){var f=i+(o&l|~o&d)+(c>>>0)+h;return(f<<u|f>>>32-u)+o},s._gg=function(i,o,l,d,c,u,h){var f=i+(o&d|l&~d)+(c>>>0)+h;return(f<<u|f>>>32-u)+o},s._hh=function(i,o,l,d,c,u,h){var f=i+(o^l^d)+(c>>>0)+h;return(f<<u|f>>>32-u)+o},s._ii=function(i,o,l,d,c,u,h){var f=i+(l^(o|~d))+(c>>>0)+h;return(f<<u|f>>>32-u)+o},s._blocksize=16,s._digestsize=16,Bn.exports=function(i,o){if(i==null)throw new Error("Illegal argument "+i);var l=e.wordsToBytes(s(i,o));return o&&o.asBytes?l:o&&o.asString?a.bytesToString(l):e.bytesToHex(l)}})()),Bn.exports}var Wc=Vc();const uo=Uc(Wc),vi=Be("Disconnected"),is=Be(null);let Vn;function qe(e,t="info"){is.set({text:e,type:t}),Vn&&clearTimeout(Vn),Vn=setTimeout(()=>{is.set(null)},3e3)}const Qc=localStorage.getItem("app_theme")||"default",yn=Be(Qc);yn.subscribe(e=>{if(typeof document>"u")return;localStorage.setItem("app_theme",e);const t=ss.find(a=>a.id===e);if(!t)return;const r=document.documentElement;document.body.setAttribute("data-theme",e),Object.entries(t.colors).forEach(([a,s])=>{r.style.setProperty(a,s)})});const wn=Be({isOpen:!1,title:"",message:"",confirmLabel:"Confirm",cancelLabel:"Cancel",onConfirm:null,type:"confirm",inputValue:"",placeholder:"",options:[]});function ur({title:e="Confirm Action",message:t="Are you sure?",confirmLabel:r="Confirm",cancelLabel:a="Cancel",type:s="confirm",inputValue:i="",placeholder:o="",options:l=[],onConfirm:d=()=>{}}){wn.set({isOpen:!0,title:e,message:t,confirmLabel:r,cancelLabel:a,type:s,inputValue:i,placeholder:o,options:l,onConfirm:d})}function ln(){wn.set({isOpen:!1,title:"",message:"",confirmLabel:"",cancelLabel:"",onConfirm:null,type:"confirm",inputValue:"",placeholder:"",options:[]})}const wt=Be({state:"stop",volume:50,elapsed:0,duration:0,random:!1,repeat:!1,bitrate:0,format:"",song:0,songid:0}),rr=Be({title:"Not Playing",artist:"",album:"",file:"",stationName:null,id:null,pos:null}),kn=Be(!1),un=Be(!1),os=Be(!1),ls=Be(!1),It=Be("library"),tn=Be(null),ar=Be(!1),Xc=localStorage.getItem("sidebarCollapsed")==="true",cs=Be(Xc);cs.subscribe(e=>{typeof localStorage<"u"&&localStorage.setItem("sidebarCollapsed",String(e))});const Fr=Be([]),Cn=Be([]),Oa=Be([]),Gc=Be(null),zr=Be(new Set),mt=Be(!1),Yt=Be([{view:"root"}]),Kr=Be([]),fo=Be(0),Da=Be(""),ho=Be({});function Kc(e,t){ho.update(r=>({...r,[e]:t}))}function Zc(e){return Je(ho)[e]||0}const As=Be({isOpen:!1,track:null,context:{type:"general",playlistName:null,index:null},x:0,y:0,triggerRect:null});function Jc(){if(typeof navigator<"u"&&navigator.vibrate)try{navigator.vibrate(70)}catch{}}function Ya(e,t,r={}){if(!t&&r.type!=="playlist-card")return;Jc();let a=0,s=0,i=null,o=e.currentTarget;!o&&e.target&&e.target.closest&&(o=e.target.closest("button")||e.target),o&&o.getBoundingClientRect&&(i=o.getBoundingClientRect());const l=e.detail?.originalEvent||e;l.touches&&l.touches.length>0?(a=l.touches[0].clientX,s=l.touches[0].clientY):l.clientX&&(a=l.clientX,s=l.clientY);const d={type:"general",playlistName:null,index:null,...r};As.set({isOpen:!0,track:t,context:d,x:a,y:s,triggerRect:i})}function Ut(){As.set({isOpen:!1,track:null,context:{},x:0,y:0,triggerRect:null})}let vs=null,ds=null;function ev(e){ds=e}function Nr(e,t=null){t&&(vs=t),ds?ds(e,t):console.warn("Router callback not set!")}function tv(){const e=vs;return vs=null,e}function rv(){window.history.back()}function xa(e,t=[],r=null){if(!e||!e.file)return"/images/default_cover.png";if(e.image&&e.image.startsWith("http"))return e.image;if(po(e.file)||e.genre==="Radio")return e.image?ka(e):go(e,t,r)||"/images/radio_placeholder.png";let a=e.file.startsWith("/")?e.file.slice(1):e.file;return`/coverart.php/${encodeURI(a)}`}function Va(e,t="sm",r=[],a=null){if(!e||e.file&&(po(e.file)||e.genre==="Radio"||Array.isArray(e)))return e&&e.image?ka(e):go(e,r,a)||"/images/radio_icon.png";if(e.image&&e.image.startsWith("http"))return e.image;if(!e.file)return"/images/default_icon.png";if(e.thumbHash){const s=t==="md"?"":"_sm";return`/imagesw/thmcache/${e.thumbHash}${s}.jpg`}try{const s=e.file.lastIndexOf("/"),i=s===-1?".":e.file.substring(0,s);return`/imagesw/thmcache/${uo(i)}${t==="md"?"":"_sm"}.jpg`}catch{let i=e.file.startsWith("/")?e.file.slice(1):e.file;return`/coverart.php/${encodeURI(i)}`}}function po(e){return e?e.startsWith("http")||e.includes("://")||e.includes("RADIO"):!1}function go(e,t,r){const a=d=>(d||"").toString().toLowerCase().replace(/[^a-z0-9]/g,""),s=a(e?.title),i=a(e?.stationName),o=a(r);if(t&&t.length>0){const d=t.find(c=>{const u=a(c.name);return u?u===i||u===o||s&&u===s||s&&s.includes(u)&&u.length>3:!1});if(d)return ka(d)}const l=e?.stationName||r;return l?ka({name:l,image:"local"}):null}oo([rr,Fr,tn],([e,t,r])=>xa(e,t,r));oo(rr,e=>!e||!e.file||e.file.startsWith("http")?null:`/coverart.php/${encodeURI(e.file)}`);const av=localStorage.getItem("alarmTime")||"08:00",nv=localStorage.getItem("alarmEnabled")==="true",sv=localStorage.getItem("alarmPlaylist")||"Favorites",us=Be(av),fs=Be(nv),hs=Be(sv);us.subscribe(e=>localStorage.setItem("alarmTime",e));fs.subscribe(e=>localStorage.setItem("alarmEnabled",String(e)));hs.subscribe(e=>localStorage.setItem("alarmPlaylist",e));const iv=localStorage.getItem("yandex_token")||"",Wa=Be(iv);Wa.subscribe(e=>{typeof localStorage<"u"&&localStorage.setItem("yandex_token",e)});const ov=localStorage.getItem("yandex_enabled")==="true",xn=Be(ov);xn.subscribe(e=>{typeof localStorage<"u"&&localStorage.setItem("yandex_enabled",String(e))});const st={NAME:"MoodePlayerDB",STORE_NAME:"music",VERSION:3},Wn={SYNC:"/wave-api.php",STATIONS:e=>"/wave-api.php?action=stations",COVER_ART:e=>`/coverart.php?u=${encodeURIComponent(e)}`,RADIO_LOGOS:e=>`/imagesw/radio-logos/thumbs/${e}`},Rr={open(){return new Promise((e,t)=>{const r=indexedDB.open(st.NAME,st.VERSION);r.onupgradeneeded=a=>{const s=a.target.result,i=a.target.transaction;let o;s.objectStoreNames.contains(st.STORE_NAME)?o=i.objectStore(st.STORE_NAME):o=s.createObjectStore(st.STORE_NAME,{keyPath:"file"}),o.indexNames.contains("artist")||o.createIndex("artist","artist",{unique:!1}),o.indexNames.contains("album")||o.createIndex("album","album",{unique:!1}),o.indexNames.contains("genre")||o.createIndex("genre","genre",{unique:!1}),o.indexNames.contains("album_artist")||o.createIndex("album_artist","album_artist",{unique:!1})},r.onsuccess=()=>e(r.result),r.onerror=()=>t(r.error)})},async clear(){const e=await this.open();return new Promise((t,r)=>{const a=e.transaction(st.STORE_NAME,"readwrite");a.objectStore(st.STORE_NAME).clear(),a.oncomplete=()=>t(),a.onerror=()=>r(a.error)})},async bulkAdd(e){const t=await this.open();return new Promise((r,a)=>{const s=t.transaction(st.STORE_NAME,"readwrite"),i=s.objectStore(st.STORE_NAME);e.forEach(o=>i.put(o)),s.oncomplete=()=>r(),s.onerror=()=>a(s.error)})},async getFilesMap(e){if(!e||e.length===0)return new Map;const t=await this.open();return new Promise(r=>{const s=t.transaction(st.STORE_NAME,"readonly").objectStore(st.STORE_NAME),i=new Map;let o=0;e.forEach(l=>{const d=l.normalize("NFC").trim(),c=s.get(d);c.onsuccess=u=>{u.target.result&&i.set(l,u.target.result),o++,o===e.length&&r(i)},c.onerror=()=>{o++,o===e.length&&r(i)}})})},async getArtists(){const e=await this.open();return new Promise((t,r)=>{const s=e.transaction(st.STORE_NAME,"readonly").objectStore(st.STORE_NAME),i=new Map,o=s.openCursor();o.onsuccess=l=>{const d=l.target.result;if(d){const c=d.value,u=c.album_artist||c.artist;u&&!i.has(u)&&i.set(u,{name:u,file:c.file,thumbHash:c.thumbHash}),d.continue()}else{const c=Array.from(i.values()).sort((u,h)=>u.name.localeCompare(h.name,void 0,{sensitivity:"base"}));t(c)}},o.onerror=()=>r(o.error)})},async getAlbums(){const e=await this.open();return new Promise((t,r)=>{const s=e.transaction(st.STORE_NAME,"readonly").objectStore(st.STORE_NAME).index("album"),i=[],o=s.openCursor(null,"nextunique");o.onsuccess=l=>{const d=l.target.result;if(d){const c=d.value;i.push({name:c.album,artist:c.album_artist||c.artist,file:c.file,thumbHash:c.thumbHash,qualityBadge:c.qualityBadge,year:c.year||0}),d.continue()}else t(i)},o.onerror=()=>r(o.error)})},async getArtistAlbums(e){if(!e)return[];const t=await this.open(),r=e.normalize("NFC").trim();return new Promise((a,s)=>{const o=t.transaction(st.STORE_NAME,"readonly").objectStore(st.STORE_NAME),l=new Promise(c=>{o.indexNames.contains("album_artist")?o.index("album_artist").getAll(IDBKeyRange.only(r)).onsuccess=u=>c(u.target.result):c([])}),d=new Promise(c=>{o.index("artist").getAll(IDBKeyRange.only(r)).onsuccess=u=>c(u.target.result)});Promise.all([l,d]).then(([c,u])=>{const h=[...c,...u],f=[],p=new Set;h.forEach(x=>{p.has(x.album)||(p.add(x.album),f.push({name:x.album,artist:x.album_artist||x.artist,file:x.file,thumbHash:x.thumbHash,qualityBadge:x.qualityBadge,year:x.year||0}))}),a(f)}).catch(c=>s(c))})},async getAlbumTracks(e,t=null){const r=await this.open(),a=e.normalize("NFC").trim(),s=t?t.normalize("NFC").trim():null;return console.log(`[DB] getAlbumTracks called. Album: "${a}", FilterArtist: "${s}"`),new Promise((i,o)=>{const d=r.transaction(st.STORE_NAME,"readonly").objectStore(st.STORE_NAME).index("album"),c=IDBKeyRange.only(a),u=d.getAll(c);u.onsuccess=()=>{let h=u.result;if(console.log(`[DB] Found ${h.length} raw tracks for album "${a}"`),s){const f=h.length;h=h.filter(p=>{const x=(p.artist||"").normalize("NFC").trim(),E=(p.album_artist||"").normalize("NFC").trim();return x===s||E===s}),console.log(`[DB] After artist filter: ${h.length} tracks (Removed ${f-h.length})`)}else console.log("[DB] No artist filter provided. Returning all tracks.");h.sort((f,p)=>{const x=parseInt(f.disc||1),E=parseInt(p.disc||1);if(x!==E)return x-E;const k=parseInt(f.track||0),w=parseInt(p.track||0);return k-w}),i(h)},u.onerror=()=>o(u.error)})},async getGenres(){const e=await this.open();return new Promise((t,r)=>{const s=e.transaction(st.STORE_NAME,"readonly").objectStore(st.STORE_NAME).index("genre"),i=[],o=s.openKeyCursor(null,"nextunique");o.onsuccess=l=>{const d=l.target.result;d?(i.push(d.key),d.continue()):t(i)},o.onerror=()=>r(o.error)})},async getGenreTracks(e){const t=await this.open(),r=e.normalize("NFC").trim();return new Promise((a,s)=>{const l=t.transaction(st.STORE_NAME,"readonly").objectStore(st.STORE_NAME).index("genre").getAll(IDBKeyRange.only(r));l.onsuccess=()=>a(l.result),l.onerror=()=>s(l.error)})},async search(e){if(!e)return[];const t=e.toLowerCase().normalize("NFC").trim(),r=await this.open();return new Promise((a,s)=>{const o=r.transaction(st.STORE_NAME,"readonly").objectStore(st.STORE_NAME),l=[],d=100,c=o.openCursor();c.onsuccess=u=>{const h=u.target.result;if(h){const f=h.value;if((f.title&&f.title.toLowerCase().includes(t)||f.artist&&f.artist.toLowerCase().includes(t)||f.album&&f.album.toLowerCase().includes(t)||f.album_artist&&f.album_artist.toLowerCase().includes(t))&&l.push(f),l.length>=d){a(l);return}h.continue()}else a(l)},c.onerror=()=>s(c.error)})}};var lv=S('<div class="skeleton svelte-tl058d"></div>');function Wt(e,t){let r=gt(t,"width",8,"100%"),a=gt(t,"height",8,"20px"),s=gt(t,"radius",8,"4px"),i=gt(t,"style",8,"");var o=lv();le(()=>lt(o,`width: ${r()??""}; height: ${a()??""}; border-radius: ${s()??""}; ${i()??""}`)),m(e,o)}var cv=S('<div class="skel svelte-1b8que2"><!></div>'),vv=S('<img loading="lazy"/>'),dv=S('<div class="loader svelte-1b8que2"><!> <!> <!></div>');function sa(e,t){kt(t,!1);let r=gt(t,"src",8),a=gt(t,"alt",8,""),s=gt(t,"radius",8,"0px");const i=$s();let o=T("loading");function l(){g(o,"loaded")}function d(k){i("error",k),g(o,"error")}te(()=>O(r()),()=>{r()?g(o,"loading"):g(o,"error")}),Bt(),At();var c=dv(),u=v(c);{var h=k=>{var w=cv(),F=v(w);Wt(F,{width:"100%",height:"100%",get radius(){return s()}}),ot(2,w,()=>bt,()=>({duration:200})),m(k,w)};z(u,k=>{n(o)==="loading"&&k(h)})}var f=_(u,2);{var p=k=>{var w=vv();let F;le(()=>{qt(w,"src",r()),qt(w,"alt",a()),lt(w,`border-radius: ${s()??""}`),F=Ve(w,1,"svelte-1b8que2",null,F,{vis:n(o)==="loaded"})}),A("load",w,l),A("error",w,d),m(k,w)};z(f,k=>{r()&&n(o)!=="error"&&k(p)})}var x=_(f,2);{var E=k=>{var w=rt(),F=Pe(w);dn(F,t,"fallback",{}),m(k,w)};z(x,k=>{n(o)==="error"&&k(E)})}le(()=>lt(c,`border-radius: ${s()??""}`)),m(e,c),xt()}const Yr={DEFAULT_IP:typeof window<"u"?window.location.hostname:"localhost",get MOODE_IP(){try{return typeof localStorage<"u"?localStorage.getItem("moode_ip")||this.DEFAULT_IP:this.DEFAULT_IP}catch{return this.DEFAULT_IP}},setMoodeIp(e){if(typeof localStorage<"u"){const t=e?e.trim():"";t&&localStorage.setItem("moode_ip",t)}}};class uv{constructor(){this.socket=null,this.queue=[],this.isProcessing=!1,this.reconnectTimer=null,this.watchdogTimer=null,this._buffer=""}get isConnected(){return this.socket&&this.socket.readyState===WebSocket.OPEN}connect(){if(this.socket&&(this.socket.readyState===WebSocket.CONNECTING||this.socket.readyState===WebSocket.OPEN))return;this.reconnectTimer&&clearTimeout(this.reconnectTimer);let t=Yr.MOODE_IP||window.location.hostname;t=t.replace(/^https?:\/\//,"").split(":")[0].split("/")[0];const r=Yr.WS_PORT||"8080",a=`ws://${t}:${r}`;console.log("[MPD] Connecting to:",a);try{this.socket=new WebSocket(a,["binary"])}catch(s){console.error("[MPD] Connection Error:",s),this.reconnectTimer=setTimeout(()=>this.connect(),5e3);return}this.socket.onopen=()=>{console.log("[MPD] Connected"),vi.set("Connected"),qe("Connected to Moode","success"),this._processQueue()},this.socket.onmessage=s=>this._handleMessage(s),this.socket.onclose=s=>{console.warn("[MPD] Socket closed",s.code,s.reason),vi.set("Disconnected"),this._cleanup(),this.reconnectTimer=setTimeout(()=>this.connect(),3e3)},this.socket.onerror=s=>{console.error("[MPD] Socket error",s)}}send(t){return new Promise((r,a)=>{this.queue.push({cmd:t,resolve:r,reject:a}),this._processQueue()})}_cleanup(){for(this.isProcessing=!1,this._buffer="",this.watchdogTimer&&clearTimeout(this.watchdogTimer);this.queue.length>0;){const{reject:t}=this.queue.shift();t(new Error("Connection lost"))}}async _processQueue(){if(this.isProcessing||this.queue.length===0||!this.isConnected)return;this.isProcessing=!0;const{cmd:t}=this.queue[0];this.watchdogTimer&&clearTimeout(this.watchdogTimer),this.watchdogTimer=setTimeout(()=>{console.error("[MPD] Watchdog timeout"),this.socket&&this.socket.close()},2e4);try{const r=t.endsWith(`
`)?t:t+`
`;this.socket.send(new TextEncoder().encode(r))}catch(r){console.error("[MPD] Send error",r),this._cleanup()}}async _handleMessage(t){let r=t.data;r instanceof Blob&&(r=await r.text()),this.watchdogTimer&&(clearTimeout(this.watchdogTimer),this.watchdogTimer=null),this._buffer+=r;const a=this._buffer.endsWith(`
OK
`)||this._buffer===`OK
`,s=this._buffer.startsWith("ACK");if(a||s){const i=this._buffer;this._buffer="";const o=this.queue.shift();if(this.isProcessing=!1,o)if(s)console.error(`[MPD] Error: ${i.trim()}`),o.reject(new Error(i.trim()));else{const l=i.replace(/\nOK\n$/,"").replace(/^OK\n$/,"");o.resolve(l)}this._processQueue()}else{if(!this.queue.length)return;this.watchdogTimer=setTimeout(()=>{console.error("[MPD] Watchdog timeout receiving large data"),this.socket&&this.socket.close()},2e4)}}}const Ae=new uv,tr={parseKeyValue(e){const t={};if(!e)return t;const r=e.split(`
`);for(const a of r){const s=a.indexOf(": ");if(s===-1)continue;const i=a.substring(0,s).toLowerCase(),o=a.substring(s+2);t[i]=o}return t},parseStatus(e){const t=this.parseKeyValue(e);let r="";if(t.audio){const a=t.audio.split(":");a[1]&&(r=`${a[1]}-bit`)}return{state:t.state||"stop",volume:parseInt(t.volume)||0,elapsed:parseFloat(t.elapsed)||0,duration:parseFloat(t.duration)||0,random:t.random==="1",repeat:t.repeat==="1",song:parseInt(t.song)||0,songId:parseInt(t.songid)||-1,playlistLength:parseInt(t.playlistlength)||0,bitrate:parseInt(t.bitrate)||0,format:r,playlistVersion:parseInt(t.playlist)||0}},parseCurrentSong(e){const t=this.parseKeyValue(e);return this._normalizeTrack(t)},parsePlaylists(e){const t=e.split(`
`),r=[];let a=null;for(const s of t)s.startsWith("playlist: ")?(a&&r.push(a),a={playlist:s.substring(10)}):s.startsWith("Last-Modified: ")&&a&&(a["last-modified"]=s.substring(15));return a&&r.push(a),r.map(s=>({name:s.playlist,lastModified:s["last-modified"]}))},parseTracks(e){const t=[];let r=null,a=0,s=e.indexOf(`
`,a);for(;s!==-1;){const i=e.substring(a,s),o=i.indexOf(": ");if(o!==-1){const l=i.substring(0,o).toLowerCase(),d=i.substring(o+2);l==="file"?(r&&t.push(this._normalizeTrack(r)),r={file:d}):r&&(r[l]=d)}a=s+1,s=e.indexOf(`
`,a)}return r&&t.push(this._normalizeTrack(r)),t},_normalizeTrack(e){const t=e.file||e.File||"",r=e.Title||e.title||e.Name||e.name||t.split("/").pop()||"Unknown";return{file:t,title:r,artist:e.Artist||e.artist||"Unknown Artist",album:e.Album||e.album||"Unknown Album",genre:e.Genre||e.genre||"Unknown",time:parseFloat(e.Time||e.time||0),track:e.Track||e.track||"",id:e.Id||e.id,pos:e.Pos||e.pos||null,stationName:e.name||e.Name||null}}},fv=1e3,hv=250;let fn=null,Fa=null,hn=0,Ur=1,Sn=!0,wr=!1,Vr=0,ua=null;function pn(e){return e?String(e).normalize("NFC").replace(/\\/g,"\\\\").replace(/"/g,'\\"'):""}function pv(){gv(),Sn=!0,wr=!1,Vr=0,mt.set(!1),cr(),fn=setInterval(()=>{Ae.isConnected&&!Ae.isProcessing&&cr()},fv)}function gv(){fn&&(clearInterval(fn),fn=null),Ps()}async function cr(){try{const e=await Ae.send("status"),t=await Ae.send("currentsong"),r=tr.parseStatus(e),a=tr.parseCurrentSong(t);mv(r,a);const s=Je(fo);if(Je(mt))return;(r.playlistLength>0&&r.playlistVersion!==s||r.playlistLength>0&&Je(Kr).length===0)&&_v(r.playlistVersion)}catch{}}async function _v(e){if(!Je(mt))try{const t=await Ae.send("playlistinfo");if(Je(mt))return;const r=tr.parseTracks(t),a=r.map(o=>o.file).filter(o=>o&&!o.startsWith("http"));let s=new Map;if(a.length>0)try{s=await Rr.getFilesMap(a)}catch(o){console.warn("Failed to hydrate queue from DB",o)}const i=r.map(o=>{const l=(o.file||"").normalize("NFC"),d=s.get(l);return d?{...o,thumbHash:d.thumbHash,qualityBadge:d.qualityBadge,title:o.title||d.title,artist:o.artist||d.artist,album:o.album||d.album,_uid:String(o.id||o.pos+o.file)}:{...o,_uid:String(o.id||o.pos+o.file)}});Kr.set(i),fo.set(e)}catch(t){console.error("Queue sync error",t)}}function mv(e,t){const r=Je(rr),a=Je(Fr),s=t.file&&t.file.startsWith("http");if(s){const i=c=>(c||"").toString().toLowerCase().replace(/[^a-z0-9]/g,""),o=i(t.file),l=i(t.title),d=a.find(c=>{const u=i(c.station||c.file||c.url||(Array.isArray(c)?c[1]:"")),h=i(c.name||(Array.isArray(c)?c[0]:""));return u&&o.includes(u)||h&&l.includes(h)});d?t.stationName=d.name||d[0]:r.stationName&&r.file===t.file&&(t.stationName=r.stationName)}rr.set(t),wt.update(i=>{const o=e.state==="play",l=performance.now();if(e.state==="pause"||i.state==="pause")return cn(!1),l<Vr?i:e;if(t.file!==r.file||Sn)return Sn=!1,wr=!1,Ur=1,s&&(e.elapsed=0),cn(o&&!s),e;if(l<Vr)return i;if(wr)return wr=!1,Ur=1,cn(o&&!s),e;if(o&&!s){const d=e.elapsed-i.elapsed;if(Math.abs(d)>2)return Ur=1,e;if(Math.abs(d)<.05)Ur=1;else{let u=d/1.5;Ur=Math.max(.5,Math.min(1.5,1+u))}return{...e,elapsed:i.elapsed}}return cn(!1),e})}function cn(e){e?ps():Ps()}function ps(){Fa||Sn||(hn=performance.now(),Fa=setInterval(()=>{const e=performance.now();let t=(e-hn)/1e3;t>2&&(t=0),hn=e,wt.update(r=>{if(r.state!=="play")return r;let a=r.elapsed+t*Ur;return r.duration>0&&a>r.duration&&(a=r.duration),{...r,elapsed:a}})},hv))}function Ps(){Fa&&(clearInterval(Fa),Fa=null),Ur=1,hn=0}async function di(e,t=!1){if(!e||e.length===0)return;mt.set(!0),wr=!0;const r=5;try{for(let a=0;a<e.length;a+=r){const s=e.slice(a,a+r),i=["command_list_begin"];s.forEach(o=>{i.push(`add "${pn(o.file)}"`)}),i.push("command_list_end"),await Ae.send(i.join(`
`))}t?(await Ae.send("play 0"),qe(`Playing ${e.length} tracks`,"success")):qe(`Added ${e.length} tracks`,"success")}catch(a){console.error("[Player] Bulk Action Failed:",a),qe("Error adding tracks","error")}finally{setTimeout(()=>{mt.set(!1),cr()},1500)}}const nr={async togglePlay(){const t=Je(wt).state==="play";Vr=performance.now()+800,wt.update(r=>{const a=t?"pause":"play";return a==="play"?ps():Ps(),{...r,state:a}}),await Ae.send(t?"pause 1":"play"),setTimeout(cr,900)},async next(){wr=!0,Vr=0,await Ae.send("next"),cr()},async previous(){wr=!0,Vr=0,wt.update(e=>({...e,elapsed:0})),await Ae.send("previous"),cr()},async setVolume(e){wt.update(t=>({...t,volume:e})),await Ae.send(`setvol ${e}`)},async seek(e){wr=!0,Vr=performance.now()+500,wt.update(t=>({...t,elapsed:e})),await Ae.send(`seekcur ${e}`),setTimeout(cr,600)},async toggleRandom(){const t=!Je(wt).random;wt.update(r=>({...r,random:t})),await Ae.send(`random ${t?1:0}`)},async toggleRepeat(){const t=!Je(wt).repeat;wt.update(r=>({...r,repeat:t})),await Ae.send(`repeat ${t?1:0}`)},async playUri(e,t={}){mt.set(!0);const r=pn(e);wr=!0,wt.update(a=>({...a,state:"play",elapsed:0})),rr.set({title:t.title||e.split("/").pop(),artist:t.artist||"",file:e}),ps();try{const a=await Ae.send("currentsong"),s=parseInt(tr.parseKeyValue(a).pos),i=await Ae.send(`addid "${r}"`),o=parseInt(tr.parseKeyValue(i).id);if(isNaN(o))await Ae.send(`add "${r}"`),await Ae.send("play");else{const l=isNaN(s)?0:s+1;await Ae.send(`moveid ${o} ${l}`),await Ae.send(`playid ${o}`)}}catch(a){console.error("Play error",a),qe("Failed to play","error")}setTimeout(()=>{mt.set(!1),cr()},1200)},async addToQueue(e){try{await Ae.send(`add "${pn(e)}"`),qe("Added to queue","success")}catch(t){console.error("Add queue error",t),qe("Failed to add","error")}},async playNext(e){mt.set(!0);const t=pn(e);try{const r=await Ae.send("currentsong"),a=parseInt(tr.parseKeyValue(r).pos||-1);if(a===-1)mt.set(!1),await this.playUri(e);else{const s=await Ae.send(`addid "${t}"`),i=parseInt(tr.parseKeyValue(s).id);isNaN(i)||(await Ae.send(`moveid ${i} ${a+1}`),qe("Will play next","success")),setTimeout(()=>mt.set(!1),1e3)}}catch(r){console.error("Play Next error",r),qe("Failed to set next","error"),mt.set(!1)}},async removeFromQueue(e){mt.set(!0),ua&&clearTimeout(ua);try{Kr.update(t=>{const r=[...t];return r.splice(e,1),r}),await Ae.send(`delete ${e}`)}catch{qe("Failed to remove","error"),mt.set(!1);return}ua=setTimeout(()=>{mt.set(!1)},1e3)},async moveTrack(e,t){if(e!==t){mt.set(!0),ua&&clearTimeout(ua);try{await Ae.send(`move ${e} ${t}`)}catch(r){console.error("Move failed",r),qe("Move failed","error"),mt.set(!1),cr();return}ua=setTimeout(()=>{mt.set(!1),cr()},2e3)}},async playAllTracks(e){if(!(!e||e.length===0))try{await Ae.send("stop"),await Ae.send("clear"),await di(e,!0)}catch(t){console.error(t)}},async addAllToQueue(e){!e||e.length===0||await di(e,!1)},async saveQueue(e){if(!e)return;const t=e.replace(/"/g,'\\"');try{await Ae.send(`save "${t}"`),qe(`Playlist "${e}" saved`,"success")}catch(r){if(r.message.includes("exist")){if(confirm(`Playlist "${e}" exists. Overwrite?`))try{await Ae.send(`rm "${t}"`),await Ae.send(`save "${t}"`),qe(`Playlist "${e}" overwritten`,"success")}catch{qe("Failed to overwrite","error")}}else console.error(r)}}};function _o(e){return new Worker("/assets/sync.worker-CxDcqL9_.js",{name:e?.name})}const Ca="Favorites";let ui=Promise.resolve();const fa=e=>e?e.toLowerCase().replace(/^https?:\/\//,"").replace(/^www\./,"").split("?")[0].replace(/\/$/,""):"";function bv(e){if(e==="Favorites")return"linear-gradient(135deg, hsl(348, 95%, 58%), hsl(348, 90%, 40%))";let t=0;for(let a=0;a<e.length;a++)t=e.charCodeAt(a)+((t<<5)-t);const r=Math.abs(t%360);return`linear-gradient(135deg, hsl(${r}, 60%, 40%), hsl(${(r+40)%360}, 60%, 30%))`}function yv(e){if(e==="Favorites")return"var(--c-heart)";let t=0;for(let a=0;a<e.length;a++)t=e.charCodeAt(a)+((t<<5)-t);return`var(--c-pl-${Math.abs(t%6)})`}const fr={async syncLibrary(){if(Je(ar))return;ar.set(!0);const e=new _o;e.postMessage({type:"START_SYNC",payload:{url:`http://${Yr.MOODE_IP}/wave-api.php`}}),e.onmessage=t=>{const{type:r,count:a}=t.data;r==="DONE"&&(qe(`Library updated: ${a} tracks`,"success"),ar.set(!1),e.terminate()),r==="ERROR"&&(qe("Sync Failed","error"),ar.set(!1),e.terminate())},e.onerror=()=>{ar.set(!1),e.terminate()}},async loadPlaylists(){os.set(!0);try{const e=await Ae.send("listplaylists"),r=tr.parsePlaylists(e).map(a=>({...a,color:bv(a.name),colorVar:yv(a.name)}));Cn.set(r)}catch(e){console.error(e)}finally{os.set(!1)}},async createPlaylistFromQueue(e){if(!e)return;const t=e.replace(/"/g,'\\"');try{await Ae.send(`save "${t}"`),qe(`Playlist "${e}" created`,"success"),await this.loadPlaylists()}catch(r){console.error(r),qe("Failed to create playlist","error")}},async deletePlaylist(e){if(!e)return;const t=e.replace(/"/g,'\\"');try{await Ae.send(`rm "${t}"`),qe("Playlist deleted","info"),await this.loadPlaylists()}catch(r){console.error(r),qe("Delete failed","error")}},async renamePlaylist(e,t){if(!e||!t)return;const r=e.replace(/"/g,'\\"'),a=t.replace(/"/g,'\\"');try{await Ae.send(`rename "${r}" "${a}"`),qe("Playlist renamed","success"),await this.loadPlaylists()}catch(s){console.error(s),qe("Rename failed","error")}},async openPlaylistDetails(e){if(!e)return;ls.set(!0);const t=e.replace(/"/g,'\\"');try{const r=await Ae.send(`listplaylistinfo "${t}"`),a=tr.parseTracks(r),s=a.map(l=>l.file).filter(l=>l&&!l.startsWith("http"));let i=new Map;if(s.length>0)try{i=await Rr.getFilesMap(s)}catch(l){console.warn("Failed to hydrate playlist from DB",l)}const o=a.map(l=>{const d=i.get(l.file);return d?{...l,thumbHash:d.thumbHash,qualityBadge:d.qualityBadge,title:l.title||d.title,artist:l.artist||d.artist,album:l.album||d.album,_uid:ni()}:{...l,_uid:ni()}});Oa.set(o)}catch(r){console.error(r),qe("Could not load playlist","error")}finally{ls.set(!1)}},async movePlaylistTrack(e,t,r){const a=e.replace(/"/g,'\\"');try{await Ae.send(`playlistmove "${a}" ${t} ${r}`)}catch{qe("Move failed","error")}},async removeFromPlaylist(e,t){const r=e.replace(/"/g,'\\"');try{await Ae.send(`playlistdelete "${r}" ${t}`),qe("Track removed","success")}catch{qe("Delete failed","error")}},async loadFavorites(){try{const e=await Ae.send(`listplaylistinfo "${Ca}"`),t=tr.parseTracks(e),r=new Set;t.forEach(a=>{a.file&&r.add(a.file)}),zr.set(r)}catch{zr.set(new Set)}},async toggleFavorite(e){if(!e||!e.file)return;const t=e.file,r=t.replace(/"/g,'\\"'),a=t.startsWith("http"),s=Je(zr);let i=s.has(t);if(!i&&a){const o=fa(t);for(const l of s)if(fa(l)===o){i=!0;break}}zr.update(o=>{const l=new Set(o);if(i){if(l.delete(t),a){const d=fa(t);for(const c of l)fa(c)===d&&l.delete(c)}}else l.add(t);return l}),ui=ui.then(async()=>{try{const o=await Ae.send(`listplaylistinfo "${Ca}"`),l=tr.parseTracks(o);let d=[];if(l.forEach((c,u)=>{let h=!1;(c.file===t||a&&fa(c.file)===fa(t)||a&&(c.file.includes(t)||t.includes(c.file)))&&(h=!0),h&&d.push(u)}),i){if(d.length>0){d.sort((c,u)=>u-c);for(const c of d)await Ae.send(`playlistdelete "${Ca}" ${c}`);qe("Removed from Favorites","info")}}else d.length>0?console.log("[Fav] Track already exists. Skipping."):(await Ae.send(`playlistadd "${Ca}" "${r}"`),l.length>0&&await Ae.send(`playlistmove "${Ca}" ${l.length} 0`),qe("Added to Favorites","success"))}catch(o){console.error("Fav action failed",o),qe("Action failed","error")}finally{await this.loadFavorites()}})}};function mo(){Ae.connect(),pv(),fr.loadPlaylists(),fr.loadFavorites()}function En(e){return Ae.send(e)}const{togglePlay:Ln,toggleRandom:Zr,toggleRepeat:Jr,setVolume:kr,seek:Cs,addToQueue:wv,playNext:kv,removeFromQueue:xv,moveTrack:Sv,saveQueue:Ev,playAllTracks:Ls,addAllToQueue:zs}=nr,{syncLibrary:Tv,loadRadioStations:$v,loadPlaylists:Rs,openPlaylistDetails:bo,toggleFavorite:yo,loadFavorites:Mv,removeFromPlaylist:wo,movePlaylistTrack:ko}=fr;function Qa(e){const t=Je(rr),r=Je(Fr),a=Je(tn);if(t.file&&t.file.startsWith("http")&&r.length>0&&(e==="next"||e==="previous")){let i=r.findIndex(l=>l.name===a);i===-1&&(i=0);let o;e==="next"?(o=i+1,o>=r.length&&(o=0)):(o=i-1,o<0&&(o=r.length-1)),js(r[o])}else e==="next"&&nr.next(),e==="previous"&&nr.previous()}function js(e){if(!e)return;tn.set(e.name);const t=e[1]||e.station||e.file||e.url;t&&nr.playUri(t,{title:e.name,artist:e.genre||"Radio Stream",stationName:e.name})}function zn(e){e&&(tn.set(null),nr.playUri(e.file,{title:e.title,artist:e.artist,album:e.album,stationName:null}))}async function xo(e,t=0){if(!e)return;tn.set(null);const r=e.replace(/"/g,'\\"');try{await Ae.send("stop"),await Ae.send("clear"),await Ae.send(`load "${r}"`),await Ae.send(`play ${t}`)}catch(a){console.error("Failed to play playlist context",a)}}const Av=Object.freeze(Object.defineProperty({__proto__:null,addAllToQueue:zs,addToQueue:wv,connect:mo,loadFavorites:Mv,loadPlaylists:Rs,loadRadioStations:$v,movePlaylistTrack:ko,moveTrack:Sv,nav:Qa,openPlaylistDetails:bo,playAllTracks:Ls,playNext:kv,playPlaylistContext:xo,playStation:js,playTrackOptimistic:zn,removeFromPlaylist:wo,removeFromQueue:xv,runMpdRequest:En,saveQueue:Ev,seek:Cs,setVolume:kr,syncLibrary:Tv,toggleFavorite:yo,togglePlay:Ln,toggleRandom:Zr,toggleRepeat:Jr},Symbol.toStringTag,{value:"Module"}));function Is(e,t=2e3){let r;const a=i=>{i.type==="mousedown"&&i.button!==0||(r=setTimeout(()=>{e.dispatchEvent(new CustomEvent("longpress",{detail:{originalEvent:i}}))},t))},s=()=>{clearTimeout(r)};return e.addEventListener("mousedown",a),e.addEventListener("touchstart",a,{passive:!0}),e.addEventListener("mouseup",s),e.addEventListener("mouseleave",s),e.addEventListener("touchend",s),e.addEventListener("touchcancel",s),e.addEventListener("touchmove",s),{destroy(){e.removeEventListener("mousedown",a),e.removeEventListener("touchstart",a),e.removeEventListener("mouseup",s),e.removeEventListener("mouseleave",s),e.removeEventListener("touchend",s),e.removeEventListener("touchcancel",s),e.removeEventListener("touchmove",s)}}}var Pv=S('<div class="drag-handle svelte-5cs2hz" title="Drag to reorder"><div class="icon-small svelte-5cs2hz"><!></div></div>'),Cv=S('<div class="eq-anim svelte-5cs2hz"><span class="bar b1 svelte-5cs2hz"></span> <span class="bar b2 svelte-5cs2hz"></span> <span class="bar b3 svelte-5cs2hz"></span></div>'),Lv=S('<div class="icon-small svelte-5cs2hz"><!></div>'),zv=S('<div class="icon-small svelte-5cs2hz"><!></div>'),Rv=S('<div class="icon-small accent svelte-5cs2hz"><!></div>'),jv=S('<span class="num svelte-5cs2hz"> </span>'),Iv=S('<button class="num-box svelte-5cs2hz"><!></button>'),Nv=S('<div slot="fallback" class="icon-ph svelte-5cs2hz"><!></div>'),Ov=S('<span class="meta-tag quality svelte-5cs2hz"> </span>'),Dv=S('<button class="btn-icon small remove svelte-5cs2hz"><!></button>'),Fv=S('<div class="dur svelte-5cs2hz"> </div>'),qv=S('<div role="button" tabindex="0"><div class="left svelte-5cs2hz"><!> <div class="thumb svelte-5cs2hz"><!></div></div> <div class="info svelte-5cs2hz"><div class="title-row svelte-5cs2hz"><div class="title text-ellipsis svelte-5cs2hz"> </div> <!></div> <div> </div></div> <div class="right svelte-5cs2hz"><button class="btn-icon small context-menu-btn svelte-5cs2hz" title="Options"><!></button> <button><!></button> <!></div></div>');function Sa(e,t){kt(t,!1);const r=()=>_e(zr,"$favorites",o),a=()=>_e(Yt,"$navigationStack",o),s=()=>_e(It,"$activeMenuTab",o),i=()=>_e(Fr,"$stations",o),[o,l]=Rt(),d=T(),c=T(),u=T(),h=T(),f=T(),p=T(),x=T(),E=T(),k=T(),w=T(),F=T(),Z=T(),X=T(),K=T(),se=T(),I=T(),q=T();let C=gt(t,"track",8),ye=gt(t,"index",8),he=gt(t,"isEditable",8,!1),P=gt(t,"playingIndex",24,()=>-1),R=gt(t,"playingFile",8,null),G=gt(t,"isPlaying",8,!1);const D=$s();let W=T(!1),L=T(!1);function j(N){if(n(x))return"â";if(!N)return"0:00";const V=parseInt(N,10),pe=Math.floor(V/60),Oe=V%60;return`${pe}:${Oe.toString().padStart(2,"0")}`}function we(N){N.stopPropagation(),n(f)?Ln():D("play")}function H(){return n(c)?.view==="details"&&n(c).data?.name?{type:"playlist",playlistName:n(c).data.name,index:ye()}:n(u)?{type:"queue",index:ye()}:{type:"general"}}function J(N){N.stopPropagation(),Ya(N,C(),H())}function de(N){he()||Ya(N.detail.originalEvent,C(),H())}function $(N){N.stopPropagation(),!n(x)&&C().artist&&(It.set("artists"),Nr("albums_by_artist",{name:C().artist}))}te(()=>O(C()),()=>{C()&&g(L,!1)}),te(()=>(r(),O(C())),()=>{g(d,r().has(C().file))}),te(()=>a(),()=>{g(c,a()[a().length-1])}),te(()=>(n(c),s()),()=>{g(u,n(c)?.view==="queue"||n(c)?.view==="root"&&s()==="queue")}),te(()=>(n(u),O(ye()),O(P())),()=>{g(h,n(u)?Number(ye())===P():!1)}),te(()=>(O(C()),O(R())),()=>{g(f,C().file===R())}),te(()=>(n(f),n(h)),()=>{g(p,n(f)&&!n(h))}),te(()=>O(C()),()=>{g(x,C().file&&(C().file.startsWith("http")||C().file.includes("RADIO")))}),te(()=>(n(h),O(G()),n(W)),()=>{g(E,n(h)&&G()&&n(W))}),te(()=>(n(h),O(G()),n(W)),()=>{g(k,n(h)&&G()&&!n(W))}),te(()=>(n(h),O(G()),n(W)),()=>{g(w,n(h)&&!G()&&!n(W))}),te(()=>(n(W),n(E)),()=>{g(F,n(W)&&!n(E))}),te(()=>O(C()),()=>{g(Z,C().title||C().file?.split("/").pop())}),te(()=>O(C()),()=>{g(X,C().artist||"Unknown")}),te(()=>O(C()),()=>{g(K,j(C().time))}),te(()=>O(C()),()=>{g(se,C().qualityBadge?C().qualityBadge.split(" ")[0]:null)}),te(()=>{},()=>{g(I,null)}),te(()=>(n(L),O(C()),i(),n(I),Va),()=>{g(q,n(L)?xa(C(),i(),n(I)):Va(C(),"sm",i(),n(I)))}),Bt(),At();var U=qv();let re;var ue=v(U),Q=v(ue);{var oe=N=>{var V=Pv(),pe=v(V),Oe=v(pe);ne(Oe,()=>(O(y),b(()=>y.DRAG_HANDLE))),A("mousedown",V,Ue=>D("startdrag",Ue)),A("touchstart",V,Ue=>D("startdrag",Ue),void 0,!0),A("click",V,Qt(function(Ue){Ha.call(this,t,Ue)})),m(N,V)},Y=N=>{var V=Iv(),pe=v(V);{var Oe=Ie=>{var Xe=Cv();m(Ie,Xe)},Ue=Ie=>{var Xe=rt(),Ke=Pe(Xe);{var We=Ye=>{var Ze=Lv(),De=v(Ze);ne(De,()=>(O(y),b(()=>y.PAUSE))),m(Ye,Ze)},He=Ye=>{var Ze=rt(),De=Pe(Ze);{var $e=Qe=>{var nt=zv(),dt=v(nt);ne(dt,()=>(O(y),b(()=>y.PLAY))),m(Qe,nt)},Ne=Qe=>{var nt=rt(),dt=Pe(nt);{var St=_t=>{var ut=Rv(),ht=v(ut);ne(ht,()=>(O(y),b(()=>y.PLAY))),m(_t,ut)},yt=_t=>{var ut=jv(),ht=v(ut);le(()=>ve(ht,ye()+1)),m(_t,ut)};z(dt,_t=>{n(w)?_t(St):_t(yt,!1)},!0)}m(Qe,nt)};z(De,Qe=>{n(F)?Qe($e):Qe(Ne,!1)},!0)}m(Ye,Ze)};z(Ke,Ye=>{n(E)?Ye(We):Ye(He,!1)},!0)}m(Ie,Xe)};z(pe,Ie=>{n(k)?Ie(Oe):Ie(Ue,!1)})}A("click",V,we),m(N,V)};z(Q,N=>{he()?N(oe):N(Y,!1)})}var ee=_(Q,2),ce=v(ee);sa(ce,{get src(){return n(q)},get alt(){return n(Z)},radius:"4px",$$events:{error:()=>g(L,!0)},$$slots:{fallback:(N,V)=>{var pe=Nv(),Oe=v(pe);ne(Oe,()=>(n(x),O(y),b(()=>n(x)?y.RADIO:y.ALBUMS))),ot(1,pe,()=>bt),m(N,pe)}}});var fe=_(ue,2),ke=v(fe),B=v(ke),me=v(B),Ce=_(B,2);{var Le=N=>{var V=Ov(),pe=v(V);le(()=>ve(pe,n(se))),m(N,V)};z(Ce,N=>{n(se)&&!n(x)&&N(Le)})}var Fe=_(ke,2);let Te;var M=v(Fe),ie=_(fe,2),Se=v(ie),xe=v(Se);ne(xe,()=>(O(y),b(()=>y.DOTS)));var Me=_(Se,2);let Ee;var ze=v(Me);ne(ze,()=>(n(d),O(y),b(()=>n(d)?y.HEART_FILLED:y.HEART)));var Re=_(Me,2);{var ae=N=>{var V=Dv(),pe=v(V);ne(pe,()=>(O(y),b(()=>y.REMOVE))),A("click",V,Qt(()=>D("remove",{index:ye()}))),m(N,V)},ge=N=>{var V=Fv(),pe=v(V);le(()=>ve(pe,n(K))),m(N,V)};z(Re,N=>{he()?N(ae):N(ge,!1)})}Nt(()=>A("click",U,()=>!n(h)&&D("play"))),Nt(()=>A("mouseenter",U,()=>g(W,!0))),Nt(()=>A("mouseleave",U,()=>g(W,!1))),Ss(U,N=>Is?.(N)),Nt(()=>A("longpress",U,de)),le(()=>{re=Ve(U,1,"row svelte-5cs2hz",null,re,{active:n(h),striped:n(p),editable:he()}),qt(B,"title",n(Z)),ve(me,n(Z)),Te=Ve(Fe,1,"artist text-ellipsis svelte-5cs2hz",null,Te,{link:!n(x)}),ve(M,n(X)),Ee=Ve(Me,1,"btn-icon small svelte-5cs2hz",null,Ee,{liked:n(d)})}),A("click",Fe,$),A("click",Se,J),A("click",Me,Qt(()=>yo(C()))),m(e,U),xt(),l()}const vn=100,fi=5,hi=25,pi=3;function Bv({tracksStore:e,onMoveTrack:t}){const r=Be(!1),a=Be(!1),s=Be(!1),i=Be(null),o=Be(null),l=Be(null),d=Be({x:0,y:0,width:0,height:0,grabOffsetX:0,grabOffsetY:0}),c=Be(null);let u=!1,h=0,f=0,p=0,x=0;const E={scrollContainer:null,listBodyContainer:null};let k=null;function w(P,R,G){const D=P.detail;if(D.button===2||(window.getSelection&&window.getSelection().removeAllRanges(),!E.scrollContainer))return;const L=E.scrollContainer.querySelectorAll(".row-wrapper")[R];if(!L)return;const j=L.getBoundingClientRect(),we=D.touches?D.touches[0].clientX:D.clientX,H=D.touches?D.touches[0].clientY:D.clientY,J=we-j.left,de=H-j.top;u=!0,r.set(!1),a.set(!1),h=we,f=H,p=we,x=H,i.set(R),o.set(R),c.set(G),l.set(null),d.set({x:we,y:H,width:j.width,height:j.height,grabOffsetX:J,grabOffsetY:de})}function F(P){if(!u||Je(a))return;const R=P.touches?P.touches[0].clientX:P.clientX,G=P.touches?P.touches[0].clientY:P.clientY;if(!Je(r)){const D=Math.abs(R-h),W=Math.abs(G-f);if(D<pi&&W<pi)return;r.set(!0)}P.cancelable&&P.preventDefault(),p=R,x=G,d.update(D=>({...D,x:p,y:x})),q(x),Z()}function Z(){if(!E.listBodyContainer)return;const P=E.listBodyContainer.getBoundingClientRect(),R=Je(d),D=x-P.top-R.grabOffsetY+R.height/2,W=Je(e).length;if(D<0){o.set(0);return}if(D>P.height){o.set(W);return}const L=Array.from(E.listBodyContainer.querySelectorAll(".row-wrapper"));let j=-1,we=1/0;L.forEach((H,J)=>{const de=H.offsetTop+H.offsetHeight/2,$=Math.abs(D-de);$<we&&(we=$,j=J)}),j!==-1&&o.set(j)}function X(P){if(u){if(u=!1,!Je(r)){se();return}K()}}async function K(){ye(),Z(),r.set(!1),a.set(!0);const P=Je(o);if(E.listBodyContainer&&P!==null){const j=E.listBodyContainer.querySelectorAll(".row-wrapper"),we=E.listBodyContainer.getBoundingClientRect(),H=j[P];let J=0,de=0,$=!1;if(H)J=we.top+H.offsetTop,de=we.left+H.offsetLeft,$=!0;else if(P>=j.length&&j.length>0){const U=j[j.length-1];J=we.top+U.offsetTop+U.offsetHeight,de=we.left+U.offsetLeft,$=!0}else j.length===0&&(J=we.top,de=we.left,$=!0);$&&d.update(U=>({...U,y:J+U.grabOffsetY,x:de+U.grabOffsetX}))}await new Promise(j=>setTimeout(j,250)),s.set(!0),await ma();const R=Je(i),G=Je(e).length;let D=Math.max(0,Math.min(P,G)),W=D;if(R!==null&&R!==D){const j=[...Je(e)],[we]=j.splice(R,1);W=Math.max(0,Math.min(W,j.length)),j.splice(W,0,we),e.set(j),t&&t(R,W),i.set(W)}await ma(),c.set(null),i.set(null),o.set(null),a.set(!1);const L=R!==D?W:R;l.set(L),await ma(),requestAnimationFrame(()=>{requestAnimationFrame(()=>{s.set(!1),setTimeout(()=>{l.set(null)},300)})})}function se(){u=!1,I()}function I(){r.set(!1),a.set(!1),i.set(null),o.set(null),c.set(null),ye()}function q(P){if(!E.scrollContainer)return;const{top:R,bottom:G}=E.scrollContainer.getBoundingClientRect(),D=P-R,W=G-P;ye();let L=0;if(D<vn&&D>0){const j=1-D/vn;L=-(fi+hi*(j*j))}else if(W<vn&&W>0){const j=1-W/vn;L=fi+hi*(j*j)}L!==0&&C(L)}function C(P){k||(k=requestAnimationFrame(function R(){E.scrollContainer&&(E.scrollContainer.scrollTop+=P,Je(r)&&(d.update(G=>({...G,x:p,y:x})),Z(),k=requestAnimationFrame(R)))}))}function ye(){k&&(cancelAnimationFrame(k),k=null)}function he(P,R,G,D,W,L){return L||!R&&!G||D===null||W===null?"":P===D?"opacity: 0; pointer-events: none;":D===W?"":D<W&&P>D&&P<=W?"transform: translateY(-100%);":D>W&&P>=W&&P<D?"transform: translateY(100%);":""}return{isDragging:r,isDropping:a,isReordering:s,draggingIndex:i,hoverIndex:o,justDroppedIndex:l,draggedItemData:c,ghostCoords:d,refs:E,onDragInit:w,onPointerMove:F,onPointerUp:X,getRowStyle:he,cancelDrag:se}}var Uv=S('<div><div style="pointer-events: none; width: 100%; height: 100%;" class="svelte-ym6b2"><!></div></div>'),Hv=S('<div class="skeleton-row svelte-ym6b2"><div class="sk-left svelte-ym6b2"><!> <!></div> <div class="sk-info svelte-ym6b2"><!> <!></div> <div class="sk-right svelte-ym6b2"><!></div></div>'),Yv=S('<div class="skeletons-wrapper svelte-ym6b2"></div>'),Vv=S("<div><!></div>"),Wv=S('<div class="content-padded svelte-ym6b2" style="text-align: center; opacity: 0.5;"> </div>'),Qv=S("<!> <!>",1),Xv=S('<div><!> <div class="list-body svelte-ym6b2"><!> <!></div></div>');function rn(e,t){kt(t,!1);const r=()=>_e(Yt,"$navigationStack",p),a=()=>_e(It,"$activeMenuTab",p),s=()=>_e(ye,"$isDragging",p),i=()=>_e(he,"$isDropping",p),o=()=>_e(W,"$draggedItemData",p),l=()=>_e(L,"$ghostCoords",p),d=()=>_e(R,"$draggingIndex",p),c=()=>_e(E(),"$itemsStore",p),u=()=>_e(D,"$justDroppedIndex",p),h=()=>_e(P,"$isReordering",p),f=()=>_e(G,"$hoverIndex",p),[p,x]=Rt();let E=gt(t,"itemsStore",8),k=gt(t,"isEditMode",8,!1),w=gt(t,"isLoading",8,!1),F=gt(t,"emptyText",8,"List is empty"),Z=gt(t,"onMoveItem",8,(Y,ee)=>{}),X=T(""),K=T(0),se=T(!1);Dr(async()=>{g(K,Zc(n(X))),!w()&&n(K)>0&&n(q).refs.scrollContainer&&(await ma(),nn(q,n(q).refs.scrollContainer.scrollTop=n(K)),g(se,!0))});async function I(){await ma(),n(q).refs.scrollContainer&&(nn(q,n(q).refs.scrollContainer.scrollTop=n(K)),g(se,!0))}lo(()=>{n(q).cancelDrag(),n(q).refs.scrollContainer&&Kc(n(X),n(q).refs.scrollContainer.scrollTop)});const q=T(Bv({tracksStore:E(),onMoveTrack:(Y,ee)=>{Z()(Y,ee)}})),C=n(q),ye=C.isDragging,he=C.isDropping,P=C.isReordering,R=C.draggingIndex,G=C.hoverIndex,D=C.justDroppedIndex,W=C.draggedItemData,L=C.ghostCoords,j=T(C.refs);function we(Y,ee,ce){k()&&n(q).onDragInit(Y,ee,ce)}te(()=>(r(),a()),()=>{const Y=r(),ee=Y[Y.length-1],ce=a();if(ee&&ee.view==="root")g(X,`root_${ce}`);else if(ee){const fe=ee.data?ee.data.name||ee.data:"unknown";g(X,`${ee.view}_${fe}`)}}),te(()=>(O(w()),n(se),n(K),n(q)),()=>{!w()&&!n(se)&&n(K)>0&&n(q).refs.scrollContainer&&I()}),Bt(),At();var H=Xv();A("mousemove",Cr,function(...Y){n(q).onPointerMove?.apply(this,Y)}),A("mouseup",Cr,function(...Y){n(q).onPointerUp?.apply(this,Y)}),A("touchmove",Cr,function(...Y){n(q).onPointerMove?.apply(this,Y)},void 0,!1),A("touchend",Cr,function(...Y){n(q).onPointerUp?.apply(this,Y)}),A("touchcancel",Cr,function(...Y){n(q).onPointerUp?.apply(this,Y)});let J;var de=v(H);{var $=Y=>{var ee=Uv();let ce;var fe=v(ee),ke=v(fe);dn(ke,t,"row",{get item(){return o()},get index(){return d()},isGhost:!0,startDrag:()=>{}}),le(()=>{ce=Ve(ee,1,"floating-item svelte-ym6b2",null,ce,{dropping:i()}),lt(ee,`
            top: ${l(),b(()=>l().y-l().grabOffsetY)??""}px; 
            left: ${l(),b(()=>l().x-l().grabOffsetX)??""}px;
            width: ${l(),b(()=>l().width)??""}px; 
            height: ${l(),b(()=>l().height)??""}px;
        `)}),m(Y,ee)};z(de,Y=>{(s()||i())&&o()&&Y($)})}var U=_(de,2),re=v(U);dn(re,t,"header",{});var ue=_(re,2);{var Q=Y=>{var ee=Yv();Et(ee,4,()=>Array(10),$r,(ce,fe)=>{var ke=Hv(),B=v(ke),me=v(B);Wt(me,{width:"24px",height:"24px",radius:"4px",style:"opacity: 0.3"});var Ce=_(me,2);Wt(Ce,{width:"40px",height:"40px",radius:"4px",style:"margin-left: 12px;"});var Le=_(B,2),Fe=v(Le);Wt(Fe,{width:"40%",height:"14px",radius:"4px",style:"margin-bottom: 6px;"});var Te=_(Fe,2);Wt(Te,{width:"25%",height:"12px",radius:"4px",style:"opacity: 0.6"});var M=_(Le,2),ie=v(M);Wt(ie,{width:"30px",height:"12px",radius:"4px"}),m(ce,ke)}),m(Y,ee)},oe=Y=>{var ee=Qv(),ce=Pe(ee);Et(ce,3,c,(B,me)=>B._uid||me,(B,me,Ce)=>{var Le=Vv();let Fe;var Te=v(Le);dn(Te,t,"row",{get item(){return n(me)},get index(){return n(Ce)},isGhost:!1,startDrag:M=>we(M,n(Ce),n(me))}),le(M=>{Fe=Ve(Le,1,"row-wrapper svelte-ym6b2",null,Fe,{"ghost-placeholder":d()===n(Ce)&&(s()||i()),"just-dropped":u()===n(Ce),"no-transition":h()}),lt(Le,M)},[()=>(n(q),O(n(Ce)),s(),i(),d(),f(),h(),b(()=>n(q).getRowStyle(n(Ce),s(),i(),d(),f(),h())))]),m(B,Le)});var fe=_(ce,2);{var ke=B=>{var me=Wv(),Ce=v(me);le(()=>ve(Ce,F())),m(B,me)};z(fe,B=>{c(),b(()=>c().length===0)&&B(ke)})}m(Y,ee)};z(ue,Y=>{w()?Y(Q):Y(oe,!1)})}Or(U,Y=>nn(j,n(j).listBodyContainer=Y),()=>n(j)?.listBodyContainer),Or(H,Y=>nn(j,n(j).scrollContainer=Y),()=>n(j)?.scrollContainer),le(()=>J=Ve(H,1,"base-list-scroll-container svelte-ym6b2",null,J,{dragging:s()})),ot(1,U,()=>bt,()=>({duration:200})),m(e,H),xt(),x()}var Gv=S('<div slot="fallback" class="icon-fallback svelte-1eh2rsb"><!></div>'),Kv=S('<span class="meta-tag svelte-1eh2rsb"> </span>'),Zv=S('<div class="header-subtitle-row svelte-1eh2rsb"><h2 class="header-sub-text svelte-1eh2rsb"> </h2> <!></div>'),Jv=S('<span class="meta-tag svelte-1eh2rsb"> </span>'),ed=S('<span class="meta-tag svelte-1eh2rsb"> </span>'),td=S('<span class="meta-tag quality svelte-1eh2rsb"> </span>'),rd=S('<div slot="header" class="content-padded svelte-1eh2rsb"><div class="view-header svelte-1eh2rsb"><div class="header-art svelte-1eh2rsb"><div style="width: 100%; height: 100%;" class="svelte-1eh2rsb"><!></div></div> <div class="header-info svelte-1eh2rsb"><div class="header-text-group svelte-1eh2rsb"><div class="header-label svelte-1eh2rsb"> </div> <h1 class="header-title svelte-1eh2rsb"> </h1> <!> <div class="meta-badges svelte-1eh2rsb"><!> <!> <!></div></div> <div class="header-actions svelte-1eh2rsb"><button class="btn-primary svelte-1eh2rsb"> </button> <button class="btn-secondary svelte-1eh2rsb"> </button></div></div></div></div>'),ad=S('<div slot="row" class="svelte-1eh2rsb"><!></div>'),nd=S("<button> </button>"),sd=S('<div class="sort-backdrop svelte-1eh2rsb"></div> <div class="sort-menu svelte-1eh2rsb"></div>',1),id=S('<div class="sort-wrapper svelte-1eh2rsb"><button class="sort-trigger svelte-1eh2rsb"><span class="svelte-1eh2rsb"> </span> <span class="sort-trigger-icon svelte-1eh2rsb"><!></span></button> <!></div>'),od=S('<div class="music-card skeleton-card svelte-1eh2rsb"><div class="card-img-container svelte-1eh2rsb"><!></div> <div class="card-title svelte-1eh2rsb" style="margin-top: 12px;"><!></div> <div class="card-sub-row svelte-1eh2rsb" style="margin-top: 6px;"><!></div></div>'),ld=S('<div class="music-grid svelte-1eh2rsb"></div>'),cd=S('<div class="group-header header-label svelte-1eh2rsb"> </div>'),vd=S('<div slot="fallback" class="icon-fallback svelte-1eh2rsb"><!></div>'),dd=S('<div class="card-sub text-ellipsis svelte-1eh2rsb"> </div>'),ud=S('<div class="card-badge svelte-1eh2rsb"> </div>'),fd=S('<div class="card-badge quality svelte-1eh2rsb"> </div>'),hd=S('<div class="music-card svelte-1eh2rsb" role="button" tabindex="0"><div class="card-img-container svelte-1eh2rsb"><!> <div class="play-overlay svelte-1eh2rsb"><span class="overlay-icon svelte-1eh2rsb"><!></span></div></div> <div class="card-title svelte-1eh2rsb"> </div> <div class="card-sub-row svelte-1eh2rsb"><!> <!> <!></div></div>'),pd=S('<div class="empty-text svelte-1eh2rsb">No results found</div>'),gd=S('<div class="music-grid svelte-1eh2rsb"></div>'),_d=S('<div class="content-padded svelte-1eh2rsb"><div class="search-input-container svelte-1eh2rsb"><span class="search-icon svelte-1eh2rsb"><!></span> <input type="text" class="svelte-1eh2rsb"/> <!></div> <!></div>'),md=S("<div><!></div>");function bd(e,t){kt(t,!1);const r=()=>_e(u,"$itemsStore",s),a=()=>_e(Yt,"$navigationStack",s),[s,i]=Rt(),o=T(),l=T(),d=T();let c=gt(t,"activeCategory",8,"artists");const u=Be([]);let h=T(!0),f=T(""),p=T("name"),x=T(!1);const E=[{id:"name",label:"A-Z"},{id:"artist",label:"Artist"},{id:"year",label:"Oldest"},{id:"year_desc",label:"Newest"}];let k=T(!1),w=T(!1),F=T(null),Z=T(""),X=T(""),K=T(""),se=T(0),I=0;function q(){g(x,!n(x))}function C(H){g(p,H),g(x,!1)}function ye(H,J){if(!H||H.length===0)return[];const de=[...H].sort(($,U)=>{switch(J){case"name":return $.displayName.localeCompare(U.displayName,void 0,{sensitivity:"base"});case"artist":const re=$.artist||"",ue=U.artist||"",Q=re.localeCompare(ue,void 0,{sensitivity:"base"});return Q!==0?Q:(parseInt($.year)||0)-(parseInt(U.year)||0);case"year":return(parseInt($.year)||0)-(parseInt(U.year)||0);case"year_desc":return(parseInt(U.year)||0)-(parseInt($.year)||0);default:return 0}});if(J==="artist"){const $=[];let U=null;return de.forEach(re=>{const ue=re.artist||"Unknown Artist";ue!==U&&($.push({_uid:`header-${ue}`,isHeader:!0,title:ue}),U=ue),$.push(re)}),$}return de}async function he(H,J){if(!J)return;const de=++I;g(h,!0),u.set([]),g(F,J.data),g(Z,""),g(X,""),g(K,""),g(se,0),console.log(`[LibraryView #${de}] Start loading:`,J);try{let $=[];if(J.view==="root")$=H==="artists"?await Rr.getArtists():await Rr.getAlbums();else if(J.view==="albums_by_artist"){const re=J.data.name||J.data;$=await Rr.getArtistAlbums(re),g(p,"year")}else if(J.view==="tracks_by_album"){const re=J.data.name||J.data,ue=J.data.artist;$=await Rr.getAlbumTracks(re,ue)}if(de!==I){console.warn(`[LibraryView #${de}] Request cancelled (stale).`);return}const U=$.map((re,ue)=>{const oe=typeof re=="string"?{name:re}:re;let Y=String(oe.year||"");return Y.length>4&&(Y=Y.substring(0,4)),{...oe,displayName:oe.name||oe.title||oe.artist||"Unknown",thumbFile:oe.file||null,year:Y,_uid:(oe.file||oe.name||ue)+H+J.view}});if(console.log(`[LibraryView #${de}] Setting ${U.length} items.`),u.set(U),J.view==="tracks_by_album"&&U.length>0){g(F,U[0]),g(se,U.length),g(K,U[0].year);const re=U.reduce((ue,Q)=>ue+(Q.time||0),0);if(re>0){const ue=Math.floor(re/3600),Q=Math.floor(re%3600/60);g(Z,ue>0?`${ue} hr ${Q} min`:`${Q} min`)}U[0].qualityBadge&&g(X,U[0].qualityBadge)}}catch($){de===I&&(console.error($),u.set([]))}finally{de===I&&g(h,!1)}}function P(H){n(d).view==="root"?c()==="artists"?Nr("albums_by_artist",H):Nr("tracks_by_album",H):n(d).view==="albums_by_artist"&&Nr("tracks_by_album",H)}function R(){const H=r();if(H.length>0){const J=n(d).data.name||n(d).data.displayName||"this selection";ur({title:"Replace Queue?",message:`This will clear your queue and play all tracks from "${J}".`,confirmLabel:"Play",type:"confirm",onConfirm:()=>{g(k,!0),Ls(H)}})}}function G(){const H=r();H.length>0&&(g(w,!0),zs(H),setTimeout(()=>{g(w,!1)},2e3))}te(()=>O(c()),()=>{c()&&(g(f,""),c(),g(p,"name"))}),te(()=>(n(p),y),()=>{g(o,n(p)==="year_desc"?y.SORT_ASC:y.SORT_DESC)}),te(()=>(r(),n(f),n(p)),()=>{g(l,ye(r().filter(H=>{if(!n(f))return!0;const J=n(f).toLowerCase();return H.displayName.toLowerCase().includes(J)||H.artist&&H.artist.toLowerCase().includes(J)}),n(p)))}),te(()=>a(),()=>{g(d,a()[a().length-1])}),te(()=>(O(c()),n(d)),()=>{he(c(),n(d))}),te(()=>n(d),()=>{n(d)&&(g(k,!1),g(w,!1),g(x,!1))}),Bt(),At();var D=md();let W;var L=v(D);{var j=H=>{rn(H,{get itemsStore(){return u},get isLoading(){return n(h)},isEditMode:!1,emptyText:"No tracks found",$$slots:{header:(J,de)=>{var $=rd(),U=v($),re=v(U),ue=v(re),Q=v(ue);{let ae=ct(()=>(O(xa),n(F),b(()=>xa(n(F)))));sa(Q,{get src(){return n(ae)},alt:"Art",radius:"8px",$$slots:{fallback:(ge,N)=>{var V=Gv(),pe=v(V);ne(pe,()=>(O(y),b(()=>y.ALBUMS))),m(ge,V)}}})}var oe=_(re,2),Y=v(oe),ee=v(Y),ce=v(ee),fe=_(ee,2),ke=v(fe),B=_(fe,2);{var me=ae=>{var ge=Zv(),N=v(ge),V=v(N),pe=_(N,2);{var Oe=Ue=>{var Ie=Kv(),Xe=v(Ie);le(()=>ve(Xe,n(K))),m(Ue,Ie)};z(pe,Ue=>{n(K)&&n(K)!=="0"&&Ue(Oe)})}le(()=>ve(V,(n(F),b(()=>n(F).artist)))),m(ae,ge)};z(B,ae=>{n(F),b(()=>n(F)&&n(F).artist)&&ae(me)})}var Ce=_(B,2),Le=v(Ce);{var Fe=ae=>{var ge=Jv(),N=v(ge);le(()=>ve(N,`${n(se)??""} tracks`)),m(ae,ge)};z(Le,ae=>{n(se)>0&&ae(Fe)})}var Te=_(Le,2);{var M=ae=>{var ge=ed(),N=v(ge);le(()=>ve(N,n(Z))),m(ae,ge)};z(Te,ae=>{n(Z)&&ae(M)})}var ie=_(Te,2);{var Se=ae=>{var ge=td(),N=v(ge);le(()=>ve(N,n(X))),m(ae,ge)};z(ie,ae=>{n(X)&&ae(Se)})}var xe=_(Y,2),Me=v(xe),Ee=v(Me),ze=_(Me,2),Re=v(ze);le(()=>{ve(ce,(n(d),b(()=>n(d).view==="albums_by_artist"?"Artist":"Album"))),qt(fe,"title",(n(d),b(()=>n(d).data.name||n(d).data.displayName))),ve(ke,(n(d),b(()=>n(d).data.name||n(d).data.displayName||"Unknown"))),Me.disabled=n(k),ve(Ee,n(k)?"Playing...":"Play All"),ze.disabled=n(w),ve(Re,n(w)?"Added":"To Queue")}),A("click",Me,R),A("click",ze,G),m(J,$)},row:(J,de)=>{var $=ad();const U=ct(()=>de.item),re=ct(()=>de.index);var ue=v($);Sa(ue,{get track(){return n(U)},get index(){return n(re)},isEditable:!1,$$events:{play:()=>zn(n(U))}}),m(J,$)}}})},we=H=>{var J=_d(),de=v(J),$=v(de),U=v($);ne(U,()=>(O(y),b(()=>y.SEARCH)));var re=_($,2),ue=_(re,2);{var Q=ce=>{var fe=id(),ke=v(fe),B=v(ke),me=v(B),Ce=_(B,2),Le=v(Ce);ne(Le,()=>n(o));var Fe=_(ke,2);{var Te=M=>{var ie=sd(),Se=Pe(ie),xe=_(Se,2);Et(xe,5,()=>E,$r,(Me,Ee)=>{var ze=nd();let Re;var ae=v(ze);le(()=>{Re=Ve(ze,1,"sort-item svelte-1eh2rsb",null,Re,{selected:n(p)===n(Ee).id}),ve(ae,(n(Ee),b(()=>n(Ee).label)))}),A("click",ze,()=>C(n(Ee).id)),m(Me,ze)}),A("click",Se,q),ot(3,Se,()=>bt,()=>({duration:100})),ot(3,xe,()=>Ms,()=>({start:.95,duration:100})),m(M,ie)};z(Fe,M=>{n(x)&&M(Te)})}le(M=>ve(me,M),[()=>(n(p),b(()=>E.find(M=>M.id===n(p))?.label))]),A("click",ke,q),m(ce,fe)};z(ue,ce=>{O(c()),n(d),b(()=>c()==="albums"||n(d).view==="albums_by_artist")&&ce(Q)})}var oe=_(de,2);{var Y=ce=>{var fe=ld();Et(fe,4,()=>Array(12),$r,(ke,B)=>{var me=od(),Ce=v(me),Le=v(Ce);Wt(Le,{width:"100%",height:"100%",radius:"8px"});var Fe=_(Ce,2),Te=v(Fe);Wt(Te,{width:"80%",height:"14px",radius:"4px"});var M=_(Fe,2),ie=v(M);Wt(ie,{width:"50%",height:"12px",radius:"4px",style:"opacity: 0.6"}),m(ke,me)}),m(ce,fe)},ee=ce=>{var fe=gd();Et(fe,5,()=>n(l),ke=>ke._uid,(ke,B)=>{var me=rt(),Ce=Pe(me);{var Le=Te=>{var M=cd(),ie=v(M);le(()=>ve(ie,(n(B),b(()=>n(B).title)))),m(Te,M)},Fe=Te=>{var M=hd(),ie=v(M),Se=v(ie);{let Ie=ct(()=>(O(Va),n(B),b(()=>Va(n(B),"md"))));sa(Se,{get src(){return n(Ie)},get alt(){return n(B),b(()=>n(B).displayName)},radius:"8px",$$slots:{fallback:(Xe,Ke)=>{var We=vd(),He=v(We);{var Ye=De=>{var $e=rt(),Ne=Pe($e);ne(Ne,()=>(O(y),b(()=>y.ARTISTS))),m(De,$e)},Ze=De=>{var $e=rt(),Ne=Pe($e);ne(Ne,()=>(O(y),b(()=>y.ALBUMS))),m(De,$e)};z(He,De=>{c()==="artists"?De(Ye):De(Ze,!1)})}m(Xe,We)}}})}var xe=_(Se,2),Me=v(xe),Ee=v(Me);ne(Ee,()=>(O(y),b(()=>y.PLAY)));var ze=_(ie,2),Re=v(ze),ae=_(ze,2),ge=v(ae);{var N=Ie=>{var Xe=dd(),Ke=v(Xe);le(()=>ve(Ke,(n(B),b(()=>n(B).artist)))),m(Ie,Xe)};z(ge,Ie=>{n(B),b(()=>n(B).artist)&&Ie(N)})}var V=_(ge,2);{var pe=Ie=>{var Xe=ud(),Ke=v(Xe);le(()=>ve(Ke,(n(B),b(()=>n(B).year)))),m(Ie,Xe)};z(V,Ie=>{n(B),b(()=>n(B).year&&n(B).year!=="0")&&Ie(pe)})}var Oe=_(V,2);{var Ue=Ie=>{var Xe=fd(),Ke=v(Xe);le(We=>ve(Ke,We),[()=>(n(B),b(()=>n(B).qualityBadge.split(" ")[0]))]),m(Ie,Xe)};z(Oe,Ie=>{n(B),b(()=>n(B).qualityBadge)&&Ie(Ue)})}le(()=>ve(Re,(n(B),b(()=>n(B).displayName)))),A("click",M,()=>P(n(B))),A("keypress",M,Ie=>Ie.key==="Enter"&&P(n(B))),m(Te,M)};z(Ce,Te=>{n(B),b(()=>n(B).isHeader)?Te(Le):Te(Fe,!1)})}m(ke,me)},ke=>{var B=pd();m(ke,B)}),m(ce,fe)};z(oe,ce=>{n(h)?ce(Y):ce(ee,!1)})}le(()=>qt(re,"placeholder",`Filter ${c()??""}...`)),Gr(re,()=>n(f),ce=>g(f,ce)),m(H,J)};z(L,H=>{n(d),b(()=>n(d)?.view==="tracks_by_album")?H(j):H(we,!1)})}le(()=>W=Ve(D,1,"view-container svelte-1eh2rsb",null,W,{scrollable:n(d)?.view!=="tracks_by_album"})),m(e,D),xt(),i()}var yd=S('<div class="music-card svelte-1otxnt7"><!> <!></div>'),wd=S('<div class="music-grid svelte-1otxnt7"></div>'),kd=S('<div slot="fallback" class="icon-fallback svelte-1otxnt7">ð»</div>'),xd=S('<div class="status-badge playing svelte-1otxnt7">PLAYING</div>'),Sd=S('<div class="status-badge paused svelte-1otxnt7">PAUSED</div>'),Ed=S('<span class="overlay-icon svelte-1otxnt7"><!></span>'),Td=S('<div class="card-sub svelte-1otxnt7"> </div>'),$d=S('<div class="card-badge quality svelte-1otxnt7"> </div>'),Md=S('<div role="button" tabindex="0"><div class="card-img-container svelte-1otxnt7"><!> <div class="play-overlay svelte-1otxnt7"><!></div></div> <div class="card-title svelte-1otxnt7"> </div> <div class="card-sub-row svelte-1otxnt7"><!> <!></div></div>'),Ad=S('<div class="empty-text svelte-1otxnt7">No stations found</div>'),Pd=S('<div class="music-grid svelte-1otxnt7"></div> <!>',1),Cd=S('<div class="view-container scrollable svelte-1otxnt7"><div class="content-padded no-bottom-pad svelte-1otxnt7"><div class="search-input-container svelte-1otxnt7"><span class="search-icon svelte-1otxnt7"><!></span> <input type="text" placeholder="Find station..." class="svelte-1otxnt7"/></div></div> <div class="content-padded svelte-1otxnt7"><!></div></div>');function Ld(e,t){kt(t,!1);const r=()=>_e(Fr,"$stations",o),a=()=>_e(wt,"$status",o),s=()=>_e(un,"$isLoadingRadio",o),i=()=>_e(rr,"$currentSong",o),[o,l]=Rt(),d=T(),c=T();let u=T("");te(()=>(r(),n(u)),()=>{g(d,r().filter(K=>{const se=n(u).toLowerCase();return K.name.toLowerCase().includes(se)||K.genre&&K.genre.toLowerCase().includes(se)}))}),te(()=>a(),()=>{g(c,a().bitrate?`${a().bitrate} kbps`:a().format||"")}),Bt(),At();var h=Cd(),f=v(h),p=v(f),x=v(p),E=v(x);ne(E,()=>(O(y),b(()=>y.SEARCH)));var k=_(x,2),w=_(f,2),F=v(w);{var Z=K=>{var se=wd();Et(se,4,()=>Array(12),$r,(I,q)=>{var C=yd(),ye=v(C);Wt(ye,{width:"100%",style:"aspect-ratio:1; border-radius:12px; margin-bottom:12px;"});var he=_(ye,2);Wt(he,{width:"70%",height:"16px"}),m(I,C)}),m(K,se)},X=K=>{var se=Pd(),I=Pe(se);Et(I,5,()=>n(d),$r,(ye,he)=>{const P=ct(()=>(n(he),b(()=>n(he).file))),R=ct(()=>(i(),n(he),O(n(P)),b(()=>i().stationName===n(he).name||i().file===n(P)))),G=ct(()=>(O(ka),n(he),b(()=>ka(n(he)))));var D=Md();let W;var L=v(D),j=v(L);sa(j,{get src(){return n(G)},get alt(){return n(he),b(()=>n(he).name)},radius:"8px",$$slots:{fallback:(ee,ce)=>{var fe=kd();m(ee,fe)}}});var we=_(j,2),H=v(we);{var J=ee=>{var ce=rt(),fe=Pe(ce);{var ke=me=>{var Ce=xd();m(me,Ce)},B=me=>{var Ce=Sd();m(me,Ce)};z(fe,me=>{a(),b(()=>a().state==="play")?me(ke):me(B,!1)})}m(ee,ce)},de=ee=>{var ce=Ed(),fe=v(ce);ne(fe,()=>(O(y),b(()=>y.PLAY))),m(ee,ce)};z(H,ee=>{n(R)?ee(J):ee(de,!1)})}var $=_(L,2),U=v($),re=_($,2),ue=v(re);{var Q=ee=>{var ce=Td(),fe=v(ce);le(()=>ve(fe,(n(he),b(()=>n(he).genre)))),m(ee,ce)};z(ue,ee=>{n(he),b(()=>n(he).genre)&&ee(Q)})}var oe=_(ue,2);{var Y=ee=>{var ce=$d(),fe=v(ce);le(()=>ve(fe,n(c))),ot(1,ce,()=>bt),m(ee,ce)};z(oe,ee=>{n(R)&&n(c)&&ee(Y)})}le(()=>{W=Ve(D,1,"music-card svelte-1otxnt7",null,W,{"is-active":n(R)}),lt(we,n(R)?"opacity: 1":""),ve(U,(n(he),b(()=>n(he).name)))}),A("click",D,()=>js(n(he))),m(ye,D)});var q=_(I,2);{var C=ye=>{var he=Ad();m(ye,he)};z(q,ye=>{n(d),r(),b(()=>n(d).length===0&&r().length>0)&&ye(C)})}m(K,se)};z(F,K=>{s()?K(Z):K(X,!1)})}Gr(k,()=>n(u),K=>g(u,K)),ot(1,h,()=>bt,()=>({duration:200})),m(e,h),xt(),l()}var zd=S('<button class="clear-icon-btn svelte-m7c4tz"><!></button>'),Rd=S('<div class="spinner svelte-m7c4tz"></div>'),jd=S('<div class="content-padded no-bottom-pad svelte-m7c4tz"><div class="search-input-container svelte-m7c4tz"><span class="search-icon svelte-m7c4tz"><!></span> <input type="text" placeholder="Search playlists &amp; tracks..." class="svelte-m7c4tz"/> <!> <!></div></div>'),Id=S('<span class="meta-tag svelte-m7c4tz">Loading...</span>'),Nd=S('<span class="meta-tag svelte-m7c4tz"> </span>'),Od=S('<span class="meta-tag quality svelte-m7c4tz"> </span>'),Dd=S('<span class="meta-tag svelte-m7c4tz"> </span> <!> <!>',1),Fd=S('<div slot="header" class="content-padded svelte-m7c4tz"><div class="view-header svelte-m7c4tz"><div class="header-art svelte-m7c4tz"><div class="header-icon-wrap svelte-m7c4tz"><!></div></div> <div class="header-info svelte-m7c4tz"><div class="header-text-group svelte-m7c4tz"><div class="header-label svelte-m7c4tz">Playlist</div> <h1 class="header-title svelte-m7c4tz"> </h1> <div class="meta-badges svelte-m7c4tz"><!></div></div> <div class="header-actions svelte-m7c4tz"><button class="btn-primary svelte-m7c4tz"> </button> <button class="btn-secondary svelte-m7c4tz"> </button> <button title="Edit"><!></button></div></div></div></div>'),qd=S('<div slot="row" class="svelte-m7c4tz"><!></div>'),Bd=S('<div class="music-card skeleton-card svelte-m7c4tz"><div class="card-img-container svelte-m7c4tz"><!></div> <div style="margin-top: 8px;" class="svelte-m7c4tz"><!></div></div>'),Ud=S('<div class="content-padded svelte-m7c4tz"><div class="music-grid playlists-grid-override svelte-m7c4tz"></div></div>'),Hd=S('<button class="card-menu-btn svelte-m7c4tz"><!></button>'),Yd=S('<div class="music-card svelte-m7c4tz"><div class="card-img-container svelte-m7c4tz"><div class="icon-wrap svelte-m7c4tz"><!></div> <!> <div class="play-overlay svelte-m7c4tz"><span class="overlay-icon svelte-m7c4tz"><!></span></div></div> <div class="card-title svelte-m7c4tz"> </div> <div class="card-sub-row svelte-m7c4tz"><div class="card-sub svelte-m7c4tz"> </div></div></div>'),Vd=S('<div class="music-grid playlists-grid-override svelte-m7c4tz"><div class="music-card svelte-m7c4tz"><div class="card-img-container dashed-cover svelte-m7c4tz"><div class="icon-wrap svelte-m7c4tz"><!></div></div> <div class="card-title svelte-m7c4tz">New Playlist</div></div> <!></div>'),Wd=S('<div class="music-card svelte-m7c4tz"><div class="card-img-container svelte-m7c4tz"><div class="icon-wrap svelte-m7c4tz"><!></div> <div class="play-overlay svelte-m7c4tz"><span class="overlay-icon svelte-m7c4tz"><!></span></div></div> <div class="card-title svelte-m7c4tz"> </div></div>'),Qd=S('<div class="header-label section-spacing svelte-m7c4tz">Matched Playlists</div> <div class="music-grid horizontal section-mb svelte-m7c4tz"></div>',1),Xd=S('<div class="group-container svelte-m7c4tz"><div class="group-header svelte-m7c4tz"><div class="group-icon svelte-m7c4tz"><!></div> <div class="group-title svelte-m7c4tz"> </div> <div class="group-count svelte-m7c4tz"> </div> <div class="group-actions svelte-m7c4tz"><button class="btn-icon small svelte-m7c4tz" title="Play matches"><!></button> <button class="btn-icon small svelte-m7c4tz" title="Add matches to Queue"><!></button></div></div> <div class="group-tracks svelte-m7c4tz"></div></div>'),Gd=S('<div class="header-label section-spacing svelte-m7c4tz">Matched Tracks</div> <div class="grouped-results svelte-m7c4tz"></div>',1),Kd=S('<div class="empty-text svelte-m7c4tz"> </div>'),Zd=S('<div class="empty-text svelte-m7c4tz" style="opacity: 0.7">Searching tracks in playlists...</div>'),Jd=S("<!> <!> <!>",1),eu=S('<div class="content-padded svelte-m7c4tz"><!></div>'),tu=S("<div><!> <!></div>");function ru(e,t){kt(t,!1);const r=()=>_e(wt,"$status",f),a=()=>_e(rr,"$currentSong",f),s=()=>_e(Yt,"$navigationStack",f),i=()=>_e(Cn,"$playlists",f),o=()=>_e(Oa,"$activePlaylistTracks",f),l=()=>_e(ls,"$isLoadingTracks",f),d=()=>_e(Gc,"$activePlaylistName",f),c=()=>_e(Kr,"$queue",f),u=()=>_e(yn,"$currentTheme",f),h=()=>_e(os,"$isLoadingPlaylists",f),[f,p]=Rt(),x=T(),E=T(),k=T(),w=T(),F=T(),Z=T();let X=T(!1),K=T(!1),se=T(!1),I=T(""),q=T(!1),C,ye=0,he=T([]),P=T([]),R=T(""),G=T(""),D=T("");function W(M){g(I,M.target.value),clearTimeout(C),n(I).length>=2?C=setTimeout(()=>{L(n(I))},600):(g(q,!1),g(he,[]),g(P,[]))}async function L(M){if(!M)return;ye++;const ie=ye;g(q,!0);const Se=M.toLowerCase();g(he,i().filter(Ee=>Ee.name.toLowerCase().includes(Se)));let xe=[];const Me=i().filter(Ee=>Ee.name!=="Favorites");for(const Ee of Me){if(ie!==ye)break;try{const ze=await Ae.send(`listplaylistinfo "${Ee.name.replace(/"/g,'\\"')}"`),ge=tr.parseTracks(ze).map((N,V)=>({...N,playlistPos:V})).filter(N=>N.title&&N.title.toLowerCase().includes(Se)||N.artist&&N.artist.toLowerCase().includes(Se));if(ge.length>0){const N=ge.map(V=>({...V,_uid:Math.random()}));xe.push({playlist:Ee,tracks:N}),g(P,[...xe])}}catch(ze){console.warn(`Failed to search in playlist ${Ee.name}`,ze)}}ie===ye&&g(q,!1)}function j(M){n(X)||zn(M)}function we(M){M.deltaY!==0&&(M.currentTarget.scrollLeft+=M.deltaY)}function H(M,ie){ur({title:"Play Search Results?",message:`This will clear your queue and play ${M.length} matching tracks from "${ie}".`,confirmLabel:"Play",type:"confirm",onConfirm:()=>{Ls(M)}})}function J(M){!M||M.length===0||zs(M)}Dr(()=>{!n(F)&&i().length===0&&Rs()});function de(M){const ie=M.reduce((xe,Me)=>xe+(parseFloat(Me.time)||0),0);if(ie>0){const xe=Math.floor(ie/3600),Me=Math.floor(ie%3600/60);g(R,xe>0?`${xe} hr ${Me} min`:`${Me} min`)}else g(R,"");const Se=new Set;M.forEach(xe=>{xe.qualityBadge&&Se.add(xe.qualityBadge.split(" ")[0])}),g(G,Se.size===1?M[0].qualityBadge:Se.size>1?"Mixed":"")}function $(M){Nr("details",M)}function U(){if(c().length===0){ur({title:"Create Playlist",message:"Queue is empty. Add tracks to queue before saving a playlist.",confirmLabel:"OK",type:"alert"});return}ur({title:"New Playlist",message:"Save current queue as a new playlist:",type:"prompt",placeholder:"Playlist Name",confirmLabel:"Create",onConfirm:M=>{M&&fr.createPlaylistFromQueue(M)}})}function re(M,ie){ie.name!=="Favorites"&&(M.stopPropagation(),M.preventDefault(),Ya(M,null,{type:"playlist-card",playlist:ie}))}function ue(){ur({title:"Replace Queue?",message:`This will clear your current queue and play "${n(w).data.name}".`,confirmLabel:"Play",type:"confirm",onConfirm:()=>{g(K,!0),xo(n(w).data.name,0)}})}function Q(){if(o().length>0){const M=n(w).data.name.replace(/"/g,'\\"');En(`load "${M}"`),g(se,!0),setTimeout(()=>{g(se,!1)},2e3)}}function oe(){g(X,!n(X))}function Y(M){const ie=n(w).data.name,Se=o();Se.splice(M,1),Oa.set(Se),wo(ie,M),de(Se)}function ee(M,ie){ko(n(w).data.name,M,ie)}function ce(M){if(M.name==="Favorites"){if(u()==="gruvbox"){const ie="var(--c-heart)";return`background: linear-gradient(135deg, ${ie}, transparent); background-color: ${ie};`}return"background: linear-gradient(135deg, hsl(348, 95%, 58%), hsl(348, 90%, 40%));"}return u()==="gruvbox"?`background: linear-gradient(135deg, ${M.colorVar}, transparent); background-color: ${M.colorVar};`:`background: ${M.color}`}function fe(M){if(!M)return"";if(M.name==="Favorites"){if(u()==="gruvbox"){const xe="var(--c-heart)";return`background: linear-gradient(135deg, ${xe}, transparent); background-color: ${xe};`}return"background: linear-gradient(135deg, hsl(348, 95%, 58%), hsl(348, 90%, 40%));"}const ie="var(--c-bg-card)";if(u()==="gruvbox"){const xe=M.colorVar||M.color||ie;return`background: linear-gradient(135deg, ${xe}, transparent); background-color: ${xe};`}return`background: ${M.color||M.colorVar||ie}`}te(()=>r(),()=>{g(x,Number(r().song))}),te(()=>a(),()=>{g(E,a().file)}),te(()=>r(),()=>{g(k,r().state==="play")}),te(()=>s(),()=>{g(w,s()[s().length-1])}),te(()=>n(w),()=>{g(F,n(w).view==="details")}),te(()=>(n(w),n(D)),()=>{const M=JSON.stringify(n(w));M!==n(D)&&(g(I,""),g(K,!1),g(se,!1),g(X,!1),g(he,[]),g(P,[]),g(q,!1),g(D,M))}),te(()=>(n(F),o(),l()),()=>{n(F)&&o().length>0?de(o()):n(F)&&o().length===0&&!l()&&(g(R,"0 min"),g(G,""))}),te(()=>(n(F),n(w),d(),Av),()=>{n(F)&&n(w).data&&d()!==n(w).data.name&&bo(n(w).data.name)}),te(()=>n(w),()=>{g(Z,n(w)?.data?.name==="Favorites")}),Bt(),At();var ke=tu();let B;var me=v(ke);{var Ce=M=>{var ie=jd(),Se=v(ie),xe=v(Se),Me=v(xe);ne(Me,()=>(O(y),b(()=>y.SEARCH)));var Ee=_(xe,2),ze=_(Ee,2);{var Re=N=>{var V=zd(),pe=v(V);ne(pe,()=>(O(y),b(()=>y.CLOSE))),A("click",V,()=>{g(I,""),g(he,[]),g(P,[]),g(q,!1)}),m(N,V)};z(ze,N=>{n(I)&&N(Re)})}var ae=_(ze,2);{var ge=N=>{var V=Rd();m(N,V)};z(ae,N=>{n(q)&&N(ge)})}le(()=>so(Ee,n(I))),A("input",Ee,W),m(M,ie)};z(me,M=>{n(F)||M(Ce)})}var Le=_(me,2);{var Fe=M=>{rn(M,{get itemsStore(){return Oa},get isLoading(){return l()},get isEditMode(){return n(X)},emptyText:"This playlist is empty.",onMoveItem:ee,$$slots:{header:(ie,Se)=>{var xe=Fd(),Me=v(xe),Ee=v(Me),ze=v(Ee),Re=v(ze);ne(Re,()=>(n(Z),O(y),b(()=>n(Z)?y.HEART_FILLED:y.PLAYLISTS)));var ae=_(Ee,2),ge=v(ae),N=_(v(ge),2),V=v(N),pe=_(N,2),Oe=v(pe);{var Ue=Ne=>{var Qe=Id();m(Ne,Qe)},Ie=Ne=>{var Qe=Dd(),nt=Pe(Qe),dt=v(nt),St=_(nt,2);{var yt=ht=>{var ft=Nd(),vt=v(ft);le(()=>ve(vt,n(R))),m(ht,ft)};z(St,ht=>{n(R)&&ht(yt)})}var _t=_(St,2);{var ut=ht=>{var ft=Od(),vt=v(ft);le(()=>ve(vt,n(G))),m(ht,ft)};z(_t,ht=>{n(G)&&ht(ut)})}le(()=>ve(dt,`${o(),b(()=>o().length)??""} tracks`)),m(Ne,Qe)};z(Oe,Ne=>{l()?Ne(Ue):Ne(Ie,!1)})}var Xe=_(ge,2),Ke=v(Xe),We=v(Ke),He=_(Ke,2),Ye=v(He),Ze=_(He,2);let De;var $e=v(Ze);ne($e,()=>(n(X),O(y),b(()=>n(X)?y.ACCEPT:y.EDIT))),le(Ne=>{lt(Ee,Ne),qt(N,"title",(n(w),b(()=>n(w).data.name))),ve(V,(n(w),b(()=>n(w).data.name))),Ke.disabled=n(K),ve(We,n(K)?"Playing...":"Play All"),He.disabled=n(se),ve(Ye,n(se)?"Added":"To Queue"),De=Ve(Ze,1,"btn-action svelte-m7c4tz",null,De,{active:n(X)})},[()=>(n(w),b(()=>fe(n(w).data)))]),A("click",Ke,ue),A("click",He,Q),A("click",Ze,oe),m(ie,xe)},row:(ie,Se)=>{var xe=qd();const Me=ct(()=>Se.item),Ee=ct(()=>Se.index),ze=ct(()=>Se.startDrag);var Re=v(xe);Sa(Re,{get track(){return n(Me)},get index(){return n(Ee)},get playingIndex(){return n(x)},get playingFile(){return n(E)},get isPlaying(){return n(k)},get isEditable(){return n(X)},$$events:{play:()=>j(n(Me)),remove:()=>Y(n(Ee)),startdrag(...ae){n(ze)?.apply(this,ae)}}}),m(ie,xe)}}})},Te=M=>{var ie=rt(),Se=Pe(ie);{var xe=Ee=>{var ze=Ud(),Re=v(ze);Et(Re,4,()=>Array(8),$r,(ae,ge)=>{var N=Bd(),V=v(N),pe=v(V);Wt(pe,{width:"100%",height:"100%",radius:"12px"});var Oe=_(V,2),Ue=v(Oe);Wt(Ue,{width:"60%",height:"16px",radius:"4px"}),m(ae,N)}),m(Ee,ze)},Me=Ee=>{var ze=eu(),Re=v(ze);{var ae=N=>{var V=Vd(),pe=v(V),Oe=v(pe),Ue=v(Oe),Ie=v(Ue);ne(Ie,()=>(O(y),b(()=>y.ADD)));var Xe=_(pe,2);Et(Xe,1,i,Ke=>Ke.name,(Ke,We)=>{const He=ct(()=>(n(We),b(()=>n(We).name==="Favorites")));var Ye=Yd(),Ze=v(Ye),De=v(Ze),$e=v(De);ne($e,()=>(O(n(He)),O(y),b(()=>n(He)?y.HEART_FILLED:y.PLAYLISTS)));var Ne=_(De,2);{var Qe=vt=>{var je=Hd(),pt=v(je);ne(pt,()=>(O(y),b(()=>y.DOTS))),A("click",je,Lt=>re(Lt,n(We))),m(vt,je)};z(Ne,vt=>{n(He)||vt(Qe)})}var nt=_(Ne,2),dt=v(nt),St=v(dt);ne(St,()=>(O(y),b(()=>y.PLAY)));var yt=_(Ze,2),_t=v(yt),ut=_(yt,2),ht=v(ut),ft=v(ht);Nt(()=>A("click",Ye,()=>$(n(We)))),Ss(Ye,vt=>Is?.(vt)),Nt(()=>A("longpress",Ye,vt=>re(vt.detail.originalEvent,n(We)))),Nt(()=>A("contextmenu",Ye,vt=>re(vt,n(We)))),le((vt,je)=>{lt(Ze,vt),ve(_t,(n(We),b(()=>n(We).name))),ve(ft,je)},[()=>(n(We),b(()=>ce(n(We)))),()=>(n(We),b(()=>n(We).lastModified?new Date(n(We).lastModified).toLocaleDateString():"Playlist"))]),m(Ke,Ye)}),A("click",pe,U),m(N,V)},ge=N=>{var V=Jd(),pe=Pe(V);{var Oe=He=>{var Ye=Qd(),Ze=_(Pe(Ye),2);Et(Ze,5,()=>n(he),De=>De.name,(De,$e)=>{const Ne=ct(()=>(n($e),b(()=>n($e).name==="Favorites")));var Qe=Wd(),nt=v(Qe),dt=v(nt),St=v(dt);ne(St,()=>(O(n(Ne)),O(y),b(()=>n(Ne)?y.HEART_FILLED:y.PLAYLISTS)));var yt=_(dt,2),_t=v(yt),ut=v(_t);ne(ut,()=>(O(y),b(()=>y.PLAY)));var ht=_(nt,2),ft=v(ht);le(vt=>{lt(nt,vt),ve(ft,(n($e),b(()=>n($e).name)))},[()=>(n($e),b(()=>ce(n($e))))]),A("click",Qe,()=>$(n($e))),m(De,Qe)}),A("wheel",Ze,we),m(He,Ye)};z(pe,He=>{n(he),b(()=>n(he).length>0)&&He(Oe)})}var Ue=_(pe,2);{var Ie=He=>{var Ye=Gd(),Ze=_(Pe(Ye),2);Et(Ze,5,()=>n(P),De=>De.playlist.name,(De,$e)=>{var Ne=Xd(),Qe=v(Ne),nt=v(Qe),dt=v(nt);ne(dt,()=>(O(y),b(()=>y.PLAYLISTS)));var St=_(nt,2),yt=v(St),_t=_(St,2),ut=v(_t),ht=_(_t,2),ft=v(ht),vt=v(ft);ne(vt,()=>(O(y),b(()=>y.PLAY)));var je=_(ft,2),pt=v(je);ne(pt,()=>(O(y),b(()=>y.ADD)));var Lt=_(Qe,2);Et(Lt,5,()=>(n($e),b(()=>n($e).tracks)),Gt=>Gt._uid,(Gt,be)=>{Sa(Gt,{get track(){return n(be)},get index(){return n(be),b(()=>n(be).playlistPos)},get playingFile(){return n(E)},get isPlaying(){return n(k)},$$events:{play:()=>j(n(be))}})}),le(()=>{ve(yt,(n($e),b(()=>n($e).playlist.name))),ve(ut,(n($e),b(()=>n($e).tracks.length)))}),A("click",ft,Qt(()=>H(n($e).tracks,n($e).playlist.name))),A("click",je,Qt(()=>J(n($e).tracks))),A("click",Qe,()=>$(n($e).playlist)),m(De,Ne)}),m(He,Ye)};z(Ue,He=>{n(P),b(()=>n(P).length>0)&&He(Ie)})}var Xe=_(Ue,2);{var Ke=He=>{var Ye=Kd(),Ze=v(Ye);le(()=>ve(Ze,`No matches found for "${n(I)??""}"`)),m(He,Ye)},We=He=>{var Ye=rt(),Ze=Pe(Ye);{var De=$e=>{var Ne=Zd();m($e,Ne)};z(Ze,$e=>{n(q),n(P),b(()=>n(q)&&n(P).length===0)&&$e(De)},!0)}m(He,Ye)};z(Xe,He=>{n(q),n(he),n(P),b(()=>!n(q)&&n(he).length===0&&n(P).length===0)?He(Ke):He(We,!1)})}m(N,V)};z(Re,N=>{n(I)?N(ge,!1):N(ae)})}m(Ee,ze)};z(Se,Ee=>{h()?Ee(xe):Ee(Me,!1)},!0)}m(M,ie)};z(Le,M=>{n(F)?M(Fe):M(Te,!1)})}le(()=>B=Ve(ke,1,"view-container svelte-m7c4tz",null,B,{scrollable:!n(F)})),m(e,ke),xt(),p()}var au=S('<button class="clear-icon-btn svelte-1d3z1zm"><!></button>'),nu=S('<div class="spinner svelte-1d3z1zm"></div>'),su=S('<div class="placeholder-state svelte-1d3z1zm"><div class="placeholder-icon svelte-1d3z1zm">ð</div> <p class="svelte-1d3z1zm">Type to search your library</p></div>'),iu=S('<div class="empty-text svelte-1d3z1zm"> </div>'),ou=S('<div slot="fallback" class="icon-fallback svelte-1d3z1zm">ð¿</div>'),lu=S('<div class="meta-tag svelte-1d3z1zm"> </div>'),cu=S('<div class="meta-tag quality svelte-1d3z1zm"> </div>'),vu=S('<div class="music-card svelte-1d3z1zm"><div class="card-img-container svelte-1d3z1zm"><!> <div class="play-overlay svelte-1d3z1zm"><span class="overlay-icon svelte-1d3z1zm"><!></span></div></div> <div class="card-title svelte-1d3z1zm"> </div> <div class="card-sub-row svelte-1d3z1zm"><div class="card-sub text-ellipsis svelte-1d3z1zm"> </div> <!> <!></div></div>'),du=S('<div class="header-label section-spacing svelte-1d3z1zm">Albums</div> <div class="music-grid horizontal section-mb svelte-1d3z1zm"></div>',1),uu=S('<div class="header-label svelte-1d3z1zm">Tracks</div>'),fu=S("<!> <!>",1),hu=S('<div slot="header" class="content-padded svelte-1d3z1zm"><!></div>'),pu=S('<div slot="row" class="svelte-1d3z1zm"><!></div>'),gu=S('<div class="view-container svelte-1d3z1zm"><div class="content-padded no-bottom-pad svelte-1d3z1zm"><div class="search-input-container svelte-1d3z1zm"><span class="search-icon svelte-1d3z1zm"><!></span> <input type="text" placeholder="Artists, songs, or albums" autoFocus class="svelte-1d3z1zm"/> <!> <!></div></div> <!></div>');function _u(e,t){kt(t,!1);const r=()=>_e(Da,"$searchQuery",s),a=()=>_e(o,"$tracksStore",s),[s,i]=Rt(),o=Be([]);let l=T([]),d=T(!1),c,u=T(!1);Dr(()=>{r().length>=2&&p(r())});function h(P){Da.set(P.target.value),clearTimeout(c),c=setTimeout(()=>{p(r())},300)}function f(){Da.set(""),o.set([]),g(l,[]),g(u,!1)}async function p(P){const R=P.trim().toLowerCase();if(R.length<2){o.set([]),g(l,[]),g(u,!1);return}g(d,!0),g(u,!0);try{const G=await Rr.search(R),D=G.map((L,j)=>({...L,_uid:L.file?`${L.file}-${j}`:`search-${j}`}));o.set(D);const W=new Map;G.forEach(L=>{const j=L.album;if(j&&!W.has(j)){const we=j.toLowerCase().includes(R),H=L.artist&&L.artist.toLowerCase().includes(R);if(we||H){let J=String(L.year||"");J.length>4&&(J=J.substring(0,4)),W.set(j,{name:j,artist:L.artist,file:L.file,thumbHash:L.thumbHash,_uid:`alb-${j}`,year:J,qualityBadge:L.qualityBadge})}}}),g(l,Array.from(W.values()))}finally{g(d,!1)}}function x(P){zn(P)}function E(P){Nr("tracks_by_album",{name:P.name,artist:P.artist})}function k(P){P.deltaY!==0&&(P.currentTarget.scrollLeft+=P.deltaY)}At();var w=gu(),F=v(w),Z=v(F),X=v(Z),K=v(X);ne(K,()=>y.SEARCH);var se=_(X,2),I=_(se,2);{var q=P=>{var R=au(),G=v(R);ne(G,()=>y.CLOSE),A("click",R,f),m(P,R)};z(I,P=>{r().length>0&&P(q)})}var C=_(I,2);{var ye=P=>{var R=nu();m(P,R)};z(C,P=>{n(d)&&P(ye)})}var he=_(F,2);rn(he,{get itemsStore(){return o},isEditMode:!1,isLoading:!1,emptyText:"",$$slots:{header:(P,R)=>{var G=hu(),D=v(G);{var W=j=>{var we=su();m(j,we)},L=j=>{var we=rt(),H=Pe(we);{var J=$=>{var U=iu(),re=v(U);le(()=>ve(re,`No results found for "${r()??""}"`)),m($,U)},de=$=>{var U=fu(),re=Pe(U);{var ue=Y=>{var ee=du(),ce=_(Pe(ee),2);Et(ce,5,()=>n(l),fe=>fe._uid,(fe,ke)=>{var B=vu(),me=v(B),Ce=v(me);{let ge=ct(()=>Va(n(ke),"md"));sa(Ce,{get src(){return n(ge)},get alt(){return n(ke).name},radius:"8px",$$slots:{fallback:(N,V)=>{var pe=ou();m(N,pe)}}})}var Le=_(Ce,2),Fe=v(Le),Te=v(Fe);ne(Te,()=>y.PLAY);var M=_(me,2),ie=v(M),Se=_(M,2),xe=v(Se),Me=v(xe),Ee=_(xe,2);{var ze=ge=>{var N=lu(),V=v(N);le(()=>ve(V,n(ke).year)),m(ge,N)};z(Ee,ge=>{n(ke).year&&n(ke).year!=="0"&&n(ke).year!==0&&ge(ze)})}var Re=_(Ee,2);{var ae=ge=>{var N=cu(),V=v(N);le(pe=>ve(V,pe),[()=>n(ke).qualityBadge.split(" ")[0]]),m(ge,N)};z(Re,ge=>{n(ke).qualityBadge&&ge(ae)})}le(()=>{qt(M,"title",n(ke).name),ve(ie,n(ke).name),ve(Me,n(ke).artist)}),A("click",B,()=>E(n(ke))),m(fe,B)}),A("wheel",ce,k),m(Y,ee)};z(re,Y=>{n(l).length>0&&Y(ue)})}var Q=_(re,2);{var oe=Y=>{var ee=uu();m(Y,ee)};z(Q,Y=>{a().length>0&&Y(oe)})}m($,U)};z(H,$=>{!n(d)&&a().length===0&&n(l).length===0&&n(u)?$(J):$(de,!1)},!0)}m(j,we)};z(D,j=>{r().length<2?j(W):j(L,!1)})}m(P,G)},row:(P,R)=>{var G=pu();const D=ct(()=>R.item),W=ct(()=>R.index);var L=v(G);Sa(L,{get track(){return n(D)},get index(){return n(W)},isEditable:!1,$$events:{play:()=>x(n(D))}}),m(P,G)}}}),le(()=>so(se,r())),A("input",se,h),m(e,w),xt(),i()}const Xa={async syncLibrary(){if(Je(ar))return;ar.set(!0);const e=new _o,t=window.location.origin+"/wave-api.php";e.postMessage({type:"START_SYNC",payload:{url:t}}),e.onmessage=r=>{const{type:a,status:s,count:i,message:o}=r.data;if(a==="PROGRESS"){const l={connecting:"Requesting library...",downloading:"Downloading data...",parsing:"Processing metadata...",saving:`Saving ${i} tracks...`};l[s]&&qe(l[s],"info")}a==="DONE"&&(qe(`Library updated: ${i} tracks`,"success"),ar.set(!1),e.terminate()),a==="ERROR"&&(console.error("[API] Sync Error:",o),qe(`Sync Failed: ${o}`,"error"),ar.set(!1),e.terminate())},e.onerror=r=>{console.error("[API] Worker crash:",r),qe("Sync worker crashed","error"),ar.set(!1),e.terminate()}},async loadRadioStations(){if(!Je(un)){un.set(!0);try{const t=await fetch(Wn.STATIONS(!1));if(!t.ok)throw new Error("Network error");const r=await t.json();if(r.error)throw new Error(r.error);if(!Array.isArray(r))throw new Error("Invalid response format");const a=r.map(s=>({id:s.id,name:s.name,file:s.station,station:s.station,image:s.logo,genre:s.genre||"Radio"}));a.sort((s,i)=>s.name.localeCompare(i.name,void 0,{sensitivity:"base"})),Fr.set(a)}catch(e){console.error("[API] Failed to load stations",e),qe("Failed to load radio","error")}finally{un.set(!1)}}},async setAlarm(e,t,r){try{const a=new FormData;a.append("action","set_alarm"),a.append("enabled",e?"1":"0"),a.append("time",t),a.append("playlist",r);const s=await fetch(Wn.SYNC,{method:"POST",body:a});if(!s.ok)throw new Error("Server error");const i=await s.json();if(i.error)throw new Error(i.error);return!0}catch(a){throw console.error("[API] Failed to set alarm",a),a}},async getServerTime(){try{const e=await fetch(`${Wn.SYNC}?action=get_time`);if(e.ok)return(await e.json()).time}catch(e){console.error("Failed to get server time",e)}return null}};var mu=S('<option class="svelte-1j67jqh"> </option>'),bu=S('<div class="separator svelte-1j67jqh"></div> <div class="row space-between svelte-1j67jqh"><label for="alarm-time" class="svelte-1j67jqh">Wake up time</label> <input id="alarm-time" type="time" class="svelte-1j67jqh"/></div> <div class="separator svelte-1j67jqh"></div> <div class="row space-between svelte-1j67jqh"><label for="alarm-pl" class="svelte-1j67jqh">Playlist</label> <div class="select-wrapper svelte-1j67jqh"><select id="alarm-pl" class="svelte-1j67jqh"></select> <div class="select-arrow svelte-1j67jqh"><!></div></div></div> <p class="hint svelte-1j67jqh">Player will clear queue, load this playlist and play at set time.</p>',1),yu=S('<div class="separator svelte-1j67jqh"></div> <div class="row svelte-1j67jqh"><label for="yandex-token" class="svelte-1j67jqh">OAuth Token</label> <div class="input-group svelte-1j67jqh"><input id="yandex-token" type="password" placeholder="Enter token..." class="svelte-1j67jqh"/></div></div> <p class="hint svelte-1j67jqh">Required to access your library and stream music. <a href="https://github.com/MarshalX/yandex-music-api/discussions/513" target="_blank" style="color: var(--c-accent);" class="svelte-1j67jqh">How to get token</a></p>',1),wu=S('<div class="view-container scrollable svelte-1j67jqh"><div class="content-padded svelte-1j67jqh"><h1 class="header-title big svelte-1j67jqh">Settings</h1> <div class="section svelte-1j67jqh"><div class="section-header svelte-1j67jqh"><span class="svelte-1j67jqh">Alarm Clock</span></div> <div class="card svelte-1j67jqh"><div class="row space-between svelte-1j67jqh"><span class="label-text svelte-1j67jqh">Current Player Time</span> <span class="mono-badge svelte-1j67jqh"> </span></div> <div class="separator svelte-1j67jqh"></div> <div class="row space-between svelte-1j67jqh"><label class="svelte-1j67jqh">Enable Alarm</label> <button><div class="toggle-circle svelte-1j67jqh"></div></button></div> <!></div></div> <div class="section svelte-1j67jqh"><div class="section-header svelte-1j67jqh"><span class="svelte-1j67jqh">Appearance</span></div> <div class="card clickable svelte-1j67jqh"><div class="row space-between svelte-1j67jqh"><span class="svelte-1j67jqh">Interface Theme</span> <div class="row-gap svelte-1j67jqh"><span class="value svelte-1j67jqh"> </span> <span class="chevron svelte-1j67jqh"><!></span></div></div></div></div> <div class="section svelte-1j67jqh"><div class="section-header svelte-1j67jqh"><span class="svelte-1j67jqh">Services</span></div> <div class="card svelte-1j67jqh"><div class="row space-between svelte-1j67jqh"><label class="svelte-1j67jqh">Enable Yandex Music (Beta)</label> <button><div class="toggle-circle svelte-1j67jqh"></div></button></div> <!></div></div> <div class="section svelte-1j67jqh"><div class="section-header svelte-1j67jqh"><span class="svelte-1j67jqh">Connection</span></div> <div class="card svelte-1j67jqh"><div class="row svelte-1j67jqh"><label for="ip" class="svelte-1j67jqh">Moode Device IP</label> <div class="input-group svelte-1j67jqh"><input id="ip" type="text" placeholder="192.168.x.x" class="svelte-1j67jqh"/> <button class="btn-primary small svelte-1j67jqh">Save</button></div></div> <p class="hint svelte-1j67jqh"> </p></div></div> <div class="section svelte-1j67jqh"><div class="section-header svelte-1j67jqh"><span class="svelte-1j67jqh">About</span></div> <div class="card svelte-1j67jqh"><div class="info-row svelte-1j67jqh"><span class="svelte-1j67jqh">Version</span> <span class="mono svelte-1j67jqh"> </span></div> <div class="separator svelte-1j67jqh"></div> <div class="info-row svelte-1j67jqh"><span class="svelte-1j67jqh">Build Date</span> <span class="mono small svelte-1j67jqh"> </span></div> <div class="separator svelte-1j67jqh"></div> <div class="info-row svelte-1j67jqh"><span class="svelte-1j67jqh">Developer</span> <span class="svelte-1j67jqh">Moode WaveUI</span></div></div></div></div></div>');function ku(e,t){kt(t,!1);const r=()=>_e(yn,"$currentTheme",c),a=()=>_e(fs,"$isAlarmEnabled",c),s=()=>_e(us,"$alarmTime",c),i=()=>_e(hs,"$alarmPlaylist",c),o=()=>_e(Cn,"$playlists",c),l=()=>_e(xn,"$isYandexEnabled",c),d=()=>_e(Wa,"$yandexToken",c),[c,u]=Rt(),h=T();let f=T(Yr.MOODE_IP),p=T("--:--"),x;function E(){Yr.setMoodeIp(n(f)),qe("IP Saved. Reloading...","success"),setTimeout(()=>location.reload(),1e3)}const k="0.0.1",w="2026-01-09T10:50:25.959Z",F=new Date(w).toLocaleString();function Z(){const V=ss.map(pe=>({label:pe.label,value:pe.id}));ur({title:"Select Theme",message:"Choose your preferred interface style:",type:"select",inputValue:r(),options:V,onConfirm:pe=>{yn.set(pe),qe("Theme updated","success")}})}async function X(){const V=await Xa.getServerTime();V&&g(p,V)}Dr(()=>{X(),x=setInterval(X,6e4)}),lo(()=>{x&&clearInterval(x)});async function K(){try{await Xa.setAlarm(a(),s(),i()),a()&&qe(`Alarm set for ${s()}`,"success")}catch{qe("Failed to sync alarm settings","error")}}function se(){fs.update(V=>!V),K()}function I(){xn.update(V=>!V)}te(()=>r(),()=>{g(h,ss.find(V=>V.id===r())?.label||"Default")}),Bt(),At();var q=wu(),C=v(q),ye=_(v(C),2),he=_(v(ye),2),P=v(he),R=_(v(P),2),G=v(R),D=_(P,4),W=_(v(D),2);let L;var j=_(D,2);{var we=V=>{var pe=bu(),Oe=Pe(pe),Ue=_(Oe,2),Ie=_(v(Ue),2),Xe=_(Ue,2),Ke=_(Xe,2),We=_(v(Ke),2),He=v(We);le(()=>{i(),Pl(()=>{o()})}),Et(He,5,o,$r,($e,Ne)=>{var Qe=mu(),nt=v(Qe),dt={};le(()=>{ve(nt,(n(Ne),b(()=>n(Ne).name))),dt!==(dt=(n(Ne),b(()=>n(Ne).name)))&&(Qe.value=(Qe.__value=(n(Ne),b(()=>n(Ne).name)))??"")}),m($e,Qe)});var Ye=_(He,2),Ze=v(Ye);ne(Ze,()=>(O(y),b(()=>y.CHEVRON_DOWN)));var De=_(Ke,2);ot(1,Oe,()=>bt),Gr(Ie,s,$e=>Fn(us,$e)),A("change",Ie,K),ot(1,Ue,()=>bt),ot(1,Xe,()=>bt),Zl(He,i,$e=>Fn(hs,$e)),A("change",He,K),ot(1,Ke,()=>bt),ot(1,De,()=>bt),m(V,pe)};z(j,V=>{a()&&V(we)})}var H=_(ye,2),J=_(v(H),2),de=v(J),$=_(v(de),2),U=v($),re=v(U),ue=_(U,2),Q=v(ue);ne(Q,()=>(O(y),b(()=>y.NEXT)));var oe=_(H,2),Y=_(v(oe),2),ee=v(Y),ce=_(v(ee),2);let fe;var ke=_(ee,2);{var B=V=>{var pe=yu(),Oe=Pe(pe),Ue=_(Oe,2),Ie=_(v(Ue),2),Xe=v(Ie),Ke=_(Ue,2);ot(1,Oe,()=>bt),Gr(Xe,d,We=>Fn(Wa,We)),ot(1,Ue,()=>bt),ot(1,Ke,()=>bt),m(V,pe)};z(ke,V=>{l()&&V(B)})}var me=_(oe,2),Ce=_(v(me),2),Le=v(Ce),Fe=_(v(Le),2),Te=v(Fe),M=_(Te,2),ie=_(Le,2),Se=v(ie),xe=_(me,2),Me=_(v(xe),2),Ee=v(Me),ze=_(v(Ee),2),Re=v(ze),ae=_(Ee,4),ge=_(v(ae),2),N=v(ge);le(()=>{ve(G,n(p)),L=Ve(W,1,"toggle-btn svelte-1j67jqh",null,L,{active:a()}),ve(re,n(h)),fe=Ve(ce,1,"toggle-btn svelte-1j67jqh",null,fe,{active:l()}),ve(Se,`Current: ${O(Yr),b(()=>Yr.MOODE_IP)??""}`),ve(Re,k),ve(N,F)}),A("click",W,se),A("click",J,Z),A("click",ce,I),Gr(Te,()=>n(f),V=>g(f,V)),A("click",M,E),ot(1,q,()=>bt,()=>({duration:200})),m(e,q),xt(),u()}var xu=S('<span class="meta-tag svelte-185fgrr"> </span>'),Su=S('<div slot="header" class="content-padded svelte-185fgrr"><div class="view-header svelte-185fgrr"><div class="header-art svelte-185fgrr" style="background: var(--c-surface-active);"><div class="header-icon-wrap svelte-185fgrr"><!></div></div> <div class="header-info svelte-185fgrr"><div class="header-text-group svelte-185fgrr"><div class="header-label svelte-185fgrr">Now Playing</div> <h1 class="header-title svelte-185fgrr">Current Queue</h1> <div class="meta-badges svelte-185fgrr"><span class="meta-tag svelte-185fgrr"> </span> <!></div></div> <div class="header-actions svelte-185fgrr"><button class="btn-secondary svelte-185fgrr" title="Clear Queue">Clear</button> <button class="btn-action svelte-185fgrr" title="Save Queue"><!></button> <button><!></button></div></div></div></div>'),Eu=S('<div slot="row" class="svelte-185fgrr"><!></div>'),Tu=S('<div class="view-container svelte-185fgrr"><!></div>');function $u(e,t){kt(t,!1);const r=()=>_e(wt,"$status",o),a=()=>_e(mt,"$isQueueLocked",o),s=()=>_e(rr,"$currentSong",o),i=()=>_e(Kr,"$queue",o),[o,l]=Rt(),d=T(),c=T(),u=T(),h=T();let f=T(!1),p=T(""),x=T(-1);function E(){g(f,!n(f))}function k(I){n(f)||En(`play ${I}`)}function w(I){I<n(x)&&g(x,n(x)-1),nr.removeFromQueue(I)}async function F(){ur({title:"Save Playlist",message:"Enter a name for this playlist:",type:"prompt",placeholder:"Playlist Name",confirmLabel:"Save",onConfirm:async I=>{I&&I.trim().length>0&&(await nr.saveQueue(I),Rs())}})}function Z(){i().length!==0&&ur({title:"Clear Queue",message:"Are you sure you want to clear the entire play queue?",confirmLabel:"Clear All",type:"confirm",onConfirm:async()=>{Kr.set([]),rr.set({title:"Not Playing",artist:"",album:"",file:"",stationName:null,id:null,pos:null}),wt.update(I=>({...I,state:"stop",song:-1,songid:-1,elapsed:0})),await En("clear")}})}function X(I,q){let C=n(x);I===C?C=q:I<C&&q>=C?C-=1:I>C&&q<=C&&(C+=1),g(x,C),nr.moveTrack(I,q)}te(()=>r(),()=>{g(d,Number(r().song))}),te(()=>(a(),n(d)),()=>{a()||g(x,n(d))}),te(()=>n(x),()=>{g(c,n(x))}),te(()=>s(),()=>{g(u,s().file)}),te(()=>r(),()=>{g(h,r().state==="play")}),te(()=>i(),()=>{if(i().length>=0){const I=i().reduce((q,C)=>q+(parseFloat(C.time)||0),0);if(I>0){const q=Math.floor(I/3600),C=Math.floor(I%3600/60);q>0?g(p,`${q} hr ${C} min`):g(p,`${C} min`)}else g(p,"")}}),Bt(),At();var K=Tu(),se=v(K);rn(se,{get itemsStore(){return Kr},get isEditMode(){return n(f)},emptyText:"Queue is empty",onMoveItem:X,$$slots:{header:(I,q)=>{var C=Su(),ye=v(C),he=v(ye),P=v(he),R=v(P);ne(R,()=>(O(y),b(()=>y.MENU)));var G=_(he,2),D=v(G),W=_(v(D),4),L=v(W),j=v(L),we=_(L,2);{var H=oe=>{var Y=xu(),ee=v(Y);le(()=>ve(ee,n(p))),m(oe,Y)};z(we,oe=>{n(p)&&oe(H)})}var J=_(D,2),de=v(J),$=_(de,2),U=v($);ne(U,()=>(O(y),b(()=>y.SAVE)));var re=_($,2);let ue;var Q=v(re);ne(Q,()=>(n(f),O(y),b(()=>n(f)?y.ACCEPT:y.EDIT))),le(()=>{ve(j,`${i(),b(()=>i().length)??""} tracks`),de.disabled=(i(),b(()=>i().length===0)),$.disabled=(i(),b(()=>i().length===0)),ue=Ve(re,1,"btn-action svelte-185fgrr",null,ue,{active:n(f)}),qt(re,"title",n(f)?"Finish Editing":"Edit Queue"),re.disabled=(i(),b(()=>i().length===0))}),A("click",de,Z),A("click",$,F),A("click",re,E),m(I,C)},row:(I,q)=>{var C=Eu();const ye=ct(()=>q.item),he=ct(()=>q.index),P=ct(()=>q.startDrag);var R=v(C);Sa(R,{get track(){return n(ye)},get index(){return n(he)},get playingIndex(){return n(c)},get playingFile(){return n(u)},get isPlaying(){return n(h)},get isEditable(){return n(f)},$$events:{play:()=>k(n(he)),remove:()=>w(n(he)),startdrag(...G){n(P)?.apply(this,G)}}}),m(I,C)}}}),m(e,K),xt(),l()}var Mu=S('<div class="knob svelte-1jla3sy"></div>'),Au=S('<div class="tooltip current svelte-1jla3sy"> </div> <span></span>',1),Pu=S('<div slot="fallback" class="icon-fallback svelte-1jla3sy"><!></div>'),Cu=S('<span class="meta-tag quality"> </span>'),Lu=S('<div class="dot svelte-1jla3sy"></div>'),zu=S("<button><!> <!></button>"),Ru=S('<div class="dock svelte-1jla3sy"><div class="progress-shadow svelte-1jla3sy"></div> <div><div class="rail svelte-1jla3sy"></div> <div class="fill svelte-1jla3sy"><!></div> <!></div> <div class="grid svelte-1jla3sy"><div class="info svelte-1jla3sy"><div class="art svelte-1jla3sy"><!></div> <div class="meta svelte-1jla3sy"><div class="title-row svelte-1jla3sy"><div class="title text-ellipsis svelte-1jla3sy"> </div> <button class="btn-icon tiny-dots svelte-1jla3sy"><!></button></div> <div class="artist-row svelte-1jla3sy"><div class="artist text-ellipsis svelte-1jla3sy"> </div> <!></div></div></div> <div class="controls svelte-1jla3sy"><button><!></button> <button class="btn-icon"><!></button> <button class="play-btn flex-center svelte-1jla3sy"><!></button> <button class="btn-icon"><!></button> <!></div> <div class="volume desktop svelte-1jla3sy"><button class="vol-btn-mini svelte-1jla3sy" title="Mute/Unmute"><!></button> <div class="custom-slider svelte-1jla3sy"><div class="slider-bg svelte-1jla3sy"><div class="slider-fill svelte-1jla3sy"></div> <div class="slider-knob svelte-1jla3sy"></div></div></div></div></div></div>');function ju(e,t){kt(t,!1);const r=()=>_e(wt,"$status",l),a=()=>_e(rr,"$currentSong",l),s=()=>_e(zr,"$favorites",l),i=()=>_e(Fr,"$stations",l),o=()=>_e(kn,"$isFullPlayerOpen",l),[l,d]=Rt(),c=T(),u=T(),h=T(),f=T(),p=T(),x=T(),E=T(),k=T(),w=T(),F=T(),Z=T(),X=T(),K=T();let se=T(!1),I=T(!1),q=!1,C=T(0),ye=T(),he=T();const P=Q=>oe=>{oe.stopPropagation(),Q()};function R(Q){if(isNaN(Q)||Q===null)return"0:00";const oe=Math.floor(Q/60),Y=Math.floor(Q%60);return`${oe}:${Y<10?"0":""}${Y}`}function G(Q,oe){const Y=oe.getBoundingClientRect();return Math.max(0,Math.min(1,(Q.clientX-Y.left)/Y.width))}function D(Q){n(f)||(g(I,!0),g(C,G(Q,n(ye))),window.addEventListener("mousemove",W),window.addEventListener("mouseup",L))}function W(Q){if(n(I)&&g(C,G(Q,n(ye))),q){const oe=Math.round(G(Q,n(he))*100);kr(oe)}}function L(){n(I)&&!n(f)&&Cs(n(C)*n(c)),g(I,!1),q=!1,window.removeEventListener("mousemove",W),window.removeEventListener("mouseup",L)}let j=50;function we(Q){Q.stopPropagation(),r().volume>0?(j=r().volume,kr(0)):kr(j>0?j:30)}function H(Q){q=!0;const oe=Math.round(G(Q,n(he))*100);kr(oe),window.addEventListener("mousemove",W),window.addEventListener("mouseup",L)}function J(){const Q=(n(K)+1)%3;Q===0?(r().random&&Zr(),r().repeat&&Jr()):Q===1?(r().random||Zr(),r().repeat&&Jr()):Q===2&&(r().random&&Zr(),r().repeat||Jr())}function de(Q){Q.stopPropagation(),Ya(Q,a(),{type:"general",source:"miniplayer"})}function $(Q){Ya(Q.detail.originalEvent,a(),{type:"general",source:"miniplayer"})}te(()=>r(),()=>{g(c,r().duration>0?r().duration:1)}),te(()=>r(),()=>{g(u,r().elapsed||0)}),te(()=>r(),()=>{g(h,r().state==="play")}),te(()=>a(),()=>{g(f,a().file?.startsWith("http"))}),te(()=>a(),()=>{g(p,a().title||"Not Playing")}),te(()=>a(),()=>{g(x,a().stationName||a().artist||"Moode")}),te(()=>(a(),s()),()=>{g(E,a().file&&s().has(a().file))}),te(()=>(a(),i()),()=>{g(k,xa(a(),i(),a().stationName))}),te(()=>(n(f),n(I),n(C),n(u),n(c)),()=>{g(w,n(f)?0:n(I)?n(C)*100:n(u)/n(c)*100)}),te(()=>(n(h),n(I),n(f)),()=>{g(F,n(h)&&!n(I)&&!n(f))}),te(()=>r(),()=>{g(Z,r().bitrate?`${r().bitrate} kbps`:r().format||"")}),te(()=>(r(),y),()=>{g(X,r().volume===0?y.VOLUME_MUTE:r().volume<50?y.VOLUME_MEDIUM:y.VOLUME_FULL)}),te(()=>r(),()=>{g(K,r().repeat?2:r().random?1:0)}),Bt(),At();var U=rt(),re=Pe(U);{var ue=Q=>{var oe=Ru(),Y=v(oe),ee=_(Y,2);let ce;var fe=_(v(ee),2),ke=v(fe);{var B=je=>{var pt=Mu();m(je,pt)};z(ke,je=>{n(f)||je(B)})}var me=_(fe,2);{var Ce=je=>{var pt=Au(),Lt=Pe(pt),Gt=v(Lt);le(be=>{lt(Lt,`left: ${n(w)??""}%`),ve(Gt,be)},[()=>(n(I),n(C),n(c),n(u),b(()=>n(I)?R(n(C)*n(c)):R(n(u))))]),m(je,pt)};z(me,je=>{(n(se)||n(I))&&!n(f)&&je(Ce)})}Or(ee,je=>g(ye,je),()=>n(ye));var Le=_(ee,2),Fe=v(Le),Te=v(Fe),M=v(Te);sa(M,{get src(){return n(k)},alt:"art",radius:"4px",$$slots:{fallback:(je,pt)=>{var Lt=Pu(),Gt=v(Lt);ne(Gt,()=>(n(f),O(y),b(()=>n(f)?y.RADIO:y.ALBUMS))),m(je,Lt)}}});var ie=_(Te,2),Se=v(ie),xe=v(Se),Me=v(xe),Ee=_(xe,2),ze=v(Ee);ne(ze,()=>(O(y),b(()=>y.DOTS)));var Re=_(Se,2),ae=v(Re),ge=v(ae),N=_(ae,2);{var V=je=>{var pt=Cu(),Lt=v(pt);le(()=>ve(Lt,n(Z))),m(je,pt)};z(N,je=>{n(Z)&&je(V)})}var pe=_(Fe,2),Oe=v(pe),Ue=Pa(()=>P(()=>fr.toggleFavorite(a())));let Ie;var Xe=v(Oe);ne(Xe,()=>(n(E),O(y),b(()=>n(E)?y.HEART_FILLED:y.HEART)));var Ke=_(Oe,2),We=Pa(()=>P(()=>Qa("previous"))),He=v(Ke);ne(He,()=>(O(y),b(()=>y.PREVIOUS)));var Ye=_(Ke,2),Ze=Pa(()=>P(Ln)),De=v(Ye);ne(De,()=>(r(),O(y),b(()=>r().state==="play"?y.PAUSE:y.PLAY)));var $e=_(Ye,2),Ne=Pa(()=>P(()=>Qa("next"))),Qe=v($e);ne(Qe,()=>(O(y),b(()=>y.NEXT)));var nt=_($e,2);{var dt=je=>{var pt=zu(),Lt=Pa(()=>P(J));let Gt;var be=v(pt);{var Ge=jt=>{var _r=rt(),Aa=Pe(_r);ne(Aa,()=>(O(y),b(()=>y.REPEAT))),m(jt,_r)},Pt=jt=>{var _r=rt(),Aa=Pe(_r);ne(Aa,()=>(O(y),b(()=>y.SHUFFLE))),m(jt,_r)};z(be,jt=>{n(K)===2?jt(Ge):jt(Pt,!1)})}var or=_(be,2);{var Rn=jt=>{var _r=Lu();m(jt,_r)};z(or,jt=>{n(K)>0&&jt(Rn)})}le(()=>Gt=Ve(pt,1,"btn-icon desktop mode-btn svelte-1jla3sy",null,Gt,{active:n(K)>0})),A("click",pt,function(...jt){n(Lt)?.apply(this,jt)}),m(je,pt)};z(nt,je=>{n(f)||je(dt)})}var St=_(pe,2),yt=v(St),_t=v(yt);ne(_t,()=>n(X));var ut=_(yt,2),ht=v(ut),ft=v(ht),vt=_(ft,2);Or(ut,je=>g(he,je),()=>n(he)),Nt(()=>A("click",oe,()=>kn.set(!0))),Ss(oe,(je,pt)=>Is?.(je,pt),()=>500),Nt(()=>A("longpress",oe,$)),le(()=>{lt(Y,`width: ${n(w)??""}%; transition: ${n(F)?"width 0.25s linear":"none"}`),ce=Ve(ee,1,"progress-bar svelte-1jla3sy",null,ce,{radio:n(f)}),lt(fe,`width: ${n(w)??""}%; transition: ${n(F)?"width 0.25s linear":"none"}`),qt(xe,"title",n(p)),ve(Me,n(p)),qt(ae,"title",n(x)),ve(ge,n(x)),Ie=Ve(Oe,1,"btn-icon desktop svelte-1jla3sy",null,Ie,{liked:n(E)}),lt(ft,`width: ${r(),b(()=>r().volume)??""}%`),lt(vt,`left: ${r(),b(()=>r().volume)??""}%`)}),A("mouseenter",ee,()=>g(se,!0)),A("mouseleave",ee,()=>g(se,!1)),A("mousedown",ee,Qt(D)),A("click",ee,Qt(function(je){Ha.call(this,t,je)})),A("click",Ee,de),A("click",Oe,function(...je){n(Ue)?.apply(this,je)}),A("click",Ke,function(...je){n(We)?.apply(this,je)}),A("click",Ye,function(...je){n(Ze)?.apply(this,je)}),A("click",$e,function(...je){n(Ne)?.apply(this,je)}),A("click",yt,we),A("mousedown",ut,Qt(H)),A("click",ut,Qt(function(je){Ha.call(this,t,je)})),m(Q,oe)};z(re,Q=>{o()||Q(ue)})}m(e,U),xt(),d()}var Iu=S('<div class="drag-zone svelte-1olwzt8"><div class="drag-handle-icon svelte-1olwzt8"><!></div></div>'),Nu=S('<div slot="fallback" class="icon-fallback svelte-1olwzt8"><!></div>'),Ou=S('<span class="meta-tag quality"> </span>'),Du=S('<span class="dot svelte-1olwzt8"></span>'),Fu=S("<button><!> <!></button>"),qu=S('<div style="width: 44px;"></div>'),Bu=S('<div><!> <div class="bg-container svelte-1olwzt8"><div class="bg-gradient-fallback svelte-1olwzt8"></div> <img class="bg-img svelte-1olwzt8" alt="" loading="eager"/> <div class="bg-overlay svelte-1olwzt8"></div></div> <div class="player-body svelte-1olwzt8"><div class="art-container svelte-1olwzt8"><div class="artwork svelte-1olwzt8"><!></div></div> <div class="controls-area svelte-1olwzt8"><div class="meta svelte-1olwzt8"><h1 class="title text-ellipsis svelte-1olwzt8"> </h1> <div class="artist-row svelte-1olwzt8"><h2 class="artist text-ellipsis svelte-1olwzt8"> </h2> <!></div></div> <div class="progress-section"><div><div class="common-track svelte-1olwzt8"><div class="common-fill svelte-1olwzt8"><div class="common-knob svelte-1olwzt8"></div></div></div></div> <div class="time-row svelte-1olwzt8"><span> </span> <span> </span></div></div> <div class="buttons-row svelte-1olwzt8"><button><!></button> <button class="btn-icon side-btn svelte-1olwzt8"><!></button> <button class="play-btn-large flex-center svelte-1olwzt8"><!></button> <button class="btn-icon side-btn svelte-1olwzt8"><!></button> <!></div> <div class="volume-row svelte-1olwzt8"><button class="btn-icon small vol-btn svelte-1olwzt8"><!></button> <div class="volume-hit-area svelte-1olwzt8"><div class="common-track svelte-1olwzt8"><div class="common-fill svelte-1olwzt8"></div> <div class="common-knob svelte-1olwzt8"></div></div></div> <div class="vol-icon-static svelte-1olwzt8"><!></div></div></div></div></div>');function gi(e,t){kt(t,!1);const r=()=>_e(rr,"$currentSong",o),a=()=>_e(Fr,"$stations",o),s=()=>_e(wt,"$status",o),i=()=>_e(zr,"$favorites",o),[o,l]=Rt(),d=T(),c=T(),u=T(),h=T(),f=T(),p=T(),x=T(),E=T(),k=T(),w=T(),F=T(),Z=T();let X=gt(t,"isDocked",8,!1),K=0,se=T(0),I=T(!1);function q(){kn.set(!1)}function C(be){if(X())return;const Ge=be.target;Ge.closest(".bar-hit-area")||Ge.closest(".volume-hit-area")||(K=be.touches[0].clientY,g(I,!0))}function ye(be){if(!n(I)||X())return;const Ge=be.touches[0].clientY-K;Ge>0&&(be.cancelable&&Ge>10&&be.preventDefault(),g(se,Ge))}function he(){X()||(g(I,!1),n(se)>150?q():g(se,0))}let P=T(!1),R=T(0),G=T();function D(be){const Ge=Math.floor(be/60)||0,Pt=Math.floor(be%60)||0;return`${Ge}:${Pt.toString().padStart(2,"0")}`}function W(be,Ge){const Pt=Ge.getBoundingClientRect(),or=be.touches?be.touches[0].clientX:be.clientX;return Math.max(0,Math.min(1,(or-Pt.left)/Pt.width))}function L(be){n(h)||(g(P,!0),g(R,W(be,n(G))))}function j(be){n(P)&&g(R,W(be,n(G)))}function we(){n(P)&&!n(h)&&Cs(n(R)*n(c)),g(P,!1)}let H=!1,J=T(),de=50;function $(){s().volume>0?(de=s().volume,kr(0)):kr(de>0?de:30)}function U(be){H=!0;const Ge=Math.round(W(be,n(J))*100);kr(Ge),window.addEventListener("mousemove",re),window.addEventListener("mouseup",ue),window.addEventListener("touchmove",re,{passive:!1}),window.addEventListener("touchend",ue)}function re(be){if(H){be.preventDefault();const Ge=Math.round(W(be,n(J))*100);kr(Ge)}}function ue(){H=!1,window.removeEventListener("mousemove",re),window.removeEventListener("mouseup",ue),window.removeEventListener("touchmove",re),window.removeEventListener("touchend",ue)}function Q(){const be=(n(k)+1)%3;be===0?(s().random&&Zr(),s().repeat&&Jr()):be===1?(s().random||Zr(),s().repeat&&Jr()):be===2&&(s().random&&Zr(),s().repeat||Jr())}te(()=>(r(),a()),()=>{g(d,xa(r(),a(),r().stationName))}),te(()=>s(),()=>{g(c,s().duration||1)}),te(()=>s(),()=>{g(u,s().elapsed||0)}),te(()=>r(),()=>{g(h,r().file?.startsWith("http"))}),te(()=>s(),()=>{g(f,s().state==="play")}),te(()=>(n(f),n(P),n(h)),()=>{g(p,n(f)&&!n(P)&&!n(h))}),te(()=>(n(h),n(P),n(R),n(u),n(c)),()=>{g(x,n(h)?0:n(P)?n(R)*100:n(u)/n(c)*100)}),te(()=>(s(),y),()=>{g(E,s().volume===0?y.VOLUME_MUTE:s().volume<50?y.VOLUME_MEDIUM:y.VOLUME_FULL)}),te(()=>s(),()=>{g(k,s().repeat?2:s().random?1:0)}),te(()=>s(),()=>{g(w,s().bitrate?`${s().bitrate} kbps`:s().format||"")}),te(()=>(r(),i()),()=>{g(F,r().file&&i().has(r().file))}),te(()=>O(X()),()=>{g(Z,X()?"8px":"var(--radius-xl)")}),Bt(),At();var oe=Bu();let Y;var ee=v(oe);{var ce=be=>{var Ge=Iu(),Pt=v(Ge),or=v(Pt);ne(or,()=>(O(y),b(()=>y.CHEVRON_DOWN))),A("touchstart",Ge,C),A("touchmove",Ge,ye),A("touchend",Ge,he),A("click",Ge,q),m(be,Ge)};z(ee,be=>{X()||be(ce)})}var fe=_(ee,2),ke=_(v(fe),2),B=_(fe,2),me=v(B),Ce=v(me),Le=v(Ce);sa(Le,{get src(){return n(d)},alt:"Cover",get radius(){return n(Z)},$$slots:{fallback:(be,Ge)=>{var Pt=Nu(),or=v(Pt);ne(or,()=>(n(h),O(y),b(()=>n(h)?y.RADIO:y.ALBUMS))),m(be,Pt)}}});var Fe=_(me,2),Te=v(Fe),M=v(Te),ie=v(M),Se=_(M,2),xe=v(Se),Me=v(xe),Ee=_(xe,2);{var ze=be=>{var Ge=Ou(),Pt=v(Ge);le(()=>ve(Pt,n(w))),m(be,Ge)};z(Ee,be=>{n(w)&&be(ze)})}var Re=_(Te,2),ae=v(Re);let ge;var N=v(ae),V=v(N);Or(ae,be=>g(G,be),()=>n(G));var pe=_(ae,2),Oe=v(pe),Ue=v(Oe),Ie=_(Oe,2),Xe=v(Ie),Ke=_(Re,2),We=v(Ke);let He;var Ye=v(We);ne(Ye,()=>(n(F),O(y),b(()=>n(F)?y.HEART_FILLED:y.HEART)));var Ze=_(We,2),De=v(Ze);ne(De,()=>(O(y),b(()=>y.PREVIOUS)));var $e=_(Ze,2),Ne=v($e);ne(Ne,()=>(s(),O(y),b(()=>s().state==="play"?y.PAUSE:y.PLAY)));var Qe=_($e,2),nt=v(Qe);ne(nt,()=>(O(y),b(()=>y.NEXT)));var dt=_(Qe,2);{var St=be=>{var Ge=Fu();let Pt;var or=v(Ge);{var Rn=lr=>{var qr=rt(),jn=Pe(qr);ne(jn,()=>(O(y),b(()=>y.REPEAT))),m(lr,qr)},jt=lr=>{var qr=rt(),jn=Pe(qr);ne(jn,()=>(O(y),b(()=>y.SHUFFLE))),m(lr,qr)};z(or,lr=>{n(k)===2?lr(Rn):lr(jt,!1)})}var _r=_(or,2);{var Aa=lr=>{var qr=Du();m(lr,qr)};z(_r,lr=>{n(k)>0&&lr(Aa)})}le(()=>Pt=Ve(Ge,1,"btn-icon side-btn mode-btn svelte-1olwzt8",null,Pt,{active:n(k)>0})),A("click",Ge,Q),m(be,Ge)},yt=be=>{var Ge=qu();m(be,Ge)};z(dt,be=>{n(h)?be(yt,!1):be(St)})}var _t=_(Ke,2),ut=v(_t),ht=v(ut);ne(ht,()=>n(E));var ft=_(ut,2),vt=v(ft),je=v(vt),pt=_(je,2);Or(ft,be=>g(J,be),()=>n(J));var Lt=_(ft,2),Gt=v(Lt);ne(Gt,()=>(O(y),b(()=>y.VOLUME_FULL))),le((be,Ge)=>{Y=Ve(oe,1,"full-player svelte-1olwzt8",null,Y,{"is-docked":X()}),lt(oe,X()?"":`transform: translateY(${n(se)}px); transition: ${n(I)?"none":"transform 0.3s cubic-bezier(0.2, 0.8, 0.2, 1)"}`),qt(ke,"src",n(d)),lt(Ce,`transform: scale(${1-n(se)/3e3})`),lt(Fe,`opacity: ${1-n(se)/400}`),ve(ie,(r(),b(()=>r().title||"Not Playing"))),ve(Me,(r(),b(()=>r().stationName||r().artist||"Moode Audio"))),ge=Ve(ae,1,"bar-hit-area svelte-1olwzt8",null,ge,{"is-docked-bar":X()}),lt(V,`width: ${n(x)??""}%; transition: ${n(p)?"width 0.3s linear":"none"}`),ve(Ue,be),ve(Xe,Ge),He=Ve(We,1,"btn-icon side-btn svelte-1olwzt8",null,He,{liked:n(F)}),lt(je,`width: ${s(),b(()=>s().volume)??""}%`),lt(pt,`left: ${s(),b(()=>s().volume)??""}%; right: auto;`)},[()=>(n(P),n(R),n(c),n(u),b(()=>n(P)?D(n(R)*n(c)):D(n(u)))),()=>(n(h),n(c),b(()=>n(h)?"LIVE":D(n(c))))]),A("mousedown",ae,L),A("touchstart",ae,L,void 0,!0),A("mousemove",ae,function(...be){(n(P)?j:null)?.apply(this,be)}),A("touchmove",ae,function(...be){(n(P)?j:null)?.apply(this,be)},void 0,!0),A("mouseup",ae,we),A("touchend",ae,we),A("click",We,()=>fr.toggleFavorite(r())),A("click",Ze,()=>Qa("previous")),A("click",$e,function(...be){Ln?.apply(this,be)}),A("click",Qe,()=>Qa("next")),A("click",ut,$),A("mousedown",ft,Qt(U)),A("touchstart",ft,Qt(U)),ot(3,oe,()=>vo,()=>({y:X()?0:800,duration:300,opacity:1})),m(e,oe),xt(),l()}const Uu=`<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.0//EN" "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd">
<svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="600px" height="331px" viewBox="0 0 600 331" preserveAspectRatio="xMidYMid meet">
 <g fill="#eb1250">
  <path d="M 315.33 288.42 c -1.03 -0.33 -2.60 -1.34 -3.70 -2.39 -1.08 -1.01 -1.73 -2.81 -2.48 -6.68 -0.38 -1.99 -0.84 -4.29 -1.03 -5.13 -0.21 -0.84 -0.47 -2.20 -0.61 -3.05 -0.14 -0.84 -0.42 -2.34 -0.61 -3.33 -0.45 -2.20 -0.42 -2.04 -0.77 -4.17 -0.16 -0.96 -0.40 -2.16 -0.52 -2.65 -0.14 -0.52 -0.33 -1.45 -0.45 -2.11 -0.12 -0.68 -0.38 -2.02 -0.59 -2.98 -0.21 -0.96 -0.52 -2.55 -0.70 -3.52 -0.16 -0.96 -0.52 -2.81 -0.77 -4.10 -0.26 -1.29 -0.82 -4.08 -1.22 -6.21 -0.80 -4.20 -1.57 -8.13 -2.44 -12.54 -0.33 -1.55 -0.63 -3.23 -0.73 -3.75 -0.07 -0.52 -0.28 -1.57 -0.47 -2.34 -0.16 -0.77 -0.54 -2.63 -0.80 -4.10 -0.28 -1.48 -0.61 -3.12 -0.73 -3.63 -0.12 -0.52 -0.42 -2.20 -0.70 -3.75 -0.28 -1.55 -0.91 -4.92 -1.43 -7.50 -0.49 -2.58 -1.34 -7.01 -1.85 -9.84 -0.54 -2.84 -1.17 -6.26 -1.43 -7.62 -0.26 -1.36 -0.56 -3.07 -0.68 -3.80 -0.12 -0.75 -0.26 -1.43 -0.33 -1.55 -0.26 -0.42 -2.60 -12.89 -3.21 -17.16 -0.12 -0.84 -0.38 -2.16 -0.56 -2.93 -0.16 -0.77 -0.49 -2.34 -0.70 -3.52 -0.21 -1.15 -0.63 -3.26 -0.94 -4.69 -0.30 -1.41 -0.68 -3.30 -0.82 -4.22 -0.16 -0.89 -0.47 -2.58 -0.73 -3.75 -0.68 -3.30 -2.74 -14.16 -3.73 -19.80 -0.28 -1.48 -0.63 -3.38 -0.82 -4.22 -0.38 -1.71 -1.31 -6.70 -1.88 -10.08 -0.40 -2.34 -0.87 -4.71 -1.43 -7.27 -0.16 -0.84 -0.59 -3 -0.91 -4.80 -0.35 -1.80 -0.77 -4.01 -0.96 -4.92 -0.19 -0.89 -0.54 -2.98 -0.80 -4.64 -0.49 -3.26 -0.70 -3.91 -1.10 -3.40 -0.14 0.16 -0.30 0.63 -0.38 1.01 -0.07 0.40 -0.54 2.51 -1.01 4.69 -2.67 12.42 -3.16 14.77 -3.38 16.29 -0.28 1.99 -1.48 7.64 -3.77 18.05 -1.17 5.23 -2.37 10.66 -2.67 12.07 -0.33 1.43 -0.84 4.01 -1.17 5.74 -0.30 1.73 -1.05 5.27 -1.64 7.85 -0.59 2.58 -1.59 7.17 -2.25 10.20 -0.63 3.02 -1.38 5.93 -1.62 6.45 -0.66 1.36 -2.60 3.26 -4.05 3.96 -1.24 0.61 -1.24 0.61 -87.30 0.61 -86.04 0 -86.04 0 -87.33 -0.49 -1.59 -0.59 -3.56 -2.32 -4.41 -3.89 -1.97 -3.63 -0.35 -8.32 3.61 -10.43 1.01 -0.54 1.01 -0.54 83.44 -0.61 82.43 -0.05 82.43 -0.05 82.69 -1.41 0.14 -0.73 0.42 -1.85 0.59 -2.51 0.19 -0.63 0.82 -3.59 1.41 -6.56 0.59 -2.95 1.29 -6.23 1.52 -7.27 0.23 -1.03 0.82 -3.66 1.27 -5.86 0.47 -2.18 1.34 -6.30 1.97 -9.14 0.63 -2.84 1.34 -6.16 1.57 -7.38 0.21 -1.22 0.49 -2.39 0.61 -2.60 0.09 -0.21 0.42 -1.64 0.68 -3.16 0.26 -1.55 0.63 -3.26 0.82 -3.82 0.19 -0.59 0.35 -1.34 0.35 -1.69 0 -0.35 0.21 -1.57 0.49 -2.70 0.26 -1.13 0.59 -2.60 0.68 -3.23 0.21 -1.22 2.16 -10.08 3.05 -13.78 0.26 -1.13 1.05 -4.88 1.76 -8.32 0.70 -3.45 1.55 -7.59 1.88 -9.21 0.33 -1.62 1.08 -5.09 1.64 -7.73 1.62 -7.41 1.73 -7.95 2.13 -9.96 0.91 -4.62 1.92 -9.19 2.18 -9.80 0.14 -0.35 0.82 -1.24 1.48 -1.97 2.58 -2.72 5.84 -3.42 8.88 -1.90 1.97 0.98 3.73 2.74 4.27 4.31 0.42 1.20 1.41 6.42 1.80 9.47 0.09 0.84 0.30 1.83 0.45 2.18 0.14 0.38 0.26 1.10 0.26 1.66 0 0.54 0.16 1.45 0.35 2.04 0.19 0.56 0.56 2.25 0.84 3.73 0.82 4.50 1.78 9.28 2.20 11.13 0.19 0.77 0.45 2.04 0.56 2.81 0.47 2.63 1.92 10.08 2.25 11.60 0.19 0.84 0.45 2.16 0.56 2.93 0.28 1.64 0.63 3.56 1.08 5.86 0.19 0.91 0.49 2.60 0.70 3.75 0.21 1.17 0.54 2.79 0.70 3.63 0.19 0.84 0.77 3.75 1.29 6.45 0.54 2.72 1.17 5.88 1.41 7.03 0.23 1.17 0.66 3.38 0.94 4.92 0.26 1.55 0.70 4.03 0.96 5.51 0.26 1.48 0.73 3.91 1.03 5.39 0.30 1.48 0.68 3.45 0.82 4.34 0.16 0.91 0.47 2.48 0.70 3.52 0.70 3.19 2.23 10.73 2.58 12.89 0.09 0.66 0.47 2.48 0.80 4.10 0.63 3.05 0.70 3.35 1.66 8.77 0.33 1.80 0.82 4.29 1.08 5.51 0.26 1.24 0.56 2.79 0.68 3.42 0.19 1.17 0.89 4.76 1.55 8.09 0.21 0.96 0.63 3.23 0.96 5.04 0.84 4.64 1.41 7.55 1.69 8.91 0.14 0.66 0.35 1.76 0.49 2.46 0.12 0.70 0.38 2.04 0.56 2.93 0.19 0.91 0.61 3.16 0.94 5.04 1.05 5.86 2.48 13.41 2.88 15.12 0.19 0.91 0.42 2.02 0.47 2.46 0.07 0.45 0.33 1.78 0.59 2.93 0.26 1.17 0.56 2.70 0.68 3.40 0.12 0.70 0.30 1.62 0.42 1.99 0.12 0.40 0.35 1.48 0.52 2.41 0.26 1.50 0.35 1.69 0.82 1.69 0.45 0 0.54 -0.16 0.68 -0.98 0.23 -1.66 2.23 -11.86 2.84 -14.60 0.30 -1.41 0.66 -3.09 0.80 -3.75 0.89 -4.57 5.46 -26.60 6.47 -31.17 0.33 -1.41 0.77 -3.59 1.03 -4.80 0.52 -2.51 1.13 -5.44 2.13 -10.08 0.38 -1.73 1.01 -4.69 1.36 -6.56 0.38 -1.88 1.05 -5.13 1.50 -7.27 0.47 -2.13 0.94 -4.38 1.05 -5.04 0.45 -2.30 1.95 -9.63 2.18 -10.48 0.26 -1.01 1.64 -7.38 2.44 -11.32 0.30 -1.55 0.77 -3.87 1.05 -5.16 0.47 -2.34 2.91 -13.57 4.22 -19.57 0.38 -1.73 0.82 -3.89 0.96 -4.80 0.54 -3.26 2.16 -5.65 4.64 -6.91 1.73 -0.87 2.53 -1.01 4.36 -0.82 1.22 0.14 1.83 0.35 2.93 1.08 2.20 1.43 3.40 3.45 4.45 7.55 0.26 1.05 0.70 2.72 0.96 3.68 0.26 0.96 0.63 2.34 0.80 3.05 0.54 2.16 1.29 4.95 1.78 6.56 0.23 0.84 0.70 2.48 1.01 3.63 0.30 1.17 0.98 3.63 1.52 5.51 0.54 1.88 1.24 4.41 1.55 5.63 0.33 1.22 0.80 2.86 1.05 3.63 0.26 0.77 0.47 1.59 0.47 1.80 0 0.23 0.30 1.50 0.68 2.81 0.38 1.34 1.01 3.68 1.43 5.23 0.77 2.81 1.52 5.58 3.26 11.72 0.52 1.80 1.31 4.71 1.76 6.47 0.45 1.76 0.96 3.70 1.17 4.34 0.30 0.98 2.39 8.65 4.29 15.68 1.13 4.24 2.25 8.27 3.05 11.13 1.45 5.13 1.62 5.74 3.21 11.79 0.42 1.59 0.54 1.80 0.96 1.80 0.16 0 0.35 0.12 0.40 0.28 0.05 0.14 0.33 -0.52 0.63 -1.48 0.30 -0.96 1.73 -5.37 3.19 -9.82 1.48 -4.45 3.09 -9.52 3.63 -11.25 0.52 -1.73 1.85 -5.86 2.95 -9.14 1.13 -3.28 2.48 -7.45 3.05 -9.26 1.73 -5.44 2.23 -6.19 5.11 -7.69 1.43 -0.75 1.43 -0.75 69.40 -0.82 67.97 -0.07 67.97 -0.07 69.56 0.47 0.87 0.28 1.57 0.61 1.57 0.70 0 0.12 0.42 0.56 0.94 1.03 0.52 0.47 1.27 1.52 1.64 2.32 0.94 1.97 0.98 4.52 0.14 6.33 -0.73 1.57 -3.26 3.98 -4.52 4.31 -0.70 0.19 -19.31 0.28 -65.27 0.33 -64.29 0.05 -64.29 0.05 -66.82 7.66 -1.38 4.20 -4.97 14.95 -7.97 23.91 -5.58 16.71 -8.34 25.17 -9.89 30.12 -1.38 4.43 -2.34 5.98 -4.66 7.43 -1.15 0.75 -1.29 0.77 -3.66 0.77 -2.11 0 -2.63 -0.07 -3.59 -0.56 -1.20 -0.59 -2.65 -1.92 -3.59 -3.30 -0.47 -0.68 -2.44 -7.15 -4.17 -13.59 -0.19 -0.70 -0.61 -2.23 -0.94 -3.40 -0.33 -1.15 -0.77 -2.74 -0.98 -3.52 -0.19 -0.77 -0.45 -1.71 -0.56 -2.11 -0.12 -0.38 -0.49 -1.76 -0.82 -3.05 -0.35 -1.29 -1.03 -3.77 -1.52 -5.51 -1.90 -6.52 -2.79 -9.75 -2.95 -10.66 -0.07 -0.52 -0.23 -1.10 -0.35 -1.31 -0.12 -0.21 -0.63 -2.02 -1.15 -3.98 -0.94 -3.54 -1.66 -6.23 -3.40 -12.63 -0.47 -1.73 -1.10 -4.03 -1.43 -5.09 -0.30 -1.05 -0.94 -3.33 -1.38 -5.04 -0.45 -1.71 -1.03 -3.91 -1.29 -4.88 -0.28 -0.96 -0.59 -2.18 -0.68 -2.70 -0.12 -0.52 -0.75 -2.88 -1.41 -5.27 -0.66 -2.39 -1.45 -5.39 -1.80 -6.68 -0.33 -1.29 -0.70 -2.60 -0.80 -2.93 -0.30 -0.91 -2.04 -7.52 -2.25 -8.55 -0.16 -0.70 -0.33 -0.94 -0.66 -0.94 -0.40 0 -0.56 0.56 -1.45 4.80 -0.54 2.65 -1.36 6.61 -1.85 8.79 -0.47 2.20 -1.15 5.51 -1.50 7.38 -1.22 6.28 -1.92 9.73 -2.25 11.13 -0.19 0.77 -0.52 2.30 -0.70 3.40 -0.21 1.10 -0.54 2.53 -0.70 3.16 -0.19 0.66 -0.61 2.48 -0.91 4.10 -0.73 3.73 -1.69 8.48 -1.99 9.84 -0.49 2.30 -0.94 4.43 -1.29 6.21 -0.21 1.03 -0.75 3.61 -1.20 5.74 -0.45 2.13 -0.84 4.20 -0.91 4.57 -0.07 0.40 -0.23 1.34 -0.35 2.11 -0.14 0.77 -0.73 3.63 -1.31 6.33 -0.59 2.72 -1.17 5.55 -1.31 6.33 -0.30 1.83 -1.57 8.39 -1.85 9.61 -0.12 0.52 -0.54 2.58 -0.94 4.57 -0.40 1.99 -0.87 4.22 -1.05 4.92 -0.16 0.70 -0.45 2.09 -0.61 3.05 -0.16 0.96 -0.49 2.65 -0.73 3.75 -0.54 2.46 -0.59 2.70 -2.32 11.48 -0.77 3.94 -1.55 7.73 -1.73 8.44 -0.19 0.70 -0.56 2.39 -0.82 3.75 -0.28 1.36 -0.70 3.47 -0.96 4.69 -0.23 1.22 -0.61 3.23 -0.82 4.45 -0.63 3.87 -2.23 6.45 -4.83 7.85 -1.01 0.56 -1.57 0.68 -3.12 0.75 -1.13 0.05 -2.25 -0.07 -2.84 -0.26 z "/>
 </g>
</svg>`;var Hu=S('<div class="backdrop svelte-ji5owg"></div>'),Yu=S('<button><span class="icon svelte-ji5owg"><!></span> <span> </span></button>'),Vu=S('<!> <aside><div class="header svelte-ji5owg"><div class="header-inner svelte-ji5owg"><button class="collapse-btn svelte-ji5owg"><div class="chevron svelte-ji5owg"><!></div></button> <div><div class="logo svelte-ji5owg"><!></div></div></div> <button class="btn-icon mobile-close svelte-ji5owg"><!></button></div> <div class="scroll-area custom-scrollbar svelte-ji5owg"><nav class="svelte-ji5owg"><!> <button title="Search"><span class="icon svelte-ji5owg"><!></span> <span>Search</span></button> <div class="sep svelte-ji5owg"></div> <button class="nav-item sync svelte-ji5owg" title="Update Library"><span><!></span> <span> </span></button> <div class="sep svelte-ji5owg"></div> <button title="Settings"><span class="icon svelte-ji5owg"><!></span> <span>Settings</span></button></nav> <div class="footer svelte-ji5owg"><div>Moode WaveUI</div></div></div></aside>',1);function Wu(e,t){kt(t,!1);const r=()=>_e(xn,"$isYandexEnabled",o),a=()=>_e(ar,"$isSyncingLibrary",o),s=()=>_e(cs,"$isSidebarCollapsed",o),i=()=>_e(It,"$activeMenuTab",o),[o,l]=Rt(),d=T(),c=T();let u=gt(t,"isOpen",8,!1);const h=$s();let f=T(0),p=T(0),x=T(!1);const E=[{id:"queue",label:"Queue",icon:y.MENU},{id:"favorites",label:"Favorites",icon:y.HEART},{id:"artists",label:"Artists",icon:y.ARTISTS},{id:"albums",label:"Albums",icon:y.ALBUMS},{id:"playlists",label:"Playlists",icon:y.PLAYLISTS},{id:"radio",label:"Radio",icon:y.RADIO},{id:"yandex",label:"Yandex Music",icon:y.YANDEX}];function k(ae){window.location.hash=`/${ae}`,h("close")}async function w(){a()||(await Xa.syncLibrary(),window.location.hash="/artists")}function F(){cs.update(ae=>!ae)}function Z(ae){u()&&(g(f,ae.touches[0].clientX),g(p,n(f)),g(x,!0))}function X(ae){n(x)&&g(p,ae.touches[0].clientX)}function K(){n(x)&&(n(p)-n(f)<-70&&h("close"),g(x,!1),g(f,0),g(p,0))}te(()=>r(),()=>{g(d,E.filter(ae=>ae.id==="yandex"?r():!0))}),te(()=>(n(x),n(p),n(f)),()=>{g(c,n(x)?Math.min(0,n(p)-n(f)):0)}),Bt(),At();var se=Vu(),I=Pe(se);{var q=ae=>{var ge=Hu();A("click",ge,()=>h("close")),ot(3,ge,()=>bt,()=>({duration:200})),m(ae,ge)};z(I,ae=>{u()&&ae(q)})}var C=_(I,2);let ye,he;var P=v(C),R=v(P),G=v(R),D=v(G),W=v(D);ne(W,()=>(O(y),b(()=>y.BACK)));var L=_(G,2);let j;var we=v(L),H=v(we);ne(H,()=>Uu);var J=_(R,2),de=v(J);ne(de,()=>(O(y),b(()=>y.CLOSE)));var $=_(P,2),U=v($),re=v(U);Et(re,1,()=>n(d),ae=>ae.id,(ae,ge)=>{var N=Yu();let V;var pe=v(N),Oe=v(pe);ne(Oe,()=>(n(ge),b(()=>n(ge).icon)));var Ue=_(pe,2);let Ie;var Xe=v(Ue);le(()=>{V=Ve(N,1,"nav-item svelte-ji5owg",null,V,{active:i()===n(ge).id}),qt(N,"title",(n(ge),b(()=>n(ge).label))),Ie=Ve(Ue,1,"label-text svelte-ji5owg",null,Ie,{hidden:s()}),ve(Xe,(n(ge),b(()=>n(ge).label)))}),A("click",N,()=>k(n(ge).id)),m(ae,N)});var ue=_(re,2);let Q;var oe=v(ue),Y=v(oe);ne(Y,()=>(O(y),b(()=>y.SEARCH)));var ee=_(oe,2);let ce;var fe=_(ue,4),ke=v(fe);let B;var me=v(ke);ne(me,()=>(O(y),b(()=>y.SYNC)));var Ce=_(ke,2);let Le;var Fe=v(Ce),Te=_(fe,4);let M;var ie=v(Te),Se=v(ie);ne(Se,()=>(O(y),b(()=>y.SETTINGS)));var xe=_(ie,2);let Me;var Ee=_(U,2),ze=v(Ee);let Re;le(()=>{ye=Ve(C,1,"side-menu svelte-ji5owg",null,ye,{"mobile-open":u(),collapsed:s()}),he=lt(C,"",he,{transform:u()?`translateX(${n(c)}px)`:"",transition:n(x)?"none":"width 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.3s ease"}),qt(G,"title",s()?"Expand":"Collapse"),lt(D,`transform: rotate(${s()?"180deg":"0deg"})`),j=Ve(L,1,"logo-wrapper svelte-ji5owg",null,j,{hidden:s()}),Q=Ve(ue,1,"nav-item svelte-ji5owg",null,Q,{active:i()==="search"}),ce=Ve(ee,1,"label-text svelte-ji5owg",null,ce,{hidden:s()}),fe.disabled=a(),B=Ve(ke,1,"icon svelte-ji5owg",null,B,{spin:a()}),Le=Ve(Ce,1,"label-text svelte-ji5owg",null,Le,{hidden:s()}),ve(Fe,a()?"Syncing...":"Update Library"),M=Ve(Te,1,"nav-item svelte-ji5owg",null,M,{active:i()==="settings"}),Me=Ve(xe,1,"label-text svelte-ji5owg",null,Me,{hidden:s()}),Re=Ve(ze,1,"footer-text svelte-ji5owg",null,Re,{hidden:s()})}),A("click",G,F),A("click",J,()=>h("close")),A("click",ue,()=>k("search")),A("click",fe,w),A("click",Te,()=>k("settings")),A("touchstart",C,Z),A("touchmove",C,X),A("touchend",C,K),m(e,se),xt(),l()}const Qn={async request(e,t={}){const r=Je(Wa);if(!r)throw new Error("No token provided");const a=`/wave-api.php?action=yandex_proxy&path=${encodeURIComponent(e)}&token=${encodeURIComponent(r)}`,s={Authorization:`OAuth ${r}`,"Accept-Language":"ru",...t.headers||{}},i=await fetch(a,{method:t.method||"GET",headers:s,body:t.body});if(!i.ok){let o=`Yandex API Error: ${i.status}`;try{const l=await i.json();l.error&&(o=l.error)}catch{}throw new Error(o)}return t.isXml?await i.text():await i.json()},async getUserId(){const e=await this.request("/account/status");if(!e.result||!e.result.account)throw new Error("Invalid response from Yandex: "+JSON.stringify(e));return e.result.account.uid},async getFavorites(){try{const e=await this.getUserId(),r=(await this.request(`/users/${e}/likes/tracks`)).result.library;if(!r||r.length===0)return[];const a=r.map(s=>s.id).slice(0,50);return await this.getTracksByIds(a)}catch(e){return console.error("Yandex Favorites Error:",e),[]}},async search(e){if(!e)return[];try{const t=await this.request(`/search?text=${encodeURIComponent(e)}&type=track&page=0`),r=t.result.tracks?t.result.tracks.results:[];return this.normalizeTracks(r)}catch(t){return console.error("Yandex Search Error:",t),[]}},async getTracksByIds(e){if(!e.length)return[];const t=await this.request("/tracks",{method:"POST",body:`track-ids=${e.join(",")}`});return this.normalizeTracks(t.result)},async getStreamUrl(e){try{const r=(await this.request(`/tracks/${e}/download-info`)).result[0].downloadInfoUrl,a=await this.request(r,{isXml:!0}),i=new DOMParser().parseFromString(a,"text/xml"),o=i.getElementsByTagName("host")[0]?.textContent,l=i.getElementsByTagName("path")[0]?.textContent,d=i.getElementsByTagName("ts")[0]?.textContent,c=i.getElementsByTagName("s")[0]?.textContent;if(!o||!l||!d||!c)throw new Error("Invalid XML format");const h=uo("XGRlBW9FXlekgbPrRHuSiA"+l.substring(1)+c);return`https://${o}/get-mp3/${h}/${d}${l}`}catch(t){return console.error("Failed to get Yandex Stream URL",t),null}},normalizeTracks(e){return Array.isArray(e)?e.map(t=>({title:t.title,artist:t.artists.map(r=>r.name).join(", "),album:t.albums.length>0?t.albums[0].title:"Single",file:`https://music.yandex.ru/album/${t.albums[0]?.id}/track/${t.id}`,id:t.id,image:t.coverUri?`https://${t.coverUri.replace("%%","200x200")}`:null,time:t.durationMs/1e3,genre:"Yandex Music",isYandex:!0,stationName:null})):[]}};var Qu=S('<div class="token-alert content-padded svelte-4g0hpd"><h3 class="svelte-4g0hpd">Yandex Music Token Required</h3> <p class="svelte-4g0hpd">Please go to Settings and enter your OAuth token.</p></div>'),Xu=S('<div class="search-input-container svelte-4g0hpd"><span class="search-icon svelte-4g0hpd"><!></span> <input type="text" placeholder="Search Yandex Music..." class="svelte-4g0hpd"/></div>'),Gu=S('<div slot="header" class="content-padded svelte-4g0hpd"><h1 class="header-title svelte-4g0hpd"> </h1></div>'),Ku=S('<div slot="row" class="svelte-4g0hpd"><!></div>'),Zu=S('<div class="content-padded no-bottom-pad svelte-4g0hpd"><div class="tabs svelte-4g0hpd"><button>Favorites</button> <button>Search</button></div> <!></div> <!>',1),Ju=S('<div class="view-container svelte-4g0hpd"><!></div>');function ef(e,t){kt(t,!1);const r=()=>_e(Wa,"$yandexToken",a),[a,s]=Rt(),i=T(),o=Be([]);let l=T(!1),d=T("favorites"),c=T("");async function u(){if(!n(i))return;g(l,!0),g(d,"favorites");const w=await Qn.getFavorites();o.set(w),g(l,!1)}async function h(){if(!n(c)||!n(i))return;g(l,!0),g(d,"search");const w=await Qn.search(n(c));o.set(w),g(l,!1)}async function f(w){if(!w.id)return;qe(`Resolving stream for ${w.title}...`,"info");const F=await Qn.getStreamUrl(w.id);F?(void 0)(F,{title:w.title,artist:w.artist,album:w.album}):qe("Failed to get stream URL","error")}Dr(()=>{n(i)&&u()}),te(()=>r(),()=>{g(i,!!r())}),Bt(),At();var p=Ju(),x=v(p);{var E=w=>{var F=Qu();m(w,F)},k=w=>{var F=Zu(),Z=Pe(F),X=v(Z),K=v(X);let se;var I=_(K,2);let q;var C=_(X,2);{var ye=P=>{var R=Xu(),G=v(R),D=v(G);ne(D,()=>(O(y),b(()=>y.SEARCH)));var W=_(G,2);Gr(W,()=>n(c),L=>g(c,L)),A("change",W,h),A("keydown",W,L=>L.key==="Enter"&&h()),ot(1,R,()=>bt),m(P,R)};z(C,P=>{n(d)==="search"&&P(ye)})}var he=_(Z,2);{let P=ct(()=>n(d)==="favorites"?"No favorites found":"Start searching...");rn(he,{get itemsStore(){return o},get isLoading(){return n(l)},get emptyText(){return n(P)},$$slots:{header:(R,G)=>{var D=Gu(),W=v(D),L=v(W);le(()=>ve(L,n(d)==="favorites"?"My Favorites":"Search Results")),m(R,D)},row:(R,G)=>{var D=Ku();const W=ct(()=>G.item),L=ct(()=>G.index);var j=v(D);Sa(j,{get track(){return n(W)},get index(){return n(L)},isEditable:!1,$$events:{play:()=>f(n(W))}}),m(R,D)}}})}le(()=>{se=Ve(K,1,"tab-btn svelte-4g0hpd",null,se,{active:n(d)==="favorites"}),q=Ve(I,1,"tab-btn svelte-4g0hpd",null,q,{active:n(d)==="search"})}),A("click",K,u),A("click",I,()=>g(d,"search")),m(w,F)};z(x,w=>{n(i)?w(k,!1):w(E)})}m(e,p),xt(),s()}var tf=S('<div class="toast-container svelte-k2bvk7"><div> </div></div>'),rf=S('<button class="back-btn svelte-k2bvk7"><span class="icon-inline svelte-k2bvk7"><!></span> Back</button>'),af=S('<div class="view-title svelte-k2bvk7"><!></div>'),nf=S('<div class="full-player-modal svelte-k2bvk7"><!></div>'),sf=S('<div class="app-container svelte-k2bvk7"><div class="app-layout svelte-k2bvk7"><!> <!> <main class="content-area svelte-k2bvk7"><header class="top-bar svelte-k2bvk7"><button class="hamburger-btn svelte-k2bvk7"><!></button> <!></header> <div class="scroll-container svelte-k2bvk7"><div class="view-wrapper svelte-k2bvk7"><!></div></div></main> <div class="docked-player-container svelte-k2bvk7"><!></div></div> <div class="mini-player-wrapper svelte-k2bvk7"><!></div></div> <!>',1);function of(e,t){kt(t,!1);const r=()=>_e(Yt,"$navigationStack",o),a=()=>_e(is,"$toastMessage",o),s=()=>_e(It,"$activeMenuTab",o),i=()=>_e(kn,"$isFullPlayerOpen",o),[o,l]=Rt();let d=T(!1);Dr(()=>{window.history.replaceState({depth:r().length},"","");const L=()=>void 0;return window.addEventListener("popstate",L),()=>window.removeEventListener("popstate",L)}),At();var c=sf(),u=Pe(c),h=v(u),f=v(h);{var p=L=>{var j=tf(),we=v(j),H=v(we);le(()=>{Ve(we,1,`toast-body ${a().type??""}`,"svelte-k2bvk7"),ve(H,a().text)}),ot(3,j,()=>vo,()=>({y:-50,duration:300})),m(L,j)};z(f,L=>{a()&&L(p)})}var x=_(f,2);Wu(x,{get isOpen(){return n(d)},$$events:{close:()=>g(d,!1)}});var E=_(x,2),k=v(E),w=v(k),F=v(w);ne(F,()=>y.MENU);var Z=_(w,2);{var X=L=>{var j=rf(),we=v(j),H=v(we);ne(H,()=>y.BACK),A("click",j,function(...J){rv?.apply(this,J)}),m(L,j)},K=L=>{var j=af(),we=v(j);{var H=de=>{var $=Br("Radio");m(de,$)},J=de=>{var $=rt(),U=Pe($);{var re=Q=>{var oe=Br("Playlists");m(Q,oe)},ue=Q=>{var oe=rt(),Y=Pe(oe);{var ee=fe=>{var ke=Br("Search");m(fe,ke)},ce=fe=>{var ke=rt(),B=Pe(ke);{var me=Le=>{ef(Le,{})},Ce=Le=>{var Fe=rt(),Te=Pe(Fe);{var M=Se=>{var xe=Br("Queue");m(Se,xe)},ie=Se=>{var xe=rt(),Me=Pe(xe);{var Ee=Re=>{var ae=Br("Favorites");m(Re,ae)},ze=Re=>{var ae=rt(),ge=Pe(ae);{var N=pe=>{var Oe=Br("Settings");m(pe,Oe)},V=pe=>{var Oe=Br();le(Ue=>ve(Oe,Ue),[()=>(s()||"Library").charAt(0).toUpperCase()+(s()||"library").slice(1)]),m(pe,Oe)};z(ge,pe=>{s()==="settings"?pe(N):pe(V,!1)},!0)}m(Re,ae)};z(Me,Re=>{s()==="favorites"?Re(Ee):Re(ze,!1)},!0)}m(Se,xe)};z(Te,Se=>{s()==="queue"?Se(M):Se(ie,!1)},!0)}m(Le,Fe)};z(B,Le=>{s()==="yandex"?Le(me):Le(Ce,!1)},!0)}m(fe,ke)};z(Y,fe=>{s()==="search"?fe(ee):fe(ce,!1)},!0)}m(Q,oe)};z(U,Q=>{s()==="playlists"?Q(re):Q(ue,!1)},!0)}m(de,$)};z(we,de=>{s()==="radio"?de(H):de(J,!1)})}m(L,j)};z(Z,L=>{r().length>1?L(X):L(K,!1)})}var se=_(k,2),I=v(se),q=v(I);{var C=L=>{Ld(L,{})},ye=L=>{var j=rt(),we=Pe(j);{var H=de=>{$u(de,{})},J=de=>{var $=rt(),U=Pe($);{var re=Q=>{ru(Q,{})},ue=Q=>{var oe=rt(),Y=Pe(oe);{var ee=fe=>{_u(fe,{})},ce=fe=>{var ke=rt(),B=Pe(ke);{var me=Le=>{ku(Le,{})},Ce=Le=>{bd(Le,{get activeCategory(){return s()}})};z(B,Le=>{s()==="settings"?Le(me):Le(Ce,!1)},!0)}m(fe,ke)};z(Y,fe=>{s()==="search"?fe(ee):fe(ce,!1)},!0)}m(Q,oe)};z(U,Q=>{s()==="playlists"||s()==="favorites"?Q(re):Q(ue,!1)},!0)}m(de,$)};z(we,de=>{s()==="queue"?de(H):de(J,!1)},!0)}m(L,j)};z(q,L=>{s()==="radio"?L(C):L(ye,!1)})}var he=_(E,2),P=v(he);gi(P,{isDocked:!0});var R=_(h,2),G=v(R);ju(G,{});var D=_(u,2);{var W=L=>{var j=nf(),we=v(j);gi(we,{}),m(L,j)};z(D,L=>{i()&&L(W)})}le(()=>lt(se,`padding-bottom: ${i()?"0px":"var(--mini-player-height)"};`)),A("click",w,()=>g(d,!0)),m(e,c),xt(),l()}var lf=S('<button class="back-btn-area svelte-l8h85k"><span class="back-icon svelte-l8h85k"><!></span></button> <span class="header-title svelte-l8h85k">Select Playlist</span>',1),cf=S('<div class="track-info svelte-l8h85k"><div class="title text-ellipsis svelte-l8h85k"> </div> <div class="artist text-ellipsis svelte-l8h85k">Playlist</div></div>'),vf=S('<div class="track-info svelte-l8h85k"><div class="title text-ellipsis svelte-l8h85k"> </div> <div class="artist text-ellipsis svelte-l8h85k"> </div></div>'),df=S('<button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span> </span></button>'),uf=S('<div class="empty-msg svelte-l8h85k">No custom playlists</div>'),ff=S("<!> <!>",1),hf=S('<button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Play Now</span></button> <div class="sep svelte-l8h85k"></div> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Rename</span></button> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Delete Playlist</span></button>',1),pf=S('<button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Go to Album</span></button> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Go to Artist</span></button>',1),gf=S('<div class="sep svelte-l8h85k"></div> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Remove from Playlist</span></button>',1),_f=S('<div class="sep svelte-l8h85k"></div> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Remove from Queue</span></button>',1),mf=S('<button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Play Next</span></button> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Add to Queue</span></button> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Add to Playlist...</span></button> <!> <button class="menu-row svelte-l8h85k"><span><!></span> <span> </span></button> <!> <!>',1),bf=S('<div class="backdrop svelte-l8h85k"><div class="menu-card svelte-l8h85k"><div class="menu-header svelte-l8h85k"><!></div> <div class="menu-items scroll-y svelte-l8h85k"><!></div></div></div>');function yf(e,t){kt(t,!1);const r=()=>_e(As,"$contextMenu",i),a=()=>_e(zr,"$favorites",i),s=()=>_e(Cn,"$playlists",i),[i,o]=Rt(),l=T(),d=T(),c=T(),u=T(),h=T(),f=T(),p=T();let x=T(),E=T(),k=T(),w=T(0),F=T(0),Z=T("main"),X=T(!1);function K($){r().isOpen&&(g(X,!1),Ut())}function se(){Ut()}function I(){r().track&&nr.playNext(r().track.file),Ut()}function q(){r().track&&nr.addToQueue(r().track.file),Ut()}function C(){r().track&&fr.toggleFavorite(r().track),Ut()}function ye(){const $=r().track;$&&$.album&&Nr("tracks_by_album",{name:$.album,artist:$.artist}),Ut()}function he(){const $=r().track;$&&$.artist&&Nr("albums_by_artist",{name:$.artist}),Ut()}async function P(){const{playlistName:$,index:U}=r().context;$&&U!==null&&(Oa.update(re=>{const ue=[...re];return ue.splice(U,1),ue}),await fr.removeFromPlaylist($,U)),Ut()}function R(){const{index:$}=r().context;$!=null&&nr.removeFromQueue($),Ut()}function G(){const $=r().context.playlist;$&&Ae.send("stop").then(()=>Ae.send("clear")).then(()=>Ae.send(`load "${$.name.replace(/"/g,'\\"')}"`)).then(()=>Ae.send("play 0")),Ut()}function D(){const $=r().context.playlist;$&&(Ut(),ur({title:"Rename Playlist",message:`Enter new name for "${$.name}":`,type:"prompt",placeholder:$.name,inputValue:$.name,confirmLabel:"Rename",onConfirm:U=>{U&&U!==$.name&&fr.renamePlaylist($.name,U)}}))}function W(){const $=r().context.playlist;$&&(Ut(),ur({title:"Delete Playlist",message:`Are you sure you want to delete "${$.name}"? This cannot be undone.`,type:"confirm",confirmLabel:"Delete",onConfirm:()=>{fr.deletePlaylist($.name)}}))}function L(){g(Z,"playlists")}function j(){g(Z,"main")}async function we($){const U=r().track;if(U)try{const re=$.replace(/"/g,'\\"'),ue=U.file.replace(/"/g,'\\"');await Ae.send(`playlistadd "${re}" "${ue}"`),qe(`Added to "${$}"`,"success"),Ut()}catch(re){console.error(re),qe("Failed to add","error")}}te(()=>r(),()=>{r().isOpen&&g(Z,"main")}),te(()=>(r(),n(X)),()=>{r().isOpen?!n(X)&&typeof history<"u"&&(history.pushState({contextMenuOpen:!0},""),g(X,!0)):n(X)&&typeof history<"u"&&(history.back(),g(X,!1))}),te(()=>(r(),a()),()=>{g(l,r().track&&a().has(r().track.file))}),te(()=>r(),()=>{g(d,r().track&&(r().track.file.includes("http")||r().track.file.includes("://")))}),te(()=>r(),()=>{g(c,r().context?.type==="playlist")}),te(()=>r(),()=>{g(u,r().context?.type==="queue")}),te(()=>r(),()=>{g(h,r().context?.type==="playlist-card")}),te(()=>r(),()=>{g(f,r().context?.source==="miniplayer")}),te(()=>(r(),n(F),n(w),n(x),n(f),n(E)),()=>{g(p,(()=>{if(!r().isOpen)return"";const $=r().triggerRect,U=r().x,re=r().y,ue=n(F)||220,Q=n(w)||320;if(n(x)<=768&&n(f)&&$)return`
        position: fixed; 
        bottom: ${n(E)-$.top}px; 
        left: 50%; 
        transform: translateX(-50%); 
        margin: 0; 
        transform-origin: bottom center;
      `;let oe=0,Y=0,ee="top left";if($){const fe=$.left+$.width/2,ke=$.top+$.height/2,B=fe>n(x)/2,me=ke>n(E)/2;B?(oe=$.right-ue,ee=me?"bottom right":"top right"):(oe=$.left,ee=me?"bottom left":"top left"),me?Y=$.top-Q:Y=$.bottom}else oe=U,Y=re,oe+ue>n(x)&&(oe=n(x)-ue-10),Y+Q>n(E)&&(Y=n(E)-Q-10);const ce=8;return oe<ce&&(oe=ce),oe+ue>n(x)-ce&&(oe=n(x)-ue-ce),Y<ce&&(Y=ce),Y+Q>n(E)-ce&&(Y=n(E)-Q-ce),`position: fixed; top: ${Y}px; left: ${oe}px; margin: 0; transform-origin: ${ee};`})())}),Bt(),At();var H=rt();A("popstate",Cr,K);var J=Pe(H);{var de=$=>{var U=bf(),re=v(U),ue=v(re),Q=v(ue);{var oe=B=>{var me=lf(),Ce=Pe(me),Le=v(Ce),Fe=v(Le);ne(Fe,()=>(O(y),b(()=>y.BACK))),A("click",Ce,j),m(B,me)},Y=B=>{var me=rt(),Ce=Pe(me);{var Le=Te=>{var M=cf(),ie=v(M),Se=v(ie);le(()=>ve(Se,(r(),b(()=>r().context.playlist.name)))),m(Te,M)},Fe=Te=>{var M=vf(),ie=v(M),Se=v(ie),xe=_(ie,2),Me=v(xe);le(()=>{ve(Se,(r(),b(()=>r().track.title))),ve(Me,(r(),b(()=>r().track.artist)))}),m(Te,M)};z(Ce,Te=>{n(h)?Te(Le):Te(Fe,!1)},!0)}m(B,me)};z(Q,B=>{n(Z)==="playlists"?B(oe):B(Y,!1)})}var ee=_(ue,2),ce=v(ee);{var fe=B=>{var me=ff(),Ce=Pe(me);Et(Ce,1,s,$r,(Te,M)=>{var ie=rt(),Se=Pe(ie);{var xe=Me=>{var Ee=df(),ze=v(Ee),Re=v(ze);ne(Re,()=>(O(y),b(()=>y.PLAYLISTS)));var ae=_(ze,2),ge=v(ae);le(()=>ve(ge,(n(M),b(()=>n(M).name)))),A("click",Ee,()=>we(n(M).name)),m(Me,Ee)};z(Se,Me=>{n(M),b(()=>n(M).name!=="Favorites")&&Me(xe)})}m(Te,ie)});var Le=_(Ce,2);{var Fe=Te=>{var M=uf();m(Te,M)};z(Le,Te=>{s(),b(()=>s().filter(M=>M.name!=="Favorites").length===0)&&Te(Fe)})}m(B,me)},ke=B=>{var me=rt(),Ce=Pe(me);{var Le=Te=>{var M=hf(),ie=Pe(M),Se=v(ie),xe=v(Se);ne(xe,()=>(O(y),b(()=>y.PLAY)));var Me=_(ie,4),Ee=v(Me),ze=v(Ee);ne(ze,()=>(O(y),b(()=>y.EDIT)));var Re=_(Me,2),ae=v(Re),ge=v(ae);ne(ge,()=>(O(y),b(()=>y.REMOVE))),A("click",ie,G),A("click",Me,D),A("click",Re,W),m(Te,M)},Fe=Te=>{var M=mf(),ie=Pe(M),Se=v(ie),xe=v(Se);ne(xe,()=>(O(y),b(()=>y.NEXT)));var Me=_(ie,2),Ee=v(Me),ze=v(Ee);ne(ze,()=>(O(y),b(()=>y.MENU)));var Re=_(Me,2),ae=v(Re),ge=v(ae);ne(ge,()=>(O(y),b(()=>y.ADD_TO_PLAYLIST||y.ADD)));var N=_(Re,2);{var V=De=>{var $e=pf(),Ne=Pe($e),Qe=v(Ne),nt=v(Qe);ne(nt,()=>(O(y),b(()=>y.ALBUM_LINK||y.ALBUMS)));var dt=_(Ne,2),St=v(dt),yt=v(St);ne(yt,()=>(O(y),b(()=>y.ARTIST_LINK||y.ARTISTS))),A("click",Ne,ye),A("click",dt,he),m(De,$e)};z(N,De=>{n(d)||De(V)})}var pe=_(N,2),Oe=v(pe);let Ue;var Ie=v(Oe);ne(Ie,()=>(n(l),O(y),b(()=>n(l)?y.HEART_FILLED:y.HEART)));var Xe=_(Oe,2),Ke=v(Xe),We=_(pe,2);{var He=De=>{var $e=gf(),Ne=_(Pe($e),2),Qe=v(Ne),nt=v(Qe);ne(nt,()=>(O(y),b(()=>y.REMOVE))),A("click",Ne,P),m(De,$e)};z(We,De=>{n(c)&&De(He)})}var Ye=_(We,2);{var Ze=De=>{var $e=_f(),Ne=_(Pe($e),2),Qe=v(Ne),nt=v(Qe);ne(nt,()=>(O(y),b(()=>y.REMOVE))),A("click",Ne,R),m(De,$e)};z(Ye,De=>{n(u)&&De(Ze)})}le(()=>{Ue=Ve(Oe,1,"icon svelte-l8h85k",null,Ue,{liked:n(l)}),ve(Ke,n(l)?"Unlike":"Like")}),A("click",ie,I),A("click",Me,q),A("click",Re,L),A("click",pe,C),m(Te,M)};z(Ce,Te=>{n(h)?Te(Le):Te(Fe,!1)},!0)}m(B,me)};z(ce,B=>{n(Z)==="playlists"?B(fe):B(ke,!1)})}Or(re,B=>g(k,B),()=>n(k)),le(()=>lt(re,n(p))),Ks(re,"clientHeight",B=>g(w,B)),Ks(re,"clientWidth",B=>g(F,B)),ot(3,re,()=>Ms,()=>({start:.95,duration:100})),A("click",re,Qt(function(B){Ha.call(this,t,B)})),A("click",U,se),ot(3,U,()=>bt,()=>({duration:100})),m($,U)};z(J,$=>{r(),b(()=>r().isOpen)&&$(de)})}Js("innerWidth",$=>g(x,$)),Js("innerHeight",$=>g(E,$)),m(e,H),xt(),o()}var wf=S('<p class="modal-message svelte-1bxxaoh"> </p>'),kf=S('<div class="input-wrapper svelte-1bxxaoh"><input type="text" autoFocus/></div>'),xf=S('<span class="check svelte-1bxxaoh">â</span>'),Sf=S("<button> <!></button>"),Ef=S('<div class="select-list svelte-1bxxaoh"></div>'),Tf=S('<button class="btn cancel svelte-1bxxaoh"> </button>'),$f=S('<div class="modal-actions svelte-1bxxaoh"><!> <button class="btn confirm svelte-1bxxaoh"> </button></div>'),Mf=S('<div class="backdrop svelte-1bxxaoh"><div class="modal-card svelte-1bxxaoh"><div class="modal-header svelte-1bxxaoh"><span class="modal-title svelte-1bxxaoh"> </span></div> <div class="modal-body svelte-1bxxaoh"><!> <!></div> <!></div></div>');function Af(e,t){kt(t,!1);const r=()=>_e(wn,"$modal",a),[a,s]=Rt();let i=T(!1),o=T();function l(){if(r().type==="prompt"){const E=r().inputValue?r().inputValue.trim():"";if(E.length===0){c();return}r().onConfirm&&r().onConfirm(E)}else r().onConfirm&&r().onConfirm();ln()}function d(E){r().onConfirm&&r().onConfirm(E),ln()}function c(){g(i,!0),n(o)&&n(o).focus(),setTimeout(()=>{g(i,!1)},400)}function u(){ln()}function h(E){E.key==="Enter"&&r().type!=="select"&&l(),n(i)&&g(i,!1)}te(()=>r(),()=>{r().isOpen||g(i,!1)}),Bt(),At();var f=rt(),p=Pe(f);{var x=E=>{var k=Mf(),w=v(k),F=v(w),Z=v(F),X=v(Z),K=_(F,2),se=v(K);{var I=R=>{var G=wf(),D=v(G);le(()=>ve(D,(r(),b(()=>r().message)))),m(R,G)};z(se,R=>{r(),b(()=>r().message)&&R(I)})}var q=_(se,2);{var C=R=>{var G=kf(),D=v(G);let W;Or(D,L=>g(o,L),()=>n(o)),le(()=>{W=Ve(D,1,"modal-input svelte-1bxxaoh",null,W,{"shake-error":n(i)}),qt(D,"placeholder",(r(),b(()=>r().placeholder)))}),Gr(D,()=>r().inputValue,L=>nc(wn,b(r).inputValue=L,b(r))),A("keydown",D,h),m(R,G)},ye=R=>{var G=rt(),D=Pe(G);{var W=L=>{var j=Ef();Et(j,5,()=>(r(),b(()=>r().options)),$r,(we,H)=>{var J=Sf();let de;var $=v(J),U=_($);{var re=ue=>{var Q=xf();m(ue,Q)};z(U,ue=>{n(H),r(),b(()=>n(H).value===r().inputValue)&&ue(re)})}le(()=>{de=Ve(J,1,"select-item svelte-1bxxaoh",null,de,{active:n(H).value===r().inputValue}),ve($,`${n(H),b(()=>n(H).label)??""} `)}),A("click",J,()=>d(n(H).value)),m(we,J)}),m(L,j)};z(D,L=>{r(),b(()=>r().type==="select")&&L(W)},!0)}m(R,G)};z(q,R=>{r(),b(()=>r().type==="prompt")?R(C):R(ye,!1)})}var he=_(K,2);{var P=R=>{var G=$f(),D=v(G);{var W=we=>{var H=Tf(),J=v(H);le(()=>ve(J,(r(),b(()=>r().cancelLabel)))),A("click",H,function(...de){ln?.apply(this,de)}),m(we,H)};z(D,we=>{r(),b(()=>r().type==="confirm"||r().type==="prompt")&&we(W)})}var L=_(D,2),j=v(L);le(()=>ve(j,(r(),b(()=>r().confirmLabel)))),A("click",L,l),m(R,G)};z(he,R=>{r(),b(()=>r().type!=="select")&&R(P)})}le(()=>ve(X,(r(),b(()=>r().title)))),ot(3,w,()=>Ms,()=>({start:.95,duration:200})),A("click",w,Qt(function(R){Ha.call(this,t,R)})),A("click",k,u),ot(3,k,()=>bt,()=>({duration:150})),m(E,k)};z(p,E=>{r(),b(()=>r().isOpen)&&E(x)})}m(e,f),xt(),s()}const _i={init(){this.handleHashChange(),window.addEventListener("hashchange",()=>this.handleHashChange())},handleHashChange(){let e=window.location.hash.slice(1);for(;e.startsWith("/");)e=e.slice(1);if(!e){(Je(Yt).length>1||Je(It)==="search")&&(this.setRootTab("artists"),window.location.hash="/artists");return}const t=e.split("/").map(decodeURIComponent),r=t[0];let a=tv();switch(a||t.length>1&&(r==="album"&&t.length>=3?a={artist:t[1],name:t[2]}:r==="artist"&&t.length>=2?a={name:t[1]}:a={name:t[1],displayName:t[1]}),console.log(`[Router] Navigating: ${r}`,a),r){case"queue":this.setRootTab("queue");break;case"radio":this.setRootTab("radio");break;case"playlists":this.setRootTab("playlists");break;case"settings":this.setRootTab("settings");break;case"favorites":It.set("favorites"),Yt.set([{view:"root"},{view:"details",data:{name:"Favorites"}}]);break;case"artists":this.setRootTab("artists");break;case"albums":this.setRootTab("albums");break;case"search":It.set("search"),t[1]&&Da.set(t[1]),Yt.set([{view:"root"}]);break;case"album":It.set("albums"),Yt.set([{view:"root"},{view:"tracks_by_album",data:a}]);break;case"artist":It.set("artists"),Yt.set([{view:"root"},{view:"albums_by_artist",data:a}]);break;case"playlist":It.set("playlists"),Yt.set([{view:"root"},{view:"details",data:a}]);break;case"yandex":It.set("yandex"),Yt.set([{view:"root"}]);break;default:this.setRootTab("artists");break}},setRootTab(e){It.set(e),Yt.set([{view:"root"}])},updateUrl(e,t){let r="";if(e==="root"){const a=Je(It);if(a==="search"){const s=Je(Da);r=s?`search/${encodeURIComponent(s)}`:"search"}else r=a}else if(e==="details"){const a=t.name||t;r=a==="Favorites"?"favorites":`playlist/${encodeURIComponent(a)}`}else if(e==="albums_by_artist"){const a=t.name||t;r=`artist/${encodeURIComponent(a)}`}else if(e==="tracks_by_album"){const a=t.name||t,s=t.artist;s?r=`album/${encodeURIComponent(s)}/${encodeURIComponent(a)}`:r=`album/${encodeURIComponent(a)}`}else e==="queue"&&(r="queue");if(r){const a=`#/${r}`;decodeURIComponent(window.location.hash)!==decodeURIComponent(a)&&(window.location.hash=`/${r}`)}}};var Pf=S("<!> <!> <!>",1);function Cf(e,t){kt(t,!1),Dr(async()=>{_i.init(),ev((o,l)=>{_i.updateUrl(o,l)}),mo(),Xa.loadRadioStations();try{const o=await Rr.getArtists();o.length>0?console.log(`[App] Database ready. Loaded ${o.length} artists from cache.`):(console.log("[App] Database empty. Starting initial sync..."),Xa.syncLibrary())}catch(o){console.error("[App] DB Check failed:",o),qe("Local DB error. Please update library manually.","error")}}),At();var r=Pf(),a=Pe(r);of(a,{});var s=_(a,2);yf(s,{});var i=_(s,2);Af(i,{}),m(e,r),xt()}Ol(Cf,{target:document.getElementById("app")});
