(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(a){if(a.ep)return;a.ep=!0;const i=t(a);fetch(a.href,i)}})();const Rr=!1;var lr=Array.isArray,to=Array.prototype.indexOf,cr=Array.from,Za=Object.defineProperty,is=Object.getOwnPropertyDescriptor,Ja=Object.getOwnPropertyDescriptors,no=Object.prototype,so=Array.prototype,Zr=Object.getPrototypeOf,ma=Object.isExtensible;function ro(e){return typeof e=="function"}const jt=()=>{};function ao(e){return e()}function er(e){for(var n=0;n<e.length;n++)e[n]()}function ei(){var e,n,t=new Promise((s,a)=>{e=s,n=a});return{promise:t,resolve:e,reject:n}}const wt=2,Jr=4,vr=8,io=1<<24,dn=16,wn=32,Xn=64,dr=128,tn=512,bt=1024,zt=2048,nn=4096,Ft=8192,gn=16384,ur=32768,Vn=65536,ba=1<<17,ti=1<<18,ps=1<<19,ni=1<<20,pn=1<<25,Yn=32768,Ir=1<<21,ea=1<<22,$n=1<<23,On=Symbol("$state"),oo=Symbol("legacy props"),lo=Symbol(""),rs=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function ta(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function co(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function vo(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function uo(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function fo(e){throw new Error("https://svelte.dev/e/effect_orphan")}function ho(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function po(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function _o(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function go(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function mo(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function bo(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const yo=1,wo=2,si=4,ko=8,xo=16,Eo=1,So=2,Mo=4,To=8,$o=16,Ao=1,Po=2,Co=4,Lo=1,zo=2,Et=Symbol(),Ro="http://www.w3.org/1999/xhtml";function Io(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function ri(e){return e===this.v}function na(e,n){return e!=e?n==n:e!==n||e!==null&&typeof e=="object"||typeof e=="function"}function ai(e){return!na(e,this.v)}let _s=!1,No=!1;function jo(){_s=!0}let it=null;function cs(e){it=e}function kt(e,n=!1,t){it={p:it,i:!1,c:null,e:null,s:e,x:null,l:_s&&!n?{s:null,u:null,$:[]}:null}}function xt(e){var n=it,t=n.e;if(t!==null){n.e=null;for(var s of t)yi(s)}return n.i=!0,it=n.p,{}}function Os(){return!_s||it!==null&&it.l===null}let Nn=[];function ii(){var e=Nn;Nn=[],er(e)}function Gn(e){if(Nn.length===0&&!Es){var n=Nn;queueMicrotask(()=>{n===Nn&&ii()})}Nn.push(e)}function Oo(){for(;Nn.length>0;)ii()}function oi(e){var n=Xe;if(n===null)return We.f|=$n,e;if((n.f&ur)===0){if((n.f&dr)===0)throw e;n.b.error(e)}else vs(e,n)}function vs(e,n){for(;n!==null;){if((n.f&dr)!==0)try{n.b.error(e);return}catch(t){e=t}n=n.parent}throw e}const Bs=new Set;let Je=null,Ws=null,Yt=null,Ut=[],fr=null,Nr=!1,Es=!1;class an{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#n=0;#s=0;#l=null;#a=new Set;#r=new Set;skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#s>0}process(n){Ut=[],Ws=null,this.apply();var t={parent:null,effect:null,effects:[],render_effects:[]};for(const s of n)this.#i(s,t);this.is_fork||this.#v(),this.is_deferred()?(this.#o(t.effects),this.#o(t.render_effects)):(Ws=this,Je=null,ya(t.render_effects),ya(t.effects),Ws=null,this.#l?.resolve()),Yt=null}#i(n,t){n.f^=bt;for(var s=n.first;s!==null;){var a=s.f,i=(a&(wn|Xn))!==0,o=i&&(a&bt)!==0,l=o||(a&Ft)!==0||this.skipped_effects.has(s);if((s.f&dr)!==0&&s.b?.is_pending()&&(t={parent:t,effect:s,effects:[],render_effects:[]}),!l&&s.fn!==null){i?s.f^=bt:(a&Jr)!==0?t.effects.push(s):ms(s)&&((s.f&dn)!==0&&this.#a.add(s),us(s));var d=s.first;if(d!==null){s=d;continue}}var c=s.parent;for(s=s.next;s===null&&c!==null;)c===t.effect&&(this.#o(t.effects),this.#o(t.render_effects),t=t.parent),s=c.next,c=c.parent}}#o(n){for(const t of n)(t.f&zt)!==0?this.#a.add(t):(t.f&nn)!==0&&this.#r.add(t),this.#c(t.deps),yt(t,bt)}#c(n){if(n!==null)for(const t of n)(t.f&wt)===0||(t.f&Yn)===0||(t.f^=Yn,this.#c(t.deps))}capture(n,t){this.previous.has(n)||this.previous.set(n,t),(n.f&$n)===0&&(this.current.set(n,n.v),Yt?.set(n,n.v))}activate(){Je=this,this.apply()}deactivate(){Je===this&&(Je=null,Yt=null)}flush(){if(this.activate(),Ut.length>0){if(li(),Je!==null&&Je!==this)return}else this.#n===0&&this.process([]);this.deactivate()}discard(){for(const n of this.#t)n(this);this.#t.clear()}#v(){if(this.#s===0){for(const n of this.#e)n();this.#e.clear()}this.#n===0&&this.#d()}#d(){if(Bs.size>1){this.previous.clear();var n=Yt,t=!0,s={parent:null,effect:null,effects:[],render_effects:[]};for(const i of Bs){if(i===this){t=!1;continue}const o=[];for(const[d,c]of this.current){if(i.current.has(d))if(t&&c!==i.current.get(d))i.current.set(d,c);else continue;o.push(d)}if(o.length===0)continue;const l=[...i.current.keys()].filter(d=>!this.current.has(d));if(l.length>0){var a=Ut;Ut=[];const d=new Set,c=new Map;for(const u of o)ci(u,l,d,c);if(Ut.length>0){Je=i,i.apply();for(const u of Ut)i.#i(u,s);i.deactivate()}Ut=a}}Je=null,Yt=n}this.committed=!0,Bs.delete(this)}increment(n){this.#n+=1,n&&(this.#s+=1)}decrement(n){this.#n-=1,n&&(this.#s-=1),this.revive()}revive(){for(const n of this.#a)this.#r.delete(n),yt(n,zt),Qn(n);for(const n of this.#r)yt(n,nn),Qn(n);this.flush()}oncommit(n){this.#e.add(n)}ondiscard(n){this.#t.add(n)}settled(){return(this.#l??=ei()).promise}static ensure(){if(Je===null){const n=Je=new an;Bs.add(Je),Es||an.enqueue(()=>{Je===n&&n.flush()})}return Je}static enqueue(n){Gn(n)}apply(){}}function Do(e){var n=Es;Es=!0;try{for(var t;;){if(Oo(),Ut.length===0&&(Je?.flush(),Ut.length===0))return fr=null,t;li()}}finally{Es=n}}function li(){var e=Fn;Nr=!0;var n=null;try{var t=0;for(nr(!0);Ut.length>0;){var s=an.ensure();if(t++>1e3){var a,i;Fo()}s.process(Ut),An.clear()}}finally{Nr=!1,nr(e),fr=null}}function Fo(){try{ho()}catch(e){vs(e,fr)}}let fn=null;function ya(e){var n=e.length;if(n!==0){for(var t=0;t<n;){var s=e[t++];if((s.f&(gn|Ft))===0&&ms(s)&&(fn=new Set,us(s),s.deps===null&&s.first===null&&s.nodes===null&&(s.teardown===null&&s.ac===null?Ei(s):s.fn=null),fn?.size>0)){An.clear();for(const a of fn){if((a.f&(gn|Ft))!==0)continue;const i=[a];let o=a.parent;for(;o!==null;)fn.has(o)&&(fn.delete(o),i.push(o)),o=o.parent;for(let l=i.length-1;l>=0;l--){const d=i[l];(d.f&(gn|Ft))===0&&us(d)}}fn.clear()}}fn=null}}function ci(e,n,t,s){if(!t.has(e)&&(t.add(e),e.reactions!==null))for(const a of e.reactions){const i=a.f;(i&wt)!==0?ci(a,n,t,s):(i&(ea|dn))!==0&&(i&zt)===0&&vi(a,n,s)&&(yt(a,zt),Qn(a))}}function vi(e,n,t){const s=t.get(e);if(s!==void 0)return s;if(e.deps!==null)for(const a of e.deps){if(n.includes(a))return!0;if((a.f&wt)!==0&&vi(a,n,t))return t.set(a,!0),!0}return t.set(e,!1),!1}function Qn(e){for(var n=fr=e;n.parent!==null;){n=n.parent;var t=n.f;if(Nr&&n===Xe&&(t&dn)!==0&&(t&ti)===0)return;if((t&(Xn|wn))!==0){if((t&bt)===0)return;n.f^=bt}}Ut.push(n)}function qo(e){let n=0,t=Wn(0),s;return()=>{As()&&(r(t),gs(()=>(n===0&&(s=y(()=>e(()=>Ss(t)))),n+=1,()=>{Gn(()=>{n-=1,n===0&&(s?.(),s=void 0,Ss(t))})})))}}var Bo=Vn|ps|dr;function Uo(e,n,t){new Ho(e,n,t)}class Ho{parent;#e=!1;#t;#n=null;#s;#l;#a;#r=null;#i=null;#o=null;#c=null;#v=null;#d=0;#u=0;#h=!1;#f=null;#b=qo(()=>(this.#f=Wn(this.#d),()=>{this.#f=null}));constructor(n,t,s){this.#t=n,this.#s=t,this.#l=s,this.parent=Xe.b,this.#e=!!this.#s.pending,this.#a=ra(()=>{Xe.b=this;{var a=this.#g();try{this.#r=Ht(()=>s(a))}catch(i){this.error(i)}this.#u>0?this.#_():this.#e=!1}return()=>{this.#v?.remove()}},Bo)}#y(){try{this.#r=Ht(()=>this.#l(this.#t))}catch(n){this.error(n)}this.#e=!1}#w(){const n=this.#s.pending;n&&(this.#i=Ht(()=>n(this.#t)),an.enqueue(()=>{var t=this.#g();this.#r=this.#p(()=>(an.ensure(),Ht(()=>this.#l(t)))),this.#u>0?this.#_():(Dn(this.#i,()=>{this.#i=null}),this.#e=!1)}))}#g(){var n=this.#t;return this.#e&&(this.#v=mn(),this.#t.before(this.#v),n=this.#v),n}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#s.pending}#p(n){var t=Xe,s=We,a=it;cn(this.#a),Ct(this.#a),cs(this.#a.ctx);try{return n()}catch(i){return oi(i),null}finally{cn(t),Ct(s),cs(a)}}#_(){const n=this.#s.pending;this.#r!==null&&(this.#c=document.createDocumentFragment(),this.#c.append(this.#v),Ti(this.#r,this.#c)),this.#i===null&&(this.#i=Ht(()=>n(this.#t)))}#m(n){if(!this.has_pending_snippet()){this.parent&&this.parent.#m(n);return}this.#u+=n,this.#u===0&&(this.#e=!1,this.#i&&Dn(this.#i,()=>{this.#i=null}),this.#c&&(this.#t.before(this.#c),this.#c=null))}update_pending_count(n){this.#m(n),this.#d+=n,this.#f&&ds(this.#f,this.#d)}get_effect_pending(){return this.#b(),r(this.#f)}error(n){var t=this.#s.onerror;let s=this.#s.failed;if(this.#h||!t&&!s)throw n;this.#r&&(Lt(this.#r),this.#r=null),this.#i&&(Lt(this.#i),this.#i=null),this.#o&&(Lt(this.#o),this.#o=null);var a=!1,i=!1;const o=()=>{if(a){Io();return}a=!0,i&&bo(),an.ensure(),this.#d=0,this.#o!==null&&Dn(this.#o,()=>{this.#o=null}),this.#e=this.has_pending_snippet(),this.#r=this.#p(()=>(this.#h=!1,Ht(()=>this.#l(this.#t)))),this.#u>0?this.#_():this.#e=!1};var l=We;try{Ct(null),i=!0,t?.(n,o),i=!1}catch(d){vs(d,this.#a&&this.#a.parent)}finally{Ct(l)}s&&Gn(()=>{this.#o=this.#p(()=>{an.ensure(),this.#h=!0;try{return Ht(()=>{s(this.#t,()=>n,()=>o)})}catch(d){return vs(d,this.#a.parent),null}finally{this.#h=!1}})})}}function Vo(e,n,t,s){const a=Os()?Ds:ut;if(t.length===0&&e.length===0){s(n.map(a));return}var i=Je,o=Xe,l=Yo();function d(){Promise.all(t.map(c=>Qo(c))).then(c=>{l();try{s([...n.map(a),...c])}catch(u){(o.f&gn)===0&&vs(u,o)}i?.deactivate(),tr()}).catch(c=>{vs(c,o)})}e.length>0?Promise.all(e).then(()=>{l();try{return d()}finally{i?.deactivate(),tr()}}):d()}function Yo(){var e=Xe,n=We,t=it,s=Je;return function(i=!0){cn(e),Ct(n),cs(t),i&&s?.activate()}}function tr(){cn(null),Ct(null),cs(null)}function Ds(e){var n=wt|zt,t=We!==null&&(We.f&wt)!==0?We:null;return Xe!==null&&(Xe.f|=ps),{ctx:it,deps:null,effects:null,equals:ri,f:n,fn:e,reactions:null,rv:0,v:Et,wv:0,parent:t??Xe,ac:null}}function Qo(e,n){let t=Xe;t===null&&co();var s=t.b,a=void 0,i=Wn(Et),o=!We,l=new Map;return rl(()=>{var d=ei();a=d.promise;try{Promise.resolve(e()).then(d.resolve,d.reject).then(()=>{c===Je&&c.committed&&c.deactivate(),tr()})}catch(f){d.reject(f),tr()}var c=Je;if(o){var u=!s.is_pending();s.update_pending_count(1),c.increment(u),l.get(c)?.reject(rs),l.delete(c),l.set(c,d)}const h=(f,p=void 0)=>{if(c.activate(),p)p!==rs&&(i.f|=$n,ds(i,p));else{(i.f&$n)!==0&&(i.f^=$n),ds(i,f);for(const[k,S]of l){if(l.delete(k),k===c)break;S.reject(rs)}}o&&(s.update_pending_count(-1),c.decrement(u))};d.promise.then(h,f=>h(null,f||"unknown"))}),hr(()=>{for(const d of l.values())d.reject(rs)}),new Promise(d=>{function c(u){function h(){u===a?d(i):c(a)}u.then(h,h)}c(a)})}function ys(e){const n=Ds(e);return $i(n),n}function ut(e){const n=Ds(e);return n.equals=ai,n}function di(e){var n=e.effects;if(n!==null){e.effects=null;for(var t=0;t<n.length;t+=1)Lt(n[t])}}function Wo(e){for(var n=e.parent;n!==null;){if((n.f&wt)===0)return(n.f&gn)===0?n:null;n=n.parent}return null}function sa(e){var n,t=Xe;cn(Wo(e));try{e.f&=~Yn,di(e),n=Li(e)}finally{cn(t)}return n}function ui(e){var n=sa(e);if(e.equals(n)||(Je?.is_fork||(e.v=n),e.wv=Pi()),!Jn)if(Yt!==null)(As()||Je?.is_fork)&&Yt.set(e,n);else{var t=(e.f&tn)===0?nn:bt;yt(e,t)}}let jr=new Set;const An=new Map;let fi=!1;function Wn(e,n){var t={f:0,v:e,reactions:null,equals:ri,rv:0,wv:0};return t}function kn(e,n){const t=Wn(e);return $i(t),t}function T(e,n=!1,t=!0){const s=Wn(e);return n||(s.equals=ai),_s&&t&&it!==null&&it.l!==null&&(it.l.s??=[]).push(s),s}function Us(e,n){return _(e,y(()=>r(e))),n}function _(e,n,t=!1){We!==null&&(!on||(We.f&ba)!==0)&&Os()&&(We.f&(wt|dn|ea|ba))!==0&&!bn?.includes(e)&&mo();let s=t?as(n):n;return ds(e,s)}function ds(e,n){if(!e.equals(n)){var t=e.v;Jn?An.set(e,n):An.set(e,t),e.v=n;var s=an.ensure();s.capture(e,t),(e.f&wt)!==0&&((e.f&zt)!==0&&sa(e),yt(e,(e.f&tn)!==0?bt:nn)),e.wv=Pi(),hi(e,zt),Os()&&Xe!==null&&(Xe.f&bt)!==0&&(Xe.f&(wn|Xn))===0&&(Bt===null?il([e]):Bt.push(e)),!s.is_fork&&jr.size>0&&!fi&&Ko()}return n}function Ko(){fi=!1;var e=Fn;nr(!0);const n=Array.from(jr);try{for(const t of n)(t.f&bt)!==0&&yt(t,nn),ms(t)&&us(t)}finally{nr(e)}jr.clear()}function Ss(e){_(e,e.v+1)}function hi(e,n){var t=e.reactions;if(t!==null)for(var s=Os(),a=t.length,i=0;i<a;i++){var o=t[i],l=o.f;if(!(!s&&o===Xe)){var d=(l&zt)===0;if(d&&yt(o,n),(l&wt)!==0){var c=o;Yt?.delete(c),(l&Yn)===0&&(l&tn&&(o.f|=Yn),hi(c,nn))}else d&&((l&dn)!==0&&fn!==null&&fn.add(o),Qn(o))}}}function as(e){if(typeof e!="object"||e===null||On in e)return e;const n=Zr(e);if(n!==no&&n!==so)return e;var t=new Map,s=lr(e),a=kn(0),i=qn,o=l=>{if(qn===i)return l();var d=We,c=qn;Ct(null),xa(i);var u=l();return Ct(d),xa(c),u};return s&&t.set("length",kn(e.length)),new Proxy(e,{defineProperty(l,d,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&_o();var u=t.get(d);return u===void 0?u=o(()=>{var h=kn(c.value);return t.set(d,h),h}):_(u,c.value,!0),!0},deleteProperty(l,d){var c=t.get(d);if(c===void 0){if(d in l){const u=o(()=>kn(Et));t.set(d,u),Ss(a)}}else _(c,Et),Ss(a);return!0},get(l,d,c){if(d===On)return e;var u=t.get(d),h=d in l;if(u===void 0&&(!h||is(l,d)?.writable)&&(u=o(()=>{var p=as(h?l[d]:Et),k=kn(p);return k}),t.set(d,u)),u!==void 0){var f=r(u);return f===Et?void 0:f}return Reflect.get(l,d,c)},getOwnPropertyDescriptor(l,d){var c=Reflect.getOwnPropertyDescriptor(l,d);if(c&&"value"in c){var u=t.get(d);u&&(c.value=r(u))}else if(c===void 0){var h=t.get(d),f=h?.v;if(h!==void 0&&f!==Et)return{enumerable:!0,configurable:!0,value:f,writable:!0}}return c},has(l,d){if(d===On)return!0;var c=t.get(d),u=c!==void 0&&c.v!==Et||Reflect.has(l,d);if(c!==void 0||Xe!==null&&(!u||is(l,d)?.writable)){c===void 0&&(c=o(()=>{var f=u?as(l[d]):Et,p=kn(f);return p}),t.set(d,c));var h=r(c);if(h===Et)return!1}return u},set(l,d,c,u){var h=t.get(d),f=d in l;if(s&&d==="length")for(var p=c;p<h.v;p+=1){var k=t.get(p+"");k!==void 0?_(k,Et):p in l&&(k=o(()=>kn(Et)),t.set(p+"",k))}if(h===void 0)(!f||is(l,d)?.writable)&&(h=o(()=>kn(void 0)),_(h,as(c)),t.set(d,h));else{f=h.v!==Et;var S=o(()=>as(c));_(h,S)}var m=Reflect.getOwnPropertyDescriptor(l,d);if(m?.set&&m.set.call(u,c),!f){if(s&&typeof d=="string"){var x=t.get("length"),Q=Number(d);Number.isInteger(Q)&&Q>=x.v&&_(x,Q+1)}Ss(a)}return!0},ownKeys(l){r(a);var d=Reflect.ownKeys(l).filter(h=>{var f=t.get(h);return f===void 0||f.v!==Et});for(var[c,u]of t)u.v!==Et&&!(c in l)&&d.push(c);return d},setPrototypeOf(){go()}})}var En,pi,_i,gi;function Xo(){if(En===void 0){En=window,pi=/Firefox/.test(navigator.userAgent);var e=Element.prototype,n=Node.prototype,t=Text.prototype;_i=is(n,"firstChild").get,gi=is(n,"nextSibling").get,ma(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),ma(t)&&(t.__t=void 0)}}function mn(e=""){return document.createTextNode(e)}function Sn(e){return _i.call(e)}function Fs(e){return gi.call(e)}function v(e,n){return Sn(e)}function Ce(e,n=!1){{var t=Sn(e);return t instanceof Comment&&t.data===""?Fs(t):t}}function g(e,n=1,t=!1){let s=e;for(;n--;)s=Fs(s);return s}function Go(e){e.textContent=""}function mi(){return!1}let wa=!1;function Zo(){wa||(wa=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const n of e.target.elements)n.__on_r?.()})},{capture:!0}))}function Jo(e,n,t,s=!0){s&&t();for(var a of n)e.addEventListener(a,t);hr(()=>{for(var i of n)e.removeEventListener(i,t)})}function Zn(e){var n=We,t=Xe;Ct(null),cn(null);try{return e()}finally{Ct(n),cn(t)}}function el(e,n,t,s=t){e.addEventListener(n,()=>Zn(t));const a=e.__on_r;a?e.__on_r=()=>{a(),s(!0)}:e.__on_r=()=>s(!0),Zo()}function bi(e){Xe===null&&(We===null&&fo(),uo()),Jn&&vo()}function tl(e,n){var t=n.last;t===null?n.last=n.first=e:(t.next=e,e.prev=t,n.last=e)}function un(e,n,t){var s=Xe;s!==null&&(s.f&Ft)!==0&&(e|=Ft);var a={ctx:it,deps:null,nodes:null,f:e|zt|tn,first:null,fn:n,last:null,next:null,parent:s,b:s&&s.b,prev:null,teardown:null,wv:0,ac:null};if(t)try{us(a),a.f|=ur}catch(l){throw Lt(a),l}else n!==null&&Qn(a);var i=a;if(t&&i.deps===null&&i.teardown===null&&i.nodes===null&&i.first===i.last&&(i.f&ps)===0&&(i=i.first,(e&dn)!==0&&(e&Vn)!==0&&i!==null&&(i.f|=Vn)),i!==null&&(i.parent=s,s!==null&&tl(i,s),We!==null&&(We.f&wt)!==0&&(e&Xn)===0)){var o=We;(o.effects??=[]).push(i)}return a}function As(){return We!==null&&!on}function hr(e){const n=un(vr,null,!1);return yt(n,bt),n.teardown=e,n}function Or(e){bi();var n=Xe.f,t=!We&&(n&wn)!==0&&(n&ur)===0;if(t){var s=it;(s.e??=[]).push(e)}else return yi(e)}function yi(e){return un(Jr|ni,e,!1)}function nl(e){return bi(),un(vr|ni,e,!0)}function sl(e){an.ensure();const n=un(Xn|ps,e,!0);return(t={})=>new Promise(s=>{t.outro?Dn(n,()=>{Lt(n),s(void 0)}):(Lt(n),s(void 0))})}function Dt(e){return un(Jr,e,!1)}function Z(e,n){var t=it,s={effect:null,ran:!1,deps:e};t.l.$.push(s),s.effect=gs(()=>{e(),!s.ran&&(s.ran=!0,y(n))})}function Kt(){var e=it;gs(()=>{for(var n of e.l.$){n.deps();var t=n.effect;(t.f&bt)!==0&&yt(t,nn),ms(t)&&us(t),n.ran=!1}})}function rl(e){return un(ea|ps,e,!0)}function gs(e,n=0){return un(vr|n,e,!0)}function ue(e,n=[],t=[],s=[]){Vo(s,n,t,a=>{un(vr,()=>e(...a.map(r)),!0)})}function ra(e,n=0){var t=un(dn|n,e,!0);return t}function Ht(e){return un(wn|ps,e,!0)}function wi(e){var n=e.teardown;if(n!==null){const t=Jn,s=We;ka(!0),Ct(null);try{n.call(null)}finally{ka(t),Ct(s)}}}function ki(e,n=!1){var t=e.first;for(e.first=e.last=null;t!==null;){const a=t.ac;a!==null&&Zn(()=>{a.abort(rs)});var s=t.next;(t.f&Xn)!==0?t.parent=null:Lt(t,n),t=s}}function al(e){for(var n=e.first;n!==null;){var t=n.next;(n.f&wn)===0&&Lt(n),n=t}}function Lt(e,n=!0){var t=!1;(n||(e.f&ti)!==0)&&e.nodes!==null&&e.nodes.end!==null&&(xi(e.nodes.start,e.nodes.end),t=!0),ki(e,n&&!t),sr(e,0),yt(e,gn);var s=e.nodes&&e.nodes.t;if(s!==null)for(const i of s)i.stop();wi(e);var a=e.parent;a!==null&&a.first!==null&&Ei(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function xi(e,n){for(;e!==null;){var t=e===n?null:Fs(e);e.remove(),e=t}}function Ei(e){var n=e.parent,t=e.prev,s=e.next;t!==null&&(t.next=s),s!==null&&(s.prev=t),n!==null&&(n.first===e&&(n.first=s),n.last===e&&(n.last=t))}function Dn(e,n,t=!0){var s=[];Si(e,s,!0);var a=()=>{t&&Lt(e),n&&n()},i=s.length;if(i>0){var o=()=>--i||a();for(var l of s)l.out(o)}else a()}function Si(e,n,t){if((e.f&Ft)===0){e.f^=Ft;var s=e.nodes&&e.nodes.t;if(s!==null)for(const l of s)(l.is_global||t)&&n.push(l);for(var a=e.first;a!==null;){var i=a.next,o=(a.f&Vn)!==0||(a.f&wn)!==0&&(e.f&dn)!==0;Si(a,n,o?t:!1),a=i}}}function aa(e){Mi(e,!0)}function Mi(e,n){if((e.f&Ft)!==0){e.f^=Ft,(e.f&bt)===0&&(yt(e,zt),Qn(e));for(var t=e.first;t!==null;){var s=t.next,a=(t.f&Vn)!==0||(t.f&wn)!==0;Mi(t,a?n:!1),t=s}var i=e.nodes&&e.nodes.t;if(i!==null)for(const o of i)(o.is_global||n)&&o.in()}}function Ti(e,n){if(e.nodes)for(var t=e.nodes.start,s=e.nodes.end;t!==null;){var a=t===s?null:Fs(t);n.append(t),t=a}}let Fn=!1;function nr(e){Fn=e}let Jn=!1;function ka(e){Jn=e}let We=null,on=!1;function Ct(e){We=e}let Xe=null;function cn(e){Xe=e}let bn=null;function $i(e){We!==null&&(bn===null?bn=[e]:bn.push(e))}let Mt=null,It=0,Bt=null;function il(e){Bt=e}let Ai=1,Ps=0,qn=Ps;function xa(e){qn=e}function Pi(){return++Ai}function ms(e){var n=e.f;if((n&zt)!==0)return!0;if(n&wt&&(e.f&=~Yn),(n&nn)!==0){var t=e.deps;if(t!==null)for(var s=t.length,a=0;a<s;a++){var i=t[a];if(ms(i)&&ui(i),i.wv>e.wv)return!0}(n&tn)!==0&&Yt===null&&yt(e,bt)}return!1}function Ci(e,n,t=!0){var s=e.reactions;if(s!==null&&!bn?.includes(e))for(var a=0;a<s.length;a++){var i=s[a];(i.f&wt)!==0?Ci(i,n,!1):n===i&&(t?yt(i,zt):(i.f&bt)!==0&&yt(i,nn),Qn(i))}}function Li(e){var n=Mt,t=It,s=Bt,a=We,i=bn,o=it,l=on,d=qn,c=e.f;Mt=null,It=0,Bt=null,We=(c&(wn|Xn))===0?e:null,bn=null,cs(e.ctx),on=!1,qn=++Ps,e.ac!==null&&(Zn(()=>{e.ac.abort(rs)}),e.ac=null);try{e.f|=Ir;var u=e.fn,h=u(),f=e.deps;if(Mt!==null){var p;if(sr(e,It),f!==null&&It>0)for(f.length=It+Mt.length,p=0;p<Mt.length;p++)f[It+p]=Mt[p];else e.deps=f=Mt;if(As()&&(e.f&tn)!==0)for(p=It;p<f.length;p++)(f[p].reactions??=[]).push(e)}else f!==null&&It<f.length&&(sr(e,It),f.length=It);if(Os()&&Bt!==null&&!on&&f!==null&&(e.f&(wt|nn|zt))===0)for(p=0;p<Bt.length;p++)Ci(Bt[p],e);return a!==null&&a!==e&&(Ps++,Bt!==null&&(s===null?s=Bt:s.push(...Bt))),(e.f&$n)!==0&&(e.f^=$n),h}catch(k){return oi(k)}finally{e.f^=Ir,Mt=n,It=t,Bt=s,We=a,bn=i,cs(o),on=l,qn=d}}function ol(e,n){let t=n.reactions;if(t!==null){var s=to.call(t,e);if(s!==-1){var a=t.length-1;a===0?t=n.reactions=null:(t[s]=t[a],t.pop())}}t===null&&(n.f&wt)!==0&&(Mt===null||!Mt.includes(n))&&(yt(n,nn),(n.f&tn)!==0&&(n.f^=tn,n.f&=~Yn),di(n),sr(n,0))}function sr(e,n){var t=e.deps;if(t!==null)for(var s=n;s<t.length;s++)ol(e,t[s])}function us(e){var n=e.f;if((n&gn)===0){yt(e,bt);var t=Xe,s=Fn;Xe=e,Fn=!0;try{(n&(dn|io))!==0?al(e):ki(e),wi(e);var a=Li(e);e.teardown=typeof a=="function"?a:null,e.wv=Ai;var i;Rr&&No&&(e.f&zt)!==0&&e.deps}finally{Fn=s,Xe=t}}}async function os(){await Promise.resolve(),Do()}function r(e){var n=e.f,t=(n&wt)!==0;if(We!==null&&!on){var s=Xe!==null&&(Xe.f&gn)!==0;if(!s&&!bn?.includes(e)){var a=We.deps;if((We.f&Ir)!==0)e.rv<Ps&&(e.rv=Ps,Mt===null&&a!==null&&a[It]===e?It++:Mt===null?Mt=[e]:Mt.includes(e)||Mt.push(e));else{(We.deps??=[]).push(e);var i=e.reactions;i===null?e.reactions=[We]:i.includes(We)||i.push(We)}}}if(Jn){if(An.has(e))return An.get(e);if(t){var o=e,l=o.v;return((o.f&bt)===0&&o.reactions!==null||Ri(o))&&(l=sa(o)),An.set(o,l),l}}else t&&(!Yt?.has(e)||Je?.is_fork&&!As())&&(o=e,ms(o)&&ui(o),Fn&&As()&&(o.f&tn)===0&&zi(o));if(Yt?.has(e))return Yt.get(e);if((e.f&$n)!==0)throw e.v;return e.v}function zi(e){if(e.deps!==null){e.f^=tn;for(const n of e.deps)(n.reactions??=[]).push(e),(n.f&wt)!==0&&(n.f&tn)===0&&zi(n)}}function Ri(e){if(e.v===Et)return!0;if(e.deps===null)return!1;for(const n of e.deps)if(An.has(n)||(n.f&wt)!==0&&Ri(n))return!0;return!1}function y(e){var n=on;try{return on=!0,e()}finally{on=n}}const ll=-7169;function yt(e,n){e.f=e.f&ll|n}function I(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(On in e)Dr(e);else if(!Array.isArray(e))for(let n in e){const t=e[n];typeof t=="object"&&t&&On in t&&Dr(t)}}}function Dr(e,n=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!n.has(e)){n.add(e),e instanceof Date&&e.getTime();for(let s in e)try{Dr(e[s],n)}catch{}const t=Zr(e);if(t!==Object.prototype&&t!==Array.prototype&&t!==Map.prototype&&t!==Set.prototype&&t!==Date.prototype){const s=Ja(t);for(let a in s){const i=s[a].get;if(i)try{i.call(e)}catch{}}}}}const cl=["touchstart","touchmove"];function vl(e){return cl.includes(e)}const dl=new Set,Ea=new Set;function ul(e,n,t,s={}){function a(i){if(s.capture||ks.call(n,i),!i.cancelBubble)return Zn(()=>t?.call(this,i))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Gn(()=>{n.addEventListener(e,a,s)}):n.addEventListener(e,a,s),a}function A(e,n,t,s,a){var i={capture:s,passive:a},o=ul(e,n,t,i);(n===document.body||n===window||n===document||n instanceof HTMLMediaElement)&&hr(()=>{n.removeEventListener(e,o,i)})}let Sa=null;function ks(e){var n=this,t=n.ownerDocument,s=e.type,a=e.composedPath?.()||[],i=a[0]||e.target;Sa=e;var o=0,l=Sa===e&&e.__root;if(l){var d=a.indexOf(l);if(d!==-1&&(n===document||n===window)){e.__root=n;return}var c=a.indexOf(n);if(c===-1)return;d<=c&&(o=d)}if(i=a[o]||e.target,i!==n){Za(e,"currentTarget",{configurable:!0,get(){return i||t}});var u=We,h=Xe;Ct(null),cn(null);try{for(var f,p=[];i!==null;){var k=i.assignedSlot||i.parentNode||i.host||null;try{var S=i["__"+s];S!=null&&(!i.disabled||e.target===i)&&S.call(i,e)}catch(m){f?p.push(m):f=m}if(e.cancelBubble||k===n||k===null)break;i=k}if(f){for(let m of p)queueMicrotask(()=>{throw m});throw f}}finally{e.__root=n,delete e.currentTarget,Ct(u),cn(h)}}}function Ii(e){var n=document.createElement("template");return n.innerHTML=e.replaceAll("<!>","<!---->"),n.content}function Cs(e,n){var t=Xe;t.nodes===null&&(t.nodes={start:e,end:n,a:null,t:null})}function E(e,n){var t=(n&Lo)!==0,s=(n&zo)!==0,a,i=!e.startsWith("<!>");return()=>{a===void 0&&(a=Ii(i?e:"<!>"+e),t||(a=Sn(a)));var o=s||pi?document.importNode(a,!0):a.cloneNode(!0);if(t){var l=Sn(o),d=o.lastChild;Cs(l,d)}else Cs(o,o);return o}}function Rn(e=""){{var n=mn(e+"");return Cs(n,n),n}}function Ze(){var e=document.createDocumentFragment(),n=document.createComment(""),t=mn();return e.append(n,t),Cs(n,t),e}function b(e,n){e!==null&&e.before(n)}let Fr=!0;function ce(e,n){var t=n==null?"":typeof n=="object"?n+"":n;t!==(e.__t??=e.nodeValue)&&(e.__t=t,e.nodeValue=t+"")}function fl(e,n){return hl(e,n)}const es=new Map;function hl(e,{target:n,anchor:t,props:s={},events:a,context:i,intro:o=!0}){Xo();var l=new Set,d=h=>{for(var f=0;f<h.length;f++){var p=h[f];if(!l.has(p)){l.add(p);var k=vl(p);n.addEventListener(p,ks,{passive:k});var S=es.get(p);S===void 0?(document.addEventListener(p,ks,{passive:k}),es.set(p,1)):es.set(p,S+1)}}};d(cr(dl)),Ea.add(d);var c=void 0,u=sl(()=>{var h=t??n.appendChild(mn());return Uo(h,{pending:()=>{}},f=>{if(i){kt({});var p=it;p.c=i}a&&(s.$$events=a),Fr=o,c=e(f,s)||{},Fr=!0,i&&xt()}),()=>{for(var f of l){n.removeEventListener(f,ks);var p=es.get(f);--p===0?(document.removeEventListener(f,ks),es.delete(f)):es.set(f,p)}Ea.delete(d),h!==t&&h.parentNode?.removeChild(h)}});return pl.set(c,u),c}let pl=new WeakMap;class _l{anchor;#e=new Map;#t=new Map;#n=new Map;#s=new Set;#l=!0;constructor(n,t=!0){this.anchor=n,this.#l=t}#a=()=>{var n=Je;if(this.#e.has(n)){var t=this.#e.get(n),s=this.#t.get(t);if(s)aa(s),this.#s.delete(t);else{var a=this.#n.get(t);a&&(this.#t.set(t,a.effect),this.#n.delete(t),a.fragment.lastChild.remove(),this.anchor.before(a.fragment),s=a.effect)}for(const[i,o]of this.#e){if(this.#e.delete(i),i===n)break;const l=this.#n.get(o);l&&(Lt(l.effect),this.#n.delete(o))}for(const[i,o]of this.#t){if(i===t||this.#s.has(i))continue;const l=()=>{if(Array.from(this.#e.values()).includes(i)){var c=document.createDocumentFragment();Ti(o,c),c.append(mn()),this.#n.set(i,{effect:o,fragment:c})}else Lt(o);this.#s.delete(i),this.#t.delete(i)};this.#l||!s?(this.#s.add(i),Dn(o,l,!1)):l()}}};#r=n=>{this.#e.delete(n);const t=Array.from(this.#e.values());for(const[s,a]of this.#n)t.includes(s)||(Lt(a.effect),this.#n.delete(s))};ensure(n,t){var s=Je,a=mi();if(t&&!this.#t.has(n)&&!this.#n.has(n))if(a){var i=document.createDocumentFragment(),o=mn();i.append(o),this.#n.set(n,{effect:Ht(()=>t(o)),fragment:i})}else this.#t.set(n,Ht(()=>t(this.anchor)));if(this.#e.set(s,n),a){for(const[l,d]of this.#t)l===n?s.skipped_effects.delete(d):s.skipped_effects.add(d);for(const[l,d]of this.#n)l===n?s.skipped_effects.delete(d.effect):s.skipped_effects.add(d.effect);s.oncommit(this.#a),s.ondiscard(this.#r)}else this.#a()}}function R(e,n,t=!1){var s=new _l(e),a=t?Vn:0;function i(o,l){s.ensure(o,l)}ra(()=>{var o=!1;n((l,d=!0)=>{o=!0,i(d,l)}),o||i(!1,null)},a)}function Cn(e,n){return n}function gl(e,n,t){for(var s=[],a=n.length,i,o=n.length,l=0;l<a;l++){let h=n[l];Dn(h,()=>{if(i){if(i.pending.delete(h),i.done.add(h),i.pending.size===0){var f=e.outrogroups;qr(cr(i.done)),f.delete(i),f.size===0&&(e.outrogroups=null)}}else o-=1},!1)}if(o===0){var d=s.length===0&&t!==null;if(d){var c=t,u=c.parentNode;Go(u),u.append(c),e.items.clear()}qr(n,!d)}else i={pending:new Set(n),done:new Set},(e.outrogroups??=new Set).add(i)}function qr(e,n=!0){for(var t=0;t<e.length;t++)Lt(e[t],n)}var Ma;function Tt(e,n,t,s,a,i=null){var o=e,l=new Map,d=(n&si)!==0;if(d){var c=e;o=c.appendChild(mn())}var u=null,h=ut(()=>{var x=t();return lr(x)?x:x==null?[]:cr(x)}),f,p=!0;function k(){m.fallback=u,ml(m,f,o,n,s),u!==null&&(f.length===0?(u.f&pn)===0?aa(u):(u.f^=pn,xs(u,null,o)):Dn(u,()=>{u=null}))}var S=ra(()=>{f=r(h);for(var x=f.length,Q=new Set,N=Je,ne=mi(),Y=0;Y<x;Y+=1){var W=f[Y],j=s(W,Y),q=p?null:l.get(j);q?(q.v&&ds(q.v,W),q.i&&ds(q.i,Y),ne&&N.skipped_effects.delete(q.e)):(q=bl(l,p?o:Ma??=mn(),W,j,Y,a,n,t),p||(q.e.f|=pn),l.set(j,q)),Q.add(j)}if(x===0&&i&&!u&&(p?u=Ht(()=>i(o)):(u=Ht(()=>i(Ma??=mn())),u.f|=pn)),!p)if(ne){for(const[C,fe]of l)Q.has(C)||N.skipped_effects.add(fe.e);N.oncommit(k),N.ondiscard(()=>{})}else k();r(h)}),m={effect:S,items:l,outrogroups:null,fallback:u};p=!1}function ml(e,n,t,s,a){var i=(s&ko)!==0,o=n.length,l=e.items,d=e.effect.first,c,u=null,h,f=[],p=[],k,S,m,x;if(i)for(x=0;x<o;x+=1)k=n[x],S=a(k,x),m=l.get(S).e,(m.f&pn)===0&&(m.nodes?.a?.measure(),(h??=new Set).add(m));for(x=0;x<o;x+=1){if(k=n[x],S=a(k,x),m=l.get(S).e,e.outrogroups!==null)for(const fe of e.outrogroups)fe.pending.delete(m),fe.done.delete(m);if((m.f&pn)!==0)if(m.f^=pn,m===d)xs(m,null,t);else{var Q=u?u.next:d;m===e.effect.last&&(e.effect.last=m.prev),m.prev&&(m.prev.next=m.next),m.next&&(m.next.prev=m.prev),xn(e,u,m),xn(e,m,Q),xs(m,Q,t),u=m,f=[],p=[],d=u.next;continue}if((m.f&Ft)!==0&&(aa(m),i&&(m.nodes?.a?.unfix(),(h??=new Set).delete(m))),m!==d){if(c!==void 0&&c.has(m)){if(f.length<p.length){var N=p[0],ne;u=N.prev;var Y=f[0],W=f[f.length-1];for(ne=0;ne<f.length;ne+=1)xs(f[ne],N,t);for(ne=0;ne<p.length;ne+=1)c.delete(p[ne]);xn(e,Y.prev,W.next),xn(e,u,Y),xn(e,W,N),d=N,u=W,x-=1,f=[],p=[]}else c.delete(m),xs(m,d,t),xn(e,m.prev,m.next),xn(e,m,u===null?e.effect.first:u.next),xn(e,u,m),u=m;continue}for(f=[],p=[];d!==null&&d!==m;)(c??=new Set).add(d),p.push(d),d=d.next;if(d===null)continue}(m.f&pn)===0&&f.push(m),u=m,d=m.next}if(e.outrogroups!==null){for(const fe of e.outrogroups)fe.pending.size===0&&(qr(cr(fe.done)),e.outrogroups?.delete(fe));e.outrogroups.size===0&&(e.outrogroups=null)}if(d!==null||c!==void 0){var j=[];if(c!==void 0)for(m of c)(m.f&Ft)===0&&j.push(m);for(;d!==null;)(d.f&Ft)===0&&d!==e.fallback&&j.push(d),d=d.next;var q=j.length;if(q>0){var C=(s&si)!==0&&o===0?t:null;if(i){for(x=0;x<q;x+=1)j[x].nodes?.a?.measure();for(x=0;x<q;x+=1)j[x].nodes?.a?.fix()}gl(e,j,C)}}i&&Gn(()=>{if(h!==void 0)for(m of h)m.nodes?.a?.apply()})}function bl(e,n,t,s,a,i,o,l){var d=(o&yo)!==0?(o&xo)===0?T(t,!1,!1):Wn(t):null,c=(o&wo)!==0?Wn(a):null;return{v:d,i:c,e:Ht(()=>(i(n,d??t,c??a,l),()=>{e.delete(s)}))}}function xs(e,n,t){if(e.nodes)for(var s=e.nodes.start,a=e.nodes.end,i=n&&(n.f&pn)===0?n.nodes.start:t;s!==null;){var o=Fs(s);if(i.before(s),s===a)return;s=o}}function xn(e,n,t){n===null?e.effect.first=t:n.next=t,t===null?e.effect.last=n:t.prev=n}function se(e,n,t=!1,s=!1,a=!1){var i=e,o="";ue(()=>{var l=Xe;if(o!==(o=n()??"")&&(l.nodes!==null&&(xi(l.nodes.start,l.nodes.end),l.nodes=null),o!=="")){var d=o+"";t?d=`<svg>${d}</svg>`:s&&(d=`<math>${d}</math>`);var c=Ii(d);if((t||s)&&(c=Sn(c)),Cs(Sn(c),c.lastChild),t||s)for(;Sn(c);)i.before(Sn(c));else i.before(c)}})}function Ks(e,n,t,s,a){var i=n.$$slots?.[t],o=!1;i===!0&&(i=n[t==="default"?"children":t],o=!0),i===void 0||i(e,o?()=>s:s)}const yl=()=>performance.now(),hn={tick:e=>requestAnimationFrame(e),now:()=>yl(),tasks:new Set};function Ni(){const e=hn.now();hn.tasks.forEach(n=>{n.c(e)||(hn.tasks.delete(n),n.f())}),hn.tasks.size!==0&&hn.tick(Ni)}function wl(e){let n;return hn.tasks.size===0&&hn.tick(Ni),{promise:new Promise(t=>{hn.tasks.add(n={c:e,f:t})}),abort(){hn.tasks.delete(n)}}}function Hs(e,n){Zn(()=>{e.dispatchEvent(new CustomEvent(n))})}function kl(e){if(e==="float")return"cssFloat";if(e==="offset")return"cssOffset";if(e.startsWith("--"))return e;const n=e.split("-");return n.length===1?n[0]:n[0]+n.slice(1).map(t=>t[0].toUpperCase()+t.slice(1)).join("")}function Ta(e){const n={},t=e.split(";");for(const s of t){const[a,i]=s.split(":");if(!a||i===void 0)break;const o=kl(a.trim());n[o]=i.trim()}return n}const xl=e=>e;function At(e,n,t,s){var a=(e&Ao)!==0,i=(e&Po)!==0,o=a&&i,l=(e&Co)!==0,d=o?"both":a?"in":"out",c,u=n.inert,h=n.style.overflow,f,p;function k(){return Zn(()=>c??=t()(n,s?.()??{},{direction:d}))}var S={is_global:l,in(){if(n.inert=u,!a){p?.abort(),p?.reset?.();return}i||f?.abort(),Hs(n,"introstart"),f=Br(n,k(),p,1,()=>{Hs(n,"introend"),f?.abort(),f=c=void 0,n.style.overflow=h})},out(N){if(!i){N?.(),c=void 0;return}n.inert=!0,Hs(n,"outrostart"),p=Br(n,k(),f,0,()=>{Hs(n,"outroend"),N?.()})},stop:()=>{f?.abort(),p?.abort()}},m=Xe;if((m.nodes.t??=[]).push(S),a&&Fr){var x=l;if(!x){for(var Q=m.parent;Q&&(Q.f&Vn)!==0;)for(;(Q=Q.parent)&&(Q.f&dn)===0;);x=!Q||(Q.f&ur)!==0}x&&Dt(()=>{y(()=>S.in())})}}function Br(e,n,t,s,a){var i=s===1;if(ro(n)){var o,l=!1;return Gn(()=>{if(!l){var m=n({direction:i?"in":"out"});o=Br(e,m,t,s,a)}}),{abort:()=>{l=!0,o?.abort()},deactivate:()=>o.deactivate(),reset:()=>o.reset(),t:()=>o.t()}}if(t?.deactivate(),!n?.duration)return a(),{abort:jt,deactivate:jt,reset:jt,t:()=>s};const{delay:d=0,css:c,tick:u,easing:h=xl}=n;var f=[];if(i&&t===void 0&&(u&&u(0,1),c)){var p=Ta(c(0,1));f.push(p,p)}var k=()=>1-s,S=e.animate(f,{duration:d,fill:"forwards"});return S.onfinish=()=>{S.cancel();var m=t?.t()??1-s;t?.abort();var x=s-m,Q=n.duration*Math.abs(x),N=[];if(Q>0){var ne=!1;if(c)for(var Y=Math.ceil(Q/16.666666666666668),W=0;W<=Y;W+=1){var j=m+x*h(W/Y),q=Ta(c(j,1-j));N.push(q),ne||=q.overflow==="hidden"}ne&&(e.style.overflow="hidden"),k=()=>{var C=S.currentTime;return m+x*h(C/Q)},u&&wl(()=>{if(S.playState!=="running")return!1;var C=k();return u(C,1-C),!0})}S=e.animate(N,{duration:Q,fill:"forwards"}),S.onfinish=()=>{k=()=>s,u?.(s,1-s),a()}},{abort:()=>{S&&(S.cancel(),S.effect=null,S.onfinish=jt)},deactivate:()=>{a=jt},reset:()=>{s===0&&u?.(1,0)},t:()=>k()}}function ia(e,n,t){Dt(()=>{var s=y(()=>n(e,t?.())||{});if(t&&s?.update){var a=!1,i={};gs(()=>{var o=t();I(o),a&&na(i,o)&&(i=o,s.update(o))}),a=!0}if(s?.destroy)return()=>s.destroy()})}const $a=[...` 	
\r\fÂ \v\uFEFF`];function El(e,n,t){var s=e==null?"":""+e;if(n&&(s=s?s+" "+n:n),t){for(var a in t)if(t[a])s=s?s+" "+a:a;else if(s.length)for(var i=a.length,o=0;(o=s.indexOf(a,o))>=0;){var l=o+i;(o===0||$a.includes(s[o-1]))&&(l===s.length||$a.includes(s[l]))?s=(o===0?"":s.substring(0,o))+s.substring(l+1):o=l}}return s===""?null:s}function Aa(e,n=!1){var t=n?" !important;":";",s="";for(var a in e){var i=e[a];i!=null&&i!==""&&(s+=" "+a+": "+i+t)}return s}function xr(e){return e[0]!=="-"||e[1]!=="-"?e.toLowerCase():e}function Sl(e,n){if(n){var t="",s,a;if(Array.isArray(n)?(s=n[0],a=n[1]):s=n,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var i=!1,o=0,l=!1,d=[];s&&d.push(...Object.keys(s).map(xr)),a&&d.push(...Object.keys(a).map(xr));var c=0,u=-1;const S=e.length;for(var h=0;h<S;h++){var f=e[h];if(l?f==="/"&&e[h-1]==="*"&&(l=!1):i?i===f&&(i=!1):f==="/"&&e[h+1]==="*"?l=!0:f==='"'||f==="'"?i=f:f==="("?o++:f===")"&&o--,!l&&i===!1&&o===0){if(f===":"&&u===-1)u=h;else if(f===";"||h===S-1){if(u!==-1){var p=xr(e.substring(c,u).trim());if(!d.includes(p)){f!==";"&&h++;var k=e.substring(c,h).trim();t+=" "+k+";"}}c=h+1,u=-1}}}}return s&&(t+=Aa(s)),a&&(t+=Aa(a,!0)),t=t.trim(),t===""?null:t}return e==null?null:String(e)}function Ve(e,n,t,s,a,i){var o=e.__className;if(o!==t||o===void 0){var l=El(t,s,i);l==null?e.removeAttribute("class"):e.className=l,e.__className=t}else if(i&&a!==i)for(var d in i){var c=!!i[d];(a==null||c!==!!a[d])&&e.classList.toggle(d,c)}return i}function Er(e,n={},t,s){for(var a in t){var i=t[a];n[a]!==i&&(t[a]==null?e.style.removeProperty(a):e.style.setProperty(a,i,s))}}function vt(e,n,t,s){var a=e.__style;if(a!==n){var i=Sl(n,s);i==null?e.removeAttribute("style"):e.style.cssText=i,e.__style=n}else s&&(Array.isArray(s)?(Er(e,t?.[0],s[0]),Er(e,t?.[1],s[1],"important")):Er(e,t,s));return s}const Ml=Symbol("is custom element"),Tl=Symbol("is html");function ji(e,n){var t=Oi(e);t.value===(t.value=n??void 0)||e.value===n&&(n!==0||e.nodeName!=="PROGRESS")||(e.value=n??"")}function $t(e,n,t,s){var a=Oi(e);a[n]!==(a[n]=t)&&(n==="loading"&&(e[lo]=t),t==null?e.removeAttribute(n):typeof t!="string"&&$l(e).includes(n)?e[n]=t:e.setAttribute(n,t))}function Oi(e){return e.__attributes??={[Ml]:e.nodeName.includes("-"),[Tl]:e.namespaceURI===Ro}}var Pa=new Map;function $l(e){var n=e.getAttribute("is")||e.nodeName,t=Pa.get(n);if(t)return t;Pa.set(n,t=[]);for(var s,a=e,i=Element.prototype;i!==a;){s=Ja(a);for(var o in s)s[o].set&&t.push(o);a=Zr(a)}return t}function pr(e,n,t=n){var s=new WeakSet;el(e,"input",async a=>{var i=a?e.defaultValue:e.value;if(i=Sr(e)?Mr(i):i,t(i),Je!==null&&s.add(Je),await os(),i!==(i=n())){var o=e.selectionStart,l=e.selectionEnd,d=e.value.length;if(e.value=i??"",l!==null){var c=e.value.length;o===l&&l===d&&c>d?(e.selectionStart=c,e.selectionEnd=c):(e.selectionStart=o,e.selectionEnd=Math.min(l,c))}}}),y(n)==null&&e.value&&(t(Sr(e)?Mr(e.value):e.value),Je!==null&&s.add(Je)),gs(()=>{var a=n();if(e===document.activeElement){var i=Ws??Je;if(s.has(i))return}Sr(e)&&a===Mr(e.value)||e.type==="date"&&!a&&!e.value||a!==e.value&&(e.value=a??"")})}function Sr(e){var n=e.type;return n==="number"||n==="range"}function Mr(e){return e===""?null:+e}class oa{#e=new WeakMap;#t;#n;static entries=new WeakMap;constructor(n){this.#n=n}observe(n,t){var s=this.#e.get(n)||new Set;return s.add(t),this.#e.set(n,s),this.#s().observe(n,this.#n),()=>{var a=this.#e.get(n);a.delete(t),a.size===0&&(this.#e.delete(n),this.#t.unobserve(n))}}#s(){return this.#t??(this.#t=new ResizeObserver(n=>{for(var t of n){oa.entries.set(t.target,t);for(var s of this.#e.get(t.target)||[])s(t)}}))}}var Al=new oa({box:"border-box"});function Ca(e,n,t){var s=Al.observe(e,()=>t(e[n]));Dt(()=>(y(()=>t(e[n])),s))}function La(e,n){return e===n||e?.[On]===n}function Ln(e={},n,t,s){return Dt(()=>{var a,i;return gs(()=>{a=i,i=[],y(()=>{e!==t(...i)&&(n(e,...i),a&&La(t(...a),e)&&n(null,...a))})}),()=>{Gn(()=>{i&&La(t(...i),e)&&n(null,...i)})}}),e}function za(e,n){Jo(window,["resize"],()=>Zn(()=>n(window[e])))}function Jt(e){return function(...n){var t=n[0];return t.stopPropagation(),e?.apply(this,n)}}function St(e=!1){const n=it,t=n.l.u;if(!t)return;let s=()=>I(n.s);if(e){let a=0,i={};const o=Ds(()=>{let l=!1;const d=n.s;for(const c in d)d[c]!==i[c]&&(i[c]=d[c],l=!0);return l&&a++,a});s=()=>r(o)}t.b.length&&nl(()=>{Ra(n,s),er(t.b)}),Or(()=>{const a=y(()=>t.m.map(ao));return()=>{for(const i of a)typeof i=="function"&&i()}}),t.a.length&&Or(()=>{Ra(n,s),er(t.a)})}function Ra(e,n){if(e.l.s)for(const t of e.l.s)r(t);n()}function Ls(e,n){var t=e.$$events?.[n.type],s=lr(t)?t.slice():t==null?[]:[t];for(var a of s)a.call(this,n)}function la(e,n,t){if(e==null)return n(void 0),t&&t(void 0),jt;const s=y(()=>e.subscribe(n,t));return s.unsubscribe?()=>s.unsubscribe():s}const ts=[];function Pl(e,n){return{subscribe:Ue(e,n).subscribe}}function Ue(e,n=jt){let t=null;const s=new Set;function a(l){if(na(e,l)&&(e=l,t)){const d=!ts.length;for(const c of s)c[1](),ts.push(c,e);if(d){for(let c=0;c<ts.length;c+=2)ts[c][0](ts[c+1]);ts.length=0}}}function i(l){a(l(e))}function o(l,d=jt){const c=[l,d];return s.add(c),s.size===1&&(t=n(a,i)||jt),l(e),()=>{s.delete(c),s.size===0&&t&&(t(),t=null)}}return{set:a,update:i,subscribe:o}}function Di(e,n,t){const s=!Array.isArray(e),a=s?[e]:e;if(!a.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const i=n.length<2;return Pl(t,(o,l)=>{let d=!1;const c=[];let u=0,h=jt;const f=()=>{if(u)return;h();const k=n(s?c[0]:c,o,l);i?o(k):h=typeof k=="function"?k:jt},p=a.map((k,S)=>la(k,m=>{c[S]=m,u&=~(1<<S),d&&f()},()=>{u|=1<<S}));return d=!0,f(),function(){er(p),h(),d=!1}})}function Qe(e){let n;return la(e,t=>n=t)(),n}let Vs=!1,Ur=Symbol();function Ee(e,n,t){const s=t[n]??={store:null,source:T(void 0),unsubscribe:jt};if(s.store!==e&&!(Ur in t))if(s.unsubscribe(),s.store=e??null,e==null)s.source.v=void 0,s.unsubscribe=jt;else{var a=!0;s.unsubscribe=la(e,i=>{a?s.source.v=i:_(s.source,i)}),a=!1}return e&&Ur in t?Qe(e):r(s.source)}function qt(){const e={};function n(){hr(()=>{for(var t in e)e[t].unsubscribe();Za(e,Ur,{enumerable:!1,value:!0})})}return[e,n]}function Cl(e,n,t){return e.set(t),n}function Ll(e){var n=Vs;try{return Vs=!1,[e(),Vs]}finally{Vs=n}}function dt(e,n,t,s){var a=!_s||(t&So)!==0,i=(t&To)!==0,o=(t&$o)!==0,l=s,d=!0,c=()=>(d&&(d=!1,l=o?y(s):s),l),u;if(i){var h=On in e||oo in e;u=is(e,n)?.set??(h&&n in e?N=>e[n]=N:void 0)}var f,p=!1;i?[f,p]=Ll(()=>e[n]):f=e[n],f===void 0&&s!==void 0&&(f=c(),u&&(a&&po(),u(f)));var k;if(a?k=()=>{var N=e[n];return N===void 0?c():(d=!0,N)}:k=()=>{var N=e[n];return N!==void 0&&(l=void 0),N===void 0?l:N},a&&(t&Mo)===0)return k;if(u){var S=e.$$legacy;return(function(N,ne){return arguments.length>0?((!a||!ne||S||p)&&u(ne?k():N),N):k()})}var m=!1,x=((t&Eo)!==0?Ds:ut)(()=>(m=!1,k()));i&&r(x);var Q=Xe;return(function(N,ne){if(arguments.length>0){const Y=ne?r(x):a&&i?as(N):N;return _(x,Y),m=!0,l!==void 0&&(l=Y),N}return Jn&&m||(Q.f&gn)!==0?x.v:r(x)})}function bs(e){it===null&&ta(),_s&&it.l!==null?Il(it).m.push(e):Or(()=>{const n=y(e);if(typeof n=="function")return n})}function zl(e){it===null&&ta(),bs(()=>()=>y(e))}function Rl(e,n,{bubbles:t=!1,cancelable:s=!1}={}){return new CustomEvent(e,{detail:n,bubbles:t,cancelable:s})}function ca(){const e=it;return e===null&&ta(),(n,t,s)=>{const a=e.s.$$events?.[n];if(a){const i=lr(a)?a.slice():[a],o=Rl(n,t,s);for(const l of i)l.call(e.x,o);return!o.defaultPrevented}return!0}}function Il(e){var n=e.l;return n.u??={a:[],b:[],m:[]}}const Nl="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Nl);jo();const jl=e=>e;function Fi(e){const n=e-1;return n*n*n+1}function Ia(e){const n=typeof e=="string"&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return n?[parseFloat(n[1]),n[2]||"px"]:[e,"px"]}function vn(e,{delay:n=0,duration:t=400,easing:s=jl}={}){const a=+getComputedStyle(e).opacity;return{delay:n,duration:t,easing:s,css:i=>`opacity: ${i*a}`}}function qi(e,{delay:n=0,duration:t=400,easing:s=Fi,x:a=0,y:i=0,opacity:o=0}={}){const l=getComputedStyle(e),d=+l.opacity,c=l.transform==="none"?"":l.transform,u=d*(1-o),[h,f]=Ia(a),[p,k]=Ia(i);return{delay:n,duration:t,easing:s,css:(S,m)=>`
			transform: ${c} translate(${(1-S)*h}${f}, ${(1-S)*p}${k});
			opacity: ${d-u*m}`}}function va(e,{delay:n=0,duration:t=400,easing:s=Fi,start:a=0,opacity:i=0}={}){const o=getComputedStyle(e),l=+o.opacity,d=o.transform==="none"?"":o.transform,c=1-a,u=l*(1-i);return{delay:n,duration:t,easing:s,css:(h,f)=>`
			transform: ${d} scale(${1-c*f});
			opacity: ${l-u*f}
		`}}const Ol='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-arrows-shuffle-2"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 4l3 3l-3 3" /><path d="M18 20l3 -3l-3 -3" /><path d="M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5" /><path d="M3 17h3a5 5 0 0 0 5 -5a5 5 0 0 1 5 -5h5" /></svg>',Dl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-deezer"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 16.5h2v.5h-2z" /><path d="M8 16.5h2.5v.5h-2.5z" /><path d="M16 17h-2.5v-.5h2.5z" /><path d="M21.5 17h-2.5v-.5h2.5z" /><path d="M21.5 13h-2.5v.5h2.5z" /><path d="M21.5 9.5h-2.5v.5h2.5z" /><path d="M21.5 6h-2.5v.5h2.5z" /><path d="M16 13h-2.5v.5h2.5z" /><path d="M8 13.5h2.5v-.5h-2.5z" /><path d="M8 9.5h2.5v.5h-2.5z" /></svg>',Fl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-compact-down"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 11l8 3l8 -3" /></svg>',ql='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-compact-left"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M13 20l-3 -8l3 -8" /></svg>',Bl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-left"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 6l-6 6l6 6" /></svg>',Na='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-disc"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0" /><path d="M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M7 12a5 5 0 0 1 5 -5" /><path d="M12 17a5 5 0 0 0 5 -5" /></svg>',Ul='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-grip-horizontal"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M5 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M12 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M12 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M19 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M19 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /></svg>',Hl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-heart"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M19.5 12.572l-7.5 7.428l-7.5 -7.428a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572" /></svg>',Vl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-heart"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6.979 3.074a6 6 0 0 1 4.988 1.425l.037 .033l.034 -.03a6 6 0 0 1 4.733 -1.44l.246 .036a6 6 0 0 1 3.364 10.008l-.18 .185l-.048 .041l-7.45 7.379a1 1 0 0 1 -1.313 .082l-.094 -.082l-7.493 -7.422a6 6 0 0 1 3.176 -10.215z" /></svg>',Yl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-menu-2"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 6l16 0" /><path d="M4 12l16 0" /><path d="M4 18l16 0" /></svg>',Tr='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-music"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 17a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /><path d="M13 17a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /><path d="M9 17v-13h10v13" /><path d="M9 8h10" /></svg>',Ql='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-pause"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z" /><path d="M17 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z" /></svg>',Wl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-player-play"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 4v16l13 -8z" /></svg>',Kl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-play"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 4v16a1 1 0 0 0 1.524 .852l13 -8a1 1 0 0 0 0 -1.704l-13 -8a1 1 0 0 0 -1.524 .852z" /></svg>',Xl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-skip-back"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M19.496 4.136l-12 7a1 1 0 0 0 0 1.728l12 7a1 1 0 0 0 1.504 -.864v-14a1 1 0 0 0 -1.504 -.864z" /><path d="M4 4a1 1 0 0 1 .993 .883l.007 .117v14a1 1 0 0 1 -1.993 .117l-.007 -.117v-14a1 1 0 0 1 1 -1z" /></svg>',Gl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-skip-forward"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 5v14a1 1 0 0 0 1.504 .864l12 -7a1 1 0 0 0 0 -1.728l-12 -7a1 1 0 0 0 -1.504 .864z" /><path d="M20 4a1 1 0 0 1 .993 .883l.007 .117v14a1 1 0 0 1 -1.993 .117l-.007 -.117v-14a1 1 0 0 1 1 -1z" /></svg>',Zl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-playlist"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0" /><path d="M17 17v-13h4" /><path d="M13 5h-10" /><path d="M3 9l10 0" /><path d="M9 13h-6" /></svg>',Jl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-radio"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3l-9.371 3.749a1 1 0 0 0 -.629 .928v11.323a1 1 0 0 0 1 1h14a1 1 0 0 0 1 -1v-11a1 1 0 0 0 -1 -1h-14.5" /><path d="M4 12h16" /><path d="M7 12v-2" /><path d="M17 16v.01" /><path d="M13 16v.01" /></svg>',ec='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-refresh"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4" /><path d="M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4" /></svg>',tc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-repeat"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 12v-3a3 3 0 0 1 3 -3h13m-3 -3l3 3l-3 3" /><path d="M20 12v3a3 3 0 0 1 -3 3h-13m3 3l-3 -3l3 -3" /></svg>',nc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-search"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0" /><path d="M21 21l-6 -6" /></svg>',sc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-settings"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z" /><path d="M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /></svg>',rc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-trash"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 7l16 0" /><path d="M10 11l0 6" /><path d="M14 11l0 6" /><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12" /><path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3" /></svg>',ac='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 8a5 5 0 0 1 0 8" /><path d="M17.7 5a9 9 0 0 1 0 14" /><path d="M6 15h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l3.5 -4.5a.8 .8 0 0 1 1.5 .5v14a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5" /></svg>',ic='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume-2"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 8a5 5 0 0 1 0 8" /><path d="M6 15h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l3.5 -4.5a.8 .8 0 0 1 1.5 .5v14a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5" /></svg>',oc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume-3"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 15h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l3.5 -4.5a.8 .8 0 0 1 1.5 .5v14a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5" /><path d="M16 10l4 4m0 -4l-4 4" /></svg>',lc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume-off"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 8a5 5 0 0 1 1.912 4.934m-1.377 2.602a5 5 0 0 1 -.535 .464" /><path d="M17.7 5a9 9 0 0 1 2.362 11.086m-1.676 2.299a9 9 0 0 1 -.686 .615" /><path d="M9.069 5.054l.431 -.554a.8 .8 0 0 1 1.5 .5v2m0 4v8a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l1.294 -1.664" /><path d="M3 3l18 18" /></svg>',cc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-x"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 6l-12 12" /><path d="M6 6l12 12" /></svg>',vc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-device-floppy"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2" /><path d="M12 14m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0" /><path d="M14 4l0 4l-6 0l0 -4" /></svg>',dc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-file-pencil"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3v4a1 1 0 0 0 1 1h4" /><path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z" /><path d="M10 18l5 -5a1.414 1.414 0 0 0 -2 -2l-5 5v2h2z" /></svg>',ja='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-plus"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 5l0 14" /><path d="M5 12l14 0" /></svg>',uc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-circle-check"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0" /><path d="M9 12l2 2l4 -4" /></svg>',fc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-dots"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /></svg>',hc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-sort-descending"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 6l9 0" /><path d="M4 12l7 0" /><path d="M4 18l7 0" /><path d="M15 15l3 3l3 -3" /><path d="M18 6l0 12" /></svg>',pc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-sort-ascending"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 6l7 0" /><path d="M4 12l7 0" /><path d="M4 18l9 0" /><path d="M15 9l3 -3l3 3" /><path d="M18 6l0 12" /></svg>',w={ARTISTS:Tr,ALBUMS:Na,GENRES:Tr,PLAYLISTS:Zl,RADIO:Jl,SEARCH:nc,PLAY:Kl,PLAY_OUTLINE:Wl,PAUSE:Ql,PREVIOUS:Xl,NEXT:Gl,SHUFFLE:Ol,REPEAT:tc,VOLUME_FULL:ac,VOLUME_MEDIUM:ic,VOLUME_MUTE:oc,VOLUME_OFF:lc,HEART:Hl,HEART_FILLED:Vl,SYNC:ec,SETTINGS:sc,CLOSE:cc,MENU:Yl,BACK:Bl,BACK_COMPACT:ql,CHEVRON_DOWN:Fl,DRAG_HANDLE:Ul,REMOVE:rc,DEEZER:Dl,SAVE:vc,EDIT:dc,ADD:ja,ACCEPT:uc,DOTS:fc,ADD_TO_PLAYLIST:ja,ALBUM_LINK:Na,ARTIST_LINK:Tr,SORT_DESC:hc,SORT_ASC:pc};function fs(e){if(!e||!e.image)return null;if(e.image.startsWith("http"))return e.image;let n="";return e.image==="local"?n=`${e.name}.jpg`:n=e.image,`/imagesw/radio-logos/thumbs/${encodeURIComponent(n)}`}function Oa(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}function _c(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var $r={exports:{}},Ar={exports:{}},Da;function gc(){return Da||(Da=1,(function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(t,s){return t<<s|t>>>32-s},rotr:function(t,s){return t<<32-s|t>>>s},endian:function(t){if(t.constructor==Number)return n.rotl(t,8)&16711935|n.rotl(t,24)&4278255360;for(var s=0;s<t.length;s++)t[s]=n.endian(t[s]);return t},randomBytes:function(t){for(var s=[];t>0;t--)s.push(Math.floor(Math.random()*256));return s},bytesToWords:function(t){for(var s=[],a=0,i=0;a<t.length;a++,i+=8)s[i>>>5]|=t[a]<<24-i%32;return s},wordsToBytes:function(t){for(var s=[],a=0;a<t.length*32;a+=8)s.push(t[a>>>5]>>>24-a%32&255);return s},bytesToHex:function(t){for(var s=[],a=0;a<t.length;a++)s.push((t[a]>>>4).toString(16)),s.push((t[a]&15).toString(16));return s.join("")},hexToBytes:function(t){for(var s=[],a=0;a<t.length;a+=2)s.push(parseInt(t.substr(a,2),16));return s},bytesToBase64:function(t){for(var s=[],a=0;a<t.length;a+=3)for(var i=t[a]<<16|t[a+1]<<8|t[a+2],o=0;o<4;o++)a*8+o*6<=t.length*8?s.push(e.charAt(i>>>6*(3-o)&63)):s.push("=");return s.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/ig,"");for(var s=[],a=0,i=0;a<t.length;i=++a%4)i!=0&&s.push((e.indexOf(t.charAt(a-1))&Math.pow(2,-2*i+8)-1)<<i*2|e.indexOf(t.charAt(a))>>>6-i*2);return s}};Ar.exports=n})()),Ar.exports}var Pr,Fa;function qa(){if(Fa)return Pr;Fa=1;var e={utf8:{stringToBytes:function(n){return e.bin.stringToBytes(unescape(encodeURIComponent(n)))},bytesToString:function(n){return decodeURIComponent(escape(e.bin.bytesToString(n)))}},bin:{stringToBytes:function(n){for(var t=[],s=0;s<n.length;s++)t.push(n.charCodeAt(s)&255);return t},bytesToString:function(n){for(var t=[],s=0;s<n.length;s++)t.push(String.fromCharCode(n[s]));return t.join("")}}};return Pr=e,Pr}var Cr,Ba;function mc(){if(Ba)return Cr;Ba=1,Cr=function(t){return t!=null&&(e(t)||n(t)||!!t._isBuffer)};function e(t){return!!t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function n(t){return typeof t.readFloatLE=="function"&&typeof t.slice=="function"&&e(t.slice(0,0))}return Cr}var Ua;function bc(){return Ua||(Ua=1,(function(){var e=gc(),n=qa().utf8,t=mc(),s=qa().bin,a=function(i,o){i.constructor==String?o&&o.encoding==="binary"?i=s.stringToBytes(i):i=n.stringToBytes(i):t(i)?i=Array.prototype.slice.call(i,0):!Array.isArray(i)&&i.constructor!==Uint8Array&&(i=i.toString());for(var l=e.bytesToWords(i),d=i.length*8,c=1732584193,u=-271733879,h=-1732584194,f=271733878,p=0;p<l.length;p++)l[p]=(l[p]<<8|l[p]>>>24)&16711935|(l[p]<<24|l[p]>>>8)&4278255360;l[d>>>5]|=128<<d%32,l[(d+64>>>9<<4)+14]=d;for(var k=a._ff,S=a._gg,m=a._hh,x=a._ii,p=0;p<l.length;p+=16){var Q=c,N=u,ne=h,Y=f;c=k(c,u,h,f,l[p+0],7,-680876936),f=k(f,c,u,h,l[p+1],12,-389564586),h=k(h,f,c,u,l[p+2],17,606105819),u=k(u,h,f,c,l[p+3],22,-1044525330),c=k(c,u,h,f,l[p+4],7,-176418897),f=k(f,c,u,h,l[p+5],12,1200080426),h=k(h,f,c,u,l[p+6],17,-1473231341),u=k(u,h,f,c,l[p+7],22,-45705983),c=k(c,u,h,f,l[p+8],7,1770035416),f=k(f,c,u,h,l[p+9],12,-1958414417),h=k(h,f,c,u,l[p+10],17,-42063),u=k(u,h,f,c,l[p+11],22,-1990404162),c=k(c,u,h,f,l[p+12],7,1804603682),f=k(f,c,u,h,l[p+13],12,-40341101),h=k(h,f,c,u,l[p+14],17,-1502002290),u=k(u,h,f,c,l[p+15],22,1236535329),c=S(c,u,h,f,l[p+1],5,-165796510),f=S(f,c,u,h,l[p+6],9,-1069501632),h=S(h,f,c,u,l[p+11],14,643717713),u=S(u,h,f,c,l[p+0],20,-373897302),c=S(c,u,h,f,l[p+5],5,-701558691),f=S(f,c,u,h,l[p+10],9,38016083),h=S(h,f,c,u,l[p+15],14,-660478335),u=S(u,h,f,c,l[p+4],20,-405537848),c=S(c,u,h,f,l[p+9],5,568446438),f=S(f,c,u,h,l[p+14],9,-1019803690),h=S(h,f,c,u,l[p+3],14,-187363961),u=S(u,h,f,c,l[p+8],20,1163531501),c=S(c,u,h,f,l[p+13],5,-1444681467),f=S(f,c,u,h,l[p+2],9,-51403784),h=S(h,f,c,u,l[p+7],14,1735328473),u=S(u,h,f,c,l[p+12],20,-1926607734),c=m(c,u,h,f,l[p+5],4,-378558),f=m(f,c,u,h,l[p+8],11,-2022574463),h=m(h,f,c,u,l[p+11],16,1839030562),u=m(u,h,f,c,l[p+14],23,-35309556),c=m(c,u,h,f,l[p+1],4,-1530992060),f=m(f,c,u,h,l[p+4],11,1272893353),h=m(h,f,c,u,l[p+7],16,-155497632),u=m(u,h,f,c,l[p+10],23,-1094730640),c=m(c,u,h,f,l[p+13],4,681279174),f=m(f,c,u,h,l[p+0],11,-358537222),h=m(h,f,c,u,l[p+3],16,-722521979),u=m(u,h,f,c,l[p+6],23,76029189),c=m(c,u,h,f,l[p+9],4,-640364487),f=m(f,c,u,h,l[p+12],11,-421815835),h=m(h,f,c,u,l[p+15],16,530742520),u=m(u,h,f,c,l[p+2],23,-995338651),c=x(c,u,h,f,l[p+0],6,-198630844),f=x(f,c,u,h,l[p+7],10,1126891415),h=x(h,f,c,u,l[p+14],15,-1416354905),u=x(u,h,f,c,l[p+5],21,-57434055),c=x(c,u,h,f,l[p+12],6,1700485571),f=x(f,c,u,h,l[p+3],10,-1894986606),h=x(h,f,c,u,l[p+10],15,-1051523),u=x(u,h,f,c,l[p+1],21,-2054922799),c=x(c,u,h,f,l[p+8],6,1873313359),f=x(f,c,u,h,l[p+15],10,-30611744),h=x(h,f,c,u,l[p+6],15,-1560198380),u=x(u,h,f,c,l[p+13],21,1309151649),c=x(c,u,h,f,l[p+4],6,-145523070),f=x(f,c,u,h,l[p+11],10,-1120210379),h=x(h,f,c,u,l[p+2],15,718787259),u=x(u,h,f,c,l[p+9],21,-343485551),c=c+Q>>>0,u=u+N>>>0,h=h+ne>>>0,f=f+Y>>>0}return e.endian([c,u,h,f])};a._ff=function(i,o,l,d,c,u,h){var f=i+(o&l|~o&d)+(c>>>0)+h;return(f<<u|f>>>32-u)+o},a._gg=function(i,o,l,d,c,u,h){var f=i+(o&d|l&~d)+(c>>>0)+h;return(f<<u|f>>>32-u)+o},a._hh=function(i,o,l,d,c,u,h){var f=i+(o^l^d)+(c>>>0)+h;return(f<<u|f>>>32-u)+o},a._ii=function(i,o,l,d,c,u,h){var f=i+(l^(o|~d))+(c>>>0)+h;return(f<<u|f>>>32-u)+o},a._blocksize=16,a._digestsize=16,$r.exports=function(i,o){if(i==null)throw new Error("Illegal argument "+i);var l=e.wordsToBytes(a(i,o));return o&&o.asBytes?l:o&&o.asString?s.bytesToString(l):e.bytesToHex(l)}})()),$r.exports}var yc=bc();const wc=_c(yc),Ha=Ue("Disconnected"),Hr=Ue(null);let Lr;function Fe(e,n="info"){Hr.set({text:e,type:n}),Lr&&clearTimeout(Lr),Lr=setTimeout(()=>{Hr.set(null)},3e3)}const rr=Ue({isOpen:!1,title:"",message:"",confirmLabel:"Confirm",cancelLabel:"Cancel",onConfirm:null,type:"confirm",inputValue:"",placeholder:""});function yn({title:e="Confirm Action",message:n="Are you sure?",confirmLabel:t="Confirm",cancelLabel:s="Cancel",type:a="confirm",inputValue:i="",placeholder:o="",onConfirm:l=()=>{}}){rr.set({isOpen:!0,title:e,message:n,confirmLabel:t,cancelLabel:s,type:a,inputValue:i,placeholder:o,onConfirm:l})}function zr(){rr.set({isOpen:!1,title:"",message:"",confirmLabel:"",cancelLabel:"",onConfirm:null,type:"confirm",inputValue:"",placeholder:""})}const gt=Ue({state:"stop",volume:50,elapsed:0,duration:0,random:!1,repeat:!1,bitrate:0,format:"",song:0,songid:0}),Wt=Ue({title:"Not Playing",artist:"",album:"",file:"",stationName:null,id:null,pos:null}),ar=Ue(!1),Xs=Ue(!1),Vr=Ue(!1),Yr=Ue(!1),Nt=Ue("library"),qs=Ue(null),Zt=Ue(!1),kc=localStorage.getItem("sidebarCollapsed")==="true",Qr=Ue(kc);Qr.subscribe(e=>{typeof localStorage<"u"&&localStorage.setItem("sidebarCollapsed",String(e))});const zn=Ue([]),da=Ue([]),Ms=Ue([]),xc=Ue(null),Mn=Ue(new Set),ht=Ue(!1),Vt=Ue([{view:"root"}]),Bn=Ue([]),Bi=Ue(0),Ts=Ue(""),Ui=Ue({});function Ec(e,n){Ui.update(t=>({...t,[e]:n}))}function Sc(e){return Qe(Ui)[e]||0}const ua=Ue({isOpen:!1,track:null,context:{type:"general",playlistName:null,index:null},x:0,y:0,triggerRect:null});function Mc(){if(typeof navigator<"u"&&navigator.vibrate)try{navigator.vibrate(70)}catch{}}function zs(e,n,t={}){if(!n&&t.type!=="playlist-card")return;Mc();let s=0,a=0,i=null,o=e.currentTarget;!o&&e.target&&e.target.closest&&(o=e.target.closest("button")||e.target),o&&o.getBoundingClientRect&&(i=o.getBoundingClientRect());const l=e.detail?.originalEvent||e;l.touches&&l.touches.length>0?(s=l.touches[0].clientX,a=l.touches[0].clientY):l.clientX&&(s=l.clientX,a=l.clientY);const d={type:"general",playlistName:null,index:null,...t};ua.set({isOpen:!0,track:n,context:d,x:s,y:a,triggerRect:i})}function Rt(){ua.set({isOpen:!1,track:null,context:{},x:0,y:0,triggerRect:null})}let Wr=null,Kr=null;function Tc(e){Kr=e}function Pn(e,n=null){n&&(Wr=n),Kr?Kr(e,n):console.warn("Router callback not set!")}function $c(){const e=Wr;return Wr=null,e}function Ac(){window.history.back()}function hs(e,n=[],t=null){if(!e||!e.file)return"/images/default_cover.png";if(Hi(e.file)||e.genre==="Radio")return e.image?fs(e):Vi(e,n,t)||"/images/radio_placeholder.png";let s=e.file.startsWith("/")?e.file.slice(1):e.file;return`/coverart.php/${encodeURI(s)}`}function Rs(e,n="sm",t=[],s=null){if(!e||e.file&&(Hi(e.file)||e.genre==="Radio"||Array.isArray(e)))return e&&e.image?fs(e):Vi(e,t,s)||"/images/radio_icon.png";if(!e.file)return"/images/default_icon.png";if(e.thumbHash){const a=n==="md"?"":"_sm";return`/imagesw/thmcache/${e.thumbHash}${a}.jpg`}try{const a=e.file.lastIndexOf("/"),i=a===-1?".":e.file.substring(0,a);return`/imagesw/thmcache/${wc(i)}${n==="md"?"":"_sm"}.jpg`}catch{let i=e.file.startsWith("/")?e.file.slice(1):e.file;return`/coverart.php/${encodeURI(i)}`}}function Hi(e){return e?e.startsWith("http")||e.includes("://")||e.includes("RADIO"):!1}function Vi(e,n,t){const s=d=>(d||"").toString().toLowerCase().replace(/[^a-z0-9]/g,""),a=s(e?.title),i=s(e?.stationName),o=s(t);if(n&&n.length>0){const d=n.find(c=>{const u=s(c.name);return u?u===i||u===o||a&&u===a||a&&a.includes(u)&&u.length>3:!1});if(d)return fs(d)}const l=e?.stationName||t;return l?fs({name:l,image:"local"}):null}Di([Wt,zn,qs],([e,n,t])=>hs(e,n,t));Di(Wt,e=>!e||!e.file||e.file.startsWith("http")?null:`/coverart.php/${encodeURI(e.file)}`);const Pc=localStorage.getItem("alarmTime")||"08:00",Cc=localStorage.getItem("alarmEnabled")==="true",Lc=Ue(Pc),zc=Ue(Cc);Lc.subscribe(e=>localStorage.setItem("alarmTime",e));zc.subscribe(e=>localStorage.setItem("alarmEnabled",String(e)));const at={NAME:"MoodePlayerDB",STORE_NAME:"music",VERSION:3},Rc={SYNC:"/wave-api.php",STATIONS:e=>"/wave-api.php?action=stations",COVER_ART:e=>`/coverart.php?u=${encodeURIComponent(e)}`,RADIO_LOGOS:e=>`/imagesw/radio-logos/thumbs/${e}`},Tn={open(){return new Promise((e,n)=>{const t=indexedDB.open(at.NAME,at.VERSION);t.onupgradeneeded=s=>{const a=s.target.result,i=s.target.transaction;let o;a.objectStoreNames.contains(at.STORE_NAME)?o=i.objectStore(at.STORE_NAME):o=a.createObjectStore(at.STORE_NAME,{keyPath:"file"}),o.indexNames.contains("artist")||o.createIndex("artist","artist",{unique:!1}),o.indexNames.contains("album")||o.createIndex("album","album",{unique:!1}),o.indexNames.contains("genre")||o.createIndex("genre","genre",{unique:!1}),o.indexNames.contains("album_artist")||o.createIndex("album_artist","album_artist",{unique:!1})},t.onsuccess=()=>e(t.result),t.onerror=()=>n(t.error)})},async clear(){const e=await this.open();return new Promise((n,t)=>{const s=e.transaction(at.STORE_NAME,"readwrite");s.objectStore(at.STORE_NAME).clear(),s.oncomplete=()=>n(),s.onerror=()=>t(s.error)})},async bulkAdd(e){const n=await this.open();return new Promise((t,s)=>{const a=n.transaction(at.STORE_NAME,"readwrite"),i=a.objectStore(at.STORE_NAME);e.forEach(o=>i.put(o)),a.oncomplete=()=>t(),a.onerror=()=>s(a.error)})},async getFilesMap(e){if(!e||e.length===0)return new Map;const n=await this.open();return new Promise(t=>{const a=n.transaction(at.STORE_NAME,"readonly").objectStore(at.STORE_NAME),i=new Map;let o=0;e.forEach(l=>{const d=l.normalize("NFC").trim(),c=a.get(d);c.onsuccess=u=>{u.target.result&&i.set(l,u.target.result),o++,o===e.length&&t(i)},c.onerror=()=>{o++,o===e.length&&t(i)}})})},async getArtists(){const e=await this.open();return new Promise((n,t)=>{const a=e.transaction(at.STORE_NAME,"readonly").objectStore(at.STORE_NAME),i=new Map,o=a.openCursor();o.onsuccess=l=>{const d=l.target.result;if(d){const c=d.value,u=c.album_artist||c.artist;u&&!i.has(u)&&i.set(u,{name:u,file:c.file,thumbHash:c.thumbHash}),d.continue()}else{const c=Array.from(i.values()).sort((u,h)=>u.name.localeCompare(h.name,void 0,{sensitivity:"base"}));n(c)}},o.onerror=()=>t(o.error)})},async getAlbums(){const e=await this.open();return new Promise((n,t)=>{const a=e.transaction(at.STORE_NAME,"readonly").objectStore(at.STORE_NAME).index("album"),i=[],o=a.openCursor(null,"nextunique");o.onsuccess=l=>{const d=l.target.result;if(d){const c=d.value;i.push({name:c.album,artist:c.album_artist||c.artist,file:c.file,thumbHash:c.thumbHash,qualityBadge:c.qualityBadge,year:c.year||0}),d.continue()}else n(i)},o.onerror=()=>t(o.error)})},async getArtistAlbums(e){if(!e)return[];const n=await this.open(),t=e.normalize("NFC").trim();return new Promise((s,a)=>{const o=n.transaction(at.STORE_NAME,"readonly").objectStore(at.STORE_NAME),l=new Promise(c=>{o.indexNames.contains("album_artist")?o.index("album_artist").getAll(IDBKeyRange.only(t)).onsuccess=u=>c(u.target.result):c([])}),d=new Promise(c=>{o.index("artist").getAll(IDBKeyRange.only(t)).onsuccess=u=>c(u.target.result)});Promise.all([l,d]).then(([c,u])=>{const h=[...c,...u],f=[],p=new Set;h.forEach(k=>{p.has(k.album)||(p.add(k.album),f.push({name:k.album,artist:k.album_artist||k.artist,file:k.file,thumbHash:k.thumbHash,qualityBadge:k.qualityBadge,year:k.year||0}))}),s(f)}).catch(c=>a(c))})},async getAlbumTracks(e,n=null){const t=await this.open(),s=e.normalize("NFC").trim(),a=n?n.normalize("NFC").trim():null;return console.log(`[DB] getAlbumTracks called. Album: "${s}", FilterArtist: "${a}"`),new Promise((i,o)=>{const d=t.transaction(at.STORE_NAME,"readonly").objectStore(at.STORE_NAME).index("album"),c=IDBKeyRange.only(s),u=d.getAll(c);u.onsuccess=()=>{let h=u.result;if(console.log(`[DB] Found ${h.length} raw tracks for album "${s}"`),a){const f=h.length;h=h.filter(p=>{const k=(p.artist||"").normalize("NFC").trim(),S=(p.album_artist||"").normalize("NFC").trim();return k===a||S===a}),console.log(`[DB] After artist filter: ${h.length} tracks (Removed ${f-h.length})`)}else console.log("[DB] No artist filter provided. Returning all tracks.");h.sort((f,p)=>{const k=parseInt(f.disc||1),S=parseInt(p.disc||1);if(k!==S)return k-S;const m=parseInt(f.track||0),x=parseInt(p.track||0);return m-x}),i(h)},u.onerror=()=>o(u.error)})},async getGenres(){const e=await this.open();return new Promise((n,t)=>{const a=e.transaction(at.STORE_NAME,"readonly").objectStore(at.STORE_NAME).index("genre"),i=[],o=a.openKeyCursor(null,"nextunique");o.onsuccess=l=>{const d=l.target.result;d?(i.push(d.key),d.continue()):n(i)},o.onerror=()=>t(o.error)})},async getGenreTracks(e){const n=await this.open(),t=e.normalize("NFC").trim();return new Promise((s,a)=>{const l=n.transaction(at.STORE_NAME,"readonly").objectStore(at.STORE_NAME).index("genre").getAll(IDBKeyRange.only(t));l.onsuccess=()=>s(l.result),l.onerror=()=>a(l.error)})},async search(e){if(!e)return[];const n=e.toLowerCase().normalize("NFC").trim(),t=await this.open();return new Promise((s,a)=>{const o=t.transaction(at.STORE_NAME,"readonly").objectStore(at.STORE_NAME),l=[],d=100,c=o.openCursor();c.onsuccess=u=>{const h=u.target.result;if(h){const f=h.value;if((f.title&&f.title.toLowerCase().includes(n)||f.artist&&f.artist.toLowerCase().includes(n)||f.album&&f.album.toLowerCase().includes(n)||f.album_artist&&f.album_artist.toLowerCase().includes(n))&&l.push(f),l.length>=d){s(l);return}h.continue()}else s(l)},c.onerror=()=>a(c.error)})}};var Ic=E('<div class="skeleton svelte-tl058d"></div>');function Ot(e,n){let t=dt(n,"width",8,"100%"),s=dt(n,"height",8,"20px"),a=dt(n,"radius",8,"4px"),i=dt(n,"style",8,"");var o=Ic();ue(()=>vt(o,`width: ${t()??""}; height: ${s()??""}; border-radius: ${a()??""}; ${i()??""}`)),b(e,o)}var Nc=E('<div class="skel svelte-1b8que2"><!></div>'),jc=E('<img loading="lazy"/>'),Oc=E('<div class="loader svelte-1b8que2"><!> <!> <!></div>');function Kn(e,n){kt(n,!1);let t=dt(n,"src",8),s=dt(n,"alt",8,""),a=dt(n,"radius",8,"0px");const i=ca();let o=T("loading");function l(){_(o,"loaded")}function d(m){i("error",m),_(o,"error")}Z(()=>I(t()),()=>{t()?_(o,"loading"):_(o,"error")}),Kt(),St();var c=Oc(),u=v(c);{var h=m=>{var x=Nc(),Q=v(x);Ot(Q,{width:"100%",height:"100%",get radius(){return a()}}),At(2,x,()=>vn,()=>({duration:200})),b(m,x)};R(u,m=>{r(o)==="loading"&&m(h)})}var f=g(u,2);{var p=m=>{var x=jc();let Q;ue(()=>{$t(x,"src",t()),$t(x,"alt",s()),vt(x,`border-radius: ${a()??""}`),Q=Ve(x,1,"svelte-1b8que2",null,Q,{vis:r(o)==="loaded"})}),A("load",x,l),A("error",x,d),b(m,x)};R(f,m=>{t()&&r(o)!=="error"&&m(p)})}var k=g(f,2);{var S=m=>{var x=Ze(),Q=Ce(x);Ks(Q,n,"fallback",{}),b(m,x)};R(k,m=>{r(o)==="error"&&m(S)})}ue(()=>vt(c,`border-radius: ${a()??""}`)),b(e,c),xt()}const ls={DEFAULT_IP:typeof window<"u"?window.location.hostname:"localhost",get MOODE_IP(){try{return typeof localStorage<"u"?localStorage.getItem("moode_ip")||this.DEFAULT_IP:this.DEFAULT_IP}catch{return this.DEFAULT_IP}},setMoodeIp(e){if(typeof localStorage<"u"){const n=e?e.trim():"";n&&localStorage.setItem("moode_ip",n)}}};class Dc{constructor(){this.socket=null,this.queue=[],this.isProcessing=!1,this.reconnectTimer=null,this.watchdogTimer=null,this._buffer=""}get isConnected(){return this.socket&&this.socket.readyState===WebSocket.OPEN}connect(){if(this.socket&&(this.socket.readyState===WebSocket.CONNECTING||this.socket.readyState===WebSocket.OPEN))return;this.reconnectTimer&&clearTimeout(this.reconnectTimer);let n=ls.MOODE_IP||window.location.hostname;n=n.replace(/^https?:\/\//,"").split(":")[0].split("/")[0];const t=ls.WS_PORT||"8080",s=`ws://${n}:${t}`;console.log("[MPD] Connecting to:",s);try{this.socket=new WebSocket(s,["binary"])}catch(a){console.error("[MPD] Connection Error:",a),this.reconnectTimer=setTimeout(()=>this.connect(),5e3);return}this.socket.onopen=()=>{console.log("[MPD] Connected"),Ha.set("Connected"),Fe("Connected to Moode","success"),this._processQueue()},this.socket.onmessage=a=>this._handleMessage(a),this.socket.onclose=a=>{console.warn("[MPD] Socket closed",a.code,a.reason),Ha.set("Disconnected"),this._cleanup(),this.reconnectTimer=setTimeout(()=>this.connect(),3e3)},this.socket.onerror=a=>{console.error("[MPD] Socket error",a)}}send(n){return new Promise((t,s)=>{this.queue.push({cmd:n,resolve:t,reject:s}),this._processQueue()})}_cleanup(){for(this.isProcessing=!1,this._buffer="",this.watchdogTimer&&clearTimeout(this.watchdogTimer);this.queue.length>0;){const{reject:n}=this.queue.shift();n(new Error("Connection lost"))}}async _processQueue(){if(this.isProcessing||this.queue.length===0||!this.isConnected)return;this.isProcessing=!0;const{cmd:n}=this.queue[0];this.watchdogTimer&&clearTimeout(this.watchdogTimer),this.watchdogTimer=setTimeout(()=>{console.error("[MPD] Watchdog timeout"),this.socket&&this.socket.close()},2e4);try{const t=n.endsWith(`
`)?n:n+`
`;this.socket.send(new TextEncoder().encode(t))}catch(t){console.error("[MPD] Send error",t),this._cleanup()}}async _handleMessage(n){let t=n.data;t instanceof Blob&&(t=await t.text()),this.watchdogTimer&&(clearTimeout(this.watchdogTimer),this.watchdogTimer=null),this._buffer+=t;const s=this._buffer.endsWith(`
OK
`)||this._buffer===`OK
`,a=this._buffer.startsWith("ACK");if(s||a){const i=this._buffer;this._buffer="";const o=this.queue.shift();if(this.isProcessing=!1,o)if(a)console.error(`[MPD] Error: ${i.trim()}`),o.reject(new Error(i.trim()));else{const l=i.replace(/\nOK\n$/,"").replace(/^OK\n$/,"");o.resolve(l)}this._processQueue()}else{if(!this.queue.length)return;this.watchdogTimer=setTimeout(()=>{console.error("[MPD] Watchdog timeout receiving large data"),this.socket&&this.socket.close()},2e4)}}}const Me=new Dc,Qt={parseKeyValue(e){const n={};if(!e)return n;const t=e.split(`
`);for(const s of t){const a=s.indexOf(": ");if(a===-1)continue;const i=s.substring(0,a).toLowerCase(),o=s.substring(a+2);n[i]=o}return n},parseStatus(e){const n=this.parseKeyValue(e);let t="";if(n.audio){const s=n.audio.split(":");s[1]&&(t=`${s[1]}-bit`)}return{state:n.state||"stop",volume:parseInt(n.volume)||0,elapsed:parseFloat(n.elapsed)||0,duration:parseFloat(n.duration)||0,random:n.random==="1",repeat:n.repeat==="1",song:parseInt(n.song)||0,songId:parseInt(n.songid)||-1,playlistLength:parseInt(n.playlistlength)||0,bitrate:parseInt(n.bitrate)||0,format:t,playlistVersion:parseInt(n.playlist)||0}},parseCurrentSong(e){const n=this.parseKeyValue(e);return this._normalizeTrack(n)},parsePlaylists(e){const n=e.split(`
`),t=[];let s=null;for(const a of n)a.startsWith("playlist: ")?(s&&t.push(s),s={playlist:a.substring(10)}):a.startsWith("Last-Modified: ")&&s&&(s["last-modified"]=a.substring(15));return s&&t.push(s),t.map(a=>({name:a.playlist,lastModified:a["last-modified"]}))},parseTracks(e){const n=[];let t=null,s=0,a=e.indexOf(`
`,s);for(;a!==-1;){const i=e.substring(s,a),o=i.indexOf(": ");if(o!==-1){const l=i.substring(0,o).toLowerCase(),d=i.substring(o+2);l==="file"?(t&&n.push(this._normalizeTrack(t)),t={file:d}):t&&(t[l]=d)}s=a+1,a=e.indexOf(`
`,s)}return t&&n.push(this._normalizeTrack(t)),n},_normalizeTrack(e){const n=e.file||e.File||"",t=e.Title||e.title||e.Name||e.name||n.split("/").pop()||"Unknown";return{file:n,title:t,artist:e.Artist||e.artist||"Unknown Artist",album:e.Album||e.album||"Unknown Album",genre:e.Genre||e.genre||"Unknown",time:parseFloat(e.Time||e.time||0),track:e.Track||e.track||"",id:e.Id||e.id,pos:e.Pos||e.pos||null,stationName:e.name||e.Name||null}}},Fc=1e3,qc=250;let Gs=null,$s=null,Zs=0,In=1,ir=!0,_n=!1,jn=0,ns=null;function Js(e){return e?String(e).normalize("NFC").replace(/\\/g,"\\\\").replace(/"/g,'\\"'):""}function Bc(){Uc(),ir=!0,_n=!1,jn=0,ht.set(!1),rn(),Gs=setInterval(()=>{Me.isConnected&&!Me.isProcessing&&rn()},Fc)}function Uc(){Gs&&(clearInterval(Gs),Gs=null),fa()}async function rn(){try{const e=await Me.send("status"),n=await Me.send("currentsong"),t=Qt.parseStatus(e),s=Qt.parseCurrentSong(n);Vc(t,s);const a=Qe(Bi);if(Qe(ht))return;(t.playlistLength>0&&t.playlistVersion!==a||t.playlistLength>0&&Qe(Bn).length===0)&&Hc(t.playlistVersion)}catch{}}async function Hc(e){if(!Qe(ht))try{const n=await Me.send("playlistinfo");if(Qe(ht))return;const t=Qt.parseTracks(n),s=t.map(o=>o.file).filter(o=>o&&!o.startsWith("http"));let a=new Map;if(s.length>0)try{a=await Tn.getFilesMap(s)}catch(o){console.warn("Failed to hydrate queue from DB",o)}const i=t.map(o=>{const l=(o.file||"").normalize("NFC"),d=a.get(l);return d?{...o,thumbHash:d.thumbHash,qualityBadge:d.qualityBadge,title:o.title||d.title,artist:o.artist||d.artist,album:o.album||d.album,_uid:String(o.id||o.pos+o.file)}:{...o,_uid:String(o.id||o.pos+o.file)}});Bn.set(i),Bi.set(e)}catch(n){console.error("Queue sync error",n)}}function Vc(e,n){const t=Qe(Wt),s=Qe(zn),a=n.file&&n.file.startsWith("http");if(a){const i=c=>(c||"").toString().toLowerCase().replace(/[^a-z0-9]/g,""),o=i(n.file),l=i(n.title),d=s.find(c=>{const u=i(c.station||c.file||c.url||(Array.isArray(c)?c[1]:"")),h=i(c.name||(Array.isArray(c)?c[0]:""));return u&&o.includes(u)||h&&l.includes(h)});d?n.stationName=d.name||d[0]:t.stationName&&t.file===n.file&&(n.stationName=t.stationName)}Wt.set(n),gt.update(i=>{const o=e.state==="play",l=performance.now();if(e.state==="pause"||i.state==="pause")return Ys(!1),l<jn?i:e;if(n.file!==t.file||ir)return ir=!1,_n=!1,In=1,a&&(e.elapsed=0),Ys(o&&!a),e;if(l<jn)return i;if(_n)return _n=!1,In=1,Ys(o&&!a),e;if(o&&!a){const d=e.elapsed-i.elapsed;if(Math.abs(d)>2)return In=1,e;if(Math.abs(d)<.05)In=1;else{let u=d/1.5;In=Math.max(.5,Math.min(1.5,1+u))}return{...e,elapsed:i.elapsed}}return Ys(!1),e})}function Ys(e){e?Xr():fa()}function Xr(){$s||ir||(Zs=performance.now(),$s=setInterval(()=>{const e=performance.now();let n=(e-Zs)/1e3;n>2&&(n=0),Zs=e,gt.update(t=>{if(t.state!=="play")return t;let s=t.elapsed+n*In;return t.duration>0&&s>t.duration&&(s=t.duration),{...t,elapsed:s}})},qc))}function fa(){$s&&(clearInterval($s),$s=null),In=1,Zs=0}async function Va(e,n=!1){if(!e||e.length===0)return;ht.set(!0),_n=!0;const t=5;try{for(let s=0;s<e.length;s+=t){const a=e.slice(s,s+t),i=["command_list_begin"];a.forEach(o=>{i.push(`add "${Js(o.file)}"`)}),i.push("command_list_end"),await Me.send(i.join(`
`))}n?(await Me.send("play 0"),Fe(`Playing ${e.length} tracks`,"success")):Fe(`Added ${e.length} tracks`,"success")}catch(s){console.error("[Player] Bulk Action Failed:",s),Fe("Error adding tracks","error")}finally{setTimeout(()=>{ht.set(!1),rn()},1500)}}const en={async togglePlay(){const n=Qe(gt).state==="play";jn=performance.now()+800,gt.update(t=>{const s=n?"pause":"play";return s==="play"?Xr():fa(),{...t,state:s}}),await Me.send(n?"pause 1":"play"),setTimeout(rn,900)},async next(){_n=!0,jn=0,await Me.send("next"),rn()},async previous(){_n=!0,jn=0,gt.update(e=>({...e,elapsed:0})),await Me.send("previous"),rn()},async setVolume(e){gt.update(n=>({...n,volume:e})),await Me.send(`setvol ${e}`)},async seek(e){_n=!0,jn=performance.now()+500,gt.update(n=>({...n,elapsed:e})),await Me.send(`seekcur ${e}`),setTimeout(rn,600)},async toggleRandom(){const n=!Qe(gt).random;gt.update(t=>({...t,random:n})),await Me.send(`random ${n?1:0}`)},async toggleRepeat(){const n=!Qe(gt).repeat;gt.update(t=>({...t,repeat:n})),await Me.send(`repeat ${n?1:0}`)},async playUri(e,n={}){ht.set(!0);const t=Js(e);_n=!0,gt.update(s=>({...s,state:"play",elapsed:0})),Wt.set({title:n.title||e.split("/").pop(),artist:n.artist||"",file:e}),Xr();try{const s=await Me.send("currentsong"),a=parseInt(Qt.parseKeyValue(s).pos),i=await Me.send(`addid "${t}"`),o=parseInt(Qt.parseKeyValue(i).id);if(isNaN(o))await Me.send(`add "${t}"`),await Me.send("play");else{const l=isNaN(a)?0:a+1;await Me.send(`moveid ${o} ${l}`),await Me.send(`playid ${o}`)}}catch(s){console.error("Play error",s),Fe("Failed to play","error")}setTimeout(()=>{ht.set(!1),rn()},1200)},async addToQueue(e){try{await Me.send(`add "${Js(e)}"`),Fe("Added to queue","success")}catch(n){console.error("Add queue error",n),Fe("Failed to add","error")}},async playNext(e){ht.set(!0);const n=Js(e);try{const t=await Me.send("currentsong"),s=parseInt(Qt.parseKeyValue(t).pos||-1);if(s===-1)ht.set(!1),await this.playUri(e);else{const a=await Me.send(`addid "${n}"`),i=parseInt(Qt.parseKeyValue(a).id);isNaN(i)||(await Me.send(`moveid ${i} ${s+1}`),Fe("Will play next","success")),setTimeout(()=>ht.set(!1),1e3)}}catch(t){console.error("Play Next error",t),Fe("Failed to set next","error"),ht.set(!1)}},async removeFromQueue(e){ht.set(!0),ns&&clearTimeout(ns);try{Bn.update(n=>{const t=[...n];return t.splice(e,1),t}),await Me.send(`delete ${e}`)}catch{Fe("Failed to remove","error"),ht.set(!1);return}ns=setTimeout(()=>{ht.set(!1)},1e3)},async moveTrack(e,n){if(e!==n){ht.set(!0),ns&&clearTimeout(ns);try{await Me.send(`move ${e} ${n}`)}catch(t){console.error("Move failed",t),Fe("Move failed","error"),ht.set(!1),rn();return}ns=setTimeout(()=>{ht.set(!1),rn()},2e3)}},async playAllTracks(e){if(!(!e||e.length===0))try{await Me.send("stop"),await Me.send("clear"),await Va(e,!0)}catch(n){console.error(n)}},async addAllToQueue(e){!e||e.length===0||await Va(e,!1)},async saveQueue(e){if(!e)return;const n=e.replace(/"/g,'\\"');try{await Me.send(`save "${n}"`),Fe(`Playlist "${e}" saved`,"success")}catch(t){if(t.message.includes("exist")){if(confirm(`Playlist "${e}" exists. Overwrite?`))try{await Me.send(`rm "${n}"`),await Me.send(`save "${n}"`),Fe(`Playlist "${e}" overwritten`,"success")}catch{Fe("Failed to overwrite","error")}}else console.error(t)}}};function Yi(e){return new Worker("/assets/sync.worker-CxDcqL9_.js",{name:e?.name})}const ws="Favorites";let Ya=Promise.resolve();const ss=e=>e?e.toLowerCase().replace(/^https?:\/\//,"").replace(/^www\./,"").split("?")[0].replace(/\/$/,""):"";function Yc(e){if(e==="Favorites")return"linear-gradient(135deg, hsl(348, 95%, 58%), hsl(348, 90%, 40%))";let n=0;for(let s=0;s<e.length;s++)n=e.charCodeAt(s)+((n<<5)-n);const t=Math.abs(n%360);return`linear-gradient(135deg, hsl(${t}, 60%, 40%), hsl(${(t+40)%360}, 60%, 30%))`}const ln={async syncLibrary(){if(Qe(Zt))return;Zt.set(!0);const e=new Yi;e.postMessage({type:"START_SYNC",payload:{url:`http://${ls.MOODE_IP}/wave-api.php`}}),e.onmessage=n=>{const{type:t,count:s}=n.data;t==="DONE"&&(Fe(`Library updated: ${s} tracks`,"success"),Zt.set(!1),e.terminate()),t==="ERROR"&&(Fe("Sync Failed","error"),Zt.set(!1),e.terminate())},e.onerror=()=>{Zt.set(!1),e.terminate()}},async loadPlaylists(){Vr.set(!0);try{const e=await Me.send("listplaylists"),t=Qt.parsePlaylists(e).map(s=>({...s,color:Yc(s.name)}));da.set(t)}catch(e){console.error(e)}finally{Vr.set(!1)}},async createPlaylistFromQueue(e){if(!e)return;const n=e.replace(/"/g,'\\"');try{await Me.send(`save "${n}"`),Fe(`Playlist "${e}" created`,"success"),await this.loadPlaylists()}catch(t){console.error(t),Fe("Failed to create playlist","error")}},async deletePlaylist(e){if(!e)return;const n=e.replace(/"/g,'\\"');try{await Me.send(`rm "${n}"`),Fe("Playlist deleted","info"),await this.loadPlaylists()}catch(t){console.error(t),Fe("Delete failed","error")}},async renamePlaylist(e,n){if(!e||!n)return;const t=e.replace(/"/g,'\\"'),s=n.replace(/"/g,'\\"');try{await Me.send(`rename "${t}" "${s}"`),Fe("Playlist renamed","success"),await this.loadPlaylists()}catch(a){console.error(a),Fe("Rename failed","error")}},async openPlaylistDetails(e){if(!e)return;Yr.set(!0);const n=e.replace(/"/g,'\\"');try{const t=await Me.send(`listplaylistinfo "${n}"`),s=Qt.parseTracks(t),a=s.map(l=>l.file).filter(l=>l&&!l.startsWith("http"));let i=new Map;if(a.length>0)try{i=await Tn.getFilesMap(a)}catch(l){console.warn("Failed to hydrate playlist from DB",l)}const o=s.map(l=>{const d=i.get(l.file);return d?{...l,thumbHash:d.thumbHash,qualityBadge:d.qualityBadge,title:l.title||d.title,artist:l.artist||d.artist,album:l.album||d.album,_uid:Oa()}:{...l,_uid:Oa()}});Ms.set(o)}catch(t){console.error(t),Fe("Could not load playlist","error")}finally{Yr.set(!1)}},async movePlaylistTrack(e,n,t){const s=e.replace(/"/g,'\\"');try{await Me.send(`playlistmove "${s}" ${n} ${t}`)}catch{Fe("Move failed","error")}},async removeFromPlaylist(e,n){const t=e.replace(/"/g,'\\"');try{await Me.send(`playlistdelete "${t}" ${n}`),Fe("Track removed","success")}catch{Fe("Delete failed","error")}},async loadFavorites(){try{const e=await Me.send(`listplaylistinfo "${ws}"`),n=Qt.parseTracks(e),t=new Set;n.forEach(s=>{s.file&&t.add(s.file)}),Mn.set(t)}catch{Mn.set(new Set)}},async toggleFavorite(e){if(!e||!e.file)return;const n=e.file,t=n.replace(/"/g,'\\"'),s=n.startsWith("http"),a=Qe(Mn);let i=a.has(n);if(!i&&s){const o=ss(n);for(const l of a)if(ss(l)===o){i=!0;break}}Mn.update(o=>{const l=new Set(o);if(i){if(l.delete(n),s){const d=ss(n);for(const c of l)ss(c)===d&&l.delete(c)}}else l.add(n);return l}),Ya=Ya.then(async()=>{try{const o=await Me.send(`listplaylistinfo "${ws}"`),l=Qt.parseTracks(o);let d=[];if(l.forEach((c,u)=>{let h=!1;(c.file===n||s&&ss(c.file)===ss(n)||s&&(c.file.includes(n)||n.includes(c.file)))&&(h=!0),h&&d.push(u)}),i){if(d.length>0){d.sort((c,u)=>u-c);for(const c of d)await Me.send(`playlistdelete "${ws}" ${c}`);Fe("Removed from Favorites","info")}}else d.length>0?console.log("[Fav] Track already exists. Skipping."):(await Me.send(`playlistadd "${ws}" "${t}"`),l.length>0&&await Me.send(`playlistmove "${ws}" ${l.length} 0`),Fe("Added to Favorites","success"))}catch(o){console.error("Fav action failed",o),Fe("Action failed","error")}finally{await this.loadFavorites()}})}};function Qi(){Me.connect(),Bc(),ln.loadPlaylists(),ln.loadFavorites()}function or(e){return Me.send(e)}const{togglePlay:_r,toggleRandom:Un,toggleRepeat:Hn,setVolume:Is,seek:ha,addToQueue:Qc,playNext:Wc,removeFromQueue:Kc,moveTrack:Xc,saveQueue:Gc,playAllTracks:Wi,addAllToQueue:Ki}=en,{syncLibrary:Zc,loadRadioStations:Jc,loadPlaylists:pa,openPlaylistDetails:Xi,toggleFavorite:Gi,loadFavorites:ev,removeFromPlaylist:Zi,movePlaylistTrack:Ji}=ln;function Ns(e){const n=Qe(Wt),t=Qe(zn),s=Qe(qs);if(n.file&&n.file.startsWith("http")&&t.length>0&&(e==="next"||e==="previous")){let i=t.findIndex(l=>l.name===s);i===-1&&(i=0);let o;e==="next"?(o=i+1,o>=t.length&&(o=0)):(o=i-1,o<0&&(o=t.length-1)),_a(t[o])}else e==="next"&&en.next(),e==="previous"&&en.previous()}function _a(e){if(!e)return;qs.set(e.name);const n=e[1]||e.station||e.file||e.url;n&&en.playUri(n,{title:e.name,artist:e.genre||"Radio Stream",stationName:e.name})}function gr(e){e&&(qs.set(null),en.playUri(e.file,{title:e.title,artist:e.artist,album:e.album,stationName:null}))}async function eo(e,n=0){if(!e)return;qs.set(null);const t=e.replace(/"/g,'\\"');try{await Me.send("stop"),await Me.send("clear"),await Me.send(`load "${t}"`),await Me.send(`play ${n}`)}catch(s){console.error("Failed to play playlist context",s)}}const tv=Object.freeze(Object.defineProperty({__proto__:null,addAllToQueue:Ki,addToQueue:Qc,connect:Qi,loadFavorites:ev,loadPlaylists:pa,loadRadioStations:Jc,movePlaylistTrack:Ji,moveTrack:Xc,nav:Ns,openPlaylistDetails:Xi,playAllTracks:Wi,playNext:Wc,playPlaylistContext:eo,playStation:_a,playTrackOptimistic:gr,removeFromPlaylist:Zi,removeFromQueue:Kc,runMpdRequest:or,saveQueue:Gc,seek:ha,setVolume:Is,syncLibrary:Zc,toggleFavorite:Gi,togglePlay:_r,toggleRandom:Un,toggleRepeat:Hn},Symbol.toStringTag,{value:"Module"}));function ga(e,n=2e3){let t;const s=i=>{i.type==="mousedown"&&i.button!==0||(t=setTimeout(()=>{e.dispatchEvent(new CustomEvent("longpress",{detail:{originalEvent:i}}))},n))},a=()=>{clearTimeout(t)};return e.addEventListener("mousedown",s),e.addEventListener("touchstart",s,{passive:!0}),e.addEventListener("mouseup",a),e.addEventListener("mouseleave",a),e.addEventListener("touchend",a),e.addEventListener("touchcancel",a),e.addEventListener("touchmove",a),{destroy(){e.removeEventListener("mousedown",s),e.removeEventListener("touchstart",s),e.removeEventListener("mouseup",a),e.removeEventListener("mouseleave",a),e.removeEventListener("touchend",a),e.removeEventListener("touchcancel",a),e.removeEventListener("touchmove",a)}}}var nv=E('<div class="drag-handle svelte-5cs2hz" title="Drag to reorder"><div class="icon-small svelte-5cs2hz"><!></div></div>'),sv=E('<div class="eq-anim svelte-5cs2hz"><span class="bar b1 svelte-5cs2hz"></span> <span class="bar b2 svelte-5cs2hz"></span> <span class="bar b3 svelte-5cs2hz"></span></div>'),rv=E('<div class="icon-small svelte-5cs2hz"><!></div>'),av=E('<div class="icon-small svelte-5cs2hz"><!></div>'),iv=E('<div class="icon-small accent svelte-5cs2hz"><!></div>'),ov=E('<span class="num svelte-5cs2hz"> </span>'),lv=E('<button class="num-box svelte-5cs2hz"><!></button>'),cv=E('<div slot="fallback" class="icon-ph svelte-5cs2hz"><!></div>'),vv=E('<span class="meta-tag quality svelte-5cs2hz"> </span>'),dv=E('<button class="btn-icon small remove svelte-5cs2hz"><!></button>'),uv=E('<div class="dur svelte-5cs2hz"> </div>'),fv=E('<div role="button" tabindex="0"><div class="left svelte-5cs2hz"><!> <div class="thumb svelte-5cs2hz"><!></div></div> <div class="info svelte-5cs2hz"><div class="title-row svelte-5cs2hz"><div class="title text-ellipsis svelte-5cs2hz"> </div> <!></div> <div> </div></div> <div class="right svelte-5cs2hz"><button class="btn-icon small context-menu-btn svelte-5cs2hz" title="Options"><!></button> <button><!></button> <!></div></div>');function js(e,n){kt(n,!1);const t=()=>Ee(Mn,"$favorites",o),s=()=>Ee(Vt,"$navigationStack",o),a=()=>Ee(Nt,"$activeMenuTab",o),i=()=>Ee(zn,"$stations",o),[o,l]=qt(),d=T(),c=T(),u=T(),h=T(),f=T(),p=T(),k=T(),S=T(),m=T(),x=T(),Q=T(),N=T(),ne=T(),Y=T(),W=T(),j=T(),q=T();let C=dt(n,"track",8),fe=dt(n,"index",8),K=dt(n,"isEditable",8,!1),L=dt(n,"playingIndex",24,()=>-1),G=dt(n,"playingFile",8,null),oe=dt(n,"isPlaying",8,!1);const H=ca();let J=T(!1),B=T(!1);function z(ae){if(r(k))return"â";if(!ae)return"0:00";const Ae=parseInt(ae,10),Re=Math.floor(Ae/60),qe=Ae%60;return`${Re}:${qe.toString().padStart(2,"0")}`}function ye(ae){ae.stopPropagation(),r(f)?_r():H("play")}function X(){return r(c)?.view==="details"&&r(c).data?.name?{type:"playlist",playlistName:r(c).data.name,index:fe()}:r(u)?{type:"queue",index:fe()}:{type:"general"}}function re(ae){ae.stopPropagation(),zs(ae,C(),X())}function ve(ae){K()||zs(ae.detail.originalEvent,C(),X())}function M(ae){ae.stopPropagation(),!r(k)&&C().artist&&(Nt.set("artists"),Pn("albums_by_artist",{name:C().artist}))}Z(()=>I(C()),()=>{C()&&_(B,!1)}),Z(()=>(t(),I(C())),()=>{_(d,t().has(C().file))}),Z(()=>s(),()=>{_(c,s()[s().length-1])}),Z(()=>(r(c),a()),()=>{_(u,r(c)?.view==="queue"||r(c)?.view==="root"&&a()==="queue")}),Z(()=>(r(u),I(fe()),I(L())),()=>{_(h,r(u)?Number(fe())===L():!1)}),Z(()=>(I(C()),I(G())),()=>{_(f,C().file===G())}),Z(()=>(r(f),r(h)),()=>{_(p,r(f)&&!r(h))}),Z(()=>I(C()),()=>{_(k,C().file&&(C().file.startsWith("http")||C().file.includes("RADIO")))}),Z(()=>(r(h),I(oe()),r(J)),()=>{_(S,r(h)&&oe()&&r(J))}),Z(()=>(r(h),I(oe()),r(J)),()=>{_(m,r(h)&&oe()&&!r(J))}),Z(()=>(r(h),I(oe()),r(J)),()=>{_(x,r(h)&&!oe()&&!r(J))}),Z(()=>(r(J),r(S)),()=>{_(Q,r(J)&&!r(S))}),Z(()=>I(C()),()=>{_(N,C().title||C().file?.split("/").pop())}),Z(()=>I(C()),()=>{_(ne,C().artist||"Unknown")}),Z(()=>I(C()),()=>{_(Y,z(C().time))}),Z(()=>I(C()),()=>{_(W,C().qualityBadge?C().qualityBadge.split(" ")[0]:null)}),Z(()=>{},()=>{_(j,null)}),Z(()=>(r(B),I(C()),i(),r(j),Rs),()=>{_(q,r(B)?hs(C(),i(),r(j)):Rs(C(),"sm",i(),r(j)))}),Kt(),St();var $=fv();let D;var de=v($),be=v(de);{var xe=ae=>{var Ae=nv(),Re=v(Ae),qe=v(Re);se(qe,()=>(I(w),y(()=>w.DRAG_HANDLE))),A("mousedown",Ae,Ie=>H("startdrag",Ie)),A("touchstart",Ae,Ie=>H("startdrag",Ie),void 0,!0),A("click",Ae,Jt(function(Ie){Ls.call(this,n,Ie)})),b(ae,Ae)},U=ae=>{var Ae=lv(),Re=v(Ae);{var qe=Se=>{var Oe=sv();b(Se,Oe)},Ie=Se=>{var Oe=Ze(),Ke=Ce(Oe);{var Be=Ye=>{var st=rv(),He=v(st);se(He,()=>(I(w),y(()=>w.PAUSE))),b(Ye,st)},nt=Ye=>{var st=Ze(),He=Ce(st);{var Ge=ot=>{var lt=av(),ct=v(lt);se(ct,()=>(I(w),y(()=>w.PLAY))),b(ot,lt)},et=ot=>{var lt=Ze(),ct=Ce(lt);{var rt=pt=>{var Xt=iv(),Ne=v(Xt);se(Ne,()=>(I(w),y(()=>w.PLAY))),b(pt,Xt)},tt=pt=>{var Xt=ov(),Ne=v(Xt);ue(()=>ce(Ne,fe()+1)),b(pt,Xt)};R(ct,pt=>{r(x)?pt(rt):pt(tt,!1)},!0)}b(ot,lt)};R(He,ot=>{r(Q)?ot(Ge):ot(et,!1)},!0)}b(Ye,st)};R(Ke,Ye=>{r(S)?Ye(Be):Ye(nt,!1)},!0)}b(Se,Oe)};R(Re,Se=>{r(m)?Se(qe):Se(Ie,!1)})}A("click",Ae,ye),b(ae,Ae)};R(be,ae=>{K()?ae(xe):ae(U,!1)})}var te=g(be,2),le=v(te);Kn(le,{get src(){return r(q)},get alt(){return r(N)},radius:"4px",$$events:{error:()=>_(B,!0)},$$slots:{fallback:(ae,Ae)=>{var Re=cv(),qe=v(Re);se(qe,()=>(r(k),I(w),y(()=>r(k)?w.RADIO:w.ALBUMS))),At(1,Re,()=>vn),b(ae,Re)}}});var _e=g(de,2),we=v(_e),O=v(we),P=v(O),ee=g(O,2);{var ie=ae=>{var Ae=vv(),Re=v(Ae);ue(()=>ce(Re,r(W))),b(ae,Ae)};R(ee,ae=>{r(W)&&!r(k)&&ae(ie)})}var me=g(we,2);let he;var F=v(me),ke=g(_e,2),Le=v(ke),je=v(Le);se(je,()=>(I(w),y(()=>w.DOTS)));var Pe=g(Le,2);let V;var ge=v(Pe);se(ge,()=>(r(d),I(w),y(()=>r(d)?w.HEART_FILLED:w.HEART)));var ze=g(Pe,2);{var $e=ae=>{var Ae=dv(),Re=v(Ae);se(Re,()=>(I(w),y(()=>w.REMOVE))),A("click",Ae,Jt(()=>H("remove",{index:fe()}))),b(ae,Ae)},Te=ae=>{var Ae=uv(),Re=v(Ae);ue(()=>ce(Re,r(Y))),b(ae,Ae)};R(ze,ae=>{K()?ae($e):ae(Te,!1)})}Dt(()=>A("click",$,()=>!r(h)&&H("play"))),Dt(()=>A("mouseenter",$,()=>_(J,!0))),Dt(()=>A("mouseleave",$,()=>_(J,!1))),ia($,ae=>ga?.(ae)),Dt(()=>A("longpress",$,ve)),ue(()=>{D=Ve($,1,"row svelte-5cs2hz",null,D,{active:r(h),striped:r(p),editable:K()}),$t(O,"title",r(N)),ce(P,r(N)),he=Ve(me,1,"artist text-ellipsis svelte-5cs2hz",null,he,{link:!r(k)}),ce(F,r(ne)),V=Ve(Pe,1,"btn-icon small svelte-5cs2hz",null,V,{liked:r(d)})}),A("click",me,M),A("click",Le,re),A("click",Pe,Jt(()=>Gi(C()))),b(e,$),xt(),l()}const Qs=100,Qa=5,Wa=25,Ka=3;function hv({tracksStore:e,onMoveTrack:n}){const t=Ue(!1),s=Ue(!1),a=Ue(!1),i=Ue(null),o=Ue(null),l=Ue(null),d=Ue({x:0,y:0,width:0,height:0,grabOffsetX:0,grabOffsetY:0}),c=Ue(null);let u=!1,h=0,f=0,p=0,k=0;const S={scrollContainer:null,listBodyContainer:null};let m=null;function x(L,G,oe){const H=L.detail;if(H.button===2||(window.getSelection&&window.getSelection().removeAllRanges(),!S.scrollContainer))return;const B=S.scrollContainer.querySelectorAll(".row-wrapper")[G];if(!B)return;const z=B.getBoundingClientRect(),ye=H.touches?H.touches[0].clientX:H.clientX,X=H.touches?H.touches[0].clientY:H.clientY,re=ye-z.left,ve=X-z.top;u=!0,t.set(!1),s.set(!1),h=ye,f=X,p=ye,k=X,i.set(G),o.set(G),c.set(oe),l.set(null),d.set({x:ye,y:X,width:z.width,height:z.height,grabOffsetX:re,grabOffsetY:ve})}function Q(L){if(!u||Qe(s))return;const G=L.touches?L.touches[0].clientX:L.clientX,oe=L.touches?L.touches[0].clientY:L.clientY;if(!Qe(t)){const H=Math.abs(G-h),J=Math.abs(oe-f);if(H<Ka&&J<Ka)return;t.set(!0)}L.cancelable&&L.preventDefault(),p=G,k=oe,d.update(H=>({...H,x:p,y:k})),q(k),N()}function N(){if(!S.listBodyContainer)return;const L=S.listBodyContainer.getBoundingClientRect(),G=Qe(d),H=k-L.top-G.grabOffsetY+G.height/2,J=Qe(e).length;if(H<0){o.set(0);return}if(H>L.height){o.set(J);return}const B=Array.from(S.listBodyContainer.querySelectorAll(".row-wrapper"));let z=-1,ye=1/0;B.forEach((X,re)=>{const ve=X.offsetTop+X.offsetHeight/2,M=Math.abs(H-ve);M<ye&&(ye=M,z=re)}),z!==-1&&o.set(z)}function ne(L){if(u){if(u=!1,!Qe(t)){W();return}Y()}}async function Y(){fe(),N(),t.set(!1),s.set(!0);const L=Qe(o);if(S.listBodyContainer&&L!==null){const z=S.listBodyContainer.querySelectorAll(".row-wrapper"),ye=S.listBodyContainer.getBoundingClientRect(),X=z[L];let re=0,ve=0,M=!1;if(X)re=ye.top+X.offsetTop,ve=ye.left+X.offsetLeft,M=!0;else if(L>=z.length&&z.length>0){const $=z[z.length-1];re=ye.top+$.offsetTop+$.offsetHeight,ve=ye.left+$.offsetLeft,M=!0}else z.length===0&&(re=ye.top,ve=ye.left,M=!0);M&&d.update($=>({...$,y:re+$.grabOffsetY,x:ve+$.grabOffsetX}))}await new Promise(z=>setTimeout(z,250)),a.set(!0),await os();const G=Qe(i),oe=Qe(e).length;let H=Math.max(0,Math.min(L,oe)),J=H;if(G!==null&&G!==H){const z=[...Qe(e)],[ye]=z.splice(G,1);J=Math.max(0,Math.min(J,z.length)),z.splice(J,0,ye),e.set(z),n&&n(G,J),i.set(J)}await os(),c.set(null),i.set(null),o.set(null),s.set(!1);const B=G!==H?J:G;l.set(B),await os(),requestAnimationFrame(()=>{requestAnimationFrame(()=>{a.set(!1),setTimeout(()=>{l.set(null)},300)})})}function W(){u=!1,j()}function j(){t.set(!1),s.set(!1),i.set(null),o.set(null),c.set(null),fe()}function q(L){if(!S.scrollContainer)return;const{top:G,bottom:oe}=S.scrollContainer.getBoundingClientRect(),H=L-G,J=oe-L;fe();let B=0;if(H<Qs&&H>0){const z=1-H/Qs;B=-(Qa+Wa*(z*z))}else if(J<Qs&&J>0){const z=1-J/Qs;B=Qa+Wa*(z*z)}B!==0&&C(B)}function C(L){m||(m=requestAnimationFrame(function G(){S.scrollContainer&&(S.scrollContainer.scrollTop+=L,Qe(t)&&(d.update(oe=>({...oe,x:p,y:k})),N(),m=requestAnimationFrame(G)))}))}function fe(){m&&(cancelAnimationFrame(m),m=null)}function K(L,G,oe,H,J,B){return B||!G&&!oe||H===null||J===null?"":L===H?"opacity: 0; pointer-events: none;":H===J?"":H<J&&L>H&&L<=J?"transform: translateY(-100%);":H>J&&L>=J&&L<H?"transform: translateY(100%);":""}return{isDragging:t,isDropping:s,isReordering:a,draggingIndex:i,hoverIndex:o,justDroppedIndex:l,draggedItemData:c,ghostCoords:d,refs:S,onDragInit:x,onPointerMove:Q,onPointerUp:ne,getRowStyle:K,cancelDrag:W}}var pv=E('<div><div style="pointer-events: none; width: 100%; height: 100%;" class="svelte-ym6b2"><!></div></div>'),_v=E('<div class="skeleton-row svelte-ym6b2"><div class="sk-left svelte-ym6b2"><!> <!></div> <div class="sk-info svelte-ym6b2"><!> <!></div> <div class="sk-right svelte-ym6b2"><!></div></div>'),gv=E('<div class="skeletons-wrapper svelte-ym6b2"></div>'),mv=E("<div><!></div>"),bv=E('<div class="content-padded svelte-ym6b2" style="text-align: center; opacity: 0.5;"> </div>'),yv=E("<!> <!>",1),wv=E('<div><!> <div class="list-body svelte-ym6b2"><!> <!></div></div>');function mr(e,n){kt(n,!1);const t=()=>Ee(Vt,"$navigationStack",p),s=()=>Ee(Nt,"$activeMenuTab",p),a=()=>Ee(fe,"$isDragging",p),i=()=>Ee(K,"$isDropping",p),o=()=>Ee(J,"$draggedItemData",p),l=()=>Ee(B,"$ghostCoords",p),d=()=>Ee(G,"$draggingIndex",p),c=()=>Ee(S(),"$itemsStore",p),u=()=>Ee(H,"$justDroppedIndex",p),h=()=>Ee(L,"$isReordering",p),f=()=>Ee(oe,"$hoverIndex",p),[p,k]=qt();let S=dt(n,"itemsStore",8),m=dt(n,"isEditMode",8,!1),x=dt(n,"isLoading",8,!1),Q=dt(n,"emptyText",8,"List is empty"),N=dt(n,"onMoveItem",8,(U,te)=>{}),ne=T(""),Y=T(0),W=T(!1);bs(async()=>{_(Y,Sc(r(ne))),!x()&&r(Y)>0&&r(q).refs.scrollContainer&&(await os(),Us(q,r(q).refs.scrollContainer.scrollTop=r(Y)),_(W,!0))});async function j(){await os(),r(q).refs.scrollContainer&&(Us(q,r(q).refs.scrollContainer.scrollTop=r(Y)),_(W,!0))}zl(()=>{r(q).cancelDrag(),r(q).refs.scrollContainer&&Ec(r(ne),r(q).refs.scrollContainer.scrollTop)});const q=T(hv({tracksStore:S(),onMoveTrack:(U,te)=>{N()(U,te)}})),C=r(q),fe=C.isDragging,K=C.isDropping,L=C.isReordering,G=C.draggingIndex,oe=C.hoverIndex,H=C.justDroppedIndex,J=C.draggedItemData,B=C.ghostCoords,z=T(C.refs);function ye(U,te,le){m()&&r(q).onDragInit(U,te,le)}Z(()=>(t(),s()),()=>{const U=t(),te=U[U.length-1],le=s();if(te&&te.view==="root")_(ne,`root_${le}`);else if(te){const _e=te.data?te.data.name||te.data:"unknown";_(ne,`${te.view}_${_e}`)}}),Z(()=>(I(x()),r(W),r(Y),r(q)),()=>{!x()&&!r(W)&&r(Y)>0&&r(q).refs.scrollContainer&&j()}),Kt(),St();var X=wv();A("mousemove",En,function(...U){r(q).onPointerMove?.apply(this,U)}),A("mouseup",En,function(...U){r(q).onPointerUp?.apply(this,U)}),A("touchmove",En,function(...U){r(q).onPointerMove?.apply(this,U)},void 0,!1),A("touchend",En,function(...U){r(q).onPointerUp?.apply(this,U)}),A("touchcancel",En,function(...U){r(q).onPointerUp?.apply(this,U)});let re;var ve=v(X);{var M=U=>{var te=pv();let le;var _e=v(te),we=v(_e);Ks(we,n,"row",{get item(){return o()},get index(){return d()},isGhost:!0,startDrag:()=>{}}),ue(()=>{le=Ve(te,1,"floating-item svelte-ym6b2",null,le,{dropping:i()}),vt(te,`
            top: ${l(),y(()=>l().y-l().grabOffsetY)??""}px; 
            left: ${l(),y(()=>l().x-l().grabOffsetX)??""}px;
            width: ${l(),y(()=>l().width)??""}px; 
            height: ${l(),y(()=>l().height)??""}px;
        `)}),b(U,te)};R(ve,U=>{(a()||i())&&o()&&U(M)})}var $=g(ve,2),D=v($);Ks(D,n,"header",{});var de=g(D,2);{var be=U=>{var te=gv();Tt(te,4,()=>Array(10),Cn,(le,_e)=>{var we=_v(),O=v(we),P=v(O);Ot(P,{width:"24px",height:"24px",radius:"4px",style:"opacity: 0.3"});var ee=g(P,2);Ot(ee,{width:"40px",height:"40px",radius:"4px",style:"margin-left: 12px;"});var ie=g(O,2),me=v(ie);Ot(me,{width:"40%",height:"14px",radius:"4px",style:"margin-bottom: 6px;"});var he=g(me,2);Ot(he,{width:"25%",height:"12px",radius:"4px",style:"opacity: 0.6"});var F=g(ie,2),ke=v(F);Ot(ke,{width:"30px",height:"12px",radius:"4px"}),b(le,we)}),b(U,te)},xe=U=>{var te=yv(),le=Ce(te);Tt(le,3,c,(O,P)=>O._uid||P,(O,P,ee)=>{var ie=mv();let me;var he=v(ie);Ks(he,n,"row",{get item(){return r(P)},get index(){return r(ee)},isGhost:!1,startDrag:F=>ye(F,r(ee),r(P))}),ue(F=>{me=Ve(ie,1,"row-wrapper svelte-ym6b2",null,me,{"ghost-placeholder":d()===r(ee)&&(a()||i()),"just-dropped":u()===r(ee),"no-transition":h()}),vt(ie,F)},[()=>(r(q),I(r(ee)),a(),i(),d(),f(),h(),y(()=>r(q).getRowStyle(r(ee),a(),i(),d(),f(),h())))]),b(O,ie)});var _e=g(le,2);{var we=O=>{var P=bv(),ee=v(P);ue(()=>ce(ee,Q())),b(O,P)};R(_e,O=>{c(),y(()=>c().length===0)&&O(we)})}b(U,te)};R(de,U=>{x()?U(be):U(xe,!1)})}Ln($,U=>Us(z,r(z).listBodyContainer=U),()=>r(z)?.listBodyContainer),Ln(X,U=>Us(z,r(z).scrollContainer=U),()=>r(z)?.scrollContainer),ue(()=>re=Ve(X,1,"base-list-scroll-container svelte-ym6b2",null,re,{dragging:a()})),At(1,$,()=>vn,()=>({duration:200})),b(e,X),xt(),k()}var kv=E('<div slot="fallback" class="icon-fallback svelte-1eh2rsb"><!></div>'),xv=E('<span class="meta-tag svelte-1eh2rsb"> </span>'),Ev=E('<div class="header-subtitle-row svelte-1eh2rsb"><h2 class="header-sub-text svelte-1eh2rsb"> </h2> <!></div>'),Sv=E('<span class="meta-tag svelte-1eh2rsb"> </span>'),Mv=E('<span class="meta-tag svelte-1eh2rsb"> </span>'),Tv=E('<span class="meta-tag quality svelte-1eh2rsb"> </span>'),$v=E('<div slot="header" class="content-padded svelte-1eh2rsb"><div class="view-header svelte-1eh2rsb"><div class="header-art svelte-1eh2rsb"><div style="width: 100%; height: 100%;" class="svelte-1eh2rsb"><!></div></div> <div class="header-info svelte-1eh2rsb"><div class="header-text-group svelte-1eh2rsb"><div class="header-label svelte-1eh2rsb"> </div> <h1 class="header-title svelte-1eh2rsb"> </h1> <!> <div class="meta-badges svelte-1eh2rsb"><!> <!> <!></div></div> <div class="header-actions svelte-1eh2rsb"><button class="btn-primary svelte-1eh2rsb"> </button> <button class="btn-secondary svelte-1eh2rsb"> </button></div></div></div></div>'),Av=E('<div slot="row" class="svelte-1eh2rsb"><!></div>'),Pv=E("<button> </button>"),Cv=E('<div class="sort-backdrop svelte-1eh2rsb"></div> <div class="sort-menu svelte-1eh2rsb"></div>',1),Lv=E('<div class="sort-wrapper svelte-1eh2rsb"><button class="sort-trigger svelte-1eh2rsb"><span class="svelte-1eh2rsb"> </span> <span class="sort-trigger-icon svelte-1eh2rsb"><!></span></button> <!></div>'),zv=E('<div class="music-card skeleton-card svelte-1eh2rsb"><div class="card-img-container svelte-1eh2rsb"><!></div> <div class="card-title svelte-1eh2rsb" style="margin-top: 12px;"><!></div> <div class="card-sub-row svelte-1eh2rsb" style="margin-top: 6px;"><!></div></div>'),Rv=E('<div class="music-grid svelte-1eh2rsb"></div>'),Iv=E('<div class="group-header header-label svelte-1eh2rsb"> </div>'),Nv=E('<div slot="fallback" class="icon-fallback svelte-1eh2rsb"><!></div>'),jv=E('<div class="card-sub text-ellipsis svelte-1eh2rsb"> </div>'),Ov=E('<div class="card-badge svelte-1eh2rsb"> </div>'),Dv=E('<div class="card-badge quality svelte-1eh2rsb"> </div>'),Fv=E('<div class="music-card svelte-1eh2rsb" role="button" tabindex="0"><div class="card-img-container svelte-1eh2rsb"><!> <div class="play-overlay svelte-1eh2rsb"><span class="overlay-icon svelte-1eh2rsb"><!></span></div></div> <div class="card-title svelte-1eh2rsb"> </div> <div class="card-sub-row svelte-1eh2rsb"><!> <!> <!></div></div>'),qv=E('<div class="empty-text svelte-1eh2rsb">No results found</div>'),Bv=E('<div class="music-grid svelte-1eh2rsb"></div>'),Uv=E('<div class="content-padded svelte-1eh2rsb"><div class="search-input-container svelte-1eh2rsb"><span class="search-icon svelte-1eh2rsb"><!></span> <input type="text" class="svelte-1eh2rsb"/> <!></div> <!></div>'),Hv=E("<div><!></div>");function Vv(e,n){kt(n,!1);const t=()=>Ee(u,"$itemsStore",a),s=()=>Ee(Vt,"$navigationStack",a),[a,i]=qt(),o=T(),l=T(),d=T();let c=dt(n,"activeCategory",8,"artists");const u=Ue([]);let h=T(!0),f=T(""),p=T("name"),k=T(!1);const S=[{id:"name",label:"A-Z"},{id:"artist",label:"Artist"},{id:"year",label:"Oldest"},{id:"year_desc",label:"Newest"}];let m=T(!1),x=T(!1),Q=T(null),N=T(""),ne=T(""),Y=T(""),W=T(0),j=0;function q(){_(k,!r(k))}function C(X){_(p,X),_(k,!1)}function fe(X,re){if(!X||X.length===0)return[];const ve=[...X].sort((M,$)=>{switch(re){case"name":return M.displayName.localeCompare($.displayName,void 0,{sensitivity:"base"});case"artist":const D=M.artist||"",de=$.artist||"",be=D.localeCompare(de,void 0,{sensitivity:"base"});return be!==0?be:(parseInt(M.year)||0)-(parseInt($.year)||0);case"year":return(parseInt(M.year)||0)-(parseInt($.year)||0);case"year_desc":return(parseInt($.year)||0)-(parseInt(M.year)||0);default:return 0}});if(re==="artist"){const M=[];let $=null;return ve.forEach(D=>{const de=D.artist||"Unknown Artist";de!==$&&(M.push({_uid:`header-${de}`,isHeader:!0,title:de}),$=de),M.push(D)}),M}return ve}async function K(X,re){if(!re)return;const ve=++j;_(h,!0),u.set([]),_(Q,re.data),_(N,""),_(ne,""),_(Y,""),_(W,0),console.log(`[LibraryView #${ve}] Start loading:`,re);try{let M=[];if(re.view==="root")M=X==="artists"?await Tn.getArtists():await Tn.getAlbums();else if(re.view==="albums_by_artist"){const D=re.data.name||re.data;M=await Tn.getArtistAlbums(D),_(p,"year")}else if(re.view==="tracks_by_album"){const D=re.data.name||re.data,de=re.data.artist;M=await Tn.getAlbumTracks(D,de)}if(ve!==j){console.warn(`[LibraryView #${ve}] Request cancelled (stale).`);return}const $=M.map((D,de)=>{const xe=typeof D=="string"?{name:D}:D;let U=String(xe.year||"");return U.length>4&&(U=U.substring(0,4)),{...xe,displayName:xe.name||xe.title||xe.artist||"Unknown",thumbFile:xe.file||null,year:U,_uid:(xe.file||xe.name||de)+X+re.view}});if(console.log(`[LibraryView #${ve}] Setting ${$.length} items.`),u.set($),re.view==="tracks_by_album"&&$.length>0){_(Q,$[0]),_(W,$.length),_(Y,$[0].year);const D=$.reduce((de,be)=>de+(be.time||0),0);if(D>0){const de=Math.floor(D/3600),be=Math.floor(D%3600/60);_(N,de>0?`${de} hr ${be} min`:`${be} min`)}$[0].qualityBadge&&_(ne,$[0].qualityBadge)}}catch(M){ve===j&&(console.error(M),u.set([]))}finally{ve===j&&_(h,!1)}}function L(X){r(d).view==="root"?c()==="artists"?Pn("albums_by_artist",X):Pn("tracks_by_album",X):r(d).view==="albums_by_artist"&&Pn("tracks_by_album",X)}function G(){const X=t();if(X.length>0){const re=r(d).data.name||r(d).data.displayName||"this selection";yn({title:"Replace Queue?",message:`This will clear your queue and play all tracks from "${re}".`,confirmLabel:"Play",type:"confirm",onConfirm:()=>{_(m,!0),Wi(X)}})}}function oe(){const X=t();X.length>0&&(_(x,!0),Ki(X),setTimeout(()=>{_(x,!1)},2e3))}Z(()=>I(c()),()=>{c()&&(_(f,""),c(),_(p,"name"))}),Z(()=>(r(p),w),()=>{_(o,r(p)==="year_desc"?w.SORT_ASC:w.SORT_DESC)}),Z(()=>(t(),r(f),r(p)),()=>{_(l,fe(t().filter(X=>{if(!r(f))return!0;const re=r(f).toLowerCase();return X.displayName.toLowerCase().includes(re)||X.artist&&X.artist.toLowerCase().includes(re)}),r(p)))}),Z(()=>s(),()=>{_(d,s()[s().length-1])}),Z(()=>(I(c()),r(d)),()=>{K(c(),r(d))}),Z(()=>r(d),()=>{r(d)&&(_(m,!1),_(x,!1),_(k,!1))}),Kt(),St();var H=Hv();let J;var B=v(H);{var z=X=>{mr(X,{get itemsStore(){return u},get isLoading(){return r(h)},isEditMode:!1,emptyText:"No tracks found",$$slots:{header:(re,ve)=>{var M=$v(),$=v(M),D=v($),de=v(D),be=v(de);{let $e=ut(()=>(I(hs),r(Q),y(()=>hs(r(Q)))));Kn(be,{get src(){return r($e)},alt:"Art",radius:"8px",$$slots:{fallback:(Te,ae)=>{var Ae=kv(),Re=v(Ae);se(Re,()=>(I(w),y(()=>w.ALBUMS))),b(Te,Ae)}}})}var xe=g(D,2),U=v(xe),te=v(U),le=v(te),_e=g(te,2),we=v(_e),O=g(_e,2);{var P=$e=>{var Te=Ev(),ae=v(Te),Ae=v(ae),Re=g(ae,2);{var qe=Ie=>{var Se=xv(),Oe=v(Se);ue(()=>ce(Oe,r(Y))),b(Ie,Se)};R(Re,Ie=>{r(Y)&&r(Y)!=="0"&&Ie(qe)})}ue(()=>ce(Ae,(r(Q),y(()=>r(Q).artist)))),b($e,Te)};R(O,$e=>{r(Q),y(()=>r(Q)&&r(Q).artist)&&$e(P)})}var ee=g(O,2),ie=v(ee);{var me=$e=>{var Te=Sv(),ae=v(Te);ue(()=>ce(ae,`${r(W)??""} tracks`)),b($e,Te)};R(ie,$e=>{r(W)>0&&$e(me)})}var he=g(ie,2);{var F=$e=>{var Te=Mv(),ae=v(Te);ue(()=>ce(ae,r(N))),b($e,Te)};R(he,$e=>{r(N)&&$e(F)})}var ke=g(he,2);{var Le=$e=>{var Te=Tv(),ae=v(Te);ue(()=>ce(ae,r(ne))),b($e,Te)};R(ke,$e=>{r(ne)&&$e(Le)})}var je=g(U,2),Pe=v(je),V=v(Pe),ge=g(Pe,2),ze=v(ge);ue(()=>{ce(le,(r(d),y(()=>r(d).view==="albums_by_artist"?"Artist":"Album"))),$t(_e,"title",(r(d),y(()=>r(d).data.name||r(d).data.displayName))),ce(we,(r(d),y(()=>r(d).data.name||r(d).data.displayName||"Unknown"))),Pe.disabled=r(m),ce(V,r(m)?"Playing...":"Play All"),ge.disabled=r(x),ce(ze,r(x)?"Added":"To Queue")}),A("click",Pe,G),A("click",ge,oe),b(re,M)},row:(re,ve)=>{var M=Av();const $=ut(()=>ve.item),D=ut(()=>ve.index);var de=v(M);js(de,{get track(){return r($)},get index(){return r(D)},isEditable:!1,$$events:{play:()=>gr(r($))}}),b(re,M)}}})},ye=X=>{var re=Uv(),ve=v(re),M=v(ve),$=v(M);se($,()=>(I(w),y(()=>w.SEARCH)));var D=g(M,2),de=g(D,2);{var be=le=>{var _e=Lv(),we=v(_e),O=v(we),P=v(O),ee=g(O,2),ie=v(ee);se(ie,()=>r(o));var me=g(we,2);{var he=F=>{var ke=Cv(),Le=Ce(ke),je=g(Le,2);Tt(je,5,()=>S,Cn,(Pe,V)=>{var ge=Pv();let ze;var $e=v(ge);ue(()=>{ze=Ve(ge,1,"sort-item svelte-1eh2rsb",null,ze,{selected:r(p)===r(V).id}),ce($e,(r(V),y(()=>r(V).label)))}),A("click",ge,()=>C(r(V).id)),b(Pe,ge)}),A("click",Le,q),At(3,Le,()=>vn,()=>({duration:100})),At(3,je,()=>va,()=>({start:.95,duration:100})),b(F,ke)};R(me,F=>{r(k)&&F(he)})}ue(F=>ce(P,F),[()=>(r(p),y(()=>S.find(F=>F.id===r(p))?.label))]),A("click",we,q),b(le,_e)};R(de,le=>{I(c()),r(d),y(()=>c()==="albums"||r(d).view==="albums_by_artist")&&le(be)})}var xe=g(ve,2);{var U=le=>{var _e=Rv();Tt(_e,4,()=>Array(12),Cn,(we,O)=>{var P=zv(),ee=v(P),ie=v(ee);Ot(ie,{width:"100%",height:"100%",radius:"8px"});var me=g(ee,2),he=v(me);Ot(he,{width:"80%",height:"14px",radius:"4px"});var F=g(me,2),ke=v(F);Ot(ke,{width:"50%",height:"12px",radius:"4px",style:"opacity: 0.6"}),b(we,P)}),b(le,_e)},te=le=>{var _e=Bv();Tt(_e,5,()=>r(l),we=>we._uid,(we,O)=>{var P=Ze(),ee=Ce(P);{var ie=he=>{var F=Iv(),ke=v(F);ue(()=>ce(ke,(r(O),y(()=>r(O).title)))),b(he,F)},me=he=>{var F=Fv(),ke=v(F),Le=v(ke);{let Se=ut(()=>(I(Rs),r(O),y(()=>Rs(r(O),"md"))));Kn(Le,{get src(){return r(Se)},get alt(){return r(O),y(()=>r(O).displayName)},radius:"8px",$$slots:{fallback:(Oe,Ke)=>{var Be=Nv(),nt=v(Be);{var Ye=He=>{var Ge=Ze(),et=Ce(Ge);se(et,()=>(I(w),y(()=>w.ARTISTS))),b(He,Ge)},st=He=>{var Ge=Ze(),et=Ce(Ge);se(et,()=>(I(w),y(()=>w.ALBUMS))),b(He,Ge)};R(nt,He=>{c()==="artists"?He(Ye):He(st,!1)})}b(Oe,Be)}}})}var je=g(Le,2),Pe=v(je),V=v(Pe);se(V,()=>(I(w),y(()=>w.PLAY)));var ge=g(ke,2),ze=v(ge),$e=g(ge,2),Te=v($e);{var ae=Se=>{var Oe=jv(),Ke=v(Oe);ue(()=>ce(Ke,(r(O),y(()=>r(O).artist)))),b(Se,Oe)};R(Te,Se=>{r(O),y(()=>r(O).artist)&&Se(ae)})}var Ae=g(Te,2);{var Re=Se=>{var Oe=Ov(),Ke=v(Oe);ue(()=>ce(Ke,(r(O),y(()=>r(O).year)))),b(Se,Oe)};R(Ae,Se=>{r(O),y(()=>r(O).year&&r(O).year!=="0")&&Se(Re)})}var qe=g(Ae,2);{var Ie=Se=>{var Oe=Dv(),Ke=v(Oe);ue(Be=>ce(Ke,Be),[()=>(r(O),y(()=>r(O).qualityBadge.split(" ")[0]))]),b(Se,Oe)};R(qe,Se=>{r(O),y(()=>r(O).qualityBadge)&&Se(Ie)})}ue(()=>ce(ze,(r(O),y(()=>r(O).displayName)))),A("click",F,()=>L(r(O))),A("keypress",F,Se=>Se.key==="Enter"&&L(r(O))),b(he,F)};R(ee,he=>{r(O),y(()=>r(O).isHeader)?he(ie):he(me,!1)})}b(we,P)},we=>{var O=qv();b(we,O)}),b(le,_e)};R(xe,le=>{r(h)?le(U):le(te,!1)})}ue(()=>$t(D,"placeholder",`Filter ${c()??""}...`)),pr(D,()=>r(f),le=>_(f,le)),b(X,re)};R(B,X=>{r(d),y(()=>r(d)?.view==="tracks_by_album")?X(z):X(ye,!1)})}ue(()=>J=Ve(H,1,"view-container svelte-1eh2rsb",null,J,{scrollable:r(d)?.view!=="tracks_by_album"})),b(e,H),xt(),i()}var Yv=E('<div class="music-card svelte-1otxnt7"><!> <!></div>'),Qv=E('<div class="music-grid svelte-1otxnt7"></div>'),Wv=E('<div slot="fallback" class="icon-fallback svelte-1otxnt7">ð»</div>'),Kv=E('<div class="status-badge playing svelte-1otxnt7">PLAYING</div>'),Xv=E('<div class="status-badge paused svelte-1otxnt7">PAUSED</div>'),Gv=E('<span class="overlay-icon svelte-1otxnt7"><!></span>'),Zv=E('<div class="card-sub svelte-1otxnt7"> </div>'),Jv=E('<div class="card-badge quality svelte-1otxnt7"> </div>'),ed=E('<div role="button" tabindex="0"><div class="card-img-container svelte-1otxnt7"><!> <div class="play-overlay svelte-1otxnt7"><!></div></div> <div class="card-title svelte-1otxnt7"> </div> <div class="card-sub-row svelte-1otxnt7"><!> <!></div></div>'),td=E('<div class="empty-text svelte-1otxnt7">No stations found</div>'),nd=E('<div class="music-grid svelte-1otxnt7"></div> <!>',1),sd=E('<div class="view-container scrollable svelte-1otxnt7"><div class="content-padded no-bottom-pad svelte-1otxnt7"><div class="search-input-container svelte-1otxnt7"><span class="search-icon svelte-1otxnt7"><!></span> <input type="text" placeholder="Find station..." class="svelte-1otxnt7"/></div></div> <div class="content-padded svelte-1otxnt7"><!></div></div>');function rd(e,n){kt(n,!1);const t=()=>Ee(zn,"$stations",o),s=()=>Ee(gt,"$status",o),a=()=>Ee(Xs,"$isLoadingRadio",o),i=()=>Ee(Wt,"$currentSong",o),[o,l]=qt(),d=T(),c=T();let u=T("");Z(()=>(t(),r(u)),()=>{_(d,t().filter(Y=>{const W=r(u).toLowerCase();return Y.name.toLowerCase().includes(W)||Y.genre&&Y.genre.toLowerCase().includes(W)}))}),Z(()=>s(),()=>{_(c,s().bitrate?`${s().bitrate} kbps`:s().format||"")}),Kt(),St();var h=sd(),f=v(h),p=v(f),k=v(p),S=v(k);se(S,()=>(I(w),y(()=>w.SEARCH)));var m=g(k,2),x=g(f,2),Q=v(x);{var N=Y=>{var W=Qv();Tt(W,4,()=>Array(12),Cn,(j,q)=>{var C=Yv(),fe=v(C);Ot(fe,{width:"100%",style:"aspect-ratio:1; border-radius:12px; margin-bottom:12px;"});var K=g(fe,2);Ot(K,{width:"70%",height:"16px"}),b(j,C)}),b(Y,W)},ne=Y=>{var W=nd(),j=Ce(W);Tt(j,5,()=>r(d),Cn,(fe,K)=>{const L=ut(()=>(r(K),y(()=>r(K).file))),G=ut(()=>(i(),r(K),I(r(L)),y(()=>i().stationName===r(K).name||i().file===r(L)))),oe=ut(()=>(I(fs),r(K),y(()=>fs(r(K)))));var H=ed();let J;var B=v(H),z=v(B);Kn(z,{get src(){return r(oe)},get alt(){return r(K),y(()=>r(K).name)},radius:"8px",$$slots:{fallback:(te,le)=>{var _e=Wv();b(te,_e)}}});var ye=g(z,2),X=v(ye);{var re=te=>{var le=Ze(),_e=Ce(le);{var we=P=>{var ee=Kv();b(P,ee)},O=P=>{var ee=Xv();b(P,ee)};R(_e,P=>{s(),y(()=>s().state==="play")?P(we):P(O,!1)})}b(te,le)},ve=te=>{var le=Gv(),_e=v(le);se(_e,()=>(I(w),y(()=>w.PLAY))),b(te,le)};R(X,te=>{r(G)?te(re):te(ve,!1)})}var M=g(B,2),$=v(M),D=g(M,2),de=v(D);{var be=te=>{var le=Zv(),_e=v(le);ue(()=>ce(_e,(r(K),y(()=>r(K).genre)))),b(te,le)};R(de,te=>{r(K),y(()=>r(K).genre)&&te(be)})}var xe=g(de,2);{var U=te=>{var le=Jv(),_e=v(le);ue(()=>ce(_e,r(c))),At(1,le,()=>vn),b(te,le)};R(xe,te=>{r(G)&&r(c)&&te(U)})}ue(()=>{J=Ve(H,1,"music-card svelte-1otxnt7",null,J,{"is-active":r(G)}),vt(ye,r(G)?"opacity: 1":""),ce($,(r(K),y(()=>r(K).name)))}),A("click",H,()=>_a(r(K))),b(fe,H)});var q=g(j,2);{var C=fe=>{var K=td();b(fe,K)};R(q,fe=>{r(d),t(),y(()=>r(d).length===0&&t().length>0)&&fe(C)})}b(Y,W)};R(Q,Y=>{a()?Y(N):Y(ne,!1)})}pr(m,()=>r(u),Y=>_(u,Y)),At(1,h,()=>vn,()=>({duration:200})),b(e,h),xt(),l()}var ad=E('<button class="clear-icon-btn svelte-m7c4tz"><!></button>'),id=E('<div class="spinner svelte-m7c4tz"></div>'),od=E('<div class="content-padded no-bottom-pad svelte-m7c4tz"><div class="search-input-container svelte-m7c4tz"><span class="search-icon svelte-m7c4tz"><!></span> <input type="text" placeholder="Search playlists &amp; tracks..." class="svelte-m7c4tz"/> <!> <!></div></div>'),ld=E('<span class="meta-tag svelte-m7c4tz">Loading...</span>'),cd=E('<span class="meta-tag svelte-m7c4tz"> </span>'),vd=E('<span class="meta-tag quality svelte-m7c4tz"> </span>'),dd=E('<span class="meta-tag svelte-m7c4tz"> </span> <!> <!>',1),ud=E('<div slot="header" class="content-padded svelte-m7c4tz"><div class="view-header svelte-m7c4tz"><div class="header-art svelte-m7c4tz"><div class="header-icon-wrap svelte-m7c4tz"><!></div></div> <div class="header-info svelte-m7c4tz"><div class="header-text-group svelte-m7c4tz"><div class="header-label svelte-m7c4tz">Playlist</div> <h1 class="header-title svelte-m7c4tz"> </h1> <div class="meta-badges svelte-m7c4tz"><!></div></div> <div class="header-actions svelte-m7c4tz"><button class="btn-primary svelte-m7c4tz"> </button> <button class="btn-secondary svelte-m7c4tz"> </button> <button title="Edit"><!></button></div></div></div></div>'),fd=E('<div slot="row" class="svelte-m7c4tz"><!></div>'),hd=E('<div class="music-card skeleton-card svelte-m7c4tz"><div class="card-img-container svelte-m7c4tz"><!></div> <div style="margin-top: 8px;" class="svelte-m7c4tz"><!></div></div>'),pd=E('<div class="content-padded svelte-m7c4tz"><div class="music-grid playlists-grid-override svelte-m7c4tz"></div></div>'),_d=E('<button class="card-menu-btn svelte-m7c4tz"><!></button>'),gd=E('<div class="music-card svelte-m7c4tz"><div class="card-img-container svelte-m7c4tz"><div class="icon-wrap svelte-m7c4tz"><!></div> <!> <div class="play-overlay svelte-m7c4tz"><span class="overlay-icon svelte-m7c4tz"><!></span></div></div> <div class="card-title svelte-m7c4tz"> </div> <div class="card-sub-row svelte-m7c4tz"><div class="card-sub svelte-m7c4tz"> </div></div></div>'),md=E('<div class="music-grid playlists-grid-override svelte-m7c4tz"><div class="music-card svelte-m7c4tz"><div class="card-img-container dashed-cover svelte-m7c4tz"><div class="icon-wrap svelte-m7c4tz"><!></div></div> <div class="card-title svelte-m7c4tz">New Playlist</div></div> <!></div>'),bd=E('<div class="music-card svelte-m7c4tz"><div class="card-img-container svelte-m7c4tz"><div class="icon-wrap svelte-m7c4tz"><!></div> <div class="play-overlay svelte-m7c4tz"><span class="overlay-icon svelte-m7c4tz"><!></span></div></div> <div class="card-title svelte-m7c4tz"> </div></div>'),yd=E('<div class="header-label section-spacing svelte-m7c4tz">Matched Playlists</div> <div class="music-grid horizontal section-mb svelte-m7c4tz"></div>',1),wd=E('<div class="group-container svelte-m7c4tz"><div class="group-header svelte-m7c4tz"><div class="group-icon svelte-m7c4tz"><!></div> <div class="group-title svelte-m7c4tz"> </div> <div class="group-count svelte-m7c4tz"> </div></div> <div class="group-tracks svelte-m7c4tz"></div></div>'),kd=E('<div class="header-label section-spacing svelte-m7c4tz">Matched Tracks</div> <div class="grouped-results svelte-m7c4tz"></div>',1),xd=E('<div class="empty-text svelte-m7c4tz"> </div>'),Ed=E('<div class="empty-text svelte-m7c4tz" style="opacity: 0.7">Searching tracks in playlists...</div>'),Sd=E("<!> <!> <!>",1),Md=E('<div class="content-padded svelte-m7c4tz"><!></div>'),Td=E("<div><!> <!></div>");function $d(e,n){kt(n,!1);const t=()=>Ee(gt,"$status",h),s=()=>Ee(Wt,"$currentSong",h),a=()=>Ee(Vt,"$navigationStack",h),i=()=>Ee(da,"$playlists",h),o=()=>Ee(Ms,"$activePlaylistTracks",h),l=()=>Ee(Yr,"$isLoadingTracks",h),d=()=>Ee(xc,"$activePlaylistName",h),c=()=>Ee(Bn,"$queue",h),u=()=>Ee(Vr,"$isLoadingPlaylists",h),[h,f]=qt(),p=T(),k=T(),S=T(),m=T(),x=T(),Q=T();let N=T(!1),ne=T(!1),Y=T(!1),W=T(""),j=T(!1),q,C=0,fe=T([]),K=T([]),L=T(""),G=T(""),oe=T("");function H(P){_(W,P.target.value),clearTimeout(q),r(W).length>=2?q=setTimeout(()=>{J(r(W))},600):(_(j,!1),_(fe,[]),_(K,[]))}async function J(P){if(!P)return;C++;const ee=C;_(j,!0);const ie=P.toLowerCase();_(fe,i().filter(F=>F.name.toLowerCase().includes(ie)));let me=[];const he=i().filter(F=>F.name!=="Favorites");for(const F of he){if(ee!==C)break;try{const ke=await Me.send(`listplaylistinfo "${F.name.replace(/"/g,'\\"')}"`),Pe=Qt.parseTracks(ke).map((V,ge)=>({...V,playlistPos:ge})).filter(V=>V.title&&V.title.toLowerCase().includes(ie)||V.artist&&V.artist.toLowerCase().includes(ie));if(Pe.length>0){const V=Pe.map(ge=>({...ge,_uid:Math.random()}));me.push({playlist:F,tracks:V}),_(K,[...me])}}catch(ke){console.warn(`Failed to search in playlist ${F.name}`,ke)}}ee===C&&_(j,!1)}function B(P){r(N)||gr(P)}function z(P){P.deltaY!==0&&(P.currentTarget.scrollLeft+=P.deltaY)}bs(()=>{!r(x)&&i().length===0&&pa()});function ye(P){const ee=P.reduce((me,he)=>me+(parseFloat(he.time)||0),0);if(ee>0){const me=Math.floor(ee/3600),he=Math.floor(ee%3600/60);_(L,me>0?`${me} hr ${he} min`:`${he} min`)}else _(L,"");const ie=new Set;P.forEach(me=>{me.qualityBadge&&ie.add(me.qualityBadge.split(" ")[0])}),_(G,ie.size===1?P[0].qualityBadge:ie.size>1?"Mixed":"")}function X(P){Pn("details",P)}function re(){if(c().length===0){yn({title:"Create Playlist",message:"Queue is empty. Add tracks to queue before saving a playlist.",confirmLabel:"OK",type:"alert"});return}yn({title:"New Playlist",message:"Save current queue as a new playlist:",type:"prompt",placeholder:"Playlist Name",confirmLabel:"Create",onConfirm:P=>{P&&ln.createPlaylistFromQueue(P)}})}function ve(P,ee){ee.name!=="Favorites"&&(P.stopPropagation(),P.preventDefault(),zs(P,null,{type:"playlist-card",playlist:ee}))}function M(){yn({title:"Replace Queue?",message:`This will clear your current queue and play "${r(m).data.name}".`,confirmLabel:"Play",type:"confirm",onConfirm:()=>{_(ne,!0),eo(r(m).data.name,0)}})}function $(){if(o().length>0){const P=r(m).data.name.replace(/"/g,'\\"');or(`load "${P}"`),_(Y,!0),setTimeout(()=>{_(Y,!1)},2e3)}}function D(){_(N,!r(N))}function de(P){const ee=r(m).data.name,ie=o();ie.splice(P,1),Ms.set(ie),Zi(ee,P),ye(ie)}function be(P,ee){Ji(r(m).data.name,P,ee)}Z(()=>t(),()=>{_(p,Number(t().song))}),Z(()=>s(),()=>{_(k,s().file)}),Z(()=>t(),()=>{_(S,t().state==="play")}),Z(()=>a(),()=>{_(m,a()[a().length-1])}),Z(()=>r(m),()=>{_(x,r(m).view==="details")}),Z(()=>(r(m),r(oe)),()=>{const P=JSON.stringify(r(m));P!==r(oe)&&(_(W,""),_(ne,!1),_(Y,!1),_(N,!1),_(fe,[]),_(K,[]),_(j,!1),_(oe,P))}),Z(()=>(r(x),o(),l()),()=>{r(x)&&o().length>0?ye(o()):r(x)&&o().length===0&&!l()&&(_(L,"0 min"),_(G,""))}),Z(()=>(r(x),r(m),d(),tv),()=>{r(x)&&r(m).data&&d()!==r(m).data.name&&Xi(r(m).data.name)}),Z(()=>r(m),()=>{_(Q,r(m)?.data?.name==="Favorites")}),Kt(),St();var xe=Td();let U;var te=v(xe);{var le=P=>{var ee=od(),ie=v(ee),me=v(ie),he=v(me);se(he,()=>(I(w),y(()=>w.SEARCH)));var F=g(me,2),ke=g(F,2);{var Le=V=>{var ge=ad(),ze=v(ge);se(ze,()=>(I(w),y(()=>w.CLOSE))),A("click",ge,()=>{_(W,""),_(fe,[]),_(K,[]),_(j,!1)}),b(V,ge)};R(ke,V=>{r(W)&&V(Le)})}var je=g(ke,2);{var Pe=V=>{var ge=id();b(V,ge)};R(je,V=>{r(j)&&V(Pe)})}ue(()=>ji(F,r(W))),A("input",F,H),b(P,ee)};R(te,P=>{r(x)||P(le)})}var _e=g(te,2);{var we=P=>{mr(P,{get itemsStore(){return Ms},get isLoading(){return l()},get isEditMode(){return r(N)},emptyText:"This playlist is empty.",onMoveItem:be,$$slots:{header:(ee,ie)=>{var me=ud(),he=v(me),F=v(he),ke=v(F),Le=v(ke);se(Le,()=>(r(Q),I(w),y(()=>r(Q)?w.HEART_FILLED:w.PLAYLISTS)));var je=g(F,2),Pe=v(je),V=g(v(Pe),2),ge=v(V),ze=g(V,2),$e=v(ze);{var Te=nt=>{var Ye=ld();b(nt,Ye)},ae=nt=>{var Ye=dd(),st=Ce(Ye),He=v(st),Ge=g(st,2);{var et=ct=>{var rt=cd(),tt=v(rt);ue(()=>ce(tt,r(L))),b(ct,rt)};R(Ge,ct=>{r(L)&&ct(et)})}var ot=g(Ge,2);{var lt=ct=>{var rt=vd(),tt=v(rt);ue(()=>ce(tt,r(G))),b(ct,rt)};R(ot,ct=>{r(G)&&ct(lt)})}ue(()=>ce(He,`${o(),y(()=>o().length)??""} tracks`)),b(nt,Ye)};R($e,nt=>{l()?nt(Te):nt(ae,!1)})}var Ae=g(Pe,2),Re=v(Ae),qe=v(Re),Ie=g(Re,2),Se=v(Ie),Oe=g(Ie,2);let Ke;var Be=v(Oe);se(Be,()=>(r(N),I(w),y(()=>r(N)?w.ACCEPT:w.EDIT))),ue(()=>{vt(F,`background: ${r(Q),r(m),y(()=>r(Q)?"linear-gradient(135deg, hsl(348, 95%, 58%), hsl(348, 90%, 40%))":r(m).data.color||"#333")??""};`),$t(V,"title",(r(m),y(()=>r(m).data.name))),ce(ge,(r(m),y(()=>r(m).data.name))),Re.disabled=r(ne),ce(qe,r(ne)?"Playing...":"Play All"),Ie.disabled=r(Y),ce(Se,r(Y)?"Added":"To Queue"),Ke=Ve(Oe,1,"btn-action svelte-m7c4tz",null,Ke,{active:r(N)})}),A("click",Re,M),A("click",Ie,$),A("click",Oe,D),b(ee,me)},row:(ee,ie)=>{var me=fd();const he=ut(()=>ie.item),F=ut(()=>ie.index),ke=ut(()=>ie.startDrag);var Le=v(me);js(Le,{get track(){return r(he)},get index(){return r(F)},get playingIndex(){return r(p)},get playingFile(){return r(k)},get isPlaying(){return r(S)},get isEditable(){return r(N)},$$events:{play:()=>B(r(he)),remove:()=>de(r(F)),startdrag(...je){r(ke)?.apply(this,je)}}}),b(ee,me)}}})},O=P=>{var ee=Ze(),ie=Ce(ee);{var me=F=>{var ke=pd(),Le=v(ke);Tt(Le,4,()=>Array(8),Cn,(je,Pe)=>{var V=hd(),ge=v(V),ze=v(ge);Ot(ze,{width:"100%",height:"100%",radius:"12px"});var $e=g(ge,2),Te=v($e);Ot(Te,{width:"60%",height:"16px",radius:"4px"}),b(je,V)}),b(F,ke)},he=F=>{var ke=Md(),Le=v(ke);{var je=V=>{var ge=md(),ze=v(ge),$e=v(ze),Te=v($e),ae=v(Te);se(ae,()=>(I(w),y(()=>w.ADD)));var Ae=g(ze,2);Tt(Ae,1,i,Re=>Re.name,(Re,qe)=>{const Ie=ut(()=>(r(qe),y(()=>r(qe).name==="Favorites")));var Se=gd(),Oe=v(Se),Ke=v(Oe),Be=v(Ke);se(Be,()=>(I(r(Ie)),I(w),y(()=>r(Ie)?w.HEART_FILLED:w.PLAYLISTS)));var nt=g(Ke,2);{var Ye=tt=>{var pt=_d(),Xt=v(pt);se(Xt,()=>(I(w),y(()=>w.DOTS))),A("click",pt,Ne=>ve(Ne,r(qe))),b(tt,pt)};R(nt,tt=>{r(Ie)||tt(Ye)})}var st=g(nt,2),He=v(st),Ge=v(He);se(Ge,()=>(I(w),y(()=>w.PLAY)));var et=g(Oe,2),ot=v(et),lt=g(et,2),ct=v(lt),rt=v(ct);Dt(()=>A("click",Se,()=>X(r(qe)))),ia(Se,tt=>ga?.(tt)),Dt(()=>A("longpress",Se,tt=>ve(tt.detail.originalEvent,r(qe)))),Dt(()=>A("contextmenu",Se,tt=>ve(tt,r(qe)))),ue(tt=>{vt(Oe,`background: ${r(qe),y(()=>r(qe).color)??""};`),ce(ot,(r(qe),y(()=>r(qe).name))),ce(rt,tt)},[()=>(r(qe),y(()=>r(qe).lastModified?new Date(r(qe).lastModified).toLocaleDateString():"Playlist"))]),b(Re,Se)}),A("click",ze,re),b(V,ge)},Pe=V=>{var ge=Sd(),ze=Ce(ge);{var $e=Ie=>{var Se=yd(),Oe=g(Ce(Se),2);Tt(Oe,5,()=>r(fe),Ke=>Ke.name,(Ke,Be)=>{const nt=ut(()=>(r(Be),y(()=>r(Be).name==="Favorites")));var Ye=bd(),st=v(Ye),He=v(st),Ge=v(He);se(Ge,()=>(I(r(nt)),I(w),y(()=>r(nt)?w.HEART_FILLED:w.PLAYLISTS)));var et=g(He,2),ot=v(et),lt=v(ot);se(lt,()=>(I(w),y(()=>w.PLAY)));var ct=g(st,2),rt=v(ct);ue(()=>{vt(st,`background: ${r(Be),y(()=>r(Be).color)??""}; aspect-ratio: 1;`),ce(rt,(r(Be),y(()=>r(Be).name)))}),A("click",Ye,()=>X(r(Be))),b(Ke,Ye)}),A("wheel",Oe,z),b(Ie,Se)};R(ze,Ie=>{r(fe),y(()=>r(fe).length>0)&&Ie($e)})}var Te=g(ze,2);{var ae=Ie=>{var Se=kd(),Oe=g(Ce(Se),2);Tt(Oe,5,()=>r(K),Ke=>Ke.playlist.name,(Ke,Be)=>{var nt=wd(),Ye=v(nt),st=v(Ye),He=v(st);se(He,()=>(I(w),y(()=>w.PLAYLISTS)));var Ge=g(st,2),et=v(Ge),ot=g(Ge,2),lt=v(ot),ct=g(Ye,2);Tt(ct,5,()=>(r(Be),y(()=>r(Be).tracks)),rt=>rt._uid,(rt,tt)=>{js(rt,{get track(){return r(tt)},get index(){return r(tt),y(()=>r(tt).playlistPos)},get playingFile(){return r(k)},get isPlaying(){return r(S)},$$events:{play:()=>B(r(tt))}})}),ue(()=>{ce(et,(r(Be),y(()=>r(Be).playlist.name))),ce(lt,(r(Be),y(()=>r(Be).tracks.length)))}),A("click",Ye,()=>X(r(Be).playlist)),b(Ke,nt)}),b(Ie,Se)};R(Te,Ie=>{r(K),y(()=>r(K).length>0)&&Ie(ae)})}var Ae=g(Te,2);{var Re=Ie=>{var Se=xd(),Oe=v(Se);ue(()=>ce(Oe,`No matches found for "${r(W)??""}"`)),b(Ie,Se)},qe=Ie=>{var Se=Ze(),Oe=Ce(Se);{var Ke=Be=>{var nt=Ed();b(Be,nt)};R(Oe,Be=>{r(j),r(K),y(()=>r(j)&&r(K).length===0)&&Be(Ke)},!0)}b(Ie,Se)};R(Ae,Ie=>{r(j),r(fe),r(K),y(()=>!r(j)&&r(fe).length===0&&r(K).length===0)?Ie(Re):Ie(qe,!1)})}b(V,ge)};R(Le,V=>{r(W)?V(Pe,!1):V(je)})}b(F,ke)};R(ie,F=>{u()?F(me):F(he,!1)},!0)}b(P,ee)};R(_e,P=>{r(x)?P(we):P(O,!1)})}ue(()=>U=Ve(xe,1,"view-container svelte-m7c4tz",null,U,{scrollable:!r(x)})),b(e,xe),xt(),f()}var Ad=E('<button class="clear-icon-btn svelte-1d3z1zm"><!></button>'),Pd=E('<div class="spinner svelte-1d3z1zm"></div>'),Cd=E('<div class="placeholder-state svelte-1d3z1zm"><div class="placeholder-icon svelte-1d3z1zm">ð</div> <p class="svelte-1d3z1zm">Type to search your library</p></div>'),Ld=E('<div class="empty-text svelte-1d3z1zm"> </div>'),zd=E('<div slot="fallback" class="icon-fallback svelte-1d3z1zm">ð¿</div>'),Rd=E('<div class="meta-tag svelte-1d3z1zm"> </div>'),Id=E('<div class="meta-tag quality svelte-1d3z1zm"> </div>'),Nd=E('<div class="music-card svelte-1d3z1zm"><div class="card-img-container svelte-1d3z1zm"><!> <div class="play-overlay svelte-1d3z1zm"><span class="overlay-icon svelte-1d3z1zm"><!></span></div></div> <div class="card-title svelte-1d3z1zm"> </div> <div class="card-sub-row svelte-1d3z1zm"><div class="card-sub text-ellipsis svelte-1d3z1zm"> </div> <!> <!></div></div>'),jd=E('<div class="header-label section-spacing svelte-1d3z1zm">Albums</div> <div class="music-grid horizontal section-mb svelte-1d3z1zm"></div>',1),Od=E('<div class="header-label svelte-1d3z1zm">Tracks</div>'),Dd=E("<!> <!>",1),Fd=E('<div slot="header" class="content-padded svelte-1d3z1zm"><!></div>'),qd=E('<div slot="row" class="svelte-1d3z1zm"><!></div>'),Bd=E('<div class="view-container svelte-1d3z1zm"><div class="content-padded no-bottom-pad svelte-1d3z1zm"><div class="search-input-container svelte-1d3z1zm"><span class="search-icon svelte-1d3z1zm"><!></span> <input type="text" placeholder="Artists, songs, or albums" autoFocus class="svelte-1d3z1zm"/> <!> <!></div></div> <!></div>');function Ud(e,n){kt(n,!1);const t=()=>Ee(Ts,"$searchQuery",a),s=()=>Ee(o,"$tracksStore",a),[a,i]=qt(),o=Ue([]);let l=T([]),d=T(!1),c,u=T(!1);bs(()=>{t().length>=2&&p(t())});function h(L){Ts.set(L.target.value),clearTimeout(c),c=setTimeout(()=>{p(t())},300)}function f(){Ts.set(""),o.set([]),_(l,[]),_(u,!1)}async function p(L){const G=L.trim().toLowerCase();if(G.length<2){o.set([]),_(l,[]),_(u,!1);return}_(d,!0),_(u,!0);try{const oe=await Tn.search(G),H=oe.map((B,z)=>({...B,_uid:B.file?`${B.file}-${z}`:`search-${z}`}));o.set(H);const J=new Map;oe.forEach(B=>{const z=B.album;if(z&&!J.has(z)){const ye=z.toLowerCase().includes(G),X=B.artist&&B.artist.toLowerCase().includes(G);if(ye||X){let re=String(B.year||"");re.length>4&&(re=re.substring(0,4)),J.set(z,{name:z,artist:B.artist,file:B.file,thumbHash:B.thumbHash,_uid:`alb-${z}`,year:re,qualityBadge:B.qualityBadge})}}}),_(l,Array.from(J.values()))}finally{_(d,!1)}}function k(L){gr(L)}function S(L){Pn("tracks_by_album",{name:L.name,artist:L.artist})}function m(L){L.deltaY!==0&&(L.currentTarget.scrollLeft+=L.deltaY)}St();var x=Bd(),Q=v(x),N=v(Q),ne=v(N),Y=v(ne);se(Y,()=>w.SEARCH);var W=g(ne,2),j=g(W,2);{var q=L=>{var G=Ad(),oe=v(G);se(oe,()=>w.CLOSE),A("click",G,f),b(L,G)};R(j,L=>{t().length>0&&L(q)})}var C=g(j,2);{var fe=L=>{var G=Pd();b(L,G)};R(C,L=>{r(d)&&L(fe)})}var K=g(Q,2);mr(K,{get itemsStore(){return o},isEditMode:!1,isLoading:!1,emptyText:"",$$slots:{header:(L,G)=>{var oe=Fd(),H=v(oe);{var J=z=>{var ye=Cd();b(z,ye)},B=z=>{var ye=Ze(),X=Ce(ye);{var re=M=>{var $=Ld(),D=v($);ue(()=>ce(D,`No results found for "${t()??""}"`)),b(M,$)},ve=M=>{var $=Dd(),D=Ce($);{var de=U=>{var te=jd(),le=g(Ce(te),2);Tt(le,5,()=>r(l),_e=>_e._uid,(_e,we)=>{var O=Nd(),P=v(O),ee=v(P);{let Te=ut(()=>Rs(r(we),"md"));Kn(ee,{get src(){return r(Te)},get alt(){return r(we).name},radius:"8px",$$slots:{fallback:(ae,Ae)=>{var Re=zd();b(ae,Re)}}})}var ie=g(ee,2),me=v(ie),he=v(me);se(he,()=>w.PLAY);var F=g(P,2),ke=v(F),Le=g(F,2),je=v(Le),Pe=v(je),V=g(je,2);{var ge=Te=>{var ae=Rd(),Ae=v(ae);ue(()=>ce(Ae,r(we).year)),b(Te,ae)};R(V,Te=>{r(we).year&&r(we).year!=="0"&&r(we).year!==0&&Te(ge)})}var ze=g(V,2);{var $e=Te=>{var ae=Id(),Ae=v(ae);ue(Re=>ce(Ae,Re),[()=>r(we).qualityBadge.split(" ")[0]]),b(Te,ae)};R(ze,Te=>{r(we).qualityBadge&&Te($e)})}ue(()=>{$t(F,"title",r(we).name),ce(ke,r(we).name),ce(Pe,r(we).artist)}),A("click",O,()=>S(r(we))),b(_e,O)}),A("wheel",le,m),b(U,te)};R(D,U=>{r(l).length>0&&U(de)})}var be=g(D,2);{var xe=U=>{var te=Od();b(U,te)};R(be,U=>{s().length>0&&U(xe)})}b(M,$)};R(X,M=>{!r(d)&&s().length===0&&r(l).length===0&&r(u)?M(re):M(ve,!1)},!0)}b(z,ye)};R(H,z=>{t().length<2?z(J):z(B,!1)})}b(L,oe)},row:(L,G)=>{var oe=qd();const H=ut(()=>G.item),J=ut(()=>G.index);var B=v(oe);js(B,{get track(){return r(H)},get index(){return r(J)},isEditable:!1,$$events:{play:()=>k(r(H))}}),b(L,oe)}}}),ue(()=>ji(W,t())),A("input",W,h),b(e,x),xt(),i()}var Hd=E('<div class="view-container scrollable svelte-1j67jqh"><div class="content-padded svelte-1j67jqh"><h1 class="header-title big svelte-1j67jqh">Settings</h1> <div class="section svelte-1j67jqh"><div class="section-header svelte-1j67jqh"><span class="icon-svg svelte-1j67jqh"><!></span> <span class="svelte-1j67jqh">Connection</span></div> <div class="card svelte-1j67jqh"><div class="row svelte-1j67jqh"><label for="ip" class="svelte-1j67jqh">Moode Device IP</label> <div class="input-group svelte-1j67jqh"><input id="ip" type="text" placeholder="192.168.x.x" class="svelte-1j67jqh"/> <button class="btn-primary small svelte-1j67jqh">Save</button></div></div> <p class="hint svelte-1j67jqh"> </p></div></div> <div class="section svelte-1j67jqh"><div class="section-header svelte-1j67jqh"><span class="svelte-1j67jqh">Alarm Clock</span></div> <div class="card clickable svelte-1j67jqh"><div class="row space-between svelte-1j67jqh"><span class="svelte-1j67jqh">Wake up time</span> <span class="value svelte-1j67jqh">Coming Soon</span></div></div></div> <div class="section svelte-1j67jqh"><div class="section-header svelte-1j67jqh"><span class="svelte-1j67jqh">Appearance</span></div> <div class="card clickable svelte-1j67jqh"><div class="row space-between svelte-1j67jqh"><span class="svelte-1j67jqh">Theme</span> <span class="value svelte-1j67jqh">Dark (Default)</span></div></div></div> <div class="section svelte-1j67jqh"><div class="section-header svelte-1j67jqh"><span class="svelte-1j67jqh">Language</span></div> <div class="card clickable svelte-1j67jqh"><div class="row space-between svelte-1j67jqh"><span class="svelte-1j67jqh">Interface Language</span> <span class="value svelte-1j67jqh">English</span></div></div></div> <div class="section svelte-1j67jqh"><div class="section-header svelte-1j67jqh"><span class="svelte-1j67jqh">About</span></div> <div class="card svelte-1j67jqh"><div class="info-row svelte-1j67jqh"><span class="svelte-1j67jqh">Version</span> <span class="mono svelte-1j67jqh"> </span></div> <div class="separator svelte-1j67jqh"></div> <div class="info-row svelte-1j67jqh"><span class="svelte-1j67jqh">Build Date</span> <span class="mono small svelte-1j67jqh"> </span></div> <div class="separator svelte-1j67jqh"></div> <div class="info-row svelte-1j67jqh"><span class="svelte-1j67jqh">Developer</span> <span class="svelte-1j67jqh">Moode WaveUI</span></div></div></div></div></div>');function Vd(e,n){kt(n,!1);let t=T(ls.MOODE_IP);function s(){ls.setMoodeIp(r(t)),Fe("IP Saved. Reloading...","success"),setTimeout(()=>location.reload(),1e3)}const a="0.0.1",i="2026-01-08T15:38:35.472Z",o=new Date(i).toLocaleString();function l(){Fe("Coming soon in next update","info")}St();var d=Hd(),c=v(d),u=g(v(c),2),h=v(u),f=v(h),p=v(f);se(p,()=>w.SETTINGS||w.MENU);var k=g(h,2),S=v(k),m=g(v(S),2),x=v(m),Q=g(x,2),N=g(S,2),ne=v(N),Y=g(u,2),W=g(v(Y),2),j=g(Y,2),q=g(v(j),2),C=g(j,2),fe=g(v(C),2),K=g(C,2),L=g(v(K),2),G=v(L),oe=g(v(G),2),H=v(oe),J=g(G,4),B=g(v(J),2),z=v(B);ue(()=>{ce(ne,`Current: ${ls.MOODE_IP??""}`),ce(H,a),ce(z,o)}),pr(x,()=>r(t),ye=>_(t,ye)),A("click",Q,s),A("click",W,l),A("click",q,l),A("click",fe,l),At(1,d,()=>vn,()=>({duration:200})),b(e,d),xt()}var Yd=E('<span class="meta-tag svelte-185fgrr"> </span>'),Qd=E('<div slot="header" class="content-padded svelte-185fgrr"><div class="view-header svelte-185fgrr"><div class="header-art svelte-185fgrr" style="background: var(--c-surface-active);"><div class="header-icon-wrap svelte-185fgrr"><!></div></div> <div class="header-info svelte-185fgrr"><div class="header-text-group svelte-185fgrr"><div class="header-label svelte-185fgrr">Now Playing</div> <h1 class="header-title svelte-185fgrr">Current Queue</h1> <div class="meta-badges svelte-185fgrr"><span class="meta-tag svelte-185fgrr"> </span> <!></div></div> <div class="header-actions svelte-185fgrr"><button class="btn-secondary svelte-185fgrr" title="Clear Queue">Clear</button> <button class="btn-action svelte-185fgrr" title="Save Queue"><!></button> <button><!></button></div></div></div></div>'),Wd=E('<div slot="row" class="svelte-185fgrr"><!></div>'),Kd=E('<div class="view-container svelte-185fgrr"><!></div>');function Xd(e,n){kt(n,!1);const t=()=>Ee(gt,"$status",o),s=()=>Ee(ht,"$isQueueLocked",o),a=()=>Ee(Wt,"$currentSong",o),i=()=>Ee(Bn,"$queue",o),[o,l]=qt(),d=T(),c=T(),u=T(),h=T();let f=T(!1),p=T(""),k=T(-1);function S(){_(f,!r(f))}function m(j){r(f)||or(`play ${j}`)}function x(j){j<r(k)&&_(k,r(k)-1),en.removeFromQueue(j)}async function Q(){yn({title:"Save Playlist",message:"Enter a name for this playlist:",type:"prompt",placeholder:"Playlist Name",confirmLabel:"Save",onConfirm:async j=>{j&&j.trim().length>0&&(await en.saveQueue(j),pa())}})}function N(){i().length!==0&&yn({title:"Clear Queue",message:"Are you sure you want to clear the entire play queue?",confirmLabel:"Clear All",type:"confirm",onConfirm:async()=>{Bn.set([]),Wt.set({title:"Not Playing",artist:"",album:"",file:"",stationName:null,id:null,pos:null}),gt.update(j=>({...j,state:"stop",song:-1,songid:-1,elapsed:0})),await or("clear")}})}function ne(j,q){let C=r(k);j===C?C=q:j<C&&q>=C?C-=1:j>C&&q<=C&&(C+=1),_(k,C),en.moveTrack(j,q)}Z(()=>t(),()=>{_(d,Number(t().song))}),Z(()=>(s(),r(d)),()=>{s()||_(k,r(d))}),Z(()=>r(k),()=>{_(c,r(k))}),Z(()=>a(),()=>{_(u,a().file)}),Z(()=>t(),()=>{_(h,t().state==="play")}),Z(()=>i(),()=>{if(i().length>=0){const j=i().reduce((q,C)=>q+(parseFloat(C.time)||0),0);if(j>0){const q=Math.floor(j/3600),C=Math.floor(j%3600/60);q>0?_(p,`${q} hr ${C} min`):_(p,`${C} min`)}else _(p,"")}}),Kt(),St();var Y=Kd(),W=v(Y);mr(W,{get itemsStore(){return Bn},get isEditMode(){return r(f)},emptyText:"Queue is empty",onMoveItem:ne,$$slots:{header:(j,q)=>{var C=Qd(),fe=v(C),K=v(fe),L=v(K),G=v(L);se(G,()=>(I(w),y(()=>w.MENU)));var oe=g(K,2),H=v(oe),J=g(v(H),4),B=v(J),z=v(B),ye=g(B,2);{var X=xe=>{var U=Yd(),te=v(U);ue(()=>ce(te,r(p))),b(xe,U)};R(ye,xe=>{r(p)&&xe(X)})}var re=g(H,2),ve=v(re),M=g(ve,2),$=v(M);se($,()=>(I(w),y(()=>w.SAVE)));var D=g(M,2);let de;var be=v(D);se(be,()=>(r(f),I(w),y(()=>r(f)?w.ACCEPT:w.EDIT))),ue(()=>{ce(z,`${i(),y(()=>i().length)??""} tracks`),ve.disabled=(i(),y(()=>i().length===0)),M.disabled=(i(),y(()=>i().length===0)),de=Ve(D,1,"btn-action svelte-185fgrr",null,de,{active:r(f)}),$t(D,"title",r(f)?"Finish Editing":"Edit Queue"),D.disabled=(i(),y(()=>i().length===0))}),A("click",ve,N),A("click",M,Q),A("click",D,S),b(j,C)},row:(j,q)=>{var C=Wd();const fe=ut(()=>q.item),K=ut(()=>q.index),L=ut(()=>q.startDrag);var G=v(C);js(G,{get track(){return r(fe)},get index(){return r(K)},get playingIndex(){return r(c)},get playingFile(){return r(u)},get isPlaying(){return r(h)},get isEditable(){return r(f)},$$events:{play:()=>m(r(K)),remove:()=>x(r(K)),startdrag(...oe){r(L)?.apply(this,oe)}}}),b(j,C)}}}),b(e,Y),xt(),l()}var Gd=E('<div class="knob svelte-1jla3sy"></div>'),Zd=E('<div class="tooltip current svelte-1jla3sy"> </div> <span></span>',1),Jd=E('<div slot="fallback" class="icon-fallback svelte-1jla3sy"><!></div>'),eu=E('<span class="meta-tag quality"> </span>'),tu=E('<div class="dot svelte-1jla3sy"></div>'),nu=E("<button><!> <!></button>"),su=E('<div class="dock svelte-1jla3sy"><div class="progress-shadow svelte-1jla3sy"></div> <div><div class="rail svelte-1jla3sy"></div> <div class="fill svelte-1jla3sy"><!></div> <!></div> <div class="grid svelte-1jla3sy"><div class="info svelte-1jla3sy"><div class="art svelte-1jla3sy"><!></div> <div class="meta svelte-1jla3sy"><div class="title-row svelte-1jla3sy"><div class="title text-ellipsis svelte-1jla3sy"> </div> <button class="btn-icon tiny-dots svelte-1jla3sy"><!></button></div> <div class="artist-row svelte-1jla3sy"><div class="artist text-ellipsis svelte-1jla3sy"> </div> <!></div></div></div> <div class="controls svelte-1jla3sy"><button><!></button> <button class="btn-icon"><!></button> <button class="play-btn flex-center svelte-1jla3sy"><!></button> <button class="btn-icon"><!></button> <!></div> <div class="volume desktop svelte-1jla3sy"><div class="vol-icon svelte-1jla3sy"><!></div> <div class="custom-slider svelte-1jla3sy"><div class="slider-bg svelte-1jla3sy"><div class="slider-fill svelte-1jla3sy"></div> <div class="slider-knob svelte-1jla3sy"></div></div></div></div></div></div>');function ru(e,n){kt(n,!1);const t=()=>Ee(gt,"$status",l),s=()=>Ee(Wt,"$currentSong",l),a=()=>Ee(Mn,"$favorites",l),i=()=>Ee(zn,"$stations",l),o=()=>Ee(ar,"$isFullPlayerOpen",l),[l,d]=qt(),c=T(),u=T(),h=T(),f=T(),p=T(),k=T(),S=T(),m=T(),x=T(),Q=T(),N=T(),ne=T();let Y=T(!1),W=T(!1),j=!1,q=T(0),C=T(),fe=T();const K=$=>D=>{D.stopPropagation(),$()};function L($){if(isNaN($)||$===null)return"0:00";const D=Math.floor($/60),de=Math.floor($%60);return`${D}:${de<10?"0":""}${de}`}function G($,D){const de=D.getBoundingClientRect();return Math.max(0,Math.min(1,($.clientX-de.left)/de.width))}function oe($){r(f)||(_(W,!0),_(q,G($,r(C))),window.addEventListener("mousemove",H),window.addEventListener("mouseup",J))}function H($){if(r(W)&&_(q,G($,r(C))),j){const D=Math.round(G($,r(fe))*100);Is(D)}}function J(){r(W)&&!r(f)&&ha(r(q)*r(c)),_(W,!1),j=!1,window.removeEventListener("mousemove",H),window.removeEventListener("mouseup",J)}function B($){j=!0;const D=Math.round(G($,r(fe))*100);Is(D),window.addEventListener("mousemove",H),window.addEventListener("mouseup",J)}function z(){const $=(r(ne)+1)%3;$===0?(t().random&&Un(),t().repeat&&Hn()):$===1?(t().random||Un(),t().repeat&&Hn()):$===2&&(t().random&&Un(),t().repeat||Hn())}function ye($){$.stopPropagation(),zs($,s(),{type:"general",source:"miniplayer"})}function X($){zs($.detail.originalEvent,s(),{type:"general",source:"miniplayer"})}Z(()=>t(),()=>{_(c,t().duration>0?t().duration:1)}),Z(()=>t(),()=>{_(u,t().elapsed||0)}),Z(()=>t(),()=>{_(h,t().state==="play")}),Z(()=>s(),()=>{_(f,s().file?.startsWith("http"))}),Z(()=>s(),()=>{_(p,s().title||"Not Playing")}),Z(()=>s(),()=>{_(k,s().stationName||s().artist||"Moode")}),Z(()=>(s(),a()),()=>{_(S,s().file&&a().has(s().file))}),Z(()=>(s(),i()),()=>{_(m,hs(s(),i(),s().stationName))}),Z(()=>(r(f),r(W),r(q),r(u),r(c)),()=>{_(x,r(f)?0:r(W)?r(q)*100:r(u)/r(c)*100)}),Z(()=>(r(h),r(W),r(f)),()=>{_(Q,r(h)&&!r(W)&&!r(f))}),Z(()=>t(),()=>{_(N,t().bitrate?`${t().bitrate} kbps`:t().format||"")}),Z(()=>t(),()=>{_(ne,t().repeat?2:t().random?1:0)}),Kt(),St();var re=Ze(),ve=Ce(re);{var M=$=>{var D=su(),de=v(D),be=g(de,2);let xe;var U=g(v(be),2),te=v(U);{var le=Ne=>{var mt=Gd();b(Ne,mt)};R(te,Ne=>{r(f)||Ne(le)})}var _e=g(U,2);{var we=Ne=>{var mt=Zd(),pe=Ce(mt),De=v(pe);ue(ft=>{vt(pe,`left: ${r(x)??""}%`),ce(De,ft)},[()=>(r(W),r(q),r(c),r(u),y(()=>r(W)?L(r(q)*r(c)):L(r(u))))]),b(Ne,mt)};R(_e,Ne=>{(r(Y)||r(W))&&!r(f)&&Ne(we)})}Ln(be,Ne=>_(C,Ne),()=>r(C));var O=g(be,2),P=v(O),ee=v(P),ie=v(ee);Kn(ie,{get src(){return r(m)},alt:"art",radius:"4px",$$slots:{fallback:(Ne,mt)=>{var pe=Jd(),De=v(pe);se(De,()=>(r(f),I(w),y(()=>r(f)?w.RADIO:w.ALBUMS))),b(Ne,pe)}}});var me=g(ee,2),he=v(me),F=v(he),ke=v(F),Le=g(F,2),je=v(Le);se(je,()=>(I(w),y(()=>w.DOTS)));var Pe=g(he,2),V=v(Pe),ge=v(V),ze=g(V,2);{var $e=Ne=>{var mt=eu(),pe=v(mt);ue(()=>ce(pe,r(N))),b(Ne,mt)};R(ze,Ne=>{r(N)&&Ne($e)})}var Te=g(P,2),ae=v(Te),Ae=ys(()=>K(()=>ln.toggleFavorite(s())));let Re;var qe=v(ae);se(qe,()=>(r(S),I(w),y(()=>r(S)?w.HEART_FILLED:w.HEART)));var Ie=g(ae,2),Se=ys(()=>K(()=>Ns("previous"))),Oe=v(Ie);se(Oe,()=>(I(w),y(()=>w.PREVIOUS)));var Ke=g(Ie,2),Be=ys(()=>K(_r)),nt=v(Ke);se(nt,()=>(t(),I(w),y(()=>t().state==="play"?w.PAUSE:w.PLAY)));var Ye=g(Ke,2),st=ys(()=>K(()=>Ns("next"))),He=v(Ye);se(He,()=>(I(w),y(()=>w.NEXT)));var Ge=g(Ye,2);{var et=Ne=>{var mt=nu(),pe=ys(()=>K(z));let De;var ft=v(mt);{var sn=Pt=>{var _t=Ze(),Gt=Ce(_t);se(Gt,()=>(I(w),y(()=>w.REPEAT))),b(Pt,_t)},br=Pt=>{var _t=Ze(),Gt=Ce(_t);se(Gt,()=>(I(w),y(()=>w.SHUFFLE))),b(Pt,_t)};R(ft,Pt=>{r(ne)===2?Pt(sn):Pt(br,!1)})}var yr=g(ft,2);{var wr=Pt=>{var _t=tu();b(Pt,_t)};R(yr,Pt=>{r(ne)>0&&Pt(wr)})}ue(()=>De=Ve(mt,1,"btn-icon desktop mode-btn svelte-1jla3sy",null,De,{active:r(ne)>0})),A("click",mt,function(...Pt){r(pe)?.apply(this,Pt)}),b(Ne,mt)};R(Ge,Ne=>{r(f)||Ne(et)})}var ot=g(Te,2),lt=v(ot),ct=v(lt);se(ct,()=>(I(w),y(()=>w.VOLUME)));var rt=g(lt,2),tt=v(rt),pt=v(tt),Xt=g(pt,2);Ln(rt,Ne=>_(fe,Ne),()=>r(fe)),Dt(()=>A("click",D,()=>ar.set(!0))),ia(D,(Ne,mt)=>ga?.(Ne,mt),()=>500),Dt(()=>A("longpress",D,X)),ue(()=>{vt(de,`width: ${r(x)??""}%; transition: ${r(Q)?"width 0.25s linear":"none"}`),xe=Ve(be,1,"progress-bar svelte-1jla3sy",null,xe,{radio:r(f)}),vt(U,`width: ${r(x)??""}%; transition: ${r(Q)?"width 0.25s linear":"none"}`),$t(F,"title",r(p)),ce(ke,r(p)),$t(V,"title",r(k)),ce(ge,r(k)),Re=Ve(ae,1,"btn-icon desktop svelte-1jla3sy",null,Re,{liked:r(S)}),vt(pt,`width: ${t(),y(()=>t().volume)??""}%`),vt(Xt,`left: ${t(),y(()=>t().volume)??""}%`)}),A("mouseenter",be,()=>_(Y,!0)),A("mouseleave",be,()=>_(Y,!1)),A("mousedown",be,Jt(oe)),A("click",be,Jt(function(Ne){Ls.call(this,n,Ne)})),A("click",Le,ye),A("click",ae,function(...Ne){r(Ae)?.apply(this,Ne)}),A("click",Ie,function(...Ne){r(Se)?.apply(this,Ne)}),A("click",Ke,function(...Ne){r(Be)?.apply(this,Ne)}),A("click",Ye,function(...Ne){r(st)?.apply(this,Ne)}),A("mousedown",rt,Jt(B)),A("click",rt,Jt(function(Ne){Ls.call(this,n,Ne)})),b($,D)};R(ve,$=>{o()||$(M)})}b(e,re),xt(),d()}var au=E('<div class="drag-zone svelte-1olwzt8"><div class="drag-handle-icon svelte-1olwzt8"><!></div></div>'),iu=E('<div slot="fallback" class="icon-fallback svelte-1olwzt8"><!></div>'),ou=E('<span class="meta-tag quality"> </span>'),lu=E('<span class="dot svelte-1olwzt8"></span>'),cu=E("<button><!> <!></button>"),vu=E('<div style="width: 44px;"></div>'),du=E('<div><!> <div class="bg-container svelte-1olwzt8"><div class="bg-gradient-fallback svelte-1olwzt8"></div> <img class="bg-img svelte-1olwzt8" alt="" loading="eager"/> <div class="bg-overlay svelte-1olwzt8"></div></div> <div class="player-body svelte-1olwzt8"><div class="art-container svelte-1olwzt8"><div class="artwork svelte-1olwzt8"><!></div></div> <div class="controls-area svelte-1olwzt8"><div class="meta svelte-1olwzt8"><h1 class="title text-ellipsis svelte-1olwzt8"> </h1> <div class="artist-row svelte-1olwzt8"><h2 class="artist text-ellipsis svelte-1olwzt8"> </h2> <!></div></div> <div class="progress-section"><div><div class="common-track svelte-1olwzt8"><div class="common-fill svelte-1olwzt8"><div class="common-knob svelte-1olwzt8"></div></div></div></div> <div class="time-row svelte-1olwzt8"><span> </span> <span> </span></div></div> <div class="buttons-row svelte-1olwzt8"><button><!></button> <button class="btn-icon side-btn svelte-1olwzt8"><!></button> <button class="play-btn-large flex-center svelte-1olwzt8"><!></button> <button class="btn-icon side-btn svelte-1olwzt8"><!></button> <!></div> <div class="volume-row svelte-1olwzt8"><div class="vol-icon svelte-1olwzt8"><!></div> <div class="volume-hit-area svelte-1olwzt8"><div class="common-track svelte-1olwzt8"><div class="common-fill svelte-1olwzt8"></div> <div class="common-knob svelte-1olwzt8"></div></div></div></div></div></div></div>');function Xa(e,n){kt(n,!1);const t=()=>Ee(Wt,"$currentSong",o),s=()=>Ee(zn,"$stations",o),a=()=>Ee(gt,"$status",o),i=()=>Ee(Mn,"$favorites",o),[o,l]=qt(),d=T(),c=T(),u=T(),h=T(),f=T(),p=T(),k=T(),S=T(),m=T(),x=T(),Q=T();let N=dt(n,"isDocked",8,!1),ne=0,Y=T(0),W=T(!1);function j(){ar.set(!1)}function q(pe){if(N())return;const De=pe.target;De.closest(".bar-hit-area")||De.closest(".volume-hit-area")||(ne=pe.touches[0].clientY,_(W,!0))}function C(pe){if(!r(W)||N())return;const De=pe.touches[0].clientY-ne;De>0&&(pe.cancelable&&De>10&&pe.preventDefault(),_(Y,De))}function fe(){N()||(_(W,!1),r(Y)>150?j():_(Y,0))}let K=T(!1),L=T(0),G=T();function oe(pe){const De=Math.floor(pe/60)||0,ft=Math.floor(pe%60)||0;return`${De}:${ft.toString().padStart(2,"0")}`}function H(pe,De){const ft=De.getBoundingClientRect(),sn=pe.touches?pe.touches[0].clientX:pe.clientX;return Math.max(0,Math.min(1,(sn-ft.left)/ft.width))}function J(pe){r(h)||(_(K,!0),_(L,H(pe,r(G))))}function B(pe){r(K)&&_(L,H(pe,r(G)))}function z(){r(K)&&!r(h)&&ha(r(L)*r(c)),_(K,!1)}let ye=!1,X=T();function re(pe){ye=!0;const De=Math.round(H(pe,r(X))*100);Is(De),window.addEventListener("mousemove",ve),window.addEventListener("mouseup",M),window.addEventListener("touchmove",ve,{passive:!1}),window.addEventListener("touchend",M)}function ve(pe){if(ye){pe.preventDefault();const De=Math.round(H(pe,r(X))*100);Is(De)}}function M(){ye=!1,window.removeEventListener("mousemove",ve),window.removeEventListener("mouseup",M),window.removeEventListener("touchmove",ve),window.removeEventListener("touchend",M)}function $(){const pe=(r(S)+1)%3;pe===0?(a().random&&Un(),a().repeat&&Hn()):pe===1?(a().random||Un(),a().repeat&&Hn()):pe===2&&(a().random&&Un(),a().repeat||Hn())}Z(()=>(t(),s()),()=>{_(d,hs(t(),s(),t().stationName))}),Z(()=>a(),()=>{_(c,a().duration||1)}),Z(()=>a(),()=>{_(u,a().elapsed||0)}),Z(()=>t(),()=>{_(h,t().file?.startsWith("http"))}),Z(()=>a(),()=>{_(f,a().state==="play")}),Z(()=>(r(f),r(K),r(h)),()=>{_(p,r(f)&&!r(K)&&!r(h))}),Z(()=>(r(h),r(K),r(L),r(u),r(c)),()=>{_(k,r(h)?0:r(K)?r(L)*100:r(u)/r(c)*100)}),Z(()=>a(),()=>{_(S,a().repeat?2:a().random?1:0)}),Z(()=>a(),()=>{_(m,a().bitrate?`${a().bitrate} kbps`:a().format||"")}),Z(()=>(t(),i()),()=>{_(x,t().file&&i().has(t().file))}),Z(()=>I(N()),()=>{_(Q,N()?"8px":"var(--radius-xl)")}),Kt(),St();var D=du();let de;var be=v(D);{var xe=pe=>{var De=au(),ft=v(De),sn=v(ft);se(sn,()=>(I(w),y(()=>w.CHEVRON_DOWN))),A("touchstart",De,q),A("touchmove",De,C),A("touchend",De,fe),A("click",De,j),b(pe,De)};R(be,pe=>{N()||pe(xe)})}var U=g(be,2),te=g(v(U),2),le=g(U,2),_e=v(le),we=v(_e),O=v(we);Kn(O,{get src(){return r(d)},alt:"Cover",get radius(){return r(Q)},$$slots:{fallback:(pe,De)=>{var ft=iu(),sn=v(ft);se(sn,()=>(r(h),I(w),y(()=>r(h)?w.RADIO:w.ALBUMS))),b(pe,ft)}}});var P=g(_e,2),ee=v(P),ie=v(ee),me=v(ie),he=g(ie,2),F=v(he),ke=v(F),Le=g(F,2);{var je=pe=>{var De=ou(),ft=v(De);ue(()=>ce(ft,r(m))),b(pe,De)};R(Le,pe=>{r(m)&&pe(je)})}var Pe=g(ee,2),V=v(Pe);let ge;var ze=v(V),$e=v(ze);Ln(V,pe=>_(G,pe),()=>r(G));var Te=g(V,2),ae=v(Te),Ae=v(ae),Re=g(ae,2),qe=v(Re),Ie=g(Pe,2),Se=v(Ie);let Oe;var Ke=v(Se);se(Ke,()=>(r(x),I(w),y(()=>r(x)?w.HEART_FILLED:w.HEART)));var Be=g(Se,2),nt=v(Be);se(nt,()=>(I(w),y(()=>w.PREVIOUS)));var Ye=g(Be,2),st=v(Ye);se(st,()=>(a(),I(w),y(()=>a().state==="play"?w.PAUSE:w.PLAY)));var He=g(Ye,2),Ge=v(He);se(Ge,()=>(I(w),y(()=>w.NEXT)));var et=g(He,2);{var ot=pe=>{var De=cu();let ft;var sn=v(De);{var br=_t=>{var Gt=Ze(),kr=Ce(Gt);se(kr,()=>(I(w),y(()=>w.REPEAT))),b(_t,Gt)},yr=_t=>{var Gt=Ze(),kr=Ce(Gt);se(kr,()=>(I(w),y(()=>w.SHUFFLE))),b(_t,Gt)};R(sn,_t=>{r(S)===2?_t(br):_t(yr,!1)})}var wr=g(sn,2);{var Pt=_t=>{var Gt=lu();b(_t,Gt)};R(wr,_t=>{r(S)>0&&_t(Pt)})}ue(()=>ft=Ve(De,1,"btn-icon side-btn mode-btn svelte-1olwzt8",null,ft,{active:r(S)>0})),A("click",De,$),b(pe,De)},lt=pe=>{var De=vu();b(pe,De)};R(et,pe=>{r(h)?pe(lt,!1):pe(ot)})}var ct=g(Ie,2),rt=v(ct),tt=v(rt);se(tt,()=>(I(w),y(()=>w.VOLUME)));var pt=g(rt,2),Xt=v(pt),Ne=v(Xt),mt=g(Ne,2);Ln(pt,pe=>_(X,pe),()=>r(X)),ue((pe,De)=>{de=Ve(D,1,"full-player svelte-1olwzt8",null,de,{"is-docked":N()}),vt(D,N()?"":`transform: translateY(${r(Y)}px); transition: ${r(W)?"none":"transform 0.3s cubic-bezier(0.2, 0.8, 0.2, 1)"}`),$t(te,"src",r(d)),vt(we,`transform: scale(${1-r(Y)/3e3})`),vt(P,`opacity: ${1-r(Y)/400}`),ce(me,(t(),y(()=>t().title||"Not Playing"))),ce(ke,(t(),y(()=>t().stationName||t().artist||"Moode Audio"))),ge=Ve(V,1,"bar-hit-area svelte-1olwzt8",null,ge,{"is-docked-bar":N()}),vt($e,`width: ${r(k)??""}%; transition: ${r(p)?"width 0.3s linear":"none"}`),ce(Ae,pe),ce(qe,De),Oe=Ve(Se,1,"btn-icon side-btn svelte-1olwzt8",null,Oe,{liked:r(x)}),vt(Ne,`width: ${a(),y(()=>a().volume)??""}%`),vt(mt,`left: ${a(),y(()=>a().volume)??""}%; right: auto;`)},[()=>(r(K),r(L),r(c),r(u),y(()=>r(K)?oe(r(L)*r(c)):oe(r(u)))),()=>(r(h),r(c),y(()=>r(h)?"LIVE":oe(r(c))))]),A("mousedown",V,J),A("touchstart",V,J,void 0,!0),A("mousemove",V,function(...pe){(r(K)?B:null)?.apply(this,pe)}),A("touchmove",V,function(...pe){(r(K)?B:null)?.apply(this,pe)},void 0,!0),A("mouseup",V,z),A("touchend",V,z),A("click",Se,()=>ln.toggleFavorite(t())),A("click",Be,()=>Ns("previous")),A("click",Ye,function(...pe){_r?.apply(this,pe)}),A("click",He,()=>Ns("next")),A("mousedown",pt,Jt(re)),A("touchstart",pt,Jt(re)),At(3,D,()=>qi,()=>({y:N()?0:800,duration:300,opacity:1})),b(e,D),xt(),l()}const uu="/assets/wave-logo-C1390byt.svg",Gr={async syncLibrary(){if(Qe(Zt))return;Zt.set(!0);const e=new Yi,n=window.location.origin+"/wave-api.php";e.postMessage({type:"START_SYNC",payload:{url:n}}),e.onmessage=t=>{const{type:s,status:a,count:i,message:o}=t.data;if(s==="PROGRESS"){const l={connecting:"Requesting library...",downloading:"Downloading data...",parsing:"Processing metadata...",saving:`Saving ${i} tracks...`};l[a]&&Fe(l[a],"info")}s==="DONE"&&(Fe(`Library updated: ${i} tracks`,"success"),Zt.set(!1),e.terminate()),s==="ERROR"&&(console.error("[API] Sync Error:",o),Fe(`Sync Failed: ${o}`,"error"),Zt.set(!1),e.terminate())},e.onerror=t=>{console.error("[API] Worker crash:",t),Fe("Sync worker crashed","error"),Zt.set(!1),e.terminate()}},async loadRadioStations(){if(!Qe(Xs)){Xs.set(!0);try{const n=await fetch(Rc.STATIONS(!1));if(!n.ok)throw new Error("Network error");const t=await n.json();if(t.error)throw new Error(t.error);if(!Array.isArray(t))throw new Error("Invalid response format");const s=t.map(a=>({id:a.id,name:a.name,file:a.station,station:a.station,image:a.logo,genre:a.genre||"Radio"}));s.sort((a,i)=>a.name.localeCompare(i.name,void 0,{sensitivity:"base"})),zn.set(s)}catch(e){console.error("[API] Failed to load stations",e),Fe("Failed to load radio","error")}finally{Xs.set(!1)}}}};var fu=E('<div class="backdrop svelte-ji5owg"></div>'),hu=E('<button><span class="icon svelte-ji5owg"><!></span> <span> </span></button>'),pu=E('<!> <aside><div class="header svelte-ji5owg"><div class="header-inner svelte-ji5owg"><button class="collapse-btn svelte-ji5owg"><div class="chevron svelte-ji5owg"><!></div></button> <div><img alt="Logo" class="logo svelte-ji5owg"/></div></div> <button class="btn-icon mobile-close svelte-ji5owg"><!></button></div> <div class="scroll-area custom-scrollbar svelte-ji5owg"><nav class="svelte-ji5owg"><!> <button title="Search"><span class="icon svelte-ji5owg"><!></span> <span>Search</span></button> <div class="sep svelte-ji5owg"></div> <button class="nav-item sync svelte-ji5owg" title="Update Library"><span><!></span> <span> </span></button> <div class="sep svelte-ji5owg"></div> <button title="Settings"><span class="icon svelte-ji5owg"><!></span> <span>Settings</span></button></nav> <div class="footer svelte-ji5owg"><div>Moode WaveUI</div></div></div></aside>',1);function _u(e,n){kt(n,!1);const t=()=>Ee(Zt,"$isSyncingLibrary",i),s=()=>Ee(Qr,"$isSidebarCollapsed",i),a=()=>Ee(Nt,"$activeMenuTab",i),[i,o]=qt(),l=T();let d=dt(n,"isOpen",8,!1);const c=ca();let u=T(0),h=T(0),f=T(!1);const p=[{id:"queue",label:"Queue",icon:w.MENU},{id:"favorites",label:"Favorites",icon:w.HEART},{id:"artists",label:"Artists",icon:w.ARTISTS},{id:"albums",label:"Albums",icon:w.ALBUMS},{id:"playlists",label:"Playlists",icon:w.PLAYLISTS},{id:"radio",label:"Radio",icon:w.RADIO}];function k(V){window.location.hash=`/${V}`,c("close")}async function S(){t()||(await Gr.syncLibrary(),window.location.hash="/artists")}function m(){Qr.update(V=>!V)}function x(V){d()&&(_(u,V.touches[0].clientX),_(h,r(u)),_(f,!0))}function Q(V){r(f)&&_(h,V.touches[0].clientX)}function N(){r(f)&&(r(h)-r(u)<-70&&c("close"),_(f,!1),_(u,0),_(h,0))}Z(()=>(r(f),r(h),r(u)),()=>{_(l,r(f)?Math.min(0,r(h)-r(u)):0)}),Kt(),St();var ne=pu(),Y=Ce(ne);{var W=V=>{var ge=fu();A("click",ge,()=>c("close")),At(3,ge,()=>vn,()=>({duration:200})),b(V,ge)};R(Y,V=>{d()&&V(W)})}var j=g(Y,2);let q,C;var fe=v(j),K=v(fe),L=v(K),G=v(L),oe=v(G);se(oe,()=>(I(w),y(()=>w.BACK)));var H=g(L,2);let J;var B=v(H),z=g(K,2),ye=v(z);se(ye,()=>(I(w),y(()=>w.CLOSE)));var X=g(fe,2),re=v(X),ve=v(re);Tt(ve,1,()=>p,Cn,(V,ge)=>{var ze=hu();let $e;var Te=v(ze),ae=v(Te);se(ae,()=>(r(ge),y(()=>r(ge).icon)));var Ae=g(Te,2);let Re;var qe=v(Ae);ue(()=>{$e=Ve(ze,1,"nav-item svelte-ji5owg",null,$e,{active:a()===r(ge).id}),$t(ze,"title",(r(ge),y(()=>r(ge).label))),Re=Ve(Ae,1,"label-text svelte-ji5owg",null,Re,{hidden:s()}),ce(qe,(r(ge),y(()=>r(ge).label)))}),A("click",ze,()=>k(r(ge).id)),b(V,ze)});var M=g(ve,2);let $;var D=v(M),de=v(D);se(de,()=>(I(w),y(()=>w.SEARCH)));var be=g(D,2);let xe;var U=g(M,4),te=v(U);let le;var _e=v(te);se(_e,()=>(I(w),y(()=>w.SYNC)));var we=g(te,2);let O;var P=v(we),ee=g(U,4);let ie;var me=v(ee),he=v(me);se(he,()=>(I(w),y(()=>w.SETTINGS)));var F=g(me,2);let ke;var Le=g(re,2),je=v(Le);let Pe;ue(()=>{q=Ve(j,1,"side-menu svelte-ji5owg",null,q,{"mobile-open":d(),collapsed:s()}),C=vt(j,"",C,{transform:d()?`translateX(${r(l)}px)`:"",transition:r(f)?"none":"width 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.3s ease"}),$t(L,"title",s()?"Expand":"Collapse"),vt(G,`transform: rotate(${s()?"180deg":"0deg"})`),J=Ve(H,1,"logo-wrapper svelte-ji5owg",null,J,{hidden:s()}),$t(B,"src",uu),$=Ve(M,1,"nav-item svelte-ji5owg",null,$,{active:a()==="search"}),xe=Ve(be,1,"label-text svelte-ji5owg",null,xe,{hidden:s()}),U.disabled=t(),le=Ve(te,1,"icon svelte-ji5owg",null,le,{spin:t()}),O=Ve(we,1,"label-text svelte-ji5owg",null,O,{hidden:s()}),ce(P,t()?"Syncing...":"Update Library"),ie=Ve(ee,1,"nav-item svelte-ji5owg",null,ie,{active:a()==="settings"}),ke=Ve(F,1,"label-text svelte-ji5owg",null,ke,{hidden:s()}),Pe=Ve(je,1,"footer-text svelte-ji5owg",null,Pe,{hidden:s()})}),A("click",L,m),A("click",z,()=>c("close")),A("click",M,()=>k("search")),A("click",U,S),A("click",ee,()=>k("settings")),A("touchstart",j,x),A("touchmove",j,Q),A("touchend",j,N),b(e,ne),xt(),o()}var gu=E('<div class="toast-container svelte-k2bvk7"><div> </div></div>'),mu=E('<button class="back-btn svelte-k2bvk7"><span class="icon-inline svelte-k2bvk7"><!></span> Back</button>'),bu=E('<div class="view-title svelte-k2bvk7"><!></div>'),yu=E('<div class="full-player-modal svelte-k2bvk7"><!></div>'),wu=E('<div class="app-container svelte-k2bvk7"><div class="app-layout svelte-k2bvk7"><!> <!> <main class="content-area svelte-k2bvk7"><header class="top-bar svelte-k2bvk7"><button class="hamburger-btn svelte-k2bvk7"><!></button> <!></header> <div class="scroll-container svelte-k2bvk7"><div class="view-wrapper svelte-k2bvk7"><!></div></div></main> <div class="docked-player-container svelte-k2bvk7"><!></div></div> <div class="mini-player-wrapper svelte-k2bvk7"><!></div></div> <!>',1);function ku(e,n){kt(n,!1);const t=()=>Ee(Vt,"$navigationStack",o),s=()=>Ee(Hr,"$toastMessage",o),a=()=>Ee(Nt,"$activeMenuTab",o),i=()=>Ee(ar,"$isFullPlayerOpen",o),[o,l]=qt();let d=T(!1);bs(()=>{window.history.replaceState({depth:t().length},"","");const B=()=>void 0;return window.addEventListener("popstate",B),()=>window.removeEventListener("popstate",B)}),St();var c=wu(),u=Ce(c),h=v(u),f=v(h);{var p=B=>{var z=gu(),ye=v(z),X=v(ye);ue(()=>{Ve(ye,1,`toast-body ${s().type??""}`,"svelte-k2bvk7"),ce(X,s().text)}),At(3,z,()=>qi,()=>({y:-50,duration:300})),b(B,z)};R(f,B=>{s()&&B(p)})}var k=g(f,2);_u(k,{get isOpen(){return r(d)},$$events:{close:()=>_(d,!1)}});var S=g(k,2),m=v(S),x=v(m),Q=v(x);se(Q,()=>w.MENU);var N=g(x,2);{var ne=B=>{var z=mu(),ye=v(z),X=v(ye);se(X,()=>w.BACK),A("click",z,function(...re){Ac?.apply(this,re)}),b(B,z)},Y=B=>{var z=bu(),ye=v(z);{var X=ve=>{var M=Rn("Radio");b(ve,M)},re=ve=>{var M=Ze(),$=Ce(M);{var D=be=>{var xe=Rn("Playlists");b(be,xe)},de=be=>{var xe=Ze(),U=Ce(xe);{var te=_e=>{var we=Rn("Search");b(_e,we)},le=_e=>{var we=Ze(),O=Ce(we);{var P=ie=>{var me=Rn("Queue");b(ie,me)},ee=ie=>{var me=Ze(),he=Ce(me);{var F=Le=>{var je=Rn("Favorites");b(Le,je)},ke=Le=>{var je=Ze(),Pe=Ce(je);{var V=ze=>{var $e=Rn("Settings");b(ze,$e)},ge=ze=>{var $e=Rn();ue(Te=>ce($e,Te),[()=>(a()||"Library").charAt(0).toUpperCase()+(a()||"library").slice(1)]),b(ze,$e)};R(Pe,ze=>{a()==="settings"?ze(V):ze(ge,!1)},!0)}b(Le,je)};R(he,Le=>{a()==="favorites"?Le(F):Le(ke,!1)},!0)}b(ie,me)};R(O,ie=>{a()==="queue"?ie(P):ie(ee,!1)},!0)}b(_e,we)};R(U,_e=>{a()==="search"?_e(te):_e(le,!1)},!0)}b(be,xe)};R($,be=>{a()==="playlists"?be(D):be(de,!1)},!0)}b(ve,M)};R(ye,ve=>{a()==="radio"?ve(X):ve(re,!1)})}b(B,z)};R(N,B=>{t().length>1?B(ne):B(Y,!1)})}var W=g(m,2),j=v(W),q=v(j);{var C=B=>{rd(B,{})},fe=B=>{var z=Ze(),ye=Ce(z);{var X=ve=>{Xd(ve,{})},re=ve=>{var M=Ze(),$=Ce(M);{var D=be=>{$d(be,{})},de=be=>{var xe=Ze(),U=Ce(xe);{var te=_e=>{Ud(_e,{})},le=_e=>{var we=Ze(),O=Ce(we);{var P=ie=>{Vd(ie,{})},ee=ie=>{Vv(ie,{get activeCategory(){return a()}})};R(O,ie=>{a()==="settings"?ie(P):ie(ee,!1)},!0)}b(_e,we)};R(U,_e=>{a()==="search"?_e(te):_e(le,!1)},!0)}b(be,xe)};R($,be=>{a()==="playlists"||a()==="favorites"?be(D):be(de,!1)},!0)}b(ve,M)};R(ye,ve=>{a()==="queue"?ve(X):ve(re,!1)},!0)}b(B,z)};R(q,B=>{a()==="radio"?B(C):B(fe,!1)})}var K=g(S,2),L=v(K);Xa(L,{isDocked:!0});var G=g(h,2),oe=v(G);ru(oe,{});var H=g(u,2);{var J=B=>{var z=yu(),ye=v(z);Xa(ye,{}),b(B,z)};R(H,B=>{i()&&B(J)})}ue(()=>vt(W,`padding-bottom: ${i()?"0px":"var(--mini-player-height)"};`)),A("click",x,()=>_(d,!0)),b(e,c),xt(),l()}var xu=E('<button class="back-btn-area svelte-l8h85k"><span class="back-icon svelte-l8h85k"><!></span></button> <span class="header-title svelte-l8h85k">Select Playlist</span>',1),Eu=E('<div class="track-info svelte-l8h85k"><div class="title text-ellipsis svelte-l8h85k"> </div> <div class="artist text-ellipsis svelte-l8h85k">Playlist</div></div>'),Su=E('<div class="track-info svelte-l8h85k"><div class="title text-ellipsis svelte-l8h85k"> </div> <div class="artist text-ellipsis svelte-l8h85k"> </div></div>'),Mu=E('<button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span> </span></button>'),Tu=E('<div class="empty-msg svelte-l8h85k">No custom playlists</div>'),$u=E("<!> <!>",1),Au=E('<button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Play Now</span></button> <div class="sep svelte-l8h85k"></div> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Rename</span></button> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Delete Playlist</span></button>',1),Pu=E('<button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Go to Album</span></button> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Go to Artist</span></button>',1),Cu=E('<div class="sep svelte-l8h85k"></div> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Remove from Playlist</span></button>',1),Lu=E('<div class="sep svelte-l8h85k"></div> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Remove from Queue</span></button>',1),zu=E('<button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Play Next</span></button> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Add to Queue</span></button> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Add to Playlist...</span></button> <!> <button class="menu-row svelte-l8h85k"><span><!></span> <span> </span></button> <!> <!>',1),Ru=E('<div class="backdrop svelte-l8h85k"><div class="menu-card svelte-l8h85k"><div class="menu-header svelte-l8h85k"><!></div> <div class="menu-items scroll-y svelte-l8h85k"><!></div></div></div>');function Iu(e,n){kt(n,!1);const t=()=>Ee(ua,"$contextMenu",i),s=()=>Ee(Mn,"$favorites",i),a=()=>Ee(da,"$playlists",i),[i,o]=qt(),l=T(),d=T(),c=T(),u=T(),h=T(),f=T(),p=T();let k=T(),S=T(),m=T(),x=T(0),Q=T(0),N=T("main"),ne=T(!1);function Y(M){t().isOpen&&(_(ne,!1),Rt())}function W(){Rt()}function j(){t().track&&en.playNext(t().track.file),Rt()}function q(){t().track&&en.addToQueue(t().track.file),Rt()}function C(){t().track&&ln.toggleFavorite(t().track),Rt()}function fe(){const M=t().track;M&&M.album&&Pn("tracks_by_album",{name:M.album,artist:M.artist}),Rt()}function K(){const M=t().track;M&&M.artist&&Pn("albums_by_artist",{name:M.artist}),Rt()}async function L(){const{playlistName:M,index:$}=t().context;M&&$!==null&&(Ms.update(D=>{const de=[...D];return de.splice($,1),de}),await ln.removeFromPlaylist(M,$)),Rt()}function G(){const{index:M}=t().context;M!=null&&en.removeFromQueue(M),Rt()}function oe(){const M=t().context.playlist;Rt(),M&&yn({title:"Replace Queue?",message:`This will clear your queue and play playlist "${M.name}".`,confirmLabel:"Play",type:"confirm",onConfirm:async()=>{try{await Me.send("stop"),await Me.send("clear");const $=M.name.replace(/"/g,'\\"');await Me.send(`load "${$}"`),await Me.send("play 0")}catch($){console.error($),Fe("Failed to play playlist","error")}}})}function H(){const M=t().context.playlist;M&&(Rt(),yn({title:"Rename Playlist",message:`Enter new name for "${M.name}":`,type:"prompt",placeholder:M.name,inputValue:M.name,confirmLabel:"Rename",onConfirm:$=>{$&&$!==M.name&&ln.renamePlaylist(M.name,$)}}))}function J(){const M=t().context.playlist;M&&(Rt(),yn({title:"Delete Playlist",message:`Are you sure you want to delete "${M.name}"? This cannot be undone.`,type:"confirm",confirmLabel:"Delete",onConfirm:()=>{ln.deletePlaylist(M.name)}}))}function B(){_(N,"playlists")}function z(){_(N,"main")}async function ye(M){const $=t().track;if($)try{const D=M.replace(/"/g,'\\"'),de=$.file.replace(/"/g,'\\"');await Me.send(`playlistadd "${D}" "${de}"`),Fe(`Added to "${M}"`,"success"),Rt()}catch(D){console.error(D),Fe("Failed to add","error")}}Z(()=>t(),()=>{t().isOpen&&_(N,"main")}),Z(()=>(t(),r(ne)),()=>{t().isOpen?!r(ne)&&typeof history<"u"&&(history.pushState({contextMenuOpen:!0},""),_(ne,!0)):r(ne)&&typeof history<"u"&&(history.back(),_(ne,!1))}),Z(()=>(t(),s()),()=>{_(l,t().track&&s().has(t().track.file))}),Z(()=>t(),()=>{_(d,t().track&&(t().track.file.includes("http")||t().track.file.includes("://")))}),Z(()=>t(),()=>{_(c,t().context?.type==="playlist")}),Z(()=>t(),()=>{_(u,t().context?.type==="queue")}),Z(()=>t(),()=>{_(h,t().context?.type==="playlist-card")}),Z(()=>t(),()=>{_(f,t().context?.source==="miniplayer")}),Z(()=>(t(),r(Q),r(x),r(k),r(f),r(S)),()=>{_(p,(()=>{if(!t().isOpen)return"";const M=t().triggerRect,$=t().x,D=t().y,de=r(Q)||220,be=r(x)||320;if(r(k)<=768&&r(f)&&M)return`
        position: fixed; 
        bottom: ${r(S)-M.top}px; 
        left: 50%; 
        transform: translateX(-50%); 
        margin: 0; 
        transform-origin: bottom center;
      `;let xe=0,U=0,te="top left";if(M){const _e=M.left+M.width/2,we=M.top+M.height/2,O=_e>r(k)/2,P=we>r(S)/2;O?(xe=M.right-de,te=P?"bottom right":"top right"):(xe=M.left,te=P?"bottom left":"top left"),P?U=M.top-be:U=M.bottom}else xe=$,U=D,xe+de>r(k)&&(xe=r(k)-de-10),U+be>r(S)&&(U=r(S)-be-10);const le=8;return xe<le&&(xe=le),xe+de>r(k)-le&&(xe=r(k)-de-le),U<le&&(U=le),U+be>r(S)-le&&(U=r(S)-be-le),`position: fixed; top: ${U}px; left: ${xe}px; margin: 0; transform-origin: ${te};`})())}),Kt(),St();var X=Ze();A("popstate",En,Y);var re=Ce(X);{var ve=M=>{var $=Ru(),D=v($),de=v(D),be=v(de);{var xe=O=>{var P=xu(),ee=Ce(P),ie=v(ee),me=v(ie);se(me,()=>(I(w),y(()=>w.BACK))),A("click",ee,z),b(O,P)},U=O=>{var P=Ze(),ee=Ce(P);{var ie=he=>{var F=Eu(),ke=v(F),Le=v(ke);ue(()=>ce(Le,(t(),y(()=>t().context.playlist.name)))),b(he,F)},me=he=>{var F=Su(),ke=v(F),Le=v(ke),je=g(ke,2),Pe=v(je);ue(()=>{ce(Le,(t(),y(()=>t().track.title))),ce(Pe,(t(),y(()=>t().track.artist)))}),b(he,F)};R(ee,he=>{r(h)?he(ie):he(me,!1)},!0)}b(O,P)};R(be,O=>{r(N)==="playlists"?O(xe):O(U,!1)})}var te=g(de,2),le=v(te);{var _e=O=>{var P=$u(),ee=Ce(P);Tt(ee,1,a,Cn,(he,F)=>{var ke=Ze(),Le=Ce(ke);{var je=Pe=>{var V=Mu(),ge=v(V),ze=v(ge);se(ze,()=>(I(w),y(()=>w.PLAYLISTS)));var $e=g(ge,2),Te=v($e);ue(()=>ce(Te,(r(F),y(()=>r(F).name)))),A("click",V,()=>ye(r(F).name)),b(Pe,V)};R(Le,Pe=>{r(F),y(()=>r(F).name!=="Favorites")&&Pe(je)})}b(he,ke)});var ie=g(ee,2);{var me=he=>{var F=Tu();b(he,F)};R(ie,he=>{a(),y(()=>a().filter(F=>F.name!=="Favorites").length===0)&&he(me)})}b(O,P)},we=O=>{var P=Ze(),ee=Ce(P);{var ie=he=>{var F=Au(),ke=Ce(F),Le=v(ke),je=v(Le);se(je,()=>(I(w),y(()=>w.PLAY)));var Pe=g(ke,4),V=v(Pe),ge=v(V);se(ge,()=>(I(w),y(()=>w.EDIT)));var ze=g(Pe,2),$e=v(ze),Te=v($e);se(Te,()=>(I(w),y(()=>w.REMOVE))),A("click",ke,oe),A("click",Pe,H),A("click",ze,J),b(he,F)},me=he=>{var F=zu(),ke=Ce(F),Le=v(ke),je=v(Le);se(je,()=>(I(w),y(()=>w.NEXT)));var Pe=g(ke,2),V=v(Pe),ge=v(V);se(ge,()=>(I(w),y(()=>w.MENU)));var ze=g(Pe,2),$e=v(ze),Te=v($e);se(Te,()=>(I(w),y(()=>w.ADD_TO_PLAYLIST||w.ADD)));var ae=g(ze,2);{var Ae=He=>{var Ge=Pu(),et=Ce(Ge),ot=v(et),lt=v(ot);se(lt,()=>(I(w),y(()=>w.ALBUM_LINK||w.ALBUMS)));var ct=g(et,2),rt=v(ct),tt=v(rt);se(tt,()=>(I(w),y(()=>w.ARTIST_LINK||w.ARTISTS))),A("click",et,fe),A("click",ct,K),b(He,Ge)};R(ae,He=>{r(d)||He(Ae)})}var Re=g(ae,2),qe=v(Re);let Ie;var Se=v(qe);se(Se,()=>(r(l),I(w),y(()=>r(l)?w.HEART_FILLED:w.HEART)));var Oe=g(qe,2),Ke=v(Oe),Be=g(Re,2);{var nt=He=>{var Ge=Cu(),et=g(Ce(Ge),2),ot=v(et),lt=v(ot);se(lt,()=>(I(w),y(()=>w.REMOVE))),A("click",et,L),b(He,Ge)};R(Be,He=>{r(c)&&He(nt)})}var Ye=g(Be,2);{var st=He=>{var Ge=Lu(),et=g(Ce(Ge),2),ot=v(et),lt=v(ot);se(lt,()=>(I(w),y(()=>w.REMOVE))),A("click",et,G),b(He,Ge)};R(Ye,He=>{r(u)&&He(st)})}ue(()=>{Ie=Ve(qe,1,"icon svelte-l8h85k",null,Ie,{liked:r(l)}),ce(Ke,r(l)?"Unlike":"Like")}),A("click",ke,j),A("click",Pe,q),A("click",ze,B),A("click",Re,C),b(he,F)};R(ee,he=>{r(h)?he(ie):he(me,!1)},!0)}b(O,P)};R(le,O=>{r(N)==="playlists"?O(_e):O(we,!1)})}Ln(D,O=>_(m,O),()=>r(m)),ue(()=>vt(D,r(p))),Ca(D,"clientHeight",O=>_(x,O)),Ca(D,"clientWidth",O=>_(Q,O)),At(3,D,()=>va,()=>({start:.95,duration:100})),A("click",D,Jt(function(O){Ls.call(this,n,O)})),A("click",$,W),At(3,$,()=>vn,()=>({duration:100})),b(M,$)};R(re,M=>{t(),y(()=>t().isOpen)&&M(ve)})}za("innerWidth",M=>_(k,M)),za("innerHeight",M=>_(S,M)),b(e,X),xt(),o()}var Nu=E('<div class="input-wrapper svelte-1bxxaoh"><input type="text" autoFocus/></div>'),ju=E('<button class="btn cancel svelte-1bxxaoh"> </button>'),Ou=E('<div class="backdrop svelte-1bxxaoh"><div class="modal-card svelte-1bxxaoh"><div class="modal-header svelte-1bxxaoh"><span class="modal-title svelte-1bxxaoh"> </span></div> <div class="modal-body svelte-1bxxaoh"><p class="modal-message svelte-1bxxaoh"> </p> <!></div> <div class="modal-actions svelte-1bxxaoh"><!> <button class="btn confirm svelte-1bxxaoh"> </button></div></div></div>');function Du(e,n){kt(n,!1);const t=()=>Ee(rr,"$modal",s),[s,a]=qt();let i=T(!1),o=T();function l(){if(t().type==="prompt"){const k=t().inputValue?t().inputValue.trim():"";if(k.length===0){d();return}t().onConfirm&&t().onConfirm(k)}else t().onConfirm&&t().onConfirm();zr()}function d(){_(i,!0),r(o)&&r(o).focus(),setTimeout(()=>{_(i,!1)},400)}function c(){zr()}function u(k){k.key==="Enter"&&l(),r(i)&&_(i,!1)}Z(()=>t(),()=>{t().isOpen||_(i,!1)}),Kt(),St();var h=Ze(),f=Ce(h);{var p=k=>{var S=Ou(),m=v(S),x=v(m),Q=v(x),N=v(Q),ne=g(x,2),Y=v(ne),W=v(Y),j=g(Y,2);{var q=oe=>{var H=Nu(),J=v(H);let B;Ln(J,z=>_(o,z),()=>r(o)),ue(()=>{B=Ve(J,1,"modal-input svelte-1bxxaoh",null,B,{"shake-error":r(i)}),$t(J,"placeholder",(t(),y(()=>t().placeholder)))}),pr(J,()=>t().inputValue,z=>Cl(rr,y(t).inputValue=z,y(t))),A("keydown",J,u),b(oe,H)};R(j,oe=>{t(),y(()=>t().type==="prompt")&&oe(q)})}var C=g(ne,2),fe=v(C);{var K=oe=>{var H=ju(),J=v(H);ue(()=>ce(J,(t(),y(()=>t().cancelLabel)))),A("click",H,function(...B){zr?.apply(this,B)}),b(oe,H)};R(fe,oe=>{t(),y(()=>t().type==="confirm"||t().type==="prompt")&&oe(K)})}var L=g(fe,2),G=v(L);ue(()=>{ce(N,(t(),y(()=>t().title))),ce(W,(t(),y(()=>t().message))),ce(G,(t(),y(()=>t().confirmLabel)))}),A("click",L,l),At(3,m,()=>va,()=>({start:.95,duration:200})),A("click",m,Jt(function(oe){Ls.call(this,n,oe)})),A("click",S,c),At(3,S,()=>vn,()=>({duration:150})),b(k,S)};R(f,k=>{t(),y(()=>t().isOpen)&&k(p)})}b(e,h),xt(),a()}const Ga={init(){this.handleHashChange(),window.addEventListener("hashchange",()=>this.handleHashChange())},handleHashChange(){let e=window.location.hash.slice(1);for(;e.startsWith("/");)e=e.slice(1);if(!e){(Qe(Vt).length>1||Qe(Nt)==="search")&&(this.setRootTab("artists"),window.location.hash="/artists");return}const n=e.split("/").map(decodeURIComponent),t=n[0];let s=$c();switch(s||n.length>1&&(t==="album"&&n.length>=3?s={artist:n[1],name:n[2]}:t==="artist"&&n.length>=2?s={name:n[1]}:s={name:n[1],displayName:n[1]}),console.log(`[Router] Navigating: ${t}`,s),t){case"queue":this.setRootTab("queue");break;case"radio":this.setRootTab("radio");break;case"playlists":this.setRootTab("playlists");break;case"settings":this.setRootTab("settings");break;case"favorites":Nt.set("favorites"),Vt.set([{view:"root"},{view:"details",data:{name:"Favorites"}}]);break;case"artists":this.setRootTab("artists");break;case"albums":this.setRootTab("albums");break;case"search":Nt.set("search"),n[1]&&Ts.set(n[1]),Vt.set([{view:"root"}]);break;case"album":Nt.set("albums"),Vt.set([{view:"root"},{view:"tracks_by_album",data:s}]);break;case"artist":Nt.set("artists"),Vt.set([{view:"root"},{view:"albums_by_artist",data:s}]);break;case"playlist":Nt.set("playlists"),Vt.set([{view:"root"},{view:"details",data:s}]);break;default:this.setRootTab("artists");break}},setRootTab(e){Nt.set(e),Vt.set([{view:"root"}])},updateUrl(e,n){let t="";if(e==="root"){const s=Qe(Nt);if(s==="search"){const a=Qe(Ts);t=a?`search/${encodeURIComponent(a)}`:"search"}else t=s}else if(e==="details"){const s=n.name||n;t=s==="Favorites"?"favorites":`playlist/${encodeURIComponent(s)}`}else if(e==="albums_by_artist"){const s=n.name||n;t=`artist/${encodeURIComponent(s)}`}else if(e==="tracks_by_album"){const s=n.name||n,a=n.artist;a?t=`album/${encodeURIComponent(a)}/${encodeURIComponent(s)}`:t=`album/${encodeURIComponent(s)}`}else e==="queue"&&(t="queue");if(t){const s=`#/${t}`;decodeURIComponent(window.location.hash)!==decodeURIComponent(s)&&(window.location.hash=`/${t}`)}}};var Fu=E("<!> <!> <!>",1);function qu(e,n){kt(n,!1),bs(async()=>{Ga.init(),Tc((o,l)=>{Ga.updateUrl(o,l)}),Qi(),Gr.loadRadioStations();try{const o=await Tn.getArtists();o.length>0?console.log(`[App] Database ready. Loaded ${o.length} artists from cache.`):(console.log("[App] Database empty. Starting initial sync..."),Gr.syncLibrary())}catch(o){console.error("[App] DB Check failed:",o),Fe("Local DB error. Please update library manually.","error")}}),St();var t=Fu(),s=Ce(t);ku(s,{});var a=g(s,2);Iu(a,{});var i=g(a,2);Du(i,{}),b(e,t),xt()}fl(qu,{target:document.getElementById("app")});
