(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=t(a);fetch(a.href,i)}})();const zs=!1;var os=Array.isArray,eo=Array.prototype.indexOf,ls=Array.from,Za=Object.defineProperty,or=Object.getOwnPropertyDescriptor,Ja=Object.getOwnPropertyDescriptors,to=Object.prototype,no=Array.prototype,Zs=Object.getPrototypeOf,ma=Object.isExtensible;function ro(e){return typeof e=="function"}const Rt=()=>{};function so(e){return e()}function Jr(e){for(var n=0;n<e.length;n++)e[n]()}function ei(){var e,n,t=new Promise((r,a)=>{e=r,n=a});return{promise:t,resolve:e,reject:n}}const ut=2,Js=4,cs=8,ao=1<<24,ln=16,mn=32,Xn=64,vs=128,Zt=512,ct=1024,Tt=2048,Jt=4096,zt=8192,hn=16384,us=32768,Vn=65536,ba=1<<17,ti=1<<18,gr=1<<19,ni=1<<20,dn=1<<25,Yn=32768,Is=1<<21,ea=1<<22,Mn=1<<23,On=Symbol("$state"),io=Symbol("legacy props"),oo=Symbol(""),sr=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function ta(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function lo(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function co(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function vo(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function uo(e){throw new Error("https://svelte.dev/e/effect_orphan")}function fo(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function ho(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function po(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function go(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function _o(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function mo(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const bo=1,yo=2,ri=4,wo=8,ko=16,xo=1,Eo=2,So=4,Mo=8,To=16,$o=1,Ao=2,Co=4,Po=1,Ro=2,pt=Symbol(),Lo="http://www.w3.org/1999/xhtml";function zo(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function si(e){return e===this.v}function na(e,n){return e!=e?n==n:e!==n||e!==null&&typeof e=="object"||typeof e=="function"}function ai(e){return!na(e,this.v)}let _r=!1,Io=!1;function No(){_r=!0}let Ge=null;function vr(e){Ge=e}function dt(e,n=!1,t){Ge={p:Ge,i:!1,c:null,e:null,s:e,x:null,l:_r&&!n?{s:null,u:null,$:[]}:null}}function ft(e){var n=Ge,t=n.e;if(t!==null){n.e=null;for(var r of t)yi(r)}return n.i=!0,Ge=n.p,{}}function jr(){return!_r||Ge!==null&&Ge.l===null}let Nn=[];function ii(){var e=Nn;Nn=[],Jr(e)}function Gn(e){if(Nn.length===0&&!Sr){var n=Nn;queueMicrotask(()=>{n===Nn&&ii()})}Nn.push(e)}function jo(){for(;Nn.length>0;)ii()}function oi(e){var n=He;if(n===null)return Be.f|=Mn,e;if((n.f&us)===0){if((n.f&vs)===0)throw e;n.b.error(e)}else ur(e,n)}function ur(e,n){for(;n!==null;){if((n.f&vs)!==0)try{n.b.error(e);return}catch(t){e=t}n=n.parent}throw e}const qr=new Set;let Ve=null,Qr=null,qt=null,Ot=[],ds=null,Ns=!1,Sr=!1;class nn{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#n=0;#r=0;#l=null;#a=new Set;#s=new Set;skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#r>0}process(n){Ot=[],Qr=null,this.apply();var t={parent:null,effect:null,effects:[],render_effects:[]};for(const r of n)this.#i(r,t);this.is_fork||this.#v(),this.is_deferred()?(this.#o(t.effects),this.#o(t.render_effects)):(Qr=this,Ve=null,ya(t.render_effects),ya(t.effects),Qr=null,this.#l?.resolve()),qt=null}#i(n,t){n.f^=ct;for(var r=n.first;r!==null;){var a=r.f,i=(a&(mn|Xn))!==0,o=i&&(a&ct)!==0,l=o||(a&zt)!==0||this.skipped_effects.has(r);if((r.f&vs)!==0&&r.b?.is_pending()&&(t={parent:t,effect:r,effects:[],render_effects:[]}),!l&&r.fn!==null){i?r.f^=ct:(a&Js)!==0?t.effects.push(r):br(r)&&((r.f&ln)!==0&&this.#a.add(r),fr(r));var v=r.first;if(v!==null){r=v;continue}}var c=r.parent;for(r=r.next;r===null&&c!==null;)c===t.effect&&(this.#o(t.effects),this.#o(t.render_effects),t=t.parent),r=c.next,c=c.parent}}#o(n){for(const t of n)(t.f&Tt)!==0?this.#a.add(t):(t.f&Jt)!==0&&this.#s.add(t),this.#c(t.deps),vt(t,ct)}#c(n){if(n!==null)for(const t of n)(t.f&ut)===0||(t.f&Yn)===0||(t.f^=Yn,this.#c(t.deps))}capture(n,t){this.previous.has(n)||this.previous.set(n,t),(n.f&Mn)===0&&(this.current.set(n,n.v),qt?.set(n,n.v))}activate(){Ve=this,this.apply()}deactivate(){Ve===this&&(Ve=null,qt=null)}flush(){if(this.activate(),Ot.length>0){if(li(),Ve!==null&&Ve!==this)return}else this.#n===0&&this.process([]);this.deactivate()}discard(){for(const n of this.#t)n(this);this.#t.clear()}#v(){if(this.#r===0){for(const n of this.#e)n();this.#e.clear()}this.#n===0&&this.#u()}#u(){if(qr.size>1){this.previous.clear();var n=qt,t=!0,r={parent:null,effect:null,effects:[],render_effects:[]};for(const i of qr){if(i===this){t=!1;continue}const o=[];for(const[v,c]of this.current){if(i.current.has(v))if(t&&c!==i.current.get(v))i.current.set(v,c);else continue;o.push(v)}if(o.length===0)continue;const l=[...i.current.keys()].filter(v=>!this.current.has(v));if(l.length>0){var a=Ot;Ot=[];const v=new Set,c=new Map;for(const u of o)ci(u,l,v,c);if(Ot.length>0){Ve=i,i.apply();for(const u of Ot)i.#i(u,r);i.deactivate()}Ot=a}}Ve=null,qt=n}this.committed=!0,qr.delete(this)}increment(n){this.#n+=1,n&&(this.#r+=1)}decrement(n){this.#n-=1,n&&(this.#r-=1),this.revive()}revive(){for(const n of this.#a)this.#s.delete(n),vt(n,Tt),Qn(n);for(const n of this.#s)vt(n,Jt),Qn(n);this.flush()}oncommit(n){this.#e.add(n)}ondiscard(n){this.#t.add(n)}settled(){return(this.#l??=ei()).promise}static ensure(){if(Ve===null){const n=Ve=new nn;qr.add(Ve),Sr||nn.enqueue(()=>{Ve===n&&n.flush()})}return Ve}static enqueue(n){Gn(n)}apply(){}}function Oo(e){var n=Sr;Sr=!0;try{for(var t;;){if(jo(),Ot.length===0&&(Ve?.flush(),Ot.length===0))return ds=null,t;li()}}finally{Sr=n}}function li(){var e=Fn;Ns=!0;var n=null;try{var t=0;for(ts(!0);Ot.length>0;){var r=nn.ensure();if(t++>1e3){var a,i;Do()}r.process(Ot),Tn.clear()}}finally{Ns=!1,ts(e),ds=null}}function Do(){try{fo()}catch(e){ur(e,ds)}}let vn=null;function ya(e){var n=e.length;if(n!==0){for(var t=0;t<n;){var r=e[t++];if((r.f&(hn|zt))===0&&br(r)&&(vn=new Set,fr(r),r.deps===null&&r.first===null&&r.nodes===null&&(r.teardown===null&&r.ac===null?Ei(r):r.fn=null),vn?.size>0)){Tn.clear();for(const a of vn){if((a.f&(hn|zt))!==0)continue;const i=[a];let o=a.parent;for(;o!==null;)vn.has(o)&&(vn.delete(o),i.push(o)),o=o.parent;for(let l=i.length-1;l>=0;l--){const v=i[l];(v.f&(hn|zt))===0&&fr(v)}}vn.clear()}}vn=null}}function ci(e,n,t,r){if(!t.has(e)&&(t.add(e),e.reactions!==null))for(const a of e.reactions){const i=a.f;(i&ut)!==0?ci(a,n,t,r):(i&(ea|ln))!==0&&(i&Tt)===0&&vi(a,n,r)&&(vt(a,Tt),Qn(a))}}function vi(e,n,t){const r=t.get(e);if(r!==void 0)return r;if(e.deps!==null)for(const a of e.deps){if(n.includes(a))return!0;if((a.f&ut)!==0&&vi(a,n,t))return t.set(a,!0),!0}return t.set(e,!1),!1}function Qn(e){for(var n=ds=e;n.parent!==null;){n=n.parent;var t=n.f;if(Ns&&n===He&&(t&ln)!==0&&(t&ti)===0)return;if((t&(Xn|mn))!==0){if((t&ct)===0)return;n.f^=ct}}Ot.push(n)}function Fo(e){let n=0,t=Wn(0),r;return()=>{Ar()&&(s(t),mr(()=>(n===0&&(r=E(()=>e(()=>Mr(t)))),n+=1,()=>{Gn(()=>{n-=1,n===0&&(r?.(),r=void 0,Mr(t))})})))}}var qo=Vn|gr|vs;function Bo(e,n,t){new Uo(e,n,t)}class Uo{parent;#e=!1;#t;#n=null;#r;#l;#a;#s=null;#i=null;#o=null;#c=null;#v=null;#u=0;#d=0;#h=!1;#f=null;#b=Fo(()=>(this.#f=Wn(this.#u),()=>{this.#f=null}));constructor(n,t,r){this.#t=n,this.#r=t,this.#l=r,this.parent=He.b,this.#e=!!this.#r.pending,this.#a=sa(()=>{He.b=this;{var a=this.#_();try{this.#s=Dt(()=>r(a))}catch(i){this.error(i)}this.#d>0?this.#g():this.#e=!1}return()=>{this.#v?.remove()}},qo)}#y(){try{this.#s=Dt(()=>this.#l(this.#t))}catch(n){this.error(n)}this.#e=!1}#w(){const n=this.#r.pending;n&&(this.#i=Dt(()=>n(this.#t)),nn.enqueue(()=>{var t=this.#_();this.#s=this.#p(()=>(nn.ensure(),Dt(()=>this.#l(t)))),this.#d>0?this.#g():(Dn(this.#i,()=>{this.#i=null}),this.#e=!1)}))}#_(){var n=this.#t;return this.#e&&(this.#v=pn(),this.#t.before(this.#v),n=this.#v),n}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#r.pending}#p(n){var t=He,r=Be,a=Ge;an(this.#a),St(this.#a),vr(this.#a.ctx);try{return n()}catch(i){return oi(i),null}finally{an(t),St(r),vr(a)}}#g(){const n=this.#r.pending;this.#s!==null&&(this.#c=document.createDocumentFragment(),this.#c.append(this.#v),Ti(this.#s,this.#c)),this.#i===null&&(this.#i=Dt(()=>n(this.#t)))}#m(n){if(!this.has_pending_snippet()){this.parent&&this.parent.#m(n);return}this.#d+=n,this.#d===0&&(this.#e=!1,this.#i&&Dn(this.#i,()=>{this.#i=null}),this.#c&&(this.#t.before(this.#c),this.#c=null))}update_pending_count(n){this.#m(n),this.#u+=n,this.#f&&dr(this.#f,this.#u)}get_effect_pending(){return this.#b(),s(this.#f)}error(n){var t=this.#r.onerror;let r=this.#r.failed;if(this.#h||!t&&!r)throw n;this.#s&&(Mt(this.#s),this.#s=null),this.#i&&(Mt(this.#i),this.#i=null),this.#o&&(Mt(this.#o),this.#o=null);var a=!1,i=!1;const o=()=>{if(a){zo();return}a=!0,i&&mo(),nn.ensure(),this.#u=0,this.#o!==null&&Dn(this.#o,()=>{this.#o=null}),this.#e=this.has_pending_snippet(),this.#s=this.#p(()=>(this.#h=!1,Dt(()=>this.#l(this.#t)))),this.#d>0?this.#g():this.#e=!1};var l=Be;try{St(null),i=!0,t?.(n,o),i=!1}catch(v){ur(v,this.#a&&this.#a.parent)}finally{St(l)}r&&Gn(()=>{this.#o=this.#p(()=>{nn.ensure(),this.#h=!0;try{return Dt(()=>{r(this.#t,()=>n,()=>o)})}catch(v){return ur(v,this.#a.parent),null}finally{this.#h=!1}})})}}function Ho(e,n,t,r){const a=jr()?Or:nt;if(t.length===0&&e.length===0){r(n.map(a));return}var i=Ve,o=He,l=Vo();function v(){Promise.all(t.map(c=>Yo(c))).then(c=>{l();try{r([...n.map(a),...c])}catch(u){(o.f&hn)===0&&ur(u,o)}i?.deactivate(),es()}).catch(c=>{ur(c,o)})}e.length>0?Promise.all(e).then(()=>{l();try{return v()}finally{i?.deactivate(),es()}}):v()}function Vo(){var e=He,n=Be,t=Ge,r=Ve;return function(i=!0){an(e),St(n),vr(t),i&&r?.activate()}}function es(){an(null),St(null),vr(null)}function Or(e){var n=ut|Tt,t=Be!==null&&(Be.f&ut)!==0?Be:null;return He!==null&&(He.f|=gr),{ctx:Ge,deps:null,effects:null,equals:si,f:n,fn:e,reactions:null,rv:0,v:pt,wv:0,parent:t??He,ac:null}}function Yo(e,n){let t=He;t===null&&lo();var r=t.b,a=void 0,i=Wn(pt),o=!Be,l=new Map;return rl(()=>{var v=ei();a=v.promise;try{Promise.resolve(e()).then(v.resolve,v.reject).then(()=>{c===Ve&&c.committed&&c.deactivate(),es()})}catch(f){v.reject(f),es()}var c=Ve;if(o){var u=!r.is_pending();r.update_pending_count(1),c.increment(u),l.get(c)?.reject(sr),l.delete(c),l.set(c,v)}const h=(f,p=void 0)=>{if(c.activate(),p)p!==sr&&(i.f|=Mn,dr(i,p));else{(i.f&Mn)!==0&&(i.f^=Mn),dr(i,f);for(const[y,x]of l){if(l.delete(y),y===c)break;x.reject(sr)}}o&&(r.update_pending_count(-1),c.decrement(u))};v.promise.then(h,f=>h(null,f||"unknown"))}),fs(()=>{for(const v of l.values())v.reject(sr)}),new Promise(v=>{function c(u){function h(){u===a?v(i):c(a)}u.then(h,h)}c(a)})}function wr(e){const n=Or(e);return $i(n),n}function nt(e){const n=Or(e);return n.equals=ai,n}function ui(e){var n=e.effects;if(n!==null){e.effects=null;for(var t=0;t<n.length;t+=1)Mt(n[t])}}function Qo(e){for(var n=e.parent;n!==null;){if((n.f&ut)===0)return(n.f&hn)===0?n:null;n=n.parent}return null}function ra(e){var n,t=He;an(Qo(e));try{e.f&=~Yn,ui(e),n=Ri(e)}finally{an(t)}return n}function di(e){var n=ra(e);if(e.equals(n)||(Ve?.is_fork||(e.v=n),e.wv=Ci()),!Jn)if(qt!==null)(Ar()||Ve?.is_fork)&&qt.set(e,n);else{var t=(e.f&Zt)===0?Jt:ct;vt(e,t)}}let js=new Set;const Tn=new Map;let fi=!1;function Wn(e,n){var t={f:0,v:e,reactions:null,equals:si,rv:0,wv:0};return t}function yn(e,n){const t=Wn(e);return $i(t),t}function $(e,n=!1,t=!0){const r=Wn(e);return n||(r.equals=ai),_r&&t&&Ge!==null&&Ge.l!==null&&(Ge.l.s??=[]).push(r),r}function Br(e,n){return g(e,E(()=>s(e))),n}function g(e,n,t=!1){Be!==null&&(!rn||(Be.f&ba)!==0)&&jr()&&(Be.f&(ut|ln|ea|ba))!==0&&!gn?.includes(e)&&_o();let r=t?ar(n):n;return dr(e,r)}function dr(e,n){if(!e.equals(n)){var t=e.v;Jn?Tn.set(e,n):Tn.set(e,t),e.v=n;var r=nn.ensure();r.capture(e,t),(e.f&ut)!==0&&((e.f&Tt)!==0&&ra(e),vt(e,(e.f&Zt)!==0?ct:Jt)),e.wv=Ci(),hi(e,Tt),jr()&&He!==null&&(He.f&ct)!==0&&(He.f&(mn|Xn))===0&&(jt===null?al([e]):jt.push(e)),!r.is_fork&&js.size>0&&!fi&&Wo()}return n}function Wo(){fi=!1;var e=Fn;ts(!0);const n=Array.from(js);try{for(const t of n)(t.f&ct)!==0&&vt(t,Jt),br(t)&&fr(t)}finally{ts(e)}js.clear()}function Mr(e){g(e,e.v+1)}function hi(e,n){var t=e.reactions;if(t!==null)for(var r=jr(),a=t.length,i=0;i<a;i++){var o=t[i],l=o.f;if(!(!r&&o===He)){var v=(l&Tt)===0;if(v&&vt(o,n),(l&ut)!==0){var c=o;qt?.delete(c),(l&Yn)===0&&(l&Zt&&(o.f|=Yn),hi(c,Jt))}else v&&((l&ln)!==0&&vn!==null&&vn.add(o),Qn(o))}}}function ar(e){if(typeof e!="object"||e===null||On in e)return e;const n=Zs(e);if(n!==to&&n!==no)return e;var t=new Map,r=os(e),a=yn(0),i=qn,o=l=>{if(qn===i)return l();var v=Be,c=qn;St(null),xa(i);var u=l();return St(v),xa(c),u};return r&&t.set("length",yn(e.length)),new Proxy(e,{defineProperty(l,v,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&po();var u=t.get(v);return u===void 0?u=o(()=>{var h=yn(c.value);return t.set(v,h),h}):g(u,c.value,!0),!0},deleteProperty(l,v){var c=t.get(v);if(c===void 0){if(v in l){const u=o(()=>yn(pt));t.set(v,u),Mr(a)}}else g(c,pt),Mr(a);return!0},get(l,v,c){if(v===On)return e;var u=t.get(v),h=v in l;if(u===void 0&&(!h||or(l,v)?.writable)&&(u=o(()=>{var p=ar(h?l[v]:pt),y=yn(p);return y}),t.set(v,u)),u!==void 0){var f=s(u);return f===pt?void 0:f}return Reflect.get(l,v,c)},getOwnPropertyDescriptor(l,v){var c=Reflect.getOwnPropertyDescriptor(l,v);if(c&&"value"in c){var u=t.get(v);u&&(c.value=s(u))}else if(c===void 0){var h=t.get(v),f=h?.v;if(h!==void 0&&f!==pt)return{enumerable:!0,configurable:!0,value:f,writable:!0}}return c},has(l,v){if(v===On)return!0;var c=t.get(v),u=c!==void 0&&c.v!==pt||Reflect.has(l,v);if(c!==void 0||He!==null&&(!u||or(l,v)?.writable)){c===void 0&&(c=o(()=>{var f=u?ar(l[v]):pt,p=yn(f);return p}),t.set(v,c));var h=s(c);if(h===pt)return!1}return u},set(l,v,c,u){var h=t.get(v),f=v in l;if(r&&v==="length")for(var p=c;p<h.v;p+=1){var y=t.get(p+"");y!==void 0?g(y,pt):p in l&&(y=o(()=>yn(pt)),t.set(p+"",y))}if(h===void 0)(!f||or(l,v)?.writable)&&(h=o(()=>yn(void 0)),g(h,ar(c)),t.set(v,h));else{f=h.v!==pt;var x=o(()=>ar(c));g(h,x)}var b=Reflect.getOwnPropertyDescriptor(l,v);if(b?.set&&b.set.call(u,c),!f){if(r&&typeof v=="string"){var S=t.get("length"),D=Number(v);Number.isInteger(D)&&D>=S.v&&g(S,D+1)}Mr(a)}return!0},ownKeys(l){s(a);var v=Reflect.ownKeys(l).filter(h=>{var f=t.get(h);return f===void 0||f.v!==pt});for(var[c,u]of t)u.v!==pt&&!(c in l)&&v.push(c);return v},setPrototypeOf(){go()}})}var kn,pi,gi,_i;function Ko(){if(kn===void 0){kn=window,pi=/Firefox/.test(navigator.userAgent);var e=Element.prototype,n=Node.prototype,t=Text.prototype;gi=or(n,"firstChild").get,_i=or(n,"nextSibling").get,ma(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),ma(t)&&(t.__t=void 0)}}function pn(e=""){return document.createTextNode(e)}function xn(e){return gi.call(e)}function Dr(e){return _i.call(e)}function d(e,n){return xn(e)}function Te(e,n=!1){{var t=xn(e);return t instanceof Comment&&t.data===""?Dr(t):t}}function _(e,n=1,t=!1){let r=e;for(;n--;)r=Dr(r);return r}function Xo(e){e.textContent=""}function mi(){return!1}let wa=!1;function Go(){wa||(wa=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const n of e.target.elements)n.__on_r?.()})},{capture:!0}))}function Zo(e,n,t,r=!0){r&&t();for(var a of n)e.addEventListener(a,t);fs(()=>{for(var i of n)e.removeEventListener(i,t)})}function Zn(e){var n=Be,t=He;St(null),an(null);try{return e()}finally{St(n),an(t)}}function Jo(e,n,t,r=t){e.addEventListener(n,()=>Zn(t));const a=e.__on_r;a?e.__on_r=()=>{a(),r(!0)}:e.__on_r=()=>r(!0),Go()}function bi(e){He===null&&(Be===null&&uo(),vo()),Jn&&co()}function el(e,n){var t=n.last;t===null?n.last=n.first=e:(t.next=e,e.prev=t,n.last=e)}function cn(e,n,t){var r=He;r!==null&&(r.f&zt)!==0&&(e|=zt);var a={ctx:Ge,deps:null,nodes:null,f:e|Tt|Zt,first:null,fn:n,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,wv:0,ac:null};if(t)try{fr(a),a.f|=us}catch(l){throw Mt(a),l}else n!==null&&Qn(a);var i=a;if(t&&i.deps===null&&i.teardown===null&&i.nodes===null&&i.first===i.last&&(i.f&gr)===0&&(i=i.first,(e&ln)!==0&&(e&Vn)!==0&&i!==null&&(i.f|=Vn)),i!==null&&(i.parent=r,r!==null&&el(i,r),Be!==null&&(Be.f&ut)!==0&&(e&Xn)===0)){var o=Be;(o.effects??=[]).push(i)}return a}function Ar(){return Be!==null&&!rn}function fs(e){const n=cn(cs,null,!1);return vt(n,ct),n.teardown=e,n}function Os(e){bi();var n=He.f,t=!Be&&(n&mn)!==0&&(n&us)===0;if(t){var r=Ge;(r.e??=[]).push(e)}else return yi(e)}function yi(e){return cn(Js|ni,e,!1)}function tl(e){return bi(),cn(cs|ni,e,!0)}function nl(e){nn.ensure();const n=cn(Xn|gr,e,!0);return(t={})=>new Promise(r=>{t.outro?Dn(n,()=>{Mt(n),r(void 0)}):(Mt(n),r(void 0))})}function Lt(e){return cn(Js,e,!1)}function Z(e,n){var t=Ge,r={effect:null,ran:!1,deps:e};t.l.$.push(r),r.effect=mr(()=>{e(),!r.ran&&(r.ran=!0,E(n))})}function Ht(){var e=Ge;mr(()=>{for(var n of e.l.$){n.deps();var t=n.effect;(t.f&ct)!==0&&vt(t,Jt),br(t)&&fr(t),n.ran=!1}})}function rl(e){return cn(ea|gr,e,!0)}function mr(e,n=0){return cn(cs|n,e,!0)}function fe(e,n=[],t=[],r=[]){Ho(r,n,t,a=>{cn(cs,()=>e(...a.map(s)),!0)})}function sa(e,n=0){var t=cn(ln|n,e,!0);return t}function Dt(e){return cn(mn|gr,e,!0)}function wi(e){var n=e.teardown;if(n!==null){const t=Jn,r=Be;ka(!0),St(null);try{n.call(null)}finally{ka(t),St(r)}}}function ki(e,n=!1){var t=e.first;for(e.first=e.last=null;t!==null;){const a=t.ac;a!==null&&Zn(()=>{a.abort(sr)});var r=t.next;(t.f&Xn)!==0?t.parent=null:Mt(t,n),t=r}}function sl(e){for(var n=e.first;n!==null;){var t=n.next;(n.f&mn)===0&&Mt(n),n=t}}function Mt(e,n=!0){var t=!1;(n||(e.f&ti)!==0)&&e.nodes!==null&&e.nodes.end!==null&&(xi(e.nodes.start,e.nodes.end),t=!0),ki(e,n&&!t),ns(e,0),vt(e,hn);var r=e.nodes&&e.nodes.t;if(r!==null)for(const i of r)i.stop();wi(e);var a=e.parent;a!==null&&a.first!==null&&Ei(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function xi(e,n){for(;e!==null;){var t=e===n?null:Dr(e);e.remove(),e=t}}function Ei(e){var n=e.parent,t=e.prev,r=e.next;t!==null&&(t.next=r),r!==null&&(r.prev=t),n!==null&&(n.first===e&&(n.first=r),n.last===e&&(n.last=t))}function Dn(e,n,t=!0){var r=[];Si(e,r,!0);var a=()=>{t&&Mt(e),n&&n()},i=r.length;if(i>0){var o=()=>--i||a();for(var l of r)l.out(o)}else a()}function Si(e,n,t){if((e.f&zt)===0){e.f^=zt;var r=e.nodes&&e.nodes.t;if(r!==null)for(const l of r)(l.is_global||t)&&n.push(l);for(var a=e.first;a!==null;){var i=a.next,o=(a.f&Vn)!==0||(a.f&mn)!==0&&(e.f&ln)!==0;Si(a,n,o?t:!1),a=i}}}function aa(e){Mi(e,!0)}function Mi(e,n){if((e.f&zt)!==0){e.f^=zt,(e.f&ct)===0&&(vt(e,Tt),Qn(e));for(var t=e.first;t!==null;){var r=t.next,a=(t.f&Vn)!==0||(t.f&mn)!==0;Mi(t,a?n:!1),t=r}var i=e.nodes&&e.nodes.t;if(i!==null)for(const o of i)(o.is_global||n)&&o.in()}}function Ti(e,n){if(e.nodes)for(var t=e.nodes.start,r=e.nodes.end;t!==null;){var a=t===r?null:Dr(t);n.append(t),t=a}}let Fn=!1;function ts(e){Fn=e}let Jn=!1;function ka(e){Jn=e}let Be=null,rn=!1;function St(e){Be=e}let He=null;function an(e){He=e}let gn=null;function $i(e){Be!==null&&(gn===null?gn=[e]:gn.push(e))}let bt=null,Ct=0,jt=null;function al(e){jt=e}let Ai=1,Cr=0,qn=Cr;function xa(e){qn=e}function Ci(){return++Ai}function br(e){var n=e.f;if((n&Tt)!==0)return!0;if(n&ut&&(e.f&=~Yn),(n&Jt)!==0){var t=e.deps;if(t!==null)for(var r=t.length,a=0;a<r;a++){var i=t[a];if(br(i)&&di(i),i.wv>e.wv)return!0}(n&Zt)!==0&&qt===null&&vt(e,ct)}return!1}function Pi(e,n,t=!0){var r=e.reactions;if(r!==null&&!gn?.includes(e))for(var a=0;a<r.length;a++){var i=r[a];(i.f&ut)!==0?Pi(i,n,!1):n===i&&(t?vt(i,Tt):(i.f&ct)!==0&&vt(i,Jt),Qn(i))}}function Ri(e){var n=bt,t=Ct,r=jt,a=Be,i=gn,o=Ge,l=rn,v=qn,c=e.f;bt=null,Ct=0,jt=null,Be=(c&(mn|Xn))===0?e:null,gn=null,vr(e.ctx),rn=!1,qn=++Cr,e.ac!==null&&(Zn(()=>{e.ac.abort(sr)}),e.ac=null);try{e.f|=Is;var u=e.fn,h=u(),f=e.deps;if(bt!==null){var p;if(ns(e,Ct),f!==null&&Ct>0)for(f.length=Ct+bt.length,p=0;p<bt.length;p++)f[Ct+p]=bt[p];else e.deps=f=bt;if(Ar()&&(e.f&Zt)!==0)for(p=Ct;p<f.length;p++)(f[p].reactions??=[]).push(e)}else f!==null&&Ct<f.length&&(ns(e,Ct),f.length=Ct);if(jr()&&jt!==null&&!rn&&f!==null&&(e.f&(ut|Jt|Tt))===0)for(p=0;p<jt.length;p++)Pi(jt[p],e);return a!==null&&a!==e&&(Cr++,jt!==null&&(r===null?r=jt:r.push(...jt))),(e.f&Mn)!==0&&(e.f^=Mn),h}catch(y){return oi(y)}finally{e.f^=Is,bt=n,Ct=t,jt=r,Be=a,gn=i,vr(o),rn=l,qn=v}}function il(e,n){let t=n.reactions;if(t!==null){var r=eo.call(t,e);if(r!==-1){var a=t.length-1;a===0?t=n.reactions=null:(t[r]=t[a],t.pop())}}t===null&&(n.f&ut)!==0&&(bt===null||!bt.includes(n))&&(vt(n,Jt),(n.f&Zt)!==0&&(n.f^=Zt,n.f&=~Yn),ui(n),ns(n,0))}function ns(e,n){var t=e.deps;if(t!==null)for(var r=n;r<t.length;r++)il(e,t[r])}function fr(e){var n=e.f;if((n&hn)===0){vt(e,ct);var t=He,r=Fn;He=e,Fn=!0;try{(n&(ln|ao))!==0?sl(e):ki(e),wi(e);var a=Ri(e);e.teardown=typeof a=="function"?a:null,e.wv=Ai;var i;zs&&Io&&(e.f&Tt)!==0&&e.deps}finally{Fn=r,He=t}}}async function lr(){await Promise.resolve(),Oo()}function s(e){var n=e.f,t=(n&ut)!==0;if(Be!==null&&!rn){var r=He!==null&&(He.f&hn)!==0;if(!r&&!gn?.includes(e)){var a=Be.deps;if((Be.f&Is)!==0)e.rv<Cr&&(e.rv=Cr,bt===null&&a!==null&&a[Ct]===e?Ct++:bt===null?bt=[e]:bt.includes(e)||bt.push(e));else{(Be.deps??=[]).push(e);var i=e.reactions;i===null?e.reactions=[Be]:i.includes(Be)||i.push(Be)}}}if(Jn){if(Tn.has(e))return Tn.get(e);if(t){var o=e,l=o.v;return((o.f&ct)===0&&o.reactions!==null||zi(o))&&(l=ra(o)),Tn.set(o,l),l}}else t&&(!qt?.has(e)||Ve?.is_fork&&!Ar())&&(o=e,br(o)&&di(o),Fn&&Ar()&&(o.f&Zt)===0&&Li(o));if(qt?.has(e))return qt.get(e);if((e.f&Mn)!==0)throw e.v;return e.v}function Li(e){if(e.deps!==null){e.f^=Zt;for(const n of e.deps)(n.reactions??=[]).push(e),(n.f&ut)!==0&&(n.f&Zt)===0&&Li(n)}}function zi(e){if(e.v===pt)return!0;if(e.deps===null)return!1;for(const n of e.deps)if(Tn.has(n)||(n.f&ut)!==0&&zi(n))return!0;return!1}function E(e){var n=rn;try{return rn=!0,e()}finally{rn=n}}const ol=-7169;function vt(e,n){e.f=e.f&ol|n}function j(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(On in e)Ds(e);else if(!Array.isArray(e))for(let n in e){const t=e[n];typeof t=="object"&&t&&On in t&&Ds(t)}}}function Ds(e,n=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!n.has(e)){n.add(e),e instanceof Date&&e.getTime();for(let r in e)try{Ds(e[r],n)}catch{}const t=Zs(e);if(t!==Object.prototype&&t!==Array.prototype&&t!==Map.prototype&&t!==Set.prototype&&t!==Date.prototype){const r=Ja(t);for(let a in r){const i=r[a].get;if(i)try{i.call(e)}catch{}}}}}const ll=["touchstart","touchmove"];function cl(e){return ll.includes(e)}const vl=new Set,Ea=new Set;function ul(e,n,t,r={}){function a(i){if(r.capture||xr.call(n,i),!i.cancelBubble)return Zn(()=>t?.call(this,i))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Gn(()=>{n.addEventListener(e,a,r)}):n.addEventListener(e,a,r),a}function C(e,n,t,r,a){var i={capture:r,passive:a},o=ul(e,n,t,i);(n===document.body||n===window||n===document||n instanceof HTMLMediaElement)&&fs(()=>{n.removeEventListener(e,o,i)})}let Sa=null;function xr(e){var n=this,t=n.ownerDocument,r=e.type,a=e.composedPath?.()||[],i=a[0]||e.target;Sa=e;var o=0,l=Sa===e&&e.__root;if(l){var v=a.indexOf(l);if(v!==-1&&(n===document||n===window)){e.__root=n;return}var c=a.indexOf(n);if(c===-1)return;v<=c&&(o=v)}if(i=a[o]||e.target,i!==n){Za(e,"currentTarget",{configurable:!0,get(){return i||t}});var u=Be,h=He;St(null),an(null);try{for(var f,p=[];i!==null;){var y=i.assignedSlot||i.parentNode||i.host||null;try{var x=i["__"+r];x!=null&&(!i.disabled||e.target===i)&&x.call(i,e)}catch(b){f?p.push(b):f=b}if(e.cancelBubble||y===n||y===null)break;i=y}if(f){for(let b of p)queueMicrotask(()=>{throw b});throw f}}finally{e.__root=n,delete e.currentTarget,St(u),an(h)}}}function Ii(e){var n=document.createElement("template");return n.innerHTML=e.replaceAll("<!>","<!---->"),n.content}function Pr(e,n){var t=He;t.nodes===null&&(t.nodes={start:e,end:n,a:null,t:null})}function M(e,n){var t=(n&Po)!==0,r=(n&Ro)!==0,a,i=!e.startsWith("<!>");return()=>{a===void 0&&(a=Ii(i?e:"<!>"+e),t||(a=xn(a)));var o=r||pi?document.importNode(a,!0):a.cloneNode(!0);if(t){var l=xn(o),v=o.lastChild;Pr(l,v)}else Pr(o,o);return o}}function zn(e=""){{var n=pn(e+"");return Pr(n,n),n}}function Ye(){var e=document.createDocumentFragment(),n=document.createComment(""),t=pn();return e.append(n,t),Pr(n,t),e}function m(e,n){e!==null&&e.before(n)}let Fs=!0;function de(e,n){var t=n==null?"":typeof n=="object"?n+"":n;t!==(e.__t??=e.nodeValue)&&(e.__t=t,e.nodeValue=t+"")}function dl(e,n){return fl(e,n)}const er=new Map;function fl(e,{target:n,anchor:t,props:r={},events:a,context:i,intro:o=!0}){Ko();var l=new Set,v=h=>{for(var f=0;f<h.length;f++){var p=h[f];if(!l.has(p)){l.add(p);var y=cl(p);n.addEventListener(p,xr,{passive:y});var x=er.get(p);x===void 0?(document.addEventListener(p,xr,{passive:y}),er.set(p,1)):er.set(p,x+1)}}};v(ls(vl)),Ea.add(v);var c=void 0,u=nl(()=>{var h=t??n.appendChild(pn());return Bo(h,{pending:()=>{}},f=>{if(i){dt({});var p=Ge;p.c=i}a&&(r.$$events=a),Fs=o,c=e(f,r)||{},Fs=!0,i&&ft()}),()=>{for(var f of l){n.removeEventListener(f,xr);var p=er.get(f);--p===0?(document.removeEventListener(f,xr),er.delete(f)):er.set(f,p)}Ea.delete(v),h!==t&&h.parentNode?.removeChild(h)}});return hl.set(c,u),c}let hl=new WeakMap;class pl{anchor;#e=new Map;#t=new Map;#n=new Map;#r=new Set;#l=!0;constructor(n,t=!0){this.anchor=n,this.#l=t}#a=()=>{var n=Ve;if(this.#e.has(n)){var t=this.#e.get(n),r=this.#t.get(t);if(r)aa(r),this.#r.delete(t);else{var a=this.#n.get(t);a&&(this.#t.set(t,a.effect),this.#n.delete(t),a.fragment.lastChild.remove(),this.anchor.before(a.fragment),r=a.effect)}for(const[i,o]of this.#e){if(this.#e.delete(i),i===n)break;const l=this.#n.get(o);l&&(Mt(l.effect),this.#n.delete(o))}for(const[i,o]of this.#t){if(i===t||this.#r.has(i))continue;const l=()=>{if(Array.from(this.#e.values()).includes(i)){var c=document.createDocumentFragment();Ti(o,c),c.append(pn()),this.#n.set(i,{effect:o,fragment:c})}else Mt(o);this.#r.delete(i),this.#t.delete(i)};this.#l||!r?(this.#r.add(i),Dn(o,l,!1)):l()}}};#s=n=>{this.#e.delete(n);const t=Array.from(this.#e.values());for(const[r,a]of this.#n)t.includes(r)||(Mt(a.effect),this.#n.delete(r))};ensure(n,t){var r=Ve,a=mi();if(t&&!this.#t.has(n)&&!this.#n.has(n))if(a){var i=document.createDocumentFragment(),o=pn();i.append(o),this.#n.set(n,{effect:Dt(()=>t(o)),fragment:i})}else this.#t.set(n,Dt(()=>t(this.anchor)));if(this.#e.set(r,n),a){for(const[l,v]of this.#t)l===n?r.skipped_effects.delete(v):r.skipped_effects.add(v);for(const[l,v]of this.#n)l===n?r.skipped_effects.delete(v.effect):r.skipped_effects.add(v.effect);r.oncommit(this.#a),r.ondiscard(this.#s)}else this.#a()}}function F(e,n,t=!1){var r=new pl(e),a=t?Vn:0;function i(o,l){r.ensure(o,l)}sa(()=>{var o=!1;n((l,v=!0)=>{o=!0,i(v,l)}),o||i(!1,null)},a)}function _n(e,n){return n}function gl(e,n,t){for(var r=[],a=n.length,i,o=n.length,l=0;l<a;l++){let h=n[l];Dn(h,()=>{if(i){if(i.pending.delete(h),i.done.add(h),i.pending.size===0){var f=e.outrogroups;qs(ls(i.done)),f.delete(i),f.size===0&&(e.outrogroups=null)}}else o-=1},!1)}if(o===0){var v=r.length===0&&t!==null;if(v){var c=t,u=c.parentNode;Xo(u),u.append(c),e.items.clear()}qs(n,!v)}else i={pending:new Set(n),done:new Set},(e.outrogroups??=new Set).add(i)}function qs(e,n=!0){for(var t=0;t<e.length;t++)Mt(e[t],n)}var Ma;function Bt(e,n,t,r,a,i=null){var o=e,l=new Map,v=(n&ri)!==0;if(v){var c=e;o=c.appendChild(pn())}var u=null,h=nt(()=>{var S=t();return os(S)?S:S==null?[]:ls(S)}),f,p=!0;function y(){b.fallback=u,_l(b,f,o,n,r),u!==null&&(f.length===0?(u.f&dn)===0?aa(u):(u.f^=dn,Er(u,null,o)):Dn(u,()=>{u=null}))}var x=sa(()=>{f=s(h);for(var S=f.length,D=new Set,q=Ve,J=mi(),U=0;U<S;U+=1){var G=f[U],H=r(G,U),A=p?null:l.get(H);A?(A.v&&dr(A.v,G),A.i&&dr(A.i,U),J&&q.skipped_effects.delete(A.e)):(A=ml(l,p?o:Ma??=pn(),G,H,U,a,n,t),p||(A.e.f|=dn),l.set(H,A)),D.add(H)}if(S===0&&i&&!u&&(p?u=Dt(()=>i(o)):(u=Dt(()=>i(Ma??=pn())),u.f|=dn)),!p)if(J){for(const[W,me]of l)D.has(W)||q.skipped_effects.add(me.e);q.oncommit(y),q.ondiscard(()=>{})}else y();s(h)}),b={effect:x,items:l,outrogroups:null,fallback:u};p=!1}function _l(e,n,t,r,a){var i=(r&wo)!==0,o=n.length,l=e.items,v=e.effect.first,c,u=null,h,f=[],p=[],y,x,b,S;if(i)for(S=0;S<o;S+=1)y=n[S],x=a(y,S),b=l.get(x).e,(b.f&dn)===0&&(b.nodes?.a?.measure(),(h??=new Set).add(b));for(S=0;S<o;S+=1){if(y=n[S],x=a(y,S),b=l.get(x).e,e.outrogroups!==null)for(const me of e.outrogroups)me.pending.delete(b),me.done.delete(b);if((b.f&dn)!==0)if(b.f^=dn,b===v)Er(b,null,t);else{var D=u?u.next:v;b===e.effect.last&&(e.effect.last=b.prev),b.prev&&(b.prev.next=b.next),b.next&&(b.next.prev=b.prev),wn(e,u,b),wn(e,b,D),Er(b,D,t),u=b,f=[],p=[],v=u.next;continue}if((b.f&zt)!==0&&(aa(b),i&&(b.nodes?.a?.unfix(),(h??=new Set).delete(b))),b!==v){if(c!==void 0&&c.has(b)){if(f.length<p.length){var q=p[0],J;u=q.prev;var U=f[0],G=f[f.length-1];for(J=0;J<f.length;J+=1)Er(f[J],q,t);for(J=0;J<p.length;J+=1)c.delete(p[J]);wn(e,U.prev,G.next),wn(e,u,U),wn(e,G,q),v=q,u=G,S-=1,f=[],p=[]}else c.delete(b),Er(b,v,t),wn(e,b.prev,b.next),wn(e,b,u===null?e.effect.first:u.next),wn(e,u,b),u=b;continue}for(f=[],p=[];v!==null&&v!==b;)(c??=new Set).add(v),p.push(v),v=v.next;if(v===null)continue}(b.f&dn)===0&&f.push(b),u=b,v=b.next}if(e.outrogroups!==null){for(const me of e.outrogroups)me.pending.size===0&&(qs(ls(me.done)),e.outrogroups?.delete(me));e.outrogroups.size===0&&(e.outrogroups=null)}if(v!==null||c!==void 0){var H=[];if(c!==void 0)for(b of c)(b.f&zt)===0&&H.push(b);for(;v!==null;)(v.f&zt)===0&&v!==e.fallback&&H.push(v),v=v.next;var A=H.length;if(A>0){var W=(r&ri)!==0&&o===0?t:null;if(i){for(S=0;S<A;S+=1)H[S].nodes?.a?.measure();for(S=0;S<A;S+=1)H[S].nodes?.a?.fix()}gl(e,H,W)}}i&&Gn(()=>{if(h!==void 0)for(b of h)b.nodes?.a?.apply()})}function ml(e,n,t,r,a,i,o,l){var v=(o&bo)!==0?(o&ko)===0?$(t,!1,!1):Wn(t):null,c=(o&yo)!==0?Wn(a):null;return{v,i:c,e:Dt(()=>(i(n,v??t,c??a,l),()=>{e.delete(r)}))}}function Er(e,n,t){if(e.nodes)for(var r=e.nodes.start,a=e.nodes.end,i=n&&(n.f&dn)===0?n.nodes.start:t;r!==null;){var o=Dr(r);if(i.before(r),r===a)return;r=o}}function wn(e,n,t){n===null?e.effect.first=t:n.next=t,t===null?e.effect.last=n:t.prev=n}function ie(e,n,t=!1,r=!1,a=!1){var i=e,o="";fe(()=>{var l=He;if(o!==(o=n()??"")&&(l.nodes!==null&&(xi(l.nodes.start,l.nodes.end),l.nodes=null),o!=="")){var v=o+"";t?v=`<svg>${v}</svg>`:r&&(v=`<math>${v}</math>`);var c=Ii(v);if((t||r)&&(c=xn(c)),Pr(xn(c),c.lastChild),t||r)for(;xn(c);)i.before(xn(c));else i.before(c)}})}function Wr(e,n,t,r,a){var i=n.$$slots?.[t],o=!1;i===!0&&(i=n[t==="default"?"children":t],o=!0),i===void 0||i(e,o?()=>r:r)}const bl=()=>performance.now(),un={tick:e=>requestAnimationFrame(e),now:()=>bl(),tasks:new Set};function Ni(){const e=un.now();un.tasks.forEach(n=>{n.c(e)||(un.tasks.delete(n),n.f())}),un.tasks.size!==0&&un.tick(Ni)}function yl(e){let n;return un.tasks.size===0&&un.tick(Ni),{promise:new Promise(t=>{un.tasks.add(n={c:e,f:t})}),abort(){un.tasks.delete(n)}}}function Ur(e,n){Zn(()=>{e.dispatchEvent(new CustomEvent(n))})}function wl(e){if(e==="float")return"cssFloat";if(e==="offset")return"cssOffset";if(e.startsWith("--"))return e;const n=e.split("-");return n.length===1?n[0]:n[0]+n.slice(1).map(t=>t[0].toUpperCase()+t.slice(1)).join("")}function Ta(e){const n={},t=e.split(";");for(const r of t){const[a,i]=r.split(":");if(!a||i===void 0)break;const o=wl(a.trim());n[o]=i.trim()}return n}const kl=e=>e;function wt(e,n,t,r){var a=(e&$o)!==0,i=(e&Ao)!==0,o=a&&i,l=(e&Co)!==0,v=o?"both":a?"in":"out",c,u=n.inert,h=n.style.overflow,f,p;function y(){return Zn(()=>c??=t()(n,r?.()??{},{direction:v}))}var x={is_global:l,in(){if(n.inert=u,!a){p?.abort(),p?.reset?.();return}i||f?.abort(),Ur(n,"introstart"),f=Bs(n,y(),p,1,()=>{Ur(n,"introend"),f?.abort(),f=c=void 0,n.style.overflow=h})},out(q){if(!i){q?.(),c=void 0;return}n.inert=!0,Ur(n,"outrostart"),p=Bs(n,y(),f,0,()=>{Ur(n,"outroend"),q?.()})},stop:()=>{f?.abort(),p?.abort()}},b=He;if((b.nodes.t??=[]).push(x),a&&Fs){var S=l;if(!S){for(var D=b.parent;D&&(D.f&Vn)!==0;)for(;(D=D.parent)&&(D.f&ln)===0;);S=!D||(D.f&us)!==0}S&&Lt(()=>{E(()=>x.in())})}}function Bs(e,n,t,r,a){var i=r===1;if(ro(n)){var o,l=!1;return Gn(()=>{if(!l){var b=n({direction:i?"in":"out"});o=Bs(e,b,t,r,a)}}),{abort:()=>{l=!0,o?.abort()},deactivate:()=>o.deactivate(),reset:()=>o.reset(),t:()=>o.t()}}if(t?.deactivate(),!n?.duration)return a(),{abort:Rt,deactivate:Rt,reset:Rt,t:()=>r};const{delay:v=0,css:c,tick:u,easing:h=kl}=n;var f=[];if(i&&t===void 0&&(u&&u(0,1),c)){var p=Ta(c(0,1));f.push(p,p)}var y=()=>1-r,x=e.animate(f,{duration:v,fill:"forwards"});return x.onfinish=()=>{x.cancel();var b=t?.t()??1-r;t?.abort();var S=r-b,D=n.duration*Math.abs(S),q=[];if(D>0){var J=!1;if(c)for(var U=Math.ceil(D/16.666666666666668),G=0;G<=U;G+=1){var H=b+S*h(G/U),A=Ta(c(H,1-H));q.push(A),J||=A.overflow==="hidden"}J&&(e.style.overflow="hidden"),y=()=>{var W=x.currentTime;return b+S*h(W/D)},u&&yl(()=>{if(x.playState!=="running")return!1;var W=y();return u(W,1-W),!0})}x=e.animate(q,{duration:D,fill:"forwards"}),x.onfinish=()=>{y=()=>r,u?.(r,1-r),a()}},{abort:()=>{x&&(x.cancel(),x.effect=null,x.onfinish=Rt)},deactivate:()=>{a=Rt},reset:()=>{r===0&&u?.(1,0)},t:()=>y()}}function ia(e,n,t){Lt(()=>{var r=E(()=>n(e,t?.())||{});if(t&&r?.update){var a=!1,i={};mr(()=>{var o=t();j(o),a&&na(i,o)&&(i=o,r.update(o))}),a=!0}if(r?.destroy)return()=>r.destroy()})}const $a=[...` 	
\r\fÂ \v\uFEFF`];function xl(e,n,t){var r=e==null?"":""+e;if(n&&(r=r?r+" "+n:n),t){for(var a in t)if(t[a])r=r?r+" "+a:a;else if(r.length)for(var i=a.length,o=0;(o=r.indexOf(a,o))>=0;){var l=o+i;(o===0||$a.includes(r[o-1]))&&(l===r.length||$a.includes(r[l]))?r=(o===0?"":r.substring(0,o))+r.substring(l+1):o=l}}return r===""?null:r}function Aa(e,n=!1){var t=n?" !important;":";",r="";for(var a in e){var i=e[a];i!=null&&i!==""&&(r+=" "+a+": "+i+t)}return r}function xs(e){return e[0]!=="-"||e[1]!=="-"?e.toLowerCase():e}function El(e,n){if(n){var t="",r,a;if(Array.isArray(n)?(r=n[0],a=n[1]):r=n,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var i=!1,o=0,l=!1,v=[];r&&v.push(...Object.keys(r).map(xs)),a&&v.push(...Object.keys(a).map(xs));var c=0,u=-1;const x=e.length;for(var h=0;h<x;h++){var f=e[h];if(l?f==="/"&&e[h-1]==="*"&&(l=!1):i?i===f&&(i=!1):f==="/"&&e[h+1]==="*"?l=!0:f==='"'||f==="'"?i=f:f==="("?o++:f===")"&&o--,!l&&i===!1&&o===0){if(f===":"&&u===-1)u=h;else if(f===";"||h===x-1){if(u!==-1){var p=xs(e.substring(c,u).trim());if(!v.includes(p)){f!==";"&&h++;var y=e.substring(c,h).trim();t+=" "+y+";"}}c=h+1,u=-1}}}}return r&&(t+=Aa(r)),a&&(t+=Aa(a,!0)),t=t.trim(),t===""?null:t}return e==null?null:String(e)}function Fe(e,n,t,r,a,i){var o=e.__className;if(o!==t||o===void 0){var l=xl(t,r,i);l==null?e.removeAttribute("class"):e.className=l,e.__className=t}else if(i&&a!==i)for(var v in i){var c=!!i[v];(a==null||c!==!!a[v])&&e.classList.toggle(v,c)}return i}function Es(e,n={},t,r){for(var a in t){var i=t[a];n[a]!==i&&(t[a]==null?e.style.removeProperty(a):e.style.setProperty(a,i,r))}}function Je(e,n,t,r){var a=e.__style;if(a!==n){var i=El(n,r);i==null?e.removeAttribute("style"):e.style.cssText=i,e.__style=n}else r&&(Array.isArray(r)?(Es(e,t?.[0],r[0]),Es(e,t?.[1],r[1],"important")):Es(e,t,r));return r}const Sl=Symbol("is custom element"),Ml=Symbol("is html");function Tl(e,n){var t=ji(e);t.value===(t.value=n??void 0)||e.value===n&&(n!==0||e.nodeName!=="PROGRESS")||(e.value=n??"")}function yt(e,n,t,r){var a=ji(e);a[n]!==(a[n]=t)&&(n==="loading"&&(e[oo]=t),t==null?e.removeAttribute(n):typeof t!="string"&&$l(e).includes(n)?e[n]=t:e.setAttribute(n,t))}function ji(e){return e.__attributes??={[Sl]:e.nodeName.includes("-"),[Ml]:e.namespaceURI===Lo}}var Ca=new Map;function $l(e){var n=e.getAttribute("is")||e.nodeName,t=Ca.get(n);if(t)return t;Ca.set(n,t=[]);for(var r,a=e,i=Element.prototype;i!==a;){r=Ja(a);for(var o in r)r[o].set&&t.push(o);a=Zs(a)}return t}function hs(e,n,t=n){var r=new WeakSet;Jo(e,"input",async a=>{var i=a?e.defaultValue:e.value;if(i=Ss(e)?Ms(i):i,t(i),Ve!==null&&r.add(Ve),await lr(),i!==(i=n())){var o=e.selectionStart,l=e.selectionEnd,v=e.value.length;if(e.value=i??"",l!==null){var c=e.value.length;o===l&&l===v&&c>v?(e.selectionStart=c,e.selectionEnd=c):(e.selectionStart=o,e.selectionEnd=Math.min(l,c))}}}),E(n)==null&&e.value&&(t(Ss(e)?Ms(e.value):e.value),Ve!==null&&r.add(Ve)),mr(()=>{var a=n();if(e===document.activeElement){var i=Qr??Ve;if(r.has(i))return}Ss(e)&&a===Ms(e.value)||e.type==="date"&&!a&&!e.value||a!==e.value&&(e.value=a??"")})}function Ss(e){var n=e.type;return n==="number"||n==="range"}function Ms(e){return e===""?null:+e}class oa{#e=new WeakMap;#t;#n;static entries=new WeakMap;constructor(n){this.#n=n}observe(n,t){var r=this.#e.get(n)||new Set;return r.add(t),this.#e.set(n,r),this.#r().observe(n,this.#n),()=>{var a=this.#e.get(n);a.delete(t),a.size===0&&(this.#e.delete(n),this.#t.unobserve(n))}}#r(){return this.#t??(this.#t=new ResizeObserver(n=>{for(var t of n){oa.entries.set(t.target,t);for(var r of this.#e.get(t.target)||[])r(t)}}))}}var Al=new oa({box:"border-box"});function Pa(e,n,t){var r=Al.observe(e,()=>t(e[n]));Lt(()=>(E(()=>t(e[n])),r))}function Ra(e,n){return e===n||e?.[On]===n}function Cn(e={},n,t,r){return Lt(()=>{var a,i;return mr(()=>{a=i,i=[],E(()=>{e!==t(...i)&&(n(e,...i),a&&Ra(t(...a),e)&&n(null,...a))})}),()=>{Gn(()=>{i&&Ra(t(...i),e)&&n(null,...i)})}}),e}function La(e,n){Zo(window,["resize"],()=>Zn(()=>n(window[e])))}function Kt(e){return function(...n){var t=n[0];return t.stopPropagation(),e?.apply(this,n)}}function gt(e=!1){const n=Ge,t=n.l.u;if(!t)return;let r=()=>j(n.s);if(e){let a=0,i={};const o=Or(()=>{let l=!1;const v=n.s;for(const c in v)v[c]!==i[c]&&(i[c]=v[c],l=!0);return l&&a++,a});r=()=>s(o)}t.b.length&&tl(()=>{za(n,r),Jr(t.b)}),Os(()=>{const a=E(()=>t.m.map(so));return()=>{for(const i of a)typeof i=="function"&&i()}}),t.a.length&&Os(()=>{za(n,r),Jr(t.a)})}function za(e,n){if(e.l.s)for(const t of e.l.s)s(t);n()}function Rr(e,n){var t=e.$$events?.[n.type],r=os(t)?t.slice():t==null?[]:[t];for(var a of r)a.call(this,n)}function la(e,n,t){if(e==null)return n(void 0),t&&t(void 0),Rt;const r=E(()=>e.subscribe(n,t));return r.unsubscribe?()=>r.unsubscribe():r}const tr=[];function Cl(e,n){return{subscribe:De(e,n).subscribe}}function De(e,n=Rt){let t=null;const r=new Set;function a(l){if(na(e,l)&&(e=l,t)){const v=!tr.length;for(const c of r)c[1](),tr.push(c,e);if(v){for(let c=0;c<tr.length;c+=2)tr[c][0](tr[c+1]);tr.length=0}}}function i(l){a(l(e))}function o(l,v=Rt){const c=[l,v];return r.add(c),r.size===1&&(t=n(a,i)||Rt),l(e),()=>{r.delete(c),r.size===0&&t&&(t(),t=null)}}return{set:a,update:i,subscribe:o}}function Oi(e,n,t){const r=!Array.isArray(e),a=r?[e]:e;if(!a.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const i=n.length<2;return Cl(t,(o,l)=>{let v=!1;const c=[];let u=0,h=Rt;const f=()=>{if(u)return;h();const y=n(r?c[0]:c,o,l);i?o(y):h=typeof y=="function"?y:Rt},p=a.map((y,x)=>la(y,b=>{c[x]=b,u&=~(1<<x),v&&f()},()=>{u|=1<<x}));return v=!0,f(),function(){Jr(p),h(),v=!1}})}function qe(e){let n;return la(e,t=>n=t)(),n}let Hr=!1,Us=Symbol();function ke(e,n,t){const r=t[n]??={store:null,source:$(void 0),unsubscribe:Rt};if(r.store!==e&&!(Us in t))if(r.unsubscribe(),r.store=e??null,e==null)r.source.v=void 0,r.unsubscribe=Rt;else{var a=!0;r.unsubscribe=la(e,i=>{a?r.source.v=i:g(r.source,i)}),a=!1}return e&&Us in t?qe(e):s(r.source)}function It(){const e={};function n(){fs(()=>{for(var t in e)e[t].unsubscribe();Za(e,Us,{enumerable:!1,value:!0})})}return[e,n]}function Pl(e,n,t){return e.set(t),n}function Rl(e){var n=Hr;try{return Hr=!1,[e(),Hr]}finally{Hr=n}}function et(e,n,t,r){var a=!_r||(t&Eo)!==0,i=(t&Mo)!==0,o=(t&To)!==0,l=r,v=!0,c=()=>(v&&(v=!1,l=o?E(r):r),l),u;if(i){var h=On in e||io in e;u=or(e,n)?.set??(h&&n in e?q=>e[n]=q:void 0)}var f,p=!1;i?[f,p]=Rl(()=>e[n]):f=e[n],f===void 0&&r!==void 0&&(f=c(),u&&(a&&ho(),u(f)));var y;if(a?y=()=>{var q=e[n];return q===void 0?c():(v=!0,q)}:y=()=>{var q=e[n];return q!==void 0&&(l=void 0),q===void 0?l:q},a&&(t&So)===0)return y;if(u){var x=e.$$legacy;return(function(q,J){return arguments.length>0?((!a||!J||x||p)&&u(J?y():q),q):y()})}var b=!1,S=((t&xo)!==0?Or:nt)(()=>(b=!1,y()));i&&s(S);var D=He;return(function(q,J){if(arguments.length>0){const U=J?s(S):a&&i?ar(q):q;return g(S,U),b=!0,l!==void 0&&(l=U),q}return Jn&&b||(D.f&hn)!==0?S.v:s(S)})}function yr(e){Ge===null&&ta(),_r&&Ge.l!==null?Il(Ge).m.push(e):Os(()=>{const n=E(e);if(typeof n=="function")return n})}function Ll(e){Ge===null&&ta(),yr(()=>()=>E(e))}function zl(e,n,{bubbles:t=!1,cancelable:r=!1}={}){return new CustomEvent(e,{detail:n,bubbles:t,cancelable:r})}function ca(){const e=Ge;return e===null&&ta(),(n,t,r)=>{const a=e.s.$$events?.[n];if(a){const i=os(a)?a.slice():[a],o=zl(n,t,r);for(const l of i)l.call(e.x,o);return!o.defaultPrevented}return!0}}function Il(e){var n=e.l;return n.u??={a:[],b:[],m:[]}}const Nl="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Nl);No();const jl=e=>e;function Di(e){const n=e-1;return n*n*n+1}function Ia(e){const n=typeof e=="string"&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return n?[parseFloat(n[1]),n[2]||"px"]:[e,"px"]}function on(e,{delay:n=0,duration:t=400,easing:r=jl}={}){const a=+getComputedStyle(e).opacity;return{delay:n,duration:t,easing:r,css:i=>`opacity: ${i*a}`}}function Fi(e,{delay:n=0,duration:t=400,easing:r=Di,x:a=0,y:i=0,opacity:o=0}={}){const l=getComputedStyle(e),v=+l.opacity,c=l.transform==="none"?"":l.transform,u=v*(1-o),[h,f]=Ia(a),[p,y]=Ia(i);return{delay:n,duration:t,easing:r,css:(x,b)=>`
			transform: ${c} translate(${(1-x)*h}${f}, ${(1-x)*p}${y});
			opacity: ${v-u*b}`}}function va(e,{delay:n=0,duration:t=400,easing:r=Di,start:a=0,opacity:i=0}={}){const o=getComputedStyle(e),l=+o.opacity,v=o.transform==="none"?"":o.transform,c=1-a,u=l*(1-i);return{delay:n,duration:t,easing:r,css:(h,f)=>`
			transform: ${v} scale(${1-c*f});
			opacity: ${l-u*f}
		`}}const Ol='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-arrows-shuffle-2"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 4l3 3l-3 3" /><path d="M18 20l3 -3l-3 -3" /><path d="M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5" /><path d="M3 17h3a5 5 0 0 0 5 -5a5 5 0 0 1 5 -5h5" /></svg>',Dl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-deezer"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 16.5h2v.5h-2z" /><path d="M8 16.5h2.5v.5h-2.5z" /><path d="M16 17h-2.5v-.5h2.5z" /><path d="M21.5 17h-2.5v-.5h2.5z" /><path d="M21.5 13h-2.5v.5h2.5z" /><path d="M21.5 9.5h-2.5v.5h2.5z" /><path d="M21.5 6h-2.5v.5h2.5z" /><path d="M16 13h-2.5v.5h2.5z" /><path d="M8 13.5h2.5v-.5h-2.5z" /><path d="M8 9.5h2.5v.5h-2.5z" /></svg>',Fl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-compact-down"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 11l8 3l8 -3" /></svg>',ql='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-compact-left"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M13 20l-3 -8l3 -8" /></svg>',Bl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-left"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 6l-6 6l6 6" /></svg>',Na='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-disc"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0" /><path d="M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M7 12a5 5 0 0 1 5 -5" /><path d="M12 17a5 5 0 0 0 5 -5" /></svg>',Ul='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-grip-horizontal"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M5 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M12 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M12 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M19 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M19 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /></svg>',Hl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-heart"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M19.5 12.572l-7.5 7.428l-7.5 -7.428a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572" /></svg>',Vl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-heart"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6.979 3.074a6 6 0 0 1 4.988 1.425l.037 .033l.034 -.03a6 6 0 0 1 4.733 -1.44l.246 .036a6 6 0 0 1 3.364 10.008l-.18 .185l-.048 .041l-7.45 7.379a1 1 0 0 1 -1.313 .082l-.094 -.082l-7.493 -7.422a6 6 0 0 1 3.176 -10.215z" /></svg>',Yl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-menu-2"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 6l16 0" /><path d="M4 12l16 0" /><path d="M4 18l16 0" /></svg>',Ts='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-music"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 17a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /><path d="M13 17a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /><path d="M9 17v-13h10v13" /><path d="M9 8h10" /></svg>',Ql='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-pause"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z" /><path d="M17 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z" /></svg>',Wl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-player-play"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 4v16l13 -8z" /></svg>',Kl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-play"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 4v16a1 1 0 0 0 1.524 .852l13 -8a1 1 0 0 0 0 -1.704l-13 -8a1 1 0 0 0 -1.524 .852z" /></svg>',Xl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-skip-back"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M19.496 4.136l-12 7a1 1 0 0 0 0 1.728l12 7a1 1 0 0 0 1.504 -.864v-14a1 1 0 0 0 -1.504 -.864z" /><path d="M4 4a1 1 0 0 1 .993 .883l.007 .117v14a1 1 0 0 1 -1.993 .117l-.007 -.117v-14a1 1 0 0 1 1 -1z" /></svg>',Gl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-skip-forward"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 5v14a1 1 0 0 0 1.504 .864l12 -7a1 1 0 0 0 0 -1.728l-12 -7a1 1 0 0 0 -1.504 .864z" /><path d="M20 4a1 1 0 0 1 .993 .883l.007 .117v14a1 1 0 0 1 -1.993 .117l-.007 -.117v-14a1 1 0 0 1 1 -1z" /></svg>',Zl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-playlist"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0" /><path d="M17 17v-13h4" /><path d="M13 5h-10" /><path d="M3 9l10 0" /><path d="M9 13h-6" /></svg>',Jl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-radio"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3l-9.371 3.749a1 1 0 0 0 -.629 .928v11.323a1 1 0 0 0 1 1h14a1 1 0 0 0 1 -1v-11a1 1 0 0 0 -1 -1h-14.5" /><path d="M4 12h16" /><path d="M7 12v-2" /><path d="M17 16v.01" /><path d="M13 16v.01" /></svg>',ec='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-refresh"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4" /><path d="M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4" /></svg>',tc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-repeat"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 12v-3a3 3 0 0 1 3 -3h13m-3 -3l3 3l-3 3" /><path d="M20 12v3a3 3 0 0 1 -3 3h-13m3 3l-3 -3l3 -3" /></svg>',nc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-search"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0" /><path d="M21 21l-6 -6" /></svg>',rc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-settings"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z" /><path d="M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /></svg>',sc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-trash"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 7l16 0" /><path d="M10 11l0 6" /><path d="M14 11l0 6" /><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12" /><path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3" /></svg>',ac='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 8a5 5 0 0 1 0 8" /><path d="M17.7 5a9 9 0 0 1 0 14" /><path d="M6 15h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l3.5 -4.5a.8 .8 0 0 1 1.5 .5v14a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5" /></svg>',ic='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume-2"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 8a5 5 0 0 1 0 8" /><path d="M6 15h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l3.5 -4.5a.8 .8 0 0 1 1.5 .5v14a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5" /></svg>',oc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume-3"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 15h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l3.5 -4.5a.8 .8 0 0 1 1.5 .5v14a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5" /><path d="M16 10l4 4m0 -4l-4 4" /></svg>',lc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume-off"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 8a5 5 0 0 1 1.912 4.934m-1.377 2.602a5 5 0 0 1 -.535 .464" /><path d="M17.7 5a9 9 0 0 1 2.362 11.086m-1.676 2.299a9 9 0 0 1 -.686 .615" /><path d="M9.069 5.054l.431 -.554a.8 .8 0 0 1 1.5 .5v2m0 4v8a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l1.294 -1.664" /><path d="M3 3l18 18" /></svg>',cc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-x"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 6l-12 12" /><path d="M6 6l12 12" /></svg>',vc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-device-floppy"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2" /><path d="M12 14m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0" /><path d="M14 4l0 4l-6 0l0 -4" /></svg>',uc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-file-pencil"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3v4a1 1 0 0 0 1 1h4" /><path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z" /><path d="M10 18l5 -5a1.414 1.414 0 0 0 -2 -2l-5 5v2h2z" /></svg>',ja='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-plus"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 5l0 14" /><path d="M5 12l14 0" /></svg>',dc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-circle-check"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0" /><path d="M9 12l2 2l4 -4" /></svg>',fc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-dots"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /></svg>',hc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-sort-descending"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 6l9 0" /><path d="M4 12l7 0" /><path d="M4 18l7 0" /><path d="M15 15l3 3l3 -3" /><path d="M18 6l0 12" /></svg>',pc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-sort-ascending"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 6l7 0" /><path d="M4 12l7 0" /><path d="M4 18l9 0" /><path d="M15 9l3 -3l3 3" /><path d="M18 6l0 12" /></svg>',k={ARTISTS:Ts,ALBUMS:Na,GENRES:Ts,PLAYLISTS:Zl,RADIO:Jl,SEARCH:nc,PLAY:Kl,PLAY_OUTLINE:Wl,PAUSE:Ql,PREVIOUS:Xl,NEXT:Gl,SHUFFLE:Ol,REPEAT:tc,VOLUME_FULL:ac,VOLUME_MEDIUM:ic,VOLUME_MUTE:oc,VOLUME_OFF:lc,HEART:Hl,HEART_FILLED:Vl,SYNC:ec,SETTINGS:rc,CLOSE:cc,MENU:Yl,BACK:Bl,BACK_COMPACT:ql,CHEVRON_DOWN:Fl,DRAG_HANDLE:Ul,REMOVE:sc,DEEZER:Dl,SAVE:vc,EDIT:uc,ADD:ja,ACCEPT:dc,DOTS:fc,ADD_TO_PLAYLIST:ja,ALBUM_LINK:Na,ARTIST_LINK:Ts,SORT_DESC:hc,SORT_ASC:pc};function hr(e){if(!e||!e.image)return null;if(e.image.startsWith("http"))return e.image;let n="";return e.image==="local"?n=`${e.name}.jpg`:n=e.image,`/imagesw/radio-logos/thumbs/${encodeURIComponent(n)}`}function Oa(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}function gc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var $s={exports:{}},As={exports:{}},Da;function _c(){return Da||(Da=1,(function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(t,r){return t<<r|t>>>32-r},rotr:function(t,r){return t<<32-r|t>>>r},endian:function(t){if(t.constructor==Number)return n.rotl(t,8)&16711935|n.rotl(t,24)&4278255360;for(var r=0;r<t.length;r++)t[r]=n.endian(t[r]);return t},randomBytes:function(t){for(var r=[];t>0;t--)r.push(Math.floor(Math.random()*256));return r},bytesToWords:function(t){for(var r=[],a=0,i=0;a<t.length;a++,i+=8)r[i>>>5]|=t[a]<<24-i%32;return r},wordsToBytes:function(t){for(var r=[],a=0;a<t.length*32;a+=8)r.push(t[a>>>5]>>>24-a%32&255);return r},bytesToHex:function(t){for(var r=[],a=0;a<t.length;a++)r.push((t[a]>>>4).toString(16)),r.push((t[a]&15).toString(16));return r.join("")},hexToBytes:function(t){for(var r=[],a=0;a<t.length;a+=2)r.push(parseInt(t.substr(a,2),16));return r},bytesToBase64:function(t){for(var r=[],a=0;a<t.length;a+=3)for(var i=t[a]<<16|t[a+1]<<8|t[a+2],o=0;o<4;o++)a*8+o*6<=t.length*8?r.push(e.charAt(i>>>6*(3-o)&63)):r.push("=");return r.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/ig,"");for(var r=[],a=0,i=0;a<t.length;i=++a%4)i!=0&&r.push((e.indexOf(t.charAt(a-1))&Math.pow(2,-2*i+8)-1)<<i*2|e.indexOf(t.charAt(a))>>>6-i*2);return r}};As.exports=n})()),As.exports}var Cs,Fa;function qa(){if(Fa)return Cs;Fa=1;var e={utf8:{stringToBytes:function(n){return e.bin.stringToBytes(unescape(encodeURIComponent(n)))},bytesToString:function(n){return decodeURIComponent(escape(e.bin.bytesToString(n)))}},bin:{stringToBytes:function(n){for(var t=[],r=0;r<n.length;r++)t.push(n.charCodeAt(r)&255);return t},bytesToString:function(n){for(var t=[],r=0;r<n.length;r++)t.push(String.fromCharCode(n[r]));return t.join("")}}};return Cs=e,Cs}var Ps,Ba;function mc(){if(Ba)return Ps;Ba=1,Ps=function(t){return t!=null&&(e(t)||n(t)||!!t._isBuffer)};function e(t){return!!t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function n(t){return typeof t.readFloatLE=="function"&&typeof t.slice=="function"&&e(t.slice(0,0))}return Ps}var Ua;function bc(){return Ua||(Ua=1,(function(){var e=_c(),n=qa().utf8,t=mc(),r=qa().bin,a=function(i,o){i.constructor==String?o&&o.encoding==="binary"?i=r.stringToBytes(i):i=n.stringToBytes(i):t(i)?i=Array.prototype.slice.call(i,0):!Array.isArray(i)&&i.constructor!==Uint8Array&&(i=i.toString());for(var l=e.bytesToWords(i),v=i.length*8,c=1732584193,u=-271733879,h=-1732584194,f=271733878,p=0;p<l.length;p++)l[p]=(l[p]<<8|l[p]>>>24)&16711935|(l[p]<<24|l[p]>>>8)&4278255360;l[v>>>5]|=128<<v%32,l[(v+64>>>9<<4)+14]=v;for(var y=a._ff,x=a._gg,b=a._hh,S=a._ii,p=0;p<l.length;p+=16){var D=c,q=u,J=h,U=f;c=y(c,u,h,f,l[p+0],7,-680876936),f=y(f,c,u,h,l[p+1],12,-389564586),h=y(h,f,c,u,l[p+2],17,606105819),u=y(u,h,f,c,l[p+3],22,-1044525330),c=y(c,u,h,f,l[p+4],7,-176418897),f=y(f,c,u,h,l[p+5],12,1200080426),h=y(h,f,c,u,l[p+6],17,-1473231341),u=y(u,h,f,c,l[p+7],22,-45705983),c=y(c,u,h,f,l[p+8],7,1770035416),f=y(f,c,u,h,l[p+9],12,-1958414417),h=y(h,f,c,u,l[p+10],17,-42063),u=y(u,h,f,c,l[p+11],22,-1990404162),c=y(c,u,h,f,l[p+12],7,1804603682),f=y(f,c,u,h,l[p+13],12,-40341101),h=y(h,f,c,u,l[p+14],17,-1502002290),u=y(u,h,f,c,l[p+15],22,1236535329),c=x(c,u,h,f,l[p+1],5,-165796510),f=x(f,c,u,h,l[p+6],9,-1069501632),h=x(h,f,c,u,l[p+11],14,643717713),u=x(u,h,f,c,l[p+0],20,-373897302),c=x(c,u,h,f,l[p+5],5,-701558691),f=x(f,c,u,h,l[p+10],9,38016083),h=x(h,f,c,u,l[p+15],14,-660478335),u=x(u,h,f,c,l[p+4],20,-405537848),c=x(c,u,h,f,l[p+9],5,568446438),f=x(f,c,u,h,l[p+14],9,-1019803690),h=x(h,f,c,u,l[p+3],14,-187363961),u=x(u,h,f,c,l[p+8],20,1163531501),c=x(c,u,h,f,l[p+13],5,-1444681467),f=x(f,c,u,h,l[p+2],9,-51403784),h=x(h,f,c,u,l[p+7],14,1735328473),u=x(u,h,f,c,l[p+12],20,-1926607734),c=b(c,u,h,f,l[p+5],4,-378558),f=b(f,c,u,h,l[p+8],11,-2022574463),h=b(h,f,c,u,l[p+11],16,1839030562),u=b(u,h,f,c,l[p+14],23,-35309556),c=b(c,u,h,f,l[p+1],4,-1530992060),f=b(f,c,u,h,l[p+4],11,1272893353),h=b(h,f,c,u,l[p+7],16,-155497632),u=b(u,h,f,c,l[p+10],23,-1094730640),c=b(c,u,h,f,l[p+13],4,681279174),f=b(f,c,u,h,l[p+0],11,-358537222),h=b(h,f,c,u,l[p+3],16,-722521979),u=b(u,h,f,c,l[p+6],23,76029189),c=b(c,u,h,f,l[p+9],4,-640364487),f=b(f,c,u,h,l[p+12],11,-421815835),h=b(h,f,c,u,l[p+15],16,530742520),u=b(u,h,f,c,l[p+2],23,-995338651),c=S(c,u,h,f,l[p+0],6,-198630844),f=S(f,c,u,h,l[p+7],10,1126891415),h=S(h,f,c,u,l[p+14],15,-1416354905),u=S(u,h,f,c,l[p+5],21,-57434055),c=S(c,u,h,f,l[p+12],6,1700485571),f=S(f,c,u,h,l[p+3],10,-1894986606),h=S(h,f,c,u,l[p+10],15,-1051523),u=S(u,h,f,c,l[p+1],21,-2054922799),c=S(c,u,h,f,l[p+8],6,1873313359),f=S(f,c,u,h,l[p+15],10,-30611744),h=S(h,f,c,u,l[p+6],15,-1560198380),u=S(u,h,f,c,l[p+13],21,1309151649),c=S(c,u,h,f,l[p+4],6,-145523070),f=S(f,c,u,h,l[p+11],10,-1120210379),h=S(h,f,c,u,l[p+2],15,718787259),u=S(u,h,f,c,l[p+9],21,-343485551),c=c+D>>>0,u=u+q>>>0,h=h+J>>>0,f=f+U>>>0}return e.endian([c,u,h,f])};a._ff=function(i,o,l,v,c,u,h){var f=i+(o&l|~o&v)+(c>>>0)+h;return(f<<u|f>>>32-u)+o},a._gg=function(i,o,l,v,c,u,h){var f=i+(o&v|l&~v)+(c>>>0)+h;return(f<<u|f>>>32-u)+o},a._hh=function(i,o,l,v,c,u,h){var f=i+(o^l^v)+(c>>>0)+h;return(f<<u|f>>>32-u)+o},a._ii=function(i,o,l,v,c,u,h){var f=i+(l^(o|~v))+(c>>>0)+h;return(f<<u|f>>>32-u)+o},a._blocksize=16,a._digestsize=16,$s.exports=function(i,o){if(i==null)throw new Error("Illegal argument "+i);var l=e.wordsToBytes(a(i,o));return o&&o.asBytes?l:o&&o.asString?r.bytesToString(l):e.bytesToHex(l)}})()),$s.exports}var yc=bc();const wc=gc(yc),Ha=De("Disconnected"),Hs=De(null);let Rs;function je(e,n="info"){Hs.set({text:e,type:n}),Rs&&clearTimeout(Rs),Rs=setTimeout(()=>{Hs.set(null)},3e3)}const rs=De({isOpen:!1,title:"",message:"",confirmLabel:"Confirm",cancelLabel:"Cancel",onConfirm:null,type:"confirm",inputValue:"",placeholder:""});function $n({title:e="Confirm Action",message:n="Are you sure?",confirmLabel:t="Confirm",cancelLabel:r="Cancel",type:a="confirm",inputValue:i="",placeholder:o="",onConfirm:l=()=>{}}){rs.set({isOpen:!0,title:e,message:n,confirmLabel:t,cancelLabel:r,type:a,inputValue:i,placeholder:o,onConfirm:l})}function Ls(){rs.set({isOpen:!1,title:"",message:"",confirmLabel:"",cancelLabel:"",onConfirm:null,type:"confirm",inputValue:"",placeholder:""})}const it=De({state:"stop",volume:50,elapsed:0,duration:0,random:!1,repeat:!1,bitrate:0,format:"",song:0,songid:0}),Ut=De({title:"Not Playing",artist:"",album:"",file:"",stationName:null,id:null,pos:null}),ss=De(!1),Kr=De(!1),Vs=De(!1),Ys=De(!1),Pt=De("library"),Fr=De(null),Wt=De(!1),kc=localStorage.getItem("sidebarCollapsed")==="true",Qs=De(kc);Qs.subscribe(e=>{typeof localStorage<"u"&&localStorage.setItem("sidebarCollapsed",String(e))});const Rn=De([]),ua=De([]),ir=De([]),En=De(new Set),st=De(!1),Ft=De([{view:"root"}]),Bn=De([]),qi=De(0),Tr=De(""),Bi=De({});function xc(e,n){Bi.update(t=>({...t,[e]:n}))}function Ec(e){return qe(Bi)[e]||0}const da=De({isOpen:!1,track:null,context:{type:"general",playlistName:null,index:null},x:0,y:0,triggerRect:null});function Sc(){if(typeof navigator<"u"&&navigator.vibrate)try{navigator.vibrate(70)}catch{}}function Lr(e,n,t={}){if(!n&&t.type!=="playlist-card")return;Sc();let r=0,a=0,i=null,o=e.currentTarget;!o&&e.target&&e.target.closest&&(o=e.target.closest("button")||e.target),o&&o.getBoundingClientRect&&(i=o.getBoundingClientRect());const l=e.detail?.originalEvent||e;l.touches&&l.touches.length>0?(r=l.touches[0].clientX,a=l.touches[0].clientY):l.clientX&&(r=l.clientX,a=l.clientY);const v={type:"general",playlistName:null,index:null,...t};da.set({isOpen:!0,track:n,context:v,x:r,y:a,triggerRect:i})}function At(){da.set({isOpen:!1,track:null,context:{},x:0,y:0,triggerRect:null})}let Ws=null,Ks=null;function Mc(e){Ks=e}function An(e,n=null){n&&(Ws=n),Ks?Ks(e,n):console.warn("Router callback not set!")}function Tc(){const e=Ws;return Ws=null,e}function $c(){window.history.back()}function pr(e,n=[],t=null){if(!e||!e.file)return"/images/default_cover.png";if(Ui(e.file)||e.genre==="Radio")return e.image?hr(e):Hi(e,n,t)||"/images/radio_placeholder.png";let r=e.file.startsWith("/")?e.file.slice(1):e.file;return`/coverart.php/${encodeURI(r)}`}function zr(e,n="sm",t=[],r=null){if(!e||e.file&&(Ui(e.file)||e.genre==="Radio"||Array.isArray(e)))return e&&e.image?hr(e):Hi(e,t,r)||"/images/radio_icon.png";if(!e.file)return"/images/default_icon.png";if(e.thumbHash){const a=n==="md"?"":"_sm";return`/imagesw/thmcache/${e.thumbHash}${a}.jpg`}try{const a=e.file.lastIndexOf("/"),i=a===-1?".":e.file.substring(0,a);return`/imagesw/thmcache/${wc(i)}${n==="md"?"":"_sm"}.jpg`}catch{let i=e.file.startsWith("/")?e.file.slice(1):e.file;return`/coverart.php/${encodeURI(i)}`}}function Ui(e){return e?e.startsWith("http")||e.includes("://")||e.includes("RADIO"):!1}function Hi(e,n,t){const r=v=>(v||"").toString().toLowerCase().replace(/[^a-z0-9]/g,""),a=r(e?.title),i=r(e?.stationName),o=r(t);if(n&&n.length>0){const v=n.find(c=>{const u=r(c.name);return u?u===i||u===o||a&&u===a||a&&a.includes(u)&&u.length>3:!1});if(v)return hr(v)}const l=e?.stationName||t;return l?hr({name:l,image:"local"}):null}Oi([Ut,Rn,Fr],([e,n,t])=>pr(e,n,t));Oi(Ut,e=>!e||!e.file||e.file.startsWith("http")?null:`/coverart.php/${encodeURI(e.file)}`);const Ac=localStorage.getItem("alarmTime")||"08:00",Cc=localStorage.getItem("alarmEnabled")==="true",Pc=De(Ac),Rc=De(Cc);Pc.subscribe(e=>localStorage.setItem("alarmTime",e));Rc.subscribe(e=>localStorage.setItem("alarmEnabled",String(e)));const Xe={NAME:"MoodePlayerDB",STORE_NAME:"music",VERSION:3},Lc={SYNC:"/wave-api.php",STATIONS:e=>"/wave-api.php?action=stations",COVER_ART:e=>`/coverart.php?u=${encodeURIComponent(e)}`,RADIO_LOGOS:e=>`/imagesw/radio-logos/thumbs/${e}`},Sn={open(){return new Promise((e,n)=>{const t=indexedDB.open(Xe.NAME,Xe.VERSION);t.onupgradeneeded=r=>{const a=r.target.result,i=r.target.transaction;let o;a.objectStoreNames.contains(Xe.STORE_NAME)?o=i.objectStore(Xe.STORE_NAME):o=a.createObjectStore(Xe.STORE_NAME,{keyPath:"file"}),o.indexNames.contains("artist")||o.createIndex("artist","artist",{unique:!1}),o.indexNames.contains("album")||o.createIndex("album","album",{unique:!1}),o.indexNames.contains("genre")||o.createIndex("genre","genre",{unique:!1}),o.indexNames.contains("album_artist")||o.createIndex("album_artist","album_artist",{unique:!1})},t.onsuccess=()=>e(t.result),t.onerror=()=>n(t.error)})},async clear(){const e=await this.open();return new Promise((n,t)=>{const r=e.transaction(Xe.STORE_NAME,"readwrite");r.objectStore(Xe.STORE_NAME).clear(),r.oncomplete=()=>n(),r.onerror=()=>t(r.error)})},async bulkAdd(e){const n=await this.open();return new Promise((t,r)=>{const a=n.transaction(Xe.STORE_NAME,"readwrite"),i=a.objectStore(Xe.STORE_NAME);e.forEach(o=>i.put(o)),a.oncomplete=()=>t(),a.onerror=()=>r(a.error)})},async getFilesMap(e){if(!e||e.length===0)return new Map;const n=await this.open();return new Promise(t=>{const a=n.transaction(Xe.STORE_NAME,"readonly").objectStore(Xe.STORE_NAME),i=new Map;let o=0;e.forEach(l=>{const v=l.normalize("NFC").trim(),c=a.get(v);c.onsuccess=u=>{u.target.result&&i.set(l,u.target.result),o++,o===e.length&&t(i)},c.onerror=()=>{o++,o===e.length&&t(i)}})})},async getArtists(){const e=await this.open();return new Promise((n,t)=>{const a=e.transaction(Xe.STORE_NAME,"readonly").objectStore(Xe.STORE_NAME),i=new Map,o=a.openCursor();o.onsuccess=l=>{const v=l.target.result;if(v){const c=v.value,u=c.album_artist||c.artist;u&&!i.has(u)&&i.set(u,{name:u,file:c.file,thumbHash:c.thumbHash}),v.continue()}else{const c=Array.from(i.values()).sort((u,h)=>u.name.localeCompare(h.name,void 0,{sensitivity:"base"}));n(c)}},o.onerror=()=>t(o.error)})},async getAlbums(){const e=await this.open();return new Promise((n,t)=>{const a=e.transaction(Xe.STORE_NAME,"readonly").objectStore(Xe.STORE_NAME).index("album"),i=[],o=a.openCursor(null,"nextunique");o.onsuccess=l=>{const v=l.target.result;if(v){const c=v.value;i.push({name:c.album,artist:c.album_artist||c.artist,file:c.file,thumbHash:c.thumbHash,qualityBadge:c.qualityBadge,year:c.year||0}),v.continue()}else n(i)},o.onerror=()=>t(o.error)})},async getArtistAlbums(e){if(!e)return[];const n=await this.open(),t=e.normalize("NFC").trim();return new Promise((r,a)=>{const o=n.transaction(Xe.STORE_NAME,"readonly").objectStore(Xe.STORE_NAME),l=new Promise(c=>{o.indexNames.contains("album_artist")?o.index("album_artist").getAll(IDBKeyRange.only(t)).onsuccess=u=>c(u.target.result):c([])}),v=new Promise(c=>{o.index("artist").getAll(IDBKeyRange.only(t)).onsuccess=u=>c(u.target.result)});Promise.all([l,v]).then(([c,u])=>{const h=[...c,...u],f=[],p=new Set;h.forEach(y=>{p.has(y.album)||(p.add(y.album),f.push({name:y.album,artist:y.album_artist||y.artist,file:y.file,thumbHash:y.thumbHash,qualityBadge:y.qualityBadge,year:y.year||0}))}),r(f)}).catch(c=>a(c))})},async getAlbumTracks(e,n=null){const t=await this.open(),r=e.normalize("NFC").trim(),a=n?n.normalize("NFC").trim():null;return console.log(`[DB] getAlbumTracks called. Album: "${r}", FilterArtist: "${a}"`),new Promise((i,o)=>{const v=t.transaction(Xe.STORE_NAME,"readonly").objectStore(Xe.STORE_NAME).index("album"),c=IDBKeyRange.only(r),u=v.getAll(c);u.onsuccess=()=>{let h=u.result;if(console.log(`[DB] Found ${h.length} raw tracks for album "${r}"`),a){const f=h.length;h=h.filter(p=>{const y=(p.artist||"").normalize("NFC").trim(),x=(p.album_artist||"").normalize("NFC").trim();return y===a||x===a}),console.log(`[DB] After artist filter: ${h.length} tracks (Removed ${f-h.length})`)}else console.log("[DB] No artist filter provided. Returning all tracks.");h.sort((f,p)=>{const y=parseInt(f.disc||1),x=parseInt(p.disc||1);if(y!==x)return y-x;const b=parseInt(f.track||0),S=parseInt(p.track||0);return b-S}),i(h)},u.onerror=()=>o(u.error)})},async getGenres(){const e=await this.open();return new Promise((n,t)=>{const a=e.transaction(Xe.STORE_NAME,"readonly").objectStore(Xe.STORE_NAME).index("genre"),i=[],o=a.openKeyCursor(null,"nextunique");o.onsuccess=l=>{const v=l.target.result;v?(i.push(v.key),v.continue()):n(i)},o.onerror=()=>t(o.error)})},async getGenreTracks(e){const n=await this.open(),t=e.normalize("NFC").trim();return new Promise((r,a)=>{const l=n.transaction(Xe.STORE_NAME,"readonly").objectStore(Xe.STORE_NAME).index("genre").getAll(IDBKeyRange.only(t));l.onsuccess=()=>r(l.result),l.onerror=()=>a(l.error)})},async search(e){if(!e)return[];const n=e.toLowerCase().normalize("NFC").trim(),t=await this.open();return new Promise((r,a)=>{const o=t.transaction(Xe.STORE_NAME,"readonly").objectStore(Xe.STORE_NAME),l=[],v=100,c=o.openCursor();c.onsuccess=u=>{const h=u.target.result;if(h){const f=h.value;if((f.title&&f.title.toLowerCase().includes(n)||f.artist&&f.artist.toLowerCase().includes(n)||f.album&&f.album.toLowerCase().includes(n)||f.album_artist&&f.album_artist.toLowerCase().includes(n))&&l.push(f),l.length>=v){r(l);return}h.continue()}else r(l)},c.onerror=()=>a(c.error)})}};var zc=M('<div class="skeleton svelte-tl058d"></div>');function Pn(e,n){let t=et(n,"width",8,"100%"),r=et(n,"height",8,"20px"),a=et(n,"radius",8,"4px"),i=et(n,"style",8,"");var o=zc();fe(()=>Je(o,`width: ${t()??""}; height: ${r()??""}; border-radius: ${a()??""}; ${i()??""}`)),m(e,o)}var Ic=M('<div class="skel svelte-1b8que2"><!></div>'),Nc=M('<img loading="lazy"/>'),jc=M('<div class="loader svelte-1b8que2"><!> <!> <!></div>');function Kn(e,n){dt(n,!1);let t=et(n,"src",8),r=et(n,"alt",8,""),a=et(n,"radius",8,"0px");const i=ca();let o=$("loading");function l(){g(o,"loaded")}function v(b){i("error",b),g(o,"error")}Z(()=>j(t()),()=>{t()?g(o,"loading"):g(o,"error")}),Ht(),gt();var c=jc(),u=d(c);{var h=b=>{var S=Ic(),D=d(S);Pn(D,{width:"100%",height:"100%",get radius(){return a()}}),wt(2,S,()=>on,()=>({duration:200})),m(b,S)};F(u,b=>{s(o)==="loading"&&b(h)})}var f=_(u,2);{var p=b=>{var S=Nc();let D;fe(()=>{yt(S,"src",t()),yt(S,"alt",r()),Je(S,`border-radius: ${a()??""}`),D=Fe(S,1,"svelte-1b8que2",null,D,{vis:s(o)==="loaded"})}),C("load",S,l),C("error",S,v),m(b,S)};F(f,b=>{t()&&s(o)!=="error"&&b(p)})}var y=_(f,2);{var x=b=>{var S=Ye(),D=Te(S);Wr(D,n,"fallback",{}),m(b,S)};F(y,b=>{s(o)==="error"&&b(x)})}fe(()=>Je(c,`border-radius: ${a()??""}`)),m(e,c),ft()}const cr={DEFAULT_IP:typeof window<"u"?window.location.hostname:"localhost",get MOODE_IP(){try{return typeof localStorage<"u"?localStorage.getItem("moode_ip")||this.DEFAULT_IP:this.DEFAULT_IP}catch{return this.DEFAULT_IP}},setMoodeIp(e){if(typeof localStorage<"u"){const n=e?e.trim():"";n&&localStorage.setItem("moode_ip",n)}}};class Oc{constructor(){this.socket=null,this.queue=[],this.isProcessing=!1,this.reconnectTimer=null,this.watchdogTimer=null,this._buffer=""}get isConnected(){return this.socket&&this.socket.readyState===WebSocket.OPEN}connect(){if(this.socket&&(this.socket.readyState===WebSocket.CONNECTING||this.socket.readyState===WebSocket.OPEN))return;this.reconnectTimer&&clearTimeout(this.reconnectTimer);let n=cr.MOODE_IP||window.location.hostname;n=n.replace(/^https?:\/\//,"").split(":")[0].split("/")[0];const t=cr.WS_PORT||"8080",r=`ws://${n}:${t}`;console.log("[MPD] Connecting to:",r);try{this.socket=new WebSocket(r,["binary"])}catch(a){console.error("[MPD] Connection Error:",a),this.reconnectTimer=setTimeout(()=>this.connect(),5e3);return}this.socket.onopen=()=>{console.log("[MPD] Connected"),Ha.set("Connected"),je("Connected to Moode","success"),this._processQueue()},this.socket.onmessage=a=>this._handleMessage(a),this.socket.onclose=a=>{console.warn("[MPD] Socket closed",a.code,a.reason),Ha.set("Disconnected"),this._cleanup(),this.reconnectTimer=setTimeout(()=>this.connect(),3e3)},this.socket.onerror=a=>{console.error("[MPD] Socket error",a)}}send(n){return new Promise((t,r)=>{this.queue.push({cmd:n,resolve:t,reject:r}),this._processQueue()})}_cleanup(){for(this.isProcessing=!1,this._buffer="",this.watchdogTimer&&clearTimeout(this.watchdogTimer);this.queue.length>0;){const{reject:n}=this.queue.shift();n(new Error("Connection lost"))}}async _processQueue(){if(this.isProcessing||this.queue.length===0||!this.isConnected)return;this.isProcessing=!0;const{cmd:n}=this.queue[0];this.watchdogTimer&&clearTimeout(this.watchdogTimer),this.watchdogTimer=setTimeout(()=>{console.error("[MPD] Watchdog timeout"),this.socket&&this.socket.close()},2e4);try{const t=n.endsWith(`
`)?n:n+`
`;this.socket.send(new TextEncoder().encode(t))}catch(t){console.error("[MPD] Send error",t),this._cleanup()}}async _handleMessage(n){let t=n.data;t instanceof Blob&&(t=await t.text()),this.watchdogTimer&&(clearTimeout(this.watchdogTimer),this.watchdogTimer=null),this._buffer+=t;const r=this._buffer.endsWith(`
OK
`)||this._buffer===`OK
`,a=this._buffer.startsWith("ACK");if(r||a){const i=this._buffer;this._buffer="";const o=this.queue.shift();if(this.isProcessing=!1,o)if(a)console.error(`[MPD] Error: ${i.trim()}`),o.reject(new Error(i.trim()));else{const l=i.replace(/\nOK\n$/,"").replace(/^OK\n$/,"");o.resolve(l)}this._processQueue()}else{if(!this.queue.length)return;this.watchdogTimer=setTimeout(()=>{console.error("[MPD] Watchdog timeout receiving large data"),this.socket&&this.socket.close()},2e4)}}}const xe=new Oc,Xt={parseKeyValue(e){const n={};if(!e)return n;const t=e.split(`
`);for(const r of t){const a=r.indexOf(": ");if(a===-1)continue;const i=r.substring(0,a).toLowerCase(),o=r.substring(a+2);n[i]=o}return n},parseStatus(e){const n=this.parseKeyValue(e);let t="";if(n.audio){const r=n.audio.split(":");r[1]&&(t=`${r[1]}-bit`)}return{state:n.state||"stop",volume:parseInt(n.volume)||0,elapsed:parseFloat(n.elapsed)||0,duration:parseFloat(n.duration)||0,random:n.random==="1",repeat:n.repeat==="1",song:parseInt(n.song)||0,songId:parseInt(n.songid)||-1,playlistLength:parseInt(n.playlistlength)||0,bitrate:parseInt(n.bitrate)||0,format:t,playlistVersion:parseInt(n.playlist)||0}},parseCurrentSong(e){const n=this.parseKeyValue(e);return this._normalizeTrack(n)},parsePlaylists(e){const n=e.split(`
`),t=[];let r=null;for(const a of n)a.startsWith("playlist: ")?(r&&t.push(r),r={playlist:a.substring(10)}):a.startsWith("Last-Modified: ")&&r&&(r["last-modified"]=a.substring(15));return r&&t.push(r),t.map(a=>({name:a.playlist,lastModified:a["last-modified"]}))},parseTracks(e){const n=[];let t=null,r=0,a=e.indexOf(`
`,r);for(;a!==-1;){const i=e.substring(r,a),o=i.indexOf(": ");if(o!==-1){const l=i.substring(0,o).toLowerCase(),v=i.substring(o+2);l==="file"?(t&&n.push(this._normalizeTrack(t)),t={file:v}):t&&(t[l]=v)}r=a+1,a=e.indexOf(`
`,r)}return t&&n.push(this._normalizeTrack(t)),n},_normalizeTrack(e){const n=e.file||e.File||"",t=e.Title||e.title||e.Name||e.name||n.split("/").pop()||"Unknown";return{file:n,title:t,artist:e.Artist||e.artist||"Unknown Artist",album:e.Album||e.album||"Unknown Album",genre:e.Genre||e.genre||"Unknown",time:parseFloat(e.Time||e.time||0),track:e.Track||e.track||"",id:e.Id||e.id,pos:e.Pos||e.pos||null,stationName:e.name||e.Name||null}}},Dc=1e3,Fc=250;let Xr=null,$r=null,Gr=0,In=1,as=!0,fn=!1,jn=0,nr=null;function Zr(e){return e?String(e).normalize("NFC").replace(/\\/g,"\\\\").replace(/"/g,'\\"'):""}function qc(){Bc(),as=!0,fn=!1,jn=0,st.set(!1),tn(),Xr=setInterval(()=>{xe.isConnected&&!xe.isProcessing&&tn()},Dc)}function Bc(){Xr&&(clearInterval(Xr),Xr=null),fa()}async function tn(){try{const e=await xe.send("status"),n=await xe.send("currentsong"),t=Xt.parseStatus(e),r=Xt.parseCurrentSong(n);Hc(t,r);const a=qe(qi);if(qe(st))return;(t.playlistLength>0&&t.playlistVersion!==a||t.playlistLength>0&&qe(Bn).length===0)&&Uc(t.playlistVersion)}catch{}}async function Uc(e){if(!qe(st))try{const n=await xe.send("playlistinfo");if(qe(st))return;const t=Xt.parseTracks(n),r=t.map(o=>o.file).filter(o=>o&&!o.startsWith("http"));let a=new Map;if(r.length>0)try{a=await Sn.getFilesMap(r)}catch(o){console.warn("Failed to hydrate queue from DB",o)}const i=t.map(o=>{const l=(o.file||"").normalize("NFC"),v=a.get(l);return v?{...o,thumbHash:v.thumbHash,qualityBadge:v.qualityBadge,title:o.title||v.title,artist:o.artist||v.artist,album:o.album||v.album,_uid:String(o.id||o.pos+o.file)}:{...o,_uid:String(o.id||o.pos+o.file)}});Bn.set(i),qi.set(e)}catch(n){console.error("Queue sync error",n)}}function Hc(e,n){const t=qe(Ut),r=qe(Rn),a=n.file&&n.file.startsWith("http");if(a){const i=c=>(c||"").toString().toLowerCase().replace(/[^a-z0-9]/g,""),o=i(n.file),l=i(n.title),v=r.find(c=>{const u=i(c.station||c.file||c.url||(Array.isArray(c)?c[1]:"")),h=i(c.name||(Array.isArray(c)?c[0]:""));return u&&o.includes(u)||h&&l.includes(h)});v?n.stationName=v.name||v[0]:t.stationName&&t.file===n.file&&(n.stationName=t.stationName)}Ut.set(n),it.update(i=>{const o=e.state==="play",l=performance.now();if(e.state==="pause"||i.state==="pause")return Vr(!1),l<jn?i:e;if(n.file!==t.file||as)return as=!1,fn=!1,In=1,a&&(e.elapsed=0),Vr(o&&!a),e;if(l<jn)return i;if(fn)return fn=!1,In=1,Vr(o&&!a),e;if(o&&!a){const v=e.elapsed-i.elapsed;if(Math.abs(v)>2)return In=1,e;if(Math.abs(v)<.05)In=1;else{let u=v/1.5;In=Math.max(.5,Math.min(1.5,1+u))}return{...e,elapsed:i.elapsed}}return Vr(!1),e})}function Vr(e){e?Xs():fa()}function Xs(){$r||as||(Gr=performance.now(),$r=setInterval(()=>{const e=performance.now();let n=(e-Gr)/1e3;n>2&&(n=0),Gr=e,it.update(t=>{if(t.state!=="play")return t;let r=t.elapsed+n*In;return t.duration>0&&r>t.duration&&(r=t.duration),{...t,elapsed:r}})},Fc))}function fa(){$r&&(clearInterval($r),$r=null),In=1,Gr=0}async function Va(e,n=!1){if(!e||e.length===0)return;st.set(!0),fn=!0;const t=5;try{for(let r=0;r<e.length;r+=t){const a=e.slice(r,r+t),i=["command_list_begin"];a.forEach(o=>{i.push(`add "${Zr(o.file)}"`)}),i.push("command_list_end"),await xe.send(i.join(`
`))}n?(await xe.send("play 0"),je(`Playing ${e.length} tracks`,"success")):je(`Added ${e.length} tracks`,"success")}catch(r){console.error("[Player] Bulk Action Failed:",r),je("Error adding tracks","error")}finally{setTimeout(()=>{st.set(!1),tn()},1500)}}const Gt={async togglePlay(){const n=qe(it).state==="play";jn=performance.now()+800,it.update(t=>{const r=n?"pause":"play";return r==="play"?Xs():fa(),{...t,state:r}}),await xe.send(n?"pause 1":"play"),setTimeout(tn,900)},async next(){fn=!0,jn=0,await xe.send("next"),tn()},async previous(){fn=!0,jn=0,it.update(e=>({...e,elapsed:0})),await xe.send("previous"),tn()},async setVolume(e){it.update(n=>({...n,volume:e})),await xe.send(`setvol ${e}`)},async seek(e){fn=!0,jn=performance.now()+500,it.update(n=>({...n,elapsed:e})),await xe.send(`seekcur ${e}`),setTimeout(tn,600)},async toggleRandom(){const n=!qe(it).random;it.update(t=>({...t,random:n})),await xe.send(`random ${n?1:0}`)},async toggleRepeat(){const n=!qe(it).repeat;it.update(t=>({...t,repeat:n})),await xe.send(`repeat ${n?1:0}`)},async playUri(e,n={}){st.set(!0);const t=Zr(e);fn=!0,it.update(r=>({...r,state:"play",elapsed:0})),Ut.set({title:n.title||e.split("/").pop(),artist:n.artist||"",file:e}),Xs();try{const r=await xe.send("currentsong"),a=parseInt(Xt.parseKeyValue(r).pos),i=await xe.send(`addid "${t}"`),o=parseInt(Xt.parseKeyValue(i).id);if(isNaN(o))await xe.send(`add "${t}"`),await xe.send("play");else{const l=isNaN(a)?0:a+1;await xe.send(`moveid ${o} ${l}`),await xe.send(`playid ${o}`)}}catch(r){console.error("Play error",r),je("Failed to play","error")}setTimeout(()=>{st.set(!1),tn()},1200)},async addToQueue(e){try{await xe.send(`add "${Zr(e)}"`),je("Added to queue","success")}catch(n){console.error("Add queue error",n),je("Failed to add","error")}},async playNext(e){st.set(!0);const n=Zr(e);try{const t=await xe.send("currentsong"),r=parseInt(Xt.parseKeyValue(t).pos||-1);if(r===-1)st.set(!1),await this.playUri(e);else{const a=await xe.send(`addid "${n}"`),i=parseInt(Xt.parseKeyValue(a).id);isNaN(i)||(await xe.send(`moveid ${i} ${r+1}`),je("Will play next","success")),setTimeout(()=>st.set(!1),1e3)}}catch(t){console.error("Play Next error",t),je("Failed to set next","error"),st.set(!1)}},async removeFromQueue(e){st.set(!0),nr&&clearTimeout(nr);try{Bn.update(n=>{const t=[...n];return t.splice(e,1),t}),await xe.send(`delete ${e}`)}catch{je("Failed to remove","error"),st.set(!1);return}nr=setTimeout(()=>{st.set(!1)},1e3)},async moveTrack(e,n){if(e!==n){st.set(!0),nr&&clearTimeout(nr);try{await xe.send(`move ${e} ${n}`)}catch(t){console.error("Move failed",t),je("Move failed","error"),st.set(!1),tn();return}nr=setTimeout(()=>{st.set(!1),tn()},2e3)}},async playAllTracks(e){if(!(!e||e.length===0))try{await xe.send("stop"),await xe.send("clear"),await Va(e,!0)}catch(n){console.error(n)}},async addAllToQueue(e){!e||e.length===0||await Va(e,!1)},async saveQueue(e){if(!e)return;const n=e.replace(/"/g,'\\"');try{await xe.send(`save "${n}"`),je(`Playlist "${e}" saved`,"success")}catch(t){if(t.message.includes("exist")){if(confirm(`Playlist "${e}" exists. Overwrite?`))try{await xe.send(`rm "${n}"`),await xe.send(`save "${n}"`),je(`Playlist "${e}" overwritten`,"success")}catch{je("Failed to overwrite","error")}}else console.error(t)}}};function Vi(e){return new Worker("/assets/sync.worker-CxDcqL9_.js",{name:e?.name})}const kr="Favorites";let Ya=Promise.resolve();const rr=e=>e?e.toLowerCase().replace(/^https?:\/\//,"").replace(/^www\./,"").split("?")[0].replace(/\/$/,""):"";function Vc(e){if(e==="Favorites")return"linear-gradient(135deg, hsl(348, 95%, 58%), hsl(348, 90%, 40%))";let n=0;for(let r=0;r<e.length;r++)n=e.charCodeAt(r)+((n<<5)-n);const t=Math.abs(n%360);return`linear-gradient(135deg, hsl(${t}, 60%, 40%), hsl(${(t+40)%360}, 60%, 30%))`}const sn={async syncLibrary(){if(qe(Wt))return;Wt.set(!0);const e=new Vi;e.postMessage({type:"START_SYNC",payload:{url:`http://${cr.MOODE_IP}/wave-api.php`}}),e.onmessage=n=>{const{type:t,count:r}=n.data;t==="DONE"&&(je(`Library updated: ${r} tracks`,"success"),Wt.set(!1),e.terminate()),t==="ERROR"&&(je("Sync Failed","error"),Wt.set(!1),e.terminate())},e.onerror=()=>{Wt.set(!1),e.terminate()}},async loadPlaylists(){Vs.set(!0);try{const e=await xe.send("listplaylists"),t=Xt.parsePlaylists(e).map(r=>({...r,color:Vc(r.name)}));ua.set(t)}catch(e){console.error(e)}finally{Vs.set(!1)}},async createPlaylistFromQueue(e){if(!e)return;const n=e.replace(/"/g,'\\"');try{await xe.send(`save "${n}"`),je(`Playlist "${e}" created`,"success"),await this.loadPlaylists()}catch(t){console.error(t),je("Failed to create playlist","error")}},async deletePlaylist(e){if(!e)return;const n=e.replace(/"/g,'\\"');try{await xe.send(`rm "${n}"`),je("Playlist deleted","info"),await this.loadPlaylists()}catch(t){console.error(t),je("Delete failed","error")}},async renamePlaylist(e,n){if(!e||!n)return;const t=e.replace(/"/g,'\\"'),r=n.replace(/"/g,'\\"');try{await xe.send(`rename "${t}" "${r}"`),je("Playlist renamed","success"),await this.loadPlaylists()}catch(a){console.error(a),je("Rename failed","error")}},async openPlaylistDetails(e){if(!e)return;Ys.set(!0);const n=e.replace(/"/g,'\\"');try{const t=await xe.send(`listplaylistinfo "${n}"`),r=Xt.parseTracks(t),a=r.map(l=>l.file).filter(l=>l&&!l.startsWith("http"));let i=new Map;if(a.length>0)try{i=await Sn.getFilesMap(a)}catch(l){console.warn("Failed to hydrate playlist from DB",l)}const o=r.map(l=>{const v=i.get(l.file);return v?{...l,thumbHash:v.thumbHash,qualityBadge:v.qualityBadge,title:l.title||v.title,artist:l.artist||v.artist,album:l.album||v.album,_uid:Oa()}:{...l,_uid:Oa()}});ir.set(o)}catch(t){console.error(t),je("Could not load playlist","error")}finally{Ys.set(!1)}},async movePlaylistTrack(e,n,t){const r=e.replace(/"/g,'\\"');try{await xe.send(`playlistmove "${r}" ${n} ${t}`)}catch{je("Move failed","error")}},async removeFromPlaylist(e,n){const t=e.replace(/"/g,'\\"');try{await xe.send(`playlistdelete "${t}" ${n}`),je("Track removed","success")}catch{je("Delete failed","error")}},async loadFavorites(){try{const e=await xe.send(`listplaylistinfo "${kr}"`),n=Xt.parseTracks(e),t=new Set;n.forEach(r=>{r.file&&t.add(r.file)}),En.set(t)}catch{En.set(new Set)}},async toggleFavorite(e){if(!e||!e.file)return;const n=e.file,t=n.replace(/"/g,'\\"'),r=n.startsWith("http"),a=qe(En);let i=a.has(n);if(!i&&r){const o=rr(n);for(const l of a)if(rr(l)===o){i=!0;break}}En.update(o=>{const l=new Set(o);if(i){if(l.delete(n),r){const v=rr(n);for(const c of l)rr(c)===v&&l.delete(c)}}else l.add(n);return l}),Ya=Ya.then(async()=>{try{const o=await xe.send(`listplaylistinfo "${kr}"`),l=Xt.parseTracks(o);let v=[];if(l.forEach((c,u)=>{let h=!1;(c.file===n||r&&rr(c.file)===rr(n)||r&&(c.file.includes(n)||n.includes(c.file)))&&(h=!0),h&&v.push(u)}),i){if(v.length>0){v.sort((c,u)=>u-c);for(const c of v)await xe.send(`playlistdelete "${kr}" ${c}`);je("Removed from Favorites","info")}}else v.length>0?console.log("[Fav] Track already exists. Skipping."):(await xe.send(`playlistadd "${kr}" "${t}"`),l.length>0&&await xe.send(`playlistmove "${kr}" ${l.length} 0`),je("Added to Favorites","success"))}catch(o){console.error("Fav action failed",o),je("Action failed","error")}finally{await this.loadFavorites()}})}};function Yi(){xe.connect(),qc(),sn.loadPlaylists(),sn.loadFavorites()}function is(e){return xe.send(e)}const{togglePlay:ps,toggleRandom:Un,toggleRepeat:Hn,setVolume:Ir,seek:ha,addToQueue:Yc,playNext:Qc,removeFromQueue:Wc,moveTrack:Kc,saveQueue:Xc,playAllTracks:Qi,addAllToQueue:Wi}=Gt,{syncLibrary:Gc,loadRadioStations:Zc,loadPlaylists:pa,openPlaylistDetails:Ki,toggleFavorite:Xi,loadFavorites:Jc,removeFromPlaylist:Gi,movePlaylistTrack:Zi}=sn;function Nr(e){const n=qe(Ut),t=qe(Rn),r=qe(Fr);if(n.file&&n.file.startsWith("http")&&t.length>0&&(e==="next"||e==="previous")){let i=t.findIndex(l=>l.name===r);i===-1&&(i=0);let o;e==="next"?(o=i+1,o>=t.length&&(o=0)):(o=i-1,o<0&&(o=t.length-1)),ga(t[o])}else e==="next"&&Gt.next(),e==="previous"&&Gt.previous()}function ga(e){if(!e)return;Fr.set(e.name);const n=e[1]||e.station||e.file||e.url;n&&Gt.playUri(n,{title:e.name,artist:e.genre||"Radio Stream",stationName:e.name})}function gs(e){e&&(Fr.set(null),Gt.playUri(e.file,{title:e.title,artist:e.artist,album:e.album,stationName:null}))}async function Ji(e,n=0){if(!e)return;Fr.set(null);const t=e.replace(/"/g,'\\"');try{await xe.send("stop"),await xe.send("clear"),await xe.send(`load "${t}"`),await xe.send(`play ${n}`)}catch(r){console.error("Failed to play playlist context",r)}}const ev=Object.freeze(Object.defineProperty({__proto__:null,addAllToQueue:Wi,addToQueue:Yc,connect:Yi,loadFavorites:Jc,loadPlaylists:pa,loadRadioStations:Zc,movePlaylistTrack:Zi,moveTrack:Kc,nav:Nr,openPlaylistDetails:Ki,playAllTracks:Qi,playNext:Qc,playPlaylistContext:Ji,playStation:ga,playTrackOptimistic:gs,removeFromPlaylist:Gi,removeFromQueue:Wc,runMpdRequest:is,saveQueue:Xc,seek:ha,setVolume:Ir,syncLibrary:Gc,toggleFavorite:Xi,togglePlay:ps,toggleRandom:Un,toggleRepeat:Hn},Symbol.toStringTag,{value:"Module"}));function _a(e,n=2e3){let t;const r=i=>{i.type==="mousedown"&&i.button!==0||(t=setTimeout(()=>{e.dispatchEvent(new CustomEvent("longpress",{detail:{originalEvent:i}}))},n))},a=()=>{clearTimeout(t)};return e.addEventListener("mousedown",r),e.addEventListener("touchstart",r,{passive:!0}),e.addEventListener("mouseup",a),e.addEventListener("mouseleave",a),e.addEventListener("touchend",a),e.addEventListener("touchcancel",a),e.addEventListener("touchmove",a),{destroy(){e.removeEventListener("mousedown",r),e.removeEventListener("touchstart",r),e.removeEventListener("mouseup",a),e.removeEventListener("mouseleave",a),e.removeEventListener("touchend",a),e.removeEventListener("touchcancel",a),e.removeEventListener("touchmove",a)}}}var tv=M('<div class="drag-handle svelte-5cs2hz" title="Drag to reorder"><div class="icon-small svelte-5cs2hz"><!></div></div>'),nv=M('<div class="eq-anim svelte-5cs2hz"><span class="bar b1 svelte-5cs2hz"></span> <span class="bar b2 svelte-5cs2hz"></span> <span class="bar b3 svelte-5cs2hz"></span></div>'),rv=M('<div class="icon-small svelte-5cs2hz"><!></div>'),sv=M('<div class="icon-small svelte-5cs2hz"><!></div>'),av=M('<div class="icon-small accent svelte-5cs2hz"><!></div>'),iv=M('<span class="num svelte-5cs2hz"> </span>'),ov=M('<button class="num-box svelte-5cs2hz"><!></button>'),lv=M('<div slot="fallback" class="icon-ph svelte-5cs2hz"><!></div>'),cv=M('<span class="meta-tag quality svelte-5cs2hz"> </span>'),vv=M('<button class="btn-icon small remove svelte-5cs2hz"><!></button>'),uv=M('<div class="dur svelte-5cs2hz"> </div>'),dv=M('<div role="button" tabindex="0"><div class="left svelte-5cs2hz"><!> <div class="thumb svelte-5cs2hz"><!></div></div> <div class="info svelte-5cs2hz"><div class="title-row svelte-5cs2hz"><div class="title text-ellipsis svelte-5cs2hz"> </div> <!></div> <div> </div></div> <div class="right svelte-5cs2hz"><button class="btn-icon small context-menu-btn svelte-5cs2hz" title="Options"><!></button> <button><!></button> <!></div></div>');function _s(e,n){dt(n,!1);const t=()=>ke(En,"$favorites",o),r=()=>ke(Ft,"$navigationStack",o),a=()=>ke(Pt,"$activeMenuTab",o),i=()=>ke(Rn,"$stations",o),[o,l]=It(),v=$(),c=$(),u=$(),h=$(),f=$(),p=$(),y=$(),x=$(),b=$(),S=$(),D=$(),q=$(),J=$(),U=$(),G=$(),H=$();let A=et(n,"track",8),W=et(n,"index",8),me=et(n,"isEditable",8,!1),ae=et(n,"playingIndex",24,()=>-1),R=et(n,"playingFile",8,null),V=et(n,"isPlaying",8,!1);const oe=ca();let O=$(!1),re=$(!1);function B(Q){if(s(p))return"â";if(!Q)return"0:00";const ge=parseInt(Q,10),Le=Math.floor(ge/60),Ae=ge%60;return`${Le}:${Ae.toString().padStart(2,"0")}`}function L(Q){Q.stopPropagation(),s(h)?ps():oe("play")}function _e(){return s(c)?.view==="details"&&s(c).data?.name?{type:"playlist",playlistName:s(c).data.name,index:W()}:s(u)?{type:"queue",index:W()}:{type:"general"}}function K(Q){Q.stopPropagation(),Lr(Q,A(),_e())}function te(Q){me()||Lr(Q.detail.originalEvent,A(),_e())}function z(Q){Q.stopPropagation(),!s(p)&&A().artist&&(Pt.set("artists"),An("albums_by_artist",{name:A().artist}))}Z(()=>j(A()),()=>{A()&&g(re,!1)}),Z(()=>(t(),j(A())),()=>{g(v,t().has(A().file))}),Z(()=>r(),()=>{g(c,r()[r().length-1])}),Z(()=>(s(c),a()),()=>{g(u,s(c)?.view==="queue"||s(c)?.view==="root"&&a()==="queue")}),Z(()=>(s(u),j(W()),j(ae()),j(A()),j(R())),()=>{g(h,s(u)?Number(W())===ae():A().file===R())}),Z(()=>(s(u),j(A()),j(R()),s(h)),()=>{g(f,s(u)?A().file===R()&&!s(h):!1)}),Z(()=>j(A()),()=>{g(p,A().file&&(A().file.startsWith("http")||A().file.includes("RADIO")))}),Z(()=>(s(h),j(V()),s(O)),()=>{g(y,s(h)&&V()&&s(O))}),Z(()=>(s(h),j(V()),s(O)),()=>{g(x,s(h)&&!V()&&s(O)||!s(h)&&s(O))}),Z(()=>(s(h),j(V()),s(O)),()=>{g(b,s(h)&&V()&&!s(O))}),Z(()=>(s(h),j(V()),s(O)),()=>{g(S,s(h)&&!V()&&!s(O))}),Z(()=>j(A()),()=>{g(D,A().title||A().file?.split("/").pop())}),Z(()=>j(A()),()=>{g(q,A().artist||"Unknown")}),Z(()=>j(A()),()=>{g(J,B(A().time))}),Z(()=>j(A()),()=>{g(U,A().qualityBadge?A().qualityBadge.split(" ")[0]:null)}),Z(()=>{},()=>{g(G,null)}),Z(()=>(s(re),j(A()),i(),s(G),zr),()=>{g(H,s(re)?pr(A(),i(),s(G)):zr(A(),"sm",i(),s(G)))}),Ht(),gt();var w=dv();let T;var P=d(w),X=d(P);{var ne=Q=>{var ge=tv(),Le=d(ge),Ae=d(Le);ie(Ae,()=>(j(k),E(()=>k.DRAG_HANDLE))),C("mousedown",ge,Qe=>oe("startdrag",Qe)),C("touchstart",ge,Qe=>oe("startdrag",Qe),void 0,!0),C("click",ge,Kt(function(Qe){Rr.call(this,n,Qe)})),m(Q,ge)},he=Q=>{var ge=ov(),Le=d(ge);{var Ae=Ue=>{var Ie=nv();m(Ue,Ie)},Qe=Ue=>{var Ie=Ye(),Ke=Te(Ie);{var ht=kt=>{var ot=rv(),Vt=d(ot);ie(Vt,()=>(j(k),E(()=>k.PAUSE))),m(kt,ot)},_t=kt=>{var ot=Ye(),Vt=Te(ot);{var We=Ze=>{var mt=sv(),xt=d(mt);ie(xt,()=>(j(k),E(()=>k.PLAY))),m(Ze,mt)},tt=Ze=>{var mt=Ye(),xt=Te(mt);{var bn=Nt=>{var $t=av(),Ln=d($t);ie(Ln,()=>(j(k),E(()=>k.PLAY))),m(Nt,$t)},Yt=Nt=>{var $t=iv(),Ln=d($t);fe(()=>de(Ln,W()+1)),m(Nt,$t)};F(xt,Nt=>{s(S)?Nt(bn):Nt(Yt,!1)},!0)}m(Ze,mt)};F(Vt,Ze=>{s(x)?Ze(We):Ze(tt,!1)},!0)}m(kt,ot)};F(Ke,kt=>{s(y)?kt(ht):kt(_t,!1)},!0)}m(Ue,Ie)};F(Le,Ue=>{s(b)?Ue(Ae):Ue(Qe,!1)})}C("click",ge,L),m(Q,ge)};F(X,Q=>{me()?Q(ne):Q(he,!1)})}var I=_(X,2),Y=d(I);Kn(Y,{get src(){return s(H)},get alt(){return s(D)},radius:"4px",$$events:{error:()=>g(re,!0)},$$slots:{fallback:(Q,ge)=>{var Le=lv(),Ae=d(Le);ie(Ae,()=>(s(p),j(k),E(()=>s(p)?k.RADIO:k.ALBUMS))),wt(1,Le,()=>on),m(Q,Le)}}});var ee=_(P,2),se=d(ee),le=d(se),N=d(le),pe=_(le,2);{var ce=Q=>{var ge=cv(),Le=d(ge);fe(()=>de(Le,s(U))),m(Q,ge)};F(pe,Q=>{s(U)&&!s(p)&&Q(ce)})}var ye=_(se,2);let Ce;var we=d(ye),ve=_(ee,2),Me=d(ve),Re=d(Me);ie(Re,()=>(j(k),E(()=>k.DOTS)));var Ne=_(Me,2);let Pe;var be=d(Ne);ie(be,()=>(s(v),j(k),E(()=>s(v)?k.HEART_FILLED:k.HEART)));var Ee=_(Ne,2);{var $e=Q=>{var ge=vv(),Le=d(ge);ie(Le,()=>(j(k),E(()=>k.REMOVE))),C("click",ge,Kt(()=>oe("remove",{index:W()}))),m(Q,ge)},Se=Q=>{var ge=uv(),Le=d(ge);fe(()=>de(Le,s(J))),m(Q,ge)};F(Ee,Q=>{me()?Q($e):Q(Se,!1)})}Lt(()=>C("click",w,()=>!s(h)&&oe("play"))),Lt(()=>C("mouseenter",w,()=>g(O,!0))),Lt(()=>C("mouseleave",w,()=>g(O,!1))),ia(w,Q=>_a?.(Q)),Lt(()=>C("longpress",w,te)),fe(()=>{T=Fe(w,1,"row svelte-5cs2hz",null,T,{active:s(h),duplicate:s(f),editable:me()}),yt(le,"title",s(D)),de(N,s(D)),Ce=Fe(ye,1,"artist text-ellipsis svelte-5cs2hz",null,Ce,{link:!s(p)}),de(we,s(q)),Pe=Fe(Ne,1,"btn-icon small svelte-5cs2hz",null,Pe,{liked:s(v)})}),C("click",ye,z),C("click",Me,K),C("click",Ne,Kt(()=>Xi(A()))),m(e,w),ft(),l()}const Yr=100,Qa=5,Wa=25,Ka=3;function fv({tracksStore:e,onMoveTrack:n}){const t=De(!1),r=De(!1),a=De(!1),i=De(null),o=De(null),l=De(null),v=De({x:0,y:0,width:0,height:0,grabOffsetX:0,grabOffsetY:0}),c=De(null);let u=!1,h=0,f=0,p=0,y=0;const x={scrollContainer:null,listBodyContainer:null};let b=null;function S(R,V,oe){const O=R.detail;if(O.button===2||(window.getSelection&&window.getSelection().removeAllRanges(),!x.scrollContainer))return;const B=x.scrollContainer.querySelectorAll(".row-wrapper")[V];if(!B)return;const L=B.getBoundingClientRect(),_e=O.touches?O.touches[0].clientX:O.clientX,K=O.touches?O.touches[0].clientY:O.clientY,te=_e-L.left,z=K-L.top;u=!0,t.set(!1),r.set(!1),h=_e,f=K,p=_e,y=K,i.set(V),o.set(V),c.set(oe),l.set(null),v.set({x:_e,y:K,width:L.width,height:L.height,grabOffsetX:te,grabOffsetY:z})}function D(R){if(!u||qe(r))return;const V=R.touches?R.touches[0].clientX:R.clientX,oe=R.touches?R.touches[0].clientY:R.clientY;if(!qe(t)){const O=Math.abs(V-h),re=Math.abs(oe-f);if(O<Ka&&re<Ka)return;t.set(!0)}R.cancelable&&R.preventDefault(),p=V,y=oe,v.update(O=>({...O,x:p,y})),A(y),q()}function q(){if(!x.listBodyContainer)return;const R=x.listBodyContainer.getBoundingClientRect(),V=qe(v),O=y-R.top-V.grabOffsetY+V.height/2,re=qe(e).length;if(O<0){o.set(0);return}if(O>R.height){o.set(re);return}const B=Array.from(x.listBodyContainer.querySelectorAll(".row-wrapper"));let L=-1,_e=1/0;B.forEach((K,te)=>{const z=K.offsetTop+K.offsetHeight/2,w=Math.abs(O-z);w<_e&&(_e=w,L=te)}),L!==-1&&o.set(L)}function J(R){if(u){if(u=!1,!qe(t)){G();return}U()}}async function U(){me(),q(),t.set(!1),r.set(!0);const R=qe(o);if(x.listBodyContainer&&R!==null){const L=x.listBodyContainer.querySelectorAll(".row-wrapper"),_e=x.listBodyContainer.getBoundingClientRect(),K=L[R];let te=0,z=0,w=!1;if(K)te=_e.top+K.offsetTop,z=_e.left+K.offsetLeft,w=!0;else if(R>=L.length&&L.length>0){const T=L[L.length-1];te=_e.top+T.offsetTop+T.offsetHeight,z=_e.left+T.offsetLeft,w=!0}else L.length===0&&(te=_e.top,z=_e.left,w=!0);w&&v.update(T=>({...T,y:te+T.grabOffsetY,x:z+T.grabOffsetX}))}await new Promise(L=>setTimeout(L,250)),a.set(!0),await lr();const V=qe(i),oe=qe(e).length;let O=Math.max(0,Math.min(R,oe)),re=O;if(V!==null&&V!==O){const L=[...qe(e)],[_e]=L.splice(V,1);re=Math.max(0,Math.min(re,L.length)),L.splice(re,0,_e),e.set(L),n&&n(V,re),i.set(re)}await lr(),c.set(null),i.set(null),o.set(null),r.set(!1);const B=V!==O?re:V;l.set(B),await lr(),requestAnimationFrame(()=>{requestAnimationFrame(()=>{a.set(!1),setTimeout(()=>{l.set(null)},300)})})}function G(){u=!1,H()}function H(){t.set(!1),r.set(!1),i.set(null),o.set(null),c.set(null),me()}function A(R){if(!x.scrollContainer)return;const{top:V,bottom:oe}=x.scrollContainer.getBoundingClientRect(),O=R-V,re=oe-R;me();let B=0;if(O<Yr&&O>0){const L=1-O/Yr;B=-(Qa+Wa*(L*L))}else if(re<Yr&&re>0){const L=1-re/Yr;B=Qa+Wa*(L*L)}B!==0&&W(B)}function W(R){b||(b=requestAnimationFrame(function V(){x.scrollContainer&&(x.scrollContainer.scrollTop+=R,qe(t)&&(v.update(oe=>({...oe,x:p,y})),q(),b=requestAnimationFrame(V)))}))}function me(){b&&(cancelAnimationFrame(b),b=null)}function ae(R,V,oe,O,re,B){return B||!V&&!oe||O===null||re===null?"":R===O?"opacity: 0; pointer-events: none;":O===re?"":O<re&&R>O&&R<=re?"transform: translateY(-100%);":O>re&&R>=re&&R<O?"transform: translateY(100%);":""}return{isDragging:t,isDropping:r,isReordering:a,draggingIndex:i,hoverIndex:o,justDroppedIndex:l,draggedItemData:c,ghostCoords:v,refs:x,onDragInit:S,onPointerMove:D,onPointerUp:J,getRowStyle:ae,cancelDrag:G}}var hv=M('<div><div style="pointer-events: none; width: 100%; height: 100%;" class="svelte-ym6b2"><!></div></div>'),pv=M('<div style="padding: 10px 0;" class="svelte-ym6b2"><!></div>'),gv=M('<div class="skeletons-wrapper svelte-ym6b2"></div>'),_v=M("<div><!></div>"),mv=M('<div class="content-padded svelte-ym6b2" style="text-align: center; opacity: 0.5;"> </div>'),bv=M("<!> <!>",1),yv=M('<div><!> <div class="list-body svelte-ym6b2"><!> <!></div></div>');function ms(e,n){dt(n,!1);const t=()=>ke(Ft,"$navigationStack",p),r=()=>ke(Pt,"$activeMenuTab",p),a=()=>ke(me,"$isDragging",p),i=()=>ke(ae,"$isDropping",p),o=()=>ke(re,"$draggedItemData",p),l=()=>ke(B,"$ghostCoords",p),v=()=>ke(V,"$draggingIndex",p),c=()=>ke(x(),"$itemsStore",p),u=()=>ke(O,"$justDroppedIndex",p),h=()=>ke(R,"$isReordering",p),f=()=>ke(oe,"$hoverIndex",p),[p,y]=It();let x=et(n,"itemsStore",8),b=et(n,"isEditMode",8,!1),S=et(n,"isLoading",8,!1),D=et(n,"emptyText",8,"List is empty"),q=et(n,"onMoveItem",8,(I,Y)=>{}),J=$(""),U=$(0),G=$(!1);yr(async()=>{g(U,Ec(s(J))),!S()&&s(U)>0&&s(A).refs.scrollContainer&&(await lr(),Br(A,s(A).refs.scrollContainer.scrollTop=s(U)),g(G,!0))});async function H(){await lr(),s(A).refs.scrollContainer&&(Br(A,s(A).refs.scrollContainer.scrollTop=s(U)),g(G,!0))}Ll(()=>{s(A).cancelDrag(),s(A).refs.scrollContainer&&xc(s(J),s(A).refs.scrollContainer.scrollTop)});const A=$(fv({tracksStore:x(),onMoveTrack:(I,Y)=>{q()(I,Y)}})),W=s(A),me=W.isDragging,ae=W.isDropping,R=W.isReordering,V=W.draggingIndex,oe=W.hoverIndex,O=W.justDroppedIndex,re=W.draggedItemData,B=W.ghostCoords,L=$(W.refs);function _e(I,Y,ee){b()&&s(A).onDragInit(I,Y,ee)}Z(()=>(t(),r()),()=>{const I=t(),Y=I[I.length-1],ee=r();if(Y&&Y.view==="root")g(J,`root_${ee}`);else if(Y){const se=Y.data?Y.data.name||Y.data:"unknown";g(J,`${Y.view}_${se}`)}}),Z(()=>(j(S()),s(G),s(U),s(A)),()=>{!S()&&!s(G)&&s(U)>0&&s(A).refs.scrollContainer&&H()}),Ht(),gt();var K=yv();C("mousemove",kn,function(...I){s(A).onPointerMove?.apply(this,I)}),C("mouseup",kn,function(...I){s(A).onPointerUp?.apply(this,I)}),C("touchmove",kn,function(...I){s(A).onPointerMove?.apply(this,I)},void 0,!1),C("touchend",kn,function(...I){s(A).onPointerUp?.apply(this,I)}),C("touchcancel",kn,function(...I){s(A).onPointerUp?.apply(this,I)});let te;var z=d(K);{var w=I=>{var Y=hv();let ee;var se=d(Y),le=d(se);Wr(le,n,"row",{get item(){return o()},get index(){return v()},isGhost:!0,startDrag:()=>{}}),fe(()=>{ee=Fe(Y,1,"floating-item svelte-ym6b2",null,ee,{dropping:i()}),Je(Y,`
            top: ${l(),E(()=>l().y-l().grabOffsetY)??""}px; 
            left: ${l(),E(()=>l().x-l().grabOffsetX)??""}px;
            width: ${l(),E(()=>l().width)??""}px; 
            height: ${l(),E(()=>l().height)??""}px;
        `)}),m(I,Y)};F(z,I=>{(a()||i())&&o()&&I(w)})}var T=_(z,2),P=d(T);Wr(P,n,"header",{});var X=_(P,2);{var ne=I=>{var Y=gv();Bt(Y,4,()=>Array(6),_n,(ee,se)=>{var le=pv(),N=d(le);Pn(N,{width:"100%",height:"50px"}),m(ee,le)}),m(I,Y)},he=I=>{var Y=bv(),ee=Te(Y);Bt(ee,3,c,(N,pe)=>N._uid||pe,(N,pe,ce)=>{var ye=_v();let Ce;var we=d(ye);Wr(we,n,"row",{get item(){return s(pe)},get index(){return s(ce)},isGhost:!1,startDrag:ve=>_e(ve,s(ce),s(pe))}),fe(ve=>{Ce=Fe(ye,1,"row-wrapper svelte-ym6b2",null,Ce,{"ghost-placeholder":v()===s(ce)&&(a()||i()),"just-dropped":u()===s(ce),"no-transition":h()}),Je(ye,ve)},[()=>(s(A),j(s(ce)),a(),i(),v(),f(),h(),E(()=>s(A).getRowStyle(s(ce),a(),i(),v(),f(),h())))]),m(N,ye)});var se=_(ee,2);{var le=N=>{var pe=mv(),ce=d(pe);fe(()=>de(ce,D())),m(N,pe)};F(se,N=>{c(),E(()=>c().length===0)&&N(le)})}m(I,Y)};F(X,I=>{S()?I(ne):I(he,!1)})}Cn(T,I=>Br(L,s(L).listBodyContainer=I),()=>s(L)?.listBodyContainer),Cn(K,I=>Br(L,s(L).scrollContainer=I),()=>s(L)?.scrollContainer),fe(()=>te=Fe(K,1,"base-list-scroll-container svelte-ym6b2",null,te,{dragging:a()})),wt(1,T,()=>on,()=>({duration:200})),m(e,K),ft(),y()}var wv=M('<div slot="fallback" class="icon-fallback svelte-1eh2rsb"><!></div>'),kv=M('<span class="meta-tag svelte-1eh2rsb"> </span>'),xv=M('<div class="header-subtitle-row svelte-1eh2rsb"><h2 class="header-sub-text svelte-1eh2rsb"> </h2> <!></div>'),Ev=M('<span class="meta-tag svelte-1eh2rsb"> </span>'),Sv=M('<span class="meta-tag svelte-1eh2rsb"> </span>'),Mv=M('<span class="meta-tag quality svelte-1eh2rsb"> </span>'),Tv=M('<div slot="header" class="content-padded svelte-1eh2rsb"><div class="view-header svelte-1eh2rsb"><div class="header-art svelte-1eh2rsb"><div style="width: 100%; height: 100%;" class="svelte-1eh2rsb"><!></div></div> <div class="header-info svelte-1eh2rsb"><div class="header-text-group svelte-1eh2rsb"><div class="header-label svelte-1eh2rsb"> </div> <h1 class="header-title svelte-1eh2rsb"> </h1> <!> <div class="meta-badges svelte-1eh2rsb"><!> <!> <!></div></div> <div class="header-actions svelte-1eh2rsb"><button class="btn-primary svelte-1eh2rsb"> </button> <button class="btn-secondary svelte-1eh2rsb"> </button></div></div></div></div>'),$v=M('<div slot="row" class="svelte-1eh2rsb"><!></div>'),Av=M("<button> </button>"),Cv=M('<div class="sort-backdrop svelte-1eh2rsb"></div> <div class="sort-menu svelte-1eh2rsb"></div>',1),Pv=M('<div class="sort-wrapper svelte-1eh2rsb"><button class="sort-trigger svelte-1eh2rsb"><span class="svelte-1eh2rsb"> </span> <span class="sort-trigger-icon svelte-1eh2rsb"><!></span></button> <!></div>'),Rv=M('<div class="music-card svelte-1eh2rsb"><!> <!></div>'),Lv=M('<div class="music-grid svelte-1eh2rsb"></div>'),zv=M('<div class="group-header header-label svelte-1eh2rsb"> </div>'),Iv=M('<div slot="fallback" class="icon-fallback svelte-1eh2rsb"><!></div>'),Nv=M('<div class="card-sub text-ellipsis svelte-1eh2rsb"> </div>'),jv=M('<div class="card-badge svelte-1eh2rsb"> </div>'),Ov=M('<div class="card-badge quality svelte-1eh2rsb"> </div>'),Dv=M('<div class="music-card svelte-1eh2rsb" role="button" tabindex="0"><div class="card-img-container svelte-1eh2rsb"><!> <div class="play-overlay svelte-1eh2rsb"><span class="overlay-icon svelte-1eh2rsb"><!></span></div></div> <div class="card-title svelte-1eh2rsb"> </div> <div class="card-sub-row svelte-1eh2rsb"><!> <!> <!></div></div>'),Fv=M('<div class="empty-text svelte-1eh2rsb">No results found</div>'),qv=M('<div class="music-grid svelte-1eh2rsb"></div>'),Bv=M('<div class="content-padded svelte-1eh2rsb"><div class="search-input-container svelte-1eh2rsb"><span class="search-icon svelte-1eh2rsb"><!></span> <input type="text" class="svelte-1eh2rsb"/> <!></div> <!></div>'),Uv=M("<div><!></div>");function Hv(e,n){dt(n,!1);const t=()=>ke(u,"$itemsStore",a),r=()=>ke(Ft,"$navigationStack",a),[a,i]=It(),o=$(),l=$(),v=$();let c=et(n,"activeCategory",8,"artists");const u=De([]);let h=$(!0),f=$(""),p=$("name"),y=$(!1);const x=[{id:"name",label:"A-Z"},{id:"artist",label:"Artist"},{id:"year",label:"Oldest"},{id:"year_desc",label:"Newest"}];let b=$(!1),S=$(!1),D=$(null),q=$(""),J=$(""),U=$(""),G=$(0),H=0;function A(){g(y,!s(y))}function W(K){g(p,K),g(y,!1)}function me(K,te){if(!K||K.length===0)return[];const z=[...K].sort((w,T)=>{switch(te){case"name":return w.displayName.localeCompare(T.displayName,void 0,{sensitivity:"base"});case"artist":const P=w.artist||"",X=T.artist||"",ne=P.localeCompare(X,void 0,{sensitivity:"base"});return ne!==0?ne:(parseInt(w.year)||0)-(parseInt(T.year)||0);case"year":return(parseInt(w.year)||0)-(parseInt(T.year)||0);case"year_desc":return(parseInt(T.year)||0)-(parseInt(w.year)||0);default:return 0}});if(te==="artist"){const w=[];let T=null;return z.forEach(P=>{const X=P.artist||"Unknown Artist";X!==T&&(w.push({_uid:`header-${X}`,isHeader:!0,title:X}),T=X),w.push(P)}),w}return z}async function ae(K,te){if(!te)return;const z=++H;g(h,!0),u.set([]),g(D,te.data),g(q,""),g(J,""),g(U,""),g(G,0),console.log(`[LibraryView #${z}] Start loading:`,te);try{let w=[];if(te.view==="root")w=K==="artists"?await Sn.getArtists():await Sn.getAlbums();else if(te.view==="albums_by_artist"){const P=te.data.name||te.data;w=await Sn.getArtistAlbums(P),g(p,"year")}else if(te.view==="tracks_by_album"){const P=te.data.name||te.data,X=te.data.artist;w=await Sn.getAlbumTracks(P,X)}if(z!==H){console.warn(`[LibraryView #${z}] Request cancelled (stale).`);return}const T=w.map((P,X)=>{const he=typeof P=="string"?{name:P}:P;let I=String(he.year||"");return I.length>4&&(I=I.substring(0,4)),{...he,displayName:he.name||he.title||he.artist||"Unknown",thumbFile:he.file||null,year:I,_uid:(he.file||he.name||X)+K+te.view}});if(console.log(`[LibraryView #${z}] Setting ${T.length} items.`),u.set(T),te.view==="tracks_by_album"&&T.length>0){g(D,T[0]),g(G,T.length),g(U,T[0].year);const P=T.reduce((X,ne)=>X+(ne.time||0),0);if(P>0){const X=Math.floor(P/3600),ne=Math.floor(P%3600/60);g(q,X>0?`${X} hr ${ne} min`:`${ne} min`)}T[0].qualityBadge&&g(J,T[0].qualityBadge)}}catch(w){z===H&&(console.error(w),u.set([]))}finally{z===H&&g(h,!1)}}function R(K){s(v).view==="root"?c()==="artists"?An("albums_by_artist",K):An("tracks_by_album",K):s(v).view==="albums_by_artist"&&An("tracks_by_album",K)}function V(){const K=t();if(K.length>0){const te=s(v).data.name||s(v).data.displayName||"this selection";$n({title:"Replace Queue?",message:`This will clear your queue and play all tracks from "${te}".`,confirmLabel:"Play",type:"confirm",onConfirm:()=>{g(b,!0),Qi(K)}})}}function oe(){const K=t();K.length>0&&(g(S,!0),Wi(K),setTimeout(()=>{g(S,!1)},2e3))}Z(()=>j(c()),()=>{c()&&(g(f,""),c(),g(p,"name"))}),Z(()=>(s(p),k),()=>{g(o,s(p)==="year_desc"?k.SORT_ASC:k.SORT_DESC)}),Z(()=>(t(),s(f),s(p)),()=>{g(l,me(t().filter(K=>{if(!s(f))return!0;const te=s(f).toLowerCase();return K.displayName.toLowerCase().includes(te)||K.artist&&K.artist.toLowerCase().includes(te)}),s(p)))}),Z(()=>r(),()=>{g(v,r()[r().length-1])}),Z(()=>(j(c()),s(v)),()=>{ae(c(),s(v))}),Z(()=>s(v),()=>{s(v)&&(g(b,!1),g(S,!1),g(y,!1))}),Ht(),gt();var O=Uv();let re;var B=d(O);{var L=K=>{ms(K,{get itemsStore(){return u},get isLoading(){return s(h)},isEditMode:!1,emptyText:"No tracks found",$$slots:{header:(te,z)=>{var w=Tv(),T=d(w),P=d(T),X=d(P),ne=d(X);{let Se=nt(()=>(j(pr),s(D),E(()=>pr(s(D)))));Kn(ne,{get src(){return s(Se)},alt:"Art",radius:"8px",$$slots:{fallback:(Q,ge)=>{var Le=wv(),Ae=d(Le);ie(Ae,()=>(j(k),E(()=>k.ALBUMS))),m(Q,Le)}}})}var he=_(P,2),I=d(he),Y=d(I),ee=d(Y),se=_(Y,2),le=d(se),N=_(se,2);{var pe=Se=>{var Q=xv(),ge=d(Q),Le=d(ge),Ae=_(ge,2);{var Qe=Ue=>{var Ie=kv(),Ke=d(Ie);fe(()=>de(Ke,s(U))),m(Ue,Ie)};F(Ae,Ue=>{s(U)&&s(U)!=="0"&&Ue(Qe)})}fe(()=>de(Le,(s(D),E(()=>s(D).artist)))),m(Se,Q)};F(N,Se=>{s(D),E(()=>s(D)&&s(D).artist)&&Se(pe)})}var ce=_(N,2),ye=d(ce);{var Ce=Se=>{var Q=Ev(),ge=d(Q);fe(()=>de(ge,`${s(G)??""} tracks`)),m(Se,Q)};F(ye,Se=>{s(G)>0&&Se(Ce)})}var we=_(ye,2);{var ve=Se=>{var Q=Sv(),ge=d(Q);fe(()=>de(ge,s(q))),m(Se,Q)};F(we,Se=>{s(q)&&Se(ve)})}var Me=_(we,2);{var Re=Se=>{var Q=Mv(),ge=d(Q);fe(()=>de(ge,s(J))),m(Se,Q)};F(Me,Se=>{s(J)&&Se(Re)})}var Ne=_(I,2),Pe=d(Ne),be=d(Pe),Ee=_(Pe,2),$e=d(Ee);fe(()=>{de(ee,(s(v),E(()=>s(v).view==="albums_by_artist"?"Artist":"Album"))),yt(se,"title",(s(v),E(()=>s(v).data.name||s(v).data.displayName))),de(le,(s(v),E(()=>s(v).data.name||s(v).data.displayName||"Unknown"))),Pe.disabled=s(b),de(be,s(b)?"Playing...":"Play All"),Ee.disabled=s(S),de($e,s(S)?"Added":"To Queue")}),C("click",Pe,V),C("click",Ee,oe),m(te,w)},row:(te,z)=>{var w=$v();const T=nt(()=>z.item),P=nt(()=>z.index);var X=d(w);_s(X,{get track(){return s(T)},get index(){return s(P)},isEditable:!1,$$events:{play:()=>gs(s(T))}}),m(te,w)}}})},_e=K=>{var te=Bv(),z=d(te),w=d(z),T=d(w);ie(T,()=>(j(k),E(()=>k.SEARCH)));var P=_(w,2),X=_(P,2);{var ne=ee=>{var se=Pv(),le=d(se),N=d(le),pe=d(N),ce=_(N,2),ye=d(ce);ie(ye,()=>s(o));var Ce=_(le,2);{var we=ve=>{var Me=Cv(),Re=Te(Me),Ne=_(Re,2);Bt(Ne,5,()=>x,_n,(Pe,be)=>{var Ee=Av();let $e;var Se=d(Ee);fe(()=>{$e=Fe(Ee,1,"sort-item svelte-1eh2rsb",null,$e,{selected:s(p)===s(be).id}),de(Se,(s(be),E(()=>s(be).label)))}),C("click",Ee,()=>W(s(be).id)),m(Pe,Ee)}),C("click",Re,A),wt(3,Re,()=>on,()=>({duration:100})),wt(3,Ne,()=>va,()=>({start:.95,duration:100})),m(ve,Me)};F(Ce,ve=>{s(y)&&ve(we)})}fe(ve=>de(pe,ve),[()=>(s(p),E(()=>x.find(ve=>ve.id===s(p))?.label))]),C("click",le,A),m(ee,se)};F(X,ee=>{j(c()),s(v),E(()=>c()==="albums"||s(v).view==="albums_by_artist")&&ee(ne)})}var he=_(z,2);{var I=ee=>{var se=Lv();Bt(se,4,()=>Array(12),_n,(le,N)=>{var pe=Rv(),ce=d(pe);Pn(ce,{width:"100%",style:"aspect-ratio:1; border-radius:12px; margin-bottom:12px;"});var ye=_(ce,2);Pn(ye,{width:"80%",height:"16px"}),m(le,pe)}),m(ee,se)},Y=ee=>{var se=qv();Bt(se,5,()=>s(l),le=>le._uid,(le,N)=>{var pe=Ye(),ce=Te(pe);{var ye=we=>{var ve=zv(),Me=d(ve);fe(()=>de(Me,(s(N),E(()=>s(N).title)))),m(we,ve)},Ce=we=>{var ve=Dv(),Me=d(ve),Re=d(Me);{let Ie=nt(()=>(j(zr),s(N),E(()=>zr(s(N),"md"))));Kn(Re,{get src(){return s(Ie)},get alt(){return s(N),E(()=>s(N).displayName)},radius:"8px",$$slots:{fallback:(Ke,ht)=>{var _t=Iv(),kt=d(_t);{var ot=We=>{var tt=Ye(),Ze=Te(tt);ie(Ze,()=>(j(k),E(()=>k.ARTISTS))),m(We,tt)},Vt=We=>{var tt=Ye(),Ze=Te(tt);ie(Ze,()=>(j(k),E(()=>k.ALBUMS))),m(We,tt)};F(kt,We=>{c()==="artists"?We(ot):We(Vt,!1)})}m(Ke,_t)}}})}var Ne=_(Re,2),Pe=d(Ne),be=d(Pe);ie(be,()=>(j(k),E(()=>k.PLAY)));var Ee=_(Me,2),$e=d(Ee),Se=_(Ee,2),Q=d(Se);{var ge=Ie=>{var Ke=Nv(),ht=d(Ke);fe(()=>de(ht,(s(N),E(()=>s(N).artist)))),m(Ie,Ke)};F(Q,Ie=>{s(N),E(()=>s(N).artist)&&Ie(ge)})}var Le=_(Q,2);{var Ae=Ie=>{var Ke=jv(),ht=d(Ke);fe(()=>de(ht,(s(N),E(()=>s(N).year)))),m(Ie,Ke)};F(Le,Ie=>{s(N),E(()=>s(N).year&&s(N).year!=="0")&&Ie(Ae)})}var Qe=_(Le,2);{var Ue=Ie=>{var Ke=Ov(),ht=d(Ke);fe(_t=>de(ht,_t),[()=>(s(N),E(()=>s(N).qualityBadge.split(" ")[0]))]),m(Ie,Ke)};F(Qe,Ie=>{s(N),E(()=>s(N).qualityBadge)&&Ie(Ue)})}fe(()=>de($e,(s(N),E(()=>s(N).displayName)))),C("click",ve,()=>R(s(N))),C("keypress",ve,Ie=>Ie.key==="Enter"&&R(s(N))),m(we,ve)};F(ce,we=>{s(N),E(()=>s(N).isHeader)?we(ye):we(Ce,!1)})}m(le,pe)},le=>{var N=Fv();m(le,N)}),m(ee,se)};F(he,ee=>{s(h)?ee(I):ee(Y,!1)})}fe(()=>yt(P,"placeholder",`Filter ${c()??""}...`)),hs(P,()=>s(f),ee=>g(f,ee)),m(K,te)};F(B,K=>{s(v),E(()=>s(v)?.view==="tracks_by_album")?K(L):K(_e,!1)})}fe(()=>re=Fe(O,1,"view-container svelte-1eh2rsb",null,re,{scrollable:s(v)?.view!=="tracks_by_album"})),m(e,O),ft(),i()}var Vv=M('<div class="music-card svelte-1otxnt7"><!> <!></div>'),Yv=M('<div class="music-grid svelte-1otxnt7"></div>'),Qv=M('<div slot="fallback" class="icon-fallback svelte-1otxnt7">ð»</div>'),Wv=M('<div class="status-badge playing svelte-1otxnt7">PLAYING</div>'),Kv=M('<div class="status-badge paused svelte-1otxnt7">PAUSED</div>'),Xv=M('<span class="overlay-icon svelte-1otxnt7"><!></span>'),Gv=M('<div class="card-sub svelte-1otxnt7"> </div>'),Zv=M('<div class="card-badge quality svelte-1otxnt7"> </div>'),Jv=M('<div role="button" tabindex="0"><div class="card-img-container svelte-1otxnt7"><!> <div class="play-overlay svelte-1otxnt7"><!></div></div> <div class="card-title svelte-1otxnt7"> </div> <div class="card-sub-row svelte-1otxnt7"><!> <!></div></div>'),eu=M('<div class="empty-text svelte-1otxnt7">No stations found</div>'),tu=M('<div class="music-grid svelte-1otxnt7"></div> <!>',1),nu=M('<div class="view-container scrollable svelte-1otxnt7"><div class="content-padded no-bottom-pad svelte-1otxnt7"><div class="search-input-container svelte-1otxnt7"><span class="search-icon svelte-1otxnt7"><!></span> <input type="text" placeholder="Find station..." class="svelte-1otxnt7"/></div></div> <div class="content-padded svelte-1otxnt7"><!></div></div>');function ru(e,n){dt(n,!1);const t=()=>ke(Rn,"$stations",o),r=()=>ke(it,"$status",o),a=()=>ke(Kr,"$isLoadingRadio",o),i=()=>ke(Ut,"$currentSong",o),[o,l]=It(),v=$(),c=$();let u=$("");Z(()=>(t(),s(u)),()=>{g(v,t().filter(U=>{const G=s(u).toLowerCase();return U.name.toLowerCase().includes(G)||U.genre&&U.genre.toLowerCase().includes(G)}))}),Z(()=>r(),()=>{g(c,r().bitrate?`${r().bitrate} kbps`:r().format||"")}),Ht(),gt();var h=nu(),f=d(h),p=d(f),y=d(p),x=d(y);ie(x,()=>(j(k),E(()=>k.SEARCH)));var b=_(y,2),S=_(f,2),D=d(S);{var q=U=>{var G=Yv();Bt(G,4,()=>Array(12),_n,(H,A)=>{var W=Vv(),me=d(W);Pn(me,{width:"100%",style:"aspect-ratio:1; border-radius:12px; margin-bottom:12px;"});var ae=_(me,2);Pn(ae,{width:"70%",height:"16px"}),m(H,W)}),m(U,G)},J=U=>{var G=tu(),H=Te(G);Bt(H,5,()=>s(v),_n,(me,ae)=>{const R=nt(()=>(s(ae),E(()=>s(ae).file))),V=nt(()=>(i(),s(ae),j(s(R)),E(()=>i().stationName===s(ae).name||i().file===s(R)))),oe=nt(()=>(j(hr),s(ae),E(()=>hr(s(ae)))));var O=Jv();let re;var B=d(O),L=d(B);Kn(L,{get src(){return s(oe)},get alt(){return s(ae),E(()=>s(ae).name)},radius:"8px",$$slots:{fallback:(Y,ee)=>{var se=Qv();m(Y,se)}}});var _e=_(L,2),K=d(_e);{var te=Y=>{var ee=Ye(),se=Te(ee);{var le=pe=>{var ce=Wv();m(pe,ce)},N=pe=>{var ce=Kv();m(pe,ce)};F(se,pe=>{r(),E(()=>r().state==="play")?pe(le):pe(N,!1)})}m(Y,ee)},z=Y=>{var ee=Xv(),se=d(ee);ie(se,()=>(j(k),E(()=>k.PLAY))),m(Y,ee)};F(K,Y=>{s(V)?Y(te):Y(z,!1)})}var w=_(B,2),T=d(w),P=_(w,2),X=d(P);{var ne=Y=>{var ee=Gv(),se=d(ee);fe(()=>de(se,(s(ae),E(()=>s(ae).genre)))),m(Y,ee)};F(X,Y=>{s(ae),E(()=>s(ae).genre)&&Y(ne)})}var he=_(X,2);{var I=Y=>{var ee=Zv(),se=d(ee);fe(()=>de(se,s(c))),wt(1,ee,()=>on),m(Y,ee)};F(he,Y=>{s(V)&&s(c)&&Y(I)})}fe(()=>{re=Fe(O,1,"music-card svelte-1otxnt7",null,re,{"is-active":s(V)}),Je(_e,s(V)?"opacity: 1":""),de(T,(s(ae),E(()=>s(ae).name)))}),C("click",O,()=>ga(s(ae))),m(me,O)});var A=_(H,2);{var W=me=>{var ae=eu();m(me,ae)};F(A,me=>{s(v),t(),E(()=>s(v).length===0&&t().length>0)&&me(W)})}m(U,G)};F(D,U=>{a()?U(q):U(J,!1)})}hs(b,()=>s(u),U=>g(u,U)),wt(1,h,()=>on,()=>({duration:200})),m(e,h),ft(),l()}var su=M('<span class="meta-tag svelte-m7c4tz">Loading...</span>'),au=M('<span class="meta-tag svelte-m7c4tz"> </span>'),iu=M('<span class="meta-tag quality svelte-m7c4tz"> </span>'),ou=M('<span class="meta-tag svelte-m7c4tz"> </span> <!> <!>',1),lu=M('<div slot="header" class="content-padded svelte-m7c4tz"><div class="view-header svelte-m7c4tz"><div class="header-art svelte-m7c4tz"><div class="header-icon-wrap svelte-m7c4tz"><!></div></div> <div class="header-info svelte-m7c4tz"><div class="header-text-group svelte-m7c4tz"><div class="header-label svelte-m7c4tz">Playlist</div> <h1 class="header-title svelte-m7c4tz"> </h1> <div class="meta-badges svelte-m7c4tz"><!></div></div> <div class="header-actions svelte-m7c4tz"><button class="btn-primary svelte-m7c4tz"> </button> <button class="btn-secondary svelte-m7c4tz"> </button> <button title="Edit"><!></button></div></div></div></div>'),cu=M('<div slot="row" class="svelte-m7c4tz"><!></div>'),vu=M('<div class="music-card svelte-m7c4tz"><!> <!></div>'),uu=M('<div class="content-padded svelte-m7c4tz"><div class="music-grid playlists-grid-override svelte-m7c4tz"></div></div>'),du=M('<button class="card-menu-btn svelte-m7c4tz"><!></button>'),fu=M('<div class="music-card svelte-m7c4tz"><div class="card-img-container svelte-m7c4tz"><div class="icon-wrap svelte-m7c4tz"><!></div> <!> <div class="play-overlay svelte-m7c4tz"><span class="overlay-icon svelte-m7c4tz"><!></span></div></div> <div class="card-title svelte-m7c4tz"> </div> <div class="card-sub-row svelte-m7c4tz"><div class="card-sub svelte-m7c4tz"> </div></div></div>'),hu=M('<div class="content-padded svelte-m7c4tz"><div class="music-grid playlists-grid-override svelte-m7c4tz"><div class="music-card svelte-m7c4tz"><div class="card-img-container dashed-cover svelte-m7c4tz"><div class="icon-wrap svelte-m7c4tz"><!></div></div> <div class="card-title svelte-m7c4tz">New Playlist</div></div> <!></div></div>'),pu=M("<div><!></div>");function gu(e,n){dt(n,!1);const t=()=>ke(it,"$status",u),r=()=>ke(Ut,"$currentSong",u),a=()=>ke(Ft,"$navigationStack",u),i=()=>ke(ir,"$activePlaylistTracks",u),o=()=>ke(Ys,"$isLoadingTracks",u),l=()=>ke(ua,"$playlists",u),v=()=>ke(Bn,"$queue",u),c=()=>ke(Vs,"$isLoadingPlaylists",u),[u,h]=It(),f=$(),p=$(),y=$(),x=$(),b=$(),S=$();let D=$(!1),q=$(!1),J=$(!1),U=$(""),G=$("");yr(()=>{!s(b)&&l().length===0&&pa()});function H(z){const w=z.reduce((P,X)=>P+(parseFloat(X.time)||0),0);if(w>0){const P=Math.floor(w/3600),X=Math.floor(w%3600/60);g(U,P>0?`${P} hr ${X} min`:`${X} min`)}else g(U,"");const T=new Set;z.forEach(P=>{P.qualityBadge&&T.add(P.qualityBadge.split(" ")[0])}),g(G,T.size===1?z[0].qualityBadge:T.size>1?"Mixed":"")}function A(z){An("details",z)}function W(){if(v().length===0){$n({title:"Create Playlist",message:"Queue is empty. Add tracks to queue before saving a playlist.",confirmLabel:"OK",type:"alert"});return}$n({title:"New Playlist",message:"Save current queue as a new playlist:",type:"prompt",placeholder:"Playlist Name",confirmLabel:"Create",onConfirm:z=>{z&&sn.createPlaylistFromQueue(z)}})}function me(z,w){w.name!=="Favorites"&&(z.stopPropagation(),z.preventDefault(),Lr(z,null,{type:"playlist-card",playlist:w}))}function ae(){$n({title:"Replace Queue?",message:`This will clear your current queue and play "${s(x).data.name}".`,confirmLabel:"Play",type:"confirm",onConfirm:()=>{g(q,!0),Ji(s(x).data.name,0)}})}function R(z){s(D)||gs(z)}function V(){if(i().length>0){const z=s(x).data.name.replace(/"/g,'\\"');is(`load "${z}"`),g(J,!0),setTimeout(()=>{g(J,!1)},2e3)}}function oe(){g(D,!s(D))}function O(z){const w=s(x).data.name,T=i();T.splice(z,1),ir.set(T),Gi(w,z),H(T)}function re(z,w){Zi(s(x).data.name,z,w)}Z(()=>t(),()=>{g(f,Number(t().song))}),Z(()=>r(),()=>{g(p,r().file)}),Z(()=>t(),()=>{g(y,t().state==="play")}),Z(()=>a(),()=>{g(x,a()[a().length-1])}),Z(()=>s(x),()=>{g(b,s(x).view==="details")}),Z(()=>s(x),()=>{s(x)&&(g(q,!1),g(J,!1))}),Z(()=>(s(b),i(),o()),()=>{if(s(b)&&i().length>0){const z=i();if(!z[0]._uid){const w=z.map(T=>({...T,_uid:Math.random()}));ir.set(w)}H(z)}else s(b)&&i().length===0&&!o()&&(g(U,"0 min"),g(G,""))}),Z(()=>(s(b),s(x),ev),()=>{s(b)&&s(x).data&&(g(D,!1),Ki(s(x).data.name))}),Z(()=>s(x),()=>{g(S,s(x)?.data?.name==="Favorites")}),Ht(),gt();var B=pu();let L;var _e=d(B);{var K=z=>{ms(z,{get itemsStore(){return ir},get isLoading(){return o()},get isEditMode(){return s(D)},emptyText:"This playlist is empty.",onMoveItem:re,$$slots:{header:(w,T)=>{var P=lu(),X=d(P),ne=d(X),he=d(ne),I=d(he);ie(I,()=>(s(S),j(k),E(()=>s(S)?k.HEART_FILLED:k.PLAYLISTS)));var Y=_(ne,2),ee=d(Y),se=_(d(ee),2),le=d(se),N=_(se,2),pe=d(N);{var ce=Ee=>{var $e=su();m(Ee,$e)},ye=Ee=>{var $e=ou(),Se=Te($e),Q=d(Se),ge=_(Se,2);{var Le=Ue=>{var Ie=au(),Ke=d(Ie);fe(()=>de(Ke,s(U))),m(Ue,Ie)};F(ge,Ue=>{s(U)&&Ue(Le)})}var Ae=_(ge,2);{var Qe=Ue=>{var Ie=iu(),Ke=d(Ie);fe(()=>de(Ke,s(G))),m(Ue,Ie)};F(Ae,Ue=>{s(G)&&Ue(Qe)})}fe(()=>de(Q,`${i(),E(()=>i().length)??""} tracks`)),m(Ee,$e)};F(pe,Ee=>{o()?Ee(ce):Ee(ye,!1)})}var Ce=_(ee,2),we=d(Ce),ve=d(we),Me=_(we,2),Re=d(Me),Ne=_(Me,2);let Pe;var be=d(Ne);ie(be,()=>(s(D),j(k),E(()=>s(D)?k.ACCEPT:k.EDIT))),fe(()=>{Je(ne,`background: ${s(S),s(x),E(()=>s(S)?"linear-gradient(135deg, hsl(348, 95%, 58%), hsl(348, 90%, 40%))":s(x).data.color||"#333")??""};`),yt(se,"title",(s(x),E(()=>s(x).data.name))),de(le,(s(x),E(()=>s(x).data.name))),we.disabled=s(q),de(ve,s(q)?"Playing...":"Play All"),Me.disabled=s(J),de(Re,s(J)?"Added":"To Queue"),Pe=Fe(Ne,1,"btn-action svelte-m7c4tz",null,Pe,{active:s(D)})}),C("click",we,ae),C("click",Me,V),C("click",Ne,oe),m(w,P)},row:(w,T)=>{var P=cu();const X=nt(()=>T.item),ne=nt(()=>T.index),he=nt(()=>T.startDrag);var I=d(P);_s(I,{get track(){return s(X)},get index(){return s(ne)},get playingIndex(){return s(f)},get playingFile(){return s(p)},get isPlaying(){return s(y)},get isEditable(){return s(D)},$$events:{play:()=>R(s(X)),remove:()=>O(s(ne)),startdrag(...Y){s(he)?.apply(this,Y)}}}),m(w,P)}}})},te=z=>{var w=Ye(),T=Te(w);{var P=ne=>{var he=uu(),I=d(he);Bt(I,4,()=>Array(8),_n,(Y,ee)=>{var se=vu(),le=d(se);Pn(le,{width:"100%",style:"aspect-ratio: 1; border-radius: 12px; margin-bottom: 12px;"});var N=_(le,2);Pn(N,{width:"60%",height:"16px"}),m(Y,se)}),m(ne,he)},X=ne=>{var he=hu(),I=d(he),Y=d(I),ee=d(Y),se=d(ee),le=d(se);ie(le,()=>(j(k),E(()=>k.ADD)));var N=_(Y,2);Bt(N,1,l,_n,(pe,ce)=>{const ye=nt(()=>(s(ce),E(()=>s(ce).name==="Favorites")));var Ce=fu(),we=d(Ce),ve=d(we),Me=d(ve);ie(Me,()=>(j(s(ye)),j(k),E(()=>s(ye)?k.HEART_FILLED:k.PLAYLISTS)));var Re=_(ve,2);{var Ne=Ae=>{var Qe=du(),Ue=d(Qe);ie(Ue,()=>(j(k),E(()=>k.DOTS))),C("click",Qe,Ie=>me(Ie,s(ce))),m(Ae,Qe)};F(Re,Ae=>{s(ye)||Ae(Ne)})}var Pe=_(Re,2),be=d(Pe),Ee=d(be);ie(Ee,()=>(j(k),E(()=>k.PLAY)));var $e=_(we,2),Se=d($e),Q=_($e,2),ge=d(Q),Le=d(ge);Lt(()=>C("click",Ce,()=>A(s(ce)))),ia(Ce,Ae=>_a?.(Ae)),Lt(()=>C("longpress",Ce,Ae=>me(Ae.detail.originalEvent,s(ce)))),Lt(()=>C("contextmenu",Ce,Ae=>me(Ae,s(ce)))),fe(Ae=>{Je(we,`background: ${s(ce),E(()=>s(ce).color)??""};`),de(Se,(s(ce),E(()=>s(ce).name))),de(Le,Ae)},[()=>(s(ce),E(()=>s(ce).lastModified?new Date(s(ce).lastModified).toLocaleDateString():"Playlist"))]),m(pe,Ce)}),C("click",Y,W),m(ne,he)};F(T,ne=>{c()?ne(P):ne(X,!1)},!0)}m(z,w)};F(_e,z=>{s(b)?z(K):z(te,!1)})}fe(()=>L=Fe(B,1,"view-container svelte-m7c4tz",null,L,{scrollable:!s(b)})),m(e,B),ft(),h()}var _u=M('<button class="clear-icon-btn svelte-1d3z1zm"><!></button>'),mu=M('<div class="spinner svelte-1d3z1zm"></div>'),bu=M('<div class="placeholder-state svelte-1d3z1zm"><div class="placeholder-icon svelte-1d3z1zm">ð</div> <p class="svelte-1d3z1zm">Type to search your library</p></div>'),yu=M('<div class="empty-text svelte-1d3z1zm"> </div>'),wu=M('<div slot="fallback" class="icon-fallback svelte-1d3z1zm">ð¿</div>'),ku=M('<div class="meta-tag svelte-1d3z1zm"> </div>'),xu=M('<div class="meta-tag quality svelte-1d3z1zm"> </div>'),Eu=M('<div class="music-card svelte-1d3z1zm"><div class="card-img-container svelte-1d3z1zm"><!> <div class="play-overlay svelte-1d3z1zm"><span class="overlay-icon svelte-1d3z1zm"><!></span></div></div> <div class="card-title svelte-1d3z1zm"> </div> <div class="card-sub-row svelte-1d3z1zm"><div class="card-sub text-ellipsis svelte-1d3z1zm"> </div> <!> <!></div></div>'),Su=M('<div class="header-label section-spacing svelte-1d3z1zm">Albums</div> <div class="music-grid horizontal section-mb svelte-1d3z1zm"></div>',1),Mu=M('<div class="header-label svelte-1d3z1zm">Tracks</div>'),Tu=M("<!> <!>",1),$u=M('<div slot="header" class="content-padded svelte-1d3z1zm"><!></div>'),Au=M('<div slot="row" class="svelte-1d3z1zm"><!></div>'),Cu=M('<div class="view-container svelte-1d3z1zm"><div class="content-padded no-bottom-pad svelte-1d3z1zm"><div class="search-input-container svelte-1d3z1zm"><span class="search-icon svelte-1d3z1zm"><!></span> <input type="text" placeholder="Artists, songs, or albums" autoFocus class="svelte-1d3z1zm"/> <!> <!></div></div> <!></div>');function Pu(e,n){dt(n,!1);const t=()=>ke(Tr,"$searchQuery",a),r=()=>ke(o,"$tracksStore",a),[a,i]=It(),o=De([]);let l=$([]),v=$(!1),c,u=$(!1);yr(()=>{t().length>=2&&p(t())});function h(R){Tr.set(R.target.value),clearTimeout(c),c=setTimeout(()=>{p(t())},300)}function f(){Tr.set(""),o.set([]),g(l,[]),g(u,!1)}async function p(R){const V=R.trim().toLowerCase();if(V.length<2){o.set([]),g(l,[]),g(u,!1);return}g(v,!0),g(u,!0);try{const oe=await Sn.search(V),O=oe.map((B,L)=>({...B,_uid:B.file?`${B.file}-${L}`:`search-${L}`}));o.set(O);const re=new Map;oe.forEach(B=>{const L=B.album;if(L&&!re.has(L)){const _e=L.toLowerCase().includes(V),K=B.artist&&B.artist.toLowerCase().includes(V);if(_e||K){let te=String(B.year||"");te.length>4&&(te=te.substring(0,4)),re.set(L,{name:L,artist:B.artist,file:B.file,thumbHash:B.thumbHash,_uid:`alb-${L}`,year:te,qualityBadge:B.qualityBadge})}}}),g(l,Array.from(re.values()))}finally{g(v,!1)}}function y(R){gs(R)}function x(R){An("tracks_by_album",{name:R.name,artist:R.artist})}function b(R){R.deltaY!==0&&(R.currentTarget.scrollLeft+=R.deltaY)}gt();var S=Cu(),D=d(S),q=d(D),J=d(q),U=d(J);ie(U,()=>k.SEARCH);var G=_(J,2),H=_(G,2);{var A=R=>{var V=_u(),oe=d(V);ie(oe,()=>k.CLOSE),C("click",V,f),m(R,V)};F(H,R=>{t().length>0&&R(A)})}var W=_(H,2);{var me=R=>{var V=mu();m(R,V)};F(W,R=>{s(v)&&R(me)})}var ae=_(D,2);ms(ae,{get itemsStore(){return o},isEditMode:!1,isLoading:!1,emptyText:"",$$slots:{header:(R,V)=>{var oe=$u(),O=d(oe);{var re=L=>{var _e=bu();m(L,_e)},B=L=>{var _e=Ye(),K=Te(_e);{var te=w=>{var T=yu(),P=d(T);fe(()=>de(P,`No results found for "${t()??""}"`)),m(w,T)},z=w=>{var T=Tu(),P=Te(T);{var X=I=>{var Y=Su(),ee=_(Te(Y),2);Bt(ee,5,()=>s(l),se=>se._uid,(se,le)=>{var N=Eu(),pe=d(N),ce=d(pe);{let Q=nt(()=>zr(s(le),"md"));Kn(ce,{get src(){return s(Q)},get alt(){return s(le).name},radius:"8px",$$slots:{fallback:(ge,Le)=>{var Ae=wu();m(ge,Ae)}}})}var ye=_(ce,2),Ce=d(ye),we=d(Ce);ie(we,()=>k.PLAY);var ve=_(pe,2),Me=d(ve),Re=_(ve,2),Ne=d(Re),Pe=d(Ne),be=_(Ne,2);{var Ee=Q=>{var ge=ku(),Le=d(ge);fe(()=>de(Le,s(le).year)),m(Q,ge)};F(be,Q=>{s(le).year&&s(le).year!=="0"&&s(le).year!==0&&Q(Ee)})}var $e=_(be,2);{var Se=Q=>{var ge=xu(),Le=d(ge);fe(Ae=>de(Le,Ae),[()=>s(le).qualityBadge.split(" ")[0]]),m(Q,ge)};F($e,Q=>{s(le).qualityBadge&&Q(Se)})}fe(()=>{yt(ve,"title",s(le).name),de(Me,s(le).name),de(Pe,s(le).artist)}),C("click",N,()=>x(s(le))),m(se,N)}),C("wheel",ee,b),m(I,Y)};F(P,I=>{s(l).length>0&&I(X)})}var ne=_(P,2);{var he=I=>{var Y=Mu();m(I,Y)};F(ne,I=>{r().length>0&&I(he)})}m(w,T)};F(K,w=>{!s(v)&&r().length===0&&s(l).length===0&&s(u)?w(te):w(z,!1)},!0)}m(L,_e)};F(O,L=>{t().length<2?L(re):L(B,!1)})}m(R,oe)},row:(R,V)=>{var oe=Au();const O=nt(()=>V.item),re=nt(()=>V.index);var B=d(oe);_s(B,{get track(){return s(O)},get index(){return s(re)},isEditable:!1,$$events:{play:()=>y(s(O))}}),m(R,oe)}}}),fe(()=>Tl(G,t())),C("input",G,h),m(e,S),ft(),i()}var Ru=M('<div class="view-container scrollable svelte-1j67jqh"><div class="content-padded svelte-1j67jqh"><h1 class="header-title big svelte-1j67jqh">Settings</h1> <div class="section svelte-1j67jqh"><div class="section-header svelte-1j67jqh"><span class="icon-svg svelte-1j67jqh"><!></span> <span class="svelte-1j67jqh">Connection</span></div> <div class="card svelte-1j67jqh"><div class="row svelte-1j67jqh"><label for="ip" class="svelte-1j67jqh">Moode Device IP</label> <div class="input-group svelte-1j67jqh"><input id="ip" type="text" placeholder="192.168.x.x" class="svelte-1j67jqh"/> <button class="btn-primary small svelte-1j67jqh">Save</button></div></div> <p class="hint svelte-1j67jqh"> </p></div></div> <div class="section svelte-1j67jqh"><div class="section-header svelte-1j67jqh"><span class="svelte-1j67jqh">Alarm Clock</span></div> <div class="card clickable svelte-1j67jqh"><div class="row space-between svelte-1j67jqh"><span class="svelte-1j67jqh">Wake up time</span> <span class="value svelte-1j67jqh">Coming Soon</span></div></div></div> <div class="section svelte-1j67jqh"><div class="section-header svelte-1j67jqh"><span class="svelte-1j67jqh">Appearance</span></div> <div class="card clickable svelte-1j67jqh"><div class="row space-between svelte-1j67jqh"><span class="svelte-1j67jqh">Theme</span> <span class="value svelte-1j67jqh">Dark (Default)</span></div></div></div> <div class="section svelte-1j67jqh"><div class="section-header svelte-1j67jqh"><span class="svelte-1j67jqh">Language</span></div> <div class="card clickable svelte-1j67jqh"><div class="row space-between svelte-1j67jqh"><span class="svelte-1j67jqh">Interface Language</span> <span class="value svelte-1j67jqh">English</span></div></div></div> <div class="section svelte-1j67jqh"><div class="section-header svelte-1j67jqh"><span class="svelte-1j67jqh">About</span></div> <div class="card svelte-1j67jqh"><div class="info-row svelte-1j67jqh"><span class="svelte-1j67jqh">Version</span> <span class="mono svelte-1j67jqh"> </span></div> <div class="separator svelte-1j67jqh"></div> <div class="info-row svelte-1j67jqh"><span class="svelte-1j67jqh">Build Date</span> <span class="mono small svelte-1j67jqh"> </span></div> <div class="separator svelte-1j67jqh"></div> <div class="info-row svelte-1j67jqh"><span class="svelte-1j67jqh">Developer</span> <span class="svelte-1j67jqh">Moode WaveUI</span></div></div></div></div></div>');function Lu(e,n){dt(n,!1);let t=$(cr.MOODE_IP);function r(){cr.setMoodeIp(s(t)),je("IP Saved. Reloading...","success"),setTimeout(()=>location.reload(),1e3)}const a="0.0.1",i="2026-01-06T14:58:04.374Z",o=new Date(i).toLocaleString();function l(){je("Coming soon in next update","info")}gt();var v=Ru(),c=d(v),u=_(d(c),2),h=d(u),f=d(h),p=d(f);ie(p,()=>k.SETTINGS||k.MENU);var y=_(h,2),x=d(y),b=_(d(x),2),S=d(b),D=_(S,2),q=_(x,2),J=d(q),U=_(u,2),G=_(d(U),2),H=_(U,2),A=_(d(H),2),W=_(H,2),me=_(d(W),2),ae=_(W,2),R=_(d(ae),2),V=d(R),oe=_(d(V),2),O=d(oe),re=_(V,4),B=_(d(re),2),L=d(B);fe(()=>{de(J,`Current: ${cr.MOODE_IP??""}`),de(O,a),de(L,o)}),hs(S,()=>s(t),_e=>g(t,_e)),C("click",D,r),C("click",G,l),C("click",A,l),C("click",me,l),wt(1,v,()=>on,()=>({duration:200})),m(e,v),ft()}var zu=M('<span class="meta-tag svelte-185fgrr"> </span>'),Iu=M('<div slot="header" class="content-padded svelte-185fgrr"><div class="view-header svelte-185fgrr"><div class="header-art svelte-185fgrr" style="background: var(--c-surface-active);"><div class="header-icon-wrap svelte-185fgrr"><!></div></div> <div class="header-info svelte-185fgrr"><div class="header-text-group svelte-185fgrr"><div class="header-label svelte-185fgrr">Now Playing</div> <h1 class="header-title svelte-185fgrr">Current Queue</h1> <div class="meta-badges svelte-185fgrr"><span class="meta-tag svelte-185fgrr"> </span> <!></div></div> <div class="header-actions svelte-185fgrr"><button class="btn-secondary svelte-185fgrr" title="Clear Queue">Clear</button> <button class="btn-action svelte-185fgrr" title="Save Queue"><!></button> <button><!></button></div></div></div></div>'),Nu=M('<div slot="row" class="svelte-185fgrr"><!></div>'),ju=M('<div class="view-container svelte-185fgrr"><!></div>');function Ou(e,n){dt(n,!1);const t=()=>ke(it,"$status",o),r=()=>ke(st,"$isQueueLocked",o),a=()=>ke(Ut,"$currentSong",o),i=()=>ke(Bn,"$queue",o),[o,l]=It(),v=$(),c=$(),u=$(),h=$();let f=$(!1),p=$(""),y=$(-1);function x(){g(f,!s(f))}function b(H){s(f)||is(`play ${H}`)}function S(H){H<s(y)&&g(y,s(y)-1),Gt.removeFromQueue(H)}async function D(){$n({title:"Save Playlist",message:"Enter a name for this playlist:",type:"prompt",placeholder:"Playlist Name",confirmLabel:"Save",onConfirm:async H=>{H&&H.trim().length>0&&(await Gt.saveQueue(H),pa())}})}function q(){i().length!==0&&$n({title:"Clear Queue",message:"Are you sure you want to clear the entire play queue?",confirmLabel:"Clear All",type:"confirm",onConfirm:async()=>{Bn.set([]),Ut.set({title:"Not Playing",artist:"",album:"",file:"",stationName:null,id:null,pos:null}),it.update(H=>({...H,state:"stop",song:-1,songid:-1,elapsed:0})),await is("clear")}})}function J(H,A){let W=s(y);H===W?W=A:H<W&&A>=W?W-=1:H>W&&A<=W&&(W+=1),g(y,W),Gt.moveTrack(H,A)}Z(()=>t(),()=>{g(v,Number(t().song))}),Z(()=>(r(),s(v)),()=>{r()||g(y,s(v))}),Z(()=>s(y),()=>{g(c,s(y))}),Z(()=>a(),()=>{g(u,a().file)}),Z(()=>t(),()=>{g(h,t().state==="play")}),Z(()=>i(),()=>{if(i().length>=0){const H=i().reduce((A,W)=>A+(parseFloat(W.time)||0),0);if(H>0){const A=Math.floor(H/3600),W=Math.floor(H%3600/60);A>0?g(p,`${A} hr ${W} min`):g(p,`${W} min`)}else g(p,"")}}),Ht(),gt();var U=ju(),G=d(U);ms(G,{get itemsStore(){return Bn},get isEditMode(){return s(f)},emptyText:"Queue is empty",onMoveItem:J,$$slots:{header:(H,A)=>{var W=Iu(),me=d(W),ae=d(me),R=d(ae),V=d(R);ie(V,()=>(j(k),E(()=>k.MENU)));var oe=_(ae,2),O=d(oe),re=_(d(O),4),B=d(re),L=d(B),_e=_(B,2);{var K=he=>{var I=zu(),Y=d(I);fe(()=>de(Y,s(p))),m(he,I)};F(_e,he=>{s(p)&&he(K)})}var te=_(O,2),z=d(te),w=_(z,2),T=d(w);ie(T,()=>(j(k),E(()=>k.SAVE)));var P=_(w,2);let X;var ne=d(P);ie(ne,()=>(s(f),j(k),E(()=>s(f)?k.ACCEPT:k.EDIT))),fe(()=>{de(L,`${i(),E(()=>i().length)??""} tracks`),z.disabled=(i(),E(()=>i().length===0)),w.disabled=(i(),E(()=>i().length===0)),X=Fe(P,1,"btn-action svelte-185fgrr",null,X,{active:s(f)}),yt(P,"title",s(f)?"Finish Editing":"Edit Queue"),P.disabled=(i(),E(()=>i().length===0))}),C("click",z,q),C("click",w,D),C("click",P,x),m(H,W)},row:(H,A)=>{var W=Nu();const me=nt(()=>A.item),ae=nt(()=>A.index),R=nt(()=>A.startDrag);var V=d(W);_s(V,{get track(){return s(me)},get index(){return s(ae)},get playingIndex(){return s(c)},get playingFile(){return s(u)},get isPlaying(){return s(h)},get isEditable(){return s(f)},$$events:{play:()=>b(s(ae)),remove:()=>S(s(ae)),startdrag(...oe){s(R)?.apply(this,oe)}}}),m(H,W)}}}),m(e,U),ft(),l()}var Du=M('<div class="knob svelte-1jla3sy"></div>'),Fu=M('<div class="tooltip current svelte-1jla3sy"> </div> <span></span>',1),qu=M('<div slot="fallback" class="icon-fallback svelte-1jla3sy"><!></div>'),Bu=M('<span class="meta-tag quality"> </span>'),Uu=M('<div class="dot svelte-1jla3sy"></div>'),Hu=M("<button><!> <!></button>"),Vu=M('<div class="dock svelte-1jla3sy"><div class="progress-shadow svelte-1jla3sy"></div> <div><div class="rail svelte-1jla3sy"></div> <div class="fill svelte-1jla3sy"><!></div> <!></div> <div class="grid svelte-1jla3sy"><div class="info svelte-1jla3sy"><div class="art svelte-1jla3sy"><!></div> <div class="meta svelte-1jla3sy"><div class="title-row svelte-1jla3sy"><div class="title text-ellipsis svelte-1jla3sy"> </div> <button class="btn-icon tiny-dots svelte-1jla3sy"><!></button></div> <div class="artist-row svelte-1jla3sy"><div class="artist text-ellipsis svelte-1jla3sy"> </div> <!></div></div></div> <div class="controls svelte-1jla3sy"><button><!></button> <button class="btn-icon"><!></button> <button class="play-btn flex-center svelte-1jla3sy"><!></button> <button class="btn-icon"><!></button> <!></div> <div class="volume desktop svelte-1jla3sy"><div class="vol-icon svelte-1jla3sy"><!></div> <div class="custom-slider svelte-1jla3sy"><div class="slider-bg svelte-1jla3sy"><div class="slider-fill svelte-1jla3sy"></div> <div class="slider-knob svelte-1jla3sy"></div></div></div></div></div></div>');function Yu(e,n){dt(n,!1);const t=()=>ke(it,"$status",l),r=()=>ke(Ut,"$currentSong",l),a=()=>ke(En,"$favorites",l),i=()=>ke(Rn,"$stations",l),o=()=>ke(ss,"$isFullPlayerOpen",l),[l,v]=It(),c=$(),u=$(),h=$(),f=$(),p=$(),y=$(),x=$(),b=$(),S=$(),D=$(),q=$(),J=$();let U=$(!1),G=$(!1),H=!1,A=$(0),W=$(),me=$();const ae=T=>P=>{P.stopPropagation(),T()};function R(T){if(isNaN(T)||T===null)return"0:00";const P=Math.floor(T/60),X=Math.floor(T%60);return`${P}:${X<10?"0":""}${X}`}function V(T,P){const X=P.getBoundingClientRect();return Math.max(0,Math.min(1,(T.clientX-X.left)/X.width))}function oe(T){s(f)||(g(G,!0),g(A,V(T,s(W))),window.addEventListener("mousemove",O),window.addEventListener("mouseup",re))}function O(T){if(s(G)&&g(A,V(T,s(W))),H){const P=Math.round(V(T,s(me))*100);Ir(P)}}function re(){s(G)&&!s(f)&&ha(s(A)*s(c)),g(G,!1),H=!1,window.removeEventListener("mousemove",O),window.removeEventListener("mouseup",re)}function B(T){H=!0;const P=Math.round(V(T,s(me))*100);Ir(P),window.addEventListener("mousemove",O),window.addEventListener("mouseup",re)}function L(){const T=(s(J)+1)%3;T===0?(t().random&&Un(),t().repeat&&Hn()):T===1?(t().random||Un(),t().repeat&&Hn()):T===2&&(t().random&&Un(),t().repeat||Hn())}function _e(T){T.stopPropagation(),Lr(T,r(),{type:"general",source:"miniplayer"})}function K(T){Lr(T.detail.originalEvent,r(),{type:"general",source:"miniplayer"})}Z(()=>t(),()=>{g(c,t().duration>0?t().duration:1)}),Z(()=>t(),()=>{g(u,t().elapsed||0)}),Z(()=>t(),()=>{g(h,t().state==="play")}),Z(()=>r(),()=>{g(f,r().file?.startsWith("http"))}),Z(()=>r(),()=>{g(p,r().title||"Not Playing")}),Z(()=>r(),()=>{g(y,r().stationName||r().artist||"Moode")}),Z(()=>(r(),a()),()=>{g(x,r().file&&a().has(r().file))}),Z(()=>(r(),i()),()=>{g(b,pr(r(),i(),r().stationName))}),Z(()=>(s(f),s(G),s(A),s(u),s(c)),()=>{g(S,s(f)?0:s(G)?s(A)*100:s(u)/s(c)*100)}),Z(()=>(s(h),s(G),s(f)),()=>{g(D,s(h)&&!s(G)&&!s(f))}),Z(()=>t(),()=>{g(q,t().bitrate?`${t().bitrate} kbps`:t().format||"")}),Z(()=>t(),()=>{g(J,t().repeat?2:t().random?1:0)}),Ht(),gt();var te=Ye(),z=Te(te);{var w=T=>{var P=Vu(),X=d(P),ne=_(X,2);let he;var I=_(d(ne),2),Y=d(I);{var ee=Oe=>{var lt=Du();m(Oe,lt)};F(Y,Oe=>{s(f)||Oe(ee)})}var se=_(I,2);{var le=Oe=>{var lt=Fu(),ue=Te(lt),ze=d(ue);fe(rt=>{Je(ue,`left: ${s(S)??""}%`),de(ze,rt)},[()=>(s(G),s(A),s(c),s(u),E(()=>s(G)?R(s(A)*s(c)):R(s(u))))]),m(Oe,lt)};F(se,Oe=>{(s(U)||s(G))&&!s(f)&&Oe(le)})}Cn(ne,Oe=>g(W,Oe),()=>s(W));var N=_(ne,2),pe=d(N),ce=d(pe),ye=d(ce);Kn(ye,{get src(){return s(b)},alt:"art",radius:"4px",$$slots:{fallback:(Oe,lt)=>{var ue=qu(),ze=d(ue);ie(ze,()=>(s(f),j(k),E(()=>s(f)?k.RADIO:k.ALBUMS))),m(Oe,ue)}}});var Ce=_(ce,2),we=d(Ce),ve=d(we),Me=d(ve),Re=_(ve,2),Ne=d(Re);ie(Ne,()=>(j(k),E(()=>k.DOTS)));var Pe=_(we,2),be=d(Pe),Ee=d(be),$e=_(be,2);{var Se=Oe=>{var lt=Bu(),ue=d(lt);fe(()=>de(ue,s(q))),m(Oe,lt)};F($e,Oe=>{s(q)&&Oe(Se)})}var Q=_(pe,2),ge=d(Q),Le=wr(()=>ae(()=>sn.toggleFavorite(r())));let Ae;var Qe=d(ge);ie(Qe,()=>(s(x),j(k),E(()=>s(x)?k.HEART_FILLED:k.HEART)));var Ue=_(ge,2),Ie=wr(()=>ae(()=>Nr("previous"))),Ke=d(Ue);ie(Ke,()=>(j(k),E(()=>k.PREVIOUS)));var ht=_(Ue,2),_t=wr(()=>ae(ps)),kt=d(ht);ie(kt,()=>(t(),j(k),E(()=>t().state==="play"?k.PAUSE:k.PLAY)));var ot=_(ht,2),Vt=wr(()=>ae(()=>Nr("next"))),We=d(ot);ie(We,()=>(j(k),E(()=>k.NEXT)));var tt=_(ot,2);{var Ze=Oe=>{var lt=Hu(),ue=wr(()=>ae(L));let ze;var rt=d(lt);{var en=Et=>{var at=Ye(),Qt=Te(at);ie(Qt,()=>(j(k),E(()=>k.REPEAT))),m(Et,at)},bs=Et=>{var at=Ye(),Qt=Te(at);ie(Qt,()=>(j(k),E(()=>k.SHUFFLE))),m(Et,at)};F(rt,Et=>{s(J)===2?Et(en):Et(bs,!1)})}var ys=_(rt,2);{var ws=Et=>{var at=Uu();m(Et,at)};F(ys,Et=>{s(J)>0&&Et(ws)})}fe(()=>ze=Fe(lt,1,"btn-icon desktop mode-btn svelte-1jla3sy",null,ze,{active:s(J)>0})),C("click",lt,function(...Et){s(ue)?.apply(this,Et)}),m(Oe,lt)};F(tt,Oe=>{s(f)||Oe(Ze)})}var mt=_(Q,2),xt=d(mt),bn=d(xt);ie(bn,()=>(j(k),E(()=>k.VOLUME)));var Yt=_(xt,2),Nt=d(Yt),$t=d(Nt),Ln=_($t,2);Cn(Yt,Oe=>g(me,Oe),()=>s(me)),Lt(()=>C("click",P,()=>ss.set(!0))),ia(P,(Oe,lt)=>_a?.(Oe,lt),()=>500),Lt(()=>C("longpress",P,K)),fe(()=>{Je(X,`width: ${s(S)??""}%; transition: ${s(D)?"width 0.25s linear":"none"}`),he=Fe(ne,1,"progress-bar svelte-1jla3sy",null,he,{radio:s(f)}),Je(I,`width: ${s(S)??""}%; transition: ${s(D)?"width 0.25s linear":"none"}`),yt(ve,"title",s(p)),de(Me,s(p)),yt(be,"title",s(y)),de(Ee,s(y)),Ae=Fe(ge,1,"btn-icon desktop svelte-1jla3sy",null,Ae,{liked:s(x)}),Je($t,`width: ${t(),E(()=>t().volume)??""}%`),Je(Ln,`left: ${t(),E(()=>t().volume)??""}%`)}),C("mouseenter",ne,()=>g(U,!0)),C("mouseleave",ne,()=>g(U,!1)),C("mousedown",ne,Kt(oe)),C("click",ne,Kt(function(Oe){Rr.call(this,n,Oe)})),C("click",Re,_e),C("click",ge,function(...Oe){s(Le)?.apply(this,Oe)}),C("click",Ue,function(...Oe){s(Ie)?.apply(this,Oe)}),C("click",ht,function(...Oe){s(_t)?.apply(this,Oe)}),C("click",ot,function(...Oe){s(Vt)?.apply(this,Oe)}),C("mousedown",Yt,Kt(B)),C("click",Yt,Kt(function(Oe){Rr.call(this,n,Oe)})),m(T,P)};F(z,T=>{o()||T(w)})}m(e,te),ft(),v()}var Qu=M('<div class="drag-zone svelte-1olwzt8"><div class="drag-handle-icon svelte-1olwzt8"><!></div></div>'),Wu=M('<div slot="fallback" class="icon-fallback svelte-1olwzt8"><!></div>'),Ku=M('<span class="meta-tag quality"> </span>'),Xu=M('<span class="dot svelte-1olwzt8"></span>'),Gu=M("<button><!> <!></button>"),Zu=M('<div style="width: 44px;"></div>'),Ju=M('<div><!> <div class="bg-container svelte-1olwzt8"><div class="bg-gradient-fallback svelte-1olwzt8"></div> <img class="bg-img svelte-1olwzt8" alt="" loading="eager"/> <div class="bg-overlay svelte-1olwzt8"></div></div> <div class="player-body svelte-1olwzt8"><div class="art-container svelte-1olwzt8"><div class="artwork svelte-1olwzt8"><!></div></div> <div class="controls-area svelte-1olwzt8"><div class="meta svelte-1olwzt8"><h1 class="title text-ellipsis svelte-1olwzt8"> </h1> <div class="artist-row svelte-1olwzt8"><h2 class="artist text-ellipsis svelte-1olwzt8"> </h2> <!></div></div> <div class="progress-section"><div><div class="common-track svelte-1olwzt8"><div class="common-fill svelte-1olwzt8"><div class="common-knob svelte-1olwzt8"></div></div></div></div> <div class="time-row svelte-1olwzt8"><span> </span> <span> </span></div></div> <div class="buttons-row svelte-1olwzt8"><button><!></button> <button class="btn-icon side-btn svelte-1olwzt8"><!></button> <button class="play-btn-large flex-center svelte-1olwzt8"><!></button> <button class="btn-icon side-btn svelte-1olwzt8"><!></button> <!></div> <div class="volume-row svelte-1olwzt8"><div class="vol-icon svelte-1olwzt8"><!></div> <div class="volume-hit-area svelte-1olwzt8"><div class="common-track svelte-1olwzt8"><div class="common-fill svelte-1olwzt8"></div> <div class="common-knob svelte-1olwzt8"></div></div></div></div></div></div></div>');function Xa(e,n){dt(n,!1);const t=()=>ke(Ut,"$currentSong",o),r=()=>ke(Rn,"$stations",o),a=()=>ke(it,"$status",o),i=()=>ke(En,"$favorites",o),[o,l]=It(),v=$(),c=$(),u=$(),h=$(),f=$(),p=$(),y=$(),x=$(),b=$(),S=$(),D=$();let q=et(n,"isDocked",8,!1),J=0,U=$(0),G=$(!1);function H(){ss.set(!1)}function A(ue){if(q())return;const ze=ue.target;ze.closest(".bar-hit-area")||ze.closest(".volume-hit-area")||(J=ue.touches[0].clientY,g(G,!0))}function W(ue){if(!s(G)||q())return;const ze=ue.touches[0].clientY-J;ze>0&&(ue.cancelable&&ze>10&&ue.preventDefault(),g(U,ze))}function me(){q()||(g(G,!1),s(U)>150?H():g(U,0))}let ae=$(!1),R=$(0),V=$();function oe(ue){const ze=Math.floor(ue/60)||0,rt=Math.floor(ue%60)||0;return`${ze}:${rt.toString().padStart(2,"0")}`}function O(ue,ze){const rt=ze.getBoundingClientRect(),en=ue.touches?ue.touches[0].clientX:ue.clientX;return Math.max(0,Math.min(1,(en-rt.left)/rt.width))}function re(ue){s(h)||(g(ae,!0),g(R,O(ue,s(V))))}function B(ue){s(ae)&&g(R,O(ue,s(V)))}function L(){s(ae)&&!s(h)&&ha(s(R)*s(c)),g(ae,!1)}let _e=!1,K=$();function te(ue){_e=!0;const ze=Math.round(O(ue,s(K))*100);Ir(ze),window.addEventListener("mousemove",z),window.addEventListener("mouseup",w),window.addEventListener("touchmove",z,{passive:!1}),window.addEventListener("touchend",w)}function z(ue){if(_e){ue.preventDefault();const ze=Math.round(O(ue,s(K))*100);Ir(ze)}}function w(){_e=!1,window.removeEventListener("mousemove",z),window.removeEventListener("mouseup",w),window.removeEventListener("touchmove",z),window.removeEventListener("touchend",w)}function T(){const ue=(s(x)+1)%3;ue===0?(a().random&&Un(),a().repeat&&Hn()):ue===1?(a().random||Un(),a().repeat&&Hn()):ue===2&&(a().random&&Un(),a().repeat||Hn())}Z(()=>(t(),r()),()=>{g(v,pr(t(),r(),t().stationName))}),Z(()=>a(),()=>{g(c,a().duration||1)}),Z(()=>a(),()=>{g(u,a().elapsed||0)}),Z(()=>t(),()=>{g(h,t().file?.startsWith("http"))}),Z(()=>a(),()=>{g(f,a().state==="play")}),Z(()=>(s(f),s(ae),s(h)),()=>{g(p,s(f)&&!s(ae)&&!s(h))}),Z(()=>(s(h),s(ae),s(R),s(u),s(c)),()=>{g(y,s(h)?0:s(ae)?s(R)*100:s(u)/s(c)*100)}),Z(()=>a(),()=>{g(x,a().repeat?2:a().random?1:0)}),Z(()=>a(),()=>{g(b,a().bitrate?`${a().bitrate} kbps`:a().format||"")}),Z(()=>(t(),i()),()=>{g(S,t().file&&i().has(t().file))}),Z(()=>j(q()),()=>{g(D,q()?"8px":"var(--radius-xl)")}),Ht(),gt();var P=Ju();let X;var ne=d(P);{var he=ue=>{var ze=Qu(),rt=d(ze),en=d(rt);ie(en,()=>(j(k),E(()=>k.CHEVRON_DOWN))),C("touchstart",ze,A),C("touchmove",ze,W),C("touchend",ze,me),C("click",ze,H),m(ue,ze)};F(ne,ue=>{q()||ue(he)})}var I=_(ne,2),Y=_(d(I),2),ee=_(I,2),se=d(ee),le=d(se),N=d(le);Kn(N,{get src(){return s(v)},alt:"Cover",get radius(){return s(D)},$$slots:{fallback:(ue,ze)=>{var rt=Wu(),en=d(rt);ie(en,()=>(s(h),j(k),E(()=>s(h)?k.RADIO:k.ALBUMS))),m(ue,rt)}}});var pe=_(se,2),ce=d(pe),ye=d(ce),Ce=d(ye),we=_(ye,2),ve=d(we),Me=d(ve),Re=_(ve,2);{var Ne=ue=>{var ze=Ku(),rt=d(ze);fe(()=>de(rt,s(b))),m(ue,ze)};F(Re,ue=>{s(b)&&ue(Ne)})}var Pe=_(ce,2),be=d(Pe);let Ee;var $e=d(be),Se=d($e);Cn(be,ue=>g(V,ue),()=>s(V));var Q=_(be,2),ge=d(Q),Le=d(ge),Ae=_(ge,2),Qe=d(Ae),Ue=_(Pe,2),Ie=d(Ue);let Ke;var ht=d(Ie);ie(ht,()=>(s(S),j(k),E(()=>s(S)?k.HEART_FILLED:k.HEART)));var _t=_(Ie,2),kt=d(_t);ie(kt,()=>(j(k),E(()=>k.PREVIOUS)));var ot=_(_t,2),Vt=d(ot);ie(Vt,()=>(a(),j(k),E(()=>a().state==="play"?k.PAUSE:k.PLAY)));var We=_(ot,2),tt=d(We);ie(tt,()=>(j(k),E(()=>k.NEXT)));var Ze=_(We,2);{var mt=ue=>{var ze=Gu();let rt;var en=d(ze);{var bs=at=>{var Qt=Ye(),ks=Te(Qt);ie(ks,()=>(j(k),E(()=>k.REPEAT))),m(at,Qt)},ys=at=>{var Qt=Ye(),ks=Te(Qt);ie(ks,()=>(j(k),E(()=>k.SHUFFLE))),m(at,Qt)};F(en,at=>{s(x)===2?at(bs):at(ys,!1)})}var ws=_(en,2);{var Et=at=>{var Qt=Xu();m(at,Qt)};F(ws,at=>{s(x)>0&&at(Et)})}fe(()=>rt=Fe(ze,1,"btn-icon side-btn mode-btn svelte-1olwzt8",null,rt,{active:s(x)>0})),C("click",ze,T),m(ue,ze)},xt=ue=>{var ze=Zu();m(ue,ze)};F(Ze,ue=>{s(h)?ue(xt,!1):ue(mt)})}var bn=_(Ue,2),Yt=d(bn),Nt=d(Yt);ie(Nt,()=>(j(k),E(()=>k.VOLUME)));var $t=_(Yt,2),Ln=d($t),Oe=d(Ln),lt=_(Oe,2);Cn($t,ue=>g(K,ue),()=>s(K)),fe((ue,ze)=>{X=Fe(P,1,"full-player svelte-1olwzt8",null,X,{"is-docked":q()}),Je(P,q()?"":`transform: translateY(${s(U)}px); transition: ${s(G)?"none":"transform 0.3s cubic-bezier(0.2, 0.8, 0.2, 1)"}`),yt(Y,"src",s(v)),Je(le,`transform: scale(${1-s(U)/3e3})`),Je(pe,`opacity: ${1-s(U)/400}`),de(Ce,(t(),E(()=>t().title||"Not Playing"))),de(Me,(t(),E(()=>t().stationName||t().artist||"Moode Audio"))),Ee=Fe(be,1,"bar-hit-area svelte-1olwzt8",null,Ee,{"is-docked-bar":q()}),Je(Se,`width: ${s(y)??""}%; transition: ${s(p)?"width 0.3s linear":"none"}`),de(Le,ue),de(Qe,ze),Ke=Fe(Ie,1,"btn-icon side-btn svelte-1olwzt8",null,Ke,{liked:s(S)}),Je(Oe,`width: ${a(),E(()=>a().volume)??""}%`),Je(lt,`left: ${a(),E(()=>a().volume)??""}%; right: auto;`)},[()=>(s(ae),s(R),s(c),s(u),E(()=>s(ae)?oe(s(R)*s(c)):oe(s(u)))),()=>(s(h),s(c),E(()=>s(h)?"LIVE":oe(s(c))))]),C("mousedown",be,re),C("touchstart",be,re,void 0,!0),C("mousemove",be,function(...ue){(s(ae)?B:null)?.apply(this,ue)}),C("touchmove",be,function(...ue){(s(ae)?B:null)?.apply(this,ue)},void 0,!0),C("mouseup",be,L),C("touchend",be,L),C("click",Ie,()=>sn.toggleFavorite(t())),C("click",_t,()=>Nr("previous")),C("click",ot,function(...ue){ps?.apply(this,ue)}),C("click",We,()=>Nr("next")),C("mousedown",$t,Kt(te)),C("touchstart",$t,Kt(te)),wt(3,P,()=>Fi,()=>({y:q()?0:800,duration:300,opacity:1})),m(e,P),ft(),l()}const ed="/assets/wave-logo-C1390byt.svg",Gs={async syncLibrary(){if(qe(Wt))return;Wt.set(!0);const e=new Vi,n=window.location.origin+"/wave-api.php";e.postMessage({type:"START_SYNC",payload:{url:n}}),e.onmessage=t=>{const{type:r,status:a,count:i,message:o}=t.data;if(r==="PROGRESS"){const l={connecting:"Requesting library...",downloading:"Downloading data...",parsing:"Processing metadata...",saving:`Saving ${i} tracks...`};l[a]&&je(l[a],"info")}r==="DONE"&&(je(`Library updated: ${i} tracks`,"success"),Wt.set(!1),e.terminate()),r==="ERROR"&&(console.error("[API] Sync Error:",o),je(`Sync Failed: ${o}`,"error"),Wt.set(!1),e.terminate())},e.onerror=t=>{console.error("[API] Worker crash:",t),je("Sync worker crashed","error"),Wt.set(!1),e.terminate()}},async loadRadioStations(){if(!qe(Kr)){Kr.set(!0);try{const n=await fetch(Lc.STATIONS(!1));if(!n.ok)throw new Error("Network error");const t=await n.json();if(t.error)throw new Error(t.error);if(!Array.isArray(t))throw new Error("Invalid response format");const r=t.map(a=>({id:a.id,name:a.name,file:a.station,station:a.station,image:a.logo,genre:a.genre||"Radio"}));r.sort((a,i)=>a.name.localeCompare(i.name,void 0,{sensitivity:"base"})),Rn.set(r)}catch(e){console.error("[API] Failed to load stations",e),je("Failed to load radio","error")}finally{Kr.set(!1)}}}};var td=M('<div class="backdrop svelte-ji5owg"></div>'),nd=M('<button><span class="icon svelte-ji5owg"><!></span> <span> </span></button>'),rd=M('<!> <aside><div class="header svelte-ji5owg"><div class="header-inner svelte-ji5owg"><button class="collapse-btn svelte-ji5owg"><div class="chevron svelte-ji5owg"><!></div></button> <div><img alt="Logo" class="logo svelte-ji5owg"/></div></div> <button class="btn-icon mobile-close svelte-ji5owg"><!></button></div> <div class="scroll-area custom-scrollbar svelte-ji5owg"><nav class="svelte-ji5owg"><!> <button title="Search"><span class="icon svelte-ji5owg"><!></span> <span>Search</span></button> <div class="sep svelte-ji5owg"></div> <button class="nav-item sync svelte-ji5owg" title="Update Library"><span><!></span> <span> </span></button> <div class="sep svelte-ji5owg"></div> <button title="Settings"><span class="icon svelte-ji5owg"><!></span> <span>Settings</span></button></nav> <div class="footer svelte-ji5owg"><div>Moode WaveUI</div></div></div></aside>',1);function sd(e,n){dt(n,!1);const t=()=>ke(Wt,"$isSyncingLibrary",i),r=()=>ke(Qs,"$isSidebarCollapsed",i),a=()=>ke(Pt,"$activeMenuTab",i),[i,o]=It(),l=$();let v=et(n,"isOpen",8,!1);const c=ca();let u=$(0),h=$(0),f=$(!1);const p=[{id:"queue",label:"Queue",icon:k.MENU},{id:"favorites",label:"Favorites",icon:k.HEART},{id:"artists",label:"Artists",icon:k.ARTISTS},{id:"albums",label:"Albums",icon:k.ALBUMS},{id:"playlists",label:"Playlists",icon:k.PLAYLISTS},{id:"radio",label:"Radio",icon:k.RADIO}];function y(be){window.location.hash=`/${be}`,c("close")}async function x(){t()||(await Gs.syncLibrary(),window.location.hash="/artists")}function b(){Qs.update(be=>!be)}function S(be){v()&&(g(u,be.touches[0].clientX),g(h,s(u)),g(f,!0))}function D(be){s(f)&&g(h,be.touches[0].clientX)}function q(){s(f)&&(s(h)-s(u)<-70&&c("close"),g(f,!1),g(u,0),g(h,0))}Z(()=>(s(f),s(h),s(u)),()=>{g(l,s(f)?Math.min(0,s(h)-s(u)):0)}),Ht(),gt();var J=rd(),U=Te(J);{var G=be=>{var Ee=td();C("click",Ee,()=>c("close")),wt(3,Ee,()=>on,()=>({duration:200})),m(be,Ee)};F(U,be=>{v()&&be(G)})}var H=_(U,2);let A,W;var me=d(H),ae=d(me),R=d(ae),V=d(R),oe=d(V);ie(oe,()=>(j(k),E(()=>k.BACK)));var O=_(R,2);let re;var B=d(O),L=_(ae,2),_e=d(L);ie(_e,()=>(j(k),E(()=>k.CLOSE)));var K=_(me,2),te=d(K),z=d(te);Bt(z,1,()=>p,_n,(be,Ee)=>{var $e=nd();let Se;var Q=d($e),ge=d(Q);ie(ge,()=>(s(Ee),E(()=>s(Ee).icon)));var Le=_(Q,2);let Ae;var Qe=d(Le);fe(()=>{Se=Fe($e,1,"nav-item svelte-ji5owg",null,Se,{active:a()===s(Ee).id}),yt($e,"title",(s(Ee),E(()=>s(Ee).label))),Ae=Fe(Le,1,"label-text svelte-ji5owg",null,Ae,{hidden:r()}),de(Qe,(s(Ee),E(()=>s(Ee).label)))}),C("click",$e,()=>y(s(Ee).id)),m(be,$e)});var w=_(z,2);let T;var P=d(w),X=d(P);ie(X,()=>(j(k),E(()=>k.SEARCH)));var ne=_(P,2);let he;var I=_(w,4),Y=d(I);let ee;var se=d(Y);ie(se,()=>(j(k),E(()=>k.SYNC)));var le=_(Y,2);let N;var pe=d(le),ce=_(I,4);let ye;var Ce=d(ce),we=d(Ce);ie(we,()=>(j(k),E(()=>k.SETTINGS)));var ve=_(Ce,2);let Me;var Re=_(te,2),Ne=d(Re);let Pe;fe(()=>{A=Fe(H,1,"side-menu svelte-ji5owg",null,A,{"mobile-open":v(),collapsed:r()}),W=Je(H,"",W,{transform:v()?`translateX(${s(l)}px)`:"",transition:s(f)?"none":"width 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.3s ease"}),yt(R,"title",r()?"Expand":"Collapse"),Je(V,`transform: rotate(${r()?"180deg":"0deg"})`),re=Fe(O,1,"logo-wrapper svelte-ji5owg",null,re,{hidden:r()}),yt(B,"src",ed),T=Fe(w,1,"nav-item svelte-ji5owg",null,T,{active:a()==="search"}),he=Fe(ne,1,"label-text svelte-ji5owg",null,he,{hidden:r()}),I.disabled=t(),ee=Fe(Y,1,"icon svelte-ji5owg",null,ee,{spin:t()}),N=Fe(le,1,"label-text svelte-ji5owg",null,N,{hidden:r()}),de(pe,t()?"Syncing...":"Update Library"),ye=Fe(ce,1,"nav-item svelte-ji5owg",null,ye,{active:a()==="settings"}),Me=Fe(ve,1,"label-text svelte-ji5owg",null,Me,{hidden:r()}),Pe=Fe(Ne,1,"footer-text svelte-ji5owg",null,Pe,{hidden:r()})}),C("click",R,b),C("click",L,()=>c("close")),C("click",w,()=>y("search")),C("click",I,x),C("click",ce,()=>y("settings")),C("touchstart",H,S),C("touchmove",H,D),C("touchend",H,q),m(e,J),ft(),o()}var ad=M('<div class="toast-container svelte-k2bvk7"><div> </div></div>'),id=M('<button class="back-btn svelte-k2bvk7"><span class="icon-inline svelte-k2bvk7"><!></span> Back</button>'),od=M('<div class="view-title svelte-k2bvk7"><!></div>'),ld=M('<div class="full-player-modal svelte-k2bvk7"><!></div>'),cd=M('<div class="app-container svelte-k2bvk7"><div class="app-layout svelte-k2bvk7"><!> <!> <main class="content-area svelte-k2bvk7"><header class="top-bar svelte-k2bvk7"><button class="hamburger-btn svelte-k2bvk7"><!></button> <!></header> <div class="scroll-container svelte-k2bvk7"><div class="view-wrapper svelte-k2bvk7"><!></div></div></main> <div class="docked-player-container svelte-k2bvk7"><!></div></div> <div class="mini-player-wrapper svelte-k2bvk7"><!></div></div> <!>',1);function vd(e,n){dt(n,!1);const t=()=>ke(Ft,"$navigationStack",o),r=()=>ke(Hs,"$toastMessage",o),a=()=>ke(Pt,"$activeMenuTab",o),i=()=>ke(ss,"$isFullPlayerOpen",o),[o,l]=It();let v=$(!1);yr(()=>{window.history.replaceState({depth:t().length},"","");const B=()=>void 0;return window.addEventListener("popstate",B),()=>window.removeEventListener("popstate",B)}),gt();var c=cd(),u=Te(c),h=d(u),f=d(h);{var p=B=>{var L=ad(),_e=d(L),K=d(_e);fe(()=>{Fe(_e,1,`toast-body ${r().type??""}`,"svelte-k2bvk7"),de(K,r().text)}),wt(3,L,()=>Fi,()=>({y:-50,duration:300})),m(B,L)};F(f,B=>{r()&&B(p)})}var y=_(f,2);sd(y,{get isOpen(){return s(v)},$$events:{close:()=>g(v,!1)}});var x=_(y,2),b=d(x),S=d(b),D=d(S);ie(D,()=>k.MENU);var q=_(S,2);{var J=B=>{var L=id(),_e=d(L),K=d(_e);ie(K,()=>k.BACK),C("click",L,function(...te){$c?.apply(this,te)}),m(B,L)},U=B=>{var L=od(),_e=d(L);{var K=z=>{var w=zn("Radio");m(z,w)},te=z=>{var w=Ye(),T=Te(w);{var P=ne=>{var he=zn("Playlists");m(ne,he)},X=ne=>{var he=Ye(),I=Te(he);{var Y=se=>{var le=zn("Search");m(se,le)},ee=se=>{var le=Ye(),N=Te(le);{var pe=ye=>{var Ce=zn("Queue");m(ye,Ce)},ce=ye=>{var Ce=Ye(),we=Te(Ce);{var ve=Re=>{var Ne=zn("Favorites");m(Re,Ne)},Me=Re=>{var Ne=Ye(),Pe=Te(Ne);{var be=$e=>{var Se=zn("Settings");m($e,Se)},Ee=$e=>{var Se=zn();fe(Q=>de(Se,Q),[()=>(a()||"Library").charAt(0).toUpperCase()+(a()||"library").slice(1)]),m($e,Se)};F(Pe,$e=>{a()==="settings"?$e(be):$e(Ee,!1)},!0)}m(Re,Ne)};F(we,Re=>{a()==="favorites"?Re(ve):Re(Me,!1)},!0)}m(ye,Ce)};F(N,ye=>{a()==="queue"?ye(pe):ye(ce,!1)},!0)}m(se,le)};F(I,se=>{a()==="search"?se(Y):se(ee,!1)},!0)}m(ne,he)};F(T,ne=>{a()==="playlists"?ne(P):ne(X,!1)},!0)}m(z,w)};F(_e,z=>{a()==="radio"?z(K):z(te,!1)})}m(B,L)};F(q,B=>{t().length>1?B(J):B(U,!1)})}var G=_(b,2),H=d(G),A=d(H);{var W=B=>{ru(B,{})},me=B=>{var L=Ye(),_e=Te(L);{var K=z=>{Ou(z,{})},te=z=>{var w=Ye(),T=Te(w);{var P=ne=>{gu(ne,{})},X=ne=>{var he=Ye(),I=Te(he);{var Y=se=>{Pu(se,{})},ee=se=>{var le=Ye(),N=Te(le);{var pe=ye=>{Lu(ye,{})},ce=ye=>{Hv(ye,{get activeCategory(){return a()}})};F(N,ye=>{a()==="settings"?ye(pe):ye(ce,!1)},!0)}m(se,le)};F(I,se=>{a()==="search"?se(Y):se(ee,!1)},!0)}m(ne,he)};F(T,ne=>{a()==="playlists"||a()==="favorites"?ne(P):ne(X,!1)},!0)}m(z,w)};F(_e,z=>{a()==="queue"?z(K):z(te,!1)},!0)}m(B,L)};F(A,B=>{a()==="radio"?B(W):B(me,!1)})}var ae=_(x,2),R=d(ae);Xa(R,{isDocked:!0});var V=_(h,2),oe=d(V);Yu(oe,{});var O=_(u,2);{var re=B=>{var L=ld(),_e=d(L);Xa(_e,{}),m(B,L)};F(O,B=>{i()&&B(re)})}fe(()=>Je(G,`padding-bottom: ${i()?"0px":"var(--mini-player-height)"};`)),C("click",S,()=>g(v,!0)),m(e,c),ft(),l()}var ud=M('<button class="back-btn-area svelte-l8h85k"><span class="back-icon svelte-l8h85k"><!></span></button> <span class="header-title svelte-l8h85k">Select Playlist</span>',1),dd=M('<div class="track-info svelte-l8h85k"><div class="title text-ellipsis svelte-l8h85k"> </div> <div class="artist text-ellipsis svelte-l8h85k">Playlist</div></div>'),fd=M('<div class="track-info svelte-l8h85k"><div class="title text-ellipsis svelte-l8h85k"> </div> <div class="artist text-ellipsis svelte-l8h85k"> </div></div>'),hd=M('<button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span> </span></button>'),pd=M('<div class="empty-msg svelte-l8h85k">No custom playlists</div>'),gd=M("<!> <!>",1),_d=M('<button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Play Now</span></button> <div class="sep svelte-l8h85k"></div> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Rename</span></button> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Delete Playlist</span></button>',1),md=M('<button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Go to Album</span></button> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Go to Artist</span></button>',1),bd=M('<div class="sep svelte-l8h85k"></div> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Remove from Playlist</span></button>',1),yd=M('<div class="sep svelte-l8h85k"></div> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Remove from Queue</span></button>',1),wd=M('<button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Play Next</span></button> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Add to Queue</span></button> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Add to Playlist...</span></button> <!> <button class="menu-row svelte-l8h85k"><span><!></span> <span> </span></button> <!> <!>',1),kd=M('<div class="backdrop svelte-l8h85k"><div class="menu-card svelte-l8h85k"><div class="menu-header svelte-l8h85k"><!></div> <div class="menu-items scroll-y svelte-l8h85k"><!></div></div></div>');function xd(e,n){dt(n,!1);const t=()=>ke(da,"$contextMenu",i),r=()=>ke(En,"$favorites",i),a=()=>ke(ua,"$playlists",i),[i,o]=It(),l=$(),v=$(),c=$(),u=$(),h=$(),f=$(),p=$();let y=$(),x=$(),b=$(),S=$(0),D=$(0),q=$("main"),J=$(!1);function U(w){t().isOpen&&(g(J,!1),At())}function G(){At()}function H(){t().track&&Gt.playNext(t().track.file),At()}function A(){t().track&&Gt.addToQueue(t().track.file),At()}function W(){t().track&&sn.toggleFavorite(t().track),At()}function me(){const w=t().track;w&&w.album&&An("tracks_by_album",{name:w.album,artist:w.artist}),At()}function ae(){const w=t().track;w&&w.artist&&An("albums_by_artist",{name:w.artist}),At()}async function R(){const{playlistName:w,index:T}=t().context;w&&T!==null&&(ir.update(P=>{const X=[...P];return X.splice(T,1),X}),await sn.removeFromPlaylist(w,T)),At()}function V(){const{index:w}=t().context;w!=null&&Gt.removeFromQueue(w),At()}function oe(){const w=t().context.playlist;w&&xe.send("stop").then(()=>xe.send("clear")).then(()=>xe.send(`load "${w.name.replace(/"/g,'\\"')}"`)).then(()=>xe.send("play 0")),At()}function O(){const w=t().context.playlist;w&&(At(),$n({title:"Rename Playlist",message:`Enter new name for "${w.name}":`,type:"prompt",placeholder:w.name,inputValue:w.name,confirmLabel:"Rename",onConfirm:T=>{T&&T!==w.name&&sn.renamePlaylist(w.name,T)}}))}function re(){const w=t().context.playlist;w&&(At(),$n({title:"Delete Playlist",message:`Are you sure you want to delete "${w.name}"? This cannot be undone.`,type:"confirm",confirmLabel:"Delete",onConfirm:()=>{sn.deletePlaylist(w.name)}}))}function B(){g(q,"playlists")}function L(){g(q,"main")}async function _e(w){const T=t().track;if(T)try{const P=w.replace(/"/g,'\\"'),X=T.file.replace(/"/g,'\\"');await xe.send(`playlistadd "${P}" "${X}"`),je(`Added to "${w}"`,"success"),At()}catch(P){console.error(P),je("Failed to add","error")}}Z(()=>t(),()=>{t().isOpen&&g(q,"main")}),Z(()=>(t(),s(J)),()=>{t().isOpen?!s(J)&&typeof history<"u"&&(history.pushState({contextMenuOpen:!0},""),g(J,!0)):s(J)&&typeof history<"u"&&(history.back(),g(J,!1))}),Z(()=>(t(),r()),()=>{g(l,t().track&&r().has(t().track.file))}),Z(()=>t(),()=>{g(v,t().track&&(t().track.file.includes("http")||t().track.file.includes("://")))}),Z(()=>t(),()=>{g(c,t().context?.type==="playlist")}),Z(()=>t(),()=>{g(u,t().context?.type==="queue")}),Z(()=>t(),()=>{g(h,t().context?.type==="playlist-card")}),Z(()=>t(),()=>{g(f,t().context?.source==="miniplayer")}),Z(()=>(t(),s(D),s(S),s(y),s(f),s(x)),()=>{g(p,(()=>{if(!t().isOpen)return"";const w=t().triggerRect,T=t().x,P=t().y,X=s(D)||220,ne=s(S)||320;if(s(y)<=768&&s(f)&&w)return`
        position: fixed; 
        bottom: ${s(x)-w.top}px; 
        left: 50%; 
        transform: translateX(-50%); 
        margin: 0; 
        transform-origin: bottom center;
      `;let he=0,I=0,Y="top left";if(w){const se=w.left+w.width/2,le=w.top+w.height/2,N=se>s(y)/2,pe=le>s(x)/2;N?(he=w.right-X,Y=pe?"bottom right":"top right"):(he=w.left,Y=pe?"bottom left":"top left"),pe?I=w.top-ne:I=w.bottom}else he=T,I=P,he+X>s(y)&&(he=s(y)-X-10),I+ne>s(x)&&(I=s(x)-ne-10);const ee=8;return he<ee&&(he=ee),he+X>s(y)-ee&&(he=s(y)-X-ee),I<ee&&(I=ee),I+ne>s(x)-ee&&(I=s(x)-ne-ee),`position: fixed; top: ${I}px; left: ${he}px; margin: 0; transform-origin: ${Y};`})())}),Ht(),gt();var K=Ye();C("popstate",kn,U);var te=Te(K);{var z=w=>{var T=kd(),P=d(T),X=d(P),ne=d(X);{var he=N=>{var pe=ud(),ce=Te(pe),ye=d(ce),Ce=d(ye);ie(Ce,()=>(j(k),E(()=>k.BACK))),C("click",ce,L),m(N,pe)},I=N=>{var pe=Ye(),ce=Te(pe);{var ye=we=>{var ve=dd(),Me=d(ve),Re=d(Me);fe(()=>de(Re,(t(),E(()=>t().context.playlist.name)))),m(we,ve)},Ce=we=>{var ve=fd(),Me=d(ve),Re=d(Me),Ne=_(Me,2),Pe=d(Ne);fe(()=>{de(Re,(t(),E(()=>t().track.title))),de(Pe,(t(),E(()=>t().track.artist)))}),m(we,ve)};F(ce,we=>{s(h)?we(ye):we(Ce,!1)},!0)}m(N,pe)};F(ne,N=>{s(q)==="playlists"?N(he):N(I,!1)})}var Y=_(X,2),ee=d(Y);{var se=N=>{var pe=gd(),ce=Te(pe);Bt(ce,1,a,_n,(we,ve)=>{var Me=Ye(),Re=Te(Me);{var Ne=Pe=>{var be=hd(),Ee=d(be),$e=d(Ee);ie($e,()=>(j(k),E(()=>k.PLAYLISTS)));var Se=_(Ee,2),Q=d(Se);fe(()=>de(Q,(s(ve),E(()=>s(ve).name)))),C("click",be,()=>_e(s(ve).name)),m(Pe,be)};F(Re,Pe=>{s(ve),E(()=>s(ve).name!=="Favorites")&&Pe(Ne)})}m(we,Me)});var ye=_(ce,2);{var Ce=we=>{var ve=pd();m(we,ve)};F(ye,we=>{a(),E(()=>a().filter(ve=>ve.name!=="Favorites").length===0)&&we(Ce)})}m(N,pe)},le=N=>{var pe=Ye(),ce=Te(pe);{var ye=we=>{var ve=_d(),Me=Te(ve),Re=d(Me),Ne=d(Re);ie(Ne,()=>(j(k),E(()=>k.PLAY)));var Pe=_(Me,4),be=d(Pe),Ee=d(be);ie(Ee,()=>(j(k),E(()=>k.EDIT)));var $e=_(Pe,2),Se=d($e),Q=d(Se);ie(Q,()=>(j(k),E(()=>k.REMOVE))),C("click",Me,oe),C("click",Pe,O),C("click",$e,re),m(we,ve)},Ce=we=>{var ve=wd(),Me=Te(ve),Re=d(Me),Ne=d(Re);ie(Ne,()=>(j(k),E(()=>k.NEXT)));var Pe=_(Me,2),be=d(Pe),Ee=d(be);ie(Ee,()=>(j(k),E(()=>k.MENU)));var $e=_(Pe,2),Se=d($e),Q=d(Se);ie(Q,()=>(j(k),E(()=>k.ADD_TO_PLAYLIST||k.ADD)));var ge=_($e,2);{var Le=We=>{var tt=md(),Ze=Te(tt),mt=d(Ze),xt=d(mt);ie(xt,()=>(j(k),E(()=>k.ALBUM_LINK||k.ALBUMS)));var bn=_(Ze,2),Yt=d(bn),Nt=d(Yt);ie(Nt,()=>(j(k),E(()=>k.ARTIST_LINK||k.ARTISTS))),C("click",Ze,me),C("click",bn,ae),m(We,tt)};F(ge,We=>{s(v)||We(Le)})}var Ae=_(ge,2),Qe=d(Ae);let Ue;var Ie=d(Qe);ie(Ie,()=>(s(l),j(k),E(()=>s(l)?k.HEART_FILLED:k.HEART)));var Ke=_(Qe,2),ht=d(Ke),_t=_(Ae,2);{var kt=We=>{var tt=bd(),Ze=_(Te(tt),2),mt=d(Ze),xt=d(mt);ie(xt,()=>(j(k),E(()=>k.REMOVE))),C("click",Ze,R),m(We,tt)};F(_t,We=>{s(c)&&We(kt)})}var ot=_(_t,2);{var Vt=We=>{var tt=yd(),Ze=_(Te(tt),2),mt=d(Ze),xt=d(mt);ie(xt,()=>(j(k),E(()=>k.REMOVE))),C("click",Ze,V),m(We,tt)};F(ot,We=>{s(u)&&We(Vt)})}fe(()=>{Ue=Fe(Qe,1,"icon svelte-l8h85k",null,Ue,{liked:s(l)}),de(ht,s(l)?"Unlike":"Like")}),C("click",Me,H),C("click",Pe,A),C("click",$e,B),C("click",Ae,W),m(we,ve)};F(ce,we=>{s(h)?we(ye):we(Ce,!1)},!0)}m(N,pe)};F(ee,N=>{s(q)==="playlists"?N(se):N(le,!1)})}Cn(P,N=>g(b,N),()=>s(b)),fe(()=>Je(P,s(p))),Pa(P,"clientHeight",N=>g(S,N)),Pa(P,"clientWidth",N=>g(D,N)),wt(3,P,()=>va,()=>({start:.95,duration:100})),C("click",P,Kt(function(N){Rr.call(this,n,N)})),C("click",T,G),wt(3,T,()=>on,()=>({duration:100})),m(w,T)};F(te,w=>{t(),E(()=>t().isOpen)&&w(z)})}La("innerWidth",w=>g(y,w)),La("innerHeight",w=>g(x,w)),m(e,K),ft(),o()}var Ed=M('<div class="input-wrapper svelte-1bxxaoh"><input type="text" autoFocus/></div>'),Sd=M('<button class="btn cancel svelte-1bxxaoh"> </button>'),Md=M('<div class="backdrop svelte-1bxxaoh"><div class="modal-card svelte-1bxxaoh"><div class="modal-header svelte-1bxxaoh"><span class="modal-title svelte-1bxxaoh"> </span></div> <div class="modal-body svelte-1bxxaoh"><p class="modal-message svelte-1bxxaoh"> </p> <!></div> <div class="modal-actions svelte-1bxxaoh"><!> <button class="btn confirm svelte-1bxxaoh"> </button></div></div></div>');function Td(e,n){dt(n,!1);const t=()=>ke(rs,"$modal",r),[r,a]=It();let i=$(!1),o=$();function l(){if(t().type==="prompt"){const y=t().inputValue?t().inputValue.trim():"";if(y.length===0){v();return}t().onConfirm&&t().onConfirm(y)}else t().onConfirm&&t().onConfirm();Ls()}function v(){g(i,!0),s(o)&&s(o).focus(),setTimeout(()=>{g(i,!1)},400)}function c(){Ls()}function u(y){y.key==="Enter"&&l(),s(i)&&g(i,!1)}Z(()=>t(),()=>{t().isOpen||g(i,!1)}),Ht(),gt();var h=Ye(),f=Te(h);{var p=y=>{var x=Md(),b=d(x),S=d(b),D=d(S),q=d(D),J=_(S,2),U=d(J),G=d(U),H=_(U,2);{var A=oe=>{var O=Ed(),re=d(O);let B;Cn(re,L=>g(o,L),()=>s(o)),fe(()=>{B=Fe(re,1,"modal-input svelte-1bxxaoh",null,B,{"shake-error":s(i)}),yt(re,"placeholder",(t(),E(()=>t().placeholder)))}),hs(re,()=>t().inputValue,L=>Pl(rs,E(t).inputValue=L,E(t))),C("keydown",re,u),m(oe,O)};F(H,oe=>{t(),E(()=>t().type==="prompt")&&oe(A)})}var W=_(J,2),me=d(W);{var ae=oe=>{var O=Sd(),re=d(O);fe(()=>de(re,(t(),E(()=>t().cancelLabel)))),C("click",O,function(...B){Ls?.apply(this,B)}),m(oe,O)};F(me,oe=>{t(),E(()=>t().type==="confirm"||t().type==="prompt")&&oe(ae)})}var R=_(me,2),V=d(R);fe(()=>{de(q,(t(),E(()=>t().title))),de(G,(t(),E(()=>t().message))),de(V,(t(),E(()=>t().confirmLabel)))}),C("click",R,l),wt(3,b,()=>va,()=>({start:.95,duration:200})),C("click",b,Kt(function(oe){Rr.call(this,n,oe)})),C("click",x,c),wt(3,x,()=>on,()=>({duration:150})),m(y,x)};F(f,y=>{t(),E(()=>t().isOpen)&&y(p)})}m(e,h),ft(),a()}const Ga={init(){this.handleHashChange(),window.addEventListener("hashchange",()=>this.handleHashChange())},handleHashChange(){let e=window.location.hash.slice(1);for(;e.startsWith("/");)e=e.slice(1);if(!e){(qe(Ft).length>1||qe(Pt)==="search")&&(this.setRootTab("artists"),window.location.hash="/artists");return}const n=e.split("/").map(decodeURIComponent),t=n[0];let r=Tc();switch(r||n.length>1&&(t==="album"&&n.length>=3?r={artist:n[1],name:n[2]}:t==="artist"&&n.length>=2?r={name:n[1]}:r={name:n[1],displayName:n[1]}),console.log(`[Router] Navigating: ${t}`,r),t){case"queue":this.setRootTab("queue");break;case"radio":this.setRootTab("radio");break;case"playlists":this.setRootTab("playlists");break;case"settings":this.setRootTab("settings");break;case"favorites":Pt.set("favorites"),Ft.set([{view:"root"},{view:"details",data:{name:"Favorites"}}]);break;case"artists":this.setRootTab("artists");break;case"albums":this.setRootTab("albums");break;case"search":Pt.set("search"),n[1]&&Tr.set(n[1]),Ft.set([{view:"root"}]);break;case"album":Pt.set("albums"),Ft.set([{view:"root"},{view:"tracks_by_album",data:r}]);break;case"artist":Pt.set("artists"),Ft.set([{view:"root"},{view:"albums_by_artist",data:r}]);break;case"playlist":Pt.set("playlists"),Ft.set([{view:"root"},{view:"details",data:r}]);break;default:this.setRootTab("artists");break}},setRootTab(e){Pt.set(e),Ft.set([{view:"root"}])},updateUrl(e,n){let t="";if(e==="root"){const r=qe(Pt);if(r==="search"){const a=qe(Tr);t=a?`search/${encodeURIComponent(a)}`:"search"}else t=r}else if(e==="details"){const r=n.name||n;t=r==="Favorites"?"favorites":`playlist/${encodeURIComponent(r)}`}else if(e==="albums_by_artist"){const r=n.name||n;t=`artist/${encodeURIComponent(r)}`}else if(e==="tracks_by_album"){const r=n.name||n,a=n.artist;a?t=`album/${encodeURIComponent(a)}/${encodeURIComponent(r)}`:t=`album/${encodeURIComponent(r)}`}else e==="queue"&&(t="queue");if(t){const r=`#/${t}`;decodeURIComponent(window.location.hash)!==decodeURIComponent(r)&&(window.location.hash=`/${t}`)}}};var $d=M("<!> <!> <!>",1);function Ad(e,n){dt(n,!1),yr(async()=>{Ga.init(),Mc((o,l)=>{Ga.updateUrl(o,l)}),Yi(),Gs.loadRadioStations();try{const o=await Sn.getArtists();o.length>0?console.log(`[App] Database ready. Loaded ${o.length} artists from cache.`):(console.log("[App] Database empty. Starting initial sync..."),Gs.syncLibrary())}catch(o){console.error("[App] DB Check failed:",o),je("Local DB error. Please update library manually.","error")}}),gt();var t=$d(),r=Te(t);vd(r,{});var a=_(r,2);xd(a,{});var i=_(a,2);Td(i,{}),m(e,t),ft()}dl(Ad,{target:document.getElementById("app")});
