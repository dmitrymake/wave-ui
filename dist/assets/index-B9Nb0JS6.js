(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();const Ts=!1;var ns=Array.isArray,Xi=Array.prototype.indexOf,rs=Array.from,Ya=Object.defineProperty,tr=Object.getOwnPropertyDescriptor,Wa=Object.getOwnPropertyDescriptors,Ki=Object.prototype,Gi=Array.prototype,Ws=Object.getPrototypeOf,da=Object.isExtensible;function Zi(e){return typeof e=="function"}const Et=()=>{};function Ji(e){return e()}function Vr(e){for(var t=0;t<e.length;t++)e[t]()}function Va(){var e,t,n=new Promise((r,a)=>{e=r,t=a});return{promise:n,resolve:e,reject:t}}const ot=2,Vs=4,ss=8,eo=1<<24,Qt=16,un=32,jn=64,as=128,Dt=512,at=1024,mt=2048,Ft=4096,Mt=8192,an=16384,is=32768,zn=65536,fa=1<<17,Qa=1<<18,lr=1<<19,Xa=1<<20,rn=1<<25,In=32768,$s=1<<21,Qs=1<<22,gn=1<<23,$n=Symbol("$state"),to=Symbol("legacy props"),no=Symbol(""),Zn=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Xs(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function ro(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function so(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function ao(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function io(e){throw new Error("https://svelte.dev/e/effect_orphan")}function oo(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function lo(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function co(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function uo(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function vo(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function fo(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const ho=1,po=2,Ka=4,_o=8,go=16,mo=2,bo=4,wo=8,yo=1,ko=2,xo=4,Eo=1,Mo=2,lt=Symbol(),So="http://www.w3.org/1999/xhtml";function To(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Ga(e){return e===this.v}function Ks(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function Za(e){return!Ks(e,this.v)}let cr=!1,$o=!1;function Ao(){cr=!0}let Ve=null;function nr(e){Ve=e}function dt(e,t=!1,n){Ve={p:Ve,i:!1,c:null,e:null,s:e,x:null,l:cr&&!t?{s:null,u:null,$:[]}:null}}function ft(e){var t=Ve,n=t.e;if(n!==null){t.e=null;for(var r of n)fi(r)}return t.i=!0,Ve=t.p,{}}function Pr(){return!cr||Ve!==null&&Ve.l===null}let Sn=[];function Ja(){var e=Sn;Sn=[],Vr(e)}function qn(e){if(Sn.length===0&&!br){var t=Sn;queueMicrotask(()=>{t===Sn&&Ja()})}Sn.push(e)}function Co(){for(;Sn.length>0;)Ja()}function ei(e){var t=De;if(t===null)return Ie.f|=gn,e;if((t.f&is)===0){if((t.f&as)===0)throw e;t.b.error(e)}else rr(e,t)}function rr(e,t){for(;t!==null;){if((t.f&as)!==0)try{t.b.error(e);return}catch(n){e=n}t=t.parent}throw e}const Or=new Set;let qe=null,qr=null,Ct=null,Tt=[],os=null,As=!1,br=!1;class Ut{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#n=0;#r=0;#l=null;#a=new Set;#s=new Set;skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#r>0}process(t){Tt=[],qr=null,this.apply();var n={parent:null,effect:null,effects:[],render_effects:[]};for(const r of t)this.#i(r,n);this.is_fork||this.#u(),this.is_deferred()?(this.#o(n.effects),this.#o(n.render_effects)):(qr=this,qe=null,ha(n.render_effects),ha(n.effects),qr=null,this.#l?.resolve()),Ct=null}#i(t,n){t.f^=at;for(var r=t.first;r!==null;){var a=r.f,i=(a&(un|jn))!==0,l=i&&(a&at)!==0,c=l||(a&Mt)!==0||this.skipped_effects.has(r);if((r.f&as)!==0&&r.b?.is_pending()&&(n={parent:n,effect:r,effects:[],render_effects:[]}),!c&&r.fn!==null){i?r.f^=at:(a&Vs)!==0?n.effects.push(r):vr(r)&&((r.f&Qt)!==0&&this.#a.add(r),ar(r));var u=r.first;if(u!==null){r=u;continue}}var o=r.parent;for(r=r.next;r===null&&o!==null;)o===n.effect&&(this.#o(n.effects),this.#o(n.render_effects),n=n.parent),r=o.next,o=o.parent}}#o(t){for(const n of t)(n.f&mt)!==0?this.#a.add(n):(n.f&Ft)!==0&&this.#s.add(n),this.#c(n.deps),it(n,at)}#c(t){if(t!==null)for(const n of t)(n.f&ot)===0||(n.f&In)===0||(n.f^=In,this.#c(n.deps))}capture(t,n){this.previous.has(t)||this.previous.set(t,n),(t.f&gn)===0&&(this.current.set(t,t.v),Ct?.set(t,t.v))}activate(){qe=this,this.apply()}deactivate(){qe===this&&(qe=null,Ct=null)}flush(){if(this.activate(),Tt.length>0){if(ti(),qe!==null&&qe!==this)return}else this.#n===0&&this.process([]);this.deactivate()}discard(){for(const t of this.#t)t(this);this.#t.clear()}#u(){if(this.#r===0){for(const t of this.#e)t();this.#e.clear()}this.#n===0&&this.#v()}#v(){if(Or.size>1){this.previous.clear();var t=Ct,n=!0,r={parent:null,effect:null,effects:[],render_effects:[]};for(const i of Or){if(i===this){n=!1;continue}const l=[];for(const[u,o]of this.current){if(i.current.has(u))if(n&&o!==i.current.get(u))i.current.set(u,o);else continue;l.push(u)}if(l.length===0)continue;const c=[...i.current.keys()].filter(u=>!this.current.has(u));if(c.length>0){var a=Tt;Tt=[];const u=new Set,o=new Map;for(const v of l)ni(v,c,u,o);if(Tt.length>0){qe=i,i.apply();for(const v of Tt)i.#i(v,r);i.deactivate()}Tt=a}}qe=null,Ct=t}this.committed=!0,Or.delete(this)}increment(t){this.#n+=1,t&&(this.#r+=1)}decrement(t){this.#n-=1,t&&(this.#r-=1),this.revive()}revive(){for(const t of this.#a)this.#s.delete(t),it(t,mt),On(t);for(const t of this.#s)it(t,Ft),On(t);this.flush()}oncommit(t){this.#e.add(t)}ondiscard(t){this.#t.add(t)}settled(){return(this.#l??=Va()).promise}static ensure(){if(qe===null){const t=qe=new Ut;Or.add(qe),br||Ut.enqueue(()=>{qe===t&&t.flush()})}return qe}static enqueue(t){qn(t)}apply(){}}function Po(e){var t=br;br=!0;try{for(var n;;){if(Co(),Tt.length===0&&(qe?.flush(),Tt.length===0))return os=null,n;ti()}}finally{br=t}}function ti(){var e=Cn;As=!0;var t=null;try{var n=0;for(Xr(!0);Tt.length>0;){var r=Ut.ensure();if(n++>1e3){var a,i;Ro()}r.process(Tt),mn.clear()}}finally{As=!1,Xr(e),os=null}}function Ro(){try{oo()}catch(e){rr(e,os)}}let en=null;function ha(e){var t=e.length;if(t!==0){for(var n=0;n<t;){var r=e[n++];if((r.f&(an|Mt))===0&&vr(r)&&(en=new Set,ar(r),r.deps===null&&r.first===null&&r.nodes===null&&(r.teardown===null&&r.ac===null?gi(r):r.fn=null),en?.size>0)){mn.clear();for(const a of en){if((a.f&(an|Mt))!==0)continue;const i=[a];let l=a.parent;for(;l!==null;)en.has(l)&&(en.delete(l),i.push(l)),l=l.parent;for(let c=i.length-1;c>=0;c--){const u=i[c];(u.f&(an|Mt))===0&&ar(u)}}en.clear()}}en=null}}function ni(e,t,n,r){if(!n.has(e)&&(n.add(e),e.reactions!==null))for(const a of e.reactions){const i=a.f;(i&ot)!==0?ni(a,t,n,r):(i&(Qs|Qt))!==0&&(i&mt)===0&&ri(a,t,r)&&(it(a,mt),On(a))}}function ri(e,t,n){const r=n.get(e);if(r!==void 0)return r;if(e.deps!==null)for(const a of e.deps){if(t.includes(a))return!0;if((a.f&ot)!==0&&ri(a,t,n))return n.set(a,!0),!0}return n.set(e,!1),!1}function On(e){for(var t=os=e;t.parent!==null;){t=t.parent;var n=t.f;if(As&&t===De&&(n&Qt)!==0&&(n&Qa)===0)return;if((n&(jn|un))!==0){if((n&at)===0)return;t.f^=at}}Tt.push(t)}function Lo(e){let t=0,n=Nn(0),r;return()=>{kr()&&(s(n),ur(()=>(t===0&&(r=x(()=>e(()=>wr(n)))),t+=1,()=>{qn(()=>{t-=1,t===0&&(r?.(),r=void 0,wr(n))})})))}}var zo=zn|lr|as;function Io(e,t,n){new Oo(e,t,n)}class Oo{parent;#e=!1;#t;#n=null;#r;#l;#a;#s=null;#i=null;#o=null;#c=null;#u=null;#v=0;#d=0;#h=!1;#f=null;#b=Lo(()=>(this.#f=Nn(this.#v),()=>{this.#f=null}));constructor(t,n,r){this.#t=t,this.#r=n,this.#l=r,this.parent=De.b,this.#e=!!this.#r.pending,this.#a=Zs(()=>{De.b=this;{var a=this.#g();try{this.#s=$t(()=>r(a))}catch(i){this.error(i)}this.#d>0?this.#_():this.#e=!1}return()=>{this.#u?.remove()}},zo)}#w(){try{this.#s=$t(()=>this.#l(this.#t))}catch(t){this.error(t)}this.#e=!1}#y(){const t=this.#r.pending;t&&(this.#i=$t(()=>t(this.#t)),Ut.enqueue(()=>{var n=this.#g();this.#s=this.#p(()=>(Ut.ensure(),$t(()=>this.#l(n)))),this.#d>0?this.#_():(An(this.#i,()=>{this.#i=null}),this.#e=!1)}))}#g(){var t=this.#t;return this.#e&&(this.#u=on(),this.#t.before(this.#u),t=this.#u),t}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#r.pending}#p(t){var n=De,r=Ie,a=Ve;Wt(this.#a),pt(this.#a),nr(this.#a.ctx);try{return t()}catch(i){return ei(i),null}finally{Wt(n),pt(r),nr(a)}}#_(){const t=this.#r.pending;this.#s!==null&&(this.#c=document.createDocumentFragment(),this.#c.append(this.#u),wi(this.#s,this.#c)),this.#i===null&&(this.#i=$t(()=>t(this.#t)))}#m(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#m(t);return}this.#d+=t,this.#d===0&&(this.#e=!1,this.#i&&An(this.#i,()=>{this.#i=null}),this.#c&&(this.#t.before(this.#c),this.#c=null))}update_pending_count(t){this.#m(t),this.#v+=t,this.#f&&sr(this.#f,this.#v)}get_effect_pending(){return this.#b(),s(this.#f)}error(t){var n=this.#r.onerror;let r=this.#r.failed;if(this.#h||!n&&!r)throw t;this.#s&&(_t(this.#s),this.#s=null),this.#i&&(_t(this.#i),this.#i=null),this.#o&&(_t(this.#o),this.#o=null);var a=!1,i=!1;const l=()=>{if(a){To();return}a=!0,i&&fo(),Ut.ensure(),this.#v=0,this.#o!==null&&An(this.#o,()=>{this.#o=null}),this.#e=this.has_pending_snippet(),this.#s=this.#p(()=>(this.#h=!1,$t(()=>this.#l(this.#t)))),this.#d>0?this.#_():this.#e=!1};var c=Ie;try{pt(null),i=!0,n?.(t,l),i=!1}catch(u){rr(u,this.#a&&this.#a.parent)}finally{pt(c)}r&&qn(()=>{this.#o=this.#p(()=>{Ut.ensure(),this.#h=!0;try{return $t(()=>{r(this.#t,()=>t,()=>l)})}catch(u){return rr(u,this.#a.parent),null}finally{this.#h=!1}})})}}function No(e,t,n,r){const a=Pr()?ls:et;if(n.length===0&&e.length===0){r(t.map(a));return}var i=qe,l=De,c=Do();function u(){Promise.all(n.map(o=>Fo(o))).then(o=>{c();try{r([...t.map(a),...o])}catch(v){(l.f&an)===0&&rr(v,l)}i?.deactivate(),Qr()}).catch(o=>{rr(o,l)})}e.length>0?Promise.all(e).then(()=>{c();try{return u()}finally{i?.deactivate(),Qr()}}):u()}function Do(){var e=De,t=Ie,n=Ve,r=qe;return function(i=!0){Wt(e),pt(t),nr(n),i&&r?.activate()}}function Qr(){Wt(null),pt(null),nr(null)}function ls(e){var t=ot|mt,n=Ie!==null&&(Ie.f&ot)!==0?Ie:null;return De!==null&&(De.f|=lr),{ctx:Ve,deps:null,effects:null,equals:Ga,f:t,fn:e,reactions:null,rv:0,v:lt,wv:0,parent:n??De,ac:null}}function Fo(e,t){let n=De;n===null&&ro();var r=n.b,a=void 0,i=Nn(lt),l=!Ie,c=new Map;return Ko(()=>{var u=Va();a=u.promise;try{Promise.resolve(e()).then(u.resolve,u.reject).then(()=>{o===qe&&o.committed&&o.deactivate(),Qr()})}catch(d){u.reject(d),Qr()}var o=qe;if(l){var v=!r.is_pending();r.update_pending_count(1),o.increment(v),c.get(o)?.reject(Zn),c.delete(o),c.set(o,u)}const f=(d,p=void 0)=>{if(o.activate(),p)p!==Zn&&(i.f|=gn,sr(i,p));else{(i.f&gn)!==0&&(i.f^=gn),sr(i,d);for(const[y,k]of c){if(c.delete(y),y===o)break;k.reject(Zn)}}l&&(r.update_pending_count(-1),o.decrement(v))};u.promise.then(f,d=>f(null,d||"unknown"))}),cs(()=>{for(const u of c.values())u.reject(Zn)}),new Promise(u=>{function o(v){function f(){v===a?u(i):o(a)}v.then(f,f)}o(a)})}function hr(e){const t=ls(e);return yi(t),t}function et(e){const t=ls(e);return t.equals=Za,t}function si(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)_t(t[n])}}function Bo(e){for(var t=e.parent;t!==null;){if((t.f&ot)===0)return(t.f&an)===0?t:null;t=t.parent}return null}function Gs(e){var t,n=De;Wt(Bo(e));try{e.f&=~In,si(e),t=Mi(e)}finally{Wt(n)}return t}function ai(e){var t=Gs(e);if(e.equals(t)||(qe?.is_fork||(e.v=t),e.wv=xi()),!Hn)if(Ct!==null)(kr()||qe?.is_fork)&&Ct.set(e,t);else{var n=(e.f&Dt)===0?Ft:at;it(e,n)}}let Cs=new Set;const mn=new Map;let ii=!1;function Nn(e,t){var n={f:0,v:e,reactions:null,equals:Ga,rv:0,wv:0};return n}function dn(e,t){const n=Nn(e);return yi(n),n}function A(e,t=!1,n=!0){const r=Nn(e);return t||(r.equals=Za),cr&&n&&Ve!==null&&Ve.l!==null&&(Ve.l.s??=[]).push(r),r}function Nr(e,t){return g(e,x(()=>s(e))),t}function g(e,t,n=!1){Ie!==null&&(!Yt||(Ie.f&fa)!==0)&&Pr()&&(Ie.f&(ot|Qt|Qs|fa))!==0&&!ln?.includes(e)&&vo();let r=n?Jn(t):t;return sr(e,r)}function sr(e,t){if(!e.equals(t)){var n=e.v;Hn?mn.set(e,t):mn.set(e,n),e.v=t;var r=Ut.ensure();r.capture(e,n),(e.f&ot)!==0&&((e.f&mt)!==0&&Gs(e),it(e,(e.f&Dt)!==0?at:Ft)),e.wv=xi(),oi(e,mt),Pr()&&De!==null&&(De.f&at)!==0&&(De.f&(un|jn))===0&&(St===null?Zo([e]):St.push(e)),!r.is_fork&&Cs.size>0&&!ii&&jo()}return t}function jo(){ii=!1;var e=Cn;Xr(!0);const t=Array.from(Cs);try{for(const n of t)(n.f&at)!==0&&it(n,Ft),vr(n)&&ar(n)}finally{Xr(e)}Cs.clear()}function wr(e){g(e,e.v+1)}function oi(e,t){var n=e.reactions;if(n!==null)for(var r=Pr(),a=n.length,i=0;i<a;i++){var l=n[i],c=l.f;if(!(!r&&l===De)){var u=(c&mt)===0;if(u&&it(l,t),(c&ot)!==0){var o=l;Ct?.delete(o),(c&In)===0&&(c&Dt&&(l.f|=In),oi(o,Ft))}else u&&((c&Qt)!==0&&en!==null&&en.add(l),On(l))}}}function Jn(e){if(typeof e!="object"||e===null||$n in e)return e;const t=Ws(e);if(t!==Ki&&t!==Gi)return e;var n=new Map,r=ns(e),a=dn(0),i=Pn,l=c=>{if(Pn===i)return c();var u=Ie,o=Pn;pt(null),ga(i);var v=c();return pt(u),ga(o),v};return r&&n.set("length",dn(e.length)),new Proxy(e,{defineProperty(c,u,o){(!("value"in o)||o.configurable===!1||o.enumerable===!1||o.writable===!1)&&co();var v=n.get(u);return v===void 0?v=l(()=>{var f=dn(o.value);return n.set(u,f),f}):g(v,o.value,!0),!0},deleteProperty(c,u){var o=n.get(u);if(o===void 0){if(u in c){const v=l(()=>dn(lt));n.set(u,v),wr(a)}}else g(o,lt),wr(a);return!0},get(c,u,o){if(u===$n)return e;var v=n.get(u),f=u in c;if(v===void 0&&(!f||tr(c,u)?.writable)&&(v=l(()=>{var p=Jn(f?c[u]:lt),y=dn(p);return y}),n.set(u,v)),v!==void 0){var d=s(v);return d===lt?void 0:d}return Reflect.get(c,u,o)},getOwnPropertyDescriptor(c,u){var o=Reflect.getOwnPropertyDescriptor(c,u);if(o&&"value"in o){var v=n.get(u);v&&(o.value=s(v))}else if(o===void 0){var f=n.get(u),d=f?.v;if(f!==void 0&&d!==lt)return{enumerable:!0,configurable:!0,value:d,writable:!0}}return o},has(c,u){if(u===$n)return!0;var o=n.get(u),v=o!==void 0&&o.v!==lt||Reflect.has(c,u);if(o!==void 0||De!==null&&(!v||tr(c,u)?.writable)){o===void 0&&(o=l(()=>{var d=v?Jn(c[u]):lt,p=dn(d);return p}),n.set(u,o));var f=s(o);if(f===lt)return!1}return v},set(c,u,o,v){var f=n.get(u),d=u in c;if(r&&u==="length")for(var p=o;p<f.v;p+=1){var y=n.get(p+"");y!==void 0?g(y,lt):p in c&&(y=l(()=>dn(lt)),n.set(p+"",y))}if(f===void 0)(!d||tr(c,u)?.writable)&&(f=l(()=>dn(void 0)),g(f,Jn(o)),n.set(u,f));else{d=f.v!==lt;var k=l(()=>Jn(o));g(f,k)}var _=Reflect.getOwnPropertyDescriptor(c,u);if(_?.set&&_.set.call(v,o),!d){if(r&&typeof u=="string"){var E=n.get("length"),C=Number(u);Number.isInteger(C)&&C>=E.v&&g(E,C+1)}wr(a)}return!0},ownKeys(c){s(a);var u=Reflect.ownKeys(c).filter(f=>{var d=n.get(f);return d===void 0||d.v!==lt});for(var[o,v]of n)v.v!==lt&&!(o in c)&&u.push(o);return u},setPrototypeOf(){uo()}})}var En,li,ci,ui;function qo(){if(En===void 0){En=window,li=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;ci=tr(t,"firstChild").get,ui=tr(t,"nextSibling").get,da(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),da(n)&&(n.__t=void 0)}}function on(e=""){return document.createTextNode(e)}function hn(e){return ci.call(e)}function Rr(e){return ui.call(e)}function h(e,t){return hn(e)}function Se(e,t=!1){{var n=hn(e);return n instanceof Comment&&n.data===""?Rr(n):n}}function b(e,t=1,n=!1){let r=e;for(;t--;)r=Rr(r);return r}function Uo(e){e.textContent=""}function vi(){return!1}let pa=!1;function Ho(){pa||(pa=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function Yo(e,t,n,r=!0){r&&n();for(var a of t)e.addEventListener(a,n);cs(()=>{for(var i of t)e.removeEventListener(i,n)})}function Un(e){var t=Ie,n=De;pt(null),Wt(null);try{return e()}finally{pt(t),Wt(n)}}function Wo(e,t,n,r=n){e.addEventListener(t,()=>Un(n));const a=e.__on_r;a?e.__on_r=()=>{a(),r(!0)}:e.__on_r=()=>r(!0),Ho()}function di(e){De===null&&(Ie===null&&io(),ao()),Hn&&so()}function Vo(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function Xt(e,t,n){var r=De;r!==null&&(r.f&Mt)!==0&&(e|=Mt);var a={ctx:Ve,deps:null,nodes:null,f:e|mt|Dt,first:null,fn:t,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,wv:0,ac:null};if(n)try{ar(a),a.f|=is}catch(c){throw _t(a),c}else t!==null&&On(a);var i=a;if(n&&i.deps===null&&i.teardown===null&&i.nodes===null&&i.first===i.last&&(i.f&lr)===0&&(i=i.first,(e&Qt)!==0&&(e&zn)!==0&&i!==null&&(i.f|=zn)),i!==null&&(i.parent=r,r!==null&&Vo(i,r),Ie!==null&&(Ie.f&ot)!==0&&(e&jn)===0)){var l=Ie;(l.effects??=[]).push(i)}return a}function kr(){return Ie!==null&&!Yt}function cs(e){const t=Xt(ss,null,!1);return it(t,at),t.teardown=e,t}function Ps(e){di();var t=De.f,n=!Ie&&(t&un)!==0&&(t&is)===0;if(n){var r=Ve;(r.e??=[]).push(e)}else return fi(e)}function fi(e){return Xt(Vs|Xa,e,!1)}function Qo(e){return di(),Xt(ss|Xa,e,!0)}function Xo(e){Ut.ensure();const t=Xt(jn|lr,e,!0);return(n={})=>new Promise(r=>{n.outro?An(t,()=>{_t(t),r(void 0)}):(_t(t),r(void 0))})}function Ht(e){return Xt(Vs,e,!1)}function ie(e,t){var n=Ve,r={effect:null,ran:!1,deps:e};n.l.$.push(r),r.effect=ur(()=>{e(),!r.ran&&(r.ran=!0,x(t))})}function Bt(){var e=Ve;ur(()=>{for(var t of e.l.$){t.deps();var n=t.effect;(n.f&at)!==0&&it(n,Ft),vr(n)&&ar(n),t.ran=!1}})}function Ko(e){return Xt(Qs|lr,e,!0)}function ur(e,t=0){return Xt(ss|t,e,!0)}function de(e,t=[],n=[],r=[]){No(r,t,n,a=>{Xt(ss,()=>e(...a.map(s)),!0)})}function Zs(e,t=0){var n=Xt(Qt|t,e,!0);return n}function $t(e){return Xt(un|lr,e,!0)}function hi(e){var t=e.teardown;if(t!==null){const n=Hn,r=Ie;_a(!0),pt(null);try{t.call(null)}finally{_a(n),pt(r)}}}function pi(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){const a=n.ac;a!==null&&Un(()=>{a.abort(Zn)});var r=n.next;(n.f&jn)!==0?n.parent=null:_t(n,t),n=r}}function Go(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&un)===0&&_t(t),t=n}}function _t(e,t=!0){var n=!1;(t||(e.f&Qa)!==0)&&e.nodes!==null&&e.nodes.end!==null&&(_i(e.nodes.start,e.nodes.end),n=!0),pi(e,t&&!n),Kr(e,0),it(e,an);var r=e.nodes&&e.nodes.t;if(r!==null)for(const i of r)i.stop();hi(e);var a=e.parent;a!==null&&a.first!==null&&gi(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function _i(e,t){for(;e!==null;){var n=e===t?null:Rr(e);e.remove(),e=n}}function gi(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function An(e,t,n=!0){var r=[];mi(e,r,!0);var a=()=>{n&&_t(e),t&&t()},i=r.length;if(i>0){var l=()=>--i||a();for(var c of r)c.out(l)}else a()}function mi(e,t,n){if((e.f&Mt)===0){e.f^=Mt;var r=e.nodes&&e.nodes.t;if(r!==null)for(const c of r)(c.is_global||n)&&t.push(c);for(var a=e.first;a!==null;){var i=a.next,l=(a.f&zn)!==0||(a.f&un)!==0&&(e.f&Qt)!==0;mi(a,t,l?n:!1),a=i}}}function Js(e){bi(e,!0)}function bi(e,t){if((e.f&Mt)!==0){e.f^=Mt,(e.f&at)===0&&(it(e,mt),On(e));for(var n=e.first;n!==null;){var r=n.next,a=(n.f&zn)!==0||(n.f&un)!==0;bi(n,a?t:!1),n=r}var i=e.nodes&&e.nodes.t;if(i!==null)for(const l of i)(l.is_global||t)&&l.in()}}function wi(e,t){if(e.nodes)for(var n=e.nodes.start,r=e.nodes.end;n!==null;){var a=n===r?null:Rr(n);t.append(n),n=a}}let Cn=!1;function Xr(e){Cn=e}let Hn=!1;function _a(e){Hn=e}let Ie=null,Yt=!1;function pt(e){Ie=e}let De=null;function Wt(e){De=e}let ln=null;function yi(e){Ie!==null&&(ln===null?ln=[e]:ln.push(e))}let vt=null,kt=0,St=null;function Zo(e){St=e}let ki=1,xr=0,Pn=xr;function ga(e){Pn=e}function xi(){return++ki}function vr(e){var t=e.f;if((t&mt)!==0)return!0;if(t&ot&&(e.f&=~In),(t&Ft)!==0){var n=e.deps;if(n!==null)for(var r=n.length,a=0;a<r;a++){var i=n[a];if(vr(i)&&ai(i),i.wv>e.wv)return!0}(t&Dt)!==0&&Ct===null&&it(e,at)}return!1}function Ei(e,t,n=!0){var r=e.reactions;if(r!==null&&!ln?.includes(e))for(var a=0;a<r.length;a++){var i=r[a];(i.f&ot)!==0?Ei(i,t,!1):t===i&&(n?it(i,mt):(i.f&at)!==0&&it(i,Ft),On(i))}}function Mi(e){var t=vt,n=kt,r=St,a=Ie,i=ln,l=Ve,c=Yt,u=Pn,o=e.f;vt=null,kt=0,St=null,Ie=(o&(un|jn))===0?e:null,ln=null,nr(e.ctx),Yt=!1,Pn=++xr,e.ac!==null&&(Un(()=>{e.ac.abort(Zn)}),e.ac=null);try{e.f|=$s;var v=e.fn,f=v(),d=e.deps;if(vt!==null){var p;if(Kr(e,kt),d!==null&&kt>0)for(d.length=kt+vt.length,p=0;p<vt.length;p++)d[kt+p]=vt[p];else e.deps=d=vt;if(kr()&&(e.f&Dt)!==0)for(p=kt;p<d.length;p++)(d[p].reactions??=[]).push(e)}else d!==null&&kt<d.length&&(Kr(e,kt),d.length=kt);if(Pr()&&St!==null&&!Yt&&d!==null&&(e.f&(ot|Ft|mt))===0)for(p=0;p<St.length;p++)Ei(St[p],e);return a!==null&&a!==e&&(xr++,St!==null&&(r===null?r=St:r.push(...St))),(e.f&gn)!==0&&(e.f^=gn),f}catch(y){return ei(y)}finally{e.f^=$s,vt=t,kt=n,St=r,Ie=a,ln=i,nr(l),Yt=c,Pn=u}}function Jo(e,t){let n=t.reactions;if(n!==null){var r=Xi.call(n,e);if(r!==-1){var a=n.length-1;a===0?n=t.reactions=null:(n[r]=n[a],n.pop())}}n===null&&(t.f&ot)!==0&&(vt===null||!vt.includes(t))&&(it(t,Ft),(t.f&Dt)!==0&&(t.f^=Dt,t.f&=~In),si(t),Kr(t,0))}function Kr(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)Jo(e,n[r])}function ar(e){var t=e.f;if((t&an)===0){it(e,at);var n=De,r=Cn;De=e,Cn=!0;try{(t&(Qt|eo))!==0?Go(e):pi(e),hi(e);var a=Mi(e);e.teardown=typeof a=="function"?a:null,e.wv=ki;var i;Ts&&$o&&(e.f&mt)!==0&&e.deps}finally{Cn=r,De=n}}}async function Er(){await Promise.resolve(),Po()}function s(e){var t=e.f,n=(t&ot)!==0;if(Ie!==null&&!Yt){var r=De!==null&&(De.f&an)!==0;if(!r&&!ln?.includes(e)){var a=Ie.deps;if((Ie.f&$s)!==0)e.rv<xr&&(e.rv=xr,vt===null&&a!==null&&a[kt]===e?kt++:vt===null?vt=[e]:vt.includes(e)||vt.push(e));else{(Ie.deps??=[]).push(e);var i=e.reactions;i===null?e.reactions=[Ie]:i.includes(Ie)||i.push(Ie)}}}if(Hn){if(mn.has(e))return mn.get(e);if(n){var l=e,c=l.v;return((l.f&at)===0&&l.reactions!==null||Ti(l))&&(c=Gs(l)),mn.set(l,c),c}}else n&&(!Ct?.has(e)||qe?.is_fork&&!kr())&&(l=e,vr(l)&&ai(l),Cn&&kr()&&(l.f&Dt)===0&&Si(l));if(Ct?.has(e))return Ct.get(e);if((e.f&gn)!==0)throw e.v;return e.v}function Si(e){if(e.deps!==null){e.f^=Dt;for(const t of e.deps)(t.reactions??=[]).push(e),(t.f&ot)!==0&&(t.f&Dt)===0&&Si(t)}}function Ti(e){if(e.v===lt)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(mn.has(t)||(t.f&ot)!==0&&Ti(t))return!0;return!1}function x(e){var t=Yt;try{return Yt=!0,e()}finally{Yt=t}}const el=-7169;function it(e,t){e.f=e.f&el|t}function W(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if($n in e)Rs(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&$n in n&&Rs(n)}}}function Rs(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let r in e)try{Rs(e[r],t)}catch{}const n=Ws(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=Wa(n);for(let a in r){const i=r[a].get;if(i)try{i.call(e)}catch{}}}}}const tl=["touchstart","touchmove"];function nl(e){return tl.includes(e)}const rl=new Set,ma=new Set;function sl(e,t,n,r={}){function a(i){if(r.capture||gr.call(t,i),!i.cancelBubble)return Un(()=>n?.call(this,i))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?qn(()=>{t.addEventListener(e,a,r)}):t.addEventListener(e,a,r),a}function z(e,t,n,r,a){var i={capture:r,passive:a},l=sl(e,t,n,i);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&cs(()=>{t.removeEventListener(e,l,i)})}let ba=null;function gr(e){var t=this,n=t.ownerDocument,r=e.type,a=e.composedPath?.()||[],i=a[0]||e.target;ba=e;var l=0,c=ba===e&&e.__root;if(c){var u=a.indexOf(c);if(u!==-1&&(t===document||t===window)){e.__root=t;return}var o=a.indexOf(t);if(o===-1)return;u<=o&&(l=u)}if(i=a[l]||e.target,i!==t){Ya(e,"currentTarget",{configurable:!0,get(){return i||n}});var v=Ie,f=De;pt(null),Wt(null);try{for(var d,p=[];i!==null;){var y=i.assignedSlot||i.parentNode||i.host||null;try{var k=i["__"+r];k!=null&&(!i.disabled||e.target===i)&&k.call(i,e)}catch(_){d?p.push(_):d=_}if(e.cancelBubble||y===t||y===null)break;i=y}if(d){for(let _ of p)queueMicrotask(()=>{throw _});throw d}}finally{e.__root=t,delete e.currentTarget,pt(v),Wt(f)}}}function $i(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function Mr(e,t){var n=De;n.nodes===null&&(n.nodes={start:e,end:t,a:null,t:null})}function M(e,t){var n=(t&Eo)!==0,r=(t&Mo)!==0,a,i=!e.startsWith("<!>");return()=>{a===void 0&&(a=$i(i?e:"<!>"+e),n||(a=hn(a)));var l=r||li?document.importNode(a,!0):a.cloneNode(!0);if(n){var c=hn(l),u=l.lastChild;Mr(c,u)}else Mr(l,l);return l}}function Vn(e=""){{var t=on(e+"");return Mr(t,t),t}}function Xe(){var e=document.createDocumentFragment(),t=document.createComment(""),n=on();return e.append(t,n),Mr(t,n),e}function m(e,t){e!==null&&e.before(t)}let Ls=!0;function fe(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??=e.nodeValue)&&(e.__t=n,e.nodeValue=n+"")}function al(e,t){return il(e,t)}const Qn=new Map;function il(e,{target:t,anchor:n,props:r={},events:a,context:i,intro:l=!0}){qo();var c=new Set,u=f=>{for(var d=0;d<f.length;d++){var p=f[d];if(!c.has(p)){c.add(p);var y=nl(p);t.addEventListener(p,gr,{passive:y});var k=Qn.get(p);k===void 0?(document.addEventListener(p,gr,{passive:y}),Qn.set(p,1)):Qn.set(p,k+1)}}};u(rs(rl)),ma.add(u);var o=void 0,v=Xo(()=>{var f=n??t.appendChild(on());return Io(f,{pending:()=>{}},d=>{if(i){dt({});var p=Ve;p.c=i}a&&(r.$$events=a),Ls=l,o=e(d,r)||{},Ls=!0,i&&ft()}),()=>{for(var d of c){t.removeEventListener(d,gr);var p=Qn.get(d);--p===0?(document.removeEventListener(d,gr),Qn.delete(d)):Qn.set(d,p)}ma.delete(u),f!==n&&f.parentNode?.removeChild(f)}});return ol.set(o,v),o}let ol=new WeakMap;class ll{anchor;#e=new Map;#t=new Map;#n=new Map;#r=new Set;#l=!0;constructor(t,n=!0){this.anchor=t,this.#l=n}#a=()=>{var t=qe;if(this.#e.has(t)){var n=this.#e.get(t),r=this.#t.get(n);if(r)Js(r),this.#r.delete(n);else{var a=this.#n.get(n);a&&(this.#t.set(n,a.effect),this.#n.delete(n),a.fragment.lastChild.remove(),this.anchor.before(a.fragment),r=a.effect)}for(const[i,l]of this.#e){if(this.#e.delete(i),i===t)break;const c=this.#n.get(l);c&&(_t(c.effect),this.#n.delete(l))}for(const[i,l]of this.#t){if(i===n||this.#r.has(i))continue;const c=()=>{if(Array.from(this.#e.values()).includes(i)){var o=document.createDocumentFragment();wi(l,o),o.append(on()),this.#n.set(i,{effect:l,fragment:o})}else _t(l);this.#r.delete(i),this.#t.delete(i)};this.#l||!r?(this.#r.add(i),An(l,c,!1)):c()}}};#s=t=>{this.#e.delete(t);const n=Array.from(this.#e.values());for(const[r,a]of this.#n)n.includes(r)||(_t(a.effect),this.#n.delete(r))};ensure(t,n){var r=qe,a=vi();if(n&&!this.#t.has(t)&&!this.#n.has(t))if(a){var i=document.createDocumentFragment(),l=on();i.append(l),this.#n.set(t,{effect:$t(()=>n(l)),fragment:i})}else this.#t.set(t,$t(()=>n(this.anchor)));if(this.#e.set(r,t),a){for(const[c,u]of this.#t)c===t?r.skipped_effects.delete(u):r.skipped_effects.add(u);for(const[c,u]of this.#n)c===t?r.skipped_effects.delete(u.effect):r.skipped_effects.add(u.effect);r.oncommit(this.#a),r.ondiscard(this.#s)}else this.#a()}}function U(e,t,n=!1){var r=new ll(e),a=n?zn:0;function i(l,c){r.ensure(l,c)}Zs(()=>{var l=!1;t((c,u=!0)=>{l=!0,i(u,c)}),l||i(!1,null)},a)}function cn(e,t){return t}function cl(e,t,n){for(var r=[],a=t.length,i,l=t.length,c=0;c<a;c++){let f=t[c];An(f,()=>{if(i){if(i.pending.delete(f),i.done.add(f),i.pending.size===0){var d=e.outrogroups;zs(rs(i.done)),d.delete(i),d.size===0&&(e.outrogroups=null)}}else l-=1},!1)}if(l===0){var u=r.length===0&&n!==null;if(u){var o=n,v=o.parentNode;Uo(v),v.append(o),e.items.clear()}zs(t,!u)}else i={pending:new Set(t),done:new Set},(e.outrogroups??=new Set).add(i)}function zs(e,t=!0){for(var n=0;n<e.length;n++)_t(e[n],t)}var wa;function Pt(e,t,n,r,a,i=null){var l=e,c=new Map,u=(t&Ka)!==0;if(u){var o=e;l=o.appendChild(on())}var v=null,f=et(()=>{var E=n();return ns(E)?E:E==null?[]:rs(E)}),d,p=!0;function y(){_.fallback=v,ul(_,d,l,t,r),v!==null&&(d.length===0?(v.f&rn)===0?Js(v):(v.f^=rn,mr(v,null,l)):An(v,()=>{v=null}))}var k=Zs(()=>{d=s(f);for(var E=d.length,C=new Set,X=qe,Z=vi(),ae=0;ae<E;ae+=1){var ce=d[ae],me=r(ce,ae),$=p?null:c.get(me);$?($.v&&sr($.v,ce),$.i&&sr($.i,ae),Z&&X.skipped_effects.delete($.e)):($=vl(c,p?l:wa??=on(),ce,me,ae,a,t,n),p||($.e.f|=rn),c.set(me,$)),C.add(me)}if(E===0&&i&&!v&&(p?v=$t(()=>i(l)):(v=$t(()=>i(wa??=on())),v.f|=rn)),!p)if(Z){for(const[D,J]of c)C.has(D)||X.skipped_effects.add(J.e);X.oncommit(y),X.ondiscard(()=>{})}else y();s(f)}),_={effect:k,items:c,outrogroups:null,fallback:v};p=!1}function ul(e,t,n,r,a){var i=(r&_o)!==0,l=t.length,c=e.items,u=e.effect.first,o,v=null,f,d=[],p=[],y,k,_,E;if(i)for(E=0;E<l;E+=1)y=t[E],k=a(y,E),_=c.get(k).e,(_.f&rn)===0&&(_.nodes?.a?.measure(),(f??=new Set).add(_));for(E=0;E<l;E+=1){if(y=t[E],k=a(y,E),_=c.get(k).e,e.outrogroups!==null)for(const J of e.outrogroups)J.pending.delete(_),J.done.delete(_);if((_.f&rn)!==0)if(_.f^=rn,_===u)mr(_,null,n);else{var C=v?v.next:u;_===e.effect.last&&(e.effect.last=_.prev),_.prev&&(_.prev.next=_.next),_.next&&(_.next.prev=_.prev),fn(e,v,_),fn(e,_,C),mr(_,C,n),v=_,d=[],p=[],u=v.next;continue}if((_.f&Mt)!==0&&(Js(_),i&&(_.nodes?.a?.unfix(),(f??=new Set).delete(_))),_!==u){if(o!==void 0&&o.has(_)){if(d.length<p.length){var X=p[0],Z;v=X.prev;var ae=d[0],ce=d[d.length-1];for(Z=0;Z<d.length;Z+=1)mr(d[Z],X,n);for(Z=0;Z<p.length;Z+=1)o.delete(p[Z]);fn(e,ae.prev,ce.next),fn(e,v,ae),fn(e,ce,X),u=X,v=ce,E-=1,d=[],p=[]}else o.delete(_),mr(_,u,n),fn(e,_.prev,_.next),fn(e,_,v===null?e.effect.first:v.next),fn(e,v,_),v=_;continue}for(d=[],p=[];u!==null&&u!==_;)(o??=new Set).add(u),p.push(u),u=u.next;if(u===null)continue}(_.f&rn)===0&&d.push(_),v=_,u=_.next}if(e.outrogroups!==null){for(const J of e.outrogroups)J.pending.size===0&&(zs(rs(J.done)),e.outrogroups?.delete(J));e.outrogroups.size===0&&(e.outrogroups=null)}if(u!==null||o!==void 0){var me=[];if(o!==void 0)for(_ of o)(_.f&Mt)===0&&me.push(_);for(;u!==null;)(u.f&Mt)===0&&u!==e.fallback&&me.push(u),u=u.next;var $=me.length;if($>0){var D=(r&Ka)!==0&&l===0?n:null;if(i){for(E=0;E<$;E+=1)me[E].nodes?.a?.measure();for(E=0;E<$;E+=1)me[E].nodes?.a?.fix()}cl(e,me,D)}}i&&qn(()=>{if(f!==void 0)for(_ of f)_.nodes?.a?.apply()})}function vl(e,t,n,r,a,i,l,c){var u=(l&ho)!==0?(l&go)===0?A(n,!1,!1):Nn(n):null,o=(l&po)!==0?Nn(a):null;return{v:u,i:o,e:$t(()=>(i(t,u??n,o??a,c),()=>{e.delete(r)}))}}function mr(e,t,n){if(e.nodes)for(var r=e.nodes.start,a=e.nodes.end,i=t&&(t.f&rn)===0?t.nodes.start:n;r!==null;){var l=Rr(r);if(i.before(r),r===a)return;r=l}}function fn(e,t,n){t===null?e.effect.first=n:t.next=n,n===null?e.effect.last=t:n.prev=t}function ue(e,t,n=!1,r=!1,a=!1){var i=e,l="";de(()=>{var c=De;if(l!==(l=t()??"")&&(c.nodes!==null&&(_i(c.nodes.start,c.nodes.end),c.nodes=null),l!=="")){var u=l+"";n?u=`<svg>${u}</svg>`:r&&(u=`<math>${u}</math>`);var o=$i(u);if((n||r)&&(o=hn(o)),Mr(hn(o),o.lastChild),n||r)for(;hn(o);)i.before(hn(o));else i.before(o)}})}function Ur(e,t,n,r,a){var i=t.$$slots?.[n],l=!1;i===!0&&(i=t[n==="default"?"children":n],l=!0),i===void 0||i(e,l?()=>r:r)}const dl=()=>performance.now(),tn={tick:e=>requestAnimationFrame(e),now:()=>dl(),tasks:new Set};function Ai(){const e=tn.now();tn.tasks.forEach(t=>{t.c(e)||(tn.tasks.delete(t),t.f())}),tn.tasks.size!==0&&tn.tick(Ai)}function fl(e){let t;return tn.tasks.size===0&&tn.tick(Ai),{promise:new Promise(n=>{tn.tasks.add(t={c:e,f:n})}),abort(){tn.tasks.delete(t)}}}function Dr(e,t){Un(()=>{e.dispatchEvent(new CustomEvent(t))})}function hl(e){if(e==="float")return"cssFloat";if(e==="offset")return"cssOffset";if(e.startsWith("--"))return e;const t=e.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(n=>n[0].toUpperCase()+n.slice(1)).join("")}function ya(e){const t={},n=e.split(";");for(const r of n){const[a,i]=r.split(":");if(!a||i===void 0)break;const l=hl(a.trim());t[l]=i.trim()}return t}const pl=e=>e;function Rt(e,t,n,r){var a=(e&yo)!==0,i=(e&ko)!==0,l=a&&i,c=(e&xo)!==0,u=l?"both":a?"in":"out",o,v=t.inert,f=t.style.overflow,d,p;function y(){return Un(()=>o??=n()(t,r?.()??{},{direction:u}))}var k={is_global:c,in(){if(t.inert=v,!a){p?.abort(),p?.reset?.();return}i||d?.abort(),Dr(t,"introstart"),d=Is(t,y(),p,1,()=>{Dr(t,"introend"),d?.abort(),d=o=void 0,t.style.overflow=f})},out(X){if(!i){X?.(),o=void 0;return}t.inert=!0,Dr(t,"outrostart"),p=Is(t,y(),d,0,()=>{Dr(t,"outroend"),X?.()})},stop:()=>{d?.abort(),p?.abort()}},_=De;if((_.nodes.t??=[]).push(k),a&&Ls){var E=c;if(!E){for(var C=_.parent;C&&(C.f&zn)!==0;)for(;(C=C.parent)&&(C.f&Qt)===0;);E=!C||(C.f&is)!==0}E&&Ht(()=>{x(()=>k.in())})}}function Is(e,t,n,r,a){var i=r===1;if(Zi(t)){var l,c=!1;return qn(()=>{if(!c){var _=t({direction:i?"in":"out"});l=Is(e,_,n,r,a)}}),{abort:()=>{c=!0,l?.abort()},deactivate:()=>l.deactivate(),reset:()=>l.reset(),t:()=>l.t()}}if(n?.deactivate(),!t?.duration)return a(),{abort:Et,deactivate:Et,reset:Et,t:()=>r};const{delay:u=0,css:o,tick:v,easing:f=pl}=t;var d=[];if(i&&n===void 0&&(v&&v(0,1),o)){var p=ya(o(0,1));d.push(p,p)}var y=()=>1-r,k=e.animate(d,{duration:u,fill:"forwards"});return k.onfinish=()=>{k.cancel();var _=n?.t()??1-r;n?.abort();var E=r-_,C=t.duration*Math.abs(E),X=[];if(C>0){var Z=!1;if(o)for(var ae=Math.ceil(C/16.666666666666668),ce=0;ce<=ae;ce+=1){var me=_+E*f(ce/ae),$=ya(o(me,1-me));X.push($),Z||=$.overflow==="hidden"}Z&&(e.style.overflow="hidden"),y=()=>{var D=k.currentTime;return _+E*f(D/C)},v&&fl(()=>{if(k.playState!=="running")return!1;var D=y();return v(D,1-D),!0})}k=e.animate(X,{duration:C,fill:"forwards"}),k.onfinish=()=>{y=()=>r,v?.(r,1-r),a()}},{abort:()=>{k&&(k.cancel(),k.effect=null,k.onfinish=Et)},deactivate:()=>{a=Et},reset:()=>{r===0&&v?.(1,0)},t:()=>y()}}function Ci(e,t,n){Ht(()=>{var r=x(()=>t(e,n?.())||{});if(n&&r?.update){var a=!1,i={};ur(()=>{var l=n();W(l),a&&Ks(i,l)&&(i=l,r.update(l))}),a=!0}if(r?.destroy)return()=>r.destroy()})}const ka=[...` 	
\r\fÂ \v\uFEFF`];function _l(e,t,n){var r=e==null?"":""+e;if(t&&(r=r?r+" "+t:t),n){for(var a in n)if(n[a])r=r?r+" "+a:a;else if(r.length)for(var i=a.length,l=0;(l=r.indexOf(a,l))>=0;){var c=l+i;(l===0||ka.includes(r[l-1]))&&(c===r.length||ka.includes(r[c]))?r=(l===0?"":r.substring(0,l))+r.substring(c+1):l=c}}return r===""?null:r}function xa(e,t=!1){var n=t?" !important;":";",r="";for(var a in e){var i=e[a];i!=null&&i!==""&&(r+=" "+a+": "+i+n)}return r}function gs(e){return e[0]!=="-"||e[1]!=="-"?e.toLowerCase():e}function gl(e,t){if(t){var n="",r,a;if(Array.isArray(t)?(r=t[0],a=t[1]):r=t,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var i=!1,l=0,c=!1,u=[];r&&u.push(...Object.keys(r).map(gs)),a&&u.push(...Object.keys(a).map(gs));var o=0,v=-1;const k=e.length;for(var f=0;f<k;f++){var d=e[f];if(c?d==="/"&&e[f-1]==="*"&&(c=!1):i?i===d&&(i=!1):d==="/"&&e[f+1]==="*"?c=!0:d==='"'||d==="'"?i=d:d==="("?l++:d===")"&&l--,!c&&i===!1&&l===0){if(d===":"&&v===-1)v=f;else if(d===";"||f===k-1){if(v!==-1){var p=gs(e.substring(o,v).trim());if(!u.includes(p)){d!==";"&&f++;var y=e.substring(o,f).trim();n+=" "+y+";"}}o=f+1,v=-1}}}}return r&&(n+=xa(r)),a&&(n+=xa(a,!0)),n=n.trim(),n===""?null:n}return e==null?null:String(e)}function Ne(e,t,n,r,a,i){var l=e.__className;if(l!==n||l===void 0){var c=_l(n,r,i);c==null?e.removeAttribute("class"):e.className=c,e.__className=n}else if(i&&a!==i)for(var u in i){var o=!!i[u];(a==null||o!==!!a[u])&&e.classList.toggle(u,o)}return i}function ms(e,t={},n,r){for(var a in n){var i=n[a];t[a]!==i&&(n[a]==null?e.style.removeProperty(a):e.style.setProperty(a,i,r))}}function Ze(e,t,n,r){var a=e.__style;if(a!==t){var i=gl(t,r);i==null?e.removeAttribute("style"):e.style.cssText=i,e.__style=t}else r&&(Array.isArray(r)?(ms(e,n?.[0],r[0]),ms(e,n?.[1],r[1],"important")):ms(e,n,r));return r}const ml=Symbol("is custom element"),bl=Symbol("is html");function wl(e,t){var n=Pi(e);n.value===(n.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!=="PROGRESS")||(e.value=t??"")}function gt(e,t,n,r){var a=Pi(e);a[t]!==(a[t]=n)&&(t==="loading"&&(e[no]=n),n==null?e.removeAttribute(t):typeof n!="string"&&yl(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function Pi(e){return e.__attributes??={[ml]:e.nodeName.includes("-"),[bl]:e.namespaceURI===So}}var Ea=new Map;function yl(e){var t=e.getAttribute("is")||e.nodeName,n=Ea.get(t);if(n)return n;Ea.set(t,n=[]);for(var r,a=e,i=Element.prototype;i!==a;){r=Wa(a);for(var l in r)r[l].set&&n.push(l);a=Ws(a)}return n}function ea(e,t,n=t){var r=new WeakSet;Wo(e,"input",async a=>{var i=a?e.defaultValue:e.value;if(i=bs(e)?ws(i):i,n(i),qe!==null&&r.add(qe),await Er(),i!==(i=t())){var l=e.selectionStart,c=e.selectionEnd,u=e.value.length;if(e.value=i??"",c!==null){var o=e.value.length;l===c&&c===u&&o>u?(e.selectionStart=o,e.selectionEnd=o):(e.selectionStart=l,e.selectionEnd=Math.min(c,o))}}}),x(t)==null&&e.value&&(n(bs(e)?ws(e.value):e.value),qe!==null&&r.add(qe)),ur(()=>{var a=t();if(e===document.activeElement){var i=qr??qe;if(r.has(i))return}bs(e)&&a===ws(e.value)||e.type==="date"&&!a&&!e.value||a!==e.value&&(e.value=a??"")})}function bs(e){var t=e.type;return t==="number"||t==="range"}function ws(e){return e===""?null:+e}class ta{#e=new WeakMap;#t;#n;static entries=new WeakMap;constructor(t){this.#n=t}observe(t,n){var r=this.#e.get(t)||new Set;return r.add(n),this.#e.set(t,r),this.#r().observe(t,this.#n),()=>{var a=this.#e.get(t);a.delete(n),a.size===0&&(this.#e.delete(t),this.#t.unobserve(t))}}#r(){return this.#t??(this.#t=new ResizeObserver(t=>{for(var n of t){ta.entries.set(n.target,n);for(var r of this.#e.get(n.target)||[])r(n)}}))}}var kl=new ta({box:"border-box"});function Ma(e,t,n){var r=kl.observe(e,()=>n(e[t]));Ht(()=>(x(()=>n(e[t])),r))}function Sa(e,t){return e===t||e?.[$n]===t}function Dn(e={},t,n,r){return Ht(()=>{var a,i;return ur(()=>{a=i,i=[],x(()=>{e!==n(...i)&&(t(e,...i),a&&Sa(n(...a),e)&&t(null,...a))})}),()=>{qn(()=>{i&&Sa(n(...i),e)&&t(null,...i)})}}),e}function Ta(e,t){Yo(window,["resize"],()=>Un(()=>t(window[e])))}function Ot(e){return function(...t){var n=t[0];return n.stopPropagation(),e?.apply(this,t)}}function bt(e=!1){const t=Ve,n=t.l.u;if(!n)return;let r=()=>W(t.s);if(e){let a=0,i={};const l=ls(()=>{let c=!1;const u=t.s;for(const o in u)u[o]!==i[o]&&(i[o]=u[o],c=!0);return c&&a++,a});r=()=>s(l)}n.b.length&&Qo(()=>{$a(t,r),Vr(n.b)}),Ps(()=>{const a=x(()=>n.m.map(Ji));return()=>{for(const i of a)typeof i=="function"&&i()}}),n.a.length&&Ps(()=>{$a(t,r),Vr(n.a)})}function $a(e,t){if(e.l.s)for(const n of e.l.s)s(n);t()}function Gr(e,t){var n=e.$$events?.[t.type],r=ns(n)?n.slice():n==null?[]:[n];for(var a of r)a.call(this,t)}function na(e,t,n){if(e==null)return t(void 0),n&&n(void 0),Et;const r=x(()=>e.subscribe(t,n));return r.unsubscribe?()=>r.unsubscribe():r}const Xn=[];function xl(e,t){return{subscribe:Le(e,t).subscribe}}function Le(e,t=Et){let n=null;const r=new Set;function a(c){if(Ks(e,c)&&(e=c,n)){const u=!Xn.length;for(const o of r)o[1](),Xn.push(o,e);if(u){for(let o=0;o<Xn.length;o+=2)Xn[o][0](Xn[o+1]);Xn.length=0}}}function i(c){a(c(e))}function l(c,u=Et){const o=[c,u];return r.add(o),r.size===1&&(n=t(a,i)||Et),c(e),()=>{r.delete(o),r.size===0&&n&&(n(),n=null)}}return{set:a,update:i,subscribe:l}}function Ri(e,t,n){const r=!Array.isArray(e),a=r?[e]:e;if(!a.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const i=t.length<2;return xl(n,(l,c)=>{let u=!1;const o=[];let v=0,f=Et;const d=()=>{if(v)return;f();const y=t(r?o[0]:o,l,c);i?l(y):f=typeof y=="function"?y:Et},p=a.map((y,k)=>na(y,_=>{o[k]=_,v&=~(1<<k),u&&d()},()=>{v|=1<<k}));return u=!0,d(),function(){Vr(p),f(),u=!1}})}function Re(e){let t;return na(e,n=>t=n)(),t}let Fr=!1,Os=Symbol();function ge(e,t,n){const r=n[t]??={store:null,source:A(void 0),unsubscribe:Et};if(r.store!==e&&!(Os in n))if(r.unsubscribe(),r.store=e??null,e==null)r.source.v=void 0,r.unsubscribe=Et;else{var a=!0;r.unsubscribe=na(e,i=>{a?r.source.v=i:g(r.source,i)}),a=!1}return e&&Os in n?Re(e):s(r.source)}function Lt(){const e={};function t(){cs(()=>{for(var n in e)e[n].unsubscribe();Ya(e,Os,{enumerable:!1,value:!0})})}return[e,t]}function El(e){var t=Fr;try{return Fr=!1,[e(),Fr]}finally{Fr=t}}function st(e,t,n,r){var a=!cr||(n&mo)!==0,i=(n&wo)!==0,l=r,c=!0,u=()=>(c&&(c=!1,l=r),l),o;{var v=$n in e||to in e;o=tr(e,t)?.set??(v&&t in e?C=>e[t]=C:void 0)}var f,d=!1;[f,d]=El(()=>e[t]),f===void 0&&r!==void 0&&(f=u(),o&&(a&&lo(),o(f)));var p;if(a?p=()=>{var C=e[t];return C===void 0?u():(c=!0,C)}:p=()=>{var C=e[t];return C!==void 0&&(l=void 0),C===void 0?l:C},a&&(n&bo)===0)return p;if(o){var y=e.$$legacy;return(function(C,X){return arguments.length>0?((!a||!X||y||d)&&o(X?p():C),C):p()})}var k=!1,_=et(()=>(k=!1,p()));s(_);var E=De;return(function(C,X){if(arguments.length>0){const Z=X?s(_):a&&i?Jn(C):C;return g(_,Z),k=!0,l!==void 0&&(l=Z),C}return Hn&&k||(E.f&an)!==0?_.v:s(_)})}function dr(e){Ve===null&&Xs(),cr&&Ve.l!==null?Tl(Ve).m.push(e):Ps(()=>{const t=x(e);if(typeof t=="function")return t})}function Ml(e){Ve===null&&Xs(),dr(()=>()=>x(e))}function Sl(e,t,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:r})}function ra(){const e=Ve;return e===null&&Xs(),(t,n,r)=>{const a=e.s.$$events?.[t];if(a){const i=ns(a)?a.slice():[a],l=Sl(t,n,r);for(const c of i)c.call(e.x,l);return!l.defaultPrevented}return!0}}function Tl(e){var t=e.l;return t.u??={a:[],b:[],m:[]}}const $l="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add($l);Ao();const Al=e=>e;function Li(e){const t=e-1;return t*t*t+1}function Aa(e){const t=typeof e=="string"&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[e,"px"]}function wn(e,{delay:t=0,duration:n=400,easing:r=Al}={}){const a=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:r,css:i=>`opacity: ${i*a}`}}function zi(e,{delay:t=0,duration:n=400,easing:r=Li,x:a=0,y:i=0,opacity:l=0}={}){const c=getComputedStyle(e),u=+c.opacity,o=c.transform==="none"?"":c.transform,v=u*(1-l),[f,d]=Aa(a),[p,y]=Aa(i);return{delay:t,duration:n,easing:r,css:(k,_)=>`
			transform: ${o} translate(${(1-k)*f}${d}, ${(1-k)*p}${y});
			opacity: ${u-v*_}`}}function Ii(e,{delay:t=0,duration:n=400,easing:r=Li,start:a=0,opacity:i=0}={}){const l=getComputedStyle(e),c=+l.opacity,u=l.transform==="none"?"":l.transform,o=1-a,v=c*(1-i);return{delay:t,duration:n,easing:r,css:(f,d)=>`
			transform: ${u} scale(${1-o*d});
			opacity: ${c-v*d}
		`}}const Cl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-arrows-shuffle-2"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 4l3 3l-3 3" /><path d="M18 20l3 -3l-3 -3" /><path d="M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5" /><path d="M3 17h3a5 5 0 0 0 5 -5a5 5 0 0 1 5 -5h5" /></svg>',Pl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-deezer"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 16.5h2v.5h-2z" /><path d="M8 16.5h2.5v.5h-2.5z" /><path d="M16 17h-2.5v-.5h2.5z" /><path d="M21.5 17h-2.5v-.5h2.5z" /><path d="M21.5 13h-2.5v.5h2.5z" /><path d="M21.5 9.5h-2.5v.5h2.5z" /><path d="M21.5 6h-2.5v.5h2.5z" /><path d="M16 13h-2.5v.5h2.5z" /><path d="M8 13.5h2.5v-.5h-2.5z" /><path d="M8 9.5h2.5v.5h-2.5z" /></svg>',Rl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-compact-down"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 11l8 3l8 -3" /></svg>',Ll='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-compact-left"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M13 20l-3 -8l3 -8" /></svg>',zl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-left"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 6l-6 6l6 6" /></svg>',Ca='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-disc"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0" /><path d="M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M7 12a5 5 0 0 1 5 -5" /><path d="M12 17a5 5 0 0 0 5 -5" /></svg>',Il='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-grip-horizontal"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M5 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M12 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M12 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M19 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M19 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /></svg>',Ol='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-heart"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M19.5 12.572l-7.5 7.428l-7.5 -7.428a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572" /></svg>',Nl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-heart"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6.979 3.074a6 6 0 0 1 4.988 1.425l.037 .033l.034 -.03a6 6 0 0 1 4.733 -1.44l.246 .036a6 6 0 0 1 3.364 10.008l-.18 .185l-.048 .041l-7.45 7.379a1 1 0 0 1 -1.313 .082l-.094 -.082l-7.493 -7.422a6 6 0 0 1 3.176 -10.215z" /></svg>',Dl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-menu-2"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 6l16 0" /><path d="M4 12l16 0" /><path d="M4 18l16 0" /></svg>',ys='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-music"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 17a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /><path d="M13 17a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /><path d="M9 17v-13h10v13" /><path d="M9 8h10" /></svg>',Fl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-pause"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z" /><path d="M17 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z" /></svg>',Bl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-player-play"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 4v16l13 -8z" /></svg>',jl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-play"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 4v16a1 1 0 0 0 1.524 .852l13 -8a1 1 0 0 0 0 -1.704l-13 -8a1 1 0 0 0 -1.524 .852z" /></svg>',ql='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-skip-back"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M19.496 4.136l-12 7a1 1 0 0 0 0 1.728l12 7a1 1 0 0 0 1.504 -.864v-14a1 1 0 0 0 -1.504 -.864z" /><path d="M4 4a1 1 0 0 1 .993 .883l.007 .117v14a1 1 0 0 1 -1.993 .117l-.007 -.117v-14a1 1 0 0 1 1 -1z" /></svg>',Ul='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-player-skip-forward"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 5v14a1 1 0 0 0 1.504 .864l12 -7a1 1 0 0 0 0 -1.728l-12 -7a1 1 0 0 0 -1.504 .864z" /><path d="M20 4a1 1 0 0 1 .993 .883l.007 .117v14a1 1 0 0 1 -1.993 .117l-.007 -.117v-14a1 1 0 0 1 1 -1z" /></svg>',Hl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-playlist"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0" /><path d="M17 17v-13h4" /><path d="M13 5h-10" /><path d="M3 9l10 0" /><path d="M9 13h-6" /></svg>',Yl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-radio"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3l-9.371 3.749a1 1 0 0 0 -.629 .928v11.323a1 1 0 0 0 1 1h14a1 1 0 0 0 1 -1v-11a1 1 0 0 0 -1 -1h-14.5" /><path d="M4 12h16" /><path d="M7 12v-2" /><path d="M17 16v.01" /><path d="M13 16v.01" /></svg>',Wl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-refresh"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4" /><path d="M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4" /></svg>',Vl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-repeat"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 12v-3a3 3 0 0 1 3 -3h13m-3 -3l3 3l-3 3" /><path d="M20 12v3a3 3 0 0 1 -3 3h-13m3 3l-3 -3l3 -3" /></svg>',Ql='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-search"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0" /><path d="M21 21l-6 -6" /></svg>',Xl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-settings"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z" /><path d="M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /></svg>',Kl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-trash"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 7l16 0" /><path d="M10 11l0 6" /><path d="M14 11l0 6" /><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12" /><path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3" /></svg>',Gl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 8a5 5 0 0 1 0 8" /><path d="M17.7 5a9 9 0 0 1 0 14" /><path d="M6 15h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l3.5 -4.5a.8 .8 0 0 1 1.5 .5v14a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5" /></svg>',Zl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume-2"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 8a5 5 0 0 1 0 8" /><path d="M6 15h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l3.5 -4.5a.8 .8 0 0 1 1.5 .5v14a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5" /></svg>',Jl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume-3"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 15h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l3.5 -4.5a.8 .8 0 0 1 1.5 .5v14a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5" /><path d="M16 10l4 4m0 -4l-4 4" /></svg>',ec='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-volume-off"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 8a5 5 0 0 1 1.912 4.934m-1.377 2.602a5 5 0 0 1 -.535 .464" /><path d="M17.7 5a9 9 0 0 1 2.362 11.086m-1.676 2.299a9 9 0 0 1 -.686 .615" /><path d="M9.069 5.054l.431 -.554a.8 .8 0 0 1 1.5 .5v2m0 4v8a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l1.294 -1.664" /><path d="M3 3l18 18" /></svg>',tc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-x"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 6l-12 12" /><path d="M6 6l12 12" /></svg>',nc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-device-floppy"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2" /><path d="M12 14m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0" /><path d="M14 4l0 4l-6 0l0 -4" /></svg>',rc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-file-pencil"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3v4a1 1 0 0 0 1 1h4" /><path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z" /><path d="M10 18l5 -5a1.414 1.414 0 0 0 -2 -2l-5 5v2h2z" /></svg>',Pa='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-plus"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 5l0 14" /><path d="M5 12l14 0" /></svg>',sc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-circle-check"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0" /><path d="M9 12l2 2l4 -4" /></svg>',ac='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-dots"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /></svg>',ic='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-sort-descending"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 6l9 0" /><path d="M4 12l7 0" /><path d="M4 18l7 0" /><path d="M15 15l3 3l3 -3" /><path d="M18 6l0 12" /></svg>',oc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-sort-ascending"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 6l7 0" /><path d="M4 12l7 0" /><path d="M4 18l9 0" /><path d="M15 9l3 -3l3 3" /><path d="M18 6l0 12" /></svg>',w={ARTISTS:ys,ALBUMS:Ca,GENRES:ys,PLAYLISTS:Hl,RADIO:Yl,SEARCH:Ql,PLAY:jl,PLAY_OUTLINE:Bl,PAUSE:Fl,PREVIOUS:ql,NEXT:Ul,SHUFFLE:Cl,REPEAT:Vl,VOLUME_FULL:Gl,VOLUME_MEDIUM:Zl,VOLUME_MUTE:Jl,VOLUME_OFF:ec,HEART:Ol,HEART_FILLED:Nl,SYNC:Wl,SETTINGS:Xl,CLOSE:tc,MENU:Dl,BACK:zl,BACK_COMPACT:Ll,CHEVRON_DOWN:Rl,DRAG_HANDLE:Il,REMOVE:Kl,DEEZER:Pl,SAVE:nc,EDIT:rc,ADD:Pa,ACCEPT:sc,DOTS:ac,ADD_TO_PLAYLIST:Pa,ALBUM_LINK:Ca,ARTIST_LINK:ys,SORT_DESC:ic,SORT_ASC:oc},Sr={DEFAULT_IP:typeof window<"u"?window.location.hostname:"localhost",get MOODE_IP(){try{return typeof localStorage<"u"?localStorage.getItem("moode_ip")||this.DEFAULT_IP:this.DEFAULT_IP}catch{return this.DEFAULT_IP}}};function ir(e){if(!e||!e.image)return null;if(e.image.startsWith("http"))return e.image;let t="";return e.image==="local"?t=`${e.name}.jpg`:t=e.image,`/imagesw/radio-logos/thumbs/${encodeURIComponent(t)}`}function Ra(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}function lc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ks={exports:{}},xs={exports:{}},La;function cc(){return La||(La=1,(function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t={rotl:function(n,r){return n<<r|n>>>32-r},rotr:function(n,r){return n<<32-r|n>>>r},endian:function(n){if(n.constructor==Number)return t.rotl(n,8)&16711935|t.rotl(n,24)&4278255360;for(var r=0;r<n.length;r++)n[r]=t.endian(n[r]);return n},randomBytes:function(n){for(var r=[];n>0;n--)r.push(Math.floor(Math.random()*256));return r},bytesToWords:function(n){for(var r=[],a=0,i=0;a<n.length;a++,i+=8)r[i>>>5]|=n[a]<<24-i%32;return r},wordsToBytes:function(n){for(var r=[],a=0;a<n.length*32;a+=8)r.push(n[a>>>5]>>>24-a%32&255);return r},bytesToHex:function(n){for(var r=[],a=0;a<n.length;a++)r.push((n[a]>>>4).toString(16)),r.push((n[a]&15).toString(16));return r.join("")},hexToBytes:function(n){for(var r=[],a=0;a<n.length;a+=2)r.push(parseInt(n.substr(a,2),16));return r},bytesToBase64:function(n){for(var r=[],a=0;a<n.length;a+=3)for(var i=n[a]<<16|n[a+1]<<8|n[a+2],l=0;l<4;l++)a*8+l*6<=n.length*8?r.push(e.charAt(i>>>6*(3-l)&63)):r.push("=");return r.join("")},base64ToBytes:function(n){n=n.replace(/[^A-Z0-9+\/]/ig,"");for(var r=[],a=0,i=0;a<n.length;i=++a%4)i!=0&&r.push((e.indexOf(n.charAt(a-1))&Math.pow(2,-2*i+8)-1)<<i*2|e.indexOf(n.charAt(a))>>>6-i*2);return r}};xs.exports=t})()),xs.exports}var Es,za;function Ia(){if(za)return Es;za=1;var e={utf8:{stringToBytes:function(t){return e.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(e.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var n=[],r=0;r<t.length;r++)n.push(t.charCodeAt(r)&255);return n},bytesToString:function(t){for(var n=[],r=0;r<t.length;r++)n.push(String.fromCharCode(t[r]));return n.join("")}}};return Es=e,Es}var Ms,Oa;function uc(){if(Oa)return Ms;Oa=1,Ms=function(n){return n!=null&&(e(n)||t(n)||!!n._isBuffer)};function e(n){return!!n.constructor&&typeof n.constructor.isBuffer=="function"&&n.constructor.isBuffer(n)}function t(n){return typeof n.readFloatLE=="function"&&typeof n.slice=="function"&&e(n.slice(0,0))}return Ms}var Na;function vc(){return Na||(Na=1,(function(){var e=cc(),t=Ia().utf8,n=uc(),r=Ia().bin,a=function(i,l){i.constructor==String?l&&l.encoding==="binary"?i=r.stringToBytes(i):i=t.stringToBytes(i):n(i)?i=Array.prototype.slice.call(i,0):!Array.isArray(i)&&i.constructor!==Uint8Array&&(i=i.toString());for(var c=e.bytesToWords(i),u=i.length*8,o=1732584193,v=-271733879,f=-1732584194,d=271733878,p=0;p<c.length;p++)c[p]=(c[p]<<8|c[p]>>>24)&16711935|(c[p]<<24|c[p]>>>8)&4278255360;c[u>>>5]|=128<<u%32,c[(u+64>>>9<<4)+14]=u;for(var y=a._ff,k=a._gg,_=a._hh,E=a._ii,p=0;p<c.length;p+=16){var C=o,X=v,Z=f,ae=d;o=y(o,v,f,d,c[p+0],7,-680876936),d=y(d,o,v,f,c[p+1],12,-389564586),f=y(f,d,o,v,c[p+2],17,606105819),v=y(v,f,d,o,c[p+3],22,-1044525330),o=y(o,v,f,d,c[p+4],7,-176418897),d=y(d,o,v,f,c[p+5],12,1200080426),f=y(f,d,o,v,c[p+6],17,-1473231341),v=y(v,f,d,o,c[p+7],22,-45705983),o=y(o,v,f,d,c[p+8],7,1770035416),d=y(d,o,v,f,c[p+9],12,-1958414417),f=y(f,d,o,v,c[p+10],17,-42063),v=y(v,f,d,o,c[p+11],22,-1990404162),o=y(o,v,f,d,c[p+12],7,1804603682),d=y(d,o,v,f,c[p+13],12,-40341101),f=y(f,d,o,v,c[p+14],17,-1502002290),v=y(v,f,d,o,c[p+15],22,1236535329),o=k(o,v,f,d,c[p+1],5,-165796510),d=k(d,o,v,f,c[p+6],9,-1069501632),f=k(f,d,o,v,c[p+11],14,643717713),v=k(v,f,d,o,c[p+0],20,-373897302),o=k(o,v,f,d,c[p+5],5,-701558691),d=k(d,o,v,f,c[p+10],9,38016083),f=k(f,d,o,v,c[p+15],14,-660478335),v=k(v,f,d,o,c[p+4],20,-405537848),o=k(o,v,f,d,c[p+9],5,568446438),d=k(d,o,v,f,c[p+14],9,-1019803690),f=k(f,d,o,v,c[p+3],14,-187363961),v=k(v,f,d,o,c[p+8],20,1163531501),o=k(o,v,f,d,c[p+13],5,-1444681467),d=k(d,o,v,f,c[p+2],9,-51403784),f=k(f,d,o,v,c[p+7],14,1735328473),v=k(v,f,d,o,c[p+12],20,-1926607734),o=_(o,v,f,d,c[p+5],4,-378558),d=_(d,o,v,f,c[p+8],11,-2022574463),f=_(f,d,o,v,c[p+11],16,1839030562),v=_(v,f,d,o,c[p+14],23,-35309556),o=_(o,v,f,d,c[p+1],4,-1530992060),d=_(d,o,v,f,c[p+4],11,1272893353),f=_(f,d,o,v,c[p+7],16,-155497632),v=_(v,f,d,o,c[p+10],23,-1094730640),o=_(o,v,f,d,c[p+13],4,681279174),d=_(d,o,v,f,c[p+0],11,-358537222),f=_(f,d,o,v,c[p+3],16,-722521979),v=_(v,f,d,o,c[p+6],23,76029189),o=_(o,v,f,d,c[p+9],4,-640364487),d=_(d,o,v,f,c[p+12],11,-421815835),f=_(f,d,o,v,c[p+15],16,530742520),v=_(v,f,d,o,c[p+2],23,-995338651),o=E(o,v,f,d,c[p+0],6,-198630844),d=E(d,o,v,f,c[p+7],10,1126891415),f=E(f,d,o,v,c[p+14],15,-1416354905),v=E(v,f,d,o,c[p+5],21,-57434055),o=E(o,v,f,d,c[p+12],6,1700485571),d=E(d,o,v,f,c[p+3],10,-1894986606),f=E(f,d,o,v,c[p+10],15,-1051523),v=E(v,f,d,o,c[p+1],21,-2054922799),o=E(o,v,f,d,c[p+8],6,1873313359),d=E(d,o,v,f,c[p+15],10,-30611744),f=E(f,d,o,v,c[p+6],15,-1560198380),v=E(v,f,d,o,c[p+13],21,1309151649),o=E(o,v,f,d,c[p+4],6,-145523070),d=E(d,o,v,f,c[p+11],10,-1120210379),f=E(f,d,o,v,c[p+2],15,718787259),v=E(v,f,d,o,c[p+9],21,-343485551),o=o+C>>>0,v=v+X>>>0,f=f+Z>>>0,d=d+ae>>>0}return e.endian([o,v,f,d])};a._ff=function(i,l,c,u,o,v,f){var d=i+(l&c|~l&u)+(o>>>0)+f;return(d<<v|d>>>32-v)+l},a._gg=function(i,l,c,u,o,v,f){var d=i+(l&u|c&~u)+(o>>>0)+f;return(d<<v|d>>>32-v)+l},a._hh=function(i,l,c,u,o,v,f){var d=i+(l^c^u)+(o>>>0)+f;return(d<<v|d>>>32-v)+l},a._ii=function(i,l,c,u,o,v,f){var d=i+(c^(l|~u))+(o>>>0)+f;return(d<<v|d>>>32-v)+l},a._blocksize=16,a._digestsize=16,ks.exports=function(i,l){if(i==null)throw new Error("Illegal argument "+i);var c=e.wordsToBytes(a(i,l));return l&&l.asBytes?c:l&&l.asString?r.bytesToString(c):e.bytesToHex(c)}})()),ks.exports}var dc=vc();const fc=lc(dc),Da=Le("Disconnected"),Ns=Le(null);let Ss;function Oe(e,t="info"){Ns.set({text:e,type:t}),Ss&&clearTimeout(Ss),Ss=setTimeout(()=>{Ns.set(null)},3e3)}const ct=Le({state:"stop",volume:50,elapsed:0,duration:0,random:!1,repeat:!1,bitrate:0,format:""}),Vt=Le({title:"Not Playing",artist:"",album:"",file:"",stationName:null}),Zr=Le(!1),Hr=Le(!1),Ds=Le(!1),Fs=Le(!1),xt=Le("library"),Lr=Le(null),It=Le(!1),hc=localStorage.getItem("sidebarCollapsed")==="true",Bs=Le(hc);Bs.subscribe(e=>{typeof localStorage<"u"&&localStorage.setItem("sidebarCollapsed",String(e))});const kn=Le([]),sa=Le([]),er=Le([]),pn=Le(new Set),Je=Le(!1),At=Le([{view:"root"}]),Tr=Le([]),Oi=Le(0),Jr=Le(""),Ni=Le({});function pc(e,t){Ni.update(n=>({...n,[e]:t}))}function _c(e){return Re(Ni)[e]||0}const aa=Le({isOpen:!1,track:null,context:{type:"general",playlistName:null,index:null},x:0,y:0,triggerRect:null});function gc(){if(typeof navigator<"u"&&navigator.vibrate)try{navigator.vibrate(70)}catch{}}function es(e,t,n={}){if(!t)return;gc();let r=0,a=0,i=null,l=e.currentTarget;!l&&e.target&&e.target.closest&&(l=e.target.closest("button")||e.target),l&&l.getBoundingClientRect&&(i=l.getBoundingClientRect());const c=e.detail?.originalEvent||e;c.touches&&c.touches.length>0?(r=c.touches[0].clientX,a=c.touches[0].clientY):c.clientX&&(r=c.clientX,a=c.clientY);const u={type:"general",playlistName:null,index:null,...n};aa.set({isOpen:!0,track:t,context:u,x:r,y:a,triggerRect:i})}function Jt(){aa.set({isOpen:!1,track:null,context:{},x:0,y:0,triggerRect:null})}let js=null,qs=null;function mc(e){qs=e}function bn(e,t=null){t&&(js=t),qs?qs(e,t):console.warn("Router callback not set!")}function bc(){const e=js;return js=null,e}function wc(){window.history.back()}function or(e,t=[],n=null){if(!e||!e.file)return"/images/default_cover.png";if(Di(e.file)||e.genre==="Radio")return e.image?ir(e):Fi(e,t,n)||"/images/radio_placeholder.png";let r=e.file.startsWith("/")?e.file.slice(1):e.file;return`/coverart.php/${encodeURI(r)}`}function $r(e,t="sm",n=[],r=null){if(!e||e.file&&(Di(e.file)||e.genre==="Radio"||Array.isArray(e)))return e&&e.image?ir(e):Fi(e,n,r)||"/images/radio_icon.png";if(!e.file)return"/images/default_icon.png";if(e.thumbHash){const a=t==="md"?"":"_sm";return`/imagesw/thmcache/${e.thumbHash}${a}.jpg`}try{const a=e.file.lastIndexOf("/"),i=a===-1?".":e.file.substring(0,a);return`/imagesw/thmcache/${fc(i)}${t==="md"?"":"_sm"}.jpg`}catch{let i=e.file.startsWith("/")?e.file.slice(1):e.file;return`/coverart.php/${encodeURI(i)}`}}function Di(e){return e?e.startsWith("http")||e.includes("://")||e.includes("RADIO"):!1}function Fi(e,t,n){const r=u=>(u||"").toString().toLowerCase().replace(/[^a-z0-9]/g,""),a=r(e?.title),i=r(e?.stationName),l=r(n);if(t&&t.length>0){const u=t.find(o=>{const v=r(o.name);return v?v===i||v===l||a&&v===a||a&&a.includes(v)&&v.length>3:!1});if(u)return ir(u)}const c=e?.stationName||n;return c?ir({name:c,image:"local"}):null}Ri([Vt,kn,Lr],([e,t,n])=>or(e,t,n));Ri(Vt,e=>!e||!e.file||e.file.startsWith("http")?null:`/coverart.php/${encodeURI(e.file)}`);const We={NAME:"MoodePlayerDB",STORE_NAME:"music",VERSION:2},yc={SYNC:"/wave-api.php",STATIONS:e=>"/wave-api.php?action=stations",COVER_ART:e=>`/coverart.php?u=${encodeURIComponent(e)}`,RADIO_LOGOS:e=>`/imagesw/radio-logos/thumbs/${e}`},_n={open(){return new Promise((e,t)=>{const n=indexedDB.open(We.NAME,We.VERSION);n.onupgradeneeded=r=>{const a=r.target.result,i=r.target.transaction;let l;a.objectStoreNames.contains(We.STORE_NAME)?l=i.objectStore(We.STORE_NAME):l=a.createObjectStore(We.STORE_NAME,{keyPath:"file"}),l.indexNames.contains("artist")||l.createIndex("artist","artist",{unique:!1}),l.indexNames.contains("album")||l.createIndex("album","album",{unique:!1}),l.indexNames.contains("genre")||l.createIndex("genre","genre",{unique:!1}),l.indexNames.contains("album_artist")||l.createIndex("album_artist","album_artist",{unique:!1})},n.onsuccess=()=>e(n.result),n.onerror=()=>t(n.error)})},async clear(){const e=await this.open();return new Promise((t,n)=>{const r=e.transaction(We.STORE_NAME,"readwrite");r.objectStore(We.STORE_NAME).clear(),r.oncomplete=()=>t(),r.onerror=()=>n(r.error)})},async bulkAdd(e){const t=await this.open();return new Promise((n,r)=>{const a=t.transaction(We.STORE_NAME,"readwrite"),i=a.objectStore(We.STORE_NAME);e.forEach(l=>i.put(l)),a.oncomplete=()=>n(),a.onerror=()=>r(a.error)})},async getFilesMap(e){if(!e||e.length===0)return new Map;const t=await this.open();return new Promise(n=>{const a=t.transaction(We.STORE_NAME,"readonly").objectStore(We.STORE_NAME),i=new Map;let l=0;e.forEach(c=>{const u=a.get(c);u.onsuccess=o=>{const v=o.target.result;v&&i.set(c,v),l++,l===e.length&&n(i)},u.onerror=()=>{l++,l===e.length&&n(i)}})})},async getArtists(){const e=await this.open();return new Promise((t,n)=>{const a=e.transaction(We.STORE_NAME,"readonly").objectStore(We.STORE_NAME),i=new Map,l=a.openCursor();l.onsuccess=c=>{const u=c.target.result;if(u){const o=u.value,v=o.album_artist||o.artist;v&&!i.has(v)&&i.set(v,{name:v,file:o.file,thumbHash:o.thumbHash}),u.continue()}else{const o=Array.from(i.values()).sort((v,f)=>v.name.localeCompare(f.name,void 0,{sensitivity:"base"}));t(o)}},l.onerror=()=>n(l.error)})},async getAlbums(){const e=await this.open();return new Promise((t,n)=>{const a=e.transaction(We.STORE_NAME,"readonly").objectStore(We.STORE_NAME).index("album"),i=[],l=a.openCursor(null,"nextunique");l.onsuccess=c=>{const u=c.target.result;if(u){const o=u.value;i.push({name:o.album,artist:o.album_artist||o.artist,file:o.file,thumbHash:o.thumbHash,qualityBadge:o.qualityBadge,year:o.year||0}),u.continue()}else t(i)},l.onerror=()=>n(l.error)})},async getArtistAlbums(e){if(!e)return[];const t=await this.open();return new Promise((n,r)=>{const i=t.transaction(We.STORE_NAME,"readonly").objectStore(We.STORE_NAME),l=new Promise(u=>{i.indexNames.contains("album_artist")?i.index("album_artist").getAll(IDBKeyRange.only(e)).onsuccess=o=>u(o.target.result):u([])}),c=new Promise(u=>{i.index("artist").getAll(IDBKeyRange.only(e)).onsuccess=o=>u(o.target.result)});Promise.all([l,c]).then(([u,o])=>{const v=[...u,...o],f=[],d=new Set;v.forEach(p=>{d.has(p.album)||(d.add(p.album),f.push({name:p.album,artist:p.album_artist||p.artist,file:p.file,thumbHash:p.thumbHash,qualityBadge:p.qualityBadge,year:p.year||0}))}),n(f)}).catch(u=>r(u))})},async getAlbumTracks(e){const t=await this.open();return new Promise((n,r)=>{const i=t.transaction(We.STORE_NAME,"readonly").objectStore(We.STORE_NAME).index("album"),l=IDBKeyRange.only(e),c=i.getAll(l);c.onsuccess=()=>{const u=c.result;u.sort((o,v)=>{const f=parseInt(o.disc||1),d=parseInt(v.disc||1);if(f!==d)return f-d;const p=parseInt(o.track||0),y=parseInt(v.track||0);return p-y}),n(u)},c.onerror=()=>r(c.error)})},async getGenres(){const e=await this.open();return new Promise((t,n)=>{const a=e.transaction(We.STORE_NAME,"readonly").objectStore(We.STORE_NAME).index("genre"),i=[],l=a.openKeyCursor(null,"nextunique");l.onsuccess=c=>{const u=c.target.result;u?(i.push(u.key),u.continue()):t(i)},l.onerror=()=>n(l.error)})},async getGenreTracks(e){const t=await this.open();return new Promise((n,r)=>{const l=t.transaction(We.STORE_NAME,"readonly").objectStore(We.STORE_NAME).index("genre").getAll(IDBKeyRange.only(e));l.onsuccess=()=>n(l.result),l.onerror=()=>r(l.error)})},async search(e){if(!e)return[];const t=e.toLowerCase(),n=await this.open();return new Promise((r,a)=>{const l=n.transaction(We.STORE_NAME,"readonly").objectStore(We.STORE_NAME),c=[],u=100,o=l.openCursor();o.onsuccess=v=>{const f=v.target.result;if(f){const d=f.value;if((d.title&&d.title.toLowerCase().includes(t)||d.artist&&d.artist.toLowerCase().includes(t)||d.album&&d.album.toLowerCase().includes(t)||d.album_artist&&d.album_artist.toLowerCase().includes(t))&&c.push(d),c.length>=u){r(c);return}f.continue()}else r(c)},o.onerror=()=>a(o.error)})}};var kc=M('<div class="skeleton svelte-tl058d"></div>');function yn(e,t){let n=st(t,"width",8,"100%"),r=st(t,"height",8,"20px"),a=st(t,"radius",8,"4px"),i=st(t,"style",8,"");var l=kc();de(()=>Ze(l,`width: ${n()??""}; height: ${r()??""}; border-radius: ${a()??""}; ${i()??""}`)),m(e,l)}var xc=M('<div class="skel svelte-1b8que2"><!></div>'),Ec=M('<img loading="lazy"/>'),Mc=M('<div class="loader svelte-1b8que2"><!> <!> <!></div>');function Fn(e,t){dt(t,!1);let n=st(t,"src",8),r=st(t,"alt",8,""),a=st(t,"radius",8,"0px");const i=ra();let l=A("loading");function c(){g(l,"loaded")}function u(_){i("error",_),g(l,"error")}ie(()=>W(n()),()=>{n()?g(l,"loading"):g(l,"error")}),Bt(),bt();var o=Mc(),v=h(o);{var f=_=>{var E=xc(),C=h(E);yn(C,{width:"100%",height:"100%",get radius(){return a()}}),Rt(2,E,()=>wn,()=>({duration:200})),m(_,E)};U(v,_=>{s(l)==="loading"&&_(f)})}var d=b(v,2);{var p=_=>{var E=Ec();let C;de(()=>{gt(E,"src",n()),gt(E,"alt",r()),Ze(E,`border-radius: ${a()??""}`),C=Ne(E,1,"svelte-1b8que2",null,C,{vis:s(l)==="loaded"})}),z("load",E,c),z("error",E,u),m(_,E)};U(d,_=>{n()&&s(l)!=="error"&&_(p)})}var y=b(d,2);{var k=_=>{var E=Xe(),C=Se(E);Ur(C,t,"fallback",{}),m(_,E)};U(y,_=>{s(l)==="error"&&_(k)})}de(()=>Ze(o,`border-radius: ${a()??""}`)),m(e,o),ft()}class Sc{constructor(){this.socket=null,this.queue=[],this.isProcessing=!1,this.reconnectTimer=null,this.watchdogTimer=null}get isConnected(){return this.socket&&this.socket.readyState===WebSocket.OPEN}connect(){if(this.socket&&(this.socket.readyState===WebSocket.CONNECTING||this.socket.readyState===WebSocket.OPEN))return;this.reconnectTimer&&clearTimeout(this.reconnectTimer);let t=Sr.MOODE_IP||window.location.hostname;t=t.replace(/^https?:\/\//,"").split(":")[0].split("/")[0];const n=Sr.WS_PORT||"8080",r=`ws://${t}:${n}`;console.log("[MPD] Attempting connection to:",r);try{this.socket=new WebSocket(r,["binary"])}catch(a){console.error("[MPD] WebSocket URL is still invalid:",r,a),this.reconnectTimer=setTimeout(()=>this.connect(),5e3);return}this.socket.onopen=()=>{console.log("[MPD] Connected"),Da.set("Connected"),Oe("Connected to Moode","success"),this._processQueue()},this.socket.onmessage=a=>this._handleMessage(a),this.socket.onclose=a=>{console.warn("[MPD] Socket closed",a.code,a.reason),Da.set("Disconnected"),this._cleanup(),this.reconnectTimer=setTimeout(()=>this.connect(),3e3)},this.socket.onerror=a=>{console.error("[MPD] Socket error",a)}}send(t){return new Promise((n,r)=>{this.queue.push({cmd:t,resolve:n,reject:r}),this._processQueue()})}_cleanup(){for(this.isProcessing=!1,this.watchdogTimer&&clearTimeout(this.watchdogTimer);this.queue.length>0;){const{reject:t,cmd:n}=this.queue.shift();console.warn(`[MPD] Dropping cmd due to disconnect: ${n}`),t(new Error("Connection lost"))}}async _processQueue(){if(this.isProcessing||this.queue.length===0||!this.isConnected)return;this.isProcessing=!0;const{cmd:t}=this.queue[0];this.watchdogTimer&&clearTimeout(this.watchdogTimer),this.watchdogTimer=setTimeout(()=>{console.error("[MPD] Watchdog timeout for cmd:",t),this.socket&&this.socket.close()},5e3);try{const n=t.endsWith(`
`)?t:t+`
`;this.socket.send(new TextEncoder().encode(n))}catch(n){console.error("[MPD] Send error",n),this._cleanup()}}async _handleMessage(t){let n=t.data;n instanceof Blob&&(n=await n.text()),this.watchdogTimer&&(clearTimeout(this.watchdogTimer),this.watchdogTimer=null);const r=this.queue[0],a=n===`OK
`||n.endsWith(`
OK
`),i=n.startsWith("ACK");if(a||i){if(this.queue.shift(),this.isProcessing=!1,r)if(i)console.error(`[MPD] CMD: ${r.cmd} -> ERROR: ${n.trim()}`),r.reject(new Error(n.trim()));else{const l=n.replace(/\nOK\n$/,"").replace(/^OK\n$/,"");r.resolve(l)}this._processQueue()}else if(this._buffer||(this._buffer=""),this._buffer+=n,this._buffer.endsWith(`
OK
`)||this._buffer===`OK
`||this._buffer.startsWith("ACK")){const l=new MessageEvent("message",{data:this._buffer});this._buffer="",this._handleMessage(l)}}}const be=new Sc,sn={parseKeyValue(e){const t={};if(!e)return t;const n=e.split(`
`);for(const r of n){const a=r.indexOf(": ");if(a===-1)continue;const i=r.substring(0,a).toLowerCase(),l=r.substring(a+2);t[i]=l}return t},parseStatus(e){const t=this.parseKeyValue(e);let n="";if(t.audio){const r=t.audio.split(":");r[1]&&(n=`${r[1]}-bit`)}return{state:t.state||"stop",volume:parseInt(t.volume)||0,elapsed:parseFloat(t.elapsed)||0,duration:parseFloat(t.duration)||0,random:t.random==="1",repeat:t.repeat==="1",songId:parseInt(t.songid)||-1,playlistLength:parseInt(t.playlistlength)||0,bitrate:parseInt(t.bitrate)||0,format:n,playlistVersion:parseInt(t.playlist)||0}},parseCurrentSong(e){const t=this.parseKeyValue(e);return this._normalizeTrack(t)},parsePlaylists(e){const t=e.split(`
`),n=[];let r=null;for(const a of t)a.startsWith("playlist: ")?(r&&n.push(r),r={playlist:a.substring(10)}):a.startsWith("Last-Modified: ")&&r&&(r["last-modified"]=a.substring(15));return r&&n.push(r),n.map(a=>({name:a.playlist,lastModified:a["last-modified"]}))},parseTracks(e){const t=[];let n=null,r=0,a=e.indexOf(`
`,r);for(;a!==-1;){const i=e.substring(r,a),l=i.indexOf(": ");if(l!==-1){const c=i.substring(0,l).toLowerCase(),u=i.substring(l+2);c==="file"?(n&&t.push(this._normalizeTrack(n)),n={file:u}):n&&(n[c]=u)}r=a+1,a=e.indexOf(`
`,r)}return n&&t.push(this._normalizeTrack(n)),t},_normalizeTrack(e){const t=e.file||e.File||"",n=e.Title||e.title||e.Name||e.name||t.split("/").pop()||"Unknown";return{file:t,title:n,artist:e.Artist||e.artist||"Unknown Artist",album:e.Album||e.album||"Unknown Album",genre:e.Genre||e.genre||"Unknown",time:parseFloat(e.Time||e.time||0),track:e.Track||e.track||"",id:e.Id||e.id,stationName:e.name||e.Name||null}}},Tc=1e3,$c=250;let Yr=null,yr=null,Wr=0,Mn=1,ts=!0,nn=!1,Tn=0,Kn=null;function pr(e){return e?String(e).replace(/\\/g,"\\\\").replace(/"/g,'\\"'):""}function Ac(){Cc(),ts=!0,nn=!1,Tn=0,Je.set(!1),zt(),Yr=setInterval(()=>{be.isConnected&&!be.isProcessing&&zt()},Tc)}function Cc(){Yr&&(clearInterval(Yr),Yr=null),ia()}async function zt(){try{const e=await be.send("status"),t=await be.send("currentsong"),n=sn.parseStatus(e),r=sn.parseCurrentSong(t);Rc(n,r);const a=Re(Oi);if(Re(Je))return;(n.playlistLength>0&&n.playlistVersion!==a||n.playlistLength>0&&Re(Tr).length===0)&&Pc(n.playlistVersion)}catch(e){e.message!=="Connection lost"&&console.warn("[Player] Sync skip:",e.message)}}async function Pc(e){if(!Re(Je))try{const t=await be.send("playlistinfo");if(Re(Je))return;const n=sn.parseTracks(t),r=n.map(l=>l.file).filter(l=>l&&!l.startsWith("http"));let a=new Map;if(r.length>0)try{a=await _n.getFilesMap(r)}catch(l){console.warn("Failed to hydrate queue from DB",l)}const i=n.map(l=>{const c=a.get(l.file);return c?{...l,thumbHash:c.thumbHash,qualityBadge:c.qualityBadge,title:l.title||c.title,artist:l.artist||c.artist,album:l.album||c.album,_uid:String(l.id||l.pos+l.file)}:{...l,_uid:String(l.id||l.pos+l.file)}});Tr.set(i),Oi.set(e)}catch(t){console.error("Queue sync error",t)}}function Rc(e,t){const n=Re(Vt),r=Re(kn),a=t.file&&t.file.startsWith("http");if(a){const i=o=>(o||"").toString().toLowerCase().replace(/[^a-z0-9]/g,""),l=i(t.file),c=i(t.title),u=r.find(o=>{const v=i(o.station||o.file||o.url||(Array.isArray(o)?o[1]:"")),f=i(o.name||(Array.isArray(o)?o[0]:""));return v&&l.includes(v)||f&&c.includes(f)});u?t.stationName=u.name||u[0]:n.stationName&&n.file===t.file&&(t.stationName=n.stationName)}Vt.set(t),ct.update(i=>{const l=e.state==="play",c=performance.now();if(e.state==="pause"||i.state==="pause")return Br(!1),c<Tn?i:e;if(t.file!==n.file||ts)return ts=!1,nn=!1,Mn=1,a&&(e.elapsed=0),Br(l&&!a),e;if(c<Tn)return i;if(nn)return nn=!1,Mn=1,Br(l&&!a),e;if(l&&!a){const u=e.elapsed-i.elapsed;if(Math.abs(u)>2)return Mn=1,e;if(Math.abs(u)<.05)Mn=1;else{let v=u/1.5;Mn=Math.max(.5,Math.min(1.5,1+v))}return{...e,elapsed:i.elapsed}}return Br(!1),e})}function Br(e){e?Us():ia()}function Us(){yr||ts||(Wr=performance.now(),yr=setInterval(()=>{const e=performance.now();let t=(e-Wr)/1e3;t>2&&(t=0),Wr=e,ct.update(n=>{if(n.state!=="play")return n;let r=n.elapsed+t*Mn;return n.duration>0&&r>n.duration&&(r=n.duration),{...n,elapsed:r}})},$c))}function ia(){yr&&(clearInterval(yr),yr=null),Mn=1,Wr=0}const Nt={async togglePlay(){const t=Re(ct).state==="play";Tn=performance.now()+800,ct.update(n=>{const r=t?"pause":"play";return r==="play"?Us():ia(),{...n,state:r}}),await be.send(t?"pause 1":"play"),setTimeout(zt,900)},async next(){nn=!0,Tn=0,await be.send("next"),zt()},async previous(){nn=!0,Tn=0,ct.update(e=>({...e,elapsed:0})),await be.send("previous"),zt()},async setVolume(e){ct.update(t=>({...t,volume:e})),await be.send(`setvol ${e}`)},async seek(e){nn=!0,Tn=performance.now()+500,ct.update(t=>({...t,elapsed:e})),await be.send(`seekcur ${e}`),setTimeout(zt,600)},async toggleRandom(){const t=!Re(ct).random;ct.update(n=>({...n,random:t})),await be.send(`random ${t?1:0}`)},async toggleRepeat(){const t=!Re(ct).repeat;ct.update(n=>({...n,repeat:t})),await be.send(`repeat ${t?1:0}`)},async playUri(e,t={}){Je.set(!0);const n=pr(e);nn=!0,ct.update(r=>({...r,state:"play",elapsed:0})),Vt.set({title:t.title||e.split("/").pop(),artist:t.artist||"",file:e}),Us();try{await be.send("stop"),await be.send("clear"),await be.send(`add "${n}"`),await be.send("play")}catch(r){console.error("Play error",r),Oe("Failed to play","error")}setTimeout(()=>{Je.set(!1),zt()},1200)},async addToQueue(e){const t=pr(e);try{await be.send(`add "${t}"`),Oe("Added to queue","success")}catch(n){console.error("Add queue error",n),Oe("Failed to add","error")}},async playNext(e){Je.set(!0);const t=pr(e);try{const n=await be.send("currentsong"),r=parseInt(sn.parseKeyValue(n).pos||-1);if(r===-1)Je.set(!1),await this.playUri(e);else{const a=await be.send(`addid "${t}"`),i=parseInt(sn.parseKeyValue(a).id);isNaN(i)||(await be.send(`moveid ${i} ${r+1}`),Oe("Will play next","success")),setTimeout(()=>Je.set(!1),1e3)}}catch(n){console.error("Play Next error",n),Oe("Failed to set next","error"),Je.set(!1)}},async removeFromQueue(e){Je.set(!0),Kn&&clearTimeout(Kn);try{Tr.update(t=>{const n=[...t];return n.splice(e,1),n}),await be.send(`delete ${e}`)}catch{Oe("Failed to remove","error"),Je.set(!1);return}Kn=setTimeout(()=>{Je.set(!1)},1e3)},async moveTrack(e,t){if(e!==t){Je.set(!0),Kn&&clearTimeout(Kn);try{await be.send(`move ${e} ${t}`)}catch(n){console.error("Move failed",n),Oe("Move failed","error"),Je.set(!1),zt();return}Kn=setTimeout(()=>{Je.set(!1),zt()},2e3)}},async playAllTracks(e){if(!(!e||e.length===0)){Je.set(!0),nn=!0;try{await be.send("stop"),await be.send("clear");for(const t of e){const n=pr(t.file);await be.send(`add "${n}"`)}await be.send("play 0"),Oe(`Playing ${e.length} tracks`,"success")}catch(t){console.error("Play All error",t),Oe("Failed to play all tracks","error")}setTimeout(()=>{Je.set(!1),zt()},1500)}},async addAllToQueue(e){if(!(!e||e.length===0)){Je.set(!0);try{for(const t of e){const n=pr(t.file);await be.send(`add "${n}"`)}Oe(`Added ${e.length} tracks to queue`,"success")}catch(t){console.error("Add All error",t),Oe("Failed to add tracks","error")}setTimeout(()=>{Je.set(!1),zt()},1e3)}},async saveQueue(e){if(!e)return;const t=e.replace(/"/g,'\\"');try{await be.send(`save "${t}"`),Oe(`Playlist "${e}" saved`,"success")}catch(n){if(n.message.includes("exist")){if(confirm(`Playlist "${e}" exists. Overwrite?`))try{await be.send(`rm "${t}"`),await be.send(`save "${t}"`),Oe(`Playlist "${e}" overwritten`,"success")}catch{Oe("Failed to overwrite","error")}}else console.error(n)}}};function Bi(e){return new Worker("/assets/sync.worker-BmwNGWYU.js",{name:e?.name})}const _r="Favorites";let Fa=Promise.resolve();const Gn=e=>e?e.toLowerCase().replace(/^https?:\/\//,"").replace(/^www\./,"").split("?")[0].replace(/\/$/,""):"";function Lc(e){if(e==="Favorites")return"linear-gradient(135deg, hsl(348, 95%, 58%), hsl(348, 90%, 40%))";let t=0;for(let r=0;r<e.length;r++)t=e.charCodeAt(r)+((t<<5)-t);const n=Math.abs(t%360);return`linear-gradient(135deg, hsl(${n}, 60%, 40%), hsl(${(n+40)%360}, 60%, 30%))`}const Bn={async syncLibrary(){if(Re(It))return;It.set(!0);const e=new Bi;e.postMessage({type:"START_SYNC",payload:{url:`http://${Sr.MOODE_IP}/wave-api.php`}}),e.onmessage=t=>{const{type:n,count:r}=t.data;n==="DONE"&&(Oe(`Library updated: ${r} tracks`,"success"),It.set(!1),e.terminate()),n==="ERROR"&&(Oe("Sync Failed","error"),It.set(!1),e.terminate())},e.onerror=()=>{It.set(!1),e.terminate()}},async loadPlaylists(){Ds.set(!0);try{const e=await be.send("listplaylists"),n=sn.parsePlaylists(e).map(r=>({...r,color:Lc(r.name)}));sa.set(n)}catch(e){console.error(e)}finally{Ds.set(!1)}},async openPlaylistDetails(e){if(!e)return;Fs.set(!0);const t=e.replace(/"/g,'\\"');try{const n=await be.send(`listplaylistinfo "${t}"`),r=sn.parseTracks(n),a=r.map(c=>c.file).filter(c=>c&&!c.startsWith("http"));let i=new Map;if(a.length>0)try{i=await _n.getFilesMap(a)}catch(c){console.warn("Failed to hydrate playlist from DB",c)}const l=r.map(c=>{const u=i.get(c.file);return u?{...c,thumbHash:u.thumbHash,qualityBadge:u.qualityBadge,title:c.title||u.title,artist:c.artist||u.artist,album:c.album||u.album,_uid:Ra()}:{...c,_uid:Ra()}});er.set(l)}catch(n){console.error(n),Oe("Could not load playlist","error")}finally{Fs.set(!1)}},async movePlaylistTrack(e,t,n){const r=e.replace(/"/g,'\\"');try{await be.send(`playlistmove "${r}" ${t} ${n}`)}catch{Oe("Move failed","error")}},async removeFromPlaylist(e,t){const n=e.replace(/"/g,'\\"');try{await be.send(`playlistdelete "${n}" ${t}`),Oe("Track removed","success")}catch{Oe("Delete failed","error")}},async loadFavorites(){try{const e=await be.send(`listplaylistinfo "${_r}"`),t=sn.parseTracks(e),n=new Set;t.forEach(r=>{r.file&&n.add(r.file)}),pn.set(n)}catch{pn.set(new Set)}},async toggleFavorite(e){if(!e||!e.file)return;const t=e.file,n=t.replace(/"/g,'\\"'),r=t.startsWith("http"),a=Re(pn);let i=a.has(t);if(!i&&r){const l=Gn(t);for(const c of a)if(Gn(c)===l){i=!0;break}}pn.update(l=>{const c=new Set(l);if(i){if(c.delete(t),r){const u=Gn(t);for(const o of c)Gn(o)===u&&c.delete(o)}}else c.add(t);return c}),Fa=Fa.then(async()=>{try{const l=await be.send(`listplaylistinfo "${_r}"`),c=sn.parseTracks(l);let u=[];if(c.forEach((o,v)=>{let f=!1;(o.file===t||r&&Gn(o.file)===Gn(t)||r&&(o.file.includes(t)||t.includes(o.file)))&&(f=!0),f&&u.push(v)}),i){if(u.length>0){u.sort((o,v)=>v-o);for(const o of u)await be.send(`playlistdelete "${_r}" ${o}`);Oe("Removed from Favorites","info")}}else u.length>0?console.log("[Fav] Track already exists. Skipping."):(await be.send(`playlistadd "${_r}" "${n}"`),c.length>0&&await be.send(`playlistmove "${_r}" ${c.length} 0`),Oe("Added to Favorites","success"))}catch(l){console.error("Fav action failed",l),Oe("Action failed","error")}finally{await this.loadFavorites()}})}};function ji(){be.connect(),Ac(),Bn.loadPlaylists(),Bn.loadFavorites()}function oa(e){return be.send(e)}const{togglePlay:us,toggleRandom:Rn,toggleRepeat:Ln,setVolume:Ar,seek:la,addToQueue:zc,playNext:Ic,removeFromQueue:Oc,moveTrack:Nc,saveQueue:Dc,playAllTracks:qi,addAllToQueue:Ui}=Nt,{syncLibrary:Fc,loadRadioStations:Bc,loadPlaylists:ca,openPlaylistDetails:Hi,toggleFavorite:Yi,loadFavorites:jc,removeFromPlaylist:Wi,movePlaylistTrack:Vi}=Bn;function Cr(e){const t=Re(Vt),n=Re(kn),r=Re(Lr);if(t.file&&t.file.startsWith("http")&&n.length>0&&(e==="next"||e==="previous")){let i=n.findIndex(c=>c.name===r);i===-1&&(i=0);let l;e==="next"?(l=i+1,l>=n.length&&(l=0)):(l=i-1,l<0&&(l=n.length-1)),ua(n[l])}else e==="next"&&Nt.next(),e==="previous"&&Nt.previous()}function ua(e){if(!e)return;Lr.set(e.name);const t=e[1]||e.station||e.file||e.url;t&&Nt.playUri(t,{title:e.name,artist:e.genre||"Radio Stream",stationName:e.name})}function va(e){e&&(Lr.set(null),Nt.playUri(e.file,{title:e.title,artist:e.artist,album:e.album,stationName:null}))}async function Hs(e,t=0){if(!e)return;Lr.set(null);const n=e.replace(/"/g,'\\"');try{await be.send("stop"),await be.send("clear"),await be.send(`load "${n}"`),await be.send(`play ${t}`)}catch(r){console.error("Failed to play playlist context",r)}}const qc=Object.freeze(Object.defineProperty({__proto__:null,addAllToQueue:Ui,addToQueue:zc,connect:ji,loadFavorites:jc,loadPlaylists:ca,loadRadioStations:Bc,movePlaylistTrack:Vi,moveTrack:Nc,nav:Cr,openPlaylistDetails:Hi,playAllTracks:qi,playNext:Ic,playPlaylistContext:Hs,playStation:ua,playTrackOptimistic:va,removeFromPlaylist:Wi,removeFromQueue:Oc,runMpdRequest:oa,saveQueue:Dc,seek:la,setVolume:Ar,syncLibrary:Fc,toggleFavorite:Yi,togglePlay:us,toggleRandom:Rn,toggleRepeat:Ln},Symbol.toStringTag,{value:"Module"}));function Qi(e,t=2e3){let n;const r=i=>{i.type==="mousedown"&&i.button!==0||(n=setTimeout(()=>{e.dispatchEvent(new CustomEvent("longpress",{detail:{originalEvent:i}}))},t))},a=()=>{clearTimeout(n)};return e.addEventListener("mousedown",r),e.addEventListener("touchstart",r,{passive:!0}),e.addEventListener("mouseup",a),e.addEventListener("mouseleave",a),e.addEventListener("touchend",a),e.addEventListener("touchcancel",a),e.addEventListener("touchmove",a),{destroy(){e.removeEventListener("mousedown",r),e.removeEventListener("touchstart",r),e.removeEventListener("mouseup",a),e.removeEventListener("mouseleave",a),e.removeEventListener("touchend",a),e.removeEventListener("touchcancel",a),e.removeEventListener("touchmove",a)}}}var Uc=M('<div class="drag-handle svelte-5cs2hz" title="Drag to reorder"><div class="icon-small svelte-5cs2hz"><!></div></div>'),Hc=M('<div class="eq-anim svelte-5cs2hz"><span class="bar b1 svelte-5cs2hz"></span> <span class="bar b2 svelte-5cs2hz"></span> <span class="bar b3 svelte-5cs2hz"></span></div>'),Yc=M('<div class="icon-small svelte-5cs2hz"><!></div>'),Wc=M('<div class="icon-small svelte-5cs2hz"><!></div>'),Vc=M('<div class="icon-small accent svelte-5cs2hz"><!></div>'),Qc=M('<span class="num svelte-5cs2hz"> </span>'),Xc=M('<button class="num-box svelte-5cs2hz"><!></button>'),Kc=M('<div slot="fallback" class="icon-ph svelte-5cs2hz"><!></div>'),Gc=M('<span class="quality-badge svelte-5cs2hz"> </span>'),Zc=M('<button class="btn-icon small remove svelte-5cs2hz"><!></button>'),Jc=M('<div class="dur svelte-5cs2hz"> </div>'),eu=M('<div role="button" tabindex="0"><div class="left svelte-5cs2hz"><!> <div class="thumb svelte-5cs2hz"><!></div></div> <div class="info svelte-5cs2hz"><div class="title-row svelte-5cs2hz"><div class="title text-ellipsis svelte-5cs2hz"> </div> <!></div> <div> </div></div> <div class="right svelte-5cs2hz"><button class="btn-icon small context-menu-btn svelte-5cs2hz" title="Options"><!></button> <button><!></button> <!></div></div>');function vs(e,t){dt(t,!1);const n=()=>ge(pn,"$favorites",u),r=()=>ge(Vt,"$currentSong",u),a=()=>ge(ct,"$status",u),i=()=>ge(kn,"$stations",u),l=()=>ge(At,"$navigationStack",u),c=()=>ge(xt,"$activeMenuTab",u),[u,o]=Lt(),v=A(),f=A(),d=A(),p=A(),y=A(),k=A(),_=A(),E=A(),C=A(),X=A(),Z=A(),ae=A(),ce=A(),me=A();let $=st(t,"track",8),D=st(t,"index",8),J=st(t,"isEditable",8,!1);const he=ra();let V=A(!1),ne=A(!1);function B(le){if(s(p))return"â";if(!le)return"0:00";const Y=parseInt(le,10),Q=Math.floor(Y/60),ye=Y%60;return`${Q}:${ye.toString().padStart(2,"0")}`}function I(le){le.stopPropagation(),s(f)?us():he("play")}function te(){const le=l(),Y=le[le.length-1],Q=c();return Y?.view==="details"&&Y.data?.name?{type:"playlist",playlistName:Y.data.name,index:D()}:Y?.view==="queue"||Y?.view==="root"&&Q==="queue"?{type:"queue",index:D()}:{type:"general"}}function S(le){le.stopPropagation(),es(le,$(),te())}function P(le){J()||es(le.detail.originalEvent,$(),te())}ie(()=>W($()),()=>{$()&&g(ne,!1)}),ie(()=>(n(),W($())),()=>{g(v,n().has($().file))}),ie(()=>(W($()),r()),()=>{g(f,$().file===r().file)}),ie(()=>a(),()=>{g(d,a().state==="play")}),ie(()=>W($()),()=>{g(p,$().file&&($().file.startsWith("http")||$().file.includes("RADIO")))}),ie(()=>(s(f),s(d),s(V)),()=>{g(y,s(f)&&s(d)&&s(V))}),ie(()=>(s(f),s(d),s(V)),()=>{g(k,s(f)&&!s(d)&&s(V)||!s(f)&&s(V))}),ie(()=>(s(f),s(d),s(V)),()=>{g(_,s(f)&&s(d)&&!s(V))}),ie(()=>(s(f),s(d),s(V)),()=>{g(E,s(f)&&!s(d)&&!s(V))}),ie(()=>W($()),()=>{g(C,$().title||$().file?.split("/").pop())}),ie(()=>W($()),()=>{g(X,$().artist||"Unknown")}),ie(()=>W($()),()=>{g(Z,B($().time))}),ie(()=>W($()),()=>{g(ae,$().qualityBadge?$().qualityBadge.split(" ")[0]:null)}),ie(()=>(s(f),r()),()=>{g(ce,s(f)?r().stationName:null)}),ie(()=>(s(ne),W($()),i(),s(ce),$r),()=>{g(me,s(ne)?or($(),i(),s(ce)):$r($(),"sm",i(),s(ce)))}),Bt(),bt();var T=eu();let L;var re=h(T),R=h(re);{var H=le=>{var Y=Uc(),Q=h(Y),ye=h(Q);ue(ye,()=>(W(w),x(()=>w.DRAG_HANDLE))),z("mousedown",Y,Pe=>he("startdrag",Pe)),z("touchstart",Y,Pe=>he("startdrag",Pe),void 0,!0),z("click",Y,Ot(function(Pe){Gr.call(this,t,Pe)})),m(le,Y)},O=le=>{var Y=Xc(),Q=h(Y);{var ye=He=>{var Ue=Hc();m(He,Ue)},Pe=He=>{var Ue=Xe(),Ke=Se(Ue);{var Ye=je=>{var tt=Yc(),nt=h(tt);ue(nt,()=>(W(w),x(()=>w.PAUSE))),m(je,tt)},$e=je=>{var tt=Xe(),nt=Se(tt);{var Kt=ht=>{var rt=Wc(),wt=h(rt);ue(wt,()=>(W(w),x(()=>w.PLAY))),m(ht,rt)},Gt=ht=>{var rt=Xe(),wt=Se(rt);{var Zt=jt=>{var qt=Vc(),vn=h(qt);ue(vn,()=>(W(w),x(()=>w.PLAY))),m(jt,qt)},fr=jt=>{var qt=Qc(),vn=h(qt);de(()=>fe(vn,D()+1)),m(jt,qt)};U(wt,jt=>{s(E)?jt(Zt):jt(fr,!1)},!0)}m(ht,rt)};U(nt,ht=>{s(k)?ht(Kt):ht(Gt,!1)},!0)}m(je,tt)};U(Ke,je=>{s(y)?je(Ye):je($e,!1)},!0)}m(He,Ue)};U(Q,He=>{s(_)?He(ye):He(Pe,!1)})}z("click",Y,I),m(le,Y)};U(R,le=>{J()?le(H):le(O,!1)})}var K=b(R,2),ve=h(K);Fn(ve,{get src(){return s(me)},get alt(){return s(C)},radius:"4px",$$events:{error:()=>g(ne,!0)},$$slots:{fallback:(le,Y)=>{var Q=Kc(),ye=h(Q);ue(ye,()=>(s(p),W(w),x(()=>s(p)?w.RADIO:w.ALBUMS))),Rt(1,Q,()=>wn),m(le,Q)}}});var ee=b(re,2),q=h(ee),N=h(q),F=h(N),oe=b(N,2);{var se=le=>{var Y=Gc(),Q=h(Y);de(()=>fe(Q,s(ae))),m(le,Y)};U(oe,le=>{s(ae)&&!s(p)&&le(se)})}var j=b(q,2);let pe;var xe=h(j),Ee=b(ee,2),Me=h(Ee),we=h(Me);ue(we,()=>(W(w),x(()=>w.DOTS)));var _e=b(Me,2);let Te;var Fe=h(_e);ue(Fe,()=>(s(v),W(w),x(()=>s(v)?w.HEART_FILLED:w.HEART)));var Ce=b(_e,2);{var Be=le=>{var Y=Zc(),Q=h(Y);ue(Q,()=>(W(w),x(()=>w.REMOVE))),z("click",Y,Ot(()=>he("remove",{index:D()}))),m(le,Y)},ze=le=>{var Y=Jc(),Q=h(Y);de(()=>fe(Q,s(Z))),m(le,Y)};U(Ce,le=>{J()?le(Be):le(ze,!1)})}Ht(()=>z("click",T,()=>!s(f)&&he("play"))),Ht(()=>z("mouseenter",T,()=>g(V,!0))),Ht(()=>z("mouseleave",T,()=>g(V,!1))),Ci(T,le=>Qi?.(le)),Ht(()=>z("longpress",T,P)),de(()=>{L=Ne(T,1,"row svelte-5cs2hz",null,L,{active:s(f),editable:J()}),gt(N,"title",s(C)),fe(F,s(C)),pe=Ne(j,1,"artist text-ellipsis svelte-5cs2hz",null,pe,{link:!s(p)}),fe(xe,s(X)),Te=Ne(_e,1,"btn-icon small svelte-5cs2hz",null,Te,{liked:s(v)})}),z("click",j,Ot(()=>{!s(p)&&$().artist&&(xt.set("artists"),bn("albums_by_artist",$().artist))})),z("click",Me,S),z("click",_e,Ot(()=>Yi($()))),m(e,T),ft(),o()}const jr=100,Ba=5,ja=25,qa=3;function tu({tracksStore:e,onMoveTrack:t}){const n=Le(!1),r=Le(!1),a=Le(!1),i=Le(null),l=Le(null),c=Le(null),u=Le({x:0,y:0,width:0,height:0,grabOffsetX:0,grabOffsetY:0}),o=Le(null);let v=!1,f=0,d=0,p=0,y=0;const k={scrollContainer:null,listBodyContainer:null};let _=null;function E(V,ne,B){const I=V.detail;if(I.button===2||(window.getSelection&&window.getSelection().removeAllRanges(),!k.scrollContainer))return;const S=k.scrollContainer.querySelectorAll(".row-wrapper")[ne];if(!S)return;const P=S.getBoundingClientRect(),T=I.touches?I.touches[0].clientX:I.clientX,L=I.touches?I.touches[0].clientY:I.clientY,re=T-P.left,R=L-P.top;v=!0,n.set(!1),r.set(!1),f=T,d=L,p=T,y=L,i.set(ne),l.set(ne),o.set(B),c.set(null),u.set({x:T,y:L,width:P.width,height:P.height,grabOffsetX:re,grabOffsetY:R})}function C(V){if(!v||Re(r))return;const ne=V.touches?V.touches[0].clientX:V.clientX,B=V.touches?V.touches[0].clientY:V.clientY;if(!Re(n)){const I=Math.abs(ne-f),te=Math.abs(B-d);if(I<qa&&te<qa)return;n.set(!0)}V.cancelable&&V.preventDefault(),p=ne,y=B,u.update(I=>({...I,x:p,y})),$(y),X()}function X(){if(!k.listBodyContainer)return;const V=k.listBodyContainer.getBoundingClientRect(),ne=Re(u),I=y-V.top-ne.grabOffsetY+ne.height/2,te=Re(e).length;if(I<0){l.set(0);return}if(I>V.height){l.set(te);return}const S=Array.from(k.listBodyContainer.querySelectorAll(".row-wrapper"));let P=-1,T=1/0;S.forEach((L,re)=>{const R=L.offsetTop+L.offsetHeight/2,H=Math.abs(I-R);H<T&&(T=H,P=re)}),P!==-1&&l.set(P)}function Z(V){if(v){if(v=!1,!Re(n)){ce();return}ae()}}async function ae(){J(),n.set(!1),r.set(!0);const V=Re(l);if(Re(u),k.listBodyContainer&&V!==null){const T=k.listBodyContainer.querySelectorAll(".row-wrapper")[V];if(T){const L=k.listBodyContainer.getBoundingClientRect(),re=L.top+T.offsetTop,R=L.left+T.offsetLeft;u.update(H=>({...H,y:re+H.grabOffsetY,x:R+H.grabOffsetX}))}}await new Promise(P=>setTimeout(P,200)),a.set(!0),await Er(),k.listBodyContainer&&k.listBodyContainer.offsetHeight;const ne=Re(i),B=Re(e).length;let I=Math.max(0,Math.min(V,B)),te=I;if(ne!==null&&ne!==I){const P=[...Re(e)],[T]=P.splice(ne,1);te=Math.max(0,Math.min(te,P.length)),P.splice(te,0,T),e.set(P),t&&t(ne,te)}i.set(null),l.set(null),o.set(null),r.set(!1);const S=ne!==I?te:ne;c.set(S),await Er(),requestAnimationFrame(()=>{a.set(!1),setTimeout(()=>{c.set(null)},300)})}function ce(){v=!1,me()}function me(){n.set(!1),r.set(!1),i.set(null),l.set(null),o.set(null),J()}function $(V){if(!k.scrollContainer)return;const{top:ne,bottom:B}=k.scrollContainer.getBoundingClientRect(),I=V-ne,te=B-V;J();let S=0;if(I<jr&&I>0){const P=1-I/jr;S=-(Ba+ja*(P*P))}else if(te<jr&&te>0){const P=1-te/jr;S=Ba+ja*(P*P)}S!==0&&D(S)}function D(V){_||(_=requestAnimationFrame(function ne(){k.scrollContainer&&(k.scrollContainer.scrollTop+=V,Re(n)&&(u.update(B=>({...B,x:p,y})),X(),_=requestAnimationFrame(ne)))}))}function J(){_&&(cancelAnimationFrame(_),_=null)}function he(V,ne,B,I,te,S){return S||!ne&&!B||I===null||te===null?"":V===I?"opacity: 0; pointer-events: none;":I===te?"":I<te&&V>I&&V<=te?"transform: translateY(-100%);":I>te&&V>=te&&V<I?"transform: translateY(100%);":""}return{isDragging:n,isDropping:r,isReordering:a,draggingIndex:i,hoverIndex:l,justDroppedIndex:c,draggedItemData:o,ghostCoords:u,refs:k,onDragInit:E,onPointerMove:C,onPointerUp:Z,getRowStyle:he,cancelDrag:ce}}var nu=M('<div><div style="pointer-events: none; width: 100%; height: 100%;" class="svelte-ym6b2"><!></div></div>'),ru=M('<div style="padding: 10px 0;" class="svelte-ym6b2"><!></div>'),su=M('<div class="skeletons-wrapper svelte-ym6b2"></div>'),au=M("<div><!></div>"),iu=M('<div class="content-padded svelte-ym6b2" style="text-align: center; opacity: 0.5;"> </div>'),ou=M("<!> <!>",1),lu=M('<div><!> <div class="list-body svelte-ym6b2"><!> <!></div></div>');function ds(e,t){dt(t,!1);const n=()=>ge(At,"$navigationStack",p),r=()=>ge(xt,"$activeMenuTab",p),a=()=>ge(J,"$isDragging",p),i=()=>ge(he,"$isDropping",p),l=()=>ge(te,"$draggedItemData",p),c=()=>ge(S,"$ghostCoords",p),u=()=>ge(ne,"$draggingIndex",p),o=()=>ge(k(),"$itemsStore",p),v=()=>ge(I,"$justDroppedIndex",p),f=()=>ge(V,"$isReordering",p),d=()=>ge(B,"$hoverIndex",p),[p,y]=Lt();let k=st(t,"itemsStore",8),_=st(t,"isEditMode",8,!1),E=st(t,"isLoading",8,!1),C=st(t,"emptyText",8,"List is empty"),X=st(t,"onMoveItem",8,(N,F)=>{}),Z=A(""),ae=A(0),ce=A(!1);dr(async()=>{g(ae,_c(s(Z))),!E()&&s(ae)>0&&s($).refs.scrollContainer&&(await Er(),Nr($,s($).refs.scrollContainer.scrollTop=s(ae)),g(ce,!0))});async function me(){await Er(),s($).refs.scrollContainer&&(Nr($,s($).refs.scrollContainer.scrollTop=s(ae)),g(ce,!0))}Ml(()=>{s($).cancelDrag(),s($).refs.scrollContainer&&pc(s(Z),s($).refs.scrollContainer.scrollTop)});const $=A(tu({tracksStore:k(),onMoveTrack:(N,F)=>{X()(N,F)}})),D=s($),J=D.isDragging,he=D.isDropping,V=D.isReordering,ne=D.draggingIndex,B=D.hoverIndex,I=D.justDroppedIndex,te=D.draggedItemData,S=D.ghostCoords,P=A(D.refs);function T(N,F,oe){_()&&s($).onDragInit(N,F,oe)}ie(()=>(n(),r()),()=>{const N=n(),F=N[N.length-1],oe=r();if(F&&F.view==="root")g(Z,`root_${oe}`);else if(F){const se=F.data?F.data.name||F.data:"unknown";g(Z,`${F.view}_${se}`)}}),ie(()=>(W(E()),s(ce),s(ae),s($)),()=>{!E()&&!s(ce)&&s(ae)>0&&s($).refs.scrollContainer&&me()}),Bt(),bt();var L=lu();z("mousemove",En,function(...N){s($).onPointerMove?.apply(this,N)}),z("mouseup",En,function(...N){s($).onPointerUp?.apply(this,N)}),z("touchmove",En,function(...N){s($).onPointerMove?.apply(this,N)},void 0,!1),z("touchend",En,function(...N){s($).onPointerUp?.apply(this,N)}),z("touchcancel",En,function(...N){s($).onPointerUp?.apply(this,N)});let re;var R=h(L);{var H=N=>{var F=nu();let oe;var se=h(F),j=h(se);Ur(j,t,"row",{get item(){return l()},get index(){return u()},isGhost:!0,startDrag:()=>{}}),de(()=>{oe=Ne(F,1,"floating-item svelte-ym6b2",null,oe,{dropping:i()}),Ze(F,`
            top: ${c(),x(()=>c().y-c().grabOffsetY)??""}px; 
            left: ${c(),x(()=>c().x-c().grabOffsetX)??""}px;
            width: ${c(),x(()=>c().width)??""}px; 
            height: ${c(),x(()=>c().height)??""}px;
        `)}),m(N,F)};U(R,N=>{(a()||i())&&l()&&N(H)})}var O=b(R,2),K=h(O);Ur(K,t,"header",{});var ve=b(K,2);{var ee=N=>{var F=su();Pt(F,4,()=>Array(6),cn,(oe,se)=>{var j=ru(),pe=h(j);yn(pe,{width:"100%",height:"50px"}),m(oe,j)}),m(N,F)},q=N=>{var F=ou(),oe=Se(F);Pt(oe,3,o,(pe,xe)=>pe._uid||xe,(pe,xe,Ee)=>{var Me=au();let we;var _e=h(Me);Ur(_e,t,"row",{get item(){return s(xe)},get index(){return s(Ee)},isGhost:!1,startDrag:Te=>T(Te,s(Ee),s(xe))}),de(Te=>{we=Ne(Me,1,"row-wrapper svelte-ym6b2",null,we,{"ghost-placeholder":u()===s(Ee)&&(a()||i()),"just-dropped":v()===s(Ee),"no-transition":f()}),Ze(Me,Te)},[()=>(s($),W(s(Ee)),a(),i(),u(),d(),f(),x(()=>s($).getRowStyle(s(Ee),a(),i(),u(),d(),f())))]),m(pe,Me)});var se=b(oe,2);{var j=pe=>{var xe=iu(),Ee=h(xe);de(()=>fe(Ee,C())),m(pe,xe)};U(se,pe=>{o(),x(()=>o().length===0)&&pe(j)})}m(N,F)};U(ve,N=>{E()?N(ee):N(q,!1)})}Dn(O,N=>Nr(P,s(P).listBodyContainer=N),()=>s(P)?.listBodyContainer),Dn(L,N=>Nr(P,s(P).scrollContainer=N),()=>s(P)?.scrollContainer),de(()=>re=Ne(L,1,"base-list-scroll-container svelte-ym6b2",null,re,{dragging:a()})),Rt(1,O,()=>wn,()=>({duration:200})),m(e,L),ft(),y()}var cu=M('<div slot="fallback" class="icon-fallback svelte-1eh2rsb"><!></div>'),uu=M('<span class="year-badge-header svelte-1eh2rsb"> </span>'),vu=M('<div class="artist-row-header svelte-1eh2rsb"><h2 class="header-sub svelte-1eh2rsb"> </h2> <!></div>'),du=M('<span class="meta-tag svelte-1eh2rsb"> </span>'),fu=M('<span class="meta-tag svelte-1eh2rsb"> </span>'),hu=M('<span class="meta-tag quality svelte-1eh2rsb"> </span>'),pu=M('<div slot="header" class="content-padded svelte-1eh2rsb"><div class="view-header svelte-1eh2rsb"><div class="header-art svelte-1eh2rsb"><div style="width: 100%; height: 100%;" class="svelte-1eh2rsb"><!></div></div> <div class="header-info svelte-1eh2rsb"><div class="header-text-group svelte-1eh2rsb"><div class="header-label svelte-1eh2rsb"> </div> <h1 class="header-title svelte-1eh2rsb"> </h1> <!> <div class="meta-badges svelte-1eh2rsb"><!> <!> <!></div></div> <div class="header-actions svelte-1eh2rsb"><button class="btn-primary svelte-1eh2rsb"> </button> <button class="btn-secondary svelte-1eh2rsb"> </button></div></div></div></div>'),_u=M('<div slot="row" class="svelte-1eh2rsb"><!></div>'),gu=M("<button> </button>"),mu=M('<div class="sort-backdrop svelte-1eh2rsb"></div> <div class="sort-menu svelte-1eh2rsb"></div>',1),bu=M('<div class="sort-wrapper svelte-1eh2rsb"><button class="sort-trigger svelte-1eh2rsb"><span class="svelte-1eh2rsb"> </span> <span class="sort-trigger-icon svelte-1eh2rsb"><!></span></button> <!></div>'),wu=M('<div class="music-card svelte-1eh2rsb"><!> <!></div>'),yu=M('<div class="music-grid svelte-1eh2rsb"></div>'),ku=M('<div class="group-header header-label svelte-1eh2rsb"> </div>'),xu=M('<div slot="fallback" class="icon-fallback svelte-1eh2rsb"><!></div>'),Eu=M('<div class="card-sub text-ellipsis svelte-1eh2rsb"> </div>'),Mu=M('<div class="card-year svelte-1eh2rsb"> </div>'),Su=M('<div class="card-year quality svelte-1eh2rsb"> </div>'),Tu=M('<div class="music-card svelte-1eh2rsb" role="button" tabindex="0"><div class="card-img-container svelte-1eh2rsb"><!> <div class="play-overlay svelte-1eh2rsb"><span style="width:48px; color:#fff" class="svelte-1eh2rsb"><!></span></div></div> <div class="card-title svelte-1eh2rsb"> </div> <div class="card-sub-row svelte-1eh2rsb"><!> <!> <!></div></div>'),$u=M('<div class="empty-text svelte-1eh2rsb">No results found</div>'),Au=M('<div class="music-grid svelte-1eh2rsb"></div>'),Cu=M('<div class="content-padded svelte-1eh2rsb"><div class="search-input-container svelte-1eh2rsb"><span class="search-icon svelte-1eh2rsb"><!></span> <input type="text" class="svelte-1eh2rsb"/> <!></div> <!></div>'),Pu=M("<div><!></div>");function Ru(e,t){dt(t,!1);const n=()=>ge(v,"$itemsStore",a),r=()=>ge(At,"$navigationStack",a),[a,i]=Lt(),l=A(),c=A(),u=A();let o=st(t,"activeCategory",8,"artists");const v=Le([]);let f=A(!0),d=A(""),p=A("name"),y=A(!1);const k=[{id:"name",label:"A-Z"},{id:"artist",label:"Artist"},{id:"year",label:"Oldest"},{id:"year_desc",label:"Newest"}];let _=A(!1),E=A(!1),C=A(null),X=A(""),Z=A(""),ae=A(0),ce=A("");function me(){g(y,!s(y))}function $(T){g(p,T),g(y,!1)}function D(T,L){if(!T||T.length===0)return[];const re=[...T].sort((R,H)=>{switch(L){case"name":return R.displayName.localeCompare(H.displayName,void 0,{sensitivity:"base"});case"artist":const O=R.artist||"",K=H.artist||"",ve=O.localeCompare(K,void 0,{sensitivity:"base"});return ve!==0?ve:(parseInt(R.year)||0)-(parseInt(H.year)||0);case"year":return(parseInt(R.year)||0)-(parseInt(H.year)||0);case"year_desc":return(parseInt(H.year)||0)-(parseInt(R.year)||0);default:return 0}});if(L==="artist"){const R=[];let H=null;return re.forEach(O=>{const K=O.artist||"Unknown Artist";K!==H&&(R.push({_uid:`header-${K}`,isHeader:!0,title:K}),H=K),R.push(O)}),R}return re}async function J(T,L){if(L){g(f,!0),g(C,L.data),g(X,""),g(Z,""),g(ce,""),g(ae,0);try{let re=[];if(L.view==="root")re=T==="artists"?await _n.getArtists():await _n.getAlbums();else if(L.view==="albums_by_artist"){const H=L.data.name||L.data;re=await _n.getArtistAlbums(H),g(p,"year")}else if(L.view==="tracks_by_album"){const H=L.data.name||L.data;re=await _n.getAlbumTracks(H)}const R=re.map((H,O)=>{const ve=typeof H=="string"?{name:H}:H;let ee=String(ve.year||"");return ee.length>4&&(ee=ee.substring(0,4)),{...ve,displayName:ve.name||ve.title||ve.artist||"Unknown",thumbFile:ve.file||null,year:ee,_uid:(ve.file||ve.name||O)+T+L.view}});if(v.set(R),L.view==="tracks_by_album"&&R.length>0){g(C,R[0]),g(ae,R.length),g(ce,R[0].year);const H=R.reduce((O,K)=>O+(K.time||0),0);if(H>0){const O=Math.floor(H/3600),K=Math.floor(H%3600/60);O>0?g(X,`${O} hr ${K} min`):g(X,`${K} min`)}R[0].qualityBadge&&g(Z,R[0].qualityBadge)}}catch(re){console.error(re),v.set([])}finally{g(f,!1)}}}function he(T){s(u).view==="root"?o()==="artists"?bn("albums_by_artist",T):bn("tracks_by_album",T):s(u).view==="albums_by_artist"&&bn("tracks_by_album",T)}function V(){const T=n();T.length>0&&(g(_,!0),qi(T))}function ne(){const T=n();T.length>0&&(g(E,!0),Ui(T),setTimeout(()=>{g(E,!1)},2e3))}ie(()=>W(o()),()=>{o()&&(g(d,""),o(),g(p,"name"))}),ie(()=>(s(p),w),()=>{g(l,s(p)==="year_desc"?w.SORT_ASC:w.SORT_DESC)}),ie(()=>(n(),s(d),s(p)),()=>{g(c,D(n().filter(T=>{if(!s(d))return!0;const L=s(d).toLowerCase();return T.displayName.toLowerCase().includes(L)||T.artist&&T.artist.toLowerCase().includes(L)}),s(p)))}),ie(()=>r(),()=>{g(u,r()[r().length-1])}),ie(()=>(W(o()),s(u)),()=>{J(o(),s(u))}),ie(()=>s(u),()=>{s(u)&&(g(_,!1),g(E,!1),g(y,!1))}),Bt(),bt();var B=Pu();let I;var te=h(B);{var S=T=>{ds(T,{get itemsStore(){return v},get isLoading(){return s(f)},isEditMode:!1,emptyText:"No tracks found",$$slots:{header:(L,re)=>{var R=pu(),H=h(R),O=h(H),K=h(O),ve=h(K);{let Q=et(()=>(W(or),s(C),x(()=>or(s(C)))));Fn(ve,{get src(){return s(Q)},alt:"Art",radius:"8px",$$slots:{fallback:(ye,Pe)=>{var He=cu(),Ue=h(He);ue(Ue,()=>(W(w),x(()=>w.ALBUMS))),m(ye,He)}}})}var ee=b(O,2),q=h(ee),N=h(q),F=h(N),oe=b(N,2),se=h(oe),j=b(oe,2);{var pe=Q=>{var ye=vu(),Pe=h(ye),He=h(Pe),Ue=b(Pe,2);{var Ke=Ye=>{var $e=uu(),je=h($e);de(()=>fe(je,s(ce))),m(Ye,$e)};U(Ue,Ye=>{s(ce)&&s(ce)!=="0"&&Ye(Ke)})}de(()=>fe(He,(s(C),x(()=>s(C).artist)))),m(Q,ye)};U(j,Q=>{s(C),x(()=>s(C)&&s(C).artist)&&Q(pe)})}var xe=b(j,2),Ee=h(xe);{var Me=Q=>{var ye=du(),Pe=h(ye);de(()=>fe(Pe,`${s(ae)??""} tracks`)),m(Q,ye)};U(Ee,Q=>{s(ae)>0&&Q(Me)})}var we=b(Ee,2);{var _e=Q=>{var ye=fu(),Pe=h(ye);de(()=>fe(Pe,s(X))),m(Q,ye)};U(we,Q=>{s(X)&&Q(_e)})}var Te=b(we,2);{var Fe=Q=>{var ye=hu(),Pe=h(ye);de(()=>fe(Pe,s(Z))),m(Q,ye)};U(Te,Q=>{s(Z)&&Q(Fe)})}var Ce=b(q,2),Be=h(Ce),ze=h(Be),le=b(Be,2),Y=h(le);de(()=>{fe(F,(s(u),x(()=>s(u).view==="albums_by_artist"?"Artist":"Album"))),gt(oe,"title",(s(u),x(()=>s(u).data.name||s(u).data.displayName))),fe(se,(s(u),x(()=>s(u).data.name||s(u).data.displayName||"Unknown"))),Be.disabled=s(_),fe(ze,s(_)?"Playing...":"Play All"),le.disabled=s(E),fe(Y,s(E)?"Added":"To Queue")}),z("click",Be,V),z("click",le,ne),m(L,R)},row:(L,re)=>{var R=_u();const H=et(()=>re.item),O=et(()=>re.index);var K=h(R);vs(K,{get track(){return s(H)},get index(){return s(O)},isEditable:!1,$$events:{play:()=>va(s(H))}}),m(L,R)}}})},P=T=>{var L=Cu(),re=h(L),R=h(re),H=h(R);ue(H,()=>(W(w),x(()=>w.SEARCH)));var O=b(R,2),K=b(O,2);{var ve=F=>{var oe=bu(),se=h(oe),j=h(se),pe=h(j),xe=b(j,2),Ee=h(xe);ue(Ee,()=>s(l));var Me=b(se,2);{var we=_e=>{var Te=mu(),Fe=Se(Te),Ce=b(Fe,2);Pt(Ce,5,()=>k,cn,(Be,ze)=>{var le=gu();let Y;var Q=h(le);de(()=>{Y=Ne(le,1,"sort-item svelte-1eh2rsb",null,Y,{selected:s(p)===s(ze).id}),fe(Q,(s(ze),x(()=>s(ze).label)))}),z("click",le,()=>$(s(ze).id)),m(Be,le)}),z("click",Fe,me),Rt(3,Fe,()=>wn,()=>({duration:100})),Rt(3,Ce,()=>Ii,()=>({start:.95,duration:100})),m(_e,Te)};U(Me,_e=>{s(y)&&_e(we)})}de(_e=>fe(pe,_e),[()=>(s(p),x(()=>k.find(_e=>_e.id===s(p))?.label))]),z("click",se,me),m(F,oe)};U(K,F=>{W(o()),s(u),x(()=>o()==="albums"||s(u).view==="albums_by_artist")&&F(ve)})}var ee=b(re,2);{var q=F=>{var oe=yu();Pt(oe,4,()=>Array(12),cn,(se,j)=>{var pe=wu(),xe=h(pe);yn(xe,{width:"100%",style:"aspect-ratio:1; border-radius:12px; margin-bottom:12px;"});var Ee=b(xe,2);yn(Ee,{width:"80%",height:"16px"}),m(se,pe)}),m(F,oe)},N=F=>{var oe=Au();Pt(oe,5,()=>s(c),se=>se._uid,(se,j)=>{var pe=Xe(),xe=Se(pe);{var Ee=we=>{var _e=ku(),Te=h(_e);de(()=>fe(Te,(s(j),x(()=>s(j).title)))),m(we,_e)},Me=we=>{var _e=Tu(),Te=h(_e),Fe=h(Te);{let $e=et(()=>(W($r),s(j),x(()=>$r(s(j),"md"))));Fn(Fe,{get src(){return s($e)},get alt(){return s(j),x(()=>s(j).displayName)},radius:"8px",$$slots:{fallback:(je,tt)=>{var nt=xu(),Kt=h(nt);{var Gt=rt=>{var wt=Xe(),Zt=Se(wt);ue(Zt,()=>(W(w),x(()=>w.ARTISTS))),m(rt,wt)},ht=rt=>{var wt=Xe(),Zt=Se(wt);ue(Zt,()=>(W(w),x(()=>w.ALBUMS))),m(rt,wt)};U(Kt,rt=>{o()==="artists"?rt(Gt):rt(ht,!1)})}m(je,nt)}}})}var Ce=b(Fe,2),Be=h(Ce),ze=h(Be);ue(ze,()=>(W(w),x(()=>w.PLAY)));var le=b(Te,2),Y=h(le),Q=b(le,2),ye=h(Q);{var Pe=$e=>{var je=Eu(),tt=h(je);de(()=>fe(tt,(s(j),x(()=>s(j).artist)))),m($e,je)};U(ye,$e=>{s(j),x(()=>s(j).artist)&&$e(Pe)})}var He=b(ye,2);{var Ue=$e=>{var je=Mu(),tt=h(je);de(()=>fe(tt,(s(j),x(()=>s(j).year)))),m($e,je)};U(He,$e=>{s(j),x(()=>s(j).year&&s(j).year!=="0")&&$e(Ue)})}var Ke=b(He,2);{var Ye=$e=>{var je=Su(),tt=h(je);de(nt=>fe(tt,nt),[()=>(s(j),x(()=>s(j).qualityBadge.split(" ")[0]))]),m($e,je)};U(Ke,$e=>{s(j),x(()=>s(j).qualityBadge)&&$e(Ye)})}de(()=>fe(Y,(s(j),x(()=>s(j).displayName)))),z("click",_e,()=>he(s(j))),z("keypress",_e,$e=>$e.key==="Enter"&&he(s(j))),m(we,_e)};U(xe,we=>{s(j),x(()=>s(j).isHeader)?we(Ee):we(Me,!1)})}m(se,pe)},se=>{var j=$u();m(se,j)}),m(F,oe)};U(ee,F=>{s(f)?F(q):F(N,!1)})}de(()=>gt(O,"placeholder",`Filter ${o()??""}...`)),ea(O,()=>s(d),F=>g(d,F)),m(T,L)};U(te,T=>{s(u),x(()=>s(u)?.view==="tracks_by_album")?T(S):T(P,!1)})}de(()=>I=Ne(B,1,"view-container svelte-1eh2rsb",null,I,{scrollable:s(u)?.view!=="tracks_by_album"})),m(e,B),ft(),i()}var Lu=M('<div class="music-card svelte-1otxnt7"><div class="skeleton-img svelte-1otxnt7"><!></div> <!></div>'),zu=M('<div class="music-grid svelte-1otxnt7"></div>'),Iu=M('<div slot="fallback" class="icon-fallback svelte-1otxnt7">ð»</div>'),Ou=M('<div class="quality-tag svelte-1otxnt7"> </div>'),Nu=M('<div class="status-badge playing svelte-1otxnt7">PLAYING</div>'),Du=M('<div class="status-badge paused svelte-1otxnt7">PAUSED</div>'),Fu=M('<span class="play-icon-wrap svelte-1otxnt7"><!></span>'),Bu=M('<div class="card-sub svelte-1otxnt7"> </div>'),ju=M('<div role="button" tabindex="0"><div class="card-img-container svelte-1otxnt7"><!> <!> <div class="play-overlay svelte-1otxnt7"><!></div></div> <div class="card-title svelte-1otxnt7"> </div> <!></div>'),qu=M('<div class="empty-state-container svelte-1otxnt7"><div class="empty-state-icon svelte-1otxnt7">ð</div> <div class="svelte-1otxnt7">No stations found</div></div>'),Uu=M('<div class="music-grid svelte-1otxnt7"></div> <!>',1),Hu=M('<div class="view-container scrollable content-padded svelte-1otxnt7"><div class="search-input-container svelte-1otxnt7"><span class="search-icon svelte-1otxnt7"><!></span> <input type="text" placeholder="Find station..." class="svelte-1otxnt7"/></div> <!></div>');function Yu(e,t){dt(t,!1);const n=()=>ge(kn,"$stations",l),r=()=>ge(ct,"$status",l),a=()=>ge(Hr,"$isLoadingRadio",l),i=()=>ge(Vt,"$currentSong",l),[l,c]=Lt(),u=A(),o=A();let v=A("");ie(()=>(n(),s(v)),()=>{g(u,n().filter(X=>{const Z=s(v).toLowerCase();return X.name.toLowerCase().includes(Z)||X.genre&&X.genre.toLowerCase().includes(Z)}))}),ie(()=>r(),()=>{g(o,r().bitrate?`${r().bitrate} kbps`:r().format||"")}),Bt(),bt();var f=Hu(),d=h(f),p=h(d),y=h(p);ue(y,()=>(W(w),x(()=>w.SEARCH)));var k=b(p,2),_=b(d,2);{var E=X=>{var Z=zu();Pt(Z,4,()=>Array(12),cn,(ae,ce)=>{var me=Lu(),$=h(me),D=h($);yn(D,{width:"100%",height:"100%"});var J=b($,2);yn(J,{width:"70%",height:"16px"}),m(ae,me)}),m(X,Z)},C=X=>{var Z=Uu(),ae=Se(Z);Pt(ae,5,()=>s(u),cn,($,D)=>{const J=et(()=>(s(D),x(()=>s(D).file))),he=et(()=>(i(),s(D),W(s(J)),x(()=>i().stationName===s(D).name||i().file===s(J)))),V=et(()=>(W(ir),s(D),x(()=>ir(s(D)))));var ne=ju();let B;var I=h(ne),te=h(I);Fn(te,{get src(){return s(V)},get alt(){return s(D),x(()=>s(D).name)},radius:"var(--radius-md)",$$slots:{fallback:(ee,q)=>{var N=Iu();m(ee,N)}}});var S=b(te,2);{var P=ee=>{var q=Ou(),N=h(q);de(()=>fe(N,s(o))),Rt(1,q,()=>wn),m(ee,q)};U(S,ee=>{s(he)&&s(o)&&ee(P)})}var T=b(S,2),L=h(T);{var re=ee=>{var q=Xe(),N=Se(q);{var F=se=>{var j=Nu();m(se,j)},oe=se=>{var j=Du();m(se,j)};U(N,se=>{r(),x(()=>r().state==="play")?se(F):se(oe,!1)})}m(ee,q)},R=ee=>{var q=Fu(),N=h(q);ue(N,()=>(W(w),x(()=>w.PLAY))),m(ee,q)};U(L,ee=>{s(he)?ee(re):ee(R,!1)})}var H=b(I,2),O=h(H),K=b(H,2);{var ve=ee=>{var q=Bu(),N=h(q);de(()=>fe(N,(s(D),x(()=>s(D).genre)))),m(ee,q)};U(K,ee=>{s(D),x(()=>s(D).genre)&&ee(ve)})}de(()=>{B=Ne(ne,1,"music-card svelte-1otxnt7",null,B,{"is-active":s(he)}),fe(O,(s(D),x(()=>s(D).name)))}),z("click",ne,()=>ua(s(D))),m($,ne)});var ce=b(ae,2);{var me=$=>{var D=qu();m($,D)};U(ce,$=>{s(u),n(),x(()=>s(u).length===0&&n().length>0)&&$(me)})}m(X,Z)};U(_,X=>{a()?X(E):X(C,!1)})}ea(k,()=>s(v),X=>g(v,X)),Rt(1,f,()=>wn,()=>({duration:200})),m(e,f),ft(),c()}var Wu=M('<span class="meta-tag svelte-m7c4tz">Loading...</span>'),Vu=M('<span class="meta-tag svelte-m7c4tz"> </span>'),Qu=M('<span class="meta-tag quality svelte-m7c4tz"> </span>'),Xu=M('<span class="meta-tag svelte-m7c4tz"> </span> <!> <!>',1),Ku=M('<div slot="header" class="content-padded svelte-m7c4tz"><div class="view-header svelte-m7c4tz"><div class="header-art svelte-m7c4tz"><div class="header-icon-wrap svelte-m7c4tz"><!></div></div> <div class="header-info svelte-m7c4tz"><div class="header-text-group svelte-m7c4tz"><div class="header-label svelte-m7c4tz">Playlist</div> <h1 class="header-title svelte-m7c4tz"> </h1> <div class="meta-badges svelte-m7c4tz"><!></div></div> <div class="header-actions svelte-m7c4tz"><button class="btn-primary svelte-m7c4tz"> </button> <button class="btn-secondary svelte-m7c4tz"> </button> <button title="Edit"><!></button></div></div></div></div>'),Gu=M('<div slot="row" class="svelte-m7c4tz"><!></div>'),Zu=M('<div class="music-card svelte-m7c4tz"><!> <!></div>'),Ju=M('<div class="content-padded svelte-m7c4tz"><div class="music-grid svelte-m7c4tz"></div></div>'),ev=M('<div class="music-card svelte-m7c4tz"><div class="card-img-container svelte-m7c4tz"><div class="icon-wrap svelte-m7c4tz"><!></div> <div class="play-overlay svelte-m7c4tz"><span class="overlay-icon svelte-m7c4tz"><!></span></div></div> <div class="card-title svelte-m7c4tz"> </div> <div class="card-sub svelte-m7c4tz"> </div></div>'),tv=M('<div class="content-padded svelte-m7c4tz"><div class="music-grid svelte-m7c4tz"><div class="music-card svelte-m7c4tz"><div class="card-img-container dashed-cover svelte-m7c4tz"><div class="icon-wrap svelte-m7c4tz"><!></div></div> <div class="card-title svelte-m7c4tz">New Playlist</div></div> <!></div></div>'),nv=M("<div><!></div>");function rv(e,t){dt(t,!1);const n=()=>ge(At,"$navigationStack",c),r=()=>ge(er,"$activePlaylistTracks",c),a=()=>ge(Fs,"$isLoadingTracks",c),i=()=>ge(sa,"$playlists",c),l=()=>ge(Ds,"$isLoadingPlaylists",c),[c,u]=Lt(),o=A(),v=A(),f=A();let d=A(!1),p=A(!1),y=A(!1),k=A(""),_=A("");dr(()=>{!s(v)&&i().length===0&&ca()});function E(B){const I=B.reduce((S,P)=>S+(parseFloat(P.time)||0),0);if(I>0){const S=Math.floor(I/3600),P=Math.floor(I%3600/60);g(k,S>0?`${S} hr ${P} min`:`${P} min`)}else g(k,"");const te=new Set;B.forEach(S=>{S.qualityBadge&&te.add(S.qualityBadge.split(" ")[0])}),g(_,te.size===1?B[0].qualityBadge:te.size>1?"Mixed":"")}function C(B){bn("details",B)}function X(){g(p,!0),Hs(s(o).data.name,0)}function Z(B){s(d)||Hs(s(o).data.name,B)}function ae(){if(r().length>0){const B=s(o).data.name.replace(/"/g,'\\"');oa(`load "${B}"`),g(y,!0),setTimeout(()=>{g(y,!1)},2e3)}}function ce(){g(d,!s(d))}function me(B){const I=s(o).data.name,te=r();te.splice(B,1),er.set(te),Wi(I,B),E(te)}function $(B,I){Vi(s(o).data.name,B,I)}ie(()=>n(),()=>{g(o,n()[n().length-1])}),ie(()=>s(o),()=>{g(v,s(o).view==="details")}),ie(()=>s(o),()=>{s(o)&&(g(p,!1),g(y,!1))}),ie(()=>(s(v),r(),a()),()=>{if(s(v)&&r().length>0){const B=r();if(!B[0]._uid){const I=B.map(te=>({...te,_uid:Math.random()}));er.set(I)}E(B)}else s(v)&&r().length===0&&!a()&&(g(k,"0 min"),g(_,""))}),ie(()=>(s(v),s(o),qc),()=>{s(v)&&s(o).data&&(g(d,!1),Hi(s(o).data.name))}),ie(()=>s(o),()=>{g(f,s(o)?.data?.name==="Favorites")}),Bt(),bt();var D=nv();let J;var he=h(D);{var V=B=>{ds(B,{get itemsStore(){return er},get isLoading(){return a()},get isEditMode(){return s(d)},emptyText:"This playlist is empty.",onMoveItem:$,$$slots:{header:(I,te)=>{var S=Ku(),P=h(S),T=h(P),L=h(T),re=h(L);ue(re,()=>(s(f),W(w),x(()=>s(f)?w.HEART_FILLED:w.PLAYLISTS)));var R=b(T,2),H=h(R),O=b(h(H),2),K=h(O),ve=b(O,2),ee=h(ve);{var q=we=>{var _e=Wu();m(we,_e)},N=we=>{var _e=Xu(),Te=Se(_e),Fe=h(Te),Ce=b(Te,2);{var Be=Y=>{var Q=Vu(),ye=h(Q);de(()=>fe(ye,s(k))),m(Y,Q)};U(Ce,Y=>{s(k)&&Y(Be)})}var ze=b(Ce,2);{var le=Y=>{var Q=Qu(),ye=h(Q);de(()=>fe(ye,s(_))),m(Y,Q)};U(ze,Y=>{s(_)&&Y(le)})}de(()=>fe(Fe,`${r(),x(()=>r().length)??""} tracks`)),m(we,_e)};U(ee,we=>{a()?we(q):we(N,!1)})}var F=b(H,2),oe=h(F),se=h(oe),j=b(oe,2),pe=h(j),xe=b(j,2);let Ee;var Me=h(xe);ue(Me,()=>(s(d),W(w),x(()=>s(d)?w.ACCEPT:w.EDIT))),de(()=>{Ze(T,`background: ${s(f),s(o),x(()=>s(f)?"linear-gradient(135deg, hsl(348, 95%, 58%), hsl(348, 90%, 40%))":s(o).data.color||"#333")??""};`),gt(O,"title",(s(o),x(()=>s(o).data.name))),fe(K,(s(o),x(()=>s(o).data.name))),oe.disabled=s(p),fe(se,s(p)?"Playing...":"Play All"),j.disabled=s(y),fe(pe,s(y)?"Added":"To Queue"),Ee=Ne(xe,1,"btn-action svelte-m7c4tz",null,Ee,{active:s(d)})}),z("click",oe,X),z("click",j,ae),z("click",xe,ce),m(I,S)},row:(I,te)=>{var S=Gu();const P=et(()=>te.item),T=et(()=>te.index),L=et(()=>te.startDrag);var re=h(S);vs(re,{get track(){return s(P)},get index(){return s(T)},get isEditable(){return s(d)},$$events:{play:()=>Z(s(T)),remove:()=>me(s(T)),startdrag(...R){s(L)?.apply(this,R)}}}),m(I,S)}}})},ne=B=>{var I=Xe(),te=Se(I);{var S=T=>{var L=Ju(),re=h(L);Pt(re,4,()=>Array(8),cn,(R,H)=>{var O=Zu(),K=h(O);yn(K,{width:"100%",style:"aspect-ratio: 1; border-radius: 12px; margin-bottom: 12px;"});var ve=b(K,2);yn(ve,{width:"60%",height:"16px"}),m(R,O)}),m(T,L)},P=T=>{var L=tv(),re=h(L),R=h(re),H=h(R),O=h(H),K=h(O);ue(K,()=>(W(w),x(()=>w.ADD)));var ve=b(R,2);Pt(ve,1,i,cn,(ee,q)=>{const N=et(()=>(s(q),x(()=>s(q).name==="Favorites")));var F=ev(),oe=h(F),se=h(oe),j=h(se);ue(j,()=>(W(s(N)),W(w),x(()=>s(N)?w.HEART_FILLED:w.PLAYLISTS)));var pe=b(se,2),xe=h(pe),Ee=h(xe);ue(Ee,()=>(W(w),x(()=>w.PLAY)));var Me=b(oe,2),we=h(Me),_e=b(Me,2),Te=h(_e);de(Fe=>{Ze(oe,`background: ${s(q),x(()=>s(q).color)??""};`),fe(we,(s(q),x(()=>s(q).name))),fe(Te,Fe)},[()=>(s(q),x(()=>s(q).lastModified?new Date(s(q).lastModified).toLocaleDateString():"Playlist"))]),z("click",F,()=>C(s(q))),m(ee,F)}),m(T,L)};U(te,T=>{l()?T(S):T(P,!1)},!0)}m(B,I)};U(he,B=>{s(v)?B(V):B(ne,!1)})}de(()=>J=Ne(D,1,"view-container svelte-m7c4tz",null,J,{scrollable:!s(v)})),m(e,D),ft(),u()}var sv=M('<div class="spinner svelte-1d3z1zm"></div>'),av=M('<div class="placeholder-state svelte-1d3z1zm"><div class="placeholder-icon svelte-1d3z1zm">ð</div> <p class="svelte-1d3z1zm">Type to search your library</p></div>'),iv=M('<div class="empty-text svelte-1d3z1zm"> </div>'),ov=M('<div slot="fallback" class="icon-fallback svelte-1d3z1zm">ð¿</div>'),lv=M('<div class="card-year svelte-1d3z1zm"> </div>'),cv=M('<div class="card-year quality svelte-1d3z1zm"> </div>'),uv=M('<div class="music-card svelte-1d3z1zm"><div class="card-img-container svelte-1d3z1zm"><!> <div class="play-overlay svelte-1d3z1zm"><span class="play-icon-wrap svelte-1d3z1zm"><!></span></div></div> <div class="card-title svelte-1d3z1zm"> </div> <div class="card-sub-row svelte-1d3z1zm"><div class="card-sub text-ellipsis svelte-1d3z1zm"> </div> <!> <!></div></div>'),vv=M('<div class="header-label section-spacing svelte-1d3z1zm">Albums</div> <div class="music-grid horizontal section-mb svelte-1d3z1zm"></div>',1),dv=M('<div class="header-label svelte-1d3z1zm">Tracks</div>'),fv=M("<!> <!>",1),hv=M('<div slot="header" class="content-padded svelte-1d3z1zm"><!></div>'),pv=M('<div slot="row" class="svelte-1d3z1zm"><!></div>'),_v=M('<div class="view-container svelte-1d3z1zm"><div class="content-padded no-bottom-pad svelte-1d3z1zm"><div class="search-input-container svelte-1d3z1zm"><span class="search-icon svelte-1d3z1zm"><!></span> <input type="text" placeholder="Artists, songs, or albums" autoFocus class="svelte-1d3z1zm"/> <!></div></div> <!></div>');function gv(e,t){dt(t,!1);const n=()=>ge(Jr,"$searchQuery",a),r=()=>ge(l,"$tracksStore",a),[a,i]=Lt(),l=Le([]);let c=A([]),u=A(!1),o,v=A(!1);dr(()=>{n().length>=2&&d(n())});function f(D){Jr.set(D.target.value),clearTimeout(o),o=setTimeout(()=>{d(n())},300)}async function d(D){const J=D.trim().toLowerCase();if(J.length<2){l.set([]),g(c,[]),g(v,!1);return}g(u,!0),g(v,!0);try{const he=await _n.search(J),V=he.map((B,I)=>({...B,_uid:B.file?`${B.file}-${I}`:`search-${I}`}));l.set(V);const ne=new Map;he.forEach(B=>{const I=B.album;if(I&&!ne.has(I)){const te=I.toLowerCase().includes(J),S=B.artist&&B.artist.toLowerCase().includes(J);if(te||S){let P=String(B.year||"");P.length>4&&(P=P.substring(0,4)),ne.set(I,{name:I,artist:B.artist,file:B.file,thumbHash:B.thumbHash,_uid:`alb-${I}`,year:P,qualityBadge:B.qualityBadge})}}}),g(c,Array.from(ne.values()))}finally{g(u,!1)}}function p(D){va(D)}function y(D){bn("tracks_by_album",D)}function k(D){D.deltaY!==0&&(D.currentTarget.scrollLeft+=D.deltaY)}bt();var _=_v(),E=h(_),C=h(E),X=h(C),Z=h(X);ue(Z,()=>w.SEARCH);var ae=b(X,2),ce=b(ae,2);{var me=D=>{var J=sv();m(D,J)};U(ce,D=>{s(u)&&D(me)})}var $=b(E,2);ds($,{get itemsStore(){return l},isEditMode:!1,isLoading:!1,emptyText:"",$$slots:{header:(D,J)=>{var he=hv(),V=h(he);{var ne=I=>{var te=av();m(I,te)},B=I=>{var te=Xe(),S=Se(te);{var P=L=>{var re=iv(),R=h(re);de(()=>fe(R,`No results found for "${n()??""}"`)),m(L,re)},T=L=>{var re=fv(),R=Se(re);{var H=ve=>{var ee=vv(),q=b(Se(ee),2);Pt(q,5,()=>s(c),N=>N._uid,(N,F)=>{var oe=uv(),se=h(oe),j=h(se);{let Y=et(()=>$r(s(F),"md"));Fn(j,{get src(){return s(Y)},get alt(){return s(F).name},radius:"var(--radius-md)",$$slots:{fallback:(Q,ye)=>{var Pe=ov();m(Q,Pe)}}})}var pe=b(j,2),xe=h(pe),Ee=h(xe);ue(Ee,()=>w.PLAY);var Me=b(se,2),we=h(Me),_e=b(Me,2),Te=h(_e),Fe=h(Te),Ce=b(Te,2);{var Be=Y=>{var Q=lv(),ye=h(Q);de(()=>fe(ye,s(F).year)),m(Y,Q)};U(Ce,Y=>{s(F).year&&s(F).year!=="0"&&s(F).year!==0&&Y(Be)})}var ze=b(Ce,2);{var le=Y=>{var Q=cv(),ye=h(Q);de(Pe=>fe(ye,Pe),[()=>s(F).qualityBadge.split(" ")[0]]),m(Y,Q)};U(ze,Y=>{s(F).qualityBadge&&Y(le)})}de(()=>{gt(Me,"title",s(F).name),fe(we,s(F).name),fe(Fe,s(F).artist)}),z("click",oe,()=>y(s(F))),m(N,oe)}),z("wheel",q,k),m(ve,ee)};U(R,ve=>{s(c).length>0&&ve(H)})}var O=b(R,2);{var K=ve=>{var ee=dv();m(ve,ee)};U(O,ve=>{r().length>0&&ve(K)})}m(L,re)};U(S,L=>{!s(u)&&r().length===0&&s(c).length===0&&s(v)?L(P):L(T,!1)},!0)}m(I,te)};U(V,I=>{n().length<2?I(ne):I(B,!1)})}m(D,he)},row:(D,J)=>{var he=pv();const V=et(()=>J.item),ne=et(()=>J.index);var B=h(he);vs(B,{get track(){return s(V)},get index(){return s(ne)},isEditable:!1,$$events:{play:()=>p(s(V))}}),m(D,he)}}}),de(()=>wl(ae,n())),z("input",ae,f),m(e,_),ft(),i()}var mv=M('<div class="knob svelte-1jla3sy"></div>'),bv=M('<div class="tooltip current svelte-1jla3sy"> </div> <span></span>',1),wv=M('<div slot="fallback" class="icon-fallback svelte-1jla3sy"><!></div>'),yv=M('<span class="quality-badge"> </span>'),kv=M('<div class="dot svelte-1jla3sy"></div>'),xv=M("<button><!> <!></button>"),Ev=M('<div class="dock svelte-1jla3sy"><div class="progress-shadow svelte-1jla3sy"></div> <div><div class="rail svelte-1jla3sy"></div> <div class="fill svelte-1jla3sy"><!></div> <!></div> <div class="grid svelte-1jla3sy"><div class="info svelte-1jla3sy"><div class="art svelte-1jla3sy"><!></div> <div class="meta svelte-1jla3sy"><div class="title-row svelte-1jla3sy"><div class="title text-ellipsis svelte-1jla3sy"> </div> <button class="btn-icon tiny-dots svelte-1jla3sy"><!></button></div> <div class="artist-row svelte-1jla3sy"><div class="artist text-ellipsis svelte-1jla3sy"> </div> <!></div></div></div> <div class="controls svelte-1jla3sy"><button><!></button> <button class="btn-icon"><!></button> <button class="play-btn flex-center svelte-1jla3sy"><!></button> <button class="btn-icon"><!></button> <!></div> <div class="volume desktop svelte-1jla3sy"><div class="vol-icon svelte-1jla3sy"><!></div> <div class="custom-slider svelte-1jla3sy"><div class="slider-bg svelte-1jla3sy"><div class="slider-fill svelte-1jla3sy"></div> <div class="slider-knob svelte-1jla3sy"></div></div></div></div></div></div>'),Mv=M("=== ./components/MiniPlayer.svelte === <!>",1);function Sv(e,t){dt(t,!1);const n=()=>ge(ct,"$status",c),r=()=>ge(Vt,"$currentSong",c),a=()=>ge(pn,"$favorites",c),i=()=>ge(kn,"$stations",c),l=()=>ge(Zr,"$isFullPlayerOpen",c),[c,u]=Lt(),o=A(),v=A(),f=A(),d=A(),p=A(),y=A(),k=A(),_=A(),E=A(),C=A(),X=A(),Z=A();let ae=A(!1),ce=A(!1),me=!1,$=A(0),D=A(),J=A();const he=O=>K=>{K.stopPropagation(),O()};function V(O){if(isNaN(O)||O===null)return"0:00";const K=Math.floor(O/60),ve=Math.floor(O%60);return`${K}:${ve<10?"0":""}${ve}`}function ne(O,K){const ve=K.getBoundingClientRect();return Math.max(0,Math.min(1,(O.clientX-ve.left)/ve.width))}function B(O){s(d)||(g(ce,!0),g($,ne(O,s(D))),window.addEventListener("mousemove",I),window.addEventListener("mouseup",te))}function I(O){if(s(ce)&&g($,ne(O,s(D))),me){const K=Math.round(ne(O,s(J))*100);Ar(K)}}function te(){s(ce)&&!s(d)&&la(s($)*s(o)),g(ce,!1),me=!1,window.removeEventListener("mousemove",I),window.removeEventListener("mouseup",te)}function S(O){me=!0;const K=Math.round(ne(O,s(J))*100);Ar(K),window.addEventListener("mousemove",I),window.addEventListener("mouseup",te)}function P(){const O=(s(Z)+1)%3;O===0?(n().random&&Rn(),n().repeat&&Ln()):O===1?(n().random||Rn(),n().repeat&&Ln()):O===2&&(n().random&&Rn(),n().repeat||Ln())}function T(O){O.stopPropagation(),es(O,r(),{type:"general",source:"miniplayer"})}function L(O){es(O.detail.originalEvent,r(),{type:"general",source:"miniplayer"})}ie(()=>n(),()=>{g(o,n().duration>0?n().duration:1)}),ie(()=>n(),()=>{g(v,n().elapsed||0)}),ie(()=>n(),()=>{g(f,n().state==="play")}),ie(()=>r(),()=>{g(d,r().file?.startsWith("http"))}),ie(()=>r(),()=>{g(p,r().title||"Not Playing")}),ie(()=>r(),()=>{g(y,r().stationName||r().artist||"Moode")}),ie(()=>(r(),a()),()=>{g(k,r().file&&a().has(r().file))}),ie(()=>(r(),i()),()=>{g(_,or(r(),i(),r().stationName))}),ie(()=>(s(d),s(ce),s($),s(v),s(o)),()=>{g(E,s(d)?0:s(ce)?s($)*100:s(v)/s(o)*100)}),ie(()=>(s(f),s(ce),s(d)),()=>{g(C,s(f)&&!s(ce)&&!s(d))}),ie(()=>n(),()=>{g(X,n().bitrate?`${n().bitrate} kbps`:n().format||"")}),ie(()=>n(),()=>{g(Z,n().repeat?2:n().random?1:0)}),Bt(),bt();var re=Mv(),R=b(Se(re));{var H=O=>{var K=Ev(),ve=h(K),ee=b(ve,2);let q;var N=b(h(ee),2),F=h(N);{var oe=Ae=>{var G=mv();m(Ae,G)};U(F,Ae=>{s(d)||Ae(oe)})}var se=b(N,2);{var j=Ae=>{var G=bv(),ke=Se(G),Ge=h(ke);de(yt=>{Ze(ke,`left: ${s(E)??""}%`),fe(Ge,yt)},[()=>(s(ce),s($),s(o),s(v),x(()=>s(ce)?V(s($)*s(o)):V(s(v))))]),m(Ae,G)};U(se,Ae=>{(s(ae)||s(ce))&&!s(d)&&Ae(j)})}Dn(ee,Ae=>g(D,Ae),()=>s(D));var pe=b(ee,2),xe=h(pe),Ee=h(xe),Me=h(Ee);Fn(Me,{get src(){return s(_)},alt:"art",radius:"4px",$$slots:{fallback:(Ae,G)=>{var ke=wv(),Ge=h(ke);ue(Ge,()=>(s(d),W(w),x(()=>s(d)?w.RADIO:w.ALBUMS))),m(Ae,ke)}}});var we=b(Ee,2),_e=h(we),Te=h(_e),Fe=h(Te),Ce=b(Te,2),Be=h(Ce);ue(Be,()=>(W(w),x(()=>w.DOTS)));var ze=b(_e,2),le=h(ze),Y=h(le),Q=b(le,2);{var ye=Ae=>{var G=yv(),ke=h(G);de(()=>fe(ke,s(X))),m(Ae,G)};U(Q,Ae=>{s(X)&&Ae(ye)})}var Pe=b(xe,2),He=h(Pe),Ue=hr(()=>he(()=>Bn.toggleFavorite(r())));let Ke;var Ye=h(He);ue(Ye,()=>(s(k),W(w),x(()=>s(k)?w.HEART_FILLED:w.HEART)));var $e=b(He,2),je=hr(()=>he(()=>Cr("previous"))),tt=h($e);ue(tt,()=>(W(w),x(()=>w.PREVIOUS)));var nt=b($e,2),Kt=hr(()=>he(us)),Gt=h(nt);ue(Gt,()=>(n(),W(w),x(()=>n().state==="play"?w.PAUSE:w.PLAY)));var ht=b(nt,2),rt=hr(()=>he(()=>Cr("next"))),wt=h(ht);ue(wt,()=>(W(w),x(()=>w.NEXT)));var Zt=b(ht,2);{var fr=Ae=>{var G=xv(),ke=hr(()=>he(P));let Ge;var yt=h(G);{var fs=Qe=>{var ut=Xe(),xn=Se(ut);ue(xn,()=>(W(w),x(()=>w.REPEAT))),m(Qe,ut)},hs=Qe=>{var ut=Xe(),xn=Se(ut);ue(xn,()=>(W(w),x(()=>w.SHUFFLE))),m(Qe,ut)};U(yt,Qe=>{s(Z)===2?Qe(fs):Qe(hs,!1)})}var ps=b(yt,2);{var _s=Qe=>{var ut=kv();m(Qe,ut)};U(ps,Qe=>{s(Z)>0&&Qe(_s)})}de(()=>Ge=Ne(G,1,"btn-icon desktop mode-btn svelte-1jla3sy",null,Ge,{active:s(Z)>0})),z("click",G,function(...Qe){s(ke)?.apply(this,Qe)}),m(Ae,G)};U(Zt,Ae=>{s(d)||Ae(fr)})}var jt=b(Pe,2),qt=h(jt),vn=h(qt);ue(vn,()=>(W(w),x(()=>w.VOLUME)));var Yn=b(qt,2),Wn=h(Yn),zr=h(Wn),Ir=b(zr,2);Dn(Yn,Ae=>g(J,Ae),()=>s(J)),Ht(()=>z("click",K,()=>Zr.set(!0))),Ci(K,(Ae,G)=>Qi?.(Ae,G),()=>500),Ht(()=>z("longpress",K,L)),de(()=>{Ze(ve,`width: ${s(E)??""}%; transition: ${s(C)?"width 0.25s linear":"none"}`),q=Ne(ee,1,"progress-bar svelte-1jla3sy",null,q,{radio:s(d)}),Ze(N,`width: ${s(E)??""}%; transition: ${s(C)?"width 0.25s linear":"none"}`),gt(Te,"title",s(p)),fe(Fe,s(p)),gt(le,"title",s(y)),fe(Y,s(y)),Ke=Ne(He,1,"btn-icon desktop svelte-1jla3sy",null,Ke,{liked:s(k)}),Ze(zr,`width: ${n(),x(()=>n().volume)??""}%`),Ze(Ir,`left: ${n(),x(()=>n().volume)??""}%`)}),z("mouseenter",ee,()=>g(ae,!0)),z("mouseleave",ee,()=>g(ae,!1)),z("mousedown",ee,Ot(B)),z("click",ee,Ot(function(Ae){Gr.call(this,t,Ae)})),z("click",Ce,T),z("click",He,function(...Ae){s(Ue)?.apply(this,Ae)}),z("click",$e,function(...Ae){s(je)?.apply(this,Ae)}),z("click",nt,function(...Ae){s(Kt)?.apply(this,Ae)}),z("click",ht,function(...Ae){s(rt)?.apply(this,Ae)}),z("mousedown",Yn,Ot(S)),z("click",Yn,Ot(function(Ae){Gr.call(this,t,Ae)})),m(O,K)};U(R,O=>{l()||O(H)})}m(e,re),ft(),u()}var Tv=M('<div class="drag-zone svelte-1olwzt8"><div class="drag-handle-icon svelte-1olwzt8"><!></div></div>'),$v=M('<div slot="fallback" class="icon-fallback svelte-1olwzt8"><!></div>'),Av=M('<span class="quality-badge"> </span>'),Cv=M('<span class="dot svelte-1olwzt8"></span>'),Pv=M("<button><!> <!></button>"),Rv=M('<div style="width: 44px;"></div>'),Lv=M('<div><!> <div class="bg-container svelte-1olwzt8"><div class="bg-gradient-fallback svelte-1olwzt8"></div> <img class="bg-img svelte-1olwzt8" alt="" loading="eager"/> <div class="bg-overlay svelte-1olwzt8"></div></div> <div class="player-body svelte-1olwzt8"><div class="art-container svelte-1olwzt8"><div class="artwork svelte-1olwzt8"><!></div></div> <div class="controls-area svelte-1olwzt8"><div class="meta svelte-1olwzt8"><h1 class="title text-ellipsis svelte-1olwzt8"> </h1> <div class="artist-row svelte-1olwzt8"><h2 class="artist text-ellipsis svelte-1olwzt8"> </h2> <!></div></div> <div class="progress-section"><div><div class="common-track svelte-1olwzt8"><div class="common-fill svelte-1olwzt8"><div class="common-knob svelte-1olwzt8"></div></div></div></div> <div class="time-row svelte-1olwzt8"><span> </span> <span> </span></div></div> <div class="buttons-row svelte-1olwzt8"><button><!></button> <button class="btn-icon side-btn svelte-1olwzt8"><!></button> <button class="play-btn-large flex-center svelte-1olwzt8"><!></button> <button class="btn-icon side-btn svelte-1olwzt8"><!></button> <!></div> <div class="volume-row svelte-1olwzt8"><div class="vol-icon svelte-1olwzt8"><!></div> <div class="volume-hit-area svelte-1olwzt8"><div class="common-track svelte-1olwzt8"><div class="common-fill svelte-1olwzt8"></div> <div class="common-knob svelte-1olwzt8"></div></div></div></div></div></div></div>');function Ua(e,t){dt(t,!1);const n=()=>ge(Vt,"$currentSong",l),r=()=>ge(kn,"$stations",l),a=()=>ge(ct,"$status",l),i=()=>ge(pn,"$favorites",l),[l,c]=Lt(),u=A(),o=A(),v=A(),f=A(),d=A(),p=A(),y=A(),k=A(),_=A(),E=A();let C=st(t,"isDocked",8,!1),X=0,Z=A(0),ae=A(!1);function ce(){Zr.set(!1)}function me(G){if(C())return;const ke=G.target;ke.closest(".bar-hit-area")||ke.closest(".volume-hit-area")||(X=G.touches[0].clientY,g(ae,!0))}function $(G){if(!s(ae)||C())return;const ke=G.touches[0].clientY-X;ke>0&&(G.cancelable&&ke>10&&G.preventDefault(),g(Z,ke))}function D(){C()||(g(ae,!1),s(Z)>150?ce():g(Z,0))}let J=A(!1),he=A(0),V=A();function ne(G){const ke=Math.floor(G/60)||0,Ge=Math.floor(G%60)||0;return`${ke}:${Ge.toString().padStart(2,"0")}`}function B(G,ke){const Ge=ke.getBoundingClientRect(),yt=G.touches?G.touches[0].clientX:G.clientX;return Math.max(0,Math.min(1,(yt-Ge.left)/Ge.width))}function I(G){s(f)||(g(J,!0),g(he,B(G,s(V))))}function te(G){s(J)&&g(he,B(G,s(V)))}function S(){s(J)&&!s(f)&&la(s(he)*s(o)),g(J,!1)}let P=!1,T=A();function L(G){P=!0;const ke=Math.round(B(G,s(T))*100);Ar(ke),window.addEventListener("mousemove",re),window.addEventListener("mouseup",R),window.addEventListener("touchmove",re,{passive:!1}),window.addEventListener("touchend",R)}function re(G){if(P){G.preventDefault();const ke=Math.round(B(G,s(T))*100);Ar(ke)}}function R(){P=!1,window.removeEventListener("mousemove",re),window.removeEventListener("mouseup",R),window.removeEventListener("touchmove",re),window.removeEventListener("touchend",R)}function H(){const G=(s(k)+1)%3;G===0?(a().random&&Rn(),a().repeat&&Ln()):G===1?(a().random||Rn(),a().repeat&&Ln()):G===2&&(a().random&&Rn(),a().repeat||Ln())}ie(()=>(n(),r()),()=>{g(u,or(n(),r(),n().stationName))}),ie(()=>a(),()=>{g(o,a().duration||1)}),ie(()=>a(),()=>{g(v,a().elapsed||0)}),ie(()=>n(),()=>{g(f,n().file?.startsWith("http"))}),ie(()=>a(),()=>{g(d,a().state==="play")}),ie(()=>(s(d),s(J),s(f)),()=>{g(p,s(d)&&!s(J)&&!s(f))}),ie(()=>(s(f),s(J),s(he),s(v),s(o)),()=>{g(y,s(f)?0:s(J)?s(he)*100:s(v)/s(o)*100)}),ie(()=>a(),()=>{g(k,a().repeat?2:a().random?1:0)}),ie(()=>a(),()=>{g(_,a().bitrate?`${a().bitrate} kbps`:a().format||"")}),ie(()=>(n(),i()),()=>{g(E,n().file&&i().has(n().file))}),Bt(),bt();var O=Lv();let K;var ve=h(O);{var ee=G=>{var ke=Tv(),Ge=h(ke),yt=h(Ge);ue(yt,()=>(W(w),x(()=>w.CHEVRON_DOWN))),z("touchstart",ke,me),z("touchmove",ke,$),z("touchend",ke,D),z("click",ke,ce),m(G,ke)};U(ve,G=>{C()||G(ee)})}var q=b(ve,2),N=b(h(q),2),F=b(q,2),oe=h(F),se=h(oe),j=h(se);Fn(j,{get src(){return s(u)},alt:"Cover",radius:"var(--radius-xl)",$$slots:{fallback:(G,ke)=>{var Ge=$v(),yt=h(Ge);ue(yt,()=>(s(f),W(w),x(()=>s(f)?w.RADIO:w.ALBUMS))),m(G,Ge)}}});var pe=b(oe,2),xe=h(pe),Ee=h(xe),Me=h(Ee),we=b(Ee,2),_e=h(we),Te=h(_e),Fe=b(_e,2);{var Ce=G=>{var ke=Av(),Ge=h(ke);de(()=>fe(Ge,s(_))),m(G,ke)};U(Fe,G=>{s(_)&&G(Ce)})}var Be=b(xe,2),ze=h(Be);let le;var Y=h(ze),Q=h(Y);Dn(ze,G=>g(V,G),()=>s(V));var ye=b(ze,2),Pe=h(ye),He=h(Pe),Ue=b(Pe,2),Ke=h(Ue),Ye=b(Be,2),$e=h(Ye);let je;var tt=h($e);ue(tt,()=>(s(E),W(w),x(()=>s(E)?w.HEART_FILLED:w.HEART)));var nt=b($e,2),Kt=h(nt);ue(Kt,()=>(W(w),x(()=>w.PREVIOUS)));var Gt=b(nt,2),ht=h(Gt);ue(ht,()=>(a(),W(w),x(()=>a().state==="play"?w.PAUSE:w.PLAY)));var rt=b(Gt,2),wt=h(rt);ue(wt,()=>(W(w),x(()=>w.NEXT)));var Zt=b(rt,2);{var fr=G=>{var ke=Pv();let Ge;var yt=h(ke);{var fs=Qe=>{var ut=Xe(),xn=Se(ut);ue(xn,()=>(W(w),x(()=>w.REPEAT))),m(Qe,ut)},hs=Qe=>{var ut=Xe(),xn=Se(ut);ue(xn,()=>(W(w),x(()=>w.SHUFFLE))),m(Qe,ut)};U(yt,Qe=>{s(k)===2?Qe(fs):Qe(hs,!1)})}var ps=b(yt,2);{var _s=Qe=>{var ut=Cv();m(Qe,ut)};U(ps,Qe=>{s(k)>0&&Qe(_s)})}de(()=>Ge=Ne(ke,1,"btn-icon side-btn mode-btn svelte-1olwzt8",null,Ge,{active:s(k)>0})),z("click",ke,H),m(G,ke)},jt=G=>{var ke=Rv();m(G,ke)};U(Zt,G=>{s(f)?G(jt,!1):G(fr)})}var qt=b(Ye,2),vn=h(qt),Yn=h(vn);ue(Yn,()=>(W(w),x(()=>w.VOLUME)));var Wn=b(vn,2),zr=h(Wn),Ir=h(zr),Ae=b(Ir,2);Dn(Wn,G=>g(T,G),()=>s(T)),de((G,ke)=>{K=Ne(O,1,"full-player svelte-1olwzt8",null,K,{"is-docked":C()}),Ze(O,C()?"":`transform: translateY(${s(Z)}px); transition: ${s(ae)?"none":"transform 0.3s cubic-bezier(0.2, 0.8, 0.2, 1)"}`),gt(N,"src",s(u)),Ze(se,`transform: scale(${1-s(Z)/3e3})`),Ze(pe,`opacity: ${1-s(Z)/400}`),fe(Me,(n(),x(()=>n().title||"Not Playing"))),fe(Te,(n(),x(()=>n().stationName||n().artist||"Moode Audio"))),le=Ne(ze,1,"bar-hit-area svelte-1olwzt8",null,le,{"is-docked-bar":C()}),Ze(Q,`width: ${s(y)??""}%; transition: ${s(p)?"width 0.3s linear":"none"}`),fe(He,G),fe(Ke,ke),je=Ne($e,1,"btn-icon side-btn svelte-1olwzt8",null,je,{liked:s(E)}),Ze(Ir,`width: ${a(),x(()=>a().volume)??""}%`),Ze(Ae,`left: ${a(),x(()=>a().volume)??""}%; right: auto;`)},[()=>(s(J),s(he),s(o),s(v),x(()=>s(J)?ne(s(he)*s(o)):ne(s(v)))),()=>(s(f),s(o),x(()=>s(f)?"LIVE":ne(s(o))))]),z("mousedown",ze,I),z("touchstart",ze,I,void 0,!0),z("mousemove",ze,function(...G){(s(J)?te:null)?.apply(this,G)}),z("touchmove",ze,function(...G){(s(J)?te:null)?.apply(this,G)},void 0,!0),z("mouseup",ze,S),z("touchend",ze,S),z("click",$e,()=>Bn.toggleFavorite(n())),z("click",nt,()=>Cr("previous")),z("click",Gt,function(...G){us?.apply(this,G)}),z("click",rt,()=>Cr("next")),z("mousedown",Wn,Ot(L)),z("touchstart",Wn,Ot(L)),Rt(3,O,()=>zi,()=>({y:C()?0:800,duration:300,opacity:1})),m(e,O),ft(),c()}const zv="/assets/wave-logo-C1390byt.svg",Ys={async syncLibrary(){if(Re(It))return;It.set(!0);const e=new Bi,t=window.location.origin+"/wave-api.php";e.postMessage({type:"START_SYNC",payload:{url:t}}),e.onmessage=n=>{const{type:r,status:a,count:i,message:l}=n.data;if(r==="PROGRESS"){const c={connecting:"Requesting library...",downloading:"Downloading data...",parsing:"Processing metadata...",saving:`Saving ${i} tracks...`};c[a]&&Oe(c[a],"info")}r==="DONE"&&(Oe(`Library updated: ${i} tracks`,"success"),It.set(!1),e.terminate()),r==="ERROR"&&(console.error("[API] Sync Error:",l),Oe(`Sync Failed: ${l}`,"error"),It.set(!1),e.terminate())},e.onerror=n=>{console.error("[API] Worker crash:",n),Oe("Sync worker crashed","error"),It.set(!1),e.terminate()}},async loadRadioStations(){if(!Re(Hr)){Hr.set(!0);try{const t=await fetch(yc.STATIONS(!1));if(!t.ok)throw new Error("Network error");const n=await t.json();if(n.error)throw new Error(n.error);if(!Array.isArray(n))throw new Error("Invalid response format");const r=n.map(a=>({id:a.id,name:a.name,file:a.station,station:a.station,image:a.logo,genre:a.genre||"Radio"}));r.sort((a,i)=>a.name.localeCompare(i.name,void 0,{sensitivity:"base"})),kn.set(r)}catch(e){console.error("[API] Failed to load stations",e),Oe("Failed to load radio","error")}finally{Hr.set(!1)}}}};var Iv=M('<div class="backdrop svelte-ji5owg"></div>'),Ov=M('<button><span class="icon svelte-ji5owg"><!></span> <span> </span></button>'),Nv=M('<!> <aside><div class="header svelte-ji5owg"><div class="header-inner svelte-ji5owg"><button class="collapse-btn svelte-ji5owg"><div class="chevron svelte-ji5owg"><!></div></button> <div><img alt="Logo" class="logo svelte-ji5owg"/></div></div> <button class="btn-icon mobile-close svelte-ji5owg"><!></button></div> <div class="scroll-area custom-scrollbar svelte-ji5owg"><nav class="svelte-ji5owg"><!> <button title="Search"><span class="icon svelte-ji5owg"><!></span> <span>Search</span></button> <div class="sep svelte-ji5owg"></div> <button class="nav-item sync svelte-ji5owg" title="Update Library"><span><!></span> <span> </span></button> <div><div class="settings svelte-ji5owg"><div class="row svelte-ji5owg"><input type="text" placeholder="192.168..." class="svelte-ji5owg"/> <button class="save svelte-ji5owg">OK</button></div></div></div></nav> <div class="footer svelte-ji5owg"><div>Moode WaveUI</div></div></div></aside>',1);function Dv(e,t){dt(t,!1);const n=()=>ge(It,"$isSyncingLibrary",i),r=()=>ge(Bs,"$isSidebarCollapsed",i),a=()=>ge(xt,"$activeMenuTab",i),[i,l]=Lt(),c=A();let u=st(t,"isOpen",8,!1);const o=ra();let v=A(0),f=A(0),d=A(!1);const p=[{id:"queue",label:"Queue",icon:w.MENU},{id:"favorites",label:"Favorites",icon:w.HEART},{id:"artists",label:"Artists",icon:w.ARTISTS},{id:"albums",label:"Albums",icon:w.ALBUMS},{id:"playlists",label:"Playlists",icon:w.PLAYLISTS},{id:"radio",label:"Radio",icon:w.RADIO}];let y=A(Sr.MOODE_IP);function k(Y){window.location.hash=`/${Y}`,o("close")}async function _(){n()||(await Ys.syncLibrary(),window.location.hash="/artists")}function E(){Bs.update(Y=>!Y)}function C(Y){u()&&(g(v,Y.touches[0].clientX),g(f,s(v)),g(d,!0))}function X(Y){s(d)&&g(f,Y.touches[0].clientX)}function Z(){s(d)&&(s(f)-s(v)<-70&&o("close"),g(d,!1),g(v,0),g(f,0))}ie(()=>(s(d),s(f),s(v)),()=>{g(c,s(d)?Math.min(0,s(f)-s(v)):0)}),Bt(),bt();var ae=Nv(),ce=Se(ae);{var me=Y=>{var Q=Iv();z("click",Q,()=>o("close")),Rt(3,Q,()=>wn,()=>({duration:200})),m(Y,Q)};U(ce,Y=>{u()&&Y(me)})}var $=b(ce,2);let D,J;var he=h($),V=h(he),ne=h(V),B=h(ne),I=h(B);ue(I,()=>(W(w),x(()=>w.BACK)));var te=b(ne,2);let S;var P=h(te),T=b(V,2),L=h(T);ue(L,()=>(W(w),x(()=>w.CLOSE)));var re=b(he,2),R=h(re),H=h(R);Pt(H,1,()=>p,cn,(Y,Q)=>{var ye=Ov();let Pe;var He=h(ye),Ue=h(He);ue(Ue,()=>(s(Q),x(()=>s(Q).icon)));var Ke=b(He,2);let Ye;var $e=h(Ke);de(()=>{Pe=Ne(ye,1,"nav-item svelte-ji5owg",null,Pe,{active:a()===s(Q).id}),gt(ye,"title",(s(Q),x(()=>s(Q).label))),Ye=Ne(Ke,1,"label-text svelte-ji5owg",null,Ye,{hidden:r()}),fe($e,(s(Q),x(()=>s(Q).label)))}),z("click",ye,()=>k(s(Q).id)),m(Y,ye)});var O=b(H,2);let K;var ve=h(O),ee=h(ve);ue(ee,()=>(W(w),x(()=>w.SEARCH)));var q=b(ve,2);let N;var F=b(O,4),oe=h(F);let se;var j=h(oe);ue(j,()=>(W(w),x(()=>w.SYNC)));var pe=b(oe,2);let xe;var Ee=h(pe),Me=b(F,2);let we;var _e=h(Me),Te=h(_e),Fe=h(Te),Ce=b(Fe,2),Be=b(R,2),ze=h(Be);let le;de(()=>{D=Ne($,1,"side-menu svelte-ji5owg",null,D,{"mobile-open":u(),collapsed:r()}),J=Ze($,"",J,{transform:u()?`translateX(${s(c)}px)`:"",transition:s(d)?"none":"width 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.3s ease"}),gt(ne,"title",r()?"Expand":"Collapse"),Ze(B,`transform: rotate(${r()?"180deg":"0deg"})`),S=Ne(te,1,"logo-wrapper svelte-ji5owg",null,S,{hidden:r()}),gt(P,"src",zv),K=Ne(O,1,"nav-item svelte-ji5owg",null,K,{active:a()==="search"}),N=Ne(q,1,"label-text svelte-ji5owg",null,N,{hidden:r()}),F.disabled=n(),se=Ne(oe,1,"icon svelte-ji5owg",null,se,{spin:n()}),xe=Ne(pe,1,"label-text svelte-ji5owg",null,xe,{hidden:r()}),fe(Ee,n()?"Syncing...":"Update Library"),we=Ne(Me,1,"settings-wrapper svelte-ji5owg",null,we,{hidden:r()}),le=Ne(ze,1,"footer-text svelte-ji5owg",null,le,{hidden:r()})}),z("click",ne,E),z("click",T,()=>o("close")),z("click",O,()=>k("search")),z("click",F,_),ea(Fe,()=>s(y),Y=>g(y,Y)),z("click",Ce,()=>{Sr.setMoodeIp(s(y)),location.reload()}),z("touchstart",$,C),z("touchmove",$,X),z("touchend",$,Z),m(e,ae),ft(),l()}var Fv=M('<span class="meta-tag svelte-185fgrr"> </span>'),Bv=M('<div slot="header" class="view-header svelte-185fgrr"><div class="header-info svelte-185fgrr"><h1 class="header-title svelte-185fgrr">Current Queue</h1> <div class="meta-badges svelte-185fgrr"><span class="meta-tag svelte-185fgrr"> </span> <!></div></div> <div class="header-actions svelte-185fgrr"><button class="btn-action svelte-185fgrr" title="Save Queue"><!></button> <button><!></button></div></div>'),jv=M('<div slot="row" class="svelte-185fgrr"><!></div>'),qv=M('<div class="view-container svelte-185fgrr"><!></div>');function Uv(e,t){dt(t,!1);const n=()=>ge(Tr,"$queue",r),[r,a]=Lt();let i=A(!1),l=A("");function c(){g(i,!s(i))}function u(y){s(i)||oa(`play ${y}`)}function o(y){Nt.removeFromQueue(y)}async function v(){const y=prompt("Enter playlist name:");y&&(await Nt.saveQueue(y),ca())}function f(y,k){Nt.moveTrack(y,k)}ie(()=>n(),()=>{if(n().length>=0){const y=n().reduce((k,_)=>k+(parseFloat(_.time)||0),0);if(y>0){const k=Math.floor(y/3600),_=Math.floor(y%3600/60);k>0?g(l,`${k} hr ${_} min`):g(l,`${_} min`)}else g(l,"")}}),Bt(),bt();var d=qv(),p=h(d);ds(p,{get itemsStore(){return Tr},get isEditMode(){return s(i)},emptyText:"Queue is empty",onMoveItem:f,$$slots:{header:(y,k)=>{var _=Bv(),E=h(_),C=b(h(E),2),X=h(C),Z=h(X),ae=b(X,2);{var ce=ne=>{var B=Fv(),I=h(B);de(()=>fe(I,s(l))),m(ne,B)};U(ae,ne=>{s(l)&&ne(ce)})}var me=b(E,2),$=h(me),D=h($);ue(D,()=>(W(w),x(()=>w.SAVE)));var J=b($,2);let he;var V=h(J);ue(V,()=>(s(i),W(w),x(()=>s(i)?w.ACCEPT:w.EDIT))),de(()=>{fe(Z,`${n(),x(()=>n().length)??""} tracks`),he=Ne(J,1,"btn-action svelte-185fgrr",null,he,{active:s(i)}),gt(J,"title",s(i)?"Finish Editing":"Edit Queue")}),z("click",$,v),z("click",J,c),m(y,_)},row:(y,k)=>{var _=jv();const E=et(()=>k.item),C=et(()=>k.index),X=et(()=>k.startDrag);var Z=h(_);vs(Z,{get track(){return s(E)},get index(){return s(C)},get isEditable(){return s(i)},$$events:{play:()=>u(s(C)),remove:()=>o(s(C)),startdrag(...ae){s(X)?.apply(this,ae)}}}),m(y,_)}}}),m(e,d),ft(),a()}var Hv=M('<div class="toast-container svelte-k2bvk7"><div> </div></div>'),Yv=M('<button class="back-btn svelte-k2bvk7"><span class="icon-inline svelte-k2bvk7"><!></span> Back</button>'),Wv=M('<div class="view-title svelte-k2bvk7"><!></div>'),Vv=M('<div class="full-player-modal svelte-k2bvk7"><!></div>'),Qv=M('<div class="app-container svelte-k2bvk7"><div class="app-layout svelte-k2bvk7"><!> <!> <main class="content-area svelte-k2bvk7"><header class="top-bar svelte-k2bvk7"><button class="hamburger-btn svelte-k2bvk7"><!></button> <!></header> <div class="scroll-container svelte-k2bvk7"><div class="view-wrapper svelte-k2bvk7"><!></div></div></main> <div class="docked-player-container svelte-k2bvk7"><!></div></div> <div class="mini-player-wrapper svelte-k2bvk7"><!></div></div> <!>',1);function Xv(e,t){dt(t,!1);const n=()=>ge(At,"$navigationStack",l),r=()=>ge(Ns,"$toastMessage",l),a=()=>ge(xt,"$activeMenuTab",l),i=()=>ge(Zr,"$isFullPlayerOpen",l),[l,c]=Lt();let u=A(!1);dr(()=>{window.history.replaceState({depth:n().length},"","");const S=()=>void 0;return window.addEventListener("popstate",S),()=>window.removeEventListener("popstate",S)}),bt();var o=Qv(),v=Se(o),f=h(v),d=h(f);{var p=S=>{var P=Hv(),T=h(P),L=h(T);de(()=>{Ne(T,1,`toast-body ${r().type??""}`,"svelte-k2bvk7"),fe(L,r().text)}),Rt(3,P,()=>zi,()=>({y:-50,duration:300})),m(S,P)};U(d,S=>{r()&&S(p)})}var y=b(d,2);Dv(y,{get isOpen(){return s(u)},$$events:{close:()=>g(u,!1)}});var k=b(y,2),_=h(k),E=h(_),C=h(E);ue(C,()=>w.MENU);var X=b(E,2);{var Z=S=>{var P=Yv(),T=h(P),L=h(T);ue(L,()=>w.BACK),z("click",P,function(...re){wc?.apply(this,re)}),m(S,P)},ae=S=>{var P=Wv(),T=h(P);{var L=R=>{var H=Vn("Radio");m(R,H)},re=R=>{var H=Xe(),O=Se(H);{var K=ee=>{var q=Vn("Playlists");m(ee,q)},ve=ee=>{var q=Xe(),N=Se(q);{var F=se=>{var j=Vn("Search");m(se,j)},oe=se=>{var j=Xe(),pe=Se(j);{var xe=Me=>{var we=Vn("Queue");m(Me,we)},Ee=Me=>{var we=Xe(),_e=Se(we);{var Te=Ce=>{var Be=Vn("Favorites");m(Ce,Be)},Fe=Ce=>{var Be=Vn();de(ze=>fe(Be,ze),[()=>(a()||"Library").charAt(0).toUpperCase()+(a()||"library").slice(1)]),m(Ce,Be)};U(_e,Ce=>{a()==="favorites"?Ce(Te):Ce(Fe,!1)},!0)}m(Me,we)};U(pe,Me=>{a()==="queue"?Me(xe):Me(Ee,!1)},!0)}m(se,j)};U(N,se=>{a()==="search"?se(F):se(oe,!1)},!0)}m(ee,q)};U(O,ee=>{a()==="playlists"?ee(K):ee(ve,!1)},!0)}m(R,H)};U(T,R=>{a()==="radio"?R(L):R(re,!1)})}m(S,P)};U(X,S=>{n().length>1?S(Z):S(ae,!1)})}var ce=b(_,2),me=h(ce),$=h(me);{var D=S=>{Yu(S,{})},J=S=>{var P=Xe(),T=Se(P);{var L=R=>{Uv(R,{})},re=R=>{var H=Xe(),O=Se(H);{var K=ee=>{rv(ee,{})},ve=ee=>{var q=Xe(),N=Se(q);{var F=se=>{gv(se,{})},oe=se=>{Ru(se,{get activeCategory(){return a()}})};U(N,se=>{a()==="search"?se(F):se(oe,!1)},!0)}m(ee,q)};U(O,ee=>{a()==="playlists"||a()==="favorites"?ee(K):ee(ve,!1)},!0)}m(R,H)};U(T,R=>{a()==="queue"?R(L):R(re,!1)},!0)}m(S,P)};U($,S=>{a()==="radio"?S(D):S(J,!1)})}var he=b(k,2),V=h(he);Ua(V,{isDocked:!0});var ne=b(f,2),B=h(ne);Sv(B,{});var I=b(v,2);{var te=S=>{var P=Vv(),T=h(P);Ua(T,{}),m(S,P)};U(I,S=>{i()&&S(te)})}z("click",E,()=>g(u,!0)),m(e,o),ft(),c()}var Kv=M('<button class="back-btn-area svelte-l8h85k"><span class="back-icon svelte-l8h85k"><!></span></button> <span class="header-title svelte-l8h85k">Select Playlist</span>',1),Gv=M('<div class="track-info svelte-l8h85k"><div class="title text-ellipsis svelte-l8h85k"> </div> <div class="artist text-ellipsis svelte-l8h85k"> </div></div>'),Zv=M('<button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span> </span></button>'),Jv=M('<div class="empty-msg svelte-l8h85k">No custom playlists</div>'),ed=M("<!> <!>",1),td=M('<button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Go to Album</span></button> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Go to Artist</span></button>',1),nd=M('<div class="sep svelte-l8h85k"></div> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Remove from Playlist</span></button>',1),rd=M('<div class="sep svelte-l8h85k"></div> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Remove from Queue</span></button>',1),sd=M('<button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Play Next</span></button> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Add to Queue</span></button> <button class="menu-row svelte-l8h85k"><span class="icon svelte-l8h85k"><!></span> <span>Add to Playlist...</span></button> <!> <button class="menu-row svelte-l8h85k"><span><!></span> <span> </span></button> <!> <!>',1),ad=M('<div class="backdrop svelte-l8h85k"><div class="menu-card svelte-l8h85k"><div class="menu-header svelte-l8h85k"><!></div> <div class="menu-items scroll-y svelte-l8h85k"><!></div></div></div>');function id(e,t){dt(t,!1);const n=()=>ge(aa,"$contextMenu",i),r=()=>ge(pn,"$favorites",i),a=()=>ge(sa,"$playlists",i),[i,l]=Lt(),c=A(),u=A(),o=A(),v=A(),f=A(),d=A();let p=A(),y=A(),k=A(),_=A(0),E=A(0),C=A("main");function X(){Jt()}function Z(){n().track&&Nt.playNext(n().track.file),Jt()}function ae(){n().track&&Nt.addToQueue(n().track.file),Jt()}function ce(){n().track&&Bn.toggleFavorite(n().track),Jt()}function me(){const S=n().track;S&&S.album&&bn("tracks_by_album",{name:S.album,artist:S.artist}),Jt()}function $(){const S=n().track;S&&S.artist&&bn("albums_by_artist",{name:S.artist}),Jt()}async function D(){const{playlistName:S,index:P}=n().context;S&&P!==null&&(er.update(T=>{const L=[...T];return L.splice(P,1),L}),await Bn.removeFromPlaylist(S,P)),Jt()}function J(){const{index:S}=n().context;S!=null&&Nt.removeFromQueue(S),Jt()}function he(){g(C,"playlists")}function V(){g(C,"main")}async function ne(S){const P=n().track;if(P)try{const T=S.replace(/"/g,'\\"'),L=P.file.replace(/"/g,'\\"');await be.send(`playlistadd "${T}" "${L}"`),Oe(`Added to "${S}"`,"success"),Jt()}catch(T){console.error(T),Oe("Failed to add","error")}}ie(()=>n(),()=>{n().isOpen&&g(C,"main")}),ie(()=>(n(),r()),()=>{g(c,n().track&&r().has(n().track.file))}),ie(()=>n(),()=>{g(u,n().track&&(n().track.file.includes("http")||n().track.file.includes("://")))}),ie(()=>n(),()=>{g(o,n().context?.type==="playlist")}),ie(()=>n(),()=>{g(v,n().context?.type==="queue")}),ie(()=>n(),()=>{g(f,n().context?.source==="miniplayer")}),ie(()=>(n(),s(E),s(_),s(p),s(f),s(y)),()=>{g(d,(()=>{if(!n().isOpen)return"";const S=n().triggerRect,P=n().x,T=n().y,L=s(E)||220,re=s(_)||320;if(s(p)<=768&&s(f)&&S)return`
        position: fixed; 
        bottom: ${s(y)-S.top}px; 
        left: 50%; 
        transform: translateX(-50%); 
        margin: 0; 
        transform-origin: bottom center;
      `;let R=0,H=0,O="top left";if(S){const ve=S.left+S.width/2,ee=S.top+S.height/2,q=ve>s(p)/2,N=ee>s(y)/2;q?(R=S.right-L,O=N?"bottom right":"top right"):(R=S.left,O=N?"bottom left":"top left"),N?H=S.top-re:H=S.bottom}else R=P,H=T,R+L>s(p)&&(R=s(p)-L-10),H+re>s(y)&&(H=s(y)-re-10);const K=8;return R<K&&(R=K),R+L>s(p)-K&&(R=s(p)-L-K),H<K&&(H=K),H+re>s(y)-K&&(H=s(y)-re-K),`position: fixed; top: ${H}px; left: ${R}px; margin: 0; transform-origin: ${O};`})())}),Bt(),bt();var B=Xe(),I=Se(B);{var te=S=>{var P=ad(),T=h(P),L=h(T),re=h(L);{var R=q=>{var N=Kv(),F=Se(N),oe=h(F),se=h(oe);ue(se,()=>(W(w),x(()=>w.BACK))),z("click",F,V),m(q,N)},H=q=>{var N=Gv(),F=h(N),oe=h(F),se=b(F,2),j=h(se);de(()=>{fe(oe,(n(),x(()=>n().track.title))),fe(j,(n(),x(()=>n().track.artist)))}),m(q,N)};U(re,q=>{s(C)==="playlists"?q(R):q(H,!1)})}var O=b(L,2),K=h(O);{var ve=q=>{var N=ed(),F=Se(N);Pt(F,1,a,cn,(j,pe)=>{var xe=Xe(),Ee=Se(xe);{var Me=we=>{var _e=Zv(),Te=h(_e),Fe=h(Te);ue(Fe,()=>(W(w),x(()=>w.PLAYLISTS)));var Ce=b(Te,2),Be=h(Ce);de(()=>fe(Be,(s(pe),x(()=>s(pe).name)))),z("click",_e,()=>ne(s(pe).name)),m(we,_e)};U(Ee,we=>{s(pe),x(()=>s(pe).name!=="Favorites")&&we(Me)})}m(j,xe)});var oe=b(F,2);{var se=j=>{var pe=Jv();m(j,pe)};U(oe,j=>{a(),x(()=>a().filter(pe=>pe.name!=="Favorites").length===0)&&j(se)})}m(q,N)},ee=q=>{var N=sd(),F=Se(N),oe=h(F),se=h(oe);ue(se,()=>(W(w),x(()=>w.NEXT)));var j=b(F,2),pe=h(j),xe=h(pe);ue(xe,()=>(W(w),x(()=>w.MENU)));var Ee=b(j,2),Me=h(Ee),we=h(Me);ue(we,()=>(W(w),x(()=>w.ADD_TO_PLAYLIST||w.ADD)));var _e=b(Ee,2);{var Te=Ue=>{var Ke=td(),Ye=Se(Ke),$e=h(Ye),je=h($e);ue(je,()=>(W(w),x(()=>w.ALBUM_LINK||w.ALBUMS)));var tt=b(Ye,2),nt=h(tt),Kt=h(nt);ue(Kt,()=>(W(w),x(()=>w.ARTIST_LINK||w.ARTISTS))),z("click",Ye,me),z("click",tt,$),m(Ue,Ke)};U(_e,Ue=>{s(u)||Ue(Te)})}var Fe=b(_e,2),Ce=h(Fe);let Be;var ze=h(Ce);ue(ze,()=>(s(c),W(w),x(()=>s(c)?w.HEART_FILLED:w.HEART)));var le=b(Ce,2),Y=h(le),Q=b(Fe,2);{var ye=Ue=>{var Ke=nd(),Ye=b(Se(Ke),2),$e=h(Ye),je=h($e);ue(je,()=>(W(w),x(()=>w.REMOVE))),z("click",Ye,D),m(Ue,Ke)};U(Q,Ue=>{s(o)&&Ue(ye)})}var Pe=b(Q,2);{var He=Ue=>{var Ke=rd(),Ye=b(Se(Ke),2),$e=h(Ye),je=h($e);ue(je,()=>(W(w),x(()=>w.REMOVE))),z("click",Ye,J),m(Ue,Ke)};U(Pe,Ue=>{s(v)&&Ue(He)})}de(()=>{Be=Ne(Ce,1,"icon svelte-l8h85k",null,Be,{liked:s(c)}),fe(Y,s(c)?"Unlike":"Like")}),z("click",F,Z),z("click",j,ae),z("click",Ee,he),z("click",Fe,ce),m(q,N)};U(K,q=>{s(C)==="playlists"?q(ve):q(ee,!1)})}Dn(T,q=>g(k,q),()=>s(k)),de(()=>Ze(T,s(d))),Ma(T,"clientHeight",q=>g(_,q)),Ma(T,"clientWidth",q=>g(E,q)),Rt(3,T,()=>Ii,()=>({start:.95,duration:100})),z("click",T,Ot(function(q){Gr.call(this,t,q)})),z("click",P,X),Rt(3,P,()=>wn,()=>({duration:100})),m(S,P)};U(I,S=>{n(),x(()=>n().isOpen)&&S(te)})}Ta("innerWidth",S=>g(p,S)),Ta("innerHeight",S=>g(y,S)),m(e,B),ft(),l()}const Ha={init(){this.handleHashChange(),window.addEventListener("hashchange",()=>this.handleHashChange())},handleHashChange(){let e=window.location.hash.slice(1);for(;e.startsWith("/");)e=e.slice(1);if(!e){(Re(At).length>1||Re(xt)==="search")&&(this.setRootTab("artists"),window.location.hash="/artists");return}let t,n;const r=e.indexOf("/");r===-1?(t=e,n=null):(t=e.slice(0,r),n=e.slice(r+1));const a=n?decodeURIComponent(n):null,l=bc()||(a?{name:a,displayName:a}:null);switch(console.log(`[Router] Match: ${t}, Param: ${a}`),t){case"queue":this.setRootTab("queue");break;case"radio":this.setRootTab("radio");break;case"playlists":this.setRootTab("playlists");break;case"favorites":xt.set("favorites"),At.set([{view:"root"},{view:"details",data:{name:"Favorites",displayName:"Favorites"}}]);break;case"artists":this.setRootTab("artists");break;case"albums":this.setRootTab("albums");break;case"search":xt.set("search"),a&&Jr.set(a),At.set([{view:"root"}]);break;case"album":xt.set("albums"),At.set([{view:"root"},{view:"tracks_by_album",data:l}]);break;case"artist":xt.set("artists"),At.set([{view:"root"},{view:"albums_by_artist",data:l}]);break;case"playlist":xt.set("playlists"),At.set([{view:"root"},{view:"details",data:l}]);break;default:console.warn(`[Router] Unknown route: ${t}`),this.setRootTab("artists");break}},setRootTab(e){xt.set(e),At.set([{view:"root"}])},updateUrl(e,t){let n="";if(e==="root"){const r=Re(xt);if(r==="search"){const a=Re(Jr);n=a?`search/${encodeURIComponent(a)}`:"search"}else n=r}else if(e==="details"){const r=t.name||t;r==="Favorites"?n="favorites":n=`playlist/${encodeURIComponent(r)}`}else if(e==="albums_by_artist"){const r=t.name||t;n=`artist/${encodeURIComponent(r)}`}else if(e==="tracks_by_album"){const r=t.name||t;n=`album/${encodeURIComponent(r)}`}else e==="queue"&&(n="queue");if(n){const r=`#/${n}`;decodeURIComponent(window.location.hash)!==decodeURIComponent(r)&&(window.location.hash=`/${n}`)}}};var od=M("<!> <!>",1);function ld(e,t){dt(t,!1),dr(async()=>{Ha.init(),mc((i,l)=>{Ha.updateUrl(i,l)}),ji(),Ys.loadRadioStations();try{const i=await _n.getArtists();i.length>0?console.log(`[App] Database ready. Loaded ${i.length} artists from cache.`):(console.log("[App] Database empty. Starting initial sync..."),Ys.syncLibrary())}catch(i){console.error("[App] DB Check failed:",i),Oe("Local DB error. Please update library manually.","error")}}),bt();var n=od(),r=Se(n);Xv(r,{});var a=b(r,2);id(a,{}),m(e,n),ft()}al(ld,{target:document.getElementById("app")});
